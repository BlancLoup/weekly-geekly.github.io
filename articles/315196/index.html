<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CSS Gateway Math</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="CSS-lock (CSS-lock) is a technique from responsive web design, which allows not to jump from one value to another, but to move smoothly, depending on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CSS Gateway Math</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/b15/4e3/f69/b154e3f690cf4709957005f22f02b096.png"></div><br>  CSS-lock (CSS-lock) is a technique from responsive web design, which allows not to jump from one value to another, but to move smoothly, depending on the current size of the viewport.  The idea and one of the implementations suggested by Tim Brown in the article <a href="http://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/">Flexible typography with CSS locks</a> .  When I tried to figure out its implementation and create my own variants, I hardly managed to understand what was happening.  I did a lot of calculations and thought it would be useful to explain all this math to others. <br><br>  In the article I will describe the methodology itself, its limitations and the underlying mathematics.  Do not worry: there is basically one addition and subtraction.  In addition, I tried to break everything into stages and decorated them with graphs. <br><a name="habracut"></a><br><h1>  What is a CSS gateway? </h1><br><h3>  Dependence on the size of the viewing area </h3><br>  In my latest projects, a full-width banner was used with a header and only desktop templates with large fonts.  I decided that I needed small fonts for small screens and something for screens of intermediate sizes.  So why not make the font size dependent on the width of the viewing area? <br><br>  Previously, it was done like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">4vw</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* ! . */</span></span> }</code> </pre> <br>  This approach has two problems: <br><br><ol><li>  On very small screens, the text becomes tiny (12.8 pixels in height with a screen width of 320 pixels), on large ones - huge (64 at 1600); </li><li>  Custom font size settings are not taken into account. </li></ol><br>  CSS gateways get rid of the first problem.  <b>Remarkable</b> CSS gateways will also try to accommodate user preferences. <br><br><h3>  CSS Gateway Idea </h3><br>  A CSS gateway is a special kind of calculation of a CSS value, where: <br><br><ul><li>  there is a minimum and maximum value </li><li>  there are two control points (breakpoint) (usually depend on the width of the viewport), </li><li>  between these points, the value varies linearly from minimum to maximum. </li></ul><br><img src="https://habrastorage.org/files/ca5/71e/a9b/ca571ea9b08d4f539666360eb2bc4d9b.png"><br><br>  "With a width of less than 320 pixels, we will use 20px fonts, over 960 pixels - 40px, and between 320 and 960 - from 20px to 40px." <br><br>  On the CSS side, this might look like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1.25rem</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-comment"><span class="hljs-comment">/*    1.25 rem  2.5 rem */</span></span>; } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">2.5rem</span></span>; } }</code> </pre> <br>  The first task is to implement the <b>magic value</b> .  A bit of fun for you and tell you right away that it looks like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(1.25rem + viewport_relative_value); }</code> </pre> <br>  Here, <code>viewport_relative_value</code> can be a single value (for example, <code>3vw</code> ) or be a more complex calculation (based on the unit of measurement of the viewing area <code>vw</code> or some other unit). <br><br><h3>  Restrictions </h3><br>  Because CSS gateways are tied to viewing area units, gateways have a number of important limitations.  <b>They can only take numeric values, use</b> <code>calc()</code> <b>and take values ‚Äã‚Äãin pixels</b> . <br><br>  Why is that?  Because the units of measurement of the viewing area ( <code>vw</code> , <code>vh</code> , <code>vmin</code> and <code>vmax</code> ) are always defined in pixels.  For example, if the width of the viewport is 768 pixels, then <code>1vw</code> is defined as 7.68 pixels. <br><br>  (In Tim's article there is an error: he writes that calculations like <code>100vw - 30em</code> give the value of <code>em</code> . This is not the case. The browser counts <code>100vw</code> in pixels and subtracts the value of <code>30em</code> for this element and property from it.) <br><br>  Some examples of what <b>does not</b> work: <br><br><ul><li>  The CSS gateway for the <code>opacity</code> property, because <code>opacity: calc(.5+1px)</code> is an error; </li><li>  The CSS gateway for most <code>transform</code> functions (for example, <code>rotate</code> : the gateway cannot rotate based on the value in pixels). </li></ul><br>  So, we have a pixel limit.  Maybe there will be brave men and calculate all the properties and techniques that <b>can be</b> used in CSS-gateways. <br><br>  First, take the <code>font-size</code> and <code>line-height</code> properties and see how you can create CSS gateways with control points based on pixels or em. <br><br><h1>  CSS Gateways with Pixel Checkpoints </h1><br><h3>  Demos </h3><br><ul><li>  <a href="https://fvsch.com/code/css-locks/demo1">CSS calc lock for font-size (rem + px, px MQ)</a> </li><li>  <a href="https://fvsch.com/code/css-locks/demo2">CSS calc lock for line-height (% + px, px MQ)</a> </li><li>  <a href="https://fvsch.com/code/css-locks/demo3">Combined font-size and line-height lock (px-based)</a> </li></ul><br>  Next we look at how to get the CSS for each of these examples. <br><br><h3>  Font size as a linear function </h3><br>  We need the font-size to increase proportionally from 20px with a width of 320px to 40px with a width of 960px.  Reflect this on the chart: <br><br><img src="https://habrastorage.org/files/d9a/10e/267/d9a10e267b7e4b1888822742311eb49d.png"><br><br>  The red line is a graph of a linear function.  You can write it as <code>y = mx + b</code> : <br><br><ul><li>  <code>y</code> is the font size (vertical axis), </li><li>  <code>x</code> is the width of the viewing area in pixels (horizontal axis), </li><li>  <code>m</code> is the slope function (how many pixels do we add to the font size as the viewing area increases by 1 pixel), </li><li>  <code>b</code> is the font size before we begin to increase the size of the viewport. </li></ul><br>  We need to calculate <code>m</code> and <code>b</code> .  In the equation, they are constants. <br><br>  First, let's deal with <code>m</code> .  To do this, only the coordinates <code>(x,y)</code> are needed.  This is similar to calculating the speed (distance traveled per unit of time), but in this case we calculate the font size depending on the width of the viewing area: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">font_size_increase</span></span> / <span class="hljs-selector-tag"><span class="hljs-selector-tag">viewport_increase</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">y2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span>) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (40 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 20) / (960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 320) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = 20 / 640 <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span></code> </pre> <br>  Other form: <br><br>  The total font-size increase is 20 pixels ( <code>40 - 20</code> ). <br>  The overall reduction of the viewing area is 640 pixels ( <code>960 - 320</code> ). <br>  If the width of the area grows by 1 pixel, how much will the font-size increase? <br><br> <code>20 / 640 = 0.03125 px.</code> <br> <br>  Now we calculate <code>b</code> . <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125x</span></span></code> </pre> <br>  Since our function is tested using both of these points, we can use the <code>(x,y)</code> coordinates of any of them.  Take the first: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = 20 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span> √ó 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = 10</code> </pre> <br>  By the way, it was possible to calculate these 10 pixels simply by looking at the graph.  But he is not always with us :-) <br><br>  Now our function looks like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125x</span></span> + 10</code> </pre> <br><h3>  CSS conversion </h3><br>  <code>y</code> is the font-size, and if we want to perform basic operations in CSS, we need <code>calc()</code> . <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">font-size</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125x</span></span> + 10<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> );</code> </pre> <br>  Of course, this is a pseudo-CSS, because <code>x</code> not a valid syntax.  But in our linear function, <code>x</code> represents the width of the viewport, which in CSS can be expressed as <code>100vw</code> . <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">font-size</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span> * 100<span class="hljs-selector-tag"><span class="hljs-selector-tag">vw</span></span> + 10<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> );</code> </pre> <br>  Now it‚Äôs working CSS.  If you need to express more briefly, we will perform multiplication  Since <code>0.03125 √ó 100 = 3.125</code> , then: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">font-size</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 3<span class="hljs-selector-class"><span class="hljs-selector-class">.125vw</span></span> + 10<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> );</code> </pre> <br>  Now we will limit the width of the viewport to 320 and 960 pixels.  Add some media queries: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 3.125vw + 10px ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">40px</span></span>; } }</code> </pre> <br>  Now our schedule looks as it should: <br><br><img src="https://habrastorage.org/files/ca5/71e/a9b/ca571ea9b08d4f539666360eb2bc4d9b.png"><br><br>  Nice, but I don‚Äôt really like the values ‚Äã‚Äãin pixels when declaring a font-size.  Is it possible to do better? <br><br><h3>  Apply custom settings </h3><br>  Virtually every browser allows users to set the default text size.  Most often it is initially equal to 16 pixels, but sometimes it is changed (usually enlarged). <br>  I want to insert custom settings into our formula and for this I will pay attention to the <code>rem</code> values.  For <code>em</code> and percentage values, the same principle applies. <br><br>  First, we check that the base (root) font-size is not assigned an absolute value.  For example, if you use CSS from Bootstrap 3, there are quite a few of these: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; }</code> </pre> <br>  <b>Never do that!</b>  (Fortunately, this is fixed in Bootstrap 4.) If you really need to change the value of the base em ( <code>1rem</code> ), use: <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* *   rem   . *     font-size 16 : * ‚Ä¢ 62.5% -&gt; 1rem = 10px, .1rem = 1px * ‚Ä¢ 125% -&gt; 1rem = 20px, .05rem = 1px */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">62.5%</span></span>; }</code> </pre> <br>  Nevertheless, let's leave the basic font-size alone, let it be 16 pixels by default.  Let's see what happens if in our font-size-gateway we replace the pixel values ‚Äã‚Äãwith the <code>rem</code> values: <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* *     : * ‚Ä¢ 0.625rem = 10px * ‚Ä¢ 1.25rem = 20px * ‚Ä¢ 2.5rem = 40px */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1.25rem</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 3.125vw + .625rem ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">2.5rem</span></span>; } }</code> </pre> <br>  If you run the code with the browser default settings, it will behave like the previous code that used pixels.  Wonderful! <br><br>  But since we did this in order to support <b>changes</b> made by users, we need to check how everything works.  Suppose the user specified a font size of 24 pixels instead of 16 (50% more).  How will the code behave? <br><br><img src="https://habrastorage.org/files/73f/fd2/55b/73ffd255be3f4526a949e312f82866c2.png"><br><br>  Blue line: the default font-size is 16 pixels. <br>  Red line: the default font-size is 24 pixels. <br><br>  As the area is increased, viewing to 320 pixels becomes <b>smaller</b> (from 30 pixels to 25), and when the second control point is reached it increases in steps (from 45 to 60 pixels).  Oh. <br><br>  The same user-adjusted baseline value for all three sizes will help fix this.  For example, choose <code>1.25rem</code> : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1.25rem</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem + 3.125vw - 10px ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem + 20px ); } }</code> </pre> <br>  Pay attention to <code>3.125vw - 10px</code> .  This is our old linear function (as <code>mx + b</code> ), but with a different value <code>b</code> .  Call it <code>b‚Ä≤</code> .  In this case, we know that the base value is 20 pixels, so we can get the value of <code>b‚Ä≤</code> simple subtraction: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">baseline_value</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 10 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 20 <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 10</code> </pre> <br>  Another way is to choose a base value <b>from the very beginning</b> , and then look for a linear function describing <b>the</b> font-size <b>increase</b> (let's call it <code>y‚Ä≤</code> , so as not to be confused with the value of the font-size <code>y</code> ). <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> = 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> = 960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1 = 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤2 = 20 <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (20 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0) / (960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 320) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = 20 / 640 <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.03125</span></span> √ó 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">-10</span></span></code> </pre> <br>  We got the function <code>y‚Ä≤ = 0.03125x - 10</code> , which looks like this: <br><br><img src="https://habrastorage.org/files/069/331/63d/06933163d15742dca038534d7b32096a.png"><br><br>  With the base value in <code>rem</code> and the additional values ‚Äã‚Äãin <code>vw</code> and / or <code>px</code> we can finally create a full-fledged working gateway for the font-size.  When the user changes the default font size, the system adapts to it and does not break. <br><br><img src="https://habrastorage.org/files/17a/cae/604/17acae604fa342079ffcb35098381e2f.png"><br><br>  Purple line: font-size magnification. <br>  Blue line: the default font-size is 16 pixels. <br>  Red line: the default font-size is 24 pixels. <br><br>  Of course, this is not exactly what the user requested: he wanted to increase the font by 50%, and we increased it by 50% in small viewing areas and by 25% in large ones.  But this is a good compromise. <br><br><h3>  Creating a gateway for row height </h3><br>  In this case, we will have the following scenario: ‚ÄúI want paragraphs with a line height of 140% with a viewing area width of 320 pixels and 180% at 960‚Äù. <br><br>  Since we will work with the base value <b>plus a dynamically changing value, expressed in pixels</b> , we need to know how many pixels are the coefficients of 1.4 and 1.8.  That is, you need to calculate the <code>font-size</code> for our paragraphs.  Suppose the base font size is 16 pixels.  We get: <br><br><ul><li>  <code>16 * 1.4 = 22.4</code> pixels with lower viewport size ( <code>320 px</code> ) </li><li>  <code>16 * 1.8 = 28.8</code> pixels with top viewport size ( <code>960 px</code> ) </li></ul><br>  As a base value, we take <code>140% = 22.4px</code> .  It turns out that the overall font increase is 6.4 pixels.  Let's use our linear formula: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> = 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> = 960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1 = 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤2 = 6<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (6<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0) / (960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 320) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = 6<span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> / 640 <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.01</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.01</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.01</span></span> √ó 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 3<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.01x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span></code> </pre> <br>  Convert to CSS: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">line-height</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 140% + 1<span class="hljs-selector-tag"><span class="hljs-selector-tag">vw</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.2px</span></span> );</code> </pre> <br>  <b>Note</b> : the base value must be expressed as 140% or <code>1.4em</code> ;  dimensionless <code>1.4</code> will not work inside <code>calc()</code> . <br><br>  Then we add media queries and check that <b>all</b> <code>line-height</code> ads use the same base value ( <code>140%</code> ). <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">140%</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 1vw - 3.2px ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 6.4px ); } }</code> </pre> <br>  <b>I remind you that</b> for a large viewing area you cannot simply use <code>180%</code> , we need the part expressed in pixels, which is added to the base value.  If you take <code>180%</code> , then with a basic font size of 16 pixels, everything will be fine until the user changes it. <br><br>  We will build a graph and check the operation of the code with different basic font-size values. <br><br><img src="https://habrastorage.org/files/a4c/357/6c6/a4c3576c6f834b1c9d727aa8cb219744.png"><br><br>  Blue line: the default font-size is 16 pixels. <br>  Red line: the default font-size is 24 pixels. <br><br>  Now that our <code>line-height</code> formula depends on the element's own font-size, changing the font size will change the formula.  For example, <a href="https://fvsch.com/code/css-locks/demo2">this demo</a> shows a paragraph with an enlarged text defined as: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">166%</span></span>; }</code> </pre> <br>  This changes our control points: <br><br><ul><li>  <code>16 * 1.66 * 1.4 = 37.184</code> pixels with a lower viewport size ( <code>320px</code> ) </li><li>  <code>16 * 1.66 * 1.8 = 47.808</code> pixels with the top viewport size ( <code>960px</code> ) </li></ul><br>  We perform calculations and obtain the updated formula: <code>y‚Ä≤ = 0.0166x - 5.312</code> .  Then combine this and previous stylesheets in CSS: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">140%</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">166%</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 1vw - 3.2px ); } <span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 1.66vw - 5.312px ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 6.4px ); } <span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 10.624px ); } }</code> </pre> <br>  You can also assign calculations to CSS.  Since we use the same control points and relative line-heights sizes as for the standard paragraph, we just need to add a factor of 1.66: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">140%</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">166%</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 1vw - 3.2px ); } <span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + (1vw - 3.2px) * <span class="hljs-number"><span class="hljs-number">1.66</span></span> ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 6.4px ); } <span class="hljs-selector-class"><span class="hljs-selector-class">.big</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + 6.4px * 1.66 ); } }</code> </pre> <br><h3>  Union of font-size and line-height gateways </h3><br>  Now let's try to put everything together.  Scenario: there is an adaptive text column (fluid column) with H1 and several paragraphs.  We need to change the font-size and line-height using the following values: <br><br><table><tbody><tr><td>  <b>Element and property</b> </td><td>  <b>Value at 320px</b> </td><td>  <b>Value at 960px</b> </td></tr><tr><td>  H1 font-size </td><td>  24 pixels </td><td>  40 pixels </td></tr><tr><td>  H1 line-height </td><td>  133.33% </td><td>  120% </td></tr><tr><td>  P font-size </td><td>  15 pixels </td><td>  18 pixels </td></tr><tr><td>  P line-height </td><td>  150% </td><td>  166.67% </td></tr></tbody></table><br>  You will see that with the height of the line we do two things.  There is a general rule: when the text increases, the height of the line needs to be reduced, and when the column becomes wider - to increase.  But in our scenario at the same time both situations occur, contradicting each other!  Therefore, you need to choose priorities: <br><br><ul><li>  For H1, increasing the font-size will be more critical than increasing the width of the column. </li><li>  For paragraphs, increasing the width of a column will be more critical than a small increase in font-size. </li></ul><br>  Now select two control points - a viewing area of ‚Äã‚Äã320 and 960 pixels wide.  Let's start by writing a font-size gateway: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1.5rem</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* .9375rem = 15px     */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: .<span class="hljs-number"><span class="hljs-number">9375rem</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.5rem + 2.5vw - 8px ); } <span class="hljs-comment"><span class="hljs-comment">/* .46875vw - 1.5px   0  3px */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( .9375rem + .46875vw - 1.5px ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(1.5rem + 16px); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( .9375rem + 3px ); } }</code> </pre> <br>  Nothing new here, only the values ‚Äã‚Äãhave changed. <br><br>  Now we are calculating gateways for <code>line-height</code> .  It will be much more difficult than last time. <br><br>  Let's start with the element H1.  For <code>line-height</code> use the relative base value - 120%.  Since we change the font size of the element, this 120% allows us to describe the dynamic and linear value defined by two points: <br><br><ul><li>  <code>24 √ó 1.2 = 28.8px</code> in the lower control point, </li><li>  <code>40 √ó 1.2 = 48px</code> in the upper control point. </li></ul><br>  In the lower control point, we need to have a <code>line-height</code> value of 133.33%, which is about 32 pixels. <br><br>  We find a linear function describing "what is added to the base value of 120%."  If we remove these 120%, we get two modified values: <br><br><ul><li>  <code>24 √ó (1.3333 - 1.2) = 3.2px</code> at the lower control point, </li><li>  <code>40 √ó (1.2 - 1.2) = 0px</code> in the upper control point. </li></ul><br>  Should get a negative slope. <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (0 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span>) / (960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 320) <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">-3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> / 640 <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">-0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.005</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">-0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.005</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 3<span class="hljs-selector-class"><span class="hljs-selector-class">.2</span></span> + 0<span class="hljs-selector-class"><span class="hljs-selector-class">.005</span></span> √ó 320 <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span>‚Ä≤ = 4<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">-0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.005x</span></span> + 4<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span></code> </pre> <br>  Convert to CSS: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 120% - .5vw + 4.8px ); }</code> </pre> <br>  Let's look at the chart: <br><br><img src="https://habrastorage.org/files/ab3/6d4/ab7/ab36d4ab713a40b48844be4e28b75704.png"><br><br>  Blue line: decrease line-height. <br>  Red line: the basic value of line-height (120% font-size header). <br>  Purple line: final line-height. <br><br>  The graph shows that the resulting row height (the magenta line) is equal to the base value of 120% plus a decrease in the row height (the blue line).  You can check the calculations yourself on <a href="http://www.graphsketch.com/%3Feqn1_color%3D2%26eqn1_eqn%3D%252816%2520%252B%25200.025x%2529*1.2%26eqn2_color%3D1%26eqn2_eqn%3D-0.005x%2520%252B%25204.8%26eqn3_color%3D5%26eqn3_eqn%3D%252816%2520%252B%25200.025x%2529*1.2%2520%252B%2520%2528-0.005x%2520%252B%25204.8%2529%26eqn4_color%3D6%26eqn4_eqn%3D%26eqn5_color%3D6%26eqn5_eqn%3D%26eqn6_color%3D6%26eqn6_eqn%3D%26x_min%3D-80%26x_max%3D1200%26y_min%3D-10%26y_max%3D65%26x_tick%3D80%26y_tick%3D5%26x_label_freq%3D4%26y_label_freq%3D2%26do_grid%3D0%26do_grid%3D1%26bold_labeled_lines%3D0%26line_width%3D3%26image_w%3D1200%26image_h%3D800">GraphSketch.com</a> . <br><br>  For paragraphs, we will use a base value of <code>150%</code> .  Increase line-height: <br><br><pre> <code class="css hljs">(1<span class="hljs-selector-class"><span class="hljs-selector-class">.75</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span>) √ó 18 = 4<span class="hljs-selector-class"><span class="hljs-selector-class">.5px</span></span>.</code> </pre> <br><img src="https://habrastorage.org/files/ccb/9d2/50f/ccb9d250f21a4ae4894315d0e2d3f42c.png"><br><br>  <a href="http://acqualia.com/soulver/">My calculator</a> says that the formula will be as follows: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.00703125x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 2<span class="hljs-selector-class"><span class="hljs-selector-class">.25</span></span></code> </pre> <br>  To see the full CSS code, take a look at the source code of the <a href="https://fvsch.com/code/css-locks/demo3">demo, which combines font-size and line-height</a> .  Changing the size of the browser window, you make sure that the effect is, albeit weak. <br><br>  I also recommend testing this demo by changing the default font size.  Please note that here the line-height ratio will be slightly different, but quite acceptable.  There is nothing wrong with the line-height becoming less than the base value. <br><br><h3>  Automation of calculations </h3><br>  In preparing this section, I did all the calculations manually or with the Soulver calculator.  But it is rather laborious, and the probability of errors is high.  To eliminate the human factor, it would be good to implement automation. <br><br>  The first way is to transfer all calculations to CSS.  This is a variant of the formula used in the examples with the font-size, when all values ‚Äã‚Äãwere sorted out in detail: <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">959px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( /* y1 */ 1.5rem /* + m √ó x */ + ((40 - 24) / (<span class="hljs-number"><span class="hljs-number">960</span></span> - <span class="hljs-number"><span class="hljs-number">320</span></span>)) * <span class="hljs-number"><span class="hljs-number">100vw</span></span> <span class="hljs-comment"><span class="hljs-comment">/* - m √ó x1 */</span></span> - ((<span class="hljs-number"><span class="hljs-number">40</span></span> - <span class="hljs-number"><span class="hljs-number">24</span></span>) / (<span class="hljs-number"><span class="hljs-number">960</span></span> - <span class="hljs-number"><span class="hljs-number">320</span></span>)) * <span class="hljs-number"><span class="hljs-number">320px</span></span> ); } }</code> </pre> <br>  But it turns out too many letters, you can write much more concisely: <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">959px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.5rem + 16 * (100vw - 320px) / (<span class="hljs-number"><span class="hljs-number">960</span></span> - <span class="hljs-number"><span class="hljs-number">320</span></span>) ); } }</code> </pre> <br>  Coincidentally, Tim Brown used this formula in the article <a href="http://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/">Flexible typography with CSS locks</a> , but with pixels instead of <code>em</code> in the variable value.  This works for the combined version with font-size and line-height, but may not be so obvious, especially with a negative slope. <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">959px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.5rem + 16 * (100vw - 320px) / (<span class="hljs-number"><span class="hljs-number">960</span></span> - <span class="hljs-number"><span class="hljs-number">320</span></span>) ); <span class="hljs-comment"><span class="hljs-comment">/*        */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 120% + 3.2 * (100vw - 960px) / (<span class="hljs-number"><span class="hljs-number">320</span></span> - <span class="hljs-number"><span class="hljs-number">960</span></span>) ); } }</code> </pre> <br>  The second way is to automate calculations using the Sass plugin or PostCSS mixin. <br><br><h1>  CSS gateways with em control points </h1><br><h3>  New demos </h3><br>  I took the first three demos and instead of the pixel values ‚Äã‚Äãof the control points and increments I inserted values ‚Äã‚Äãbased on <code>rem</code> . <br><br><ul><li>  <a href="https://fvsch.com/code/css-locks/demo5">CSS calc lock for font-size (rem + rem, em MQ)</a> </li><li>  <a href="https://fvsch.com/code/css-locks/demo6">CSS calc lock for line-height (% + rem, px MQ)</a> </li><li>  <a href="https://fvsch.com/code/css-locks/demo7">Combined font-size and line-height lock (em / rem-based)</a> </li></ul><br>  In the next section, we will look at how specific syntax works in these demos. <br><br><h3>  The m √ó 100vw syntax for em-based media queries is not a good idea. </h3><br>  Above, we used the <code>m √ó 100vw</code> (for example, <code>calc(base + 2.5vw)</code> ).  It cannot be used with <code>em</code> based media queries. <br><br>  It's all in the context of media queries.  The <code>em</code> and <code>rem</code> units refer to the same thing: the base font size in the User Agent.  And, as we have already seen several times, it is usually 16 pixels, but the value may be different.  Why? <br><br><ol><li>  At the behest of the browser or OS (mainly in specific cases like TV browsers and readers). </li><li>  By the will of the user. </li></ol><br>  So if we have control points of <code>20em</code> and <code>60em</code> , they will correspond to the real CSS-width: <br><br><ul><li>  320 and 960 pixels with a basic font size of 16 pixels, </li><li>  480 and 1440 - with 24 pixels, etc. </li></ul><br>  (Note that these are <b>CSS pixels</b> , not <b>hardware pixels</b> . In the article, we do not consider hardware pixels, since they do not affect our calculations.) <br><br>  Above are examples of code like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">font-size</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 3<span class="hljs-selector-class"><span class="hljs-selector-class">.125vw</span></span> + <span class="hljs-selector-class"><span class="hljs-selector-class">.625rem</span></span> );</code> </pre> <br>  If in this syntax we replace all control points with the use of <code>em</code> , assuming that in the media query 1 em is 16 pixels, we get: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1.25rem</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*    :((( */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">20em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem + 3.125vw - 10px ); } } <span class="hljs-comment"><span class="hljs-comment">/*  . */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">60em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem + 20px ); } }</code> </pre> <br>  This will work if the OS, browser and user never change the default font size.  Otherwise it will be bad: <br><br><img src="https://habrastorage.org/files/74a/96b/9ad/74a96b9ade504fffaf9bff000b0ad9f0.png"><br><br>  Blue line: the default font-size is 16 pixels. <br>  Red line: the default font-size is 24 pixels. <br><br>  What's going on here?  When we change the base font-size, <code>em</code> based control points are shifted to higher pixel values.  The only true value for specific points would be <code>3.125vw - 10px</code> ! <br><br><ul><li>  At 320 pixels <code>3.125vw - 10px</code> is 0 pixels, as it should be. </li><li>  At 480 pixels <code>3.125vw - 10px</code> is 5 pixels. </li></ul><br>  At high control points even worse: <br><br><ul><li>  At 960 pixels <code>3.125vw - 10px</code> is equal to 20 pixels, as it should be. </li><li>  At 1440 pixels <code>3.125vw - 10px</code> is equal to 35 pixels (15 more). </li></ul><br>  If you want to use <code>em</code> based controls, you need to do otherwise. <br><br><h3>  Again perform calculations </h3><br>  This technique is demonstrated in the <a href="http://blog.typekit.com/2016/08/17/flexible-typography-with-css-locks/">article by Tim Brown</a> .  It implies that most calculations are done in CSS using two variable parts: <br><br><ul><li>  <code>100vw</code> - width of the viewing area; </li><li>  lower checkpoint expressed in <code>rem</code> . </li></ul><br>  We use the formula: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>)</code> </pre> <br>  Why her?    .   ,  font-size  line-height    : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span></code> </pre> <br><br>  CSS    <code>x</code> ( <code>100vw</code> ).    <code>m</code>  <code>b</code>      <code>vw</code> ,    ,   ,        ,   <code>em</code> ,       . <br><br>   <code>m</code>  <code>b</code>   ,   <code>(x1,y1)</code>  <code>(x2,y2)</code> . <br><br>  <code>b</code>     : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span></code> </pre> <br>   : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span></code> </pre> <br>   <code>b</code>  ! <br><br>    ,           <code>font-size</code>  <code>line-height</code> ,   <b> </b> ,     <b> </b> .    <code>y‚Ä≤</code>    : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span></code> </pre> <br>  <code>y</code>    : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">mx</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span></code> </pre> <br>      <code>+ y1</code>  <code>- y1</code> ! <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> √ó (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>)</code> </pre> <br>    <code>m</code>   : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">m</span></span> = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">y2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span>) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>)</code> </pre> <br>  Then: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">y2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">y1</span></span>) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) √ó (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>)</code> </pre> <br>     : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">y</span></span>‚Ä≤ = <span class="hljs-selector-tag"><span class="hljs-selector-tag">max_value_increase</span></span> √ó (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>)</code> </pre> <br><h3>   CSS </h3><br>       CSS.      ¬´ 20  40 ¬ª: <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">20em</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">60em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* :    ! */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem /*   */ + 20px /*       */ * (100vw - 20rem) <span class="hljs-comment"><span class="hljs-comment">/* x - x1 */</span></span> / (<span class="hljs-number"><span class="hljs-number">60rem</span></span> - <span class="hljs-number"><span class="hljs-number">20rem</span></span>) <span class="hljs-comment"><span class="hljs-comment">/* x2 - x1 */</span></span> ); } }</code> </pre> <br>    . ,     ,  <code>calc()</code>  CSS   ,     . <br><br>    <code>100vw - 20rem</code> .          . <br><br> ,  font-size   ‚Äî 16 ,     ‚Äî 600 ,    280  ( <code>600 - 20 √ó 15</code> ).  font-size   ‚Äî 24 ,     ‚Äî 600 ,    120  ( <code>600 - 20 √ó 24</code> ). <br><br><img src="https://habrastorage.org/files/fd0/517/82c/fd051782ced047da88e4216d47ffad9e.png"><br><br>  ,          <code>rem</code> .   <code>em</code> ?    CSS- <code>em</code>  <b></b>   font-size,    font-size  ( )     font-size (   <code>font-size</code> ). <br><br>     CSS ‚Äî  ,       .     .   ‚Äî  <code>rem</code> ,     font-size,  <b>    </b> . <br><br>     CSS         : <br><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:root</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/* ,      ,  20rem/1.25, 40em/1.25  . . */</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:root</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">125%</span></span>; }</code> </pre> <br><h3>     calc </h3><br>    <code>60rem - 20rem</code>    .   ,   <code>(x - x1) / (x2 - x1)</code>       0  1.   <code>n</code> . <br><br>       16       600   : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">n</span></span> = (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) / (<span class="hljs-selector-tag"><span class="hljs-selector-tag">x2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">n</span></span> = (600 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 320) / (960 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 320) <span class="hljs-selector-tag"><span class="hljs-selector-tag">n</span></span> = 280 / 640 <span class="hljs-selector-tag"><span class="hljs-selector-tag">n</span></span> = 0<span class="hljs-selector-class"><span class="hljs-selector-class">.475</span></span></code> </pre> <br>  ,   . <br><br>   ,     <code>calc()</code>          - CSS-.    .    ? <br><br>         ?     <code>calc((100vw - 20rem)/(60 - 20))</code> ? <br><br><table><tbody><tr><td colspan="3"> <b>    ‚Äî 16 </b> </td></tr><tr><td> <b> </b> </td><td> <b>  CSS</b> </td><td>  <b>Result</b> </td></tr><tr><td> 20em (320px) </td><td> (320px ‚Äì 16px √ó 20) / (60 ‚Äì 20) </td><td> = 0px </td></tr><tr><td> 40em (640px) </td><td> (640px ‚Äì 16px √ó 20) / (60 ‚Äì 20) </td><td> = 8px </td></tr><tr><td> 60em (960px) </td><td> (960px ‚Äì 16px √ó 20) / (60 ‚Äì 20) </td><td> = 16px </td></tr><tr><td colspan="3"> <b>    ‚Äî 24 </b> </td></tr><tr><td> <b> </b> </td><td> <b>  CSS</b> </td><td>  <b>Result</b> </td></tr><tr><td> 20em (480px) </td><td> (480px ‚Äì 24px √ó 20) / (60 ‚Äì 20) </td><td> = 0px </td></tr><tr><td> 40em (960px) </td><td> (960px ‚Äì 24px √ó 20) / (60 ‚Äì 20) </td><td> = 12px </td></tr><tr><td> 60em (1440px) </td><td> (1440px ‚Äì 24px √ó 20) / (60 ‚Äì 20) </td><td> = 24px </td></tr></tbody></table><br>  ,      ( <code>20em</code>  <code>60em</code> )      <code>0rem</code>  <code>1rem</code> . ! <br><br>       CSS    <code>20px</code> .   . <br><br>   : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">font-size</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 1<span class="hljs-selector-class"><span class="hljs-selector-class">.25rem</span></span> + 20<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span> * <span class="hljs-selector-tag"><span class="hljs-selector-tag">n</span></span> );</code> </pre> <br>  <code>n</code>    0  1.  -     <code>calc()</code>         0  1. <br><br>        <code>0rem ‚Äî 1rem</code> ;    <code>r</code> . <br><br>   <code>calc()</code>   .   <code>calc(a * b)</code> ,  <code>a</code>  <code>b</code>    . <br><br>   <code>r</code>   ( ),      . <br><br>     20     . 20  ‚Äî  <code>1.25rem</code> ,     <code>1.25</code> : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">font-size</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">calc</span></span>( 1<span class="hljs-selector-class"><span class="hljs-selector-class">.25rem</span></span> + 1<span class="hljs-selector-class"><span class="hljs-selector-class">.25</span></span> * <span class="hljs-selector-tag"><span class="hljs-selector-tag">r</span></span> );</code> </pre> <br>  .    ,   <code>r</code>         : <br><br><ul><li> 16 : <code>1.25 * r</code>   0  20 . </li><li> 24 : <code>1.25 * r</code>   0  30 . </li></ul><br>     CSS- ,  media-,    : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">1.25rem</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">20em</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/*  (100vw - 20rem) / (60 - 20)   0-1rem,       ( 20em  60em). */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem + 1.25 * (100vw - 20rem) / (<span class="hljs-number"><span class="hljs-number">60</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">60em</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/*      rem.          font-size: 2.5rem,         rem,    calc. */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 1.25rem + 1.25 * 1rem ); } }</code> </pre> <br>   ,     font-size,  ,         50%,      50%:  ,    .    30‚Äî60    20‚Äî40. <br><br><img src="https://habrastorage.org/files/ba4/530/acd/ba4530acd1074909acabca6b3fc9b7bf.png"><br><br>  : font-size    16 . <br>  : font-size    24 . <br><br>      <a href="https://fvsch.com/code/css-locks/demo5"> ,  em</a> . <br><br><h3>  line-height c em/rem </h3><br>       <code>line-height</code>   140%  180%.   <code>140%</code>    ,         ,      <code>font-size</code> . <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">140%</span></span>; } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">20em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + .4 * (100vw - 20rem) / (<span class="hljs-number"><span class="hljs-number">60</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">60em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">p</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 140% + .4 * 1rem ); } }</code> </pre> <br>    <code>line-height</code>   rem-,   <code>(100vw - 20rem) / (60 - 20)</code>        <code>0rem</code>  <code>1rem</code> . <br><br>  <code>font-size</code>     <code>1rem</code> ,      <code>40%</code>  <code>.4rem</code> .         <code>calc()</code> -. <br><br>    <a href="https://fvsch.com/code/css-locks/demo7"> </a>   <code>line-height</code> .   <b></b> <code>line-height</code> H1  133,33%  120%.   ,     <code>font-size</code> . <br><br>       ,           : <br><br><ul><li> <code>24 √ó (1.3333 - 1.2) = 3.2px</code>     , </li><li> <code>40 √ó (1.2 - 1.2) = 0px</code>     . </li></ul><br>      <code>120%</code> ,      3,2  0 .       16 ,  3,2  <code>= 0.2rem</code> ,     <code>.2</code> . <br><br> ,          ,      : <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 120% + 0.2 * 1rem ); } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">20em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( 120% + 0.2 * (100vw - 60rem) / (<span class="hljs-number"><span class="hljs-number">20</span></span> - <span class="hljs-number"><span class="hljs-number">60</span></span>) ); } } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">60em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">120%</span></span>; } }</code> </pre> <br>  : <br><br><ol><li>  <code>.2rem</code>  ,     font-size    24  40 .    ,      . </li><li>      ,    <code>(100vw - 60rem) / (20 - 60)</code>        <code>60em</code>   <code>20em</code> (). ,          16   <code>-640px / -40</code> .        ,    ,          <code>0.2</code> . </li></ol><br><h1>  Conclusion </h1><br>  .     CSS-: <br><br><ul><li>  ,    , </li><li>    <code>font-size</code>  <code>line-height</code> , </li><li>   ,     <code>em</code> . </li></ul><br>   ‚Äî   .        , ,   <code>font-size</code>    .               <code>em</code> .    ,      . <br><br> :      media-  <code>em</code> ,         .  <b></b>   <code>font-size</code>       CSS-: <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">20em</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">60em</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">property</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( baseline_value + multiplier * (100vw - 20rem) / (<span class="hljs-number"><span class="hljs-number">60</span></span> - <span class="hljs-number"><span class="hljs-number">20</span></span>) ); } }</code> </pre> <br>  <code>multiplier</code> ‚Äî    ,   <code>rem</code> ,   . : 0.75     <code>0.75rem</code> . <br><br>    media-  ,   <b></b>   <code>font-size</code> .     .       CSS-.   <code>em/rem</code> -,     : <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">property</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( baseline_value + multiplier * (100vw - 320px) / (<span class="hljs-number"><span class="hljs-number">960</span></span> - <span class="hljs-number"><span class="hljs-number">320</span></span>) ); } }</code> </pre> <br>  <code>multiplier</code> ‚Äî   <b> </b> ,   ,   . : <code>12</code>     <code>12px</code> . <br><br>          . ,  ,   ,      : <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">320px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">960px</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">selector</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">property</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>( baseline_value + 0.25vw - 10px; ); } }</code> </pre> <br>   <code>0.25vw</code>  <code>-10px</code>  , ,   Sass  PostCSS. <br><br>        (   mixin),           . </div><p>Source: <a href="https://habr.com/ru/post/315196/">https://habr.com/ru/post/315196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315186/index.html">CleverScrollbar.js - Sidebar for clear navigation</a></li>
<li><a href="../315188/index.html">The Rimworld paradox: the exciting sandbox plot</a></li>
<li><a href="../315190/index.html">Berkeley Unified Parallel C (UPC). Installing on Windows and Linux</a></li>
<li><a href="../315192/index.html">Release Rust 1.13</a></li>
<li><a href="../315194/index.html">SMART TV - the future of television</a></li>
<li><a href="../315200/index.html">Interprocess messaging performance in node.js</a></li>
<li><a href="../315202/index.html">Step to the ‚Äúbright SSD-future‚Äù</a></li>
<li><a href="../315204/index.html">Functional TypeScript</a></li>
<li><a href="../315206/index.html">7 arcade games that have already become classics, but still can teach something</a></li>
<li><a href="../315208/index.html">Conversion tracking after successfully sending an AJAX application form via Google Tag Manager (GTM)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
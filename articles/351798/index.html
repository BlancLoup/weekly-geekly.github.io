<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Alert in Telegram and Slack in real time. Or How to Make an Alert in Splunk - Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the alert topic in Splunk. Earlier we talked about how to set up sending email alerts, and today we will show you how to send notification...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Alert in Telegram and Slack in real time. Or How to Make an Alert in Splunk - Part 2</h1><div class="post__text post__text-html js-mediator-article">  We continue the alert topic in Splunk.  Earlier we talked about how to set up sending email alerts, and today we will show you how to send notifications to instant messengers such as Telegram and Slack. <br> <a href="https://habrahabr.ru/company/tssolution/blog/351798/"><img src="https://habrastorage.org/webt/u2/x9/s5/u2x9s55nxwxy8pceotigac53xq4.png"></a> <br>  In the article you will find step by step instructions on how to set up. <br><a name="habracut"></a><br>  We will analyze both cases using the example of an alert about unsuccessful attempts to authenticate when entering Splunk (We wrote about how to create such an alert <a href="https://habrahabr.ru/company/tssolution/blog/351038/">in the previous article</a> ).  The log on which the request for the alert is based is recorded and indexed automatically and is available to all who have Splunk.  Therefore, even if you currently have no current task for alerts, then you can test everything with the same example as ours.  If you do not have Splunk and you do not know what it is, why you need it and how to install it, then you can read what we have written about it <a href="https://habrahabr.ru/company/tssolution/blog/323814/">earlier</a> . <br><br>  To each alert, you can add actions for its implementation.  By default, Splunk has notification capabilities in Splunk itself, writing an event to another index, writing to a directory, sending a message by e-mail or launching a custom script. <br><br>  To send messages to the messengers, we will need to install several free applications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#0075a9">Telegram</font> </h2><br>  1. Download the Telegram Alert Action application from the SplunkBase website at the following <a href="https://splunkbase.splunk.com/app/3703/">link</a> <br><br>  2. Install the application <br><br><div class="spoiler">  <b class="spoiler_title">(If you do not know how to do this, then open this item)</b> <div class="spoiler_text"><br><ul><li>  Go to Splunk Enterprise; </li><li>  In the application menu, click on the icon <b>Manage Apps</b> (blue gear); </li><li>  Click <b>Install app from file</b> ; </li><li>  Select the file we just downloaded; </li><li>  Click <b>Upload</b> ; </li><li>  Reboot Splunk; </li></ul><br></div></div><br>  3. Now we can add Telegram-action to our alert. <br><br>  <i><b>‚ÄúSearch &amp; Reporting‚Äù - ‚ÄúAlerts‚Äù - ‚ÄúEdit‚Äù - ‚ÄúEdit Alert‚Äù - ‚ÄúAdd Actions‚Äù - ‚ÄúTelegram Alert‚Äù</b></i> <br><br><img src="https://habrastorage.org/webt/cn/0n/y4/cn0ny4bu4rd7bujgnls6_1gsyjq.png"><br><br>  As we see, to send a message, we need a <b>Bot ID</b> and <b>Chat ID</b> , if you already have them, then you are already at the finish line, and if not, then let's create our own bot. <br><br><div class="spoiler">  <b class="spoiler_title">4. Get Bot ID and Chat ID</b> <div class="spoiler_text"><ul><li>  To get a Bot ID, please contact the @BotFather bot with a request to create a new bot (/ newbot command) </li><li>  Enter the name of your bot and name (the name must end in "bot") </li><li>  Open a dialogue with your created bot and write an arbitrary message to it. </li><li>  Open the link in the browser, replacing &lt;bot_id&gt; with the received identifier <a href="https://api.telegram.org/bot">api.telegram.org/bot</a> &lt;bot_id&gt; / getUpdates </li><li>  In the received json-answer, find the value in the parameter ‚Äúid‚Äù this is the Chat ID </li></ul><br></div></div><br><br>  5. Fill in all fields in the Telegram Alert.  A dollar sign denotes tokens that carry information from the request and the request to the message.  You can read more about tokens <a href="http://docs.splunk.com/Documentation/Splunk/7.0.2/Alert/EmailNotificationTokens">here</a> . <br><br> <code>Message:     . : $result.time$ : $result.src$ : $result.user$ : $result.action$ : $result.info$ <br> Severity: High <br> Chat ID:  chat_id <br> Bot ID:  bot_id</code> <br> <br>  6. Receive notification in Telegram <br><br><img src="https://habrastorage.org/webt/mu/9w/03/mu9w03iaoq6egmlqd7jf4bhabne.png"><br><br><h2>  <font color="#0075a9">Slack</font> </h2><br>  1. Download the Telegram Alert Action application from the SplunkBase website at the following <a href="https://splunkbase.splunk.com/app/2878/">link</a> <br><br>  2. Install the application. (The installation process is described above) <br><br>  3. At the end of the installation, the application will ask for the <b>Webhook URL</b> . <br><br><img src="https://habrastorage.org/webt/ns/sk/pp/nsskppn-xu-_nxrasakhx_zpjue.png"><br><br>  4. To get the <b>Webhook URL</b> , go to the <i><b>‚Äú</b></i> <i><b>Slacks‚Äù</b></i> section in Slack - find the <i><b>Incoming WebHooks</b></i> application <i><b>- ‚ÄúInstall‚Äù - ‚ÄúAdd configuration‚Äù</b> .</i> <br><br><img src="https://habrastorage.org/webt/fp/u1/ki/fpu1kidqvtqtbxfwhptmjnv3e3k.png"><br><br>  5. Select a channel from the drop-down list to which notifications will come (or create a new one).  This can be a general channel or personal messages to some user.  Next, click on the button <i><b>"Add Incoming Webhooks Integration".</b></i> <br><br><img src="https://habrastorage.org/webt/xe/ov/ou/xeovouiwkg59mj7ffydugtkmxas.jpeg"><br><br>  6. <b>Get the webhook URL</b> that needs to be specified in Splunk <br><br><img src="https://habrastorage.org/webt/8i/0l/dh/8i0ldhpgoje3devcyvox7va2jxa.jpeg"><br><br>  7. Add a new action to our alert: <i><b>‚ÄúSearch &amp; Reporting‚Äù - ‚ÄúAlerts‚Äù - ‚ÄúEdit‚Äù - ‚ÄúEdit Alert‚Äù - ‚ÄúAdd Actions‚Äù - ‚ÄúSlack‚Äù</b></i> , indicating the name of the channel in which we set up the integration. <br><br><img src="https://habrastorage.org/webt/b_/on/_q/b_on_qapfjnn8er9oxrp-6xg4c4.png"><br><br>  8. Receive notification in Slack <br><br><img src="https://habrastorage.org/webt/wp/wb/41/wpwb41q6ihkz-sif-ypl7jrjbwi.png"><br><br><h2>  <font color="#0075a9">Conclusion</font> </h2><br>  Thus, we set up alerts from Splunk to Telegram and Slack messengers, which will allow you to always be aware of what is happening in your IT systems and keep your finger on the pulse. <br><br>  We are happy to answer all your questions and comments on this topic.  Also, if you are interested in something specifically in this area, or in the field of machine data analysis in general, we are ready to refine the existing solutions for you, for your specific task.  To do this, you can write about it in the comments or simply send us a request through the form on our <a href="https://tssolution.ru/splunk/">website</a> . <br><br><h2>  PS </h2><br>  <b>On June 28, 2018,</b> ‚Äú <a href="http://tssolution.tilda.ws/study-splunk">Splunk Getting Started</a> ‚Äù will be taught <b>in Moscow</b> , where in 6 hours the participants will receive a theoretical base and practical skills for working in Splunk.  Learn more about learning and register at this <a href="http://tssolution.tilda.ws/study-splunk">link</a> . </div><p>Source: <a href="https://habr.com/ru/post/351798/">https://habr.com/ru/post/351798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351784/index.html">15 ways to turn brainstorming into a ‚Äúfire‚Äù result</a></li>
<li><a href="../351790/index.html">Benefits, risks and secrets of in-app advertising</a></li>
<li><a href="../351792/index.html">Profile of non-ideal customer. What clients to refuse and why it is vital</a></li>
<li><a href="../351794/index.html">Seminar Dino Esposito March 29 in Moscow</a></li>
<li><a href="../351796/index.html">Conference DEFCON 19. "The Art of trolling." Matt "OpenFly" Joyce</a></li>
<li><a href="../351800/index.html">Elegant patterns of modern javascript: Ice Factory</a></li>
<li><a href="../351802/index.html">How JS works: web page rendering engines and tips for optimizing their performance</a></li>
<li><a href="../351804/index.html">How and why to move from service-oriented architecture to microservices</a></li>
<li><a href="../351806/index.html">"Calendar tester" for March. Test security</a></li>
<li><a href="../351808/index.html">Using kubernetes to develop blockchain projects on Hyperledger Fabric</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PostgreSQL: Production Techniques</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You can read a lot of books on databases, write a bunch of applications to outsource or for yourself. But at the same time it is impossible not to ste...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PostgreSQL: Production Techniques</h1><div class="post__text post__text-html js-mediator-article">  You can read a lot of books on databases, write a bunch of applications to outsource or for yourself.  But at the same time it is impossible not to step on a rake, when working with really large databases / tables, especially when you want to minimize downtime on a large project, and even better to avoid it completely.  Here are the most simple operations, such as changing the structure of a table can be more difficult.  The most interesting cases, problems, rakes and their solutions from personal experience with which we on the <a href="https://pushwoosh.com/">Pushwoosh</a> project had to face are described under the cut.  The article does not have beautiful pictures, but there is a lot of dry text. <br><br><img src="https://habrastorage.org/files/f00/044/190/f00044190f4e4370bbd9e423b4d93530.jpg" alt="image"><br><a name="habracut"></a><br><br><h4>  Adding a new column to an existing table </h4><br>  It seems to be an ordinary operation, you need to make a new feature and expand the already existing table.  But what to do if there are several thousand requests from live clients to the table on the production of 50Gb data, and to it every second, this should be invisible to customers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <u>Task</u> : add a new column for an existing table in production. <br>  <u>Problem</u> : Adding a new column locks the table. <br>  <u>Solution</u> : adding a new column does not block the table if DEFAULT is omitted or DEFAULT NULL is used. <br><br>  For those who are interested, you can read the full <a href="http://www.postgresql.org/docs/9.4/static/sql-altertable.html">documentation</a> . <br><div class="spoiler">  <b class="spoiler_title">Main excerpt from the documentation</b> <div class="spoiler_text">  When the column is added to the table, it will be initialized with the column's default value (NULL if no DEFAULT clause is specified).  It is not necessary to clarify the table;  the added NULL values ‚Äã‚Äãare readout, instead. <br><br>  Adding a column to the table.  There is no number of words for a group of people who want to make a new one.  but any indexes must be rebuilt.  Oid the column table.  Table and / or index rebuilds for a large table;  the disk space. <br></div></div><br><br>  But what if you want to initialize a new column with the default value?  In this case, you can write a script that will follow the table, and change the value of the field in small portions of records. <br><br><h4>  Adding a new index to an existing table </h4><br>  Now the analytics department has come to us, and wants to receive the data of interest to them every hour, for this we need a new sql query, but it is complicated, but we don‚Äôt have an index. <br><br>  <u>Task</u> : add an index to an existing production table <br>  <u>Problem</u> : Adding an index locks the record (insert / update / delete) into the table.  You can still read from this table. <br>  <u>Solution</u> : use CREATE INDEX CONCURRENTLY, which does not lock the table, but it works about twice as long and requires more system resources. <br><br>  For those who are interested you can read the full <a href="http://www.postgresql.org/docs/9.4/static/sql-createindex.html">documentation</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Main excerpt from the documentation</b> <div class="spoiler_text">  Creating an index can interfere with a regular operation of a database.  PostgreSQL |  If you‚Äôre trying to make it work, you‚Äôll have to do it.  This could have a severe effect.  It is unacceptably long for a production system. <br><br>  PostgreSQL supports building indexes without locking out writes.  This method is invoked by specifying the CONCURRENTLY option of CREATE INDEX.  If you‚Äôre trying to make it, you can‚Äôt make it your choice.  Thus this method of building and takes significantly longer to complete.  However, since it has been chosen, it can be used for the environment.  Of course, it wouldn‚Äôt be possible to create slower speeds. <br></div></div><br><br><h4>  Monitoring current database requests </h4><br>  It is important to know which requests are being executed at the moment, which process is performing them and how much the request is already running.  PostgreSQL has an excellent pg_stat_activity service tag. Its full description can be found in the <a href="http://www.postgresql.org/docs/9.2/static/monitoring-stats.html">documentation</a> .  I will cite only the most interesting fields. <br><table><tbody><tr><td>  pid </td><td>  integer </td><td>  Process ID of this backend </td></tr><tr><td>  query_start </td><td>  timestamp with time zone </td><td>  It is not active when it is not active. </td></tr><tr><td>  query </td><td>  text </td><td>  Text of this backend's most recent query.  If this field is currently active, it shows the current executing query.  It shows what was executed. </td></tr></tbody></table><br>  As a result, once we have the start time of the query_start query, it is easy to calculate how much the query works and sort the queries by runtime. <br><br><pre><code class="sql hljs">pushwoosh=<span class="hljs-comment"><span class="hljs-comment"># select now() - query_start, pid, waiting, query from pg_stat_activity where state != 'idle' order by 1 desc; ?column? | pid | waiting | query ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- 23:42:13.468115 | 6877 | f | DELETE FROM application_goals WHERE applicationid = '9254' 00:30:51.943691 | 24106 | f | SELECT applicationid, pushtoken FROM application_devices WHERE hwid in ('1abd5e5fd79318cd','1abd5f3eda7acbca','1abd601f2bafabf8','1abd62a0a092ac17','1abd6303b83accf9','1abd64726a98fb63','1abd676c087c3617','1abd67ebecb6f3ce','1abd68a3b78fb730','1abd697af6bc8552','1abd70ebb654aeb2','1abd7114a8576a67','1abd729a385caff8','1abd731ff62c4521','1abd738bd2d457eb','1abd7760f7210155','1abd79dbc085c2c0','1abd7ab46dc24304','1abd7d48bd5e04ab','1abd7e7aee3c0e58','1abd7e8129a53ab3','1abd827c8c21630','1abd82cd204c69a9','1abd843ee3dedb1','1abd88d346c74d67','1abd88e8bd01c168','1abd8ceac00808cc','1abd8d3b2cb72de3','1abd8e139f267260','1abd8e74a288204c','1abd8f00bb4a0433','1abd8fd7e8f4f125','1abd91c193455ada','1abd92448396a9bf','1abd946ac4cf0e22','1abd9594ed1bd791','1abd96cc0df2202b','1abd975a98849a0b','1abd997c96d3c9b1','1abd9b3cfb66852c','1abd9bead472be5','1abd9f5bed3cbbd8','1abd9f73b8122bf1','1abda233b9a00633','1abda2ee3db5bccb','1abda486901c3a14','1abdac09e0e3267b','1abdae8235cf19dd','1abdaf9e3a143041','1abdb54fe96' 00:04:49.592503 | 18899 | f | autovacuum: ANALYZE public.device_tags_values 00:00:00.040265 | 11748 | f | INSERT INTO device_tags_values (hwid,valueid) VALUES ('27976b81cc72c7ac','8470317') RETURNING uid</span></span></code> </pre> <br><br>  For PosgreSQL 9.1, the query can be rewritten as <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">now</span></span>() - query_start, procpid, waiting, current_query <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pg_stat_activity <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> current_query != <span class="hljs-string"><span class="hljs-string">'&lt;IDLE&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">order</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>;</code> </pre><br><br>  From this conclusion, we see that the process with PID 6877 already almost a day fulfills the request, which is probably not optimal and needs more detailed profiling.  We also see that the second request takes half an hour and most likely is also not optimal, but we do not see the request completely, it is cut off, but we are also interested in the entire request. <br>  <u>Task</u> : to see what requests are currently being executed in the database. <br>  <u>Problem</u> : pg_stat_activity shows current requests not completely (cuts off). <br>  <u>Solution</u> : <b>gdb</b> . <br><br>  Perhaps this problem has a simpler solution, but we did not find it.  Take the PID from the query above and connect to it <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">gdb</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[path_to_postgres]</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[pid]</span></span></code> </pre><br>  and after connecting to the process we perform <br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">printf</span></span> <span class="hljs-string"><span class="hljs-string">"%s\n"</span></span>, debug_query_string</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">In our case</b> <div class="spoiler_text">  bash $ gdb postgres 24106 <br>  GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-64.el7 <br>  Copyright 2013 Free Software Foundation, Inc. <br>  License GPLv3 +: GNU GPL version 3 or later &lt; <a href="http://gnu.org/licenses/gpl.html">gnu.org/licenses/gpl.html</a> &gt; <br>  This is free software: <br>  There is NO WARRANTY, to the extent permitted by law.  Type "show copying" <br>  and "show warranty" for details. <br>  This GDB was configured as "x86_64-redhat-linux-gnu". <br>  For bug reporting instructions, please see: <br>  &lt; <a href="http://www.gnu.org/software/gdb/bugs/">www.gnu.org/software/gdb/bugs</a> &gt; ... <br>  Reading symbols from /usr/bin/postgres...Reading symbols from /usr/bin/postgres...(no debugging symbols found) ... done. <br>  (no debugging symbols found) ... done. <br>  Attaching to program: / bin / postgres, process 24106 <br>  Reading symbols from /lib64/libxml2.so.2...Reading symbols from /lib64/libxml2.so.2...(no debugging symbols found) ... done. <br>  (no debugging symbols found) ... done. <br>  ... <br>  (gdb) printf "% s \ n", debug_query_string <br></div></div><br><br><h4>  Slow log </h4><br>  For the base, you always need to have monitoring and see which requests are executed slowly.  You can solve this by code, and in ORM or somewhere deeper measure the time of the request and if it is more than the threshold value, write this request to the log.  But it is always better not to write a bicycle. <br>  <u>Task</u> : Monitor slow queries <br>  <u>Problem</u> : I want to do this at the database level <br>  <u>Solution</u> : log_min_duration_statement <br><br>  The <a href="http://www.postgresql.org/docs/9.1/static/runtime-config-logging.html">log_min_duration_statement</a> setting is specified in milliseconds, and logs all database requests that were executed longer than the specified value. <br><br>  Let's fix the PostgreSQL config vim /var/lib/pgsql/9.4/data/posgresql.conf and set 3 seconds in it as a threshold value <br><pre> <code class="hljs pgsql">log_min_duration_statement = <span class="hljs-number"><span class="hljs-number">3000</span></span> # <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> disabled, <span class="hljs-number"><span class="hljs-number">0</span></span> logs <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> statements # <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> their durations, &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> logs <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> # statements running at least this number # <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> milliseconds</code> </pre><br><br>  In order for the changes to take effect, it is not necessary to reboot the database, just run the command from psql, pgadmin or another interface to the database <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pg_reload_conf();</code> </pre><br><br>  or execute from the command line <br><pre> <code class="hljs pgsql">su - postgres /usr/bin/pg_ctl reload</code> </pre><br><br>  It must be remembered that some parameters in the configuration file will take effect only after restarting the database. <br><br>  And after that you can look at the PostgreSQL log, which we have along this path /var/lib/pgsql/9.4/data/pg_log/postgresql-2015-07-07.log and here we see that there is a query that runs for almost 6 seconds . <br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">2015</span></span><span class="hljs-number"><span class="hljs-number">-07</span></span><span class="hljs-number"><span class="hljs-number">-07</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span> UTC <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span><span class="hljs-number"><span class="hljs-number">.82</span></span>(<span class="hljs-number"><span class="hljs-number">45276</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">LOG</span></span>: duration: <span class="hljs-number"><span class="hljs-number">5944.540</span></span> ms <span class="hljs-keyword"><span class="hljs-keyword">statement</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> application_devices <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> applicationid=<span class="hljs-string"><span class="hljs-string">'1234'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> hwid=<span class="hljs-string"><span class="hljs-string">'95ea842e368f6a64'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br><br>  As an option in the future, to monitor the log file, you can make a bundle of logstash + elasticsearch + kibana and immediately send a notification about the appearance of slow requests via zabbix, if this is critical for the project. <br><br><h4>  Find out what requests the production process is currently doing </h4><br>  If you have a lot of demons that often communicate with the base, and on one ordinary day the demon started working slowly or it became unclear what he was doing, then <b>strace</b> will come to the rescue, which will show the requests to the base and the time of their execution, without stopping the process, adding logs to the program and waiting for the next occurrence of the problem - no matter what you write php, python, ruby, etc.  - strace fits for everything. <br>  <u>Task</u> : find out what the process is doing (as an example, what requests it sends to the database) <br>  <u>Problem</u> : the process cannot be interrupted or stopped. <br>  <u>Solution</u> : <b>strace</b> <br><br>  To do this, simply take the pid of the process, specify the length and add the -T option.  As a result, strace output can be something like this. <br><br>  strace -p 27345 -s 1024 -T 2&gt; out <br><pre> <code class="hljs erlang"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gettimeofday</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">({</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1437846841</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">447186</span></span></span></span><span class="hljs-function"><span class="hljs-params">}, NULL)</span></span></span><span class="hljs-function"> = 0 &lt;0.000004&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"Q\0\0\0005SELECT * FROM accounts WHERE uid='25143' LIMIT 1\0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">54</span></span></span></span><span class="hljs-function"><span class="hljs-params">, MSG_NOSIGNAL, NULL, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> = 54 &lt;0.000013&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">poll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([{fd=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, events=POLLIN|POLLERR}], </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">, -</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> = 1 </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([{fd=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, revents=POLLIN}])</span></span></span><span class="hljs-function"> &lt;0.000890&gt;</span></span></code> </pre><br><br><h4>  NULL and unique indexes </h4><br>  This example is not related to production environment.  We start with the simple fact that NULL is not equal to NULL. <br><div class="spoiler">  <b class="spoiler_title">Documentation</b> <div class="spoiler_text">  Do not write expression = NULL because NULL is not "equal to" NULL.  The two values ‚Äã‚Äãare equal. <br></div></div><br>  Suppose we want to create a composite unique index in which one of the fields can be NULL, or it can be a number.  At the same time, a unique index will not work for fields containing NULL, but I really want to filter such records by index. <br><div class="spoiler">  <b class="spoiler_title">Documentation</b> <div class="spoiler_text">  It is not allowed.  Null values ‚Äã‚Äãare not considered equal.  A multicolumn unique index. <br></div></div><br><br>  Consider an example <br><br><pre> <code class="sql hljs">psql=<span class="hljs-comment"><span class="hljs-comment"># create table test ( psql(# a varchar NOT NULL, psql(# b varchar default null psql(# ); CREATE TABLE psql=# create unique index on test (a, b); CREATE INDEX psql=# insert into test values (1, null); INSERT 0 1 psql=# insert into test values (1, null); INSERT 0 1 psql=# select * from test; a | b ---+--- 1 | 1 | (2 rows)</span></span></code> </pre><br>  Despite the fact that we created a unique index, the record (1, null) was inserted twice. <br><br>  <u>Task</u> : to make a composite unique index, one of the fields can be null <br>  <u>Problem</u> : unique index does not compare null fields <br>  <u>Solution</u> : split the index into 2 different indexes. <br><br>  In order to avoid this behavior, you can split the index into 2 indexes. <br><pre> <code class="sql hljs">sql=<span class="hljs-comment"><span class="hljs-comment"># create table test ( sql(# a varchar NOT NULL, sql(# b varchar default null sql(# ); CREATE TABLE sql=# create unique index on test (a, b) where b is not null; CREATE INDEX sql=# create unique index on test (a) where b is null; CREATE INDEX sql=# insert into test values (1, null); INSERT 0 1 sql=# insert into test values (1, null); ERROR: duplicate key value violates unique constraint "test_a_idx" DETAIL: Key (a)=(1) already exists.</span></span></code> </pre><br><br><h4>  Duplicate handling </h4><br>  This example also has nothing to do with production. <br>  <u>Task</u> : To be able to handle duplicates that were not allowed to create a unique index. <br>  <u>Problem</u> : You need to catch exceptions, parse error codes <br>  <u>Solution</u> : keep calm and catch exception and wait until PostgreSQL <a href="http://www.postgresql.org/developer/roadmap/">9.5</a> is released which will be <a href="https://wiki.postgresql.org/wiki/UPSERT">upsert</a> </div><p>Source: <a href="https://habr.com/ru/post/263541/">https://habr.com/ru/post/263541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263531/index.html">We write and listen to conversations in 3CX</a></li>
<li><a href="../263533/index.html">The Magic of Tensor Algebra: Part 12 - Rodrigues-Hamilton Parameters in Solid Kinematics</a></li>
<li><a href="../263535/index.html">IBM, along with 200 universities around the world, is preparing the next generation of cloud service developers</a></li>
<li><a href="../263537/index.html">Chasing yourself, or a great way to start your day.</a></li>
<li><a href="../263539/index.html">Emmett Shire: How to Twitch Talk to Users</a></li>
<li><a href="../263545/index.html">nxweb - HTTP server for C applications</a></li>
<li><a href="../263547/index.html">Pseudo OOP in C</a></li>
<li><a href="../263549/index.html">Multithreaded SOCKS 4 server on Qt</a></li>
<li><a href="../263551/index.html">Quick start with PHPixie 3</a></li>
<li><a href="../263555/index.html">Qucs project news: release candidate available with circuit simulation support in SPICE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
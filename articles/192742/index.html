<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About Selenium and one "bike"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 I would like to talk about the problems that I encountered in the process of mastering Selenium WebDriver, with their solution and how these...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About Selenium and one "bike"</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  I would like to talk about the problems that I encountered in the process of mastering Selenium WebDriver, with their solution and how these solutions, in principle, can be used.  All this is presented in the form of a prototype framework, the link to which will be at the end of the article. <br><br>  In this post I want to share my ideas for the implementation of the Page Object template, how to handle errors that occur during the execution of tests, tell a little about logging.  And also to share information about some of the tools that are implemented using Selenium WebDriver, and their own work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The plan of my article is as follows: <br><br>  <b>1. Captain obvious, instead of entry.</b> <b><br></b>  <b>2. A little about yourself, you must introduce yourself ...</b> <b><br></b>  <b>3. Why Selenium?</b> <b><br></b>  <b>4. About Page Object ...</b> <b><br></b>  <b>5. Not a bug, but a feature!</b> <b><br></b>  <b>6. And again about logging and reporting.</b> <b><br></b>  <b>7. Are there no analogues?</b> <b><br></b>  <b>8. Promised links.</b> <b><br></b>  <b>9. In conclusion.</b> <br><br>  So let's go! <br><a name="habracut"></a><br><h4>  <b>1. Captain obvious, instead of entry.</b> </h4><br><img src="https://habrastorage.org/storage3/0c8/eec/895/0c8eec895db688c19b1d8a40494f25c1.jpg" alt="image"><br><br>  I don‚Äôt think that it makes sense to explain what software testing is, what strategies and models exist, what is its role in software development and quality assurance, and what projects and users are at risk if this process is absent.  Besides, now programming is not an art, but a craft for many millions of specialists.  Projects are implemented in a short time and with limited budgets, and often they can be monsters with simply immense functionality.  Moreover, products can vary intensively from version to version, let's say improve.  And each such "improvement" can be fatal. <br><br>  In such conditions, automated testing plays a key role.  What models, strategies and methods are better to find in other sources.  My article is not about that.  It is dedicated to automation tools for testing client-side web applications. <br><br><h4>  <b>2. A little about yourself, you must introduce yourself ...</b> </h4><br>  I have been doing regression automated testing for four years now.  We test the desktop client of the product and the classes that describe its business logic.  About the tool that is used on our project can be read <a href="http://smartbear.com/products/qa-tools/automated-testing-tools">here</a> .  During this time, many UI tests were automated, unit tests, a lot of things ... It was here that I watched the evolution of test automation, and myself participated in it. <br><br><img src="https://habrastorage.org/storage3/79e/cc4/c22/79ecc4c22a83d894632857f11babbe96.jpg" alt="image"><br><br>  At first, these were scripts written directly on the knee using automatic recording tools, in which the logic of the script was inseparable from the ways of interaction with the objects under test.  As the number of tests increased, it became obvious to everyone that some kind of framework should be developed and used for automated scripts.  Any sneeze in the application under test had very unfortunate consequences for the entire test run. <br><br>  Then it became necessary to use software interfaces for interacting with the product and databases, because what was shown by the dialog forms was not enough ... <br><br>  However, something I got carried away.  But it was here that I realized how important it is to think <b>from the very beginning of the</b> strategy and tactics of interacting with the product of developers for its effective automated verification. <br><br>  The tendency of applications to switch from their desktop clients to web clients cannot be noticed either by the deaf-blind or the person born and living somewhere in Antarctica.  And development for web is now mainstream, it is not a secret to anyone. <br><br>  I decided not to stand aside and try in my spare time to master something that is used to automate the functional testing of the frontend - part and to check its compatibility with various client platforms.  And besides, there is some probability that the web client on our project to be ... <br><br>  I chose Selenium Webdriver. <br><br><h4>  <b>3. Why Selenium?</b> </h4><br><img src="https://habrastorage.org/storage3/e3a/8cc/80c/e3a8cc80c6b4feb9e935a84ac1f18613.png" alt="image"><br><br>  Why is Selenium? <br><br>  Once upon a time it was a small tool that was used only by desperate enthusiasts from the world of web development.  Now this is a formidable weapon that not only many thousands of automators around the world, but even the frontend - the developers have adopted to combat defects. <br><img src="https://habrastorage.org/storage3/44b/e47/094/44be4709422bde7815f7e9c0725380f1.jpg" alt="image"><br><br>  You can read about the product line of the Selenium project <a href="http://habrahabr.ru/post/152653">here</a> or <a href="http://docs.seleniumhq.org/">here</a> . <br><br>  But I must say that this is <a href="http://habrahabr.ru/post/152971/">not a tool for automated testing directly</a> .  For example, Selenium Webdriver provides a variety of software tools and interfaces for emulating user interaction with the browser and content loaded in its window.  These funds cover almost 100% of the possible variants of such interaction.  All this may find wider application.  But, for example, he cannot, by default, generate a report on the passage of a particular test. <br><br>  Next, there are some other problems.  Below are some of them: <br><br>  <b>The <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html">WebDriver</a> and <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebElement.html">WebElement interfaces</a> provide very limited functionality</b> .  It is mainly aimed at finding the elements of the active page and performing the simplest actions on the elements (entering values, clicking, etc.).  Many other useful features are provided by interfaces such as <b>HasInputDevices, Locatable, Options, Alert</b> , etc.  And using only <b>WebDriver</b> and <b>WebElement will</b> severely limit the capabilities of automated tests. <br><br>  <b>Every browser has its own driver</b> .  Now it is: <br>  <b>ChromeDriver;</b> <br>  <b>FirefoxDrive;</b> <br>  <b>HtmlUnitDriver</b> (for Unit - tests at the level of the html-document); <br>  <b>InternetExplorerDrive</b> ; <br>  <b>OperaDriver</b> ; <br>  <b>RemoteWebDriver</b> (my favorite, good for running tests on remote machines); <br>  <b>SafariDriver</b> ; <br>  <b>Iphonedriver</b> ; <br>  <b>AndroidDriver</b> ; <br>  <b>PhantomJSDriver</b> (some kind of exotic browser, I did not have enough patience to build it on my machine). <br><br>  I think that the <a href="http://browser.yandex.ru/">Yandex</a> team <a href="http://browser.yandex.ru/">will</a> also release its driver soon. <br><br>  A wide choice, for every taste and for any needs.  But if in the test project some or some of these are clearly used, this will create problems when you need to quickly switch from browser to browser or use several at once. <br><br>  Therefore, I would like to have some single way or interface to create the desired instance.  It is desirable that he took some kind of setting that can always be changed as a parameter.  This setting should include the browser type, <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/Capabilities.html">features</a> , <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html">timeouts</a> .  Well, the opportunity to have a blessing, too. <br><br>  <b>Writing classes that would be responsible for interactive work with pages.</b>  <a href="http://code.google.com/p/selenium/wiki/PageFactory">PageFactory</a> is a great tool.  However, its use becomes inconvenient due to the loss of clarity of code classes that describe very large pages, and duplicate elements are fraught with copy-paste.  Output - select duplicate elements in separate blocks (classes) and use blocks already.  But this does not solve the problem to the end.  What if your service can work by opening pages on separate tabs or browser windows, do you have duplicate blocks on all these windows?  And some of them also lie on the frames!  I experimented on <a href="http://docs.google.com/">this</a> and <a href="http://docflow.demo.1c.ru/corp/ru_RU/">that</a> , and immediately ran into the problem described.  And the situation is aggravated by the fact that the instance implementing WedDriver sees only the active page (window / tab) or frame. <br><br>  I would like to be able to split the page into such blocks that a working test could memorize and work with them directly, without calling <b>driver.switchTo (). Window (somehandle)</b> or <b>driver.switchTo (). Frame (frameIdentity)</b> . <br><br>  Therefore, I set myself the task not only to master the above tool, but to make a project, or even better, a prototype framework based on Selenium Webdriver.  And in addition - try to find analogues and make it so that something can easily integrate with them.  I just think that if the task is this way, then the submitted material is absorbed much easier. <br><br>  Java was selected as the language.  Development environment - Eclipse. <br><br>  I will not talk about how this path was gradually overcome.  It is better to continue with the description of the problems and their solutions.  Maybe I will not open America, but I will be glad if someone finds something useful for themselves ... <br><br><h4>  <b>4. About Page Object ...</b> </h4><br><br>  I think there are few such automators who would not know about the design - Page Object pattern.  By the way, this pattern is also applicable for writing autotests UI of some desktop application.  But now we will talk about its implementation in Java for the web interface. <br><br>  About the reception you can read <a href="http://internetka.in.ua/selenium-page-object/">here</a> . <br><br>  Now I will show you at the moment the working code of some not very successful test. <br><br>  <a href="http://pastebin.com/SncBGfq9">Code</a> <br><br>  I think everyone understands what is good when you want to write a script where you need to make one input somewhere and 2-3 clicks on something.  Such a test you quickly fix, if something is <b>correct</b> (!!!) has changed. <br><br>  If the test should test more than the steps described above, it will result in an inconvenient to read sheet of code.  And now we multiply all this by a huge test project.  Have you imagined how a poor tester cries, what supports him after every Google change?  And so that he does not cry like that, we need classes through which the test performs its actions on the page.  And if anything has changed (again, this change is a feature, not a bug introduced), but the edits will be local, and not in the whole project. <br><br>  There are many implementations of Page Object, including, I think, on your projects.  Below I will demonstrate my implementation and the same test: <br><br>  <a href="http://pastebin.com/KYQd0g6J">public interface IPerformsClickOnALink</a> <br>  <a href="http://pastebin.com/E9d60XQE">public interface IPerformsSearch</a> <br>  <a href="http://pastebin.com/HgA5Gzqn">public class SearchBar</a> <br>  <a href="http://pastebin.com/7UbXvGyY">public class LinksAreFound</a> <br>  <a href="http://pastebin.com/wnW2risr">public class AnyPage</a> <br>  <a href="http://pastebin.com/DLEq9Jqv">public class google</a> <br>  <a href="http://pastebin.com/Uufw2fds">test</a> <br><br>  And if you work hard and do something like <a href="http://pastebin.com/acmjZVFD">this setup</a> , the <a href="http://pastebin.com/BREBqupv">test can work like this</a> . <br><br>  Many experienced automators, probably, now thought: ‚ÄúWell, yes, Page Factory uses ... The author for some reason has complicated the description of the google homepage - you can also describe it as one class!  Well, except that some kind of incomprehensible annotation appeared ... @PageMethod is called.  The descendants of the classes Page and Entity ... We saw a similar <a href="https://github.com/thucydides-webtests/thucydides/tree/master/thucydides-core/src/main/java/net/thucydides/core/pages">here</a> .  The author, we all have already seen! ‚Äù. <br><br>  Well yes.  This was a simple example.  I intend to complicate the description of the main page to show that it is possible to break the description of the same page into two independent classes.  I will tell about this annotation below ... <br><br>  And now the example is more complicated ... <br>  The picture shows some situation. <br><img src="https://habrastorage.org/storage3/aa4/a7f/8e7/aa4a7f8e77e2562bc7a317a4d5307368.png" alt="image"><br><br>  What the test does: <br>  1 goes to docs.google.com <br>  2 opens an accessible Google document. <br>  3 on the main page of the service causes the sharing dialog; <br>  4 from the open document the same dialogue is called. <br><br>  For clarity, the entire sequence of actions is shown in the form of screenshots.  Active elements are highlighted: <br><img src="https://habrastorage.org/storage3/50a/019/76a/50a01976aefc0b2317ba918ccdf796b4.png" alt="image"><br><img src="https://habrastorage.org/storage3/624/e09/101/624e0910144c84ece11b621e8432ef82.png" alt="image"><br><img src="https://habrastorage.org/storage3/0d7/4ee/44e/0d74ee44ee8f043b7c849c3023dde4a8.png" alt="image"><br><img src="https://habrastorage.org/storage3/ee0/988/146/ee0988146369832c3e29743315e5af8f.png" alt="image"><br><img src="https://habrastorage.org/storage3/ca3/cba/db6/ca3cbadb69d06a6ee66b48f5a1d68f6d.png" alt="image"><br><br>  <b>Necessary:</b> somehow handle both instances of this dialog in different windows.  And that's what happened with me.  <a href="http://pastebin.com/ifdFBD0j">This is the described precondition.</a> <br><br>  Now I will click on the field in which they are asked to enter names, email addresses, etc., in the pop-up item that appears, click "Cancel", after which the "Finish" button will be clicked.  Actions will be performed in both windows.  For clarity, the following sequence in the form of pictures. <br><br><img src="https://habrastorage.org/storage3/15c/1a1/66d/15c1a166d26ab9d74ccdec51dae5bdf8.png" alt="image"><br><img src="https://habrastorage.org/storage3/7d2/dc6/4b4/7d2dc64b4544e518a5e246a20d3dcb65.png" alt="image"><br><img src="https://habrastorage.org/storage3/7f6/935/f09/7f6935f0939db0a33d707cc6a4e521b8.png" alt="image"><br><br>  <a href="http://pastebin.com/wz0wr79b">That's how we coped with the task effortlessly.</a>  .  <a href="http://pastebin.com/Zt8VkBMy">This is the getCustomizingAccessDialog () method code</a> for the document and home page. <br><br>  Those.  there is a pop-up block of elements located inside the frame, which we used as an object that exists independently and is picked up when needed ... We know that it is on the page of any document and on the main page of the service, and we get it from them. <br><br>  In fact, for a long time I tried to find the optimal way to organize and describe one or another test object in different sources.  Although it may be looking bad ... <br><br>  Obviously, you need to group page elements into blocks for reuse.  These blocks can even be transferred outside under the guise of independent objects and work directly with them.  If this is not done, then the class will grow in the number of attributes and methods.  <b>Need decomposition.</b>  Otherwise, you will receive such objects: <br><img src="https://habrastorage.org/storage3/c0e/d9e/a86/c0ed9ea868c48b135d5eb62be9d8f9f4.png" alt="image"><br><br>  If you look at the example described above, then methods of work with each type of pop-up dialog are added to the methods of working with the main content - access settings, modal forms of renaming, choice of options, comments in documents. <br><br>  The above solution can be implemented painlessly when testing what is loaded in a single window (single tab) of the browser. <br><br>  But in the case of the described rather complex behavior, you will have to somehow switch the webdriver from page to page, not forgetting to switch to the required frame. <br><br>  And there was an idea!  <b>And what if you teach each such object to remember the path to itself and automatically switch the webdriver when calling the method of interactive interaction with the page.</b> <br><br>  This, it seemed to me, perhaps, if we deviate somewhat from the concept of ‚Äúpage‚Äù.  Those.  under it, I will mean not downloaded content, but a browser window with content loaded in it.  This window has a unique string identifier by which you can easily identify it among others.  OK!  That is, before calling the method, it will switch to the desired window. <br><br>  So.  And what to do with frames?  You can also make it so that each block of elements knows, in addition, which frame to switch to. <br><br>  So I build a path. <br><br>  <a href="http://pastebin.com/vBwtMBri">As can be seen from the above list of class constructors, which I called Page</a> (the name is very conditional, perhaps the class should be renamed), you can write a description of the loaded page as a whole, or in parts, in addition to this, indicating another object like it as a parent ) when it is necessary.  Thus it is possible to build a connected graph of blocks of elements.  Something similar to hierarchy can turn out. <br><img src="https://habrastorage.org/storage3/91f/bdb/cbb/91fbdbcbb56e5e2f35389426172ccf0a.png" alt="image"><br><br>  OK!  Well, the paths indicated, the hierarchy was built.  What's next?  How to implement automatic switching when you call, such as a click or a string in the field?  <a href="http://pastebin.com/DhBmjL14">Switching itself is implemented in this way.</a> <br><br>  But!  Many may ask the question: ‚ÄúDo we need to call it back in each method?‚Äù No.  Below I will try to explain how it works. <br><br>  In my decision, I propose to use not the objects created by the designer, but their deputies (proxy, in other words).  For this, the <a href="http://cglib.sourceforge.net/">cglib</a> library was used.  And to be more precise, the <a href="http://cglib.sourceforge.net/apidocs/net/sf/cglib/proxy/MethodInterceptor.html">MethodInterceptor</a> to intercept callable methods, the <a href="http://cglib.sourceforge.net/apidocs/net/sf/cglib/proxy/Enhancer.html">Enhancer</a> to create the proxy objects themselves and the <a href="http://cglib.sourceforge.net/apidocs/net/sf/cglib/proxy/Callback.html">Callback</a> .  Using the above types eliminates the need, in the future, to create a set of interfaces for each Page heir (see <a href="http://www.javalobby.org/java/forums/t18631.html">java.lang.reflect.Proxy</a> ) and makes the implementation more flexible.  However - there is a restriction - the heir of the Page class should not be <b>final</b> !!! <br><br>  Those.  when we try to call a particular method of some Page - object (heir of the Page class), this method intercepts and ‚Äúswitches‚Äù the object to itself.  And after that the execution of the method itself. <br><br>  Perfectly!  But is this kind of interception occurring when each method is called?  The question, I note fair.  We must not forget that the Page-object is also an object of the java language.  Such an object can have <b>public</b> or <b>protected</b> methods that are not related to browser interactivity.  How to be?  Obviously, you need to think of a way to divide methods into methods that are responsible for interactive interaction and all the others. <br><img src="https://habrastorage.org/storage3/f82/4e7/bfa/f824e7bfa20877792d1f8468b95c9ba1.png" alt="image"><br><br>  The <b>@PageMethod</b> annotation serves as such a ‚Äúdelimiter‚Äù.  Ie, if the method is marked with such a marker, then a preliminary switch to the page or its fragment will be performed ... <br><br>  <a href="http://pastebin.com/gUiuC1m8">In general, the solution looks like this.</a> <br><br>  Next, a little about the possibilities of creating Page - objects. <br><br>  Any block of elements or page view can be created in three main ways: <br><br>  - <b>from the heir to the class Entity</b> - this is something like a service model, open to the main or any other page, as a whole.  In the examples described, this is Google (search engine), GoogleDocsApplication (Google Drive).  By the way, the example with Google demonstrates that with the ‚Äúapplication‚Äù, in principle, we can also work as with the Page object.  I kind of included elements with a panel and search results in it. <br><br>  ‚ÄúEntity‚Äù can generate those objects that are in the first (main) open window / tab of the service (example with Google Drive, ‚Äú <b>docs.getContent ();</b> ‚Äù - wrapping around one of these methods, example with Google - ‚Äú <b>searchBar = get (SearchBar.class);</b> ‚Äù- call one of these methods) or those that exist in newly appearing windows / tabs ( <b>AnyGoogleDocument anyDocument = docs.get (AnyGoogleDocument.class, 1)</b> ;). <br><br>  The picture shows the entire list of methods of the Entity class that are already ready for use or may be blocked in the heirs: <br><img src="https://habrastorage.org/storage3/731/885/2d5/7318852d516f26a98a78b789fc905234.png" alt="image"><br><br>  - <b>from another heir to the Page class.</b>  Ie ... We have a list of available Google Drive documents, on which we perform various actions - open, set labels, work with the pop-up menu and action bar buttons.  We describe all this in a separate class (in the examples above, GoogleDocsMainPageContent). <br><br>  The elements appearing as a result of these actions (the access settings dialog, various modal forms, etc.) are parts of this page.  But they can functionally be considered as if in isolation from it. <br><br>  Such elements can be described in a separate hereditary class Page. <br><br>  In the same way, for convenience, larger, but more static blocks can be described (for example, a table or document editor). <br><br>  In all the situations described, objects can be created with an indication of the parent. <br><br>  The picture shows the entire list of Page class methods that are already ready for use or may be blocked in the heirs: <br><img src="https://habrastorage.org/storage3/1ec/510/de1/1ec510de148707dfca369beef3bd8132.png" alt="image"><br><br>  All the above methods for creating objects for testing are wrapped around class methods in the screenshot: <br><img src="https://habrastorage.org/storage3/9bc/c8b/bb2/9bcc8bbb2265bd3d3e4fd4be1b567cd7.png" alt="image"><br><br>  - <b>using TestObjectFactory</b> .  The way so far is good when there are such components that can work on their own, without using the service.  For example, a document, a table, a presentation, etc.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can be opened without the help of the service, provided that there is an access right and a link to the document. </font><font style="vertical-align: inherit;">If you need to check just such a situation, you can do </font></font><a href="http://pastebin.com/T8TXF3xy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Further the second use case repeats. </font><font style="vertical-align: inherit;">But this option I have so far the most undeveloped. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I could talk about the underlying mechanisms and the jokes of the work of this system. </font><font style="vertical-align: inherit;">But the chapter will be very big. </font><font style="vertical-align: inherit;">This can be a topic for a separate note.</font></font><br><br><h4> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Not a bug, but a feature!</font></font></b> </h4><br><img src="https://habrastorage.org/storage3/189/43d/016/18943d016f5b2edd040db5fd336e20ec.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any exception that occurs during the execution of an automated test signals problems. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This may be a signal of a bug introduced by the developer. The test itself can be poorly written. And should already fix this screamer. No exception and the tools themselves. The list of Selenium defects can be found </font></font><a href="http://code.google.com/p/selenium/issues/list"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But I'm not talking about this.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How do you like this situation? For example, at the manual testing stage, a defect was identified. It is included in the bugtracker, it can be ‚ÄúMinor‚Äù. This bug is not fatal to the user, he can easily get around it. At the moment, developers have more important tasks, and the fix of this defect can be left until better times. And now we need a regression test, the path of which runs through the defect described. The test was written, and ... Oh, my God! It falls with some terrible exception that caused our bug.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The situation, I will tell you, is not a pleasant one. The best way out is to make some crutch that would allow catching a mistake and passing the test to the end. Otherwise, a terrible thing can happen - the test will only reach this noncritical error, it will fall and the rest will not be checked. Namely, some grief climbed there - the developer and made chaos there. But writing "crutches" can complicate the test script itself or the classes that describe what is being tested. The defect has already been fixed, and the ‚Äúcrutch‚Äù can be forgotten. Over time, the whole project may become like this. </font></font><br><img src="https://habrastorage.org/storage3/92b/b84/35f/92bb8435f7548ceeb2a8549a9d82635d.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are even worse situations ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A vivid example is the occurrence of a </font></font><a href="http://docs.seleniumhq.org/exceptions/stale_element_reference.jsp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StaleElementReferenceException</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="http://internetka.in.ua/selenium-driver-exceptions/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can read more here.</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. This is an example of when, during normal operation of the application under test, situations arise for the processing of which the tool used is simply not designed! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, I ran into this when I tried to write ‚Äútests‚Äù for a list of Google Drive documents and a spreadsheet document. The picture shows, after which action such an exception occurred most often (click on the highlighted green element). </font></font><br><img src="https://habrastorage.org/storage3/67f/e4c/3b2/67fe4c3b2d404491f019eea134a58ada.png" alt="image"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After changing the value of the "asterisk", the further passage of the "test" was like a hike through a minefield. The error occurred when trying to return the "asterisk" to its original state, or to work with the checkbox located to the left, and sometimes when trying to open a document. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ways to combat this error offer different -</font></font><a href="http://stackoverflow.com/questions/16166261/selenium-webdriver-stale-element-reference-exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from repeating the same actions (searching for an element and performing actions)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to increasing the virtual memory of the machine.</font></font> OK!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose the second I can not do. </font><font style="vertical-align: inherit;">Then the first thing remains for me.</font></font><habracut>          (+  ): <br><br> <b><i>try <br> { <br> //some actions <br> } <br> catch (StaleElementReferenceException e) <br> { <br> //same actions again <br> }</i></b> <br><br> ,  .     ,       ?        ? <br><br>     ,    ¬´¬ª Google Drive. <br><br>    <a href="http://paste2.org/IjY4xVMm">ITestObjectExceptionHandler</a> .  <a href="http://paste2.org/A4ItxL6E"></a>    .    <b>throwableList</b>       .   ,     ‚Äì      - - ,    . <br><br>  Further. <br><br>      <b>Page</b>  <b>Entity</b> .     ‚Äì   <a href="http://paste2.org/1sZbtvMJ"></a> .    Page  Entity  <a href="http://paste2.org/Y6GdFwmY"></a> .    ,  <a href="http://paste2.org/XmyvejFK"></a>     Page   ,   <b>/**/</b> .      Entity. <br><br> ..,    .      ,     ,         .   ,    ,   <a href="http://paste2.org/4LGUvkch"></a> . <br><br>  Google Drive   <a href="http://paste2.org/I6GZGGK6"></a> ,  ,   ,   StaleElementReferenceException.    ,      Google Drive, <a href="http://paste2.org/t9wUNHdp">   </a> . <br><br> : StaleElementReferenceException        .         (!).   ,  Google   . <br><br>     ,   -  ,    . <br><br>  For example.  : <br> 1.       Google Drive <br> 2.     <br> 3.  <br> 4.    ¬´¬ª <br> 5.  <br><br>    ,      ,     : <br> <i></i> <br><img src="https://habrastorage.org/storage3/0b7/699/491/0b769949191fdf46c4f9e414838bc9ef.png" alt="image"><br><img src="https://habrastorage.org/storage3/9e5/c60/55c/9e5c6055c30fcc0976479dcd7e2d0867.png" alt="image"><br><br> <i>   </i> <br><img src="https://habrastorage.org/storage3/1fe/91c/02c/1fe91c02cc0f070d3720696f86061031.png" alt="image"><br><br> <i></i> <br><img src="https://habrastorage.org/storage3/687/add/f71/687addf71f41cdde3381302749432928.png" alt="image"><br><img src="https://habrastorage.org/storage3/8dc/ebc/a31/8dcebca319ea1d79277363cd2ebf4d65.png" alt="image"><br><br> <i>   .  </i> <br><img src="https://habrastorage.org/storage3/a0d/efa/2b5/a0defa2b514b18dd54493da7bc7e2975.png" alt="image"><br><br>   ,       - ,      ,  .    ,  . : UnhandledAlertException. -   ,    .       ,        .   ,  ,   ,    . <br><br>  ,   : <br><br> 1.      (  )    ; <br> 2.      . <br><br>      ,       ,     . <br><br>    : <br> 1. <a href="http://paste2.org/mwLjbYUM"> .</a> <br> 2. <a href="http://paste2.org/nHz92Oe2">  ( )</a> . <br><br> :    .  : <b>FAILED TESTS BUT WITHIN SUCCESS PERCENTAGE.</b>        : <br><img src="https://habrastorage.org/storage3/608/d21/6d9/608d216d9fd7c9aba274a33260e36e78.png" alt="image"><br><br>  (!!!).      . ,         ,    . <br><br><h4> <b>6.      .</b> </h4><script type="text/javascript">function gtElInit() {var lib = new google.translate.TranslateService();lib.translatePage('ru', 'en', function () {});}</script><script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=gtElInit&amp;client=wt"></script><br><br><img src="https://habrastorage.org/storage3/bd6/d6a/968/bd6d6a9688b7dd5d98753dc411ff7be2.png" alt="image"><img src="https://habrastorage.org/storage3/7f6/ce7/e43/7f6ce7e433ba50bd7797d63fe2a9a7dd.png" alt="image"><img src="https://habrastorage.org/storage3/51c/af4/e3c/51caf4e3c7a2b895c9c1a255823d85ec.png" alt="image"><br><br>  I will briefly turn on the cap.  Probably, everyone understands that in addition to directly passing the tests, there must be some kind of exhaust, thanks to which one can judge the current state of the product.  Well, or we need some kind of test passing test ... These tasks solve logging and reporting. <br><br>  Since I used java for experiments, my head ached badly when choosing the right logging framework.  And to choose was from what!  <a href="http://habrahabr.ru/post/113145/">The author of this article very well described the logging situation in java</a> .  And at first, I myself did not know what I wanted to get.  In addition, it is necessary that a report could be generated from this log. <br><br>  Eventually: <br>  - I need a simple logger, which could register messages, their level, output data to the console - at least; <br>  - it is very good that it was possible to ‚Äúcling‚Äù to it objects of exceptions, if they arise; <br>  - and quite well - the ability to attach a link to a file to a log entry that turned out during the test; <br>  <s>- Write video with special effects.</s> <br><br>  I think everything is clear with the first two points.  Third.  A file can be anything, an xml file, typed text or even a screenshot taken from a browser window.  This can be useful when, for example, processing log entries. <br><br>  As for the reports: <br>  - I need a report that would be formed both during the run of a single test, and after running the entire ate; <br>  - In this report, I would like to see a description of the steps performed on the selected test; <br>  - It is desirable that such detailing could display screenshots or any other visual information. <br><br>  I will not forget to mention that I chose <b>TestNG</b> as a framework for conducting the tests themselves.  Why?  First, because it has the ability to generate reports on the passage of tests.  But when I studied in more detail, I realized that he had many other advantages, such as integrability with <a href="http://maven.apache.org/">maven</a> and <a href="http://ant.apache.org/">ant</a> , the ability to be used by such continuous integration systems as <a href="http://jenkins-ci.org/">jenkins</a> and <a href="http://hudson-ci.org/">hudson</a> , multi-threaded work ... Very well this wonderful framework is described in <a href="http://habrahabr.ru/post/121234/">this article</a> .  <a href="http://testng.org/doc/index.html">Who cares, you can see the documentation.</a> <br><br>  But, something I get distracted ... <br><br>  As a logger, I decided to use <a href="http://docs.oracle.com/javase/6/docs/api/java/util/logging/Logger.html">java.util.logging.Logger</a> .  Why? <br><br>  - it is in any java starting from 1.4, there is no need for extra dependencies on the project; <br>  - it is easy to integrate with browser logs (Mozilla Firefox, for other bowsers, log extraction has not been implemented yet); <br>  - in the case of using other logging libraries ( <a href="http://www.slf4j.org/">log4j</a> , <a href="http://www.slf4j.org/">slf4j</a> or <a href="http://logback.qos.ch/">logback</a> , for example), it is always possible to send messages to their loggers. <br><br>  But: <br><br>  - I would like to get rid of the explicit initialization of the logger; <br>  - There are advanced use cases - building a hierarchy of messages.  A large number of levels that, in principle, should correspond to debugging information - FINE, FINER, FINEST ... Something extra is needed to be cut off. <br>  - the selected logger, as well as those listed above, cannot attach files to their messages.  This is not about FileHandler or something similar. <br><br>  Now the solution. <br><br>  In my project, I created a class that I called shortly and clearly - Log.  Its main methods are: <br>  - debug (String) - generates messages with the <b>FINE</b> level; I suggest using them for debugging purposes. <br>  - error (String) - generates messages with the <b>SEVERE</b> level, signals of serious errors; <br>  - message (String) - generates messages with the <b>INFO</b> level, signals about the normal state; <br>  - warning (String) - generates messages with the <b>Warning</b> level, signals about possible problems; <br>  - log (Level, String) - for those who still want to generate a message with any of <a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Level.html">these levels</a> . <br><br>  The same methods with an additional parameter in the form of an object caught an exception: <br><br>  - debug (String, Throwable); <br>  - error (String, Throwable); <br>  - log (Level, String, Throwable); <br>  - message (String, Throwable); <br>  - warning (String, Throwable). <br><br>  Next (note!), Methods with the ability to link a file and write a log: <br><br>  - debug (String, File); <br>  - error (String, File); <br>  - log (Level, String, File); <br>  - message (String, File); <br>  - warning (String, File). <br><br>  In fact, all this is a simple wrapping around java.utils.logging.Log and <a href="http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogRecord.html">java.utils.logging.LogRecord</a> .  These are all static public methods that can be accessed anywhere in the project. <br><br>  <a href="http://paste2.org/ZzkypeDf">An example of use</a> .  You can use instead of comments.  However, this is unlikely to surprise anyone. <br><br>  So, how do I ‚Äúcling‚Äù a file to a log?  The fact is that this logger does not create LogRecord objects, but its successor, which I called <a href="http://paste2.org/m0P0YFFC">LogRecWithAttach</a> .  It's simple!  Who will find 10 differences from the "ancestor", that is 5 points and an increase in karma. <br><br>  OK!  But someone may already have a question: ‚ÄúAuthor, but why do you need such an excess?‚Äù I will try to answer ... <br><br>  Well, first of all, one of the important functions that I wanted to implement was taking screenshots from the page.  I believe that screenshots could be a good addition to the log and reports.  And for convenience, as it seemed to me, it would be better if the log entry kept in itself a link to the photo page. <br><br>  The functions of taking screenshots are performed by a class called Photographer.  A list of his methods can be found here: <br><img src="https://habrastorage.org/storage3/02b/6cb/405/02b6cb405ff1acc155758a39c256a24f.png" alt="image"><br><br>  Its functions are as follows: <br>  1. Removal of a screenshot from the active page, saving it to a file; <br>  2. Creating a log entry with the desired level of importance, adding a link to the saved screenshot to it; <br>  3. You probably noticed that some methods have WebElement as parameters.  These methods select an element on the page, take a photo of it and return the element to its original state.  Examples of such screenshots were shown earlier.  Moreover, the highlight color depends on the ‚Äúcorrectness‚Äù of the state of the selected page fragment.  So, in the screenshot, an incorrect (well, like) state was photographed: <br><img src="https://habrastorage.org/storage3/4e1/8f7/3ee/4e18f73ee090df85642613afce394818.png" alt="image"><br><br>  The list of documents with incorrect content (by the ‚Äútest‚Äù condition, a text document and MS Access database should not be loaded) is highlighted in bright orange.  This photo was taken by one of the calls to the Photographer.takeAPictureOfAWarning (WebDriver, WebElement, String) method. <br><br>  True, there is one BUT (!!!) - the elements are allocated using javaScript'a.  There was an idea to make projections on screenshots on the coordinates of elements.  It even happened.  However, for elements that sit inside frames or are on pages with scrolls, such projections (circled areas) were obtained with an offset.  From the idea had to be abandoned.  But on the other hand - now you can record video with special effects! .. <br><br>  In general - my photographer, as it were, complements the log. <br><br>  The second, not bad, opportunity is to attach any file, in principle.  For example, is it really bad to find a link to a file in a report that displays a drilldown based on accumulated messages?  For example, the one that was loaded into Google Drive from the example above.  And this link to open it to view. <br><br>  So, I smoothly turn to the construction of operational reports on the passage of one or more tests. <br><br>  To begin with, for those cases when you need to convert the log with the above features, I came up with an interface that I called <a href="http://paste2.org/dCpCedD7">IlogConverter</a> . <br><br>  Here is an example of use.  For example, we additionally use the log4j library.  We need to have this file data logger.  You can create a class whose object would check if the incoming message has an attachment.  And if it is, an additional message log4j is generated.  And so that this object could "listen" to the log, I suggest this method - Log.  addConverter (ILogConverter).  This mechanism works thanks to <a href="http://paste2.org/Ycy5KtWM">this code</a> . <br><br>  And this is what happens when a new message appears: <br>  <b><i>converting.convert (rec);</i></b> <br><br>  I made for my framework something like a ‚Äústandard‚Äù implementation of the named interface, which is responsible for the formation of the TestNG report details.  I called it ConverterToTestNGReport.  What she does?  It intercepts messages from the log, according to a certain html template (which I am currently hard-coding in the form of a final attribute) forms a report line: <br>  <b><i>Reporter.setEscapeHtml (false);</i></b> <b><i><br></i></b>  <b><i>Reporter.log (htmlInjection);</i></b> <br><br>  Additionally - if the message has an attached screenshot - then we turn it into "&lt;img src = \", if any other file is "&lt;a href = \".  True, there are only links to files.  While the files themselves on these links for some reason do not open.  But now it is enough for me (!!!). <br><br>  The result is the following report fragments.  I want to draw attention to the fact that these are not customized reports. <br><img src="http://habrastorage.org/storage3/66a/8d1/4f7/66a8d14f79dd354e8d7ce06ac863dfdd.png" alt="image"><br><img src="https://habrastorage.org/storage3/8c6/182/7c7/8c61827c7b6918137a27cc18a61a972b.png" alt="image"><br><img src="https://habrastorage.org/storage3/118/836/48b/11883648b6c5bf5eda0cec9d1717873f.png" alt="image"><br><img src="https://habrastorage.org/storage3/bfe/f95/e96/bfef95e96d77cee7fd850e57ba13ec0e.png" alt="image"><br><img src="https://habrastorage.org/storage3/9c8/ee6/b6c/9c8ee6b6c2c3e6d84ef5b75639807a15.png" alt="image"><br><img src="https://habrastorage.org/storage3/f27/f01/abf/f27f01abf085b68678a6c3b96b838f9b.png" alt="image"><br><br>  Of course, it may be rude, but for the first time it will do.  I think it's worth figuring out whether it is possible to customize the granularity of the TestNG report.  If so, then you can make such a caste and use it instead of the hard-coded template. <br><br>  And so far everything seems to be good.  But this is not enough.  I will explain ... <br><br>  OK!  We have an easy to use logger.  We even have a tool that allows you to build a report.  But you also need to ensure that the status of the passed test is synchronized with the maximum level of the log messages. <br><br>  I explain.  If nothing is done, the test will have the status of <b>SUCCESS</b> if it passed to the end and did not fall.  If in the process of its execution there was an uncaught exception, then the test will have the status <b>FAILURE</b> .  If the test is dependent, and the defining test did not pass - <b>SKIP</b> .  And now let us ask ourselves the question: ‚ÄúIs it possible to consider the test as fully passed if something happened during the course of its execution, because of which records with a level of WARNING or even SEVERE fell into the log?‚Äù.  Ie, the passed test has the status of SUCCESS, however, looking at its detailing, we see yellow and red lines.  I consider it, at least, misinformation. <br><br>  My solution is below. <br>  I implemented a class that <a href="http://paste2.org/9Oc2GE5G">links the thread (and TestNG supports multithreading) with the test itself</a> .  Further, storage of log messages with reference to a specific test (an instance of a class that implements <a href="http://testng.org/javadoc/org/testng/ITestResult.html">ITestResult</a> ) is implemented.  At this moment I will not stop.  I will demonstrate how the log message is bound to the tests.  <a href="http://paste2.org/FL0D5INh">It is produced by the object of the mentioned ConverterToTestNGReport</a> .  Finally, I implemented the <a href="http://testng.org/javadoc/org/testng/ITestListener.html">ITestListener</a> interface as a class that: <br>  - before starting the execution of tests (test methods), add an instance of ConverterToTestNGReport to the log as a listener. <br>  - after executing each test method, synchronizes the status of its passing with that recorded the log: <br>  1. if the test has passed to the end, but there are messages in the log with the <b>SEVERE</b> level - the status of its passing changes to FAILURE. <br>  2. if the test passed to the end and no messages with the SEVERE or WARNING level were recorded - its status remains unchanged - <b>SUCCESS</b> . <br>  3. If messages with the WARNING level were fixed, then I suggest changing its status to <b>SUCCESS_PERCENTAGE_FAILURE</b> .  <a href="http://paste2.org/dW17LPnO">Or allow the "user" to choose the most appropriate status</a> . <br><br>  <b>And now the final!</b> <br>  To build the reports described above, you need to perform the following action: <br>  <b><i>@Listeners ({ReportBuildingTestListener.class})</i></b> <b><i><br></i></b>  <b><i>public class NewTest {</i></b> <br><br>  In conclusion to this chapter, I would like to say that logging is already largely automated.  Those.  graphically, any interactive action is recorded ‚Äî the input of values ‚Äã‚Äã(before input and after input), clicks and submit (before an action is taken), the appearance of new tabs / browser windows, the results of clicking on links.  For all the rest, certain "standard" text messages are formed. <br><br>  Some of these functions are assumed by the classes, which are a layer between the tools that make up Selenium and the classes of a higher level. <br><br>  This <b>ExtendedEventFiringWebDriver</b> is the heir to <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/events/EventFiringWebDriver.html">EventFiringWebDriver</a> , which actually does all the dirty work.  It is ‚Äúdried‚Äù by the implementation of the <b>IExtendedWebDriverEventListener</b> interface (extended <a href="http://internetka.in.ua/webdrivereventlistener/">WebDriverEventListener</a> ), which is part of the <b>WebDriverEncapsulation</b> as a nested class.  Some of the logging functions are taken by <b>WindowSwitcher</b> and <b>SingleWindow</b> , the browser window / tab manager and the window / tab view itself. <br><br>  <a href="http://paste2.org/N9hGCW4Y">Self logging can be configured for the project as a whole.</a>  However, I would like to talk about configuring and named classes in another article that may be ... <br><br><h4>  <b>7. Are there no analogues?</b> </h4><br><br><img src="https://habrastorage.org/storage3/ddc/5e3/a8a/ddc5e3a8a86c84bf7017d068f6027171.png" alt="image"><img src="https://habrastorage.org/storage3/68e/4dc/037/68e4dc037b14e64a9970d57b44a0aa5a.png" alt="image"><img src="https://habrastorage.org/storage3/08c/be7/100/08cbe71001db26681c247f9e2d008fe7.png" alt="image"><img src="https://habrastorage.org/storage3/25c/54c/f41/25c54cf41ffdf94d7cc0683c731bca7a.png" alt="image"><br><br>  So!  One of the tasks was to try to find analogues and try to work with them.  It broadens the mind.  In addition, many useful features are already implemented.  And then why write a bike that does the same thing?  Better anyway anyway!  It is much more useful to see how the necessary functions are implemented, and learn how to use them. <br><br>  And actually, what is the analogy? <br><br>  The functionality that I completely refused to implement is working with objects whose classes implement WebElement in one form or another.  Those.  I decided to do nothing at all in this direction, because  came across a video - a report about <a href="http://habrahabr.ru/company/yandex/blog/158787/">this</a> wonderful framework.  And rather there was an interest to try it in practice.  This I fully managed during experiments with Google Drive.  Moreover, <a href="https://github.com/yandex-qatools/htmlelements">it was</a> possible to establish interaction with <a href="https://github.com/yandex-qatools/htmlelements">yandex-qatools htmlelements</a> without any efforts.  For example, <a href="http://paste2.org/vLKkWzdb">here are the constructors of an abstract class, from which all Page - objects on this demo project are inherited.</a>  <a href="http://paste2.org/MyIHKpkK">But</a> I got <a href="http://paste2.org/MyIHKpkK">such a set of attributes</a> for a class that describes the general properties of all Google documents.  Do you see the WebElement here?  Everywhere typed attributes describe the page fields, and some of them are included in the packages of the named library.  Some of the elements that were needed were not there.  But with this tool <a href="http://paste2.org/4bsgkpve">they were easily described</a> . <br><br>  And all this was possible without sacrificing the functionality on which I was laying.  Quite the contrary.  The decomposition of the page descriptions, which I mentioned earlier, has become even more visual.  This is a win-win situation! <br><br>  Another interesting <a href="http://paste2.org/7LBtG2xe">method of working with fields on the page is presented on the example of the</a> heir of the PageObject class, which is implemented in the thucydides framework (it will be discussed later). <br><br>  So, there are more than enough arguments in favor of not doing useless work in this direction. <br><br>  In the course of my "research" I came <a href="https://github.com/thucydides-webtests/thucydides">across</a> another tool - the <a href="https://github.com/thucydides-webtests/thucydides">thucydides</a> already mentioned.  Reading articles about it, looking at the repository and trying to write something, I came to the conclusion that it is best to use its capabilities and somehow make friends with it.  And believe me, there are many reasons for this: <br>  - the step-by-step organization of automated tests; <br>  - the <a href="http://java.dzone.com/articles/automated-acceptance-testing">ability to describe scripts</a> using the <a href="http://jbehave.org/">JBehave framework</a> , and not just in the form of working code; <br>  - A set of convenient methods and tools for working with pages; <br>  - <a href="https://weblogs.java.net/blog/johnsmart/archive/2011/10/21/thucydides-release-0415-two-way-jira-integration">integration with JIRA</a> and other issue trackers. <br>  - reports.  About coverage.  Story.  Etc. <br>  one. <img src="https://habrastorage.org/storage3/1e9/ce8/8fa/1e9ce88fa9ee619222bb6e422ed1510d.png" alt="image"><br>  2 <img src="https://habrastorage.org/storage3/47f/636/bb2/47f636bb2b5fe55ee2fe1cae5e3fa0e9.png" alt="image"><br>  3 <img src="https://habrastorage.org/storage3/d6e/4fb/477/d6e4fb47746c05c919e13a013fbac0dc.png" alt="image"><br><br>  To tell the truth, I had an idea to make a second demo project in conjunction with thucydides.  Not enough time either, or enthusiasm.  But maybe I will come back to him.  I just want to share an idea and find out how feasible it is.  And now I‚Äôll tell you what I managed to realize: <br><br>  - <b>implemented "cross-driver"</b> . <br>  - The <b>ability to work with several open browsers in one test.</b> <br>  - <b>implemented configurability.</b> <br>  You can make one setting for the whole project with the indication of the browser used, Capabilities parameters, timeouts (wait timeouts for Webdriver, your own - related to the waiting times for new windows / tabs, switching between them). <br><br>  You can make a set of additional / individual settings that can partially overlap the total. <br><br>  Those.  - in general, the browser, its capabilities / settings and a set of timeouts are indicated.  In additional - only the browser and features.  In the case of creating a new instance of Webdriver for this setting, the specified browser will open, configured as necessary, but its timeouts will be taken from the general setting. <br><br>  This can be used, for example, to parameterize tests.  <a href="http://testng.org/doc/documentation-main.html">Example parameterization for TestNG</a> .  <a href="http://paste2.org/bZc1dghj">My example</a> . <br><br>  - <b>mechanisms for controlling windows / tabs of the browser (including loading the necessary pages) without reference to the content.</b> <br>  - a <b>set of tools that hide an instance of webdriver at the highest levels</b> .  All work happens through them.  What is the gain - all the black work associated with the use of interfaces such as <a href="http://selenium.googlecode.com/svn%406865/trunk/docs/api/java/org/openqa/selenium/HasInputDevices.html">HasInputDevices</a> , <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.Options.html">Options</a> , <a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/JavascriptExecutor.html">JavascriptExecutor</a> , etc.  already done.  <a href="http://paste2.org/JzecJX9V">Examples</a> <br><br>  If there is a sense, I will tell about the above in another article. <br><br>  - <b>described in 4 and 5, the method of organizing objects that implement interactive interaction.</b> <br>  - <b>described in 6 logging and method of constructing reports on the example of the TestNG report.</b> <br><br>  As you can see from the above, I tried to focus on working with WebDriver and related components. <br><br>  What I do not have in thucydides (an impression with a still distant sign) in this regard: <br>  - the <b>possibility of tracking and building a map of the opened pages.</b>  Classes <a href="">Pages</a> and <a href="">PageUrls</a> .  I can only go directly to the link, go back and forth; <br>  - <b>tools for working with elements, an additional set of expectations</b> .  <a href="">PageObject</a> . <br><br>  And now the idea in general: <br>  1. I want to use my mechanism to open the browser. <br>  2. The object of the successor of the Entity class described earlier is a wrapper for the Pages object.  So I will try to combine the functionality of both classes. <br>  3. You can somehow combine the functionality of the heirs of the Page (Chapter 4) and PageObject classes (thucydides). <br>  4. Let's return to the report with number 3. As you can see, the steps can be very large (the very first one passed in a minute, there are 30 or more seconds).  Surely these are not atomic steps.  The screenshots presented in this report are the states at the end of the step.  What if the step failed?  For example, I would like to see illustrations of what caused the product to be in an incorrect state. <br>  So, I think, if we turn the focus described in Chapter 6, provided that there is an opportunity to create a detail of a step in a report that can be called from the outside during its execution, that would be great! <br>  5. Everything else does thucydides. <br><br>  Like that! <br><br>  At the moment, I think the ideal option is not to develop some kind of monstrous system, the functionality of which cannot be expanded through the use of third-party tools.          , : <br> ‚Äî     ; <br> ‚Äî                    ,        ,   Selenium Webdriver   . <br><img src="https://habrastorage.org/storage3/8a7/b35/b65/8a7b35b65807f2feedcd9d91c1933039.png" alt="image"><br>            . <br><br><h4> <b>8.  .</b> </h4><br><br> <a href="https://github.com/TikhomirovSergey/primitive">  .</a> <br> <a href="https://github.com/TikhomirovSergey/googledocs">    Google Drive.    Yandex QA Tools Html Elements.</a> , -    .    .     FireFox, Chrome, Safari  RemoteWebDriver,  Chrome. <br>     *.jar .  -       , : <br> 1.  jdk7. <br> 2.   maven project. <br> 3.  .    selenium ( 2.35)  TestNG! <br> 4.   pom.xml  <a href="http://paste2.org/W7fO0D4s"></a> . <br><br>   ,    .  . ,  -   <a href="https://github.com/TikhomirovSergey/primitive/wiki"></a> .    ,  .    .    -  .  .      .       ,    ,   ,    ? <br><br><h4> <b>9.  .</b> </h4><br><br><img src="https://habrastorage.org/storage3/695/532/954/695532954f8854ce1efe7ff66cc32a3d.png" alt="image"><br> ,     .      ‚Ä¶ <br><br>  ,  ,     ,      .     ,    ‚Äì   ‚Äì ,  -     . <br><br>   ,        .            ,  -    .      ,    ,      .    -  ,    ,  . <br><br>        .     ,         .        - .  In this case: <br> ‚Äî       .     : <br> <b>FireFox ( 21.0);</b> <br> <b>Chrome (26-30);</b> <br> <b>Internet Explorer ( 9.0.8112);</b> <br> <b>Safari (5.1.7  Windows);</b> <br> <b>Opera (12.16)</b> <br> <b>HTMLUnitDriver</b> ‚Äì    ; <br> <b>RemoteWebDriver</b> c     . <br> ‚Äî        iPhone  Android,    PhantomJS. <br> ‚Äî      TestNG.   <a href="http://reportng.uncommons.org/">   </a> . <br> ‚Äî         <a href="http://habrahabr.ru/post/120101/">Junit</a> . <br> ‚Äî     . <br><br>  ,  -  .      ( ), ,   . <br><br>  See you! </habracut></div><p>Source: <a href="https://habr.com/ru/post/192742/">https://habr.com/ru/post/192742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192728/index.html">A look at the problems of higher IT education from the teacher</a></li>
<li><a href="../192730/index.html">Sony PRS-T3 - a new reader with a higher resolution display</a></li>
<li><a href="../192736/index.html">Calculating the maximum number in the array at compile time</a></li>
<li><a href="../192738/index.html">0 dB Silent computer. Version 1.0</a></li>
<li><a href="../192740/index.html">CornerJS, or ‚Äúas in AngularJS‚Äù directives, only better</a></li>
<li><a href="../192744/index.html">Web design 2013: traditions, innovations, basics</a></li>
<li><a href="../192748/index.html">Pressy - the all-powerful Android button</a></li>
<li><a href="../192752/index.html">Solving Japanese crosswords with a single SQL query</a></li>
<li><a href="../192754/index.html">Business plan template (financial model) studios / agencies</a></li>
<li><a href="../192756/index.html">API services Mangomag.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
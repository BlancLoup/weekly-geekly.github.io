<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How JS Works: Animation with CSS and JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[We advise you to read] Other 19 parts of the cycle  Part 1: Overview of the engine, execution time mechanisms, call stack 
 Part 2: About the V8 inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How JS Works: Animation with CSS and JavaScript</h1><div class="post__text post__text-html js-mediator-article"><div class="spoiler">  <b class="spoiler_title">[We advise you to read] Other 19 parts of the cycle</b> <div class="spoiler_text">  Part 1: <a href="https://habrahabr.ru/company/ruvds/blog/337042/">Overview of the engine, execution time mechanisms, call stack</a> <br>  Part 2: <a href="https://habrahabr.ru/company/ruvds/blog/337460/">About the V8 internals and code optimization</a> <br>  Part 3: <a href="https://habrahabr.ru/company/ruvds/blog/338150/">Memory management, four types of memory leaks and dealing with them</a> <br>  Part 4: <a href="https://habrahabr.ru/company/ruvds/blog/340508/">Event loop, asynchrony, and five ways to improve code with async / await</a> <br>  Part 5: <a href="https://habrahabr.ru/company/ruvds/blog/342346/">WebSocket and HTTP / 2 + SSE.</a>  <a href="https://habrahabr.ru/company/ruvds/blog/342346/">What to choose?</a> <br>  Part 6: <a href="https://habrahabr.ru/company/ruvds/blog/343568/">Features and Scope of WebAssembly</a> <br>  Part 7: <a href="https://habrahabr.ru/company/ruvds/blog/348424/">Web Workers and Five Use Cases</a> <br>  Part 8: <a href="https://habrahabr.ru/company/ruvds/blog/349858/">Service Workers</a> <br>  Part 9: <a href="https://habrahabr.ru/company/ruvds/blog/350486/">Web push notifications</a> <br>  Part 10: <a href="https://habrahabr.ru/company/ruvds/blog/351256/">Tracking DOM Changes with MutationObserver</a> <br>  Part 11: <a href="https://habrahabr.ru/company/ruvds/blog/351802/">The engines of rendering web pages and tips to optimize their performance</a> <br>  Part 12: <a href="https://habr.com/company/ruvds/blog/354070/">Browser networking subsystem, optimizing its performance and security</a> <br>  Part 12: <a href="https://habr.com/company/ruvds/blog/354070/">Browser networking subsystem, optimizing its performance and security</a> <br>  Part 13: <a href="https://habr.com/company/ruvds/blog/354438/">Animation with CSS and JavaScript</a> <br>  Part 14: <a href="https://habr.com/company/ruvds/blog/415269/">How JS works: abstract syntax trees, parsing and its optimization</a> <br>  Part 15: <a href="https://habr.com/company/ruvds/blog/415377/">How JS Works: Classes and Inheritance, Babil and TypeScript Transformation</a> <br>  Part 16: <a href="https://habr.com/company/ruvds/blog/415505/">How JS Works: Storage Systems</a> <br>  Part 17: <a href="https://habr.com/company/ruvds/blog/415881/">How JS Works: Shadow DOM Technology and Web Components</a> <br>  Part 18: <a href="https://habr.com/company/ruvds/blog/416821/">How JS: WebRTC and P2P Communication Mechanisms Work</a> <br>  Part 19: <a href="https://habr.com/company/ruvds/blog/419831/">How JS Works: Custom Elements</a> </div></div><br>  Animation is an integral part of modern web interfaces.  On how it is relevant, attractive and productive, depends on a large proportion of user experience from working with the site or web application.  Today, in the translation of the thirteenth part of a series of materials on the features of JavaScript and related technologies, we will talk about the animation performed by CSS and JS, as well as discuss approaches to its optimization. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yw/bc/0_/ywbc0_-fcvxsttkn92-uztx0zgy.jpeg"></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Overview</font> </h2><br>  Surely you know that animation, in addition to its purely utilitarian role, has a huge impact on the attractiveness of web applications.  Users are increasingly paying attention to UX-design projects, which leads to the fact that the owners of web resources come to realize the importance of creating on their websites such conditions that would allow users to feel comfortable there.  All this, in addition to the visual appeal of the pages and the convenience of working with them, leads to the fact that web projects become ‚Äúharder‚Äù, to the fact that the number of dynamic elements grows in their interfaces.  All this requires more complex animations, which, for example, allow you to organize a smooth change in the status of web pages during the user experience with them.  Today, animation is not considered something special.  Users are becoming more demanding, they are already accustomed to expecting web projects to have interactive, responsive interfaces. <br><br>  However, animating interfaces is not so simple.  What to animate?  When to animate?  What sensations should animation cause?  Finding answers to these questions may require a lot of effort. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">JavaScript animation and CSS animation</font> </h2><br>  You can create animations in two main ways: using JavaScript, using <a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Animations_API">the web animation API</a> , and using CSS.  The choice of method depends on the specific task, so I immediately want to note that it is impossible to clearly speak about the advantage of one technology over another. <br><br><h3>  <font color="#3AC1EF">‚ñçCSS-animation</font> </h3><br>  CSS animation is the easiest way to get something moving around the screen.  Let's start with a simple example that demonstrates moving an element along the X and Y axes. This is done using the CSS <code>translate</code> transform, which is configured for a duration of 1000 ms. <br><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.box</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(0, 0); <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transition</span></span>: -webkit-transform <span class="hljs-number"><span class="hljs-number">1000ms</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(0, 0); <span class="hljs-attribute"><span class="hljs-attribute">transition</span></span>: transform <span class="hljs-number"><span class="hljs-number">1000ms</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.box</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.move</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(50px, 50px); <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(50px, 50px); }</code> </pre> <br>  When you add the <code>move</code> class, the <code>transform</code> value changes and the transition begins.  In addition to the duration, we can customize the dynamics of the animation ( <code>easing</code> ).  The essence of this setting comes down to the fact that it affects how the user perceives the animation.  We‚Äôll talk about animation dynamics later. <br><br>  The illustration below shows support for CSS transitions with modern browsers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9c6/2f8/065/9c62f80653c43c27b49502d665f8ed86.png"></div><br>  <i><font color="#999999">Support for CSS transitions with modern browsers</font></i> <br><br>  As you can see, this feature has a very high level of support. <br><br>  If, as in the previous code snippet, you create separate CSS classes to control the animation, then you can enable or disable the animation using JavaScript. <br><br>  Suppose we have the following element. <br><br><pre> <code class="hljs cs">&lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"box"</span></span>&gt; Sample content. &lt;/div&gt;</code> </pre> <br>  Using JavaScript, you can start and stop its animation. <br><br><pre> <code class="hljs matlab">var boxElements = document.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'box'</span></span>),   boxElementsLength = boxElements.<span class="hljs-built_in"><span class="hljs-built_in">length</span></span>,   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt; boxElementsLength; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>++) { boxElements[<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>].classList.add(<span class="hljs-string"><span class="hljs-string">'move'</span></span>); }</code> </pre> <br>  In this code snippet, we take all the elements that are assigned to the <code>box</code> class and add the class <code>move</code> to them in order to start their animation. <br><br>  Such CSS sharing features ‚Äî for describing animations, and JS ‚Äî for launching and disabling it, make the application well-balanced.  The developer can focus on managing the state of the elements from JavaScript by simply assigning the appropriate classes to the target elements, allowing the browser to independently perform the animations described by CSS.  If you delve into a similar scenario of working with animation, you can listen to the event's <code>transitionend</code> event, but you should do so only if you support older versions of Internet Explorer. <br><br>  The <code>transitionend</code> event is raised at the end of the transition.  Here's how to work with him. <br><br><pre> <code class="hljs lua">var boxElement = document.querySelector(<span class="hljs-string"><span class="hljs-string">'.box'</span></span>); //      box. boxElement.addEventListener(<span class="hljs-string"><span class="hljs-string">'transitionend'</span></span>, onTransitionEnd, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTransitionEnd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { //   . }</code> </pre> <br>  In order to make web interface elements more dynamic, in addition to using CSS transitions, you can use CSS animations.  They give the developer a much greater level of control over the individual keyframes of the animation, the duration of the animation steps and the iterations of the animation. <br><br>  Keyframes are used to tell the browser which CSS property values ‚Äã‚Äãshould have at specified times.  The browser independently finds intermediate values ‚Äã‚Äãfor properties when moving from one keyframe to another. <br><br>  Consider an example. <br><br><pre> <code class="hljs css"><span class="hljs-comment"><span class="hljs-comment">/** *  -     *  .     * (     ),   *  ! */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.box</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">animation-name</span></span>: movingBox; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">animation-duration</span></span>: <span class="hljs-number"><span class="hljs-number">2300ms</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*  -           */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">animation-iteration-count</span></span>: infinite; <span class="hljs-comment"><span class="hljs-comment">/*                 */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">animation-direction</span></span>: alternate; } @<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> movingBox { 0% {   <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(0, 0);   <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.4</span></span>; } 25% {   <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.9</span></span>; } 50% {   <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(150px, 200px);   <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.2</span></span>; } 100% {   <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">translate</span></span>(40px, 30px);   <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.8</span></span>; } }</code> </pre> <br>  <a href="https://sessionstack.github.io/blog/demos/keyframes/">Here is the</a> page that shows the operation of this code. <br><br>  Using CSS animations, the animation itself is described independently of the target element, and then use the <code>animation-name</code> property to select the desired animation. <br><br>  CSS animations, until now, sometimes require the use of browser developer prefixes.  So, the prefix <code>-webkit-</code> used in Safari, Safari Mobile, and Android browsers.  In Chrome, Opera, Internet Explorer, and Firefox browsers, animations work without prefixes.  In order to create CSS code with prefixes, you can use a variety of auxiliary tools, which allows the developer, in the source code of animations, to do without prefixes. <br><br><h3>  <font color="#3AC1EF">‚ñçJavaScript animation</font> </h3><br>  Creating animations using JavaScript using the web animation API is more difficult than using CSS transitions and CSS animations, but this approach usually gives the developer much greater possibilities. <br><br>  JS-animations are described in the application code.  Like any other code, they can, for example, be placed in objects.  Here is an example of the JS code you need to write in order to recreate the CSS transition described above. <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> boxElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.box'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> animation = boxElement.animate([ {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate(0)'</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">transform</span></span>: <span class="hljs-string"><span class="hljs-string">'translate(150px, 200px)'</span></span>} ], <span class="hljs-number"><span class="hljs-number">500</span></span>); animation.addEventListener(<span class="hljs-string"><span class="hljs-string">'finish'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ boxElement.style.transform = <span class="hljs-string"><span class="hljs-string">'translate(150px, 200px)'</span></span>; });</code> </pre> <br>  By default, the use of the web animation API only modifies the appearance of the element.  If you want the object to remain in the position to which it was moved during the animation, you must, at the end of the animation, modify its style.  That is why in the above example, we listen for the <code>finish</code> event and set the property of the <code>box.style.transform</code> element to <code>translate(150px, 200px)</code> , which expresses the same thing that was done with the object using the second transformation performed by JS. <br><br>  When using JavaScript animations, the developer has full control over the element styles at each stage of the animation.  This means that the animation can be slowed down, paused, stopped, reversed, manipulated elements in any way.  This is especially useful during the creation of complex applications, the development of which uses an object-oriented approach, since the behavior of elements can be properly encapsulated. <br><br><h2>  <font color="#3AC1EF">Animation dynamics</font> </h2><br>  The natural movement of objects gives users a feeling of comfort when working with web applications, which leads to a better user experience. <br><br>  If we talk about how objects move in the real world, it can be noted that they, for example, do not move linearly.  In the physical world, moving objects accelerate and slow down, since they are affected by a variety of environmental factors.  The human brain is accustomed to expect from objects such movements, therefore, animating web applications, it should be taken into account. <br><br>  Here are a couple of terms that will be useful to us when talking about the dynamics of animation.  Namely, let's talk about the so-called smoothness functions.  Their use allows you to influence the dynamics of the animation. <br><br><ul><li>  <code>ease-in</code> is a function that, when applied, first performs the animation slowly and then accelerates gradually. <br></li><li>  <code>ease-out</code> is a function whereby the animation starts quickly, and then slowly slows down. <br></li></ul><br>  These functions can be combined.  As a result, the <code>ease-in-out</code> function can be obtained, for example. <br><br>  Controlling the dynamics of animation allows you to make the movement of objects perceived as more natural. <br><br><h3>  <font color="#3AC1EF">‚ñçKeywords to control the dynamics of animation</font> </h3><br>  CSS transitions and animations allow the developer to choose smoothness features.  There are various keywords that affect the dynamics of an animation.  In addition, you can create your own functions and smoothness.  Here are some keywords that can be used in CSS to control the dynamics of an animation: <br><br><ul><li>  linear </li><li>  ease-in </li><li>  ease-out </li><li>  ease-in-out </li></ul><br>  Let us consider them in more detail in order to find out how they affect the animation. <br><br><h3>  <font color="#3AC1EF">Linear Animation linear</font> </h3><br>  The <code>linear</code> keyword allows for linear animation.  In fact, this animation is described by a linear function, when applied, the object is animated at a constant speed, without acceleration and deceleration. <br><br>  This is what a linear CSS transition graph looks like. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe5/f56/9cf/fe5f569cff4e5994ed82abfd575bbaf7.png"></div><br>  <i><font color="#999999">Linear animation</font></i> <br><br>  It can be seen that over time the value increases evenly.  Linear displacements, however, are perceived as unnatural.  In general, it should be noted that such animations should be avoided. <br><br>  Here is the description of the animation: <br><br><pre> <code class="hljs pgsql">transition: <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span>ms linear;</code> </pre> <br><h3>  <font color="#3AC1EF">EaseEasy-out animation</font> </h3><br>  As already mentioned, the use of the <code>ease-out</code> function leads to a high animation speed at the beginning of the process (its speed is higher than with a linear function), which slows down at the end of the animation.  Here is the graphic representation of such an animation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ba/ebd/55b/1baebd55ba73be7752322fc9a4b7f5a8.png"></div><br>  <i><font color="#999999">Ease-out animation</font></i> <br><br>  In general, such an animation is better suited for the user interface, since its quick start gives the feeling of responsiveness of the element, while the slowdown at the end of the animation also makes it more natural due to the presence of uneven movement. <br><br>  There are many ways to achieve this effect, but the easiest way is to use the CSS <code>ease-out</code> keyword: <br><br><pre> <code class="hljs pgsql">transition: <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span>ms ease-<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>;</code> </pre> <br><h3>  <font color="#3AC1EF">EaseEasy-in animation</font> </h3><br>  This animation is the opposite of the one we just looked at.  It is characterized by low speed at the beginning and increase in speed at the end.  Here is its graphic representation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/033/e31/eac/033e31eac47a5906da315320e1478e69.png"></div><br>  <i><font color="#999999">Ease-in animation</font></i> <br><br>  Compared to the <code>ease-out</code> animation, the <code>ease-in</code> animation looks unusual, as it gives a feeling of a low level of responsiveness of the element due to a slow onset.  Acceleration at the end also creates strange sensations, as the speed of animation increases over time, while objects in the real world, before stopping, usually reduce speed. <br><br>  To use this animation, similarly to the previous one, you can use the <code>ease-in</code> keyword: <br><br><pre> <code class="hljs pgsql">transition: <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span>ms ease-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>;</code> </pre> <br><h3>  <font color="#3AC1EF">EaseEasy-in-out animation</font> </h3><br>  This animation is a combination of <code>ease-in</code> and <code>ease-out</code> animations.  Here is what her schedule looks like. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/487/811/c21/487811c216dc8bf3ea866333c6c9de62.png"></div><br>  <i><font color="#999999">Ease-in-out animation</font></i> <br><br>  It is worth noting here that it is not recommended to use animations that are too long, as they create the feeling that the interface has stopped responding to its effects. <br><br>  You can use this animation using the <code>ease-in-out</code> keyword: <br><br><pre> <code class="hljs pgsql">transition: <span class="hljs-keyword"><span class="hljs-keyword">transform</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span>ms ease-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>;</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçCreating eigenfunctions of smoothness</font> </h3><br>  The developer can define his own smoothness functions, which give much better control over what user experience is created by the animations used in the project. <br><br>  In fact, behind the keywords that we talked about above ( <code>ease-in</code> , <code>ease-out</code> , <code>linear</code> ) are <a href="https://en.wikipedia.org/wiki/B%25C3%25A9zier_curve">Bezier curves</a> , details of which can be used to control the animation <a href="http://www.w3.org/TR/css3-transitions/">here</a> and <a href="https://w3c.github.io/web-animations/">here</a> .  Give them some time, since it is on them that the creation of eigenfunctions of smoothness is based. <br><br><h3>  <font color="#3AC1EF"> Bezier curves</font> </h3><br>  To construct a Bezier curve, you need four values, or, more precisely, two pairs of numbers.  Each pair describes the X and Y coordinates of the reference point of the cubic Bezier curve.  The curve itself begins at the coordinate (0, 0), and ends at the coordinate (1, 1).  You can customize the properties of control points.  The values ‚Äã‚Äãof the X coordinates of the control points must be in the range [0, 1], the values ‚Äã‚Äãof Y must also fall in the range [0, 1], although it should be noted that the specifications do not fully clarify this point. <br><br>  Even a small change in the X and Y values ‚Äã‚Äãof the reference points leads to a significant change in the curve.  Take a look at a pair of graphs of Bezier curves, the reference points of which have very close, but different coordinates. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a33/44b/6e9/a3344b6e951a9afd642c2b54cc6d442c.png"></div><br>  <i><font color="#999999">First bezier curve</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/438/1d2/f3d/4381d2f3dfb0273e1db38b69d7040eb0.png"></div><br>  <i><font color="#999999">Second bezier curve</font></i> <br><br>  As you can see, these two graphs are very different from each other.  Here is the description of the second curve in CSS: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">transition</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">transform</span></span> 500<span class="hljs-selector-tag"><span class="hljs-selector-tag">ms</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cubic-bezier</span></span>(0<span class="hljs-selector-class"><span class="hljs-selector-class">.465</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.183</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.153</span></span>, 0<span class="hljs-selector-class"><span class="hljs-selector-class">.946</span></span>);</code> </pre> <br>  The first two numbers are the X and Y coordinates of the first reference point, the second pair is the coordinates of the second one. <br><br><h2>  <font color="#3AC1EF">Optimize animation performance</font> </h2><br>  When animating interfaces, you need to ensure that the frame rate does not fall below 60 FPS, otherwise it will badly affect how users perceive animated pages. <br><br>  Like everything else in this world, you have to pay for the animation.  At the same time, the animation of some properties is ‚Äúcheaper‚Äù than the animation of others.  For example, animating the <code>width</code> and <code>height</code> properties of an element changes its geometry and may cause other elements on the page to move or resize.  This process is called page layout.  We <a href="https://habrahabr.ru/company/ruvds/blog/351802/">spoke</a> about this in one of the previous materials. <br><br>  In general, you should avoid animating the properties of elements that cause a change in the page layout or redrawing it.  For most modern browsers, this means limiting the <code>opacity</code> and <code>transform</code> animations. <br><br><h3>  <font color="#3AC1EF">SSCSS-property will-change</font> </h3><br>  The <a href="https://dev.w3.org/csswg/css-will-change/">will-change</a> CSS property can be used to tell the browser that we intend to change the property of the element.  This allows the browser to apply suitable optimizations in advance of the animation.  However, you should not abuse the <code>will-change</code> property, as this will lead to waste of browser resources, which, in turn, will lead to performance problems. <br><br>  For example, here's how to add this property for <code>transform</code> and <code>opacity</code> animations: <br><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.box</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">will-change</span></span>: transform, opacity; }</code> </pre> <br>  This property is not yet understood by all browsers, but its support is available in Chrome, Firefox and Opera browsers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/87e/e7a/f58/87ee7af5890a3228639c3fa1d9f7880e.png"></div><br>  <i><font color="#999999">Support CSS properties will-change</font></i> <br><br><h3>  <font color="#3AC1EF">‚ñçJavaScript or CSS?</font> </h3><br>  What to choose for animation - web animation API, called from JS, or CSS?  You probably remember that above we said that a similar question cannot be answered unambiguously.  However, in order to still decide on the technology, consider the following considerations: <br><br><ul><li>  CSS animations and web animations, if they have native support, are usually processed by the compositor thread.  It differs from the main browser thread (main thread), where tasks are performed on styling elements, on creating a layout, on displaying data on the screen, and on executing JS code.  This means that if the browser performs some complex tasks in the main thread, the animations will be performed normally, without interruptions. </li><li>  Transforms and <code>opacity</code> animations can, in many cases, be processed by the composition stream. <br></li><li>  If some kind of animation causes a page to be redrawn or a layout change, the main thread will have to work.  This is true for CSS animations, and for JS-animations.  The additional load on the system, caused by changing the layout or redrawing the page, is likely to slow down the tasks performed by CSS or JavaScript, putting the system in a difficult position. <br></li></ul><br><h3>  <font color="#3AC1EF">‚ñçSelect objects for animation</font> </h3><br>  Sophisticated animation makes the project more interesting and more attractive to users.  They enjoy working with him.  You can animate almost anything you want: the width and height of elements, their position on the screen, colors and backgrounds.  However, planning to animate something, you should think about performance.  Unsuccessfully selected animations can adversely affect how users perceive the project, so the animations should be both fast and relevant.  In fact, it is worth striving to give the interface a natural and attractive, limited to a minimum of animation. <br><br><h3>  <font color="#3AC1EF">‚ñçUsing animations to support user interaction</font> </h3><br>  You should not animate anything just because you have the technical ability to do it.  Instead, use carefully selected animations to improve the interaction of page elements with the user.  Avoid animations that interrupt or interfere with the user's activities. <br><br><h3>  <font color="#3AC1EF">‚ñç Animations causing a heavy load on the system</font> </h3><br>  Worse than misplaced animation can only be an animation that ‚Äúhangs‚Äù the page.  Users of any web project just do not like it. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  In this article, we talked about the animation of elements of web pages using CSS and JavaScript.  Animation is a powerful tool, so you should handle it carefully.  With the right approach, animation can significantly improve the user experience of working with a web resource. <br><br>  Previous parts of a series of articles: <br><br>  Part 1: <a href="https://habrahabr.ru/company/ruvds/blog/337042/">How JS Works: Overview of the Engine, Runtime Mechanisms, Call Stack</a> <br>  Part 2: <a href="https://habrahabr.ru/company/ruvds/blog/337460/">How JS Works: About V8 Inside and Code Optimization</a> <br>  Part 3: <a href="https://habrahabr.ru/company/ruvds/blog/338150/">How JS works: memory management, four types of memory leaks and how to deal with them</a> <br>  Part 4: <a href="https://habrahabr.ru/company/ruvds/blog/340508/">How JS works: event loop, asynchrony, and five ways to improve code with async / await</a> <br>  Part 5: <a href="https://habrahabr.ru/company/ruvds/blog/342346/">How JS: WebSocket and HTTP / 2 + SSE work.</a>  <a href="https://habrahabr.ru/company/ruvds/blog/342346/">What to choose?</a> <br>  Part 6: <a href="https://habrahabr.ru/company/ruvds/blog/343568/">How JS Works: Features and Scope of WebAssembly</a> <br>  Part 7: <a href="https://habrahabr.ru/company/ruvds/blog/348424/">How JS Works: Web Workers and Five Use Cases</a> <br>  Part 8: <a href="https://habrahabr.ru/company/ruvds/blog/349858/">How JS Works: Service Workers</a> <br>  Part 9: <a href="https://habrahabr.ru/company/ruvds/blog/350486/">How JS Works: Web Push Notifications</a> <br>  Part 10: <a href="https://habrahabr.ru/company/ruvds/blog/351256/">How JS Works: Tracking DOM Changes with MutationObserver</a> <br>  Part 11: <a href="https://habrahabr.ru/company/ruvds/blog/351802/">How JS Works: Web Page Rendering Engines and Tips for Optimizing Their Performance</a> <br>  Part 12: <a href="https://habr.com/company/ruvds/blog/354070/">How JS Works: Browser Network Subsystem, Optimizing Its Performance and Security</a> <br><br>  <b>Dear readers!</b>  Have you ever come across cases when animation really interferes with working with any web resource? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/354438/">https://habr.com/ru/post/354438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354424/index.html">Digest of IT events for May</a></li>
<li><a href="../354426/index.html">Mother's son's style of girlfriend</a></li>
<li><a href="../354430/index.html">Creating a signature on the template in Outlook for the organization, on computers outside the domain</a></li>
<li><a href="../354432/index.html">These incredibly valuable skills will help you become more successful.</a></li>
<li><a href="../354434/index.html">Pandora's White Box</a></li>
<li><a href="../354440/index.html">Black Friday 2017 through the eyes of IT and developers. As we stood black Friday with a 10 times increase in traffic</a></li>
<li><a href="../354442/index.html">What is hidden inside the online cash registers: the development of a fiscal registrar</a></li>
<li><a href="../354444/index.html">Revelations emergency engineer</a></li>
<li><a href="../354448/index.html">More than a state: US foreign debt</a></li>
<li><a href="../354450/index.html">CocoaHeads April 13, 2018 from Tutu.ru office: video speeches</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
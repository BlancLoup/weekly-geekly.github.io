<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ESP8266 firmware, programming in Arduino IDE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And hello again geektimes . This material is a continuation of my previous article - ESP8266 and Arduino, connection, pinout , and I must say that the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ESP8266 firmware, programming in Arduino IDE</h1><div class="post__text post__text-html js-mediator-article">  And hello again <a href="http://geektimes.ru/">geektimes</a> .  This material is a continuation of my previous article - <a href="https://geektimes.ru/post/271078/">ESP8266 and Arduino, connection, pinout</a> , and I must say that they are interrelated.  I will not touch on topics that are already disclosed. <br><br>  And today, I will tell you how to program ESP8266 using the <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a> , also flashing other firmware, for example <a href="https://github.com/nodemcu/nodemcu-firmware">NodeMcu</a> ... In general, this material is not limited to just one Arduino theme. <br><br><img src="https://habrastorage.org/files/92a/5f2/d48/92a5f2d489e84fc3b477a5a33be87bc0.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The theme of ESP8266 is pretty complicated.  But, if you work with these Wi-Fi modules in the <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a> development environment, the threshold of entry drops to an acceptable level for an ordinary arduinschik.  And not only arduinschik, and any person who has a desire to bungle something on the topic of <a href="https://geektimes.ru/hub/internet_of_things/">IoT (Internet of Things)</a> , and not spending a lot of time reading the documentation for the chip and learning the API for these modules. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/yfIWhRrmIuY%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhg-A_hiK14tVxwyNXjxeylUzkfuiA" frameborder="0" allowfullscreen=""></iframe><br><br>  This video completely duplicates the material presented in the article below. <br><a name="habracut"></a><br>  Well, we already know how to connect the ESP8266 and put it into programming mode, now let's move on to something more useful. <br><br>  I will say right away - once having programmed the module in the Arduino development environment, we are demolishing the native firmware, and we will not be able to work with the module using AT commands.  Personally, from this, it‚Äôs not cold / not hot, but if someone needs it, towards the end of the article I‚Äôll show you how to flash the native firmware back into the module, well, or some NodeMcu-type loader. <br><br>  To begin with, on off.sayte download the latest version of the <a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a> , at the moment it is 1.6.7.  Older versions like 1.0.5.  they will not work, because they simply do not have the necessary functionality, and we are not interested in dancing with a tambourine, is it? <br><br>  Run the development environment and immediately go to File / Settings: <br><br><img src="https://habrastorage.org/files/040/c7e/70d/040c7e70d101439685fb5169f3bc1aa5.png" alt="image"><br><br>  Insert the link in the "Additional links for the Card Manager:" field and click "OK". <br><br><pre><code class="html hljs xml">http://arduino.esp8266.com/stable/package_esp8266com_index.json</code> </pre> <br><br>  I took this link on the project page of the <a href="https://github.com/esp8266/Arduino">Arduino core for ESP8266 WiFi chip</a> . <br><br>  Then we go Tools / Board: / Board manager ...: <br><br><img src="https://habrastorage.org/files/a12/730/7f9/a127307f9f274a87ab864fdc069f2041.png" alt="image"><br><br>  A window of the manager of the boards appears in front of us, scrolling it down to the bottom, and if everything is done correctly we will see something like this: <br><br><img src="https://habrastorage.org/files/253/7f8/af8/2537f8af8a2d4dd8a9fea7c0ee1ed34f.png" alt="image"><br><br>  Click the cursor on the inscription " <b>esp8266</b> by <b>ESP8266 Community</b> " after that, we have a button "Installation", choose the version you want, I take the last one, today it is 2.1.0.  and install it.  The development environment will download the files it needs (about 150 megabytes) and ‚ÄúINSTALLED‚Äù will appear next to the inscription " <b>esp8266</b> by <b>ESP8266 Community</b> ", that is, it will be installed: <br><br><img src="https://habrastorage.org/files/809/183/b65/809183b65ceb4933885263fd6e0eee58.png" alt="image"><br><br>  We scroll down the list of boards and see that we have many different ESPs in the list, we take the ‚ÄúGeneric ESP8266 Module‚Äù: <br><br><img src="https://habrastorage.org/files/812/b39/56e/812b3956eea748e2bdf0c64e3d39d49a.png" alt="image"><br><br>  Go to "Tools" and select the desired COM port (I have it COM32) <a href="https://geektimes.ru/post/271078/">Arduino or USB UART converter</a> , then set Upload Speed: "115200": <br><br><img src="https://habrastorage.org/files/98e/93b/4dd/98e93b4dd9594a9e96096568a6ee8bf6.png" alt="image"><br><br>  Next, open the console in the Arduino IDE, power on the module, if everything was done correctly, we will see something like this: <br><br><img src="https://habrastorage.org/files/1b3/4cb/414/1b34cb4149854017a7db0e51dc18ca4f.png" alt="image"><br><br>  We set the speed of 74880 and ‚ÄúNL &amp; CR‚Äù and again turn off and power up and it will respond with some debug information: <br><br><img src="https://habrastorage.org/files/83b/d9d/297/83bd9d2977d948158c56f675c5c8be1b.png" alt="image"><br><br>  Note that 74880 is not the main speed of ESP8266, it just sends debug information on it.  If the module does not send anything to the console, then something is probably not connected as it should. <br><br>  By default, the speed should be 115200, but in some cases there may be 9600 and others ... So try to pick up. <br><br><img src="https://habrastorage.org/files/4d3/a4a/5c5/4d3a4a5c58bd4777b03646b9a1e92d1c.png" alt="image"><br><br>  After selecting the desired speed, send the module "AT" and he must answer that everything is "OK".  The ‚ÄúAT + GMR‚Äù command displays information about the firmware. <br><br>  <b>Before you start to flash ESP8266 in the Arduino IDE, I advise you to finish reading the article to the end.</b> <br><br>  Now let's try flashing the ESP8266 through the Arduino IDE.  We translate the module into the programming mode (as I wrote in the <a href="https://geektimes.ru/post/271078/">previous article</a> ). <br><br>  Let's flash the flasher with a regular LED: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// By Mr youtube.com/RazniePodelki // special to geektimes.ru/post/271754/ #define TXD 1 // GPIO1/TXD01 void setup() { pinMode(TXD, OUTPUT); } void loop() { digitalWrite(TXD, HIGH); delay(1000); digitalWrite(TXD, LOW); delay(1000); }</span></span></code> </pre><br><br>  Zamigal?  So everything is done correctly.  Where did I get that the LED is connected to the first pin?  In the previous article there is a <a href="http://www.pighixxx.com/test/2015/09/esp8266-pinout/">picture with pinout of different modules</a> , and there is a marking of ports, when using the Arduino loader (the pins are marked in pink). <br><br><img src="https://habrastorage.org/files/d3a/04b/640/d3a04b6401e946ceb4db8efba5756ba2.png" alt="image"><br><br>  LED flashing is nice, but some web server should be patched up or started to control the LED at least with the help of buttons in the browser, isn't it?  But I will tell you about this some other time. <br><br>  And now <b>how to flash back the native firmware</b> , and how to even flush the module with third-party loaders.  For ESP8266 there is such a program as <a href="https://github.com/nodemcu/nodemcu-flasher">NodeMCU Flasher</a> , which was originally designed for flashing the <a href="https://github.com/nodemcu/nodemcu-firmware">NodeMCU</a> bootloader.  But as it turned out, it perfectly flushes other firmware. <br><br>  I will attach an archive with this program and firmware to the article for convenience, but <a href="https://github.com/nodemcu/nodemcu-flasher">here</a> you can always download the new version of NodeMCU Flasher. <br><br>  There are 2 Win64 and Win32 folders in the nodemcu-flasher-master folder, and depending on how much bit your OS chooses.  Next, in the Release folder, run ‚ÄúESP8266Flasher.exe‚Äù and see the program interface: <br><br><img src="https://habrastorage.org/files/360/d5d/806/360d5d8061ca46058ced09e0bdc297b4.PNG" alt="image"><br><br>  Select the desired COM port and go to the ‚ÄúConfig‚Äù tab, remove the tag near ‚ÄúINTERNAL: // NODEMCU‚Äù and put it one point below, as in the screenshot: <br><br><img src="https://habrastorage.org/files/8b0/1fc/efd/8b01fcefdb4549cd937050872a78f093.PNG" alt="image"><br><br>  (If you want to flash the NodeMCU loader, remove the tag where it was not, and install it where it was, that is, near ‚ÄúINTERNAL: // NODEMCU‚Äù). <br><br>  Then click on the gear and choose where our firmware is, the firmware is usually in * .bin format (in the attached archive it is ‚Äúv0.9.5.2 AT Firmware.bin‚Äù which is in the main folder), and also choose ‚Äú0x00000‚Äù as and higher. <br><br><img src="https://habrastorage.org/files/8a9/fc5/f8a/8a9fc5f8a2a447e99e9ec006b36bf994.PNG" alt="image"><br><br>  Next we go to the tab ‚ÄúAdvanced‚Äù and change the speed there to 115200, it is this speed that will be the main one and the module will respond to AT commands in case of the corresponding firmware. <br><br>  We return again to the ‚ÄúOperation‚Äù tab; we translate the module into programming mode and click ‚ÄúFlash‚Äù: <br><br><img src="https://habrastorage.org/files/49b/2b7/111/49b2b71116cd4231b1de93c23ba16ec0.PNG" alt="image"><br><br>  Everything, the module began to flash, after flashing we do not forget to restart the module and voila, it is flashed with the firmware we need. <br><br><img src="https://habrastorage.org/files/77c/95c/2b8/77c95c2b8d9f443a9d64513bb0f7951f.png" alt="image"><br><br>  We check with the AT-command GM + that we have done everything right: <br><br><img src="https://habrastorage.org/files/439/725/22b/43972522b3f2431a9a75d5400b6fee06.png" alt="image"><br><br>  As you can see everything was fine. <br><br>  References: <br>  <a href="https://vk.com/doc256435878_437314884">Archive with NodeMCU Flasher, firmware and code for the Arduino IDE</a> ; <br>  <a href="https://geektimes.ru/post/271078/">ESP8266 and Arduino, connection, pinout</a> ; <br>  <a href="https://www.arduino.cc/en/Main/Software">The latest version of the Arduino IDE is always here</a> ; <br>  <a href="https://github.com/nodemcu/nodemcu-flasher">NodeMCU Flasher</a> ; <br>  <a href="http://esp8266.ru/">Russian-speaking community for ESP8266</a> ; <br>  <a href="http://esp8266.ru/downloads/esp8266-firmware/">Many different firmware for ESP8266</a> ; <br>  <a href="http://geektimes.ru/users/hwman/topics/">All my publications are on geektimes</a> . <br><br>  By Sergei Delinkinz aka MrPodolkinC. <br><br><div class="spoiler">  <b class="spoiler_title">PS</b> <div class="spoiler_text">  Already on the way, a motherboard based on esp32: <br><br><img src="https://habrastorage.org/files/de2/718/3c3/de27183c3b3f4c1b9891593faf2132aa.png" alt="image"><br>  <a href="http://www.pighixxx.com/test/2015/12/esp32-pinout/">http://www.pighixxx.com/test/2015/12/esp32-pinout/</a> <br><br>  Which is much cooler than esp8266, so we are soon waiting for a boom, I think, the themes of <a href="https://geektimes.ru/hub/internet_of_things/">IoT (Internet of Things)</a> . <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/371853/">https://habr.com/ru/post/371853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../371841/index.html">PicoWAN networks for IoT devices</a></li>
<li><a href="../371843/index.html">Bionic engineering: the first shoots</a></li>
<li><a href="../371845/index.html">Founder of Wargaming.net has become a dollar billionaire</a></li>
<li><a href="../371849/index.html">New photos from New Horizons: the icy canyons of Pluto</a></li>
<li><a href="../371851/index.html">Pay bitcoins and be healthy</a></li>
<li><a href="../371855/index.html">2 days to create a residential house: 3D printers help build houses</a></li>
<li><a href="../371857/index.html">Smart watches have overtaken Swiss brands watches.</a></li>
<li><a href="../371859/index.html">Highscreen Power Ice - elegant smartphone long-liver</a></li>
<li><a href="../371861/index.html">[Testing] Secure USB-drive with PIN-pad Kingston DataTraveler 2000</a></li>
<li><a href="../371863/index.html">Sci-Hub helps scientific "pirates" download 200,000 scientific articles a day for free</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
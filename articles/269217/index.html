<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web application architecture. Stack Spring MVC + AngularJs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr. 

 Below you will find a translation dedicated to the development of web applications. The stack described by the author demonstrates an ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web application architecture. Stack Spring MVC + AngularJs</h1><div class="post__text post__text-html js-mediator-article">  Hello, Habr. <br><br>  Below you will find a translation dedicated to the development of web applications.  The stack described by the author demonstrates an interesting possibility of combining Java and JavaScript, and also allows you to take a fresh look at creating one-page web applications. <br><br>  In this case, we will ask if you want to see on the shelf the translation of the following books on <a href="http://www.amazon.com/Beginning-Spring-Mert-Caliskan/dp/1118892925/ref%3Dsr_1_4%3Fs%3Dbooks%26ie%3DUTF8%26qid%3D1445409221%26sr%3D1-4%26keywords%3DSpring%2Bframework">Spring</a> and <a href="http://www.amazon.com/dp/1118832078">AngularJS</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://habrahabr.ru/company/piter/blog/269217/"><img src="https://habrastorage.org/files/387/6ef/3aa/3876ef3aa4cd4f6bb51cdbcd5a49a2c9.jpg"><img src="https://habrastorage.org/files/4b9/3cd/bd5/4b93cdbd5534449ba90baf750e663df6.jpg"></a> <br><a name="habracut"></a><br><br>  The technologies Spring MVC and AngularJs together form a truly productive and attractive stack for developing web applications, especially those that require intensive work with forms. <br><br>  This article will discuss how to build just such an application.  We will compare this approach with other available options.  A full-featured secure web application written using Spring MVC / AngularJs is located in this <a href="https://github.com/jhades/spring-mvc-angularjs-sample-app">repository</a> on GitHub. <br><br>  We will consider the following questions: <br><br><ul><li>  Architecture of the one-page web application Spring MVC + Angular </li><li>  How to structure a web user interface with Angular </li><li>  Which JavaScript / CSS libraries work well with Angular </li><li>  How to build a machine interface REST API using Spring MVC </li><li>  Protecting the REST API with Spring Security </li><li>  Comparing this approach with others, where the entire project is implemented in Java? </li></ul><br><br>  <b>Architecture of the one-page web application Spring MVC + Angular</b> <br><br>  Applications for the corporate environment, involving intensive work with forms, are best done in the form of single-page web applications.  The main idea that makes them stand out against the background of more traditional server architectures is to create a server as a set of stateless, reusable REST services.  In the context of MVC, it is important to remove the controller from the machine interface and transfer it to the browser: <br><br><img src="https://habrastorage.org/files/411/690/dff/411690dff1ed4df398bdec6129bd2272.jpg"><br><br>  The client supports the MVC pattern and contains all the presentation logic, which is divided into the presentation level, the controller level and the client services level.  When the application is launched, the client and server will only exchange JSON data. <br><br>  <b>How is the machine interface implemented?</b> <br><br>  The machine interface of a corporate application with a client part is logical and convenient to write as a REST API.  The same technology can be used to provide web services to third-party applications.  Often, in such cases, there is no need for a separate stack of SOAP web services. <br><br>  From the point of view of <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">DDD,</a> the domain model remains on the machine interface, in the same place where the level of services and the level of persistence are.  Only <a href="http://martinfowler.com/eaaCatalog/dataTransferObject.html">DTOs</a> are transmitted over the network, but not the domain model. <br><br>  <b>How to structure the client part of a web application using Angular</b> <br><br>  The client part should line up around the model related to the view (and not the subject area).  Here only the presentation logic should be processed, but not the business logic.  In the client part, there are three levels: <br><br>  <i><b>Presentation level</b></i> <br><br>  The presentation layer consists of HTML templates, CSS tables, and Angular directives, corresponding to the various components of the user interface.  Here is an example of a simple presentation for a <a href="https://github.com/jhades/spring-mvc-angularjs-sample-app/blob/master/src/main/webapp/resources/public/login.html">login form</a> : <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-submit</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onLogin()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">novalidate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LoginCtrl"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span>Log In<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-field"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vm.username"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"username"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">required</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-minlength</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"6"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-field"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vm.password"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">required</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-minlength</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"6"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(?=.*\d)(?=.*[az])(?=.*[AZ]).{6,}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span>Log In<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/resources/public/new-user.html"</span></span></span><span class="hljs-tag">&gt;</span></span>New user?<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  <i><b>Control level (controller)</b></i> <br><br>  The control level consists of Angular controllers, sticking data together, retrieved respectively from the machine interface and from the view.  The controller initializes the view model and determines how the view should respond to model changes and vice versa: <br><br><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'loginApp'</span></span>, [<span class="hljs-string"><span class="hljs-string">'common'</span></span>, <span class="hljs-string"><span class="hljs-string">'editableTableWidgets'</span></span>]) .controller(<span class="hljs-string"><span class="hljs-string">'LoginCtrl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope, LoginService</span></span></span><span class="hljs-function">) </span></span>{ $scope.onLogin = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Attempting login with username '</span></span> + $scope.vm.username + <span class="hljs-string"><span class="hljs-string">' and password '</span></span> + $scope.vm.password); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($scope.form.$invalid) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } LoginService.login($scope.vm.userName, $scope.vm.password); }; });</code> </pre><br><br>  One of the main tasks of the controller is to perform validation in the client part.  All such client validations are provided only for the convenience of the user - for example, with their help, it is convenient to immediately inform the user that the field is required. <br>  All acts of client validation must be repeated on the machine interface (at the service level) for security reasons, since client validation is easy to bypass. <br><br>  <i><b>Client Services Level</b></i> <br><br>  In Angular controllers, you can embed a set of Angular services that can interact with the machine interface: <br><br><pre> <code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'frontendServices'</span></span>, []) .service(<span class="hljs-string"><span class="hljs-string">'UserService'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$http'</span></span>,<span class="hljs-string"><span class="hljs-string">'$q'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$http, $q</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">getUserInfo</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> deferred = $q.defer(); $http.get(<span class="hljs-string"><span class="hljs-string">'/user'</span></span>) .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.status == <span class="hljs-number"><span class="hljs-number">200</span></span>) { deferred.resolve(response.data); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { deferred.reject(<span class="hljs-string"><span class="hljs-string">'Error retrieving user info'</span></span>); } }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deferred.promise; }</code> </pre><br><br>  Let's look at what other libraries we need to start the work of the client part. <br><br>  <i><b>Which JavaScript / CSS libraries should complement Angular?</b></i> <br><br>  Angular already provides much of the functionality needed to create the client side of your application.  Here are some interesting additions for Angular: <br><br><ul><li>  <a href="http://purecss.io/">PureCSS</a> library from yahoo.  It is written in pure CSS, provides a convenient design using the themes contained in it and weighs only 4k.  Its <a href="http://yui.github.io/skinbuilder/%3Fmode%3Dpure">Skin Builder</a> component makes it easy to generate a theme based on the base color.  This is a BYOJ (Bring Your Own Javascript) solution to help write code ‚Äúin the spirit of Angular‚Äù. </li><li>  Library for data operations in the style of functional programming.  This library seems to boast excellent support and documentation that has been unsurpassed since the days of <a href="https://lodash.com/">lodash</a> . </li></ul><br><br>  Armed with these two libraries and Angular, you can build almost any application with forms, practically nothing is needed anymore.  Depending on the specifics of your project, some other libraries may be useful: <br><br><ul><li>  It is convenient to have a system of modules like <a href="https://egghead.io/lessons/requirejs-introduction-to-requirejs">requirejs</a> , but since the Angular module system does not handle file retrieval, there is some duplication when declaring requirejs dependencies and angular modules. </li><li>  Angular <a href="https://github.com/aditzel/spring-security-csrf-token-interceptor">CSRF</a> module, which prevents attacks related to cross-site request forgery. </li><li>  Internationalization module </li></ul><br><br>  <b>How to build a machine interface REST API using Spring MVC</b> <br><br>  This machine interface contains the usual levels: <br><br><ul><li>  Routing Level: Determines which service entry points correspond to specific HTTP URLs and how parameters will be read from an HTTP request. </li><li>  Service level: contains only business logic (for example, provides validation), determines the scope of business transactions </li><li>  Persistence level: Displays a database of domain objects stored in memory and vice versa. </li></ul><br><br>  Currently, the best Spring MVC configuration involves only using the Java configuration.  Even <code>web.xml <br></code> <code>web.xml <br></code>  already, in general, is not required.  See <a href="https://github.com/jhades/spring-mvc-angularjs-sample-app/tree/master/src/main/java/calories/tracker/config">here</a> an example of a fully configured application that uses only Java. <br><br>  Service levels and persistence are created using the normal DDD model, so let's pay attention to the routing level. <br><br>  <i><b>Routing level</b></i> <br><br>  The same Spring MVC annotations that are used to create a JSP / Thymeleaf application can also be used in developing the REST API. <br><br>  The big difference is that the controller's methods do not return a String object that would determine which view template to display.  Instead, the @ ResponseBody annotation is applied, indicating that the return value of the controller method should be directly displayed and become the body of the response: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ResponseBody</span></span> <span class="hljs-meta"><span class="hljs-meta">@ResponseStatus</span></span>(HttpStatus.OK) <span class="hljs-meta"><span class="hljs-meta">@RequestMapping</span></span>(method = RequestMethod.GET) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UserInfoDTO </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUserInfo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Principal principal)</span></span></span><span class="hljs-function"> </span></span>{ User user = userService.findUserByUsername(principal.getName()); Long todaysCalories = userService.findTodaysCaloriesForUser(principal.getName()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> user != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserInfoDTO(user.getUsername(), user.getMaxCaloriesPerDay(), todaysCalories) : <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br><br>  If all class methods are to be annotated <code>@ResponseBody <br></code> <code>@ResponseBody <br></code>  it is better to provide the entire class with the <code>@RestController <br></code> annotation <code>@RestController <br></code>  . <br><br>  If you add the Jackson JSON library, the return value of the method will be converted directly to JSON without any further configuration.  In addition, this value can be converted to XML or other formats, depending on the value of the HTTP <code>Accept <br></code> header. <code>Accept <br></code>  specified by the client. <br><br>  <a href="https://github.com/jhades/spring-mvc-angularjs-sample-app/tree/master/src/main/java/calories/tracker/app/controllers">This</a> shows a pair of controllers that have error handling configured. <br><br>  <b>How to protect the REST API with Spring Security</b> <br><br>  The REST API can be secured using the Spring Security Java configuration.  In this case, it is advisable to use the login form with HTTP Basic authentication as a backup option, as well as connect the protection from CSRF and the ability to hard to specify that all methods of the machine interface can only be accessed via HTTPS. <br><br>  Thus, the machine will offer the user a login form, and after successful login, will assign the session cookie to browser clients, but will also work with other clients, supporting rollback to regular HTTP in cases where credentials are transmitted using the HTTP Authorization header. <br><br>  In accordance with the recommendations of <a href="https://www.owasp.org/index.php/REST_Security_Cheat_Sheet">OWASP,</a> REST services can be programmed with minimal state preservation (all server state information is limited to the session cookie used for authentication).  This is done so as not to send credentials over the network with each request. <br><br>  Here is <a href="">an example of</a> configuring REST API security: <br><br><pre> <code class="java hljs">http .authorizeRequests() .antMatchers(<span class="hljs-string"><span class="hljs-string">"/resources/public/**"</span></span>).permitAll() .anyRequest().authenticated() .and() .formLogin() .defaultSuccessUrl(<span class="hljs-string"><span class="hljs-string">"/resources/calories-tracker.html"</span></span>) .loginProcessingUrl(<span class="hljs-string"><span class="hljs-string">"/authenticate"</span></span>) .loginPage(<span class="hljs-string"><span class="hljs-string">"/resources/public/login.html"</span></span>) .and() .httpBasic() .and() .logout() .logoutUrl(<span class="hljs-string"><span class="hljs-string">"/logout"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"true"</span></span>.equals(System.getProperty(<span class="hljs-string"><span class="hljs-string">"httpsOnly"</span></span>))) { LOGGER.info(<span class="hljs-string"><span class="hljs-string">"launching the application in HTTPS-only mode"</span></span>); http.requiresChannel().anyRequest().requiresSecure(); }</code> </pre><br><br>  This configuration takes into account authentication only in the security context, and the authorization strategy is chosen depending on the security requirements of the API.  If you need fine control over authorization, check out the Spring Security ACLs access control lists and see if they are appropriate for your task. <br><br>  Now let's compare this way of creating web applications with other common approaches. <br><br>  <b>Comparing Spring MVC / Angular stack with other common variants</b> <br><br>  This way of using JavaScript in the client side and Java - working with a database simplifies the workflow and increases its productivity. <br><br>  When the machine interface is already running, no special tools or plugins are required to disperse the hot deployment in the client side to full capacity: just publish resources on the server using the IDE (for example, press Ctrl + F10 in IntelliJ) and refresh the page in the browser. <br><br>  Machine interface classes can still be reloaded using <a href="http://zeroturnaround.com/software/jrebel/">JRebel</a> , but in the client part, nothing needs to be done separately.  In principle, you can build the entire client part, simulating the machine interface with, say, <a href="https://egghead.io/lessons/nodejs-creating-demo-apis-with-json-server">json-server</a> .  In this case, various specialists will be able to develop in parallel the client part and the machine interface, if required. <br><br>  <b>Increased productivity or full-blown development?</b> <br><br>  In my experience, the ability to directly edit HTML / CSS without any levels of indirection (see, for example, the <a href="http://blog.jhades.org/the-java-origins-of-angular-js-angular-vs-jsf-vs-gwt/">general comparison of Angular with GWT and JSF</a> ) helps to reduce mental load and not complicate the work.  The development cycle ‚Äúedit-save-update‚Äù is very fast and reliable, it allows you to work much more productively. <br><br>  The greatest gains in productivity are achieved in cases where the same developers write both the client side in JavaScript and the machine interface in Java, since for the implementation of most of the features, simultaneous changes are usually required both there and there. <br><br>  The potential disadvantage of this approach is this: these developers need to know HTML, CSS, and JavaScript, but in recent years such competence is becoming more common. <br><br>  My experience suggests that full-stack development allows you to implement the most difficult cases in the client side for a fraction of the time it takes to create a full-scale Java solution (days, not weeks), and this increase in productivity definitely justifies additional training. <br><br>  <b>findings</b> <br><br>  The combination of Spring MVC and Angular allows you to really take a fresh look at the development of web applications related to intensive form filling.  This approach increases productivity so much that you should definitely look at it. <br><br>  The absence of a binding to the server state between requests (except for authentication with a cookie), by definition, relieves us of a whole class of bugs. <br><br>  Additionally, I suggest to get acquainted with this application on <a href="https://github.com/jhades/spring-mvc-angularjs-sample-app">github</a> . </div><p>Source: <a href="https://habr.com/ru/post/269217/">https://habr.com/ru/post/269217/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269207/index.html">Angular2 close</a></li>
<li><a href="../269209/index.html">Do I need a dart?</a></li>
<li><a href="../269211/index.html">MikroTik - MTCNA</a></li>
<li><a href="../269213/index.html">Let's Encrypt Announces IdenTrust Cross Certification</a></li>
<li><a href="../269215/index.html">Oracle, typical SQL tasks. Transformation of the values ‚Äã‚Äãlisted in the column to table rows</a></li>
<li><a href="../269219/index.html">Plesk 12.5 Hosting Control Panel Overview</a></li>
<li><a href="../269221/index.html">I am writing a CMS for PHP. Part 1</a></li>
<li><a href="../269223/index.html">PYCON RUSSIA-2015: videos and presentations</a></li>
<li><a href="../269225/index.html">Know your customer, or Oracle Industry Solutions</a></li>
<li><a href="../269227/index.html">From zero to 700 gigabits per second - as one of the largest video hosting sites in Russia ships the video</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
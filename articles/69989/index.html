<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>L-Systems - the mathematical beauty of plants</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The beauty of plants has attracted the attention of mathematicians for centuries. Interesting geometric properties of plants, such as the symmetry of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>L-Systems - the mathematical beauty of plants</h1><div class="post__text post__text-html js-mediator-article">  The beauty of plants has attracted the attention of mathematicians for centuries.  Interesting geometric properties of plants, such as the symmetry of the leaves relative to the central axis, the radial symmetry of flowers, and the spiral arrangement of the seeds in the cones, were most actively studied.  ‚ÄúBeauty is associated with symmetry‚Äù (H. Weyl. Symmetry).  During the growth of living organisms, especially plants, one can clearly see regularly repeated multicellular structures.  In the case of compound leaves, for example, small leaves, which are part of a large adult leaf, have the same shape that the whole leaf had at an early stage of formation. <br><br>  In 1968  Hungarian biologist and botanist Aristid Lindenmayer (Aristid Lindenmayer) proposed a mathematical model to study the development of simple multicellular organisms, which was later expanded and used to model complex branching structures - various trees and flowers.  This model is called the Lindenmayer System, or simply the L-System. <br><br>  <em>For those who are in the subject and do not want to read everything in their entirety, check down, there is a question.</em> <br><a name="habracut"></a><br>  I will shorten the L-System to L in the text. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Rewriting. </h3><br><br>  The main idea of ‚Äã‚ÄãL is the constant rewriting (rewriting) of line elements.  What is it about?  In short, rewriting is a way to get complex objects by replacing parts of a simple initial object according to some rules.  A classic example is a snowflake.  In the figure, initiator is the initial object whose faces are replaced by the generator.  Next, the same thing is done with the new object.  In this case, the usual fractal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/395/a80/6df/395a806dfc5e80cca0b5221eb28ac07c.jpg"><br><br>  Returning to L and drawing an analogy with fractals, we can say that L operates on a string of characters according to special rules, starting with the original simple axiom.  People familiar with the concept of grammar will immediately notice that in essence L is.  But the fundamental difference between L and <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0">formal grammars</a> is that the rules apply simultaneously to the whole line, to each character, plus, there are no concepts of terminal and non-terminal characters.  That is, the "conclusion" of this grammar can continue indefinitely.  The simultaneous application of the rules very quickly becomes clear when you consider where this model came from.  In biology, each cell grows, divides and develops in parallel in time.  The following picture shows the relationship between context-free (OL), context-dependent (IL) L and other formal grammars in the <a href="http://ru.wikipedia.org/wiki/%25D0%2598%25D0%25B5%25D1%2580%25D0%25B0%25D1%2580%25D1%2585%25D0%25B8%25D1%258F_%25D0%25A5%25D0%25BE%25D0%25BC%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B3%25D0%25BE">Chomsky hierarchy</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f1/317/d68/1f1317d68b99dd9b00d3ea2e8fb1b877.jpg"><br><br><h3>  The most simple L-Systems. </h3><br><br>  As in Chomsky‚Äôs classification, L have their own classification from simple to complex and powerful. <br><br>  The simplest example is deterministic context-free L, or abbreviated DOL.  I don‚Äôt like formal grammar definitions, so I‚Äôll just say it in my own words.  There is a set of symbols - the alphabet.  This alphabet records the string with which L is working. There is an axiom ‚Äî the original string of one or more letters and a set of rules of the form a ‚Üí ab.  During each iteration of the algorithm, applying a rule to a letter from the current line, it (the letter) is replaced with a set of letters to the right of the arrow.  It is easier to consider a specific example of the development of the multicellular organism Anabaena catenula, which Lindenmeier studied when he proposed the model L. <br><br>  Let our alphabet consist of the following symbols, each of which denotes a certain cell: a a a <sub>r</sub> b <sub>l</sub> b <sub>r</sub> . <br>  Axiom consists of one symbol. <br>  <em>œâ: a <sub>r</sub></em> <br><br>  And 4 rules. <br>  <em>p1: a <sub>r</sub> ‚Üí a <sub>l</sub> b <sub>r</sub></em> <em><br><br></em>  <em>p2: a <sub>l</sub> ‚Üí b <sub>l</sub> a <sub>r</sub></em> <em><br><br></em>  <em>p3: b <sub>r</sub> ‚Üí a <sub>r</sub></em> <em><br><br></em>  <em>p4: b <sub>l</sub> ‚Üí a <sub>l</sub></em> <br><br>  The rules tell which symbols change to which ones during the growth of the organism.  The picture shows how applying the rules we observe the "division" of cells and development. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af3/388/862/af3388862d91f908dc7a4ef5d6868a44.jpg"><br><br><h3>  Turtle interpretation of strings. </h3><br><br>  So far we have seen how to draw a one-dimensional bacterium, but with the help of the well-known children's programming language <a href="http://ru.wikipedia.org/wiki/%25D0%259B%25D0%25BE%25D0%25B3%25D0%25BE_(%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">LOGO</a> , in which it is proposed to control the turtle and draw shapes on the screen, one can already draw two-dimensional and three-dimensional fractals and repeating structures.  How?  It's simple.  Take the alphabet, in which each character means a certain command for a two-dimensional or three-dimensional bug: <br><br><ul><li>  F - move forward and draw a line </li><li>  f - go ahead without drawing anything </li><li>  + - turn left </li><li>  - - turn right </li><li>  &amp; - turn down </li><li>  ^ - turn up </li><li>  \ - lean to the left </li><li>  / - lean to the right </li><li>  |  - turn 180 degrees </li></ul><br><br>  These commands use the default values ‚Äã‚Äãof the rotation angle Œ¥, the step length and the basis vectors of two-dimensional and three-dimensional space.  Examples of two-dimensional fractals and L generating them can be seen in the following picture. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/232/4cd/4fc/2324cd4fcac327c71f19808bc8516cd3.jpg"><br><br><h3>  Plants and branching structures. </h3><br><br>  Everything that was before is, in general, continuous curves.  Of course, it is thus very difficult to model plants with their branching topology.  To do this, the symbols [and] were added to the alphabet, which indicate the beginning and end of branching, respectively.  When the turtle encounters the symbol [, its current state is written to the stack and pulled out when the symbol is encountered]. <br><br>  Already such a simple grammar can generate quite interesting two-dimensional and three-dimensional objects similar to trees. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d8/19b/a04/2d819ba048da961ec470551f013e6c16.jpg"><br><br><h3>  More sophisticated grammar. </h3><br><br>  Of course, science did not stand still, and now we have a solid hierarchy of L starting from the simple DOL considered earlier. <br><br>  <strong>Stochastic L.</strong> <br><br>  Stochastic L add the ability to specify the probability of the fulfillment of a rule, and in the general case are not deterministic, because different rules may have the same symbol to the left.  This introduces some element of randomness into the resulting structures. <br><br>  <strong>Context-dependent L.</strong> <br><br>  As well as context dependence in formal grammars, in L the syntax of the rules is complicated and takes into account the environment of the replaced character. <br><br>  <strong>Parametric L.</strong> <br><br>  A variable parameter (possibly more than one) is added to each symbol, which allows, for example, specifying the rotation angle for + and -, the stride length and line thickness, checking the conditions for applying the rule, counting the number of iterations and transmitting the ‚Äúsignals‚Äù back and forth.  An example of a parametric L. <br><br> <code>œâ : B(2)A(4, 4) <br> p1 : A(x, y) :y &lt;= 3 ‚Üí A(x ‚àó 2, x + y) <br> p2 : A(x, y) :y &gt; 3 ‚Üí B(x)A(x/y, 0) <br> p3 : B(x) :x &lt; 1 ‚Üí C <br> p4 : B(x) :x &gt;= 1 ‚Üí B(x ‚àí 1)</code> <br> <br>  Parametric context-dependent L models allow the growth of multicellular organisms and plants, taking into account biochemical processes and the environment.  For example, our old friend Anabaena catenula in a more complex form.  An example from the book [1]. <br><br>  As written in the book, this bacterium consists of two types of cells: vegetative cells and <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D1%2582%25D0%25B5%25D1%2580%25D0%25BE%25D1%2586%25D0%25B8%25D1%2581%25D1%2582%25D1%258B">heterocysts</a> .  Usually, vegetative cells are divided into two similar vegetative cells.  However, in some cases, vegetative cells are converted to heterocyst.  Their distribution follows a well-observable pattern, in which neighboring heterocysts are separated by approximately the same number of vegetative cells.  But how does the body maintain a constant distance between the heterocysts during growth?  The proposed model describes this phenomenon in terms of biology.  It is assumed that the location of the heterocysts is regulated by nitrogen compounds produced by these cells, which are transferred to other cells of the body and consumed in vegetative cells.  If the content of these compounds in the young vegetative cell falls below a certain level, this cell turns into a heterocyst. <br><br>  The L-System below simulates the growth of a bacterium with this in mind. <br><br>  #define assigns values ‚Äã‚Äãto the constants used in L. <br>  #include loads a heterocyst form, in this case a circle. <br>  The cells are represented by the F (s, t, c) module, where s is the cell length, t is the cell type (0 is heterocyst, 1 and 2 are vegetative cells), and c is the nitrogen concentration. <br><br> <code>#define CH 900 /* high concentration */ <br> #define CT 0.4 /* concentration threshold */ <br> #define ST 3.9 /* segment size threshold */ <br> #include H /* heterocyst shape specification */ <br> #ignore f ‚àº H <br> œâ : -(90)F(0,0,CH)F(4,1,CH)F(0,0,CH) <br> p1 : F(s,t,c) : t=1 &amp; s&gt;=6 ‚Üí F(s/3*2,2,c)f(1)F(s/3,1,c) <br> p2 : F(s,t,c) : t=2 &amp; s&gt;=6 ‚Üí F(s/3,2,c)f(1)F(s/3*2,1,c) <br> p3 : F(h,i,k) &lt; F(s,t,c) &gt; F(o,p,r) : s&gt;ST|c&gt;CT ‚Üí F(s+.1,t,c+0.25*(k+r-3*c)) <br> p4 : F(h,i,k) &lt; F(s,t,c) &gt; F(o,p,r) : !(s&gt;ST|c&gt;CT) ‚Üí F(0,0,CH) ‚àº H(1) <br> p5 : H(s) : s&lt;3 ‚Üí H(s*1.1)</code> <br> <br><img src="//habrastorage.org/files/c70/6d9/175/c706d917569445aba8a979920b83bb29.jpg"><br><br><h3>  Hypnoqab </h3><br><br>  For example, the recent hypno-lab that conquered the Internet is essentially a combination of the simplest L. <br><br><img src="//habrastorage.org/files/da7/c15/4b2/da7c154b26874a0bafe9c2e6d9840da1.gif"><br><br> <code>#define R 1.456 <br> œâ : A(1) <br> p1 : A(s) ‚Üí F(s)[+A(s/R)][‚àíA(s/R)]</code> <br> <br><h3>  More advanced. </h3><br><br>  This is just a superficial description of the theory and small examples of practical application.  What awaits the curious researcher next? <br><br><ul><li>  Modeling the growth of two-dimensional and three-dimensional multicellular organisms </li><li>  Tree Growth Animation </li><li>  Environmental Modeling </li><li>  Chemistry and biological processes modeling and growth functions </li><li>  L application to generate surfaces </li><li>  Other diverse uses, including for real estate and city modeling. </li></ul><br><br><h3>  Examples </h3><br><br><img src="//habrastorage.org/files/86d/424/150/86d424150dfb478cbe3e170811bb7101.jpg"><br><br><img src="//habrastorage.org/files/3b6/770/031/3b67700313ba437d88add7cf05fb8891.jpg"><br><br><img src="//habrastorage.org/files/7e4/8c4/06a/7e48c406a6e1438b898c7334eb2775b0.jpg"><br><br><img src="//habrastorage.org/files/352/45a/89a/35245a89a6e442b291117972b4cb4528.jpg"><br><br><h3>  Using. </h3><br><br>  Back in the late 80s, L was used to visualize plant models.  Now the possibilities of computers are far ahead.  Many games and 3d modeling tools use procedural content generation, including L-Systems.  As you can see, from a set of simple rules you can get a huge number of different plants and plant whole fields with them. <br><br>  From the editors I use L myself in <a href="http://www.sidefx.com/">Houdini</a> , I heard that there are plugins for other packages.  The so-called <a href="http://algorithmicbotany.org/">Virtual Lab</a> allows you to experiment and animate L. <br><br>  Methods of using grammars are also used in the so-called <a href="http://en.wikipedia.org/wiki/Shape_grammar">Shape Grammars</a> , but more on that later. <br><br>  Some posts on the Internet. <br>  <a href="http://avalter.blogspot.com/2009/08/2d-l.html">http://avalter.blogspot.com/2009/08/2d-l.html</a> <br><br><h3>  Books and additional material. </h3><br><br>  Generally speaking, the only available book is <a href="http://algorithmicbotany.org/papers/">The Algorithmic Beauty of Plants</a> .  Also, on the Internet are scattered old random articles.  More or less new can be found on <a href="http://www.springerlink.com/">springerlink.com</a> for a lot of money or in the institute library for free. <br><br>  What can I say, the material is quite small. <br><br><h3>  Okolobiologichesky thoughts. </h3><br><br>  I myself have exactly nothing to do with biology, but I am a Master of Mathematics with a few innocent hobbies.  But I really like the idea of ‚Äã‚ÄãL-Systems.  Simplicity with great features.  Once upon a time I wondered how DNA contains complete information about me.  How can you shove all the information about all the cells into each cell?  But in any way, one might say, the theory L opened my eyes!  It is not written in my DNA how I look, but how to collect me (in general terms).  Something similar to the set of rules in L, only related to protein synthesis. <br><br>  A simple model so clearly describes our life with you. <br><br>  Further more, we transform the rules into ‚ÄúDNA‚Äù and grow virtual multicellular by genetic algorithm. <br><br><h3>  Scientific thoughts. </h3><br><br>  I would like to find people who are also interested in the scientific component of L, to share materials and articles.  It so happened that I am currently working on the upgraded concept of L-Systems, but I have not had the opportunity to see what has been written on this topic over the past five years.  I do not want to reinvent the wheel. <br><br>  Contact the author of the BOOK failed, the answering machine says that he left for the Sabbath until January (8 <br><br>  Also, I am looking for information on Shape Grammars for 3d modeling.  There is a task to generate from the parameters of the spacecraft, well, you know such huge things with a bunch of small details - ideal candidates for SG.  Do you have to write a plugin for Houdini in Python? </div><p>Source: <a href="https://habr.com/ru/post/69989/">https://habr.com/ru/post/69989/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../69982/index.html">Something terrible is happening in the world of advertising</a></li>
<li><a href="../69983/index.html">MySQL calendar data types: usage features</a></li>
<li><a href="../69985/index.html">Generate music based on a given style</a></li>
<li><a href="../69987/index.html">Another reason to start using Chrome</a></li>
<li><a href="../69988/index.html">Replacing the sounds in Half-Life 2 voice</a></li>
<li><a href="../69992/index.html">Vedomosti. Registration is not for everyone</a></li>
<li><a href="../69993/index.html">The domestic auto industry has grown to supercars!</a></li>
<li><a href="../69994/index.html">Build Rome in less than a day</a></li>
<li><a href="../69995/index.html">MTS and HTC Hero in St. Petersburg</a></li>
<li><a href="../69996/index.html">The rules of the perfect Friday dobrotopika</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
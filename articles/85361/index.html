<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PyRoge regular debugger</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi,% username%, if you also suffer from constant problems with typing regular expressions in python - you are here! 
 Often in the work I am confronte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PyRoge regular debugger</h1><div class="post__text post__text-html js-mediator-article">  Hi,% username%, if you also suffer from constant problems with typing regular expressions in python - you are here! <a name="habracut"></a><br>  Often in the work I am confronted with writing regular expressions, and constantly experienced some discomfort with their debugging.  There are lots of different debuggers in the world, but the problem is that there are different dialects for regulars, for example, by taking regular expressions from Ruby, you cannot run it in Python ( <strike>although it would seem that the brothers)</strike> .  Therefore, I wrote a small program in Python, which allowed me to quickly solve problems on the profile.  The logic of the program, peeped somewhere on the Internet (there was a debugger for Ruby).  Yes, I also decided to comment on the code, because its a bit, but for the most impatient links to the sources <a href="http://code.google.com/p/pyroge/source/browse/">here</a> . <br>  As an initial example, the solution to your favorite <a href="https://habrahabr.ru/users/timurv/" class="user_link">timurv</a> task is <a href="https://habrahabr.ru/users/timurv/" class="user_link">loaded</a> - <a href="http://en.wikipedia.org/wiki/Look-and-say_sequence">continue the Look-And-Say sequence</a> .  It looks "approximately" like this: <br><br><img src="http://xmages.net/upload/c1e9b35c.png"><br>  Tested on Python2.5, PyQt4.4, on Windows Xp, Ubuntu 9.10 machines. <br><br><blockquote>  <font color="#ff7700">if</font> __name__ == <font color="#483d8b">"__main__"</font> : <br>  app = QtGui.  <font>QApplication</font> <font>(</font> <font color="#dc143c">sys</font> . <font>Argv</font> <font>)</font> <br>  ui = Ui_mwd <font>(</font> <font>)</font> <br>  form = Wnd <font>(</font> ui <font>)</font> <br>  ui.  <font>setupUi</font> <font>(</font> form <font>)</font> <br>  form.  <font>show</font> <font>(</font> <font>)</font> <br>  form.  <font>callSearchRegExp</font> <font>(</font> <font>)</font> <font color="#808080"># for first time evalution</font> <br>  <font color="#dc143c">sys</font> .  <font>exit</font> <font>(</font> app. <font>exec_</font> <font>(</font> <font>)</font> <font>)</font> </blockquote><br>  <strong>ui_Wnd</strong> is a class that modifies an instance of the <strong>QtGui.QMainWindow</strong> class - generated automatically by pyuic.  Wnd is my descendant of <strong>QMainWindow</strong> , about it below.  PyQt is a bit inconvenient - if you look at, all the controls that are hanging on the window belong to the <strong>ui_Wnd</strong> class, but if we define events in the same QtDesigner, they will fall on the QMainwindow child, so there is such confusion in the code and the need to send <strong>Wnd (ui)</strong> - that we in our Wnd class could contact the controls. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="#ff7700">class</font> Wnd <font>(</font> QtGui. <font>QMainWindow</font> <font>)</font> : <br>  _timer = <font color="#008000">None</font> <br>  SIGNAL_prepared = QtCore.  <font>SIGNAL</font> <font>(</font> <font color="#483d8b">'prepared (QString)'</font> <font>)</font> <br>  SIGNAL_excRaise = QtCore.  <font>SIGNAL</font> <font>(</font> <font color="#483d8b">'exceptionRaise (QString)'</font> <font>)</font> <br>  _observer = ObserveHtmlWidget <font>(</font> <font>)</font> <br><br>  <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , ui <font>)</font> : <br>  QtGui  <font>QMainWindow</font> .  <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> <font>)</font> <br>  <font color="#008000">self</font> .  <font>ui</font> = ui <br>  QtCore.  <font>QObject</font> .  <font>connect</font> <font>(</font> <font color="#008000">self</font> , <font color="#008000">self</font> . <font>SIGNAL_prepared</font> , <font color="#008000">self</font> . <font>onPrepared</font> <font>)</font> <br>  QtCore.  <font>QObject</font> .  <font>connect</font> <font>(</font> <font color="#008000">self</font> , <font color="#008000">self</font> . <font>SIGNAL_excRaise</font> , <font color="#008000">self</font> . <font>onRaiseException</font> <font>)</font> <br><br>  <font color="#ff7700">def</font> callSearchRegExp <font>(</font> <font color="#008000">self</font> <font>)</font> : <br>  txt, rg = <font color="#008000">unicode</font> <font>(</font> <font>(</font> <font color="#008000">self</font> . <font>ui</font> . <font>eText</font> . <font>toPlainText</font> <font>(</font> <font>)</font> <font>)</font> <font>)</font> , <font color="#008000">unicode</font> <font>(</font> <font color="#008000">self</font> . <font>ui</font> . <font>eReg</font> . <font>toPlainText</font> <font>(</font> <font>)</font> <font>)</font> <br>  <font color="#008000">self</font> .  <font>ui</font> .  <font>statusBar</font> .  <font>clearMessage</font> <font>(</font> <font>)</font> <br>  <font color="#ff7700">try</font> : <br>  data = <font color="#008000">self</font> ._observer <font>(</font> txt, rg <font>)</font> <br>  <font color="#ff7700">except</font> SmartError, e: <br>  <font color="#008000">self</font> .  <font>emit</font> <font>(</font> <font color="#008000">self</font> . <font>SIGNAL_excRaise</font> , e <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <font color="#66cc66">;</font> <br>  <font color="#ff7700">return</font> <br><br>  <font color="#ff7700">if</font> <font>(</font> data <font>)</font> : <br>  <font color="#008000">self</font> .  <font>emit</font> <font>(</font> <font color="#008000">self</font> . <font>SIGNAL_prepared</font> , data <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <br>  <font color="#008000">self</font> .  <font>showGroups</font> <font>(</font> data <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font>)</font> <br><br>  <font color="#ff7700">def</font> callTimerForRegExp <font>(</font> <font color="#008000">self</font> <font>)</font> : <br>  <font color="#ff7700">if</font> <font>(</font> <font color="#008000">self</font> ._timer <font>)</font> : <br>  <font color="#008000">self</font> ._timer.  <font>cancel</font> <font>(</font> <font>)</font> <br>  <font color="#008000">self</font> ._timer = <font color="#dc143c">threading</font> .  <font>Timer</font> <font>(</font> <font color="#ff4500">1</font> , <font color="#008000">self</font> . <font>CallSearchRegExp</font> <font>)</font> <br>  <font color="#008000">self</font> ._timer.  <font>start</font> <font>(</font> <font>)</font> <br><br>  <font color="#ff7700">def</font> onPrepared <font>(</font> <font color="#008000">self</font> , value <font>)</font> : <br>  <font color="#008000">self</font> .  <font>ui</font> .  <font>eHtml</font> .  <font>setHtml</font> <font>(</font> value <font>)</font> <br><br>  <font color="#ff7700">def</font> onRaiseException <font>(</font> <font color="#008000">self</font> , value <font>)</font> : <br>  <font color="#008000">self</font> .  <font>ui</font> .  <font>statusBar</font> .  <font>showMessage</font> <font>(</font> value <font>)</font> <br><br>  <font color="#ff7700">def</font> showGroups <font>(</font> <font color="#008000">self</font> , rows <font>)</font> : <br>  <font color="#008000">self</font> .  <font>ui</font> .  <font>lvas</font> .  <font>clear</font> <font>(</font> <font>)</font> <br>  <font color="#ff7700">for</font> e <font color="#ff7700">in</font> rows: <br>  <font color="#ff7700">if</font> <font color="#008000">isinstance</font> <font>(</font> e, <font color="#008000">tuple</font> <font>)</font> : <br>  prepared = <font>[</font> inverseReplace <font>(</font> i <font>)</font> <font color="#ff7700">for</font> i <font color="#ff7700">in</font> e <font>]</font> <br>  <font color="#008000">self</font> .  <font>ui</font> .  <font>lvas</font> .  <font>addItem</font> <font>(</font> <font color="#483d8b">','</font> . <font>join</font> <font>(</font> prepared <font>)</font> <font>)</font> <br>  <font color="#ff7700">else</font> : <br>  <font color="#008000">self</font> .  <font>ui</font> .  <font>lvas</font> .  <font>addItem</font> <font>(</font> inverseReplace <font>(</font> e <font>)</font> <font>)</font> </blockquote><br>  This is the main window class, in principle everything is transparent here: <br>  _timer is a device that allows you to follow the end of the input. <br>  a pair of signals to alert the main program thread that regexp was calculated or not calculated in the background <br>  <strong>observer</strong> - actually counting machine <br><br>  <strong>callTimerForRegExp</strong> - waits for a second to pass, after entering the last character and calls <strong>callSearchRegExp</strong> , it already calls the counting machine, which returns to the window either regexp data or declared Exception - about the correct error, inside the program.  <strong>showGroups</strong> - this thing allows you to correctly draw the groups that will be found on a regular basis. <br><br><blockquote>  <font color="#808080"># advanced regexp evaluting</font> <br>  <font color="#ff7700">class</font> ObserveHtmlWidget <font>(</font> <font color="#008000">object</font> <font>)</font> : <br>  phtml = <font color="#483d8b">'&amp; lt; span style = "background-color: # BFE4FF; color: # 0066B3; padding: 2px;" &amp; gt;% s &amp; lt; / span &amp; gt;'</font> <br>  <font color="#ff7700">def</font> _exec <font>(</font> <font color="#008000">self</font> , func, value, ignoreExc <font>)</font> : <br>  <font color="#ff7700">try</font> : <br>  value = func <font>(</font> value <font>)</font> <br>  <font color="#ff7700">except</font> ignoreExc, e: <br>  <font color="#ff7700">raise</font> SmartError <font>(</font> <font color="#483d8b">'% s:% s'</font> <font color="#66cc66">%</font> <font>(</font> <font color="#008000">type</font> <font>(</font> e <font>)</font> .__ name__, e <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <font>)</font> <br>  <font color="#ff7700">return</font> value <br><br>  <font color="#ff7700">def</font> <font color="#0000cd">__call__</font> <font>(</font> <font color="#008000">self</font> , text = <font color="#483d8b">''</font> , regexp = <font color="#483d8b">''</font> <font>)</font> : <br>  <font color="#ff7700">if</font> regexp == <font color="#483d8b">''</font> : <br>  <font color="#ff7700">return</font> <br>  html, groups = <font color="#483d8b">''</font> , <font>[</font> <font>]</font> <br><br>  text, regexp = htmlReplace <font>(</font> text <font>)</font> , protectedReplace <font>(</font> regexp <font>)</font> <br>  ptn = <font color="#008000">self</font> ._exec <font>(</font> <font color="#dc143c">re</font> . <font color="#008000">compile</font> , regexp, <font color="#dc143c">re</font> . <font>error</font> <font>)</font> <br>  matches = <font color="#008000">self</font> ._exec <font>(</font> ptn. <font>search</font> , text, <font color="#008000">Exception</font> <font>)</font> <br>  <font color="#ff7700">while</font> <font>(</font> matches <font color="#ff7700">and</font> text <font color="#66cc66">&lt;&gt;</font> <font color="#483d8b">''</font> <font>)</font> : <br>  s, e, v = matches.  <font>start</font> <font>(</font> <font>)</font> , matches.  <font>end</font> <font>(</font> <font>)</font> , matches.  <font>group</font> <font>(</font> <font>)</font> <br>  groups.  <font>append</font> <font>(</font> matches. <font>groups</font> <font>(</font> <font>)</font> <font>)</font> <br>  html + = text <font>[</font> : s <font>]</font> + <font color="#008000">self</font> .  <font>phtml</font> <font color="#66cc66">%</font> v <br>  <font color="#ff7700">if</font> not e <font color="#ff4500">0</font> : <br>  text = text <font>[</font> <font color="#ff4500">1</font> : <font>]</font> <br>  <font color="#ff7700">else</font> : <font color="#808080"># null valued iterations</font> <br>  text = text <font>[</font> e: <font>]</font> <br>  matches = ptn.  <font>search</font> <font>(</font> text <font>)</font> <br>  <font color="#ff7700">return</font> <font>(</font> html + text, groups <font>)</font> </blockquote><br><br>  This is actually a calculator, it gets the text and regular text to it, then it runs on matches, and if everything is OK, it returns the text with highlighted matches, and a list of groups.  If an error <strong>occurs</strong> , the correct instance of the <strong>SmartError</strong> error is <strong>returned</strong> . <br><br><blockquote>  <font color="#808080"># make simple replace</font> <br>  <font color="#ff7700">class</font> HtmlReplacer <font>(</font> <font color="#008000">object</font> <font>)</font> : <br>  mods = <font>{</font> <font color="#483d8b">'&gt;'</font> : <font color="#483d8b">'&amp; gt;'</font>  , <font color="#483d8b">'&lt;'</font> : <font color="#483d8b">'&amp; lt;'</font>  <font>}</font> <br>  <font color="#ff7700">def</font> <font color="#0000cd">__call__</font> <font>(</font> <font color="#008000">self</font> , raw <font>)</font> : <br>  <font color="#ff7700">for</font> k, v <font color="#ff7700">in</font> <font color="#008000">self</font> .  <font>mods</font> .  <font>iteritems</font> <font>(</font> <font>)</font> : <br>  raw = raw.  <font>replace</font> <font>(</font> k, v <font>)</font> <br>  <font color="#ff7700">return</font> raw <br><br>  <font color="#808080"># make replace in regexp</font> <br>  <font color="#ff7700">class</font> ProtectedHtmlReplacer <font>(</font> HtmlReplacer <font>)</font> : <br>  mods = <font>{</font> <font color="#483d8b">' <font color="#000099">\&gt;</font> '</font> : <font color="#483d8b">'&amp; gt;'</font>  , <font color="#483d8b">' <font color="#000099">\ &lt;</font> '</font> : <font color="#483d8b">'&amp; lt;'</font>  <font>}</font> <br><br>  <font color="#808080"># inverse replace</font> <br>  <font color="#ff7700">class</font> InverseHtmlReplacer <font>(</font> HtmlReplacer <font>)</font> : <br>  mods = <font>{</font> <font color="#483d8b">'&amp; gt;'</font>  : <font color="#483d8b">'&gt;'</font> , <font color="#483d8b">'&amp; lt;'</font>  : <font color="#483d8b">'&lt;'</font> <font>}</font> <br><br>  <font color="#808080">make call easier</font> <br>  htmlReplace, protectedReplace, inverseReplace = HtmlReplacer <font>(</font> <font>)</font> , ProtectedHtmlReplacer <font>(</font> <font>)</font> , InverseHtmlReplacer <font>(</font> <font>)</font> <br><br>  <font color="#808080"># this project valid exception</font> <br>  <font color="#ff7700">class</font> SmartError <font>(</font> <font color="#008000">Exception</font> <font>)</font> : <font color="#ff7700">pass</font> </blockquote><br><br>  Well, this is a free application to the code, replacing html tags, because on the control window that highlights the text, it uses html-mode, and in order to correctly display the characters &lt;&gt;, you have to change them to the corresponding html codes. <br><br>  The project is fully available <a href="http://code.google.com/p/pyroge/source/browse/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/85361/">https://habr.com/ru/post/85361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../85351/index.html">Results of the contest Cyber.video</a></li>
<li><a href="../85352/index.html">Where to make a cover for a DVD?</a></li>
<li><a href="../85354/index.html">How to buy goods on ebay</a></li>
<li><a href="../85356/index.html">How to make people recommend your site</a></li>
<li><a href="../85359/index.html">Ubuntu 9.10. Encrypted root FS, opening via SSH</a></li>
<li><a href="../85362/index.html">Alienware M11x Review</a></li>
<li><a href="../85367/index.html">Twitter is monetized for a month.</a></li>
<li><a href="../85368/index.html">Vedic approach to freelance work</a></li>
<li><a href="../85370/index.html">SQL Server Stored Procedure Optimization</a></li>
<li><a href="../85373/index.html">Trading Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
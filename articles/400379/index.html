<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we arranged the quest in the Telegram, and what came of it. UPD: we have summed up the competition</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Giktayms! In the past year, we launched one piece, which we liked, and we are going to continue. We are talking about our channel and bot in Teleg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we arranged the quest in the Telegram, and what came of it. UPD: we have summed up the competition</h1><div class="post__text post__text-html js-mediator-article">  <b>Hi, Giktayms!</b>  In the past year, we launched one piece, which we liked, and we are going to continue.  We are talking about our channel and bot in Telegram, and the competition that we are launching today for you.  But about everything in order: the whole story began half a year ago, at the beginning of the summer, and let's begin with this. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/files/5f4/259/49b/5f425949b03d4d4283d53d2eab70e647.png"></div><br>  So, somewhere in June, we sat down to discuss what we want to do at Igromir.  We had 90 meters of space, 4 focal models of gaming headsets, a go-go girls team, a new keyboard, the legendary captain of CS <b>Daniel ‚ÄúZeus‚Äù Teslenko</b> , 12 boxes of prizes and an infinite number of bracelets of all sorts and colors, as well as an overclocker and stand with xbox.  Not that it was the necessary reserve for Igromir, but since I began to prepare for the largest gaming exhibition in the country, it is difficult to stop ... What we didn‚Äôt have is a quiet, quiet place where we could talk with "advanced" or "Adult" users who are interested in our products, who want to learn more about the technological features, but are lost in the general noise and din. <br><br>  UPD: We summed up the competition!  Who has won?  Read at the end of the post. <br><a name="habracut"></a><br>  And then we understood: "We need a Telegram programmer."  We proceeded from the fact that Telegram is currently more popular in geeky environments that are interested in games and hardware, and these people are slightly older than the average age of Igromir visitors.  The idea was to organize for our most active fans a special gaming experience that could be obtained on the court, having completed a number of tasks, both off-line (finding something on the stand) and in the messenger, having received tasks within Telegram.  We also really wanted to add cosplayers to the story (because ‚ÄúI didn‚Äôt take a picture with cosplayer, consider that I wasn‚Äôt at Igromir‚Äù) and social network (to increase the number of audience covered). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img width="400" src="https://habrastorage.org/files/080/02c/8c0/08002c8c0a0c4b8d9768b5c3655ad848.jpg"></div><br>  With this introduction, the overall picture has become more or less clear.  We found four magnificent cosplay-girls, each of which symbolized one of the HyperX headsets released in 2016. At the first stage of the quest, we had to collect all the new items, namely, find them at the exhibition, take a picture, and then go on to interact with the bot, who will issue a series of tasks. <br><br>  Said - does not mean done.  Surely, according to many who are not familiar with the development, creating a bot in Telegram looks like this. <br><br><img src="https://habrastorage.org/files/95a/bd9/bfc/95abd9bfc3d04524b5bca22c9fa370a6.jpg"><br>  In fact, everything is a little more complicated.  Yes, Telegram itself with its API is a frontend, but the backend must be written.  First, we planned to do on their own.  We read several guides, studied the possibilities of shareware services in which you can make bots.  But in the end it was decided that it would be better to entrust this work to professionals, since  they themselves would have spent a lot of time and effort on this, besides, we are guided by the principle that everyone should do his own business. <br><br>  We sent requests to several companies and independent freelance developers.  Half of the experts could not predict the timing and cost.  However, everyone knows what it is to work with freelancers.  As a result, during our searches, the company <a href="https://iqbot.ru/">IQBot</a> was found, which was able to adequately assess the time, cost of work and put possible costs for hosting and support there.  For all the work, we have compiled a technical assignment, discussed the deadlines once again and launched everything into the development. <br><br><h2>  Development </h2><br>  We needed not just to do a ‚Äútalk‚Äù on Bot API 2.0, for the competition we also needed a database for registering participants and results, a queue for high loads and cloud hosting for all of this.  IQBot had already worked out solutions, so they used them: they took the free MariaDB (advanced fork of MySQL) as a base, they organized a queue for the bot through RabbitMQ, which is popular for such purposes, and casual <a href="http://heroku.com/">heroku.com</a> acted as a hosting <a href="http://heroku.com/">service</a> .  With the first two solutions, everything is clear: these are free products, besides, they have long been run in Spark with messengers and even Telegram bots.  But the Heroku cloud is a good hosting if you need high power for a short time.  They have plans with daily billing and flexible paid regulation of system performance - so the work of the same bot with the backend for a week can cost a lot of ridiculous money.  IQBot prudently chose a flexible tariff on the hosting, which allowed us to dynamically change the performance - this saved us at the moment of the high popularity of the quest and, as a result, the high load on the backend, since  we were able to quickly increase the capacity of the server. <br><br>  Since the creation of a bot was more associated with the development of the backend, the PHP language was chosen, a popular Python bot would complicate communication with the database and the queue. <br><br>  The final algorithm of the bot was: <br><br><ol><li>  The user connects and sends the link. </li><li>  The system registers its Telegram-name in the database, saves the link and sends a message with thanks for participation (the HyperX Cloud Stinger headset was then played out among all the participants). </li><li>  After that, the user is offered to play a blitz quiz and with the correct answers to all the questions it was possible to immediately receive prizes at Igromir. </li><li>  After 3 days of competition, the bot closes the reception of works, and sends the thanks and the name of the winner to all registered participants. </li><li>  After the winner is announced, the bot becomes a stub with a promotional message. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0bb/d7a/3bf/0bbd7a3bf6d3489e9b153154566ae061.png"></div><br><h2>  Start </h2><br>  A couple of days before the start of "Igromir" bot was launched.  The final check that everything is working and ... waiting for hour X. On the day of the launch, we had promoters at the stand who offered to take part in the quest.  In addition, the information was actively promoted in Kingston groups on social networks, on the <a href="https://telegram.me/RedHeadPub">@RedHeadPub</a> Telegram channel (and several other friendly channels).  As usual, mobile Internet worked very badly on Igromir, high network load often did not allow working in LTE and 3G, at least some traffic with a stable signal could only be driven by EDGE.  But Telegram is almost the only instant messenger that functions normally on 2G networks, so our geeks had everything in order (and some even managed to download the instant messenger from the AppStore or Google Play right at the event). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cf9/b09/133/cf9b091330734a64b76077aed7fa03b6.png"></div><br>  At the idea stage, we underestimated the number of participants in the quest, which is why the hosting capacity at our tariff was no longer sufficient for quickly processing the queue of participants - people began to actively send not only links, but also the photos and screenshots themselves, which created a short-term congestion.  Came up to 16 similar messages with images per second.  During the exhibition, the developers were on duty at the Heroku system monitor, so the problem was quickly resolved by increasing the hosting performance for RabbitMQ. <br><br>  The second problem was the interface of Telegram itself.  At the very beginning we asked the user ‚ÄúReady?  Steady? ‚Äù, And he needed to press the‚Äú Go! ‚ÄùButton, since  our bot was push-button.  It seemed to us that this is an obvious and only use case, until users began to type the word ‚ÄúGo‚Äù manually in the input field, and in different variations.  Of course, the algorithm did not understand what they write to it here.  Unfortunately, it is impossible to block the input field in Telegram, since  it is still the first messenger.  To rewrite and restart the bot was problematic, because  people used it and restart would break many quest. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/files/526/cda/533/526cda53342f463d80b875b0e1fbd66d.jpg"></div><br>  Therefore, our crutch was the most tangible: the promo-girls came back to the rescue, which the users turned to for help.  But for the future we will remember that we need to think through what the user can write in the text field and, therefore, it is necessary to do the processing of the data.  And also the fact that so far robots cannot exist without humans, only in close symbiosis. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/65b/08b/957/65b08b9575e04cbe8508b0b172c11f7a.png"></div><br>  During the work on the competition, we found out several obvious things: <br><br>  1. The user will always find a way to hang a fault-tolerant system.  In our case, the graphic files clogged the queue that was created for short text messages.  Therefore, you should always leave a substantial margin of performance on the hosting with the possibility of quick configuration.  Never do it all right. <br><br>  2. It is necessary to do a test bot, not only by people who invented and developed the mechanics, but also strangers with the quest, to check for scenarios of behavior that are not obvious to us. <br><br>  Now the <a href="https://telegram.me/HyperX_bot">@HyperX_bot</a> bot continues its work with a stub message, however, we have already disabled the base and the queue until the next time.  During the exhibition, we received 5658 messages from 846 users.  What is interesting, although ‚ÄúIgromir‚Äù is considered an event for a young audience, the average age of our participants was 24-26 years, which confirms our hypothesis about the audience. <br><br>  In parallel, we launched a channel in Telegram - <a href="https://telegram.me/RedHeadPub">@RedHeadPub</a> , in which we had a live broadcast of everything that was happening on the stand at the exhibition.  And our subscribers could always find out if they are currently pouring memory dies on liquid nitrogen or Zeus is signing autographs.  Initially, all activities in Telegram had a design basis, and were planned only for the period of the exhibition (and a couple of weeks around).  But during the work on ‚ÄúIgromir‚Äù more than 1,500 people subscribed to our channel, so we decided not to drop it, but to convert it into a certain GeekTimes branch of the Kingston Technology blog.  To begin with, we expanded the channel's theme from games in particular to technologies in general and renamed it Red Head Pub (do you know the <a href="https://telegram.me/HyperX_Russia/101">story</a> , why is there a red head Rex on the logo?).  Now there are announcements of new products and promotions, promo codes for discounts, as well as various technological news, prize drawings and much more.  Come and see for yourself: <a href="https://telegram.me/HyperX_Russia">@HyperX_Russia</a> (pst-pst, we even released our sticker!). <br><br><h2>  Competition </h2><br>  And now the most important thing!  We liked working with the bot in Telegram, so we plan to continue using it, but now we decided to seek advice from the community.  So, we need your ideas that can be implemented in a bot.  For example, to organize in it a support service or use it for drawing in the channel.  But it could be some kind of quest or another game, answers to frequently asked questions or something completely different, but interesting. <br><br><img src="https://habrastorage.org/files/5f6/920/84a/5f692084a7d54f85b9f59f048fe429f0.jpg"><br><br>  Think and write in the comments to this material all your ideas, and be sure to subscribe to our blog on Geektimes.  <i>January 16</i> (yes, you can think all New Year holidays) among those who subscribe to our blog, we will select the most interesting ideas and put them to vote in our channel in Telegram.  And <i>on January 20, we will</i> summarize the results, and the one whose work will gain the most votes will be awarded with a HyperX Savage SSD drive of 240 GB.  This is the fastest solid-state SATA-drive with 4-core and 8-channel Phison S10 controller, which provides reading speeds up to 560 MB / s.  It can be installed in most laptops, PCs and even home theaters. <br><br>  And don't forget to subscribe to our <a href="https://t.me/RedHeadPub">@RedHeadPub in Telegram</a> . <br><hr><br><br>  After a long discussion, a short list of finalists was compiled: <br><br>  1) The bot directory that owns all the information on Kingston / HyperX products, and will share it with you upon request.  Will acquaint with the product of interest, its characteristics, and share links to reviews.  (author of the <a href="https://geektimes.ru/users/streetflush/" class="user_link">streetflush</a> idea) <br><br>  2) The bot quiz asks questions, and users answer them.  Depending on the speed and correctness of the answers, players get points.  Who has more points - he won, and received a prize.  (author of <a href="https://geektimes.ru/users/avx/" class="user_link">AVX</a> idea) <br><br>  3) Bot-engineer.  If you doubt the choice of components to your PC, the bot will offer you the best options for assemblies.  (author of idea <a href="https://geektimes.ru/users/argentum36/" class="user_link">argentum36</a> ) <br><br>  4) Bot-gamer gives tips to help you succeed in popular games.  (author of the <a href="https://geektimes.ru/users/stigggg/" class="user_link">stigGGG</a> idea) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9a9/85d/c98/9a985dc98c4f42568aff4f1b273d298c.png"></div><br><br>  On the RedHeadPub channel in Telegram a vote was organized and ... <br><br>  The bot engineer who was offered by comrade <a href="https://geektimes.ru/users/argentum36/" class="user_link">argentum36</a> won a confident victory.  He gets SSD HyperX Savage 240 GB, congratulations!  And we already went to plan the implementation of our engineer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/233/9df/9b4/2339df9b421a4b3cbffaf2d68c872290"></div></div><p>Source: <a href="https://habr.com/ru/post/400379/">https://habr.com/ru/post/400379/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../400365/index.html">What promise VKontakte users in 2017</a></li>
<li><a href="../400367/index.html">What to do on the weekend: remote control intercom, budgetary remapping Nextion, disassembly with Onlaym</a></li>
<li><a href="../400369/index.html">Rostelecom buys Microsoft software for 1.26 billion rubles</a></li>
<li><a href="../400371/index.html">2017 is not just a prime number ...</a></li>
<li><a href="../400377/index.html">Review of current 3D materials</a></li>
<li><a href="../400381/index.html">Designing a switching power supply with active CMC. Episode I</a></li>
<li><a href="../400383/index.html">Resampling. Digital brick wall against conspiracy theories. Christmas tale for lovers of pure sound</a></li>
<li><a href="../400385/index.html">Overview of the active stylus Adonit Dash 2</a></li>
<li><a href="../400389/index.html">ITER in 2016</a></li>
<li><a href="../400391/index.html">10 best gifts for a Sony fan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
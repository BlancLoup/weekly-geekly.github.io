<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GPIO settings in Coremodule 920</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It was required to be able to access GPIO on the Coremodule 920 from under Windows 7 x86. An application that needs access is written by me in Java. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GPIO settings in Coremodule 920</h1><div class="post__text post__text-html js-mediator-article">  It was required to be able to access GPIO on the Coremodule 920 from under Windows 7 x86.  An application that needs access is written by me in Java. <br><br><h4>  Searching of decisions </h4><br><ul><li>  Try to figure it out by yourself. </li><li>  Contact technical support for help. </li></ul><br>  It was decided to follow the path of least resistance and ask technical support, which was done.  The answering machine wrote to me that everyone on vacation will be back in a week and a half.  It was decided to wait for this time.  I write again in about two weeks, <a href="http://askanexpert.adlinktech.com/aaefront/MyStuffQuestionDetail.aspx%3Fincident%3D0F0831-6A2388">I get an answer</a> . <br><br>  From the answer to my question it followed that they had a driver for C and only under Linux, which did not suit me. <br><a name="habracut"></a><br><h5>  Register Search </h5><br>  Open <a href="">User Reference Manual</a> .  We look, we see: <b>0500-053F PCH GPIO Configuration Ports</b> .  We decided on a range, we look for specific addresses, and in the description a non-working link to <b>PCH BD82QM67</b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We are looking for, we find: <a href="http://www.mouser.com/ds/2/612/6-chipset-c200-chipset-datasheet-257573.pdf">Intel¬Æ 6 Series Chipset and Intel¬Æ C200 Series Chipset Datasheet</a> .  Found even too much GPIO.  We take a closer look and see that the GPIO needed is <i>GP_LVL3 ‚Äî GPIO Level for Input or Output 3 Register</i> and <i>GP_LVL2 ‚Äî GPIO Level for Input or Output 2 Register</i> .  We look at the addresses: <i>GPIOBASE + 48h</i> and <i>GPIOBASE + 38h,</i> respectively.  <i>GPIOBASE - 0x500</i> .  This is out of the range <i>0x500-0x53F</i> , we will assume that there is another error in the <i>User Reference Manual</i> (after all, there was already an incorrect link). <br><br><h5>  Privileged Libraries </h5><br>  Addresses have been found, and you must still be able to contact them.  Privileged access required.  IOPort, Jioport were tried, something went wrong (they demanded that I be elevated (that is, privileged access)).  Maybe I did something wrong, but it did not work out.  Then I was advised to program UserPort.  The description of the program is about working on Windows NT / XP. <br><br><h6>  Attempt # 1 </h6><br>  We take UserPort.sys, we put in C: \ Windows \ System32 \ drivers.  Run UserPort.exe.  We see that there are entered address spaces.  Add 0x500 - 0x53F.  Click Stop-&gt; Update-&gt; Start, reboot the OS and ... blue screen. <br><br><img src="https://habrastorage.org/files/615/88e/36f/61588e36f7574c4cb682aca564f8938a.JPG"><br><br><h6>  Attempt # 2 </h6><br>  The only difference between runs is UserPort.  Boot in safe mode, remove UserPort.sys, reboot and ... the system started, everything is correct.  We are looking for the cause.  We return the driver to the place.  We remove the address spaces that were entered by default, reboot and ... the system started.  The reason is found: the same address spaces entered by default. <br><br><h5>  C ++ Library </h5><br>  A sample for working with code is attached to UserPort: <br><br><div class="spoiler">  <b class="spoiler_title">Sample</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">outport</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ __asm mov edx, portid; __asm mov eax, value; __asm out dx, ax; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">outportb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value)</span></span></span><span class="hljs-function"> </span></span>{ __asm mov edx, portid __asm mov al, value __asm out dx, al } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inportb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> value; __asm mov edx, portid __asm in al, dx __asm mov value, al <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inport</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> value = <span class="hljs-number"><span class="hljs-number">0</span></span>; __asm mov edx, portid __asm in ax, dx __asm mov value, eax <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; }</code> </pre> <br></div></div><br><h6>  Writing library code </h6><br>  Then the article <a href="http://habrahabr.ru/post/49660/">How to make friends with Java and C ++</a> helped me <a href="http://habrahabr.ru/post/49660/">.</a>  <a href="http://habrahabr.ru/post/49660/">Part one</a> and the program - libraries jnaerator-0.11-shaded, Bridj.  Auto-generated header: <br><br><div class="spoiler">  <b class="spoiler_title">dllmain.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// dllmain.cpp:      DLL. #include "stdafx.h" BOOL APIENTRY DllMain( HMODULE hModule, DWORD ul_reason_for_call, LPVOID lpReserved ) { switch (ul_reason_for_call) { case DLL_PROCESS_ATTACH: case DLL_THREAD_ATTACH: case DLL_THREAD_DETACH: case DLL_PROCESS_DETACH: break; } return TRUE; }</span></span></code> </pre><br></div></div><br>  File received via javah: <br><br><div class="spoiler">  <b class="spoiler_title">NativeGPIO.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> once #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;jni.h&gt; /* Header for class NativeGPIO */ #include "stdafx.h" /** * ¬ª, ¬§ ¬§   ¬§  (.dll) */ extern "C" { #define GPIO1 0x538 #define GPIO2 0x548 /**‚Äû gpio1 1     integer*/ extern __declspec(dllexport) unsigned int readGPIO1(); /**‚Äû gpio2 1     integer*/ extern __declspec(dllexport) unsigned int readGPIO2(); /**¬§     */ extern __declspec(dllexport) unsigned char inportb(unsigned int portid); /**¬§  int   */ extern __declspec(dllexport) unsigned int inport(unsigned int portid); /**¬§  int   */ extern __declspec(dllexport) void outport(unsigned int portid, unsigned int value); /**¬§     */ extern __declspec(dllexport) void outportb(unsigned int portid, unsigned char value); }</span></span></span></span></code> </pre><br></div></div><br>  File with the description of the functions: <br><br><div class="spoiler">  <b class="spoiler_title">NativeGPIO.cpp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// dllmain.cpp:      DLL. // NativeGPIO.cpp:      DLL. // #include "stdafx.h" #include "NativeGPIO.h" #include &lt;windows.h&gt; void outport(unsigned int portid, unsigned int value) { __asm mov edx, portid; __asm mov eax, value; __asm out dx, ax; } void outportb(unsigned int portid, unsigned char value) { __asm mov edx, portid __asm mov al, value __asm out dx, al } unsigned char inportb(unsigned int portid) { unsigned char value; __asm mov edx, portid __asm in al, dx __asm mov value, al return value; } unsigned int inport(unsigned int portid) { auto value = 0; __asm mov edx, portid __asm in ax, dx __asm mov value, eax return value; } unsigned readGPIO2() { jint value = inportb(GPIO2); return value; } unsigned readGPIO1() { jint value = inportb(GPIO1); return value; }</span></span></code> </pre><br></div></div><br>  Methods inport / outport forwarding just in case.  We compile into .dll, the library is ready. <br><br><h6>  We introduce in the program </h6><br>  We use JNAetrator and we get the following: <br><br><div class="spoiler">  <b class="spoiler_title">NativeGPIOLibrary</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.bridj.BridJ; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.bridj.CRuntime; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.bridj.ann.Library; <span class="hljs-comment"><span class="hljs-comment">/** * Created by Koksharov on 04.09.2015. * package = com.astra.app.neptun.applicationmanager * project = ApplicationManager */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Library</span></span>( <span class="hljs-string"><span class="hljs-string">"NativeGPIO"</span></span> ) <span class="hljs-meta"><span class="hljs-meta">@org</span></span>.bridj.ann.Runtime( CRuntime.class ) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NativeGPIOLibrary</span></span></span><span class="hljs-class"> </span></span>{ { BridJ.register(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GPIO2 = ( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ) <span class="hljs-number"><span class="hljs-number">1352</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GPIO1 = ( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ) <span class="hljs-number"><span class="hljs-number">1336</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Original signature : &lt;code&gt;int readGPIO1()&lt;/code&gt; * &lt;i&gt;native declaration : line 8&lt;/i&gt; *     GPIO 1,    0x538 * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> ,    1-4 */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readGPIO1</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Original signature : &lt;code&gt;int readGPIO2()&lt;/code&gt; * &lt;i&gt;native declaration : line 9&lt;/i&gt; *     GPIO 2,    0x548 * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> ,    5-8 */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readGPIO2</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Original signature : &lt;code&gt;char inportb(unsigned int)&lt;/code&gt; * &lt;i&gt;native declaration : line 10&lt;/i&gt; * ,      ( ,  *    ) * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> ,    (-) */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inportb</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid )</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Original signature : &lt;code&gt;int inport(unsigned int)&lt;/code&gt; * &lt;i&gt;native declaration : line 11&lt;/i&gt; * ,      ( ,  *    ) * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment">  ,    (-) */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inport</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid )</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Original signature : &lt;code&gt;void outport(unsigned int, unsigned int)&lt;/code&gt; * &lt;i&gt;native declaration : line 12&lt;/i&gt; * ,      ( ,  *    ,        * ) */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">outport</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value )</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Original signature : &lt;code&gt;void outportb(unsigned int, unsigned char)&lt;/code&gt; * &lt;i&gt;native declaration : line 13&lt;/i&gt; * ,      ( ,  *    ,        * ) */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">outportb</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> portid, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value )</span></span></span></span>; }</code> </pre><br></div></div><br>  Now let's write the reading in an infinite loop: <br><br><div class="spoiler">  <b class="spoiler_title">Usage example</b> <div class="spoiler_text"><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (;;){ System.out.println(NativeGPIOLibrary.readGPIO1()); System.out.println(NativeGPIOLibrary.readGPIO2()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GPIOValue1 = (NativeGPIOLibrary.inport(NativeGPIOLibrary.GPIO1)); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GPIOValue2 = (NativeGPIOLibrary.inport(NativeGPIOLibrary.GPIO2)); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GPIOValue_34 = (NativeGPIOLibrary.inport(NativeGPIOLibrary.GPIO_34)); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GPIOValue_44 = (NativeGPIOLibrary.inport(NativeGPIOLibrary.GPIO_44)); System.out.println(GPIOValue1 + <span class="hljs-string"><span class="hljs-string">" "</span></span> + GPIOValue2 + <span class="hljs-string"><span class="hljs-string">" "</span></span> + GPIOValue_34 + <span class="hljs-string"><span class="hljs-string">" "</span></span> + GPIOValue_44); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gp1 = GPIOValue1;<span class="hljs-comment"><span class="hljs-comment">// &amp; 0b1111110; int gp2 = GPIOValue2;// &amp; 0b1111111; if ( (gp1 &amp; 0b00001000) == 0 ){ System.out.println("button 1 1 pressed"); } if ( (gp1 &amp; 0b00010000) == 0 ){ System.out.println("button 1 2 pressed"); } if ( (gp1 &amp; 0b00100000) == 0 ){ System.out.println("button 1 3 pressed"); } if ( (gp2 &amp; 0b00100000) == 0 ){ System.out.println("button 2 1 pressed"); } if ( (gp2 &amp; 0b00010000) == 0 ){ System.out.println("button 2 2 pressed"); } if ( (gp2 &amp; 0b01000000) == 0 ){ System.out.println("button 2 3 pressed"); } if ( (gp2 &amp; 0b10000000) != 0 ){ System.out.println("button OFF pressed"); } try { Thread.sleep(100); } catch (InterruptedException e) { e.printStackTrace(); } }</span></span></code> </pre><br></div></div><br>  We start, we look: lack of privileges.  Then I had to think about what was wrong, and then remember about 0x500-0x53F and 0x500 + 0x48.  Expanded allowable space, earned. <br><br><h4>  Conclusion </h4><br>  In fact, almost at each stage much more time was spent than described in this article, so I hope the article will be useful to someone else. </div><p>Source: <a href="https://habr.com/ru/post/268523/">https://habr.com/ru/post/268523/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268507/index.html">Phase portraits "on the fingers" or what can be found out about diffraction solutions without solving it</a></li>
<li><a href="../268509/index.html">Differentiation of access rights to Jenkins</a></li>
<li><a href="../268513/index.html">Ant optimization and network algorithms</a></li>
<li><a href="../268515/index.html">Installing unsigned programs on iOS 9 devices without jailbreak</a></li>
<li><a href="../268519/index.html">DevTips: Web Developer Tips (1-16)</a></li>
<li><a href="../268527/index.html">Adaptive email-letters and media queries: Problems and solutions</a></li>
<li><a href="../268531/index.html">Writing a graphical Python program with tkinter</a></li>
<li><a href="../268533/index.html">Cloud for development companies: 1C in the cloud, complete guide</a></li>
<li><a href="../268535/index.html">External Sort with O (1) Extra Memory</a></li>
<li><a href="../268537/index.html">A laser pointer is enough to confuse the so-called ‚Äúsmart car‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
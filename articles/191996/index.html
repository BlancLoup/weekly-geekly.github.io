<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We draw electronic money</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I will talk about the idea, which probably at least once occurred to anyone who first encountered electronic means of payment. Namely, it would ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We draw electronic money</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/c78/ff5/6e9/c78ff56e9222f16810f52da307dde42e.jpg" alt="image" align="left">  Today I will talk about the idea, which probably at least once occurred to anyone who first encountered electronic means of payment.  Namely, it would be great if electronic money could be treated like regular files: create, move, send by email.  mail, upload to FTP. <br><br>  In most cases, it is enough for this to be the standard means of any OS. <br><br>  <b>Warning</b>  <i>The described methods of circulation of cash and cash equivalents are conceptual in nature.</i> <i><br></i>  <i>Using only the means described may endanger your property and property rights.</i> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Introductory </h5><br>  The idea of ‚Äã‚Äãusing files for cash settlements was born immediately after becoming acquainted with the Webmoney system, or rather, one of its services - paymer.com <br>  By the way, the draft of this note appeared more than 6 years ago and is 100% sure that even then a lot of people thought about this. <br><br>  Let me remind you that with the help of the paymer.com service, it is possible to issue settlement orders secured by the issuer's assets of the order, whether or not the agent of the system has it.  There are currently two agents: <br>  * E-currency - takes into account liabilities in WM currency.  The assets are at the disposal of the agent; <br>  * Obligation - takes into account obligations in free form.  Agent does not manage collateral for orders. <br><br>  Any user of the Webmoney system can issue orders secured by WM. <br>  It makes no sense to dwell on the requirements and the issue procedure, they are simple and described on the website of the service. <br>  At the exit, we get a list of details of the issued orders, secured, for example, WMR, namely the number and code of each order.  Any user who knows the order number and code can receive money from it on his WMR wallet.  In particular, it was through paymer that the WMR and WMZ recharge card codes were implemented. <br><br>  At that moment it seemed like some kind of magic - these numbers cost money, i.e.  This is real digital money. <br>  Here they are on your disk and you can do with them what you want without the use of special programs, digital signatures, etc. <br>  It‚Äôs one thing when you buy a recharge card in a stall and send the code to your counterparty, and it‚Äôs quite another when you create digital money from your balance.  At that time there was no Bitcoin mining yet. <br><br>  Now, instead of paymer, we can use any payment guarantee or escrow service that provides <br>  access to financial assets through a unique code. <br>  For example, earlier QIWI had ‚Äútransfers to email‚Äù, later renamed QIWI. Eggs. <br>  The private key to a bitcoin wallet with money is also a good example. <br><br>  Hereinafter, the unique code by which you can access the financial asset will be called the <b>payment code</b> , and the organization-service through which this code is activated is the <b>operator</b> . <br><br><h5>  Implementation </h5><br>  So, surely many people had the idea to put these digital codes in a file, getting a kind of ‚Äúfile‚Äù coin.  The resulting coin can be moved between folders, sent to friends and counterparties, removed to the trash (ie, ‚Äútear to shreds‚Äù). <br>  In order to improve the mechanism of the ‚Äúfile coin‚Äù, it was possible to register some special file extension and a special icon for a text file.  For example, choosing a free option <a href="http://www.visualpharm.ru/finance_icon_set/">on the site of one of Habr residents</a> (avatar to post from there). <br>  This can be done both manually and with a simple batch file. <br><br>  For different denominations, in order not to get confused, you can register different extensions, icons, etc. <br><br>  As a result, we get a scattering of file coins, which need to be stored somewhere.  Can be stored in a folder on the desktop. <br>  But it is better to use any file archive for this purpose (I recommend RAR), which will serve as a wallet. <br>  Again, we register in the system a separate extension for it and the corresponding image. <br><br>  Now, using the intuitive ‚Äúdrag / drop‚Äù method, we can replenish your wallet with fresh bills. <br>  And for reliability even put a password on it.  The wallet itself can be worn anywhere on a flash drive. <br><br><h5>  We improve the idea </h5><br>  The above idea with files lies on the surface and its originality is not worth even the kilowatt * hours spent on writing notes.  Therefore, we continue to improve. <br><br>  One of the principles of TRIZ: there is no mechanism, and its functions are performed. <br><br>  Above, we have a text file and an icon registered in the system, i.e.  two files. <br><br>  Why do we need text files to store payment codes when we already use <br>  Icons for these files?  We remove the intermediary by the method of steganography. <br>  And since I promised to use regular OS tools, we‚Äôll do it by regular gluing files together. <br>  In the console, it might look like this: <br><br> <code>copy /b filename.txt+filename.ico filename.ico</code> <br> <br>  You will still be able to see the payment code through a plain text editor, such as notepad, scrolling through the pages to the end of the file. <br>  The method is not very convenient, but in this case, our file will automatically, when selecting the appropriate icon, look like a file coin in the system.  And not only on our computer, but also on the computer of other users. <br>  No need for additional extensions, registrations, pre-predefined file icons, etc. <br><br>  In defense of such simplicity, I would say that if we plan a full-fledged cash flow, then users will rarely look into the account details. <br><br>  Obviously, this solution will be less convenient for the wallet.  A text editor does not look at the contents of the archive. <br>  Yes, we can, by signature, calculate the beginning of the archive, cut it out and, inserting it into a new file, open it. <br>  But for the RAR archives (it‚Äôs not for nothing that I recommended it) there is a more elegant way: when gluing it with the * .jpeg picture as described above, we can open the specified picture directly with the archiver.  This was even an article on Habr√©. <br><br>  In this way it is even more convenient to exchange coins, since  working with the archiver and text files in it is more convenient than digging through the icon file in search of a payment code. <br>  In the sense of sending a picture to a friend, you will not transfer a wallet, but a file envelope with money. <br>  The envelope can also be password-sealed. <br>  In general, full offline analogies. <br><br>  At this, the use of regular OS means ends.  All further improvements require the development of additional utilities.  But even in this form, file coins can be used for unidirectional transmission, for example, on forums. <br>  <a href="https://habr.com/ru/post/191996/">More details below</a> . <br><br><h5>  Add steganography </h5><br>  Strictly speaking, pasting a text file with an icon file is already steganography, but we can go deeper - stitch payment details directly into * .ICO file using the LSB method. <br>  It is unlikely that you will get by with the standard OS tools, but then we will no longer need the wallet file with a password. <br><br>  To work with large wallets (envelopes), due to the size of the file and (or) the need for stealth, you can use jpeg instead of * .ICO files (for both normal gluing and LSB).  Moreover, most services for downloading often allow jpeg, and not ICO. <br><br>  When jpeg images are glued together with a wallet, it continues to be opened by graphic editors and viewers. <br>  When thumbnails are displayed in the system, this option does not play at all with the icon version. <br><br><h5>  Practical use </h5><br>  The note would be incomplete if I did not mention practical examples of using the whole described above and possible ways of developing the idea. <br><anchor>  First of all </anchor>  , such file coins could well replace ‚Äúlikes‚Äù, ‚Äúthanks‚Äù in many forums.  They are displayed by regular means of the browser and do not require individual fat clients, passwords to personal accounts and other EDS.  The integration into the engine is the simplest: the user clicks "thank you", he is offered to download the file-coin.  The block with pictures of coins is displayed only to the author of the post. <br><br>  It is possible to integrate the settlement system even bypassing admins, using personal accounts with the possibility of transferring pictures and the system of forum reputation. <br><br>  File coins are convenient for using for encouragement of users of this or that resource. <br>  At the same time, recipients of such bonuses through personal message systems can easily share them with other users. <br><br>  Since such schemes involve a unilateral exchange of security issues are not acute. <br><br>  Also, a file note can be broken into two or more parts by creating files with the image of bill pieces (payment codes are divided between these two or more files and become relevant only when merged). <br>  Ripped pieces of the bill file can be issued in online games, promotional quests, and other gamification mechanics. <br><br><h5>  Where steganography is, there is cryptography </h5><br>  [img src = "Picture with DiCaprio" alt = "tribute to fashion" title = "Deeper" /] <br><br>  If we want only the recipient to receive our file coin and no one ‚Äúfalsified the coin‚Äù on the way, then we should not forget about asymmetric encryption. <br>  With it, we can make nominal coins, in the sense that only a predetermined recipient can use them.  To do this, as you might guess, it is necessary to encrypt the payment code with the recipient's public key.  The payment document number can be left open so that third parties can verify the nominal value of the means of payment if the operator does not provide such a number. <br><br>  If desired, by encrypting the details with our private key, we can even issue our own currency, secured by rubles, for example, acting as a guarantor over it.  With this implementation, each participant can make sure: <br>  1) that the coin is indeed issued by the guarantor; <br>  2) by the number, find out the denomination of the coin; <br>  3) if necessary, ‚Äúcash‚Äù the coin at the guarantor; <br>  This scheme is quite suitable for small online communities (forums, users of group IRC chats, groups in social networks) as a means of internal payments when conducting auctions or direct sales transactions between participants. <br>  In this case, the protection from the banal copying of a file is the trust and fear of permanent exclusion from the group. <br>  The guarantor can act as an admin resource. <br><br>  If you don‚Äôt have to rely on trust, but exclusion from the group is still a significant factor for each participant, then you can complicate the scheme by adding a mandatory coin signature by the payer with your key (EDS) during the transfer.  Those.  each coin will form a continuous list of signatures, each of which is based on the signature of the previous owner and the future.  Yes, yes, again remember about Bitcoin.  Such a scheme will ensure the integrity of the list of changes.  And, upon presentation of the copied coin to the guarantor, it will immediately reveal on which participant it happened.  And so that the list does not grow, at the system level, you can enter a limit on its size, upon reaching which, the coin must be presented to the guarantor, who either replaces it or pays for it. <br><br>  I have resulted only a part of the schemes of using bilateral transactions based on the cryptography of two pairs of keys (on the side of the sender and the receiver).  The use of cryptographic algorithms with several public keys, and in particular a secret sharing scheme, can become an inexhaustible source of ideas for practical use. <br><br>  In short, the secret key is divided into several parts (shares) and transferred to several system participants. <br>  Each participant by itself cannot recover the secret key, but by joining together with other participants according to certain rules this can be done. <br><br>  In Bruce Schneier‚Äôs book, Applied Cryptography.  2nd ed.  Protocols, algorithms and source texts in the C language. The abundance of possible options for sharing a secret will power the fountain of your ideas for a very long time. <br>  Evaluate the titles of the relevant section of the book: <br>  - Sharing a secret <br><ul><li>  Sharing with scammers </li><li>  Sharing without Trent * </li><li>  Sharing without disclosing shares </li><li>  Confirmed secret sharing </li><li>  Secret sharing schemes with protection measures <br>  (voting "yes" / "no" for disclosing a secret) </li></ul><br><br>  * Trent is a member sharing a secret. <br><br>  These schemes can improve the organizational structure of the turnover of payment codes. <br>  In particular, to introduce an element of the collective management of the monetary system by creating a board of governors, audit commissions, etc. <br><br>  For example, the scheme ‚ÄúSharing without Trent‚Äù will allow to create an inter-gallatory council on the introduction of the e-currency of the Universal Jedi Vasi Pupkin, which, in addition to Pupkin himself, will include all of his friends in the forum.  And who will not allow their friend to engage in the unrestricted issue of payment documents because the forum‚Äôs rulebook will be prohibited (and technically impossible) to accept payment codes not signed with the secret key of the said Board. <br><br><h5>  But how can you draw your electronic money? </h5><br>  So, what we have achieved: <br><ul><li>  learned how to "digitize" real money </li><li>  pack them into files nice and clear </li><li>  it‚Äôs convenient to share them </li><li>  and even collectively manage exchanges and emissions. </li></ul><br>  But there was only one drawback - linking to the already existing payment and settlement systems and services. <br>  And although the same paymera, according to the developers, the legal scheme allows in case of anything to apply to the court for the recovery of money.  We will try to use more familiar legal constructions. <br>  The Federal Law on Electronic Signature and the <s>Federal Law on Copiracy</s> will help us in this fourth part of the Civil Code, where there is a conversation about copyright. <br><br>  The first opportunity to issue your money is to use a <b>loan agreement</b> . <br>  The general scheme is this: digital money is essentially the issuer's debt (your debt) to other people who use this money. <br>  In order to use electronic money issued in such a way, it is not limited to friends and relatives, we need to be known and reputable.  By the way, some celebrities, people will give money even faster than they will buy bonds of a company with an AAA rating. <br><br>  Without going deep into the legal nuances, for the first method we need: <br><ul><li>  electronic signature, </li><li>  template receipts in the receipt of money with the right conditions <br>  (return after 49 years, interest-free, permission to transfer the debt, the prohibition of early withdrawal, the resolution of early repayment) </li><li>  claim requirement assignment agreement template </li><li>  A site that explains in a light and unobtrusive form the entire cash flow. </li></ul><br>  Immediately remove the concerns of some people who are afraid of debt and lenders.  A contract for 49 years, you can only conclude it after 18 years, which means that if you live in the Russian Federation, you will not statistically find the moment of execution of the contract. <br><br>  We post a receipt form on the website, information about the hashing algorithm in order to use an electronic signature (EP) and the public key EP.  The potential holder of your future ‚Äúden.  Signs ‚Äùsends you your data, you enter them into the receipt, count the hash, sign it and insert the result using the steganographic method in the file icon. <br>  Thus, the recipient can always submit to the court a receipt signed by the borrower. <br><br>  If the holder of such an icon-file needs to be transferred to someone, he inserts the recipient's data into the agreement on the assignment of a monetary claim, ‚Äúhashes‚Äù, signs, adds a signature to the icon-file and transmits.  The recipient will then be able to submit this file to the original borrower, who in turn will be able to trace and verify the entire chain. <br><br>  Plus your money will be in interest-free transfers and their speed. <br>  You can maintain the infrastructure of the project for interest on deposits in which you place money <s>received on loans</s> from the "issue of your own currency." <br>  To configure this method include: <br><ul><li>  term of the obligation (maturity of money), </li><li>  possibility of changing the debtor (for insurance against his death, etc.) </li><li>  use of collectives as issuers (on the basis of a loan guarantee and secret sharing schemes in EDS) </li></ul><br>  The advantage of such a scheme is that you are not tied to real money: neither the issuer, nor the recipient may have it.  And you can pay for such work with such money. <br><br>  If you do not have fame, then build your payment system on loans can be modeled <a href="https://classic.ripplepay.com/">ripple</a> .  The essence is this: loans are issued only between friends, but not above a certain limit.  If you need to send or receive money from anyone who is not in your circles, a chain is built up between friends of friends, etc.  The efficiency of this option rests entirely on the theory of the ‚Äúsix handshakes‚Äù, and the minimum load for each person is limited by the ‚ÄúNumber of Donbar‚Äù. <br><br>  The second method is related to <b>copyright</b> . <br>  To do this, you need to draw your original icon for the coin file.  As an issue, you will simply sell it as a painting. <br>  It is important to supply each picture with a unique number, signed by your EDS.  And since if you embed this information in the file, it will change slightly (the lower bits will be different, you need to keep track of the collisions), legally you will sell a slightly different picture every time. <br>  And in order to give "weight" to your money, on the site you can post a public offer that, for example, every last day of the month you are ready to buy out your paintings at the selling price.  Those.  give some convertibility to your new currency.  By the way, one of our <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25B2%25D1%2580%25D0%25BE%25D0%25B4%25D0%25B8">compatriots</a> acted in a similar way in 1994, declaring his signature to be a work of art. <br>  It is possible to fight with ‚Äúcounterfeiters‚Äù using your copyright.  For when selling a painting, the exclusive rights to it are not automatically transferred to the new owner. <br>  For the implementation of the circulation of such a currency, there is no need to make repeated purchase and sale agreements.  Legal clarity in the "payment" picture is not required.  And in order for the issuer to be sure of the person applying for the purchase of a picture, it‚Äôs enough at the end of the file to keep a coherent list of EDS owners, as it happens in Bitcoin. <br><br>  The disadvantage of this method is the need to pay personal income tax from the sale of "paintings".  But if the term of circulation of each particular ‚Äúpicture‚Äù is limited to at least two years, then the interest from the use of NDFL money can be recaptured. <br><br>  The first and second methods can certainly be combined. <br><br><h5>  Conclusion </h5><br>  Grateful to everyone who read to the end. <br>  It would be possible to divide the note into two parts, but I wanted to provide the entire volume before the note drowned in the sandbox. <br>  In case the topic evokes interest, I am ready to paint each part in separate posts in more detail, providing them with appropriate pictures for ease of reading. </div><p>Source: <a href="https://habr.com/ru/post/191996/">https://habr.com/ru/post/191996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../191984/index.html">DebiGger for Yii 1.1 ported from Yii 2</a></li>
<li><a href="../191986/index.html">Unit tests in practice</a></li>
<li><a href="../191988/index.html">How not to overpay for Arduino and modules for it</a></li>
<li><a href="../191990/index.html">OpenWRT, or What else can you do with your router?</a></li>
<li><a href="../191994/index.html">Basics of Irrlicht Engine for newbies</a></li>
<li><a href="../191998/index.html">Zaovnil, stuck, gash: dictionary IT-Schnick</a></li>
<li><a href="../192000/index.html">Bootstrap, or application statistics with almost no formulas</a></li>
<li><a href="../192002/index.html">Development of a new professional standard in the field of information technology</a></li>
<li><a href="../192004/index.html">Watching the vote on "Russia 10"</a></li>
<li><a href="../192006/index.html">Bitcoin Foundation representatives met with US government agencies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
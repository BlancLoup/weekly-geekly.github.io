<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Connecting an Allure-reporter to an arbitrary python test framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Automation needs human-readable test reports - what has been tested, what test steps, what result. To do this, there is a system for generating report...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Connecting an Allure-reporter to an arbitrary python test framework</h1><div class="post__text post__text-html js-mediator-article"><p>  Automation needs human-readable test reports - what has been tested, what test steps, what result.  To do this, there is a system for generating reports <a href="https://github.com/allure-framework/allure2">Allure</a> . </p><br><p>  Allure is supported by most well-known test frameworks, and for unknowns it requires writing a so-called adapter. </p><br><p>  How to connect Allure in any arbitrary or no framework at all? </p><a name="habracut"></a><br><p>  Using Allure consists of two independent steps: </p><br><ol><li><p>  Generation of json-s containing all actions of the test, the so-called <em>allure-results</em> . </p><br></li><li><p>  Generate a report on the collected results (requires java8 and install the allure utility: <a href="https://bintray.com/qameta/generic/allure2">https://bintray.com/qameta/generic/allure2</a> ).  This item is the same for all types of frameworks due to the fact that <em>allure-results</em> is a fairly universal description of tests: </p><br><pre><code class="dos hljs">allure generate /some_path_to/allure-results</code> </pre> <br><p>  Writing a full-fledged adapter for allure and integrating it into an arbitrary framework is somewhat laborious, so we will use the minimum possible set of actions in order to only illustrate the idea.  The code below is a python adaptation of the ideas outlined in the report about the allure-lifecycle in Java, the <a href="https://vk.com/video-118559306_456239033">original</a> . </p><br></li></ol><br><p>  Install only the core of the allure-reporter: </p><br><pre> <code class="bash hljs">pip install allure-python-commons</code> </pre> <br><p>  Let's write a simple test that generates allure-results: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- import allure_commons from allure_commons.utils import now, uuid4 from allure_commons.reporter import AllureReporter from allure_commons.logger import AllureFileLogger from allure_commons.model2 import Status from allure_commons.model2 import TestResult from allure_commons.model2 import TestStepResult def check_some_thing(some): print ("Some is %s" % some) return some if __name__ == '__main__': print ("Start main") # Init allure allurelogdir = "reportsx" logger = AllureReporter() file_logger = AllureFileLogger(allurelogdir) allure_commons.plugin_manager.register(file_logger) # Start testcase case_uuid = uuid4() testcase = TestResult(uuid=case_uuid, fullName='Hello, Habr') logger.schedule_test(case_uuid, testcase) # TestStep allure_step = TestStepResult(name=', habrateststepname (   )', start=now()) current_step_uuid = uuid4() logger.start_step(None, current_step_uuid, allure_step) check_some_thing('something') # origial procedure for testing logger.stop_step(current_step_uuid, stop=now(), status=Status.PASSED) testcase.status = Status.PASSED logger.close_test(case_uuid)</span></span></code> </pre><br><p>  After launch, this code will generate the results in the "reports" folder </p><br><p>  As you can see, the code for working with test steps (start_step and stop_step) perfectly fits the decorator pattern and should be implemented by it. </p><br><p>  Arrange these code blocks on your test framework and collect fake tests with manual testing results, generate allure generate and you will receive a ready-made solution for unifying department reports. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/350480/">https://habr.com/ru/post/350480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350470/index.html">Hacking Nuclear Crackme</a></li>
<li><a href="../350472/index.html">On the black market they sell valid signature certificates of executable code to bypass antiviruses</a></li>
<li><a href="../350474/index.html">SOC is people. How to build a team in terms of personnel hunger</a></li>
<li><a href="../350476/index.html">One-to-many translation: do you need a media server?</a></li>
<li><a href="../350478/index.html">Emotion AI and Emotional Technologies: Neurodata Lab and NRU ITMO Conference</a></li>
<li><a href="../350482/index.html">MyDataSpace - data publishing service</a></li>
<li><a href="../350484/index.html">Kontur Mobile Test Session: 446 bugs in 5 hours</a></li>
<li><a href="../350486/index.html">How JS Works: Web Push Notifications</a></li>
<li><a href="../350488/index.html">Announcement of Apache Ignite meetings in Moscow and St. Petersburg in March</a></li>
<li><a href="../350490/index.html">Go 1.10 Release Party @ Badoo: as it were. Video, photo, reviews</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
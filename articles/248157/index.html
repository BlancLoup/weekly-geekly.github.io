<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programming languages. Compositional view</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! Today I would like to raise the question of the use of compositions and their role in programming. Those who are faced with functional la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programming languages. Compositional view</h1><div class="post__text post__text-html js-mediator-article">  Hello, Habr!  Today I would like to raise the question of the use of compositions and their role in programming.  Those who are faced with functional languages, most likely heard of them, and those who have not encountered, perhaps, learn something new.  I hope for an interesting discussion at the end of the article on their application.  Escher to attract attention. <br><br><img width="640" src="https://habrastorage.org/files/911/f92/fbb/911f92fbb16e4d92ba67002bf28c1ac1.jpg"><br><a name="habracut"></a><br>  Let's start with the concept of the program.  From a mathematical point of view, a program is a function.  Sometimes this may not seem obvious.  If the program is a function, then you should decide what its arguments are and what it returns.  In the case of simple utilities like <i>bc,</i> everything is clear: the argument is an expression from <i>stdin</i> , and the result is the result in <i>stdout</i> .  In more complex cases, it is also possible to come to the conclusion that the program is a function.  Let us consider an example, a DBMS, in this case the program is also a function, with an argument it takes the memory allocated to it in the <i>user space</i> , and returns it, while continuously executing.  Maybe a rather non-optimal example, but it is understandable. <br><br>  If the program is a function, then you should consider what means of obtaining this function may be.  It all depends on programming languages, they are such tools.  And regardless of whether it is a functional language, procedural, imperative, declarative, etc., they are all characterized by the use of compositions, explicit or implicit.  It's time to define the concept of composition.  Let two functions be given <img src="https://habrastorage.org/getpro/habr/post_images/0ca/284/f28/0ca284f284dc0e909bf3061ff5255a19.png">  and <img src="https://habrastorage.org/getpro/habr/post_images/36e/eed/f7b/36eeedf7bfc4011473c607e2aa57de6d.png">  , one can construct a function from them <img src="https://habrastorage.org/getpro/habr/post_images/c7a/f3e/fe9/c7af3efe9053acd355bae877cdee6ab8.png">  applying a function to them <img src="https://habrastorage.org/getpro/habr/post_images/3e2/06d/978/3e206d9787f9adffcf24532be73bcc19.png">  : <img src="https://habrastorage.org/getpro/habr/post_images/c7a/f3e/fe9/c7af3efe9053acd355bae877cdee6ab8.png = F(f_1,f_2)">  .  Such a function F, which takes other functions as an argument, will be called a <i>composition</i> .  And ways to build <img src="https://habrastorage.org/getpro/habr/post_images/c7a/f3e/fe9/c7af3efe9053acd355bae877cdee6ab8.png">  there may be many, each way - composition.  Consider a couple of examples of compositions: the composition of branching and the composition of superposition. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Composition branching</i> .  Let two functions be given <img src="https://habrastorage.org/getpro/habr/post_images/0ca/284/f28/0ca284f284dc0e909bf3061ff5255a19.png">  and <img src="https://habrastorage.org/getpro/habr/post_images/36e/eed/f7b/36eeedf7bfc4011473c607e2aa57de6d.png">  as well as one predicate <img src="https://habrastorage.org/getpro/habr/post_images/c8b/220/0b3/c8b2200b373dd2f6fcbab9f1c79ef2aa.png">  (the same function, but returning not the element of the set on which it is defined, but the values ‚Äã‚Äã"true" or "false").  There is such a function <img src="https://habrastorage.org/getpro/habr/post_images/c04/661/121/c04661121da236d614d4b2c4ca0a13d1.png">  which <img src="https://habrastorage.org/getpro/habr/post_images/c38/707/d73/c38707d73ddbf890a11b5c264e2c4750.gif">  .  In this case, it is said that the function <img src="https://habrastorage.org/getpro/habr/post_images/c04/661/121/c04661121da236d614d4b2c4ca0a13d1.png">  is obtained by the branch operation, we denote this operation as <img src="https://habrastorage.org/getpro/habr/post_images/69d/46f/49d/69d46f49d8604cf5918c91c084be3473.png">  then <img src="https://habrastorage.org/getpro/habr/post_images/c04/661/121/c04661121da236d614d4b2c4ca0a13d1.png = If(p, f_1, f_2)">  .  By applying the composition to the functions, you can get a new function, which is then used. <br><br>  <i>Composition of superposition</i> .  Let it be given <img src="https://habrastorage.org/getpro/habr/post_images/b75/018/bdf/b75018bdf6686c7b196dc0b5a2951856.png">  function <img src="https://habrastorage.org/getpro/habr/post_images/00d/d5f/f65/00dd5ff65d7edff1520e2955f2455cec.png">  where <img src="https://habrastorage.org/getpro/habr/post_images/f20/678/c96/f20678c9638f25972870a772a6cad335.png">  - <img src="https://habrastorage.org/getpro/habr/post_images/3e0/0c6/192/3e00c61929b9d2e5eb29c4379a0f69ce.png">  -ary function and there is such a function <img src="https://habrastorage.org/getpro/habr/post_images/77c/b65/87e/77cb6587e2a0805b69003627abacaf8f.png">  which is defined as <img src="https://habrastorage.org/getpro/habr/post_images/77c/b65/87e/77cb6587e2a0805b69003627abacaf8f.png = f(f_1(X),f_2(X),...f_n(X))">  .  In this case <img src="https://habrastorage.org/getpro/habr/post_images/77c/b65/87e/77cb6587e2a0805b69003627abacaf8f.png">  will be considered as a result of a superposition operation. <img src="https://habrastorage.org/getpro/habr/post_images/c3a/7cb/869/c3a7cb869a7ccdb96d374dec79f69321.png">  : <img src="https://habrastorage.org/getpro/habr/post_images/77c/b65/87e/77cb6587e2a0805b69003627abacaf8f.png=S^{n+1}(f,f_1,...,f_n)">  . <br><br>  Consider the prototypes of these operations in programming languages.  Somewhere they are more pronounced, somewhere less.  In the C language, the branch operation is obviously hidden in the control structure <img src="https://habrastorage.org/getpro/habr/post_images/44a/119/7e8/44a1197e8adc4fc1715942cff04de61e.png">  : <pre><code class="hljs lisp">if(<span class="hljs-name"><span class="hljs-name">p</span></span>(<span class="hljs-name"><span class="hljs-name">X</span></span>)) f1(<span class="hljs-name"><span class="hljs-name">X</span></span>)<span class="hljs-comment"><span class="hljs-comment">; else f2(X);</span></span></code> </pre>  or ternary operator: <pre> <code class="hljs">p(X) ? f1(X) : f2(X);</code> </pre>  In the first case, the statement was considered, not expression, but this does not interfere with the presentation <img src="https://habrastorage.org/getpro/habr/post_images/a04/d59/179/a04d59179f39458aafb7594036b36b5d.png">  as, for example, the entire set of variables in scope.  In LISP, the prototype of this composition would look like this: <pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">p</span></span> X) (<span class="hljs-name"><span class="hljs-name">f1</span></span> X) (<span class="hljs-name"><span class="hljs-name">f2</span></span> X))</code> </pre>  And in Haskell, it looks like <pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">if</span></span> p <span class="hljs-type"><span class="hljs-type">X</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> f1 <span class="hljs-type"><span class="hljs-type">X</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> f2 <span class="hljs-type"><span class="hljs-type">X</span></span></code> </pre>  or <br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">gx</span></span> | px == <span class="hljs-type"><span class="hljs-type">True</span></span> = f1 x | px == <span class="hljs-type"><span class="hljs-type">False</span></span> = f2 x</code> </pre>  If we talk about the operation of superposition, it is even less noticeable in many programming languages, but nevertheless, it is omnipresent.  The superposition operation in the C language allows us to make the following substitution <pre> <code class="hljs lisp">f(<span class="hljs-name"><span class="hljs-name">f1</span></span>(<span class="hljs-name"><span class="hljs-name">X</span></span>), f2(<span class="hljs-name"><span class="hljs-name">X</span></span>), f3(<span class="hljs-name"><span class="hljs-name">X</span></span>))<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre>  On LISP, it would look like <pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">f</span></span> (<span class="hljs-name"><span class="hljs-name">f1</span></span> X) (<span class="hljs-name"><span class="hljs-name">f2</span></span> X) (<span class="hljs-name"><span class="hljs-name">f3</span></span> X))</code> </pre>  Haskell is like <pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">f</span></span> (f1 x) (f2 x) (f3 x)</code> </pre> <br>  Immediately it should be noted that the arity of all the proposed functions must be unified, otherwise the application of the composition mechanism to them may be significantly difficult, i.e.  X really is something like <img src="https://habrastorage.org/getpro/habr/post_images/a04/d59/179/a04d59179f39458aafb7594036b36b5d.png = {x_1,x_2,x_3...x_n}">  . <br>  Obviously, the compositions are deeply ‚Äúburied‚Äù in the syntax of programming languages, implicitly present in them.  However, nothing new, as the reader who is well-versed in this matter can truly notice.  Edsgar Dijkstra also noticed this in his book ‚ÄúThe Discipline of Programming‚Äù. <br><br><h1>  Use of compositions </h1><br>  In connection with the foregoing, many questions arise.  In particular, why are compositions not used explicitly?  After all, the use of compositions explicitly could bring many advantages.  Especially that it will be possible to consider the programming process itself, and therefore - to optimize the development of complex projects.  After all, as a programmer is programming now?  He does this as a painting artist.  In other words, design decisions are made on the basis of his experience, premonition, colleagues' advice, and some personal aesthetic convictions.  But this course of thinking can not be laid out just like that in a file with the program.  Those.  the program is there, but the train of thought that led to it is not.  This is the first question.  Why do languages ‚Äã‚Äãhave such syntax as they are, why did the creators of the language put such a set of control structures in place?  Why is their set dogmatized?  What to do if you need to add other control structures. <br><br>  These questions would help solve the means of applying and generating compositions.  Since the solution of any arbitrarily complex task by a person is reduced to analysis / decomposition, and then synthesis, this process can be organically supported by the composition mechanism.  After all, the compositions will be the very connecting element that will glue the parts into which the task is broken.  Well, a person will have to break the task anyway, this is his prerogative, not the syntactic formulation of the task.  Unfortunately, so far no language has been imprisoned under the concept of composition, it has not been noticed. <br><br>  For a better understanding, consider an example of finding the greatest common divisor (GCD) using compositions.  The calculator can find the remainder of the division ( <img src="https://habrastorage.org/getpro/habr/post_images/23f/e87/541/23fe875417d710bdddf770084b0e369f.png">  ), implement integer division ( <img src="https://habrastorage.org/getpro/habr/post_images/01b/d9d/50a/01bd9d50a530a5743d0c3f9768a4927f.png">  ), calculate the inequality predicate ( <img src="https://habrastorage.org/getpro/habr/post_images/6ec/fc7/f04/6ecfc7f04920a82d326e84f8810361ed.png">  ), generate a zero ( <img src="https://habrastorage.org/getpro/habr/post_images/50c/900/43a/50c90043a4c85c9b3c70474635fdee9f.png">  ).  All functions are defined on the set of natural numbers without zero.  Thus, we have the following functions in the proposed algebra <img src="https://habrastorage.org/getpro/habr/post_images/3bf/9e7/a85/3bf9e7a855475daadf102161895fc900.png">  = { <img src="https://habrastorage.org/getpro/habr/post_images/01b/d9d/50a/01bd9d50a530a5743d0c3f9768a4927f.png">  , <img src="https://habrastorage.org/getpro/habr/post_images/23f/e87/541/23fe875417d710bdddf770084b0e369f.png">  , <img src="https://habrastorage.org/getpro/habr/post_images/50c/900/43a/50c90043a4c85c9b3c70474635fdee9f.png">  , <img src="https://habrastorage.org/getpro/habr/post_images/6ec/fc7/f04/6ecfc7f04920a82d326e84f8810361ed.png">  , <img src="https://habrastorage.org/getpro/habr/post_images/09f/51c/f76/09f51cf766f214ea26d5da8e989f36ce.png">  }.  The reader may notice another feature - <img src="https://habrastorage.org/getpro/habr/post_images/09f/51c/f76/09f51cf766f214ea26d5da8e989f36ce.png">  , the so-called selector function, which of <img src="https://habrastorage.org/getpro/habr/post_images/3e0/0c6/192/3e00c61929b9d2e5eb29c4379a0f69ce.png">  arguments returns unchanged <img src="https://habrastorage.org/getpro/habr/post_images/94b/5ab/51d/94b5ab51daddd82cf2c2a612d2031cbf.png">  th, it is necessary since we work with <img src="https://habrastorage.org/getpro/habr/post_images/3e0/0c6/192/3e00c61929b9d2e5eb29c4379a0f69ce.png">  -ary functions.  In addition, cycling composition is available, let's call it <img src="https://habrastorage.org/getpro/habr/post_images/3e2/06d/978/3e206d9787f9adffcf24532be73bcc19.pngor">  .  We give her definition.  Let given <img src="https://habrastorage.org/getpro/habr/post_images/b75/018/bdf/b75018bdf6686c7b196dc0b5a2951856.png"><img src="https://habrastorage.org/getpro/habr/post_images/3e0/0c6/192/3e00c61929b9d2e5eb29c4379a0f69ce.png">  -ary functions <img src="https://habrastorage.org/getpro/habr/post_images/0ca/284/f28/0ca284f284dc0e909bf3061ff5255a19.png, f_2,...f_n">  , and <img src="https://habrastorage.org/getpro/habr/post_images/3e0/0c6/192/3e00c61929b9d2e5eb29c4379a0f69ce.png">  -ary predicate <img src="https://habrastorage.org/getpro/habr/post_images/c8b/220/0b3/c8b2200b373dd2f6fcbab9f1c79ef2aa.png">  .  Iteratively, each function performs the calculation of one of the arguments for the next iteration, so <img src="https://habrastorage.org/getpro/habr/post_images/0ca/284/f28/0ca284f284dc0e909bf3061ff5255a19.png">  calculates <img src="https://habrastorage.org/getpro/habr/post_images/549/b03/dca/549b03dca36221c3a00e830676cca1b1.png">  , <img src="https://habrastorage.org/getpro/habr/post_images/36e/eed/f7b/36eeedf7bfc4011473c607e2aa57de6d.png">  calculates <img src="https://habrastorage.org/getpro/habr/post_images/c32/0f6/327/c320f632753848fd8defdb08f857ef7c.png">  etc.  The iteration process continues until the value of the predicate is ‚Äútrue.‚Äù  The arguments of the cycling operation are passed in the following order. <img src="https://habrastorage.org/getpro/habr/post_images/3e2/06d/978/3e206d9787f9adffcf24532be73bcc19.pngor(p, f_1, f_2, ...f_n)">  .  Value <img src="https://habrastorage.org/getpro/habr/post_images/0ca/284/f28/0ca284f284dc0e909bf3061ff5255a19.png">  received at the last iteration <img src="https://habrastorage.org/getpro/habr/post_images/3e2/06d/978/3e206d9787f9adffcf24532be73bcc19.pngor">  will be the value of the function resulting from the composition.  Also available is the composition of superposition described earlier.  Then the algorithm for computing the gcd can be written as <img src="https://habrastorage.org/getpro/habr/post_images/3e0/0c6/192/3e00c61929b9d2e5eb29c4379a0f69ce.pngod = S^4(For(S^3(Neq, I^3_2, 0),S^3(Div, I^3_3, I^3_2),S^3(Rem, I^3_3, I^3_2), I^3_2), I^2_1, I^2_2, I^2_1)">  .  Schematically it will look like this: <br><img width="640" src="https://habrastorage.org/files/6ab/96f/dd0/6ab96fdd01e34c89907f85779c173971.png"><br><br>  Thus, it becomes possible to formalize the algorithm itself "in the language of mathematics", and therefore it becomes possible to study it by mathematical means, which allows to reduce the share of unreasonable or unconsciously adopted design decisions because of what a person thinks in terms of the programming language in which he writes, instead of thinking about compositions that, in fact, are the basis of various languages. <br><br>  The very compositional approach to the solution began to be investigated by A.I.  Maltsev (Mal'tsev algebras), Academician Glushkov (algorithmic algebras).  But they all work at the level of application of compositions, dogmatizing the set of compositions with which work is being conducted.  An important improvement in the compositional approach would be the ability to obtain new compositions from existing ones, applying to them some meta-compositions.  The topic is interesting, I don‚Äôt know that someone touched it, but about it next time.  I hope I did not tire you. <br><br>  The above is the subject of my research.  Immediately I will make a remark that the compositional approach is not proposed to be used for trivial calculations, like the same NOD algorithm, or in projects where the share of calculations is negligible.  I want to know very much what the community considers.  Does the compositional approach have a future?  Would you like to use compositions in practice?  Do you need tools for this? <br><br>  PS Suddenly I saw a recent <a href="http://habrahabr.ru/post/246009/">post</a> that also touches on the theme of compositions.  I hope they complement each other. <br>  PPS Many thanks to <a href="http://habrahabr.ru/users/sekrasoft/" class="user_link">sekrasoft</a> for helping to correct the article. </div><p>Source: <a href="https://habr.com/ru/post/248157/">https://habr.com/ru/post/248157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248145/index.html">SoC: we raise simple DMA on FPGA</a></li>
<li><a href="../248147/index.html">Tree - killer JSON, XML, YAML and their ilk</a></li>
<li><a href="../248149/index.html">2D lighting system for Unity3D running on a GPU</a></li>
<li><a href="../248153/index.html">A brief course of computer graphics: we write a simplified OpenGL do it yourself, article 1 of 6</a></li>
<li><a href="../248155/index.html">Sex-inspired startups: pros, cons, pitfalls</a></li>
<li><a href="../248159/index.html">A short course in computer graphics: we write a simplified OpenGL do it yourself, article 2 of 6</a></li>
<li><a href="../248161/index.html">The digest of interesting materials for the mobile # 86 developer (on January 12-18)</a></li>
<li><a href="../248163/index.html">.NET Developer Skills</a></li>
<li><a href="../248165/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ31 (January 12 - 18, 2015)</a></li>
<li><a href="../248169/index.html">A large list of materials for studying Meteor.JS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
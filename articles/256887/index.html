<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A million lines of bad code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúNo pain, no gain,‚Äù as the ancient Eastern wisdom says. And even if the wisdom is not ancient and not Eastern, for me personally the most valuable lif...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A million lines of bad code</h1><div class="post__text post__text-html js-mediator-article">  <i>‚ÄúNo pain, no gain,‚Äù as the ancient Eastern wisdom says.</i>  <i>And even if the wisdom is not ancient and not Eastern, for me personally the most valuable life experience was most often the most painful.</i>  <i>The recent post of David Robinson, a graduate student in programming at Princeton University, a dedicated review code, not only raised the important question of everyday life for everyone who would (or not) have to pass on their experience to others.</i>  <i>The original text was relatively ‚Äútoothless‚Äù, however, the post ceased to be languid after John Carmack appeared in the comments.</i> <br><br>  This is a story about bad code that your humble servant once wrote. <br><br>  In one of the first courses of the university, I wrote a Java program that was supposed to read a file weighing 6 MB per line (this file was the genome of the bacterium in the FASTA format).  My code looked like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs">BufferedReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BufferedReader(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader (file)); String line = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; String text = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>( ( line = reader.readLine() ) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ) { text = text + line; }</code> </pre> <br>  Building a string using a series of concatenations in this way is extremely inefficient - it took me, without exaggeration, about 40 minutes to read the file ( <a href="http://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file">since then I have learned several better ways</a> ).  The most important thing is that after reading the file, the rest of the algorithm in the program worked for 10 seconds. Two days later I worked: I made changes in the code, ran the program and managed to watch the whole LOST episode before the program completed its execution.  ‚ÄúDamn, on the twelfth line error!  Again, everything is new ... " <br><a name="habracut"></a><br>  After a lot of re-launches, I finally thought ‚Äúthere <i>must</i> be a better way to do this.‚Äù  I found out that you can write a Perl loop that can read the genome in less than one second (at the same time, I could not program with Perl better than Java ‚Äî I was just lucky).  So, I sat down and wrote a Perl script that read the file, put it together in one line and output it.  Then I made my Java program invoke the Perl script through the command line, capture the output and save it to a string. <br><br>  If I had this program preserved, I would have printed its source code and framed it on the wall, in order to remind myself more often that I would never scold anyone for the ‚Äúbad‚Äù code written by him. <br><br>  I was inspired to share this case from my life with a recent XKCD comic about ‚Äúcode quality‚Äù: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78e/923/583/78e9235833b644e68fd8dc53668c9093.png" alt="image"></div><br>  Comics other than "evil" can not be called - an experienced programmer does not give any useful advice, only holds hyperbolic analogies.  But the thing that most caught my eye was the patient's response - ‚ÄúWell, I read the coding style guide.‚Äù  Will a living person react like that if someone is so rude to him?  Wouldn't the answer be like ‚ÄúWell, that was the last time I showed you my code,‚Äù or even ‚ÄúOkay, I think I should start with programming‚Äù? <br><br>  The problem is present in scientific research.  There are many reasons why scientists publish their articles without attaching code to them (and they are quite understandable), but the first position on their list is usually embarrassed: ‚Äúmy code is too ugly to give it to someone.‚Äù  Those who seek to shame others for code do not help much in this matter! <br><br>  The well-known advice to beginning writers says: ‚ÄúEach of us holds within us a million bad lines.  Before this million spills out, trying to write something good is useless.  So go and write!  I remembered it when I read the discussion that flared up about the above XKCD: <br><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: absolute; visibility: hidden; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;"></twitter-widget><blockquote class="twitter-tweet" lang="ru" data-twitter-extracted-i1553778006258859066="true"><p>  Shitty code first.  Feeling shame about bad code </p>  - Hadley Wickham (@hadleywickham) <a href="https://twitter.com/hadleywickham/status/589068687669243905">April 17, 2015</a> </blockquote><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script><br>  When you, an experienced programmer, next time you want to shame someone for his code, try to mentally return to your own million lines of code.  Imagine that someone condemned you just as I myself above.  Would you continue to ask for help?  Would you have mastered your way in a million lines? <br><br><h3>  John Carmack comment </h3><br>  Do not confuse the words "idiot who wrote this code" and "this code is crap" - there is a significant difference between them.  Comics just about the last.  I assume that this is done consciously.  An attack on the author is unlikely to bring any benefit, but it must be possible to severely criticize the code itself.  In real life, many authors fail to separate themselves from their work, but the ability to do this is a valuable skill. <br><br>  Left to their own devices, most people demonstrate an impenetrable ability to ignore their shortcomings, and this harms their professional growth.  A little shame often becomes a positive motivation.  I am ashamed of the huge amount of the code that I wrote over the past year.  I have thoughts in my head about the reasons why everything turned out as it happened - some of them are excuses, but some of them are pure "WTF did I even think when I wrote this?".  And if you do not feel a little guilt for your recent work, then it is quite possible that it will be useful for you if someone points out problems to you - in the sense that this person will be able to break through your "defense mechanisms." <br><br>  I would be happy if someone ‚Äúburied‚Äù all the code I wrote for the Oculus Mobile SDK.  I am sure that, for the most part, sooner or later I will become this reader myself, and for the most part I will only nod and agree with what has been written;  however, I am sure that I can learn something useful from this, and this will have a beneficial effect on my future work. <br><br>  <i>&gt;&gt; Do you make a revision code for every commit in Oculus?</i> <br><br>  Not.  We have some progress in this direction;  I will be interested to see what happens.  We are still strongly affected by the pressure of the pace of work on a startup. <br><br>  <i>&gt;&gt; Your comment to the article looks like a monkey swept over the keyboard, and then you just walked around for an auto-corrected view ... well, it didn't sound very useful, did it?</i>  <i>I think that you confuse excessive rigidity with serious criticism.</i>  <i>Noticed that my last phrase is not so offensive, and at the same time brought more sense than the first?</i> <br><br>  Usually tactful and helpful comments work best, but there are cases that some minimum of ‚Äúactivation energy‚Äù is needed for a comment to have an effect on a person. <br><br>  <i>&gt;&gt; Did you review code written by other developers on id in the past?</i> <br><br>  Informally, and then this was enough for me.  I do not like doing code revisions;  perhaps for this reason I appreciate criticism. <br><br>  <i>Let John admit that he partly doesn‚Äôt keep to strict comments, is far from Linus Torvalds, generously giving his letters personal insults, and his speeches are <a href="http://arstechnica.com/business/2015/01/15/linus-torvalds-on-why-he-isnt-nice-i-dont-care-about-you/">phrases like</a> ‚ÄúYou don‚Äôt care, I‚Äôm worried about technology and the core - that‚Äôs what really important "and the <a href="http://arstechnica.com/information-technology/2013/07/16/linus-torvalds-defends-his-right-to-shame-linux-kernel-developers/">statements that</a> " no one will hear you if you are going to be gentle. "</i> </div><p>Source: <a href="https://habr.com/ru/post/256887/">https://habr.com/ru/post/256887/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256877/index.html">Java programmer cheat sheet 3. Java collections (standard, guava, apache, trove, gs-collections, and others)</a></li>
<li><a href="../256879/index.html">2D Platformer from Qt 5.2 to Qt 5.4</a></li>
<li><a href="../256881/index.html">Autopayment from the inside: Part 1. How recurrences work</a></li>
<li><a href="../256883/index.html">Open video course "Multicore programming in Java" in Russian (30 + 30 hours)</a></li>
<li><a href="../256885/index.html">How to connect to support the whole team</a></li>
<li><a href="../256889/index.html">The first acquaintance with the architecture of the collectible card game "Last Argument"</a></li>
<li><a href="../256893/index.html">Work with date and time in Perl6</a></li>
<li><a href="../256895/index.html">How to recover data from faulty SSD</a></li>
<li><a href="../256899/index.html">Announcement of the fourth meeting of the Java User Group EKB</a></li>
<li><a href="../256901/index.html">55 questions to ask when designing a logo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
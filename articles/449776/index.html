<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Navigation for Android using the Navigation Architecture Component: A Walkthrough</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's try, using the official guidelines and code examples , to build a working navigation system for the future multi-screen application in accordanc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Navigation for Android using the Navigation Architecture Component: A Walkthrough</h1><div class="post__text post__text-html js-mediator-article">  Let's try, using the official <a href="https://developer.android.com/guide/navigation/navigation-ui">guidelines</a> and <a href="https://codelabs.developers.google.com/codelabs/android-navigation/index.html">code examples</a> , to build a working navigation system for the future multi-screen application in accordance with the standards of the Navigation Architecture Component.  The article includes the following sections: <br><br>  <b>Part 1. Preparatory work</b> <br>  <i>- 1.1.</i>  <i>Creating a project</i> <i><br></i>  <i>- 1.2.</i>  <i>Dependencies (Dependencies)</i> <i><br></i>  <i>- 1.3.</i>  <i>Pages: creating fragments</i> <i><br></i>  <i>- 1.4.</i>  <i>Addresses: resource file of type "Navigation"</i> <i><br></i>  <i>- 1.5.</i>  <i>Frame: NavHostFragment widget</i> <br>  <b>Part 2. Navigation elements</b> <br>  <i>- 2.1.</i>  <i>Navigation with buttons</i> <i><br></i>  <i>- 2.2.</i>  <i>Side menu (Drawer)</i> <i><br></i>  <i>- 2.3.</i>  <i>Toolbar: Toolbar instead of ActionBar</i> <i><br></i>  <i>- 2.4.</i>  <i>Bottom menu (Bottom Navigation)</i> <i><br></i>  <i>- 2.5.</i>  <i>Pop-up menu (Overflow Menu)</i> <br>  <b>Summary of findings and a link to github</b> <br><a name="habracut"></a><br><h2>  Part 1. Preparatory work </h2><br><h3>  1.1.  Creating a project </h3><br>  We will need basic knowledge of <a href="https://kotlinlang.org/">Kotlin</a> , IDE <a href="https://developer.android.com/studio/">Android Studio</a> version not lower than 3.3, a smartphone or an emulator with API version 14 or higher. <br><br>  Create a new project in Android Studio called “Navigation2019”. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/vr/t7/k-/vrt7k-7w_qqepkjwj7r4trow5i0.png"><br><br><img src="https://habrastorage.org/webt/_q/eb/ft/_qebft82drjjd8kkbd-by5s7mq4.png"><br><br>  The IDE will create the main activity file “MainActivity.kt” and its layout (template) “activity_main.xml”. <br><br><img src="https://habrastorage.org/webt/nw/rg/xj/nwrgxjkoojesjdh7efew6-dusxm.jpeg"><br><br><h3>  1.2.  Dependencies (Dependencies) </h3><br>  Open the module's “build.gradle” file (not the project, but the module) and add the necessary dependencies to the “dependencies” block: <br><br><pre><code class="kotlin hljs">def nav_version = «<span class="hljs-number"><span class="hljs-number">1.0</span></span>.0» implementation «android.arch.navigation:navigation-fragment-ktx:$nav_version» implementation «android.arch.navigation:navigation-ui-ktx:$nav_version»</code> </pre> <br><img src="https://habrastorage.org/webt/si/g8/6z/sig86zem47m6xonnz0rypaybk1o.jpeg"><br><br>  We used libraries version 1.0.0, but in the future the situation may change.  You can check which versions of libraries are relevant <a href="https://dl.google.com/dl/android/maven2/index.html">here</a> . <br><br><h3>  1.3.  Pages: creating fragments </h3><br>  Fragments are the “pages” of our future application.  Clicking the right button on the directory with the class files, the command “New -&gt; Fragment -&gt; Fragment (Blank)” will create “Fragment1”. <br><br><img src="https://habrastorage.org/webt/se/wb/wt/sewbwtqwvxhyi42or_lfl5juuxo.jpeg"><br><br><img src="https://habrastorage.org/webt/et/ff/t9/etfft9mjbsbki2iwbzvzbngeume.png"><br><br>  The IDE will create a kt-file with a fragment class and an xml file with a fragment layout.  In the same way, we will generate three more fragments (“Fragment2”, “Fragment3”, “Fragment4”).  We will use them to create four different types of navigation through the application. <br><br><h3>  1.4.  Addresses: resource file of type "Navigation" </h3><br>  By right-clicking on the “res” folder, we will create a resource file of the type “Navigation” with the name “routes.xml” (“routes”). <br><br><img src="https://habrastorage.org/webt/py/5l/es/py5les6nwjvpmohzwdxb8lkbrh8.jpeg"><br><br><img src="https://habrastorage.org/webt/im/vx/dj/imvxdjnujzax_tkcfkfikoiy_ds.png"><br><br>  Open the created file and add our fragments to the navigation scheme using the “New Destination” button. <br><br><img src="https://habrastorage.org/webt/eb/o_/ny/ebo_nyimkxdf27modgzkyvaqeku.jpeg"><br><br><img src="https://habrastorage.org/webt/cf/8r/ib/cf8rib6sf1ms_derrhadddnvu0y.jpeg"><br><br>  Catching the <a href="https://habr.com/ru/post/416025/">mouse over a point</a> in the middle of the right side of the fragment, connect the fragments with each other as they should be linked in the application. <br><br><img src="https://habrastorage.org/webt/8m/mx/cc/8mmxccrg3_rwdof4k37zynhtbqs.jpeg"><br><br>  In accordance with their names, our fragments will receive identifiers (id) "fragment1", "fragment2", "fragment3", "fragment4".  These are the “addresses” that will be used when specifying destinations in instructions to the navigation controller. <br><br>  In addition to the “id”, each tag “fragment” contains three more parameters: “name”, “label” and “layout”.  The parameters “name” and “layout” do not interest us now.  The only thing that needs to be edited in the “routes.xml” file is the names ("label") of the fragments.  Let's replace them with “Fragment №1”, “Fragment №2”, “Fragment №3” and “Fragment №4”. <br><br><img src="https://habrastorage.org/webt/sx/z5/ub/sxz5ub5avn0pg8igazl7x0mtxb8.jpeg"><br><br><h3>  1.5.  Frame: NavHostFragment widget </h3><br>  Open the res / layout / activity_main.xml layout file and remove the Hello World! Text widget, we will not need it.  In the Palette, select the Containers section and drag the NavHostFragment widget from there to the activity layout (specifying our routes file as the source of information for it).  It will act as a frame in which various fragments of the application will be displayed. <br><br><img src="https://habrastorage.org/webt/wp/ym/ko/wpymkoyggi0d8slgx8ukbi7izs0.jpeg"><br><br><img src="https://habrastorage.org/webt/tk/0u/pf/tk0upfbtzqueh7wfzbheftlewxy.jpeg"><br><br>  Change the fragment id to “navFragment”.  The main activity layout code will now look like this: <br><br><img src="https://habrastorage.org/webt/lw/xi/ip/lwxiipgxnutr4ykqdjzza8fgipq.jpeg"><br><br>  This preparatory work is completed, you can now proceed directly to the creation of navigation elements. <br><br><h2>  Part 2. Navigation elements </h2><br><h3>  2.1.  Navigation with buttons </h3><br>  Open the layout of the first fragment (“fragment_fragment1.xml”).  Delete an unnecessary text widget, change the layout type from “FrameLayout” to linear vertical and add three buttons with identifiers “button2”, “button3”, “button4” and corresponding names “Fragment 2”, “Fragment 3”, “Fragment 4”. <br><br><img src="https://habrastorage.org/webt/y3/sz/z3/y3szz3qnrtnbbcya27usovnuvls.jpeg"><br><br>  In the fragment's onCreateView method, we will get a link to the navigation controller (NavController object) and program the behavior when the buttons are pressed: using the setOnClickListener button, we will create a button listener for each button, which, when clicked, will send the address (id) of the button the destination along with the command navigate to the specified address. <br><br><img src="https://habrastorage.org/webt/5d/hg/ql/5dhgqlykyyxsd3jcosrsg9ror-i.jpeg"><br><br>  Check out how our buttons work. <br><br><img src="https://habrastorage.org/webt/vz/ut/wh/vzutwhyelmhsvxsazmongd2xe0k.gif"><br><br>  One button - one line of code - and clicking on the button moves us to the specified fragment.  Simple, isn't it? <br><br>  But without the menu is not very convenient, you have to use the "Back" button to return to the start screen. <br><br><h3>  2.2.  Side menu (drawer) </h3><br><h4>  2.2.1.  Menu resource file </h4><br>  In the “res / menu” directory we will create the resource file menu “drawer_menu.xml”.  Add menu items to it, each of which is an “item” tag with “id” parameters (should correspond to that in the navigation column “routes.xml”, “title” (the title, it can be different), “icon” (we use the same picture for all items, but, of course, they can be different), etc. Our menu will look like this: <br><br><img src="https://habrastorage.org/webt/tu/m6/sj/tum6sjbwwrczhvemch9u5oabvqe.jpeg"><br><br><h4>  2.2.2.  The DrawerLayout template and the NavigationView widget in the activity layout </h4><br>  Open the activity layout file “activity_main.xml”. <br><br>  After the first tag (xml version ...) we add the beginning of the “DrawerLayout” tag. <br><br><img src="https://habrastorage.org/webt/i9/qe/ft/i9qeftpkkkz8lwfn515ry3gxw6i.jpeg"><br><br>  At the end of the file, add the “NavigationView” widget and the end of the “DrawerLayout” tag. <br><br><img src="https://habrastorage.org/webt/0v/qu/nj/0vqunjv5ewao4dhc1btfheau7qo.jpeg"><br><br><h4>  2.2.3.  Connecting the side menu in the activity class </h4><br>  Open the “MainActivity.kt” file and in the “onCreate” method we get a link to the “navController” (in activity this looks a bit more complicated than it was in the fragments). <br><br><img src="https://habrastorage.org/webt/gn/to/jd/gntojdzx4nerc9ciukfay2rfszi.jpeg"><br><br>  Then turn on the side menu: <br><br><img src="https://habrastorage.org/webt/a2/it/c5/a2itc51dgcpxk2po6ipmmyhufkm.jpeg"><br><br>  The class code now looks like this: <br><br><img src="https://habrastorage.org/webt/vr/c_/d9/vrc_d94raagvogelkhtwrrtg89g.jpeg"><br><br>  Now the menu appears in response to the swipe from the left edge of the screen: <br><br><img src="https://habrastorage.org/webt/rb/fj/kt/rbfjktfx0ldbf9xcl4fyo8cbwq8.jpeg"><br><br>  It would be nice to add a button on the left-top to call the side menu, right? <br><br><h3>  2.3.  Button and fragment name on the toolbar </h3><br>  The default ActionBar, as the official guide <a href="https://developer.android.com/training/appbar/setting-up">recommends</a> , is replaceable with the Toolbar. <br><br>  To disable the existing ActionBar, in the file “res / values ​​/ styles.xml” we find the line <br><br><pre> <code class="kotlin hljs">&lt;style name=<span class="hljs-string"><span class="hljs-string">"AppTheme"</span></span> parent=<span class="hljs-string"><span class="hljs-string">"Theme.AppCompat.Light.DarkActionBar"</span></span>&gt;</code> </pre> <br>  and replace “DarkActionBar” with “NoActionBar”. <br><br><img src="https://habrastorage.org/webt/ww/ke/_f/wwke_fzbuwqrd9bbwjnzekwakzy.jpeg"><br><br>  Great, we have disabled ActionBar. <br><br><img src="https://habrastorage.org/webt/gs/xw/vf/gsxwvfzv1yxyy_nmdklypnkhiws.jpeg"><br><br>  Now add a toolbar.  Open the file “activity_main.xml”, in the Palette, select the Containers section and drag the Toolbar widget from there to the activity layout.  The toolbar has been added, but it is still empty. <br><br><img src="https://habrastorage.org/webt/om/tp/ia/omtpiakqs9w99pmrnvjwomfn-og.jpeg"><br><br>  Go to the activity file "MainActivity.kt".  To display the button and the name of the current fragment on the Toolbar, add the following lines to the onCreate () method: <br><br><img src="https://habrastorage.org/webt/v3/qj/sp/v3qjspzl7uucposiitqxg71lb1q.jpeg"><br><br>  The toolbar now displays the name of the fragment and the Up button (Up) for nested fragments. <br><br><img src="https://habrastorage.org/webt/ke/gt/le/kegtle1_wyeipodkpqt7nx2n67e.jpeg"><br><br>  <s>The “up” button in android is for some reason indicated by an arrow to the left:</s> <br><br><img src="https://habrastorage.org/webt/za/d7/n3/zad7n3snq4vkyi5b55xdx4po3h0.jpeg"><br><br>  In order to display the hamburger button on the application start screen, we need to add the “drawerLayout” parameter to the toolbar configuration, which contains the widget DrawerLayout id from the file “activity_main.xml”. <br><br><img src="https://habrastorage.org/webt/d-/ue/mq/d-uemqy3kp04zwnbqvrcn-r31bu.jpeg"><br><br><img src="https://habrastorage.org/webt/zp/8k/28/zp8k28va3l_x0rwfadqhsaejrxo.jpeg"><br><br>  Clicking this button displays the side menu. <br><br><img src="https://habrastorage.org/webt/gq/4r/_b/gq4r_b33r_nxkhzcy_9c3o4ddvi.jpeg"><br><br><h3>  2.4.  Bottom menu (Bottom Navigation) </h3><br>  Sometimes it is necessary to focus the user's attention on certain actions, and the bottom menu helps to do this effectively.  Add it to the third fragment. <br><br>  First, create a resource file menu "bottom_nav_menu.xml" with a couple of links.  Then, open the fragment 3 model (file “fragment_fragment3.xml”) and drag the “BottomNavigationView” widget onto it, while agreeing with the IDE's suggestion to add the com.android.support:design library to the dependencies. <br><br><img src="https://habrastorage.org/webt/wj/jk/rl/wjjkrl_4ywvizvvguxle0tfor0c.jpeg"><br><br><img src="https://habrastorage.org/webt/sz/1h/f5/sz1hf5p317wm-wcw8juuarawy0a.gif"><br><br>  If we created the lower menu not for one fragment, but for all at once, then the following code would be included in the “onCreate” class of the activity class (the “MainActivity.kt” file): <br><br><img src="https://habrastorage.org/webt/7w/i7/ze/7wi7zedtrkq3vrugjoeyfgnnyqc.jpeg"><br><br>  Of course, the “BottomNavigationView” widget in this case would have to be placed in the layout of the activity, rather than a fragment. <br><br>  But since we only need this menu in fragment No. 3, we will edit the fragment class (the file “Fragment3.kt”), and the code will look a bit more complicated: <br><br><img src="https://habrastorage.org/webt/j-/fc/im/j-fcimywhwtp3exfh2mtpq2qhng.jpeg"><br><br>  As a result, we get the bottom menu, which will be displayed only in the 3rd fragment. <br><br><img src="https://habrastorage.org/webt/yl/o-/af/ylo-afbmuviiordhuyd9k-zrgv8.jpeg"><br><br>  The same, but with other links, will do in the 4th fragment. <br><br><h3>  2.5.  Pop-up menu (Overflow Menu) </h3><br>  Another type of menu is the pop-up menu, which is displayed when you click on the button (three vertically arranged points) in the upper right corner of the screen. <br><br><img src="https://habrastorage.org/webt/jr/s-/lw/jrs-lwci7vtuusmjvd1yp8vlcuk.jpeg"><br><br>  Create a resource file menu "top_right_menu.xml" with the necessary links. <br><br>  In the “MainActivity” file, in the “onCreate” method, before the “toolBar.setupWithNavController ...”, add the line “setSupportActionBar (toolBar)”. <br><br><img src="https://habrastorage.org/webt/bt/he/if/btheiflac9jwi3eadhvu8foprma.jpeg"><br><br>  And further in the same class we will redefine two methods: <br><br><img src="https://habrastorage.org/webt/4n/qs/l6/4nqsl6m01dybj9sveywmakvk27m.jpeg"><br><br>  Pressing the upper right button now displays a popup menu: <br><br><img src="https://habrastorage.org/webt/le/zq/ib/lezqibkugjnk1ajht8ryopufjxa.jpeg"><br><br><h2>  Summary of findings and a link to github </h2><br>  Obviously, the <a href="https://developer.android.com/guide/navigation/navigation-getting-started">Navigation Architecture Component</a> greatly facilitates the work of the developer.  Challenges in the past are now solved with a few lines of code. <br><br>  Since the main purpose of this publication was to highlight the basic algorithms for creating navigation in an android application, many implementation details were deliberately left behind the scenes. <br><br>  My work schedule usually does not allow to support discussions, but your comments will in any case be useful for site visitors and therefore are always welcome. <br><br>  Project files are <a href="https://github.com/kotlin-studio/ForHabrCom_Navigation2019">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/449776/">https://habr.com/ru/post/449776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449760/index.html">The history of the transistor, part 3: multiple reinvention</a></li>
<li><a href="../449762/index.html">We have included TLS 1.3. Why you should do the same</a></li>
<li><a href="../449764/index.html">TI-89 Titanium Calculator and C Programming</a></li>
<li><a href="../449766/index.html">Music for your projects: 12 thematic resources with tracks licensed under Creative Commons</a></li>
<li><a href="../44977/index.html">Mysteries of quantum physics</a></li>
<li><a href="../449778/index.html">Photo excursion: what they do in the laboratory of quantum materials at ITMO University</a></li>
<li><a href="../44978/index.html">"Mymehouse" co-working Moscow</a></li>
<li><a href="../449784/index.html">When it is worth using Django (and when it is not)</a></li>
<li><a href="../449788/index.html">Brave Browser introduces an advertising platform based on user rewards.</a></li>
<li><a href="../44979/index.html">Luxophore is the first square traffic light.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
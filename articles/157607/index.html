<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Control of mobile expenses within the organization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It will not be news that controlling the costs of communication in an organization with more than twenty SIM cards is not easy, and many prefer to jus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Control of mobile expenses within the organization</h1><div class="post__text post__text-html js-mediator-article">  It will not be news that controlling the costs of communication in an organization with more than twenty SIM cards is not easy, and many prefer to just pay without bothering with cost analysis. <br>  There are specialized products on the market that allow you to track costs mainly in manual mode. <br>  I would like to share the experience of creating a cost control system for several hundred thousand SIM cards based on MS SSAS. <br>  As a field for action, a company was selected, which at that time had about 120 thousand SIM cards, 90% of which were providers with the logo in the form of eggs and installed in m2 device. <br><a name="habracut"></a><br><br><h5>  Idea </h5><br>  Having a little bit gone into work with mobile providers, the process looked like this: <br><ul><li>  we receive the electronic version of the account for communication on mail </li><li>  we get a paper original </li><li>  we pay </li><li>  mailbox is not rubber, delete electronic copies </li></ul><br><br>  I wanted to build a process like this: <br><ul><li>  we receive the electronic version of the account for communication on mail </li><li>  we load into base, we analyze </li><li>  re-expose unreasonable costs (provider or one who uses the sim) </li><li>  we pay </li></ul><br><h5>  Decision </h5><br>  The first thing to do is load the data into the database.  The organization used Axapta, in its base and it was decided to store data from providers.  The program code with the help of which the data from the html accounts got into the database will not be described, since  I did not write it and the essence of the post is not in this. <br>  The file coming from the provider in html format is divided into two components: the details for the past period and a summary for each number on charges.  Summary as a result, we will ship to the database. <br>  As a result, we will pull out information from such a file: <br><img src="https://habrastorage.org/getpro/habr/post_images/f35/a46/9bd/f35a469bdad3fd5d0fcd457cb17a7c39.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the database, create a table of this type: <br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [dbo].[month_money_traffic]( [PERIODBEGIN] [datetime] <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-comment"><span class="hljs-comment">--  [personalaccount] [nvarchar](20) NOT NULL, --  [phonenumber] [nvarchar](12) NULL, --  [VENDACCOUNT] [varchar](7) NULL, --  [typeconid] [varchar](50) NOT NULL, --  [traffic] [numeric](30, 7) NULL, --  [money] [numeric](32, 14) NULL -- )</span></span></code> </pre> <br><br>  And load the data from our accounts there. <br>  It turns out like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/542/554/3a2/5425543a276c05c15fe55fcc29e1a8ad.png" alt="image"><br><br>  The [typeconid] field must first be reduced to the standard 8-10 values, otherwise we risk having several hundred types of communication, since  about the same type of communication provider can be called differently, for example: "outgoing" and "outgoing." or "Content category .. (and category number) ..". <br><br>  done with case: <br><br><pre> <code class="sql hljs"> case when [typeconid] like ' %' then '' case when [typeconid] like '%' then ' ' else [typeconid] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><br>  As a result, we obtain a fact table for our cube. <br><br>  Next you need to design measurements. <br>  Each SIM card in an organization has the following properties: <br><ul><li>  location (in m2m device, issued to the employee, in servers, etc.) </li><li>  status (active, blocked) </li><li>  region service, sales </li><li>  provider </li><li>  contract (legal person who pays the bill) </li><li>  etc </li></ul><br>  Part of the measurements taken from the fact table: personal account, provider, type of communication <br>  We extract a part from our database by making the required tables join. <br><br>  Next, set up an incremental update of the measurement tables from the operating database to the storage.  Here, someone like you can use timestamp, cdc, to retrieve only the changed data. <br>  My tables are not big and I used the usual left join to pull out the difference between the two tables. <br><br>  As a result, the parameters were summarized in one table with the primary key along the "telephone" field: <br><br><img src="http://s3.uploads.ru/7jbS0.png" alt="image"><br><br>  Where the parameters are not known, replace the values ‚Äã‚Äãwith 'n / a'. <br><br>  Open BIDS and create a new data mining project. <br>  As a data source, we connect the database with the created tables. <br>  Add a fact table and dimension tables to the data source view. <br>  I made several more measurements by analogy with the one described, and also the time table remained with me from another project. <br>  We create links from the fact table to dimension tables, and the keys in the dimension tables do not have to be physical, they will be added as logical when creating a link. <br><br><img src="http://s3.uploads.ru/PFYyU.png" alt="image"><br><br>  Next, create a cube: <br><img src="http://s2.uploads.ru/6R9Xi.png" alt="image"><br><br>  Since ‚ÄúKubom‚Äù is used in different regions, it is necessary to differentiate rights.  I did this by measuring the ‚Äúcontract sim‚Äù, creating a separate role for each region and writing the following on the ‚Äúmeasurement data‚Äù tab (example for the Urals): <br><img src="http://s2.uploads.ru/7vYkB.png" alt="image"><br>  And be sure to turn on the checkbox "activate visual results" <br><br>  As a result, each region can see only its SIM cards and its expenses. <br>  Analysts connect to the cube via Excel and view expenses. <br>  Below are some screenshots of how this looks through the eyes of an analyst: <br>  Interface - the usual pivot table <br><br><img src="http://s3.uploads.ru/G12RL.png" alt="image"><br><br>  Three month expenses by type of communication <br><img src="http://s2.uploads.ru/gG8mW.png" alt="image"><br><br>  Spending on the sim for the month, clearly visible "peaks" with which you need to understand. <br><br><img src="http://s3.uploads.ru/YHLbm.png" alt="image"><br><br>  Traffic report by one of the sim (numbers in minutes) <br><br><img src="http://s2.uploads.ru/VJ50U.png" alt="image"><br><br>  At the moment, the system is used in 7 regions of the Russian Federation. <br>  In the first two months after the introduction of the system, expenses were reduced by about 20% and this is not the limit. <br><br>  This topic is not intended to describe in detail the creation of an OLAP cube, but only describes a concept that can be implemented in any company with a large number of SIM cards. <br><br>  The system can be improved using MDX queries, pulling out "interesting" cases and processing them. <br><br>  If there is interest in the article, you can expand the technical details of the project. </div><p>Source: <a href="https://habr.com/ru/post/157607/">https://habr.com/ru/post/157607/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../157595/index.html">Overview of the program for auditing Microsoft SQL Server-NetWrix SQL Server Change Reporter 2.5</a></li>
<li><a href="../157597/index.html">We're friends of System.Web.Optimization Bundle with Windows Azure Storage</a></li>
<li><a href="../157599/index.html">Creating a Cocos2D-x project in the Marmalade SDK</a></li>
<li><a href="../157603/index.html">How to become a millionaire in the AppStore or a few formulas about promotion and sales. Part 1</a></li>
<li><a href="../157605/index.html">Taming the triceps dragon or how authentication in Bacula works</a></li>
<li><a href="../157609/index.html">EPAM IT Share # 2: Can you Kanban? Fault tolerance</a></li>
<li><a href="../157611/index.html">NVIDIA turned to Linux</a></li>
<li><a href="../157613/index.html">So how to delete millions of files from one folder?</a></li>
<li><a href="../157615/index.html">Implementing a Singleton design pattern for PHP 5.4</a></li>
<li><a href="../157617/index.html">MongoDb for developers. Week 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
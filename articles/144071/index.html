<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HTML5 History API today and without limitations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="HTML5 History API Library 
 Initially, this project was intended to add support for the HTML5 History API in older HTML4 browsers. The first versions ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HTML5 History API today and without limitations</h1><div class="post__text post__text-html js-mediator-article"><h4>  HTML5 History API Library </h4><br>  Initially, this project was intended to add support for the HTML5 History API in older HTML4 browsers.  The first versions of the library were aimed precisely at these needs, but taking into account the past tense and the wishes of respected developers using this library, it has grown to the level that it performs some intermediate actions for adding / correcting the functionality that is described in the interface specifications. <br><br>  To date, I can safely call the library, in my opinion, fully completed.  Of course, I think there will be a mistake in the library‚Äôs work, the library has been tested by me in different conditions and browsers, but as you understand, you won‚Äôt catch everything, and you will miss something.  And so let's get down to the description of the possibilities and subtleties of the library. <br><a name="habracut"></a><br><h5>  Using. </h5><br>  Using the library is very simple, it tries to adhere to the official specification for the History interface. <br><br>  I will give a small example: <br><pre><code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"history.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.onload = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//    DIV     function appendText( text ) { var div = document.createElement( "div" ); div.innerHTML = text; document.body.appendChild( div ); } //         function handlerAnchors() { //     var state = { title: this.getAttribute( "title" ), url: this.getAttribute( "href", 2 ) //    6-7 } //     history.pushState( state, state.title, state.url ); //       .. // ... appendText( '&lt;b&gt;   :&lt;/b&gt; ' + '&lt;span style="color: green;"&gt;' + state.url + '&lt;/span&gt;' ); //       return false; } //    var anchors = document.getElementsByTagName( 'a' ); //         for( var i = 0; i &lt; anchors.length; i++ ) { anchors[ i ].onclick = handlerAnchors; } //    popstate   //   back/forward   window.onpopstate = function( e ) { //   appendText( '&lt;b&gt;   :&lt;/b&gt; ' + '&lt;span style="color: green;"&gt;' + history.location + '&lt;/span&gt;' + '&lt;br/&gt;&lt;b&gt;state:&lt;/b&gt; &lt;span style="color: green;"&gt;' + JSON.stringify( history.state ) + '&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;' ); //       .. // ... } } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>  ,       back/forward<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/mylink.html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"    My Link"</span></span></span><span class="hljs-tag">&gt;</span></span>My Link<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/otherlink.html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"    Other Link"</span></span></span><span class="hljs-tag">&gt;</span></span>Other Link<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  As you can see, there is nothing difficult in using this library; you probably noticed from the example above that there are practically no differences / differences in the use of the methods described in the specification for the History interface.  There is only one small difference in the fact that getting the current link when the <code>popstate</code> event is <code>popstate</code> , we get from the <code>history.location</code> object. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  How it works. </h5><br>  In HTML5 browsers, it performs only the role of fixing bugs / errors when working with history.  And links have a normal nice look, without using any hash-fallback. <br><br>  In HTML4 browsers, of course, hash-fallback is used, because of course there is no other option for such browsers.  But for the developer inside the JavaScript-code it will not be some kind of ailment, because the links will have the appearance that they were originally intended.  And you do not need anywhere either to prescribe hash-links and / or follow the rules for search engines, so that they in turn would normally index the site.  After all, the links will be of normal appearance, which means that the search robot will quietly follow the necessary link. <br><br><h5>  Functional library. </h5><br>  The library has small subtleties when working with it.  As we have already noted, the library has its own <code>history.location</code> object, it is no different from the known <code>window.location</code> object.  That is, in a word, this is the link to the <code>window.location</code> object, except that in HTML4 browsers it intercepts <b>getters / setters</b> from the original object, makes the necessary modifications and returns the result. <br><br>  The way of working with <code>history.location</code> is unlimited; you can also assign it, receive it, access its properties, etc. <br><br>  For example, it looks like this: <br><pre> <code class="javascript hljs"> history.location = <span class="hljs-string"><span class="hljs-string">"http://yandex.ru/"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     . history.location.hash = "#newhash"; //   hash  . //      ,  //     Location</span></span></code> </pre><br>  The next subtlety of the library is its customization for your needs.  The library does not have any objects for setting, but it receives them from the GET parameter when the library is connected via the HTML <code>script</code> element, that is, it reads the link when the script is connected to the site. <br><br>  Smooth it like this: <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"history.js?type=/&amp;redirect=true&amp;basepath=/pathtosite/"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  By connecting the library to the site, you can specify in advance what actions are required from it.  The library has only three parameters, now I will describe to you their actions and necessity. <br><br><h6>  Parameter: <b>type</b> </h6><br>  Does not play a special role, it is needed to decorate links in HTML4 browsers.  In this parameter, you can specify absolutely any string / character that will be added after the # (hash) character, thus you simply decorate the link with the desired character / text.  For example, if I set the text to this parameter: ‚ÄúHelloWorld /‚Äù, then the links will have this substring.  Suppose clicking the link <a href="http://somesite.com/folder/page.html">http://somesite.com/folder/page.html</a> we get a link of the form: <a href="http://somesite.com/">http://somesite.com/#HelloWorld/folder/page.html</a> .  You can experiment with this parameter.  By default, this parameter has the substring "/" (forward slash) in the library. <br><br><h6>  Parameter: <b>basepath</b> </h6><br>  One of the important parameters, it is for this parameter that the library generates a link for the <code>history.location</code> object.  It indicates where the root of the site is located, usually the sites are right in the root of the domain, but sometimes you need to put the site in a different folder from the main domain.  For this purpose, this parameter was added, so that sites located outside the root could work fully in HTML4 browsers. <br><br><h6>  Parameter: <b>redirect</b> </h6><br>  This parameter is responsible for site redirection when clicking on a link copied in an HTML4 browser to an HTML5 browser.  It simply redirects the user of the following link: <a href="http://somesite.com/">http://somesite.com/#/folder/page.html</a> to the link of the form <a href="http://somesite.com/folder/page.html">http://somesite.com/folder/page.html</a> and vice versa, if the user followed the link from the browser HTML5 to HTML4 browser.  It is important to remember that this parameter is closely related to the <b>basepath</b> parameter, since it is for this parameter that it draws conclusions on where to redirect the user. <br><br><h5>  Conclusion </h5><br>  In conclusion, I want to add that sometimes sometimes you need to find out which browser we are in, in the HTML4 browser or in the HTML5 browser.  For these purposes, I added an <b>emulate</b> property to the <code>window.history</code> object indicating whether the emulation is <code>window.history</code> or not.  If this property is <b>true</b> , then we are in the HTML4 browser and work with hash links, otherwise otherwise. <br><br>  I also add that in HTML5 browsers the library corrects the bugs / deficiencies of the History interface and everything connected with it.  For example, in Safari it adds a state object to the History interface, in Safari and Chrome browsers it removes the <b>initial state</b> ( <code>popstate</code> when the document is first loaded). <br><br>  It is important to remember, the library does not do what is not described in the specification, it operates only according to the official document.  The library should be connected on the very first page, since it overloads some methods / properties, and it immediately intercepts any calls to methods / properties associated with it.  Therefore, it is worth it to connect before other libraries / scripts. <br><br>  The library works with absolutely any frameworks and does not use them for its own purposes. <br><br>  The library has been tested in browsers: <br>  <i><b>IE 6+</b></i> <i><b><br></b></i>  <i><b>FireFox 3+</b></i> <i><b><br></b></i>  <i><b>Opera 11+</b></i> <i><b><br></b></i>  <i><b>Opera Mobile 11+</b></i> <i><b><br></b></i>  <i><b>Chrome 17+</b></i> <i><b><br></b></i>  <i><b>Safari 5+</b></i> <br><br>  If you have the opportunity to check in other browsers or versions and you will not be difficult for me to unsubscribe, then I will be very grateful to you. <br><br>  All wishes, questions, bug reports, etc.  You can send me to the mail indicated on the GitHub or write in the Issues section of the GitHub. <br><br>  You can download and view this library on GitHub: <a href="https://github.com/devote/HTML5-History-API">https://github.com/devote/HTML5-History-API</a> <br><br>  You can also see the library working on my unfortunately unfinished website: <a href="http://history.spb-piksel.ru/">http://history.spb-piksel.ru/</a> .  The site itself is not completed, but you can look at the library working capacity. <br><br>  <b>UPD (09/12/2012):</b> <b>Important!</b>  I often began to write / report about the inoperability of the library in IE9.  The problem is related to the fact that IE9 is a capricious browser and finds fault with all the details.  As it turned out, many developers that use scripts taken from GitHub run into problems with their inoperability, because IE9 expects to receive the application / javascript header when connecting scripts, but GitHub returns the text / plain header.  Therefore, connecting scripts directly with GitHub is not recommended.  Download the script to your host and use. </div><p>Source: <a href="https://habr.com/ru/post/144071/">https://habr.com/ru/post/144071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144060/index.html">The Pirate Bay is actively DDoS`yat. UPD Former Anonymous</a></li>
<li><a href="../144063/index.html">Webinar: How to create locators for Selenium WebDriver</a></li>
<li><a href="../144064/index.html">Google plans to sell its devices directly.</a></li>
<li><a href="../144066/index.html">Japanese engineers have taught the robot to juggle</a></li>
<li><a href="../144069/index.html">New classic: Lenovo updates ThinkPad T, X and W-series</a></li>
<li><a href="../144072/index.html">May 25, will begin selling the new iPad in Russia</a></li>
<li><a href="../144073/index.html">Internet TV from Rostelecom</a></li>
<li><a href="../144074/index.html">Facebook IPO: capitalization amounted to $ 105 billion</a></li>
<li><a href="../144076/index.html">Assembler: we hide several teams in a team</a></li>
<li><a href="../144077/index.html">Startup Unglue.it frees books from copyright through crowdfunding</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Enter fractional values ‚Äã‚Äãwithout changing the layout</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How often do you have to enter fractional values ‚Äã‚Äãinto the interface of any program / web service? If often, then you have probably come across inade...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Enter fractional values ‚Äã‚Äãwithout changing the layout</h1><div class="post__text post__text-html js-mediator-article">  How often do you have to enter fractional values ‚Äã‚Äãinto the interface of any program / web service?  If often, then you have probably come across inadequate behavior of such fields.  For example, I quite regularly beat my forehead with absolutely stupid forms.  Want to know why entering fractional values ‚Äã‚Äãcan lead to a white-hot, and what to do about it?  Welcome to cat. <br><a name="habracut"></a><br>  According to my observations, the following algorithms of their behavior are most common: <br><br><ul><li>  <b>Guess where to click.</b>  Such fields are most often found in desktop applications.  The field strictly filters the input of any characters except digits and the decimal separator.  It would seem that everything is logical.  But let's do an experiment: close your eyes and try entering a decimal separator into such a strictly field by pressing just one button.  Happened?  Oh, not a fact!  The problem of strict filtering is that the user: a) does not know which of the two standard decimal separators was used by the developer;  b) when entering numbers, one may not think about the current keyboard layout.  As a result, an attempt to enter a separator in more than half of the cases fails.  This is not too critical, if you need to enter one value once, but when it comes to introducing fractional numbers regularly, this behavior of the form tires. </li><li>  <b>Neatness first.</b>  This type is more typical for the web.  Input is not filtered at all, but when you try to save a form, one of the following happens: an error message is displayed;  input field is cleared (or the previous value is returned);  nothing happens at all (the form is checked in the background and its sending is blocked for no reason visible to the user).  Apparently, some developers naively believe that the user always knows what <i>to</i> enter into the form. </li><li>  <b>Well, something like that ...</b> The third type of clumsy forms is periodically found everywhere.  Predict their behavior is almost impossible.  For example, in one of the good, in general, shareware-program for doing home accounting when you try to enter the wrong decimal divide (more precisely - when you press the button with the separator symbol not in the current layout) the integer part of the number disappears.  In another (also far from free) utility, entering any character other than a digit and the separator expected by the program generally causes a system exception.  Finally, for one very large Russian online store, entering any invalid character leads to the insertion of a decimal point and two zeros in the fractional part, and entering a point leads to ... inserting a decimal point. </li></ul><br><br>  In general, it's the 21st century, the interfaces are developing, and such trivial actions as entering fractional values ‚Äã‚Äãare still a headache for users.  A few years ago I had a chance to design (and partially code) a small program, for users of which entering fractional values ‚Äã‚Äãwas a daily task.  Naturally, I did not want to repeat the behaviors described above.  As a result of brief deliberation, a rather simple algorithm was born. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So what to do with fractional numbers?  First of all, you must filter the input.  Verification when sending a form is a good thing, but it is much more convenient for the user if the value is entered the first time, and not after a kick from the script.  Here is my version of this filter: <br><br><ol><li>  Allow the input of numbers from 0 to 9. </li><li>  When you press <b>any</b> button that carries <b>any</b> possible decimal separator in <b>any</b> layout, you need to replace the symbol sent from the keyboard so that the correct decimal separator gets into the input field. </li><li>  blocking an attempt to enter more than one decimal separator. </li><li>  we limit the number of characters in the fractional part of the input number depending on the type of input data. </li></ol><br><blockquote> Example 1. A user on the Russian layout consistently presses the keys [1] [2] [3] [b] [4] [5].  Result in the input field: <code>123.45</code> </blockquote><br><blockquote>  Example 2. The user on the English layout sequentially presses the keys [1] [2] [3] [Shift +?] [4] [5].  Result in the input field: <code>123.45</code> </blockquote><br>  The result of this algorithm gives a great <s>(wah)</s> effect.  Users no longer need to think about the layout, press Shift and guess, the programmer took the decimal point or comma for decimal.  Experiments on live users have shown that after 1-2 weeks of working with such a ‚Äúsmart‚Äù input field, returning to regular fields causes a break and the desire to <s>kill the programmer</s> to break the keyboard. <br><br>  Ps.  Honestly, this algorithm is so simple that I am 146% sure that this approach has been used more than once or twice.  But for unknown reasons, it was not widely used (if you do not believe, find the nearest input field and check its behavior - it is almost certain that it will fit into one of the three ‚Äúclumsy‚Äù algorithms, and not into the ‚Äúcorrect‚Äù result). <br><br>  Pps.  For those who write in Delphi or Lazarus I will provide a link to the CurrencyEdit component that implements this algorithm in the appropriate language: <a href="">GitHub</a> . <br><br>  PPPS.  Specific examples do not cite solely out of respect in the authors of the relevant programs.  If someone from Habr's readers finds ‚Äúwrong‚Äù algorithms in his code and decides to change them to ‚Äúcorrect‚Äù - the gratitude from users is guaranteed. <br><br>  PPPPS.  Somehow I'm not quite in the topic: in HTML-forms, in principle, you can <i>filter the</i> input? </div><p>Source: <a href="https://habr.com/ru/post/233647/">https://habr.com/ru/post/233647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../233637/index.html">Concurrent programming for beginners in the Elixir / Erlang VM YaP using the example of the ‚ÄúEuler's horse‚Äù task</a></li>
<li><a href="../233639/index.html">Is communal paradise available for everyone? The story of the sad end</a></li>
<li><a href="../233641/index.html">Wind turbine from 3D printer: AirEnergy3D</a></li>
<li><a href="../233643/index.html">Memcached in PHP Kohana and its testing</a></li>
<li><a href="../233645/index.html">DBLookupComboBox in FireMonkey, or a crutch for a red monkey</a></li>
<li><a href="../233649/index.html">Sysadmins Generation NEXT</a></li>
<li><a href="../233651/index.html">Writing Chrome extension in CoffeeScript - Coursera points</a></li>
<li><a href="../233653/index.html">LESS underutilized, but no less excellent.</a></li>
<li><a href="../233657/index.html">Interview with TypeScript Developers</a></li>
<li><a href="../233659/index.html">How does static analysis differ from compiler warnings?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
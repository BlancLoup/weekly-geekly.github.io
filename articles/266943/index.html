<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Workflow architecture in SharePoint Server 2013: yesterday and today</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SharePoint workflows provide efficient space through structured, automated workflows that include interactive user interactions, if necessary. They pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Workflow architecture in SharePoint Server 2013: yesterday and today</h1><div class="post__text post__text-html js-mediator-article">  SharePoint workflows provide efficient space through structured, automated workflows that include interactive user interactions, if necessary.  They provide notification mechanisms, email notifications, or any other activity relevant to employees. <br><a name="habracut"></a><br>  The key objects of workflows are elements of lists, SharePoint libraries, content types, sites, because virtually any business process involves at any stage accessing content, retrieving it and processing data about it, making decisions on further actions within the process based on processing results. <br><br>  The SharePoint platform provides users and programmers with a rich set of tools for developing workflows, as well as services and protocols for interaction between components, providing comprehensive support for the full life cycle of workflows. <br><br>  The following describes the architecture of the SharePoint 2013 workflow platform, its differences and advantages compared to SharePoint 2010, gives an overview of all major components and the relationships between them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <b>SharePoint 2010 Workflow Platform</b> </h4><br>  In SharePoint 2010, workflows are based on the Windows Workflow Foundation 3.5 (WF) platform, which provides programming infrastructure, application development and execution tools. <br>  In fact, SharePoint 2010 contains a <i>workflow runtime</i> environment ( <i>Workflow Runtime</i> ) and provides its own private implementation of its services.  Thus, workflows are tightly integrated with the SharePoint 2010 environment and cannot be moved beyond it. <br><br><img src="https://habrastorage.org/files/c24/a69/4b7/c24a694b72e54c06adb4c020129264e1.jpg"><br>  Figure 1. WF workflow architecture in SharePoint 2010 <br><br>  The workflow runtime integrates with SharePoint 2010 automatically during the installation of the farm, and all of its components are stored in the SharePoint content database on SQL Server.  SharePoint 2010 workflows are available and work the same way across SharePoint editions ‚Äî SharePoint Foundation 2010, SharePoint Server 2010. <br><br><img src="https://habrastorage.org/files/502/4d4/295/5024d4295d4545d7a5ae41336ee91941.jpg"><br>  Figure 2. Workflow data storage in SharePoint 2010 <br><br>  The SharePoint 2010 workflow architecture has several significant flaws, for example: <br><ul><li>  Impossibility of scaling for the purpose of load balancing and using fault tolerance management mechanisms independently of the servers of the SharePoint farm; </li><li>  Orientation to the introduction in the working environments of companies, a strong limited application in cloud environments. </li></ul><br><h4>  <b>SharePoint 2013 Workflow Platform</b> </h4><br>  The SharePoint 2013 workflow platform uses <i>Workflow Manager</i> ( <i>Workflow Manager</i> ), which operates on the basis of WF 4.0 workflows.  In turn, WF is part of the .NET Framework 4.5. <br>  Workflow Manager is a powerful new service that can be used by many different applications, including SharePoint Server 2013. One of the main ideas for developing a new platform is to provide full-featured workflow functionality to users of SharePoint Server 2013 without being tied to the platform itself. .  This approach made it possible to solve the performance, resiliency and scalability problems of SharePoint Server 2013 and the workflow manager independently of each other. <br><br><img src="https://habrastorage.org/files/df6/b7b/2b1/df6b7b2b1cf945789d0d200c57c1a37a.jpg"><br>  Figure 3. Overall architecture of the SharePoint 2013 workflow platform <br><br>  SharePoint 2013 uses a dispatcher, responsible only for supporting workflow models and implementing action logic.  Fundamental to the new architecture is the transfer of processes to the dispatcher's side, which allows them to be moved out of the SharePoint 2013 farm, ensuring fully independent use of server resources. <br><br>  What is important is that the workflow manager is a completely independent software product that must be downloaded, installed and configured, after which it will be connected to the SharePoint farm. <br><br>  SharePoint Server 2013 uses a specialized program interface (Application Program Interface, API) to interact with the workflow manager.  All the necessary set of components for this is included in the corresponding client (English <i>Workflow Manager Client</i> ).  In this case, all calls are implemented through the service bus (eng. Service Bus). <br><br>  The SharePoint 2013 workflow platform is based on the cloud application model.  At the same time, the workflow manager can be installed on a separate server in the internal network infrastructure of companies (eng. <i>On-premises</i> ) and deployed as a service in Windows Azure. <br><br>  Note that in practice, companies often deploy a workflow manager and a service bus for Windows Server on SharePoint servers in their internal network infrastructure. <br><br>  The second important point is that the customization of SharePoint 2013 workflows is available <b>only in server editions,</b> i.e.  in SharePoint Server 2013 Standard and SharePoint Server 2013 Enterprise. <br><br><img src="https://habrastorage.org/files/fa2/042/193/fa204219383f43a1abe5bbd4830f7f0f.jpg"><br>  Figure 4. The architecture of the workflow platform in the company's internal network infrastructure <br><br><img src="https://habrastorage.org/files/077/e3b/489/077e3b48986949f9a24ef281a5d108a9.jpg"><br>  Figure 5. Workflow platform architecture in Windows Azure <br><br>  We list the main advantages of the new workflow architecture: <br><ol><li>  <b>Multi-server hosting.</b>  It provides high efficiency and speed of execution of workflow instances combined with ease of management.  Also among its advantages is a higher level of security, flexible scaling and load balancing between remote workflow manager servers. </li><li>  <b>Scaling.</b>  Managing the development of workflows, the implementation of business logic and the formation of their instances on the farm side of SharePoint Server 2013 within the company's network infrastructure allows you to maintain the use of farm server resources at a constant level, and at the same time allocate resources on demand that are necessary for the immediate execution of workflows.  In case of placing the workflow manager in Windows Azure, it becomes possible to add and remove resources as the workflow of processing processes grows or decreases, paying only for those resources that are currently needed. </li><li>  <b>Advanced diagnostic and monitoring tools.</b>  New functionality for monitoring and diagnosing running workflow instances uses the REST API and the workflow manager client.  System administrators are provided with a specialized set of tools, while clients can view data on the status and status of running workflows, flexible management of their configuration settings. </li><li>  <b>Fully declarative development of workflows.</b>  This new concept was first used on the SharePoint platform.  The main development tools for users of SharePoint Server 2013 are SharePoint Designer 2013, MS Visio 2013, MS InfoPath 2013. For developers, Visual Studio 2012/2013 provides a set of specialized project templates and a powerful toolkit for developing workflow actions.  The workflow actions developed in MS Visual Studio are oriented for later use in SharePoint Designer 2013. </li><li>  <b>Implementation in the form of web services.</b>  SharePoint Server 2013 workflow actions are invoked using loosely coupled web services that use a programming interface to interact with SharePoint.  It is based on the Windows Communication Foundation (WCF) messaging features and the use of REST requests.  Support for runtime, inbound and outbound communications coordinate all phases of workflow execution, ensuring integrity and reliability. </li></ol><br>  The following components of the SharePoint 2013 workflow architecture are discussed in more detail. <br><br><h3>  <b>SharePoint 2013 Workflow Platform Components</b> </h3><br><h4>  <b>Windows Workflow Foundation in a SharePoint Server 2013 environment</b> </h4><br>  <b>general characteristics</b> <br>  Windows Workflow Foundation (WF) is a Microsoft technology that provides support for the life cycle of workflows: definition, development, execution, and management.  (English workflow).  WF provides programming infrastructure, development tools, and execution of workflow-based applications. <br><br><img src="https://habrastorage.org/files/fad/65f/316/fad65f316f444344a26d878f3ba9b955.jpg"><br>  Figure 6. Windows Workflow Foundation architecture <br><br>  <b>Table 1. Main components of the Windows Workflow Foundation architecture</b> <br><table><tbody><tr><td>  <b>Component</b> </td><td>  <b>Description</b> </td></tr><tr><td>  Host process </td><td>  An application that includes the WF workflow runtime.  The host process provides support for runtime services. </td></tr><tr><td>  Act </td><td>  Unit of work or a separate step of a business process. </td></tr><tr><td>  The working process </td><td>  The sequence of actions used to implement the business process. </td></tr><tr><td>  Basic Action Library </td><td>  A set of workflow action patterns used in development and included in WF. </td></tr><tr><td>  Additional actions </td><td>  Workflow actions developed by programmers. </td></tr><tr><td>  Runtime environment </td><td>  Workflow instances are executed by the runtime.  It also controls the changing state of workflows and the interaction between them. </td></tr><tr><td>  Designers </td><td>  UI tools used for development.  Visual Studio includes a dedicated WF designer. </td></tr><tr><td>  Runtime services </td><td>  Services that provide placement and interaction between workflow components </td></tr></tbody></table><br>  Workflows WF is a structured collection of ‚Äúactivities‚Äù (eng. <i>Activities</i> ), each of which represents a functional component of a business process. <br><br><img src="https://habrastorage.org/files/bae/e4e/f35/baee4ef354544f60b7a0846c61c6f457.jpg"><br>  Figure 7. Sample Workflow Developer Dashboard for SharePoint 2013 in MS Visual Studio 2013 <br><br>  The SharePoint Server 2013 platform provides an additional set of development tools, greatly expanding the standard WF features: <br><ul><li> <b>A web browser,</b> such as Internet Explorer, Firefox, or Chrome, is a tool used to interact with SharePoint Server 2013 sites. For example, you can create lists and libraries, add items to them, associate workflow with them, run it for an individual item to check the status. </li><li>  <b>MS Visio 2013,</b> used to create diagrams using shapes and connectors.  It can be used to create workflows based on the SharePoint 2013 platform. Then the processes can be imported from MS Visio 2013 to SharePoint Designer 2013 and vice versa. </li><li>  <b>MS InfoPath 2013</b> - a tool designed to develop forms.  Using it, you can customize the forms that users will need to interact with the workflow. </li><li>  <b>SharePoint Designer 2013</b> is the primary means by which business users create workflow definitions and publish them, as in previous versions.  It is also used to package workflow definitions with or without associated SharePoint components (such as lists, libraries, content types, sites).  You can create custom workflow actions in Visual Studio and import them into SharePoint Designer 2013, where they are accessible from the workflow designer. </li><li>  <b>Development tools in Visual Studio</b> Action for use by Designer SharePoint Designer 2013. </li></ul><br><br><img src="https://habrastorage.org/files/a00/4ef/da0/a004efda089f4c2295902c8f1d457b80.jpg"><br>  Figure 8. Sample workflow actions in SharePoint Designer <br><br><img src="https://habrastorage.org/files/05e/7c6/440/05e7c644057a49a18cb158583d2f33bd.jpg"><br>  Figure 9. Fragment of the workflow in SharePoint Designer <br><br>  It is important to note the link between WF workflow actions and SharePoint Server 2013 actions available for selection in SharePoint Designer 2013 (SPD 2013).  WF workflow actions represent <b>basic managed objects</b> whose methods determine the workflow behavior. <br><br>  Workflow actions in SPD 2013 are a wrapper that encapsulates the basic actions of WF and represents them in an understandable form of SPD 2013. <br><br>  The creators of the workflows during development in SPD 2013 interact with the workflow activities, while the workflow execution module works based on the corresponding WF actions. <br><br>  <b>Types of workflows</b> <br>  WF creates two types of workflows: <br><ol><li>  Sequential workflows. </li><li>  Workflow finite state machine. </li></ol><br>  Sequential workflows (eng. Sequential workflow) follow a certain path.  It may include decision branches and loops or no end point, but the development process easily tracks the predictable path. <br><br>  Examples of sequential workflows running in a SharePoint Server 2013 environment: <br><ul><li>  When you add a document to the SharePoint library, the workflow adds a new task to the SharePoint task list. </li><li>  When editing a task, the workflow performs a task property check to determine if it is complete.  If execution is complete, the workflow also ends. </li></ul><br><br><img src="https://habrastorage.org/files/bc3/6fe/c90/bc36fec901614672b89cdde93cbe842d.jpg"><br>  Figure 10. An example of a sequential WF workflow in MS Visual Studio <br><br>  A state machine workflow (workflow) is a set of states, transitions and actions.  Actions are executed asynchronously, which means that they are not necessarily placed in a strict sequence, and can instead be activated by other actions and states.  One state is set as initial, then (if a certain event occurs), a transition to another occurs. <br><br>  A state machine can be set to determine the end of the workflow. <br><br><img src="https://habrastorage.org/files/a33/5db/75f/a335db75fa2b40098fe96081bca0fe50.jpg"><br>  Figure 11. Sample WF Workflow Process <br><br>  <b>SharePoint Server 2013</b> <br>  SharePoint Server 2013 provides a platform for workflows that model business processes related to documents, lists, content types, users, tasks, and SharePoint sites.  In addition, workflows, mappings, actions, and other metadata are stored and monitored in SharePoint 2013. <br><br>  <b>Workflow Manager Client</b> <br>  The <i>Workflow Manager Client client</i> provides the management of workflow definitions.  This is a stand-alone software component that, after installation in the system, interacts with SharePoint using common messaging infrastructure protocols via the service bus. <br><br>  <b>Workflow Services Application Proxy</b> <br>  The workflow manager client is represented in SharePoint 2013 as a <i>workflow service proxy</i> (Eng. <i>Workflow Service Application Proxy</i> ).  This component allows SharePoint to interact with the workflow manager server.  Server-to-server authentication is performed using OAuth. <br><br>  <b>Workflow Services Manager</b> <br>  All the new features of SharePoint 2013 workflows are implemented in the SharePoint object model through the workflow service manager, which includes deployment, instance, interaction, and messaging services. <br><br>  <b><i>Deployment Service</i></b> <br>  The deployment service provides the implementation of the functionality of publishing workflows and establishing associations between them and SharePoint objects. <br><br>  <b><i>Service instances</i></b> <br>  Instance service is used to access workflow instances for information and management.  For example, a user may cancel a workflow. <br><br>  <b><i>Interaction Service</i></b> <br>  The collaboration service is used to extract and launch instances of classic SharePoint 2010 workflows. It also supports two scenarios: <br><ol><li>  Your organization has old SharePoint 2010 workflows that need to be supported in a SharePoint 2013 environment. </li><li>  A SharePoint 2013 workflow has been developed, within which you need to ensure that actions that are only available in SharePoint 2010 are performed. </li></ol><br><br>  In both scenarios, the collaboration service supports the correct operation of the workflows themselves and the individual actions of SharePoint 2010 in a SharePoint 2013 environment, responsible for supporting the reconciliation process between the two environments. <br><br>  SharePoint Designer 2013 provides access to the new action ‚Äî the launch of the SharePoint 2010 workflow. From the WF point of view, it represents the sequence of sending messages between the manager and the SharePoint 2010 workflow host running on the SharePoint 2013 platform. The general sequence of actions is as follows: <br><ol><li>  Business Process Manager starts workflow (1).  The corresponding message is transmitted to the workflow service dispatcher (2). </li><li>  The Workflow Services Manager starts the workflow inside the SharePoint 2010 Workflow Host. </li><li>  The SharePoint 2010 workflow completion event or immediately after its launch (depending on the workflow properties) causes the corresponding message to be sent to the workflow manager (3). </li><li>  Through the event publisher (4) information about the completion of the SharePoint 2010 workflow is passed to the workflow manager (5). </li><li>  The overall interaction between the components of the SharePoint 2013 workflow platform is shown in the image below. </li></ol><br><br><img src="https://habrastorage.org/files/dd6/9e7/1ec/dd69e71ec3484ee48954e8706f8113e6.jpg"><br>  Figure 12. Overview of workflow platform component interactions when running SharePoint 2010 workflows <br><br><img src="https://habrastorage.org/files/cbd/235/fb6/cbd235fb68b845858cd501fb344c8fa0.jpg"><br>  Figure 13. Startup action of the SharePoint workflow in SharePoint Designer 2013 <br><br><img src="https://habrastorage.org/files/2e6/0e1/85d/2e60e185d5c646c9b208ec32028179a3.jpg"><br>  Figure 14. Startup options for SharePoint 2010 workflow in SharePoint Designer 2013 <br><br>  <b><i>Messaging service</i></b> <br>  Information about events related to SharePoint objects is sent to the workflow manager through a messaging service.  When SharePoint sends an event to a workflow, it is stored in the service bus database, and then delivered to the workflow manager.  He is responsible for storing information about the status of each of them and synchronizing this information with messages stored in the service bus database. <br><br>  The messaging service uses a publish / subscribe feature that allows multiple workflows to subscribe to the same event.  For example, there are 10 workflows awaiting data changes in a SharePoint list item.  If this event occurs, SharePoint will send only one message to the service bus, and it will be responsible for delivering this message to all 10 workflows that are subscribed to it.  In the classic SharePoint 2010 workflow model, the SharePoint platform will have to handle all 10 events, which leads to additional load on the farm servers. <br><br>  <b>Workflow Manager and Service Bus</b> <br>  SharePoint Server 2013 events that are related to the execution of a workflow, such as creating a list / library item, updating a list / library item, are sent to the workflow manager server via the maintenance bus.  For callback SharePoint, the workflow manager uses the SharePoint REST API. <br><br>  The image below shows an example of the interaction between the workflow manager and the service bus during the execution of a simple SharePoint 2013 workflow. <br><br><img src="https://habrastorage.org/files/4c4/e12/429/4c4e12429bbc4179984786d5083066b5.jpg"><br>  Figure 15. High-level SharePoint Server 2013 workflow model. Assign a task to a user <br><br><img src="https://habrastorage.org/files/747/6b2/d98/7476b2d9868a4629a4f035fc4d299dc9.jpg"><br>  Figure 16. High-level workflow model of SharePoint Server 2013. User execution of the task and saving the results <br><br>  The author - Lyubov Volkova </div><p>Source: <a href="https://habr.com/ru/post/266943/">https://habr.com/ru/post/266943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266933/index.html">Hone the skills of the console</a></li>
<li><a href="../266935/index.html">About safety UEFI, part zero and first</a></li>
<li><a href="../266937/index.html">Functional C #: Primitive obsession (primitive obsession)</a></li>
<li><a href="../266939/index.html">How to make friends HTML5 with mobile OS</a></li>
<li><a href="../266941/index.html">RailsClub 2015: Interview with Boris Goryachev</a></li>
<li><a href="../266945/index.html">Practical training in pentest laboratories. Part 2</a></li>
<li><a href="../266947/index.html">The evolution of trading terminals: Mobile trading in the era of touch interfaces</a></li>
<li><a href="../266949/index.html">Time to materialize: a contest for Material Design from Google</a></li>
<li><a href="../266951/index.html">Escene ES205 compact IP phone overview</a></li>
<li><a href="../266953/index.html">Digest of the game industry: August</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
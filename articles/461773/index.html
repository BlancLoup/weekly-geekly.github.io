<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Airtest IDE - a new way in testing automation of mobile games?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I want to tell you about a fairly new open-source tool for automated testing called Airtest . In the future I will make a few more articles with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Airtest IDE - a new way in testing automation of mobile games?</h1><div class="post__text post__text-html js-mediator-article"><p>  Today I want to tell you about a fairly new open-source tool for automated testing called <a href="http://airtest.netease.com/">Airtest</a> .  In the future I will make a few more articles with a detailed story about the individual elements of this toolkit and how to work with them, and now I have the goal of introducing you to it and giving a general idea of ‚Äã‚Äãit. </p><br><p>  AirTest IDE was developed by <a href="https://netease-na.com/">NetEase</a> and is designed for "hard-to-automate" applications, such as, for example, games.  Actually they are the main focus of the developers, although this does not stop using AirTest for any other applications. </p><br><p>  <a href="http://airtest.netease.com/">AirTest IDE</a> runs on Windows, MacOS X and Linux and contains 2 frameworks: AirTest and Poco.  This development was presented by Xin Liu at the <a href="https://www.youtube.com/watch%3Fv%3DlJGBDFgOulY">Android Game Developer Summit 2018</a> .  Python 2.7 and Python 3.3+ are used to write tests.  Such important things as support for running tests immediately on a large number of devices, open source code and free application, as well as easy written tests - these are the advantages that are highlighted by developers.  The application can be used on both Windows and MacOS and allows you to automate applications from the following OS: Windows, iOS, Android. </p><br><p>  <a href="https://github.com/AirtestProject/">The AirTest Project</a> on GitHub contains 4 projects: <a href="https://github.com/AirtestProject/Airtest">Airtest</a> , <a href="https://github.com/AirtestProject/Poco">Poco</a> , <a href="https://github.com/AirtestProject/iOS-Tagent">iOS-Tangent</a> , <a href="https://github.com/AirtestProject/multi-device-runner">multi-device-runner</a> . <br>  It is also worth mentioning that NetEase provides its physical device farm for automated testing called <a href="https://airlab.163.com/help-center/intro">AirLab</a> . </p><br><img src="https://habrastorage.org/webt/go/fi/bj/gofibjhnktjohm0yb4m6jczbrfg.png" alt="image"><a name="habracut"></a><br><p>  Briefly about frameworks. </p><br><p>  <strong>Airtest</strong> is an image recognition cross-platform framework for mobile games and applications based on <a href="https://en.wikipedia.org/wiki/Thresholding_(image_processing)">image thersholding</a> .  AirTest IDE allows you to interact with the application using the following commands: <br>  touch, wait, swipe, exists, text, keyevent, snapshot, sleep, assert_exists, assert_not_exists, assert_equal, assert_not_equal.  I will talk about the features and parameters of the commands in a separate article devoted to a more detailed study of AirTest and Poco frames.  Now it‚Äôs worth mentioning that the keyevent command is responsible for ‚Äúpressing the physical buttons‚Äù of the device, such as Home, Power, Menu, Back.  When using most commands, the user is prompted to highlight a part of the screen of the working device, a screenshot of which will be used for the corresponding command (touch, swipe, assert, etc.). </p><br><img src="https://habrastorage.org/webt/cm/ad/ko/cmadko_9kom-sbotvmbodeawito.gif" alt="image"><br><p>  The advantages of Airtest that I can highlight after work: </p><br><ol><li>  Fast and clear code writing.  Everything is done, in practice, in automatic mode, you only need to choose the necessary parameters, adjust the timings and be careful with the choice of image. </li><li>  Accurate definition of the picture that is used in the code on the active working device.  Plus, the report indicates the percentage of coincidence (comparison) of the image used in the code and the image from the screen of the working device. </li><li>  Speaking of reports.  After each launch, you can create a report using the keyboard shortcut Ctrl \ Cmd + L.  A convenient report provides information such as: types of assert, their results, and also each test step is highlighted in a separate sub-section with information about where AirTest clicked, where it expected a picture, percentage of matching pictures, etc. </li><li>  Once you have written the code, you can use it on any device. </li><li>  Multithreading: connect multiple test devices and run them in parallel. </li></ol><br><p>  Cons of Airtest, which I can highlight after work: </p><br><ol><li>  If in the process there are elements that visually look the same, for example sliders, buttons, etc., then with a high probability AirTest will not understand which control you want to use.  This will be indicated in the corresponding error.  But this minus is easily dispensed with the help of the second framework (Poco), which will be discussed below. </li><li>  Comparison of images (from the code and the actual ones on the screen) occurs in black and white.  It is worth considering if you are important, for example, the visual appearance of the character (his color, different clothes, etc.).  If the characters are visually different, but they are displayed on the screen in the same way (same poses, etc.), then the check will most likely succeed.  The image recognition options have an ‚Äúrgb‚Äù checkmark that you can use, but it doesn't work very well if you have a small image. </li><li>  You cannot ‚Äúfreeze‚Äù the screen while using the application to accurately take the screenshots you need.  From time to time you need to "catch" the frame you need. </li><li>  Because  application in open beta, you may encounter various annoying errors or inaccuracies, for example, such as the inability to resize a window with a built-in application on Windows.  Authors are now updating the AirTest IDE once every few months, and I hope that such oversights will be fixed soon. </li></ol><br><p>  <strong>Poco</strong> is a universal framework for automating the user interface (UI), which provides powerful APIs independent of the (game) engine.  Those, in turn, retrieve the hierarchy of the UI elements at runtime.  Thanks to this, the user can "reach" the entire element hierarchy on the current page in a few clicks to the element he needs, etc.  Also, this framework allows you to ‚Äúfreeze‚Äù the current screen for writing code based on the hierarchy of elements of the current window.  Poco is designed to help AirTest understand what kind of UI element the tests are talking about, but no one bothers you writing all the tests using only this framework. <br>  All tests are written in Python.  Command implementations can be found in the corresponding APIs: <a href="https://airtest.readthedocs.io/en/latest/all_module/airtest.core.api.html">airtest.core.api module</a> , <a href="https://airtest.readthedocs.io/en/latest/all_module/airtest.core.android.html">airtest.core.android package</a> , <a href="https://airtest.readthedocs.io/en/latest/all_module/airtest.core.ios.html">airtest.core.ios package</a> , <a href="https://airtest.readthedocs.io/en/latest/all_module/airtest.core.win.html">airtest.core.win package</a> </p><br><p><img src="https://habrastorage.org/webt/fl/-j/m-/fl-jm-i8pxvlejgwf_a2wcj__fy.gif" alt="image"></p><br><p>  Poco advantages that I can highlight after work: </p><br><ol><li>  There is support for a number of important game engines, including Unity3D, cocos2dx-js, cocos2dx-lua, NetEase internal engines, as well as support for native Android / iOS applications.  If you want to use an engine that is not on the list of "supported" ones, then you can write your own by following the <a href="https://poco.readthedocs.io/en/latest/source/doc/implementation_guide.html">appropriate instructions</a> .  In the <a href="https://poco.readthedocs.io/en/latest/source/doc/integration.html">official documentation</a> there is a mention of the Unreal Engine, but so far, everything is limited to the phrase "Coming soon". </li><li>  The hierarchy of UI elements on the screen returns in real time. </li><li>  Quick start and run on tests. </li><li>  As in AirTest, I wrote the code once - use it everywhere.  Python 2.7 and 3.3+ support </li><li>  It is possible to connect any external libraries to your project </li><li>  Judging by the documentation, there is support for GPS, accelerometer and gyro sensors, as well as support for portrait and landscape display modes. </li></ol><br><p>  Poco cons that I can highlight after work: </p><br><ol><li>  During the work on Windows 7 I did not find fundamental problems.  which would interfere with full-fledged work, but they, at the moment, are when working with Windows 10. The main thing is incorrect movement of objects (swipe command) in some cases.  For example, I indicate the object to be moved and the coordinates of the second object, which is the final point.  In these rare cases, Poco misses the final location, but the reports show the correct displacement data (vector) and the step is considered successful. </li><li>  When you select some elements with large layouts (layout), the selection may overlap the Poco Assistant window and you will not be able to select other elements until the selection is removed from the current one.  To remove the selection, you can use the keyboard shortcut Alt + F4 </li></ol><br><p>  To complete the picture, it is worth mentioning that Airtest IDE has its own <a href="http://airtest.netease.com/docs/en/1_online_help/selenium_plugin.html"><strong>Selenium plug-in</strong></a> , with which you can automate your web project, but using only a Chrome browser.  The rest, at the moment, are not supported.  Personally, I have not worked with him yet, so I can‚Äôt say about his work, but it was impossible to miss him in this brief description. </p><br><p><img src="https://habrastorage.org/webt/dy/vu/fq/dyvufqnt6-ayoctow3pff4xi0s0.png" alt="image"></p><br><p> As a result, I would say that AirTest IDE is a very promising development that is designed to automate the UI in games, but, at the moment, is not suitable for testing the game process as such.  If you have a lot of UI elements and / or many devices to check and you do not want to spend a lot of man-hours, then this IDE may well become your lifesaver.  To start writing simple tests, you do not need deep knowledge in automation and programming, just have a basic understanding of working with Python.  Of course, this way you will not go far and you will have to learn this programming language, but to start and understand how realistically this program suits you, it‚Äôs enough for your eyes.  The only thing that is frustrating now is various annoying errors associated with, for example, the inability to resize a window with a working device (Windows application) after embedding it, overlapping a large selected object of the main program interface, etc., but it‚Äôs quite possible come to terms, especially considering the fact that the application is in Beta stage. </p><br><p><img src="https://habrastorage.org/webt/ej/bg/qg/ejbgqgnierz11rcdas3evm9bzoy.png" alt="image"></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/461773/">https://habr.com/ru/post/461773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461765/index.html">We cross k8s with Kafka, save containers, escape from trash in Ansible: top 10 reports of DevOops 2018</a></li>
<li><a href="../461767/index.html">SVLAB Search Search Engine Algorithm</a></li>
<li><a href="../461769/index.html">How I made (almost) useless Javascript webcam streaming</a></li>
<li><a href="../46177/index.html">Online Karma offline</a></li>
<li><a href="../461771/index.html">Say no to silence: from the nursery to the office</a></li>
<li><a href="../461775/index.html">3 cases for using Celery in a Django application</a></li>
<li><a href="../461779/index.html">80% of your company data is not available to you. What to do with it?</a></li>
<li><a href="../46178/index.html">Ingraham - the systemist in the style of the 50s</a></li>
<li><a href="../461785/index.html">Disadvantages of RISC-V</a></li>
<li><a href="../461787/index.html">Android text display</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ServerSide speed test</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, JavaScript engine performance tests have become very popular, but they mainly concern the Client Side JavaScript. I was interested in the qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ServerSide speed test</h1><div class="post__text post__text-html js-mediator-article">  Recently, JavaScript engine performance tests have become very popular, but they mainly concern the Client Side JavaScript.  I was interested in the question: how are things with Server Side?  But testing only Google V8 and SpiderMonkey would be uninteresting.  It is clear that the results will be similar to the Client Side - the engines are the same.  Therefore, it was necessary to add to the tests something that is not available in the browser, but it is quite common, as well as try to use tests specific to server tasks.  This missing test object was the JScript compiler from the .Net Framework.  However, the preliminary test results came as a surprise to me, and I decided to add a fourth player from the same team. <br><br><a name="habracut"></a>  . <br><br>  First of all, it should be said that I did not set the goal of a 100% objective test.  The goal was to test the engines that are available at arm's length (5 minutes of googling) and in the environment that is available to me.  And this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Windows XP SP3 on AMD Sempron 2800+ 1.6GHz 1Gb RAM <br>  Windows 7 x64 on Intel Core i5 650 3.2GHz 4Gb RAM <br><br>  Despite the simplicity of the tasks, the result was stretched for several days. <br><br><h1>  Testing method </h1><br>  A simple testing methodology was chosen.  Each test is a function that runs on a loop a large number of times.  The runtime of the entire cycle is measured.  The average execution time for each iteration is taken as an evaluation criterion.  I did not follow the principles of statistical accuracy - run the tests several times in a row and calculate the average deviations.  This approach, in my opinion, requires a deeper analysis than just running tests several times and calculating the mean deviations. <br>  In order to estimate how long the cycle itself takes in the test, the first test will be an empty function.  In addition, in the light of recent trends that are related to the technology of removing dead code, I wanted to somehow take this factor into account in the tests.  It did not occur to me to do anything better than to set the requirement for the functions under test to return a certain result, which is based on what a particular function does.  Thus, I hope, tricky optimization techniques will have no reason to throw out the ‚Äúnecessary‚Äù code.  Naturally, tricky optimization can throw out the code on the grounds that the result of the function is not used further.  Therefore, I added an additional parameter to each tested function - a function for aggregating results.  The aggregate result itself will also be the result of the test.  To assess the impact of the aggregation itself on the result of the cycle, I ran it again without aggregation.  It also helps to subjectively assess the presence of optimization for eliminating dead code. <br>  For the convenience of running tests and processing the results, I wrote a small framework.  In addition, for a uniform output of test results for each engine, its own adapter module was used.  The results were formatted in html, output to the console and accumulated in a single file through the redirection of threads. <br>  To run the entire test a small set of CMD files was used. <br><br><h2>  Players </h2><br>  The first player is a promising and increasingly popular Google V8 engine, which works in Google Chrome, and is presented in the test in the face of the equally promising <a href="http://nodejs.org/">NodeJS</a> .  I was sure that the test results would not disappoint me. <br>  The second player is a fairly fast engine with a rich history - SpiderMonkey, which works in FireFox, in tests it worked on behalf of <a href="http://www.jsdb.org/">JSDB</a> .  Here, I also did not expect any significant differences from the Client Side tests. <br>  The third player is the Microsoft JavaScript compiler.  I was wondering what kind of gains the use of the compiler gives compared to interpreters. <br>  The fourth player - for a more complete comparison, it would be good to use another interpreter from Microsoft. <br><br>  In the case of interpreter testing, I simply merged all the test files, frameworks and adapters into one file with the copy command, the resulting file fed to the interpreter.  For NodeJS it is nodejs.exe, for JSDB it is jsdb.exe, for the interpreter from Microsoft it is Windows Script Host in the face of the utility cscript.exe. <br>  For the compiler, all the files were fed jsc.exe from the corresponding version of the .Net Framework and the resulting exe file was launched. <br><br>  The set of players on each of the platforms was different. <br><br><h2>  Windows xp </h2><br><ol><li>  NodeJS v 0.2.4 </li><li>  JSDB 1.8.0.3 </li><li>  Microsoft JScript 5.6.8825 interpreter </li><li>  Microsoft JScript 5.7.16599 interpreter </li><li>  Microsoft JScript 5.8.18702 interpreter </li><li>  JScript compiler from Microsoft .NET v.1.1.4322.2032 </li><li>  JScript compiler from Microsoft .NET v.2.0.50727.3053 </li><li>  JScript compiler from Microsoft .NET v.4.0.30319.1 </li></ol><br><br><h2>  Windows 7 </h2><br><ol><li>  NodeJS v 0.2.4 </li><li>  JSDB 1.8.0.3 </li><li>  Microsoft JScript 5.8.16475 interpreter </li><li>  Microsoft JScript 9.0.16406 interpreter </li><li>  JScript compiler from Microsoft .NET v.4.0.30319.1 </li></ol><br><br>  Yes.  I was not mistaken.  Microsoft JScript 9.0.16406 is the very engine that is used in IE9.  I had to conjure a little to make it work in Windows Script Host without installing IE9 itself.  I do not even know whether it will be available in WSH after installation, since the library in the installation package is called differently and next to it is the old IE 8 engine, with the normal name. <br>  Under Windows 7, the compiler from .NET v.2.0 was still available to me, but for some reason the test under it fell out with an error, details later. <br>  I used different versions of Microsoft's engines to see if there is any progress in speed from version to version and which one.  They lay under my feet.  Why not include them in the test? <br><br><h1>  Tests </h1><br><br>  Further, for each test I will give the test function and the results for the average cycle time for all engines.  Then all the test results at the end. <br><br><h2>  Empty function </h2><br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">tests.push({ <br> name: <font color="#A31515">'Empty test'</font> , <br> func: <font color="#0000ff">function</font> (){ <font color="#0000ff">return</font> 1;}, <br> reduce: <font color="#0000ff">function</font> (r,x){ <font color="#0000ff">return</font> r+x;}, <br> start: 0, <br> loops: 1000000 <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  here func is the function under test, reduce is the aggregator function, start is the starting value of the aggregator, loops is the number of cycles in the test. <br><br>  Results of an empty test on Windows XP (less is better) <br><br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/09/b7/09b799956b92ce55186a2fc383bd785a.png"></a> <br><br>  Results of an empty test on Windows 7 (less is better) <br><br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/49/a8/49a85ace858f014ddc40c5d89c08d398.png"></a> <br><br><h2>  String concatenation </h2><br>  Typical string operation test. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> str1 = <font color="#A31515">'Hello '</font> , <br> str2 = <font color="#A31515">'world '</font> , <br> str3 = <font color="#A31515">'test '</font> , <br> i = 0; <br> <br> tests.push({ <br> name: <font color="#A31515">'String Concat'</font> , <br> func: <font color="#0000ff">function</font> (){ <br> i++; <br> <font color="#0000ff">return</font> str1+str2+str3+ <font color="#A31515">' '</font> +i; <br> }, <br> reduce: <font color="#0000ff">function</font> (r,x){ <font color="#0000ff">return</font> r+x.length;}, <br> start: 0, <br> loops: 100000 <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  String Concat results on Windows XP (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/1a/c2/1ac2a47c69627bce46c0c08932c992bf.png"></a> <br><br>  String Concat results on Windows 7 (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/ef/0c/ef0cb325f34a17409b96692e17639b20.png"></a> <br><br><h2>  Filling the template with data </h2><br><br>  In my opinion typical operation for the server. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> template = <font color="#A31515">'&lt;html&gt;&lt;title&gt;{title}&lt;/title&gt;&lt;body&gt;{main}&lt;/body&gt;&lt;/html&gt;'</font> ; <br> <br> <font color="#0000ff">function</font> ApplyTemplate(template, view){ <br> <font color="#0000ff">return</font> template.replace(/{(\w+)}/g, <font color="#0000ff">function</font> (p,n){ <br> <font color="#0000ff">if</font> (n <font color="#0000ff">in</font> view) <font color="#0000ff">return</font> view[n]; <br> <font color="#0000ff">else</font> <font color="#0000ff">return</font> <font color="#A31515">'_ERROR_NO_VALUE_'</font> +n; <br> }); <br> } <br> <br> <font color="#0000ff">var</font> views = [ <br> { <br> title: <font color="#A31515">'Page One'</font> , <br> main: <font color="#A31515">'Lorem ipsum dolor sit amet, mauris libero velit, '</font> + <br> <font color="#A31515">'vitae pellentesque aliquam, cursus magnis velit, non '</font> + <br> <font color="#A31515">'viverra sed nibh ac fringilla vel, accumsan quis '</font> + <br> <font color="#A31515">'elementum fermentum ullamcorper. '</font> + <br> <font color="#008000">/* ....   */</font> <br> <font color="#A31515">'lectus libero at etiam morbi, et orci eros ut sit et.'</font> <br> }, <br> { <br> title: <font color="#A31515">'Page two'</font> , <br> main: <font color="#A31515">'Short page'</font> <br> } <br> ]; <br> <br> <font color="#0000ff">var</font> counter = 0; <br> tests.push({ <br> name: <font color="#A31515">'Apply template'</font> , <br> func: <font color="#0000ff">function</font> (){ <br> counter++; <br> <font color="#0000ff">return</font> ApplyTemplate(template, views[counter%2]); <br> }, <br> reduce: <font color="#0000ff">function</font> (r,x){ <font color="#0000ff">return</font> r+x.length;}, <br> start: 0, <br> loops: 10000 <br> });</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Results of the Apply template on Windows XP (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/a7/2f/a72f513482f400480078434e03abb0f9.png"></a> <br><br>  Results of the Apply template on Windows 7 (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/95/30/95306cc605530a69b02bf16e76e37f1e.png"></a> <br><br>  I took the following tests from <a href="http://v8.googlecode.com/svn/data/benchmarks/v6/run.html">Google V8 Benchmark Suite version 6</a> . <br><br>  Unfortunately, it turned out that these tests are full of errors.  The errors I pointed out to the JScript compiler.  Part of the error was due to incomplete JScript and JavaScript compatibility.  The piece really was a mistake.  I took 3 tests that created the least problems.  Adapted a little for my framework, corrected errors.  It would be possible to take tests from Sunspider, but, unfortunately, I did not find them in the form of convenient js source.  The version presented on the site with the test requires processing by the parser, since it is embedded in the html. <br>  I will not give here the source of these tests - only the results. <br><br><h2>  V8 Benchmark Suite Richards </h2><br>  As stated on the site, simulates the operation of the OS kernel. <br><br>  V8 BS - Richards results on Windows XP (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/bd/27/bd27fa01b7d9592744f76fa291fbfac3.png"></a> <br><br>  V8 BS - Richards results on Windows 7 (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/f3/a0/f3a05cd1977370217bcc4a75705e7d6e.png"></a> <br><br><br><h2>  V8 Benchmark Suite Encrypt </h2><br>  Encoding data. <br><br>  Results V8 BS - Encrypt on Windows XP (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/b7/82/b782a931e0a26b22f42b923d926d32b2.png"></a> <br><br>  Results V8 BS - Encrypt on Windows 7 (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/78/18/78186be885f2d6d4544d6f88b2beb704.png"></a> <br><br><h2>  V8 Benchmark Suite Decrypt </h2><br>  Decoding data. <br><br>  Results V8 BS - Decrypt on Windows XP (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/4d/9d/4d9d72ab0c014b13949f4a018b988a81.png"></a> <br><br>  Results V8 BS - Decrypt on Windows 7 (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/30/32/3032a695f6e9cd856c40fdcaa35e8369.png"></a> <br><br><h2>  V8 Benchmark Suite RegExp </h2><br>  Regular expressions extracted from 50 popular sites on the Internet. <br><br>  Results V8 BS - RegExp on Windows XP (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/d6/a2/d6a249232fa6c70d2a0127b7058fb430.png"></a> <br><br>  Results V8 BS - RegExp on Windows 7 (less is better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/05/95/059519197b641731d222343bd4f7ba85.png"></a> <br><br>  Complete results table on Windows XP. <br>  NodeJS v 0.2.4 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  21 </td><td>  0.000021 </td><td>  44 </td><td>  0.000044 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  44 </td><td>  0.00044 </td><td>  47 </td><td>  0.00047 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  32 </td><td>  0.0032 </td><td>  28 </td><td>  0.0028 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  1000 </td><td>  4879 </td><td>  4.879 </td><td>  4702 </td><td>  4.702 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  100 </td><td>  345 </td><td>  3.45 </td><td>  356 </td><td>  3.56 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  100 </td><td>  7496 </td><td>  74.96 </td><td>  7514 </td><td>  75.14 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  100 </td><td>  11620 </td><td>  116.2 </td><td>  11913 </td><td>  119.13 </td><td>  0 </td></tr></tbody></table><br>  Microsoft .NET v.1.1.4322.2032 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  1891 </td><td>  0.001891 </td><td>  4094 </td><td>  0.004094 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  344 </td><td>  0.00344 </td><td>  859 </td><td>  0.00859 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  532 </td><td>  0.0532 </td><td>  609 </td><td>  0.0609 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  25 </td><td>  9266 </td><td>  370.64 </td><td>  9390 </td><td>  375.6 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  2875 </td><td>  287.5 </td><td>  3062 </td><td>  306.2 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  five </td><td>  33657 </td><td>  6731.4 </td><td>  32078 </td><td>  6415.6 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  32296 </td><td>  3229.6 </td><td>  33219 </td><td>  3321.9 </td><td>  0 </td></tr></tbody></table><br>  Microsoft .NET v.2.0.50727.3053 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  3328 </td><td>  0.003328 </td><td>  8578 </td><td>  0.008578 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  515 </td><td>  0.00515 </td><td>  1297 </td><td>  0.01297 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  547 </td><td>  0.0547 </td><td>  657 </td><td>  0.0657 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  25 </td><td>  9703 </td><td>  388.12 </td><td>  9859 </td><td>  394.36 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  2531 </td><td>  253.1 </td><td>  2875 </td><td>  287.5 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  five </td><td>  25344 </td><td>  5068.8 </td><td>  25047 </td><td>  5009.4 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  29032 </td><td>  2903.2 </td><td>  29234 </td><td>  2923.4 </td><td>  0 </td></tr></tbody></table><br>  Microsoft .NET v.4.0.30319.1 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  2188 </td><td>  0.002188 </td><td>  5282 </td><td>  0.005282 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  437 </td><td>  0.00437 </td><td>  1125 </td><td>  0.01125 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  500 </td><td>  0.05 </td><td>  610 </td><td>  0.061 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  25 </td><td>  9812 </td><td>  392.48 </td><td>  10031 </td><td>  401.24 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  2719 </td><td>  271.9 </td><td>  3469 </td><td>  346.9 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  five </td><td>  28140 </td><td>  5628 </td><td>  28297 </td><td>  5659.4 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  34437 </td><td>  3443.7 </td><td>  33016 </td><td>  3301.6 </td><td>  0 </td></tr></tbody></table><br>  JSDB 1.8.0.3 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  343 </td><td>  0.000343 </td><td>  719 </td><td>  0.000719 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  703 </td><td>  0.00703 </td><td>  547 </td><td>  0.00547 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  383 </td><td>  0.0383 </td><td>  233 </td><td>  0.0233 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  1000 </td><td>  48319 </td><td>  48.319 </td><td>  49948 </td><td>  49.948 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  905 </td><td>  90.5 </td><td>  925 </td><td>  92.5 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  16571 </td><td>  1657.1 </td><td>  16475 </td><td>  1647.5 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  15968 </td><td>  1596.8 </td><td>  13636 </td><td>  1363.6 </td><td>  0 </td></tr></tbody></table><br>  Microsoft JScript 5.6.8825 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  2578 </td><td>  0.002578 </td><td>  5812 </td><td>  0.005812 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  4531 </td><td>  0.04531 </td><td>  4844 </td><td>  0.04844 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  1344 </td><td>  0.1344 </td><td>  1375 </td><td>  0.1375 </td><td>  410000 </td></tr><tr><td>  V8 BS - Richards </td><td>  100 </td><td>  18484 </td><td>  184.84 </td><td>  18422 </td><td>  184.22 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  1813 </td><td>  181.3 </td><td>  1797 </td><td>  179.7 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  32500 </td><td>  3250 </td><td>  32187 </td><td>  3218.7 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  37938 </td><td>  3793.8 </td><td>  37547 </td><td>  3754.7 </td><td>  0 </td></tr></tbody></table><br>  Microsoft JScript 5.7.16599 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  4235 </td><td>  0.004235 </td><td>  6562 </td><td>  0.006562 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  1625 </td><td>  0.01625 </td><td>  1969 </td><td>  0.01969 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  562 </td><td>  0.0562 </td><td>  594 </td><td>  0.0594 </td><td>  410000 </td></tr><tr><td>  V8 BS - Richards </td><td>  100 </td><td>  22328 </td><td>  223.28 </td><td>  22625 </td><td>  226.25 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  1797 </td><td>  179.7 </td><td>  1813 </td><td>  181.3 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  33953 </td><td>  3395.3 </td><td>  32219 </td><td>  3221.9 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  27813 </td><td>  2781.3 </td><td>  29609 </td><td>  2960.9 </td><td>  0 </td></tr></tbody></table><br>  Microsoft JScript 5.8.18702 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  1171 </td><td>  0.001171 </td><td>  1532 </td><td>  0.001532 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  844 </td><td>  0.00844 </td><td>  1235 </td><td>  0.01235 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  359 </td><td>  0.0359 </td><td>  359 </td><td>  0.0359 </td><td>  410000 </td></tr><tr><td>  V8 BS - Richards </td><td>  100 </td><td>  11906 </td><td>  119.06 </td><td>  12094 </td><td>  120.94 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  1610 </td><td>  161 </td><td>  1578 </td><td>  157.8 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  26875 </td><td>  2687.5 </td><td>  27281 </td><td>  2728.1 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  22781 </td><td>  2278.1 </td><td>  22391 </td><td>  2239.1 </td><td>  0 </td></tr></tbody></table><br><br><br>  Full results table for Windows 7. <br>  NodeJS v 0.2.4 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  12 </td><td>  0.000012 </td><td>  14 </td><td>  0.000014 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  17 </td><td>  0.00017 </td><td>  13 </td><td>  0.00013 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  9 </td><td>  0.0009 </td><td>  eleven </td><td>  0.0011 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  1000 </td><td>  1640 </td><td>  1.64 </td><td>  1749 </td><td>  1.749 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  100 </td><td>  120 </td><td>  1.2 </td><td>  128 </td><td>  1.28 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  100 </td><td>  2570 </td><td>  25.7 </td><td>  2573 </td><td>  25.73 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  100 </td><td>  3996 </td><td>  39.96 </td><td>  3996 </td><td>  39.96 </td><td>  0 </td></tr></tbody></table><br>  JSDB 1.8.0.3 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  89 </td><td>  0.000089 </td><td>  221 </td><td>  0.000221 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  177 </td><td>  0.00177 </td><td>  167 </td><td>  0.00167 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  33 </td><td>  0.0033 </td><td>  33 </td><td>  0.0033 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  1000 </td><td>  17738 </td><td>  17.738 </td><td>  17780 </td><td>  17.78 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  272 </td><td>  27.2 </td><td>  276 </td><td>  27.6 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  5095 </td><td>  509.5 </td><td>  5103 </td><td>  510.3 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  3454 </td><td>  345.4 </td><td>  3499 </td><td>  349.9 </td><td>  0 </td></tr></tbody></table><br>  Microsoft .NET v.4.0.30319.1 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  574 </td><td>  0.000574 </td><td>  1344 </td><td>  0.001344 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  149 </td><td>  0.00149 </td><td>  334 </td><td>  0.00334 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  140 </td><td>  0.014 </td><td>  281 </td><td>  0.0281 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  25 </td><td>  2268 </td><td>  90.72 </td><td>  2576 </td><td>  103.04 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  471 </td><td>  47.1 </td><td>  2813 </td><td>  281.3 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  five </td><td>  4908 </td><td>  981.6 </td><td>  5018 </td><td>  1003.6 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  8762 </td><td>  876.2 </td><td>  8805 </td><td>  880.5 </td><td>  0 </td></tr></tbody></table><br>  Microsoft .NET v.4.0.30319.1 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  516 </td><td>  0.000516 </td><td>  1293 </td><td>  0.001293 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  118 </td><td>  0.00118 </td><td>  273 </td><td>  0.00273 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  136 </td><td>  0.0136 </td><td>  301 </td><td>  0.0301 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  25 </td><td>  2188 </td><td>  87.52 </td><td>  2477 </td><td>  99.08 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  470 </td><td>  47 </td><td>  3000 </td><td>  300 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  five </td><td>  4831 </td><td>  966.2 </td><td>  5049 </td><td>  1009.8 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  8704 </td><td>  870.4 </td><td>  8826 </td><td>  882.6 </td><td>  0 </td></tr></tbody></table><br>  Microsoft JScript 5.8.16475 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  244 </td><td>  0.000244 </td><td>  502 </td><td>  0.000502 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  168 </td><td>  0.00168 </td><td>  224 </td><td>  0.00224 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  90 </td><td>  0.009 </td><td>  95 </td><td>  0.0095 </td><td>  410000 </td></tr><tr><td>  V8 BS - Richards </td><td>  100 </td><td>  4391 </td><td>  43.91 </td><td>  4400 </td><td>  44 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  611 </td><td>  61.1 </td><td>  619 </td><td>  61.9 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  10502 </td><td>  1050.2 </td><td>  10512 </td><td>  1051.2 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  4768 </td><td>  476.8 </td><td>  4772 </td><td>  477.2 </td><td>  0 </td></tr></tbody></table><br>  Microsoft JScript 9.0.16406 <br><table><tbody><tr><th>  Name </th><th>  Loops </th><th>  Time </th><th>  Avg </th><th>  Time wr </th><th>  Avg wr </th><th>  Res </th></tr><tr><td>  Empty test </td><td>  1,000,000 </td><td>  41 </td><td>  0.000041 </td><td>  82 </td><td>  0.000082 </td><td>  1,000,000 </td></tr><tr><td>  String concat </td><td>  100,000 </td><td>  38 </td><td>  0.00038 </td><td>  39 </td><td>  0.00039 </td><td>  2288895 </td></tr><tr><td>  Apply template </td><td>  10,000 </td><td>  18 </td><td>  0.0018 </td><td>  17 </td><td>  0.0017 </td><td>  590000 </td></tr><tr><td>  V8 BS - Richards </td><td>  100 </td><td>  166 </td><td>  1.66 </td><td>  166 </td><td>  1.66 </td><td>  0 </td></tr><tr><td>  V8 BS - Encrypt </td><td>  ten </td><td>  15 </td><td>  1.5 </td><td>  37 </td><td>  3.7 </td><td>  0 </td></tr><tr><td>  V8 BS - Decrypt </td><td>  ten </td><td>  253 </td><td>  25.3 </td><td>  246 </td><td>  24.6 </td><td>  0 </td></tr><tr><td>  V8 BS - Regexp </td><td>  ten </td><td>  3175 </td><td>  317.5 </td><td>  3188 </td><td>  318.8 </td><td>  0 </td></tr></tbody></table><br><br><h1>  findings </h1><br>  The .NET compiler (more precisely, the results of its work) was the slowest.  Either I am doing something wrong, or he is simply not good for anything.  The interpreter from Microsoft versions less than the 9th failed the test for using the template - the result is different from the others.  A closer look revealed that there are different assignments to the parameters of the callback function for replace. <br>  Under Windows 7, it was not possible to test the version of the compiler from the .NET Framework 2.0, and version 4.0 behaved no less strange.  The test worked for 20 minutes.  Version 2.0 crashed with an error.  For both versions, the test ate up to 6 GB of memory.  Why did the tests themselves show not such disastrous times?  A closer examination of the problem revealed a strange feature of the compiler for Windows 7 x64: the problems were created by the V8 BS test - Regexp.  And the compiled program started to devour the memory even before the beginning of the execution of my code.  It seems that .Net somehow initializes regular expressions, which are abundant in this test, even before the code is executed.  Moreover, problems are observed if regular expressions are in a function that creates a closure. <br>  My final conclusion is: the JScript compiler from the .NET Framework is good for nothing, except for testing the code for compilation errors.  It also became interesting for me to test how C # will differ on similar tasks.  However, the ‚Äúhigh-speed‚Äù failure of JScript .NET starts to clear up if you look at the stack trace when displaying error messages.  I have not seen such a large number of wrappers on simple calls. <br>  However, the new interpreter from Microsoft JScript 9.0 is quite competitive, it is easy to extend it with its classes through ActiveScripting.  The choice of the version seems interesting.  Why after version 5.8, which was used in IE8, did version 9.0 suddenly come out?  However, after the official release, everything can change. <br>  The leader in terms of Google V8 is NodeJS, but JScript 9.0 comes on the heels.  It seems to me that the final choice can be safely made not only by the criterion of speed, but by the sum of factors.  Including on convenience of expansion, debugging, integration with the platform. <br><br>  And in the end - nothing meaningful, purely illustrative diagram.  I just took the ratio of NodeJS time to the time of each test and averaged over the tests. <br><br>  Rating engines (more - better) <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/e5/4a/e54a45b012bdaaaa5ac6442ebb80ec11.png"></a> <br><br>  References: <br><br>  <a href="http://nodejs.org/">Nodejs</a> <br>  <a href="http://www.jsdb.org/">Jsdb</a> <br>  <a href="http://v8.googlecode.com/svn/data/benchmarks/v6/run.html">Google V8 Benchmark Suite version 6</a> <br>  <a href="http://msdn.microsoft.com/en-us/library/9bbdkx3k%2528v%3DVS.85%2529.aspx">Microsoft Windows Script Host</a> <br>  <a href="http://msdn.microsoft.com/en-us/library/72bd815a%2528v%3DVS.100%2529.aspx">Microsoft JScript</a> <br></div><p>Source: <a href="https://habr.com/ru/post/108760/">https://habr.com/ru/post/108760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108751/index.html">What's inside? MacPro 2009 Mini video review</a></li>
<li><a href="../108752/index.html">The answer to the post "GPU help?" // Philosophical reflections on the topic of computing</a></li>
<li><a href="../108753/index.html">Script engine .NET / Mono. The Manifesto of the Multilingual Web</a></li>
<li><a href="../108754/index.html">Empire Strikes Back 2</a></li>
<li><a href="../108755/index.html">Photo editor on html5</a></li>
<li><a href="../108762/index.html">The utility for working with screenshots Photofile Clip Client</a></li>
<li><a href="../108763/index.html">Large traffic flows and Linux: interrupts, router and NAT server</a></li>
<li><a href="../108764/index.html">Linux basics from the founder of Gentoo. Part 3 (1/4): Documentation</a></li>
<li><a href="../108768/index.html">The more we write about our events, the more often we hear - and where is the result?</a></li>
<li><a href="../108770/index.html">TeamViewer for Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
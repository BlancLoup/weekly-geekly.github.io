<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making Your Tracking Protection List for IE9</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you probably already know, Internet Explorer 9 has a new privacy feature - Tracking Protection Lists. When you visit a website that contains data p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making Your Tracking Protection List for IE9</h1><div class="post__text post__text-html js-mediator-article">  As you probably already know, Internet Explorer 9 has a new privacy feature - Tracking Protection Lists.  When you visit a website that contains data provided by a third-party web service (for example, ads, counters, or scripts), some information may be automatically sent to the content provider.  In some cases, this may be convenient, for example, the presence of advertising may provide free access to paid content.  However, this may ultimately affect confidentiality, since  for content providers, it is possible to track user movements between certain sites.  When using Tracking Protection, some content may be automatically blocked. <br><br>  On the day of the release of IE9 RC, the TPL [ <a href="http://ie.microsoft.com/testdrive/Browser/TrackingProtectionLists/Default.html">link</a> ] page on the IE promo site appeared with a set of lists from partners that can be added to your browser.  Unfortunately, the Russian segment was represented in them very sparingly - I found only one site from the .ru zone.  Therefore, I decided to create my own list to eliminate this injustice.  Fortunately it turned out to be not difficult at all. <br><a name="habracut"></a><br>  It‚Äôs worth starting with the fact that Tracking Protection is the direct successor of InPrivate Filtering, which was introduced in the days of IE8, and the concept has not changed much since then.  As before, the main task is to ensure the user's privacy as much as possible.  Therefore, it is not a full-fledged banner cutter, which is AdBlock.  And the removal of the whole "husk" is not a self-determination, and this imposes some restrictions on the functionality. <br>  I will try to explain what it means.  Every time you go to the site <a href="http://www.somenews.com/">www.somenews.com</a> you are guided by the fact that the site will show the content that you have been waiting for and that will be finished with it.  And you certainly don‚Äôt expect that information about your visit (stayed for some time, logged in to such sites, etc.) will go somewhere to the side.  We went to read the news, and the files on you were not good.  Tracking Protection Lists are designed to protect personal user information from third parties.  Therefore, it is believed that if you deliberately went to a certain site, then this site has the right to monitor what is happening on its pages itself (but the scripts uploaded from other sites are not). <br><br><h5>  List of exceptions for Russian users </h5><br>  I wanted to look at the possibilities that IE provides for filtering content.  Information was not too much - a new thing, because it is described so far poorly.  Many things had to be studied by examples on the promo-site, and the rest was checked by scientific tyke.  In the process formed its list of exceptions.  What came out of this you can see on the page where I hung my TPL [ <a href="http://gavr.in/adblock/">link</a> ].  To make it work, you will need to click on this link from IE9, click on ‚ÄúAdd TPL‚Äù, then agree to what the browser will offer you and see how the web pages change after activation - there will be less advertising. <br>  To form a list, I had to walk around regularly visited sites and cut out the excess from there.  The resulting sample does not pretend to objectivity, but this is not the final version. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  File format </h5><br>  To create your TPL we need a text file with the extension ".tpl".  Formally, the filter list should have such an extension, but IE9 will feel quite comfortable with the usual ".txt". <br>  The first line is the header by which IE determines that it is a TPL.  Then comes a list of optional settings that begin with a colon.  The truth at the moment I know only one - <i>Expires</i> .  Well, then comes the set of filtering rules - one line one rule. <br>  Further an example of the similar file: <br><blockquote><code>msFilterList <br> : Expires=1 <br> # Tracking Protection List by Eugene Gavrin <br> # <br> # Please report any unblocked tracking or problems <br> # via twitter (https://twitter.com/#!/egavrin) <br> # or via e-mail (eugene.a.gavrin@hotmail.com). <br> <br> # Russian ounters <br> -d counter.rambler.ru <br> -d tns-counter.ru <br></code> </blockquote><br>  The full version is available at the link: [ <a href="http://gavr.in/adblock/rules.txt">link</a> ]. <br><br><h5>  Setting auto-renewal period </h5><br>  One of the nice bonuses that TPL acquired, compared to InPrivate Filtering, is auto-update.  The default auto update period is 7 days.  In the event that the author is not satisfied with this value, he can change this period for a period of 1 to 30 days. <br>  This is done using the <i>Expires</i> option in this way: <br><blockquote> <code>#  ,   Expires     . <br> : Expires=5 <br></code> </blockquote><br>  Now the end user browser will know that once every 5 days you need to go to your site and update the list. <br><br><h5>  rules </h5><br>  In the TPL, there are two types of rules: universal, which are not tied to a specific domain, and rules that work only for content received from a specific domain. <br>  Each rule begins with the modifier "+" or "-".  Minus at the beginning of the rule means that elements that fall under this rule do not need to be displayed.  Plus means that these items can be displayed.  Plus - this is an exception to the rules, and in the event that there are two identical rules contradicting each other - the controversial content will be displayed. <br>  Next, I will give a few examples: <br><blockquote> <code>#      Ad20x30.jpg, Ad45x45.jpg, Ad50x10.jpg   <br> - Ad*x*.jpg <br> #   Ad250x600.jpg  ,   <br> + Ad250x600.jpg <br></code> </blockquote><br><blockquote> <code>#        ad-provider.ru <br> -d ad-provider.ru <br> #   watch.js <br> +d ad-provider.ru watch.js <br></code> </blockquote><br><blockquote> <code>#               <br> #         : <br> # ad1.provider.ru <br> # ad2.provider.ru <br> # ad3.provider.ru <br> -d ad*.provider.ru <br> #    ad7.provider.ru   <br> + ad7.provider.ru <br></code> </blockquote><br><h5>  Comments </h5><br>  Any line in the file that begins with the "#" character will be a comment.  This line will be ignored, so you can write anything there. <br>  I do not know how to make multi-line comments. <br><br><h5>  Error handling in lists </h5><br>  IE9 can behave in two different ways when errors occur.  In the event that the file does not in any way match the specified format, the browser will start swearing, so you can easily find out about it.  In the event that the TPL file comes in the wrong format, the browser will ignore the update. <br>  In the same case, if some rules from the list turn out to be incomprehensible by IE, then it removes this rule from consideration and leaves a small comment like: ‚ÄúI didn‚Äôt understand what I‚Äôm doing here, so I ignore it‚Äù.  The end user, if he does not specifically look at the right place, will not know about it. <br><br><h5>  Debugging </h5><br>  From the user's point of view, everything is fine - there is less advertising, annoying pop-up windows, and so on.  But for the developer of filters it is the most difficult stage. <br>  There are two main difficulties with updating the list when debugging, and find out what was filtered. <br>  How to deal with updates of lists?  You can, of course, re-subscribe each time you change one rule, but it quickly tires. <br>  Fortunately, we managed to find a place where IE puts downloaded exception lists, here is the way: <br><blockquote> <code>%HomePath%\AppData\Local\Microsoft\Internet Explorer\Tracking Protection\ <br></code> </blockquote><br>  Now I debug exactly the file that lies in this folder, and then update the file on the server. <br>  The debugging process looks like this: saved the file, updated the page in the browser, looked at what has changed.  And then the main trouble is revealed - when the browser filters the contents of the page in the address bar, a crossed out blue circle appears, as in the picture below.  If you click on it, a menu will pop up, which will offer to disable Tracking Protection on this page: <br><img src="https://habrastorage.org/storage/habraeffect/ec/fd/ecfd717ad62e1f869831243ba1c775e3.png"><br>  And how to see what was filtered?  Unclear. <br><br><h5>  Porting AdBlock Rules </h5><br>  Many users are familiar with the AdBlock plugin for FF and Chrome, a simple and effective banner cutter with lists of subscriptions.  Most of the rules that are used in AdBlock almost 1 in 1 can be transferred to the TPL. <br>  In this regard, I sluggishly think about the topic of writing a converter from AdBlock subscriptions to TPL -. <br><br><h5>  Adding a button to the site </h5><br>  It's all very simple, on your website or page you need to insert the following code: <br><blockquote><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript:window.external.msAddTrackingProtectionList('rules.txt', 'TPL from HabraUser')"</span></span></span><span class="hljs-tag">&gt;</span></span>Add HabraUser's TPL<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre></blockquote><br>  After that, a button will appear on your website, when clicked, the user will be prompted to add your exclusion list to the browser. <br><br><h5>  Positive sides </h5><br><ul><li>  This is a full AdBlock, albeit with some conventions </li><li>  Automatic update lists </li><li>  This is a mechanism built into the browser. </li></ul><br><h5>  disadvantages </h5><br><ul><li>  Complete lack of documentation on the TPL file format (or I just could not find it) </li><li>  Not all ads can be cut </li></ul><br><h5>  Afterword </h5><br>  It is planned that this list will be updated and edited, so if there are difficulties, they will be glad if you tell me about them :) <br>  I would also be interested to know on which sites the filters do not work or do not work well enough.  The more stocks will be found - the more of them will be corrected. <br><br>  <b>Update:</b> <br>  Many thanks for the feedback you left through the form - I will correct it. </div><p>Source: <a href="https://habr.com/ru/post/113881/">https://habr.com/ru/post/113881/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113876/index.html">China: how to order production or delivery</a></li>
<li><a href="../113877/index.html">Transparent and verifiable choices</a></li>
<li><a href="../113878/index.html">Nagios mobile phone balance monitoring</a></li>
<li><a href="../113879/index.html">Learning correctly benchmark 2: how the compiler hits the back</a></li>
<li><a href="../11388/index.html">How to make an experimental Google search default search in Firefox</a></li>
<li><a href="../113882/index.html">Nokia and Microsoft: Why?</a></li>
<li><a href="../113883/index.html">Google App Engine Caching</a></li>
<li><a href="../113884/index.html">What do you think will be with Yota in the near future?</a></li>
<li><a href="../113885/index.html">2 abandoned projects</a></li>
<li><a href="../113886/index.html">Arkady Moreinis, Glavstart: "I work with startups, but do not sell coffee boxes"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
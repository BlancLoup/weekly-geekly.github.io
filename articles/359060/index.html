<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Practice using proxies in javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You may have heard that new objects appeared in ES6 JavaScript, the so-called proxies. Those who know what proxy objects are and know how to work with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Practice using proxies in javascript</h1><div class="post__text post__text-html js-mediator-article">  You may have heard that new objects appeared in ES6 JavaScript, the so-called proxies.  Those who know what proxy objects are and know how to work with them, they can bring considerable benefits.  Today we publish a translation of the material, which is aimed at explaining to all comers the peculiarities of working with JS proxy objects in many examples. <br><br> <a href="https://habr.com/company/ruvds/blog/359060/"><img src="https://habrastorage.org/getpro/habr/post_images/5d6/c87/fac/5d6c87facf60bf7b10d491d51584f859.jpg" alt="image"></a> <br><br>  Also open our previous post in a new tab: <a href="https://habr.com/company/ruvds/blog/347754/">JavaScript Proxy: both beautiful and useful.</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">What is a proxy?</font> </h2><br>  A proxy, in a broad sense, is some kind of trusted entity acting on behalf of another entity.  A proxy is a substitute for a real object, which has the right to act on behalf of and in the interests of this object.  "Object" in this case can be almost anything.  If we confine ourselves to considering proxies as applied to JavaScript, then we can say that these are special objects that allow you to intercept and modify actions performed on other objects.  In particular, we are talking about calling functions, assignment operations, working with properties, creating new objects, and so on.  This technology is used to block direct access to a target object or target function and to interact with an object or function through a proxy object. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Before we continue the conversation about proxies and move on to examples of working with them, consider three important terms that are directly related to them.  Read more about it <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy">here</a> . <br><br><ul><li>  Handler (Handler) - a substitute object containing interceptors. </li><li>  Interceptors (Traps) - methods that provide access to properties. </li><li>  Target (Target) - an object that is proxy virtualized. </li></ul><br><h2>  <font color="#3AC1EF">Syntax</font> </h2><br>  Here is the declaration of a simple proxy object to which the target object and handler are passed. <br><br><pre><code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> proxy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(target, handler);</code> </pre> <br><h2>  <font color="#3AC1EF">Check browser support for proxy objects</font> </h2><br>  Let's start by checking the support of JavaScript proxy objects by the browser. <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> proxyTest = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>({}, {}) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (proxyTest <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.write(<span class="hljs-string"><span class="hljs-string">"Proxy supported!"</span></span>); }</code> </pre> <br><h2>  <font color="#3AC1EF">Standard behavior of objects</font> </h2><br>  Here we will declare an object, and then we will try to access the non-existent property of this object. <br><br><pre> <code class="hljs pgsql">let obj = { c: "car", b: "bike" }; document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(obj.b, " "); // -&gt; "bike" document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(obj.c, " "); // -&gt; "car" document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(obj.l); // -&gt; "undefined"</code> </pre> <br><h2>  <font color="#3AC1EF">Use proxy for object</font> </h2><br>  In the following example, we use a <code>get</code> interceptor handler.  The handler will pass the target object and the requested key to the interceptor. <br><br><pre> <code class="hljs pgsql">let <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> = {   <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(target, <span class="hljs-type"><span class="hljs-type">name</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> target ? target[<span class="hljs-type"><span class="hljs-type">name</span></span>] : "Key does not exist"; } } let obj = { c: "car", b: "bike" }; let proxyObj = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Proxy(obj, <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>); document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.b, " "); // -&gt; "bike" document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.c, " "); // -&gt; "car" document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.l); // -&gt; "Key does not exist"</code> </pre> <br><h2>  <font color="#3AC1EF">Get interceptor</font> </h2><br>  The <code>get</code> interceptor is executed when attempting to access an object property using a proxy.  The <code>get</code> method takes the <code>target</code> parameter (the object that needs to be worked through a proxy) and <code>property</code> (the property we are trying to access). <br><br><h3>  <font color="#3AC1EF">‚ñçSyntax</font> </h3><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Proxy(target, { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(target, property, receiver)</span></span></span><span class="hljs-function"> </span></span>{ } });</code> </pre> <br><ul><li>  <code>target</code> : target. </li><li>  <code>property</code> : the name of the property to work with. </li><li>  <code>receiver</code> : proxy object or object inherited from the proxy object </li></ul><br><h3>  <font color="#3AC1EF">‚ñçExample</font> </h3><br>  In the following example, we will try to influence the value with the <code>get</code> interceptor before displaying it on the screen. <br><br><pre> <code class="hljs pgsql">let <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(target, <span class="hljs-type"><span class="hljs-type">name</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> target ? target[<span class="hljs-type"><span class="hljs-type">name</span></span>]*<span class="hljs-number"><span class="hljs-number">10</span></span> : "Key does not exist"; } } let obj = { a: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span> }; let proxyObj = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Proxy(obj, <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>); document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.a, " "); // -&gt; <span class="hljs-number"><span class="hljs-number">10</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.b, " "); // -&gt; <span class="hljs-number"><span class="hljs-number">20</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.c); // -&gt; "Key does not exist"</code> </pre> <br><h2>  <font color="#3AC1EF">Interceptor set</font> </h2><br>  The <code>set</code> interceptor is executed when trying to set an object property using a proxy.  The <code>set</code> method accepts the <code>target</code> parameter (the object we are going to access), <code>property</code> (the property we are going to set), and <code>value</code> (the value of the property we are going to set). <br><br><h3>  <font color="#3AC1EF">‚ñçSyntax</font> </h3><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Proxy(target, { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(target, property, value, receiver)</span></span></span><span class="hljs-function"> </span></span>{ } });</code> </pre> <br><ul><li>  <code>target</code> : target. </li><li>  <code>property</code> : the name of the property to set. </li><li>  <code>value</code> : the new value of the property of interest. </li><li>  <code>receiver</code> : the object to which the assignment operation was originally directed.  Usually this is the proxy itself.  However, the <code>set</code> handler may not be called directly, but through a chain of prototypes or in some other way. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçExample</font> </h3><br>  In the following example, we will add some properties to the object, assign values ‚Äã‚Äãto them, while doing so before declaring the proxy object (in the code it is called <code>proxyObj</code> ). <br><br>  After analyzing this example, you can see that if, after declaring <code>proxyObj</code> try to set a new property of an object, the interceptor will be called and the value of the property changed by it will be saved in the object. <br><br><pre> <code class="hljs pgsql">let <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> = { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(target, <span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) {   target[<span class="hljs-type"><span class="hljs-type">name</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>*<span class="hljs-number"><span class="hljs-number">10</span></span>; } } let obj = { a: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span> }; let proxyObj = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Proxy(obj, <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>); proxyObj.c = <span class="hljs-number"><span class="hljs-number">3</span></span>; document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.a, " "); // -&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.b, " "); // -&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(proxyObj.c); // -&gt; <span class="hljs-number"><span class="hljs-number">30</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Has interceptor</font> </h2><br>  The <code>has</code> interceptor is called when the in operator is executed.  The <code>has</code> method takes the <code>target</code> (target object) and <code>property</code> (property that you want to control access to using the proxy object). <br><br><h3>  <font color="#3AC1EF">‚ñçSyntax</font> </h3><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(target, { <span class="hljs-attr"><span class="hljs-attr">has</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target, property</span></span></span><span class="hljs-function">) </span></span>{ } });</code> </pre> <br><ul><li>  <code>target</code> : target. </li><li>  <code>property</code> : the name of the property whose existence will be checked. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçExample</font> </h3><br>  In the following example, we check if the substring <code>ar</code> is in the key.  To begin with, we will check if the key exists, and, if so, we will check if it contains the substring of interest.  If both conditions are met, we will return the logical value <code>true</code> , otherwise, we will return <code>false</code> . <br><br><pre> <code class="hljs pgsql">const <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> = { has: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(target, key) {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> target &amp;&amp; key.includes("ar")) {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;   }   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }; const <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = { car: <span class="hljs-string"><span class="hljs-string">'Bentley'</span></span>, bar: <span class="hljs-number"><span class="hljs-number">4</span></span>, hotel: "no", }; const proxy = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Proxy(<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>); document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'car'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> proxy, " "); //  -&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'car'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, " "); //  -&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'hotel'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> proxy, " "); //  -&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'hotel'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, " "); //  -&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'spacebar'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> proxy, " "); //  -&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">'spacebar'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>); //  -&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Interceptor apply</font> </h2><br>  The <code>apply</code> interceptor allows you to call a proxy with parameters.  It allows you to override functions.  The <code>apply</code> method takes the <code>target</code> parameters (the target object or the target function), <code>thisArg</code> ( <code>this</code> argument to use when calling), and <code>argumentsList</code> (a list of all the arguments in the form of an array). <br><br><h3>  <font color="#3AC1EF">‚ñçSyntax</font> </h3><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(target, { <span class="hljs-attr"><span class="hljs-attr">apply</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target, thisArg, argumentsList</span></span></span><span class="hljs-function">) </span></span>{ } });</code> </pre> <br><ul><li>  <code>target</code> : target. </li><li>  <code>thisArg</code> : <code>this</code> argument to call. </li><li>  <code>argumentsList</code> : a list of arguments to invoke. </li></ul><br><h3>  <font color="#3AC1EF">‚ñçExample</font> </h3><br>  In the following example, we use a proxy to override a function that multiplies two numbers.  A proxy changes the behavior of a function by adding 1 to the result of the multiplication. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">multiply</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a * b; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handler = { <span class="hljs-attr"><span class="hljs-attr">apply</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target, thisArg, argumentsList</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> target(argumentsList[<span class="hljs-number"><span class="hljs-number">0</span></span>], argumentsList[<span class="hljs-number"><span class="hljs-number">1</span></span>]) + <span class="hljs-number"><span class="hljs-number">1</span></span>; } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> proxy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(multiply, handler); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.write(multiply(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-string"><span class="hljs-string">" "</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  -&gt; 10 document.write(proxy(2, 5)); //  -&gt; 11</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Construct interceptor</font> </h2><br>  The <code>construct</code> interceptor is executed when the <code>new</code> operator is called.  In order for this interceptor to function normally, it is necessary that the target object, to work with which you plan to call it, could be created with a command like <code>new Target()</code> . <br><br><h3>  <font color="#3AC1EF">‚ñçSyntax</font> </h3><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(target, { <span class="hljs-attr"><span class="hljs-attr">construct</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target, argumentsList, newTarget</span></span></span><span class="hljs-function">) </span></span>{ } });</code> </pre> <br><ul><li>  <code>target</code> : target. </li><li>  <code>argumentList</code> : <code>argumentList</code> list for the constructor. </li><li>  <code>newTarget</code> : source constructor </li></ul><br><h3>  <font color="#3AC1EF">‚ñçExample</font> </h3><br>  In the following example, we will pass through a proxy a new value, to which a currency symbol has been added, to the constructor function. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">formatCurrency</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">format</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.format = format; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> handler = { <span class="hljs-attr"><span class="hljs-attr">construct</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target, args</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> target(<span class="hljs-string"><span class="hljs-string">"$"</span></span> + args[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> proxy = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(formatCurrency, handler); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.write(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> proxy(<span class="hljs-string"><span class="hljs-string">'100'</span></span>).format); <span class="hljs-comment"><span class="hljs-comment">//  -&gt; $100</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Interceptor deleteProperty</font> </h2><br>  The <code>deleteProperty</code> interceptor <code>deleteProperty</code> invoked when the <code>delete</code> method is invoked.  It takes the <code>target</code> parameters (the target object or the target function), and <code>property</code> (the property whose removal command we want to process). <br><br><h3>  <font color="#3AC1EF">‚ñçSyntax</font> </h3><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(target, { <span class="hljs-attr"><span class="hljs-attr">deleteProperty</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target, property</span></span></span><span class="hljs-function">) </span></span>{ } });</code> </pre> <br>  <code>target:</code> target. <br>  <code>property</code> : the name of the property whose removal operation is to be intervened. <br><h3>  <font color="#3AC1EF">‚ñçExample</font> </h3><br>  The following example demonstrates calling the function we need and performing certain actions when trying to delete an object property. <br><br><pre> <code class="hljs pgsql">const cars = { merc: <span class="hljs-string"><span class="hljs-string">'s320'</span></span>, buggati: <span class="hljs-string"><span class="hljs-string">'veyron'</span></span>, }; const <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> = { deleteProperty: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(target, prop) {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> target) {       document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(`${prop} has been removed `); //  -&gt; merc has been removed     <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> target[prop];   } } }; document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(cars.merc, " "); //  -&gt; "s320" const proxy = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Proxy(cars, <span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> proxy.merc; document.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(cars.merc, " "); //  -&gt; undefined</code> </pre> <br><h2>  <font color="#3AC1EF">Proxy usage options</font> </h2><br>  Here are some areas of practical use of proxies in JavaScript. <br><br><ul><li>  Security.  Proxy allows you to organize the verification of the function arguments and object property values. </li><li>  Data storage.  The proxy function can be called when trying to modify the properties of objects and create backup copies of data. </li><li>  Statistics.  Proxy objects allow you to collect statistical information about objects with which users interact or some kind of software application mechanisms. </li><li>  Context accounting.  Different proxies can be used for different program execution contexts.  Let's say it could be a debug context or a production environment.  In the case of debugging, proxies can, for example, represent the values ‚Äã‚Äãof variables and allow direct impact on the contents of objects. </li><li>  Mediator design pattern.  Proxies are intermediaries used to work with the objects they represent, allowing objects to interact not directly, but through them.  As a result, when using a proxy, it is not necessary to describe the mechanisms of direct interaction of objects with each other. </li><li>  Access control.  When organizing access to the properties of objects through a proxy, you can control what is happening, for example, to prohibit a user or group of users from accessing the object.  These restrictions can be entered either on the basis of the internal logic of the proxy objects, or by giving these objects explicit commands regarding the restriction of access to the target objects. </li></ul><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  In one of our previous <a href="https://habr.com/company/ruvds/blog/347754/">materials</a> about proxies in JS, which was published at the end of January of this year, we voted the following question: ‚ÄúDo you use proxies in your JS applications?‚Äù.  Then it turned out that 13% of respondents answered ‚ÄúYes‚Äù, 83% - ‚ÄúNo‚Äù, and 4% chose the option ‚ÄúOther (in comments)‚Äù.  The world of JavaScript is developing very fast.  It is possible that the attitude of programmers to proxy objects has changed.  Therefore, we offer everyone to help us find out and take part in today's survey. <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/359060/">https://habr.com/ru/post/359060/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359050/index.html">Marvin Minsky "The Emotion Machine": Chapter 5 Thinking</a></li>
<li><a href="../359052/index.html">Marvin Minsky ‚ÄúThe Emotion Machine‚Äù: Chapter 5 ‚ÄúReflective Thinking, Self-Analysis, Reflection‚Äù</a></li>
<li><a href="../359054/index.html">Marvin Minsky "The Emotion Machine": Chapter 5 "Imagination"</a></li>
<li><a href="../359056/index.html">Richard Hamming: "The inexplicably high efficiency of mathematics"</a></li>
<li><a href="../359058/index.html">Brand squatters on the march: how we tried to squeeze out the name of the service</a></li>
<li><a href="../359062/index.html">Who's new? My first experience in the development of the game - from idea to publication</a></li>
<li><a href="../359064/index.html">SQL Olympiad: analyzing a calendar task</a></li>
<li><a href="../359066/index.html">Saint P Rubyconf 2018: June 10, St. Petersburg</a></li>
<li><a href="../359068/index.html">Systems thinking as the main driver of growth: the concept of Growth System</a></li>
<li><a href="../359070/index.html">ETL: quality data for management decisions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with Group Policy Preferences: Interacting with Local Accounts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, client-side extensions of Group Policy technology, such as preference elements, in effect, allow you to perform most of the various scena...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with Group Policy Preferences: Interacting with Local Accounts</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/10a/431/395/10a431395d409b11972d5c643a86dd93.png" align="right">  As you know, client-side extensions of Group Policy technology, such as preference elements, in effect, allow you to perform most of the various scenarios that you simply cannot implement using administrative templates or security settings.  Due to the fact that the entire set of group policy preferences includes 21 client side extensions (including non-working elements of application preferences), it can be concluded that practically all those operations that were solved by means of scripts can be implemented through such CSE extensions. <br>  One of these client-side extensions allows you to manage user accounts and groups that can be found on each machine while installing the operating system itself.  Such accounts have to be encountered less often, but sometimes there may be situations when you have to perform some operations for their maintenance, and knowing how to perform such maintenance will be more convenient than ever. <br>  That's just such accounts and scenarios for their service, we are with you and stop in this article.  Next, you will learn about what kind of local user accounts there are, learn something about group accounts, and how you can manage such objects using the functionality of the group policy and the <b>local users and groups</b> preference item.  And we will begin now with <br><a name="habracut"></a><br><h2>  Local Account Definitions </h2><br>  In any case, an integral part of the company is always employees who are called users in the IT infrastructure, and on each user's computer, even before he first logs on with a domain account that is a member of some domain groups, the user will necessarily perform Sign in with your local user account that belongs to a specific local group with the appropriate rights.  In principle, there are two such user accounts, namely: <br><ul><li>  <b>The ‚ÄúAdministrator‚Äù account</b> , which provides full access to manage a client computer or a server and, if necessary, assign user rights and access control permissions.  This record, in any case, should be used only for tasks that require administrative credentials and the administrative access token.  A strong password is strongly recommended for this account. </li><li>  <b>The Guest account is</b> used by those who do not have a real account on the target computer.  If the user account is disabled but not deleted, he can also use the <b>Guest</b> account.  Account <b>"Guest"</b> does not require a password.  By default, it is disabled, but you can always turn it on if necessary.  <b>The Guest</b> account, like any other account, can be granted rights and permissions to access objects.  By default, it is included in the default <b>Guests</b> group and allows the user to log in locally to the target computer.  Additional rights, like any permissions, can be assigned to <b>the Guests group by a</b> member of <b>the Administrators group</b> .  By default, this account is disabled, and it is often recommended to leave it in this position. </li></ul><br>  With local groups, in turn, everything is much more diverse and interesting.  There are as many as 29 of them.  The default local groups are created automatically when you install the client operating system, as well as any isolated or member server.  Belonging to a local group provides the user with the rights and capabilities to perform various tasks on the local computer.  It makes no sense to describe each group, since you know perfectly well about the appointment of most of the groups, and you can easily find their description in a matter of seconds. <br>  But now, I think it's time to move on to the next element of preference, that is, to expand the client side <b>‚ÄúLocal Users and Groups‚Äù</b> . <br><br><h2>  Using the Local Users and Groups Group Policy Preference Element </h2><br>  By creating preference items with this client side extension, you can create, rename, delete local user accounts, change passwords, disable user accounts, and perform other actions.  In addition, if you look at the second possibility of this CSE, you can still create, rename, delete, and also change the membership in local groups. <br>  The following examples will run scripts that will create a new local account, change the password for the local administrator account, and add several user accounts to the <b>Administrators</b> group. <br>  Since we will use the same GPO Editor node for each of these scenarios, preliminary steps will need to be taken before performing the step-by-step procedures.  To do this, <b>the Group Policy</b> <b>Management</b> snap-in will create a new GPO called <b>‚ÄúGroup Policy Preferences - 17‚Äù</b> , and, despite the fact that all preference items will be created in the computer‚Äôs configuration node, for simplicity This GPO links to the entire domain.  Now it only remains to select the newly created GPO object and open the Group Policy Management Editor for it from the context menu. <br>  You can go to the scripts themselves. <br><br><h3>  Scenario 1 </h3><br>  To begin, a new account will be created, and for this, in the displayed snap-in of the Group Policy Management Editor, go to <b>Computer Configuration \ Settings</b> <b>\ Control Panel \ Local Users and Groups</b> ( <b>Computer Configuration \ Preferences \ Control Panel Setting \ Local Users and Groups</b> ) .  Being in this node, you should call the context menu in the details pane, and then, as can be seen in the following illustration, select the ‚Äú <b>Create</b> ‚Äù command and then <b>‚Äú</b> <b>New</b> <b>User‚Äù</b> ( <b>New&gt;</b> <b>Local User)</b> : 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/38f/16c/78d/38f16c78d5f36d4f6a27dcce305e7edd.png"></a> <br>  <b>Fig.</b>  <b>1. Creating a local user group policy preference item</b> <br><br>  Unlike the dialog boxes of the properties of the majority of the preference elements considered earlier, it is immediately noticeable here that this dialog box is almost completely filled with various settings.  Let's try gradually in the process of creating two elements of preferences to fully understand all these settings. <br>  With the assignments of actions of the current preference item, I think everything is clear and without words, therefore, since in the first scenario a local user account will be created, the action ‚Äú <b>Create</b> ‚Äù is chosen.  Concerning actions, one detail should be noted: when selecting the <b>Update</b> action ( <b>Update</b> ), the SID security identifier of the account being updated does not change, but if you replace the account, in this case the SID will be assigned a new one, since the account will be deleted first , and then such accounting will be created, the properties of which you will specify.  At this you should definitely pay attention. <br>  In the <b>User name</b> drop-down list, you can either select an account from the list of existing ones, which is convenient when updating, replacing or deleting an existing account, or to create a new account, you can simply enter the name of the new user, which is now and will be done.  In the name of such an account let it be, say, <b>‚ÄúMBeasley‚Äù</b> . <br>  The <b>Rename to</b> text box allows you to change the name of the user account defined in the previous drop-down list to the one that will be displayed in the current text field.  For obvious reasons, this field is available only for <b>the Update</b> action, and now it, as you will soon notice in the second illustration, is simply blocked. <br>  As you can immediately guess, the text box <b>"Full name" (Full name</b> ) is intended to fill in the name of the user being created.  To make the name of our user immediately clear, let's call him <b>‚ÄúMichael Beasley‚Äù</b> .  In the <b>Description</b> text box, you can add some additional information about the user being created or modified.  Let it be written about this user, for example, <b>"New Account"</b> . <br>  In the following two text fields - ‚Äú <b>Password</b> ‚Äù and ‚Äú <b>Confirm Password</b> ‚Äù - you need to specify and, of course, confirm the password for the account you are creating or changing.  I‚Äôll warn you right now that you don‚Äôt need to excel with password generation.  Let me explain why.  You set this password in a group policy object, and group policies are stored in the shared SYSVOL folder.  Therefore, by localizing the desired GPO, you can calculate the password, which will in no way have a positive effect.  By the way, how to decipher such passwords, you can read in the article by Sergey Marinichev ‚Äú <a href="http://blog.wadmin.ru/2013/09/about-passwords/">Once again about passwords</a> ‚Äù.  Therefore, if you plan to change passwords for any vital accounts, refrain from using preference items, but implement it in some other way.  For now, the standard password used for test purposes will be simply added, that is, <b>P @ ssw0rd</b> . <br>  Also in the preference item, the checkbox is immediately checked on the option <b>‚ÄúRequire password change on the next login to the system‚Äù</b> ( <b>User must change password at next logon</b> ), and I recommend that this checkbox remain there.  The user will not lose if he changes the password for his account when he first logs on.  Of course, if such a password is not even more vulnerable. <br>  We will consider almost all of the following options in the following example, but for now I would like to dwell on the option <b>‚Äú</b> <b>Account valid expires</b> ‚Äù.  If it is necessary for the account to be created to have a lifetime, you need to uncheck this box, and then specify the expiration date of the current account in the appropriate control component, for example, we will specify January 21, 2014.  We will not add any targeting for this created user, but simply move on to the following example.  Here it is worth paying attention to the fact that even if the preference item is saved, the Group Policy Management Editor warns you that this password can be easily detected, the main thing, as they say, would be the desire. <br>  The dialog box with all previously defined settings can be seen in the following illustration: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/c2a/201/56e/c2a20156ef5f5f49017aad046209bddb.png"></a> <br>  <b>Fig.</b>  <b>2. Dialog box for creating a new local user account</b> <br><br><h3>  Scenario 2 </h3><br>  In this example, the password for the local administrator account will be changed.  As you understand, it is not safe to create a permanent password using preference items, but now this is done solely for the purpose of demonstrating the functionality of group policy preferences.  Now we need to create a new local user preference item where we need to select the ‚Äú <b>Update</b> ‚Äù action ( <b>Update</b> ).  From the next drop-down list, select the built-in administrator account and proceed to the following fields.  As you will see in the third illustration below, the <b>Rename to</b> text box has now become available for entering data, and we will definitely use this.  <b>Let's</b> rename the account, say, to <b>‚ÄúTrueAdmin‚Äù</b> and move on. <br>  Now we will change the password for this user and to demonstrate the operation of the following options, uncheck the checkbox ‚Äú <b>Require password change on next login</b> ‚Äù ( <b>User must change password at next logon</b> ).  Since the user will no longer need to change his password manually when logging in, the options <b>‚ÄúPrevent a user from changing the password‚Äù</b> ( <b>User</b> <b>password change</b> ) and <b>‚Äú</b> <b>Password never expires</b> <b>‚Äù</b> have become available to change.  You‚Äôve probably already used these options more than one hundred times when creating domain user accounts, but (just in case) the first option prevents the user from changing their password, and he will have to live with the password you specified until you yourself Do not change, and the second removes restrictions from regular password changes.  For example, set the checkbox only on the option <b>‚Äú</b> <b>Password never expires‚Äù</b> . <br>  If you need to disable an account of a user, for example, a guest account - no problem!  Just select the checkbox for ‚Äú <b>Disable account</b> ‚Äù ( <b>Account is disabled)</b> .  Also, we will not create any additional filtering, but simply click on <b>‚ÄúOK‚Äù</b> twice to save the changes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ed/be4/674/3edbe4674d604c4546d246c136129963.png"><br>  <b>Fig.</b>  <b>3. Changing the built-in administrator account</b> <br><br><h3>  Scenario 3 </h3><br>  There is a third, final example in which several user accounts will be added to the <b>‚ÄúAdministrators‚Äù</b> group.  In order to accomplish this task, we will use the second type of preference item from the current node - the ‚Äú <b>Local Group</b> ‚Äù.  In the dialog box that appears, as will be seen in the illustration at the end of this scenario, there is no longer such a huge number of parameters, but there are some new controls that we will now deal with in just a few minutes. <br>  First of all, let's consider four standard actions, where in the overwhelming majority of cases I recommend using the ‚Äú <b>Update</b> ‚Äù action, naturally, if you don‚Äôt need to create a new one or delete any existing local group.  The action ‚Äú <b>Replace</b> ‚Äù ( <b>Replace</b> ) works by analogy with the elements of preference of local users, so before using it you should think three times whether this is necessary for you. <br>  In the <b>Group name</b> drop-down list, as in the previous two examples, you can either select an existing group or create a new one.  Since we need to add several users to the local admins group, we will focus on the existing groups and select the <b>Administrators group</b> . <br>  If you want to give the existing group a new name, use the capabilities of the <b>Rename to</b> text box.  It is always convenient if you have everything beautifully decorated and documented, so you can add a detailed description for your group in the corresponding text field.  For example, in the description you can enter <b>"Administrators have full, unrestricted access rights on the local computer</b> . <b>"</b> <br>  On each computer, groups of local administrators can include anything, because you cannot predict all the actions of your users.  Especially for this, there are two great options: <b>‚ÄúDelete all member users for this group‚Äù</b> ( <b>Delete all member users</b> ) and <b>‚Äú</b> <b>Delete all member groups</b> <b>for this group‚Äù</b> ( <b>Delete all member groups</b> ).  Using the first parameter, you delete all user accounts that belong to this group, and the second parameter, respectively, allows you to delete all groups.  Naturally, both the first and second options will work out before adding members configured with this preference item. <br>  In order to add new user and group accounts, you need to use the lowest controller, that is, the group <b>members</b> parameter <b>group</b> .  This group must include both local and domain administrators, so if you deleted accounts using the appropriate checkboxes, you should click on the <b>Add</b> button and in the appropriate text box enter <b>‚ÄúBuiltin \ Administrator‚Äù</b> , after which click on the <b>"OK" button</b> .  Repeat these steps with our TrueAdmin, and then add domain administrators.  You can either select this group from the corresponding list, or press the F3 key and use the% DomainName% variable, then specify the name of the group, that is, the <b>Domain Administrators</b> , then you can save all the changes you have made.  In the following illustration, you can see this dialog box: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b64/ed4/ad7/b64ed4ad706eef7834ccbdcb84a24724.png"><br>  <b>Fig.</b>  <b>4. Changing Membership in the Local Administrators Group</b> <br>  After you have created all the required preference items, you can close the rest of the Group Policy Management Editor and update the Group Policy settings on the target computers. <br><h2>  Conclusion </h2><br>  In this article, you learned about the next Group Policy Preference Item, which allows you to work with local user and group accounts.  Local user accounts that were editable were considered, and in the first two scenarios, examples of using these elements to create new and modify existing local user accounts were demonstrated. <br>  In addition, the article also provided an example of using these Group Policy preference items in conjunction with local groups, which allows for changes in the membership of the existing local <b>Administrators</b> group.  The most important thing when working with these elements of preference is not to forget that you need to use the password change feature with caution, since if you wish, any ill-wisher can locate such passwords. </div><p>Source: <a href="https://habr.com/ru/post/205464/">https://habr.com/ru/post/205464/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205454/index.html">Data replication. Attunity Replicate and Greenplum</a></li>
<li><a href="../205456/index.html">How to make friends with the Yandex API and AJAX captcha</a></li>
<li><a href="../205458/index.html">Installing XenServer 6.2 in Hetzner</a></li>
<li><a href="../205460/index.html">Setting up an Internet gateway for a small office CentOS, Iptables, NAT, Squid Transparent, Sarg</a></li>
<li><a href="../205462/index.html">Reading Mettler Toledo PS60 Scale Data</a></li>
<li><a href="../205466/index.html">Development of Windows 8.1 applications on XAML / –° #. Part 3. Toolbars</a></li>
<li><a href="../205472/index.html">turbofilm.tv blocked</a></li>
<li><a href="../205476/index.html">Rake using common .dll</a></li>
<li><a href="../205478/index.html">Virtual Trading: the first step in the stock market</a></li>
<li><a href="../205480/index.html">ADI method for direct observation of exoplanets - how it works</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
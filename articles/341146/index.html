<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>$ mol - the best cure for hemorrhoids</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone, my name is Dmitry Karlovsky and I ... I want to hurt you. A lot of pain. I will remind you of all the suffering that you experience wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>$ mol - the best cure for hemorrhoids</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello everyone, my name is Dmitry Karlovsky and I ... I want to hurt you.  A lot of pain.  I will remind you of all the suffering that you experience while being held captive by your favorite js framework.  I will bring you to the very bottom of the deepest hopelessness.  And then, when you are completely desperate and lose faith in the community, I will give you a helping hand and show you a bright future. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6e7/7cf/c44/6e77cfc44b4a6faf2fabb816a52a54d5.jpg" alt="I will hurt you"></p><br><p>  Further, your text is a transcript of the speech of the same name with <a href="http://piter-united.ru/itgm11/">IT Global Meetup # 11</a> .  You can <a href="https://github.com/nin-jin/slides/blob/master/mol/">read it as an article</a> or open it in <a href="https://nin-jin.github.io/slides/mol/">the presentation interface</a> .  Enjoy reading. </p><a name="habracut"></a><br><h1 id="vysokourovnevye-freymvorki">  High-level frameworks </h1><br><p>  Here you have chosen the framework.  How do you imagine working with him?  Well, it should be a rich set of ready-made solutions from which you can easily and quickly build an application of any complexity. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c3d/90b/22b/c3d90b22b2346f0cbca62927cf768c78.png" alt="A bunch of ready-made solutions"></p><br><p>  Examples of such frameworks: ExtJS, SAPUI5, VCL.JS, $ mol - they provide you with a bunch of ready-made widgets, from banal buttons to complex grids with sorting, filtering and other beautiful ladies. </p><br><p>  <strong>But have they heard about them?</strong>  <strong>And how many people use them in their daily work?</strong> </p><br><p>  Not many.  What is strange, is not it? </p><br><h1 id="nizkourovnevye-freymvorki">  Low-level frameworks </h1><br><p>  Unfortunately, low-level frameworks are now more popular, giving only the most basic abstractions over the platform, and everything else has to be implemented by hand or searched on the Internet, and fastened with a blue electrical tape.  That is, for each project we collect a unique high-level framework based on a low-level one. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/245/65e/860/24565e8609eb7fe93aeb3d8a1d612aba.jpg" alt="Only frames"></p><br><p>  Examples of such frameworks are widely known.  These are: Angular, VueJS, EmberJS and many others. </p><br><h1 id="biblioteki-s-zamashkami-freymvorka">  Libraries with framework manners </h1><br><p>  Recently, the trend to build an ecosystem around individual highly specialized libraries has again gained popularity.  It is still worse here - in each project, you first have to build a low-level framework from your library heaps to your liking, and on top of it you already have to cycle components that often do not differ in re-usability outside the project being developed. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c1f/f72/357/c1ff72357a896d6badddf05e37f56893.jpg" alt="Some bikes"></p><br><p>  The most famous examples are: React, Backbone, jQuery </p><br><h1 id="gibkost-ili-skorost-razrabotki">  Flexibility or speed of development? </h1><br><p>  Why are high-level frameworks so unpopular and from project to project we saw the same bikes? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1b7/ada/187/1b7ada1877a474c2537cb1be5b874915.jpg" alt="Again the bikes ..."></p><br><p>  The fact is that most of them are of extremely poor quality.  They are huge, slow, difficult to learn, and most importantly, very oaky, which is why customizing their components for a project is comparable in complexity to writing these components from scratch. </p><br><h1 id="mol---vysokourovnevyy-no-gibkiy">  $ mol - high level but flexible </h1><br><p>  But the $ mol framework is knocked out of the total number of monsters.  It is lighter and faster than many low-level frameworks, but it comes with a rich set of batteries in the set, allowing you to build a complex application with just a few lines of code. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/332/365/48c/33236548c4ae6125d4ec6b84e8805fd2.png" alt="Extra code does not interfere"></p><br><p>  And this wealth does not at all aggravate the final application, because only the code that is really necessary is included in it. </p><br><h1 id="sravnim-razmery">  Compare sizes </h1><br><p>  So, let's take the brightest representatives from three different levels: the React library, the low-level Angular framework, and the high-level $ mol.  Let's create each of them in a trivial static application and see what overhead costs give different tools. </p><br><table><thead><tr><th></th><th>  <strong>Level</strong> </th><th>  <strong>Proj create</strong> (s) </th><th>  <strong>Proj size</strong> (KB) </th><th>  <strong>Deps</strong> </th><th>  <strong>App size</strong> (KB) </th><th>  <strong>App start</strong> (ms) </th></tr></thead><tbody><tr><td>  <strong>React</strong> </td><td>  Lib </td><td>  70 </td><td>  120,000 </td><td>  892 </td><td>  <strong>45</strong> </td><td>  230 </td></tr><tr><td>  <strong>Angular</strong> </td><td>  Low </td><td>  50 </td><td>  160,000 </td><td>  752 </td><td>  <strong>80</strong> </td><td>  350 </td></tr><tr><td>  <strong>$ mol</strong> </td><td>  High </td><td>  0 </td><td>  200 </td><td>  0 </td><td>  <strong>15</strong> </td><td>  150 </td></tr></tbody></table><br><p>  Manually creating projects on React and Angulyar is not a trivial task, so we use standard code generators (create-react-app and <a href="https://habrahabr.ru/users/angular/" class="user_link">angular</a> / cli).  They generate a bunch of files for about a minute, after which you can already delete the extra ones and add the necessary ones. </p><br><p>  In $ mol, a new application is created simply by creating a directory and locating the files you need, without installing eight hundred dependencies.  As you can see, the $ mol high-level framework provides a 3 times smaller increase in the page size than the React library alone. </p><br><h1 id="ispolzovanie-storonnih-komponent">  Using third-party components </h1><br><p>  What do you usually need to use a third-party component? </p><br><ol><li>  Find on the internet and choose from alternatives. </li><li>  Install a compatible version. </li><li>  Import and register. </li><li>  Take advantage. </li></ol><br><p>  Not very comfortable, right? </p><br><h1 id="ispolzovanie-storonnih-mol-komponent">  Using third-party $ mol component </h1><br><p>  The basic principle of $ mol is automation, so using a third-party component is extremely simple. </p><br><ol><li>  Select a component from the <a href="http://mol.js.org/">catalog</a> . </li><li>  Take advantage. </li></ol><br><p>  The collector will take care of downloading his sources and including them in the correct places of the resulting bundles. </p><br><h1 id="udalenie-storonnih-komponent">  Removing a third-party component </h1><br><p>  And what usually have to do when the component is no longer needed? </p><br><ol><li>  Stop using. </li><li>  Do not forget to remove the import and registration. </li><li>  Do not forget to remove the dependence on it. </li></ol><br><p>  It is necessary not to forget so much of everything so that your application does not have extra code. </p><br><h1 id="udalenie-storonnih-mol-komponent">  Removing third-party $ mol component </h1><br><p>  And what to do when you no longer need any $ mol component? </p><br><ol><li>  Stop using. </li></ol><br><p>  The other basic principle of $ mol is not to pay for what you don‚Äôt use.  And this means that it is enough to stop using the component so that it stops being included in the bundle.  Everything is extremely simple and reliable, because the human factor is completely excluded. </p><br><h1 id="versionirovanie">  Versioning </h1><br><p>  Suppose you found two great components: a nice datepicker and an advanced datagrid.  But the trouble is, one uses the full capabilities of the new version of the framework, and the other is not yet compatible with it.  What to do if you don‚Äôt want to give up one of them, but you want to use new features yourself, but rewriting all the old components may take more than one month? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/77b/7af/2df/77b7af2df435e5e38aaa0051dd40008f.png" alt="Difficult choice"></p><br><h1 id="neskolko-versiy-razom">  Several versions at once </h1><br><p>  You can try to include both versions of the framework in the bundle, but this is not only that the size of the application will be significantly inflated, it is also not likely to start.  If only because the package manager will not allow you to install two versions of the same framework at the same time.  And even if it succeeds, the fight between versions will not be avoided.  Therefore... </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/1aa/4cf/d67/1aa4cfd678b0d0f65d1205138fe145c8.jpg" alt="Multiple versions of large libraries"></p><br><h1 id="versionirovanie-v-mol">  Versioning in $ mol </h1><br><p>  The $ mol modules have no versions.  Instead, they are developed in accordance with the principle of "openness / closure." </p><br><ol><li>  Any module is open to expand the interface. </li><li>  Any module is closed to change the interface. </li></ol><br><p>  This means that you can safely upgrade all modules to the latest revisions without worrying about their changed API. </p><br><h1 id="obnovlenie-api-v-mol">  API update in $ mol </h1><br><p>  But what to do when you need to introduce a more convenient API that is not compatible with the existing one?  And everything is simple - if the API is not compatible, then this is another module with a different name.  The name may be similar.  For example, with an increased number at the end.  And since these are two different modules, then they can coexist in the project at the same time.  At the same time, they may have a lot of common code, up to: one - this is nothing more than a lightweight facade for another. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/943/380/0d4/9433800d4cbc3746e4d247fe826afe65.svg" alt="Reuse of old modules in the new"></p><br><p>  In the diagram, you can see that the hypothetical new version of the rendering engine with the $ mol component, when coexisting with the previous one, will only slightly increase the total volume of the bundle.  Could you imagine such a thing in any other framework? </p><br><p>  By the way, do not be surprised that the modules in $ mol are so small, because it is a pleasure to create and use microscopic modules when automating work with dependencies. </p><br><h1 id="potoki-dannyh">  Data streams </h1><br><p>  Manually driving data streams is a real hell.  You seem to have thought through all the options, took into account all the events, but you should give the result to testers, as a lot of bug reports start to fall on you as a result of contradictory logic.  To cope with it, you have two ways. </p><br><ol><li>  Streams of events (streams) </li><li>  Reactive cells (cells) </li></ol><br><h1 id="strimy-sobytiy">  Streams of events </h1><br><p>  In Angular, we bet on the concept of streams, where you statically adjust the flow of events and reactions to them.  Unfortunately, any nontrivial application has a lot of dynamics, which means to create for it an efficient configuration of threads is a real puzzle.  Look only at how streams look like the correct conditional branching in two variables. </p><br><pre><code class="hljs pgsql">const Result = Rx.Observable.combineLatest( Pos , <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> ) .<span class="hljs-keyword"><span class="hljs-keyword">select</span></span>( ([ pos , <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> ])={ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pos &lt; <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> ? Left : Rx.Observable.<span class="hljs-keyword"><span class="hljs-keyword">of</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ) } ) .switch() .distinctUntilChanged() .debounce( <span class="hljs-number"><span class="hljs-number">0</span></span> )</code> </pre> <br><p>  And this is a pretty simple example. </p><br><h1 id="reaktivnye-yacheyki">  Reactive cells </h1><br><p>  Reactive cells are simply containers that themselves track dependencies between themselves, dynamically building data streams in the most optimal way. </p><br><pre> <code class="hljs kotlin">@ $mol_mem result() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pos() &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.start() ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.left() : <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre> <br><p>  Here we simply declare a property that is a function of other properties, if we change them, ours will also be updated in the most efficient way. </p><br><h1 id="yacheyki-v-mol">  $ Mol cells </h1><br><p>  I'm sure you heard about VueJS or MobX - they are just based on the concept of cells.  But the implementation in $ mol is the most advanced.  This is what $ mol can do, which no other framework can do. </p><br><ol><li>  Synchronous code, but without blocking the stream. </li><li>  Bilateral consistent data movement. </li><li>  Automatic installation and reset of the wait indicator. </li><li>  Automatic parallelization of non-blocking tasks. </li><li>  Falling and restoring parts of the page, without dropping the entire application. </li><li>  Control the lifetime of objects. </li></ol><br><p>  Yes, yes, we have destructors with predictable execution moment. </p><br><p>  All this is a good example of how competent architecture allows you to write flexible, intelligent and efficient code, without losing visibility or inflating its size. </p><br><h1 id="ochepyatki">  Ochepyatki </h1><br><p>  Surely everyone who has eaten JavaScript dog may recall in its practice not one fascinating story, when, because of one small typo, he fought for half a day with some impossible bug.  The problem is that man is essentially inattentive by nature.  He easily makes the most stupid mistakes, and then may not see them, looking at them point-blank. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4b1/b03/123/4b1b03123a3325470f2f6d3038798273.png" alt="So much work wasted"></p><br><p>  The solution to this problem is static typing, which allows the computer to automatically and in a finite time check the correctness of the code, relieving the programmer‚Äôs brain from a heap of trifles and allowing it to concentrate on really important things. </p><br><p>  <strong>But how much do you know of frameworks written in TypeSript?</strong> </p><br><p>  I know only 4. These are low-level Angular and CycleJS, as well as high-level VCL.JS, and ... $ mol.  All the rest are simply unsuitable for the development of more or less large projects.  Well, they are not suitable ... you just need to double the number of developers every year, just to keep the same pace of development. </p><br><h1 id="stilizaciya-storonnih-komponent">  Styling third-party component </h1><br><p>  Ok, we screwed the datepicker, and it even works.  But the trouble, he looks like a white crow in the black quarter. </p><br><p>  If the developer of the component, in the name of great encapsulation, isolated styles using css-in-js, css-modules or even web-components, then you can only congratulate you on the need to style the third-party component through a bundle of crutches.  For example, you can have this kind of selectors if you need to style the days in the drop-down calendar in datepicker. </p><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* No isolation */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.my_date</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.acme_calendar_day</span></span> { ... } <span class="hljs-comment"><span class="hljs-comment">/* Angular default isolation */</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:host</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::ng-deep</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.calendar</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::ng-deep</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.day</span></span> { ... } <span class="hljs-comment"><span class="hljs-comment">/* CSSModules isolation */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.date</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[class*="calendar"]</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[class*="day"]</span></span> { ... }</code> </pre> <br><h1 id="inkapsulyaciya-i-izolyaciya">  Encapsulation and Isolation </h1><br><p>  It is important to understand the difference between encapsulation and isolation. </p><br><ul><li>  Encapsulation - the ability to work without knowing the entrails </li><li>  Isolation - inability to work with viscera </li></ul><br><p>  Encapsulation allows you to work with a complex thing through a simple interface, but does not interfere and immerse yourself in the inside when it is really necessary.  Isolation is a much stronger constraint that binds us hand and foot and forks a third-party component to organically fit it into its application. </p><br><h1 id="stilizaciya-mol-komponent">  Styling $ mol component </h1><br><p>  $ mol is permeated by encapsulation from head to toe.  But there is no isolation in it.  At all.  No.  Even in scripts.  But in $ mol there are global unique human-readable names and uniform rules of stylization, which are their own, which are third-party components. </p><br><pre> <code class="css hljs"><span class="hljs-comment"><span class="hljs-comment">/* ( $mol_view as "Day" ) from $mol_calendar */</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[mol_calendar_day]</span></span> { ... } <span class="hljs-comment"><span class="hljs-comment">/* Day from ( $mol_calendar as "Calendar" ) from $mol_date */</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[mol_date_calendar_day]</span></span> { ... } <span class="hljs-comment"><span class="hljs-comment">/* Day from Calendar from $my_date that inherits $mol_date */</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[my_date_calendar_day]</span></span> { ... }</code> </pre> <br><p>  In the given example, the name "my_date_calendar_day" is formed automatically according to the following principle ... First, the global name of the component ("my_date") is taken, then the local name of the calendar in the context of the owner ("calendar") is glued to it, and so on. he was not in the hierarchy. </p><br><h1 id="generiruemyy-dom-v-mol">  Generated DOM in $ mol </h1><br><p>  The most pleasant thing about styling the $ mol component is that the programmer does not need to manually assign a class-wrapper to each house-element ‚Äî they are generated automatically based on the generated component tree. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mol_view</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">my_date_calendar_day</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mol_date_calendar_day</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mol_calendar_day</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mol_view</span></span></span><span class="hljs-tag">&gt;</span></span> 03 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mol_view</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Just imagine: you can develop a component without thinking about its styling, but at the same time have complete control over the visualization of any house element.  Without crutches, mountains of copy-paste, increasing the specificity of selectors and other nasty things. </p><br><h1 id="zhyostkie-shablony">  Hard patterns </h1><br><p>  Take the first Angular pattern from the documentation. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>My Heroes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"heroes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let hero of heroes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.selected</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero === selectedHero"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onSelect(hero)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"badge"</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.id}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span{{hero.name}}</span></span></span><span class="hljs-tag"> &lt;/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  <strong>What is wrong with this code?</strong> </p><br><p>  From the point of view of support, he has two misfortunes: the absence of a unique class for each element and its incredible oakenness.  What will we do if on one page out of 20 we need to remove the subtitle, on the other add a paragraph with a description after it, and on the third print the names of the characters before the identifier, and not after?  There are not many options here ... </p><br><h1 id="kopipasta">  Copy-paste </h1><br><p>  The simplest thing is to copy the template several times and fix it in place. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"heroes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let hero of heroes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.selected</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero === selectedHero"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onSelect(hero)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"badge"</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.id}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span{{hero.name}}</span></span></span><span class="hljs-tag"> &lt;/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  But then we get a lot of duplication and the need for these similar, but different duplicates synchronously refactor.  This monkey job is one more hotbed of bugs. </p><br><h1 id="logika-v-shablone">  Pattern Logic </h1><br><p>  The other extreme is to teach the component to any frills that may be required from it anywhere.  And every time someone needs something else, expanding the component with new features. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subTitleVisible"</span></span></span><span class="hljs-tag">&gt;</span></span>My Heroes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag">&gt;</span></span>{{ description }}<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"heroes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let hero of heroes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.selected</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero === selectedHero"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onSelect(hero)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"badgeFirst; else badgeLast"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"badge"</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.id}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span{{hero.name}}</span></span></span><span class="hljs-tag"> &lt;/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">badgeLast</span></span></span><span class="hljs-tag">&gt;</span></span> {{hero.name}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"badge"</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.id}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  With this approach, the component very quickly turns into a large heavy Swiss knife, which is inconvenient to use and very difficult to maintain. </p><br><p>  And all the same, copy-paste appears in it when it is necessary to rearrange elements in places, add wrappers and change the structure in another way depending on the state. </p><br><p>  Any dynamic in templates is the pain and suffering of HTML programming. </p><br><h1 id="chto-ne-tak-s-html">  What is wrong with HTML? </h1><br><p>  Reflection on the problems of patterns inevitably leads to the idea that they ... are not needed at all.  If the programmer operates with components, and JS and DOM browser objects, then why do we need this mimicry under HTML, which does not have expressive power to describe components?  HTML has a very limited model. </p><br><ul><li>  There can be only one attribute dictionary. </li><li>  Attribute values ‚Äã‚Äãare strings only. </li><li>  A nested tree can be only one. </li><li>  Inside there can be many elements of the same name. </li></ul><br><p>  This is in addition to its extreme verbosity.  Components are needed: strings, numbers, flags, dictionaries, arrays, user-defined data types, two-way and one-way property binding, the unique name of each subcomponent, inheritance, mixing, partial redefinition and, finally, program logic written in a full-fledged programming language.  All of this with a very tight creak stretches on the core of HTML.  Therefore.. </p><br><h1 id="kompoziciya-vo-viewtree">  Composition in view.tree </h1><br><p>  There are no templates in $ mol at all. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/82e/17d/531/82e17d531c637302bbcdb982ac52ac47.jpg" alt="How are there no templates?"></p><br><p>  No more imitation of HTML ‚Äî only components and their interrelations.  In $ mol there is a simple and visual language for the composition of the component, which allows us to declare in a declarative form which component it contains, which name it has and how it is associated with it.  It is so simple that I will teach you its basics in just 5 minutes. </p><br><h1 id="prosteyshiy-mol-komponent-na-viewtree">  The simplest $ mol component on view.tree </h1><br><pre> <code class="hljs perl">$my_heroes $mol_view</code> </pre> <br><p>  Here, we created the $ my_heroes component, which inherits properties from the very base component $ mol_view.  One line of code of two names.  What could be easier?  In the same Angular, you will need at least 5, plus another 2 for import and registration. </p><br><h1 id="obyavlenie-svoystv-vo-viewtree">  Property declaration in view.tree </h1><br><p>  To declare a new or override an existing property - just write its name with an indent, and after the space - the default value. </p><br><pre> <code class="hljs perl">$my_heroes $mol_view <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> /</span></span></code> </pre> <br><p>  Here we have redefined the "sub" property, which will return a list of nested components. </p><br><h1 id="vlozhennye-komponenty-vo-viewtree">  Nested components in view.tree </h1><br><p>  Inside we will have 3 components: the title, subtitle and the actual list of heroes. </p><br><pre> <code class="hljs mel">$my_heroes $mol_view sub / &lt;= Title $mol_view &lt;= Title_sub $mol_view &lt;= Rows $mol_list</code> </pre> <br><p>  The left arrow means getting the property value, and after it comes the actual declaration of this property indicating its name and value separated by a space.  All that begins with "$" are component classes.  Their properties can also be overridden. </p><br><h1 id="glubokaya-ierarhiya-vo-viewtree">  Deep hierarchy in view.tree </h1><br><p>  Introducing more and more new properties, we can build a visual hierarchy of any depth we need. </p><br><pre> <code class="hljs django"><span class="xml"><span class="xml">$my_heroes $mol_view sub / </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span></span><span class="xml"><span class="hljs-tag"> $</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mol_view</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">sub</span></span></span></span><span class="xml"><span class="hljs-tag"> / &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">title</span></span></span></span><span class="xml"><span class="hljs-tag"> \ &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Title_sub</span></span></span></span><span class="xml"><span class="hljs-tag"> $</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mol_view</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">sub</span></span></span></span><span class="xml"><span class="hljs-tag"> / &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">title_sub</span></span></span></span><span class="xml"><span class="hljs-tag"> @ \</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">My</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Heroes</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Rows</span></span></span></span><span class="xml"><span class="hljs-tag"> $</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mol_list</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rows</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">rows</span></span></span></span><span class="xml"><span class="hljs-tag"> /</span></span></span></span></code> </pre> <br><p>  Here, for example, it is immediately obvious that the title is displayed in the nested component named Title, the subtitle is in Title_sub, and the lines with the characters in Rows. </p><br><h1 id="strokovye-konstanty-vo-viewtree">  String constants in view.tree </h1><br><p>  The backslash precedes the raw data, which may contain any characters other than line breaks. </p><br><pre> <code class="hljs tex">&lt;= descriptions <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span></span>  <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>   <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>   <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span> -  <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>" ' &amp; &lt; <span class="hljs-tag"><span class="hljs-tag">\</span></span></code> </pre> <br><p>  Have you dreamed of such happiness in html or json? </p><br><h1 id="lokalizaciya-vo-viewtree">  Localization in view.tree </h1><br><p>  Sewing texts in code is, of course, simple and fast, but what about localization?  Just add a dog and the text after it will be moved to a separate file with translations, and in the class generated from view.tree TypeScript there will be only an appeal using a passable key. </p><br><p>  <strong>web.locale = en.json</strong> </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"$my_heroes_title_sub"</span></span> : <span class="hljs-string"><span class="hljs-string">"My Heroes"</span></span> }</code> </pre> <br><p>  <strong>heroes.view.tree.ts</strong> </p><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> title_sub @ \My Heroes title_sub() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> this.$.$mol_locale.text( <span class="hljs-string"><span class="hljs-string">"$my_heroes_title_sub"</span></span> ) }</code> </pre> <br><p>  Please note that a piece of the source responsible for this property is always displayed side by side in the comments.  That allows you to quickly master the syntax view.tree. </p><br><h1 id="multisvoystva-vo-viewtree">  Multiproperties in view.tree </h1><br><p>  Normal properties always return a single value.  Multi-properties can return different values ‚Äã‚Äãdepending on the key passed to them. </p><br><pre> <code class="hljs erlang-repl">$my_heroes $mol_view - ... Row!index $mol_row sub &lt;= item_content!index / &lt;= Badge!index $my_badge title &lt;= hero_id!index \ &lt;= hero_name!index \</code> </pre> <br><p>  In this case, the key for the strings of heroes and everything that is in them we will have their ordinal index. </p><br><h1 id="udalyaem-podzagolovok-iz-my_heroes">  Remove the subtitle from $ my_heroes </h1><br><p>  So, why do we need all this whistle with a bunch of properties?  The fact is that each such property is an extension point.  We can change any aspect of behavior in a component simply by redefining the corresponding property. </p><br><pre> <code class="hljs php">$my_top_heroes $my_heroes Title_sub <span class="hljs-keyword"><span class="hljs-keyword">null</span></span></code> </pre> <br><p>  Here we have created a new component based on the base one, but instead of the nested component, we simply return null, which leads to its complete exclusion from rendering. </p><br><h1 id="dobavlyaem-opisanie-v-my_heroes">  Add a description to $ my_heroes </h1><br><p>  By overriding lists, we can add new components between existing ones. </p><br><pre> <code class="hljs django"><span class="xml"><span class="xml">$my_new_heroes $my_heroes sub / </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Title_sub</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Description</span></span></span></span><span class="xml"><span class="hljs-tag"> $</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mol_text</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">description</span></span></span></span><span class="xml"><span class="hljs-tag"> \ &lt;= </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">Rows</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span></span></span></span></code> </pre> <br><p>  Here we declare a component that is exactly the component of $ my_heroes, but after the headers has an additional immediately declared block with a description. </p><br><h1 id="menyaem-mestami-bloki-v-my_heroes">  Swap the blocks in $ my_heroes </h1><br><p>  And, of course, we can easily and easily rearrange components, somewhere in the depths.  For example, the name and identifier of the hero. </p><br><pre> <code class="hljs perl">$my_reflect_heroes $my_heroes item_content!<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> / &lt;= hero_name!<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> - &lt;= Badge!<span class="hljs-keyword"><span class="hljs-keyword">index</span></span> -</code> </pre> <br><p>  The view.tree language is so convenient for describing components that it pulls it to be used to describe any classes at all.  And this is actually possible, but only with caution. </p><br><h1 id="logika-komponent-v-mol">  Component logic in $ mol </h1><br><p>  But sometimes you need nontrivial logic to calculate properties.  And the logic is best described in the language intended for it.  Therefore, we simply inherit from the automatically generated class from view.tree and redefine its properties, implementing any trick. </p><br><pre> <code class="hljs kotlin">export $my_heroes extends $.$my_heroes { heroes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $mol_http.resource( <span class="hljs-string"><span class="hljs-string">'/heroes'</span></span> ).json() } rows() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Object.keys( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroes() ).map( index =<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Row( index ) ) } hero_name( id : string ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.heroes()[ id ].name } }</code> </pre> <br><p>  Here we loaded the json array with the heroes' data from the server, created for each hero a display line declared in view.tree, and declared a multi-property that returns the name of the hero by its ordinal number. </p><br><p>  Somehow too easy, is not it?  But this is the whole point, that abstractions should simplify development, and not complicate it. </p><br><h1 id="hayp">  HYIP </h1><br><p>  And now about the sad - the problem of a rooster and eggs. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/276/d93/e12/276d93e12096cb04e8cba31ddeb7ffeb.jpg" alt="If he was so cool, then why not he used anywhere?"></p><br><p>  Developers are not eager to learn a tool for which there are few vacancies.  A company - tied to a tool for which few professionals.  So it turns out that bright ideas that simplify and cheapen the development die in the shadow of larger, but less functional libraries, forcing to write a bunch of the same type of code with a bunch of bicycles. </p><br><h1 id="ozhidaniya-i-realnost">  Expectations and reality </h1><br><p>  Remarkable is the <a href="https://habrahabr.ru/company/tinkoff/blog/303580/">experience of Tinkoff Bank</a> , where a team of experts better than me for a long time has been developing a new version of Internet banking in the fashionable React.  It turned out pretty braking monster with less functionality, which is then optimized for a very long time.  But the result is still far from perfect. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/eeb/c5d/3da/eebc5d3da8aabd8f22ac820836dd4ce5.jpg" alt="In sweat"></p><br><p>  At $ mol, a smaller team in a shorter period could have achieved much greater responsiveness of the interface.  And immediately, but not after user complaints. </p><br><h1 id="surovaya-pravda-zhizni">  The harsh truth of life </h1><br><p>  Or an example from the RIT 2017 conference, where the guys from Wrike talked about Angular and React.  They showed slides through an application specially written for the speech, allowing the audience to vote in real time for one of the frameworks. </p><br><p>  <strong>What do you think, on what framework did they implement it?</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2bd/a27/145/2bda27145cead6a6d38f7e9a4c03f9ae.jpg" alt="Angulyar or React?"></p><br><p>  On jQuery.  Because it turned out to be easier to do.  By the way, it turned out to be easier for me to write down the application on $ mol.  Draw conclusions. </p><br><h1 id="faktor-avtobusa">  Bus factor </h1><br><p>  There is a more significant disadvantage of a small community ... </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b13/1fa/021/b131fa0210c63b4889472c68efd72c2f.jpg" alt="Who will you get bored?"></p><br><p>  When the maintainer falls exhausted to the ground, his flag has to be picked up by the one who needs it most.  Understanding this, I designed $ mol such that it was no more time consuming to maintain than the final application based on it.  There are no more than 10 thousand lines of code, grouped into small highly specialized replaceable modules that have a very flat structure.  This is a drop in the ocean compared to any more or less large application.  And this is the drop in which it is most likely the easiest to understand. </p><br><h1 id="soobschestvo-mol">  $ Mol community </h1><br><p>  Do not forget about the social component.  We do not have huge marketing budgets, so we cannot afford the fragmentation of the community in the spirit of Angular, where one half saws applications in TypeScript, the other half in JavaScript, and the third in general in Dart.  We concentrate on the fact that all our small community can work together to develop a common component base. </p><br><ol><li>  Easy use of a third-party module. </li><li>  Easy sharing your module. </li><li>  Easy development of multiple modules by one person. </li><li>  Best practices out of the box. </li><li>  Catalog of all components. </li><li>  Global refactoring of all repositories. </li></ol><br><p>  There is no need to bike everyone in your project the same typical solutions.  It is better to devote time to creating something truly new. </p><br><h1 id="prodolzhenie-sleduet">  To be continued </h1><br><p>  Hope I managed to infect you with $ mol ideas.  Offer yours.  Or just tell us about your pain, and together we will think of something so that it will no longer exist. </p><br><ul><li>  <a href="https://nin-jin.github.io/slides/mol/">nin-jin.github.io/slides/mol</a> - these slides </li><li>  <a href="https://nin-jin.github.io/slides/orp">nin-jin.github.io/slides/orp</a> - miracles of reactivity and disadvantages of React </li><li>  <a href="http://mol.js.org/">mol.js.org</a> - the $ mol component directory </li><li>  <a href="https://t.me/mam_mol">t.me/mam_mol</a> - cozy $ mol chat </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/341146/">https://habr.com/ru/post/341146/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341134/index.html">Design pattern "state" twenty years later</a></li>
<li><a href="../341138/index.html">Step-by-step tutorial on working with Antlr4 with Maven project for Java through Intellij Idea</a></li>
<li><a href="../341140/index.html">Bonus vs depreirovanie</a></li>
<li><a href="../341142/index.html">We look for typo names in PostgreSQL</a></li>
<li><a href="../341144/index.html">What every C programmer should know about Undefined Behavior. Part 2/3</a></li>
<li><a href="../341148/index.html">Fuzzy string comparison: understand me if you can</a></li>
<li><a href="../341152/index.html">Development of 2D sandboxes on JavaScript from scratch</a></li>
<li><a href="../341154/index.html">What every C programmer should know about Undefined Behavior. Part 3/3</a></li>
<li><a href="../341156/index.html">Security Week 43: The Great IoT Reap Is Coming, Like NATO Cyberconf Hackers Flying, Bad Exception Rabbit Ears ExPetr</a></li>
<li><a href="../341160/index.html">Remove radial distortion from photos and videos using the openCV library and the python language</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
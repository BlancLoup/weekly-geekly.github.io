<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Music from keygens. How it works?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A long time ago, many people were interested in one question: ‚ÄúThis program takes only 100 kb, what kind of music does it play? How it works?" 

 So, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Music from keygens. How it works?</h1><div class="post__text post__text-html js-mediator-article">  A long time ago, many people were interested in one question: ‚ÄúThis program takes only 100 kb, what kind of music does it play?  How it works?" <br><br>  So, this miracle is called Tracker music.  And most importantly - it takes up very little space, unlike .mp3 or .wav.  In today's popular OS, tracker files (MOD, XM, S3M, IT, etc.) are played by most media players, for example, Winamp, VLC, Amarok, Audacious and others. <br><br>  You can download such music, for example from here - <a href="http://keygenmusic.net/">keygenmusic.net</a> , or from here <a href="http://www.modarchive.org/">www.modarchive.org</a> .  These are not the only resources, one has only to turn to the search. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to play such music in our program, we need minimal knowledge of C ++, as well as minifmod, available in the source code.  According to the developers, minifmod will add only 50 kb to your exe-file (without compression). <br><br><a name="habracut"></a><br>  So, the brief theory is over, we start programming.  For our tests, we download everything we need from here <a href="http://www2.zippyshare.com/v/26128618/file.html">www2.zippyshare.com/v/26128618/file.html</a> <em>(in the archive the source of the test project, minifmod itself, one music file, converter, etc.)</em> <br><br>  <strong>Step 1.</strong> We need to get a composition in the format * .xm or * .mod <em>(if you have a file in the format * .mod - you need to convert it to the format .xm using the mod2xm converter)</em> <br><br>  <strong>Step 2.</strong> Then open the Table extractor, File - Load menu and specify our * .xm file.  The settings will be as follows: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/89/ea/89eaabacd6ab841ac94dfa7520110c37.jpg"></a> <br><br>  After clicking on the <strong>Go!</strong>  , in the folder with the .xm file, the Result.txt file appears.  Rename it to music.h and replace the file \ loadmusic \ music.h.  In this file, our music track, which we will play. <br><br>  <strong>Step 3.</strong> Create a new project, and connect to it everything that lies in the lib and loadmusic.  We will look like this: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/e3/78/e37818e8c261dea3adc34ff2fa5644ba.jpg"></a> <br><br>  <strong>Stage 4.</strong> Since  in the project, the files are in the old style ‚ÄúC‚Äù, then the studio requires that the Precompiled Header be disabled, for this purpose we disable them in the project properties (in Visual Studio -&gt; properties of the project -&gt; C / C ++ - Precompiled Headers - Not Using Precompiled Headers) <br><br>  <strong>Stage 5.</strong> The most important thing - it remains only to turn on the music and let it play))) I got the following entry point source file: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#include &lt;iostream&gt; <br> <br> #include <font color="#A31515">"loadmusic\loadmusic.h"</font> <br> #include <font color="#A31515">"lib\minifmod.h"</font> <br> <br> <font color="#0000ff">#define</font> WIN32_LEAN_AND_MEAN <font color="#008000">// this will assume smaller exe</font> <br> <br> FMUSIC_MODULE *mod; <font color="#008000">// fmod music handler</font> <br> <br> <font color="#0000ff">using</font> <font color="#0000ff">namespace</font> std; <br> <br> <font color="#0000ff">int</font> main() <br> { <br> cout &lt;&lt; <font color="#A31515">"Press 'p' to play music "</font> &lt;&lt; endl &lt;&lt; <font color="#A31515">"'s' to stop"</font> &lt;&lt; endl &lt;&lt; <font color="#A31515">"'e' to exit"</font> &lt;&lt; endl; <br> <br> <font color="#0000ff">char</font> i( <font color="#A31515">'p'</font> ); <br> <font color="#0000ff">do</font> <br> { <br> <font color="#0000ff">switch</font> (i) <br> { <br> <font color="#0000ff">case</font> <font color="#A31515">'p'</font> : <br> <font color="#0000ff">if</font> (mod == NULL) <font color="#008000">// mod handle is free? (thouh it will work fine with other loaded audio devices)</font> <br> { <br> <font color="#008000">// We defined our music file to be loaded in LoadMusic.cpp //</font> <br> <font color="#008000">//=============================================================//</font> <br> loadmusic(); <font color="#008000">// Call &amp; set ready memory to load the music</font> <br> <font color="#0000ff">if</font> (!FSOUND_Init(44100, 0)) <font color="#008000">// intialize memory for sound</font> <br> { <br> <font color="#0000ff">return</font> 1; <br> } <br> <br> mod = FMUSIC_LoadSong(NULL, NULL); <font color="#008000">// handle = LoadSong()</font> <br> FMUSIC_PlaySong(mod); <font color="#008000">// Play it (from memory)</font> <br> } <br> <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> <font color="#A31515">'s'</font> : <br> <font color="#0000ff">if</font> (mod != NULL) <font color="#008000">// handle is loaded (playing)?</font> <br> { <br> FMUSIC_FreeSong(mod); <font color="#008000">// Free memory (handle)</font> <br> FSOUND_Close(); <font color="#008000">// Close it (stop it from playing)</font> <br> mod=NULL; <font color="#008000">// make handle to be Free again</font> <br> } <br> <font color="#0000ff">break</font> ; <br> } <br> <br> cin &gt;&gt; i; <br> } <br> <font color="#0000ff">while</font> (i != <font color="#A31515">'e'</font> ); <br> <br> <font color="#0000ff">if</font> (mod != NULL) <font color="#008000">// music is on?</font> <br> { <br> FMUSIC_FreeSong(mod); <font color="#008000">// Free it from memory (the handle - "mod")</font> <br> FSOUND_Close(); <font color="#008000">// Close Music</font> <br> } <br> <br> <font color="#0000ff">return</font> 0; <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  By default, the music starts playing immediately.  If you enter 's' - then it stops, 'e' - exit the program. <br><br>  <strong>What is the file size?</strong> <br>  Testing conducted on VS 2010 Express Edition.  I installed the use of static linking, after which I got an exe of 166 kb in size.  In order to reduce the size - compress it using upx, with a maximum compression ratio of -9.  After compressing the file, the output is an 84 kb file, which is pretty good! <br><br>  <strong>UPD:</strong> maybe someone will not have a studio on hand to compile.  Here is a ready-made exe, 84 kb in size <a href="http://www44.zippyshare.com/v/11053986/file.html">download</a> </div><p>Source: <a href="https://habr.com/ru/post/105475/">https://habr.com/ru/post/105475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105468/index.html">Another first development experience for the AppStore</a></li>
<li><a href="../105469/index.html">Online version of Seesu with Vkontakte Open API and mp3 search by soundcloud</a></li>
<li><a href="../105471/index.html">WebLeads - website development requests exchange</a></li>
<li><a href="../105472/index.html">Entrepreneurship in the field of public goods</a></li>
<li><a href="../105473/index.html">Not only "by necessity"</a></li>
<li><a href="../105476/index.html">Simple presentation rules for an entrepreneur</a></li>
<li><a href="../105477/index.html">MTX - the perfect solution for creating web forms and databases online</a></li>
<li><a href="../105478/index.html">Online Shopping in Japan</a></li>
<li><a href="../105479/index.html">M-Files - our first video</a></li>
<li><a href="../105480/index.html">AdOffer invites you to start</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
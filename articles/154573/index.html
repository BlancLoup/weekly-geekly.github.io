<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing Gitorious on Centos 6</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gitorious - an open source alternative to GitHUB, written in RoR, uses ActiveMQ (in this case Stomp) 
 The installation was performed on a freshly ins...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing Gitorious on Centos 6</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/4b7/bb3/e22/4b7bb3e22702a06b4f0962f77c38cc64.png" alt="image"><br>  <b>Gitorious</b> - an open source alternative to GitHUB, written in RoR, uses ActiveMQ (in this case Stomp) <br>  The installation was performed on a freshly installed CentOS-6.2-x86_64-minimal distribution kit.  All commands are executed from root, where a different user is needed will be an appropriate indication. <br><br>  Installation time ~ 3 hours <br><a name="habracut"></a><br>  <b>Preparing to install Gitorious</b> <br><br>  For convenience, I installed the nano console text editor (I don‚Äôt like vi), wget‚Äôs shaker, midnight commander file manager 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">yum install nano wget mc</code> </pre> <br><br>  Now you need to add the RPMForge repository <br><br><pre> <code class="bash hljs">wget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm rpm -ivh rpmforge-release-0.5.2-2.el6.rf.x86_64.rpm</code> </pre><br><br>  Then update the system and install some required packages. <br><br><pre> <code class="bash hljs">yum update yum groupinstall -y <span class="hljs-string"><span class="hljs-string">"Development tools"</span></span> <span class="hljs-string"><span class="hljs-string">"Development Libraries"</span></span> yum install -y git-core git-svn java-1.6.0-openjdk vim-* apg pcre pcre-devel zlib zlib-devel libyaml-devel GeoIP-devel sphinx mysql-devel mysql-server mysql readline-devel libxml2-devel libxslt libxslt-devel aspell*</code> </pre><br><br>  <b>Mysql</b> <br><br>  Now we set up MySQL <br><br><pre> <code class="bash hljs">service mysqld start /usr/bin/mysql_secure_installation</code> </pre><br><br>  Set a password for the root user and answer yes to all requests. <br><br>  <b>Ruby Enterprise Edition</b> <br><br>  Download the latest ruby ‚Äã‚Äãenterprise distribution from <a href="http://www.rubyenterpriseedition.com/download.html">www.rubyenterpriseedition.com/download.html</a> and install <br><br><pre> <code class="bash hljs">wget http://rubyenterpriseedition.googlecode.com/files/ruby-enterprise-1.8.7-2012.02.tar.gz tar xzf tar xzf ruby-enterprise-1.8.7-2012.02.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ruby-enterprise-1.8.7-2012.02 ./installer</code> </pre><br><br>  Click Enter 2 times and wait for the installation to finish. <br>  We configure ruby ‚Äã‚Äãand we change variable environments <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt ln -s ruby-enterprise-1.8.7-2012.02/ ruby nano /etc/profile      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$EUID</span></span></span><span class="hljs-string">"</span></span> = <span class="hljs-string"><span class="hljs-string">"0"</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> pathmunge /opt/ruby/bin <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> RAILS_ENV=production <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sphinx/bin:/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> _JAVA_OPTIONS=-Xmx64m <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MAGICK_HOME=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> DYLD_LIBRARY_PATH=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib</code> </pre><br><br>  Add the following settings to the very end of the file. <br><pre> <code class="bash hljs">nano /etc/bashrc <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pathmungea</span></span></span></span> () { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ! <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> | /bin/egrep -q <span class="hljs-string"><span class="hljs-string">"(^|:)</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string">($|:)"</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$2</span></span></span><span class="hljs-string">"</span></span> = <span class="hljs-string"><span class="hljs-string">"after"</span></span> ] ; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> PATH=<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span>:<span class="hljs-variable"><span class="hljs-variable">$1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> PATH=<span class="hljs-variable"><span class="hljs-variable">$1</span></span>:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> } pathmungea /opt/ruby/bin <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> RAILS_ENV=production <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sphinx/bin:/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> _JAVA_OPTIONS=-Xmx64m <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MAGICK_HOME=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> DYLD_LIBRARY_PATH=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib <span class="hljs-built_in"><span class="hljs-built_in">unset</span></span> pathmungea</code> </pre><br><br>  Now relogin and proceed with the installation of ImageMagick <br><br>  <b>Imagemagick</b> <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ yum install -y tcl-devel libpng-devel libjpeg-devel ghostscript-devel bzip2-devel freetype-devel libtiff-devel</code> </pre><br><br>  yum is an outdated version of ImageMagick, so we install from source to prevent errors <br><pre> <code class="bash hljs">wget ftp://ftp.imagemagick.org/pub/ImageMagick/ImageMagick-6.7.6-1.tar.gz tar xzf ImageMagick-6.7.6-1.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ImageMagick-6.7.6-1 ./configure --prefix=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span> --with-bzlib=yes --with-fontconfig=yes --with-freetype=yes --with-gslib=yes --with-gvc=yes --with-jpeg=yes --with-jp2=yes --with-png=yes --with-tiff=yes make make install</code> </pre><br><br>  Now you need to install some ruby ‚Äã‚Äãgems and bundle exec <br><br><pre> <code class="bash hljs">gem install bundle gem install sphinx rmagick ultrasphinx mime-types chronic ruby-hmac daemons mime-types BlueCloth ruby-yadis ruby-openid rspec rspec-rails RedCloth stompserver --no-ri --no-rdoc</code> </pre><br><br>  Add EPEL repository (download.fedora.redhat.com changed to dl.fedoraproject.org) <br><br><pre> <code class="bash hljs">wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-5.noarch.rpm wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm rpm -Uvh remi-release-6*.rpm epel-release-6*.rpm</code> </pre><br><br>  <b>Gitorious</b> <br><br>  Actually finished with the preparation, now you can safely proceed to the installation of the subject. <br><br>  useradd -d / home / git git <br><br><pre> <code class="bash hljs">su git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ mkdir <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> mkdir conf git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://gitorious.org/gitorious/mainline.git gitorious <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> gitorious/ mkdir -p tmp/pids <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> <span class="hljs-comment"><span class="hljs-comment">#logout  root ln -s /home/git/gitorious/script/gitorious /usr/local/bin/gitorious cd /home/git/gitorious/ chmod ug+x script/* chmod -R g+w config/ log/ public/ tmp/</span></span></code> </pre><br><br>  Configuring gitorious <br><br><pre> <code class="bash hljs">su git nano /home/git/gitorious/doc/templates/centos/git-daemon RUBY_HOME=<span class="hljs-string"><span class="hljs-string">"/opt/ruby"</span></span> GITORIOUS_HOME=<span class="hljs-string"><span class="hljs-string">"/home/git/gitorious"</span></span> nano /home/git/gitorious/doc/templates/centos/git-ultrasphinx GITORIOUS_HOME=<span class="hljs-string"><span class="hljs-string">"/home/git/gitorious"</span></span> nano /home/git/gitorious/doc/templates/centos/git-poller RUBY_HOME=<span class="hljs-string"><span class="hljs-string">"/opt/ruby"</span></span> GITORIOUS_HOME=<span class="hljs-string"><span class="hljs-string">"/home/git/gitorious"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> _JAVA_OPTIONS=-Xmx64m nano /home/git/gitorious/doc/templates/centos/stomp RUBY_HOME=<span class="hljs-string"><span class="hljs-string">"/opt/ruby"</span></span> GEMS_HOME=<span class="hljs-string"><span class="hljs-string">"/opt/ruby"</span></span> GITORIOUS_HOME=<span class="hljs-string"><span class="hljs-string">"/home/git/gitorious"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> gem install --no-ri --no-rdoc -v 1.5.0 json gem install --no-ri --no-rdoc -v 1.3.1.1 rdiscount gem install --no-ri --no-rdoc -v 0.8.7 rake gem install --no-ri --no-rdoc -v 1.1.0 daemons gem install --no-ri --no-rdoc -v 0.8.9 geoip gem install --no-ri --no-rdoc -v 1.0 raspell gem uninstall rake -v 0.9.2.2 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/git/gitorious bundle install cp config/database.sample.yml config/database.yml cp config/gitorious.sample.yml config/gitorious.yml cp config/broker.yml.example config/broker.yml su git mkdir /home/git/data mkdir /home/git/data/repositories mkdir /home/git/data/tarballs mkdir /home/git/data/tarball-work chown -R git:git /home/git/data <span class="hljs-comment"><span class="hljs-comment">#    mkdir /home/git/.ssh chmod -R 700 /home/git/.ssh touch /home/git/.ssh/authorized_keys chmod 600 /home/git/.ssh/authorized_keys chmod -R 700 /home/git/data exit chown -R git:git /home/git chmod 711 /home/git</span></span></code> </pre><br>  Create a secret cookie for the configuration file <br><br><pre> <code class="bash hljs">apg -m 64</code> </pre><br><br>  and copy the data to a file <br><pre> <code class="bash hljs">nano /home/git/gitorious/config/gitorious.yml</code> </pre><br>  in the cookie_secret string: <br><br>  Example: <br><br><pre> <code class="bash hljs">development: cookie_secret: SwouncievNivJucivrevnisfookEcnasiarHamgogdipmopyicbyctyikBagArimgronugAmIsUkDifpoyftEggobviuzIpArgecHewElsOcubnuejEtDecerlyooHibsmivyecivfalakMarfAvikokip^ojyorwahonkIrEdeibZepbivsaftIdmapmic)frivetcetEceivepJuxNeipnidzaroyffAgVevfuIvDesemAfyacAppAtdeavayswenEjUcoofnafryefGewboshkyersufcawJontIavZenFeifWoitGejEajnoiWrysawidHewofOkheTwiOjFigWigbobinCushBurnErnodedLuenAtTeyznoynoryop repository_base_path: <span class="hljs-string"><span class="hljs-string">"/home/git/data/repositories"</span></span> extra_html_head_data: system_message: gitorious_client_port: 80 gitorious_client_host: git.example.com gitorious_host: git.example.com gitorious_user: git exception_notification_emails: admin@example.com mangle_email_addresses: <span class="hljs-literal"><span class="hljs-literal">true</span></span> public_mode: <span class="hljs-literal"><span class="hljs-literal">true</span></span> locale: en archive_cache_dir: <span class="hljs-string"><span class="hljs-string">"/home/git/data/tarballs"</span></span> archive_work_dir: <span class="hljs-string"><span class="hljs-string">"/home/git/data/tarball-work"</span></span> only_site_admins_can_create_projects: <span class="hljs-literal"><span class="hljs-literal">true</span></span> hide_http_clone_urls: <span class="hljs-literal"><span class="hljs-literal">false</span></span> is_gitorious_dot_org: <span class="hljs-literal"><span class="hljs-literal">false</span></span> use_ssl: <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>: cookie_secret: SwouncievNivJucivrevnisfookEcnasiarHamgogdipmopyicbyctyikBagArimgronugAmIsUkDifpoyftEggobviuzIpArgecHewElsOcubnuejEtDecerlyooHibsmivyecivfalakMarfAvikokip^ojyorwahonkIrEdeibZepbivsaftIdmapmic)frivetcetEceivepJuxNeipnidzaroyffAgVevfuIvDesemAfyacAppAtdeavayswenEjUcoofnafryefGewboshkyersufcawJontIavZenFeifWoitGejEajnoiWrysawidHewofOkheTwiOjFigWigbobinCushBurnErnodedLuenAtTeyznoynoryop repository_base_path: <span class="hljs-string"><span class="hljs-string">"/home/git/data/repositories"</span></span> extra_html_head_data: system_message: gitorious_client_port: 80 gitorious_client_host: git.example.com gitorious_host: git.example.com gitorious_user: git exception_notification_emails: admin@example.com mangle_email_addresses: <span class="hljs-literal"><span class="hljs-literal">true</span></span> public_mode: <span class="hljs-literal"><span class="hljs-literal">true</span></span> locale: en archive_cache_dir: <span class="hljs-string"><span class="hljs-string">"/home/git/data/tarballs"</span></span> archive_work_dir: <span class="hljs-string"><span class="hljs-string">"/home/git/data/tarball-work"</span></span> only_site_admins_can_create_projects: <span class="hljs-literal"><span class="hljs-literal">true</span></span> hide_http_clone_urls: <span class="hljs-literal"><span class="hljs-literal">false</span></span> is_gitorious_dot_org: <span class="hljs-literal"><span class="hljs-literal">false</span></span> use_ssl: <span class="hljs-literal"><span class="hljs-literal">false</span></span> production: cookie_secret: SwouncievNivJucivrevnisfookEcnasiarHamgogdipmopyicbyctyikBagArimgronugAmIsUkDifpoyftEggobviuzIpArgecHewElsOcubnuejEtDecerlyooHibsmivyecivfalakMarfAvikokip^ojyorwahonkIrEdeibZepbivsaftIdmapmic)frivetcetEceivepJuxNeipnidzaroyffAgVevfuIvDesemAfyacAppAtdeavayswenEjUcoofnafryefGewboshkyersufcawJontIavZenFeifWoitGejEajnoiWrysawidHewofOkheTwiOjFigWigbobinCushBurnErnodedLuenAtTeyznoynoryop repository_base_path: <span class="hljs-string"><span class="hljs-string">"/home/git/data/repositories"</span></span> extra_html_head_data: system_message: gitorious_client_port: 80 gitorious_client_host: git.example.com gitorious_host: git.matthouse.us gitorious_user: git exception_notification_emails: admin@example.com mangle_email_addresses: <span class="hljs-literal"><span class="hljs-literal">true</span></span> public_mode: <span class="hljs-literal"><span class="hljs-literal">true</span></span> locale: en archive_cache_dir: <span class="hljs-string"><span class="hljs-string">"/home/git/data/tarballs"</span></span> archive_work_dir: <span class="hljs-string"><span class="hljs-string">"/home/git/data/tarball-work"</span></span> only_site_admins_can_create_projects: <span class="hljs-literal"><span class="hljs-literal">true</span></span> hide_http_clone_urls: <span class="hljs-literal"><span class="hljs-literal">false</span></span> is_gitorious_dot_org: <span class="hljs-literal"><span class="hljs-literal">false</span></span> use_ssl: <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre><br><br>  Continue setting: <br><br><pre> <code class="bash hljs">nano /home/git/gitorious/config/broker.yml production: adapter: stomp development: adapter: stomp <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>: adapter: stomp</code> </pre><br><br>  configure Mysql and initialize the database <br><br><pre> <code class="bash hljs">mysql -uroot ‚Äìp<span class="hljs-string"><span class="hljs-string">'&lt;ROOT'</span></span>S MYSQL PASSWORD&gt;<span class="hljs-string"><span class="hljs-string">' create database gitorious; create database gitorious_test; create database gitorious_dev; CREATE user '</span></span>git<span class="hljs-string"><span class="hljs-string">'@'</span></span>localhost<span class="hljs-string"><span class="hljs-string">' IDENTIFIED BY '</span></span>&lt;PASWORD&gt;<span class="hljs-string"><span class="hljs-string">'; GRANT ALL ON gitorious.* TO '</span></span>git<span class="hljs-string"><span class="hljs-string">'@'</span></span>localhost<span class="hljs-string"><span class="hljs-string">'; GRANT ALL ON gitorious_test.* TO '</span></span>git<span class="hljs-string"><span class="hljs-string">'@'</span></span>localhost<span class="hljs-string"><span class="hljs-string">'; GRANT ALL ON gitorious_dev.* TO '</span></span>git<span class="hljs-string"><span class="hljs-string">'@'</span></span>localhost<span class="hljs-string"><span class="hljs-string">'; FLUSH privileges; exit; nano /home/git/gitorious/config/database.yml cd /home chown -R git:git /home/git cd /home/git chmod -R 755 data chmod 755 gitorious cd /home/git/gitorious</span></span></code> </pre><br><br><pre> <code class="bash hljs">nano Rakefile <span class="hljs-comment"><span class="hljs-comment">#  require 'thread' # require 'tasks/rails'</span></span></code> </pre><br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home chown -R git:git /home/git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/git chmod -R 755 data chmod 755 gitorious gem update --system 1.6.2 bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake gems:install bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake db:create:all bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake db:setup bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake db:migrate</code> </pre><br><br>  Ultrsphinx setup: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/git/gitorious <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> RAILS_ENV=production <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sphinx/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake ultrasphinx:configure RAILS_ENV=production bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake ultrasphinx:index bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake ultrasphinx:daemon:start RAILS_ENV=production</code> </pre><br><br>  create links to init files and start the services necessary for Gitorious to work <br><br><pre> <code class="bash hljs">ln -s /home/git/gitorious/doc/templates/centos/git-daemon /etc/init.d/git-daemon chmod +x /etc/init.d/git-daemon chkconfig --add git-daemon service git-daemon start ln -s /home/git/gitorious/doc/templates/centos/stomp /etc/init.d/stomp chmod +x /etc/init.d/stomp chkconfig --add stomp service stomp start ln -s /home/git/gitorious/doc/templates/centos/git-poller /etc/init.d/git-poller <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home chown -R git:git /home/git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/git chmod -R 755 data chmod 755 gitorious chmod +x /etc/init.d/git-poller chkconfig --add git-poller nano /home/git/gitorious/script/poller <span class="hljs-comment"><span class="hljs-comment">#  require 'thread'   $KCODE = 'u' service git-poller start ln -s /usr/local/bin/gitorious /usr/bin cd /home chown -R git:git /home/git cd /home/git chmod -R 755 data chmod 755 gitorious</span></span></code> </pre><br><br>  configuring ultrasphinx <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  cd /home/git/gitorious aspell config dict-dir /usr/lib64/aspell-0.60 cp vendor/plugins/ultrasphinx/examples/ap.multi /usr/lib64/aspell-0.60/ bundle exec rake ultrasphinx:spelling:build nano /home/git/gitorious/config/ultrasphinx/production.conf # "address" "listen" listen = 0.0.0.0 #    64 indexer { mem_limit = 64M # git-ultrasphinx . ln -s /home/git/gitorious/doc/templates/centos/git-ultrasphinx /etc/init.d/git-ultrasphinx chmod +x /etc/init.d/git-ultrasphinx</span></span></code> </pre><br><br>  <b>memcached</b> <br>  Install memcached <br><pre> <code class="bash hljs">yum install -y --enablerepo=remi memcached service memcached start chkconfig memcached on</code> </pre><br>  <b>Apache</b> <br><pre> <code class="bash hljs">yum install -y httpd httpd-devel mod_xsendfile curl-devel <span class="hljs-comment"><span class="hljs-comment"># xsendfile nano /etc/httpd/conf.d/xsendfile.conf #   LoadModule XSendFile on XSendFilePath /home/git/data/tarballs XSendFilePath /home/git/data/repositories</span></span></code> </pre><br>  Install Ruby passenger <br><pre> <code class="bash hljs">/opt/ruby/bin/passenger-install-apache2-module</code> </pre><br><br>  <a href="httpd.example">Httpd.conf</a> example <br>  <a href="httpd/blob/master/host.example">Host.conf</a> example <br><br>  Final teams: <br><br><pre> <code class="bash hljs">chcon -R -h -t httpd_sys_script_exec_t /opt/ruby/lib/ruby/gems/1.8/gems/passenger-3.0.11/ext/apache2/mod_passenger.so service httpd configtest service httpd start</code> </pre><br><br>  disable the firewall (we have a clean system, it is not yet configured) <br><pre> <code class="bash hljs">service iptables stop</code> </pre><br><br>  Open git.example.com in the browser and admire the gitorious home page. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2c3/d0c/62d/2c3d0c62d5485527cb69a8df98428ae0.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/154573/">https://habr.com/ru/post/154573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154559/index.html">We invite you to the conference MUK, Oracle and Siemens - participation is free</a></li>
<li><a href="../154561/index.html">Section "Mamba" on RIW: online dating today and tomorrow</a></li>
<li><a href="../154565/index.html">New "1C-Bitrix: Site Management 12.0" - with preference and poetess!</a></li>
<li><a href="../154567/index.html">Solving the problem of operational image resizing</a></li>
<li><a href="../154571/index.html">Kyocera - applications and tools. Part 2 - admins</a></li>
<li><a href="../154575/index.html">Office Ozon.ru</a></li>
<li><a href="../154577/index.html">What you need to know about the promotion of mobile applications in iOS 6</a></li>
<li><a href="../154579/index.html">Tt eSPORTS Level 10 M - just a mouse?</a></li>
<li><a href="../154581/index.html">Yandex Maps: Search for arbitrary objects</a></li>
<li><a href="../154583/index.html">16 ways to choose the perfect name for a startup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
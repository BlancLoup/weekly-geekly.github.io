<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Benchmarking HDFS 3 with HDFS 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our company SberTech (Sberbank Technology) currently uses HDFS 2.8.4 because it has a number of advantages, such as the Hadoop ecosystem, fast work wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Benchmarking HDFS 3 with HDFS 2</h1><div class="post__text post__text-html js-mediator-article">  Our company SberTech (Sberbank Technology) currently uses HDFS 2.8.4 because it has a number of advantages, such as the Hadoop ecosystem, fast work with large amounts of data, it is good at analytics and much more.  But in December 2017, the Apache Software Foundation released a new version of an open framework for developing and executing distributed programs - Hadoop 3.0.0, which includes a number of significant improvements over the previous main release line (hadoop-2.x).  One of the most important and interesting updates is the support of redundancy codes (Erasure Coding).  Therefore, the task was set to compare these versions with each other. <br><br>  SberTech has allocated 10 virtual machines of 40 GB in size for this research.  Since the RS (10,4) encoding policy requires a minimum of 14 machines, it will not be possible to test it. <br><br>  On one of the machines will be located NameNode in addition to the DataNode.  Testing will be conducted under the following encoding policies: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  XOR (2,1) </li><li>  RS (3.2) </li><li>  RS (6.3) </li></ul><br>  And also, using replication with a replication factor of 3. <br><br>  The size of the data block was chosen to be 32 MB. <br><a name="habracut"></a><br><h2>  Conducting research </h2><br><h3>  Data Rate Test </h3><br>  Were conducted tests on the speed of data transmission.  The data was transferred from the local file system to the distributed file system.  The size of the file used in this test is 292.2 MB. <br><br>  The following results were obtained: <br><br><img src="https://habrastorage.org/webt/u4/fb/x1/u4fbx1nmywu9_4nloanyeid4ye8.png"><br><br>  Also, a graph of grouped received values ‚Äã‚Äãof file transfer time is plotted: <br><br><img src="https://habrastorage.org/webt/qt/hk/oy/qthkoyvbezs2wzdyoxvgk71qsom.png"><br><br>  And also, a graph of the grouped received data transfer rate values: <br><br><img src="https://habrastorage.org/webt/te/9b/cg/te9bcg3kcwddgbvzxkc4xwxoj5i.png"><br><br>  As can be seen from the graph, the fastest data is transmitted with XOR (2.1) encoding.  The RS (6.3) and RS (3.2) encodings show similar behavior, although the average speed of the RS (6.3) is slightly higher.  Replication loses much speed (about 1.5 times less than XOR and 1.5 times less than RS). <br><br>  With regard to storage efficiency, XOR (2.1) and RS (6.3) are the most profitable storage methods, with redundant data as low as 50%.  Replication, with a replication ratio of 3, loses again, storing 200% of redundant data. <br><cut><br><h3>  Performance test </h3><br>  In the previous test, the status of the servers was monitored using the Grafana monitoring tool. <br><br>  Below is a graph showing the CPU load during data transfer tests: <br><br><img src="https://habrastorage.org/webt/um/f0/mi/umf0mikahbm4er90urpaty_kere.png"><br><br>  As can be seen from the graph, in this test the RS (6.3) encoding also consumes the least resources.  Replication again shows the worst result. <br><br><h3>  Resource consumption during data recovery </h3><br>  For this test, a certain amount of data was uploaded to the Hadoop distributed file system.  Then two DataNode machines were dropped. <br>  Below are graphs of the state of machines at the time of data recovery when RS (6.3) is encoded and when using replication: <br><br><img src="https://habrastorage.org/webt/sz/da/zp/szdazpchweifp2rvp4q6w_ieirc.png"><br>  <i>Processor status when recovering data using RS (6.3) encoding</i> <br><br><img src="https://habrastorage.org/webt/jd/7h/22/jd7h22hk-s8qgyqgwil0cwne8y8.png"><br>  <i>Processor status when recovering data using replication</i> <br><br>  As you can see from the graphs, RS (6.3) encoding loads the processor more than replication during data recovery, which is logical, because in order to recover lost data using redundant codes, it is necessary to calculate the inverse redundancy matrix, which consumes more resources than just overwriting data from other DataNode in case of replication. <br><br><h3>  Test results: </h3><br><ul><li>  In data transfer rates, XOR (2.1) or RS (6.3) encoding is best used. </li><li>  When transferring data, the processor loads the RS (6.3) and RS (3.2) encoding the least. </li><li>  When restoring data, the processor loses the use of replication </li><li>  The most compact way to store data is RS (6.3) and XOR (2.1) encodings. </li></ul><br>  The most reliable method of storage is RS (6.3) encoding, as it allows you to lose up to three machines without losing data, and replication with a replication rate of 3, supports failure of up to 2 machines.  XOR (2, 1) is the most unreliable way to store data, as it allows you to lose a maximum of one machine. <br><br><h2>  Conclusion </h2><br>  The main purposes of using SberTech distributed file system are: <br><br><ul><li>  Ensuring high reliability </li><li>  Minimizing server maintenance costs </li><li>  Providing tools for data analysis </li></ul><br>  According to the results of the analysis, the following conclusions were made: <br><br><ul><li>  HDFS 3 wins in reliability over HDFS 2. </li><li>  HDFS 3 wins by minimizing server maintenance costs, as it stores data more compactly. </li><li>  HDFS 3 has the same set of data analysis tools as HDFS 2. </li></ul><br>  In this regard, it is concluded that HDFS 3 is a rational replacement for HDFS 2. <br><br><h2>  Sources used: </h2><br><ul><li>  <a href="https://habr.com/company/yadro/blog/336286/">Reed-Solomon codes.</a>  <a href="https://habr.com/company/yadro/blog/336286/">Part 1</a> </li><li>  <a href="https://habr.com/company/yadro/blog/341506/">Reed-Solomon codes.</a>  <a href="https://habr.com/company/yadro/blog/341506/">Part 2 - Galois Field Arithmetic</a> </li><li>  <a href="https://hadoop.apache.org/docs/r3.0.0/">Apache Hadoop 3.0.0</a> <br></li></ul></cut></div><p>Source: <a href="https://habr.com/ru/post/418667/">https://habr.com/ru/post/418667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418657/index.html">Available mixed reality: how to create a virtual space</a></li>
<li><a href="../418659/index.html">Discover Quantum Programming with Quantum Katas</a></li>
<li><a href="../418661/index.html">Development of mixed reality: did you put the speaker in the virtual living room?</a></li>
<li><a href="../418663/index.html">How sound is created for another reality</a></li>
<li><a href="../418665/index.html">Adaptation of the project MR under HoloLens</a></li>
<li><a href="../418669/index.html">Security Week 28: NetSpectre, attack on third-party channels through a network</a></li>
<li><a href="../418673/index.html">Why the ERP market is growing: statistics and trends</a></li>
<li><a href="../418675/index.html">How I went to Droidcon Berlin</a></li>
<li><a href="../418677/index.html">The whole truth about the RTOS. Article # 6. Other RTOS services</a></li>
<li><a href="../418679/index.html">Writing a component with ‚Äúmaterial‚Äù buttons for Svelte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Exceptionally simple tasks using AppSec .NET</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I suggest everyone to stretch their brains after the weekend and start the work week with simple at first glance, C # programming tasks. Perhaps these...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Exceptionally simple tasks using AppSec .NET</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/028/50e/9ea/02850e9ea9e8457189a094e178cc0f2f.jpg" align="left">  I suggest everyone to stretch their brains after the weekend and start the work week with simple at first glance, C # programming tasks.  Perhaps these tasks will force you to look at the code of your projects from a new perspective, since they all relate to the <i>gloomy</i> area - the area of ‚Äã‚Äãapplication security, Application Security.  Not much is written about AppSec and the .NET platform, they say even less, some generally believe that using any managed language magically makes the application protected.  I try to correct this state of affairs by telling at conferences about various aspects of the security of the .NET platform.  So this week, on Thursday, our <a href="http://spbdotnet.org/">SPB .NET Community is</a> holding a mitap in St. Petersburg entirely dedicated to the <b>development of secure ASP .NET applications</b> .  Who cares about the details of this meeting, who wants to learn more about the .NET community of St. Petersburg developers and try their hand at solving the tasks on AppSec .NET, I invite you to the cat! <br><a name="habracut"></a><br>  Since Habr√© has not yet been written about the <a href="http://spbdotnet.org/">SPB .NET Community, I</a> will begin, perhaps, with it.  In June, in St. Petersburg, a community of programmers writing on .NET gathered.  Our goal is to share the experience of solving problems with which we meet during the work, to meet offline to discuss current issues and news of the .NET world.  Now the platform is experiencing a development boom, here is the output of a huge amount of code in open source, and a new web platform, and a discussion of two new C # language standards, and cross-platform, which offers great opportunities and threatens a new field of rakes.  As Lewis said, to stay in place, we have to run.  And if you run all together, then the chances of not falling behind increase (runners will understand the metaphor).  So, what has been done.  We held the first meeting, organized an island at <a href="http://piter-united.ru/main.html">IT Global Meetup</a> , where we made 4 reports, were able to meet and talk about future plans.  Judging by the reviews, they liked the reports, and the idea to revive regular meetings of the .NET party had already been in many heads. <br><br>  Now we are preparing a second meeting.  It will be held <b>on June 25, at 19.30</b> in the St. Petersburg office of DataArt, the main topic of the meeting was the <b>development of protected applications</b> .  This Thursday, Vladimir Kochetkov, a well-known expert in information security in general, and on the .NET platform in particular, Vladimir Kochetkov, comes to St. Petersburg to us.  He agreed to participate in our meeting, so whoever knows Volodya from blogs, webinars or his work at the RSDN Team, you have a chance to come and chat with him personally.  The program of the meeting includes two reports and a lot of communication, these are <b>‚ÄúTheory of Application Security .NET‚Äù</b> Vladimir Kochetkov and <b>‚ÄúPractice of Application Security .NET‚Äù</b> Mikhail Scherbakov (my report).  I spoke with the material on this topic at the last conferences, this is <a href="http://dotnext.ru/">.NEXT</a> , <a href="http://dotnetconf.ru/">dotnetconf.ru</a> , <a href="http://2015.secon.ru/">SECON</a> .  But for mitap, he prepared new examples and challenges, which we will also analyze at the meeting.  And, yes, the tasks ... I will not talk more about the mitap, read the announcement in the community group <a href="http://spbdotnet.org/">spbdotnet.org</a> , register by the <a href="https://spbdotnet.timepad.ru/event/217662/">link</a> and come.  The participation is of course free, only registration is necessary (the number of places is unfortunately limited, but there are free places). <br><br><h4>  And now the attention of the problem. </h4><br><ol><li>  Does the security problem contain the code for the following aspx page?  If so, which ones and in which lines of code?  The question with an asterisk: what data should be sent to the server to demonstrate the attacks?  The conditions for running the code are standard: on the IIS 8.5 server with default settings, the aspx page is included in the web project with default settings, it is built under Framework 4.5.1. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AutoEventWireup</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">%&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> protected </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">void</span></span></span><span class="javascript"> Page_Load(object sender, EventArgs e) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> text = TextBox1.Text + TextBox2.Text; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (text != </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">String</span></span></span><span class="javascript">.Empty) { Label1.Text = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"Input: "</span></span></span><span class="javascript"> + text; } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> { TextBox1.Text = Request[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"first"</span></span></span><span class="javascript">] + Request[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"second"</span></span></span><span class="javascript">]; } int count; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (Int32.TryParse(Request[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"count"</span></span></span><span class="javascript">], out count)) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">for</span></span></span><span class="javascript"> (int i = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">; i &lt; count; i++) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> name = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">String</span></span></span><span class="javascript">.Format(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"base64_item{0}"</span></span></span><span class="javascript">, i); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> value = Request[name]; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (value != </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">) { RadioButtonList1.Items.Add(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> ListItem(Encoding.UTF8.GetString(Convert.FromBase64String(value)), value)); } } } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xhtml"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- &lt;asp:Label runat="server"&gt; &lt;%= Request["first"] + Request["second"] %&gt; &lt;/asp:Label&gt; --&gt;</span></span> Preview: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&lt;%= ResolveUrl("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Images</span></span></span><span class="hljs-tag">/" + </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Request</span></span></span><span class="hljs-tag">["</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">page</span></span></span><span class="hljs-tag">"] + "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">.png</span></span></span><span class="hljs-tag">")%&gt;</span></span>"/&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:RadioButtonList</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RadioButtonList1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TextBox1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:TextBox</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:TextBox</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TextBox2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:TextBox</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Save"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>  Does the security issue include the following C # code?  What ways can an attacker exploit vulnerabilities, if any?  How would you fix this code?  Access to the database is done through the Entity Framework classes, CoinsDB is the context class of our database, inherited from DbContext.  CustomerLogin is the class of our entity from the database, its code is below.  The conditions for executing the code are standard, as in the example above, the database is MS SQL. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Page_Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CoinsDB()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> = String.Empty; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parameters = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> email = Request[<span class="hljs-string"><span class="hljs-string">"email"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (email != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> += String.Format(<span class="hljs-string"><span class="hljs-string">" email LIKE '{0}%'"</span></span>, email); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> field = Request[<span class="hljs-string"><span class="hljs-string">"field"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> min = Request[<span class="hljs-string"><span class="hljs-string">"min"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> max = Request[<span class="hljs-string"><span class="hljs-string">"max"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (field != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; min != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; max != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!String.IsNullOrEmpty(<span class="hljs-keyword"><span class="hljs-keyword">where</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> += <span class="hljs-string"><span class="hljs-string">" AND"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> += String.Format(<span class="hljs-string"><span class="hljs-string">" {0} &gt;= @min AND {0} &lt;= @max"</span></span>, EncodeSqlField(field)); parameters.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SqlParameter(<span class="hljs-string"><span class="hljs-string">"@min"</span></span>, min)); parameters.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SqlParameter(<span class="hljs-string"><span class="hljs-string">"@max"</span></span>, max)); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> query = <span class="hljs-string"><span class="hljs-string">"SELECT * FROM CustomerLogin"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!String.IsNullOrEmpty(<span class="hljs-keyword"><span class="hljs-keyword">where</span></span>)) { query += <span class="hljs-string"><span class="hljs-string">" WHERE"</span></span>; query += <span class="hljs-keyword"><span class="hljs-keyword">where</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> output = db.Database.SqlQuery&lt;CustomerLogin&gt;(query, parameters.ToArray()).ToArray(); lblOutput.Text = output.Length == <span class="hljs-number"><span class="hljs-number">0</span></span> ? <span class="hljs-string"><span class="hljs-string">"Not found"</span></span> : String.Join(<span class="hljs-string"><span class="hljs-string">"&lt;br/&gt;"</span></span>, output.Select(customer =&gt; customer.login + <span class="hljs-string"><span class="hljs-string">" - "</span></span> + customer.rating)); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EncodeSqlField</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> field</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> field.Replace(<span class="hljs-string"><span class="hljs-string">"'"</span></span>, String.Empty) .Replace(<span class="hljs-string"><span class="hljs-string">" "</span></span>, String.Empty) .Replace(<span class="hljs-string"><span class="hljs-string">"\\"</span></span>, String.Empty) .Replace(<span class="hljs-string"><span class="hljs-string">","</span></span>, String.Empty) .Replace(<span class="hljs-string"><span class="hljs-string">"("</span></span>, String.Empty) .Replace(<span class="hljs-string"><span class="hljs-string">")"</span></span>, String.Empty); } [Table(<span class="hljs-string"><span class="hljs-string">"CustomerLogin"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CustomerLogin</span></span> { [Key] [StringLength(<span class="hljs-number"><span class="hljs-number">100</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> login { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [StringLength(<span class="hljs-number"><span class="hljs-number">100</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> email { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> raiting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> customerNumber { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Required] [StringLength(<span class="hljs-number"><span class="hljs-number">40</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> password { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span>? question_id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [StringLength(<span class="hljs-number"><span class="hljs-number">50</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> answer { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br></li></ol><br>  Answers, please write in the comments under the spoiler.  We will analyze all interesting cases on June 25 at a mitap. </div><p>Source: <a href="https://habr.com/ru/post/260875/">https://habr.com/ru/post/260875/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260863/index.html">SED: path from easy to hard</a></li>
<li><a href="../260865/index.html">Choosing a text editor or "I want everything in one"</a></li>
<li><a href="../260867/index.html">My acquaintance with ASP.NET MVC in Visual Studio 2015 on the example of building a prototype MIS</a></li>
<li><a href="../260869/index.html">ELK + R as log repository</a></li>
<li><a href="../260873/index.html">How to learn on ABAPer?</a></li>
<li><a href="../260877/index.html">Wirmaker Abbreviations: WIM, CSRSS, EMET, CCMP, EFS, SEHOP, ASLR, KPP, UAC, DEP and one more thing</a></li>
<li><a href="../260879/index.html">Malware for OS X: the complete chronicle. The most iconic apple pests of this decade</a></li>
<li><a href="../260881/index.html">First-aid kit sysadmin. Minimal set of utilities for the most effective problem solving</a></li>
<li><a href="../260889/index.html">Microsoft cloud services popularity rating in 2015</a></li>
<li><a href="../260891/index.html">Copy dallas keys. Record on rw1990 (rw1990.1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
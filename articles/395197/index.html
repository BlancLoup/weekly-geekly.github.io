<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How a regional state data center was created</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""It is not a place that paints a person, but a person - a place" 

 We all regularly see reviews of various kinds of Data Processing Centers (DPCs): b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How a regional state data center was created</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6c9/a0a/135/6c9a0a135b194d2dadd065f032ca3427.jpg" alt="How a regional state data center was created"><br>  <i>"It is not a place that paints a person, but a person - a place"</i> <br><br>  We all regularly see reviews of various kinds of Data Processing Centers (DPCs): big, small, underwater, arctic, innovative, productive, etc. However, there are almost no reviews of those invisible heroes who work for our benefit in state dungeons, and even more so in the regions.  Therefore, I want to share my own experience of creating a data center in the Stavropol region. <br><a name="habracut"></a><br><h1>  Acquaintance </h1><br>  It was a warm summer day, as I remember it now - on June 18, 2012.  On that day, going to the walls of our future data center, I saw this very picture, which, frankly speaking, plunged me into a small shock.  Meet <abbr title="state government institution of the Stavropol Territory">GKU IC</abbr> "Regional Center of Information Technologies" at the dawn of its existence.  All images are clickable. <br><br> <a href=""><img src="https://habrastorage.org/files/f32/f1f/e6c/f32f1fe6c2684425ae9aa754075a17b3.jpg" alt="2012 look like." width="400"></a> <br>  <i><font color="#999999">So the only rack inside our future data center in June 2012 looked like.</font></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It was quite a young organization.  Its main task at the time of the beginning of my activity was the maintenance of electronic document management of public authorities (OGV). <br><br>  My goal was to create a data center and organization that serves it.  All existing state information systems were to move to the data center, as well as accommodate all newly created ones.  At that time, there was a rapid growth of electronic public services and general automation of public authorities. <br><br>  At that time, there was no understanding of what e-government was.  The main thing that was the understanding that "not a place paints a person, but a person - a place."  I had a small team consisting of me, but for starters it was quite enough, especially the automation of routine processes allows you to avoid unnecessary bloating of the staff. <br><br> <a href=""><img src="https://habrastorage.org/files/a34/b8d/4bd/a34b8d4bda624efabb5c3c698e142063.JPG" alt="The data center looked like before my departure, July 2014." width="800"></a> <br>  <i><font color="#999999">And this is how the data center looked like before my departure, July 2014.</font></i> <br><br>  Before moving to this organization, I worked as a leading specialist in the support department of one of the major banks.  And this experience was very useful for implementation in the <abbr title="government departments">state bodies</abbr> .  In general, I really liked the banking sector from the IT point of view, but this is a separate story.  Here I also had to fulfill to some extent the functions of a ‚Äúgray cardinal‚Äù: who was absent in the staff of the chief engineer. <br><br>  The data center created by me should be not just reliable, but disaster-resistant, productive and cheap.  It seems to me that is why I was invited to work here, since it was necessary first to achieve effective use of what is already there.  And integrators had only one suggestion: if you give more money ... Including, therefore, I didn‚Äôt resort to the services of integrators, etc. <br><br>  Since all resources actually moved to our ‚Äúcloud‚Äù - we had to introduce the concept of ‚Äúpublic private cloud‚Äù, due to the fact that the existing conceptual apparatus consisting of ‚Äúpublic‚Äù and ‚Äúprivate‚Äù ‚Äúclouds‚Äù did not fully satisfy the logic of providing resources.  From the outside, it was a ‚Äúprivate cloud‚Äù, from the inside - ‚Äúpublic‚Äù, but only for the state bodies.  In this regard, there were some features of software licensing. <br><br>  We had time to decide on some conceptual moments even before I joined the organization, they had to be taken for granted.  The project was developed in close cooperation with IBM, Microsoft, Cisco.  Why these vendors?  For me - it has historically happened.  Do I regret it?  Not at all!  Could other vendors be used?  Of course, for example, DELL, HP or any other, as well as their arbitrary combinations. <br><br>  As a virtualization platform was purchased - VMWare, at that time 5 versions.  Here, I think everyone will agree that the choice is practically without any alternative, since  the others did not provide features similar to Fault Tolerance. <br><br>  During the initial audit of the available rack capacities in the city, I discovered a pair of IBM BladeCenter chassis: E and H. The chassis was equipped with HS22 blades, far from the worst, the hard middle at that time.  The state, of course, was somewhat deplorable, especially the burning error indicators were annoying. <br><br> <a href=""><img src="https://habrastorage.org/files/837/f30/130/837f30130d8a41dbbdaaf8f24013e0de.jpg" alt="See the one of the available racks in June 2012. Cisco equipment." width="400"></a> <br>  <i><font color="#999999">View of one of the available racks in June 2012.</font></i>  <i><font color="#999999">Pay attention to the installation of equipment through the "box", especially Cisco equipment.</font></i> <br><br>  As a storage system, a DS3512 shelf connected via optics with 2TB disks installed was installed on one site.  The DS3512 and DS3524 regiments were installed on another site. <br><br>  At the backup site, the free space was distributed in such a way that VMWare did not start without manual intervention: it detected other installed copies and stopped, only the launch with the corresponding key helped.  The distribution itself went according to the principle: each virtual machine has its own LUN.  When it was necessary to allocate additional space to the virtual machine, but on the existing LUN, it was not there ... <br><br>  Between themselves, the sites were connected by a thin data network with a width of 1 Gbit / s.  There was no dedicated network for the operation of the same virtualization and circulation of service traffic. <br><br>  After a brief introduction and audit of the IT infrastructure (and it was brief, since practically no infrastructure existed), it was concluded that I had a classic example of how not to do it.  There were no schemes, no accompanying documentation, even the administrator passwords were known far from all; they had to be reset and restored. <br><br>  I resolutely set to work. <br><br><h1>  The beginning of the way </h1><br>  In such a serious future organization at the time of my arrival from the IT infrastructure there was absolutely nothing: a lone smart switch, a peer-to-peer network, shared resources at each workplace ... In general, everything is exactly as you imagine the state of affairs in the region. <br><br>  Accordingly, the infrastructure of the enterprise was initially quickly established.  For what was ordered everything that was available at that time.  Armed with a network tester, I found and signed all the wires.  Since  at the time of laying the wires, there were no workplaces plan ‚Äî somewhere, instead of phones, there were PCs, somewhere there were not enough wires at all and many other standard ‚Äúcharms‚Äù. <br><br>  Unfortunately, when designing the server room of the future data center, no one did a raised floor or a wire tray under the ceiling.  Naturally, there was no money for that or the other, so I had to induce beauty on my own. <br><br>  Since no one allowed me to simply shorten the wires at that time: ‚Äúsuddenly I would have to move the rack to the far corner of the room, how then to be?‚Äù I had to make the 110th cross from the ceiling, from which the wires were lowered into the rack.  So that in case of moving the rack, the short wires could be dismantled from the cross-country by installing longer ones there. <br><br> <a href=""><img src="https://habrastorage.org/files/4fe/5cd/9a6/4fe5cd9a62964ea5abb3bf2e4e9be1ba.jpg" width="800" alt="It is also a knife for sealing wires."></a> <br>  <i><font color="#999999">View of the 110th wall cross panel in the process of installation, as well as a knife for sealing wires.</font></i> <br><br>  It was also immediately determined that the patch cords would be color-coded, since only the blue and red cables were available, the telephony had to be red, and everything related to the network was blue. <br><br> <a href=""><img src="https://habrastorage.org/files/280/03f/d29/28003fd29b714fbfbfffc5f9366862f2.jpg" width="400" alt="Type of rack before and after installation."></a> <br>  <i><font color="#999999">Type of rack before and after installation.</font></i> <br><br>  In the rack, I found an office PBX Panasonic KX-NCP500, complete with 4 city and 8 internal lines.  I was interested in the internal telephone lines least of all; after all, it was an IP PBX: I gradually switched everything to VOIP. <br><br>  Since I had no serious experience in setting up the PBX, I had to tinker a bit.  Just understanding the need to raise your own STUN server was worth something ... <br><br>  The organization did not have its own network as such; all the computers were located in one large intranet.  It did not suit me as a person who knew about information security not by hearsay: I set up and configured a FreeBSD router on the network border, and the network itself was segmented for complete interconnection control.  With this approach, only one segment usually suffers. <br><br>  About the network itself, the only thing that was clear was that it was somewhere.  I had to restore the entire network topology from hardware configurations, carefully sketch and document it.  Configs gradually took on a human appearance, description and naming logic appeared. <br><br>  After almost half a year, I finally found the documentation on the network of <abbr title="government departments">state bodies</abbr> .  But, unfortunately, it was 90% inconsistent with what it was in fact.  It was made very high quality, it was one of the few documents on which it was possible to work.  But no one, judging by the settings, did not work. <br><br>  As the network explored all the nodes, I brought it up to date, since practically all the equipment had very outdated software installed.  Somewhere this was not necessary, but somewhere it corrected the existing problems. <br><br> <a href=""><img src="https://habrastorage.org/files/ba0/e09/e7e/ba0e09e7e8434e568ea08c5764c245d1.jpg" width="800" alt="Old (left, 2012) and new (right, 2016) page."></a> <br>  <i><font color="#999999">Old (left, 2012) and new (right, 2016) view of the main page of the site.</font></i> <br><br>  A website was also developed, with its own name-servers, shared hosting, and mail service being raised in parallel.  I am extremely suspicious of organizations where employees have postal addresses on obviously public postal services, especially in public institutions. <br><br>  In general, the first couple of months of work have passed, I think, very fruitful. <br><br><h1>  First stage </h1><br>  Initially, the data center, except for interdepartmental workflow, was not used for anything else.  Undoubtedly, document flow is one of the most important parts of the work of public authorities.  Often, precisely because of the complexity of the workflow, many problems arise in the work of our state, and it is the electronic workflow that is the way out of the current situation. <br><br>  I think the most interesting question is: what does e-government work in the data center? <br><br>  The data center itself consists of several geographically distributed sites, thus implementing the concept of disaster recovery, the work is carried out 24/7/365.  The sites were interconnected by a main line for 32 single-mode fibers. <br><br>  The basis of the data center is made up of IBM HS22 and HS23 (now Lenovo) blade pairs distributed over sites.  14 blades are placed in each chassis; at the initial stage, five blades were installed. <br><br>  Each blade has two processors, if I'm not mistaken, E5650 (6 cores, 12MB cache), 192GB RAM for the outset.  Blades without disks, inside I decided to install USB-flash with VMWare image in order to separate the execution and storage as much as possible, the logs are written to the shared storage, the uplink of each blade is 2 Gbit / s.  Uplink can be raised to 10 Gbit / s by installing the appropriate switch in the chassis and network card in each blade. <br><br> <a href=""><img src="https://habrastorage.org/files/b34/d9a/a62/b34d9aa624b34ba3b7e5d5bbc51827fe.jpg" width="800" alt="Our main 32-fiber trunk."></a> <br>  <i><font color="#999999">Our main 32-fiber trunk.</font></i> <br><br>  As an OS - VMWare vSphere (when I left was 5.5) Standard.  In a more advanced version, I did not see the point then: the proposed functionality was sufficiently abundant.  And what was missing was possible to write independently. <br><br>  Later on, the number of blades was increased due to the slightly more powerful IBM HS23 servers. <br><br>  Power redundancy at each site was different, but at least two power supplies.  Also in each rack there are additionally installed a power supply rack, in pairs: the power supply units of the devices are powered from different sources.  Maybe too much, but there were a couple of moments when rack-mount UPSs were rescued.  Something, and redundancy in such systems does not happen much. <br><br>  Cooling was also different.  At the main site, these were wall-mounted industrial air conditioners with a balancing unit.  The temperature was maintained at 21 degrees.  On another site, these were industrial floor air conditioners and underground air supply. <br><br> <a href=""><img src="https://habrastorage.org/files/41b/825/cbe/41b825cbed35466d8dd41fc768c9acd5.jpg" width="800" alt="IBM SVC.  The controller of our storage system."></a> <br>  <i><font color="#999999">IBM <abbr title="SAN Volume Controller">SVC</abbr> .</font></i>  <i><font color="#999999">The controller of our storage system.</font></i> <br><br>  The storage system is scalable, based on the IBM <abbr title="SAN Volume Controller">SVC</abbr> controller, which made it possible to achieve redundancy of the same RAID 6 + 1, redundancy along several paths, interconnecting optics of 8 Gbit / s uplink.  Any part of the data center could at any time go into battery life in the event of an accident or routine maintenance. <br><br>  Almost all physical resources are virtualized in a functioning data center: storage is virtualized on the basis of IBM <abbr title="SAN Volume Controller">SVC</abbr> ;  CPU and RAM resources are virtualized based on VMWare vSphere.  If we take VLAN on switches for virtualization, we can assume that the network infrastructure is also virtualized. <br><br>  Almost all the equipment that supports remote control, I connected to the network and set up.  At remote sites, everything works, including via controlled electrical outlets (though they appeared later, at the second stage), therefore in case of failure of any equipment without remote control, it can be reloaded by power. <br><br>  The data center was created in several stages.  The first stage included establishing order and creating a cloud infrastructure.  The initial goal was to create a virtualized storage tier based on IBM <abbr title="SAN Volume Controller">SVC</abbr> . <br><br>  As the plan was implemented, servers that had previously been located in third-party organizations began to move to our site.  So we moved several old IBM servers with working services that consumed and warmed more than one BladeCenter chassis.  Of course, gradually the services from them moved to the ‚Äúcloud‚Äù. <br><br> <a href=""><img src="https://habrastorage.org/files/e35/a45/408/e35a45408096477eba9c510d6432be5d.jpg" width="400" alt="View racks in the editor."></a> <br>  <i><font color="#999999">View racks in the editor.</font></i> <br><br>  First of all - the plan.  By that time, I could already work as I see fit (after all, there were already several completed projects, and the fact that there is work without failures - I earned the trust).  Therefore, I first assembled the stands in the editor, discussing and arguing with me along the way. <br><br> <a href=""><img src="https://habrastorage.org/files/571/5ea/9be/5715ea9bee6542bda7462cbd0e3eebc7.jpg" width="400" alt="The process of mounting equipment in a rack."></a> <br>  <i><font color="#999999">The process of mounting equipment in a rack.</font></i> <br><br>  The installation was carried out according to the standards, best practices and recommendations described, including, in the IBM RedBook.  Of course, for the first time my ‚Äúlet's read the documentation‚Äù was ridiculed, but after the ‚Äúmethod of scientific typing‚Äù the server refused to fall into place because for one the distance between the guides is too large, for the other too small - I found in Redbuke standard dimensions for the assembly of racks, then everything came together the first time. <br><br> <a href=""><img src="https://habrastorage.org/files/b5c/bcf/761/b5cbcf7617914cf382fe6baacabb3fa5.jpg" width="800" alt="The first stage of the data center, June 2013. In the background is the tambourine of the High Administrator."></a> <br>  <i><font color="#999999">The first stage of the data center, June 2013.</font></i>  <i><font color="#999999">In the background is the tambourine of the High Administrator.</font></i> <br><br>  By that time, it had been almost a year since I worked in this organization for the benefit of the state.  During this year, we have never resorted to the services of integrators or any other contractors.  I will not be cunning, several times I turned for help to colleagues from IBM with questions on their equipment and we jointly solved the problems that emerged, for which many thanks to them. <br><br>  Already at this stage, the data center became illustrative and regularly received visitors to demonstrate how the IT infrastructure should work and look. <br><br> <a href=""><img src="https://habrastorage.org/files/f73/591/6ae/f735916ae6bd48a0b705cbfd822eb798.jpg" width="400" alt="IT infrastructure should not look like this. The picture was taken on the second day of my work, 2012."></a> <br>  <i><font color="#999999">IT infrastructure should not look like this.</font></i>  <i><font color="#999999">The picture was taken on the second day of my work, 2012.</font></i> <br><br>  In the process of implementing the data center, it became clear to me that resources need to be efficiently delivered to consumers - government bodies.  Moreover, some of the ‚Äúpeculiar‚Äù written information systems that have moved to the cloud, drove very large amounts of information on the network. <br><br>  Access exclusively via the Internet did not seem such a good idea, since it did not offer sufficient access speed.  And the expansion of the Internet connection in all the <abbr title="government departments">state bodies is an</abbr> extremely expensive procedure.  Therefore, it was decided to deploy its own network: economically, in terms of security, this turned out to be much more profitable than renting communication channels from the same Rostelecom. <br><br>  Why was this not done initially?  The answer is simple: there were no qualified specialists for this work, only external contractors.  And they seek to plant on an outsource. <br><br>  At this moment I had to plan and build the infrastructure of the provider.  At the same time, we had to conduct an audit of many networks of <abbr title="government departments">state bodies</abbr> .  Of course, in some of the state bodies there were quite strong IT services (for example, in the Ministry of Finance, in the Ministry of Defense, in the government apparatus and others).  But there were frankly weak ones where they could not even press the wire.  Those had to be taken completely under his wing, since the qualification allowed. <br><br>  Therefore, in particular, I had to develop the typical network architecture of the <abbr title="government departments">public authorities</abbr> , to which it was necessary to strive.  Standardization and typing is the key to efficient operation.  According to my preliminary calculations for one person, at least 100-150 administrative objects should have been in our organization. <br><br> <a href=""><img src="https://habrastorage.org/files/4f2/530/2ff/4f25302fff994540b908bb421beecf3a.jpg" width="800" alt="One of the Cisco equipment supplies."></a> <br>  <i><font color="#999999">One of the Cisco equipment supplies.</font></i> <br><br>  Of course, in addition to the obvious VLAN technologies, other modern technologies were used to facilitate administration: OSPF, VTP, PVST, MSTP, HSRP, QoS, etc.  I wanted, of course, to raise statefull redundancy, but, unfortunately, there was not enough ASR hardware resources.  Unfortunately, it didn‚Äôt get to MPLS.  Yes, and it was not necessary. <br><br>  As the network expanded, I began to take control of the equipment of the <abbr title="government departments">OGV</abbr> , simultaneously setting it up as it should.  In the process of connecting administrations around the edge - I had to conduct explanatory and educational work and help colleagues in district and rural administrations. <br><br>  The total uplink between the sites at the first stage was only a few gigabits.  But I have already allocated a channel for vSphere operation. <br>  The network itself turned out to be geographically strongly distributed, including a fairly large number of remote nodes connected via L2 / L3 VPN. <br><br>  Much, of course, could be solved with serious financial investments, but I managed to do what was.  Often, the available equipment was used inefficiently, so I simply found better places for it.  Especially in the first year of life, everyone was very skeptical about the prospects for the implementation of this project. <br><br>  But after the first year, when thanks to our organization, direct and indirect budget savings of tens of millions of rubles were shown, and the attitude changed dramatically. <br><br> <a href=""><img src="https://habrastorage.org/files/d32/8ea/03c/d328ea03ce16431bbd59c703a5728163.jpg" width="800" alt="One of the network diagrams. Most of the nodes for obvious reasons, is hidden."></a> <br>  <i><font color="#999999">One of the network diagrams.</font></i>  <i><font color="#999999">Most of the nodes for obvious reasons, is hidden.</font></i> <br><br><h1>  Second phase </h1><br>  At the second stage, we already had to increase the hardware capacity of our data center.  The capacity expansion required a chassis change from model E to H, re-assembly of existing racks.  The disk space was increased by increasing the number of shelves from the HDD. <br><br> <a href=""><img src="https://habrastorage.org/files/97c/413/ee7/97c413ee71b345ba9180c100856aa310.jpg" width="800" alt="The shelves with IBM DS3512 hard drives and DS3524 shelf are visible at the top."></a> <br>  <i><font color="#999999">The shelves with IBM DS3512 hard drives and DS3524 shelf are visible at the top.</font></i> <br><br>  Some more physical servers moved to us.  The number of virtual machines has increased significantly. <br><br>  A backup tool based on the IBM TS3200 tape library has been added. <br><br> <a href=""><img src="https://habrastorage.org/files/a45/532/0ab/a455320ab4bc4b0581610701b51911df.jpg" width="800" alt="In the foreground is the IBM TS3200 tape library."></a> <br>  <i><font color="#999999">In the foreground is the IBM TS3200 tape library.</font></i> <br><br>  Naturally, I began the installation of new equipment with preliminary planning.  Here we had to model the racks on both sides. <br><br> <a href=""><img src="https://habrastorage.org/files/e7f/398/704/e7f39870443d4f91b241b3dfc33db9cb.jpg" width="800" alt="Planning data center expansion."></a> <br>  <i><font color="#999999">Planning data center expansion.</font></i> <br><br>  The move was completed as soon as possible.  Since by that time virtualization functioned in full, the process of moving was completely unnoticed, because before transferring and disconnecting equipment on one site, all virtual servers migrated to another, and at the end of the work, everything returned to normal. <br><br>  Of course, in addition to the main site, the reserve site was also put in order.  At the same time, thanks to a fully functioning backup system, it was finally possible to restore order there as well. <br><br> <a href=""><img src="https://habrastorage.org/files/890/060/c4c/890060c4c3d14c28aa93a09a1c9f1807.jpg" width="800" alt="Type racks after the expansion of the resource, 2014."></a> <br>  <i><font color="#999999">Type racks after the expansion of the resource, 2014.</font></i> <br><br>  And since by that time our data center had already become exemplary, I decided to pay attention to details: the available free units were closed with black false panels, and where ventilation was necessary, perforated false panels were installed.  Even the fixing bolts with which the equipment is mounted in the rack, I took off and painted from the can in black.  Trifle, but nice. <br><br> <a href=""><img src="https://habrastorage.org/files/e63/e7e/ebb/e63e7eebba864f448b890e69df98dbaf.jpg" width="400" alt="Type of racks on the backup site during installation (left) and at the end (right)."></a> <br>  <i><font color="#999999">Type of racks on the backup site during installation (left) and at the end (right).</font></i> <br><br>  In order to get rid of media converters lying everywhere, a pair of D-Link DMC-1000 chassis were purchased, including  providing backup power to media converters due to a pair of power supplies. <br><br>  In parallel, work was underway to upgrade the network.  I closed the ring of the data network core at a speed of 20 Gbit / s between the sites.  By optimizing the existing equipment, the service network for operation of the virtual infrastructure acquired 10 Gbit / s uplink, which made it possible to migrate almost all the blades at the same time, and the throughput was enough. <br><br>  SNR equipment compatibility with existing Cisco and Brocade equipment turned out to be very pleasant.  Of course, at one time, the presence of Brocade equipment in the chassis was an unpleasant surprise for me, since earlier I did not have to work with it.  But, fortunately, knowledge of the principles of the network allowed us to quickly deal with it. <br><br>  An important part of the work, I think the accuracy of execution.  Everything should not only work well, but also look good.  The more order in the work, the higher the reliability.  I was lucky that no one had such an approach to work, therefore, together with one of our colleagues in our stands, a perfect order was established, I believe. <br><br> <a href=""><img src="https://habrastorage.org/files/381/571/263/38157126376a417f92dba3f10aef197b.jpg" width="800" alt="Everywhere there must be order."></a> <br>  <i><font color="#999999">Everywhere there must be order.</font></i> <br><br><h1>  Meanwhile </h1><br>  In parallel with the physical creation of the data center and the network of <abbr title="government departments">state bodies,</abbr> there was development of software for the functioning of e-government, in which I also had the opportunity to participate.  Both in terms of implementation and deployment, and in terms of ideological support.  For the support of the true ideology, many thanks to the then leadership. <br><br>  I regularly had to audit databases, drive developers to use indexes in databases, catch resource-intensive queries and optimize bottlenecks.  One of the systems except the primary keys did not have any more indexes.  The result - at the beginning of intensive operation, the performance of the database began to deteriorate sharply, it was necessary to independently plant indexes. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Due to timely intervention in the development process, all developed state systems were made cross-platform. And where there was no urgent need to use Windows as a base, everything worked under the control of Linux family systems. As it turned out, the main obstacle to creating cross-platform applications was the use of non-universal notation in writing paths. Often, after replacing one slash with another, the state system abruptly became cross-platform. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In any case, the network created covered virtually all the </font></font><abbr title="  "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OGVs</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , I was ready to start providing Internet connection, filtering traffic, anti-virus protection, and preventing attacks from the inside and outside of the </font></font><abbr title="  "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OGV</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Including this was to provide significant budget savings through more efficient use of bandwidth. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By creating a single service technical support </font></font><abbr title="  "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UGA</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , I planned to create high-tech jobs to focus within our organization the main force of the qualified support of jobs, leaving on the ground actually technicians, engaging in parallel increasing the level of experts in the field by organizing conferences and webinars, trainings away ...</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The third stage of the modernization of the data center was supposed to be the most interesting for me. By the end of the second stage, a dialogue was established with the developer of domestic Elbrus processors, access to the test bench was obtained, and it became clear that at least one third of the functionality of the systems in use could be transferred to the domestic hardware platform! Next year, in 2015, the new hardware version of the domestic processor was to be released ... The following year's budget was included in the budget for the purchase of servers ...</font></font><br><br> <a href=""><img src="https://habrastorage.org/files/fc9/b22/c01/fc9b22c0154a4505b4e58bff84ec33c8.jpg" width="800" alt=" ,  ..."></a> <br><br><h1>  Summing up </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But my dreams of transferring public services to domestic hardware platform did not come true (as well as other plans), since I was forced to change jobs to no less interesting, but more highly paid. </font><font style="vertical-align: inherit;">It is a pity, of course, I think that I could make a good push for the introduction of the domestic hardware platform. </font><font style="vertical-align: inherit;">Moreover, it was before the wave of import substitution. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the time of the end of my career in this organization on the basis of our data center, I managed to plan, create, deploy, or take part in the creation of:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data center and network of state bodies ( </font></font><a href="http://cit-sk.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://cit-sk.ru/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">regional portal of state and municipal services ( </font></font><a href="http://gosuslugi26.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://gosuslugi26.ru/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li><li>  ¬´   ¬ª ( <a href="http://control26.ru/">http://control26.ru/</a> ,   ); </li><li>   ; </li><li>     ( <a href="http://stavregion.ru/">http://stavregion.ru/</a> ); </li><li>   IP- (Asterisk); </li><li>    (VipNET); </li><li>       .     (¬´¬ª); </li><li>    (@stavregion.ru); </li><li>     (    ); </li><li>  ¬´¬ª; </li><li>     ; </li><li> VDS-     (   ); </li><li>    ; </li><li>      (); </li><li>     ; </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Register of UK state services; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> centralized update services for WSUS and antiviruses; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> site monitoring and statistics collection; </font></font></li><li>  etc. </li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In total, more than 120 virtual servers then worked on our 7 pairs of physical servers, using about 30-40% of the CPU and RAM resources, about 50% of the storage system. </font><font style="vertical-align: inherit;">In total, at that time we had about 30-35 people, including the entire administrative and managerial staff, the call processing service. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Efficiency of use, I am sure, on face. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, you can still tell a lot in details about the formation of almost each of the services, then you get a rather weighty volume of memories.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Thanks </font></font></h1><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> First, to you, dear reader, for having read this far. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> My wife for the help and support. </font></font></li><li>    ¬´  ¬ª   . </li><li>   ,        . </li><li>  ,     . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/395197/">https://habr.com/ru/post/395197/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../395185/index.html">Ilon Mask commented on the situation with floating on a huge puddle of Tesla Model S</a></li>
<li><a href="../395189/index.html">It took 33 years to find Easter eggs in the Gumball game for Apple II</a></li>
<li><a href="../395191/index.html">LimeSDR SDR transceiver for $ 249</a></li>
<li><a href="../395193/index.html">About IT dreams, and truckers in particular</a></li>
<li><a href="../395195/index.html">Reinstall the immune system. A radical new treatment for multiple sclerosis has proven its effectiveness.</a></li>
<li><a href="../395199/index.html">Facebook will delete your photos if you don't download the Moments app.</a></li>
<li><a href="../395201/index.html">The book "New History of the Origin of Life on Earth"</a></li>
<li><a href="../395203/index.html">Top 500 supercomputers rated for June 2016, China introduced 100 PFlops supercomputers</a></li>
<li><a href="../395205/index.html">Chinese scientists have learned to convert plastic into diesel</a></li>
<li><a href="../395209/index.html">Why digital money has not yet killed cash</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Literary Archiver</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="First of all, I congratulate all the Orthodox and they sympathize with Easter and the end of Lent, all the rest - with the onset of spring. In the san...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Literary Archiver</h1><div class="post__text post__text-html js-mediator-article">  First of all, I congratulate all the Orthodox and they sympathize with Easter and the end of Lent, all the rest - with the onset of spring.  In the sandbox, only a month ago, my Cyrillic programming debut finally drowned.  I do not know what attracted the attention of readers to the green, but commented on the sheets, like a real article.  In his sheet <a href="https://habrahabr.ru/users/trllserv/" class="user_link">TrllServ</a> proposed to use the idea for archiving.  I love people who know how to find practical application for ideas.  Having unfolded the notebook, I tried to sketch an algorithm based on the property of my encoding, namely, the unique typing of a symbol by the first bits.  Compressing such an algorithm is conveniently the <u>text</u> , that is, articles, books, or copy-paste from the Internet — that is, which consists of words, and where the case of letters has a grammatical meaning.  Subsequently, the average, based on the rules of the Russian language, was added to the simple algorithm, and it all gathered into one complex program that effectively compressed a literature textbook.  Let's call it "Literary Archiver". <br><a name="habracut"></a><br><h3>  Archiving methods </h3><br><ol><li>  As mentioned, the <u>text</u> consists of words.  In experimental archivers, symbols are always replaced with sequences of bits, because there are few of them, and the codes take up less memory. <br><br>  <i>A = 00, B = 01, C = 10, D = 110</i> <br><br>  When you need to squeeze a huge book, where each letter occurs millions of times, the saved memory is also huge.  However, this method works not only with symbols.  Words are also repeating <u>text</u> units, and there are not as many of them as it seems.  Dahl’s dictionary contains about 200,000 words, and the average anonym in everyday speech uses no more than 3-4 thousand.  Of course, in the Russian language, words may be inclined, conjugate, etc., but if you believe <a href="http://tribayana.ru/%3Fp%3D4143">tribayana.ru/?p=4143</a> , only 38873 original lexemes are found in the “War and Peace” of L. Tolstoy.  With one register (see method 2) and a fixed code length, each word will be encoded with two bytes.  Not bad, if the source file is written in UTF-8, where two bytes is a Cyrillic grapheme.  The average word length in Russian is 7.2 letters.  That is, it turns out a gain of 7.2 times.  In the article, the list of words in the file is called a "dictionary." 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>“Dad” = 0, “soup” = 10, “herbs” = 11</i> <br></li><li>  If you took to do the archiver, limit the encoding.  In normal cases, we do not need all unicode characters to encode a file.  Most often only the ASCII page and the Russian alphabet are useful.  256 characters - not so much, but <a href="https://habrahabr.ru/users/trllserv/" class="user_link">TrllServ</a> knowingly looked in the sandbox.  Letters are uppercase and lowercase.  Let's forget about hieroglyphs for now.  If the lowercase letters are the basis of the text, then the uppercase letters most often stand alone in each sentence.  At the same time, if you build the code table according to the usual rules, they will have to select rather long bit sequences (with prefix encoding), and, even worse, the “dictionary” will be filled with the same words, differing only in case.  A lot of memory is wasted.  For us, “” and “” are the same letter, and for a machine, two completely different values ​​from the code table.  In order not to produce unnecessary words, all our letters are already stored in pairs in the archiver itself.  He omits all capital letters to lowercase.  At the same time, the words of the <u>text</u> where the capital letters were marked are marked, and their number in each word is preserved.  Capital letters are always at the beginning of the word, “CamelStyle” is cut into separate lexemes: “Camel” and “Style”.  So the number of the word in the text with the number of capital in it is uniquely decoded. <br><br>  <i>"Start" - 1</i> <i><br></i>  <i>"KAPS" - 4</i> <i><br></i>  <i>“OUT” - 3</i> <i><br></i>  <i>"Optovik": "Op" - 1, "TOB" - 2, "Ik" - 1</i> <br></li><li>  Each non-alphabetic character (arithmetic or punctuation) is encoded by a separate lexeme (one character).  Only the space is encoded separately.  Words are almost always separated by spaces, manually inserting each one is meaningless.  It is enough to set the standard: when decoding, between the two words implies one space, unless otherwise specified.  And the <i>other</i> is indicated by the space in the archive.  There are several exceptions: <br><ul><li>  A series of spaces (greater than 1) in the archive means the same sequence of spaces in the text.  Useful when compressing python scripts with strict indentation. <br><br>  <i>“Word1 ____ word2” -&gt; “word1” + "____" + "word"</i> <br>  * underscore here - spaces <br></li><li>  A space between two words in the archive means that there is no space between them in the text.  Yes, like this.  The crutch to camel style. <br><br>  <i>“ZabBocherG” -&gt; “for” + "" + "for" + "" + "che" + "" + "rg"</i> <br>  * all 4 words are marked, the number of capital letters for each is saved <br></li><li>  By default, non-letter characters “attach” closely to the word on the left, and are separated by a space from the word (or sign) standing on the right.  The space character in the archive changes the rules. <br><br>  <i>“Saltpeter -, _ sugar” -&gt; “saltpeter” + "," + "sugar"</i> <i><br></i>  <i>“Comma _, _ sir” -&gt; “comma” + "" + "," + "sir"</i> <i><br></i>  <i>"Hey -, - goon!" -&gt; "hey" + "," + "" + "goon" + "!"</i> <i><br></i>  <i>"Zatrolil _, - school student" -&gt; "zatrolil" + "" + "," + "" + "school student"</i> <br>  * here "_" is a space, and "-" is its absence.  Due to Habr's features, auto-correct. <br></li><li>  A single space at the very beginning of the archive (the first character) means a single space at the beginning of the text. <br><br>  <i>[the beginning of the text] "first" -&gt; [the beginning of the archive] "" + "first"</i> <br></li></ul><br>  A series of spaces replaces single automatic spaces. <br></li><li>  Numbers are encoded as letters, numbers as words.  Letters with numbers interlink.  Changing the case of numbers is not possible. <br><br>  <i>"265" -&gt; "265"</i> <i><br></i>  <i>“228 articles” -&gt; “228 articles”</i> <i><br></i>  <i>“Adyn1111shmel” -&gt; “adyn1111shmel”</i> <br></li></ol><br>  These 4 methods provide "folding" of the source file without loss and distortion. <br><br><h3>  General algorithm </h3><br>  So what happens? <br><br><ol><li>  The text is read from the source file and is parallelly cut by the parser, a “dictionary” is compiled, “vocabulary” indices are substituted for the words of the text themselves.  At the same time, the frequency of occurrence of each “vocabulary” word is calculated, and labels of capital letters are collected. </li><li>  The “dictionary” is sorted by frequency of occurrence.  In the implementation of the program, the index substitution list is sorted for speeding up. </li><li>  An “alphabet” is formed - a list of all characters existing in the text, it is sorted by the frequency of occurrence of characters in the “dictionary”.  Instead of characters in the "dictionary" substituted indices of the "alphabet".  The implementation also sorts the wildcard list. </li><li>  "Alphabet" and "Dictionary" are encoded in any way, for example, by Huffman. </li><li>  The archive file for recording opens.  The code table of an ordered “alphabet” is introduced.  The end is separated by a vertical tab. </li><li>  With the help of the “alphabet” code table, the “dictionary” code table is entered bitwise.  The end is separated by a vertical tab. </li><li>  Introduced indices of capital and their number for those words where there are several.  The end is separated by a vertical tab. </li><li>  With the help of the code table of the "dictionary" text is entered bit by bit. </li></ol><br><h3>  Implementation </h3><br>  The figure is sad.  While I was writing the code, he got confused.  In the article, the algorithm looks simple, but understandable to the machine, it has become incomprehensible to man.  All substitutions and indices are in fact a terrible pyramid of pointers.  I did everything I could, but I could almost everything.  The program works and is almost ready, it does not implement only the prefix coding algorithm of the “dictionary” and “alphabet” - not the most difficult, but the most important part.  Without it, the application works and correctly performs the other functions, but the size of the archive decreases slightly.  Why niasilil?  Yes, ashamed.  Lost in the array of pointers, and therefore not encoded.  To unravel and refactor your creation, time is needed, and people of my specialization lack it now.  Minobra course: less knowledge - more sample tests for preparation.  It would be possible to finish the project together with colleagues, ask them for help, but as it turned out, the archiver's algorithm is deadly for most of them.  However, I'll show you what it is.  I did not find “War and Peace” without the “introductory part”, therefore I carved the archive of “The Master and Margarita”.  Fewer pages makes more sense. <br><br>  <i>source size: 1.4 MB.</i> <i><br></i>  <i>archive size: 1.6 MB.</i> <br><br>  Eureka!  Archiver increased the file size.  Without coding, it is meaningless.  We better consider a specific example. <br>  Two lines with the exceptions mentioned: <br><br>  <b>JLK ijo, ewrt lhuiOij jfds + huk uih EGE! *</b> <b><br></b>  <b>897 y98 uih - 124 jfds JLK</b> <br><br>  turned into this: <br><br><img src="https://habrastorage.org/webt/c8/1p/qb/c81pqb6aj7928jemp860avnos7m.png"><br><br>  Of course, there is no question of any compression without proper coding, but the structure of the archive is clearly shown (the essence). <br><br>  In general, if, while the exams are going, there is a kind anonymous author who adores dancing with tambourines and is ready to write a crutch for crutches, here are the <a href="https://github.com/2che/litback">sources in C.</a> <br><br>  PS Implementation is ready. <br><br>  With love. </div><p>Source: <a href="https://habr.com/ru/post/353144/">https://habr.com/ru/post/353144/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353130/index.html">Open webinar "Examples of patterns"</a></li>
<li><a href="../353134/index.html">Indoor geolocation based on iBeacon. Aruba Meridian Solution</a></li>
<li><a href="../353138/index.html">How to beat the routine, or the Ready application in Xcode in a couple of clicks</a></li>
<li><a href="../353140/index.html">Installing IP PBX 3CX in Microsoft Azure Cloud</a></li>
<li><a href="../353142/index.html">Mixed reality helps find places for bases on Mars</a></li>
<li><a href="../353146/index.html">The story about the blockchain and a little bit about bitcoins</a></li>
<li><a href="../353148/index.html">Telephony integration with MoiSklad service</a></li>
<li><a href="../353150/index.html">Animation in Angular Applications</a></li>
<li><a href="../353152/index.html">Rustam Mehmandarov and Alexander Tarasov - semantic wonders and automation of experiments on jug.msk.ru</a></li>
<li><a href="../353156/index.html">FusionPBX, or cool again, FreeSWITCH</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
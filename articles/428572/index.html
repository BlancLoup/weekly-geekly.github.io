<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Higher-order components in React</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We recently published a higher-order feature in javascript aimed at those who study javascript. The article, the translation of which we publish today...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Higher-order components in React</h1><div class="post__text post__text-html js-mediator-article">  We recently published a <a href="https://habr.com/company/ruvds/blog/428570/">higher-order feature in javascript</a> aimed at those who study javascript.  The article, the translation of which we publish today, is intended for beginner React-developers.  It is dedicated to higher order components (Higher-Order Components, HOC). <br><br> <a href="https://habr.com/company/ruvds/blog/428572/"><img src="https://habrastorage.org/webt/w5/om/sh/w5omshlclipwxw7f3yjt7itcooe.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">DRY principle and higher order components in React</font> </h2><br>  You will not be able to advance far enough in the matter of studying programming and not encounter the almost cult principle of DRY (Don't Repeat Yourself, do not repeat).  Sometimes his followers go too far, but, in most cases, it is worth striving to observe it.  Here we will talk about the most popular React-development pattern, which allows you to enforce the DRY principle.  We are talking about components of higher order.  In order to understand the value of higher order components, let's first formulate and understand the problem for which they are intended. <br><br>  Suppose you need to recreate a control panel similar to the Stripe panel.  Many projects tend to evolve according to a scheme where everything is going great until the project is completed.  When you think that the work is almost finished, you notice that the control panel has many different tooltips that should appear when you hover the mouse over certain elements. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/d1e/83b/414/d1e83b414be78bf8944ea3838193aaa5.gif"><br>  <i><font color="#999999">Control Panel and ToolTips</font></i> <br><br>  In order to implement this functionality, you can use several approaches.  You decided to do this: determine whether the pointer is above a separate component, and then decide whether to show a hint for it or not.  There are three components that need to be equipped with similar functionality.  These are <code>Info</code> , <code>TrendChart</code> and <code>DailyChart</code> . <br><br>  Let's start with the <code>Info</code> component.  Right now it is a simple SVG icon. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   ) } }</code> </pre> <br>  Now we need to make sure that this component can determine whether the mouse pointer is over it or not.  You can use the mouse events <code>onMouseOver</code> and <code>onMouseOut</code> .  The function that is passed <code>onMouseOver</code> will be called if the mouse pointer hits the component area, and the function passed to <code>onMouseOut</code> will be called when the pointer leaves the component.  In order to organize all this in the manner that is accepted in React, we add the <code>hovering</code> property to the component, which is stored in the state, which allows us to re-render the component, showing or hiding the tooltip, if this property changes. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Info</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;svg         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}         className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>         height={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.height}         viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;           &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;       &lt;/svg&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  It turned out well.  Now we need to add the same functionality to two more components - <code>TrendChart</code> and <code>DailyChart</code> .  The above mechanism for the <code>Info</code> component works fine, it‚Äôs not necessary to repair it, so let's recreate the same thing in other components using the same code.  <code>TrendChart</code> component <code>TrendChart</code> . <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TrendChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'tren</span></span>d'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  You probably already understood what to do next.  The same can be done with our last component, <code>DailyChart</code> . <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DailyChart</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering === <span class="hljs-literal"><span class="hljs-literal">true</span></span>         ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id}/&gt;         : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}       &lt;<span class="hljs-type"><span class="hljs-type">Chart</span></span>         <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-symbol"><span class="hljs-symbol">'dail</span></span>y'         onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver}         onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}       /&gt;     &lt;/&gt;   ) } }</code> </pre> <br>  Now everything is ready.  You may have written something similar on React.  This, of course, is not the worst code in the world, but it does not follow DRY very well.  As you can see, after analyzing the component code, we, in each of them, repeat the same logic. <br><br>  The problem that we are facing now must become extremely clear.  This is a duplicate code.  To solve it, we want to get rid of the need to copy the same code in cases where what we have already implemented is necessary for the new component.  How to solve it?  Before we talk about this, let us dwell on several programming concepts that will greatly facilitate the understanding of the solution proposed here.  We are talking about callbacks and higher order functions. <br><br><h2>  <font color="#3AC1EF">Higher order functions</font> </h2><br>  Functions in JavaScript are first class objects.  This means that they, like objects, arrays or strings, can be assigned to variables, passed to functions as arguments, or returned from other functions. <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) <span class="hljs-comment"><span class="hljs-comment">// 15</span></span></code> </pre> <br>  If you are not used to such behavior, then the above code may seem strange to you.  Let's talk about what's going on here.  Namely, we pass the <code>add</code> function to the <code>addFive</code> function as an argument, rename it to <code>addReference</code> and then call it. <br><br>  When using similar constructions, a function passed to another as an argument is called a callback (callback function), and a function that receives another function as an argument is called a higher order function. <br><br>  Naming entities in programming is important, so here is the same code used in which names are changed according to the concepts they represent. <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x,y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, callback)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } higherOrderFunction(<span class="hljs-number"><span class="hljs-number">10</span></span>, add)</code> </pre> <br>  This pattern should seem familiar to you.  The fact is that if you used, for example, methods of JavaScript arrays, worked with jQuery or with lodash, then you have already used both higher order functions and callbacks. <br><br><pre> <code class="hljs coffeescript">[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>].map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function"> =&gt;</span></span> i + <span class="hljs-number"><span class="hljs-number">5</span></span>) _.filter([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function"> =&gt;</span></span> n % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">0</span></span> ); $(<span class="hljs-string"><span class="hljs-string">'#btn'</span></span>).<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Callbacks are everywhere'</span></span>) )</code> </pre> <br>  Let's return to our example.  What if, instead of creating only the <code>addFive</code> function, we want to create the <code>addTen</code> function, and <code>addTwenty</code> , and other similar functions.  Considering how the <code>addFive</code> function is <code>addFive</code> , we will have to copy its code and change it to create the above-mentioned functions based on it. <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addFive</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTen</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">10</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTwenty</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, <span class="hljs-number"><span class="hljs-number">20</span></span>) } addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) <span class="hljs-comment"><span class="hljs-comment">// 15 addTen(10, add) // 20 addTwenty(10, add) // 30</span></span></code> </pre> <br>  It should be noted that the code we got is not so dreadful, but it is clearly visible that many fragments in it are repeated.  Our goal is that we could create as many functions that add certain numbers to the numbers passed to them ( <code>addFive</code> , <code>addTen</code> , <code>addTwenty</code> , and so on) as we need, while minimizing code duplication.  Maybe to achieve this goal we need to create a function <code>makeAdder</code> ?  This function can take a certain number and a link to the <code>add</code> function.  Since the purpose of this function is to create a new function that adds the number passed to it to the specified one, we can make the function <code>makeAdder</code> return a new function, in which a certain number is specified (like the number 5 in <code>makeFive</code> ), and which could accept the numbers for addition with this number. <br><br>  Let's look at an example of the implementation of the above mechanisms. <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeAdder</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, addReference)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> addReference(x, y) } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addFive = makeAdder(<span class="hljs-number"><span class="hljs-number">5</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTen = makeAdder(<span class="hljs-number"><span class="hljs-number">10</span></span>, add) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addTwenty = makeAdder(<span class="hljs-number"><span class="hljs-number">20</span></span>, add) addFive(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 15 addTen(10) // 20 addTwenty(10) // 30</span></span></code> </pre> <br>  Now we can create as many <code>add</code> functions as needed, and at the same time minimize the amount of duplication of code. <br><br>  If it is interesting, the concept that there is a certain function that processes other functions so that they can be used with fewer parameters than before is called ‚Äúpartial use of the function‚Äù.  This approach is used in functional programming.  An example of its use is the <code>.bind</code> method used in JavaScript. <br><br>  All this is good, but what has React and the above described problem of duplicating mouse event handling code when creating new components that need this feature?  The fact is that just like <code>makeAdder</code> higher-order <code>makeAdder</code> helps us minimize code duplication, what‚Äôs called a ‚Äúhigher order component‚Äù will help us deal with the same problem in a React application.  However, everything will look different here.  Namely, instead of a work scheme in which a higher order function returns a new function that calls a callback, a higher order component can implement its own scheme.  Namely, it is able to return a new component that renders the component playing the role of a callback.  Perhaps we have already spoken a lot of things, so it's time to move on to examples. <br><br><h2>  <font color="#3AC1EF">Our higher order function</font> </h2><br>  This feature has the following features: <br><br><ul><li>  It is a function. </li><li>  She takes a callback as an argument. </li><li>  It returns a new function. </li><li>  The function that it returns can call the original callback that was passed to our higher order function. </li></ul><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">higherOrderFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(callback)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callback() } }</code> </pre> <br><h2>  <font color="#3AC1EF">Our higher order component</font> </h2><br>  This component can be characterized as follows: <br><br><ul><li>  It is a component. </li><li>  It takes another component as an argument. </li><li>  It returns a new component. </li><li>  The component it returns may render the source component passed to a higher order component. </li></ul><br><pre> <code class="hljs scala">function higherOrderComponent (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> /&gt;   } } }</code> </pre> <br><h2>  <font color="#3AC1EF">HOC implementation</font> </h2><br>  Now that we have, in general terms, figured out exactly what actions a higher-order component performs, we will begin to make changes to our React-code.  If you remember, the essence of the problem we are solving is that the code that implements the logic of handling mouse events has to be copied to all components that need this feature. <br><br><pre> <code class="hljs coffeescript">state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre> <br>  Given this, we need our higher-order component (let's call it <code>withHover</code> ) to encapsulate the event-handling code of the mouse, and then pass the <code>hovering</code> property to the components it renders.  This will allow us to prevent duplication of the corresponding code by placing it in the <code>withHover</code> component. <br><br>  Ultimately, this is what we want to achieve.  Whenever we need a component that needs to be aware of its <code>hovering</code> property, we can transfer this component to a component of a higher order <code>withHover</code> .  That is, we want to work with the components as shown below. <br><br><pre> <code class="hljs lisp">const InfoWithHover = withHover(<span class="hljs-name"><span class="hljs-name">Info</span></span>) const TrendChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">TrendChart</span></span>) const DailyChartWithHover = withHover(<span class="hljs-name"><span class="hljs-name">DailyChart</span></span>)</code> </pre> <br>  Then, when what is returned <code>withHover</code> is rendered, it will be the source component to which the <code>hovering</code> property is passed. <br><br><pre> <code class="hljs xml">function Info ({ hovering, height }) { return (   <span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>     {hovering === true       ? <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Tooltip</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.props.id}</span></span></span><span class="hljs-tag"> /&gt;</span></span>       : null}     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{height}</span></span></span><span class="hljs-tag">       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 16 16"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span><span class="hljs-tag">&gt;</span></span>         <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span></span><span class="hljs-tag"> /&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/&gt;</span></span> ) }</code> </pre> <br>  As a matter of fact, now we just have to implement the <code>withHover</code> component.  From the above it can be understood that he must perform three actions: <br><br><ul><li>  Accept the Component argument. </li><li>  Return a new component. </li><li>  Render the Component argument, passing it the <code>hovering</code> property. </li></ul><br><h3>  <font color="#3AC1EF">‚ñç Accept Component Argument</font> </h3><br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Component)</span></span></span><span class="hljs-function"> { }</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçReturn new component</font> </h3><br><pre> <code class="hljs scala">function withHover (<span class="hljs-type"><span class="hljs-type">Component</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ } }</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Rendering a Component with hovering properties</font> </h3><br>  Now we have the following question: how to get to the <code>hovering</code> property?  In fact, we have already written the code for working with this property.  We just need to add it to the new component, and then pass the <code>hovering</code> property to it when rendering the component passed to the higher order component as the <code>Component</code> argument. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">hovering</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.hovering}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br>  I prefer to talk about these things as follows (and this is what the React documentation says): a component converts properties to a user interface, and a higher-order component converts a component to another component.  In our case, we convert the <code>Info</code> , <code>TrendChart</code> and <code>DailyChart</code> components into new components that, thanks to the <code>hovering</code> property, know whether the mouse pointer is over them. <br><br><h2>  <font color="#3AC1EF">Additional Notes</font> </h2><br>  At this point, we have reviewed all the basic information about the components of higher order.  However, there are still some important things to discuss. <br><br>  If you look at our HOC <code>withHover</code> , you will notice that it has at least one weak point.  It implies that the receiving component of the <code>hovering</code> property will not experience any problems with this property.  In most cases, probably, this assumption is justified, but it may happen that this is unacceptable.  For example, what if a component already has a <code>hovering</code> property?  In this case, there will be a name conflict.  Therefore, a <code>withHover</code> can be made to the <code>withHover</code> component, which is to allow the user of this component to indicate what name the <code>hovering</code> property should pass to the components.  Since <code>withHover</code> is just a function, let's rewrite it so that it <code>withHover</code> second argument that specifies the name of the property passed to the component. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">withHover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Component, propName = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'hovering'</span></span></span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">hovering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOver</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOver}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onMouseOut</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.mouseOut}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">         </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Component</span></span></span></span><span class="xml"><span class="hljs-tag"> {</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">...props</span></span></span></span><span class="xml"><span class="hljs-tag">} /&gt;</span></span></span><span class="xml">       </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     );   } } }</span></span></code> </pre> <br>  Now we set the default value of the second argument as <code>hovering</code> , thanks to the default parameter setting mechanism of ES6, but if the user of the <code>withHover</code> component wants to change this, he can pass, in this second argument, the name he needs. <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     const props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;<span class="hljs-type"><span class="hljs-type">Component</span></span> {...props} /&gt;       &lt;/div&gt;     );   } } } function <span class="hljs-type"><span class="hljs-type">Info</span></span> ({ showTooltip, height }) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (   &lt;&gt;     {showTooltip === <span class="hljs-literal"><span class="hljs-literal">true</span></span>       ? &lt;<span class="hljs-type"><span class="hljs-type">Tooltip</span></span> id={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.id} /&gt;       : <span class="hljs-literal"><span class="hljs-literal">null</span></span>}     &lt;svg       className=<span class="hljs-string"><span class="hljs-string">"Icon-svg Icon--hoverable-svg"</span></span>       height={height}       viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 16 16"</span></span> width=<span class="hljs-string"><span class="hljs-string">"16"</span></span>&gt;         &lt;path d=<span class="hljs-string"><span class="hljs-string">"M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"</span></span> /&gt;     &lt;/svg&gt;   &lt;/&gt; ) } const <span class="hljs-type"><span class="hljs-type">InfoWithHover</span></span> = withHover(<span class="hljs-type"><span class="hljs-type">Info</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">'showToolti</span></span>p')</code> </pre> <br><h2>  <font color="#3AC1EF">The problem with the implementation of withHover</font> </h2><br>  You may have noticed another problem with the <code>withHover</code> implementation.  If we analyze our <code>Info</code> component, we can see that it, among other things, accepts the <code>height</code> property.  The way everything is arranged now means that the <code>height</code> will be set to <code>undefined</code> .  The reason for this is that the <code>withHover</code> component is the component responsible for rendering what is passed to it as the <code>Component</code> argument.  Now we have no properties, except for the <code>hovering</code> we created, we do not pass the <code>Component</code> component. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> InfoWithHover = withHover(Info) ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &lt;InfoWithHover height=<span class="hljs-string"><span class="hljs-string">"16px"</span></span> /&gt;</code> </pre> <br>  The <code>height</code> property is passed to the <code>InfoWithHover</code> component.  And what is this component?  This is the component that we return from <code>withHover</code> . <br><br><pre> <code class="hljs scala">function withHover(<span class="hljs-type"><span class="hljs-type">Component</span></span>, propName = <span class="hljs-symbol"><span class="hljs-symbol">'hoverin</span></span>g') { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WithHover</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   state = { hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }   mouseOver = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })   mouseOut = () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ hovering: <span class="hljs-literal"><span class="hljs-literal">false</span></span> })   render() {     console.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props) <span class="hljs-comment"><span class="hljs-comment">// { height: "16px" }     const props = {       [propName]: this.state.hovering     }     return (       &lt;div onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     );   } } }</span></span></code> </pre> <br>  Inside the <code>WithHover</code> component <code>this.props.height</code> is <code>16px</code> , but we do not do anything with this property in the future.  We need to make this property be passed to the <code>Component</code> argument, which we are rendering. <br><br><pre> <code class="hljs kotlin">render() {     <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> props = {       [propName]: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.hovering,       ...<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props,     }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (       &lt;div onMouseOver={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOver} onMouseOut={<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.mouseOut}&gt;         &lt;Component {...props} /&gt;       &lt;/div&gt;     ); }</code> </pre> <br><h2>  <font color="#3AC1EF">About the problems of working with higher-order third-party components</font> </h2><br>  We believe that you have already appreciated the advantages of using higher order components in reusing logic in various components without the need to copy the same code.  Now let us ask ourselves whether the higher order components have flaws.  This question can be answered positively, and we have already met with these shortcomings. <br><br>  When using HOC, <a href="https://en.wikipedia.org/wiki/Inversion_of_control">control inversion</a> occurs.  Imagine that we are using a higher-order component that was not developed by us, like the HOC <code>withRouter</code> React Router.  In accordance with the documentation, <code>withRouter</code> will pass the <code>match</code> , <code>location</code> and <code>history</code> properties to the wrapped component when it is rendered. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() {   const { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>, location, history } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props <span class="hljs-comment"><span class="hljs-comment">// From React Router   ... } } export default withRouter(Game)</span></span></code> </pre> <br>  Please note that we do not create a <code>Game</code> element (i.e., <code>&lt;Game /&gt;</code> ).  We completely transfer our component React Router and trust this component not only rendering, but also transferring the correct properties to our component.  We have already encountered this problem above when we talked about possible name conflicts when passing <code>hovering</code> properties.  In order to fix this, we decided to allow the HOC <code>withHover</code> use the second argument to set the name of the corresponding property.  Using someone else's HOC <code>withRouter</code> we do not have this opportunity.  If the <code>match</code> , <code>location</code> or <code>history</code> properties are already used in the <code>Game</code> component, then we can say that we are not lucky.  Namely, we either have to change these names in our component, or refuse to use HOC <code>withRouter</code> . <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Speaking of HOC in React, you need to remember two important things.  First, HOC is just a pattern.  Higher-order components are not even specific to React, despite the fact that they are related to the architecture of the application.  Secondly, in order to develop React applications, it is not necessary to know about higher order components.  You may well be unfamiliar with them, but at the same time write excellent programs.  However, as in any business, the more tools you have - the better can be the result of your work.  And, if you write applications using React, you will do yourself a disservice by not adding a HOC to your arsenal. <br><br>  <b>Dear readers!</b>  Do you use higher order components in React? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/428572/">https://habr.com/ru/post/428572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428562/index.html">Droidcon London. How it was</a></li>
<li><a href="../428564/index.html">Search MapKit: Tips & Tricks</a></li>
<li><a href="../428566/index.html">Arrow functions in JavaScript: why they are needed, how to handle them, when they should be used, and when not</a></li>
<li><a href="../428568/index.html">React Native Web Application Development Guide</a></li>
<li><a href="../428570/index.html">Higher Order Functions in JavaScript</a></li>
<li><a href="../428574/index.html">We take corporate communication to a new level with Zextras Chat</a></li>
<li><a href="../428576/index.html">[bookmark] Node.js pdf guide and new javascript guide</a></li>
<li><a href="../428578/index.html">How to start working with Hibernate Search</a></li>
<li><a href="../428580/index.html">Fruitful Communication Guide</a></li>
<li><a href="../428582/index.html">The forgotten story of the PLO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
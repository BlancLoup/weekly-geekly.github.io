<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C / C ++ compiler based on LLVM for multicellular processors: to be or not to be?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An inquisitive reader is probably already familiar with a fundamentally new processor architecture - multicellular; and if he does not know, he will b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C / C ++ compiler based on LLVM for multicellular processors: to be or not to be?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/bc4/474/28d/bc447428d8874897ae9c04cd8bc41611.jpg"><br><p>  An inquisitive reader is probably already familiar with a fundamentally new processor architecture - multicellular;  and if he does not know, he will be able to be briefly acquainted in our <a href="https://habrahabr.ru/post/226773/">article</a>  The architecture is so unlike traditional that creating a compiler for familiar programming languages ‚Äã‚Äãbecomes a problem with which developers <del>  unsuccessfully </del>  struggling for many years. </p><br><h4>  A bit of history </h4><br><p>  Since the founding of the Multiklet company in 2010, development of several types of compilers for multicellular architecture has been carried out: </p><br><ol><li>  With the first Multiclet P1 processor in 2012, the C89 compiler based on <a href="https://sites.google.com/site/lccretargetablecompiler/">LCC</a> was developed as part of the software.  At the same time, the development of the first version of the own compiler was carried out, suspended due to the initially complex unrealizable plan. <br>  As it has been repeatedly pointed out in many articles on this topic, and was also recognized by the company's developers themselves, the LCC-based compiler has a number of significant flaws: support for the C89 language only, the absence of any optimizations. <br>  Subsequently, this compiler was adapted to support the new processor Multiclet R1 (2015), the command system of which was significantly expanded, but the compiler did not take this into account. <br>  Taking into account these shortcomings, in 2012 the company management assembled a group of programmers who were tasked with developing a new C99 compiler, devoid of these shortcomings. <a name="habracut"></a></li><li>  After examining the available compilers (frameworks for developing compilers) with open source (GCC and LLVM), a controversial and categorical decision was made: none of the existing for the multicellular architecture is suitable for the second version of its compiler. <br><img src="https://habrastorage.org/files/54d/28b/eae/54d28beae0c143908f2de6abab3ad2af.jpg" align="left">  And three years of development began, which ended in the fall of 2015 by the fact that the development of our own compiler was again postponed for financial reasons.  The required resources exceeded the financial possibilities, which in the absence of any grant or budget support did not allow to divert resources to theoretical work. <br clear="all"></li><li>  In the autumn of 2015, it was decided to try to develop a compiler for the Multiclet R1 processor based on the LLVM framework.  And now the development team has moved on this interesting and exciting path. </li></ol><br><h4>  Few details </h4><br><p>  The main work was to write a compiler backend, which <br>  converts the intermediate representation of the LLVM into an assembly code for <br>  multicellular processor Multiclet R1.  This means that you can already try to compile programs written in any LLVM language, you only need to specify that their compilers output an LLVM IR bitcode or an assembler.  Then, the resulting file is submitted to the input of this backend. </p><br><img src="https://habrastorage.org/files/81d/ed7/6de/81ded76de75a41b989956a6097d404a3.png"><br><p>  In general terms, the following actions were performed during the development of the backend: </p><br><ol><li>  Description of the target architecture using abstract interfaces, as well as a specialized language TableGen, designed to describe the general information used in LLVM at different stages of compilation (* .td files) <br>  1.1.  Description of the characteristics of the target machine (derived class from TargetMachine, DataLayout, Multiclet.td) <br>  1.2.  Description of the target machine's register set (derived class from TargetRegisterInfo, MulticletRegisterInfo.td).  At this stage, the orientation of the LLVM framework to generate code for register machines, to which, in fact, multicellular processors do not apply, was immediately apparent.  There was a question how to describe the switch used to exchange results between instructions.  After a brief reflection, it was decided to consider the switch cells as registers with a limited lifetime, i.e. the values ‚Äã‚Äãof such registers are relevant only within one base unit, which in turn is a paragraph, and, moreover, their relevance within one base unit depends on the scope of the results provided by the switch.  Looking ahead, you can immediately say that such a decision leads to the need to write your register allocator. <br>  1.3.  Description of the instruction set supported by the target machine (derived class from TargetInstrInfo, MulticletTargetInstrFormats.td, MulticletTargetInstrInfo.td) </li><li>  Describes the process of sampling and converting the instructions of the LLVM IR intermediate representation, presented as a directed acyclic graph (DAG), into the corresponding instructions explicitly supported by the target machine (derived class from TargetLowering, derived class from SelectionDAGISel).  During the implementation of this stage, the need for special processing of instructions, which are displayed in the setXX instruction of the target machine, was revealed.  The fact is that the setXX instructions for setting the register value (NOT the switch cells) are actually executed upon completion of the paragraph, i.e., assuming that the paragraph is the base unit, upon completion of the base unit, therefore these instructions should break the base unit.  This behavior was implemented using special handlers (Instruction Emitting Hooks), which are called when an instruction is generated, of the TargetLowering class, in particular EmitInstrWithCustomInserter. </li><li>  Then, just before the allocation of registers, two passes were added, which reflect the specificity of the multicellular architecture: <br>  3.1.  Analysis and modification of control transfer instructions.  The fact is that in the multicellular architecture there are actually only instructions for setting the address of the next executable paragraph (although they are named, quite unfortunate, jmp and jXX), and the transfer of control itself is carried out at the end of the current paragraph.  Therefore, on this pass, firstly, in the base unit, in which there is no control transfer instruction (in this case, it is assumed that the next base unit located in the memory is being executed), an unconditional control transfer instruction is added to the next base unit, and secondly, in the base unit, in which there is one conditional control transfer instruction, immediately followed by one unconditional control transfer instruction, the unconditional control transfer instruction is replaced with the conditional instruction  Transferring control with the opposite condition. <br>  3.2.  Analysis of instructions for reading from memory and writing to memory.  Since in a multicellular architecture, the execution of instructions is unordered, then in one base unit it is generally unacceptable to execute two instructions to write to the same address, as well as to execute a reading instruction to an address that previously could (and could not have been) executed write instruction. </li><li>  The LLVM framework provides the following set of register allocators: fast, basic, greedy, pbqp.  In view of the features (availability of the switch) of the multicellular architecture of the above allocators, the correct assembler code can be generated only by using the fast allocator, which distributes the registers at the level of the basic blocks, which is necessary in the framework of the accepted concept "basic block".  Since fast, the allocator is the default allocator for debugging builds, it does not perform any optimizations.  To eliminate this fact, we developed our own multiclet allocator, which also contains some additional architecture-dependent optimizations. </li><li>  Implementing the prologue / epilogue function insert (derived from TargetFrameLowering). </li><li>  Further, just before the output of the assembler code, two passes were added, which reflect the specifics of the multicellular architecture: <br>  6.1.  Optimizing the location of control transfer instructions.  Since, in the multicellular architecture, control transfer instructions are in fact instructions for setting the address to which, at the end of the base unit (paragraph), it will be necessary to transfer control, in this passage we move such instructions (if possible) as close as possible to the beginning of the base unit. <br>  6.2.  Eliminating references to the results of previously executed instructions that are outside the scope of the results provided by the switch. <br>  To date, this pass performs a very simple processing of such links, which consists in adding the move instruction to the required position of the sequence of instructions.  In some cases, such trivial processing may fail, which will lead to a crash of the program (compiler). </li><li>  The implementation of the pass code emission (output assembler code). </li></ol><br><p>  The set of changes made to the frontend was significantly smaller: the multicellular architecture was added as a supported target machine. </p><br><p> As a result of this work, a good foundation was laid for the development of a compiler for multicellular processors based on LLVM.  In other words, the development of this compiler is a little further than the initial stage, as evidenced by the following incomplete list of shortcomings of the current version of the compiler: </p><br><ol><li>  There is no full support for 64-bit integer arithmetic. </li><li>  There is no support for vector instructions, which in a limited set are supported by the Multiclet R1 processor. </li><li>  The architecture-dependent optimizations on the backend side are in their infancy (only obvious optimizations are implemented). </li><li>  The compiler does not take into account all possible hardware errors of the Multiclet R1 processor (in general, one would like to make and avoid such errors on the assembler side, so that the top-level compiler is free from the solution of this problem, and not to repeat the same code in different compilers top level, if there are several (we have a lcc based C89 compiler)). </li><li>  There is no standard C language library, math library, etc. </li><li>  There is no possibility of generating position-independent code (-fPIC), all generated code is static. </li><li>  There is no generation of debug information. </li><li>  The reaction of the compiler to the use of attributes ( <strong>attribute</strong> ) and assembler inserts in the source code is not known, since tests of this code were not carried out (it is possible in some cases that the compiler crashes). </li></ol><br><p>  The presented compiler can be downloaded on the official website of the company <a href="http://multiclet.com/index.php/ru/support/technical-documents">here</a> . <br>  You can ask all the questions on the <a href="http://multiclet.com/community/boards/4/topics/1687">forum</a> . </p><br><h4>  About current results </h4><br><p>  Using the current version of the compiler, various short C programs were compiled, which were mainly used for testing, <a href="http://savannah.nongnu.org/projects/lwip/">A Lightweight TCP / IP stack version 1.4.1</a> , <a href="http://www.eembc.org/coremark/download.php">Coremark</a> test. </p><br><p>  The result of the Coremark test for the Multiclet R1 is 0.56 Coremark / MHz, which is almost two times better than the Coremark test, which was compiled using the compiler <br>  C89 based on LCC. </p><br><p>  Of course, the result of 0.56 Coremark / MHz is still far from the desired 2-3 units.  Firstly, this is due to the lack of good architecture-dependent optimizations in the presented version of the compiler, and, secondly, to the non-optimality of some <br>  hardware blocks of this particular implementation of the processor Multiclet R1, which are poorly adapted to perform sequential (poorly parallelizable) algorithms, which are not so few in Coremark. </p><br><p>  CoreMark Comparison Chart </p><br><table><thead><tr><th></th><th>  Multiclet P1 (lcc compiler) </th><th>  Multiclet R1 (lcc compiler) </th><th>  Multiclet R1 (llvm compiler) </th><th>  985BE91T Milander ARM Cortex-M3 </th><th>  STM32F4x ARM Cortex-M4 </th><th>  RX62N Renesas </th><th>  WIPS proAptive RTL FPGA prototype </th><th>  Intel Core i7-2760QM CPU@2.40GHz </th></tr></thead><tbody><tr><td>  Clock frequency, MHz </td><td>  80 </td><td>  100 </td><td>  100 </td><td>  80 </td><td>  168 </td><td>  100 </td><td>  31 </td><td>  2400 </td></tr><tr><td>  CoreMark Total </td><td>  24.49 </td><td>  24.95 </td><td>  56.45 </td><td>  117.6 </td><td>  501.85 </td><td>  311.54 </td><td>  137.10 </td><td>  85151.68 </td></tr><tr><td>  CoreMark / MHz </td><td>  0.31 </td><td>  0.25 </td><td>  0.56 </td><td>  1.47 </td><td>  2.98 </td><td>  3.12 </td><td>  4.42 </td><td>  35.48 </td></tr></tbody></table><br><p>  For evaluation of architectures of parallel processors, it is more expedient to use assembler programs that take into account all the features of the architecture and implement parallel algorithms.  Consider a couple of examples. </p><br><p>  An example of an assembler implementation of the calculation of the population of single bits in a 512-bit operand, whose speed on a Multiclet R1 processor is comparable to that on an Intel Core i7 processor. </p><br><div class="spoiler">  <b class="spoiler_title">Implementation in assembler</b> <div class="spoiler_text"><pre><code class="hljs mel">.data .p2align <span class="hljs-number"><span class="hljs-number">3</span></span> work_result: .space <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> tmp: .long <span class="hljs-number"><span class="hljs-number">0</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">text</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value1 GPR0 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value2 GPR1 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value3 GPR2 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value4 GPR3 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value5 GPR4 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value6 GPR5 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value7 GPR6 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> value8 GPR7 .<span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> result IR0 init: jmp init_timer setl #result, <span class="hljs-number"><span class="hljs-number">0x0</span></span> b1 := getb <span class="hljs-number"><span class="hljs-number">0x0</span></span> b2 := getb @b1 + <span class="hljs-number"><span class="hljs-number">1</span></span> b3 := getb @b1 + <span class="hljs-number"><span class="hljs-number">2</span></span> b4 := getb @b1 + <span class="hljs-number"><span class="hljs-number">3</span></span> b5 := getb @b1 + <span class="hljs-number"><span class="hljs-number">4</span></span> b6 := getb @b1 + <span class="hljs-number"><span class="hljs-number">5</span></span> b7 := getb @b1 + <span class="hljs-number"><span class="hljs-number">6</span></span> b8 := getb @b1 + <span class="hljs-number"><span class="hljs-number">7</span></span> s2 := slll @b2, <span class="hljs-number"><span class="hljs-number">8</span></span> s3 := slll @b3, <span class="hljs-number"><span class="hljs-number">16</span></span> s4 := slll @b4, <span class="hljs-number"><span class="hljs-number">24</span></span> s6 := slll @b6, <span class="hljs-number"><span class="hljs-number">8</span></span> s7 := slll @b7, <span class="hljs-number"><span class="hljs-number">16</span></span> s8 := slll @b8, <span class="hljs-number"><span class="hljs-number">24</span></span> v1 := andl @b1, <span class="hljs-number"><span class="hljs-number">0x000000FF</span></span> v2 := andl @s2, <span class="hljs-number"><span class="hljs-number">0x0000FF00</span></span> v3 := andl @s3, <span class="hljs-number"><span class="hljs-number">0x00FF0000</span></span> v4 := andl @s4, <span class="hljs-number"><span class="hljs-number">0xFF000000</span></span> v5 := andl @b5, <span class="hljs-number"><span class="hljs-number">0x000000FF</span></span> v6 := andl @s6, <span class="hljs-number"><span class="hljs-number">0x0000FF00</span></span> v7 := andl @s7, <span class="hljs-number"><span class="hljs-number">0x00FF0000</span></span> v8 := andl @s8, <span class="hljs-number"><span class="hljs-number">0xFF000000</span></span> r1_16 := orl @v1, @v2 r2_16 := orl @v3, @v4 r3_16 := orl @v5, @v6 r4_16 := orl @v7, @v8 r1_32 := orl @r1_16, @r2_16 r2_32 := orl @r3_16, @r4_16 r64 := patch @r1_32, @r2_32 setq #value1, @r64 setq #value2, @r64 setq #value3, @r64 setq #value4, @r64 setq #value5, @r64 setq #value6, @r64 setq #value7, @r64 setq #value8, @r64 complete init_timer: jmp init_timer_2 wrl @0, <span class="hljs-number"><span class="hljs-number">0xC0010018</span></span>; TIM0_CR0 complete init_timer_2: jmp init_timer_3 getl <span class="hljs-number"><span class="hljs-number">10</span></span> - <span class="hljs-number"><span class="hljs-number">1</span></span> getl <span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span> wrl @2, <span class="hljs-number"><span class="hljs-number">0xC0010004</span></span>; TIM0_PSCPER wrl @2, <span class="hljs-number"><span class="hljs-number">0xC0010014</span></span>; TIM0_CNTPER0 complete init_timer_3: getl <span class="hljs-number"><span class="hljs-number">0x03</span></span> wrl @1, <span class="hljs-number"><span class="hljs-number">0xC0010018</span></span>; TIM0_CR0 jmp start_popcnt512 complete start_popcnt512: jmp new_popcnt512_reg rdl <span class="hljs-number"><span class="hljs-number">0xC0010010</span></span>; TIM0_CNTVAL0 wrdl @1, tmp complete new_popcnt512_reg: val1 := getl #value1 val2 := getl #value2 val3 := getl #value3 val4 := getl #value4 val5 := getl #value5 val6 := getl #value6 val7 := getl #value7 val8 := getl #value8 val9 := pack @0, #value1 val10 := pack @0, #value2 val11 := pack @0, #value3 val12 := pack @0, #value4 val13 := pack @0, #value5 val14 := pack @0, #value6 val15 := pack @0, #value7 val16 := pack @0, #value8 s1_1 := slrl @val1, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_2 := slrl @val2, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_3 := slrl @val3, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_4 := slrl @val4, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_5 := slrl @val5, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_6 := slrl @val6, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_7 := slrl @val7, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_8 := slrl @val8, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_9 := slrl @val9, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_10 := slrl @val10, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_11 := slrl @val11, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_12 := slrl @val12, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_13 := slrl @val13, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_14 := slrl @val14, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_15 := slrl @val15, <span class="hljs-number"><span class="hljs-number">1</span></span> s1_16 := slrl @val16, <span class="hljs-number"><span class="hljs-number">1</span></span> s2_1 := andl @s1_1, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_2 := andl @s1_2, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_3 := andl @s1_3, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_4 := andl @s1_4, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_5 := andl @s1_5, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_6 := andl @s1_6, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_7 := andl @s1_7, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_8 := andl @s1_8, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_9 := andl @s1_9, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_10 := andl @s1_10, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_11 := andl @s1_11, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_12 := andl @s1_12, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_13 := andl @s1_13, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_14 := andl @s1_14, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_15 := andl @s1_15, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s2_16 := andl @s1_16, <span class="hljs-number"><span class="hljs-number">0x55555555</span></span> s3_1 := subl @val1, @s2_1 s3_2 := subl @val2, @s2_2 s3_3 := subl @val3, @s2_3 s3_4 := subl @val4, @s2_4 s3_5 := subl @val5, @s2_5 s3_6 := subl @val6, @s2_6 s3_7 := subl @val7, @s2_7 s3_8 := subl @val8, @s2_8 s3_9 := subl @val9, @s2_9 s3_10 := subl @val10, @s2_10 s3_11 := subl @val11, @s2_11 s3_12 := subl @val12, @s2_12 s3_13 := subl @val13, @s2_13 s3_14 := subl @val14, @s2_14 s3_15 := subl @val15, @s2_15 s3_16 := subl @val16, @s2_16 s4_1 := andl @s3_1, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_2 := andl @s3_2, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_3 := andl @s3_3, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_4 := andl @s3_4, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_5 := andl @s3_5, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_6 := andl @s3_6, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_7 := andl @s3_7, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_8 := andl @s3_8, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_9 := andl @s3_9, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_10 := andl @s3_10, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_11 := andl @s3_11, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_12 := andl @s3_12, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_13 := andl @s3_13, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_14 := andl @s3_14, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_15 := andl @s3_15, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s4_16 := andl @s3_16, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s5_1 := slrl @s3_1, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_2 := slrl @s3_2, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_3 := slrl @s3_3, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_4 := slrl @s3_4, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_5 := slrl @s3_5, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_6 := slrl @s3_6, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_7 := slrl @s3_7, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_8 := slrl @s3_8, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_9 := slrl @s3_9, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_10 := slrl @s3_10, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_11 := slrl @s3_11, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_12 := slrl @s3_12, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_13 := slrl @s3_13, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_14 := slrl @s3_14, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_15 := slrl @s3_15, <span class="hljs-number"><span class="hljs-number">2</span></span> s5_16 := slrl @s3_16, <span class="hljs-number"><span class="hljs-number">2</span></span> s6_1 := andl @s5_1, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_2 := andl @s5_2, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_3 := andl @s5_3, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_4 := andl @s5_4, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_5 := andl @s5_5, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_6 := andl @s5_6, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_7 := andl @s5_7, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_8 := andl @s5_8, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_9 := andl @s5_9, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_10 := andl @s5_10, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_11 := andl @s5_11, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_12 := andl @s5_12, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_13 := andl @s5_13, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_14 := andl @s5_14, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_15 := andl @s5_15, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s6_16 := andl @s5_16, <span class="hljs-number"><span class="hljs-number">0x33333333</span></span> s7_1 := addl @s4_1, @s6_1 s7_2 := addl @s4_2, @s6_2 s7_3 := addl @s4_3, @s6_3 s7_4 := addl @s4_4, @s6_4 s7_5 := addl @s4_5, @s6_5 s7_6 := addl @s4_6, @s6_6 s7_7 := addl @s4_7, @s6_7 s7_8 := addl @s4_8, @s6_8 s7_9 := addl @s4_9, @s6_9 s7_10 := addl @s4_10, @s6_10 s7_11 := addl @s4_11, @s6_11 s7_12 := addl @s4_12, @s6_12 s7_13 := addl @s4_13, @s6_13 s7_14 := addl @s4_14, @s6_14 s7_15 := addl @s4_15, @s6_15 s7_16 := addl @s4_16, @s6_16 s8_1 := slrl @s7_1, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_2 := slrl @s7_2, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_3 := slrl @s7_3, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_4 := slrl @s7_4, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_5 := slrl @s7_5, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_6 := slrl @s7_6, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_7 := slrl @s7_7, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_8 := slrl @s7_8, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_9 := slrl @s7_9, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_10 := slrl @s7_10, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_11 := slrl @s7_11, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_12 := slrl @s7_12, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_13 := slrl @s7_13, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_14 := slrl @s7_14, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_15 := slrl @s7_15, <span class="hljs-number"><span class="hljs-number">4</span></span> s8_16 := slrl @s7_16, <span class="hljs-number"><span class="hljs-number">4</span></span> s9_1 := addl @s7_1, @s8_1 s9_2 := addl @s7_2, @s8_2 s9_3 := addl @s7_3, @s8_3 s9_4 := addl @s7_4, @s8_4 s9_5 := addl @s7_5, @s8_5 s9_6 := addl @s7_6, @s8_6 s9_7 := addl @s7_7, @s8_7 s9_8 := addl @s7_8, @s8_8 s9_9 := addl @s7_9, @s8_9 s9_10 := addl @s7_10, @s8_10 s9_11 := addl @s7_11, @s8_11 s9_12 := addl @s7_12, @s8_12 s9_13 := addl @s7_13, @s8_13 s9_14 := addl @s7_14, @s8_14 s9_15 := addl @s7_15, @s8_15 s9_16 := addl @s7_16, @s8_16 s10_1 := andl @s9_1, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_2 := andl @s9_2, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_3 := andl @s9_3, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_4 := andl @s9_4, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_5 := andl @s9_5, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_6 := andl @s9_6, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_7 := andl @s9_7, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_8 := andl @s9_8, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_9 := andl @s9_9, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_10 := andl @s9_10, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_11 := andl @s9_11, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_12 := andl @s9_12, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_13 := andl @s9_13, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_14 := andl @s9_14, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_15 := andl @s9_15, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s10_16 := andl @s9_16, <span class="hljs-number"><span class="hljs-number">0xF0F0F0F</span></span> s11_1 := mull @s10_1, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_2 := mull @s10_2, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_3 := mull @s10_3, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_4 := mull @s10_4, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_5 := mull @s10_5, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_6 := mull @s10_6, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_7 := mull @s10_7, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_8 := mull @s10_8, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_9 := mull @s10_9, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_10 := mull @s10_10, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_11 := mull @s10_11, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_12 := mull @s10_12, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_13 := mull @s10_13, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_14 := mull @s10_14, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_15 := mull @s10_15, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s11_16 := mull @s10_16, <span class="hljs-number"><span class="hljs-number">0x1010101</span></span> s12_1 := slrl @s11_1, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_2 := slrl @s11_2, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_3 := slrl @s11_3, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_4 := slrl @s11_4, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_5 := slrl @s11_5, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_6 := slrl @s11_6, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_7 := slrl @s11_7, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_8 := slrl @s11_8, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_9 := slrl @s11_9, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_10 := slrl @s11_10, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_11 := slrl @s11_11, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_12 := slrl @s11_12, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_13 := slrl @s11_13, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_14 := slrl @s11_14, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_15 := slrl @s11_15, <span class="hljs-number"><span class="hljs-number">24</span></span> s12_16 := slrl @s11_16, <span class="hljs-number"><span class="hljs-number">24</span></span> sum1 := addl @s12_1, @s12_2 sum2 := addl @s12_3, @s12_4 sum3 := addl @s12_5, @s12_6 sum4 := addl @s12_7, @s12_8 sum5 := addl @s12_9, @s12_10 sum6 := addl @s12_11, @s12_12 sum7 := addl @s12_13, @s12_14 sum8 := addl @s12_15, @s12_16 sum9 := addl @sum1, @sum2 sum10 := addl @sum3, @sum4 sum11 := addl @sum5, @sum6 sum12 := addl @sum7, @sum8 sum13 := addl @sum9, @sum10 sum14 := addl @sum11, @sum12 sum15 := addl @sum13, @sum14 setl #result, @sum15 jmp stop_popcnt512 complete stop_popcnt512: jmp save_result rdl <span class="hljs-number"><span class="hljs-number">0xC0010010</span></span>; TIM0_CNTVAL0 rdl tmp subl @1, @2 wrdl @1, work_result complete save_result: jmp uart_init getl #result wrdl @1, work_result + <span class="hljs-number"><span class="hljs-number">4</span></span> complete uart_init: jmp uart_print altport := getl <span class="hljs-number"><span class="hljs-number">0xFFFFFFFF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">control</span></span> := getl <span class="hljs-number"><span class="hljs-number">0x00000003</span></span>; rx, tx enable bitrate := getl <span class="hljs-number"><span class="hljs-number">0x34</span></span>; wrdl @control, <span class="hljs-number"><span class="hljs-number">0xC0000108</span></span> wrdl @altport, <span class="hljs-number"><span class="hljs-number">0xC00F0218</span></span> wrdl @bitrate, <span class="hljs-number"><span class="hljs-number">0xC000010C</span></span> setl #GPR0, <span class="hljs-number"><span class="hljs-number">8</span></span> complete uart_print: count := getl #GPR0 je @count, stop jne @count, uart_wait setl #GPR0, #GPR0, <span class="hljs-number"><span class="hljs-number">-1</span></span> complete uart_wait: st := rddl <span class="hljs-number"><span class="hljs-number">0xC0000104</span></span> andl @st, <span class="hljs-number"><span class="hljs-number">2</span></span> je @1, uart_wait jne @2, uart_print_data complete uart_print_data: jmp uart_print data := rdq work_result n_data := slrq @data, <span class="hljs-number"><span class="hljs-number">8</span></span> wrq @n_data, work_result wrdb @data, <span class="hljs-number"><span class="hljs-number">0xC0000100</span></span> complete stop: getl <span class="hljs-number"><span class="hljs-number">0x0</span></span> complete</code> </pre> </div></div><br><p>  This implementation performs the specified algorithm in approximately 90 cycles. </p><br><p>  For comparison, consider the equivalent code in C </p><br><div class="spoiler">  <b class="spoiler_title">C implementation (test_popcnt.c file)</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"timer.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"mc-stdio.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"serial.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B1 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B2 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B3 2 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B4 3 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B5 4 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B6 5 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B7 6 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> B8 7 unsigned int countBits(unsigned int x) { x = x - ((x &gt;&gt; 1) &amp; 0x55555555); x = (x &amp; 0x33333333) + ((x &gt;&gt; 2) &amp; 0x33333333); x = x + (x &gt;&gt; 4); x &amp;= 0xF0F0F0F; return (x * 0x01010101) &gt;&gt; 24; } void init(unsigned int *v, int cnt) { unsigned int v1 = ((B1 &amp; 0xFF) &lt;&lt; 0) | ((B2 &amp; 0xFF) &lt;&lt; 8) | ((B3 &amp; 0xFF) &lt;&lt; 16) | ((B4 &amp; 0xFF) &lt;&lt; 24); unsigned int v2 = ((B5 &amp; 0xFF) &lt;&lt; 0) | ((B6 &amp; 0xFF) &lt;&lt; 8) | ((B7 &amp; 0xFF) &lt;&lt; 16) | ((B8 &amp; 0xFF) &lt;&lt; 24); for (int i = 0; i &lt; cnt; i += 2) { v[i] = v1; v[i+1] = v2; } } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SIZE 16 int main(int argc, char *argv[]) { init_system_timer(TIM0, 0x03, 0xffffffff, 10); SER_init(); unsigned int res = 0; unsigned int v[SIZE]; init(v, SIZE); uint32_t start = get_system_ticks(TIM0); for (int i = 0; i &lt; SIZE; ++i) res += countBits(v[i]); uint32_t stop = get_system_ticks(TIM0); mc_uprintf(0, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ticks count = 0x%X\nbits_count = %u"</span></span></span><span class="hljs-meta">, start - stop, res); return res; }</span></span></code> </pre> </div></div><br><p>  To compile, run the following command: </p><br><p> <code>clang -target multiclet -O2 -S test_popcnt.c -o test_popcnt.s -I&lt;PATH_TO_INCL_DIR&gt;</code> </p> <br><div class="spoiler">  <b class="spoiler_title">As a result, the following assembler code will be obtained.</b> <div class="spoiler_text"><pre> <code class="hljs mel"> .<span class="hljs-keyword"><span class="hljs-keyword">text</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-string"><span class="hljs-string">"test_popcnt.c"</span></span> .globl countBits .type countBits,@function countBits: SR2 := rdl #IR7, <span class="hljs-number"><span class="hljs-number">4</span></span> SR3 := rdl #IR7 jmp @SR3 SR4 := slrl @SR2, <span class="hljs-number"><span class="hljs-number">1</span></span> SR5 := andl @SR4, <span class="hljs-number"><span class="hljs-number">1431655765</span></span> SR4 := subsl @SR2, @SR5 SR2 := andl @SR4, <span class="hljs-number"><span class="hljs-number">858993459</span></span> SR5 := slrl @SR4, <span class="hljs-number"><span class="hljs-number">2</span></span> SR4 := andl @SR5, <span class="hljs-number"><span class="hljs-number">858993459</span></span> SR5 := addsl @SR4, @SR2 SR2 := slrl @SR5, <span class="hljs-number"><span class="hljs-number">4</span></span> SR4 := addsl @SR2, @SR5 SR2 := andl @SR4, <span class="hljs-number"><span class="hljs-number">252645135</span></span> SR4 := mulsl @SR2, <span class="hljs-number"><span class="hljs-number">16843009</span></span> SR2 := slrl @SR4, <span class="hljs-number"><span class="hljs-number">24</span></span> setq #GPR7, @SR2 complete .Lfunc_end0: .<span class="hljs-keyword"><span class="hljs-keyword">size</span></span> countBits, .Lfunc_end0-countBits .globl init .type init,@function init: jmp LBB1_1 setl #IR7, #IR7, <span class="hljs-number"><span class="hljs-number">-16</span></span> complete LBB1_1: SR2 := rdl #IR7, <span class="hljs-number"><span class="hljs-number">24</span></span> SR3 := ltsl @SR2, <span class="hljs-number"><span class="hljs-number">1</span></span> je @SR3, LBB1_2 jne @SR3, LBB1_3 complete LBB1_2: jmp LBB1_4 SR2 := rdl #IR7, <span class="hljs-number"><span class="hljs-number">20</span></span> SR3 := addsl @SR2, <span class="hljs-number"><span class="hljs-number">4</span></span> wrq @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">8</span></span> wrq @0, #IR7 complete LBB1_4: SR2 := getl <span class="hljs-number"><span class="hljs-number">50462976</span></span> SR3 := getl <span class="hljs-number"><span class="hljs-number">117835012</span></span> SR4 := rdl #IR7, <span class="hljs-number"><span class="hljs-number">24</span></span> SR5 := rdq #IR7 SR6 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">8</span></span> SR7 := addsl @SR6, <span class="hljs-number"><span class="hljs-number">-4</span></span> wrl @SR3, @SR6 SR3 := addsl @SR6, <span class="hljs-number"><span class="hljs-number">8</span></span> SR6 := addsl @SR5, <span class="hljs-number"><span class="hljs-number">2</span></span> wrl @SR2, @SR7 SR2 := ltsl @SR6, @SR4 je @SR2, LBB1_3 jne @SR2, LBB1_4 wrq @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">8</span></span> wrq @SR6, #IR7 complete LBB1_3: SR2 := rdl #IR7, <span class="hljs-number"><span class="hljs-number">16</span></span> jmp @SR2 setl #IR7, #IR7, <span class="hljs-number"><span class="hljs-number">16</span></span> complete .Lfunc_end1: .<span class="hljs-keyword"><span class="hljs-keyword">size</span></span> init, .Lfunc_end1-init .globl main .type main,@function main: jmp LBB2_1 setl #IR7, #IR7, <span class="hljs-number"><span class="hljs-number">-128</span></span> complete LBB2_1: jmp init_system_timer SR2 := getl <span class="hljs-number"><span class="hljs-number">10</span></span> SR3 := getl <span class="hljs-number"><span class="hljs-number">-1</span></span> SR4 := getl <span class="hljs-number"><span class="hljs-number">3</span></span> SR5 := getl <span class="hljs-number"><span class="hljs-number">-1073676288</span></span> SR6 := getl LBB2_2 wrl @SR2, #IR7, <span class="hljs-number"><span class="hljs-number">16</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">12</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">8</span></span> wrl @SR5, #IR7, <span class="hljs-number"><span class="hljs-number">4</span></span> wrl @SR6, #IR7 complete LBB2_2: jmp SER_init SR2 := getl LBB2_3 wrl @SR2, #IR7 complete LBB2_3: jmp get_system_ticks SR2 := getl <span class="hljs-number"><span class="hljs-number">-1073676288</span></span> SR3 := getl <span class="hljs-number"><span class="hljs-number">50462976</span></span> SR4 := getl <span class="hljs-number"><span class="hljs-number">117835012</span></span> SR5 := getl LBB2_4 wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">64</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">68</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">72</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">76</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">80</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">84</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">88</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">92</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">96</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">100</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">104</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">108</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">112</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">116</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">120</span></span> wrl @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">124</span></span> wrl @SR2, #IR7, <span class="hljs-number"><span class="hljs-number">4</span></span> wrl @SR5, #IR7 complete LBB2_4: jmp LBB2_8 SR2 := getl <span class="hljs-number"><span class="hljs-number">4</span></span> SR3 := getq #GPR7 SR4 := exal #IR7, <span class="hljs-number"><span class="hljs-number">64</span></span> wrq @SR2, #IR7, <span class="hljs-number"><span class="hljs-number">56</span></span> wrq @SR2, #IR7, <span class="hljs-number"><span class="hljs-number">48</span></span> wrq @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">40</span></span> wrq @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">24</span></span> complete LBB2_8: SR2 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">24</span></span> SR3 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">48</span></span> SR4 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">56</span></span> SR5 := addsl @SR2, @SR4 SR2 := addsl @SR4, <span class="hljs-number"><span class="hljs-number">4</span></span> SR4 := rdl @SR5 SR5 := xorl @SR2, <span class="hljs-number"><span class="hljs-number">64</span></span> jne @SR5, LBB2_8 je @SR5, LBB2_5 wrq @SR2, #IR7, <span class="hljs-number"><span class="hljs-number">56</span></span> SR2 := slrl @SR4, <span class="hljs-number"><span class="hljs-number">1</span></span> SR6 := andl @SR2, <span class="hljs-number"><span class="hljs-number">1431655765</span></span> SR2 := subsl @SR4, @SR6 SR4 := andl @SR2, <span class="hljs-number"><span class="hljs-number">858993459</span></span> SR6 := slrl @SR2, <span class="hljs-number"><span class="hljs-number">2</span></span> SR2 := andl @SR6, <span class="hljs-number"><span class="hljs-number">858993459</span></span> SR6 := addsl @SR2, @SR4 SR2 := slrl @SR6, <span class="hljs-number"><span class="hljs-number">4</span></span> SR4 := addsl @SR2, @SR6 SR2 := andl @SR4, <span class="hljs-number"><span class="hljs-number">252645135</span></span> SR4 := mulsl @SR2, <span class="hljs-number"><span class="hljs-number">16843009</span></span> SR2 := slrl @SR4, <span class="hljs-number"><span class="hljs-number">24</span></span> SR4 := addsl @SR2, @SR3 wrq @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">48</span></span> wrq @SR4, #IR7, <span class="hljs-number"><span class="hljs-number">32</span></span> complete LBB2_5: jmp get_system_ticks SR2 := getl <span class="hljs-number"><span class="hljs-number">-1073676288</span></span> SR3 := getl LBB2_6 wrl @SR2, #IR7, <span class="hljs-number"><span class="hljs-number">4</span></span> wrl @SR3, #IR7 complete LBB2_6: jmp mc_uprintf SR2 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">40</span></span> SR3 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">32</span></span> SR4 := getq #GPR7 SR5 := getl .L.str wrl @0, #IR7, <span class="hljs-number"><span class="hljs-number">4</span></span> SR6 := getl LBB2_7 SR7 := subsl @SR2, @SR4 wrl @SR5, #IR7, <span class="hljs-number"><span class="hljs-number">8</span></span> wrl @SR3, #IR7, <span class="hljs-number"><span class="hljs-number">16</span></span> wrl @SR6, #IR7 wrl @SR7, #IR7, <span class="hljs-number"><span class="hljs-number">12</span></span> complete LBB2_7: SR2 := rdq #IR7, <span class="hljs-number"><span class="hljs-number">32</span></span> setq #GPR7, @SR2 SR2 := rdl #IR7, <span class="hljs-number"><span class="hljs-number">128</span></span> jmp @SR2 setl #IR7, #IR7, <span class="hljs-number"><span class="hljs-number">128</span></span> complete .Lfunc_end2: .<span class="hljs-keyword"><span class="hljs-keyword">size</span></span> main, .Lfunc_end2-main .type .L.str,@object .section .rodata.str1<span class="hljs-number"><span class="hljs-number">.1</span></span>,<span class="hljs-string"><span class="hljs-string">"aMS"</span></span>,@progbits,<span class="hljs-number"><span class="hljs-number">1</span></span> .L.str: .asciz <span class="hljs-string"><span class="hljs-string">"ticks count = 0x%X\nbits_count = %u"</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">size</span></span> .L.str, <span class="hljs-number"><span class="hljs-number">35</span></span></code> </pre> </div></div><br><p>  This implementation performs the specified algorithm in approximately 950 cycles, which is more than 10 times worse than the assembler version. </p><br><p>  We present a summary table of results (the number of cycles for one cycle of calculating 32 bits) </p><br><table><thead><tr><th>  Algorithm </th><th>  Multiclet R1 ¬© </th><th>  Multiclet R1 (ASM) </th><th>  Pentium Dual Core 5700 3.0GHz </th><th>  Intel Core i7-4700HQ @ 2400 </th></tr></thead><tbody><tr><td>  Bithacks </td><td>  59.4 </td><td>  5.0 </td><td>  9.5 </td><td>  4.7 </td></tr></tbody></table><br><p>  One of the most presentational algorithms is the FFT.  At the same time, in order to exclude technological factors, the assessment should be carried out in cycles spent on solving this problem, it is also necessary to consider the number of operations performed per cycle and their features (the amount of data generated by SIMD operation can be two or more). </p><br><div class="spoiler">  <b class="spoiler_title">Consider an assembler implementation of a single-precision 256-point floating-point single-point FFT.</b> <div class="spoiler_text"><pre> <code class="hljs go">.alias IRBASE <span class="hljs-number"><span class="hljs-number">8</span></span> .alias IR0 <span class="hljs-number"><span class="hljs-number">8</span></span> .alias IR1 <span class="hljs-number"><span class="hljs-number">9</span></span> .alias IR2 <span class="hljs-number"><span class="hljs-number">10</span></span> .alias IR3 <span class="hljs-number"><span class="hljs-number">11</span></span> .alias IR4 <span class="hljs-number"><span class="hljs-number">12</span></span> .alias IRMASK01234 ((<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR0 - IRBASE)) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR1 - IRBASE)) \ | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR2 - IRBASE)) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR3 - IRBASE)) \ | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR4 - IRBASE))) .alias IRMASK04 ((<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR0 - IRBASE)) | (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; (IR4 - IRBASE))) .syntax V1 .data ticks: .long <span class="hljs-number"><span class="hljs-number">0</span></span> .align <span class="hljs-number"><span class="hljs-number">8</span></span> W: ; Re(z), Im(z) .float\ <span class="hljs-number"><span class="hljs-number">0f</span></span>1<span class="hljs-number"><span class="hljs-number">.000000000000000000000000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.000000000000000000000000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.999698817729949951171875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.024541229009628295898438</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.998795449733734130859375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.049067676067352294921875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.997290432453155517578125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.073564566671848297119141</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.995184719562530517578125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.098017141222953796386719</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.992479562759399414062500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.122410677373409271240234</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.989176511764526367187500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.146730467677116394042969</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.985277652740478515625000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.170961901545524597167969</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.980785250663757324218750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.195090323686599731445312</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.975702106952667236328125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.219101235270500183105469</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.970031261444091796875000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.242980197072029113769531</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.963776051998138427734375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.266712784767150878906250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.956940352916717529296875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.290284663438796997070312</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.949528157711029052734375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.313681751489639282226562</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.941544055938720703125000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.336889863014221191406250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.932992815971374511718750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.359895050525665283203125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.923879504203796386718750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.382683455944061279296875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.914209723472595214843750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.405241340398788452148438</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.903989315032958984375000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.427555084228515625000000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.893224298954010009765625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.449611335992813110351562</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.881921231746673583984375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.471396744251251220703125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.870086967945098876953125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.492898225784301757812500</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.857728600502014160156250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.514102756977081298828125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.844853579998016357421875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.534997642040252685546875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.831469595432281494140625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.555570244789123535156250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.817584812641143798828125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.575808227062225341796875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.803207516670227050781250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.595699310302734375000000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.788346409797668457031250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.615231633186340332031250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.773010432720184326171875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.634393334388732910156250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.757208824157714843750000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.653172850608825683593750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.740951120853424072265625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.671558976173400878906250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.724247097969055175781250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.689540565013885498046875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.707106769084930419921875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.707106769084930419921875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.689540505409240722656250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.724247097969055175781250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.671558916568756103515625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.740951180458068847656250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.653172791004180908203125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.757208883762359619140625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.634393274784088134765625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.773010432720184326171875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.615231573581695556640625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.788346409797668457031250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.595699310302734375000000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.803207516670227050781250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.575808167457580566406250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.817584812641143798828125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.555570185184478759765625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.831469655036926269531250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.534997642040252685546875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.844853579998016357421875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.514102697372436523437500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.857728660106658935546875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.492898195981979370117188</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.870086967945098876953125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.471396654844284057617188</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.881921291351318359375000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.449611306190490722656250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.893224298954010009765625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.427555114030838012695312</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.903989315032958984375000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.405241280794143676757812</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.914209783077239990234375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.382683426141738891601562</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.923879504203796386718750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.359894961118698120117188</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.932992815971374511718750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.336889833211898803710938</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.941544055938720703125000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.313681662082672119140625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.949528217315673828125000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.290284633636474609375000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.956940352916717529296875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.266712754964828491210938</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.963776051998138427734375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.242980122566223144531250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.970031261444091796875000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.219101220369338989257812</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.975702106952667236328125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.195090234279632568359375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.980785310268402099609375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.170961856842041015625000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.985277652740478515625000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.146730497479438781738281</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.989176511764526367187500</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.122410625219345092773438</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.992479562759399414062500</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.098017133772373199462891</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.995184719562530517578125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.073564492166042327880859</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.997290432453155517578125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.049067649990320205688477</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.998795449733734130859375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span>0<span class="hljs-number"><span class="hljs-number">.024541135877370834350586</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.999698817729949951171875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.000000043711388286737929</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-1.000000000000000000000000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.024541223421692848205566</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.999698817729949951171875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.049067739397287368774414</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.998795449733734130859375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.073564574122428894042969</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.997290432453155517578125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.098017223179340362548828</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.995184719562530517578125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.122410707175731658935547</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.992479503154754638671875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.146730571985244750976562</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.989176511764526367187500</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.170961946249008178710938</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.985277652740478515625000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.195090323686599731445312</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.980785250663757324218750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.219101309776306152343750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.975702106952667236328125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.242980197072029113769531</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.970031261444091796875000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.266712844371795654296875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.963776051998138427734375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.290284723043441772460938</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.956940293312072753906250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.313681721687316894531250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.949528157711029052734375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.336889922618865966796875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.941544055938720703125000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.359895050525665283203125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.932992815971374511718750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.382683515548706054687500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.923879504203796386718750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.405241340398788452148438</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.914209723472595214843750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.427555084228515625000000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.903989315032958984375000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.449611365795135498046875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.893224298954010009765625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.471396833658218383789062</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.881921231746673583984375</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.492898166179656982421875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.870087027549743652343750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.514102756977081298828125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.857728600502014160156250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.534997701644897460937500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.844853520393371582031250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.555570363998413085937500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.831469535827636718750000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.575808167457580566406250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.817584812641143798828125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.595699369907379150390625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.803207516670227050781250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.615231692790985107421875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.788346350193023681640625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.634393274784088134765625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.773010492324829101562500</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.653172850608825683593750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.757208824157714843750000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.671559035778045654296875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.740951061248779296875000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.689540684223175048828125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.724246978759765625000000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.707106769084930419921875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.707106769084930419921875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.724247157573699951171875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.689540505409240722656250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.740951240062713623046875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.671558856964111328125000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.757208824157714843750000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.653172850608825683593750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.773010492324829101562500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.634393274784088134765625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.788346469402313232421875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.615231513977050781250000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.803207635879516601562500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.595699131488800048828125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.817584812641143798828125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.575808167457580566406250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.831469655036926269531250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.555570185184478759765625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.844853639602661132812500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.534997463226318359375000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.857728600502014160156250</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.514102756977081298828125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.870087027549743652343750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.492898136377334594726562</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.881921350955963134765625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.471396625041961669921875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.893224298954010009765625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.449611365795135498046875</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.903989315032958984375000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.427555054426193237304688</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.914209783077239990234375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.405241221189498901367188</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.923879623413085937500000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.382683277130126953125000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.932992815971374511718750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.359895050525665283203125</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.941544115543365478515625</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.336889803409576416015625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.949528217315673828125000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.313681602478027343750000</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.956940352916717529296875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.290284723043441772460938</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.963776051998138427734375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.266712725162506103515625</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.970031261444091796875000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.242980077862739562988281</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.975702166557312011718750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.219101071357727050781250</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.980785310268402099609375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.195090308785438537597656</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.985277652740478515625000</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.170961812138557434082031</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.989176511764526367187500</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.146730333566665649414062</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.992479503154754638671875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.122410699725151062011719</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.995184719562530517578125</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.098017096519470214843750</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.997290492057800292968750</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.073564447462558746337891</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.998795449733734130859375</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.049067486077547073364258</span></span>,\ <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.999698817729949951171875</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span><span class="hljs-number"><span class="hljs-number">-0.024541210383176803588867</span></span> .text <span class="hljs-comment"><span class="hljs-comment">//   init_timer: setl #ST0PRDR, 0xFFFFFFFF setl #ST0CR, 0x1 jmp start complete start: jmp L1; setl #PSW, 0x00000040;      getl 0x000007C0; patch @1, 0x00000000; setq #IR0, @1; getl 0x0001001F; patch @1, 0x00000000; setq #IR4, @1; complete; L1: irm IRMASK04 exa #IR4; je @1, L2; jne @2, L1; rdc #IR0, x + 0 * 8; x0 rdc #IR0, x + 2 * 8; x2 rdc #IR0, x + 4 * 8; x4 rdc #IR0, x + 6 * 8; x6 rdc #IR0, x + 1 * 8; x1 rdc #IR0, x + 3 * 8; x3 rdc #IR0, x + 5 * 8; x5 rdc #IR0, x + 7 * 8; x7 rdc W + 64 * 8; W4_1 addc @9, @5; x0=x0+x1 subc @10, @6; x1=x0-x1 addc @10, @6; x2=x2+x3 subc @11, @7; x3=x2-x3 addc @11, @7; x4=x4+x5 subc @12, @8; x5=x4-x5 addc @12, @8; x6=x6+x7 subc @13, @9; x7=x6-x7 mulc @9, @5; W4_1*x3 mulc @10, @2; W4_1*x7 addc @10, @8; x0=x0+x2 addc @10, @3; x1=x1+W4_1*x3 subc @12, @10; x2=x0-x2 subc @12, @5; x3=x1-W4_1*x3 addc @10, @8; x4=x4+x6 addc @10, @6; x5=x5+W4_1*x7 subc @12, @10; x6=x4-x6 subc @12, @8; x7=x5-W4_1*x7 wrc @8, #IR0, x + 0 * 8; wrc @8, #IR0, x + 1 * 8; wrc @8, #IR0, x + 2 * 8; wrc @8, #IR0, x + 3 * 8; wrc @8, #IR0, x + 4 * 8; wrc @8, #IR0, x + 5 * 8; wrc @8, #IR0, x + 6 * 8; wrc @8, #IR0, x + 7 * 8; complete L2: jmp L3; getl 0x00000718; patch @1, 0x00000000; setq #IR0, @1; getl 0x00000300; patch @1, W; setq #IR1, @1; getl 0x00000180; patch @1, W; setq #IR2, @1; getl 0x000000C0; patch @1, W; setq #IR3, @1; getl 0x0001001F; patch @1, 0x00000000; setq #IR4, @1; complete; L3: irm IRMASK01234 exa #IR4; je @1, L4; jne @2, L3; rdc #IR1; W8_i rdc #IR0, x + 4 * 8; x1 rdc #IR0, x + 12 * 8; x3 rdc #IR0, x + 20 * 8; x5 rdc #IR0, x + 28 * 8; x7 mulc @5, @4; W8_i*x1 mulc @6, @4; W8_i*x3 mulc @7, @4; W8_i*x5 mulc @8, @4; W8_i*x7 rdc #IR0, x + 0 * 8; x0 rdc #IR0, x + 8 * 8; x2 rdc #IR0, x + 16 * 8; x4 rdc #IR0, x + 24 * 8; x6 addc @3, @7; x2=x2+W8_i*x3 subc @4, @8; x3=x2-W8_i*x3 addc @3, @7; x6=x6+W8_i*x7 subc @4, @8; x7=x6-W8_i*x7 addc @8, @12; x0=x0+W8_i*x1 subc @9, @13; x1=x0-W8_i*x1 addc @8, @12; x4=x4+W8_i*x5 subc @9, @13; x5=x4-W8_i*x5 rdc #IR2; W16_i rdc #IR2, 0x0200; W16_j mulc @2, @10; W16_i*x2 mulc @2, @10; W16_j*x3 mulc @4, @10; W16_i*x6 mulc @4, @10; W16_j*x7 addc @8, @2; x4=x4+W16_i*x6 addc @8, @2; x5=x5+W16_j*x7 subc @10, @4; x6=x4-W16_i*x6 subc @10, @4; x7=x5-W16_j*x7 addc @14, @8; x0=x0+W16_i*x2 addc @14, @8; x1=x1+W16_j*x3 subc @16, @10; x2=x0-W16_i*x2 subc @16, @10; x3=x1-W16_j*x3 mulc @8, #IR3; W32*x4 mulc @8, #IR3, 0x0100; W32*x5 mulc @8, #IR3, 0x0200; W32*x6 mulc @8, #IR3, 0x0300; W32*x7 addc @8, @4; x0=x0+W*x4 addc @8, @4; x1=x1+W*x5 addc @8, @4; x2=x2+W*x6 addc @8, @4; x3=x3+W*x7 subc @12, @8; x4=x0-W*x4 subc @12, @8; x5=x1-W*x5 subc @12, @8; x6=x2-W*x6 subc @12, @8; x7=x3-W*x7 wrc @8, #IR0, x + 0 * 8; wrc @8, #IR0, x + 4 * 8; wrc @8, #IR0, x + 8 * 8; wrc @8, #IR0, x + 12 * 8; wrc @8, #IR0, x + 16 * 8; wrc @8, #IR0, x + 20 * 8; wrc @8, #IR0, x + 24 * 8; wrc @8, #IR0, x + 28 * 8; complete L4: jmp L5; getl 0x000000F8; patch @1, 0x00000000; setq #IR0, @1; getl 0x000003E0; patch @1, W; setq #IR1, @1; getl 0x000001F0; patch @1, W; setq #IR2, @1; getl 0x000000F8; patch @1, W; setq #IR3, @1; getl 0x0001001F; patch @1, 0x00000000; setq #IR4, @1; complete; L5: irm IRMASK01234 exa #IR4; je @1, stop; jne @2, L5; rdc #IR1; W32_i rdc #IR0, x + 32 * 8; x1 rdc #IR0, x + 96 * 8; x3 rdc #IR0, x + 160 * 8; x5 rdc #IR0, x + 224 * 8; x7 mulc @5, @4; W32_i*x1 mulc @6, @4; W32_i*x3 mulc @7, @4; W32_i*x5 mulc @8, @4; W32_i*x7 rdc #IR0, x + 0 * 8; x0 rdc #IR0, x + 64 * 8; x2 rdc #IR0, x + 128 * 8; x4 rdc #IR0, x + 192 * 8; x6 addc @3, @7; x2=x2+W32_i*x3 subc @4, @8; x3=x2-W32_i*x3 addc @3, @7; x6=x6+W32_i*x7 subc @4, @8; x7=x6-W32_i*x7 addc @8, @12; x0=x0+W32_i*x1 subc @9, @13; x1=x0-W32_i*x1 addc @8, @12; x4=x4+W32_i*x5 subc @9, @13; x5=x4-W32_i*x5 rdc #IR2; W64_i rdc #IR2, 0x0200; W64_j mulc @2, @10; W64_i*x2 mulc @2, @10; W64_j*x3 mulc @4, @10; W64_i*x6 mulc @4, @10; W64_j*x7 addc @8, @2; x4=x4+W64_i*x6 addc @8, @2; x5=x5+W64_j*x7 subc @10, @4; x6=x4-W64_i*x6 subc @10, @4; x7=x5-W64_j*x7 addc @14, @8; x0=x0+W64_i*x2 addc @14, @8; x1=x1+W64_j*x3 subc @16, @10; x2=x0-W64_i*x2 subc @16, @10; x3=x1-W64_j*x3 mulc @8, #IR3; W128_i*x4 mulc @8, #IR3, 0x0100; W128_j*x5 mulc @8, #IR3, 0x0200; W128_k*x6 mulc @8, #IR3, 0x0300; W128_l*x7 addc @8, @4; x0=x0+W128_i*x4 addc @8, @4; x1=x1+W128_j*x5 addc @8, @4; x2=x2+W128_k*x6 addc @8, @4; x3=x3+W128_l*x7 subc @12, @8; x4=x0-W128_i*x4 subc @12, @8; x5=x1-W128_j*x5 subc @12, @8; x6=x2-W128_k*x6 subc @12, @8; x7=x3-W128_l*x7 wrc @8, #IR0, x + 0 * 8; wrc @8, #IR0, x + 32 * 8; wrc @8, #IR0, x + 64 * 8; wrc @8, #IR0, x + 96 * 8; wrc @8, #IR0, x + 128 * 8; wrc @8, #IR0, x + 160 * 8; wrc @8, #IR0, x + 192 * 8; wrc @8, #IR0, x + 224 * 8; complete stop: jmp uart_init getl #ST0VAL wrdl @1, ticks complete .syntax V2 uart_init: jmp uart_print altport := getl 0xFFFFFFFF control := getl 0x00000003; rx, tx enable bitrate := getl 0x34; wrdl @control, 0xC0000108 wrdl @altport, 0xC00F0218 wrdl @bitrate, 0xC000010C setl #GPR0, 32 complete uart_print: count := getl #GPR0 je @count, finish jne @count, uart_wait setl #GPR0, #GPR0, -8 complete uart_wait: st := rddl 0xC0000104 andl @st, 2 je @1, uart_wait jne @2, uart_print_data complete uart_print_data: jmp uart_print data := rdl ticks slrl @data, #GPR0 wrdb @1, 0xC0000100 complete finish: getl 0; complete</span></span></code> </pre> </div></div><br><p>  Comparison of the results of the implementation of integrated floating-point single-precision FFT by 256 points: </p><br><table><thead><tr><th></th><th>  Number of operations </th><th>  Number of cycles </th><th>  Number of operations per cycle </th><th>  Availability of complex / SIMD operations </th></tr></thead><tbody><tr><td>  Multiclet R1, Multiclet </td><td>  9400 </td><td>  2350 </td><td>  four </td><td>  complex </td></tr><tr><td>  1967BH034, Milandr </td><td>  10872 </td><td>  1812 </td><td>  6 </td><td>  SIMD </td></tr><tr><td>  Processors family C66x, TI </td><td>  14256 </td><td>  1782 </td><td>  eight </td><td>  complex </td></tr><tr><td>  ADSP-TS201S, Analog Devices </td><td>  22272 </td><td>  1928 </td><td>  24 </td><td>  SIMD </td></tr></tbody></table><br><p>  The results show that the multicellular architecture implements parallelism more efficiently.  This is most clearly seen when comparing with processors of the C66x family, which, like the multicellular processor, have commands of complex arithmetic that are executed in a stream per clock cycle. </p><br><p>  From the presented examples in assembler, it is clear that the multicellular architecture allows to achieve much better results, so we believe that there is a prospect of improving the compiler. </p><br><p>  At present, the compiler is successfully used to port software that has been developed to multicellular processors under contracts with Russian and foreign customer companies. </p><br><p>  We invite everyone, enthusiasts of multicellular architecture to take part in testing the compiler on the <a href="http://multiclet.com/community/boards/4/topics/1687">forum</a> . </p><br><p>  <strong>UPD:</strong> Fixed a typo in the FFT results table: ADSP-TS201S returned a thousand clock cycles to the number of ticks. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/302776/">https://habr.com/ru/post/302776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302766/index.html">Web scraping on Node.js and problem sites</a></li>
<li><a href="../302768/index.html">Basic differences when working with MySQL and PostgreSQL databases Amateurish overview</a></li>
<li><a href="../302770/index.html">About the new features of SQL Server 2016</a></li>
<li><a href="../302772/index.html">Front-door VRF. Another practical example</a></li>
<li><a href="../302774/index.html">Will OpenStack be a ‚Äúnew LAMP‚Äù?</a></li>
<li><a href="../302778/index.html">Simply the Best. Top Posts in Intel Blog History</a></li>
<li><a href="../302780/index.html">Installing, configuring, and running DevStack from 'A' to 'Z'</a></li>
<li><a href="../302782/index.html">The book "Career Programmer. 6th edition</a></li>
<li><a href="../302784/index.html">Freelancer and entrepreneur</a></li>
<li><a href="../302786/index.html">Screwing the Gantt chart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
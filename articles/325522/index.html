<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bash scripts: start</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bash scripts: start 
 Bash scripts, part 2: loops 
 Bash scripts, part 3: command line options and keys 
 Bash scripts, part 4: input and output 
 Bas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bash scripts: start</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <a href="https://habrahabr.ru/company/ruvds/blog/325522/">Bash scripts: start</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/325928/">Bash scripts, part 2: loops</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/326328/">Bash scripts, part 3: command line options and keys</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/326594/">Bash scripts, part 4: input and output</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/326826/">Bash Scripts, Part 5: Signals, Background Tasks, Script Management</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327248/">Bash scripts, part 6: functions and library development</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327530/">Bash scripts, part 7: sed and word processing</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327754/">Bash scripts, part 8: awk data processing language</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/327896/">Bash scripts, part 9: regular expressions</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/328346/">Bash scripts, part 10: practical examples</a> <br>  <a href="https://habrahabr.ru/company/ruvds/blog/328436/">Bash scripts, part 11: expect and automate interactive utilities</a> </blockquote><br>  Today let's talk about bash scripts.  These are <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B0%25D1%2580%25D0%25B8%25D0%25B9_%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25BA%25D0%25B8">command line scripts</a> written for the bash shell.  There are other shells, for example - zsh, tcsh, ksh, but we will focus on bash.  This material is for everyone, the only condition is the ability to work on <a href="https://likegeeks.com/main-linux-commands-easy-guide/">the</a> Linux <a href="https://likegeeks.com/main-linux-commands-easy-guide/">command line</a> . <br><br> <a href="https://habrahabr.ru/company/ruvds/blog/325522/"><img src="https://habrastorage.org/files/803/892/bfe/803892bfe548499aa763df324d40fd01.png"></a> <br><a name="habracut"></a><br>  Command line scripts are sets of the same commands that can be entered from the keyboard, assembled into files and combined by some common purpose.  At the same time, the results of the work of the teams can be either of independent value or serve as input data for other teams.  Scripting is a powerful way to automate frequently performed activities. <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, if we talk about the command line, it allows you to execute several commands at a time by typing them through a semicolon: <br><br><pre><code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">pwd</span></span> ; whoami</code> </pre> <br>  In fact, if you tried it in your terminal, your first bash script, which involves two commands, is already written.  It works like this.  First, the <code>pwd</code> displays information about the current working directory, then the <code>whoami</code> displays information about the user under which you are logged in. <br><br>  Using a similar approach, you can combine as many commands as you like in one line, the restriction is only in the maximum number of arguments that can be passed to the program.  This limitation can be determined using the following command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">getconf</span></span> ARG_MAX</code> </pre> <br>  The command line is a great tool, but commands have to be entered into it every time a need arises.  What if you write a set of commands to a file and just call this file to execute them?  In fact, the file we are talking about is called a command line script. <br><br><h2>  <font color="#3AC1EF">How are bash scripts</font> </h2><br>  Create an empty file using the <code>touch</code> command.  In its first line you need to specify which shell we are going to use.  We are interested in <code>bash</code> , so the first line of the file will be: <br><br><pre> <code class="hljs bash"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash</span></span></code> </pre> <br>  In the other lines of this file, the hash symbol is used to denote comments that the shell does not process.  However, the first line is a special case, here the grid, followed by an exclamation mark (this sequence is called <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B5%25D0%25B1%25D0%25B0%25D0%25BD%25D0%25B3_(Unix)">shebang</a> ) and the path to <code>bash</code> , indicate to the system that the script was created specifically for <code>bash</code> . <br><br>  Shell commands are separated by a newline character, comments are marked with a grid sign.  Here's what it looks like: <br><br><pre> <code class="hljs pgsql">#!/bin/bash # This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> pwd whoami</code> </pre> <br>  Here, as well as on the command line, you can write commands in one line, separated by a semicolon.  However, if you write commands on different lines, the file is easier to read.  In any case, the shell will process them. <br><br><h2>  <font color="#3AC1EF">Setting Script File Permissions</font> </h2><br>  Save the file, giving it the name of <code>myscript</code> , and the work on creating a bash-script is almost finished.  Now it only remains to make this file executable, otherwise, trying to run it, you will encounter a <code>Permission denied</code> error. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29f/743/3ec/29f7433ec002900e7518396a814fe351.png"></div><br>  <i><font color="#999999">Attempting to run a script file with improperly configured permissions</font></i> <br><br>  Make the file executable: <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span> ./myscript</code> </pre> <br>  Now we will try to execute it: <br><br><pre> <code class="hljs">./myscript</code> </pre> <br>  After setting permissions, everything works as it should. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/736/e67/1a5/736e671a5ff9a96e10bbb3c7e8ae537a.png"></div><br>  <i><font color="#999999">Successful launch of the bash script</font></i> <br><br><h2>  <font color="#3AC1EF">Output messages</font> </h2><br>  To output text to the Linux console, use the <code>echo</code> command.  We will use the knowledge of this fact and edit our script, adding explanations to the data that display the commands already existing in it: <br><br><pre> <code class="hljs pgsql">#!/bin/bash # our <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> here echo "The current directory is:" pwd echo "The user logged in is:" whoami</code> </pre> <br>  That's what happens after running the updated script. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d0/173/e3d/4d0173e3ddcad01d0790b6b98dd91315.png"></div><br>  <i><font color="#999999">Script output</font></i> <br><br>  Now we can display explanatory labels using the <code>echo</code> command.  If you do not know how to edit a file using Linux tools, or have not met <code>echo</code> before, take a look at <a href="https://likegeeks.com/basic-linux-commands-part2/">this</a> material. <br><br><h2>  <font color="#3AC1EF">Use of variables</font> </h2><br>  Variables allow information to be stored in a script file, for example, the results of commands for use by other commands. <br><br>  There is nothing wrong with the performance of individual teams without storing the results of their work, but the possibilities of such an approach are very limited. <br><br>  There are two types of variables that can be used in bash scripts: <br><br><ul><li>  Environment Variables </li><li>  Custom variables </li></ul><br><h2>  <font color="#3AC1EF">Environment Variables</font> </h2><br>  Sometimes in shell commands you need to work with some system data.  Here, for example, how to display the current user's home directory: <br><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash # display user home echo </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Home for the current user is: $HOME"</span></span></span></span></code> </pre> <br>  Please note that we can use the <code>$HOME</code> system variable in double quotes, this will not prevent the system from recognizing it.  That's what happens if you run the above script. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da0/6b6/4a4/da06b64a489f6a8e16a3ca345f270f82.png"></div><br>  <i><font color="#999999">Using the environment variable in a script</font></i> <br><br>  And what if you need to display the dollar icon?  Let's try this: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">echo</span></span> <span class="hljs-string"><span class="hljs-string">"I have </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string"> in my pocket"</span></span></code> </pre> <br>  The system will detect the dollar sign in the string delimited by quotes, and decide that we referred to the variable.  The script will attempt to display the value of the undefined variable <code>$1</code> .  This is not what we need.  What to do? <br><br>  In this situation, the use of a control character, a backslash, in front of a dollar sign will help: <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "I have \$<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> my pocket"</code> </pre> <br>  Now the script will output exactly what is expected. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/771/a8a/710/771a8a7102c7a25f1ecd1e739a00de6e.png"></div><br>  <i><font color="#999999">Using the escape sequence to display the dollar sign</font></i> <br><br><h2>  <font color="#3AC1EF">Custom variables</font> </h2><br>  In addition to environment variables, bash scripts allow you to set and use your own variables in a script.  Such variables store the value until the script is completed. <br><br>  As in the case of system variables, user variables can be accessed using the dollar sign: <br>  <font color="#FFFFFF">TNW-CUS-FMP - promotional code for a 10% discount on our services, available for activation within 7 days</font> <br><pre> <code class="hljs kotlin">#!/bin/bash # testing variables grade=<span class="hljs-number"><span class="hljs-number">5</span></span> person=<span class="hljs-string"><span class="hljs-string">"Adam"</span></span> echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$person</span></span></span><span class="hljs-string"> is a good boy, he is in grade </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$grade</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  That's what happens after running such a script. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a7/367/14c/3a736714c8f9db68ef8fce923b3cc5e5.png"></div><br>  <i><font color="#999999">User variables in the script</font></i> <br><br><h2>  <font color="#3AC1EF">Command substitution</font> </h2><br>  One of the most useful features of bash scripts is the ability to extract information from the output of commands and assign it to variables, which allows you to use this information anywhere in the script file. <br><br>  This can be done in two ways. <br><br><ul><li>  Using the reverse apostrophe icon "` " </li><li>  Using the <code>$()</code> construction </li></ul><br>  Using the first approach, make sure not to insert a single quote instead of the reverse apostrophe.  The command needs to be concluded in two such icons: <br><br><pre> <code class="hljs markdown">mydir=<span class="hljs-code"><span class="hljs-code">`pwd`</span></span></code> </pre> <br>  In the second approach, the same thing is written as: <br><br><pre> <code class="hljs mel">mydir=$(<span class="hljs-keyword"><span class="hljs-keyword">pwd</span></span>)</code> </pre> <br>  As a result, the script may look like this: <br><br><pre> <code class="hljs mel">#!/bin/bash mydir=$(<span class="hljs-keyword"><span class="hljs-keyword">pwd</span></span>) echo $mydir</code> </pre> <br>  During its operation, the output of the <code>pwd</code> will be stored in the variable <code>mydir</code> , the contents of which, with the help of the <code>echo</code> command, will go to the console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/acc/127/fa3/acc127fa3826130cb82854c74d6fd5f4.png"></div><br>  <i><font color="#999999">Script that stores the results of the team in a variable</font></i> <br><br><h2>  <font color="#3AC1EF">Mathematical operations</font> </h2><br>  To perform mathematical operations in a script file, you can use a construct of the form <code>$((a+b))</code> : <br><br><pre> <code class="hljs mel">#!/bin/bash var1=$(( <span class="hljs-number"><span class="hljs-number">5</span></span> + <span class="hljs-number"><span class="hljs-number">5</span></span> )) echo $var1 var2=$(( $var1 * <span class="hljs-number"><span class="hljs-number">2</span></span> )) echo $var2</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3c/9b0/3dc/a3c9b03dcc99367ba2e80f3695282154.png"></div><br>  <i><font color="#999999">Mathematical operations in the script</font></i> <br><br><h2>  <font color="#3AC1EF">If-then control structure</font> </h2><br>  In some scenarios, you need to control the flow of command execution.  For example, if a certain value is more than five, you need to perform one action, otherwise - another.  This is applicable in very many situations, and <code>if-then</code> control construction will help us.  In its simplest form, it looks like this: <br><br><pre> <code class="hljs bash"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">then</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br>  And here is a working example: <br><br><pre> <code class="hljs pgsql">#!/bin/bash <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> pwd <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo "It works" fi</code> </pre> <br>  In this case, if the <code>pwd</code> completes successfully, the text ‚Äúit works‚Äù will be displayed in the console. <br><br>  We use the knowledge we have and write a more complex scenario.  Let's say you need to find a certain user in <code>/etc/passwd</code> , and if you can find it, report that it exists. <br><br><pre> <code class="hljs vbscript">#!/bin/bash user=likegeeks <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> grep $user /etc/passwd <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo <span class="hljs-string"><span class="hljs-string">"The user $user Exists"</span></span> fi</code> </pre> <br>  That's what happens after running this script. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/395/e17/65e/395e1765efb8d9b3fe1726240357dcc4.png"></div><br>  <i><font color="#999999">Search user</font></i> <br><br>  Here we used the <code>grep</code> to search for a user in the <code>/etc/passwd</code> .  If the <code>grep</code> is unfamiliar to you, its description can be found <a href="https://likegeeks.com/main-linux-commands-easy-guide/">here</a> . <br><br>  In this example, if the user is found, the script will display the corresponding message.  And if you could not find the user?  In this case, the script will simply complete the execution without telling us anything.  I would like him to tell us about this, so we will improve the code. <br><br><h2>  <font color="#3AC1EF">If-else control construct</font> </h2><br>  In order for the program to be able to report both the results of the successful search and the failure, we use the <code>if-then-else</code> .  Here is how it works: <br><br><pre> <code class="hljs bash"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">then</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br>  If the first command returns zero, which means its successful execution, the condition will be true and the execution will not follow the <code>else</code> branch.  Otherwise, if something nonzero is returned, which means failure, or a false result, the commands located after <code>else</code> will be executed. <br><br>  Let's write this script: <br><br><pre> <code class="hljs kotlin">#!/bin/bash user=anotherUser <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> grep $user /etc/passwd then echo <span class="hljs-string"><span class="hljs-string">"The user </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$user</span></span></span><span class="hljs-string"> Exists"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> echo <span class="hljs-string"><span class="hljs-string">"The user </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$user</span></span></span><span class="hljs-string"> doesn't exist"</span></span> fi</code> </pre> <br>  Its execution went on the <code>else</code> branch. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9db/c75/b3d/9dbc75b3dba2778a9aa9ff6b77677328.png"></div><br>  <i><font color="#999999">Running a script with the if-then-else construct</font></i> <br><br>  Well, we continue to move on and ask ourselves about more difficult conditions.  What if you need to check not one condition, but several?  For example, if the required user is found, you need to display one message, if some other condition is met - another message, and so on.  In this situation, we will help nested conditions.  It looks like this: <br><br><pre> <code class="hljs bash"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> 1 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> 2 <span class="hljs-keyword"><span class="hljs-keyword">then</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br>  If the first command returns zero, which indicates its successful execution, the commands in the first block of <code>then</code> executed, otherwise, if the first condition turns out to be false, and if the second command returns zero, the second code block will be executed. <br><br><pre> <code class="hljs smalltalk">#!/bin/bash user=anotherUser if grep <span class="hljs-string"><span class="hljs-string">$u</span></span>ser /etc/passwd then echo <span class="hljs-comment"><span class="hljs-comment">"The user $user Exists"</span></span> elif ls /home then echo <span class="hljs-comment"><span class="hljs-comment">"The user doesn't exist but anyway there is a directory under /home"</span></span> fi</code> </pre> <br>  In a similar script, you can, for example, create a new user using the <code>useradd</code> command if the search did not return any results, or do something else useful. <br><br><h2>  <font color="#3AC1EF">Comparison of numbers</font> </h2><br>  In scripts, you can compare numeric values.  Below is a list of relevant commands. <br><br><blockquote>  <code>n1 -eq n2</code> Returns the true value if <code>n1</code> is <code>n2</code> . <br>  <code>n1 -ge n2</code> Returns the true value if <code>n1</code> greater than or equal to <code>n2</code> . <br>  <code>n1 -gt n2</code> Returns the true value if <code>n1</code> greater than <code>n2</code> . <br>  <code>n1 -le n2</code> Returns the true value if <code>n1</code> less than or equal to <code>n2</code> . <br>  <code>n1 -lt n2</code> Returns the true value if n1 is less than <code>n2</code> . <br>  <code>n1 -ne n2</code> Returns the true value if <code>n1</code> not equal to <code>n2</code> . </blockquote><br>  As an example, let's test one of the comparison operators.  Note that the expression is enclosed in square brackets. <br><br><pre> <code class="hljs kotlin">#!/bin/bash val1=<span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $val1 -gt <span class="hljs-number"><span class="hljs-number">5</span></span> ] then echo <span class="hljs-string"><span class="hljs-string">"The test value </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is greater than 5"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> echo <span class="hljs-string"><span class="hljs-string">"The test value </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is not greater than 5"</span></span> fi</code> </pre> <br>  This is what this command will output. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bd8/509/59b/bd850959bf5385f0e3a3fa2173fb39a8.png"></div><br>  <i><font color="#999999">Comparing Numbers in Scripts</font></i> <br><br>  The value of the variable <code>val1</code> greater than 5, as a result, the <code>then</code> branch of the comparison operator is executed and a corresponding message is output to the console. <br><br><h2>  <font color="#3AC1EF">String comparison</font> </h2><br>  In scripts, you can compare string values.  Comparison operators look pretty simple, but string comparison operations have certain features that we will touch on below.  Here is a list of operators. <br><br><blockquote>  <code>str1 = str2</code> Checks strings for equality, returns true if strings are identical. <br>  s <code>tr1 != str2</code> Returns true if the strings are not identical. <br>  <code>str1 &lt; str2</code> Returns true if <code>str1</code> less than <code>str2</code> . <br>  <code>str1 &gt; str2</code> Returns true if <code>str1</code> greater than <code>str2</code> . <br>  <code>-n str1</code> Returns true if the length of <code>str1</code> greater than zero. <br>  <code>-z str1</code> Returns true if the length of <code>str1</code> is zero. </blockquote><br>  Here is an example of comparing strings in a script: <br><br><pre> <code class="hljs mel">#!/bin/bash user =<span class="hljs-string"><span class="hljs-string">"likegeeks"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [$user = $USER] then echo <span class="hljs-string"><span class="hljs-string">"The user $user  is the current logged in user"</span></span> fi</code> </pre> <br>  As a result of the script, we get the following. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/55c/79a/3f2/55c79a3f28c78c48bcb0560236e09f9c.png"></div><br>  <i><font color="#999999">Comparison of lines in scripts</font></i> <br><br>  Here is one line comparison feature that is worth mentioning.  Namely, the operators "&gt;" and "&lt;" must be escaped with a backslash, otherwise the script will not work properly, although error messages will not appear.  The script interprets the ‚Äú&gt;‚Äù sign as an output redirection command. <br><br>  Here is how working with these operators looks like in code: <br><br><pre> <code class="hljs kotlin">#!/bin/bash val1=text val2=<span class="hljs-string"><span class="hljs-string">"another text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $val1 \&gt; $val2 ] then echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is greater than </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is less than </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> fi</code> </pre> <br>  Here are the results of the script. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4cf/2c4/079/4cf2c4079e42367f9e061cfee547e6b0.png"></div><br>  <i><font color="#999999">String comparison, displayed warning</font></i> <br><br>  Notice that the script, although running, gives a warning: <br><br><pre> <code class="hljs pgsql">./myscript: <span class="hljs-type"><span class="hljs-type">line</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: [: too many arguments</code> </pre> <br>  To get rid of this warning, put <code>$val2</code> in double quotes: <br><br><pre> <code class="hljs kotlin">#!/bin/bash val1=text val2=<span class="hljs-string"><span class="hljs-string">"another text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $val1 \&gt; <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> ] then echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is greater than </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is less than </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> fi</code> </pre> <br>  Now everything works as it should. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e9/cd9/a8f/8e9cd9a8f743b7789841173671cfe26c.png"></div><br>  <i><font color="#999999">String comparison</font></i> <br><br>  Another feature of the operators "&gt;" and "&lt;" is how they work with upper and lower case characters.  In order to understand this feature, we will prepare a text file with the following content: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Likegeeks</span></span> likegeeks</code> </pre> <br>  Save it by giving the name <code>myfile</code> , and then execute the following command in the terminal: <br><br><pre> <code class="hljs swift"><span class="hljs-built_in"><span class="hljs-built_in">sort</span></span> myfile</code> </pre> <br>  It will sort the lines from the file like this: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">likegeeks</span></span> Likegeeks</code> </pre> <br>  The <code>sort</code> command, by default, sorts the lines in ascending order, that is, the lowercase letter in our example is less than uppercase.  Now we will prepare a script that will compare the same lines: <br><br><pre> <code class="hljs kotlin">#!/bin/bash val1=Likegeeks val2=likegeeks <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ $val1 \&gt; $val2 ] then echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is greater than </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val1</span></span></span><span class="hljs-string"> is less than </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$val2</span></span></span><span class="hljs-string">"</span></span> fi</code> </pre> <br>  If you run it, it turns out that everything is the opposite - the lowercase letter is now more capitalized. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cca/c66/88c/ccac6688ceb2d01f4e906620c8c0244a.png"></div><br>  <i><font color="#999999">The sort command and string comparison in a script file</font></i> <br><br>  In comparison commands capital letters are less than lowercase.  String comparisons are performed here by comparing ASCII character codes, the sort order is thus dependent on the character codes. <br><br>  The <code>sort</code> command, in turn, uses the sort order specified in the system language settings. <br><br><h2>  <font color="#3AC1EF">File checks</font> </h2><br>  Perhaps the following commands are used in bash scripts most often.  They allow you to check various conditions concerning files.  Here is a list of these commands. <br><br><blockquote>  <code>-d file</code> Checks if a file exists and is a directory. <br>  <code>-e file</code> Checks if the file exists. <br>  <code>-f file</code> Checks if a file exists and is a file. <br>  <code>-r file</code> Checks if a file exists and is readable. <br>  <code>-s file </code> Check if the file exists and is not empty. <br>  <code>-w file</code> Checks if a file exists and is writable. <br>  <code>-x file</code> Checks if the file exists and is executable. <br>  <code>file1 -nt file2</code> Checks if <code>file1</code> newer than <code>file2</code> . <br>  <code>file1 -ot file2</code> Checks whether <code>file1</code> older than <code>file2</code> . <br>  <code>-O file</code> Checks if the file exists and whether the current user owns it. <br>  <code>-G file</code> Checks if a file exists and if its group ID matches the current user's group ID. </blockquote><br>  These commands, as well as many others reviewed today, are easy to remember.  Their names, being abbreviations of various words, directly indicate the checks they perform. <br><br>  Let's try one of the teams in practice: <br><br><pre> <code class="hljs dos">#!/bin/bash mydir=/home/likegeeks <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ -d $mydir ] then <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "The $mydir directory exists" <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> $ mydir ls <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> "The $mydir directory does <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exist</span></span>" fi</code> </pre> <br>  This script, for an existing directory, will display its contents. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ab2/2e2/0e7/ab22e20e730bb0c56cef8da5c8d31dba.png"></div><br>  <i><font color="#999999">Display directory contents</font></i> <br><br>  We believe that you can experiment with the rest of the teams on your own, they all apply on the same principle. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Today we talked about how to start writing bash scripts and looked at some basic things.  In fact, the topic of bash programming is huge.  This article is a translation of the first part of a large series of 11 materials.  If you want to continue right now - here is a list of the originals of these materials.  For convenience, the one that you just read has been included. <br><br><ol><li>  <a href="https://likegeeks.com/bash-script-easy-guide/">Bash Script Step By Step</a> - here we are talking about how to start creating bash scripts, using variables, describing conditional constructions, calculating, comparing numbers, strings, finding out information about files. <br><br></li><li>  <a href="https://likegeeks.com/bash-scripting-step-step-part2/">Bash Scripting Part 2, Bash the awesome</a> - here the features of working with for and while loops are revealed. <br><br></li><li>  <a href="https://likegeeks.com/linux-bash-scripting-awesome-guide-part3/">Bash Scripting Part 3, Parameters &amp; options</a> - this material is devoted to command line parameters and keys that can be passed to scripts, work with data that the user enters, and which can be read from files. <br><br></li><li>  <a href="https://likegeeks.com/shell-scripting-awesome-guide-part4/">Bash Scripting Part 4, Input &amp; Output</a> - here we are talking about file descriptors and how to work with them, input, output, error streams, output redirection. <br><br></li><li>  <a href="https://likegeeks.com/linux-bash-scripting-awesome-guide-part5/">Bash Scripting Part 5, Sighals &amp; Jobs</a> - this material is dedicated to Linux signals, processing them in scripts, and running scripts on a schedule. <br><br></li><li>  <a href="https://likegeeks.com/bash-functions/">Bash Scripting Part 6, Functions</a> - here you can learn about creating and using functions in scripts, about developing libraries. <br><br></li><li>  <a href="https://likegeeks.com/sed-linux/">Bash Scripting Part 7, Using sed</a> - This article focuses on working with the sed text stream editor. <br><br></li><li>  <a href="https://likegeeks.com/awk-command/">Bash Scripting Part 8, Using awk</a> - this material is dedicated to programming in the awk data processing language. <br><br></li><li>  <a href="https://likegeeks.com/regex-tutorial-linux/">Bash Scripting Part 9, Regular Expressions</a> - here you can read about using regular expressions in bash scripts. <br><br></li><li>  <a href="https://likegeeks.com/write-shell-script/">Bash Scripting Part 10, Practical Examples</a> - here are techniques for working with messages that can be sent to users, as well as a method for monitoring a disk. <br><br></li><li>  <a href="https://likegeeks.com/expect-command/">Bash Scripting Part 11, Expect Command</a> - this material is dedicated to the Expect tool, with which you can automate interaction with interactive utilities.  In particular, here we are talking about expect-scripts and their interaction with bash-scripts and other programs. <br></li></ol><br>  We believe that one of the valuable properties of this series of articles is that, starting from the simplest, suitable for users of any level, gradually leads to quite serious topics, giving everyone a chance to make progress in creating Linux command line scripts. <br><br>  Dear readers!  We ask the guru of bash-programming to tell about how they got to the heights of excellence, to share secrets, and from those who have just written their first script, we are waiting for impressions. <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/325522/">https://habr.com/ru/post/325522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325510/index.html">Teach TensorFlow to draw Cyrillic</a></li>
<li><a href="../325512/index.html">Report and presentations with Moscow JS in the Superjob office</a></li>
<li><a href="../325514/index.html">Registration and authorization of the user on the site - one click - through the custom Facebook button. 2017</a></li>
<li><a href="../325516/index.html">Conference DUMP-2017: Section "Testing"</a></li>
<li><a href="../325518/index.html">Authenticating OAuth2 in-app using Google Sign-In. Continuous access to Google APIs</a></li>
<li><a href="../325524/index.html">Do new GitHub terms of use conflict with copyright?</a></li>
<li><a href="../325526/index.html">Do we need neural networks?</a></li>
<li><a href="../325528/index.html">Kademlia (DHT) - A Practical Guide</a></li>
<li><a href="../325532/index.html">Top 8 new fintech applications of the beginning of 2017</a></li>
<li><a href="../325546/index.html">Setting up replication in FreeIPA 4.4 with domain level 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
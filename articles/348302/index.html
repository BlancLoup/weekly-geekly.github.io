<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Veeam Agent for Microsoft Windows Overview: Version 2.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Simultaneously with Veeam Backup & Replication 9.5 Update 3, new versions of the Veeam Agent for Windows and Linux were published. These solutions for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Veeam Agent for Microsoft Windows Overview: Version 2.1</h1><div class="post__text post__text-html js-mediator-article">  Simultaneously with Veeam Backup &amp; Replication 9.5 Update 3, new versions of the Veeam Agent for Windows and Linux were published.  These solutions for backup of physical machines can now work both autonomously and centrally under the control of the Veeam backup server.  Today I will talk a little about the new features of Veeam Agent <i>for Microsoft Windows</i> , which were not covered in the last <a href="https://habrahabr.ru/company/veeam/blog/345712/">post</a> .  For this, welcome under cat. <br><br><img src="https://habrastorage.org/webt/mf/u7/fe/mfu7femt_1lo21ese5x5vezljxk.png"><br><a name="habracut"></a><br><h1>  Backing up to Microsoft OneDrive </h1><br>  Veeam Agent <i>for Microsoft Windows</i> version 2.1 can back up to Microsoft OneDrive cloud storage using a personal or corporate (OneDrive for Business) account. <br>  Backup in OneDrive today has the following implementation features: <br><br><ul><li>  In the free version of Veeam Agent, only backup of the system state is supported. </li><li>  in the paid version, both backup of the whole machine and file level backup are supported </li><li>  backup of server versions of Windows OS is not supported yet (it is possible to have a <i>Server</i> license, but it must be installed on a machine with a desktop OS) </li></ul><br>  <i>Important!</i>  In this version, backup in OneDrive is available only for agents that work autonomously (that is, not under the control of Veeam Backup &amp; Replication). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition, if you decide that a standalone Veeam Agent should start working under Veeam Backup &amp; Replication from a certain point, then it will be impossible to import backups created by this agent into OneDrive during stand-alone work into the console. <br><br>  To back up to the cloud storage, you need to select the appropriate options in the backup setup wizard: <br><br><ol><li>  In the <b>Destination</b> step, select <b>Microsoft OneDrive</b> . </li><li>  In the next step, click <b>Click to sign in Microsoft OneDrive</b> , in the browser window, enter the Microsoft account with which we will connect to OneDrive, and click <b>Sign in</b> . </li><li>  If you need to use another account, click <b>Click to sign out</b> and set a new one. <br><br>  <i>Note:</i> If you have OneDrive synchronization and folders configured on your local machine, it is highly recommended to exclude the <b>VeeamBackup</b> folder from this process (this can be done by logging into the OneDrive client).  If this is not done, the backups will also be on the local machine, taking up space on it. <br><br><img src="https://habrastorage.org/webt/hq/ne/9p/hqne9pauxnynv0u200phqiqumva.png"><br></li><li>  We set the storage policy: <br><ul><li>  For <i>Free</i> and <i>Workstation</i> licenses, you will need to specify how many days to keep backups, counting down from the time the machine was last used. </li><li>  For the <i>Server</i> license, you will need to specify how many recovery points you need to store, starting from the last created point. </li></ul><br></li><li>  We pass through the steps of the wizard to completion. </li></ol><br>  It will be possible to restore the machine or the necessary files from a backup stored on OneDrive (supported only for paid licenses). <br><br>  There are several limitations on functionality, for example: <br><br><ul><li>  it is impossible to create a separate full backup in OneDrive (always only a chain) </li><li>  backups in SQL and Oracle database transaction logs are not supported in OneDrive </li></ul><br>  More information about all this is described in <a href="https://helpcenter.veeam.com/docs/agentforwindows/userguide/onedrive.html%3Fver%3D21">the user manual</a> (in English). <br><br><h1>  Ability to select CBT mechanism (for servers) </h1><br>  By default, the Veeam Agent uses a built-in mechanism for tracking modified blocks.  In brief his work is illustrated by the following picture: <br><br><img src="https://habrastorage.org/webt/ye/r4/0a/yer40akar96fffuu8pjyzx9pwqw.png"><br><br><ol><li>  During the creation of a full backup, Veeam reads the Master File Table (MFT) of the volume whose backup is being performed.  Based on the records of this table, a digest is created with file system metadata.  Veeam transfers these digests to the storage location of the backup and writes them into a backup file. </li><li>  When creating an incremental Veeam backup: <br><ul><li>  Reads the Master File Table (MFT) of the volume whose backup is being performed and creates a new digest with metadata. </li><li>  Receives digests from the backup created during the previous session. </li><li>  Compares them with the new digest, identifying files whose blocks have changed from the previous session. </li><li>  Reads from VSS-snapshot only blocks related to these files. </li></ul><br></li></ol><br>  If it is not possible to identify which files have changed (for example, a digest is not received from the backup file), then you have to read all the blocks, which can significantly slow down the backup.  This mechanism works only for NTFS volumes. <br><br>  In the new version of Veeam Agent <i>for Microsoft Windows</i> , another mechanism is implemented - the driver for tracking modified blocks Veeam Change Block Tracking Driver (Veeam CBT Driver), which can work with NTFS, FAT and ReFS file systems.  The driver helps speed up incremental backup of machines where applications work with large databases. <br><br>  <i>Important!</i>  Veeam CBT Driver is designed for server versions of Windows OS and works in the presence of a paid agent license <i>Server</i> . <br><br>  If such a driver is used, the data about the modified blocks are recorded in specially designed files with the .VCT extension.  These files are stored on the machine where the Veeam Agent works, in the <b>C: \ ProgramData \ Veeam \ EndpointData \ CtStore folder</b> . <br>  During the backup job, the Veeam Agent uses these files to retrieve information about changed blocks and copy only them.  SVT data can be ‚Äúdumped‚Äù as described <a href="https://helpcenter.veeam.com/docs/agentforwindows/userguide/cbt_reset.html%3Fver%3D21">here</a> . <br><br><h3>  Driver installation </h3><br>  In a scenario with centralized agent management: <br><br><ul><li>  in the <b>Options</b> step of the wizard configuration wizard, select the <b>Install changed block tracking driver on Windows Server OS</b> option <br><br><img src="https://habrastorage.org/webt/vy/if/qw/vyifqwp5wlsu89n7pgnvasbaoxi.png"><br></li><li>  or in the Veeam Backup &amp; Replication console, select the required server in the <b>Inventory</b> view and click <b>Install driver</b> for it <br><br><img src="https://habrastorage.org/webt/oi/is/ik/oiisik47okjyhi14jn1q5iamvco.png"><br></li></ul><br>  In a script with a standalone agent: <br><br><ol><li>  open the management console, go to the <b>Settings</b> tab and click <b>Install CBT driver</b> . </li><li>  To complete the installation you will need to restart the machine. </li></ol><br><img src="https://habrastorage.org/webt/24/fb/un/24fbundg6atuuo44zv4gtm7lmx4.png"><br><br>  <i>Note:</i> For the Veeam CBT driver to work on a machine with Windows Server 2008 R2, you need to install Windows Update KB3033929 on the machine. <br>  More information about the driver of CBT can be read <a href="https://helpcenter.veeam.com/docs/agentforwindows/userguide/cbt_manage.html%3Fver%3D21">here</a> . <br><br><h1>  Support for newer versions of Windows and SQL Server </h1><br>  Veeam Agent can work with the following versions: <br><br><ul><li>  Windows 10 Fall Creators Update </li><li>  Windows Server 2016 version 1709 </li><li>  Microsoft SQL Server 2017 </li></ul><br>  <i>Note:</i> If the agent is running Veeam Backup &amp; Replication, it will also support Windows Server failover clusters, SQL Server failover clusters, and SQL Server Always-On Availability Groups (including for SQL Server 2017). <br><br><img src="https://habrastorage.org/webt/yu/gi/c5/yugic5y_2zxupvdgbz2relxjbzs.png"><br><br><h1>  What else to read and see </h1><br><ul><li>  <a href="https://habrahabr.ru/company/veeam/blog/345712/">Article on Habr√© about the work of Veeam Agents under the control of Veeam Backup &amp; Replication</a> </li><li>  <a href="https://www.veeam.com/ru/veeam_agent_windows_2_1_editions_comparison_ds.pdf">Comparison of editions of Veeam Agent for Microsoft Windows (in Russian)</a> </li><li>  <a href="https://www.veeam.com/ru/veeam_agent_windows_free_2_1_datasheet_ds.pdf">Review of the free version (in Russian)</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/348302/">https://habr.com/ru/post/348302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348288/index.html">Announcement of Moscow Kubernetes Online: we have collected the pitfalls of k8s</a></li>
<li><a href="../348290/index.html">Timlides does not happen much</a></li>
<li><a href="../348294/index.html">Mobile devices from the inside. Study of tablet loading modes YB1-X90L</a></li>
<li><a href="../348298/index.html">Ternary operators and logical ‚ÄúAnd‚Äù in React.js</a></li>
<li><a href="../348300/index.html">Auto dial: a good way to enhance customer base</a></li>
<li><a href="../348304/index.html">How to easily start writing on PowerShell or simple automation to manage Active Directory</a></li>
<li><a href="../348306/index.html">Registration for NeoQUEST-2018 is open: steampunk expedition to Atlantis</a></li>
<li><a href="../348308/index.html">Digital events in Moscow from February 5 to 11</a></li>
<li><a href="../348310/index.html">‚ÄúVITAMIN ROSTA‚Äù: how LANIT attracts young people and how young professionals get into LANIT</a></li>
<li><a href="../348312/index.html">How to "learn to learn" - tips, advice and research</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
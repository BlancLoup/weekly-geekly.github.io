<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unit testing is not enough. Need static typing!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When I was working on my master‚Äôs thesis, I promised myself that I would publish it on the Internet under a free license. I received a degree, but, un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unit testing is not enough. Need static typing!</h1><div class="post__text post__text-html js-mediator-article">  When I was working on my master‚Äôs thesis, I promised myself that I would publish it on the Internet under a free license.  I received a degree, but, unfortunately, I came across one of the unwritten rules of universities - when you spend a lot of time on a question of interest, it bothers you. <br>  Finally, a year later, I still publish it. <br>  For those who are too lazy to get acquainted with my complete work (in any case, 60 pages of text is not so much for research work, but it is still not enough), I offer a brief version of the article.  Please note that the short version does not take into account some important information, so I ask you to write reviews only about the full version. <br><br>  In my study, I drew attention to the arguments of supporters of dynamic typing, who believe that static typing is not needed to detect errors. <br><br>  The essence of their reasoning is as follows: <br><ol><li>  Static typing is not enough to detect bugs, so unit tests are needed; </li><li>  Static typing becomes redundant since you have tests; </li><li>  Due to static typing, some valid programs may issue warnings at the compilation stage. </li></ol><br>  Despite the fact that I heard these statements many times, I could not find a confirmation for them.  So I decided to find out if the unit tests really help eliminate typing errors.  I was also interested in another question: how often do developers use constructs of languages ‚Äã‚Äãwith dynamic typing, which cannot be expressed in languages ‚Äã‚Äãwith static. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  My experiment was to find opensource projects in a dynamically typed language, covered with unit tests, and then manually translate them into a statically typed language.  I wanted to find out the number of defects that were detected by type checking, and how many dynamic constructions cannot be directly translated into a static language.  It should be emphasized that in this experiment there will be no rewriting of the program code, but its line-by-line translation from one programming language to another.  I do not take into account defects that were not detected by type checking, or any other errors that could not occur in the original program. <br><br>  Before starting the experiment, it was necessary to choose languages ‚Äã‚Äãwith dynamic and static typing for work. <br><br>  The criteria for a dynamic language were as follows: <br><ol><li>  this language must be dynamically typed; </li><li>  language must support unit testing; </li><li>  a sufficient number of opensource solutions in this language are needed; </li><li>  the language must be known and have a sufficient number of supporters. </li></ol><br>  Under these criteria, Python is great. <br><br>  Next was to choose a static language that takes into account several requirements: <br><ol><li>  the language must run on the same platforms as Python; </li><li>  language must be strictly typed; </li><li>  language should be respected by supporters of static typing. </li></ol><br>  Haskell met all of these requirements. <br><br>  Next, I selected four random projects that had to be translated from Python to Haskell: <a href="https://python-gpsd.googlecode.com/">The Python NMEA Toolkit</a> , <a href="https://code.google.com/p/midiutil/">MIDIUtil</a> , <a href="https://code.google.com/p/grapefruit/">GrapeFruit,</a> and <a href="https://bitbucket.org/sirpengi/pyfontinfo">PyFontInfo</a> . <br><br><h5>  The Python NMEA Toolkit </h5><br>  The translation of this project led to nine errors.  Three of them arose due to the wrong type of input parameters, and the remaining six due to incorrect use of the API.  Only one type error was covered by the unit test.  With the help of static typing, one error was corrected, which was manifested during the execution of the program.  It would be possible to get rid of two modular tests, since  they served only for type checking.  Not a single dynamic construction was found that could not be translated into static. <br><br><h5>  MIDIUtil </h5><br>  The translation of MIDIUtil led to the identification of two errors.  One of them could be traced using the test.  Another would eliminate static typing.  The MIDIUtil utility uses the struct.pack and struct.unpack methods, which cannot be translated to Haskell directly, because they use a format string containing the types of arguments and return value. <br>  However, in all cases of use, formatting strings were hard-coded, so Haskell code could use hard-coded functions instead of them without losing expressiveness.  If such strings were stored in a configuration file in MIDIUtil, then to translate it into a language with static typing would have to work seriously on the solution architecture. <br><br><h5>  GrapeFruit </h5><br>  The broadcast from GrapeFruit did not reveal any errors.  And the only error during execution could be to eliminate static typing.  It should be noted that static typing would help get rid of one test.  There was not a single dynamic construction that cannot be translated into a static one. <br><br><h5>  PyFontInfo </h5><br>  The translation from PyFontInfo led to the identification of 6 type errors.  Two execution errors could be fixed with the use of static typing.  From one test could get rid of.  PyFontInfo also uses struct.pack and struct.unpack, so it cannot be translated into Haskell, but this restriction can be circumvented. <br><br><h5>  results </h5><br>  Experience has shown that all projects could easily be translated into a language with static typing, and the changes would be minimal.  It turned out that unit testing cannot be called an adequate replacement for static typing.  During the experiment, 17 typing errors were discovered that were not detected by tests;  but many errors were still covered with tests. <br><br><h5>  Conclusion </h5><br>  The results of the experiment show that unit testing cannot be considered a substitute for static typing and does not take into account all the problems.  A significant problem is the fact that building a competent test for types is time consuming, and in languages ‚Äã‚Äãwith static typing this is done automatically.  The use of static type checking for programs written in dynamic languages ‚Äã‚Äãwould allow detection of defects that are not detected by tests.  And at the same time do not require major processing architecture. <br>  Experience has shown a new look at the problem of getting rid of typing errors with the help of unit tests.  I hope that this will interest someone, and they will conduct an experiment on other projects. <br>  You can read the full article <a href="https://docs.google.com/open%3Fid%3D0B5C1aVVb3qRONVhiNDBiNUw0am8">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/192108/">https://habr.com/ru/post/192108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192094/index.html">Google has substantiated its plan for the planetary Internet Loon in terms of the distribution of balloons in the stratosphere</a></li>
<li><a href="../192098/index.html">Python. Non-obvious behavior of some constructions</a></li>
<li><a href="../192100/index.html">Developer iOS Notes: Sharing Experience, Part 2</a></li>
<li><a href="../192102/index.html">Sudoku generation algorithm</a></li>
<li><a href="../192106/index.html">Overview of network storage Fantec CL-35B2 RAID</a></li>
<li><a href="../192112/index.html">Google store</a></li>
<li><a href="../192116/index.html">Entering the period: stop terrorizing users</a></li>
<li><a href="../192120/index.html">Basic principles of digital wireless communication. Likbez</a></li>
<li><a href="../192122/index.html">Typical vulnerabilities on sites with statistics</a></li>
<li><a href="../192124/index.html">String interpolation. Fairy Tale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
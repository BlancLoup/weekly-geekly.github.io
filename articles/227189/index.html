<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hola: principles of work</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the developers talked about where the startup Hola came from, and above all - about the technical aspects of the company. 

 Background of Hola...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hola: principles of work</h1><div class="post__text post__text-html js-mediator-article">  One of the developers talked about where the startup <a href="http://hola.org/">Hola</a> came from, and above all - about the technical aspects of the company. <br><br><h5>  Background of Hola </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/0b2/9ca/614/0b29ca6145f217d227a5401c30f9fe25.jpg" width="400" align="right">  Suppose in the average county town of N two providers get along peacefully, and one of them (P1) offers its customers a prize for connecting: a jar of jam, and a packet of cookies.  Consequently, he has more customers than the second provider (P2).  But the entire budget of P1 was spent on sweets, and his channel is not particularly wide and is constantly loaded.  A channel P2 is wide, but most often idle.  P1, of course, not in a hurry to share their channel with customers P1.  As a result, we have a <s>large part of the population with diabetes,</s> inefficient use of the channel, caused by healthy market competition. <br><br>  Another situation.  In one of the districts of the county town N, all residents are like cats.  And they regularly watch themselves and share with each other links to funny videos on Youtube.  It turns out that at the same time not only citizen Vasilius drags the rather large video sizes to himself from the overseas store, but all the other residents of the microdistrict do the same.  As a result: Youtube has to spend money on caching servers closer to town N, and providers - on expensive traffic across the oceans.  But it would be much easier and cheaper to get a video directly from Vasisualiya! <br><a name="habracut"></a><br>  Perhaps it was the thoughts above that prompted two startups who recently sold their previous brainchild, Jungo, for a hundred lemons and vowed themselves not to work anymore in the day in their lives, solemnly promising to break it.  And they created Hola. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Origins </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/d18/61f/07e/d1861f07efb8462a1dcde76c776c70c4.jpg" width="400" align="left">  At the heart of Hall is an HTTP-based protocol, using which peers playing different roles communicate with each other.  The traffic is encrypted and then archived using zlib, with one (not very documented) feature of which is an amusing incident.  For quite a long time, with enviable periodicity, here and there, the client suddenly broke off all the connections, made his face a brick, and in general behaved asocially.  It happened rarely, and everyone diligently pretended that it was necessary.  So far, after one of the updates, this phenomenon has not become widespread. <br><br>  When the patience overflowed, a raid was announced on the bug, which resulted in the following: in the zlib version behind the number 1.2.5, with a very specific content of the input stream, an empty block was added to its end.  The modification of the library from this lost faith in humanity and fell into depression, because of which the entire protocol collapsed.  And updating client code led to the fact that the ill-fated sequence began to appear much more often.  The crutches were bolted to the server with an emergency rate and a patch was applied to the clients with wide ties.  Well, at the same time, it was decided to upgrade zlib to version 1.2.8, in which this feature was recognized as a bug and fixed. <br><br><h5>  Little about hierarchy </h5><br>  The processing of any request from the browser Hall begins with a call to the elder brother - the server.  From the point of view of the client, such a server alone is responsible for everything.  But in fact, he only forwards requests to the right address.  For example, a server that is responsible for authorization, or a <s>dating site</s> server that helps two clients connect to each other, taking into account all their features.  So, for example, if one client wants to join another, which does not have an open port, but the first one has that port, the server will send the second command to join the first one.  Connection methods are currently being developed, when neither side has an open port. <br><br>  Also, in addition to clients, there are also many (really many) servers scattered around the world, playing the role of clients and having ports open for connection.  Depending on the needs of the client, they can either simply forward traffic through themselves, or mediate in conjunction with another client.  This may be necessary when certain services actively ban proxy servers based on a large number of connections from a single address (this includes Netflix with Hulu).  And when requests come more or less evenly from all the millions of customers, there‚Äôs no particular barking. <br><br><h5>  And finally - the most interesting and unexpected. </h5><br>  The fact is that Hola has a wide range of possibilities for diagnosing various problems, as they say, in field conditions (people who are to some degree <s>suffering from</s> paranoia and used to know that Hola is just a virus).  One of them allows you to strictly specify a group of peers, through which the traffic from the developer's client chases so that specific problems are easily reproducible. <br><br>  One day, one of the Hola developers noticed that his colleague listens to music from the well-known music service Pandora (which is blocked all over the world outside the US).  It turned out that if you take a group of peers, staying in the US, then the traffic will, respectively, chase through them.  And blocking it on the basis of the fifth column is impossible.  Now the demand for "side effect" even exceeds the need for an Internet accelerator.  Gigabit channels and so on each dog, but watch netfliksy from Uruguayan and sit in Facebook from Iran and other Chinas - give two, and at once. <br><br><h5>  Hola Developers </h5><br>  Even if the request should not bypass any regional restrictions, the server‚Äôs task is to decide which client to send it based on the mutual location of the two clients, the presence or absence of the desired content in the cache, peer workload and many other factors. <br><br>  One day, a relatively fresh developer spoiled the load sharing system between network nodes with his commit, causing the entire network to rest for several hours. <br><br>  It is the opportunity to break everything with one wrong sneeze that keeps a considerable staff of people who constantly: during the day, at night, on holidays and weekends (and even on Monday!) Monitor what is happening, and at the slightest sign of trouble, <s>those responsible for the head</s> are beaten <s>with</s> alarm. <br>  Of course, only the most hardy cope with such incredible responsibility.  As with the writing of programs - only the best.  We are looking for them in the daytime - with fire, at night - without fire.  And since we only believe in code, we don‚Äôt even look at summaries and other achievements. <br><br>  There is a decent job - <a href="http://hola.org/jobs">send</a> , become a highly paid employee of Hola.  Unless, of course, have an interview with a crazy chief programmers, obsessed with the quality of the code. </div><p>Source: <a href="https://habr.com/ru/post/227189/">https://habr.com/ru/post/227189/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../227175/index.html">Make the site work on touch devices.</a></li>
<li><a href="../227177/index.html">10 years ago, the first flight of a private spacecraft</a></li>
<li><a href="../227181/index.html">The use of sinter pastes in modern power semiconductor devices</a></li>
<li><a href="../227183/index.html">Comparison of geolocation binary databases and their drivers: GeoIP, Sypex Geo, TabGeo</a></li>
<li><a href="../227185/index.html">Development for Microsoft SQL Server: Unix way</a></li>
<li><a href="../227193/index.html">Creating offline maps for iOS applications</a></li>
<li><a href="../227195/index.html">Reflections on the blues - once again about exception handling</a></li>
<li><a href="../227197/index.html">Porting a Windows 8.1 application to Windows Phone 8.0 with troubleshooting</a></li>
<li><a href="../227199/index.html">Modern aspects of the presentation of texts in the analysis of natural language: classical and alternative approaches</a></li>
<li><a href="../227201/index.html">Own WebGL engine. Article number 1. Canvas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PLC100 + LabVIEW + Joystick v2.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In my last article, I described the ability to control the PLC with a joystick and promised to add a small change, connecting the PLC and LabVIEW not ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PLC100 + LabVIEW + Joystick v2.0</h1><div class="post__text post__text-html js-mediator-article">  In my last <a href="http://habrahabr.ru/post/248357">article,</a> I described the ability to control the PLC with a joystick and promised to add a small change, connecting the PLC and LabVIEW not via a serial port, but via Ethernet (good, the communication capabilities of the PLC100 allow it) with the help of an OPC server - in this case it is Codesys OPC Server.  (By the way, any other controller can be connected to LabVIEW in the same way ‚Äî via an OPC server that works with a specific controller).  In this article, I, in fact, going to describe how all this is done. <a name="habracut"></a><br><br>  The bottom line is: LabVIEW handles joystick button presses;  in the case of pressing a specific button, the variable (all variables are boolean) of the OPC server corresponding to this button is assigned the value TRUE;  the controller reads the values ‚Äã‚Äãof the OPC server variables and responds to their changes in accordance with the program loaded into it. <br><br><h4>  Part of the codesys </h4><br>  We declare eight boolean global variables: in my case, these are x, y, a, b for the four buttons and up, down, right, left for the cross. <br>  The program consists of functional blocks and looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/124/01b/8e6/12401b8e62f34ae499d02eaebab9e20c.JPG"><br><br>  The ‚Äúcontent‚Äù of the functional blocks can be found <a href="http://habrahabr.ru/post/248357">here</a> . <br>  Then you need to configure a symbol file - a file containing a description of the data with which the OPC server works.  To do this, go to Options, select the Symbol configuration there, tick the Dump symbol entries, and in the Set object attributes window that appears, select the necessary variables. <br><br><img src="https://habrastorage.org/files/a1f/356/193/a1f3561937204b1db992d251d012d014.jpg"><br><br>  I skip the setting of Codesys OPC Server: there is enough information on the subject on the web.  I will add only that when setting up the connection, you need to select an Ethernet connection.  However, the PLC100 can also be connected using a programming cable, but this is fraught with a noticeable delay.  It is also worth mentioning that I increased the update rate of the server (Update Rate) to 1500 milliseconds: with a small value, the server sometimes skips short-term button presses. <br><br><h4>  LabVIEW part </h4><br>  First of all, you need the NI LabVIEW DSC Module (the trial version can be downloaded from the official site).  This module allows you to work with the OPC server data in LabVIEW. <br>  Create a new VI, add 8 indicators to Frontal Panel. <br><br><img src="https://habrastorage.org/files/45e/07e/ae6/45e07eae6af34e59b670d22c3eacc2ab.JPG"><br><br>  ‚ÄúWriting‚Äù / drawing such a program: <br><br><img src="https://habrastorage.org/files/d81/464/28f/d8146428f8d14ad9ab525df144762853.JPG"><br><br>  If you are interested in details about the program - see <a href="http://habrahabr.ru/post/248357">here</a> . <br>  Next, you need to bind the OPC-variables to the indicators corresponding to specific buttons of the joystick.  To do this, open the properties of the indicator, go to the Data Binding tab;  in the Data Binding Selection choose DataSocket;  in the Access Type, set Write Only, since we need to write values ‚Äã‚Äãto variables;  in the path choose DSTP Server. <br><br><img src="https://habrastorage.org/files/8e0/342/712/8e034271227e42afbe01b560d5a82eeb.JPG"><br><br>  In the appeared window, we find the OPC-server we need and select the corresponding variable. <br><br><img src="https://habrastorage.org/files/dfd/5f5/da0/dfd5f5da0dc8440f8637100ef06bc44d.JPG"><br><br>  We perform this manipulation with each indicator, after which we understand that everything is ready - you can connect a joystick and shoot a video.  And here it is, by the way. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/oS5CS1kLPJc%3Ffeature%3Doembed&amp;xid=17259,15700002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhgwd_tanRbbLPIbbiYuEPrUSCVJYA" frameborder="0" allowfullscreen=""></iframe><br><br>  I was quite pleased with the results: the connection was stable, there were no omissions of clicks.  But, judging by the blinking of the indicators on the Front Panel, LabVIEW somehow reluctantly responded to button presses.  It seems to me that this would not have been observed on a more powerful computer. </div><p>Source: <a href="https://habr.com/ru/post/249295/">https://habr.com/ru/post/249295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249285/index.html">Some notes on VMware vSphere Security Permissions</a></li>
<li><a href="../249287/index.html">How to win in computer games, part II: specific examples</a></li>
<li><a href="../249289/index.html">Controlling a smart BLE lamp without a smartphone</a></li>
<li><a href="../249291/index.html">rfg_drawer or OTDR Editor</a></li>
<li><a href="../249293/index.html">How can you not conduct an olympiad or configure ejudge with the distribution of calculations</a></li>
<li><a href="../249297/index.html">From the desire to create a game to launch - one step</a></li>
<li><a href="../249299/index.html">How-to: What to consider when developing a strategy for a trading robot</a></li>
<li><a href="../249301/index.html">How to disagree with the ideas: Perfection Game and 3 steps to check the solution for sustainability</a></li>
<li><a href="../249303/index.html">Information security risks for business owners</a></li>
<li><a href="../249305/index.html">Cross-platform Android Studio app on jMonkeyEngine 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
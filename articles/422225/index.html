<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I tested QoE (Quality of Experience)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the past six months, I often began to hear at conferences and from acquaintances about various products based on the concept of ‚Äúquality of perce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I tested QoE (Quality of Experience)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/oq/fy/m3/oqfym33o3ff3e939zxquqz2c0x0.jpeg"><br><br>  Over the past six months, I often began to hear at conferences and from acquaintances about various products based on the concept of ‚Äúquality of perception‚Äù services (Quality of Experience, QoE).  This term is becoming increasingly popular.  Quite a lot of research is being done on creating new methods for determining the quality of users' perception, of a particular service or service, but now I don‚Äôt want to delve into the theory, who are interested in being able to google it on their own. <br><a name="habracut"></a><br>  The advertising messages say that this wonderful product can: <br><br><ul><li>  Identify problems with the quality of communication for CPE, including up to subscriber equipment, </li><li>  Boost LTV (LifeTimeValue), </li><li>  Clickstream analytics, that is, the ability to track visited sites, including competitors' sites, </li><li>  Find out how many virtual IP addresses are behind the real IP address, </li><li>  Determine which services / equipment subscribers use (SIP, OTT, smart house, smart tv, network equipment), </li><li>  For each user, prioritize traffic and restrict certain protocols based on L7, </li><li>  Easy integration with OSS / BSS. </li></ul><br>  Since my main task is to find subscribers dissatisfied with the quality of the Internet and generally solve problems of outflow of subscribers in every way (I work in one, not the smallest telecom operator in the service quality department), this product (we will call it QoE for convenience) ), with the sweet words of sellers and marketers solves this problem.  But this is all in theory and until you make sure in practice, you will not understand.  That is why I wanted to share with colleagues the practical side of this solution, devoid of beautiful marketing packaging. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Immediately make a reservation that I will not call the vendor, otherwise they will consider it for advertising, and no one will pay me money for it.  Let me just say that this is a Russian manufacturer, in the line of which there are solutions (hardware-software complex) for filtering URL, DPI and a product based on QoE principles based on this DPI. <br><br>  Therefore, I will tell and show you what functionality I was able to test, what problems arose during testing and summarize my subjective result. <br><br><h3>  Start testing </h3><br>  I will not particularly mention how I received the equipment for testing, as nothing special happened at this stage.  In short, I was quickly contacted by the partners of the vendor from the company NAG. <br><br>  We asked for clarifying information about the tasks that we want to solve using QoE, network topology, traffic volume and contact person data from our company.  After that, they sent a link to your personal account, where you could see the product live. <br><br><h3>  Personal Area </h3><br>  When logging in, a dashboard appears, showing: <br><br><ul><li>  Active subscribers </li><li>  Subscribers with poor RTT / terrible RTT (Round Trip Time), </li><li>  Packages from subscribers / to subscribers, </li><li>  Average RTT. </li></ul><br>  To be honest, the concept of "terrible RTT" is somehow unintelligible.  For some, 10 ms is considered terrible, for others - 100 ms.  But, having contacted the vendor‚Äôs technical support, I learned that the provider‚Äôs ‚Äúhorror‚Äù indicator defines the provider itself, and it registers it in the QoE configuration. <br><br><img src="https://habrastorage.org/webt/nq/zd/0z/nqzd0ztd7fprleabrpp501akvpg.png"><br><br><h3>  Problems with specific subscribers </h3><br>  I immediately found the problematic subscribers who had serious delays.  For example, more than 4.5 ms <br><br><img src="https://habrastorage.org/webt/yg/-f/kp/yg-fkpke_ut493q8tnatujuakxc.png"><br><br><img src="https://habrastorage.org/webt/_a/i5/4_/_ai54_kxohimaewyuxt-5evipu0.png"><br><br>  Here you can see the data of the client equipment, in this case it has TP-LINK.  Also, the subscriber cable length and CRC errors are visible. <br><br>  <u>A little help, just in case: Circular redundancy check (CRC) is a way to detect small changes in data blocks.</u>  <u>This type of error detection is especially useful when sending packet data over a network, such as SynqNet.</u>  <u>While the packet error counter checks for missing or invalid packets, the CRC error counter checks the data in the packets.</u> <u><br></u> <br>  It can be concluded that either the cable is broken or problems inside the apartment. <br><br><img src="https://habrastorage.org/webt/ha/sp/nj/haspnjmce-6_vtz2dmhv589no1q.png"><br><br>  It is possible to derive trunk problems: for example, to segment subscribers into groups of areas depending on the time of day and RTT, it can be filtered and grouped according to various criteria: <br><br><ul><li>  Number of CRC per week, </li><li>  Access switch, </li><li>  Service, </li><li>  Trunk switch </li><li>  Contract </li><li>  Area, </li><li>  Vendor subscriber unit </li><li>  Length of cable. </li></ul><br><br><img src="https://habrastorage.org/webt/oc/au/or/ocauor9jirgbbcbm4ky3fsg0blg.png"><br><br>  We will display a list of trunk switches, filtering by area.  As a result, we will see the number of subscribers on the trunk switches.  On one sits 99 subscribers, on the other 64, etc.  Also, you can see the average delay on the trunk switches. <br><br><img src="https://habrastorage.org/webt/ww/6b/cu/ww6bcus31lsnj7-yikkearfs4hw.png"><br><br>  I was most interested in finding the most brake switches.  As you can see from the screenshot above, this is the very first switch in the list with 99 subscribers.  We can go to his data and see what's wrong with him. <br><br>  We click on the switch, we filter by the criterion of the ‚ÄúMain switch‚Äù, grouped by the criterion of the ‚ÄúAccess switch‚Äù.  So it will be clear which access switch is the ‚Äúworst‚Äù on a given trunk switch: <br><br><img src="https://habrastorage.org/webt/0t/73/ey/0t73ey2nuwe9lybdyzobwahpj9o.png"><br><br>  As a result, the worst access switch is displayed (highlighted in red) - it has the largest RTT. <br><br><img src="https://habrastorage.org/webt/fm/md/gw/fmmdgwmktg3rlqugeamed_metcc.png"><br><br>  Now we go to this, the worst access switch and see the following picture: <br><br><img src="https://habrastorage.org/webt/kz/dp/co/kzdpcolopk8guzjk8bmukq_k3-i.png"><br><br>  We see many sessions with long delays.  If you look at the subscribers on this access switch, you can see those who have errors on the port - these are problems with the cable.  In the screenshot below, the subscriber number 12 is visible, with 898 errors. <br><br><img src="https://habrastorage.org/webt/eb/ko/sq/ebkosq8d9b5d6or7trayummksnm.png"><br><br>  Immediately you can see subscribers with a large RTT, for example, 10.5 <br><br><img src="https://habrastorage.org/webt/6p/nw/va/6pnwva-ochvkmsirpj4s_p8fnjq.png"><br><br>  We go to the subscriber and see the following picture: <br><br><img src="https://habrastorage.org/webt/jy/3d/gi/jy3dgiwkp29cyiycydd7exqf_tu.png"><br><br>  For each five-minute retransmit the subscriber has about 2% loss.  Most likely, he needs to change his Wi-Fi router.  This client just need to do. <br><br><img src="https://habrastorage.org/webt/d3/oa/zo/d3oazoncbvt8jvzyjjdjvqxu6da.png"><br><br><h3>  Subscribers with steadily bad Internet </h3><br>  This is one of the main reasons that prompted me to try QoE.  You can display all subscribers with consistently poor RTT and work individually with each one.  For example, open the statistics in the list for subscriber number 3. <br><br><img src="https://habrastorage.org/webt/3y/na/cm/3ynacm3w18uu1rrplwi8ldx9bqm.png"><br><br>  This subscriber has no errors on the port, cable 37 meters.  Most likely, the trouble lies in the apartment subscriber. <br><br><img src="https://habrastorage.org/webt/wu/cu/ie/wucuietsceht2j7thse-7fyibkm.png"><br><br><img src="https://habrastorage.org/webt/uv/sh/nl/uvshnleu1pfwqsysbjrvs-gvf88.png"><br><br><h3>  Problem Wi-Fi-vendors </h3><br>  As I understand it, it works like this: information is removed from the DHCP server on the MAC of the subscriber devices.  Thus, all Wi-Fi-vendors are pulled out: <br><br><img src="https://habrastorage.org/webt/vv/ak/z0/vvakz0wjjpq4yhacx0yrv47tosg.png"><br><br>  The most popular and with normal RTT was Zyxel, it has 9307 subscribers. <br><br><img src="https://habrastorage.org/webt/7v/so/mu/7vsomuqtoatyrp9tzz7iebg9avw.png"><br><br>  Top worst below, with RTT of 15.2 and below. <br><br><img src="https://habrastorage.org/webt/r7/qw/lg/r7qwlgt-1fobmo5eaxlmflfmkhi.png"><br><br><h3>  Internet resale </h3><br>  Found another feature that shows subscribers with the number of sessions. <br><br><img src="https://habrastorage.org/webt/cu/m4/co/cum4co2pc2-km214mkqeq3_pboe.png"><br><br>  Immediately visible subscribers with a bunch of sessions.  We enter the subscriber at number 1. <br><br><img src="https://habrastorage.org/webt/an/ew/ba/anewba94zery4aqfdcgb2yubbvg.png"><br><br>  In the ‚ÄúClickstream Logs‚Äù section you can see how many devices a subscriber has at the moment: <br><br><img src="https://habrastorage.org/webt/df/an/x3/dfanx3kd2avparhogxmuvfh3yt4.png"><br><br>  As we see, the subscriber has 100 devices.  Such a subscriber exactly resells the Internet.  What to do with him?  For example, we plan to transfer such subscribers to service as a legal entity. <br><br><img src="https://habrastorage.org/webt/z1/re/ij/z1reij4kzl0q97n-iarww5t2qga.png"><br><br><h3>  Clickstream analytics </h3><br>  Here, it seems, everything is simple: clickstream shows which devices subscribers use, which sites they visit, which browsers they use.  This information is not so interesting to me, but it turned out to be necessary for our marketers.  They are, for example, interested in the following scenarios: <br><br>  1) Selling our TV service to those subscribers who have a Smart TV.  To do this, you can filter by "user-agent: SmartTV" and display the owners of smart TV.  Then the matter of technology: calling customers or a letter with a proposal to connect the tariff with TV. <br><br><img src="https://habrastorage.org/webt/p0/vt/cj/p0vtcjvy1zdotdi3l0hf_r4xl0o.png"><br><br><img src="https://habrastorage.org/webt/ig/ys/ll/igyslleumthb13maldp2v1nhn2o.png"><br><br>  2) Search for potential dissatisfied customers who are interested in the sites of competitors.  In the same section ‚ÄúClickstream logs‚Äù we enter the URL of the competitor we are interested in in the ‚Äúdomain‚Äù line, and as a result, we get the following list: <br><br><img src="https://habrastorage.org/webt/0h/jg/2a/0hjg2asy83p0_npik0ewsutligw.png"><br><br><img src="https://habrastorage.org/webt/1z/is/zv/1ziszveweldrezj6nhpeu0umjfm.png"><br><br>  Additionally, you can return to the very beginning of my test and check for RTT quality (maybe the subscriber has a problem with his Wi-Fi router). <br><br>  This information can be passed on to marketing, call center, they know what to do.  At a minimum, they will communicate with subscribers about their satisfaction with the quality of our services. <br><br><h3>  Connection log </h3><br>  There is a connection log function, with which you can determine how many virtual addresses are located behind one real one. <br><br><img src="https://habrastorage.org/webt/fp/4c/zy/fp4czygvidiiqicq26n0qhiif9m.png"><br><br>  In fact, this graph shows the density of the NAT provider.  This graph shows that NAT can still be compacted. <br><br><h3>  DPI logs </h3><br>  Here you can see TOP autonomous, applications. <br><br><img src="https://habrastorage.org/webt/10/in/xx/10inxxx0xf3voyourfqbdsxiffa.png"><br><br><img src="https://habrastorage.org/webt/95/17/28/951728h3ufvr8dr0feiius_9zvi.png"><br><br>  You can look at a specific application in terms of the quality of communication, and from which avtokamok flows, for example World of tanks: <br><br><img src="https://habrastorage.org/webt/_m/av/c1/_mavc1wraj__che1aonw81yz-ca.png"><br><br><img src="https://habrastorage.org/webt/yt/yh/kc/ytyhkcywcmf2uauz41vp2-zgdgc.png"><br><br>  There is nothing unusual: it flows with GCORE, there are no special brakes. <br><br>  You can go to the GCORE autonomy and see what else flows from it: <br><br><img src="https://habrastorage.org/webt/mn/1y/nv/mn1ynv1tfyxqj0qnyfvlxmgpzqq.png"><br><br>  You can also create an interesting filter.  For example, show Russian AS, for which, the delay is more than 16 ms. <br><br>  In other words, you can understand where the peering goes through the West <br><br><img src="https://habrastorage.org/webt/r1/ff/kk/r1ffkku_up7ognkb8srdh-ugjqe.png"><br><br>  As a result, we get a list of AS: <br><br><img src="https://habrastorage.org/webt/rd/fz/di/rdfzdiwedc_x3ytoaghc9wr3lcc.png"><br><br>  Total: <br><br>  For my tasks as a whole, the product is suitable, since I could easily find all problem subscribers with RTT greater than 4-5 c indicating the reason (broken cable, viruses, etc.) and indicating ‚Äúproblem‚Äù areas - indicating the street and IP subscribers .  I also want to note a useful feature - search for subscribers who are already considering their escape to competitors. <br><br>  What I would like to see in future versions of the product is automation.  That is, here the system finds subscribers who have started to visit competitors' sites, then it would be more convenient for me to receive notifications in the mail about such events. <br><br>  Even in terms of automation, it would be convenient if it could be integrated with our VoIP, so that when a ‚Äúterrible‚Äù RTT occurs at a subscriber, our call center automatically calls these customers according to a predefined script. <br><br>  But for the time being, we, as a provider, will have to solve the problem of churning out customers in a complex together with customer support and a call center in manual or semi-manual mode.  In the near future we want to move from testing to implementation. <br><br>  <b>PS:</b> If it is interesting, then I can tell you about how we worked with subscribers who wanted to run away to competitors.  And also about how we will integrate this product into our network. <br><br>  In general, write to kammenti, which of these topics you would like to see as the next article, and I will send the material to the editors of the site - maybe they will agree to publish my creations. </div><p>Source: <a href="https://habr.com/ru/post/422225/">https://habr.com/ru/post/422225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422213/index.html">One day without javascript: what could go wrong?</a></li>
<li><a href="../422217/index.html">Not really serious about hosting or how to check the adequacy of the host</a></li>
<li><a href="../422219/index.html">When hiring large international companies refuse diplomas</a></li>
<li><a href="../422221/index.html">Sulfur</a></li>
<li><a href="../422223/index.html">Choose a UPS and not be disappointed</a></li>
<li><a href="../422227/index.html">The origins of science in the stone age?</a></li>
<li><a href="../422229/index.html">We invite to the conference Fujitsu World Tour 2018</a></li>
<li><a href="../422231/index.html">"Perfect" time plan in the form of a Gantt chart</a></li>
<li><a href="../422233/index.html">Dedicated to all the best teachers ...</a></li>
<li><a href="../422235/index.html">Designing dashboards for web analytics e-commerce site. Part 1: User-friendly interface</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tips for using the HyperLynx DDR Wizard to analyze QDR4</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quad Data Rate (QDR-IV) is the standard for high-performance memory for networking applications and is ideal for the new generation of networking devi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tips for using the HyperLynx DDR Wizard to analyze QDR4</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/u-/er/qq/u-erqq7n5iv6ge1-wyynu27goae.png"></div><br><br>  Quad Data Rate (QDR-IV) is the standard for high-performance memory for networking applications and is ideal for the new generation of networking devices, communications equipment and computing systems. <br><br>  QDR-IV SRAM has an integrated Error Detection and Correction Block (ECC) to ensure data integrity.  This unit is able to handle all one-bit memory errors, including those caused by cosmic rays and alpha particles.  As a result, memory modules will have a program error rate (SER) of no more than 0.01 failure / MB.  QDR-IV is equipped with a programmable address parity function that ensures data integrity on the address bus. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Distinctive features of QDR SRAM memory: <br><br><ul><li>  Built-in error correction module ensures data integrity and eliminates software errors </li><li>  The modules are available in two versions: QDR-IV HP (data transfer rate 1334 Mtrans / s) and QDR-IV XP (data transfer rate 2132 Mtrans / s) </li><li>  Two independent bidirectional DDR1 memory data ports </li><li>  Bus inversion function to reduce noise while simultaneously connecting input and output lines </li><li>  Built-in matching circuit (ODT) reduces board complexity </li><li>  Skewed training to improve signal acquisition timing </li><li>  I / O signal level: 1.2V to 1.25V (high-speed transceiver logic (HSTL) / terminated logic (SSTL)), 1.1V to 1.2V (POD2) </li><li>  361-pin FCBGA3 package </li><li>  Bus width: x18, x36 bits </li></ul><a name="habracut"></a><br><h3>  Introduction </h3><br>  DDRx Wizard is an easy-to-use tool in HyperLynx that allows you to monitor time waveforms in batch mode and analyze the signal integrity of standard DDR JEDEC protocols.  The DDRx Wizard can be launched both at the stage of the pre-topological analysis according to the ‚Äúwhat if‚Äù scenario, and on a fully traced board.  In addition, the tool allows you to import most of the formats of the models created by major suppliers of microcircuits. <br><br>  DDRx Wizard allows you to check all the bits of the memory bus for compliance with the integrity of the signal, as well as for compliance with the requirements of synchronization between signals.  This article will detail the use of an interactive assistant to analyze projects implementing the QDR4 protocol (Figure 1). <br><br> <a href=""><img src="https://habrastorage.org/webt/mn/r7/dn/mnr7dnxaogwzla5vb4nyk_nqqja.jpeg"></a> <br>  <i>Fig.</i>  <i>1. Internal QDR architecture using the example of the CY7C4142KV13 module (clickable)</i> <br><br><h3>  First look at QDR-IV in HyperLynx DDRx WIZARD </h3><br>  The QDR-IV protocol defines two unidirectional pairs of a data strobe signal: one for reading data, the other for writing, which support independent operation and simultaneous read and write operations, and the ports can operate at different frequencies (Fig. 2).  Thus, the risk of malfunction is completely excluded. <br><br><img src="https://habrastorage.org/webt/hd/1q/5d/hd1q5dmj0rdirsow7slcp1vl7je.jpeg"><br>  <i>Fig.</i>  <i>2. Availability of separate ports for reading and writing in the QDR SRAM architecture</i> <br><br>  For this protocol, the DDRx Wizard will use separate gates for read and write operations.  QDR IV is usually implemented using an x36 or x18 bit bus (see Figure 3a and 3b). <br><br><table><tbody><tr><td><img src="https://habrastorage.org/webt/7t/sa/gz/7tsagzumuack4l7fysxfphqfy_w.png" alt="image">  Fig.  3a  QDR- IV, x36-bit </td><td><img src="https://habrastorage.org/webt/jv/0g/rm/jv0grmzpzjv4kyxvcwokuav2jty.png" alt="image">  Fig.  3b.  QDR- IV, x36-bit </td></tr></tbody></table><br>  DDRx Wizard allows you to simulate QDR-IV in three stages: <br><br><ul><li>  Check reading data </li><li>  Validation of data records </li><li>  Check address / control bus </li></ul><br>  Since the address / control bus can be checked independently of data read / write checks, this can save you time by combining this step with any of the data testing steps.  The following describes all three test data scenarios. <br><br><h3>  Technological features </h3><br>  QDR-IV supports pseudo open drain technology (POD) and Stub Series Terminated Logic (SSTL) terminating logic (Figure 4). <br><br><img src="https://habrastorage.org/webt/ou/du/fn/oudufnsg9ijaclyuttgthdomfcg.jpeg"><br>  <i>Fig.</i>  <i>4. Differences between POD and SSTL</i> <br><br>  Regardless of the logic standard used, select <b>LPDDR3</b> as the technology (Fig. 5), since there is no support for <b>Vref training</b> , as is the case with the DDR4's POD module.  Instead, it uses fixed Vref and Vinh / Vinl values, similar to DDR3 and LPDDR3.  Since QDR-IV uses double data rates for address signals like LPDDR3, it is recommended to select this option.  Next, enter the transfer rate of user data, for example, 1866 MT / s or 2133 MT / s, where MT / s is the number of megatransactions per second (megatransfers per second). <br><br><img src="https://habrastorage.org/webt/hb/i9/sk/hbi9skjwgvjl1decuuy5vpcyo2k.png"><br>  <i>Fig.</i>  <i>5. Choice of logic standard</i> <br><br><h3>  Data signal: read operation </h3><br>  For data read operations, the DRAM will control the DQ signals in conjunction with the differential gates QK signals.  Thus, the setting focuses on the data read operation, and assigns the necessary circuits (signals) to the corresponding QK gate. <br>  In the <b>Nets to Simulate</b> section (Fig. 6), tick the box ‚Äú <b>Read Cycles Only</b> ‚Äù ( <b>Read Cycles Only</b> ).  Checkboxes <b>Clock-to-strobe and Address checks</b> are optional. <br><br>  Also, check the installation of the checkbox <b>Compensate signal launching skews</b> . <br><br><img src="https://habrastorage.org/webt/to/ij/9u/toij9ue7wvjtvumqp1grzpyajfy.png"><br>  <i>Fig.</i>  <i>6. Reading data</i> <br><br>  Make sure that all necessary data gates are selected (Fig. 7). <br>  In the <b>Data Nets</b> section, verify that the signals match each strobe.  Please note that for x18 and x36 bit buses, the signals are different, so make sure that the pinout is correct for your particular case (Fig. 8a and 8b). <br><br><img src="https://habrastorage.org/webt/3c/46/ul/3c46ulzcxrz21kz4brsts1xdx7y.png"><br>  <i>Fig.</i>  <i>7. Reading Data Strobe</i> <br><br><img src="https://habrastorage.org/webt/ti/y1/o-/tiy1o-mhfmomhbwuxneat1eii7y.png"><br>  <i>Fig.</i>  <i>8a.</i>  <i>Signal group for 36-bit bus</i> <br><br><img src="https://habrastorage.org/webt/qy/df/ua/qydfuaz74qgkfu94gjacxofcqae.png"><br>  <i>Fig.</i>  <i>8b.</i>  <i>Signal group for 18-bit bus</i> <br><br>  Parallel bus checks are usually performed by setting / delaying the time between the strobe and the signal.  All these requirements, in addition to other time values, are needed by the DDRx Wizard to verify the results.  These values ‚Äã‚Äãmay differ from chip to chip, so it is recommended to enter values ‚Äã‚Äãthat apply to a specific memory device.  In addition, the default timing information for LPDDR3 is incompatible with QDR-IV.  So, all the timing information for QDR-IV should be entered and correspond to the documentation for your chip. <br><br>  This can be done either with the help of the <b>Timing Wizard</b> (Fig. 9), which prompts the user to fill in several forms for the subsequent generation of time values, or you can edit the .V synchronization files corresponding to your controller and DRAM. <br><br><img src="https://habrastorage.org/webt/a6/fq/au/a6fqauglj2vrlmr_xm4gr2ijylu.png"><br>  <i>Fig.</i>  <i>9. Setting Timing Values</i> <br><br>  <b>Please note</b> : since the simulation is performed in the <b>LPDDR3</b> mode, the results should be interpreted accordingly. <br><br><h3>  Data signal: write operation </h3><br>  The data writing operation and its analysis is similar to the analysis for the read operation described above.  But there are two key differences that we will now consider.  With the exception of these two nuances, the steps performed for a data read operation can be repeated to simulate data writing. <br><br>  In the <b>Nets to Simulate</b> section (Figure 10), make sure that the <b>Write Cycles Only</b> option is selected. <br><br>  It is also possible to simulate the operation of writing the address signal ( <b>Address Signal write Operations</b> ).  And don't forget to make sure that the <b>Compensate Skew Launch checkbox is checked</b> . <br><br><img src="https://habrastorage.org/webt/yf/14/a3/yf14a37oqikvjwsgc9j8gdcunbe.png"><br>  <i>Fig.</i>  <i>10. Record data</i> <br><br>  Make sure that the correct gates are selected in the <b>Data Strobe</b> section (Figure 11).  The key difference between a read transaction and a write transaction is the strobe used for data synchronization, this strobe is different from the strobe used for the data read operation (Fig. 12 and 13). <br><br><img src="https://habrastorage.org/webt/b1/ny/3m/b1ny3m7pi1j_inrxvqxinjdxefy.png"><br>  <i>Fig.</i>  <i>11. Record data gates</i> <br><br><img src="https://habrastorage.org/webt/l9/x8/ff/l9x8ffrx1y7p7fry-8gc0vfh59u.png"><br>  <i>Fig.</i>  <i>12. Signal strobe signal groups (36-bit bus)</i> <br><br><img src="https://habrastorage.org/webt/ex/fx/q9/exfxq9o4qptlwp8ltjhg_cf2hom.png"><br>  <i>Fig.</i>  <i>13. Signal strobe signal groups (18-bit bus)</i> <br><br><h3>  Bus address, commands and controls </h3><br>  QDR-IV uses CK / CK # differential clocks to select control signals, addresses, and command signals.  The leading edge of the CK signal is used to enter information about port A, and the back is to select information about port B. <br><br>  Taking into account the integrity of the signal, the waveforms for the address lines must meet the installation requirements and delays of both the leading and trailing edges of the clock signal.  This is very similar to the behavior of LPDDR3. <br><br>  <b>LDA #, LDB #, RWA # and RWB #</b> signals are synchronized with a single data rate (single-data-rate).  This means that these signals are synchronized only on one of the two clock edges.  The LDA # and RWA # signals are synchronized on the rising edge of the clock, and the LDB # and RWB # signals - on the falling front. <br><br>  The blocks are largely symmetrical - the front differential front is not much different from the rear.  This means that to ensure the integrity of the signals, the timing values ‚Äã‚Äãfor <b>LDB # and RWB #</b> should be almost the same, if not identical when sampling at the leading or trailing edge of the clock signal.  LPDDR3 control signals are also synchronized on the leading edge only. <br><br>  The following steps are specific to simulating address buses, commands, and controls when using QDR-IV. <br><br>  Make sure that <b>Address, Command and Control timing (relative to clocks)</b> is checked in the <b>Nets to Simulate</b> section (Fig. 14). <br><br><img src="https://habrastorage.org/webt/04/m2/sh/04m2shw2um0hirsnqex-xiz2-ya.png"><br>  <i>Fig.</i>  <i>14. Set the Address, Command and Control timing checkbox.</i> <br><br>  In the <b>Clock Nets</b> section, make sure that the differential pair of CK / CK # clock signals is selected (Figure 15). <br><br><img src="https://habrastorage.org/webt/tk/xx/zn/tkxxznuwkw6esdmhn6i3hbg-9ac.png"><br>  <i>Fig.</i>  <i>15. Selection of differential sync</i> <br><br>  In the <b>Addr / Comm Nets</b> section, make sure that bits <b>A [20: 0]</b> are selected for devices with x36 and bits <b>A [19: 0]</b> are for devices with x18.  In addition, set the signals <b>AP and AINV</b> (Fig. 16 and 17). <br><br><img src="https://habrastorage.org/webt/k3/k7/ge/k3k7geoif_muyxncmxve3dutuk8.png"><br>  <i>Fig.</i>  <i>16. Settings for x36-bit tires</i> <br><br><img src="https://habrastorage.org/webt/hy/y3/ke/hyy3kem7zrvziequz2u_wjqfoq0.png"><br>  <i>Fig.</i>  <i>17. Settings for x18-bit tires</i> <br><br>  In the <b>Control Nets</b> section, select the LDA #, LDB #, RWA #, and RWB # signals (Figure 18). <br><br><img src="https://habrastorage.org/webt/so/5i/pi/so5ipiblvfvzhksebfrlwwxxueg.png"><br>  <i>Fig.</i>  <i>18. Control signals</i> <br><br>  As in the case of modeling the data signal, make sure that you use the correct files with the timing parameters.  The rest of the simulation and evaluation results are similar to LPDDR3. <br><br>  <a href="https://files.nanocad.ru/f/84645f0d20bf4dbf8427/%3Fdl%3D1">‚ÄúInterpreting the results of the HyperLynx DDRx report‚Äù</a> <br><br><h3>  Conclusion </h3><br>  By following the simple instructions provided in this article, you can benefit from and effectively use the DDRx Wizard helper package to simulate and test QDR-IV tires. <br><br>  I hope this manual will be useful to someone. <br>  Sincerely, Filipov Bogdan ( <a href="https://habr.com/users/pbo/" class="user_link">pbo</a> ). <br><br>  I also take this opportunity to invite the developers of REI to a seminar organized by Nanosoft and Mentor Graphics: <br><br>  <a href="http://cad-expert.ru/meropriyatiya/pads-pcb-forum-2018/">"A new generation of solutions for the design of electronic devices from Mentor Graphics"</a> <br><br><img src="https://habrastorage.org/webt/ci/j5/vz/cij5vzabktrgzczbensiqv6inyq.png"></div><p>Source: <a href="https://habr.com/ru/post/423897/">https://habr.com/ru/post/423897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423885/index.html">Invitation to the light show and a bit of insight from the future site "Circle of Light" in Moscow</a></li>
<li><a href="../423889/index.html">My disappointment in software</a></li>
<li><a href="../423891/index.html">Expression trees in enterprise development</a></li>
<li><a href="../423893/index.html">Hello World to receive data from a Bluetooth (BLE) device via C #</a></li>
<li><a href="../423895/index.html">You don't need a lawyer. But it is not exactly</a></li>
<li><a href="../423901/index.html">When speed and scaling are needed: a server of distributed iOS devices</a></li>
<li><a href="../423903/index.html">Immersion in AD: disassemble advanced attacks on Microsoft Active Directory and how to detect them</a></li>
<li><a href="../423905/index.html">The developers remained unknown. Yandex lecture</a></li>
<li><a href="../423909/index.html">On all computers in Russia they want to pre-install Russian antiviruses</a></li>
<li><a href="../423911/index.html">Silicon photonics stumbles at the last meter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
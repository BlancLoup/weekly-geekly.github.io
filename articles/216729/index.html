<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine learning in a simple project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am a CTO of the Preply project and I want to tell a little about what each programmer dreams of, namely about complex and interesting tasks in simpl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine learning in a simple project</h1><div class="post__text post__text-html js-mediator-article">  I am a CTO of the <a href="http://preply.com/">Preply</a> project and I want to tell a little about what each programmer dreams of, namely about complex and interesting tasks in simple projects. <br><br>  To be more precise, it‚Äôs about how you can add a bit of science to a business and get some benefit as a result.  In this article I will try to describe one of the contexts of using Machine Learning in a real project. <br><a name="habracut"></a><br><h4>  Problem </h4><br>  We are the Preply tutoring platform and everyone wants to deceive us. <br><br>  The user on our site leaves requests for tutors and, after they agree on the conditions, pays for the lessons through the site.  If classes are on Skype, we accept all payments through the site.  If they meet live, our commission is the cost of the first lesson. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For <i>some reason,</i> tutors and students are trying to circumvent the payment of lessons through the site.  To do this, they use the internal message system, which is designed to clarify the details of upcoming classes and is available after sending the application to the tutor.  Here are some examples of contacts exchange: <br><br><blockquote>  <i>My Skype vasiliy.p, tel +789123456.</i>  <i>So at 19:00 on April 1!</i> </blockquote><br><blockquote>  <i>Good evening!</i>  <i>You could write your number or call my + 78-975-12-34</i> </blockquote><br><blockquote>  <i>I do not want to pay before the lesson, my name is Vasily Pupkin - find me on VKontakte</i> </blockquote><br><br>  An experienced programmer will immediately say: <i>‚ÄúWhat is the problem to write regular expressions for possible message exchange options?‚Äù.</i>  There is no problem, but this solution has several disadvantages: <br><br><ol><li>  It is difficult to foresee all variants of incorrect (that is, those that contain contacts) of messages.  For example, in the first version of the product there was a set of regular expressions for a phone number, but it worked and blocked messages like: <br><blockquote>  <i>Friday - from 13 00-15 00-15 30 ... how much will a group lesson cost?</i> </blockquote><br>  In a more complicated case, the regular expression for email was used.  Mail, which was intended to block messages like: <br><blockquote>  <i>vasya (dog) pupkin (dot) ru</i> </blockquote><br>  but at the same time, it blocked a completely harmless text: <br><blockquote>  <i>I know English like a dog: I understand everything, but I cannot say.</i> </blockquote><br>  The word <i>‚ÄúSkype‚Äù is</i> even more difficult: it is very difficult to distinguish messages containing attempts to exchange Skype: <br><blockquote>  <i>please add me in Skype - vasya82pupkin</i> </blockquote><br>  from clarifying messages: <br><blockquote>  <i>do you want to have skype or local lessons?</i> </blockquote><br></li><li>  There is no control over the threshold of trust.  That is, the message is either blocked or not.  In order to change the logic, you need to climb into the code.  In real life, it is much easier to make errors of the second type (message skipping) than errors of the first type (false alarm), since in case of a false alarm the user writes support, the support manager will take the time to apologize for incorrect blocking and unblock messages without to mention the spoiled experience of using the service.  On the other hand, users who exchange contacts rarely become our customers, so it‚Äôs easier to make mistakes of the second type, since we don‚Äôt make money on them (yes, this is business). </li></ol><br><br>  At some point in time, I decided to spend the weekend in order to make the blocking process more scientific.  The following describes what came of it.  At once I will make a reservation that my goal was not to do everything correctly, precisely and scientifically, but rather to do so that it worked without mistakes and had a positive effect on income. <br><br><h4>  Decision </h4><br>  I decided to try 3 methods of machine learning to correctly classify the correct / incorrect messages that I remember from the <a href="https://www.coursera.org/course/ml">Coursera Machine Learning by Andrew Ng</a> course. <br><br>  The first problem is to prepare the base for training.  We had over 50,000 posts previously classified by the old system.  I took only 5,000 of them and spent about 2‚Äì3 hours trying to correct the wrong classification in those messages where the previous system made mistakes.  In theory, the larger the base, the better, but in the real world it is quite difficult to manually prepare a large sample (in other words, laziness). <br><br>  One of the nuances in the time-consuming sample preparation process is the ethics of the process.  I confess, it would not be very convenient for me to read other people's messages, so before that I jumbled the words so that during a cursory review the suspicious messages were visible, but without an understanding of the point.  For example: <br><br>  It was: <br><blockquote>  <i>I would like to start classes in February, is it possible?</i>  <i>I can also tell you the exact time in January, but it definitely won't be until 18:00</i> <br></blockquote><br>  It became: <br><blockquote>  <i>time not classes from February is possible?</i>  <i>Exactly in January, too, before 18:00 I‚Äôm sure but I can say I would like to start a month, it‚Äôs</i> <br></blockquote><br>  It was: <br><blockquote>  <i>I would be glad to be useful, my phone.</i>  <i>(012) 345-678 Call, we will agree, thank you</i> </blockquote><br>  It became: <br><blockquote>  <i>tel.</i>  <i>be glad I would be helpful, my Call, we will agree, thanks (012) 345-678</i> </blockquote><br>  The result is a csv file with ~ 5000 lines, where the incorrect messages are marked with zero, and the correct ones.  After that, on the basis of working with data, we identified a set of message characteristics that "by eye" have an impact on the classification. <br><br><ul><li>  suspicion on the phone; </li><li>  suspicion on el.  mail; </li><li>  suspicion of Skype contacts; </li><li>  suspicion of url; </li><li>  suspicion of soc.  networks; </li><li>  correct words that come with numbers (time, currency); </li><li>  message length; </li><li>  Suspicious words: find, add, mine; </li><li>  ‚Ä¶ and so on. </li></ul><br><br>  After defining the characteristics for each of them, I wrote several regular expressions, for example: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> re SEPARATOR = <span class="hljs-string"><span class="hljs-string">"|"</span></span> reg_arr = [ re.compile(<span class="hljs-string"><span class="hljs-string">u'|facebook|linkedin|vkontakt|'</span></span>,re.IGNORECASE | re.UNICODE), re.compile(<span class="hljs-string"><span class="hljs-string">u'.{1,10}'</span></span>, re.UNICODE)] re.compile(<span class="hljs-string"><span class="hljs-string">u'[^]|skype'</span></span>, re.IGNORECASE | re.UNICODE), re.compile(<span class="hljs-string"><span class="hljs-string">u''</span></span>, re.IGNORECASE | re.UNICODE), re.compile(<span class="hljs-string"><span class="hljs-string">u'[—ñ].*\s[a-zZ-Z]'</span></span>, re.IGNORECASE | re.UNICODE), re.compile(<span class="hljs-string"><span class="hljs-string">'\d{3}[-\.\s]??\d{3}[-\.\s]??\d{4}|\(\d{3}\)\s*\d{3}[-\.\s]??\d{4}|\d{3}[-\.\s]??\d{4}'</span></span>), ... re.compile(<span class="hljs-string"><span class="hljs-string">'http|www|\.com'</span></span>, re.IGNORECASE), re.compile(<span class="hljs-string"><span class="hljs-string">u'|my'</span></span>, re.IGNORECASE | re.UNICODE), re.compile(<span class="hljs-string"><span class="hljs-string">u'|find'</span></span>, re.IGNORECASE | re.UNICODE), re.compile(<span class="hljs-string"><span class="hljs-string">u'|add'</span></span>, re.IGNORECASE | re.UNICODE), ... re.compile(<span class="hljs-string"><span class="hljs-string">'\w+@\w+'</span></span>, re.IGNORECASE), re.compile(<span class="hljs-string"><span class="hljs-string">'.{0,50}'</span></span>, re.IGNORECASE), re.compile(<span class="hljs-string"><span class="hljs-string">'.{50,200}'</span></span>, re.IGNORECASE), .... ] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">feature_vector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x.search(text) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, reg_arr) fi=open(<span class="hljs-string"><span class="hljs-string">'db_machine.csv'</span></span>, <span class="hljs-string"><span class="hljs-string">'r'</span></span>) fo=open(<span class="hljs-string"><span class="hljs-string">'db_machine_result.csv'</span></span>, <span class="hljs-string"><span class="hljs-string">'w'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> fi: [text, result] = line.split(SEPARATOR) output = feature_vector(text).append(result) fo.write(<span class="hljs-string"><span class="hljs-string">","</span></span>.join(map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: str(x), output )) + <span class="hljs-string"><span class="hljs-string">"\n"</span></span>) fo.close() fi.close()</code> </pre> <br><br>  Accordingly, after processing all messages for all characteristics (we now have about a hundred), we write the vector of characteristics and the result of the classification into a file. <br><br>  After preparing the data, it is necessary to split the sample into three parts: for training (train set), for selecting parameters (cross-validation set) and checking (test set).  Following the advice from the course, the sizes of the training samples, the selection of parameters, the test are correlated in the proportion of 60/20/20: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'db_machine_result.csv'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> source: data = [ (random.random(), line) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> source ] data.sort() n = len(data) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'db_machine_result_train.csv'</span></span>,<span class="hljs-string"><span class="hljs-string">'w'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> target: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data[:int(n*<span class="hljs-number"><span class="hljs-number">0.60</span></span>)]: target.write( line ) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'db_machine_result_cross.csv'</span></span>,<span class="hljs-string"><span class="hljs-string">'w'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> target: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data[int(n*<span class="hljs-number"><span class="hljs-number">0.60</span></span>):int(n*<span class="hljs-number"><span class="hljs-number">0.80</span></span>)]: target.write( line ) <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'db_machine_result_test.csv'</span></span>,<span class="hljs-string"><span class="hljs-string">'w'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> target: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _, line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data[int(n*<span class="hljs-number"><span class="hljs-number">0.80</span></span>):]: target.write( line )</code> </pre><br><br>  Then, guided by the principle of not reinventing the wheel and getting results as quickly as possible, we used scripts from the Machine Learning Coursera course and simply drove our samples along logistic regression algorithms, SVM and neural networks.  Scripts are simply taken from the course, for example, SVM looks like this: <br><br><pre> <code class="matlab hljs">clear ; close all; clc data_train = load(<span class="hljs-string"><span class="hljs-string">'db_machine_result_train.csv'</span></span>); X = data_train(:, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">end</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>); y = data_train(:,<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>); data_val = load(<span class="hljs-string"><span class="hljs-string">'db_machine_result_cross.csv'</span></span>); Xval = data_val(:, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">end</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>); yval = data_val(:,<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>); data_test = load(<span class="hljs-string"><span class="hljs-string">'db_machine_result_test.csv'</span></span>); Xtest = data_test(:, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">end</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>); ytest = data_test(:,<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>); [C, sigma] = dataset3Params(X, y, Xval, yval); <span class="hljs-comment"><span class="hljs-comment">%    cross-validation set fprintf('C: %f\n', C); fprintf('sigma``: %f\n', sigma); model= svmTrain(X, y, C, @(x1, x2) gaussianKernel(x1, x2, sigma)); p = svmPredict(model, X); fprintf('Training Accuracy: %f\n', mean(double(p == y)) * 100); p = svmPredict(model, Xtest); fprintf('Test Accuracy: %f\n', mean(double(p == ytest)) * 100); fprintf('Program paused. Press enter to continue.\n'); pause;</span></span></code> </pre><br><br>  Look at how the svmTrain / svmPredict functions are implemented on the <a href="https://www.coursera.org/course/ml">course</a> website or, for example, <a href="">here</a> . <br><br>  All the algorithms on the cross-validation sample went through the internal parameters ( <i>Œª</i> for regularization, <i>œÉ</i> , <i>C</i> for the Gaussian function, size for the size of the hidden layer of the neural network).  Imagine the final results of accuracy for some of them below: <br><br><table><tbody><tr><th colspan="3">  Neural networks </th><th colspan="3">  Logistic regression </th><th colspan="3">  SVM </th></tr><tr><td>  size = 30, Œª = 1 </td><td>  size = 30, Œª = 0.01 </td><td>  size = 30, Œª = 0.001 </td><td>  Œª = 0 </td><td>  Œª = 0.01 </td><td>  Œª = 1 </td><td>  Linear (Œª 0.001, œÉ = 0.001) </td><td>  Gaussian (Œª 0.1, œÉ = 0.1) </td><td>  Gaussian (Œª 0.001, œÉ = 0.001) </td></tr><tr><td>  96.41% </td><td>  97.88% </td><td>  98.16% </td><td>  97.51% </td><td>  97.88% </td><td>  98.16% </td><td>  96.48% </td><td>  97.14% </td><td>  <b>98.89%</b> </td></tr></tbody></table><br><br>  Here we need to clarify that in the process of preparing the system, the result was much worse (96.6% for SVM, for example), and debugging gave very tangible improvements.  We launched logistic regression, as the simplest and fastest on the real data of the entire sample, and revised the classification result.  I was surprised to find that the system was smarter than me, because in 30% of cases there was an error in the classification of messages by a person (as I wrote, I looked through ~ 5000 messages and, as it turned out, I made about 30-40 classification errors), and the system classified everything correctly.  During the debugging process, we corrected errors in the database and, accordingly, the accuracy of the method increased.  Moreover, we expanded the vector of characteristics if we saw that some interesting pattern is not processed by the system. <br><br>  We chose to use the SVM method, the characteristics on the total sample were as follows: <br><br><table><tbody><tr><td colspan="2" rowspan="2">  Message <br></td><td colspan="2">  Fact <br></td></tr><tr><td>  Correct <br></td><td>  Incorrect <br></td></tr><tr><td rowspan="2">  Forecast <br></td><td>  Correct <br></td><td>  4998 </td><td>  36 </td></tr><tr><td>  Incorrect <br></td><td>  eleven </td><td>  390 </td></tr></tbody></table><br><br>  Since the system has the property that the classes are skewed classes, I will also give the parameters for comparing the algorithm: <br><br><table><tbody><tr><th>  Precision </th><th>  Recall </th><th>  Accuracy </th></tr><tr><td>  99.28% </td><td>  99.78% </td><td>  99.13% </td></tr></tbody></table><br><br>  As a result, we decided to use SVM with the core of the Gaussian function to filter messages on the site.  It is more complicated than logistic regression, but it gives significantly better results, although it works more slowly. <br>  The complete message processing path is as follows: <br><ul><li>  The user sends a message to the site, Backbone JS creates a model on the client‚Äôs machine and sends a server API to the POST request; </li><li>  The server API, written in Django TastyPie, uses the Django model validation form; </li><li>  the first validator pulls up a user profile from the base and checks whether the user is marked as an intruder (no need to check further, 403 response) or he has already made payments through the site (no need to check further, just 201 answers); </li><li>  The svmPredict validator returns the result of the message text verification.  If the user has violated the rules, the corresponding flag is put in his profile, otherwise everything is fine and the user receives 201 responses from the API and the message is written to the database; </li><li>  if the message contained contacts or the user was an intruder, a 403 response is returned to the client, upon receipt of which Backbone renders a message to the user that he is breaking the rules.  The user is marked in the database as an offender; </li></ul><br>  So far it works well and we are happy about it. <br><br><h4>  findings </h4><br>  Understanding why Machine Leaning works better than the old system is very simple - it reveals the connections between the characteristics that were hidden in expert observation.  For example, we had a regular expression and several if-conditions for an event: if there is Cyrillic and Latin in the text, a few numbers and a message is short, then this is most likely an exchange of contacts.  Now we simply consider individual events, and the system itself understands the connection between them and makes the rules for us. <br><br>  Now we really use SVM in production to classify messages due to good accuracy rates.  We use it in a very simple way - we took the set of weights of the optimal model and use the svmPredict ported Python function mentioned above for classification.  In an ideal world, it would be necessary to make a teacher feedback system so that the administrator points out classification errors, and the system adjusts weights and improves.  But our project lives in the real world, where time = money and we still enjoy the fact that the number of appeals in support of incorrect blocking has fallen by 2 times.  It is also an interesting idea to balance the threshold of trust and, accordingly, errors of the first and second types, but so far everything suits us.  Measuring the number of ‚Äúmessage skip‚Äù errors is quite difficult.  I will only clarify that the conversion of applications into payments after the introduction of the system did not fall.  In other words, even if there are more passes, this does not affect the business.  But the eye passes also became less.  So this is a very good result for one weekend. <br><br>  If the topic is interesting to you, then I am ready to write about the collaborative filtering approach for recommendations of the tutor that we do.  If you need a code, also contact, - there is nothing secret there, and the article wanted to describe the pipeline more. <br><br>  PS: We are growing and in the future we are looking for 2 intelligent and responsible programmers in our Kiev office: an intern and a more experienced one for closing tasks that my two hands lack.  Our stack is Python / Django and JS / Backbone.  Many interesting tasks and best practices.  <a href="">Email dmytro@preply.com</a> </div><p>Source: <a href="https://habr.com/ru/post/216729/">https://habr.com/ru/post/216729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216713/index.html">Long Polling for Android</a></li>
<li><a href="../216715/index.html">Broccoli: first beta release</a></li>
<li><a href="../216719/index.html">As a single prosecution, Microsoft destroyed the trust of customers in the integrity of their data in the "cloud" services</a></li>
<li><a href="../216723/index.html">Mozilla changes the design of Firefox: try Firefox 29 beta</a></li>
<li><a href="../216725/index.html">Abstract Data Type Concept</a></li>
<li><a href="../216733/index.html">Dynamic trees</a></li>
<li><a href="../216735/index.html">Making the server with your own hands</a></li>
<li><a href="../216737/index.html">Interface with drag-and-drop: how not to confuse the user?</a></li>
<li><a href="../216739/index.html">SQLite database encryption in Qt</a></li>
<li><a href="../216741/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ101 (March 16 - 22, 2014)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visual Studio + Roslyn = configurator for 1C: Enterprise</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Roslyn allows you to convert a C # project into an open XML 1C: Enterprise configuration format. With the support of Visual Studio, the C # project is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visual Studio + Roslyn = configurator for 1C: Enterprise</h1><div class="post__text post__text-html js-mediator-article">  Roslyn allows you to convert a C # project into an open XML 1C: Enterprise configuration format.  With the support of Visual Studio, the C # project is automatically provided with Intellisense, interactive syntax and type checking, refactoring, advanced project search, and XmlDoc support.  The custom layout of project documents on disk and a more expressive and economical format makes the C # project at Visual Studio the best choice in versioning systems. <br><br>  It is clear that from the pure theory to the realization of all the features of 1C is very far.  The example given in the article has the following limitations.  The example supports several types of objects and several common properties.  Attributes of objects can be of the same type, although 1C allows a composite type.  Code translation in 1C code is not supported.  Implemented English-language names. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  XML upload configuration 1C </h2><br><br>  Starting from version 8.3, 1C learned how to upload / download configuration to / from the open XML format.  She does it in her original manner.  Unloading, for example, UT 11.0.7 takes about 6 minutes.  In this case, all configuration files will be dumped into a single directory.  Files will be about 10K (ten thousand), approximately 430 MB in size.  Such unloading is considered a great achievement in the field of openness, because previously the configuration was packed in a closed cf-format, which could only be recognized by specialized means: through a .Net-compatible cfProject or v8unpack. <br><br>  This is how one of the XML files Language.Russian.xml looks <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MetaDataObject</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.3/MDClasses"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.2/managed-application/core"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:cfg</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/enterprise/current-config"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:cmi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.2/managed-application/cmi"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:ent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/enterprise"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:lf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.2/managed-application/logform"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/ui/style"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:sys</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/ui/fonts/system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:v8</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/core"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:v8ui</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/ui"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:web</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/ui/colors/web"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:win</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.1/data/ui/colors/windows"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xen</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.3/xcf/enums"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xpr</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.3/xcf/predef"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xr</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://v8.1c.ru/8.3/xcf/readable"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xs</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Language</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">uuid</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7a630662-cf14-44d7-a01c-08006bb5bffa"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Synonym</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Comment</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LanguageCode</span></span></span><span class="hljs-tag">&gt;</span></span>ru<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LanguageCode</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Language</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">MetaDataObject</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><h2>  Replacing XML constructs with C # definitions </h2><br><br>  In the C # project, a class is responsible for each 1C object.  If this is a directory, then the class is inherited from the Catalog class, the enumeration is inherited from the Enum class.  Properties of objects and attributes are denoted by C # attributes. <br><br>  As a result, the XML-definition of the Russian language will take the form Russian.cs <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Elisy.<span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span>.DataAnnotations; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Elisy.<span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span>; namespace Test.Languages { [<span class="hljs-type"><span class="hljs-type">Uuid</span></span>("7a630662-cf14-44d7-a01c-08006bb5bffa")] [LanguageCode("ru")] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>  : <span class="hljs-keyword"><span class="hljs-keyword">Language</span></span> { } }</code> </pre><br><br>  References to objects are defined through the types of the CatalogRef &lt;&gt; type.  For example, so <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">Uuid(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"e140b824-c8f9-4155-87e6-d408e73ccc69"</span></span></span><span class="hljs-meta">)</span></span>] [Synonym(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CatalogRef&lt;&gt; ;</code> </pre><br><br>  Tabular part is defined as TabularSection &lt;line of tabular part&gt; <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">Uuid(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"bb2c088e-8fb3-4469-abd7-ba6b4104ae88"</span></span></span><span class="hljs-meta">)</span></span>] [GeneratedTypeAttribute(GeneratedTypeCategory.TabularSection, <span class="hljs-string"><span class="hljs-string">"8ef1c35e-8b55-488f-8e24-61f73d287458"</span></span>, <span class="hljs-string"><span class="hljs-string">"b300dc36-fe12-41d5-a462-792716a1e508"</span></span>)] [GeneratedTypeAttribute(GeneratedTypeCategory.TabularSectionRow, <span class="hljs-string"><span class="hljs-string">"92e3cead-a61b-474c-8515-56e4911339c7"</span></span>, <span class="hljs-string"><span class="hljs-string">"dfa007ab-4185-443f-8d11-f7468a7c195e"</span></span>)] [Synonym(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> TabularSection&lt;&gt; ;</code> </pre><br><br>  The events of the object module and the manager module are implemented as override methods.  May look like this: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BeforeWrite</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cancel</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span>  = Catalog.FindByDescription&lt;&gt;(Description, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsFolder &amp;&amp; IsNew() &amp;&amp; G.ValueIsFilled()) { G.Message(<span class="hljs-string"><span class="hljs-string">"    : "</span></span> + Description + <span class="hljs-string"><span class="hljs-string">".   "</span></span>); cancel = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsFolder) .GroupBy(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  ,    var  = .Find(Catalogs.., ""); if (G.ValueIsFilled()) .Delete(); }</span></span></code> </pre><br><br>  It should be noted that the methods are now not translated into 1C code.  It remains unclear what to do with the 1C preprocessor directives and whether multiple inheritance of the main 1C objects is necessary.  G-stands for global context, since calling functions in C # can only be done in conjunction with a class. <br><br><h2>  Compiling the CSPROJ project </h2><br><br>  In the last article <a href="http://habrahabr.ru/post/245453/">habrahabr.ru/post/245453 the</a> possibility of compiling a single CS file was described.  Often you need to compile the whole project - several files. <br><br>  Roslyn has built-in classes responsible for handling sln-solutions and csproj-projects from Visual Studio.  The problem is that they refer to the individual assemblies that come with MSBuild Tools.  The latest version of Roslyn refers to the MSBuild Tools 2014 builds, which can not be downloaded separately.  The installation is now part of the Visual Studio 14 CTP distribution. <br><br>  It turned out that the Microsoft. Build.dll v.4 is part of the .Net framework.  It has an implementation of reading a C # project file.  You can independently implement the joining of this assembly with Roslyn logic and get isolation from MSBuild Tools.  The implementation will be something like this: <br><br><pre> <code class="hljs pgsql">var project = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Project(projectFilePath); List&lt;string&gt; <span class="hljs-keyword"><span class="hljs-keyword">references</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;string&gt;(); List&lt;SyntaxTree&gt; trees = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;SyntaxTree&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(var item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> project.Items) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.ItemType == "Reference") { <span class="hljs-keyword"><span class="hljs-keyword">references</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(item.EvaluatedInclude); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.ItemType == "Compile") { string filePathToCompile = <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IO.Path.Combine(project.DirectoryPath, item.EvaluatedInclude); var <span class="hljs-type"><span class="hljs-type">text</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IO.File.ReadAllText(filePathToCompile); trees.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(CSharpSyntaxTree.ParseText(<span class="hljs-type"><span class="hljs-type">text</span></span>)); } } var assemblyName = project.GetProperty("AssemblyName").EvaluatedValue; var compilation = CSharpCompilation.<span class="hljs-keyword"><span class="hljs-keyword">Create</span></span>(assemblyName) .WithOptions(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CSharpCompilationOptions(OutputKind.DynamicallyLinkedLibrary)) .AddReferences(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MetadataFileReference(typeof(Elisy.<span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span>).Assembly.<span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>)) .AddReferences(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MetadataFileReference(typeof(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>).Assembly.<span class="hljs-keyword"><span class="hljs-keyword">Location</span></span>)) .AddSyntaxTrees(trees.ToArray());</code> </pre><br><br>  If you need to implement more project properties, they can be spied on <a href="http://source.roslyn.codeplex.com/">in the Roslyn project.</a> <br><br><h2>  Getting XML files compatible with 1C: Enterprise </h2><br><br>  When generating XML files, the work is mostly done with types, their members and attributes.  It turned out that Roslyn CSharpCompilation objects are very limited in funds.  Through them, you cannot reach the System.Type types, you cannot get a list of attributes with regard to inheritance.  Therefore, for a full analysis, it is better to create an assembly using Roslyn and load it for Reflection analysis: <br><br><pre> <code class="hljs cs">MemoryStream ms = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MemoryStream(); compilation.Emit(ms); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> assembly = Assembly.Load(ms.ToArray());</code> </pre><br><br>  It is strange that it was not possible to load the assembly as ReflectionOnlyLoad due to the error "missing api-ms-win-core-l1-2-0.dll".  The error occurred when trying to read the types included in the assembly.  However, the build normally loads and runs through the normal Load call. <br><br>  Generation of XML files is reduced to enumeration of all types inherited from Configuration and basic objects, to enumeration of properties of objects and attributes. <br><br>  XML is built using LINQ XML tools, for example, like this: <br><br><pre> <code class="hljs pgsql">XElement configurationElement = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XElement(Compiler.MdClasses + "Language", <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>.GetUuidXml(), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XElement(Compiler.MdClasses + "Properties", <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XElement(Compiler.MdClasses + "Name", <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>.Name), <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>.GetSynonimXml(), <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>.GetCommentXml(), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XElement(Compiler.MdClasses + "LanguageCode", <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>.GetAttribute().<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span>) ) ); var document = CreateMetadataObjectDocument(configurationElement); document.Save(<span class="hljs-type"><span class="hljs-type">Path</span></span>.Combine(outFolder, String.Format("Language.{0}.xml", <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>.Name)));</code> </pre><br><br>  It was possible to find out that 1C is loyal to the absence of many tags, replacing them with default values.  Therefore, empty values ‚Äã‚Äãin the XML files can be skipped, thereby reducing the size of the disk.  Savings can be quite significant - up to 40 percent.  Using cs-files instead of XML gives even greater space savings - up to 60%. <br><br><h2>  findings </h2><br><br>  Using Visual Studio, it is theoretically possible to create an alternative 1C configurator.  For further advancement of the idea, it is necessary to accept agreements regarding all basic objects, storage of forms, translation of the C # language into 1C, 1C preprocessor directives, conventional layouts and SKD layouts; <br><br>  The current XML upload from 1C is inconvenient for analysis, because all the files are collected in a single directory; <br><br>  The current XML unloading of 1C is redundant, and its size can be reduced without losing data up to 40%, and storing source codes in the form of C # will save up to 60 percent of disk space; <br><br>  Reading csproj projects and Visual Studio sln solutions with Roslyn embedded tools is not easy to implement due to the complex availability of MSBuild Tools 2014. Now you can compensate with the .Net Framework 4 classes and with your own Roslyn initialization. <br><br>  <a href="">Elisy.Configuration.zip (2.19 mb)</a> </div><p>Source: <a href="https://habr.com/ru/post/247659/">https://habr.com/ru/post/247659/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247643/index.html">We study the free application Message Flow Monitoring</a></li>
<li><a href="../247647/index.html">Java logging. Hello world</a></li>
<li><a href="../247649/index.html">Installing OpenSolaris snv_134b SPARC on SunFire v100</a></li>
<li><a href="../247651/index.html">The story of another game on Libgdx + Box2d</a></li>
<li><a href="../247657/index.html">About programming on 1C Enterprise 8</a></li>
<li><a href="../247661/index.html">Using AWS Lambda to create an archive of specific files with AWS S3</a></li>
<li><a href="../247663/index.html">We program Arduino on pure C</a></li>
<li><a href="../247665/index.html">A drone based on the Raspberry Pi. Part 1</a></li>
<li><a href="../247667/index.html">Guide to the Car Tutorial (Unity3d) part 1 of 3</a></li>
<li><a href="../247669/index.html">Fast Data Recipe Based on Big Data Solution</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
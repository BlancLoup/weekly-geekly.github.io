<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing Debian Wheezy on Buffalo Linkstation Pro</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's start with the fact that I needed nasik. And I bought myself even though it was used, but with a gigabit and two USB ports. I will not tell you ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing Debian Wheezy on Buffalo Linkstation Pro</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/821/9db/be6/8219dbbe60547fbf06cbce56a7afa0f5.jpg"><br><br>  Let's start with the fact that I needed nasik.  And I bought myself even though it was used, but with a gigabit and two USB ports.  I will not tell you about the standard firmware of nasov, of course, apart from synology, and judging by the subject, it is clear that we will change it.  In general, the NAS model was originally chosen with the ability to install something else, native ‚Äî debian for example.  After Gents, Debian is of course a very conservative distibtive.  Therefore, I am sure that the tango with this nasikom is not over yet.  Expect gently soon :) In the meantime, let's take a look at debian.  The nature of this nasika still the same.  2 weeks spent (usually after robots 3-4 hours).  Not only did the console cable not yet make, it was difficult to understand.  And now as a native. <br>  I must say that there are bugs in the wedge install that prevent you from installing a working system.  Here I will give you all the details.  If you decided to%% username% please your network drive with a fresh kernel, then you are under the cat! <a name="habracut"></a><br><br>  Let's start with the technical specifications.  Of course, in 2013, this is already a reality, <s>and my router has a steeper percentage, and more opera</s> .  But it copes with its task perfectly.  And it pleases. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Technical characteristics of this device:</b> <br>  Buffalo Linkstation Pro V1 <br>  Processor: Marvell 88F5182 <br>  Technology: System on Chip (SOC) <br>  Technology: ARM926EJ-Sid (wb) [41069260] revision 0 (ARMv5TEJ) <br>  Frequency 400Mhz <br>  Bus: = 200Mhz <br>  RAM: 128MB 2 NANYA NT5TU32M16AG or Elpida EDE5116AF DDR2 SDRAM <br>  Flash Memory: SST 256K CMOS Multi-Purpose <br>  NIC: Marvell 88E1111 Gigabit Ethernet Transceiver ("Alaska" series). <br>  USB: 2 - USB 2.0 Max: 480 Mbps (HS Mode), Max: 12 Mbps (FS Mode) <br>  SATA Controller: Marvell Serial ATA Adapter <br><br><h5>  besides SATA inside there is still a place for eSATA wiring, thanks for the present, Buffalo! </h5><br><br><h5>  For installation, I used the Serial cable to ... yes, it‚Äôs clear what the console cable is for.  The main thing is that you do not need to have a Serial connection.  After all, not everyone wants <s>(knows how to)</s> unpack the board. </h5><br><br><h4>  <b>Let's start</b> </h4><br><br>  <b>To install you need:</b> <br>  TFTP server (I used tftpd32, you can download it from tftpd32.jounin.net) <br>  The uImage.buffalo installation files are the kernel, and the initrd.buffalo ramdisk (you can download http.us.debian.org/debian/dists/wheezy/main/installer-armel/current/images/orion5x/network-console/buffalo/ lspro). <br>  Only these two files.  we will not need config-debian. <br>  It is also desirable router, and configure it with a subnet to 192.168.11.x <br>  Register the address 192.168.11.1 to the computer from which we will do all the operations. <br>  Or if you are on the laptop, and the router is far away, and you are too lazy just like me, you can safely set the% username% subnet on the router, or just change the mask to / 16 (255.255.0.0) and bridan the network card of the laptop with Wi-Fi, set on the bridge, the desired address, and connect the patchcord to the linkstation. <br><br><h5>  In addition, a NAS with a reboot in tftp will produce a ‚Äúsound cardiogram‚Äù, this is normal.  By briefly pressing the POWER button, you can turn off the sound, if that :) </h5><br><br>  <b>I will not describe the installation of debian (I took a video screen).</b>  <b>Here are the main nuances:</b> <br>  If possible, copy all the data from your NAS.  To avoid data loss. <br>  When setting up the disk layout, you can safely use Guided, that is, to give the installer the opportunity to do the% username% for you yourself.  But then you will need to change a couple of values: change the formatting of / boot and / to ext3 and remove the boot-flag from the / boot partition <br><br><h5>  Install debian on a USB drive fails.  After all, the USB controller is initialized only after the system is booted. </h5><br><br>  <b>To boot from tftp you need to do in the correct sequence:</b> <br>  1. Turn off the NAS completely.  And then pull out the power cord for 3-4 seconds, and connect the power naturally. <br>  2. Press and hold the RESET button on the back of the device and press the POWER button.  Must start playing the melody.  At this moment you have an already enabled and configured tftp server.  (port 69, if you forgot. in the tftp root only 2 uImage.buffalo and initrd.buffalo files downloaded from the debian repository). <br><br><h5>  The disk layout should be msdos.  The first ext3 partition (where only the kernel and ramdisk will be).  Section without boot flag.  For uBoot, the boot flag is not needed.  It was also encountered that you can install on the ext2 / boot partition, but did not try. </h5><br><br>  <b>Recommended partition table:</b> <br>  1. primary, size 128M, mount / boot, ext3 <br>  2. primary, size 7G, mount /, ext3 <br>  3. logical, size 384M, mount swap, swap <br>  4. logical, size -inf, mount / home, ext3 | 4 <br><br>  <b>As I already mentioned, there is a bug in the installer that does not install three packages:</b> <br>  uboot-envtools - responsible for controlling the memory of uBoot. <br>  uboot-mkimage - creates a uBoot compatible kernel image and ramdisk. <br>  flash-kernel is an add-in for automatically creating a kernel and ramdisk, using uboot-mkimage, then writing it to the / boot partition, while backing up old kernels. <br>  You will need to install them yourself before the item <b>make the system bootable.</b> <br><br><img src="https://habrastorage.org/storage2/d11/b0c/910/d11b0c91018606cc8ea49970210397e8.jpg"><br><br>  To install the necessary packages, open an additional terminal window, go to the shell, mount the proc and dev.  chroot to target and there is already apt-get what you need. <br><br>  <i>mount -t proc none / target / proc</i> <i><br></i>  <i>mount -o bind / dev / target / dev</i> <i><br></i>  <i>chroot / target / bin / bash</i> <i><br></i>  <i>apt-get install uboot-envtools uboot-mkimage flash-kernel</i> <br><br>  After successful installation of the packages, press <b>make the system bootable</b> and complete the installation. <br><br><h5>  If you want to access from the system in the flash uBoot and you already have uboot-envtools installed - run the following command: <br>  echo ‚Äú/ dev / mtd0 0x3F000 0x1000 0x1000‚Äù&gt; /etc/fw_env.conf </h5><br><br>  You can extract the kernel and ramdisk (for recovery) from the firmware files. <br>  You can load on tftp, and flash the nasik with a stock firmware, in case you want to return everything back. <br>  buffalotech.com/support-and-downloads/download/LSPro_103.zip <br><br>  A useful utility written in Java for stock (original) firmware. <br>  need JRE. <br>  (reference <a href="http://sourceforge.net/projects/linkstationwiki/files/acp_commander/">sourceforge.net/projects/linkstationwiki/files/acp_commander</a> ) <br><br><div class="spoiler">  <b class="spoiler_title">java -jar acp_commander.jar</b> <div class="spoiler_text">  ACP_commander out of the linkstationwiki.net project. <br>  Used to send ACP-commands to Buffalo linkstation¬Æ LS-PRO. <br><br>  WARNING: This is an experimental software that might your linkstation! <br><br>  Version 0.4.0 (beta) <br><br>  Usage: acp_commander [options] -t target <br><br>  options are: <br>  -t target ... IP or network name of the Linkstation. <br>  -m MAC ... define targets mac address set in the ACP package. <br>  -na ... no authorization, skip the ACP_AUTH packet. <br>  -ba ... use bug / bufferoverflow on LS to bypass usuall password <br>  authentication.  Standard until acp_commander 0.4. <br>  -pw passwd  your LS admin password. <br>  -i ID ... define a connection identifier, standard: random value. <br>  -p port ... define alternative target port, default = 22936 <br>  -b localIP ... bind to local address. <br><br>  -f ... find linkstation (s). <br>  -o ... open the telnetd 'and' passwd -d root '. <br>  -c cmd ... sends the shell command cmd to the linkstation. <br>  -s ... interactive shell. <br>  -cb ... clearoot, output of df follows for control of success. <br>  -ip newIP ... change IP to newIP (basic support). <br>  -save ... save configuration. <br>  -load ... load configuration. <br>  -blink ... blink LED's and play some tones. <br>  -gui nr ... set WEB GUI language 0 = Jap, 1 = Eng, 2 = Ger <br>  -addons ... install addons.tar from local or linkstationwiki. <br>  -diag ... run some diagnostics on LS settings (lang, backup). <br>  -emmode ... Linkstation reboots next into EM-mode. <br>  -normmode ... Linkstation reboots next into normal mode. <br>  -reboot ... reboot linkstation. <br>  -shutdown ... shut Linkstation down. <br><br>  -d1 |  -d2 ... set debug level, generate additional output <br>  -q ... quiet, surpress header, doesn‚Äôt work with -h or -v <br>  -h |  -v ... extended help <br>  -u ... usage (this output) <br><br>  *) this address is not the MAC address <br>  the ACP packet.  ACP packets if they <br>  carry the correct (its) MAC address or FF: FF: FF: FF: FF: FF <br><br>  At nas-central.org (linkstationwiki.net), which is <br>  not related with Buffalo¬Æ in any way. <br><br>  Experimental software, it might be your linkstation! <br><br>  code by Georg, readme here by mindbender <br></div></div><br><br>  <b>Video tutorial, as promised.</b>  <b>I recommend to watch the video before installation.</b> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/A1KzsCvzy1I%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255&amp;usg=ALkJrhiEEm3bWgsa6feSqp2U6z3Tv2VP3g" frameborder="0" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">Stock fw_printenv just in case.</b> <div class="spoiler_text"> baudrate = 115200 <br>  loads_echo = 0 <br>  ipaddr = 192.168.11.150 <br>  rootpath = / nfs / arm <br>  cpuName = 926 <br>  CASset = min <br>  MALLOC_len = 4 <br>  bootargs_end = ::: DB88FXX81: eth0: none <br>  ethact = egiga0 <br>  ethaddr = 00: 68: 61: 62: 72: 61 is your poppy address.  it is desirable not to change. <br>  buffalo_minor_ver = BOOT_MINOR_VER = 1.00 <br>  ethprime = egiga0 <br>  usb0Mode = host <br>  usb1Mode = host <br>  bootargs = console = ttyS0,115200 root = / dev / sda2 rw initrd = 0x00800040,15M panic = 5 BOOTVER = 1.10 <br>  serverip = 192.168.11.1 <br>  buffalo_ver = BOOTVER = 1.01 <br>  build_time = 10: 35: 38 <br>  initrd = initrd.buffalo <br>  kernel = uImage.buffalo <br>  bootargs_base = console = ttyS0,115200 <br>  bootargs_root = root = / dev / sda2 rw initrd = 0x00800040,15M panic = 5 <br>  def_tftp = tftp 0x00100000 $ (kernel); tftp 0x00800000 $ (initrd); setenv bootargs $ (bootargs_base) $ (bootargs_root) $ (buffalo_ver); bootm 0x00100000 0x00800000 <br>  stdin = serial <br>  stdout = serial <br>  stderr = serial <br>  enaMonExt = no <br>  enaFlashBuf = yes <br>  enaCpuStream = no <br>  bootdelay = 3 <br>  disaMvPnp = no <br>  overEthAddr = no <br>  force_tftp = 1 <br>  bootcmd = ide reset;  ext2load ide 1: 1 0x00100000 / $ (kernel); ext2load ide 1: 1 0x00800000 / $ (initrd); setenv bootargs $ (bootargs_base) $ (bootargs_root) $ (buffalo_ver); bootm 0x00100000 0x00800000 <br><br>  Environment size: 1010/4092 bytes <br>  Note: if you stop uboot via serial or netconsole, and select tftp booting, bootcmd will assume a different value: <br>  bootcmd = tftp 0x00100000 $ (kernel); tftp 0x00800000 $ (initrd); setenv bootargs $ (bootargs_base) $ (bootargs_root) $ (buffalo_ver); bootm 0x00100000 0x00800000 <br></div></div><br><br><h5>  If you disassembled your nasik and accidentally put a handkerchief on an aluminum case, and then turn it on.  And now he no longer starts, do not worry - most likely the fuses are blown.  Try using a multimeter to check the fuse near the power inlet (black ones).  One fuse for + 12V another for + 5V.  Most likely they burned down.  In order not to look for replacement parts for a long time, a hint: almost any PCI&gt; USB card.  They have such fuse.  :) </h5><br><br><img src="https://habrastorage.org/storage2/5fb/115/79b/5fb11579b732e14e5d0ad53e57785b9d.jpg"><br><br>  <b>Immediately answer some questions:</b> <br>  1. Yes, you can put owncloud, but mother will be lagging dear.  400 MHz processor. <br>  2. Yes, Nasik sees 2TB hard drives.  and he has not yet unsoldered eSATA port, which is not so difficult to put himself. <br>  3. Yes, it is very quiet and cold.  On debian there is even a tuzla to control the fan, the LED and other things. <br>  4. Yes, it can also be used as an alarm clock.  he has a speaker.  loud by the way. <br>  5. According to NFS, the read / write speed is up to 42/38 Mb / s (samba hasn‚Äôt been lifted yet). <br>  6. Yes, percents can be overclocked.  but why? <br>  7. Price?  Took for 26 euros on ibey with delivery and hard disk 250 GB. <br><br>  <b>Thank you for your attention.</b>  <b>I will be glad to answer all the questions.</b> </div><p>Source: <a href="https://habr.com/ru/post/181486/">https://habr.com/ru/post/181486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181464/index.html">Django 1.6 alpha 1</a></li>
<li><a href="../181472/index.html">How to build a cloud infrastructure from a designer</a></li>
<li><a href="../181474/index.html">Semantic Forms for MediaWiki</a></li>
<li><a href="../181476/index.html">The cost of upgrading the satellite system has increased 2.5 times</a></li>
<li><a href="../181478/index.html">There is a set of future leaders of Computer Science in AU and CSC</a></li>
<li><a href="../181488/index.html">Optimum parallelization of unit tests or 17,000 tests in 4 minutes</a></li>
<li><a href="../181490/index.html">Investigation of the Slovak spam campaign</a></li>
<li><a href="../181494/index.html">Overview of the new Violin - flash storage system operating at a speed close to DRAM</a></li>
<li><a href="../181496/index.html">Overview of the smartphone on Android, which works for a week! Highscreen boost</a></li>
<li><a href="../181498/index.html">How we studied project management in the mountains</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
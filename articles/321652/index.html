<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UNIX-like systems contain a bunch of crutches. The collapse of the "UNIX philosophy"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD from 2017-03-04: someone completed the English translation . Discussion on Hacker News . 

 In the first part of the article I will list a bunch o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UNIX-like systems contain a bunch of crutches. The collapse of the "UNIX philosophy"</h1><div class="post__text post__text-html js-mediator-article">  <b>UPD</b> from 2017-03-04: someone completed the <a href="https://kukuruku.co/post/the-collapse-of-the-unix-philosophy">English translation</a> .  <a href="https://news.ycombinator.com/item%3Fid%3D13777077">Discussion on Hacker News</a> . <br><br>  In the first part of the article I will list a bunch of UNIX crutches, and generally various shortcomings.  In the second - about the "UNIX philosophy".  The article was written hastily, I don‚Äôt want to further ‚Äúpolish‚Äù, say thank you for writing.  Therefore, I cite many facts without references. <br><br>  Crutches in UNIX began to emerge from the moment UNIX appeared, and this was even before the appearance of not only Windows, but even Microsoft DOS (it seems, I‚Äôm too lazy to check, check it myself).  If you are too lazy to read, at least look through all the items, you will find something interesting.  This is not a complete list, these are just the shoals that I wanted to mention. <br><a name="habracut"></a><br><ul><li>  At the very beginning, make was a program that one person wrote for himself and several of his acquaintances.  Then, without thinking twice, he made the commands accept the lines that start with Tab.  That is, Tab was perceived differently from the space, which is extremely ugly and atypical neither for UNIX, nor beyond.  He did this because he didn‚Äôt think that make someone else would use it other than this small group.  Then the thought came up that make is a good thing and it would be nice to include it in the standard UNIX bundle.  And then in <i>order not to break the already written makefiles, that is, those written by these ten people, he did not change anything</i> .  Well, that's how we live ... Because of those ten, we all suffer. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  Almost at the very beginning there was no / usr folder on UNIX.  All binaries were located in / bin and / sbin.  But then the whole infa ceased to fit on the disk that was at the disposal of the authors of UNIX (Thompson, Ritchie).  Therefore, they got another disk, created the folder / usr, and in it - another bin and another sbin.  And mounted a new disk in / usr.  From there it went.  This is how the ‚Äúsecond hierarchy‚Äù / usr appeared, and then at some point another ‚Äúthird hierarchy‚Äù / usr / local, and then also / opt.  As the narrator writes this story: ‚ÄúI won‚Äôt be surprised if someday / opt / local appears‚Äù.  <b>UPD</b> from 2017-02-12: I found the link where I got <a href="http://lists.busybox.net/pipermail/busybox/2010-December/074114.html">this story</a> .  Read, there is a more accurate version of what happened. <br><br></li><li>  sbin originally meant "static bin", not "superuser bin", as one might think.  And contained sbin static binaries.  But then sbin began to contain dynamic binaries, its name lost its meaning. <br><br></li><li>  Windows is often blamed for the registry and reports that the approach of UNIX-like systems (a bunch of configs) is supposedly better.  And by the way, a feature appeared once in ext4 (whether it is a bug, a controversial issue), due to which, when you turn off the computer sharply, Gnome lost all its configs in the user's working folder.  And the developer of this ext4 said in the discussion of the report bug that Gnome had to use something like a registry to store information. <br><br>  <b>UPD</b> from 2017-02-12: sources: <a href="https://lwn.net/Articles/322823">one</a> and <a href="https://bugs.launchpad.net/ubuntu/%2Bsource/linux/%2Bbug/317781">two</a> .  The name of the unsubscribe maintainer ext4: Theodore Ts'o.  Here are his words: <br><br><blockquote>  If you really need to use fsync or fdatasync.  If you are fsync (), fdatasync () is much less heavyweight.  You can do that through a binary database, that is grown in chunks, and rarely truncated. <br><br>  I‚Äôm using the GNOME desktop (I‚Äôm not a very great desktop panel), and "find. [A-zA-Z] * -mtime 0" doesn‚Äôt show a large number of files.  There is no doubt that it has been the case.  If you‚Äôre complainant of what you‚Äôre getting  As I said, if it‚Äôs a good number of files, it‚Äôs not a bad thing.  (Since it will cost it up, since it will cost performance.) <br></blockquote><br>
      ,    UNIX (  /etc/passwd),     (!) , , ‚ü¶<code>ls -l</code>‚üß,     .             ‚ü¶<code>ls -l</code>‚üß!       .  .    .  ,         .<br>
<br>
</li>
<li><blockquote>Two famous people, one from MIT and another from Berkeley (but working on Unix) once met to discuss operating system issues. The person from MIT was knowledgeable about ITS (the MIT AI Lab operating system) and had been reading the Unix sources. He was interested in how Unix solved the PC loser-ing problem. The PC loser-ing problem occurs when a user program invokes a system routine to perform a lengthy operation that might have significant state, such as IO buffers. If an interrupt occurs during the operation, the state of the user program must be saved. Because the invocation of the system routine is usually a single instruction, the PC of the user program does not adequately capture the state of the process. The system routine must either back out or press forward. The right thing is to back out and restore the user program PC to the instruction that invoked the system routine so that resumption of the user program after the interrupt, for example, re-enters the system routine. It is called ¬´PC loser-ing¬ª because the PC is being coerced into ¬´loser mode,¬ª where ¬´loser¬ª is the affectionate name for ¬´user¬ª at MIT.<br>
<br>
The MIT guy did not see any code that handled this case and asked the New Jersey guy how the problem was handled. The New Jersey guy said that the Unix folks were aware of the problem, but the solution was for the system routine to always finish, but sometimes an error code would be returned that signaled that the system routine had failed to complete its action. A correct user program, then, had to check the error code to determine whether to simply try the system routine again. The MIT guy did not like this solution because it was not the right thing.<br>
<br>
 ‚Äî <a href="http://doc.cat-v.org/programming/worse_is_better">The Rise of ¬´Worse is Better¬ª By Richard Gabriel</a><br>
</blockquote><br>
    ,     UNIX  UNIX        ,      ,      .  ,    Ctrl-C (. .    )   ,        Ctrl-C,    ,       ,     Ctrl-C,   ,       EINTR.   ,      EINTR .     userspace .    . ,    -.      userspace ,     .          .   : ¬´  ,    , ,     ¬ª.<br>
<br>
 ‚Äî .   UNIX-     ,    SA_RESTART.    ,    ,    .   ,    ,  SA_RESTART     !  ,  GNU/Linux select, poll, nanosleep  .           SA_RESTART!<br>
<br>
</li>
<li>,  ,      UNIX,     . ,  -,   cp   ,   copy,   UNIX    ,     .    cp  ,  copy. <b>UPD</b>  2017-02-12:    ,    - ,       cp  copy,   .  , ,  <a href="http://catalogue.pearsoned.co.uk/samplechapter/0130213446.pdf"> </a>.<br>
<br>
<blockquote>Commands ‚Äî Are These Real Words?<br>
<br>
The basic AIX commands (and all UNIX system commands) are, for the most<br>
part, very short, cryptic, two-letter command names. Imagine back years ago,<br>
when computers had only very slow teletype keyboards and paper ‚Äúdisplays.‚Äù<br>
(Some of us aren‚Äôt imagining, we‚Äôre remembering!) Imagine also, people who<br>
didn‚Äôt like typing long commands because there was such a long delay between<br>
commands and the computer response. If there were any mistakes, the user had<br>
to retype the whole thing (especially aggravating for folks that type with only<br>
two fingers!).<br>
<br>
Also, some UNIX commands came from university students and researchers who<br>
weren‚Äôt bound by usability standards (no rules, merely peer pressure). They<br>
could write a very useful, clever command and name it anything‚Äîtheir own initials,<br>
for example (awk by Aho, Weinberger, and Kernighan), or an acronym<br>
(yacc, Yet Another Compiler-Compiler).<br>
</blockquote><br>
</li>
<li>,   UNIX ‚Äî   . ,  grep    g/re/p    ed. (  cat ‚Äî  concatenation,  ,      :)    : vmlinuz ‚Äî gZipped LINUx with Virtual Memory support).<br>
<br>
</li>
<li>printf <b></b>             .  , ?    ,  printf,    UNIX  ,      ,    . printf       .      H2O    ,        .<br>
<br>
<b>UPD</b>  2017-02-12: <a href="http://blog.kazuhooku.com/2014/10/announcing-qrintf-and-qrintf-gcc.html"></a>.<br>
<br>
</li>
<li>  ,  UNIX (   ) ,      UNIX,  ,     creat (sic!)  create. <b>UPD</b>  2017-02-12:  ,  <a href="https://en.wikiquote.org/wiki/Ken_Thompson"></a>. No comments. ,            UNIX   Plan 9,    UNIX.       create :)   :)<br>
<br>
</li>
<li>  :<br>
<br>
<blockquote>A child which dies but is never waited for is not really gone in that it still consumes disk swap and system table space. This can make it impossible to create new processes. The bug can be noticed whenseveral &amp; separators are given to the shell not followed by ancommand without an ampersand. Ordinarily things clean themselves upwhen an ordinary command is typed, but it is possible to get into asituation in which no commands are accepted, so no waits are done;the system is then hung.The fix, probably, is to have a new kind of fork which creates aprocess for which no wait is necessary (or possible); also to limit the number of active or inactive descendants allowed to a process.<br>
<br>
 ‚Äî <a href="http://cm.bell-labs.com/cm/cs/who/dmr/man22.pdf"></a><br>
</blockquote><br>
      UNIX.    -  .       .  ,         . . .   GNU/Linux    -   .      .  kill'   .   -  : ¬´It's for design¬ª.<br>
<br>
</li>
<li>      C.   C    UNIX,   UNIX,    C . ,  C  ,  ,       . ,   ,  ,     ,  ‚ü¶<code>4["string"]</code>‚üß,  ‚ü¶<code>sizeof ('a') != sizeof (char)</code>‚üß ( C,   C++!),  ‚ü¶<code>i++ + ++i</code>‚üß,  ‚ü¶<code>while (*p++ = *q++);</code>‚üß (  ,   )      .<br>
<br>
   .  C         .          .        ! <a href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1969.htm">      C</a>.          .   ,    .  : 2015.     2015-     !<br>
<br>
      ,      (    autotools,      ,    cmake,   ,    ),   ,   npm (js)  cargo (rust),  portability library,                <i>  C</i>,                 ,        C   ,      C,         C (      ) , ,     <i>user community</i>.     <i>c-language.org</i>  ,  -     . , , . (   <i>cpp-language.org</i> ,  :))    .        ,  C  C++.    Haskell   .   Rust.<br>
<br>
 Rust,   , ,  ,     ,   C.   ,     ,        (, cargo ‚Äî       ).           ,  -  <b>*GIT*</b>,           <b>*GITHUB*</b>.      ,     <b>*MARKDOWN*</b>.   ,    <b>*SEMVER*</b>. , <b>*GIT*</b>, <b>*GITHUB*</b>, <b>*MARKDOWN*</b>, <b>*SEMVER*</b>,   <b>*BUZZWORDS*</b>, <b>*BUZZWORDS*</b>    <b>*HIPSTERS' BUZZWORDS*</b>.     .       ,         .       .   ,  Rust ‚Äî      ,   -  javascript.   ,   Rust   .     .     ,   -,    ,   , ,  ? .<br>
<br>
 ,     ,      C/C++.   ,     . : ¬´  C/C++  ?¬ª     .<br>
<br>
 ,    . , ,    signal   ,       C: ‚ü¶<code>void (*signal(int sig, void (*func)(int)))(int);</code>‚üß    .<br>
<br>
</li>
<li><a href="http://catern.com/posts/terminal_quirks.html">  UNIX ‚Äî  legacy</a>.<br>
<br>
</li>
<li>     UNIX (ext2  .)      .      ,   .          ,           ,  .   NTFS   .<br>
<br>
</li>
<li>UNIX shell  PHP! , ,   ,  ?    PHP.   UNIX shell   :)    ,     ,       .      (    )   .    shell, , legacy,   , ,   , ,     shell' (   UNIX)   .<br>
<br>
<ul>
<li>  .      foo     ‚ü¶<code>\</code>‚üß?   : ‚ü¶<code>find foo -name '\\'</code>‚üß.   : ‚ü¶<code>find foo -name \\\\</code>‚üß.      .   ,    UNIX shell,      ,       (, ,     ,   ).      ,   UNIX shell  backslash expanding,  find   .<br>
<br>
</li>
<li> touch'     foo (  )?   ,    : ‚ü¶<code>find foo | while read A; do touch $A; done</code>‚üß. ,   .        5 ,      (     ):<br>
<br>
<ul>
<li>    ,     ‚ü¶<code>read A</code>‚üß,  ‚ü¶<code>read -r A</code>‚üß.</li>
<li>    ,     ‚ü¶<code>touch $A</code>‚üß,  ‚ü¶<code>touch "$A"</code>‚üß.</li>
<li>      ,     ,     ‚ü¶<code>read -r A</code>‚üß,  ‚ü¶<code>IFS="" read -r A</code>‚üß.</li>
<li>     ,   ‚ü¶<code>find foo</code>‚üß   ‚ü¶<code>find foo -print0</code>‚üß,   ‚ü¶<code>IFS="" read -r A</code>‚üß   ‚ü¶<code>IFS="" read -rd "" A</code>‚üß (    ).</li>
<li>     ,   ‚ü¶<code>touch "$A"</code>‚üß   ‚ü¶<code>touch -- "$A"</code>‚üß.</li>
</ul><br>
   : ‚ü¶<code>find foo -print0 | while IFS="" read -rd "" A; do touch -- "$A"; done</code>‚üß. , ?   , ,  ,  POSIX   (     ),  touch   ‚ü¶<code>--</code>‚üß.     ,      ,      (     )     ‚ü¶<code>./</code>‚üß.   ,   configure,  autoconf'    ?    configure     ,     shell'. (           .      -exec  xargs,       ). (, ,  ,      foo,         ).<br>
<br>
</li>
<li>  A   ,      a@a.   ?   : ‚ü¶<code>ssh a@a rm -- "$A"</code>‚üß? (   ,    ,          .)    ! ssh ‚Äî    chroot,  setsid,  nohup,  sudo   -  ,   <i>exec-</i> (. .       execve). ssh (  su)  <i>shell-</i>, . .    shell' ( exec-  shell- ‚Äî ). ssh     ,         shell'. ,   : ‚ü¶<code>ssh a@a 'rm -- "$A"'</code>‚üß? ,      A   .    ,     ssh  . , : ‚ü¶<code>ssh a@a "rm -- '$A'"</code>‚üß? ,   ,      .  ,    ,   : ‚ü¶<code>ssh a@a "rm -- $(printf '%q\n' "$A")"</code>‚üß. , ?<br>
<br>
</li>
<li>    a@a,   ‚Äî  b@b,   ‚Äî  c@c,   ‚Äî  d@d,      /foo? ,  :<br>
<br>
<pre><code>ssh a@a "ssh b@b \"ssh c@c \\\"ssh d@d \\\\\\\"rm /foo\\\\\\\"\\\"\""
</code></pre><br>
  , ? ,   ,      ,    :<br>
<br>
<pre><code>ssh a@a 'ssh b@b "ssh c@c '\''ssh d@d \"rm /foo\"'\''"'
</code></pre><br>
  ,    shell'  Lisp,    ssh        ( ,  UNIX  !),    AST (abstract syntax tree),       :<br>
<br>
<pre><code>(ssh "a@a" '(ssh "b@b" '(ssh "c@c" '(ssh "d@d" '(rm "foo")))))
</code></pre><br>
¬´? ? Lisp?   Lisp?¬ª , ? , <a href="http://paulgraham.com/avg.html"></a>.    .     .<br>
<br>
</li>
<li>   .      A.    a@a,   ‚Äî  b@b,   c@c, d@d   ,    A.        :) (   ,    :) , , ,  ).<br>
<br>
</li>
<li>echo   ,     .       ,    ,  ¬´Hello, world!¬ª,  ( . <b>UPD</b>  2017-08-01).       (,   A) : ‚ü¶<code>printf '%s\n' "$A"</code>‚üß.<br>
<br>
</li>
<li>,   stdout  stderr  cmd  /dev/null. :        ,   ‚Äî ?<br>
<br>
<pre><code>cmd &gt; /dev/null 2&gt;&amp;1
cmd 2&gt;&amp;1 &gt; /dev/null
{ cmd &gt; /dev/null; } 2&gt;&amp;1
{ cmd 2&gt;&amp;1; } &gt; /dev/null
( cmd &gt; /dev/null ) 2&gt;&amp;1
( cmd 2&gt;&amp;1 ) &gt; /dev/null
</code></pre><br>
,   ‚Äî 1-, 4-  6- , 2-, 3-  5- ‚Äî  . -,        :)</li>
</ul><br>
</li>
<li>,       <a href="https://geektimes.ru/post/285682">  </a>.  ,           Microsoft.       .     UNIX .    ,           .        (, ,    ,     Ubuntu),   .  ,  .   .   ,   . , shell ,    login shell'   ,     argv[0] (?!).  <i>abuses</i> (  <i>misuses</i>,  ,  ,  - ) argv[0]. argv[0]    .  -  .      .  ,   ,  .<br>
<br>
</li>
<li> BSD sockets         .   ,  -  -     UNIX ,     .       user space    .   .     Windows  (   /etc/hosts,   C:\windows\system32\drivers\etc\hosts).<br>
<br>
<b>UPD</b>  2017-02-12: <a href="http://blog.erratasec.com/2013/02/unlearning-college.html"></a>.</li>
</ul><br>
¬´ UNIX¬ª.  ,   UNIX   .      (¬´  ¬ª, ¬´  ¬ª  . .)       ¬´ UNIX¬ª.  ,     ,    .    ¬´ UNIX¬ª  .  :    ,     ,      .<br>
<br>
<ul>
<li>¬´  ¬ª.         /etc/passwd,          .  ,  UNIX       (passwd, fstab   )  .      . ,    ? /etc/fstab       .      , , ?     fstab'     .    ,  fstab, ,    . ,        fstab-decode (  ).  , ?     :)         .     ,         - JSON  XML.       .    ,     .   ,  ,     (     ).<br>
<br>
     ¬´  ¬ª.        .       .           sed, grep, awk  . .       ,  ,     ,        . .   ,        XML, JSON,      -.                      ,      ,      ,     . .          ,    - .     ,     ,   .     - . , UNIX shell    JSON  XML.    UNIX shell   .          ,          JSON.<br>
<br>
  !  ,         ,  1 . ,  ,     find'.   ,      ls' (  xargs).   ?  : ‚ü¶<code>LC_ALL=C ls -l | while read -r MODE LINKS USER GROUP SIZE M D Y FILE; do if [ "$SIZE" -gt 1024 ]; then rm -- "$FILE"; fi; done</code>‚üß. (LC_ALL   ,   ,          ls).  ,     ,     . -,    ,          . ,        ls,     ,       (. . SIZE  FILE).      ,       .       :)<br>
<br>
       ,   ? - : ‚ü¶<code>ls | grep 'size &gt; 1kb' | rm</code>‚üß. ,  ,    ,   . . ls       .   ‚ü¶<code>-l</code>‚üß    .          ,     ,      ls. , ls   .    , , JSON.   ¬´¬ª     , . .  , ,   - .      grep,          JSON. JSON ¬´¬ª  ,  grep ¬´¬ª,    ¬´size¬ª.  , JSON      size.     ,   ,       ,   .      1kb.  grep    rm. rm ¬´¬ª,    . , , JSON        ,  ,   ‚Äî .  rm  .   JSON      .     ¬´ ¬ª. ?    <a href="https://www.opennet.ru/opennews/art.shtml%3Fnum%3D34591"></a> (        ), .  ,   Windows Powershell    -    .<br>
<br>
</li>
<li>UNIX shell.     UNIX.     UNIX shell       .   .   ¬´¬ª UNIX shell?  ,  <i>   </i> (   ) UNIX shell     ,    .      .   ,     UNIX shell , ,      .   <i></i>  , . . ,     ,    , , ,   .            Larry Wall ,  UNIX shell -     .      UNIX shell'      C.   Perl. , Perl         UNIX shell.     ,    (  )   ¬´ UNIX¬ª (    ). <a href="https://interviews.slashdot.org/story/04/10/18/1153211/rob-pike-responds"> </a>    ¬´    ¬ª  : ¬´Those days are dead and gone and the eulogy was delivered by Perl¬ª.   ,         UNIX shell, . .         shell-. ,  ,   Perl.<br>
<br>
    UNIX shell.       shell,    : ‚ü¶<code>find foo -print0 | while IFS="" read -rd "" A; do touch -- "$A"; done</code>‚üß.     touch (,  ,       xargs,  ,  touch    ;      , ?).    touch!         !   .          .     UNIX shell      ,        .<br>
<br>
 ,  UNIX shell       .      ,     .       ,   ¬´touch'¬ª . ,  ¬´¬ª         ,    shell, ,   .<br>
<br>
</li>
<li>.       shell        shell' (    ),    .   . ,   sed'. , .  jpg  ppm    .     , grep, sed  -   .     jpg. ,  .   photoshop'  gimp' - .    ,  .    UNIX.</li>
</ul><br>
     . , .    UNIX,    . , ¬´        ¬ª.     shell.   ,     shell. (  ,  ,          ¬´        ¬ª    shell    ). ,        . ,         ,       .   ,               .<br>
<br>
  .   UNIX.      .        . UNIX   . ,    , UNIX          . ,    UNIX,   ¬´ UNIX¬ª.    ,    UNIX,     .       <a href="http://harmful.cat-v.org/cat-v">¬´UNIX Style, or cat -v Considered Harmful¬ª</a>.        <a href="http://harmful.cat-v.org/cat-v/unix_prog_design.pdf">   </a>.      , , ,  cat ‚Äî       (   ¬´¬ª ,    ,   cat,  ?). ,        ¬´ UNIX¬ª.        <a href="http://cat-v.org/">cat-v.org</a>,  ,   .<br>
<br>
 ,   ,       ,  ,   ,    . , , ?       .    .    <a href="http://doc.cat-v.org/bell_labs/utah2000/">¬´Systems Software Research is Irrelevant¬ª</a>    ,       .     ,     UNIX (      - ): ¬´New operating systems today tend to be just ways of reimplementing Unix. If they have a novel architecture ‚Äî and some do ‚Äî the first thing to build is the Unix emulation layer. How can operating systems research be relevant when the resulting operating systems are all indistinguishable?¬ª<br>
<br>
    : <a href="http://doc.cat-v.org/bell_labs/good_bad_ugly/">¬´The Good, the Bad, and the Ugly: The Unix Legacy¬ª</a>.  ,     ,  ,    : ¬´What makes the system good at what it's good at is also what makes it bad at what it's bad at. Its strengths are also its weaknesses. A simple example: flat text files. Amazing expressive power, huge convenience, but serious problems in pushing past a prototype level of performance or packaging. Compare the famous spell pipeline with an interactive spell-checker¬ª. : ¬´C hasn't changed much since the 1970s‚Ä¶ And ‚Äî let's face it ‚Äî it's ugly¬ª.     ,   ,  .<br>
<br>
UNIX      . ,  ,        UNIX.       UNIX,       UNIX.     IDE.       .  , ,      .<br>
<br>
,    UNIX,       : Plan 9.     ,   .    UNIX.   Plan 9     .  ¬´Systems Software Research is Irrelevant¬ª   Plan 9,          .<br>
<br>
James Hague,   (   ) : ¬´What I was trying to get across is that if you romanticize Unix, if you view it as a thing of perfection, then you lose your ability to imagine better alternatives and become blind to potentially dramatic shifts in thinking¬ª (<a href="http://prog21.dadgum.com/128.html"></a>).        <a href="http://prog21.dadgum.com/74.html">¬´Free Your Technical Aesthetic from the 1970s¬ª</a>,    . (,     ,     , , ,    ).<br>
<br>
,    ,  UNIX ‚Äî  .      ,      ,     .  ¬´ UNIX¬ª   ,   ,    .       UNIX  GNU/Linux.       .<br>
<br>
<b>UPD</b>  2017-02-14:  ,   UNIX shell  PHP . , !   UNIX shell    ,     ,     .         .    UNIX shell .            .      ,   UNIX shell   cmd.   ,     Windows Powershell. ,    ,  -  UNIX shell.<br>
<br>
<b>UPD</b>  2017-02-14:   <a href="https://habrahabr.ru/post/321652/">  </a>  <a href="https://habr.com/users/sshikov/" class="user_link">sshikov</a>:<br>
<br>
<blockquote>     ‚Äî  ,          ¬´     ,  bash,      ...¬ª ‚Äî  unix way   .       .<br>
</blockquote><br>
,  -   ! ,   UNIX way.   UNIX      .  - UNIX .<br>
<br>
<b>UPD</b>  2017-02-14:     ,    Windows  UNIX-   .      UNIX,   ,    UNIX  ,   Windows.  ,        Windows.    UNIX.  , ,   .   ¬´ UNIX¬ª,    .   UNIX  .      .  UNIX ,  ¬´ UNIX¬ª .    ¬´ UNIX¬ª,   C  Shell  , , Web-.     ,   Web-  ,       ,    C (  C  ,    ).    -   quirks , ,  C.   ,  ,  .  ,  ,    .     ,      ,     .  Windows    (  - ,  Windows  UNIX?).   - Windows  UNIX (     Powershell).        UNIX. UNIX  ,   ,        .     UNIX.  UNIX ,     .<br>
<br>
<b>UPD</b>  2017-02-15: <a href="https://habrahabr.ru/post/321652/">habrahabr.ru/post/321652/#comment_10070776</a>.<br>
<br>
<b>UPD</b>  2017-02-15: <a href="https://habrahabr.ru/post/321652/">habrahabr.ru/post/321652/#comment_10071096</a>.<br>
<br>
<b>UPD</b>  2017-02-15: <a href="https://habrahabr.ru/post/321652/">habrahabr.ru/post/321652/#comment_10071714</a>.<br>
<br>
<b>UPD</b>  2017-02-16:   : <a href="https://habrahabr.ru/post/321652/">habrahabr.ru/post/321652/#comment_10066240</a>.<br>
<br>
<b>UPD</b>  2017-02-16:   ,      UNIX .      ,     .           .     GNU/Linux  :)     .      UNIX.   ,     UNIX. UNIX ,  .  James Hague,     :<br>
<br>
<blockquote>Enough time has passed since the silly days of crazed Linux advocacy that I'm comfortable pointing out the three reasons Unix makes sense:<br>
<br>
1. It works.<br>
2. It's reliable.<br>
3. It stays constant.<br>
<br>
But don't--do not--ever, make the mistake of those benefits being a reason to use Unix as a basis for your technical or design aesthetic. Yes, there are some textbook cases where pipelining commands together is impressive, but that's a minor point. Yes, having a small tool for a specific job sometimes works, but it just as often doesn't.<br>
</blockquote><br>
   ,     ,    ¬´ UNIX¬ª. ,   .   ,    .          .    .       .        .    , .    ,  ,   .      ,    ¬´  UNIX¬ª     James Hague.    ,      .<br>
<br>
     ,      ¬´¬ª UNIX   . ,    .  .   .     .  ,    ,   .       /usr  make.  ,  UNIX  .   ,    UNIX!  Bell Labs     Multics.  : ¬´   Multics,  -   , ¬ª.  . ?    .   . UNIX ‚Äî  .  ,        .<br>
<br>
   ,      ,       ,  UNIX,      .      UNIX- ,   .  ,   . ,      .      ,   UNIX  ,     .     ,    UNIX      .       UNIX.   (  !).  C, UNIX shell,  , ¬´  ¬ª. ,   C  make,       ,       UNIX.    POSIX.   : ¬´    IDE      make¬ª.  , ,         ,  ,   IDE ‚Äî           C, make  shell.<br>
<br>
   ,   UNIX (   ,    )   .    shell- ‚Äî   ,  .   .<br>
<br>
  ,   shell, make         ,  IDE,   , GUI-  .  .         :)  -    .   <a href="https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions"> </a>.   , , autotools  ,   make.     autotools,     m4, make  shell. , ,    ,     .<br>
<br>
     UNIX:<br>
<br>
<blockquote>Write programs that do one thing and do it well.<br>
Write programs to work together.<br>
Write programs to handle text streams, because that is a universal interface.<br>
</blockquote><br>
      ,       UNIX shell  .       ,    REST.      (  ,               JSON).   ‚Äî   ,  .      universal interface .      JSON  XML. , , -    ,    .<br>
<br>
       shell.  ,  ,        find -exec  xargs.    ,   .     ,    .    ,   shell'      .   - .    shell'  quirks,      .        .<br>
<br>
    .   <a href="https://www.opennet.ru/opennews/art.shtml%3Fnum%3D40622">        </a>:<br>
<br>
<blockquote>iTWire: Systemd seems to depart to a large extent from the original idea of simplicity that was a hallmark of UNIX systems. Would you agree? And is this a good or a bad thing?<br>
<br>
Linus Torvalds: So I think many of the ¬´original ideals¬ª of UNIX are these days more of a mindset issue than necessarily reflecting reality of the situation.<br>
<br>
There's still value in understanding the traditional UNIX ¬´do one thing and do it well¬ª model where many workflows can be done as a pipeline of simple tools each adding their own value, but let's face it, it's not how complex systems really work, and it's not how major applications have been working or been designed for a long time. It's a useful simplification, and it's still true at *some* level, but I think it's also clear that it doesn't really describe most of reality.<br>
<br>
It might describe some particular case, though, and I do think it's a useful teaching tool. People obviously still do those traditional pipelines of processes and file descriptors that UNIX is perhaps associated with, but there's a *lot* of cases where you have big complex unified systems.<br>
<br>
And systemd is in no way the piece that breaks with old UNIX legacy. Graphical applications seldom worked that way (there are certainly _echoes_ of it in things like ¬´LyX¬ª, but I think it's the exception rather than the rule), and then there's obviously the traditional counter-example of GNU emacs, where it really was not about the ¬´simple UNIX model¬ª, but a whole new big infrastructure thing. Like systemd.<br>
<br>
Now, I'm still old-fashioned enough that I like my log-files in text, not binary, so I think sometimes systemd hasn't necessarily had the best of taste, but hey, details‚Ä¶<br>
</blockquote><br>
<br>
<b>UPD</b>  2017-02-18:       shell.  ,  ,    find -exec  xargs. , .      ,      , , ,     -exec  xargs ‚Äî   .    ¬´  ¬ª,          UNIX shell.<br>
<br>
,     ,      ,    find -exec  xargs.<br>
<br>
     touch'. ¬´ touch'     foo (  )?¬ª ,    touch' ,  grep'       bar     . . .    file  ‚ü¶<code>grep bar file &gt; tmp; mv tmp file</code>‚üß.  ?     ,       ,   ,      .   ,    :<br>
<br>
<pre><code>find foo -print0 | while IFS="" read -rd "" A; do
	grep -- bar "$A" &gt; tmp
	mv -- tmp "$A"
done
</code></pre><br>
, ,  ,      foo,         .    <i></i>  ,      IFS   .    ,    , ,     foo ‚Äî   ‚ü¶<code>--</code>‚üß.          , . .   ‚ü¶<code>--</code>‚üß   : ¬´,    ¬ª.   <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D1%2581%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25B8%25D1%258F_%25D0%2599%25D0%25BE%25D0%25B4%25D1%258B"> </a>.<br>
<br>
,         xargs  find -exec?         touch',  ,      .     <i></i> : grep  ,       .   ,           shell',  ‚ü¶<code>sh -c</code>‚üß.    ?  , ?<br>
<br>
<pre><code>find foo -exec sh -c "grep -- bar '{}' &gt; tmp; mv -- tmp '{}'" ';'
</code></pre><br>
, !    ,     .   :<br>
<br>
<pre><code>find foo -exec sh -c 'grep -- bar "$1" &gt; tmp; mv -- tmp "$1"' dummy '{}' ';'
</code></pre><br>
?  .       $1.  -  ,       $1.       xargs.   ‚ü¶<code>sh -c</code>‚üß       $1.<br>
<br>
   <i></i>,  ,    ,          ,   ,   -  .<br>
<br>
    .       . ,       find.       ,   . .      .   ,  find      sublanguage, .     .    find'.  , , ,   find'  .     truth value, . .  .   -   .      ,   truth value find  ,              descend    (. .      ).<br>
<br>
 ,    ,    .   ‚ü¶<code>find -delete -name '*~'</code>‚üß  ‚ü¶<code>find -name '*~' -delete</code>‚üß  - .  ,  ,     .    .  find  .    .     ,    .     ,  -name  truth value <i>true</i>  ,    .   -name  true,    .<br>
<br>
  ?  ,  find   sublanguage.         shell. ( sed,   ‚Äî    ,  awk ‚Äî       ,  UNIX'       .)      ,  find    .        .       .   find'   ,   descend   ,      callback. ,  UNIX shell    .     UNIX shell.<br>
<br>
<b>UPD</b>  2017-08-01.<br>
<br>
<blockquote>echo   ,     .       ,    ,  ¬´Hello, world!¬ª, .<br>
</blockquote><br>
     echo    .  ,     bash   ‚ü¶<code>echo "Hello, world!"</code>‚üß. <a href="http://mywiki.wooledge.org/BashPitfalls">   ,      </a>.   bash  ,     .<br>
<br>
<b>UPD</b>  2018-05-31.     .   ,     :     ‚ü¶<code>-</code>‚üß,     .  ,      , . .      foo.</div><p>Source: <a href="https://habr.com/ru/post/321652/">https://habr.com/ru/post/321652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321638/index.html">Continuous Integration UWP Applications in Visual Studio Team Services</a></li>
<li><a href="../321640/index.html">Facebook Audience Network - a new word in the monetization of sites and applications</a></li>
<li><a href="../321644/index.html">Using expressions to filter data from a database</a></li>
<li><a href="../321646/index.html">Automatic 3CX configuration using the setupconfig.xml answer file</a></li>
<li><a href="../321648/index.html">J-bird</a></li>
<li><a href="../321654/index.html">C ++ Russia: interview with speakers</a></li>
<li><a href="../321656/index.html">The basics of Juniper Contrail, and how to put it in the lab</a></li>
<li><a href="../321658/index.html">The digest of interesting materials for the mobile developer # 190 (February 5-12)</a></li>
<li><a href="../321660/index.html">How to make a distributed assembly system from Ninja?</a></li>
<li><a href="../321662/index.html">Pygest # 3. Releases, articles, interesting projects from the world of Python [January 30, 2017 - February 13, 2017]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
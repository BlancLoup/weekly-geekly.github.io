<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Flipboard animation with CSS3 and JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. Surely many have seen an application for iOS called Flipboard. With all its virtues, personally, it first of all pleased me with its funny p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Flipboard animation with CSS3 and JavaScript</h1><div class="post__text post__text-html js-mediator-article">  Good day.  Surely many have seen an application for iOS called Flipboard.  With all its virtues, personally, it first of all pleased me with its funny page turning animations.  The idea was born to implement something similar for your site exclusively on Javascript and CSS3. <br><br>  In this case, I used the CSS3 transform: rotate3d (...) property, which requires support for hardware-accelerated graphics and works adequately only in <b>Chrome 16+</b> , so I restricted all the necessary properties to -webkit- prefixes.  In production for users with inappropriate parameters, I replaced the animation with a simpler one. <br><br>  Here is the final result: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/w1fTI7oYfbI%3Ffeature%3Doembed&amp;xid=17259,15700022,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhjIpyHut-uTD7Fpwomse6XQzW4QnQ" frameborder="0" allowfullscreen=""></iframe><br><br>  <a href="http://comphobby.ru/flipping/index.html">Live demo</a> <br><br><a name="habracut"></a><br><br>  Let's start with HTML.  I wanted to make a universal script, which practically will not depend on the source html, so it contains only a container with the necessary class, images and a link to start the animation: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"flip-images"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./images/image_1.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./images/image_2.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./images/image_3.jpg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'flip-one-more'</span></span></span><span class="hljs-tag">&gt;</span></span>Flip<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  The script performs mostly a regulatory function, but its first task is parsing, put the url of pictures into an array (for convenience, I use jQuery): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> image_index = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   var images = parse_image_container(); function collect_images(){ var images = new Array(); $('.flip-images img').each(function(){ images.push($(this).attr('src')); $(this).remove(); }); return images; }</span></span></code> </pre><br><br>  After the collect_images () function has completed, the empty container with the class flip-images remains, you need to fill it with an html template that will contain all the necessary layers.  Each time you need two pictures to animate turning over, one in front, the other in the back, besides each picture must be divided into two parts, plus for greater realism you need to add pseudo-shadows. <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.flip-images'</span></span>).append(<span class="hljs-string"><span class="hljs-string">"&lt;div class='flip-container'&gt;\ &lt;div class='flip-top'&gt;\ &lt;div class='shadow-front'&gt;&lt;/div&gt;\ &lt;div class='front-image-top'&gt;&lt;/div&gt;\ &lt;div class='back-image-bottom'&gt;&lt;/div&gt;\ &lt;div class='shadow-back'&gt;&lt;/div&gt;\ &lt;/div&gt;\ &lt;div class='back-image-top'&gt;&lt;/div&gt;\ &lt;div class='flip-bottom'&gt;\ &lt;div class='shadow-bottom'&gt;&lt;/div&gt;\ &lt;div class='front-image-bottom'&gt;&lt;/div&gt;\ &lt;/div&gt;\ &lt;/div&gt;"</span></span>);</code> </pre><br><br>  As a result, the container with the flip-top class will be flipped overlapping the flip-bottom container. <br><br>  Now we need to expand the necessary images into the necessary containers, this role is assigned to the place_images () function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">place_images</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> next_image_index = image_index+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(next_image_index==images.length){ next_image_index = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> front_image = <span class="hljs-string"><span class="hljs-string">"&lt;img src='"</span></span>+images[image_index]+<span class="hljs-string"><span class="hljs-string">"'&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> back_image = <span class="hljs-string"><span class="hljs-string">"&lt;img src='"</span></span>+images[next_image_index]+<span class="hljs-string"><span class="hljs-string">"'&gt;"</span></span>; $(<span class="hljs-string"><span class="hljs-string">'.back-image-top'</span></span>).html(<span class="hljs-string"><span class="hljs-string">""</span></span>).append(back_image); $(<span class="hljs-string"><span class="hljs-string">'.back-image-bottom'</span></span>).html(<span class="hljs-string"><span class="hljs-string">""</span></span>).append(back_image); $(<span class="hljs-string"><span class="hljs-string">'.front-image-top'</span></span>).html(<span class="hljs-string"><span class="hljs-string">""</span></span>).append(front_image); $(<span class="hljs-string"><span class="hljs-string">'.front-image-bottom'</span></span>).html(<span class="hljs-string"><span class="hljs-string">""</span></span>).append(front_image); }</code> </pre><br><br>  Just put a picture with the image_index index into two containers responsible for the lower and upper parts of the front picture, and put the next picture in containers for the back image. <br><br>  In the script it remains only to hang up the action on the link to start the animation, but we will deal with this a little later.  Let's go to CSS.  I will not paint each class separately, they are primitive, just comment on the key points. <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.flip-images</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">200px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.flip-container</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">200px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: relative; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-perspective</span></span>: <span class="hljs-number"><span class="hljs-number">600px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.flip-top</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.flip-bottom</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: relative; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.front-image-top</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: block; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-backface-visibility</span></span>: hidden; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* ,       */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: hidden; <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">900</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.front-image-bottom</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>: bottom; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: -<span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.front-image-bottom</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: -<span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*     ,    */</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   */</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.back-image-top</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>: top; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: -<span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.back-image-bottom</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: block; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotateY</span></span>(180deg) <span class="hljs-built_in"><span class="hljs-built_in">rotateZ</span></span>(180deg); <span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-backface-visibility</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">800</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.back-image-bottom</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: -<span class="hljs-number"><span class="hljs-number">100px</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/**/</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.shadow-top-front</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-backface-visibility</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*  ,    */</span></span> } <span class="hljs-selector-class"><span class="hljs-selector-class">.shadow-top-back</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-backface-visibility</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotateY</span></span>(180deg); <span class="hljs-comment"><span class="hljs-comment">/*   ,       */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*  ,    */</span></span> } <span class="hljs-selector-class"><span class="hljs-selector-class">.shadow-bottom</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">300px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: -<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br><br>  At this stage, all the images are in their places, it remains only to set the animation, for this we use the property keyframes. <br><br>  The main animation will be called a flip and it will be like this: the upper part of the image falls, bounces off the bottom, soaring slightly up and falling all the way down again.  So it will look like in CSS: <br><br><pre> <code class="css hljs">@-<span class="hljs-keyword"><span class="hljs-keyword">webkit</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> flip { 0% { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate3d</span></span>(1,0,0, 0deg); } 50% { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate3d</span></span>(1,0,0, -180deg); } 60% { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate3d</span></span>(1,0,0, -155deg); } 70% { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate3d</span></span>(1,0,0, -140deg); } 100% { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate3d</span></span>(1,0,0, -180deg); } }</code> </pre><br><br>  Intervals and rotation values ‚Äã‚Äãare selected by trial and error.  Animations for shadows are made in the same way: <br><br><pre> <code class="css hljs">@-<span class="hljs-keyword"><span class="hljs-keyword">webkit</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> shadowTopFront{ 0% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } 70% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; } 100% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } } @-<span class="hljs-keyword"><span class="hljs-keyword">webkit</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> shadowTopBack { 0% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.8</span></span>; } 50% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } 60% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.05</span></span>; } 70% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.1</span></span>; } 100% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } } @-<span class="hljs-keyword"><span class="hljs-keyword">webkit</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">keyframes</span></span> shadowBottom { 0% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } 50% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.6</span></span>; } 60% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.4</span></span>; } 70% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.3</span></span>; } 100% { <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>; } }</code> </pre><br><br>  It remains to describe the classes that will run the animation: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.flip</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*background: #ccc;*/</span></span> <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">200px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform-origin</span></span>: bottom; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation</span></span>: flip <span class="hljs-number"><span class="hljs-number">1s</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-iteration-count</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*    */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-timing-function</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(0,0,1,0.5); <span class="hljs-comment"><span class="hljs-comment">/*        */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate3d</span></span>(1,0,0, 180deg); <span class="hljs-comment"><span class="hljs-comment">/*   ,        0 */</span></span> } <span class="hljs-selector-class"><span class="hljs-selector-class">.shadow-top-front-animate</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation</span></span>: shadowTopFront <span class="hljs-number"><span class="hljs-number">1s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-iteration-count</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-timing-function</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(0,0,1,0.5); <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.shadow-top-back-animate</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation</span></span>: shadowTopBack <span class="hljs-number"><span class="hljs-number">1s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-iteration-count</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-timing-function</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(0,0,1,0.5); <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.shadow-bottom-animate</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation</span></span>: shadowBottom <span class="hljs-number"><span class="hljs-number">1s</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-iteration-count</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-animation-timing-function</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">cubic-bezier</span></span>(0,0,1,0.5); <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br><br>  Let's go back to javascript and set an action to click on the link with id <b>flip-one-more</b> .  By clicking the appropriate container, the necessary images should be inserted, classes with animations should be added and the image_index variable should increase. <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#flip-one-more'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ place_images(image_index); $(<span class="hljs-string"><span class="hljs-string">'.flip-top'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'flip'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.shadow-top-front'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'shadow-top-front-animate'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.shadow-top-back'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'shadow-top-back-animate'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.shadow-bottom'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'shadow-bottom-animate'</span></span>); image_index = image_index + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(image_index==images.length){ image_index = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; });</code> </pre><br><br>  In this form, everything will work, but we will only see the animation once, after repeated clicks on the link, the pictures will simply be rearranged.  This is because CSS animation is a one-time phenomenon, it should always be returned to its original position.  Alas, simply deleting the assigned classes will not help the case, but there is one simple, quite working way to return the animation to the original one.  It is necessary to remove and add again the blocks to which the animation was applied.  As a result, the final version of the function for a click is as follows: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#flip-one-more'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ flip_container = $(<span class="hljs-string"><span class="hljs-string">'.flip-container'</span></span>); new_flip_container = flip_container.clone(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); flip_container.before(new_flip_container); $(<span class="hljs-string"><span class="hljs-string">"."</span></span> + flip_container.attr(<span class="hljs-string"><span class="hljs-string">"class"</span></span>) + <span class="hljs-string"><span class="hljs-string">":last"</span></span>).remove(); place_images(); $(<span class="hljs-string"><span class="hljs-string">'.flip-top'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'flip'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.shadow-top-front'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'shadow-top-front-animate'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.shadow-top-back'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'shadow-top-back-animate'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.shadow-bottom'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'shadow-bottom-animate'</span></span>); image_index++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(image_index==images.length){ image_index = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; });</code> </pre><br><br>  Now everything works as planned.  Apply a similar effect in most cases, it remains only to wait for the support of the desired properties of all popular browsers. <br><br>  Thank you for your attention, I understand that the code is far from ideal, so I will be glad to hear constructive criticism. <br><br>  <a href="http://comphobby.ru/flipping/index.html">Demo</a> <br><br>  <a href="">Archive with an example</a> <br><br>  <b>UPD.</b>  I added parameters with the prefixes -moz-, -ms- and -o- to the example, but it works correctly only in Chrome. <br><br>  <b>UPD2.</b>  If you have an example with bugs in Chrome 16+, try to include several options in chrome: flags, namely: <br>  <i>- Override the software rendering list</i> <br>  <i>- Processing of all pages using the graphics processor</i> <br>  <i>- Accelerated drawing by the graphics processor</i> </div><p>Source: <a href="https://habr.com/ru/post/140527/">https://habr.com/ru/post/140527/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140517/index.html">Building a Failover SIP Proxy / PBX based on FreeSWITCH mod_sofia (recover)</a></li>
<li><a href="../140518/index.html">How to create your own game: the main question of any juzverej</a></li>
<li><a href="../140520/index.html">Updating the Google Bookmarks widget</a></li>
<li><a href="../140522/index.html">Creating a window interface using jQuery UI. Part 1</a></li>
<li><a href="../140524/index.html">Commodore released Amiga Mini!</a></li>
<li><a href="../140529/index.html">AlsaMixer for Android</a></li>
<li><a href="../140532/index.html">Review of the beta version of Adobe Photoshop CS6</a></li>
<li><a href="../140533/index.html">New robot from DARPA</a></li>
<li><a href="../140535/index.html">Cardsharing: Transmission of DW codes over the network</a></li>
<li><a href="../140536/index.html">Debugging C programs for beginners</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>iOS 8 - Widgets</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the release of iOS 8, developers have the opportunity to create their own widgets for the Today screen. For the time being, the API has not been ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>iOS 8 - Widgets</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a13/2fa/2fd/a132fa2fdf1c4ffa1a01c0a56fb4cc8f.png" width="200" align="left"><br>  With the release of iOS 8, developers have the opportunity to create their own widgets for the Today screen.  For the time being, the API has not been finally settled, there is a <a href="https://developer.apple.com/library/prerelease/ios/releasenotes/General/RN-iOSSDK-8.0/">Known Issue</a> and many moments not described in the documentation.  But if you still want to make your widget, then I ask for the cut (note, Swift is used in the examples). <br><a name="habracut"></a><br><br><br clear="all"><h4>  Extensions </h4><br>  IOS has a new concept - extensions.  Extensions allow you to make available some of the content and functionality outside the application. <br><br>  The part of the system that supports extensions is called extension point.  The following extension points are available for iOS: <br><ul><li>  Today (Notification Center) - quickly perform some action or get information through the Today screen in the Notification Center </li><li>  Share - share content with friends or in a feed on some site. </li><li>  Action - view or manage content within the context of another application </li><li>  Photo Editing - edit a photo or video inside the Photos application </li><li>  Storage Provider - select a document from the set of documents available to the current application </li><li>  Custom Keyboard - replace the native iOS keyboard with your own for use in all applications </li></ul><br>  Extensions can only be distributed in the extension container that is used by the bundle of a regular application.  One container may contain several extensions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It should be noted that extensions are a special kind of binary files.  This is not an application! <br>  Unfortunately, extensions do not support the App to App IPC (pipes, sockets, ...), and therefore you need to use the familiar [UIApplication openURL:] (everyone does not work for extensions, see <a href="https://developer.apple.com/library/prerelease/ios/releasenotes/General/RN-iOSSDK-8.0/">Known Issue</a> ) or, for example, <a href="https://developer.apple.com/library/prerelease/ios/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html">App Group</a> . <br><br>  Each extension runs in a separate process.  Thus, the same extensions in the context of different applications are different processes, and you can not worry about synchronization problems. <br><br>  Extensions documentation is <a href="https://developer.apple.com/library/prerelease/ios/documentation/General/Conceptual/ExtensibilityPG/NotificationCenter.html">here</a> . <br><br><h4>  Widgets </h4><br>  Widgets are extensions that display information in the Notification Center on the Today screen and, therefore, are designed to show the information that is important at the current moment.  When a user opens Today, he expects the information of interest to him to be instantly available. <br><br>  The widget becomes available after the user installs the application containing the widget (now it happens that the widget is not installed after the first launch of the application, after all, this is still a beta).  To add a widget, you need to open the Today screen in the Notification Center, click the Edit button and add the desired widget. <br><br>  The connection between the container and the widget is through <a href="https://developer.apple.com/library/prerelease/ios/documentation/NotificationCenter/Reference/NotificationCenter_Framework/index.html">NotificationCenter.framework</a> . <br><br>  In essence, a widget is a UIViewController, which is well known to any iOS programmer.  Accordingly, when creating widgets, you can use the previously accumulated knowledge.  For example, if you need to perform some action before displaying the widget, you should override viewWillAppear, etc. <br><br>  So that the widget always looks up to date, iOS sometimes makes the widget snapshots.  When the widget becomes visible again, the last snapshot is shown first, and only then the real widget window.  In order for the widget to update its state before snapshot, the <a href="https://developer.apple.com/library/prerelease/ios/documentation/NotificationCenter/Reference/NCWidgetProviding_Protocol/index.html">NCWidgetProviding</a> protocol is <a href="https://developer.apple.com/library/prerelease/ios/documentation/NotificationCenter/Reference/NCWidgetProviding_Protocol/index.html">used</a> . <br><pre><code class="scala hljs">protocol <span class="hljs-type"><span class="hljs-type">NCWidgetProviding</span></span> : <span class="hljs-type"><span class="hljs-type">NSObjectProtocol</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Called to allow the client to update its state prior to a snapshot being taken, or possibly other operations. // Clients should call the argument block when the work is complete, passing the appropriate 'NCUpdateResult'. @optional func widgetPerformUpdateWithCompletionHandler(completionHandler: ((NCUpdateResult) -&gt; Void)!) // Clients wishing to customize the default margin insets can return their preferred values. // Clients that choose not to implement this method will receive the default margin insets. @optional func widgetMarginInsetsForProposedMarginInsets(defaultMarginInsets: UIEdgeInsets) -&gt; UIEdgeInsets }</span></span></code> </pre> <br>  When a widget calls widgetPerformUpdateWithCompletionHandler, it must refresh its window and then call the completionHandler block with an argument equal to one of the following constants: <br><ul><li>  NCUpdateResultNewData - new content requires updating the window </li><li>  NCUpdateResultNoData - the widget does not need an update </li><li>  NCUpdateResultFailed - an error occurred during the update process </li></ul><br>  Since users are waiting for an instant response from the Notification Center, and the system performs snapshots, the widget simply has to keep its previous state, that is, cache the data it needs to work. <br><br>  Notification Center determines the width of the widget, while the widget itself determines its height.  To determine the height, the widget can use Auto Layout or the <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIViewController_Class/index.html">preferedContentSize</a> property of the <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIViewController_Class/index.html">Executor</a> UIViewController. <br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> func viewDidLoad() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() self.preferredContentSize.height = <span class="hljs-number"><span class="hljs-number">350</span></span> }</code> </pre><br>  It turns out that widgets have the following requirements: <br><ul><li>  ensure that the displayed content is relevant </li><li>  properly respond to user actions </li><li>  consume as few resources as possible (iOS can kill a widget if it consumes a lot of memory) </li></ul><br>  Please note that the UI for widgets has the following limitations: <br><ul><li>  can not show the keyboard </li><li>  cannot use controls that work with gestures (for example, UIDatePicker) </li><li>  no maps can be displayed yet (now this item is listed in the <a href="https://developer.apple.com/library/prerelease/ios/releasenotes/General/RN-iOSSDK-8.0/">Known Issue</a> - Map tiles.) </li></ul><br>  Since the keyboard is inaccessible, the user must be able to configure the widget in the container application. <br><br><h4>  Interaction with the widget </h4><br>  To update the information displayed by the widget, there is a class <a href="https://developer.apple.com/library/prerelease/ios/documentation/NotificationCenter/Reference/NCWidgetController_Class/index.html">NCWidgetController</a> . <br>  An instance of this class has a single setHasContent method: forWidgetWithBundleIdentifier:, which sends a message to the widget that it should update the information. <br>  Used as follows: <br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">NCWidgetController</span></span>.widgetController().setHasContent(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, forWidgetWithBundleIdentifier: <span class="hljs-string"><span class="hljs-string">"com.e-legion.Traffic.Widget"</span></span>)</code> </pre><br>  This class can be used from a widget and a container application. <br><br><h4>  Exchange data with a container application </h4><br>  To communicate with the container, an <a href="https://developer.apple.com/library/prerelease/ios/documentation/Foundation/Reference/NSExtensionContext_Class/index.html">NSExtensionContext</a> object <a href="https://developer.apple.com/library/prerelease/ios/documentation/Foundation/Reference/NSExtensionContext_Class/index.html">is</a> available via the <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIViewController_Class/">extensionContext</a> property of the UIViewController. <br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSExtensionContext</span></span></span><span class="hljs-class"> </span></span>: <span class="hljs-type"><span class="hljs-type">NSObject</span></span> { <span class="hljs-comment"><span class="hljs-comment">// The list of input NSExtensionItems associated with the context. If the context has no input items, this array will be empty. var inputItems: AnyObject[]! { get } // Signals the host to complete the app extension request with the supplied result items. The completion handler optionally contains any work which the extension may need to perform after the request has been completed, as a background-priority task. The `expired` parameter will be YES if the system decides to prematurely terminate a previous non-expiration invocation of the completionHandler. Note: calling this method will eventually dismiss the associated view controller. func completeRequestReturningItems(items: AnyObject[]!, completionHandler: ((Bool) -&gt; Void)!) // Signals the host to cancel the app extension request, with the supplied error, which should be non-nil. The userInfo of the NSError will contain a key NSExtensionItemsAndErrorsKey which will have as its value a dictionary of NSExtensionItems and associated NSError instances. func cancelRequestWithError(error: NSError!) // Asks the host to open an URL on the extension's behalf func openURL(URL: NSURL!, completionHandler: ((Bool) -&gt; Void)!) }</span></span></code> </pre><br>  Ie to open the container application from the widget, the container must register the scheme (for example, ‚Äútraffic: //‚Äù), and add to the code of the widget <br><pre> <code class="scala hljs">self.extensionContext.openURL(<span class="hljs-type"><span class="hljs-type">NSURL</span></span>(string: <span class="hljs-string"><span class="hljs-string">"traffic://"</span></span>), completionHandler: nil)</code> </pre>  . <br>  By default, the iOS security system prohibits the exchange of data between the container application and the extension.  To enable data exchange, you need to add the container target and extensions to one <a href="https://developer.apple.com/library/prerelease/ios/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html">App Group</a> . <br><img src="https://habrastorage.org/getpro/habr/post_images/5aa/631/4cc/5aa6314cc8747a5a8a97e37223f5b53f.png" width="600"><br>  As a result, the file entitlements will have the following contents: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>com.apple.security.application-groups<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>group.96GT47C53G.traffic<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Check out the 96GT47C53G.  This is Development Team ID.  You can view it in your <a href="https://developer.apple.com/membercenter/index.action">profile</a> .  To run on the simulator, you can use any value, for example, group.traffic, ... <br><br>  Now, using the <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html">containerURLForSecurityApplicationGroupIdentifier</a> method, you can get the path to the shared folder and store application-specific data there. <br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">NSFileManager</span></span>.defaultManager().containerURLForSecurityApplicationGroupIdentifier(<span class="hljs-string"><span class="hljs-string">"group.96GT47C53G.traffic"</span></span>)</code> </pre><br><h4>  Example </h4><br>  So, try to create a widget that will show the map with traffic jams.  We will receive information about traffic jams in the form of a picture using <a href="">the Yandex.Maps API</a> . <br><br>  Example of a link to get a picture: <a href="http://static-maps.yandex.ru/1.x/%3Fll%3D30.35,59.9690273%26spn%3D0.01,0.2%26size%3D300,250%26l%3Dmap,trf">http://static-maps.yandex.ru/1.x/?ll=30.35,59.9690273&amp;spn=0.01,0.2&amp;size=300,250&amp;l=map,trf</a> <br>  Actually, lat and lon is the center of the map, and spn is the length of the map display area in degrees. <br><br>  The source code for the project is available on <a href="https://github.com/fanruten/Traffic">GitHub</a> . <br><br><h4>  Create a container application </h4><br>  The task of the container is to give the user the ability to configure the widget, namely, select an area on the map.  Thus, the application will contain a MapView to select a region and a ‚ÄúSet frame‚Äù button that will transfer this region to the widget. <br><img src="https://habrastorage.org/getpro/habr/post_images/104/190/99d/10419099d9a8a6b1f0a86471bfff1029.png" width="320"><br><br>  The application should allow the user to select lat, lon, spn parameters and pass them to the widget.  The following code does this: <br><pre> <code class="scala hljs"><span class="hljs-meta"><span class="hljs-meta">@IBAction</span></span> func updateWidgetButtonTapped(sender : <span class="hljs-type"><span class="hljs-type">AnyObject</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict : <span class="hljs-type"><span class="hljs-type">NSMutableDictionary</span></span> = <span class="hljs-type"><span class="hljs-type">NSMutableDictionary</span></span>() dict[<span class="hljs-string"><span class="hljs-string">"spn"</span></span>] = self.mapView.region.span.latitudeDelta dict[<span class="hljs-string"><span class="hljs-string">"lat"</span></span>] = self.mapView.region.center.latitude dict[<span class="hljs-string"><span class="hljs-string">"lon"</span></span>] = self.mapView.region.center.longitude <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dictUrl : <span class="hljs-type"><span class="hljs-type">NSURL</span></span> = <span class="hljs-type"><span class="hljs-type">NSFileManager</span></span>.defaultManager().containerURLForSecurityApplicationGroupIdentifier(<span class="hljs-string"><span class="hljs-string">"group.96GT47C53G.traffic"</span></span>).<span class="hljs-type"><span class="hljs-type">URLByAppendingPathComponent</span></span>(<span class="hljs-string"><span class="hljs-string">"settings.dict"</span></span>) dict.writeToFile(dictUrl.path, atomically: <span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-type"><span class="hljs-type">NCWidgetController</span></span>.widgetController().setHasContent(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, forWidgetWithBundleIdentifier: <span class="hljs-string"><span class="hljs-string">"com.e-legion.Traffic.Widget"</span></span>) }</code> </pre><br><h4>  Adding a widget </h4><br>  Adding a widget boils down to adding a new target. <br>  Click File-&gt; New-&gt; Target and select iOS-&gt; Application Extension-&gt; Today Extension. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d9b/2d1/0bf/d9b2d10bfea0ba0193dd8e8f8d3f5570.png" width="400"><br><br>  Now a stub for the widget has been added to the project.  But if you now try to use your widget, then nothing will come of it.  The widget will crash.  To fix this, you need to add the following method to TodayViewController: <br><pre> <code class="scala hljs">init(coder aDecoder: <span class="hljs-type"><span class="hljs-type">NSCoder</span></span>!) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.init(coder: aDecoder) }</code> </pre><br>  Notice the Info.plist file from the template.  It contains the NSExtension key, in which some parameters of the widget are defined. <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>NSExtension<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>NSExtensionMainStoryboard<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>MainInterface<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>NSExtensionPointIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>com.apple.widget-extension<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  NSExtensionMainStoryboard stores the name of the storyboard in which the controller for the widget is stored.  The controller can be specified explicitly by replacing the NSExtensionMainStoryboard key with the NSExtensionPrincipalClass and using the name of the controller as the value. <br><br>  Each widget has a slight left shift.  If you want to get rid of it, then you need to return the desired UIEdgeInsets in the widgetMarginInsetsForProposedMarginInsets method. <br><pre> <code class="scala hljs"> func widgetMarginInsetsForProposedMarginInsets(defaultMarginInsets: <span class="hljs-type"><span class="hljs-type">UIEdgeInsets</span></span>) -&gt; <span class="hljs-type"><span class="hljs-type">UIEdgeInsets</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">UIEdgeInsets</span></span>(top: <span class="hljs-number"><span class="hljs-number">0</span></span>, left: <span class="hljs-number"><span class="hljs-number">0</span></span>, bottom: <span class="hljs-number"><span class="hljs-number">0</span></span>, right: <span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br>  The widget code is quite simple.  There is an updateMap method that performs map updates.  The update takes place when the widget starts to display (viewWillLoad), the button is clicked and widgetPerformUpdateWithCompletionHandler is called.  The widget receives information about the displayed area through <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html">containerURLForSecurityApplicationGroupIdentifier</a> . <br><br><h4>  Conclusion </h4><br>  Widgets are a very cool thing, but for now everything is damp.  Sometimes crashes occur, sometimes the widget is not visible, etc.  But most of all there is not enough documentation.  Soon all this will be fixed and it will be possible to enrich your applications with new functionality, but in the meantime you can play around with what you have. </div><p>Source: <a href="https://habr.com/ru/post/225321/">https://habr.com/ru/post/225321/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../225303/index.html">DevConf :: Ruby - June 14 - the program is generated</a></li>
<li><a href="../225305/index.html">Accelerate the development process with Vagrant</a></li>
<li><a href="../225307/index.html">EFF souvenirs for Tor owners</a></li>
<li><a href="../225309/index.html">Maxmertkit Perfect css framework</a></li>
<li><a href="../225313/index.html">Ruby integration into Nginx</a></li>
<li><a href="../225323/index.html">HipHop: Popcorn Time analogue for music</a></li>
<li><a href="../225325/index.html">The history of the gaming market, part 1</a></li>
<li><a href="../225329/index.html">Levin took the oath on a digital copy of the US Constitution</a></li>
<li><a href="../225331/index.html">Extortionist for Android encrypts files on the device</a></li>
<li><a href="../225335/index.html">Intel introduced a prototype of a laptop with wireless charging, WiGig and passive cooling</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visualization of crystal 3d-structures in the browser without plug-ins</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! In this article I will compare the four open engines for visualization of crystal structures in the CIF (Crystallographic Information File) ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visualization of crystal 3d-structures in the browser without plug-ins</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  In this article I will compare the four open engines for visualization of crystal structures in the CIF (Crystallographic Information File) format, which is popular in crystal chemistry and materials science.  It will be about modern JavaScript (including Java and C transcompilation in JavaScript), crystal chemistry and solid state physics.  We are teleporting from the world of Schr√∂dinger and Landau to the world of Berners-Lee and Jobs, and then back.  So let's go. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/19c/a73/687/19ca73687b06a1bb0b0989501804cb0a.png" width="1100" height="546" title="Water adsorption on perovskite surface" alt="Water adsorption on perovskite surface"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is known from the school course of physics that atoms in a solid are ordered into periodically repeating structural units of the size of the order of a nanometer, forming a crystal lattice.  Physics of a rigid body <s>in the spirit of reductionism</s> studies the relationship between the properties of these structural units (unit cells) and the properties of macrocosm objects.  For example, by controlling the adsorption of water molecules on the surface of oxides of transition metals, one can reduce the cost of <a href="https://books.google.com/books%3Fid%3D-G5vyQqEGQoC">hydrogen and oxygen synthesis</a> , improve the <a href="http://dx.doi.org/10.1016/S0167-2738(01)00826-8">performance of fuel cells</a> and <a href="https://books.google.com/books%3Fid%3DdzPKAwAAQBAJ">sensor devices</a> , and optimize <a href="http://dx.doi.org/10.1002/jcb.20796">drug delivery in pharmacology</a> .  In short, the physics of a solid body somehow describes any laboratory or technological process, and here the importance of molecular visualization is extremely difficult to overestimate.  De facto in materials science, the most common computer format for exchanging data about crystal structures is CIF.  An important difference between CIF and many <a href="http://www.ch.ic.ac.uk/chemime">other chemical formats</a> is the support of 3d-broadcasts, in other words, to define an infinite 3d-crystal, we repeat its elementary cell in three directions. <br><br>  CIF was created in the 90s by the International Union of Crystallography (IUCR).  The CIF is based on a text container called STAR (Self-Defining Text Archive and Retrieval), where physical properties resulting from diffractometry or theoretical calculations are labeled with standard tags.  Standard tags determine the parameters of the unit cell, its symmetry, its constituent atoms, the metadata of the relevant scientific publication, and so on.  These tags are defined in external CIF dictionaries, similar to XSD schemas of XML documents, so that a CIF document can be validated using a CIF dictionary and even new physical properties can be derived based on the available ones.  The differences are that CIF allows arbitrary tags that are ignored by the CIF parser (of course, they can later become part of the standard and be included in new dictionaries as decided by the IUCR union).  In addition, CIF supports the relational data model, when, for example, you can refer to certain atoms in a crystal structure by their identifiers.  The disadvantage is the lack of convenient support for multi-level hierarchies, here the STAR container loses XML.  By the way, this is why CIF has an XML competitor called CML (Chemical Markup Language). <br><br>  Traditionally, CIF files open in desktop applications (Vesta, Accelrys / BIOVIA, RasMol, and many others), however, in this area, about four years ago, browsers began their crusade against desktop applications.  The open source fruits of this campaign known to me are collected below, and their code as a single web application can be found <a href="https://github.com/blokhin/cif-js-engines">in the repository</a> .  The code has been tested in several popular browsers, including IE 11 and mobile Safari.  The repository structure is as follows: the <b>data</b> folder contains examples of CIF models (if you have ever dealt with crystal chemistry or materials science, you probably have your own), the <b>engines</b> folder contains JavaScript code for all engines, <b>utils</b> contains auxiliary code, for example, browser file downloader for local processing of CIF-models.  Thus, to launch a web application, it is enough to open its folder for the web server and enter the corresponding address in the browser (or simply <a href="http://blokhin.github.io/cif-js-engines">go to the repository</a> ).  All files are static, no server processing is provided. <br><br>  Briefly about the four models from the <b>data</b> folder: <br><br><ul><li>  <b>adsorption.cif</b> - model of the aforementioned adsorption of water in perovskite (see picture), unit cell, by default is loaded into each of the engines, </li><li>  <b>fullerene.cif</b> - <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D1%2583%25D0%25BB%25D0%25BB%25D0%25B5%25D1%2580%25D0%25B5%25D0%25BD">fullerene C <sub>60</sub></a> , </li><li>  <b>lfp.cif</b> - lithium-iron phosphate <b>LiFePO</b> <sub>4</sub> , the cathode material of a lithium-ion battery.  Pay attention to the lithium ion: it is very light and mobile (and all because lithium is the third in the periodic table).  The third lithium electron comes or goes to the external circuit as a result of discharging or charging the battery, while the lithium ion travels through the electrolyte. </li><li>  <b>mdma.cif</b> - 3,4-methylenedioxy-N-methamphetamine hydrochloride.  Its functional groups can be replaced with preservation of the corresponding effect, thus a new and therefore legal substance is formed.  This is precisely the problem of synthetic analogs. </li></ul><br><br>  Now, in fact, the results of the comparison engines. <br><br><table><tbody><tr><th>  Engine <br></th><th>  Version <br></th><th>  Total code size (in GZip brackets) <br></th><th>  Drawing technology <br></th><th>  Customization <br></th><th>  License <br></th></tr><tr><td>  <a href="http://www.jmol.org/">Jsmol</a> <br></td><td>  14.2.15 <br></td><td>  2.1 MB (700 KB) <br></td><td>  canvas <br></td><td>  rich, programmatically and in the UI <br></td><td>  LGPL <br></td></tr><tr><td>  <a href="http://web.chemdoodle.com/">ChemDoodle Web Components</a> <br></td><td>  7.0.1 <br></td><td>  354 KB (121 KB) <br></td><td>  Webgl <br></td><td>  rich, programmatically <br></td><td>  GPL v3 <br></td></tr><tr><td>  <a href="https://bitbucket.org/baoilleach/rasmoljs">Rasmoljs</a> <br></td><td>  - <br></td><td>  1.1 MB (462 KB) <br></td><td>  canvas, sdl, asm.js <br></td><td>  rich, programmatically <br></td><td>  GPL <br></td></tr><tr><td>  <a href="https://github.com/tilde-lab/player.html">Player.html</a> <br></td><td>  0.10 <br></td><td>  265 KB (83 KB) <br></td><td>  canvas, Three.js <br></td><td>  limited in UI <br></td><td>  MIT <br></td></tr></tbody></table><br><br>  Decisions based on Java applets, Flash and other plug-ins did not consider <s>as a dead-end branch of evolution</s> , only pure (as they say, ‚Äúvanilla‚Äù) JavaScript.  However, pure JavaScript can be <a href="https://github.com/jashkenas/coffeescript/wiki/List-of-languages-that-compile-to-JS">synthesized from a variety of other languages</a> , the first and third solutions are just such cases. <br><br>  <a href="http://wiki.jmol.org/index.php/JSmol">JSmol is</a> derived from Java <a href="http://www.jmol.org/">Jmol</a> code using a <a href="http://j2s.sourceforge.net/">Java2Script</a> tool.  The total amount of JSmol code is 12.7 MB, parts of which are loaded as needed.  The table above shows the volume required to start.  Functionally, this engine completely repeats its more well-known Java-fellow, providing the richest set of features.  The comparison could be completed here if it were not for the gigantic size (and the slowest start) and the costs of porting the foreign stack, in particular, the ugly and unreadable JavaScript. <br><br>  <a href="http://web.chemdoodle.com/">ChemDoodle Web Components is</a> based on a proprietary product.  This has advantages (excellent documentation, high quality of both the code and the product as a whole) and disadvantages (restrictions on use, non-switchable sending of information about users).  The disadvantages also include the lack of support for canvas in favor of WebGL, and therefore, the inoperability of slightly outdated equipment.  If flaws do not represent a problem, this engine can be called a winner. <br><br>  <a href="https://bitbucket.org/baoilleach/rasmoljs">RasmolJS is</a> obtained from its older C-brother <a href="http://www.rasmol.org/">RasMol</a> using <a href="http://emscripten.org/">Emscripten</a> .  British <a href="https://scholar.google.com/citations%3Fuser%3D53ns0q4AAAAJ">chemo-informatist Noel O'Boyle</a> ported the original graphical functionality to the SDL library supported by Emscripten, as a result, the trans-compiled JavaScript code performs 3d rendering in the canvas element.  In addition, the code is generated according to the asm.js standard, which in theory should provide a performance boost.  In practice, it turned out to be a rather ponderous and slow engine, besides, devoid of a number of functions of previous participants. <br><br>  <a href="https://github.com/tilde-lab/player.html">Player.html is</a> written by me using <a href="">Three.js</a> and <a href="http://mathjs.org/">Math.js.</a>  The emphasis is on minimalism and speed, as well as support for the widest possible range of equipment, so that the engine even works on ancient laptops.  Development started relatively recently, and the functionality is still not very rich.  Any criticism is therefore appreciated and thirsty. </div><p>Source: <a href="https://habr.com/ru/post/265673/">https://habr.com/ru/post/265673/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265653/index.html">3CX API - what are they and what to do with them? (Part 1)</a></li>
<li><a href="../265655/index.html">Thousand and one blister. Search for overpriced drugs</a></li>
<li><a href="../265657/index.html">Interview with the co-founder of the service to increase the conversion of mobile applications SplitMetrics</a></li>
<li><a href="../265661/index.html">"Who is on the first base" - a new geographical reference from Mapzen</a></li>
<li><a href="../265663/index.html">Multi select and autocomplete on AngularJS</a></li>
<li><a href="../265675/index.html">Broadcast online video with minimal latency</a></li>
<li><a href="../265677/index.html">Mobile etiquette</a></li>
<li><a href="../265679/index.html">Creating artificial intelligence for games - from design to optimization</a></li>
<li><a href="../265683/index.html">Many licenses, good and different</a></li>
<li><a href="../265685/index.html">Interview with Nenad Rakocevic about Red, successor to Rebol</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
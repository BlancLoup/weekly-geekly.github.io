<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Calculation in a Haskell heap</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Beginning of the Haskell Series 

 The spirit of Christmas gifts 

 Today in the article we will briefly review what happens when you open a gift ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Calculation in a Haskell heap</h1><div class="post__text post__text-html js-mediator-article">  The Beginning of the <a href="http://habrahabr.ru/blogs/Haskell/118797/">Haskell</a> Series <br><img src="https://habrastorage.org/getpro/habr/post_images/df5/04f/838/df504f83811a5e2393cb86956639e449.png"><br>  <em>The spirit of Christmas gifts</em> <br><br>  Today in the article we will briefly review what happens when you open a gift with the spirit inside in the Haskell pile.  Almost in everything that is in the heap, except for constants and what has already been calculated, the spirit sits.  The whole question is what will make the spirit in the gift. <br><a name="habracut"></a><br>  In the simplest case, almost nothing! <br><img src="https://habrastorage.org/getpro/habr/post_images/d48/39e/7a0/d4839e7a02512a357d91ae7ff231ad01.png"><br>  Unlike real gift certificates, you must take a gift (Haskell will not allow you to calculate the thunk, and then do not care about the indication that is inside) <br><img src="https://habrastorage.org/getpro/habr/post_images/b6d/ac7/737/b6dac7737278be409a837c2354b95b62.png"><br>  In most cases, it turns out that the spirit is a complete <em>bummer</em> .  When he is woken up in order to familiarize himself with the contents of the gift, he has not done anything yet and must work with other gifts first! <br><img src="https://habrastorage.org/getpro/habr/post_images/d88/a83/f06/d88a83f067f89bca596e4387f78908a8.png"><br>  To perform a primitive operation, you need to open all the gifts involved in it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43f/78b/25e/43f78b25e859a37b2c91f329d472b459.png"><br>  However, the spirit suddenly for no apparent reason can open an extraordinary gift ... <br><img src="https://habrastorage.org/getpro/habr/post_images/ea6/d54/a88/ea6d54a887d7c5f630d8217cb3f4d527.png"><br>  or perform a dangerous IO action with a side effect ... <br><img src="https://habrastorage.org/getpro/habr/post_images/25f/6a3/b76/25f6a3b76e4a367d29c9a7d060232407.png"><br>  Consider that, opening gifts, the spirit wakes up other spirits: <br><img src="https://habrastorage.org/getpro/habr/post_images/589/c01/0b1/589c010b10415cfaae2cbfab7fc95f6f.png"><br>  As a result, the spirits arrange a real Sabbath, and all this, to open a single gift! <br><img src="https://habrastorage.org/getpro/habr/post_images/52f/84c/079/52f84c079beb3117fe6247bb55d1784d.png"><br>  The fact that opening a single gift (thunk) can lead to a chain reaction is the reason why lazy calculations surprise people who previously kept all their objects in a heap of unpacked (calculated).  In order for a surprise to pass, you need to understand when the spirit decides to unpack a gift (strictness analysis / strictness analysis) or your gift can already be unpacked (amortized analysis). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Last time: <a href="http://habrahabr.ru/blogs/Haskell/118797/">Haskell Heap</a> <br>  Next time: <a href="http://habrahabr.ru/blogs/Haskell/118837/">IO works with a bunch of Haskell</a> </div><p>Source: <a href="https://habr.com/ru/post/118831/">https://habr.com/ru/post/118831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118819/index.html">Win a free participation in DEVCONF 2011</a></li>
<li><a href="../118821/index.html">Purchased links, goodbye?</a></li>
<li><a href="../118822/index.html">What to read on the weekend? Recommended, issue number 10</a></li>
<li><a href="../118828/index.html">iPhone + Google Analytics</a></li>
<li><a href="../118830/index.html">US Department of Homeland Security requires Mozilla to remove the MafiaaFire plugin</a></li>
<li><a href="../118832/index.html">Google Street View will show interior stores and restaurants.</a></li>
<li><a href="../118833/index.html">Movie and music startups attract the most investment</a></li>
<li><a href="../118835/index.html">Startup Jobs from PRUFFI (May 2-6)</a></li>
<li><a href="../118836/index.html">Computer flash drive for $ 25</a></li>
<li><a href="../118837/index.html">IO works with a bunch of Haskell</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hibernate duplicate fieldset</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The problem that I would like to describe today is a repeating set of fields in Hibernate entities. Of course, it could be solved with the help of nor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hibernate duplicate fieldset</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/a6c/a94/728/a6ca94728c1c305a5f379e89151a7b69.png"><br>  The problem that I would like to describe today is a repeating set of fields in Hibernate entities.  Of course, it could be solved with the help of normalizing the database, but this is inconvenient when sampling and affects the speed, unnecessary joins for the sake of several columns are not needed by anyone. <br>  So, let's imagine there is some kind of accounting system, in it in any entity it is important to keep history, who changed, who created, when there were recent changes, who created.  In fact, in any project you can find similar sets and not one.  As a result, when programmers create these fields, at best a copy-paste is obtained, and sometimes new names are born for the same fields. <br><br>  I would like to consider two ways to solve this problem. <br><a name="habracut"></a><br><h4>  First way </h4><br>  This task can be solved using <b>@Embeddable</b> entities: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.kabit.entity.embeded; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Embeddable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Date; <span class="hljs-meta"><span class="hljs-meta">@Embeddable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HistoryFields</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long lastModifierId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long creatorId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Date lastModifyDate; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Date createDate; <span class="hljs-comment"><span class="hljs-comment">/* getters and setters */</span></span> }</code> </pre> <br>  Remove removed fields from the class, insert one <i>embedded</i> property.  In practice, walking through the code and adding an extra getter before calling these fields is easy, but in XML, JSP it is difficult to find all the places. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.kabit.entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ru.kabit.entity.embeded.HistoryFields; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Embedded; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.GeneratedValue; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Id; <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Post</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long id; <span class="hljs-meta"><span class="hljs-meta">@Embedded</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> HistoryFields historyFields; <span class="hljs-comment"><span class="hljs-comment">/* getters and setters */</span></span> }</code> </pre><br>  If at least one field from <i>HistoryFields</i> is filled, then a <i>HistoryFields</i> object will be created and these fields will be filled, otherwise null will be in place of the object, which is by the way, very handy when writing logic.  The names of the fields in the database can be different, so the <i>@AttributeOverride</i> annotation is used to change them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>The advantages of</b> this approach: <br><ul><li>  The logical group of fields is highlighted in a separate entity, the fields will always be called the same, no one would ever think of them to write "according to the correct" </li><li>  The selected data is selected without subqueries, as they are in the same table. </li><li>  Search criteria for these fields will be unchanged </li><li>  There may be several such fields. </li></ul><br>  <b>Disadvantages</b> : <br><ul><li>  In some cases, the set of fields may be unnecessary, they will not work. </li><li>  When refactoring, you have to change JSP with your hands, it is difficult to do this in a large project, you have to recheck everything, or make additional getters that retrieve data from the Embedded fields </li></ul><br><h4>  Second way </h4><br>  The second solution is to use the <b>@MappedSuperclass</b> annotation: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.kabit.entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.GeneratedValue; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Id; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.MappedSuperclass; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Date; <span class="hljs-meta"><span class="hljs-meta">@MappedSuperclass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HistoryEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long lastModifierId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long creatorId; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Date lastModifyDate; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Date createDate; <span class="hljs-comment"><span class="hljs-comment">/* getters and setters */</span></span> }</code> </pre><br>  Now there is a base class with a set of fields and when we see a similar set, you can simply follow it: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.kabit.entity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.Entity; <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Table1</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HistoryEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long otherFieldTable1; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Long </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOtherFieldTable1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> otherFieldTable1; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setOtherFieldTable1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Long otherFieldTable1)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.otherFieldTable1 = otherFieldTable1; } }</code> </pre><br>  <b>The advantages of</b> this approach: <br><ul><li>  The selected data is selected without subqueries, as they are in the same table. </li><li>  When rendering fields on a working project, you will not have to refactor anything. </li></ul><br>  <b>Disadvantages</b> : <br><ul><li>  In some cases, the set of fields may be unnecessary, they will not work. </li><li>  Java does not have multiple inheritance, so if an entity fits two types, then this method does not fit </li></ul><br><h4>  Conclusion </h4><br>  I described how to get rid of re-describing the set of fields in Hibernate entities, and also described the advantages and disadvantages of each.  I hope that this article will be useful to you. </div><p>Source: <a href="https://habr.com/ru/post/180703/">https://habr.com/ru/post/180703/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180693/index.html">Airborne information systems of aircraft</a></li>
<li><a href="../180695/index.html">11 reasons to be a manager</a></li>
<li><a href="../180697/index.html">Why I do not believe in the domestic space - a view from the inside</a></li>
<li><a href="../180699/index.html">Moving a physical machine in a ProxmoxVE2 cluster (3) from DRBD to a new hardware</a></li>
<li><a href="../180701/index.html">Google Play Developer Console: New Features - New Issues</a></li>
<li><a href="../180705/index.html">Automated testing of a web application (MS Unit Testing Framework + Selenium WebDriver C #). Part 3: WebPages - describing pages</a></li>
<li><a href="../180707/index.html">Russian 3D core zahabreno. Answers to your questions</a></li>
<li><a href="../180709/index.html">The visual language of DRAGON and its application in the rocket and space industry, medicine and other fields. Video report V. Parondzhanova</a></li>
<li><a href="../180711/index.html">Kim Dotcom and two-factor authentication</a></li>
<li><a href="../180715/index.html">Google acquired the manufacturer of flying wind turbines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Node.js 10 innovations in development and security</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Node.js 10.0.0 was recently released. This is the seventh major release of the platform. In October 2018, he will receive LTS status for three years. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Node.js 10 innovations in development and security</h1><div class="post__text post__text-html js-mediator-article">  Node.js 10.0.0 was recently released.  This is the seventh major release of the platform.  In October 2018, he will receive LTS status for three years.  Usually the main releases of Node are released twice a year.  One - in April, and the second - in October.  The material, the translation of which we are publishing today, gives an overview of the main innovations of Node.js 10.0.0 in terms of server application development and security. <br><br> <a href="https://habr.com/company/ruvds/blog/359150/"><img src="https://habrastorage.org/getpro/habr/post_images/08e/509/e85/08e509e85c24cfa5ef3a9af78eda385f.jpg" alt="image"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Error handling improvements</font> </h2><br>  Before Node 10.0.0 was released, the only way to recognize errors in <code>catch</code> expressions was to check the text of the error message, which complicated problem analysis and application debugging.  It looked like this. <br><br><pre> <code class="hljs ruby">try {   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -  } catch(error) {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(error.message == <span class="hljs-string"><span class="hljs-string">'Some error message'</span></span>) {       <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {       <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     } }</code> </pre> <br>  In total, about <a href="https://nodejs.org/en/blog/release/v10.0.0/">300 commits</a> were made to improve the error handling situation.  Due to this, we now have error codes that are more convenient to check than messages.  It simplifies the work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs ruby">try {   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> -  } catch(error) {   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(error.code == <span class="hljs-string"><span class="hljs-string">'Some error code'</span></span>) {       <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {       <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     } }</code> </pre> <br><h2>  <font color="#3AC1EF">Improved performance</font> </h2><br>  Performance improvements include asynchronous generators, built-in asynchronous loops that support work with promises, and improved mechanisms for working with arrays. <br><br>  Using the Node V8 6.6 engine gave a significant performance boost.  So, for example, functions for working with arrays, such as <code>reduce</code> , <code>map</code> and <code>filter</code> , are about 10 times faster. <br><br><pre> <code class="hljs axapta">const <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>].reduce((<span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>, num) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">sum</span></span>+=num,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  All these and other improvements contribute to improving the performance of applications built on the Node.js platform. <br><br><h2>  <font color="#3AC1EF">Experimental version of the fs module with promise support</font> </h2><br>  It was possible to convert functions using callbacks into constructions that support promises even earlier, with the help of <code>utils.promisify</code> .  However, if we talk about the use of promises, it is much better if a certain API is initially oriented towards them.  Now the <code>fs</code> module supports promises in experimental mode.  Full support is expected in the October release of Node. <br><br><h2>  <font color="#3AC1EF">Improved HTTP and HTTP / 2 support</font> </h2><br>  The HTTP / 2 protocol supports TCP multiplexing.  This means that the procedure for establishing a TCP connection can be performed only once, after which the server can reuse an existing connection to send responses to various requests. <br><br>  HTTP / 2, in addition, supports the technology to send data initiated by the server (server push).  In particular, this means that when the browser requests the HTML file from the server, the server can, on its own initiative, send the files with the JS code and CSS rules necessary for the correct display of the page to the browser.  These resources fall into the browser cache.  As a result, when these resources are needed by the browser, it will be able to use them much faster than if it had to, in order to download them, intentionally request them from the server.  Here is an example using HTTP / 2. <br><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> http2 = <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http2'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> server = http2.createSecureServer(   { cert, key },   onRequest ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stream, filePath)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { file, headers } = getFile(filePath)   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pushHeaders = { [HTTP2_HEADER_PATH]: filePath }   stream.pushStream(pushHeaders, (pushStream) =&gt; {       pushStream.respondWithFD(file, headers)   }) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRequest</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(req, res)</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-comment"><span class="hljs-comment">//     index.html   if (reqPath === '/index.html') {       push(res.stream, 'bundle1.js')       push(res.stream, 'bundle2.js')   }   //    res.stream.respondWithFD(file.fileDescriptor, file.headers) }</span></span></code> </pre> <br>  It should be noted that browsers support HTTP / 2 only via SSL, so here, in production, you need some kind of proxy server, like Nginx. <br><br><h2>  <font color="#3AC1EF">Cryptography and Security</font> </h2><br>  Node 10.0.0 adds support for the OpenSSL 1.1.0 cryptographic library, which supports TLS / SSL protocols.  Thanks to this library, in addition, you can now work with the ChaCha20 stream cipher and the Poly1305 message authentication algorithm.  In October, it is planned to expand the set of supported cryptographic technologies.  We are talking about the support of <a href="https://ru.wikipedia.org/wiki/AEAD-%25D1%2580%25D0%25B5%25D0%25B6%25D0%25B8%25D0%25BC_%25D0%25B1%25D0%25BB%25D0%25BE%25D1%2587%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D1%2588%25D0%25B8%25D1%2584%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">AEAD</a> encryption modes, which are used to organize secure messaging, and support for additional cryptographic libraries. <br><br>  Here it should be noted that with the release of npm 6.0 special attention was paid to security.  This was partly due to the results of one study, which showed that 97% of JavaScript developers worldwide rely, at least in some of their developments, on open-source projects.  Moreover, 77% of developers are worried about the security of such solutions.  In order to better document and fix module vulnerabilities and potential dependency conflicts, npm purchased the Node Security Platform project.  This project is the main source of information about vulnerabilities of JS packages. <br><br>  Npm 6.0 supports a new command to analyze security issues: <code>npm audit</code> .  It allows users to recursively analyze dependency trees to detect potential conflicts and problem areas.  This allows developers to replace obsolete packages with their newer versions in their projects, without waiting for problems to occur, or switch to other packages if those that they use can cause unwanted effects. <br><br><h2>  <font color="#3AC1EF">Javascript enhancements</font> </h2><br>  Node.js 10.0.0 has some improvements regarding javascript.  Here are some of them: <br><br><ul><li>  There is no longer any need to use parameters in the <code>catch</code> expression of <code>try-catch</code> . </li><li>  The <code>Function.prototype.toString()</code> command now returns only the text of the source code of the function, which has a beneficial effect on security by preventing information leakage. </li><li>  In Node, thanks to the new V8, there was support for the methods <code>String.prototype.trimEnd()</code> , <code>String.prototype.trimStart()</code> . </li></ul><br><h2>  <font color="#3AC1EF">Improved debugging mechanisms</font> </h2><br>  In Node.js 10.0.0, debugging is greatly simplified.  In particular, the developer now has a <code>trace_events</code> module, which allows centrally, from the code (that is, for this you no longer need to access the command line), manage the trace information coming from various sources, in particular, from the V8 engine, from the kernel node and from custom code.  This data can be written to a file, they are understood by the Google Chrome developer tools.  This is how the new API works. <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> t_events = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'trace_events'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tracing = t_events.createTracing({   <span class="hljs-attr"><span class="hljs-attr">categories</span></span>: [<span class="hljs-string"><span class="hljs-string">'async.hooks'</span></span>, <span class="hljs-string"><span class="hljs-string">'v8'</span></span>] }) tracing.enable() <span class="hljs-comment"><span class="hljs-comment">// -  tracing.disable()</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Full N-API support</font> </h2><br>  N-API is an API for developing native extensions for Node.js.  This API is independent of the JS engine (for example, V8), it is supported as part of Node.js itself. <br><br>  The N-API is not tied to the Node release.  That is, when the new release of Node is released, extensions written for old releases will not have to be redone.  In particular, we are talking about abstraction over API V8, which gives developers of native extensions a stable environment.  Until now, the N-API had the status of an experimental technology, however, in Node 10.0.0 it was transferred to the category of stable API. <br><br>  In general, N-API is useful to developers of native extensions for Node due to the fact that it gives them a fairly stable means for interacting with the platform.  At the same time, ideally, thanks to the N-API, developers of native modules may not worry, for example, which JS engine is used in a particular Node installation. <br><br><h2>  <font color="#3AC1EF">Experimental support for ChakraCore</font> </h2><br>  As you know, the Node.js platform was initially supported only by the V8 JS engine, but now, as part of the <a href="https://github.com/nodejs/node-chakracore">Node-ChakraCore project</a> , work is underway to support Microsoft‚Äôs <a href="https://github.com/Microsoft/ChakraCore">ChakraCore</a> engine in Node.  In general, support for Node alternative JS engines is a good trend, which may be of particular interest to IoT developers. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  In Node 10.0.0 a lot of new things have appeared.  With the development of this platform becomes more productive, convenient and versatile.  At the moment, the current release of Node is <a href="https://nodejs.org/en/blog/release/v10.1.0/">Node 10.1.0</a> , in which some bugs were fixed and some things were improved. <br><br>  <b>Dear readers!</b>  Which features of Node.js 10 seem to you the most interesting? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/359150/">https://habr.com/ru/post/359150/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359136/index.html">Machine learning and a polypropylene extruder: history 3 places on the hakatone Sibur</a></li>
<li><a href="../359142/index.html">Internet ombudsman invited the Prosecutor General‚Äôs Office to check Roskomnadzor, millions of Amazon addresses are still blocked</a></li>
<li><a href="../359144/index.html">The insides of the SDR chip AD9361 - when microelectronics is more profitable than drug trafficking</a></li>
<li><a href="../359146/index.html">Simple and efficient calculation of Modbus CRC16 in PLC and MK without bitwise shift and tables</a></li>
<li><a href="../359148/index.html">Adobe bought Magento for $ 1.68 billion</a></li>
<li><a href="../359152/index.html">How to customize a block of links in a group on VKontakte</a></li>
<li><a href="../359154/index.html">Setting Data Science tasks and interaction with business</a></li>
<li><a href="../359156/index.html">New BILLmanager interface</a></li>
<li><a href="../359158/index.html">Material Design Updates: How to Live</a></li>
<li><a href="../359162/index.html">How self-service systems solve shoplifting problems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
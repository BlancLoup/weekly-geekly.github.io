<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java computer vision for Android. BoofCV Library Overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probably every Android programmer at least once thought about writing something useful using computer vision or augmented reality. And some even wrote...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java computer vision for Android. BoofCV Library Overview</h1><div class="post__text post__text-html js-mediator-article">  Probably every Android programmer at least once thought about writing something useful using computer vision or augmented reality.  And some even wrote hello, word using opencv, which they also ported to Android.  Unfortunately, if we want to write something serious, we will find that the set of libraries with already implemented functions of Computer Vision is not so great, especially this concerns the Android platform.  Most often for this purpose they use opencv, written in C ++, or write their bikes, which is generally good, but not as fast as we would like in terms of implementation.  However, not everything is so bad.  There is such a wonderful project <a href="http://boofcv.org/">BoofCV</a> , which is a computer vision library written in pure Java.  The last two letters in the name of the library mean exactly what you thought.  And in the latest release appeared the long-awaited support for Android.  Below we look at the main buns provided by the library on a specific example. <br><a name="habracut"></a><br><h4>  BoofCV - short description </h4><br><br>  So, BoofCV is an open source computer vision library written in pure Java.  The algorithms used inside are well optimized and, as practice shows, in speed in some cases they are not inferior to the implementation in C ++ opencv.  The main features of the library: <br>  ‚Ä¢ Work with video and web cameras; <br>  ‚Ä¢ 3D Computer Vision; <br>  ‚Ä¢ Filters (blur, gradient), noise removal (using wavelets); <br>  ‚Ä¢ Binarization, morphological operations; <br>  ‚Ä¢ Allocation of boundaries (Kenny, Sobel); <br>  ‚Ä¢ Search for points of interest; <br>  ‚Ä¢ Search for lines, segments, rectangles; <br>  ‚Ä¢ Stereo images. <br><br>  In addition, the library contains many more functions used in computer vision.  The library is connected quite simply - you can download the source code from the official site and compile it yourself, or you can download the jar files already collected and simply connect them to the project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For experiments, take this picture: <br><br><img src="https://habrastorage.org/storage2/724/b01/cd3/724b01cd3b7f476ec312933f4f55417b.jpg"><br><br>  First, let's try a Gaussian blur: <br><br><img src="https://habrastorage.org/storage2/ccb/9d9/b0b/ccb9d9b0b7d7c35736f9f06cf22227eb.jpg"><br><br>  To get this picture, we use the BlurImageOps.gaussian function: <br>  // Here and below, image is a source image of type ImageUInt8 <br><br><pre><code class="java hljs">ImageUInt8 blurred = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageUInt8(image.width,image.height) ImageUInt8 blurred = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageUInt8(image.width,image.height); BlurImageOps.gaussian(image,blurred,-<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>);</code> </pre> <br><br>  Now add noise to the original image and filter it: <br><br><img src="https://habrastorage.org/storage2/a63/fbb/441/a63fbb441884a54e53444bd60c40ac89.jpg"><br><img src="https://habrastorage.org/storage2/896/b6f/82d/896b6f82d58b245db9ff0985a49cc626.jpg"><br><br>  Add and remove noise: <br><br><pre> <code class="java hljs">Random rand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(<span class="hljs-number"><span class="hljs-number">234</span></span>); ImageUInt8noisy = image.clone(); GeneralizedImageOps.addGaussian(noisy,rand,<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>); ImageUInt8denoised = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageFloat32(ImageUInt8.width, ImageUInt8.height); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numLevels = <span class="hljs-number"><span class="hljs-number">4</span></span>; WaveletDenoiseFilter&lt; ImageUInt8&gt; denoiser = FactoryImageDenoise.waveletBayes(ImageUInt8.class,numLevels); denoiser.process(noisy,denoised);</code> </pre><br><br>  Allocation of borders: <br><br><img src="https://habrastorage.org/storage2/5f1/85f/57b/5f185f57b0787dc1e1a8cc37b71ac8d4.jpg"><br><br>  Code: <br><br>  I <pre> <code class="java hljs">mageUInt8 canny = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageUInt8(image.width,image.height); <span class="hljs-comment"><span class="hljs-comment">//Canny DetectEdgeContour&lt;ImageUInt8&gt; simple = FactoryDetectEdgeContour.canny(30,200,false,ImageUInt8.class,ImageSInt16.class); simple.process(image); List&lt;List&lt;Point2D_I32&gt;&gt; edges = simple.getContours(); for( List&lt;Point2D_I32&gt; l : edges ) { for( Point2D_I32 p : l ) { canny.set(px,py, 255); } }</span></span></code> </pre><br><br>  Image binarization: <br><br><img src="https://habrastorage.org/storage2/af2/36d/064/af236d0647b31252124cb67e024d8e18.jpg"><br><br>  Code: <br><br><pre> <code class="java hljs">ImageUInt8 binary = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageUInt8(image.width,image.height); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> mean = PixelMath.sum(image)/(image.width*image.height); ThresholdImageOps.threshold(image, binary,mean,<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>);</code> </pre><br><br>  Binarized image markup: <br><br><img src="https://habrastorage.org/storage2/6f5/20e/7b4/6f520e7b4ecd549a1fa0fe3414e79aad.jpg"><br><br>  Code: <br><br><pre> <code class="java hljs">ImageSInt32 blobs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageSInt32(image.width, image.height); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numBlobs = BinaryImageOps.labelBlobs4(binary,blobs);</code> </pre><br><br>  Search points of interest: <br><br><img src="https://habrastorage.org/storage2/cb2/944/cde/cb2944cdee02295531b009923f4e8a56.jpg"><br><br>  I will not give the code in order not to overload the article, an example is in the manual. <br><br>  And then a natural question arises - where is Android?  In order to use the library in Android, there is a class ConvertBitmap, containing methods for converting from Android format to BoofCV library format and back. <br>  For example: <br><pre> <code class="java hljs">Bitmap map = BitmapFactory.decodeResource(getResources(), R.drawable.car5); ImageUInt8 image = ConvertBitmap.bitmapToGray(map, (ImageUInt8)<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>);</code> </pre><br><br><h4>  Conclusion: </h4><br><br>  Of course, this is only a small part of all the capabilities of the library.  According to the functional BoofCV, of course loses to such monsters as opencv.  However, the threshold for entering computer vision for Android is significantly reduced when using BoofCV. <br>  At the same time, the library showed good performance, which allows it to be used in real-time systems.  So the search and localization of the rectangle with the necessary parameters (for example, car number) takes about 0.2 - 0.5 seconds, depending on the size of the image.  The library is well documented. </div><p>Source: <a href="https://habr.com/ru/post/149607/">https://habr.com/ru/post/149607/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149597/index.html">IBM THINK - a new application about the history of progress</a></li>
<li><a href="../149598/index.html">Running Linux on a tablet with SoC Allwinner A10 on board</a></li>
<li><a href="../149603/index.html">Unity3D 3.x Get the current active window</a></li>
<li><a href="../149605/index.html">Teach computer feelings (sentiment analysis in Russian)</a></li>
<li><a href="../149606/index.html">Bart Chalkboard Generator</a></li>
<li><a href="../149608/index.html">Work and travel - stupid, useless, humiliating?</a></li>
<li><a href="../149610/index.html">What should Android apps look like?</a></li>
<li><a href="../149612/index.html">CPython vs. IronPython: MD5 Hash Calculation</a></li>
<li><a href="../149613/index.html">Report on the attempt to get the declared performance from the prepared statements</a></li>
<li><a href="../149615/index.html">Published records of the Summer School reports Windows 8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
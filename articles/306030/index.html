<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Software update and initial setup instructions for Nokia 7210 SAS-M</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is intended for those who want to understand the procedure for the initial commissioning of Nokia (formerly Alcatel-Lucent) 7210 SAS-M eq...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Software update and initial setup instructions for Nokia 7210 SAS-M</h1><div class="post__text post__text-html js-mediator-article"><p>  This article is intended for those who want to understand the procedure for the initial commissioning of Nokia (formerly Alcatel-Lucent) 7210 SAS-M equipment.  The only correct approach when working with any equipment is preliminary reading of the documentation.  But the reality is that a person can be given the task of urgently launching equipment without preparing him for his future work.  The deadlines are burning, there is no documentation, the setting is carried out ‚Äúon a whim‚Äù.  Unfortunately, this is not a rare life situation, but the results of it, in most cases, are pitiable. </p><br><img src="https://habrastorage.org/files/30c/7b2/455/30c7b2455bff4f1eab1ac1c6ff2b89d9.jpg"><a name="habracut"></a><br><p>  I will try to help understand the procedure of the primary integration of 7210 SAS-M on the network, but I will immediately note that no instruction can replace the official documentation from the manufacturer, especially since the new versions of the software can be changed.  I plan to restrict myself to the minimum information that is required to run the 7210 and provide it with remote access.  Nevertheless, I will willingly supplement this article (or write a new one, if the questions go beyond its scope) with information to which interest will be shown. </p><br><p>  If you are interested in the Nokia 7750 primary configuration theme (SR-7 | SR-12), then you can read about it in the <a href="https://habrahabr.ru/post/306168/">corresponding article.</a> </p><br><h3>  1. Software update on 7210 SAS-M </h3><br><p>  First of all, I recommend upgrading the software (TiMOS) to the current version.  I want to immediately note that in the case of using the 5620SAM control system, it is necessary to consider which maximum version of TiMOS it supports. </p><br><h5>  <b>1.1 Preparation for work</b> </h5><br><p>  What is needed for the work: </p><br><p>  1) Laptop with a COM port or usb-com adapter; <br>  2) Console cable for 7210. I am using a Cisco rollover cable; <br>  3) Terminal client (Putty, SecureCRT or equivalent); <br>  4) TFTP server (tftp32 or equivalent); <br>  5) The presence of current TiMOS (as an example, used TiMOS 7.0R12, but the instruction is relevant for all versions). </p><br><h5>  <b>1.2 Fill software</b> </h5><br><p>  To download software, you need to connect to the Console port and configure session parameters as follows: </p><br><p><code>Baud Rate 115,200</code> <br> <code>Data Bits 8</code> <br> <code>Parity None</code> <br> <code>Stop Bits 1</code> <br> <code>Flow Control None</code> </p> <br><p>  Direct cable connect Management Port 7210 to the computer network card.  Set IP to the local computer (in the example 192.168.1.10/24).  Start the TFTP server and select the directory with TiMOS as the working folder. </p><br><p>  If TiMOS is already installed on the SAS-M, then skip point 1.3 and go directly to 1.4. </p><br><h5>  <b>1.3 There is no TiMOS on the equipment (monitor mode)</b> </h5><br><p>  Press any key to start changing the boot parameters.  When requesting a password, enter: ‚Äúpassword‚Äù.  Next, follow the dialogue: </p><br><p>  <code>tftp://192.168.1.10/7210/TiMOS-7.0.R12/both.tim</code> # Set the address of the operating system </p><br><p>  <code>tftp://192.168.1.10/7210/config.cfg</code> # Set the address of the configuration file </p><br><p>  We enable the eth-mgmt port by typing the enable command and assign an IP address from the same subnet as configured on the computer. <br>  When prompted to save the configuration, we answer - yes. </p><br><p>  After this step, the operating system should boot up. </p><br><h5>  <b>1.4.</b>  <b>Equipment loaded (TiMOS)</b> </h5><br><p>  Login / password: admin / admin </p><br><p>  <code>bof</code> # Go to the settings menu Boot Options File </p><br><p>  <code>no eth-mgmt-disabled</code> # Enable eth-mgmt </p><br><p>  <code>eth-mgmt-address 192.168.1.1/24</code> # Assign an eth-mgmt address to our 7210 </p><br><p>  <code>save</code> # Save the Boot Options File </p><br><p> <code>back</code> </p> <br><p>  <code>file dir</code> # Check the free space on the memory card.  At the time of writing, two versions of TimOS can be loaded onto the card.  In case of insufficient memory, files can be deleted with the command file delete "file name" </p><br><p>  <code>file md cf1:\TiMOS-7.0.R12</code> # Create a folder for the new TiMOS on the memory card </p><br><p>  <code>file copy tftp://192.168.1.10/both.tim cf1:\TiMOS-7.0.R12\both.tim</code> # Load the TiMOS image </p><br><p>  <code>file copy tftp://192.168.1.10/boot.tim cf1:\TiMOS-7.0.R12\boot.tim</code> # Save the boot loader to a folder with the corresponding TiMOS (this is done with the goal of saving this file for when it will be overwritten The new version. Boot boot loader is loaded from cf1 :) </p><br><p>  <code>file copy tftp://192.168.1.10/boot.tim cf1:\boot.tim</code> # Download (overwrite) boot loader </p><br><p>  <code>bof primary-image cf1:\TiMOS-7.0.R12\both.tim</code> # Specify the main TimOS image to load </p><br><p>  <code>bof secondary-image cf1:\&lt;   TiMOS,   &gt;</code> # Optional </p><br><p>  <code>bof primary-config cf1:\config.cfg</code> # Specify the configuration file </p><br><p>  <code>bof no eth-mgmt-address 192.168.1.1/24</code> # Delete the address eth-mgmt </p><br><p>  <code>bof eth-mgmt-disabled</code> # Disable eth-mgmt </p><br><p> <code>bof save</code> </p> <br><p> <code>admin save</code> </p> <br><p>  After saving the configuration (admin save), you need to restart 7210 with the <code>admin reboot upgrade</code> command and make sure that the equipment has been successfully loaded.  I want to note that the addition of "upgrade" in the command indicates to SAS-M the need to upgrade CPLD (Complex Programmable Logic Device).  You can find out the version of CPLD with the <code>show boot-messages</code> .  At the time of writing, the current version is 2.9 </p><br><p>  After the reboot, you must complete the procedure by updating the Golden BOOT Loader with the <code>admin update-golden-bootstrap</code> command <code>admin update-golden-bootstrap</code> </p><br><h5>  <b>1.5 Checking the update</b> </h5><br><p>  <code>show version</code> # Checking the version of TiMOS, which runs 7210; <br>  <code>admin check-golden-bootstrap</code> # Check bootloader version; <br>  <code>show boot-messages</code> # Check the version of CPLD; <br>  <code>file dir</code> # Check for free space on the memory card. </p><br><h3>  2. Initialization of Media Dependent Adapter (for example, m2-xfp) </h3><br><p><img src="http://d-krupnik.ru/wp-content/uploads/2016/07/MDA2.jpg" alt="image"></p><br><p>  In the 7210 SAS-M, it is possible to install an optional MDA module, which requires the following configurations: </p><br><p>  2.1 Initialize the card in bof: <code>use-expansion-card-type m2-xfp</code> </p><br><p>  2.2 Exclude two existing ports from operation (for example, 23 and 24) in bof: <code>no-service-ports 1/1/23 1/1/24</code> <br>  Important!  The configuration of the excluded ports must be completely cleared: </p><br><p> <code>port 1/1/23</code> <br> <code>shutdown</code> <br> <code>ethernet</code> <br> <code>exit</code> <br> <code>exit</code> </p> <br><p>  Otherwise, after a reboot, the application of the configuration on these ports will stop. </p><br><p>  2.3 Initialize the map in the configuration: </p><br><p> <code>card 1</code> <br> <code>mda 2</code> <br> <code>mda-type m2-xfp</code> <br>  <code>sync-e</code> # If we plan to use sync-e sync transfer <br> <code>no shutdown</code> <br> <code>exit</code> <br> <code>no shutdown</code> <br> <code>exit</code> </p> <br><p>  2.4 Restart 7210. </p><br><p>  2.5 Checking the MDA definition with the <code>show mda 1/2 detail</code> command </p><br><p>  Note: mda 1/1 we will not be able to pull out, our "fixed" ports are attached to it.  But sync-e also needs to be forcedly reflected in the mda 1/1 configuration if we want to use this technology on SAS-M ports. </p><br><h3>  3. Example of initial setup 7210 SAS-M </h3><br><p> <code>/configure system name ""</code> </p> <br><p>  Prepare the port, create and associate an interface with it: </p><br><p> <code>/configure port 1/1/1</code> <br> <code>description " "</code> <br> <code>no shutdown</code> </p> <br><p> <code>/configure router</code> <br> <code>interface "system‚Äù</code> <br>  <code>address &lt;IP &gt;/32</code> # Create a system virtual interface <br> <code>no shutdown</code> <br> <code>exit</code> </p> <br><p> <code>interface " "</code> <br>  <code>address &lt;IP &gt;/30</code> # interface ip address <br>  <code>port 1/1/1</code> # Port on our equipment from which the link goes <br> <code>no shutdown</code> <br> <code>exit</code> </p> <br><p> <code>/configure router ospf</code> <br>  <code>area 0.0.0.0</code> # The area number in which will be 7210 <br>  <code>interface "system"</code> # Be sure to include the "system" interface in this aria <br> <code>exit</code> <br>  <code>interface " "</code> # Specify the names of all interfaces included in this aria <br>  <code>interface-type point-to-point</code> # Specify interface type <br> <code>exit</code> </p> <br><p>  If 7210 participates in more than one aria, then it is necessary to prescribe the second aria and all its interfaces.  If the interface participates in the non backbone area as secondary, then it is configured as follows: </p><br><p> <code>area 0.0.0.1 interface "system" secondary exit</code> </p> <br><p>  This configuration is the minimum that will allow remote access to the 7210 SAS-M on a network with configured OSPF protocol. </p><br><h3>  4. Useful notes </h3><br><ul><li>  You can view the configuration using the ‚Äúadmin display-config‚Äù command.  If it is necessary to execute the command (any) from the location of your location in the console, then set the prefixed "/". </li><li>  By executing the ‚Äúinfo‚Äù command, you can see the configuration that belongs to the branch of your location.  If it is necessary to view the values ‚Äã‚Äãof the ‚Äúdefault‚Äù parameters, then use ‚Äúinfo detail‚Äù </li><li>  With the ‚Äúshow chassis‚Äù and ‚Äúshow card‚Äù commands you can find out the chassis temperature and the FAN mode of operation.  If the fans operate in full speed mode, this indicates an increased temperature condition of the unit. </li><li>  Nokia‚Äôs requirements for site temperature: <br>  - For 7210 SAS-M it is necessary to organize the maintenance of the temperature on the site in the range from 0 to 50 ¬∞ C. <br>  - For 7210 SAS-M 24F 2XFP ETR it is necessary to maintain the temperature at the site in the range from -40 to 65 ¬∞ C. </li><li>  With the ‚Äúshow chassis‚Äù command, you can get information about the power supply and its output outside the allowable limits. </li><li>  The commands ‚Äúshow log log-id 100‚Äù and ‚Äúshow log log-id 99‚Äù will allow you to view the Default Serious Errors Log and the Default System Log, respectively. </li><li>  The "show port" command allows you to check the status of ports </li><li>  The show router route-table command will reflect the routing table </li><li>  If you got the bonus game, or rather 7210 SAS-M with TiMOS version 2 and below, then the update is performed through the 3rd release.  I also note that the software will not be poured through the MGM port, for this task it is necessary to use ports 1/1/1 or 1/1/2. </li><li>  IOS (Cisco): ‚Äúping 1.1.1.1 size 1500 df-bit‚Äù, in this case 1500 bytes is the size of the datagram already with IP and ICMP headers. </li><li>  TiMOS (Nokia): "ping 1.1.1.1 size 1472" - 1472 bytes indicate the size of the data field in ICMP.  In other words, we add another 8 bytes of ICMP and 20 bytes of IP and we get the same 1500 bytes as on Cisco. </li><li>  When contacting Nokia technical support, you will need to provide two tech-support files, shot with the command <i>"/ admin tech-support cf1: &lt;file name&gt; .bin"</i> with a minimum time difference of 15 minutes.  Unfortunately, unlike many other vendors, these files are encrypted and only Nokia engineers will be able to read them.  In case of any problems or accidents, first of all I recommend removing the first tech-support file, and then proceed to solve the problem. </li></ul><br><p>  UPD: In 2014, an article on setting 7210 SAS-M was posted on Habr√©.  In it, the author (YangAngel) made a number of gross errors, the consequences of which I <a href="https://habrahabr.ru/post/306030/">wrote</a> , responding to the received "feedback".  If you used (use) the YangAngel article to configure the 7210 SAS-M, then I strongly recommend to pay attention to the specified comment and clause 1.5 of my article. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/306030/">https://habr.com/ru/post/306030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306020/index.html">HR work in the eyes of the developer</a></li>
<li><a href="../306022/index.html">Log in to VK for people</a></li>
<li><a href="../306024/index.html">Self-employment is not freedom. The myth of the happy life of an entrepreneur</a></li>
<li><a href="../306026/index.html">Connect the HP tape library via Fiber Channel to an ESXi 5.5 host</a></li>
<li><a href="../306028/index.html">CLion 2016.2 release: remote debugging, Doxygen format support, new code generation features and much more</a></li>
<li><a href="../306032/index.html">Introduction to Veeam Agent for Linux</a></li>
<li><a href="../306034/index.html">Removing a key from a token with a non-recoverable key</a></li>
<li><a href="../306036/index.html">How to make the next bot in Telegram</a></li>
<li><a href="../306038/index.html">Webinar: Meet Asterisk</a></li>
<li><a href="../306040/index.html">Hiring technicians sank by 40% - and no one talks about it</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
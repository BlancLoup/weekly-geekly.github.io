<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cancel the transition to "winter" time</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In connection with the abolition of the transition to ‚Äúwinter‚Äù time, development companies ask us questions related to possible problems that may aris...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cancel the transition to "winter" time</h1><div class="post__text post__text-html js-mediator-article">  In connection with the abolition of the transition to ‚Äúwinter‚Äù time, development companies ask us questions related to possible problems that may arise with the correct operation of applications.  To answer these questions, we prepared this material, which contains tips on using date / time functions correctly, checking the code to find potential problems, and describing the steps that need to be performed to correctly deploy the update of both the operating system and the applications themselves. .  Below we will cover the following topics: <br><br><ul><li>  Approaches to testing applications and checking code </li><li>  Recommendations for correct work with date / time </li><li>  Approaches to search for operating system updates </li><li>  App Updates </li><li>  Additional materials </li></ul><a name="habracut"></a><br><h3>  Introduction </h3><br>  In the summer of this year, the Government of the Russian Federation passed a law abolishing the seasonal rendition of hours and set the relevant time zones and time values.  ‚ÄúSummer‚Äù and ‚Äúwinter‚Äù time, also called ‚Äúseasonal time‚Äù or ‚ÄúDaylight Saving Time‚Äù (DST), is a time-calculating mode in which the clock is shifted one hour ahead in spring and one hour back in the fall.  Spring and autumn transitions differ in the Northern and Southern Hemispheres.  The transition to summer time in the Northern Hemisphere usually begins in March or April (depending on the country and continent), and the transition to winter time takes place in October or November.  In the Southern Hemisphere, the opposite is true: ‚Äúsummer‚Äù time begins in October, and ‚Äúwinter‚Äù time begins in March or April.  Note that the transition to "summer" and "winter" time does not occur in all countries. <br><br><h3>  Application Testing and Code Verification </h3><br>  The first step in preparing to cancel winter time is to install the appropriate operating system update, which is available at <a href="http://support.microsoft.com/kb/2570791">http://support.microsoft.com/kb/2570791</a> .  Next, you need to make sure that the application works correctly with the new time zone settings and the disabled settings for the transition to "winter" and "summer" time.  To do this, it is recommended to write a test script and compare the results of the application on a computer where the update has not yet been installed and on the computer with the update installed.  If problems are found, it is recommended to check the application code, paying attention to the following functional blocks: <ul><li>  Getting or calculating the date / time </li><li>  Using proprietary algorithms for checking the time zone, the transition to the "winter" and "summer" time </li><li>  Own calculations of time ranges, such as date differences in hours, minutes, and seconds </li><li>  Calculations related to the compensation of transitions to the "winter" and "summer" time </li><li>  Convert date / time representation for storage or display </li></ul>  The recommendations below will minimize the effect of canceling the transition to winter time and, in general, improve the work with date / time in applications. <ul><li>  When installing updates, pay attention to the fact that updates were performed sequentially, preferably sequentially, one after the other. </li><li>  Use the date / time stored in UTC (Coordinated Universal Time replaces the ‚Äúobsolete‚Äù GMT, GMT).  This view accurately displays historical data.  In most cases, problems arise with the conversion to a local representation, since  in this case, it is necessary to obtain information about the time zone and DST (day-saving time).  This information can be obtained from various sources: </li><li>  When implementing communications between computers, including the exchange of date / time, must be performed in the UTC-representation - this gives both computers the same contextual information for UTC </li></ul>  Below are some scenarios for using date / time functions that can be used to perform date / time conversions to a local representation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Date / Time Conversion to Local View </h4><br>  There are a number of software interfaces in the Microsoft Windows operating system that can be used to convert UTC time to a local representation. <ul><li>  The functions <b>GetSystemTime ()</b> and <b>GetSystemTimeAsFileTime ()</b> return the time in UTC in a structure of type <b>SYSTEMTIME</b> or <b>FILETIME</b> </li><li>  The <b>GetLocalTime ()</b> function returns the current local time in a structure of the <b>SYSTEMTIME</b> type </li><li>  The <b>GetTimeZoneInformation ()</b> function returns a <b>TIME</b> <b>_</b> <b>ZONE</b> <b>_</b> <b>INFORMATION</b> structure describing the current time zone and DST settings of the computer. </li><li>  The functions <b>SystemTimeToFileTime</b> <b>()</b> and <b>FileTimeToSystemTime</b> <b>()</b> are used to convert data in structures of type SYSTEMTIME or <b>FILETIME</b> </li><li>  The <b>FileTimeToLocalFileTime</b> <b>()</b> and <b>LocalFileTimeToFileTime</b> <b>()</b> functions convert the <b>FILETIME</b> structure between UTC and local time, taking into account the DST settings </li><li>  The <b>SystemTimeToTzSpecificLocalTime</b> <b>()</b> and <b>TzSpecificTimeToSystemTime</b> <b>()</b> functions convert a UTC-date / time in the SYSTEMTIME structure to a local <b>SYSTEMTIME</b> structure.  These functions use the <b>TIME</b> <b>_</b> <b>ZONE</b> <b>_</b> <b>INFORMATION</b> structure, which describes the start and end date of the DST. </li></ul>  Starting with the Microsoft Windows Vista operating system, the concept of ‚Äúdynamic time zones‚Äù has been introduced - support for time zones with ‚Äústart‚Äù and ‚Äúend‚Äù DST dates floating from year to year.  The rules for determining the start / end date are saved in the registry (see below) and can be obtained through the function <b>GetDynamicTimeZoneInformation</b> <b>()</b> , which fills the structure <b>DYNAMIC</b> <b>_</b> <b>TIME</b> <b>_</b> <b>ZONE</b> <b>_</b> <b>INFORMATION</b> . <br><br><h4>  Using the .NET Framework </h4><br>  In the .NET Framework, there are classes for date / time conversion, which include the <b>DateTime</b> , <b>TimeZone</b> , <b>TimeSpan,</b> and <b>DateTimeKind</b> classes.  These classes use the Windows API functions listed above.  In addition to these functions, in the .NET Framework there are functions for changing the date / time to a specified interval - <b>AddHours</b> <b>()</b> , <b>AddMinutes</b> <b>()</b> , <b>AddSeconds</b> <b>()</b> , which are implemented in the <b>DateTime</b> class. <br><br><h4>  Time Zone Information </h4><br>  As we noted above, information about time zones is stored in the registry.  Descriptions of all time zones can be found in the following registry branch: <br><br>  HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows NT \ CurrentVersion \ Time Zones <br><br>  Each time zone has its own unique element, the nested elements of which contain such attributes as the name of the official time zone, the formal name, as well as links to multilingual resources and, in fact, information about the time zone.  The Dynamic DST nested element contains information about previous changes in time zones.  Beginning with the Windows Vista operating system, this information is populated when the operating system is installed.  For Windows XP and Windows Server 2003 operating systems, the information is filled in when installing the appropriate service packs. <br>  Information about the current time zone selected in the <b>Date</b> <b>and</b> <b>Time</b> panel is also stored in the registry <br>  HKEY_LOCAL_MACHINE \ SYSTEM \ CurrentControlSet \ Control \ TimeZoneInformation <br><br><h3>  Approaches to updating applications </h3><br>  Companies that develop software products should check the correctness of their applications after installing the update ( <a href="http://support.microsoft.com/kb/2570791">http://support.microsoft.com/kb/2570791</a> ), which cancels automatic switching of Windows to the "winter" time.  The verification process is described above.  If necessary, companies should release updates of their products, allowing to work correctly with the date / time after 10/30/2011. <br><br><h4>  Search for installed updates </h4><br>  To correctly install updates for your products, you need to make sure that the operating system update itself (KB2570791) is installed, because  not all users have the Windows Update mechanism enabled and operating system updates are installed at the time of their appearance.  Below are several ways to verify the installation of an operating system update (KB2570791). <br><br><h5>  Manual ways </h5><br>  To detect the fact that an operating system update has been installed (KB2570791), you can use the <b>Windows</b> <b>Update</b> section of the <b>Control</b> <b>Panel</b> .  To do this, perform the following sequence of actions: <ul><li>  Call the <b>Start</b> menu </li><li>  Call <b>Control Panel</b> Utility </li><li>  Go to <b>Programs \ Programs and Features \ Installed Updates</b> </li><li>  In the list of installed updates, find the <b>Update</b> <b>for</b> <b>Microsoft</b> <b>Windows (</b> <b>KB2570791) entry</b> with the date <b>08/24/2011</b> </li></ul><br>  You can also use PowerShell to detect the fact that an operating system update has been installed (KB2570791).  To find the OS update we are interested in, use the standard <b>get-</b> <b>hotfix</b> cmdlet as follows: PS C: \&gt; get-hotfix KB2570791 <br>  Information about installed updates is also available through the Unified Operating System Management Interface - Windows Management Instrumentation (WMI).  You can do this manually using the Windows Management Instrumentation Console (WMIC) utility.  To get a list of all installed updates, run the wmic qfe list command and to find a specific operating system update, use the command <br>  wmic qfe |  find ‚Äú2570791‚Äù <br><br><h5>  Software methods </h5><br>  Among the software methods, you can highlight a search in the registry, the use of the unified operating system management interface ‚ÄìWMI already mentioned, and the use of the Windows Update software interfaces.  Search in the registry is not recommended, as in different versions of the operating system information is stored in different branches of the registry, for example, in recent versions of Windows, the Component Based Update section is used.  The Windows Update programming interfaces are quite complex and should be used in cases when other methods are not suitable. <br>  The easiest way to programmatically detect the fact that an operating system update is installed is WMI.  To find all installed updates, you need to run a query. <br>  select * from Win32_QuickFixEngineering and to find a specific update - the query select * from Win32_QuickFixEngineering where HotFixID = "KB2570791" <br>  Further, if the operating system update is installed, the update of the software of the developer company is installed.  If an update of the operating system is required, this can be done in one of the following ways: <ul><li>  Programmatically, through the Component Based Servicing API functions </li><li>  Along with the installation of the application update - in this case, all versions of the operating system update should be distributed on disk along with the updated application. </li><li>  Manually, through Windows Update - each user must independently install the operating system updates before installing the updated version of the application </li><li>  If the Windows Update mechanism is not used, updates can be installed manually by downloading them from the link - <a href="http://support.microsoft.com/kb/2570791">http://support.microsoft.com/kb/2570791</a> , choosing the required version of the operating system </li></ul><br><br><h3>  Additional Information </h3><br><ul><li>  Help and support center for daylight saving time </li><li>  Date and Time Functions - Windows API </li><li>  Date and Time Structures - Windows API </li><li>  Using the .NET Framework Classes </li><li>  Windows Management Instrumentation Description </li><li>  Software Interfaces Component Based Servicing </li></ul>  / AF </div><p>Source: <a href="https://habr.com/ru/post/130629/">https://habr.com/ru/post/130629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130620/index.html">Wallet One in Kazakhstan</a></li>
<li><a href="../130621/index.html">What architecture MK do you use / plan to use in work / training / for a hobby?</a></li>
<li><a href="../130623/index.html">5 reasons to upgrade to Subversion 1.7</a></li>
<li><a href="../130625/index.html">Did you cancel the Alpha-Check service from the ended cards in Alfa-Bank?</a></li>
<li><a href="../130628/index.html">Engineer's Philosophy or Fighting Computer Viruses</a></li>
<li><a href="../130630/index.html">Happiness, Farmer!</a></li>
<li><a href="../130634/index.html">At windows.php.net/download, PHP 5.3 assemblies are made VC9, and Apache from apache.org needs VC6</a></li>
<li><a href="../130635/index.html">"Cryptocurrency" is rapidly becoming cheaper</a></li>
<li><a href="../130636/index.html">Logitech M525 wireless mouse can run for three years with a pair of batteries</a></li>
<li><a href="../130637/index.html">MentorNet: experience with a personal tutor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
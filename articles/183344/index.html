<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As I tried to understand the meaning of the finalize method.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I was invited to one company for an interview as a Java programmer. At the interview we were talking about the work of the finalize method. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As I tried to understand the meaning of the finalize method.</h1><div class="post__text post__text-html js-mediator-article">  Recently, I was invited to one company for an interview as a Java programmer.  At the interview we were talking about the work of the finalize method.  I had only a superficial understanding of the work of this method and could not give a decent description of the interviewers.  Therefore, after the interview, I had to work on the bugs and figure it out. <br><a name="habracut"></a><br>  My knowledge was limited to the fact that the finalize method is called at the moment when the garbage collector starts to dispose of the object.  And I did not quite understand what it is for.  I thought it was something like a destructor, in which you can release certain resources after they are no longer needed, and even the resources that are stored in other objects, which is not true. <br><br>  So, the first thing that was needed to understand was the purpose. <br><br>  This method is intended to automatically release the system resources occupied by the object on which this method will be called.  It seems convenient not to remember all the time, for example, that we have to close the connection to some resource when it is no longer required. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Do not rely on finalize data cleaning.  First, there is no guarantee that it will be called, since  somewhere there may be a link to the object.  Secondly, there is no guarantee at what time the method will be called.  This is due to the fact that after the object becomes available for assembly and, if the finalize method is overridden in it, it is not called immediately, but placed in a queue, which is processed by a specially created thread.  It should be noted that only those objects that have the finalize method redefined are queued for finalization. <br><br>  There is a possibility that this method will not be called at all.  This can happen at the moment when the object becomes available for the garbage collector and the program completes its work. <br><br>  An interesting feature of the method is that it can again make an object accessible by assigning this to some variable, although it is not recommended to do so, because  when restoring an object, finalize again will not be called <br><br>  Another rare moment can happen.  We have class A, in which the finalize method is implemented.  We create a class B extends A in which we forget about finalize.  Class B objects contain a lot of data.  When objects of class B become unnecessary, they will be queued for finalization and will take up some time for the memory, instead of bypassing this queue and immediately being disposed of. <br><br>  Another disadvantage is that you have to remember about calling the finalize-method of a super-class, if we override it.  The developer will not cause - no one will. <br><br>  Exceptions thrown in the finalize method are not handled by the finalizer thread, i.e.  This box will probably not be tracked. <br><br>  There is one way to make sure that finalize methods were run for objects that are available for assembly: call <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/System.html">System.runFinalization ()</a> or Runtime.getRuntime (). RunFinalization ().  The exit from the method is carried out only when all available methods of objects for finalization are executed. <br><br>  For myself, I concluded that using this method without special need is not worth it, and cases of this special need have not yet been met in my two-and-a-half-year practice. <br><br>  It is better to write methods of the type close in java.io instead of finalize and call them in the finally block.  The disadvantage is that the development should remember that the resource should be closed after use.  Java SE 7 came to the rescue here with its <a href="http://javarevisited.blogspot.ru/2011/09/arm-automatic-resource-management-in.html">try-with-resources</a> <br><br>  But after all this method for something is.  Where and how can it be used?  Are there examples of use? <br><br>  Finalize can be used as the last chance to close a resource, but never as the first or only attempt.  Those.  in addition to the fact that a client can call, for example, a close method on an object representing a resource.  And maybe forget.  Then you can try to help him.  This is done, for example, in the FileInputStream.java class: <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((fd != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) &amp;&amp; (fd != FileDescriptor.in)) { <span class="hljs-comment"><span class="hljs-comment">/* * Finalize should not release the FileDescriptor if another * stream is still using it. If the user directly invokes * close() then the FileDescriptor is also released. */</span></span> runningFinalize.set(Boolean.TRUE); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { close(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { runningFinalize.set(Boolean.FALSE); } } }</code> </pre> <br><br>  This approach is often used in Java libraries. <br><br>  Ps.  Please do not take written for the truth.  I wrote only how I understood the material read.  I will gladly accept any additions, criticism and corrections. <br><br>  References: <br>  <a href="http://www.oracle.com/technetwork/articles/javase/finalization-137655.html">How to Handle Java Finalization's Memory-Retention Issues</a> <br>  <a href="http://stackoverflow.com/questions/2506488/java-finalize-method-call">Java Finalize method call</a> <br>  <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html">java.lang.</a>  <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html">Class object</a> <br>  <a href="http://javarevisited.blogspot.ru/2012/03/finalize-method-in-java-tutorial.html">10 points on finalize method in Java - Tutorial Example</a> <br>  <a href="http://habrahabr.ru/post/144544/">Habrahabr.</a>  <a href="http://habrahabr.ru/post/144544/">Finalize and Finalizer</a> </div><p>Source: <a href="https://habr.com/ru/post/183344/">https://habr.com/ru/post/183344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../183332/index.html">Switch for two parameters in C ++</a></li>
<li><a href="../183334/index.html">Node.js vs Java + Rhino + Jetty + FreeMarker</a></li>
<li><a href="../183338/index.html">What to do if the program suddenly stopped working</a></li>
<li><a href="../183340/index.html">Backstreet Access To Intersystems Cache '</a></li>
<li><a href="../183342/index.html">Superhydrophobicity in life or available nanotechnology</a></li>
<li><a href="../183346/index.html">On the way to a dream</a></li>
<li><a href="../183348/index.html">Can Traffic Inspector replace Forefront TMG?</a></li>
<li><a href="../183350/index.html">The phone number of the user of domestic social networks</a></li>
<li><a href="../183354/index.html">ASUS ZENBOOK U500VZ review in half a year</a></li>
<li><a href="../183356/index.html">Most fixable Windows components for the first half of 2013</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
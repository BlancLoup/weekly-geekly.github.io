<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SILVER: how I design iOS apps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Another architecture? 


 In recent years, the topic of alternative architectures for creating applications for the iOS platform has noticeably gained...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SILVER: how I design iOS apps</h1><div class="post__text post__text-html js-mediator-article"><h1 id="esche-odna-arhitektura">  Another architecture? </h1><br><p>  In recent years, the topic of alternative architectures for creating applications for the iOS platform has noticeably gained momentum.  Some strongmen, known as MVP, MVVM, VIPER, are already entrenched on the special honor board.  And besides them there are many others, not so common. </p><br><p>  Among the strong men, in my opinion, none is a universal pill for all cases: </p><br><ul><li>  if you need to make a couple of small screens with a static data set, then it is quite expensive to enter a full-fledged VIPER; </li><li>  if you do not like the reactive approach, then MVVM is more likely to pass by; </li><li>  If you run into a Massive problem in a large project, then MVC is no longer suitable. </li></ul><br><p>  There is an option to use several architectures, because many allow you to combine yourself with others to varying degrees, but this is also not very convenient for at least three reasons: </p><br><ul><li>  as the module grows, it may be necessary to convert it into another architecture; </li><li>  when making changes to the module, you must first figure out what architecture is used for it, and how exactly the changes should be made there; </li><li>  the need to add a code adapter in order to share modules of different architectures, because from scratch the code is unlikely to be native for both of them at the same time. </li></ul><br><p>  And so, having encountered a lot of projects over the past four years (several projects from the banking sector, several heterogeneous custom projects, as well as several of my own - both applications and games), I formed an architectural approach for myself, which I now try to use as much as possible in Any project that I start. </p><br><p>  So far, he did not let me down.  At the same time, I do not think that I am a pioneer: for sure, many already use a similar approach.  But since in the projects that I personally encountered, architecture was rather difficult, I wanted to share my thoughts. </p><a name="habracut"></a><br><h1 id="korotko-o-silver">  SILVER in brief </h1><br><p>  In my formation of this version of the architecture, several key aspects were taken into account: </p><br><ul><li>  it is necessary to apply it equally simply for both simple modules and complex ones; </li><li>  you must have the opportunity for wide coverage tests, if any; </li><li>  <strong>View</strong> may be partly active and able to communicate with complex logic, but should not contain its implementation within itself; </li><li>  in order not to produce entities in <strong>Interactor</strong> for the sake of their existence, <strong>View,</strong> if necessary, can communicate directly with services ‚Äî logic that is not tied to a specific module; </li><li>  over the life cycle of the iOS UI, the central link is the <strong>ViewController (View)</strong> , which should be used to simplify memory management. </li></ul><br><p>  Eventually: </p><br><ul><li>  <strong>View</strong> allows itself to be a thin controller, communicating as needed with an <strong>Interactor</strong> , <strong>Router</strong> and other services; </li><li>  dependencies are registered through <strong>ServiceLocator</strong> ; </li><li>  communication with the module from the outside occurs through the <strong>Router</strong> , but memory management is based on its <strong>View</strong> . </li></ul><br><p>  The main parts of the architecture: </p><br><ul><li>  each module is at the top level of <strong>Interactor</strong> , <strong>Router</strong> , <strong>View</strong> ; </li><li>  data for storage and processing represent a separate common layer of <strong>Entity</strong> ; </li><li>  dependencies go via <strong>ServiceLocator</strong> . </li></ul><br><p>  I conditionally call it <strong>SILVER</strong> : by the first letters. </p><br><h1 id="silver-na-primere">  SILVER by example </h1><br><p>  We will collect a small illustrative application that will keep a list of countries and cities, which we ourselves will recall, hoping for our own knowledge of geography. </p><br><p>  First, let's take a look at the public presentation of any module.  In this phrase, the module represents a collective image that can be controlled, and the state of which can be displayed on the screen.  So, in any module there are two public parts: </p><br><ul><li>  <strong>Router</strong> , which allows you to control the module and interact with other modules; </li><li>  <strong>ViewController</strong> , which allows you to display a visual representation of the module. </li></ul><br><pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IBaseRouter</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> viewController: <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Module</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RT</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> router: <span class="hljs-type"><span class="hljs-type">RT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewController: <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> }</code> </pre> <br><p>  Here a question may appear why I repeated the <strong>ViewController</strong> in a separate property of the structure, if they are so connected. </p><br><p>  The reason lies in the fact that in order to ensure the most simple memory management, the emphasis is shifted to the fact that the <strong>ViewController</strong> has strong connections with the rest of the module: when you return back from the current screen, the <strong>ViewController</strong> is removed from the UIKit hierarchy, and with it comfortably dies whole module. </p><br><p>  For the same reason, from the parent module, connections with child Routers are made weak, if they are needed at all. </p><br><p>  So, in order not to clog the memory, the <strong>ViewController is created</strong> for the first time only at the moment when it is accessed.  And so it turns out that in order for a viable module to appear, you need to refer to its <strong>ViewController</strong> .  However, to be able to get control, you need to communicate with its <strong>Router</strong> . </p><br><p>  If you get a <strong>Router</strong> from the module factory, then we will not have a strong link to the module, and it will be destroyed on the next line of code.  And if you get a <strong>ViewController</strong> from the factory, then we will not have the ability to control and configure the module. </p><br><p>  This problem is solved by the Module structure, which is filled at the time of the module creation, and allows you to temporarily hold both strong links at once - to <strong>Router</strong> and to <strong>ViewController</strong> .  As a result, as long as the structure is alive in the local scope, <strong>Router</strong> can be saved to a weak link, and the <strong>ViewController</strong> display on the screen where UIKit will hold a strong link to it. </p><br><div class="spoiler">  <b class="spoiler_title">Module creation example</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InputModuleAssembly</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(title: String, placeholder: String, doneButton: String)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Module</span></span>&lt;<span class="hljs-type"><span class="hljs-type">IInputRouter</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> router = <span class="hljs-type"><span class="hljs-type">InputRouter</span></span>(title: title, placeholder: placeholder, doneButton: doneButton) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">Module</span></span>&lt;<span class="hljs-type"><span class="hljs-type">IInputRouter</span></span>&gt;(router: router, viewController: router.viewController) }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Module usage example</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">presentCountryInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> module = <span class="hljs-type"><span class="hljs-type">InputModuleAssembly</span></span>(title: <span class="hljs-string"><span class="hljs-string">"Add city"</span></span>, placeholder: <span class="hljs-string"><span class="hljs-string">"Country"</span></span>, doneButton: <span class="hljs-string"><span class="hljs-string">"Next"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.countryInputRouter = module.router module.router.configure( doneHandler: { [<span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] country <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.interactor.setCountry(country) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.presentNameInput() } ) internalViewController?.viewControllers = [module.viewController] }</code> </pre> </div></div><br><p>  In general, <strong>Router is</strong> needed in order to: </p><br><ul><li>  accept incoming parameters required to configure the module (more often - through the constructor); </li><li>  take the necessary callback, with which the module can report that the user has performed some actions; </li><li>  arrange for receiving a <strong>ViewController</strong> ; </li><li>  store <strong>Router</strong> child modules, if such are useful. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Router Example</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IInputRouter</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IBaseRouter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(doneHandler: @escaping </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(String)</span></span></span></span></span></span> -&gt; ()) } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InputRouter</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IInputRouter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> title: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> placeholder: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> doneButton: <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> interactor: <span class="hljs-type"><span class="hljs-type">IInputInteractor</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> internalViewController: <span class="hljs-type"><span class="hljs-type">IInputViewController?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(title: <span class="hljs-type"><span class="hljs-type">String</span></span>, placeholder: <span class="hljs-type"><span class="hljs-type">String</span></span>, doneButton: <span class="hljs-type"><span class="hljs-type">String</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.title = title <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.placeholder = placeholder <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.doneButton = doneButton interactor = <span class="hljs-type"><span class="hljs-type">InputInteractor</span></span>() } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> viewController: <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-number"><span class="hljs-number">_</span></span> = internalViewController { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> internalViewController <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>! <span class="hljs-type"><span class="hljs-type">UIViewController</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> vc = <span class="hljs-type"><span class="hljs-type">InputViewController</span></span>(title: title, placeholder: placeholder, doneButton: doneButton) vc.router = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> vc.interactor = interactor internalViewController = vc interactor.view = vc <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vc } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(doneHandler: @escaping </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(String)</span></span></span></span></span></span> -&gt; ()) { internalViewController?.doneHandler = doneHandler } }</code> </pre> </div></div><br><p>  In case several actions can be performed in a module, the configuration method can contain all possible callbacks.  This will allow in case of adding new callbacks in the development process not to forget to register their call, too. </p><br><pre> <code class="hljs erlang-repl">//      callback, //     , //        . func configure(cancelHandler: @escaping () -&gt; (), doneHandler: @escaping (String) -&gt; ()) //       callback    , //      . func configure(cancelHandler: @escaping () -&gt; ()) func configure(doneHandler: @escaping (String) -&gt; ())</code> </pre> <br><p>  In exactly the same way, in the form of a stored module, the start of the application itself can be represented, which is obtained in this way quite concise: </p><br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIResponder</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIApplicationDelegate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> window: <span class="hljs-type"><span class="hljs-type">UIWindow?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rootRouter: <span class="hljs-type"><span class="hljs-type">IRootRouter!</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">application</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">]?)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> window = <span class="hljs-type"><span class="hljs-type">UIWindow</span></span>(frame: <span class="hljs-type"><span class="hljs-type">UIScreen</span></span>.main.bounds) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window = window <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> module = <span class="hljs-type"><span class="hljs-type">RootModuleAssembly</span></span>(window: window) rootRouter = module.router window.rootViewController = module.viewController window.makeKeyAndVisible() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p>  Dependencies come from the <strong>ServiceLocator</strong> , which is configured in the <strong>RootRouter</strong> (although, for the purity of logic, it may be worthwhile to transfer it to the <strong>RootInteractor</strong> ), and there are two main nuances associated with it: </p><br><ul><li>  it is created in the <strong>Root</strong> module; </li><li>  preparation of services for reuse occurs within itself. </li></ul><br><p>  In the framework of <strong>SILVER,</strong> it is assumed that the <strong>Root</strong> module is always there, because as part of its responsibility at least: </p><br><ul><li>  switching root screens depending on the state of the application; </li><li>  Registration <strong>ServiceLocator</strong> . </li></ul><br><div class="spoiler">  <b class="spoiler_title">Sample ServiceLocator</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServiceLocator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> geoStorage: <span class="hljs-type"><span class="hljs-type">IGeoStorageService</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareInjections</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { prepareInjection(geoStorage) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inject</span></span></span><span class="hljs-function">&lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">T!</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> key = <span class="hljs-type"><span class="hljs-type">String</span></span>(describing: <span class="hljs-type"><span class="hljs-type">T</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> injections[key] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">T</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">fileprivate</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareInjection</span></span></span><span class="hljs-function">&lt;T: Any&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> injection: T)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> key = <span class="hljs-type"><span class="hljs-type">String</span></span>(describing: <span class="hljs-type"><span class="hljs-type">T</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) injections[key] = injection }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Example of creating a ServiceLocator</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RootRouter</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IRootRouter { // ... init</span></span></span></span>(window: UIWindow) { let serviceLocator = ServiceLocator( geoStorage: GeoStorageService() ) serviceLocator.prepareInjections() } <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">ServiceLocator Example</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListInteractor</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IListInteractor { // ... private lazy var geoStorageService: IGeoStorageService = inject</span></span></span></span>() <span class="hljs-comment"><span class="hljs-comment">// pretty easy! // ... }</span></span></code> </pre> </div></div><br><h4 id="posmotret-demo-proekt-na-githubhttpsgithubcombronenossilver-arch">  <a href="https://github.com/bronenos/silver-arch">View the demo project on GitHub</a> </h4></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/341178/">https://habr.com/ru/post/341178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341164/index.html">Your users do not need passwords.</a></li>
<li><a href="../341166/index.html">How to arrange an open source project</a></li>
<li><a href="../341168/index.html">Virtuozzo Storage: Actual Operating Experience, Optimization and Problem Solving Tips</a></li>
<li><a href="../341170/index.html">Cloning a 50Gb database from Prod to Dev in 1 second without loss of integrity</a></li>
<li><a href="../341172/index.html">Connecting a remote COM controller to a computer‚Äôs USB port via unmatched lines</a></li>
<li><a href="../341180/index.html">Paul Graham. All articles in Russian. Two years later</a></li>
<li><a href="../341182/index.html">Virtual Infrastructure Provider Development: 1cloud Experience</a></li>
<li><a href="../341192/index.html">Localization of comments in the code. Yandex lecture</a></li>
<li><a href="../341194/index.html">About backups, black friday and communication between people: how we messed up and learned not to do it anymore</a></li>
<li><a href="../341196/index.html">Transfer of tasks and schedules from one instance of MS SQL Server to another using T-SQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java about fido</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post we will talk about the OpenSource project, designed to make life fidoshnika better, and at the same time give the opportunity to use Fido...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java about fido</h1><div class="post__text post__text-html js-mediator-article">  In this post we will talk about the OpenSource project, designed to make life fidoshnika better, and at the same time give the opportunity to use Fido on mobile devices with Java. <br><br><h4>  Story </h4><br>  As I already <a href="http://habrahabr.ru/post/98227/">wrote</a> , in 2010 I received the nodal number 2: 5020/848.  Not having enough tasks at work, I was experiencing a ‚Äúcreative hunger‚Äù, and I was looking for where I could apply my strength.  And found!  In less than a month, a certain amount of software was written that gave various additional features to users of my site - access to Fido via a forum or NNTP, broadcasting incoming and outgoing mail to email and much more. <br>  By the time this zoo started to work steadily, I practically lost interest in the development of the hub and looked through the mail a couple of times a month. <br>  In 2011, I had the idea to rewrite a part of my software in Java and run it as a separate node, for which I even received the node number 2: 5020/849, but the matter did not go further than the project. <br>  And just a month ago, one person asked me to send him the source code for the software that manages users on my site.  To send them raw would be ugly, so the code had to be properly cleaned.  And then, looking at all this code, I decided that since the algorithms were all invented, why not rewrite it all in Java, as I planned a year ago?  Well, that rushed ... <br><a name="habracut"></a><br><h4>  For impatient </h4><br>  For those who are not interested in technical details, I will immediately tell you the essence: <br>  Currently, <a href="http://fidonode.in/jnode/">jNode</a> is a one-instance application that performs the functions of a mailer (accepts and sends mail), tosser (manages messages in echo conferences) and tracker (manages netmail messages). <br>  Putting jNode as a nodal system, the operator by and large does not need anything else - the system will automatically receive and transmit mail according to the settings. <br>  In the future we plan to make a web-based management interface, but for now you can simply write queries to the selected database :) <br>  In the near future it is planned to fork from the project for the end-user fido client. <br>  If you want to - join the development. <br><h4>  Technical details </h4><br>  Below are samples from the code with a brief description of what and why. <br>  <b>It will be interesting only to those who are planning a close acquaintance with FTN or with this project</b> . <br><br>  <b>Java version:</b> 1.7 <br>  <b>Libraries:</b> ORMLite 4, JBDC driver for the selected DBMS. <br>  <b>License:</b> <a href="">Apache License 2.0</a> <br>  <b>Where to get:</b> <a href="https://github.com/kreon/jnode/">github</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      0. FTN uses LE-short fields.  Turn over: <br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">short</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">revShort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">short</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) ((<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) ((<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) (v &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xff</span></span>) | (<span class="hljs-keyword"><span class="hljs-keyword">short</span></span>) (v &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>)); }</code> </pre> <br>  1. FTN-address of the form Z: N / FP @ D.  We do not use a domain, we consider standard ‚Äúfidonet‚Äù. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FtnAddress</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> zone; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> net; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> node; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> point; }</code> </pre><br>  2. A packet is a data array containing a header and N messages. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FtnPkt</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FtnAddress fromAddr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FtnAddress toAddr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String password; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;FtnMessage&gt; messages; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Date date; }</code> </pre><br>  3. Message - contains from / to, attributes, subject and message text. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FtnMessage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isNetmail; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Date date; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fromName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String toName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FtnAddress fromAddr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FtnAddress toAddr; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String area; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String subject; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String text; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;Ftn2D&gt; seenby; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;Ftn2D&gt; path; }</code> </pre><br>  4. ORMLite - wrote a singleton manager to work with and get Dao. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ORMManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ORMManager self = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ORMManager(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> started = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Dao&lt;X, ?&gt; daoX; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ORMManager </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstanse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Hashtable&lt;String, String&gt; settings)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> SQLException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!started) { ConnectionSource source = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JdbcConnectionSource(JDBC_URL, JDBC_USER, JDBC_PASS); daoX = DaoManager.createDao(source, X.class); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!daoX.isTableExists()) { TableUtils.createTable(source, X.class); } started = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Dao&lt;X, ?&gt; x() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getInstanse().daoX; } }</code> </pre><br>  5. FtnTosser - here are collected methods for converting a package-&gt; base and base-&gt; package. <br>  All methods are static.  Maybe this is architecturally wrong, but I did not see any other option. <br>  Two main methods: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FtnTosser</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tossIncoming</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Message[] received)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    } public static List&lt;Message&gt; getMessagesForLink(Link link) { //    } }</span></span></code> </pre><br>  6. ProtocolConnector - interface for protocol connection.  So far only binkp is implemented, but who knows - what if other protocols for Fido appear in the future? <br>  It receives only InputStream as input, knows nothing about sockets, it can also read from a file for example. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProtocolConnector</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     (  ) public void initOutgoing(Connector connector); //     (  ) public void initIncoming(Connector connector); // ,      public void avalible(InputStream is); // Frame -    byte[] getBytes() //       public Frame[] getFrames(); // true    public boolean closed(); // true     public boolean canSend(); //     public void reset(); //  message  Frame[]   public void send(Message message); // ,       public void eob(); //    public Message[] getReceived(); }</span></span></code> </pre><br><br>  7. Connector - deals directly with the network.  At the input receives the ProtocolConnector and the address (if we are a client) or the socket after accept'a (if we are a server). <br>  Makes reset init for the ProtocolConnector (hereinafter referred to as PC).  If canSend () then receives messages for the link (FtnTosser.getMessagesForLink (Link link)) and makes PC.send ();  at the end of the message does PC.eob (). <br>  After PC.closed () returns true, it processes the received messages (FtnTosser.tossIncoming (PC.getReceived ()); <br><br><h4>  Conclusion </h4><br>  If you have read this far, it means you are interested in something modern Fido. <br>  Try to join this old, but still quite lively network. <br>  Perhaps you will find there something interesting for yourself. <br>  Let me remind you that you can get access including from <a href="http://fidonode.in/newpoint.php">me</a> . </div><p>Source: <a href="https://habr.com/ru/post/151572/">https://habr.com/ru/post/151572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151565/index.html">Game console Vectrex. Color picture on a monochrome display</a></li>
<li><a href="../151566/index.html">Twitter Snippets Bootstrap</a></li>
<li><a href="../151567/index.html">Samsung makes fun of iPhone 5 in its advertisements.</a></li>
<li><a href="../151569/index.html">About the IT ecosystem of Omsk, enthusiasm, community and conferences</a></li>
<li><a href="../151571/index.html">The problem with syntax highlighting in Visual studio 2012</a></li>
<li><a href="../151573/index.html">We disassemble the Lenovo IdeaPad U300s ultrabook to the base</a></li>
<li><a href="../151574/index.html">The new IBM microscope shows interatomic bonds in the molecule</a></li>
<li><a href="../151575/index.html">Happy Birthday Pirate Bay - 9 years</a></li>
<li><a href="../151577/index.html">Radio in the form of the London Underground</a></li>
<li><a href="../151578/index.html">Translation Special Event iPhone 5 September 12</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
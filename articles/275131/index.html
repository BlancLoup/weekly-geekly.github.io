<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Image Generator invites v. 2.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I would like to share the method of generating image invites with almost no database. 

 This article has pushed me to this invention. 



 Today I ta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Image Generator invites v. 2.0</h1><div class="post__text post__text-html js-mediator-article">  I would like to share the method of generating image invites with almost no database. <br><br>  <a href="http://habrahabr.ru/post/121921/">This</a> article has pushed me to this invention. <br><br><img src="https://habrastorage.org/files/b1d/105/15d/b1d10515d1494c348cac6cd2dae433bb.png"><img src="https://habrastorage.org/files/fef/644/9dd/fef6449dde8946fa8c354b57a7058e37.png"><img src="https://habrastorage.org/files/9d0/5ba/602/9d05ba602f0b4b428f89d7d937a0f48c.png"><img src="https://habrastorage.org/files/548/aa2/32f/548aa232f1824b3e980e7b77443754d0.png"><br><a name="habracut"></a><br>  Today I taught an article about the generation of invites, but I was immediately zaminusovali and I decided to remove the article in drafts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The program consists of the following files: <br><ul><li>  generator.php - generator function </li><li>  image.php - displays a picture </li><li>  index.php - muzzle </li><li>  test.php - tester </li></ul><br>  Principle of operation: <br>  The picture is generated in a pseudo-random way, with a certain regularity. <br>  And the tester checks the presence of these patterns. <br><br>  Previously, an invite was generated only by the code word and checked for it, but as <a href="https://habrahabr.ru/users/devpony/" class="user_link">devpony</a> said, <br><img src="https://habrastorage.org/files/33c/700/e1b/33c700e1b4564719a620a007fa62b52f.PNG"><br>  So that's better. <br>  <b>index.php</b> <br><pre><code class="html hljs xml"><span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php"> header(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'Content-Type: text/html; charset=utf-8'</span></span></span><span class="php">); </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span>Get invite<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"document.getElementById('img').src='image.php?rand='+(Math.floor(Math.random()*999))"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> IMG: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image.php?in="</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"window.open(this.src)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"200"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span>      . <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span>Test invite<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">legend</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enctype</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"multipart/form-data"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"test.php"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UserID"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&lt;?php $ip = $_SERVER['REMOTE_ADDR']; $ua = $_SERVER['HTTP_USER_AGENT']; $d = getdate(); $UserID = sha1($ip.$ua.$d["</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mday</span></span></span><span class="hljs-tag">"]</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">.</span></span></span><span class="hljs-tag">'</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Secret</span></span></span><span class="hljs-tag">'); $</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">UserID</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">base64_encode($UserID);</span></span></span><span class="hljs-tag"> $</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">UserID</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">rtrim($UserID,</span></span></span><span class="hljs-tag">"=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"); echo $UserID; ?&gt;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"uploadfile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width:300px;height:100px;background:#fc0;"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span>SUBMIT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  UserID is an identifier, so that if someone uploads images at the same time, they will not overflow. <br><br>  <b>image.php</b> <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>(<span class="hljs-string"><span class="hljs-string">'generator.php'</span></span>);<span class="hljs-comment"><span class="hljs-comment">//  header('Content-Disposition: attachment; filename="image.png"');//    header ("Content-type: image/png");//  imagepng(generateImage());//  </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br><br>  <b>generator.php</b> <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($str)</span></span></span></span>{ $secret=<span class="hljs-string"><span class="hljs-string">"SECRET_STRING"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($str)){ $str = sha1(rand(<span class="hljs-number"><span class="hljs-number">-99999</span></span>,<span class="hljs-number"><span class="hljs-number">99999</span></span>).$secret);<span class="hljs-comment"><span class="hljs-comment">// -  }else{ $str = sha1($str.$secret); } for($i=0;$i&lt;6*$WH+1;$i++){ $str .= sha1($str.$secret); } $WH = 200;//   $im = imagecreatetruecolor($WH, $WH); $im1 = imagecreatetruecolor($WH, $WH); $im2 = imagecreatetruecolor($WH, $WH); $im3 = imagecreatetruecolor($WH, $WH); $im4 = imagecreatetruecolor($WH, $WH);//5  $arr = array(); for($i=0;$i&lt;round(strlen($str)/6, 0);$i++){ $arr[] = hex2rgb(substr($str, $i*6, 6)); //  } for ($i=0;$i&lt;$WH/2;$i++){ $r = $arr[$i][0]; $g = $arr[$i][1]; $b = $arr[$i][2]; $color = imagecolorallocate($im, $r, $g, $b); imagefilledrectangle($im1, $i, $i, $WH-$i, $WH-$i, $color); $color = imagecolorallocate($im, $b, $r, $g); imagefilledrectangle($im2, $i, $i, $WH-$i, $WH-$i, $color); $color = imagecolorallocate($im, $g, $r, $b); imagefilledrectangle($im3, $i, $i, $WH-$i, $WH-$i, $color); $color = imagecolorallocate($im, $r, $b, $g); imagefilledrectangle($im4, $i, $i, $WH-$i, $WH-$i, $color); } imagecopy($im, $im1, 0, 0, 0, 0, $WH/2, $WH/2); imagecopy($im, $im2, $WH/2, 0, $WH/2, 0, $WH/2, $WH/2); imagecopy($im, $im3, 0, $WH/2, 0, $WH/2, $WH/2, $WH/2); imagecopy($im, $im4, $WH/2, $WH/2, $WH/2, $WH/2, $WH, $WH); return $im; } function hex2rgb($hex){ $hex = str_replace("#", "", $hex); if(strlen($hex) == 3) { $r = hexdec(substr($hex,0,1).substr($hex,0,1)); $g = hexdec(substr($hex,1,1).substr($hex,1,1)); $b = hexdec(substr($hex,2,1).substr($hex,2,1)); } else { $r = hexdec(substr($hex,0,2)); $g = hexdec(substr($hex,2,2)); $b = hexdec(substr($hex,4,2)); } $rgb = array($r, $g, $b); return $rgb; }</span></span></code> </pre><br>  As we can see, the colors are the same, but the channels are confused. <br><br>  <b>test.php</b> <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> error_reporting(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>(<span class="hljs-string"><span class="hljs-string">'generator.php'</span></span>); $UserID = rtrim(base64_encode(sha1($_POST[<span class="hljs-string"><span class="hljs-string">'UserID'</span></span>])), <span class="hljs-string"><span class="hljs-string">'='</span></span>); $name1 = <span class="hljs-string"><span class="hljs-string">'./files/image1_'</span></span>.$UserID.<span class="hljs-string"><span class="hljs-string">'.png'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (copy($_FILES[<span class="hljs-string"><span class="hljs-string">'uploadfile'</span></span>][<span class="hljs-string"><span class="hljs-string">'tmp_name'</span></span>], $name1)){ $im = imagecreatefrompng($name1); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($im, $x, $y)</span></span></span></span>{ $rgb = imagecolorat($im, $x, $y); $r = ($rgb &gt;&gt; <span class="hljs-number"><span class="hljs-number">16</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>; $g = ($rgb &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>; $b = $rgb &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>($r, $g, $b); } $max_count = <span class="hljs-number"><span class="hljs-number">0</span></span>; $counted = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=<span class="hljs-number"><span class="hljs-number">0</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">100</span></span>;$i++){ $max_count++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] == getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] == getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>] == getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] != getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] != getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>] != getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>])){ $counted++; } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=<span class="hljs-number"><span class="hljs-number">0</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">100</span></span>;$i++){ $max_count++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] == getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] == getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>] == getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] != getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] != getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>] != getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>])){ $counted++; } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=<span class="hljs-number"><span class="hljs-number">101</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">200</span></span>;$i++){ $max_count++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] == getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] == getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>] == getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] != getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] != getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, $i, <span class="hljs-number"><span class="hljs-number">99</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>] != getColor($im, $i, <span class="hljs-number"><span class="hljs-number">100</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>])){ $counted++; } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=<span class="hljs-number"><span class="hljs-number">101</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">200</span></span>;$i++){ $max_count++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] == getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] == getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>] == getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> (getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] != getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] != getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> getColor($im, <span class="hljs-number"><span class="hljs-number">99</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>] != getColor($im, <span class="hljs-number"><span class="hljs-number">100</span></span>, $i)[<span class="hljs-number"><span class="hljs-number">2</span></span>])){ $counted++; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($counted&gt;$max_count*<span class="hljs-number"><span class="hljs-number">0.9</span></span>){<span class="hljs-comment"><span class="hljs-comment">//  90% echo " COMPLETE"; }else{ echo " FAILED"; } }else{ echo "ERROR ".$_FILES['uploadfile']['error']; } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br>  Here more. <br>  These 4 cycles are testing the axes (the place of the ‚Äújoint of four parts‚Äù) + checking that they are not the same. <br> <a href=""><img src="https://habrastorage.org/files/f21/6ee/29d/f216ee29d76a4fa18ba5d75188b34b0f.png"><br></a> <br><br>  Well that's all. <br>  True, there are some cons. <br>  Namely, there is no protection against reuse. <br>  You can use, for example, recursive hash or come up with some kind of time limit. <br>  I still think about it. <br>  Demo: <a href="http://app.blastorq.pp.ua/ImgInvite/">http://app.blastorq.pp.ua/ImgInvite/</a> (in Ukrainian) <br>  GitHub: <a href="https://github.com/da411d/ImgInviteGenerator">https://github.com/da411d/ImgInviteGenerator</a> <br><br>  If you find an inaccuracy or error - write to me, not much minus </div><p>Source: <a href="https://habr.com/ru/post/275131/">https://habr.com/ru/post/275131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275119/index.html">Juniper routing instances</a></li>
<li><a href="../275121/index.html">Alternative options for installing the Vivaldi browser in Linux</a></li>
<li><a href="../275123/index.html">Simple removal of the "tricked" protection kraftway credo vv18</a></li>
<li><a href="../275125/index.html">How to determine which files on the disk correspond to PostgreSQL tables</a></li>
<li><a href="../275129/index.html">Five reasons not to use your employees for translation and localization</a></li>
<li><a href="../275133/index.html">The unit accepting DASH will be shown at a Bitcoin conference</a></li>
<li><a href="../275135/index.html">Why am I writing C games (yes, C)</a></li>
<li><a href="../275137/index.html">Serious CVE-2016-0777 vulnerability detected in OpenSSH client</a></li>
<li><a href="../275139/index.html">Collect the best of two worlds - frameworks and CMS (part 3)</a></li>
<li><a href="../275141/index.html">Measuring the weight of minerals in the mining industry. Theoretical basis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A play in two acts about sports and rails</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This year, we decided to participate in RailsRumble , a competition for Rails developers, where teams should provide a fully working website with a gr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A play in two acts about sports and rails</h1><div class="post__text post__text-html js-mediator-article">  This year, we decided to participate in <a href="http://railsrumble.com/">RailsRumble</a> , a competition for Rails developers, where teams should provide a fully working website with a great idea in 48 hours.  I'd like to share with Habrasoobschestvom impression from participation in the competition. <br><br>  Our project is a site for football fans who are interested in the life of their idols on social networks: <a href="http://sport.r13.railsrumble.com/">Sport for Social Fans</a> . <br><br>  Below is a small piece in two acts, with five characters and an intermission. <br><img src="https://habrastorage.org/getpro/habr/post_images/d39/c4c/bd4/d39c4cbd4f16a0dcaac4ba2187578a3a.jpg"><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Branch first </h4><br><h5>  Preamble </h5><br>  In the first lines of the letter we started searching for a topic.  As a result of brainstorming, we got almost 20 different ideas.  The most promising ones revolved around sports, travel and development.  After discussing the top sport came out - and we started digging. <br>  We spent three days sluggishly on current discussions and brainstorming. <br><br><h5>  Outpatient work </h5><br>  At this stage, the most difficult thing was to crystallize the idea of ‚Äã‚Äãthe future service.  And to do this not in a vacuum, but based on the conditions of the competition - we will have no more than 48 hours and 4 people for the development.  And yes, of course, the victory is not the main thing, the main thing is participation, but the service must attract users and locate the judges. <br><br>  It was one of the most difficult stages.  We acted on the principle of deletion, and the logic of the zoom was something like this: <br>  sport -&gt; popular sport -&gt; football -&gt; fans -&gt; club / player following <br>  At the exit, we got the idea: to make a website that will help fans track the social activity of their team in social networks (Facebook, Twitter, Instagram). <br>  It took another day. <br><br><h5>  Mom, mom, what will I do </h5><br>  In this action, the most difficult was to resist the temptation and at least every second sentence on the features to answer "no."  Total, we said ‚Äúno‚Äù about ten times - for example, user badges, registration and pre-moderation.  And while this is not regretted. <br><br>  A dozen "no" provided us with a few fat "yes": search by team and player, broadcast official accounts and posts of users by hashtags, a bit of statistics.  We collected static information and went to work on the design. <br>  Spent one day. <br><br><h5>  Here the fish was wrapped. </h5><br>  In this place we will take a pause - about the design, I suppose, not so interesting.  We can only say that we focused on attractiveness and usability. <br>  I wanted to attract the user with the design, and keep the content and convenience.  It seems to <a href="http://sport.r13.railsrumble.com/">work out</a> . <br><img src="https://habrastorage.org/getpro/habr/post_images/cfe/7d5/854/cfe7d5854a6f1b70bdfa2342b006054a.png"><br><br>  The last thing I want to add before the intermission: we (honestly and honestly) did not cheat and did not touch the code before the start of the fight.  The design was the last preparatory. <br>  The prototype interface and design took two days. <br><br><h4>  Intermission </h4><br>  While you are standing in line for an espresso cap (with cognac, of course) and a caviar sandwich, we'll tell you a bit about our disposition before the fight.  So, in our troupe there is one designer, one frontend and two developer backends.  And the director manager is backstage. <br>  Geography: Novokuznetsk, Tolyatti, Mariupol, Guadalajara (unexpected?).  It was our trump card - after the start we were able to write code continuously for 48 hours.  * the third bell rings * <br><br><h4>  Branch last </h4><br><h5>  Speech technology </h5><br>  From the point of view of technology, we wanted to be on top.  Have taken: <br>  <a href="http://rubyonrails.org/">Ruby on Rails 4</a> , <br>  <a href="http://nginx.org/ru/">nginx</a> + <a href="http://unicorn.bogomips.org/">unicorn</a> + <a href="https://github.com/capistrano/capistrano">capistrano</a> <br>  <a href="http://www.postgresql.org/">Postgres</a> + <a href="http://redis.io/">redis</a> <br>  <a href="http://faye.jcoglan.com/">faye</a> <br>  <a href="http://coffeescript.org/">coffeescript</a> , <a href="http://emberjs.com/">ember.js</a> <br><br>  Clearly distributed the responsibilities of each in the team.  Tons of work went on the backend, so the geographical location of the developers helped us a lot. <br><br>  Difficulties were with a huge amount of data stored in the database. <br>  We track more than 400 hashtags and accounts of players, teams in three social networks: Facebook, Twitter, Instagram.  Every second more than 100 messages are generated, the database is growing impetuously, and we have to withstand the load (and the habr effect too).  The task is interesting. <br><br>  To begin with, we decided to store user posts in Postgres.  It‚Äôs not without redis, because  the messages are streaming, it would be too wasteful to check every time whether this or that is in the database. <br><br>  Redis organized a cache by id messages.  SortedSet was used: due to the fact that the operation of adding and checking has log (n) complexity, we planned not to lose performance on this.  Also, the priority parameter was the time to add.  We did not want to keep all id records forever and therefore deleted posts with low priority (in our case, this is a measure of time). <br><br>  The second moment of using redis (although it didn‚Äôt get to it): despite the fact that faye uses pub / sub, we were afraid to send all incoming messages.  We decided to use a scheme in which, when a user visits the site, the front sends a request to the controller with the id of the entity that needs messages.  And so he does every minute while the user views the page. <br><br>  This lock is written to redis, where after about a minute it is deleted if a second request is not received.  In the meantime, when creating messages, the hook that publishes on the faye checks with each attempt: if anyone is waiting for this message at all.  And, if no one waits, skip this action. <br><br>  Front, as we said, on ember.js.  This turned out to be a great choice for a quick one-page application.  However, due to the difficulties that arise even with a slight deviation from its ideology of web application development, after unsuccessful search for a solution, the interface had to be redone. <br><br><h5>  Marathon </h5><br>  It was difficult to adhere to the line of the party - minimalism.  48 hours is much less than required.  And it was necessary to continue to limit themselves in their desires. <br>  We did not have much time - for example, we were more involved in the code than in content for users.  The problem we see is that, having entered the site, not everyone will quickly figure out why he is. <br><br><h4>  A curtain </h4><br><h5>  Debriefing </h5><br>  We consider as a big omission the fact that we turned to face the judges and turned out to be a little half-turned towards the user.  We have no descriptions of why our application is needed and how to use it - that is, there is practically no promotional content. <br><br>  Not everyone in the front is perfect.  We did not have time to hone the interfaces. <br><br>  We did not have time to fully test the demons involved in collecting content from social networks.  If problems arise, god, of course, restarts everything, but part of them is still not clear. <br><br>  There was not enough time to add a real-time project to the faye, although everything was ready for this.  As planned, the number of posts, subscribers and new posts had to be updated automatically, producing a wow-effect and causing a storm of applause. <br><br>  But in general, we are pleased with the work done.  And how workable and interesting the project we have turned out is up to you. <br><br><h5>  Afterword </h5><br>  I would like to wish good luck to all the teams from Russia. <br>  Here is a list of those we found, for sure there are many more. <br>  <a href="http://rb.r13.railsrumble.com/">rb.r13.railsrumble.com</a> <br>  <a href="http://octoscrum.r13.railsrumble.com/">octoscrum.r13.railsrumble.com</a> <br>  <a href="http://listio.us/">listio.us</a> <br>  <a href="http://object.r13.railsrumble.com/">object.r13.railsrumble.com</a> <br>  <a href="http://undev-angels.r13.railsrumble.com/">undev-angels.r13.railsrumble.com</a> <br>  <a href="http://talk-tree.r13.railsrumble.com/">talk-tree.r13.railsrumble.com</a> <br>  <a href="http://www.trackcha.com/">www.trackcha.com</a> <br>  <a href="http://railsrumble.com/entries/54-sevastopol-rb">railsrumble.com/entries/54-sevastopol-rb</a> <br>  <a href="http://plugin.r13.railsrumble.com/">plugin.r13.railsrumble.com</a> <br>  <a href="http://getbacktoreading.com/">getbacktoreading.com</a> <br>  <a href="http://tip4commit.com/">tip4commit.com</a> </div><p>Source: <a href="https://habr.com/ru/post/198426/">https://habr.com/ru/post/198426/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198414/index.html">University of Maryland introduced the caterpillar robot</a></li>
<li><a href="../198416/index.html">Stone Age Mobile Development - Year 2013</a></li>
<li><a href="../198418/index.html">Competition Project Anarchy Mobile Game Dev Challenge</a></li>
<li><a href="../198420/index.html">AutoclassCSS - HTML based fast frame</a></li>
<li><a href="../198424/index.html">Example of ‚Äúclaims-based‚Äù authorization with ‚Äúxml-based‚Äù access policy configuration</a></li>
<li><a href="../198430/index.html">Give users the power over the sites!</a></li>
<li><a href="../198436/index.html">Secret Buyers. Need a restructuring?</a></li>
<li><a href="../198438/index.html">How to configure COLT + IntelliJ IDEA integration</a></li>
<li><a href="../198444/index.html">Changing the keyboard layout of the Apple mb110, when using it under Windows</a></li>
<li><a href="../198446/index.html">How to choose a business idea for an IT startup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
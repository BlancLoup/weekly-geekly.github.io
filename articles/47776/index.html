<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>installing Ubuntu on Sony SZ laptops</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A year ago I bought a sony sz370 laptop, which is quite Linux-compatible. I put different versions of ubuntu, as a result, I stopped at version 8.04, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>installing Ubuntu on Sony SZ laptops</h1><div class="post__text post__text-html js-mediator-article"> A year ago I bought a sony sz370 laptop, which is quite Linux-compatible.  I put different versions of ubuntu, as a result, I stopped at version 8.04, which seemed to me the most optimal file for stability and doping.  And so start from scratch. <br><br><a name="habracut"></a><br>  I installed the system with an activated intel card (stamina position). <br>  After successful installation and loading of the new system, you should update the entire system by first adding several repositories to /etc/apt/sources.list: <br><br> <code>sudo gedit /etc/apt/sources.list</code> <br>  and add the lines: <br> <code><a href="http://archive.ubuntu.org.cn/ubuntu-cn/"></a> <a href="http://deb.opera.com/opera/"></a> <a href="http://download.skype.com/linux/repos/debian"></a> <a href="http://dl.google.com/linux/deb/"></a> <a href="http://ppa.launchpad.net/lidaobing/ubuntu"></a> <a href="http://ppa.launchpad.net/tualatrix/ubuntu"></a> <a href="http://wine.budgetdedicated.com/apt"></a> <a href="http://download.virtualbox.org/virtualbox/debian"></a> <a href="http://packages.medibuntu.org/"></a> <a href="http://ppa.launchpad.net/smakc/ubuntu"></a> <a href="http://gq.net.ru/ubuntu"></a> <a href="http://download.tuxfamily.org/arakhne/ubuntu"></a> <a href="http://download.tuxfamily.org/blueman"></a> <a href="http://ppa.launchpad.net/network-manager/ubuntu"></a> <a href="http://archive.infralinux.org/infralinux"></a> <a href="http://archive.infralinux.org/infralinux"></a> <a href="http://archive.infralinux.org/infralinux"></a> deb archive.ubuntu.org.cn/ubuntu-cn hardy main restricted universe multiverse #Ubuntu Chinese Repository <br> deb deb.opera.com/opera lenny non-free #Opera <br> deb download.skype.com/linux/repos/debian stable non-free #Skype <br> deb dl.google.com/linux/deb stable non-free #Google <br> deb ppa.launchpad.net/lidaobing/ubuntu hardy main #Chmsee <br> deb ppa.launchpad.net/tualatrix/ubuntu hardy main #Ubuntu Tweak <br> deb wine.budgetdedicated.com/apt hardy main #Wine <br> deb download.virtualbox.org/virtualbox/debian hardy non-free #VirtualBox <br> deb packages.medibuntu.org hardy free non-free #Medibuntu <br> deb ppa.launchpad.net/smakc/ubuntu hardy main #Qutim <br> deb gq.net.ru/ubuntu hardy xneur #Xneur <br> deb download.tuxfamily.org/arakhne/ubuntu hardy-arakhne universe #Webcam <br> deb download.tuxfamily.org/blueman hardy blueman #Blueman <br> deb ppa.launchpad.net/network-manager/ubuntu hardy main #Network Manager <br> deb archive.infralinux.org/infralinux hardy main <br> deb archive.infralinux.org/infralinux hardy-security main <br> deb archive.infralinux.org/infralinux hardy-updates main</code> <br> <br>  back in the synaptic (System-&gt; Adminitration-&gt; Package Manager Synaptic-&gt; Settings-&gt; Repositories) it is necessary to check all standard repositories.  I think this problem should not arise.  Now we are ready for a complete system upgrade. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>sudo apt-get upgrade</code> <br> <br>  For the new kernel (2.6.24-23) to take effect, it is necessary to overload the system.  So, we have a fresh system with the latest updates for today.  The camera does not work out of the box, there is no wi-fi indicator, a memorystick reader (the one on the left), WWAN. <br><br>  Let's start with the camera.  In the arakhne repository, there are still no modules for the last kernel, but it‚Äôs not at all difficult to assemble them yourself: <br><br> <code><a href=""></a> wget download.tuxfamily.org/arakhne/pool/r/ricoh-webcam-r5u870/ricoh-webcam-r5u870_0.11.1-1arakhne1.tar.gz <br> tar <br> tar xvfz ricoh-webcam-r5u870_0.11.1-1arakhne1.tar.gz <br> cd ricoh-webcam-r5u870-0.11.1/ <br> sudo ./buildpackage <br> cd .. <br> sudo dpkg -i ricoh*.deb</code> <br> <br>  The camera can be checked in the same skype. <br><br>  now let's deal with the card reader, again open the console: <br> <code><a href="http://svn.berlios.de/svnroot/repos/tifmxx/trunk/driver/"></a> <a href="http://www.sw83.de/misc/tifm_ms.patch"></a> svn co -r155 svn.berlios.de/svnroot/repos/tifmxx/trunk/driver <br> cd driver/ <br> wget www.sw83.de/misc/tifm_ms.patch <br> patch -p0 &lt; tifm_ms.patch <br> make <br> sudo make install</code> <br>  Now we have modules for the card reader. <br><br>  let's deal with the built-in GPRS-modem now: <br>  for sony laptops, I only needed one kernel module, and when I boot the system, the old sonypi is loaded, which is not required, especially since the new <a title="sony-laptop" href="http://www.linux.it/~malattia/wiki/index.php/Main_Page">sony-laptop</a> is already included in the kernel (it seems, just from 2.6.24) and successfully copes with its responsibilities.  So: <br><br> <code>sudo gedit /etc/init.d/hotkey-setup</code> <br>  and comment on the line <br> <code>modprobe sonypi; # Needed to get hotkey events</code> <br>  now running commands <br> <code>sudo su <br> echo 1 &gt; /sys/devices/platform/sony-laptop/wwanpower</code> <br>  You can see that the WWAN indicator has turned on, but it still needs to be initialized at each boot. <br>  Typing <br> <code>sudo gedit /etc/modules</code> <br>  and add a line to the end of the file <br> <code>sony-laptop <br> usbserial vendor=0xfce product=0xd019</code> <br> <br>  make a symbolic link so that it is hooked by gnome-ppp: <br> <code>sudo ln -s /dev/ttyUSB0 /dev/modem</code> <br>  Now the final steps: <br> <code>sudo gedit /etc/udev/rules.d/60-symlinks.rules</code> <br>  and add udev-rule to the end of the file: <br> <code>#Sony Ericsson EGPRS Radio initialization <br> BUS=="usb", SYSFS{idVendor}=="0fce", SYSFS{idProduct}=="d019", RUN+="/etc/udev/scripts/gprs_modem_setup.sh /dev/%k"</code> <br>  and create a handler file for this rule: <br> <code>sudo gedit /etc/udev/scripts/gprs_modem_setup.sh</code> <br>  and write to it: <br> <code>#!/bin/bash <br> echo $1; <br> /bin/echo -en "AT+CFUN=1,1\r\n" &gt; $1 <br> #/bin/echo -en "AT+CPIN=pin_code\r\n" &gt; $1</code> <br>  If we have a PIN installed on the SIM card, the last line must be uncommented. <br>  Making our file executable: <br> <code>sudo chmod a+x /etc/udev/scripts/gprs_modem_setup.sh</code> <br> <br>  Despite the fact that WWAN starts and works, sometimes the system hangs tight when I initialize it, I can not understand what the problem is. <br><br>  It now remains to deal with the switch graphics.  The laptop is equipped with two cards: intel 945 and nvidia 7400go and in order for them to start up normally, we need to determine which card is present in the system at the boot stage.  First, install the modules for the nvidia card: <br> <code>sudo apt-get install nvidia-glx-new</code> <br> <br>  I spent a lot of time with cards. In the end, I‚Äôll just bring configs for them. <br>  <a href="http://pastie.org/816571">xorg.conf.intel</a> and <a href="http://pastie.org/816574">xorg.conf.nvidia</a> <br><br>  these files just need to be copied to / etc / X11 / <br><br>  And now the magic file for defining the card: <br> <code>sudo gedit /etc/init.d/vaio</code> <br>  we write to it: <br> <code>#!/bin/bash <br> VIDEO=`/usr/bin/lspci |grep -c nVidia` <br> <br> if [ "$VIDEO" = 1 ]; then <br> ln -sf /etc/X11/xorg.conf.nvidia /etc/X11/xorg.conf <br> ln -sf /usr/lib/libGL.so.1.nvidia /usr/lib/libGL.so.1 <br> ln -sf /usr/lib/xorg/modules/extensions/libglx.so.nvidia /usr/lib/xorg/modules/extensions/libglx.so <br> else <br> ln -sf /etc/X11/xorg.conf.intel /etc/X11/xorg.conf <br> ln -sf /usr/lib/libGL.so.1.mesa /usr/lib/libGL.so.1 <br> ln -sf /usr/lib/xorg/modules/extensions/libglx.so.mesa /usr/lib/xorg/modules/extensions/libglx.so <br> fi <br> <br> #SymLink at boot <br> ln -sf /dev/ttyUSB0 /dev/modem <br> <br> #Turn BT Off <br> /usr/bin/spicctrl -l 0 <br> <br> #Sony devices permissions <br> chown %username% /sys/devices/platform/sony-laptop/*</code> <br> <br>  Now the final steps that will help run the compise on both cards: <br> <code>sudo chmod +x /etc/init.d/vaio <br> sudo ln -sf /etc/init.d/vaio /etc/rc2.d/S12vaio <br> sudo ln -sf /usr/lib/libGL.so.1 /usr/lib/libGL.so <br> sudo ln -sf /usr/lib/nvidia/libGL.so.1.2.xlibmesa /usr/lib/libGL.so.1.mesa <br> sudo ln -sf /usr/lib/libGL.so.169.12 /usr/lib/libGL.so.1.nvidia <br> sudo ln -sf /usr/lib/nvidia/libglx.so.xserver-xorg-core /usr/lib/xorg/modules/extensions/libglx.so.mesa <br> sudo ln -sf /usr/lib/xorg/modules/extensions/libglx.so.169.12 /usr/lib/xorg/modules/extensions/libglx.so.nvidia</code> <br> <br>  and another optimization can be done for the intel card by adding to the end of the / etc / environment file <br> <code>INTEL_BATCH="1"</code> <br>  compare the output of glxgears with this command and without)) <br><br>  do not judge strictly, my first post on the Habr√©, so there is not enough karma to move the topic to the ubuntarium, where he and the place ... </div><p>Source: <a href="https://habr.com/ru/post/47776/">https://habr.com/ru/post/47776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../47769/index.html">Google Analytics disguises virus infects Firefox and Opera</a></li>
<li><a href="../47771/index.html">Flash'ka motorist</a></li>
<li><a href="../47773/index.html">The crisis remained offline</a></li>
<li><a href="../47774/index.html">Why do I ‚Äúlove‚Äù PHP or reassign variables?</a></li>
<li><a href="../47775/index.html">Hace Mase in 5 min</a></li>
<li><a href="../47778/index.html">Web 3.0 =)))</a></li>
<li><a href="../47781/index.html">On the history of science and its crisis</a></li>
<li><a href="../47782/index.html">Interesting JS frameworks for learning</a></li>
<li><a href="../47783/index.html">New Linux kernel version 2.6.28 has been released.</a></li>
<li><a href="../47785/index.html">PHP and OOP magic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As my fingers turned out, and I collected a bike for deployment, which saved more than 2 thousand working hours per project.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Denis, you are now a deployment engineer." To go nuts, give two. In general, I work at CROC, which is famous for its huge projects. In this project, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As my fingers turned out, and I collected a bike for deployment, which saved more than 2 thousand working hours per project.</h1><div class="post__text post__text-html js-mediator-article">  <b>"Denis, you are now a deployment engineer."</b>  To go nuts, give two.  In general, I work at CROC, which is famous for its huge projects.  In this project, we supported the introduction of a giant analytical system of the data lake class for several thousand users with a volume of 150 TB.  Several development teams are sawing it, for a total of about 40 people. <br><br>  They have four infrastructure engineers (Ops, admins, that is, us) - we most often needed to install software on the stands, reboot the machines (the developer‚Äôs first hope: does not work - ask the engineer to reboot), roll out the database schemas and etc. <br><br><img src="https://habrastorage.org/files/fb6/8ac/fb9/fb68acfb9d8543ff983a8d93a9864f2c.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Developers write code that merges into the repository.  From it, Jenkins gives birth to assemblies that he puts on the ball.  Deploying the system from scratch for the first time took me 4 hours and 15 minutes on a timer.  For each of the order of ten components (scripts of different databases, Tomcat applications, etc.) in the right order, you had to take a file from the balls, figure out where and how many copies you need to deploy, correct the settings, indicate where to look other components of the system, associate all with all and do not confuse anything. <br><br>  Fingers blew out - started scripting.  It began with one small script. <a name="habracut"></a><br><br><h2>  What happened </h2><br>  The system consists of a rather large number of components: 6 different applications on Tomkat, each of which is in several instances on different servers, DSE = Cassandra + Solr + Spark cluster, scripts for creating objects in them, loading initial data, migrating Oracle schemas, PostgreSQL, cluster RabbitMQ, load balancers, a bunch of external systems, and so on. <br><br>  Stands also mainly consist of several different servers.  Applications on all stands are distributed differently (for example, somewhere one of Tomkat's applications is deployed in a single version, and somewhere in several it hides behind the balancer, somewhere a copy of Orakla, somewhere several, etc. .). <br><br>  Total, deploy such a system - many servers and many components with different and frequently changing configs, in which they want to have information about each other, the location of databases, external systems, etc., etc. Thus, deploy everything where it is necessary, not to forget anything, not to confuse and properly configure - the task is not quite trivial.  There are many places to make a mistake, and the process requires attention and concentration.  First, I scripted the small parts that caused the most problems.  The free time was spent on the next moments of malice, union and generalization. <br><br>  The result was that one shell script was ready for each piece of the system, which did everything from copying the distribution from jenkins to editing configs and deploying the application or executing the processed scripts on the database.  In general, everything began like a classic admin's bike: the same scripts that write almost everything for themselves from bricks.  The difference is that we decided to make these parts interchangeable and immediately (well, in a month, not immediately) thought about the structure.  As a result, it first became a system of scripts, where everything is quite flexible (outside), and then the web GUI also appeared. <br><br>  I have already prepared scripts for each stand and for each component of the system that perform the necessary actions.  But new stands appeared, the existing ones changed, the development of the system moved by leaps and bounds, and it was more and more difficult to reflect all the changes in the scripts. <br><br>  Then I described the structure of the stand and all the parts changing from the stand to the stand in the configuration files, and the scripts summarized it so that they ate the name of the stand for work, found its config and from there received the necessary information for work. <br><br>  That is, now the same scripts worked on all stands, the features of which were moved to the config.  So reacting to changes has become quite simple. <br><br><img src="https://habrastorage.org/files/0bd/dce/c1f/0bddcec1f0ba424d9f2f0c35d0163b2f.png"><br><br>  The config is just a scary text file, which contains a list of variables and their, actually, values.  The scripts simply source this file and get all the settings in the environment variables (in fact, it has now become a bit more complicated, but just a little). <br><br><div class="spoiler">  <b class="spoiler_title">Here he is</b> <div class="spoiler_text"><code><a href="https://habr.com/ru/company/croc/blog/318532/">#BUTTON_DESC=DSE 4.7JDBC thin&lt;br&gt;</a> <br> # include "defaults.include" <br> <br> BUILD_DIRS="data-facade/release-1.5.0:DATA_FACADE,SOMEAPP process-runner/release-1.5.0:PROCESS_RUNNER integration-services/release-1.5.0:INTEGRATION scripts/release-1.5.0:CASS_DDL,ORA_DDL,SOLR_SCHEMA fast-ui/release-1.5.0:FAST_UI cache-manager/release-1.5.0:CACHE_MANAGER" <br> <br> DSE_HOSTS="xxxdevb.lab.croc.ru xxxdevc.lab.croc.ru xxxdevd.lab.croc.ru xxxdeve.lab.croc.ru" <br> CASSANDRA_CONNECTION_HOSTS="xxxdevb.lab.croc.ru xxxdevc.lab.croc.ru xxxdevd.lab.croc.ru xxxdeve.lab.croc.ru" <br> CASS_DDL_NODE="xxxdeve.lab.croc.ru" <br> SOLR_URL="http://xxxdeve.lab.croc.ru:8983/solr" <br> <br> ORA_DATABASES="xxxdevg.lab.croc.ru:1521/test" <br> ORA_CONN_STRING="jdbc:oracle:thin:@xxxdevg.lab.croc.ru:1521/test" <br> ORA_OPSTORE_PW="###" <br> <br> ORACLE_HOSTS="DEVG" <br> DEVG_ADDR="xxxdevg.lab.croc.ru" <br> DEVG_INSTANCES="TEST" <br> DEVG_TEST_SID="test" <br> <br> PG_SERVER="xxxdeva.lab.croc.ru" <br> <br> DATA_FACADE_HOSTS="xxxdevb.lab.croc.ru" <br> SOMEAPP_HOSTS="xxxdevb.lab.croc.ru" <br> PROCESS_RUNNER_HOSTS="xxxdeva.lab.croc.ru" <br> <br> PP_PROXY_PROCESS_RUNNER_URL="http://xxxdeva.lab.croc.ru:8080/xxx-process-runner" <br> XX_API_URL="http://#.#.#.#/###/api/" <br> <br> CASS_DDL_ADD_BOM="yes" <br> CASS_DDL_TEST_SEED="yes" <br> <br> KEYSPACE=xxx <br> REPLICATION_STRATEGY="{'class':'NetworkTopologyStrategy', 'Solr':3}" <br> CATALINA_HOME=/usr/share/apache-tomcat-8.0.23 <br> <br> CASS_DDL_DISTR_NAME="cass-ddl.zip" <br> SOLR_DISTR_NAME="solr-schema.zip" <br> DATA_FACADE_TARGET_WAR_NAME="data-facade.war" <br> SOMEAPP_DISTR_PATTERN='rest-api-someapp-*-SNAPSHOT.war' <br> SOMEAPP_TARGET_WAR_NAME="someapp.war" <br> PROCESS_RUNNER_TARGET_WAR_NAME='xxx-process-runner.war' <br> PROCESS_RUNNER_DISTR_PATTERN='resources/distr/xxx-process-runner.war' <br> PROCESS_RUNNER_RESOURCES_DISTR_DIR="resources" <br> <br> CASS_REQ_FETCHSIZE=100 <br> CASS_REQ_BATCHSIZE=10 <br> CASS_REQ_MAX_LOCAL=2 <br> CASS_REQ_MAX_REMOTE=2 <br> CASS_REQ_CONSISTENCY_LEVEL="LOCAL_QUORUM" <br> <br> INTEGRATION_AD_SEARCH_NAME="OU=TOGS, DC=testxxxx,DC=local;OU=GMC,DC=testxxxx,DC=local;OU=CA,DC=testxxxx,DC=local" <br> INTEGRATION_LDAP_PROVIDER_ADDRESS="#.#.#.#" <br> INTEGRATION_LDAP_PROVIDER_PORT="389" <br> INTEGRATION_LDAP_SECURITY_PRINCIPAL='testxxxx\\\\lanadmin' <br> INTEGRATION_LDAP_SECURITY_CREDENTIALS='!' <br> INTEGRATION_AD_ROOT_DEPARTMENT="DC=testxxxx,DC=local" <br> <br> SSTABLELOADER_OPTS="" <br> CASS_REQ_QUEUESIZE=1 <br> <br> OSR_URL=http://#.#.#.#/SPEXX <br> <br> QUEUE_HOST="xxxdevg.lab.croc.ru" <br> QUEUE_API_HOST="http://xxxdevg.lab.croc.ru:%s/api/" <br> QUEUE_ENABLE="true" <br> <br> TOMCAT_HOSTS="DEVA DEVB" <br> DEVA_ADDR="xxxdeva.lab.croc.ru" <br> DEVA_CATALINA_HOMES="CH1" <br> DEVA_CH1_APPS="PROCESS_RUNNER" <br> DEVB_ADDR="xxxdevb.lab.croc.ru" <br> DEVB_CATALINA_HOMES="CH1" <br> DEVB_CH1_APPS="DATA_FACADE SOMEAPP FAST_UI CACHE_MANAGER" <br> <br> CACHE_MANAGER_URL=http://xxxdevb.lab.croc.ru:8080/cache-manager/</code> <br> </div></div><br>  To make it even more convenient to manage the configs of the stands, I later added inclusions - bundles of logically related settings, recorded in separate files, which can be connected in bulk to configs or other inclusions.  For example, the settings associated with AD are recorded in 5 different variables, and there are only two AD servers, for each of them there is an incLog with these 5 settings.  To quickly switch stands, it is enough to connect the required connection between them.  In order to reflect any change that occurred on the server, it is necessary to correct the settings in one file, and all stands aimed at it will know about it. <br><br>  This structure of scripts was overgrown with whistlers, but mostly remained. <br><br><img src="https://habrastorage.org/files/a17/0c5/0b8/a170c50b8c414472967038947482589c.png"><br><br>  Actions are usually performed by a bundle - the sequence of actions makes sense, for example: on a test stand, save the NSI, recreate the circuit in Orakle, load the NSI back.  If the previous component fell off with an error, probably the need for the next has disappeared.  To make it more convenient, the launch script is made: <br><br><pre> <code class="hljs objectivec">./run.sh <span class="hljs-string"><span class="hljs-string">"test"</span></span> <span class="hljs-string"><span class="hljs-string">"save-nsi ora-ddl-init load-nsi"</span></span></code> </pre> <br>  The run.sh script leaves to re-create the circuit with the preservation of the master data on the test bench, and the engineer - to drink tea. <br><br><h2>  GUI </h2><br>  It seemed that the engineer in the process of deploying the system is needed only to translate words from the human (‚Äúturn me first, second and compote‚Äù) into the names of the scripts in the sequence. <br><br>  The team does not like the unix console, so the idea to run scripts without engineers was skeptical.  But laziness pushed to make another attempt - made a page from the cgi script on Python, on which in a simple way you could select a config from the list and stick a sequence of components with the mouse.  Roughly speaking, just a graphic button that can be pressed instead of a console command.  She began to use. <br><br>  The idea took root, other routine engineering actions were added, restarting individual components and servers as a whole, unloading-loading-saving information from different databases, balancing control, turning on ‚Äúballet‚Äù for the time of downtime, etc. The code name ‚Äú Button". <br><br>  This creation of my crooked hands has been redone slightly, now it works on python + flask and can do everything without reloading the page: update the list of stands and their status, update the tails of logs, launch components and target them if they fake. <br><br>  A colleague Andrew applied designer magic and made a beautifully designed page from the mash of my black and white divs. <br><br><img src="https://habrastorage.org/files/f76/849/525/f768495255bf4d358b37a37e8fb3b076.png"><br><br>  On the left there is a list of stands, there we choose a stand with which to do something.  This is the name of the stand, which the engineers had previously passed to the script. <br><br><pre> <code class="hljs objectivec">./run.sh <span class="hljs-string"><span class="hljs-string">"dev-letters"</span></span> <span class="hljs-string"><span class="hljs-string">"save-nsi ora-ddl-init load-nsi"</span></span></code> </pre> <br>  We poke the name of the desired stand, the details on the right open. <br><br><img src="https://habrastorage.org/files/fea/712/148/fea7121489944f13ac5b5fb44090472c.png"><br><br>  dev-letters is a name.  Below is a brief description of the stand from the engineers (from the comment, the first line of the config).  Links "see logs" and deployed versions of software, then - an indication of which branch will be taken assembly for this stand.  And the ability to change this thread: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2e4/401/501/2e44015011874c6f800644472f5ada20.png"></div><br>  All scripted actions with stands are categorized and Components are signed.  These are the names of actions that engineers previously transmitted to scripts: <br><br><pre> <code class="hljs objectivec">./run.sh <span class="hljs-string"><span class="hljs-string">"dev-letters"</span></span> <span class="hljs-string"><span class="hljs-string">"save-nsi ora-ddl-init load-nsi"</span></span></code> </pre> <br>  When a component-action is selected from the list, it goes to the right side of the page: <br><br><img src="https://habrastorage.org/files/eb9/78c/4b8/eb978c4b8623446c91d914730b5359db.png"><br><br>  Here they form a turn of execution: distribute them in the right order (or add them in the right order).  For example, on the screen it will be executed: unload nsi, recreate the scheme in the Oracle database, load nsi back. <br><br>  In order not to type in frequently used sequences, you can save them in a Combo and launch them with a few clicks, bypassing the search for the necessary components in the list. <br><br>  Below are user comments on the stand.  It is possible to leave a message to colleagues that the stand has been captured for very important work so that no one has touched it. <br><br><img src="https://habrastorage.org/files/0b0/a49/5be/0b0a495bee8541c99d851272234df3fe.png"><br><br>  The last comment is displayed in the list of stands to make it easier to get a general picture of the stands and choose where to work. <br><br>  There is an exchange of data between the stands, in particular, between Cassandras.  You can click the Save data button, come up with a name for the archive and a list of tables, then the data will be carefully saved.  Then you can select another stand and load them there with the Load data button, selecting the desired archive from the list of available ones. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/108/8d1/942/1088d1942ef54700bb502e08d71140ff.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/522/528/00f/52252800f2b04e39a172fdd8a4fef959.png"></div><br>  Users are authenticated via corporate AD.  There is a simple access control: roles that can be allocated to users, and privileges for different stands, which can be assigned to roles.  This is so that none of the still inexperienced colleagues will launch destructive components (re-creating the database, for example) on important stands. <br><br>  A specially trained unicorn writes about all actions through the button to the command Slack.  So everyone knows what is happening. <br><br><img src="https://habrastorage.org/files/1dc/2bd/9f8/1dc2bd9f842f42f9bbb69f739baef689.png"><br><br>  Also, the unicorn reports if the scripts fell off with an error so that the user that the 3-hour backup of the backup was cut off after 10 minutes of work, found out immediately, and not after 3 hours (besides, he would not need to constantly watch the process). <br><br><img src="https://habrastorage.org/files/92c/bfc/3a9/92cbfc3a95db4dbc9f2f0bf44ca5d8a8.png"><br><br>  So, without waiting for the notifications of a caring unicorn, to find out how the process is going on, there are logs of script execution. <br><br><img src="https://habrastorage.org/files/b6d/edc/b1b/b6dedcb1b1b0429286b58ec483ceb738.png"><br><br>  In order to see what is now deployed on our stand from our software, the Button with the system component of the system records the source of the distribution that was used for this.  What we managed to record can be viewed and concluded that it is now deployed on the stand. <br><br><img src="https://habrastorage.org/files/e46/806/d20/e46806d20e974960b3028ea508cb4858.png"><br><br>  There is also a script that once a day passes through all the configs of the stands, goes to all the servers involved and looks at what works out of the system components, what versions of the system and our software are installed, what is running, what is not, when the last time there were calls to tomkats etc. <br><br>  All this is going to an excel spreadsheet and is given to users so that you can analyze how stands are used, how to distribute them among developers, where to add / pick up pieces of hardware. <br><br><img src="https://habrastorage.org/files/ff5/979/26d/ff597926d26941d987939288cfff5957.png"><br><br>  We have one stand to which access for security reasons is closed at the physical level, but our system should work there anyway.  For this, there is a special stand on the list. <br><br>  With it, everything, as with the rest of the stands, only when components are collected in the execution queue, does another process occur.  The scripts copy themselves, cut off unnecessary parts (such as a page, privileges and configurations of development stands), create a script to call all the components specified in the queue.  Then add to this all distributions of components, collect the resulting archives and spread on the ball. <br><br>  That is, for all the stands it connects itself where it needs, and does the right things.  And for where it is impossible to connect, he packs himself in a suitcase, from which he comes out of the bag and does his job upon arrival.  It turns out such a ‚Äúdelayed execution‚Äù: scripts are formed that need to be attributed to the wall, run ./run_all.sh, and everything will be the same as with the other stands. <br><br>  The cherry on the cake is at the top, as you can see, the technical information, in particular, the engineer on duty, his phone, gertrude, so that the developer can see that the page has actually been updated, and all sorts of minor utilities: <br><br><img src="https://habrastorage.org/files/969/e57/2ee/969e572ee33f49a7844808e26e3eb3a3.png"><br><br><h2>  How much time saves </h2><br>  In order to try to understand whether this wonderful bike brings us some kind of benefit, I tried to estimate the time that Button won to the engineers. <br><br>  If you take a typical scenario that runs more often than others: the database structure has changed, you need to roll up the migrations and update (say, one) the application affected by the update, it will take about 30-40 minutes in the case of one server. <br><br>  Depending on the number of servers with such an application, the number of operations for copying the application to the server and correcting a heap of parameters in configs will change (+ the Kassandra, Orakla and Solara schemes). <br><br>  The button does it on its own, without delay and user participation, you only need to select the desired steps.  But is it all worth the effort if it needs to be done once a year.  How many actions start per day? <br><br>  To answer this question, I tried to roughly analyze the run logs.  Judging by the first entries in the logs, we launched this version of the Button to work around February 1, 2016.  On November 10, 2016, 185 days passed, of which, roughly speaking, 185 * 5/7 = 132 working days. <br><br><h2>  Number of launches: </h2><br><pre> <code class="hljs mel">[dpotapov@dpotapovl logs]$ (sum=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> *.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> sum=$(expr $sum + $(grep <span class="hljs-string"><span class="hljs-string">"requested run"</span></span> <span class="hljs-string"><span class="hljs-string">"$f"</span></span> | wc -l)) ; done ; echo $sum)</code> </pre> <br>  22192219/132 = 16.8106 launches per day. <br><br>  But each launch is a whole sequence of components: let's calculate how many were there in total: <br><br><pre> <code class="hljs bash"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> *.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> grep <span class="hljs-string"><span class="hljs-string">"requested run"</span></span> <span class="hljs-variable"><span class="hljs-variable">$f</span></span> \ |sed <span class="hljs-string"><span class="hljs-string">'s/^.*\[\(.*\)\].*$/\1/'</span></span> \ | <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> l ; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$l</span></span> ; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$w</span></span></span><span class="hljs-string">"</span></span> \ | sed <span class="hljs-string"><span class="hljs-string">'s/,$//'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> \ <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> \ &gt; /tmp/requests.list cat /tmp/requests.list | wc ‚Äìl [dpotapov@dpotapovl logs]$ cat /tmp/requests.list | wc ‚Äìl 6442</code> </pre> <br>  6442/132 = 48.8030 components per day. <br><br>  It is difficult to accurately calculate how many hands we would deploy each component, but I think it is possible to estimate with a finger to the sky in 20 minutes.  If so, then hands to do what the Button does on average per day will be 48 * 20/60 = 16 hours.  16 hours of work of the engineer - without errors, jambs, sticking on the Internet, lunch and chatting with colleagues. <br><br>  You can also add that the button on all stands works simultaneously when the user needs it.  Different users on different stands do not interfere with each other.  In the case of an engineer, here you should add the time that the user-customer misses while waiting in line at the engineer. <br><br><h2>  Is it already a devops? </h2><br>  On the one hand, it is not, because our developers have no root access to the products.  They are not ready to receive it, because along with access, it is necessary to take responsibility, and there is a rather complicated infrastructure - Infiniband, Sparky, that's all - it is very easy to shoot yourself in the foot. <br><br>  On the other hand, we have anyone, because any member of the team can roll the assembly onto the stands where he has access. <br><br>  Assemblies on the product, for example, most often rolls the leader of the testing group. <br><br>  <b>Why not a docker or another ready-made solution?</b> <br><br>  Initially, the task was how to ‚Äúat least learn how to put all this bunch of software together and make it work‚Äù.  In the process of ‚Äúlearning,‚Äù a part was scripted, then another and another, and it turned out such a bike. <br><br>  It began as a small automation.  It was necessary to execute a bunch of database scripts from the directory - made a script that bypasses the directory and runs everything in it.  Then it was thought that it would be cool to convert each script into UTF by force, adding this procedure to the same place.  Then they began to add directives to each script in order to set the level of consistency with which to execute the script.  Then they began to remove empty lines from each of them when they changed the version of the database client, and he spat on it.  And so on. <br><br>  We almost did not have a clear milestone, before which it was a gathering of such petty automation, and then became a system.  It somehow grew by itself, in small steps.  Therefore, the question of surely there is some kind of finished product arose only when our craft was solving the problem.  Then it turned out that we need to replace something that works and closes the question with something that we have to study and sharpen to fit our needs (it is not known what file size). <br><br><h2>  Summary </h2><br>  That's how we got the control panel all at once: in a few clicks you can switch on the maintenance splash screen, migrate database schemas, rebuild indexes, install new assemblies at once with the necessary settings for the stand and without stopping users (due to sequential unbalancing) - any version on any stand, transfer data between stands, look at the state of stands and change histories on them. <br><br>  The scripts under the hood are designed so that it is quite simple to adapt or modify them, so that other projects are slowly beginning to adapt the Button for themselves or to write their own bike based on the same ideas. <br><br>  It is difficult to say whether we have arranged everything in the best way (probably not), but to work it works. <br><br>  It turned out to save about 16 working hours of the administrator per day - these are two whole diggers.  So now I have three of the casket, the same from the face.  If you suddenly have questions not for comments, my mail is dpotapov@croc.ru. </div><p>Source: <a href="https://habr.com/ru/post/318532/">https://habr.com/ru/post/318532/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318522/index.html">How to update the kernel in the system without restarting the services (step-by-step instruction)</a></li>
<li><a href="../318524/index.html">Experience in using self-hosted continuous integration systems</a></li>
<li><a href="../318526/index.html">Machine learning as a new business analysis tool</a></li>
<li><a href="../318528/index.html">How the new design of the PVS-Studio code analyzer developers' website viva64.com was made</a></li>
<li><a href="../318530/index.html">Indecent simple maze generation algorithm</a></li>
<li><a href="../318534/index.html">Why all these ‚Äúbuns‚Äù: What will IT companies offer you besides salary</a></li>
<li><a href="../318536/index.html">"Reading for the holidays": 25 useful sources on IaaS, IT infrastructure and cloud technologies</a></li>
<li><a href="../318538/index.html">Digest: 40 materials on the topic of DDoS attacks and protection from them</a></li>
<li><a href="../318542/index.html">Intel unveiled Optane memory at CES 2017</a></li>
<li><a href="../318544/index.html">Compiling Java programs and resolving dependencies at runtime</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Convenient torrentokachalkal managed through the web and android for a dedicated server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preamble 
 In this article, I want to tell you how to make a universal torrent-based control via the Internet from both the web interface and the Andr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Convenient torrentokachalkal managed through the web and android for a dedicated server</h1><div class="post__text post__text-html js-mediator-article"><h4>  Preamble </h4><br>  In this article, I want to tell you how to make a universal torrent-based control via the Internet from both the web interface and the Android application. <br>  Here we will talk about setting up the <b>rtorrent + rutorrent + nginx + php-fpm + transdroid bundle</b> on <b>Debian Wheezy.</b>  I will immediately answer the question why not transmission, firstly with a large number of distributions / downloads, it falls, secondly it is poorly customized and does not have plug-ins for automating the search and downloading of new products, and I personally just don‚Äôt like it. <br>  In the case of rtorrent, the version from the repository is compiled without xmlrpc-c, so I‚Äôm going to have to rebuild it myself, the official project documentation contains only the configuration option with apache, which didn‚Äôt fit all the difficulties and their solution will be described below. <br>  I will try as much as possible to comment on all the settings and configs, so that you can understand how the system works, and not engage in a blunt copy-paste. <br>  I hope the owners of their own NAS and dedicated servers will be interesting. <br><img src="https://habrastorage.org/storage2/c8f/aaf/625/c8faaf625d3a233bdf8dae0b76be701c.jpg"><br>  <u>For convenience, I bring all commands from under root, without using sudo.</u> <br>  There will be few pictures, mostly commands and explanations, for the fastest reproduction of the configuration. <br><a name="habracut"></a><br><br><h4>  Set up required repositories. </h4><br>  In <b>/etc/apt/sources.list</b> add: <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    . deb http://www.deb-multimedia.org stable main non-free #   php  mysql deb http://packages.dotdeb.org wheezy all deb-src http://packages.dotdeb.org wheezy all #  nginx deb http://nginx.org/packages/debian/ wheezy nginx deb-src http://nginx.org/packages/debian/ wheezy nginx</span></span></code> </pre> <br>  Install the keys <br><pre> <code class="bash hljs">apt-get update &amp;&amp; apt-get install deb-multimedia-keyring wget http://www.dotdeb.org/dotdeb.gpg -O- |apt-key add - gpg --keyserver hkp://keys.gnupg.net --recv-keys ABF5BD827BD9BF62 gpg -a --<span class="hljs-built_in"><span class="hljs-built_in">export</span></span> 7BD9BF62 | apt-key add -</code> </pre><br>  We knock out. <br><pre> <code class="bash hljs">apt-get update &amp;&amp; apt-get upgrade</code> </pre><br>  We put the necessary packages (I hope I did not forget anything) <br><pre> <code class="bash hljs">apt-get install build-essential autoconf automake libtool libncurses5-dev libncursesw5-dev libcurl4-openssl-dev screen openssl php5 php5-cli curl libcppunit-dev libsigc++-2.0-dev subversion php5-cgi nginx php5-common php5-fpm php5-gd php-pear checkinstall git</code> </pre><br>  If the system previously stood rtorrent from the repository, delete it <br><pre> <code class="bash hljs">apt-get purge rtorrent libtorrent*</code> </pre><br><h4>  Build the right packages </h4><br>  <b><u>When assembling all three packages, there may be an error with the version number, I prefer to set the build date, also during the assembly I can swear for the absence of directories, just create them and run them again.</u></b> <br><h6>  Building and Installing xmlrpc-c </h6><br>  Create a directory where the sources will be <br><pre> <code class="bash hljs">mkdir ~/svn</code> </pre><br>  Go into it <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/svn</code> </pre><br>  We get fresh weights <br><pre> <code class="bash hljs">svn co https://xmlrpc-c.svn.sourceforge.net/svnroot/xmlrpc-c/advanced/ xmlrpc-c</code> </pre><br>  Go to the resulting directory <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> xmlrpc-c</code> </pre><br>  We collect: <br><pre> <code class="bash hljs">./configure --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-cplusplus make checkinstall -D</code> </pre><br><h6>  Build libtorrent (the points are the same in short) </h6><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/svn git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/rakshasa/libtorrent <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> libtorrent ./autogen.sh ./configure make checkinstall -D</code> </pre><br><h6>  Build rtorrent </h6><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/svn git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/rakshasa/rtorrent <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> rtorrent ./autogen.sh ./configure --with-xmlrpc-c make checkinstall -D</code> </pre><br>  We connect the necessary ones, without this, rtorrent will not start in the future. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"include /usr/local/lib"</span></span> | tee -a /etc/ld.so.conf ldconfig</code> </pre><br>  We try to run <b>rtorrent</b> , if everything is OK, it will start, but it will complain about the absence of the configuration file, you can exit by <b>Ctrl + Q</b> <br><br>  Create a user (in my example, this is a <b>p2p</b> user), the home directory of which will be our folder with torrents, make a group for it www-data <br><pre> <code class="bash hljs">adduser --home /hdd --shell /bin/bash --ingroup www-data p2p</code> </pre><br>  move into it <br><pre> <code class="bash hljs">su p2p</code> </pre><br>  Create a config for rtorrent <br><pre> <code class="bash hljs">nano ~/.rtorrent.rc</code> </pre><br><div class="spoiler">  <b class="spoiler_title">with this content:</b> <div class="spoiler_text">  # Necessary for interrelation with rutorrent and transdroid <br>  scgi_port = 127.0.0.1 zhe000 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      #IP of our server, on which rtorrent will work, if there are several such <br>  bind = 192.168.0.2 <br>  ip = 192.168.0.2 <br><br>  # minimum number of peers per torrent <br>  min_peers = 1 <br>  # maximum number of peers per torrent <br>  max_peers = 100 <br>  # maximum download speed.  0 - unlimited <br>  download_rate = 0 <br>  # maximum speed of return.  0 - unlimited <br>  upload_rate = 10,000 <br>  # Sets the number of hands from the torrent <br>  max_uploads = 50 <br>  # catalog for saving downloads or where torrents will be from. <br>  directory = / hdd / torrent / download / <br>  # Where we will store the session <br>  session = /hdd/torrent/.session/ <br>  # If there is little free space, stop all downloads.  Stop threshold set close_low_diskspace = <br>  schedule = low_diskspace, 5.60, close_low_diskspace = 30000M <br>  # display detailed error content <br>  # the interval between the start of rTorrent and the first start of ruTorrent after that, no useful work is done <br>  # will not be.  To avoid this, add a specially trained line to the rTorrent configuration file: <br>  # Path to php and path to initplugins.php contained in the rutorrent scripts <br>  execute = {sh, -c, / usr / bin / php /var/www/rutorrent/php/initplugins.php &amp;} <br>  # Set the port (or several ports) that opens the client for data exchange <br>  # (do not forget to allow firewall) <br>  port_range = 40500-40999 <br>  # Each time use a random port from the range. <br>  port_random = yes <br>  # check torrent hash after upload <br>  check_hash = yes <br>  # save session <br>  session_save = yes <br>  # accept encrypted incoming connections, set unencrypted <br>  # outgoing connections, if it returns an error, repeat with encryption, <br>  # prefer cleartext after establishing an encrypted connection <br>  encryption = allow_incoming, enable_retry, prefer_plaintext <br>  # use udp <br>  use_udp_trackers = yes <br>  # Allows DHT to work for torrent-free torrents or for cases <br>  # when all retresers are (do not work). <br>  # May be ‚Äúdisable‚Äù (to completely disable DHT), <br>  # "Off" (does not start with DHT), "auto" (Enables DHT if possible), <br>  # or "on" (force DHT).  The default DHT value is ‚Äúoff‚Äù. <br>  # For the DHT to work properly, the session directory ‚Äúsession‚Äù must be defined. <br>  # <br>  dht = auto <br>  # <br>  # UDP port used by DHT. <br>  # <br>  dht_port = 6881 <br>  # Forces UTF-8 encoding for xmlrpc. <br>  # Recommended for troubleshooting when using <br>  # in the names of the Cyrillic characters torrents. <br>  # Actual for GUI working via xmlrpc. <br>  encoding_list = utf8 <br></div></div><br>  Again, we try to start <b>rtorrent</b> , if any parameter in the config is not correct, we get an error with the line number, fix it, try again, if everything is fine, create an autorun script, return to root, <b>exit command</b> in the terminal, return us from the p2p session in root session. <br><pre> <code class="bash hljs">wget http://libtorrent.rakshasa.no/raw-attachment/wiki/RTorrentCommonTasks/rtorrentInit.sh mv rtorrentInit.sh /etc/init.d/rtorrent chmod +x /etc/init.d/rtorrent</code> </pre><br>  go to the autorun script <br><pre> <code class="bash hljs">nano /etc/init.d/rtorrent</code> </pre><br>  Change the line <b>user = "p2p"</b> to our user. <br><br>  We try to run <br><pre> <code class="bash hljs">/etc/init.d/rtorrent start</code> </pre><br>  We check that everything started <br><pre> <code class="bash hljs">ps aux | grep rtorrent</code> </pre><br>  Should see similar lines <br><blockquote>  p2p 10443 0.0 0.0 23388 1516?  Ss 13:17 0:00 SCREEN -dm -S rtorrent <br>  p2p 10449 0.0 0.3 110904 7120 pts / 2 Ssl + 13:17 0:00 rtorrent </blockquote><br><br>  With rtorrent finished, now let's move on to setting the frontends. <br><hr><br><br><h4>  Nginx configuration </h4><br>  For simplicity, I will post the contents of my configs, with comments where necessary. <br><pre> <code class="bash hljs">nano /etc/nginx/nginx.conf</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Lead to mind</b> <div class="spoiler_text">  # User with the rights of which nginx works <br>  user www-data; <br>  # It is recommended to install by the number of cores <br>  worker_processes 2; <br>  pid /var/run/nginx.pid; <br>  worker_rlimit_nofile 8192; <br>  events { <br>  # Maximum number of server connections per worker process <br>  worker_connections 1024; <br>  # Efficient connection handling method used in Linux 2.6+ <br>  use epoll; <br>  } <br>  http { <br>  ## <br>  # Basic settings <br>  # We organize cache for the FastCGI server, I use the section in ram <br>  fastcgi_cache_path / tmp / fcgi-cache / levels = 1: 2 keys_zone = one: 10m; <br>  # Use sendfile, but be careful if you need to give large files, <br>  # that sendfile happens to harm <br>  sendfile on; <br>  # Limit the size of the segment sent for one <br>  # blocked recoil <br>  sendfile_max_chunk 128k; <br>  # Recoil buffer which is used for processed data <br>  postpone_output 1460; <br>  # Size hash for domain names. <br>  server_names_hash_bucket_size 64; <br>  # Size of data received by post request <br>  client_max_body_size 15m; <br>  tcp_nopush on; <br>  tcp_nodelay on; <br>  keepalive_timeout 65; <br>  types_hash_max_size 2048; <br>  # If errors do not tell the enemy version of nginx <br>  server_tokens off; <br>  include /etc/nginx/mime.types; <br>  default_type application / octet-stream; <br><br>  # This is an important point, remember we set the line scgi_port at the beginning of the config .rtorrent.rc <br>  # so here in the server row enter the same parameters.  Required for running / RPC <br>  upstream backendrtorrent { <br>  server 127.0.0.113000; <br>  } <br><br>  ## <br>  # Setting logs <br>  access_log /var/log/nginx/access.log; <br>  error_log /var/log/nginx/error.log; <br>  ## <br><br>  Compression Settings <br>  gzip on; <br>  gzip_disable "msie6"; <br>  ssi on; <br>  ## <br><br>  # Setting up virtual domains <br>  include /etc/nginx/conf.d/*.conf; <br>  include / etc / nginx / sites-enabled / *; <br>  } <br></div></div><br><pre> <code class="bash hljs">nano /etc/nginx/sites-enabled/000-default</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Lead to mind</b> <div class="spoiler_text">  server { <br>  # Folder where rutorrent will be located <br>  root / var / www / rutorrent; <br>  # Setting logs, each virtual domain has its own log <br>  #access_log /var/log/nginx/default-access.log; <br>  access_log off; <br>  error_log /var/log/nginx/default-error.log; <br><br>  # Replacing .htaccess block access to some subdirectories of the engine <br>  location / conf / { <br>  deny all; <br>  } <br>  location / share / { <br>  deny all; <br>  } <br>  # And here is / RPC2, through which our front-ends will manage rtorrent <br>  # Authorization is required, otherwise anyone will manage your rocking chair. <br>  location / RPC2 { <br>  auth_basic "Private ZONE."; <br>  auth_basic_user_file /var/www/rutorrent/.htpasswd; <br>  include / etc / nginx / scgi_params; <br>  scgi_pass backendrtorrent; <br>  } <br><br>  # We connect all templates for testing, on real hosts we will use only the necessary ones. <br>  include / etc / nginx / templates / default; <br>  include / etc / nginx / templates / php; <br>  } <br></div></div><br><pre> <code class="bash hljs">nano /etc/nginx/templates/default</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Lead to mind</b> <div class="spoiler_text">  # Typical settings common to all domains (if you do not want exotic) <br>  ## <br>  index index.html index.php; <br><br>  location / { <br>  # Basic HTTP authentication password protected access to our rutorrent <br>  auth_basic "Private ZONE."; <br>  # auth_basic on; <br>  auth_basic_user_file /var/www/rutorrent/.htpasswd; <br>  } <br><br>  # We close access to the .htaccess and .htpassword files and do not log unnecessary. <br>  location = /favicon.ico {access_log off;  log_not_found off;  } <br>  location = / robots.txt {allow all;  access_log off;  log_not_found off;  } <br>  location = /apple-touch-icon.png {access_log off;  log_not_found off;  } <br>  location = /apple-touch-icon-precomposed.png {access_log off;  log_not_found off;  } <br>  location ~ / \.  {deny all;  access_log off;  log_not_found off;  } <br><br>  # Complicating the life of script kiddies and block popular scanners by UA <br>  if ($ http_user_agent ~ * (nmap | nikto | wikto | sf | sqlmap | bsqlbf | w3af | acunetix | havij | appscan)) { <br>  return 403; <br>  } <br></div></div><br><pre> <code class="bash hljs">nano /etc/nginx/templates/php</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Lead to mind</b> <div class="spoiler_text">  # Passing PHP script processing PHP-FPM <br>  location ~ \ .php $ { <br>  try_files $ uri = 404; <br>  # PHP-FPM listens on a Unix socket, this setting must match <br>  # listen = /tmp/wwwpool.sock in the /etc/php5/fpm/pool.d/www.conf file <br>  fastcgi_pass unix: /tmp/wwwpool.sock; <br>  fastcgi_buffers 8 256k; <br>  fastcgi_buffer_size 128k; <br>  fastcgi_intercept_errors on; <br>  # Use cache zone one <br>  fastcgi_cache one; <br>  # Put the page in the cache, after 3 uses.  A smaller number caused me difficult to explain glitches <br>  # on registration forms <br>  fastcgi_cache_min_uses 3; <br>  # Cache the listed answers <br>  fastcgi_cache_valid 200 301 302 304 5m; <br>  # Cache Key Format - using this key, nginx finds the correct page. <br>  fastcgi_cache_key "$ request_method | $ host | $ request_uri"; <br>  # If you do not use this option, then in the forums everyone will sit under the name of the first logged in forum <br>  fastcgi_hide_header "Set-Cookie"; <br>  # This request will force nginx to cache everything that passes through it. <br>  fastcgi_ignore_headers "Cache-Control" "Expires"; <br>  fastcgi_index index.php; <br>  # fastcgi_intercept_errors on;  # only for the testing period <br>  # Enable parameters from / etc / nginx / fastcgi_param <br>  include fastcgi_params; <br>  # Path to the script that will be passed to php-fpm <br>  fastcgi_param SCRIPT_FILENAME $ document_root $ fastcgi_script_name; <br>  fastcgi_ignore_client_abort off; <br>  } <br></div></div><br>  <i>Caching settings can be disabled or use other parameters at my discretion, I took typical ones.</i> <br>  It is also desirable to set the timezone in the php settings, for this in the files <b>/etc/php5/fpm/php.ini</b> and <b>/etc/php5/cli/php.ini</b> <br>  let's set a variable with our zone, in my case it is Kiev time. <br><pre> <code class="php hljs">date.timezone = <span class="hljs-string"><span class="hljs-string">"Europe/Kiev"</span></span></code> </pre><br><h5>  Now let's do the rutorrent engine </h5><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /var/www/ wget https://rutorrent.googlecode.com/files/rutorrent-3.5.tar.gz tar -xzf rutorrent-3.5.tar.gz rm rutorrent-3.5.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> rutorrent</code> </pre><br>  You can download plugins one by one from the <a href="https://code.google.com/p/rutorrent/downloads/list">site</a> <br>  I prefer to download everything at once, and then delete the unnecessary (description of plug-ins is <a href="https://code.google.com/p/rutorrent/wiki/Plugins">here</a> ) <br><pre> <code class="bash hljs">rmdir plugins wget https://rutorrent.googlecode.com/files/plugins-3.5.tar.gz tar -xzf plugins-3.5.tar.gz rm plugins-3.5.tar.gz</code> </pre><br>  A little tweak engine config: <br>  In file <br><pre> <code class="bash hljs">nano conf/config.php</code> </pre><br>  change the variable to the root of files with torrents. <br><pre> <code class="php hljs">$topDirectory = <span class="hljs-string"><span class="hljs-string">'/hdd/torrent/'</span></span>;</code> </pre><br>  We will generate a username and password to access the engine, you can use htpasswd from the delivery of apache, <br>  but we don‚Äôt have it, therefore we will generate the improvised means: <br><pre> <code class="perl hljs">echo -e <span class="hljs-string"><span class="hljs-string">"your-username:`perl -le 'print crypt("</span></span>your-password<span class="hljs-string"><span class="hljs-string">","</span></span>salt<span class="hljs-string"><span class="hljs-string">")'`"</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/var/www</span></span><span class="hljs-regexp"><span class="hljs-regexp">/rutorrent/</span></span>.htpasswd</code> </pre><br>  In the username, do not forget to leave a colon at the end. <br><br>  We change the owner of the directory to our <br><pre> <code class="bash hljs">chown -R p2p:www-data /var/www/rutorrent</code> </pre><br>  Restart nginx and php <br><pre> <code class="bash hljs">service nginx restart service php5-fpm restart</code> </pre><br>  In the browser, we type our server‚Äôs ip, enter the login and password generated earlier, and get into the control panel of our rocking chair. <br><img src="https://habrastorage.org/storage2/9b9/7f0/595/9b97f059502dfbb78c6a40edcde49250.png"><br><hr><br><h5>  We finished with the web snout, tweaking and a description of the features are on the official website, I will not repeat, let's move on to a convenient management with android. </h5><br><br>  Download to phone and / or tablet <br>  <a href="http://transdroid.org/latest">http://transdroid.org/latest</a> <br>  <a href="http://transdroid.org/latest-search">http://transdroid.org/latest-search</a> <br>  install and run. <br><br>  Choose <b>"Add a new server"</b> <br>  <b>Name:</b> Any to choose <br>  <b>Server Type:</b> rTorrent <br>  <b>IP address or domain name:</b> your server ip or domain <br>  <b>Port:</b> 80 <br>  <b>Use authorization:</b> put a tick <br>  We indicate our name and password in the corresponding fields. <br>  <b>Folder:</b> no changes <br>  In the advanced settings checkbox to your taste <br>  <b>Operating system:</b> Linux <br>  <b>Ftp address:</b> <u><a href="">p2p</a> : password @ ip_server / torrent / download /</u> (indicate access to the ftp folder, about ftp settings below.) <br>  Since we did not use ssl, the rest is unchanged. <br><br>  After that, you can go to your server and see the current downloads, the rest of the program settings to your taste. <br><img src="https://habrastorage.org/storage2/814/e89/706/814e897066f4608ae52335294dd3da13.png"><br><hr><br><h4>  We put the FTP server, very briefly: </h4><br><pre> <code class="bash hljs">apt-get install proftpd</code> </pre><br>  In the standard <b>/etc/proftpd/proftpd.conf</b> config we change: <br><pre> <code class="bash hljs">ServerName <span class="hljs-string"><span class="hljs-string">"My torrent server"</span></span>  DefaultRoot ~ <span class="hljs-comment"><span class="hljs-comment">#        RootLogin off #     root #      IP  (    ) UseReverseDNS off PassivePorts 40000 40499 #     rtorrent</span></span></code> </pre><br>  More fine-tuning can be viewed in the set of articles on this topic; within this article, such a minimum is enough <br><pre> <code class="bash hljs">service proftpd restart</code> </pre><br><hr><br><h4>  We put a samba </h4><br>  Needed for easy local access, also very briefly. <br><pre> <code class="bash hljs">apt-get install samba</code> </pre><br>  We give the config <b>/etc/samba/smb.conf</b> to the form: <br><div class="spoiler">  <b class="spoiler_title">Minimum config</b> <div class="spoiler_text">  ;  Global server settings <br>  [global] <br>  ;  General server settings <br>  ;  The name of the company, as will be seen in the network environment <br>  netbios name = torrent-box <br>  server string = <br>  ;  Customer work group <br>  workgroup = WORKGROUP <br>  announce version = 5.0 <br>  socket options = TCP_NODELAY IPTOS_LOWDELAY SO_KEEPALIVE SO_RCVBUF = 8192 SO_SNDBUF = 8192 <br>  passdb backend = tdbsam <br>  security = user <br>  null passwords = true <br>  ;  File for username alias <br>  username map = / etc / samba / smbusers <br>  name resolve order = hosts wins bcast <br>  wins support = yes <br>  ;  Logs <br>  log file = /var/log/samba/log.%m <br>  syslog = 0 <br>  syslog only = no <br>  ;  Configure binding to interfaces on which to listen, if not specified listens on all interfaces <br>  interfaces = eth0 <br>  ;  bind interfaces only = true <br>  ;  Hard disk drive <br>  ;  Name balls, visible from customers <br>  [torrent] <br>  ;  Path to the shared disk <br>  path = / hdd / <br>  ;  Can I view <br>  browseable = yes <br>  read only = no <br>  guest ok = no <br>  create mask = 0644 <br>  directory mask = 0755 <br></div></div><br>  We generate the password for our user <br><pre> <code class="bash hljs">smbpasswd -a p2p</code> </pre><br>  Enable user <br><pre> <code class="bash hljs">smbpasswd -e p2p</code> </pre><br>  And so, as a result, we got a working torrent server, with rich management capabilities, access to downloaded files via smb and ftp, from additional amenities I can advise you to use a number of plug-ins for rutorrent, allowing you to automate the downloading of new products.  From connected projects, I would like to cancel <a href="http://blog.korphome.ru/torrentmonitor/">torrentmonitor</a> from habraiser <a href="https://habrahabr.ru/users/korp/" class="user_link">KorP</a> . <br>  Thank you all for your attention. </div><p>Source: <a href="https://habr.com/ru/post/183626/">https://habr.com/ru/post/183626/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../183616/index.html">No time to explain!</a></li>
<li><a href="../183618/index.html">Samsung announced GALAXY S4 zoom - the first smartphone with 10x optical zoom</a></li>
<li><a href="../183620/index.html">Verify site ownership in Webmaster Tools with Google Tag Manager</a></li>
<li><a href="../183622/index.html">June 28, 2013 Wall Street is waiting for "Quantum Dawn"</a></li>
<li><a href="../183624/index.html">Yandex.Money opened identification in Euroset</a></li>
<li><a href="../183628/index.html">Clouds are even cheaper</a></li>
<li><a href="../183630/index.html">HTML 5 Notifications API</a></li>
<li><a href="../183634/index.html">New design admin WordPress.com</a></li>
<li><a href="../183636/index.html">Study of the ‚Äúworking‚Äù diaphragm numbers of the lens on the example of Canon EF 1.8 / 50 II</a></li>
<li><a href="../183638/index.html">Algorithm seam carving for image resizing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
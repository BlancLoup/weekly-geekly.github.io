<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing the Mobile Delphi Application Database</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous article, ‚ÄúChoosing a DBMS for a Mobile Delphi Application,‚Äù as its name implies, the first stage was shown in developing the applicati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing the Mobile Delphi Application Database</h1><div class="post__text post__text-html js-mediator-article">  In the previous article, <a href="https://habrahabr.ru/post/311658">‚ÄúChoosing a DBMS for a Mobile Delphi Application,‚Äù</a> as its name implies, the first stage was shown in developing the application subsystem that is responsible for storing and most of the processing of its data;  the clarification about the ‚Äúmost part‚Äù was made for a reason, as the result of the indicated choice fell on the Interbase DBMS precisely because of the possibility to use stored procedures (CP), which became the focus of the main logic on working with data, leaving the Delphi code uncomplicated challenge to call them. <br><br>  For a better understanding of the need for testing in this particular case, it should be noted that in the described project, a rather high quality bar was initially set, the maintenance of which, in terms of the functionality implemented in the procedures, was achieved, including through autotests, checking key CPs (they responsible for the application-critical functionality ( <a href="https://habrahabr.ru/post/311658/">recommendation system</a> ).  It is one of the ways to organize such testing - based on <a href="http://docwiki.embarcadero.com/RADStudio/Berlin/en/DUnitX_Overview">DUnitX</a> and XML - and is the subject of the article. <a name="habracut"></a><br><br><h2>  Was there a use? </h2><br>  If you yourself have already used, or are familiar with the literature explaining the benefits of automated tests, then this semi-introductory section can be completely overlooked, especially since it does not contain any theory, but gives examples of the benefits brought to this particular project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If we discard primitive, stupid and easily detectable errors, it seems always an empty result due to a forgotten <a href="http://docwiki.embarcadero.com/InterBase/XE7/en/SUSPEND">SUSPEND</a> ‚Äî that is, all those that immediately manifest themselves with mandatory manual testing of newly written code on minimal test data ‚Äî then we can distinguish 2 categories of successfully resolved problems : <br><br><ol><li>  The most obvious, for the sake of which, in fact, basically such tests are written, is a <b>layer of logical errors</b> , when the required algorithm is implemented in some way incorrectly.  The tests were able to identify up to a dozen of such flaws, and these cases with a high degree of probability would not be detected by manual checks, since special, specially selected test data were required. </li><li>  Not so rich in harvest, but also leading to unacceptable errors, the category is the <b>imperfection of Interbase itself</b> .  Thanks to the tests, an unpleasant acquaintance with such nuances as an <a href="https://habrahabr.ru/post/311658/">unstable cursor</a> and a <a href="https://habrahabr.ru/post/311658/">connection with CP</a> , the parameters of which are taken from the query tables, took place. </li></ol><br>  Having learned about the delights of automatic testing, an inexperienced developer may want to apply it everywhere, however ... World peace is certainly wonderful, but what is the price of such aspirations?  The author spent on the actual tests themselves - the preparation of a test plan, the selection of test data, about 3-4 weeks (and this is without taking into account the time to create the infrastructure for their launch, as described in the section below).  Therefore, it is recommended to relate the benefits and costs individually in each case. <br><br><h2>  From words - to business </h2><br>  Let us turn to the practical part, having preliminarily formulated the technical requirements that autotests should meet: <br><br><ol><li>  <b>Cross platform</b> : running on Windows and mobile devices;  The desktop OS is needed for an obvious reason - the test run is performed many times faster, hence their development is carried out on it, after which the final run on the mobile OS takes place. </li><li>  Using the <b>DUnitX</b> library - it, in contrast to <a href="http://docwiki.embarcadero.com/RADStudio/Berlin/en/DUnit_Overview">DUnit</a> , is <a href="https://github.com/VSoftTechnologies/DUnitX">developing</a> steadily and has a ready-made graphical interface on FireMonkey (albeit medium-sized), the same for all platforms. </li><li>  The separation of the launch infrastructure (DUnitX-parts) from the actual semantic content of the tests - test data, list of CPs with execution parameters, expected results - all this should <b>be stored in an XML file</b> .  This requirement somewhat complicates the task, but it gives advantages: the essence of the tests remains unclouded, only the service Delphi code does not complicate them, and second, if necessary, you can safely switch to another test library.  A small fragment of such XML will help to better understand what has been said (references to it will appear later in the text): <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">__</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SHOPPING_LIST"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">__</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">__</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    .--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-comment"><span class="hljs-comment">&lt;!--2 ,   .--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SHOPPING_LIST"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ID</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ID</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NAME</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NAME</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ADD_DATE</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"__"</span></span></span><span class="hljs-tag">&gt;</span></span>1.2.2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ADD_DATE</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LIST_ITEM"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ID</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ID</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LIST_ID</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LIST_ID</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GOODS_ID</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>107<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GOODS_ID</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AMOUNT</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AMOUNT</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ADD_DATE</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"__"</span></span></span><span class="hljs-tag">&gt;</span></span>25.2.2015 15:12<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ADD_DATE</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"RECOMMEND_GOODS_TO_EMPTY_LIST"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TARGET_DATE</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"__"</span></span></span><span class="hljs-tag">&gt;</span></span>16.9.2014<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TARGET_DATE</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TARGET_DATE</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"__"</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.2015<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TARGET_DATE</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GOODS_ID</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>107<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GOODS_ID</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RECOMMENDATION_ID</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RECOMMENDATION_ID</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ACCURACY</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>0.75<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ACCURACY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li></ol><br><a name="XML_editor"></a>  Real files are much larger than this example - from 3,000 to 4,500 lines, and editing them in text form is not reasonable - the chance to make a mistake is already very high in the tests, so the specialized <a href="https://www.altova.com/xmlspy.html">Altova XMLSpy</a> editor, which has a tabular mode for working with XML, was used.  Thanks to this tool, you can fully focus on the essence, without being distracted by the tags, their nesting, etc.: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/e95/d55/e2b/e95d55e2b5734ed095dc9864d66cb964.png"></div><br><h3>  DUnitX extension </h3><br>  The selected library allows you to place tests in any class, marking it and the corresponding methods with special attributes, for example: <br><br><pre> <code class="delphi hljs">[TestFixture] TTestSet = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> [SetupFixture] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">;</span></span> [TearDownFixture] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">;</span></span> [Setup] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestSetup</span></span></span><span class="hljs-function">;</span></span> [TearDown] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestTeardown</span></span></span><span class="hljs-function">;</span></span> [Test] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test1</span></span></span><span class="hljs-function">;</span></span> [Test] [TestCase(<span class="hljs-string"><span class="hljs-string">' 1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1,1'</span></span>)] [TestCase(<span class="hljs-string"><span class="hljs-string">' 2'</span></span>, <span class="hljs-string"><span class="hljs-string">'2,2'</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IntegerParameter: Integer; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> StringParameter: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  Here <code>TTestSet</code> is a test suite (fixture, in terms of a library) of 2 tests, the second of which will be executed a couple of times - with both specified options of parameters.  However, this standard method does not suit us completely, because the number of tests and parameter values ‚Äã‚Äãare statically set at the compilation stage, and we need <b>to dynamically generate</b> both a list of test cases (one for each XML file) and a list of tests in each of them (taking from the corresponding file on the tag "Test"). <br><br>  The obstacle can be easily overcome due to the mechanism of plug-ins - DUnitX allows you to create sets flexibly and fill them according to your needs;  moreover, the ‚Äúboxed‚Äù mechanism based on attributes is also implemented as a plug-in (see <i>DUnitX.FixtureProviderPlugin.pas</i> ), which means it is well tested and there are no surprises to expect when working with it. <br><br><h4>  "Interface" part of the module </h4><br>  Consideration of the module with the new plugin will start with the resulting classes, leaving the implementation of the methods a little later: <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">unit</span></span> Tests.XMLFixtureProviderPlugin; <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-keyword"><span class="hljs-keyword">implementation</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uses</span></span> DUnitX.TestFramework, DUnitX.Utils, DUnitX.Extensibility, ... Xml.XMLDoc, <span class="hljs-meta"><span class="hljs-meta">{$IFDEF MSWINDOWS}</span></span> Xml.Win.msxmldom <span class="hljs-meta"><span class="hljs-meta">{$ELSE}</span></span> Xml.omnixmldom <span class="hljs-meta"><span class="hljs-meta">{$ENDIF}</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-title"><span class="hljs-title">TXMLFixtureProviderPlugin</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>(TInterfacedObject, IPlugin) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPluginFeatures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> context: IPluginLoadContext)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-title"><span class="hljs-title">TXMLFixtureProvider</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>(TInterfacedObject, IFixtureProvider) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateTests</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Fixture: ITestFixture; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> FileName: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> context: IFixtureProviderContext)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; TDBTests = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-comment"><span class="hljs-comment">{    ,     ,   ,      ¬´¬ª,  ,        . }</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestSetup</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestTeardown</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> TestIndex: Integer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-title"><span class="hljs-title">TXMLBasedDBTests</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>(TDBTests) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TestsTag = <span class="hljs-string"><span class="hljs-string">''</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FFileName: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; FXML: TXMLDocument; <span class="hljs-comment"><span class="hljs-comment">//    ,     XML. ... public procedure AfterConstruction; override; {      AfterConstruction ‚Äì   Setup     .     : https://github.com/VSoftTechnologies/DUnitX/commit/267111f4feec77d51bf2307a194f44106d499680#diff-745fb4ee38a43631f57d1b6ef88e0ffcR212 } destructor Destroy; override; [SetupFixture] procedure Setup; override; [TearDownFixture] procedure Teardown; override; [Setup] procedure TestSetup; override; [TearDown] procedure TestTeardown; override; [Test] procedure Test(const TestIndex: Integer); override; function DetermineTestIndexes: TArray&lt;Integer&gt;; property FileName: string read FFileName write FFileName; end; //     ... initialization TDUnitX.RegisterPlugin(TXMLFixtureProviderPlugin.Create); end.</span></span></code> </pre> <br>  The first two classes, <code>TXMLFixtureProviderPlugin</code> and <code>TXMLFixtureProvider</code> , are needed for embedding plugins into the existing system and are only interesting with the implementation of their methods.  The next, <code>TDBTests</code> , is also of little interest, since by and large it is highlighted in the hierarchy in order to encapsulate the database-specific things, so you should go directly to the heir - <code>TXMLBasedDBTests</code> .  His duties are tied to the stages of his life: <br><br><ul><li>  Immediately after the start of the application responsible for running the tests, DUnitX compiles a list of test cases: at this moment objects of the specified class are created using the <code>DetermineTestIndexes</code> method, which returns the indices of the child nodes of the Tests node (see the XML fragment above).  With its implementation, it is not possible to do a little blood-just knowing the number of nodes-descendants and returning, conditionally, the sequence of indices from 1 to N ‚Äî will not work, because, first of all, some of the nodes are comments, and it is also possible to temporarily disable the test (instead of removing it from file). <br><br>  As a result, for each index obtained, a test will be added (test case, to be strict) to the set. </li><li>  This stage, in general, may be absent, but if the user receives a command to run the tests (by pressing a button), the following chain of calls follows: <br><ol><li> <code>Setup</code> </li> <li>  The <code>Test</code> is repeatedly executed, to which the indices obtained at the first stage are transmitted.  Each of his <code>TestSetup</code> preceded by <code>TestSetup</code> , and after completion is followed by <code>TestTeardown</code> . </li><li> <code>Teardown</code> </li> </ol></li></ul><br><h4>  Implementation methods </h4><br>  After becoming acquainted with the purpose of the classes, it remains to demonstrate the rest of the code: <br><br><ol><li> <code>TXMLFixtureProviderPlugin</code> <br> <br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TXMLFixtureProviderPlugin</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPluginFeatures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> context: IPluginLoadContext)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> context.RegisterFixtureProvider(TXMLFixtureProvider.Create); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> </li><li> <code>TXMLFixtureProvider</code> <br> <br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TXMLFixtureProvider</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> context: IFixtureProviderContext)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> XMLDirectory, XMLFile: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-meta"><span class="hljs-meta">{$IFDEF MSWINDOWS}</span></span> XMLDirectory := <span class="hljs-comment"><span class="hljs-comment">{    .}</span></span>; <span class="hljs-meta"><span class="hljs-meta">{$ELSE}</span></span> XMLDirectory := TPath.GetDocumentsPath; <span class="hljs-meta"><span class="hljs-meta">{$ENDIF}</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> XMLFile <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> TDirectory.GetFiles(XMLDirectory, <span class="hljs-string"><span class="hljs-string">'*.xml'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> GenerateTests ( context.CreateFixture(TXMLBasedDBTests, TPath.GetFileNameWithoutExtension(XMLFile), <span class="hljs-string"><span class="hljs-string">''</span></span>), XMLFile ); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TXMLFixtureProvider</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateTests</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Fixture: ITestFixture; </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> FileName: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillSetupAndTeardownMethods</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RTTIMethod: TRttiMethod)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Method: TMethod; TestMethod: TTestMethod; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Method.Data := Fixture.FixtureInstance; Method.Code := RTTIMethod.CodeAddress; TestMethod := TTestMethod(Method); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> RTTIMethod.HasAttributeOfType&lt;SetupFixtureAttribute&gt; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Fixture.SetSetupFixtureMethod(RTTIMethod.<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, TestMethod); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> RTTIMethod.HasAttributeOfType&lt;TearDownFixtureAttribute&gt; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Fixture.SetTearDownFixtureMethod(RTTIMethod.<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, TestMethod, RTTIMethod.IsDestructor); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> RTTIMethod.HasAttributeOfType&lt;SetupAttribute&gt; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Fixture.SetSetupTestMethod(RTTIMethod.<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, TestMethod); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> RTTIMethod.HasAttributeOfType&lt;TearDownAttribute&gt; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Fixture.SetTearDownTestMethod(RTTIMethod.<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, TestMethod); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> XMLTests: TXMLBasedDBTests; RTTIContext: TRttiContext; RTTIMethod: TRttiMethod; TestIndex: Integer; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> XMLTests := Fixture.FixtureInstance <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TXMLBasedDBTests; XMLTests.FileName := FileName; RTTIContext := TRttiContext.Create; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> RTTIMethod <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> RTTIContext.GetType(Fixture.TestClass).GetMethods <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> FillSetupAndTeardownMethods(RTTIMethod); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> RTTIMethod.HasAttributeOfType&lt;TestAttribute&gt; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> TestIndex <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> XMLTests.DetermineTestIndexes <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> Fixture.AddTestCase( RTTIMethod.<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>, TestIndex.ToString, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, RTTIMethod, True, [TestIndex] ); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> RTTIContext.Free; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> </li><li> <code>TDBTests</code> <br> <br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TDBTests</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-comment"><span class="hljs-comment">//         . ... end; procedure TDBTests.Teardown; begin //   . ... end;</span></span></code> </pre> </li><li> <code>TXMLBasedDBTests</code> <br> <br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TXMLBasedDBTests</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AfterConstruction</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inherited</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  FXML. ... FXML.DOMVendor := GetDOMVendor({$IFDEF MSWINDOWS} SMSXML {$ELSE} sOmniXmlVendor {$ENDIF}); //  . ... end; destructor TXMLBasedDBTests.Destroy; begin //  . ... inherited; end; function TXMLBasedDBTests.DetermineTestIndexes: TArray&lt;Integer&gt;; var TestsNode: IXMLNode; TestIndex: Integer; TestIndexList: TList&lt;Integer&gt;; begin FXML.LoadFromFile(FFileName); try TestsNode := FXML.DocumentElement.ChildNodes[TestsTag]; TestIndexList := TList&lt;Integer&gt;.Create; try for TestIndex := 0 to TestsNode.ChildNodes.Count - 1 do if {       ?} then TestIndexList.Add(TestIndex); Result := TestIndexList.ToArray; finally TestIndexList.Free; end; finally FXML.Active := False; end; end; procedure TXMLBasedDBTests.Setup; begin inherited; FXML.LoadFromFile(FFileName); end; procedure TXMLBasedDBTests.Teardown; begin FXML.Active := False; inherited; end; procedure TXMLBasedDBTests.TestSetup; begin inherited; //     ¬´__¬ª. ... end; procedure TXMLBasedDBTests.TestTeardown; begin inherited; //     ¬´__¬ª. ... end; procedure TXMLBasedDBTests.Test(const TestIndex: Integer); var TestNode: IXMLNode; begin inherited; TestNode := FXML.DocumentElement.ChildNodes[TestsTag].ChildNodes[TestIndex]; //   . ... end;</span></span></code> </pre> </li></ol><br><h3>  Graphical interface </h3><br>  The requirements for autotests mentioned a <b>ready-made form</b> that allows you to manage the launch and view its results - it was about <i>DUNitX.Loggers.MobileGUI.pas</i> , which, after minor cosmetic improvements, was applied.  The results of the run on 3 platforms, with one intentionally failed test, are presented below: <br><br><ol><li>  Windows (runtime 7s) <br><br><img src="https://habrastorage.org/web/c90/d87/1f0/c90d871f0155415e82be86eeda4f3b09.png" alt="List of tests (Windows)" width="300"><img src="https://habrastorage.org/web/c6d/78b/bc5/c6d78bbc57fc4ae6b9f0c9b0760f0fc0.png" alt="Test Run Results (Windows)" width="300"></li><li>  Android (run time 35 s) <br><br><img src="https://habrastorage.org/web/6ec/ccf/c00/6ecccfc00bff40e3842ce3b8865dbc00.png" alt="The list of tests (Android)" width="300"><img src="https://habrastorage.org/web/6ea/85e/bd8/6ea85ebd84f947dfb5e36a236ed3fcd6.png" alt="Test Run Results (Android)" width="300"></li><li>  iOS (runtime 28 seconds) <br><br><img src="https://habrastorage.org/web/b9b/188/c1d/b9b188c1dd224291bfe15605bd32d15f.PNG" alt="The list of tests (iOS)" width="300"><img src="https://habrastorage.org/web/102/f5c/a43/102f5ca43f07475bbb2014f385e90b3b.PNG" alt="Test Run Results (iOS)" width="300"></li></ol></div><p>Source: <a href="https://habr.com/ru/post/333548/">https://habr.com/ru/post/333548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333530/index.html">Cross-platform IoT: Using the Azure CLI and Azure IoT Hub</a></li>
<li><a href="../333532/index.html">Remove "4D video" using a depth-sensor and Delaunay triangulation</a></li>
<li><a href="../333540/index.html">E-democracy or how to collect and process data on voting (and turnout) for renovation in Moscow</a></li>
<li><a href="../333544/index.html">How To Make Progressive Web Apps: A Beginner's Guide</a></li>
<li><a href="../333546/index.html">Translation of the Appium Essentials book. Chapter 6</a></li>
<li><a href="../333552/index.html">You don't know a damn thing in colors</a></li>
<li><a href="../333554/index.html">QML: how easy it is to get T-shirts in machine learning competitions for mail.ru</a></li>
<li><a href="../333556/index.html">Hybrid Memory Cube (HMC): what it is and how to connect it to FPGA</a></li>
<li><a href="../333558/index.html">Features of the national SMS authorization</a></li>
<li><a href="../333560/index.html">Cisco Meeting Server - now all video conferencing from one place</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
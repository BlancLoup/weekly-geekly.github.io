<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Non-standard approach to "improving the performance" of select queries in SQLite</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 First of all, I would like to note 2 points: 
 - this article describes the algorithm of work, and not how to optimize specific SQL queries;...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Non-standard approach to "improving the performance" of select queries in SQLite</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  First of all, I would like to note 2 points: <br>  - this article describes the algorithm of work, and not how to optimize specific SQL queries; <br>  - the approach described in the article is not relevant for the ‚Äúproductive‚Äù iron, it will be discussed how it was possible to increase the ‚Äúresponsiveness‚Äù of the application interface that is intensively working with the database on budget smartphones running Android; <br><a name="habracut"></a><br><h4>  Briefly about the application </h4><br>  To make it clear what is at stake, in 2 words I will say about the application itself: it was a system for organizing mobile commerce, the majority of users are sales agents (TA). When a TA agent arrives at a point of sale, he needs to very quickly find the necessary to see the goods in the warehouses (at the time of the last synchronization) and note the quantity needed by the customer.  Those.  The TA operation algorithm looks something like this: <br>  - find item 1; <br>  - enter the number; <br>  - find item 2; <br>  - enter the number; <br>  ... <br><br>  They do it very quickly :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Search Requirements </h4><br>  - Search by product name (and it can be both in Russian and in English); <br>  - Each client can have ‚Äúhis‚Äù price list; <br>  - You need to be able to see all the products, and only those that are in the remnants; <br>  - Have the ability to filter the list of products for the selected category with all subcategories enclosed in it; <br><br><h4>  Initial data </h4><br>  The figures that I give are real, otherwise I would not have to invent all this. <br>  Number of clients: 500 <br>  Products: 5000 <br>  When assigning each client an individual price list, we get: 5000 * 500 = 2 500 000 lines in the price table. <br><br>  Despite the fact that SQLite is very fast, it was not possible to solve the problem head-on.  Or rather, to say that everything worked, but not fast enough. <br><br><h4>  Decision </h4><br>  The first obvious thing is that the SQL query is formed dynamically (in order to exclude from it unnecessary join'y and conditions, if they are not necessary).  Also in the course of the experiments it turned out that the union of the tables in the form: <br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Table1, Table2 <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> Table1.Table2Id = Table2.Id</code> </pre> <br>  works a little faster than: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Table1 <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> Table2 <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> Table1.Table2Id = Table2.Id</code> </pre><br>  Well, one more, quite natural moment (although it didn‚Äôt immediately occur), this is what the query of the form: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> Table1.Id <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Table1, Table2 ... TableN <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> Table1.Table2Id = Table2.Id ...</code> </pre><br>  will be executed much faster than: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> Table1.Id, ... TableN.FieldN <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Table1, Table2 ... TableN <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> Table1.Table2Id = Table2.Id ...</code> </pre><br>  Those.  the same query, but returning only one field will be executed much faster than if you try to ‚Äúpull out‚Äù all the necessary fields at once. <br><br><h4>  What about the rest of the data? </h4><br>  And the rest of the data we get a series of simple queries like: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Table1 <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span> = ?</code> </pre><br>  This request is very fast.  Id is the primary key. <br><br><h4>  Total </h4><br>  The main optimization factor was splitting the process of receiving data into several queries: one of them returns a list of identifiers, and the rest of the data is returned by much simpler queries. <br><br>  As I said, this approach has significantly accelerated the speed of the application on budget models of smartphones.  When scrolling through the list of products (when several ‚Äúsimple‚Äù requests are executed for each appearing list item), no visible slowdowns are observed. </div><p>Source: <a href="https://habr.com/ru/post/154817/">https://habr.com/ru/post/154817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154801/index.html">Guessing celebrity</a></li>
<li><a href="../154805/index.html">Cognitive radio - first experiences</a></li>
<li><a href="../154807/index.html">Time for self-study - when and how much? (main source of new knowledge)</a></li>
<li><a href="../154811/index.html">Templates in C. Yes! On pure C. Not With ++</a></li>
<li><a href="../154815/index.html">Do you use old browsers in your work, surfing and development (Fx3.6, IE6-7, Opera10, Safari4)?</a></li>
<li><a href="../154819/index.html">Error in the site cost Electronic Arts thousands of downloaded free games</a></li>
<li><a href="../154823/index.html">Why is our SEO worse than Western and what can we learn from them?</a></li>
<li><a href="../154825/index.html">AWS: Amazon Linux 2012.09</a></li>
<li><a href="../154827/index.html">AndroidKickstartr - create a modern project in five clicks</a></li>
<li><a href="../154829/index.html">Mikrotik + IPSec + Cisco. Part 2. Tunnel on the "gray" IP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
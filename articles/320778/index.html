<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recheck SharpDevelop: What's New?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The PVS-Studio tool is constantly being improved. At the same time, the C # code analyzer is currently developing most dynamically: in 2016, ninety ne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recheck SharpDevelop: What's New?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/7cc/b23/41a/7ccb2341acd4412b9b115cba3d43eae2.png" align="left">  The PVS-Studio tool is constantly being improved.  At the same time, the C # code analyzer is currently developing most dynamically: in 2016, ninety new diagnostic rules were added to it.  Well, the best indicator of the quality of the analyzer is the errors it detects.  It is always interesting, and also quite useful, to re-check large open source projects, comparing the results.  Today I will focus on re-checking the project SharpDevelop. <br><a name="habracut"></a><br><h2>  Introduction </h2><br>  The previous <a href="http://www.viva64.com/ru/b/0359/">article</a> about checking <a href="http://www.icsharpcode.net/OpenSource/SD/Default.aspx">SharpDevelop</a> was published by Andrey Karpov in November 2015.  At that time, we were just testing a new C # analyzer, preparing for the release of the first release.  However, even then, with the help of the beta version, Andrew was able to detect some interesting errors in the SharpDevelop project.  After that, SharpDevelop was ‚Äúplaced on the shelf‚Äù and used together with other projects only for internal testing when developing new diagnostic rules.  And now, finally, the time has come to check SharpDevelop again, but with a more ‚Äúmuscular‚Äù version of the <a href="http://www.viva64.com/ru/pvs-studio-download/">PVS-Studio 6.12</a> analyzer. <br><br>  For verification, I downloaded the current version of SharpDevelop source code from the <a href="https://github.com/icsharpcode/SharpDevelop">GitHub</a> portal.  The project contains about a million lines of C # code.  In the process, the analyzer issued 809 warnings.  Of these, the first level is 74, the second is 508, the third is 227: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/613/99b/ac4/61399bac424843c4afe999e2ee427a77.png"></div><br>  We will not consider warnings at the Low level: there is a statistically large percentage of false positives.  The analysis of warnings at the Meduim and High levels (582 warnings) revealed about 40% of erroneous or highly suspicious structures.  This amounts to 233 warnings.  In other words, the PVS-Studio analyzer found an average of 0.23 errors per 1000 lines of code.  This indicates the high quality of the SharpDevelop project code.  On many other projects, everything looks much more sad. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result of the repeated check, a part of the errors described earlier by Andrey in his article was discovered.  But most of the errors found are new.  Further I will give the most interesting of them. <br><br><h2>  Test results </h2><br>  <b>Reference Copy-Paste Error</b> <br><br>  An error that can rightfully take an honorable place in the " <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D0%25B6%25D0%25B4%25D1%2583%25D0%25BD%25D0%25B0%25D1%2580%25D0%25BE%25D0%25B4%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B1%25D1%258E%25D1%2580%25D0%25BE_%25D0%25BC%25D0%25B5%25D1%2580_%25D0%25B8_%25D0%25B2%25D0%25B5%25D1%2581%25D0%25BE%25D0%25B2">chamber of weights and measures</a> ."  A vivid illustration of the utility of using static code analysis and the danger of Copy-Paste. <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3102/">V3102</a> Suspicious access to the element of the 'method. SequencePoints' object by a constant index inside a loop.  CodeCoverageMethodTreeNode.cs 52 <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ActivateItem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (method != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; method.SequencePoints.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { CodeCoverageSequencePoint firstSequencePoint = method.SequencePoints[<span class="hljs-number"><span class="hljs-number">0</span></span>]; .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; method.SequencePoints.Count; ++i) { CodeCoverageSequencePoint sequencePoint = method.SequencePoints[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... } .... } .... }</span></span></code> </pre> <br>  At each iteration of the <i>for</i> loop, access to the zero element of the collection is used.  I deliberately gave an extra piece of code immediately after the <i>if</i> condition <i>.</i>  It is easy to see where the string was placed from inside the loop.  The variable name <i>firstSequencePoint was</i> replaced with a <i>sequencePoint</i> , but the access expression by index was forgotten.  The correct version of this design is: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ActivateItem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (method != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; method.SequencePoints.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { CodeCoverageSequencePoint firstSequencePoint = method.SequencePoints[<span class="hljs-number"><span class="hljs-number">0</span></span>]; .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; method.SequencePoints.Count; ++i) { CodeCoverageSequencePoint sequencePoint = method.SequencePoints[i]; .... } .... } .... }</code> </pre> <br>  <b>‚ÄúFind the 10 differences,‚Äù or again Copy-Paste</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3021/">V3021</a> There are two 'if' statements with identical conditional expressions.  The first 'if' statement contains method return.  This means that the statement is a senseless second namespaceTreeNode.cs 87 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Compare</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SharpTreeNode x, SharpTreeNode y</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (typeNameComparison == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x.Text.ToString().Length &lt; y.Text.ToString().Length) <span class="hljs-comment"><span class="hljs-comment">// &lt;= return -1; if (x.Text.ToString().Length &lt; y.Text.ToString().Length) // &lt;= return 1; } .... }</span></span></code> </pre> <br>  Both <i>if</i> blocks contain the same condition.  In this case, it is difficult to judge how the correct version of the program should look.  It is necessary to study the code fragment by its author. <br><br>  <b>Late equality test for null</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3095/">V3095</a> The 'position' object was used against it.  Check lines: 204, 206. Task.cs 204 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JumpToPosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasLocation &amp;&amp; !position.IsDeleted) <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... else if (position != null) .... }</span></span></code> </pre> <br>  The <i>position</i> variable is used without checking for <i>null</i> equality.  The check is performed in another condition, in an <i>else</i> code block.  The correct code could be: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">JumpToPosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasLocation &amp;&amp; position != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; !position.IsDeleted) .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (position != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) .... }</code> </pre> <br>  <b>Missing null equality test</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3125/">V3125</a> The 'mainAssemblyList' object has been verified against null.  Check lines: 304, 291. ClassBrowserPad.cs 304 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateActiveWorkspace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mainAssemblyList = SD.ClassBrowser.MainAssemblyList; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((mainAssemblyList != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (activeWorkspace != <span class="hljs-literal"><span class="hljs-literal">null</span></span>)) { .... } .... mainAssemblyList.Assemblies.Clear(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... }</span></span></code> </pre> <br>  The <i>mainAssemblyList</i> variable <i>is</i> used without first checking for <i>null</i> equality.  At the same time, another code fragment contains such a check.  The correct code is: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateActiveWorkspace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mainAssemblyList = SD.ClassBrowser.MainAssemblyList; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((mainAssemblyList != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (activeWorkspace != <span class="hljs-literal"><span class="hljs-literal">null</span></span>)) { .... } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mainAssemblyList != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { mainAssemblyList.Assemblies.Clear(); } .... }</code> </pre> <br>  <b>Unexpected sort result</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3078/">V3078</a> Original sorting order will be after the repetitive call to 'OrderBy' method.  Use 'ThenBy' method to preserve the original sorting.  CodeCoverageMethodElement.cs 124 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SequencePoints.OrderBy(item =&gt; item.Line) .OrderBy(item =&gt; item.Column); <span class="hljs-comment"><span class="hljs-comment">// &lt;= }</span></span></code> </pre> <br>  The result of this code fragment will be the sorting of the <i>SequencePoints</i> collection only by the <i>Column</i> field.  Apparently, this is not exactly what the author of the code expected.  The problem is that calling the <i>OrderBy</i> method again will sort the collection without considering the result of the previous sort.  To remedy the situation, use <i>ThenBy</i> instead of calling <i>OrderBy</i> again: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SequencePoints.OrderBy(item =&gt; item.Line) .ThenBy(item =&gt; item.Column); }</code> </pre> <br>  <b>Potential division by zero</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3064/">V3064</a> Potential division by zero.  Consider inspecting denominator 'workAmount'.  XamlSymbolSearch.cs 60 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">XamlSymbolSearch</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IProject project, ISymbol entity</span></span></span><span class="hljs-function">)</span></span> { .... interestingFileNames = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;FileName&gt;(); .... <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ....) interestingFileNames.Add(item.FileName); .... workAmount = interestingFileNames.Count; workAmountInverse = <span class="hljs-number"><span class="hljs-number">1.0</span></span> / workAmount; <span class="hljs-comment"><span class="hljs-comment">// &lt;= }</span></span></code> </pre> <br>  If the <i>interestingFileNames</i> collection is empty, a division by zero occurs.  It is quite difficult to suggest a suitable way to correct the error.  But, in any case, it is necessary to refine the algorithm for calculating the value of the variable <i>workAmountInverse</i> in a situation where the variable <i>workAmount</i> will be equal to zero. <br><br>  <b>Reassignment</b> <br><br>  <b>PVS-Studio analyzer warning</b> : V3008 The 'ignoreDialogIdSelectedInTextEditor' variable is assigned values ‚Äã‚Äãtwice successively.  Perhaps this is a mistake.  Check lines: 204, 201. WixDialogDesigner.cs 204 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OpenDesigner</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ignoreDialogIdSelectedInTextEditor = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= WorkbenchWindow.ActiveViewContent = this; } finally { ignoreDialogIdSelectedInTextEditor = false; // &lt;= } }</span></span></code> </pre> <br>  The variable <i>ignoreDialogIdSelectedInTextEditor</i> will <i>return</i> <i>false</i> regardless of the result of the <i>try</i> block.  To exclude the possibility of the presence of "pitfalls" let's review the declaration of the variables used.  The declaration <i>ignoreDialogIdSelectedInTextEditor</i> has the form: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ignoreDialogIdSelectedInTextEditor;</code> </pre> <br>  <i>IWorkbenchWindow</i> and <i>ActiveViewContent declaration</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IWorkbenchWindow WorkbenchWindow { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> workbenchWindow; } } IViewContent ActiveViewContent { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  As you can see, there are no obvious reasons for reassigning the variable <i>ignoreDialogIdSelectedInTextEditor to a</i> value.  I would venture to suggest that the correct version of the above construction could differ from the original using the <i>catch</i> keyword instead of <i>finally</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OpenDesigner</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ignoreDialogIdSelectedInTextEditor = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; WorkbenchWindow.ActiveViewContent = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { ignoreDialogIdSelectedInTextEditor = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  <b>Erroneous search for a substring</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3053/">V3053</a> An excessive expression.  Examine the substrings '/ debug' and '/ debugport'.  NDebugger.cs 287 <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsKernelDebuggerEnabled { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (systemStartOptions.Contains(<span class="hljs-string"><span class="hljs-string">"/debug"</span></span>) || systemStartOptions.Contains(<span class="hljs-string"><span class="hljs-string">"/crashdebug"</span></span>) || systemStartOptions.Contains(<span class="hljs-string"><span class="hljs-string">"/debugport"</span></span>) || <span class="hljs-comment"><span class="hljs-comment">// &lt;= systemStartOptions.Contains("/baudrate")) { return true; } .... } }</span></span></code> </pre> <br>  In the <i>systemStartOptions</i> line, one of the substrings "/ debug" or "/ debugport" is sequentially searched.  The problem is that the string "/ debug" itself is a substring for "/ debugport".  Thus, finding the substring "/ debug" makes further search for the substring "/ debugport" meaningless.  This is probably not a mistake, but the code can be simplified: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsKernelDebuggerEnabled { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (systemStartOptions.Contains(<span class="hljs-string"><span class="hljs-string">"/debug"</span></span>) || systemStartOptions.Contains(<span class="hljs-string"><span class="hljs-string">"/crashdebug"</span></span>) || systemStartOptions.Contains(<span class="hljs-string"><span class="hljs-string">"/baudrate"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } .... } }</code> </pre> <br>  <b>Exception handling error</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3052/">V3052</a> The original exception object 'ex' was swallowed.  Stack of original exception could be lost.  ReferenceFolderNodeCommands.cs 130 <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">DiscoveryClientProtocol </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DiscoverWebServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (WebException ex) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ex; <span class="hljs-comment"><span class="hljs-comment">// &lt;= } } .... }</span></span></code> </pre> <br>  In this case, a call to <i>throw ex</i> will ‚Äúrub up‚Äù the stack of the original exception, since the intercepted exception will be re-generated.  Corrected version: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">DiscoveryClientProtocol </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DiscoverWebServices</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (WebException ex) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; } } .... }</code> </pre> <br>  <b>Using an uninitialized field in class constructor</b> <br><br>  <b>PVS-Studio analyzer warning</b> : <a href="http://www.viva64.com/ru/w/V3128/">V3128</a> The 'contentPanel' field is used before it is initialized in constructor.  SearchResultsPad.cs 66 <br><br><pre> <code class="cs hljs">Grid contentPanel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SearchResultsPad</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... defaultToolbarItems = ToolBarService .CreateToolBarItems(contentPanel, ....); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... contentPanel = new Grid {....}; .... }</span></span></code> </pre> <br>  The <i>contentPanel</i> field <i>is</i> passed as one of the parameters to the <i>CreateToolBarItems</i> method in the constructor of the <i>SearchResultsPad</i> class.  In this case, this field is initialized after use.  Perhaps, in this case there is no error, since the body of the method <i>CreateToolBarItems</i> and further along the stack can take into account the possibility of the <i>null</i> equality of the variable <i>contentPanel</i> .  But the code looks suspicious and requires verification by the author. <br><br>  Once again, I emphasize that I described in the article far from all the errors that the PVS-Studio analyzer detected, but only those that seemed interesting to me.  Project authors can contact us and get a temporary license key to perform a more thorough check of the project. <br><br><h2>  Conclusion </h2><br>  Again, PVS-Studio did not disappoint: during the re-check of the SharpDevelop project, new interesting errors were found.  And this means that the analyzer does an excellent job with its work, allowing us to make the world around us a little more perfect. <br><br>  I remind you that you can join in this process at any time, using the opportunity <a href="http://www.viva64.com/ru/b/0457/">to</a> use the PVS-Studio static analyzer <a href="http://www.viva64.com/ru/b/0457/">for free</a> to check your own projects. <br><br>  Download and try PVS-Studio: <a href="http://www.viva64.com/ru/pvs-studio/">http://www.viva64.com/en/pvs-studio/</a> <br><br>  For questions about the acquisition of a commercial license, please <a href="http://www.viva64.com/ru/about-feedback/">contact</a> us in the mail.  You can also email us to get a temporary license for a comprehensive study of PVS-Studio if you want to remove the <a href="http://www.viva64.com/ru/m/0009/">restrictions of the</a> demo version. <br><br><div style="text-align:center;"> <a href="http://www.viva64.com/en/b/0469/"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></a> </div><br><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Sergey Khrenov.  <a href="http://www.viva64.com/en/b/0469/">Rechecking SharpDevelop: Any New Bugs?</a> <br><br><div class="spoiler">  <b class="spoiler_title">Read the article and have a question?</b> <div class="spoiler_text">  Often our articles are asked the same questions.  We collected answers to them here: <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio, version 2015</a> .  Please review the list. </div></div></div><p>Source: <a href="https://habr.com/ru/post/320778/">https://habr.com/ru/post/320778/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320764/index.html">Dell EMC: Convergence Conversion</a></li>
<li><a href="../320766/index.html">Comparison of 7 photogrammetry systems. What is better to choose?</a></li>
<li><a href="../320768/index.html">BGP Fake-AS</a></li>
<li><a href="../320772/index.html">The difference between statistics and data science</a></li>
<li><a href="../320776/index.html">Google Chrome Extensions: a quick do-it-yourself translator</a></li>
<li><a href="../320780/index.html">Vysor is a handy tool for testing.</a></li>
<li><a href="../320782/index.html">Agile is dead, long live ... Agile</a></li>
<li><a href="../320784/index.html">Kamailio SIP proxy: an example of installation and minimum configuration</a></li>
<li><a href="../320788/index.html">How to make friends Custom View and keyboard</a></li>
<li><a href="../320790/index.html">Cloud surveillance: what everyone should know?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
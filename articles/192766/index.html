<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Five problems in the development of mobile free-to-play games</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is no secret that lately, cross-platform mobile free-to-play games have become the main focus of a large number of gaming companies. In this articl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Five problems in the development of mobile free-to-play games</h1><div class="post__text post__text-html js-mediator-article">  It is no secret that lately, cross-platform mobile free-to-play games have become the main focus of a large number of gaming companies.  In this article we will not talk about the reasons that led to this, nor about the prospects of this direction.  Companies changed their business models, drew monetization and gaming cycles, prayed for SCRUM and Agile, but the article will not discuss this.  Games still need to do well, you need to choose the right technology, you need to understand what to expect from the mysterious free-to-play and what you will have to face.  In this article, we will look at the 5 most important technological problems encountered when creating cross-platform mobile free-to-play games. <br><a name="habracut"></a><br><h4>  1. Cross platform </h4><br>  The idea of ‚Äã‚Äãcreating applications that can work on multiple platforms at once is far from new.  For these purposes, a Java platform was created, Microsoft tried to solve the problem of developing for Windows, Xbox and Windows Mobile 7 using .NET and XNA.  Mono was created, and .NET went beyond the limits outlined by Redmond.  In general, the spears broke, cross-platform in some form appeared.  However, the reality is that mobile free-to-play games must be run simultaneously on iOS, Android and, quite perfectly, on Facebook. <br><br>  The problem is that you can‚Äôt help Java with iOS, but you need Adobe Flash for Facebook applications.  Fortunately, the designated platform combines the C ++ language (not everyone probably knows, but there is a <a href="http://www.adobe.com/devnet-docs/flascc/docs/Reference.html">FlasCC</a> compiler for Flash).  The idea is simple - the game is written in C ++ and the binding is done in a language specific to the platform.  Thus, the code in C ++ without any changes passes from platform to platform.  The difference between the platforms can be leveled by the game engine, as is done in the case of the <a href="http://habrahabr.ru/company/alawar/blog/167743/">Alawar Engine</a> or the <a href="http://www.madewithmarmalade.com/">Marmalade SDK</a> . <br><br>  A good option is to use <a href="http://unity3d.com/">unity</a> .  Despite the fact that the main language in Unity is C #, thanks to Mono it can be executed on both iOS and Android.  However, in this case, you can <a href="http://habrahabr.ru/post/177881/">forget</a> about Flash.  You can still remember about HTML 5 and <a href="http://phonegap.com/">PhoneGap</a> , but this platform still has a number of problems, in particular with the performance on mobile devices. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The use of third-party libraries and the SDK is another stumbling block in cross-platform development.  Many libraries, such as the <a href="https://developers.facebook.com/">Facebook SDK</a> , <a href="http://www.flurry.com/">Flurry</a> , are developed for each platform separately.  And since these libraries can be closely connected with the game code, and it‚Äôs not always possible to write a common interface for them and add them to the engine, you have to create code like <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(_ANDROID_PLATFORM) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// put your Android code here #elif defined(_IOS_PLATFORM) // put your iOS code here #endif</span></span></span></span></code> </pre> <br>  In addition to code in mobile platforms, the content formats supported and the screen resolution may vary.  Therefore, when developing, it is necessary to initially lay on the system for converting general content into platform-specific. <br><br><h4>  2. The size of the distribution </h4><br>  Game developers, especially those who have switched to mobile platforms from the desktop, often do not think about the size of the resulting distribution.  A rare game under the PC in recent years takes less than 4GB.  Does not cause a big attack of hatred and the fact that the popular MMORPG is 20GB +.  The trend does not stop even the fact that the distribution of games has almost completely become digital.  However, in the mobile free-to-play, everything is radically different. <br><br>  The problem is that Google Play and the App Store limit the size of the distribution of the game, which can be downloaded via mobile networks.  You have about 50MB.  Games that are larger can only be downloaded via Wi-Fi networks.  Interestingly, there are countries in which the majority of the population is sitting on 3G, and for obvious reasons, the results of the distribution of your game in these countries will be disappointing. <br><br>  To overcome this obstacle, many developers go to the trick, laying out the bulk of the game content on their own servers.  The game, which occupied only 10Mb in the store, at the first launch can safely download another 300Mb even over 3G.  There is no need to go far for examples, almost every free-to-play game works that way right now.  Needless to say that for 3G countries the situation does not change for the better.  A huge audience falls off, and not waiting for the first game session. <br><br>  A good solution here is to crush content into small portions and download these portions during the game.  The player on the first gaming day does not need content that is intended for 10 gaming days.  But what is good and simple from the point of view of a game designer can turn into a non-trivial task for a programmer.  I will cite the main problems that may occur in the implementation of such a functional: <br><ul><li>  <b>Versioning the game</b> .  A good free-to-play game is constantly updated, and the game is updated from the official store, and the content is downloaded from your servers.  You must ensure that the version of the game and the content are consistent.  But some of your players may not update their version of the game. <br></li><li>  <b>Download speed</b> .  Downloading additional content, even if it is broken into portions, is a very likely place for players to leave.  Therefore, in the process of downloading, the player must somehow entertain, at least not stop the gameplay.  Asynchronous work with something always adds additional complexity to the organization of the code and the architecture of the game. <br></li><li>  <b>Free space on the memory card</b> .  It is clear that the size of memory cards is limited, and for many classes of devices significantly.  It is also necessary to make sure that there is enough space before downloading the content, and if there is not enough, then give the player meaningful recommendations on this matter. <br></li><li>  <b>Place to save content</b> .  It's no secret that iOS strictly keeps track of where the user is allowed to save files.  Do not save downloaded content in folders where Apple should contain caches and temporary program files.  Any utility for optimizing space on the i-device can delete your files without any warning. <br></li><li>  <b>Pumping</b> .  A distinctive feature of iOS and Android, for example, from desktop operating systems, is that the programs here often end with the removal of the task in the manager.  This means that the download can be interrupted at any time, including during the recording process on the hard disk.  It is necessary to provide for the continuation of downloading content in the next gaming session and checking the resulting files for integrity. <br></li></ul><br><h4>  3. RAM </h4><br>  RAM on mobile devices is not enough.  Not only for programs and the operating system (although this happens, especially on Android), not enough for computer games.  The quality of content in mobile games continues to grow steadily, which is fueled by great competition in the gaming market.  People in the bulk are no longer ready to play games with mediocre graphics, preferring higher-quality counterparts.  And textures in high resolution can take a significant amount of memory after loading into RAM. <br><br>  What to do?  The easiest and most frequent way is to limit the fleet of devices on which you can run the game.  This is easy to do in Google Play and in the App Store, but the more low-end device models are discarded, the more potential players will be lost.  Before deciding whether to turn a device into an unsupported one, it is necessary to consult with statistics on the use of this device, the benefit now such information can be obtained simply. <br><br>  In addition, there are other equally obvious ways.  If your engine has advanced content management tools, then you can generate low quality content by reducing the texture resolution.  The picture "zamolitsya", but you can play.  Some developers deliberately post a low-resolution version of the game (this reduces the size of the distribution package, among other things), offering the player to download high-resolution content if the hardware capabilities of his device allow it, and even offer in-game rewards for it. <br><br>  Dynamic loading and unloading of content is another way to overcome the problem.  It is clear that by loading the game cycle with operations of loading and unloading content from memory, we inevitably increase the frame time.  However, there are options, in particular the use of resource loading in a separate stream and a separate OpenGL ES context using the <a href="https://developer.apple.com/library/ios/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithOpenGLESContexts/WorkingwithOpenGLESContexts.html">EAGLSharegroup</a> . <br><br>  The issue of optimizing the use of RAM strongly depends on the gameplay of the game, and situations in which the programmer is powerless are not excluded, and the game designer is forced to simplify the game.  In the face of fierce competition in the mobile free-to-play gaming market, this may be a necessary evil. <br><br><h4>  4. Client-server interaction </h4><br>  An integral part of the free-to-play model is the interaction of the game client with the server.  It is possible to discuss for a long time on which technologies to create servers for free-to-play games, how to make them flexibly configurable, easily scalable and portable.  You can make the best server in the world, but if the network connection is weak, then there will be little from the server.  And the connection (especially through mobile networks) is weak, constantly interrupted and recovering.  Your players will try to play in the subway, in the elevator, on the train, just when they want to brighten up the wait. <br><br>  When organizing client-server interaction, be sure to take into account possible interruptions in communication, implement checks for the integrity of commands and data.  And where it comes to buying game objects for real money, be especially careful. <br><br>  Mobile free-to-play games can be divided into 2 conditional categories according to the way they interact with the server: games that do not allow playing without an Internet connection, and those that allow you to do this.  Games that provide some kind of offline gameplay, as a rule, are more difficult to do, however, this approach can work well for retaining users.  The following main difficulties in the implementation of offline functionality in an online game can be highlighted: <br><ul><li>  <b>Synchronize progress</b> .  Suppose you have allowed the game offline, and your game is published on iOS and Android at the same time.  In an amicable way, the same player can play from different devices and continue his progress.  However, offline player progress on one of the devices may be lost when you switch to another.  But this is not the worst thing, when a player starts the game on the first device again, and the game sends an old offline progress to the server, a conflict will arise.  To overcome this difficulty, you will need to use timestamps or other mechanisms. <br></li><li>  <b>"Cheating</b> . <b>"</b>  When the server stops controlling the player‚Äôs actions and allows him to play without his participation, this is a great chance to get an undeserved gaming advantage, in other words, ‚Äúcheat‚Äù.  To do this, the game servers must include protection systems that can detect dishonest players and deprive them of an undeserved advantage, which in itself is not a trivial task. <br></li><li>  <b>Interaction with other players</b> .  Suppose a mechanic is provided in the game, when one player can go into the inventory of another and upgrade his sword, having received an award for it.  A player offline can break a sword or, say, replace a sword with a bow, while another player will receive outdated data from the server.  The example is perhaps somewhat exaggerated, but interactions of this kind exist and this must be taken into account. <br></li></ul><br>  The second difficulty in organizing client-server interaction is the potentially large response time.  If the interaction with the server is done synchronously, which in principle is an error, the game will periodically hang until it receives a response from the server.  At the same time, asynchronous work with the server imposes additional difficulties on the organization of the game code.  One of the possible solutions to the problem may be <a href="http://habrahabr.ru/company/alawar/blog/176497/">deferred processing of commands</a> . <br><br><h4>  5. Performance </h4><br>  Perhaps the most obvious point.  Needless to say, the game should not slow down on any of the devices for which it is intended.  This is true not only for mobile development, but for game development in general.  Hardware capabilities of mobile platforms, despite significant growth, are still significantly inferior to desktop solutions. <br><br>  The main methods of solution are profiling and common sense.  I can‚Äôt give specific advice for mobile platforms, but classical techniques will work well too: <br><ul><li>  Use memory foreshadowing and minimize memory allocation within the game loop; </li><li>  Use caches for data that is time-consuming; </li><li>  Use binary data formats instead of text data, where possible; </li><li>  Do not create complex class hierarchies or use RTTI for them; </li><li>  Do not copy objects by value; </li><li>  And the most important thing is that you do not have to deal with ‚Äúpremature optimization‚Äù <sup>1</sup> . </li></ul><br><h4>  Instead of conclusion </h4><br>  Perhaps, to <s>almost all of</s> some, this article will seem largely obvious.  Despite this, I would like to hope that you learned something new from her, or she pushed you to some important idea.  Waiting for your comments, feedback, questions, and thank you for reading to the end. <br><br><h4>  Notes </h4><br>  [1] "Premature optimization is the root of all (or most) programming problems."  Donald Knuth (orig. <a href="http://www.paulgraham.com/knuth.html">"Programming"</a> ) </div><p>Source: <a href="https://habr.com/ru/post/192766/">https://habr.com/ru/post/192766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192756/index.html">API services Mangomag.ru</a></li>
<li><a href="../192758/index.html">SEO vs development, how not to suffer the customer</a></li>
<li><a href="../192760/index.html">Robot Vacuum Cleaner Test: iRobot Roomba 780, Moneual MR7700, iClebo Arte and Neato XV-11</a></li>
<li><a href="../192762/index.html">Sony Xperia Z1 - coming soon!</a></li>
<li><a href="../192764/index.html">Ice Partners News Video for August</a></li>
<li><a href="../192768/index.html">Python Meetup: Summer starts</a></li>
<li><a href="../192772/index.html">Success story about a major event in the summer</a></li>
<li><a href="../192774/index.html">Year in the Windows Store. A brief summary and week of generosity from the developers of Metro Commander</a></li>
<li><a href="../192776/index.html">LADEE - on the hunt for moon secrets</a></li>
<li><a href="../192778/index.html">Virgin Galactic successfully tested its SpaceShipTwo spacecraft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
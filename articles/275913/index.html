<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Patties in distribution semantics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For several months I am looking curiously towards distributive semantics - I got acquainted with the theory, learned about word2vec , found the approp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Patties in distribution semantics</h1><div class="post__text post__text-html js-mediator-article">  For several months I am looking curiously towards <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D0%25B8%25D0%25B1%25D1%2583%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D0%25B5%25D0%25BC%25D0%25B0%25D0%25BD%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0">distributive semantics</a> - I got acquainted with the theory, learned about <a href="https://code.google.com/archive/p/word2vec/">word2vec</a> , found the appropriate library for Python (gensim), and even got a <a href="http://ling.go.mail.ru/dsm/ru/about">model of</a> lexical vectors formed from the national corpus of the Russian language.  However, for creative immersion in the material there was not enough soul-collecting data that would be interesting to twist through distributional semantics.  At the same time, he enthusiastically read <a href="http://poetory.ru/content/list%3Fsort%3Dlikes%26type%3D2">poems-pies</a> (a kind of synthesis of snooty chastooshkas and profound hockey) - some even memorized and recalled their acquaintances on the occasion.  And finally, enthusiasm and curiosity found each other, giving rise to an inspiring idea in the associative depths of consciousness - why not combine the pleasant with the useful and not collect some ‚Äúpoetic‚Äù search engine based on the improvised means. <br><blockquote>  from false conclusions <br>  we can lay the truth <br>  about how to multiply <br>  two negative numbers </blockquote><a name="habracut"></a><br>  The ‚Äúpoetry‚Äù of the search was supposed to be realized due to the innate ability of distribution vectors to show the degree of semantic similarity of lexemes with a real number (the smaller the angle between word vectors, the more likely these words are close in meaning - <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C">cosine measure</a> , classic of the genre, in general ).  For example, the "princess" and "shepherd" are much less close than the "shepherd" and "sheep": 0.139 against 0.603, which is probably logical - the vectors of the national corps should reflect the harsh reality, and not the fairy-tale world of G.Kh.  Andersen.  The method of calculating the depth of correlation (diffusion) of the query and pie appeared almost by itself (cheap and angry) as a normalized sum of similarities of each word from list X with each word of list Y (stop words were thrown out, all others were reduced to normal form, but about this later). <br><br><div class="spoiler">  <b class="spoiler_title">Semantic Diffusion Calculation Code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">semantic_similarity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bag1, bag2: list, w2v_model, unknown_coef=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> -&gt; float:</span></span> sim_sum = <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(bag1)): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(bag2)): <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: sim_sum += w2v_model.similarity(bag1[i], bag2[j]) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception: sim_sum += unknown_coef <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sim_sum / (len(bag1) * len(bag2))</code> </pre> <br></div></div><br>  The results of the poetic search and pleased, and amused.  For example, the following poem-list was issued for the request ‚Äúmusic‚Äù: <br><br><pre> <code class="python hljs">[(<span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span>, <span class="hljs-number"><span class="hljs-number">0.25434666007036322</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span>, <span class="hljs-number"><span class="hljs-number">0.19876923472322899</span></span>), (<span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span>, <span class="hljs-number"><span class="hljs-number">0.19102709737990775</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'     '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-number"><span class="hljs-number">0.15292901301609391</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">0.14688091047781876</span></span>)]</code> </pre><br>  It is noteworthy that the word "music" is not in one pie, from those entered into the base.  However, all pie associations are very musical and the degree of their semantic diffusion with the query is rather high. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now, in order of the work done ( <a href="https://github.com/drafterleo/pie-poem">source code</a> on GitHub). <br><br><h4>  Libraries and Resources </h4><br><ul><li>  Module <a href="https://pymorphy2.readthedocs.org/en/latest/">pymorphy2</a> - to bring words to normal grammatical form </li><li>  Module <a href="https://radimrehurek.com/gensim/">gensim</a> - connect word2vec models for semantic processing </li><li>  A distributive model of <a href="">ruscorpora</a> lexical vectors is <a href="">also</a> required for work (320 MB) </li></ul><br><h4>  Data model formation </h4><br><blockquote>  Oleg presented in the form of text <br>  everything that oksana says <br>  broke into chapters and paragraphs <br>  and on separate words </blockquote><br>  First of all, from a text file ( <a href="https://github.com/drafterleo/pie-poem/blob/master/poems.txt">poems.txt</a> ), which contains rhymes-pies (about eight hundred), the list is actually cut, containing, in fact, these cakes in the form of lines.  Further, a bag of words ( <a href="https://en.wikipedia.org/wiki/Bag-of-words_model">bag of words</a> ) is squeezed out of each string-pie, in which each word is reduced to normal grammatical form and from which <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D1%2583%25D0%25BC%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B5_%25D1%2581%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25B0">noise words are</a> kicked out.  After that, for each bag, the semantic ‚Äúdensity‚Äù (intro-diffusion) of the pie is calculated and a specific associative list is formed (it helps to understand which semantic layer prevails from the point of view of the distribution vectors model).  All this pleasure fits into the dictionary under the corresponding keys and is written to a file in json format. <br><br><div class="spoiler">  <b class="spoiler_title">Squeeze code bag of words</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">canonize_words</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(words: list)</span></span></span><span class="hljs-function"> -&gt; list:</span></span> stop_words = (<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) grammars = {<span class="hljs-string"><span class="hljs-string">'NOUN'</span></span>: <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'VERB'</span></span>: <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'INFN'</span></span>: <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'GRND'</span></span>: <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'PRTF'</span></span>: <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'PRTS'</span></span>: <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'ADJF'</span></span>: <span class="hljs-string"><span class="hljs-string">'_A'</span></span>, <span class="hljs-string"><span class="hljs-string">'ADJS'</span></span>: <span class="hljs-string"><span class="hljs-string">'_A'</span></span>, <span class="hljs-string"><span class="hljs-string">'ADVB'</span></span>: <span class="hljs-string"><span class="hljs-string">'_ADV'</span></span>, <span class="hljs-string"><span class="hljs-string">'PRED'</span></span>: <span class="hljs-string"><span class="hljs-string">'_PRAEDIC'</span></span>} morph = pymorphy2.MorphAnalyzer() normalized = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> words: forms = morph.parse(i) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: form = max(forms, key=<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: (x.score, x.methods_stack[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">2</span></span>])) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> Exception: form = forms[<span class="hljs-number"><span class="hljs-number">0</span></span>] print(form) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> (form.tag.POS <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-string"><span class="hljs-string">'PREP'</span></span>, <span class="hljs-string"><span class="hljs-string">'CONJ'</span></span>, <span class="hljs-string"><span class="hljs-string">'PRCL'</span></span>, <span class="hljs-string"><span class="hljs-string">'NPRO'</span></span>, <span class="hljs-string"><span class="hljs-string">'NUMR'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'Name'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> form.tag <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'UNKN'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> form.tag <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> form.normal_form <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> stop_words): <span class="hljs-comment"><span class="hljs-comment"># 'ADJF' normalized.append(form.normal_form + grammars.get(form.tag.POS, '')) return normalized</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Data Model Formation Code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_data_model</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(file_name: str)</span></span></span><span class="hljs-function"> -&gt; dict:</span></span> poems = read_poems(file_name) bags, voc = make_bags(poems) w2v_model = sem.load_w2v_model(sem.WORD2VEC_MODEL_FILE) sd = [sem.semantic_density(bag, w2v_model, unknown_coef=<span class="hljs-number"><span class="hljs-number">-0.001</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bag <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bags] sa = [sem.semantic_association(bag, w2v_model) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bag <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bags] rates = [<span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(poems))] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-string"><span class="hljs-string">'poems'</span></span> : poems, <span class="hljs-string"><span class="hljs-string">'bags'</span></span> : bags, <span class="hljs-string"><span class="hljs-string">'vocabulary'</span></span> : voc, <span class="hljs-string"><span class="hljs-string">'density'</span></span> : sd, <span class="hljs-string"><span class="hljs-string">'associations'</span></span>: sa, <span class="hljs-string"><span class="hljs-string">'rates'</span></span> : rates}</code> </pre><br></div></div><br><h4>  General analysis of the model </h4><br>  The most "hard" pie: <br><blockquote>  kill offense anger and lust <br>  pride envy and longing <br>  and what's left of you <br>  out of mercy finish </blockquote><br><div class="spoiler">  <b class="spoiler_title">Density, squeeze, associative list</b> <div class="spoiler_text"><pre> <code class="python hljs"> <span class="hljs-number"><span class="hljs-number">0.16305980883482543</span></span> [<span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>] [<span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>]</code> </pre><br></div></div><br>  As expected, the top of the ‚Äúhard‚Äù ones included pies, in which there are many words that are close in meaning - both synonymous and so antonymic (and not so clearly) and easily generalized into some category (in this case, emotions). <br><br>  The most "soft" pie: <br><blockquote>  on this ship we will be saved <br>  don't be my ancestor <br>  put the ship do not be fooled <br>  sick </blockquote><br><div class="spoiler">  <b class="spoiler_title">Density, squeeze, associative list</b> <div class="spoiler_text"><pre> <code class="python hljs"> <span class="hljs-number"><span class="hljs-number">-0.023802562235525036</span></span> [<span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_A'</span></span>] [<span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_V'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>, <span class="hljs-string"><span class="hljs-string">'_S'</span></span>]</code> </pre><br></div></div><br>  Here, the negative density, as it seems to me, is largely due to the fact that the hospital meaning of the word ‚Äúvessel‚Äù was not included in the associative list.  This is generally one of the weak points of distributional-semantic models - in them, as a rule, one value of a lexeme suppresses all the others with popularity. <br><br><h4>  Model Searches </h4><br>  About how the search works, in essence, it was written above - the pies are unceasingly sorted by the level of their diffusion (generalized semantic similarity) with the words of the query. <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">similar_poems_idx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(poem: str, poem_model, w2v_model, topn=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> -&gt; list:</span></span> poem_bag = dm.canonize_words(poem.split()) similars = [(i, sem.semantic_similarity(poem_bag, bag, w2v_model)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, bag <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(poem_model[<span class="hljs-string"><span class="hljs-string">'bags'</span></span>])] similars.sort(key=<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: x[<span class="hljs-number"><span class="hljs-number">1</span></span>], reverse=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> similars[:topn]</code> </pre><br></div></div><br>  A few examples: <br><br><div class="spoiler">  <b class="spoiler_title">Consciousness</b> <div class="spoiler_text"><pre> <code class="python hljs">&gt;&gt; pprint(similar_poems(<span class="hljs-string"><span class="hljs-string">""</span></span>, pm, w2v, topn=<span class="hljs-number"><span class="hljs-number">5</span></span>)) [(<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-number"><span class="hljs-number">0.13678271365987432</span></span>), (<span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span>, <span class="hljs-number"><span class="hljs-number">0.1337333519127788</span></span>), (<span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'     '</span></span>, <span class="hljs-number"><span class="hljs-number">0.12728715072640368</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'     '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span>, <span class="hljs-number"><span class="hljs-number">0.12420312280907075</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-number"><span class="hljs-number">0.11909834879893783</span></span>)]</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">free will</b> <div class="spoiler_text"><pre> <code class="python hljs">&gt;&gt; pprint(similar_poems(<span class="hljs-string"><span class="hljs-string">" "</span></span>, pm, w2v, topn=<span class="hljs-number"><span class="hljs-number">5</span></span>)) [(<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-number"><span class="hljs-number">0.12186796715891397</span></span>), (<span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'     '</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-number"><span class="hljs-number">0.10667187095852899</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'      '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-number"><span class="hljs-number">0.10161426827828646</span></span>), (<span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'      '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">0.10136245188273822</span></span>), (<span class="hljs-string"><span class="hljs-string">'     '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'      '</span></span> <span class="hljs-string"><span class="hljs-string">'     '</span></span>, <span class="hljs-number"><span class="hljs-number">0.098855948557813059</span></span>)]</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Winter</b> <div class="spoiler_text"><pre> <code class="python hljs">&gt;&gt; pprint(similar_poems(<span class="hljs-string"><span class="hljs-string">""</span></span>, pm, w2v, topn=<span class="hljs-number"><span class="hljs-number">5</span></span>)) [(<span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-number"><span class="hljs-number">0.1875936291758869</span></span>), (<span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'      '</span></span> <span class="hljs-string"><span class="hljs-string">'      '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-number"><span class="hljs-number">0.18548772093805863</span></span>), (<span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span>, <span class="hljs-number"><span class="hljs-number">0.16475609244668787</span></span>), (<span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'  '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span>, <span class="hljs-number"><span class="hljs-number">0.14671085483137575</span></span>), (<span class="hljs-string"><span class="hljs-string">'      '</span></span> <span class="hljs-string"><span class="hljs-string">'    '</span></span> <span class="hljs-string"><span class="hljs-string">'   '</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-number"><span class="hljs-number">0.13253569027346904</span></span>)]</code> </pre><br></div></div><br>  Obviously, a search through the prism of other distributive-semantic models (different shells, learning algorithms, vector dimensions) will give different results.  In general, the technology works, and works very satisfactorily.  Fuzzy semantic search is implemented easily and carelessly (at least, on a relatively small amount of data).  In the future, if the hands reach and, most importantly, the head will catch up, I plan to implement an assessment of the rating of pies based on the training sample.  To begin with, a simple weighted sum (semantic diffusion will act as a weighting factor).  Then, perhaps, something useful from machine learning. </div><p>Source: <a href="https://habr.com/ru/post/275913/">https://habr.com/ru/post/275913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275901/index.html">Advanced Oracle Troubleshoot Session - PGA / UGA Memory Fragmentation</a></li>
<li><a href="../275905/index.html">How Stripe turned into PayPal Mobile Era</a></li>
<li><a href="../275907/index.html">Project Updates Hosting Cafe</a></li>
<li><a href="../275909/index.html">Ten Popular SEO Myths About Google Promotion</a></li>
<li><a href="../275911/index.html">Swift dictionary implementation</a></li>
<li><a href="../275915/index.html">Cisco Nexus at the core of the corporate network</a></li>
<li><a href="../275917/index.html">Amnesia FreeBSD</a></li>
<li><a href="../275919/index.html">Color in design</a></li>
<li><a href="../275921/index.html">Data centers without people as a new trend</a></li>
<li><a href="../275923/index.html">Welcome to the meeting Moscow.pm February 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drawing charts in Chaco</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I will tell you about a wonderful program called Chaco, which is being developed by Enthought. 

 Chaco is a cross-platform Python graphics appl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drawing charts in Chaco</h1><div class="post__text post__text-html js-mediator-article">  Today I will tell you about a wonderful program called Chaco, which is being developed by Enthought. <br><br>  Chaco is a cross-platform Python graphics application of any complexity.  It focuses on rendering static data, but it also has the ability to create animations. <br><br><img src="https://habrastorage.org/storage/2c704f3a/146b5b03/bb350064/d5004078.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Just like Mayavi, it can integrate into Wx and Qt (PyQt and PySide) applications and is friendly with Numpy arrays. <br><a name="habracut"></a><br><br><h5>  Installation </h5><br>  The first step is to install Chaco.  We put dependences: git, subversion, setuptools, swig, numpy, scipy, vtk, wxpython.  For Windows, you also need to install mingw (vtk and wxpython for Win, I advise you to take from here to save time <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">www.lfd.uci.edu/~gohlke/pythonlibs</a> ).  We are picking up ETS products with git (you can remove the unnecessary): <br><br> <code><a href="https://github.com/enthought/ets/raw/master/ets.py"></a> mkdir ets &amp;&amp; cd ets <br> wget github.com/enthought/ets/raw/master/ets.py <br> python ets.py clone <br></code> <br><br>  Then we collect this whole thing: <br> <code>python ets.py develop <br></code> <br><br>  You may have to deliver something else, you need to look at the build logs.  What is enough, install and run the assembly again. <br><br><h5>  Examples </h5><br>  In the ets / chaco / examples folder you can see a large archive of various examples.  The examples are very good, so it‚Äôs quite difficult for me to explain something, I‚Äôll get a copy-paste code. <br><br>  I will describe only some unusual graphics that can be built in Chaco: <br><br><ul><li><h5>  Financial: </h5><br><img src="https://habrastorage.org/storage/a9a76522/17224d26/adedc210/a6e6b345.png"><br><br>  This example uses embedding in a PySide widget. <br><br><blockquote>  <font color="#808080"># - * - coding: utf-8 - * _</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># It‚Äôs important to set the QT_API variable to pyside before</font> &lt;br/&gt; <br>  <font color="#808080"># how is the import of Chaco modules</font> &lt;br/&gt; <br>  <font color="#ff7700">import</font> <font color="#dc143c">os</font> &lt;br/&gt; <br>  <font color="#dc143c">os</font> .  <font>environ</font> <font>[</font> <font color="#483d8b">'QT_API'</font> <font>]</font> = <font color="#483d8b">'pyside'</font> &lt;br/&gt; <br>  <font color="#dc143c">os</font> .  <font>environ</font> <font>[</font> <font color="#483d8b">'ETS_TOOLKIT'</font> <font>]</font> = <font color="#483d8b">'qt4'</font> &lt;br/&gt; <br>  <font color="#ff7700">from</font> PySide <font color="#ff7700">import</font> QtGui, QtCore &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">from</font> numpy <font color="#ff7700">import</font> <font color="#008000">abs</font> , arange, cumprod, <font color="#dc143c">random</font> &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>example_support</font> <font color="#ff7700">import</font> DemoFrame, demo_main &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>api</font> <font color="#ff7700">import</font> window, Component, ComponentEditor &lt;br/&gt; <br>  <font color="#ff7700">from</font> traits.  <font>api</font> <font color="#ff7700">import</font> HasTraits, Instance &lt;br/&gt; <br>  <font color="#ff7700">from</font> traitsui.  <font>api</font> <font color="#ff7700">import</font> Item, Group, View &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>api</font> <font color="#ff7700">import</font> ArrayDataSource, BarPlot, DataRange1D, \ &lt;br/&gt; <br>  LinearMapper, VPlotContainer, PlotAxis, FilledLinePlot, \ &lt;br/&gt; <br>  add_default_grids, PlotLabel &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>tools</font> .  <font>api</font> <font color="#ff7700">import</font> PanTool, ZoomTool &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Function creating container with charts</font> &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_plot_component <font>(</font> <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create random values ‚Äã‚Äãfor graphs</font> &lt;br/&gt; <br>  numpoints = <font color="#ff4500">500</font> &lt;br/&gt; <br>  index = arange <font>(</font> numpoints <font>)</font> &lt;br/&gt; <br>  returns = <font color="#dc143c">random</font> .  <font>lognormal</font> <font>(</font> <font color="#ff4500">0.01</font> , <font color="#ff4500">0.1</font> , size = numpoints <font>)</font> &lt;br/&gt; <br>  price = <font color="#ff4500">100.0</font> <font color="#66cc66">*</font> cumprod <font>(</font> returns <font>)</font> &lt;br/&gt; <br>  volume = <font color="#008000">abs</font> <font>(</font> <font color="#dc143c">random</font> . <font>normal</font> <font>(</font> <font color="#ff4500">1000.0</font> , <font color="#ff4500">1500.0</font> , size = numpoints <font>)</font> + <font color="#ff4500">2000.0</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ArrayDataSource are arrays storing our data</font> &lt;br/&gt; <br>  time_ds = ArrayDataSource <font>(</font> index <font>)</font> &lt;br/&gt; <br>  vol_ds = ArrayDataSource <font>(</font> volume, sort_order = <font color="#483d8b">"none"</font> <font>)</font> &lt;br/&gt; <br>  price_ds = ArrayDataSource <font>(</font> price, sort_order = <font color="#483d8b">"none"</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># LinearMapper is an array of signatures along the axes</font> &lt;br/&gt; <br>  xmapper = LinearMapper <font>(</font> <font color="#008000">range</font> = DataRange1D <font>(</font> time_ds <font>)</font> <font>)</font> &lt;br/&gt; <br>  vol_mapper = LinearMapper <font>(</font> <font color="#008000">range</font> = DataRange1D <font>(</font> vol_ds <font>)</font> <font>)</font> &lt;br/&gt; <br>  price_mapper = LinearMapper <font>(</font> <font color="#008000">range</font> = DataRange1D <font>(</font> price_ds <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># FilledLinePlot type price chart with filling in the area under the chart</font> &lt;br/&gt; <br>  price_plot = FilledLinePlot <font>(</font> index = time_ds, value = price_ds, &lt;br/&gt; <br>  index_mapper = xmapper, &lt;br/&gt; <br>  value_mapper = price_mapper, &lt;br/&gt; <br>  edge_color = <font color="#483d8b">"blue"</font> , &lt;br/&gt; <br>  face_color = <font color="#483d8b">"paleturquoise"</font> , &lt;br/&gt; <br>  bgcolor = <font color="#483d8b">"white"</font> , &lt;br/&gt; <br>  border_visible = <font color="#008000">True</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Add grid and axes</font> &lt;br/&gt; <br>  add_default_grids <font>(</font> price_plot <font>)</font> &lt;br/&gt; <br>  price_plot.  <font>overlays</font> .  <font>append</font> <font>(</font> PlotAxis <font>(</font> price_plot, orientation = <font color="#483d8b">'left'</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  price_plot.  <font>overlays</font> .  <font>append</font> <font>(</font> PlotAxis <font>(</font> price_plot, orientation = <font color="#483d8b">'bottom'</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Add the ability to move the graphics</font> &lt;br/&gt; <br>  price_plot.  <font>tools</font> .  <font>append</font> <font>(</font> PanTool <font>(</font> price_plot, constrain = <font color="#008000">True</font> , &lt;br/&gt; <br>  constrain_direction = <font color="#483d8b">"x"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  <font color="#808080"># Add zoom</font> &lt;br/&gt; <br>  price_plot.  <font>overlays</font> .  <font>append</font> <font>(</font> ZoomTool <font>(</font> price_plot, drag_button = <font color="#483d8b">"right"</font> , &lt;br/&gt; <br>  always_on = <font color="#008000">True</font> , &lt;br/&gt; <br>  tool_mode = <font color="#483d8b">"range"</font> , &lt;br/&gt; <br>  axis = <font color="#483d8b">"index"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># BarPlot - bar chart</font> &lt;br/&gt; <br>  vol_plot = BarPlot <font>(</font> index = time_ds, value = vol_ds, &lt;br/&gt; <br>  index_mapper = xmapper, &lt;br/&gt; <br>  value_mapper = vol_mapper, &lt;br/&gt; <br>  line_color = <font color="#483d8b">"transparent"</font> , &lt;br/&gt; <br>  fill_color = <font color="#483d8b">"black"</font> , &lt;br/&gt; <br>  bar_width = <font color="#ff4500">1.0</font> &lt;br/&gt; <br>  bar_width_type = <font color="#483d8b">"screen"</font> , &lt;br/&gt; <br>  antialias = <font color="#008000">False</font> , &lt;br/&gt; <br>  height = <font color="#ff4500">100</font> &lt;br/&gt; <br>  resizable = <font color="#483d8b">"h"</font> , &lt;br/&gt; <br>  bgcolor = <font color="#483d8b">"white"</font> , &lt;br/&gt; <br>  border_visible = <font color="#008000">True</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Add grid and axes</font> &lt;br/&gt; <br>  add_default_grids <font>(</font> vol_plot <font>)</font> &lt;br/&gt; <br>  vol_plot.  <font>underlays</font> .  <font>append</font> <font>(</font> PlotAxis <font>(</font> vol_plot, orientation = <font color="#483d8b">'left'</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  vol_plot.  <font>tools</font> .  <font>append</font> <font>(</font> PanTool <font>(</font> vol_plot, constrain = <font color="#008000">True</font> , &lt;br/&gt; <br>  constrain_direction = <font color="#483d8b">"x"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># container - an array of our charts, controls their location</font> &lt;br/&gt; <br>  container = VPlotContainer <font>(</font> bgcolor = <font color="#483d8b">"lightblue"</font> , &lt;br/&gt; <br>  spacing = <font color="#ff4500">20</font> &lt;br/&gt; <br>  padding = <font color="#ff4500">50</font> &lt;br/&gt; <br>  fill_padding = <font color="#008000">False</font> <font>)</font> &lt;br/&gt; <br>  container.  <font>add</font> <font>(</font> vol_plot <font>)</font> &lt;br/&gt; <br>  container.  <font>add</font> <font>(</font> price_plot <font>)</font> &lt;br/&gt; <br>  <font color="#808080"># Add an inscription above the container</font> &lt;br/&gt; <br>  container.  <font>overlays</font> .  <font>append</font> <font>(</font> PlotLabel <font>(</font> <font color="#483d8b">"Financial Plot"</font> , &lt;br/&gt; <br>  component = container, &lt;br/&gt; <br>  font = <font color="#483d8b">"Arial 24"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> container &lt;br/&gt; <br>  &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> Demo <font>(</font> HasTraits <font>)</font> : &lt;br/&gt; <br>  <font color="#808080"># HasTraits is a special class Traits dictionary that is associated</font> &lt;br/&gt; <br>  <font color="#808080"># with some handler.</font>  &lt;br/&gt; <br>  plot = Instance <font>(</font> Component <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># View - view our graphs.</font>  &lt;br/&gt; <br>  traits_view = View <font>(</font> &lt;br/&gt; <br>  Group <font>(</font> &lt;br/&gt; <br>  Item <font>(</font> <font color="#483d8b">'plot'</font> , editor = ComponentEditor <font>(</font> size = <font>(</font> <font color="#ff4500">800</font> , <font color="#ff4500">600</font> <font>)</font> <font>)</font> , &lt;br/&gt; <br>  show_label = <font color="#008000">False</font> <font>)</font> &lt;br/&gt; <br>  orientation = <font color="#483d8b">"vertical"</font> <font>)</font> , &lt;br/&gt; <br>  resizable = true &lt;br/&gt; <br>  <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _plot_default <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#808080"># Container / graphic that is drawn by default</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> _create_plot_component <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080">Let's comment out the standard window in which the graphics are drawn</font> &lt;br/&gt; <br>  <font color="#808080">#class PlotFrame (DemoFrame):</font> &lt;br/&gt; <br>  <font color="#808080">#</font> &lt;br/&gt; <br>  <font color="#808080"># def _create_window (self):</font> &lt;br/&gt; <br>  <font color="#808080"># # creates a window in which you need to draw graphics</font> &lt;br/&gt; <br>  <font color="#808080"># return Window (self, -1, component = _create_plot_component ())</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> ChacoQWidget <font>(</font> QtGui. <font>QWidget</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , parent = <font color="#008000">None</font> <font>)</font> : &lt;br/&gt; <br>  QtGui  <font>QWidget</font> .  <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , parent <font>)</font> &lt;br/&gt; <br>  layout = QtGui.  <font>QVBoxLayout</font> <font>(</font> <font color="#008000">self</font> <font>)</font> &lt;br/&gt; <br>  frame = Demo <font>(</font> <font>)</font> &lt;br/&gt; <br>  <font color="#808080"># Now we need to create a widget, for which we call the control function,</font> &lt;br/&gt; <br>  <font color="#808080"># without it, the magic does not work :)</font> &lt;br/&gt; <br>  ui = frame.  <font>edit_traits</font> <font>(</font> parent = <font color="#008000">self</font> , kind = <font color="#483d8b">'subpanel'</font> <font>)</font> .  <font>control</font> &lt;br/&gt; <br>  layout.  <font>addWidget</font> <font>(</font> ui <font>)</font> &lt;br/&gt; <br>  layout.  <font>addWidget</font> <font>(</font> QtGui. <font>QPushButton</font> <font>(</font> <font color="#483d8b">"Hello Habrahabr"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">if</font> __name__ == <font color="#483d8b">"__main__"</font> : &lt;br/&gt; <br>  <font color="#808080">#demo_main (PlotFrame, size = (800, 600), title = "Financial plot example")</font> &lt;br/&gt; <br>  app = QtGui.  <font>QApplication</font> .  <font>instance</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  w = ChacoQWidget <font>(</font> <font>)</font> &lt;br/&gt; <br>  w.  <font>resize</font> <font>(</font> <font color="#ff4500">800</font> , <font color="#ff4500">600</font> <font>)</font> &lt;br/&gt; <br>  w.  <font>show</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  app.  <font>exec_</font> <font>(</font> <font>)</font> </blockquote><br><br></li><li><h5>  A selection of colors for graphs (I‚Äôll attach an animation, but in fact everything changes according to the mouse scroll): </h5><br><img src="https://habrastorage.org/storage/7305a6d5/b2fe407f/5b9fde5a/6689cc48.gif"><br><blockquote>  <font color="#ff7700">from</font> numpy <font color="#ff7700">import</font> arange, exp, sort &lt;br/&gt; <br>  <font color="#ff7700">from</font> numpy.  <font color="#dc143c">random</font> <font color="#ff7700">import</font> <font color="#dc143c">random</font> &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>example_support</font> <font color="#ff7700">import</font> DemoFrame, demo_main &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>api</font> <font color="#ff7700">import</font> Component, ComponentEditor, Window &lt;br/&gt; <br>  <font color="#ff7700">from</font> traits.  <font>api</font> <font color="#ff7700">import</font> HasTraits, Instance &lt;br/&gt; <br>  <font color="#ff7700">from</font> traitsui.  <font>api</font> <font color="#ff7700">import</font> Item, Group, View &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>api</font> <font color="#ff7700">import</font> ArrayPlotData, ColorBar, \ &lt;br/&gt; <br>  ColormappedSelectionOverlay, HPlotContainer, \ &lt;br/&gt; <br>  Jet, LinearMapper, Plot, gist_earth &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>tools</font> .  <font>api</font> <font color="#ff7700">import</font> PanTool, ZoomTool, RangeSelection, \ &lt;br/&gt; <br>  RangeSelectionOverlay &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># # Create the Chaco plot.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_plot_component <font>(</font> <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create some data</font> &lt;br/&gt; <br>  numpts = <font color="#ff4500">1000</font> &lt;br/&gt; <br>  x = sort <font>(</font> <font color="#dc143c">random</font> <font>(</font> numpts <font>)</font> <font>)</font> &lt;br/&gt; <br>  y = <font color="#dc143c">random</font> <font>(</font> numpts <font>)</font> &lt;br/&gt; <br>  color = exp <font>(</font> - <font>(</font> x <font color="#66cc66">**</font> <font color="#ff4500">2</font> + y <font color="#66cc66">**</font> <font color="#ff4500">2</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create a plot data obect and this data</font> &lt;br/&gt; <br>  pd = ArrayPlotData <font>(</font> <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"index"</font> , x <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"value"</font> , y <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"color"</font> , color <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create the plot</font> &lt;br/&gt; <br>  plot = Plot <font>(</font> pd <font>)</font> &lt;br/&gt; <br>  plot.  <font>plot</font> <font>(</font> <font>(</font> <font color="#483d8b">"index"</font> , <font color="#483d8b">"value"</font> , <font color="#483d8b">"color"</font> <font>)</font> , &lt;br/&gt; <br>  <font color="#008000">type</font> = <font color="#483d8b">"cmap_scatter"</font> , &lt;br/&gt; <br>  name = <font color="#483d8b">"my_plot"</font> , &lt;br/&gt; <br>  color_mapper = gist_earth, &lt;br/&gt; <br>  marker = <font color="#483d8b">"square"</font> , &lt;br/&gt; <br>  fill_alpha = <font color="#ff4500">0.5</font> &lt;br/&gt; <br>  marker_size = <font color="#ff4500">8</font> &lt;br/&gt; <br>  outline_color = <font color="#483d8b">"black"</font> , &lt;br/&gt; <br>  border_visible = <font color="#008000">True</font> , &lt;br/&gt; <br>  bgcolor = <font color="#483d8b">"white"</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Tweak some of the plot properties</font> &lt;br/&gt; <br>  plot.  <font>title</font> = <font color="#483d8b">"Colormapped Scatter Plot with Pan / Zoom Color Bar"</font> &lt;br/&gt; <br>  plot.  <font>padding</font> = <font color="#ff4500">50</font> &lt;br/&gt; <br>  plot.  <font>x_grid</font>  <font>visible</font> = <font color="#008000">false</font> &lt;br/&gt; <br>  plot.  <font>y_grid</font>  <font>visible</font> = <font color="#008000">false</font> &lt;br/&gt; <br>  plot.  <font>x_axis</font> .  <font>font</font> = <font color="#483d8b">"modern 16"</font> &lt;br/&gt; <br>  plot.  <font>y_axis</font>  <font>font</font> = <font color="#483d8b">"modern 16"</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Add pan and zoom to the plot</font> &lt;br/&gt; <br>  plot.  <font>tools</font> .  <font>append</font> <font>(</font> PanTool <font>(</font> plot, constrain_key = <font color="#483d8b">"shift"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  zoom = ZoomTool <font>(</font> plot <font>)</font> &lt;br/&gt; <br>  plot.  <font>overlays</font> .  <font>append</font> <font>(</font> zoom <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create the colorbar, handing the range and colormap</font> &lt;br/&gt; <br>  colorbar = ColorBar <font>(</font> index_mapper = LinearMapper <font>(</font> <font color="#008000">range</font> = plot. <font>color_mapper</font> . <font color="#008000">range</font> <font>)</font> , &lt;br/&gt; <br>  color_mapper = plot.  <font>color_mapper</font> &lt;br/&gt; <br>  orientation = <font color="#483d8b">'v'</font> , &lt;br/&gt; <br>  resizable = <font color="#483d8b">'v'</font> , &lt;br/&gt; <br>  width = <font color="#ff4500">30</font> , &lt;br/&gt; <br>  padding = <font color="#ff4500">20</font> <font>)</font> &lt;br/&gt; <br>  colorbar.  <font>plot</font> = plot &lt;br/&gt; <br>  colorbar.  <font>padding_top</font> = plot.  <font>padding_top</font> &lt;br/&gt; <br>  colorbar.  <font>padding_bottom</font> = plot.  <font>padding_bottom</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Add pan and zoom tools to the colorbar</font> &lt;br/&gt; <br>  colorbar.  <font>tools</font> .  <font>append</font> <font>(</font> PanTool <font>(</font> colorbar, constrain_direction = <font color="#483d8b">"y"</font> , constrain = <font color="#008000">True</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  zoom_overlay = ZoomTool <font>(</font> colorbar, axis = <font color="#483d8b">"index"</font> , tool_mode = <font color="#483d8b">"range"</font> , &lt;br/&gt; <br>  always_on = <font color="#008000">True</font> , drag_button = <font color="#483d8b">"right"</font> <font>)</font> &lt;br/&gt; <br>  colorbar.  <font>overlays</font> .  <font>append</font> <font>(</font> zoom_overlay <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># The colorbar side-by-side</font> &lt;br/&gt; <br>  container = HPlotContainer <font>(</font> plot, colorbar, use_backbuffer = <font color="#008000">True</font> , bgcolor = <font color="#483d8b">"lightgray"</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">return</font> container &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># Attributes to use the plot view.</font>  &lt;br/&gt; <br>  size = <font>(</font> <font color="#ff4500">650</font> , <font color="#ff4500">650</font> <font>)</font> &lt;br/&gt; <br>  title = <font color="#483d8b">"Colormapped scatter plot"</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># # Demo class that is used by the demo.py application.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">class</font> Demo <font>(</font> HasTraits <font>)</font> : &lt;br/&gt; <br>  plot = Instance <font>(</font> Component <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  traits_view = View <font>(</font> &lt;br/&gt; <br>  Group <font>(</font> &lt;br/&gt; <br>  Item <font>(</font> <font color="#483d8b">'plot'</font> , editor = ComponentEditor <font>(</font> size = size <font>)</font> , &lt;br/&gt; <br>  show_label = <font color="#008000">False</font> <font>)</font> &lt;br/&gt; <br>  orientation = <font color="#483d8b">"vertical"</font> <font>)</font> , &lt;br/&gt; <br>  resizable = <font color="#008000">True</font> , title = title &lt;br/&gt; <br>  <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _plot_default <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#ff7700">return</font> _create_plot_component <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  demo = Demo <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># Stand-alone frame to display the plot.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">class</font> PlotFrame <font>(</font> DemoFrame <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_window <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#808080"># Return a window containing our plots</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> Window <font>(</font> <font color="#008000">self</font> , - <font color="#ff4500">1</font> , component = _create_plot_component <font>(</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">if</font> __name__ == <font color="#483d8b">"__main__"</font> : &lt;br/&gt; <br>  demo_main <font>(</font> PlotFrame, size = size, title = title <font>)</font> </blockquote><br><br></li><li><h5>  Charts in polar coordinates: </h5><br><img src="https://habrastorage.org/storage/c1bd7c73/3626f751/ced50ce5/5d8270ad.png"><br>  Code: <br><blockquote>  <font color="#ff7700">from</font> numpy <font color="#ff7700">import</font> arange, pi, sin, cos &lt;br/&gt; <br>  <font color="#ff7700">from</font> enthought.  <font>enable</font> .  <font>example_support</font> <font color="#ff7700">import</font> DemoFrame, demo_main &lt;br/&gt; <br>  <font color="#ff7700">from</font> enthought.  <font>enable</font> .  <font>api</font> <font color="#ff7700">import</font> Window &lt;br/&gt; <br>  <font color="#ff7700">from</font> enthought.  <font>traits</font> .  <font>api</font> <font color="#ff7700">import</font> false &lt;br/&gt; <br>  <font color="#ff7700">from</font> enthought.  <font>chaco</font> .  <font>api</font> <font color="#ff7700">import</font> create_polar_plot &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> MyFrame <font>(</font> DemoFrame <font>)</font> : &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_window <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  numpoints = <font color="#ff4500">5000</font> &lt;br/&gt; <br>  low = <font color="#ff4500">0</font> &lt;br/&gt; <br>  high = pi <font color="#66cc66">*</font> <font color="#ff4500">2</font> &lt;br/&gt; <br>  theta = arange <font>(</font> low, high, <font>(</font> high-low <font>)</font> / numpoints <font>)</font> &lt;br/&gt; <br>  radius = sin <font>(</font> theta <font color="#66cc66">*</font> <font color="#ff4500">3</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  plot = create_polar_plot <font>(</font> <font>(</font> radius, theta <font>)</font> , color = <font>(</font> <font color="#ff4500">0.0</font> , <font color="#ff4500">0.0</font> , <font color="#ff4500">1.0</font> , <font color="#ff4500">1</font> <font>)</font> , width = <font color="#ff4500">4.0</font> <font>)</font> &lt;br/&gt; <br>  plot.  <font>bgcolor</font> = <font color="#483d8b">"white"</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> window <font>(</font> <font color="#008000">self</font> , - <font color="#ff4500">1</font> , component = plot <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">if</font> __name__ == <font color="#483d8b">"__main__"</font> : &lt;br/&gt; <br>  demo_main <font>(</font> MyFrame, size = <font>(</font> <font color="#ff4500">600</font> , <font color="#ff4500">600</font> <font>)</font> , title = <font color="#483d8b">"Simple Polar Plot"</font> <font>)</font> </blockquote><br><br></li><li><h5>  Different polygons: </h5><br><img src="https://habrastorage.org/storage/494b5cab/010255ce/7d02b922/34380c96.png"><br><blockquote>  <font color="#ff7700">import</font> <font color="#dc143c">math</font> &lt;br/&gt; <br>  <font color="#ff7700">from</font> numpy <font color="#ff7700">import</font> <font color="#dc143c">array</font> , transpose &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>example_support</font> <font color="#ff7700">import</font> DemoFrame, demo_main &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>api</font> <font color="#ff7700">import</font> Component, ComponentEditor, Window &lt;br/&gt; <br>  <font color="#ff7700">from</font> traits.  <font>api</font> <font color="#ff7700">import</font> HasTraits, Instance, Enum, CArray, Dict &lt;br/&gt; <br>  <font color="#ff7700">from</font> traitsui.  <font>api</font> <font color="#ff7700">import</font> Item, Group, View &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>api</font> <font color="#ff7700">import</font> ArrayPlotData, HPlotContainer, Plot &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>base</font> <font color="#ff7700">import</font> n_gon &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>tools</font> .  <font>api</font> <font color="#ff7700">import</font> PanTool, ZoomTool, DragTool &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> DataspaceMoveTool <font>(</font> DragTool <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "&lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">Modifies the data values ‚Äã‚Äãof a plot.</font>  <font color="#483d8b">Only works on instances &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">of BaseXYPlot or its subclasses &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  event_state = Enum <font>(</font> <font color="#483d8b">"normal"</font> , <font color="#483d8b">"dragging"</font> <font>)</font> &lt;br/&gt; <br>  _prev_pt = CArray &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> is_draggable <font>(</font> <font color="#008000">self</font> , x, y <font>)</font> : &lt;br/&gt; <br>  <font color="#ff7700">return</font> <font color="#008000">self</font> .  <font>component</font> .  <font>hittest</font> <font>(</font> <font>(</font> x, y <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> drag_start <font>(</font> <font color="#008000">self</font> , event <font>)</font> : &lt;br/&gt; <br>  data_pt = <font color="#008000">self</font> .  <font>component</font> .  <font>map_data</font> <font>(</font> <font>(</font> event. <font>x</font> , event. <font>y</font> <font>)</font> , all_values ‚Äã‚Äã= <font color="#008000">True</font> <font>)</font> &lt;br/&gt; <br>  <font color="#008000">self</font> ._prev_pt = data_pt &lt;br/&gt; <br>  event.  <font>handled</font> = <font color="#008000">True</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> dragging <font>(</font> <font color="#008000">self</font> , event <font>)</font> : &lt;br/&gt; <br>  plot = <font color="#008000">self</font> .  <font>component</font> &lt;br/&gt; <br>  cur_pt = plot.  <font>map_data</font> <font>(</font> <font>(</font> event. <font>x</font> , event. <font>y</font> <font>)</font> , all_values ‚Äã‚Äã= <font color="#008000">True</font> <font>)</font> &lt;br/&gt; <br>  dx = cur_pt <font>[</font> <font color="#ff4500">0</font> <font>]</font> - <font color="#008000">self</font> ._prev_pt <font>[</font> <font color="#ff4500">0</font> <font>]</font> &lt;br/&gt; <br>  dy = cur_pt <font>[</font> <font color="#ff4500">1</font> <font>]</font> - <font color="#008000">self</font> ._prev_pt <font>[</font> <font color="#ff4500">1</font> <font>]</font> &lt;br/&gt; <br>  index = plot.  <font>index</font> .  <font>get_data</font> <font>(</font> <font>)</font> + dx &lt;br/&gt; <br>  value = plot.  <font>value</font> .  <font>get_data</font> <font>(</font> <font>)</font> + dy &lt;br/&gt; <br>  plot.  <font>index</font> .  <font>set_data</font> <font>(</font> index, sort_order = plot. <font>index</font> . <font>sort_order</font> <font>)</font> &lt;br/&gt; <br>  plot.  <font>value</font> .  <font>set_data</font> <font>(</font> value, sort_order = plot. <font>value</font> . <font>sort_order</font> <font>)</font> &lt;br/&gt; <br>  <font color="#008000">self</font> ._prev_pt = cur_pt &lt;br/&gt; <br>  event.  <font>handled</font> = <font color="#008000">True</font> &lt;br/&gt; <br>  plot.  <font>request_redraw</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># # Create the Chaco plot.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_plot_component <font>(</font> <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Use n_gon to compute center for our polygons</font> &lt;br/&gt; <br>  points = n_gon <font>(</font> center = <font>(</font> <font color="#ff4500">0</font> , <font color="#ff4500">0</font> <font>)</font> , r = <font color="#ff4500">4</font> , nsides = <font color="#ff4500">8</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Choose some colors for our polygons</font> &lt;br/&gt; <br>  colors = <font>{</font> <font color="#ff4500">3</font> : 0xaabbcc, <font color="#ff4500">4</font> : <font color="#483d8b">'orange'</font> , <font color="#ff4500">5</font> : <font color="#483d8b">'yellow'</font> , <font color="#ff4500">6</font> : <font color="#483d8b">'lightgreen'</font> , &lt;br/&gt; <br>  <font color="#ff4500">7</font> : <font color="#483d8b">'green'</font> , <font color="#ff4500">8</font> : <font color="#483d8b">'blue'</font> , <font color="#ff4500">9</font> : <font color="#483d8b">'lavender'</font> , <font color="#ff4500">10</font> : <font color="#483d8b">'purple'</font> <font>}</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create a PlotData object to store the polygon data</font> &lt;br/&gt; <br>  pd = ArrayPlotData <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create a Polygon Plot to draw the regular polygons</font> &lt;br/&gt; <br>  polyplot = Plot <font>(</font> pd <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Store path data for each polygon, and plot</font> &lt;br/&gt; <br>  nsides = <font color="#ff4500">3</font> &lt;br/&gt; <br>  <font color="#ff7700">for</font> p <font color="#ff7700">in</font> points: &lt;br/&gt; <br>  npoints = n_gon <font>(</font> center = p, r = <font color="#ff4500">2</font> , nsides = nsides <font>)</font> &lt;br/&gt; <br>  nxarray, nyarray = transpose <font>(</font> npoints <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"x"</font> + <font color="#008000">str</font> <font>(</font> nsides <font>)</font> , nxarray <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"y"</font> + <font color="#008000">str</font> <font>(</font> nsides <font>)</font> , nyarray <font>)</font> &lt;br/&gt; <br>  plot = polyplot.  <font>plot</font> <font>(</font> <font>(</font> <font color="#483d8b">"x"</font> + <font color="#008000">str</font> <font>(</font> nsides <font>)</font> , <font color="#483d8b">"y"</font> + <font color="#008000">str</font> <font>(</font> nsides <font>)</font> <font>)</font> , &lt;br/&gt; <br>  <font color="#008000">type</font> = <font color="#483d8b">"polygon"</font> , &lt;br/&gt; <br>  face_color = colors <font>[</font> nsides <font>]</font> , &lt;br/&gt; <br>  hittest_type = <font color="#483d8b">"poly"</font> <font>)</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> &lt;br/&gt; <br>  plot.  <font>tools</font> .  <font>append</font> <font>(</font> DataspaceMoveTool <font>(</font> plot, drag_button = <font color="#483d8b">"right"</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  nsides = nsides + <font color="#ff4500">1</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Tweak some of the plot properties</font> &lt;br/&gt; <br>  polyplot.  <font>padding</font> = <font color="#ff4500">50</font> &lt;br/&gt; <br>  polyplot.  <font>title</font> = <font color="#483d8b">"Polygon Plot"</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Attach some tools to the plot</font> &lt;br/&gt; <br>  polyplot.  <font>tools</font> .  <font>append</font> <font>(</font> PanTool <font>(</font> polyplot <font>)</font> <font>)</font> &lt;br/&gt; <br>  zoom = ZoomTool <font>(</font> polyplot, tool_mode = <font color="#483d8b">"box"</font> , always_on = <font color="#008000">False</font> <font>)</font> &lt;br/&gt; <br>  polyplot.  <font>overlays</font> .  <font>append</font> <font>(</font> zoom <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">return</font> polyplot &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># Attributes to use the plot view.</font>  &lt;br/&gt; <br>  size = <font>(</font> <font color="#ff4500">800</font> , <font color="#ff4500">800</font> <font>)</font> &lt;br/&gt; <br>  title = <font color="#483d8b">"Polygon Plot"</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># # Demo class that is used by the demo.py application.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">class</font> Demo <font>(</font> HasTraits <font>)</font> : &lt;br/&gt; <br>  plot = Instance <font>(</font> Component <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  traits_view = View <font>(</font> &lt;br/&gt; <br>  Group <font>(</font> &lt;br/&gt; <br>  Item <font>(</font> <font color="#483d8b">'plot'</font> , editor = ComponentEditor <font>(</font> size = size <font>)</font> , &lt;br/&gt; <br>  show_label = <font color="#008000">False</font> <font>)</font> &lt;br/&gt; <br>  orientation = <font color="#483d8b">"vertical"</font> <font>)</font> , &lt;br/&gt; <br>  resizable = <font color="#008000">True</font> , title = title &lt;br/&gt; <br>  <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _plot_default <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#ff7700">return</font> _create_plot_component <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  demo = Demo <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># Stand-alone frame to display the plot.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">class</font> PlotFrame <font>(</font> DemoFrame <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_window <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#808080"># Return a window containing our plots</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> Window <font>(</font> <font color="#008000">self</font> , - <font color="#ff4500">1</font> , component = _create_plot_component <font>(</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">if</font> __name__ == <font color="#483d8b">"__main__"</font> : &lt;br/&gt; <br>  demo_main <font>(</font> PlotFrame, size = size, title = title <font>)</font> </blockquote><br><br></li><li><h5>  X-rays: </h5><br><img src="https://habrastorage.org/storage/1754d7ab/7c30fb4d/81b0ca23/7310ce95.png"><br><blockquote>  <font color="#ff7700">from</font> <font color="#dc143c">__future__</font> <font color="#ff7700">import</font> with_statement &lt;br/&gt; <br>  <font color="#ff7700">import</font> numpy &lt;br/&gt; <br>  <font color="#ff7700">from</font> traits.  <font>api</font> <font color="#ff7700">import</font> HasTraits, Instance, Enum &lt;br/&gt; <br>  <font color="#ff7700">from</font> traitsui.  <font>api</font> <font color="#ff7700">import</font> view, item &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>api</font> <font color="#ff7700">import</font> ComponentEditor &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>api</font> <font color="#ff7700">import</font> Plot, ArrayPlotData, AbstractOverlay &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>api</font> <font color="#ff7700">import</font> BaseTool &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>markers</font> <font color="#ff7700">import</font> DOT_MARKER, DotMarker &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> BoxSelectTool <font>(</font> BaseTool <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "Tool for selecting all points within a box &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">&lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">There are 2 states for this tool, normal and selecting.</font>  <font color="#483d8b">While the &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">left mouse button is the metadata on the datasources will be &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">updated with the current selected bounds. &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">&lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">Note that the tool is not shown.</font> <font color="#483d8b"><br></font>  <font color="#483d8b">bounds of the box. &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  event_state = Enum <font>(</font> <font color="#483d8b">"normal"</font> , <font color="#483d8b">"selecting"</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> normal_left_down <font>(</font> <font color="#008000">self</font> , event <font>)</font> : &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>event_state</font> = <font color="#483d8b">"selecting"</font> &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>selecting_mouse_move</font> <font>(</font> event <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> selecting_left_up <font>(</font> <font color="#008000">self</font> , event <font>)</font> : &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>event_state</font> = <font color="#483d8b">"normal"</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> selecting_mouse_move <font>(</font> <font color="#008000">self</font> , event <font>)</font> : &lt;br/&gt; <br>  x1, y1 = <font color="#008000">self</font> .  <font>map_to_data</font> <font>(</font> event. <font>x</font> - <font color="#ff4500">25</font> , event. <font>y</font> - <font color="#ff4500">25</font> <font>)</font> &lt;br/&gt; <br>  x2, y2 = <font color="#008000">self</font> .  <font>map_to_data</font> <font>(</font> event. <font>x</font> + <font color="#ff4500">25</font> , event. <font>y</font> + <font color="#ff4500">25</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  index_datasource = <font color="#008000">self</font> .  <font>component</font> .  <font>index</font> &lt;br/&gt; <br>  index_datasource.  <font>metadata</font> <font>[</font> <font color="#483d8b">'selections'</font> <font>]</font> = <font>(</font> x1, x2 <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  value_datasource = <font color="#008000">self</font> .  <font>component</font> .  <font>value</font> &lt;br/&gt; <br>  value_datasource.  <font>metadata</font> <font>[</font> <font color="#483d8b">'selections'</font> <font>]</font> = <font>(</font> y1, y2 <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>component</font> .  <font>request_redraw</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> map_to_data <font>(</font> <font color="#008000">self</font> , x, y <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "Returns the x and y data space. &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">&lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">Takes into account orientation. &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  plot = <font color="#008000">self</font> .  <font>component</font> &lt;br/&gt; <br>  <font color="#ff7700">if</font> plot.  <font>orientation</font> == <font color="#483d8b">"h"</font> : &lt;br/&gt; <br>  index = plot.  <font>x_mapper</font> .  <font>map_data</font> <font>(</font> x <font>)</font> &lt;br/&gt; <br>  value = plot.  <font>y_mapper</font> .  <font>map_data</font> <font>(</font> y <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">else</font> : &lt;br/&gt; <br>  index = plot.  <font>y_mapper</font> .  <font>map_data</font> <font>(</font> y <font>)</font> &lt;br/&gt; <br>  value = plot.  <font>x_mapper</font> .  <font>map_data</font> <font>(</font> x <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">return</font> index, value &lt;br/&gt; <br>  &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> XRayOverlay <font>(</font> AbstractOverlay <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "Overlay which draws data points.</font> <font color="#483d8b"><br></font>  <font color="#483d8b">&lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">This overlay should be combined with a tool which updates the &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">datasources metadata with selection bounds. &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  marker = DotMarker <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> overlay <font>(</font> <font color="#008000">self</font> , component, <font color="#dc143c">gc</font> , view_bounds = <font color="#008000">None</font> , mode = <font color="#483d8b">'normal'</font> <font>)</font> : &lt;br/&gt; <br>  x_range = <font color="#008000">self</font> ._get_selection_index_screen_range <font>(</font> <font>)</font> &lt;br/&gt; <br>  y_range = <font color="#008000">self</font> ._get_selection_value_screen_range <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">if</font> <font color="#008000">len</font> <font>(</font> x_range <font>)</font> == <font color="#ff4500">0</font> : &lt;br/&gt; <br>  <font color="#ff7700">return</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  x1, x2 = x_range &lt;br/&gt; <br>  y1, y2 = y_range &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">with</font> <font color="#dc143c">gc</font> : &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>set_alpha</font> <font>(</font> <font color="#ff4500">0.8</font> <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>set_fill_color</font> <font>(</font> <font>(</font> <font color="#ff4500">1.0</font> , <font color="#ff4500">1.0</font> , <font color="#ff4500">1.0</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>rect</font> <font>(</font> x1, y1, x2-x1, y2-y1 <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>draw_path</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  pts = <font color="#008000">self</font> ._get_selected_points <font>(</font> <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">if</font> <font color="#008000">len</font> <font>(</font> pts <font>)</font> == <font color="#ff4500">0</font> : &lt;br/&gt; <br>  <font color="#ff7700">return</font> &lt;br/&gt; <br>  screen_pts = <font color="#008000">self</font> .  <font>component</font> .  <font>map_screen</font> <font>(</font> pts <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">if</font> <font color="#008000">hasattr</font> <font>(</font> <font color="#dc143c">gc</font> , <font color="#483d8b">'draw_marker_at_points'</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>draw_marker_at_points</font> <font>(</font> screen_pts, <font color="#ff4500">3</font> , DOT_MARKER <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">else</font> : &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>save_state</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">for</font> sx, sy <font color="#ff7700">in</font> screen_pts: &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>translate_ctm</font> <font>(</font> sx, sy <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>begin_path</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>marker</font> .  <font>add_to_path</font> <font>(</font> <font color="#dc143c">gc</font> , <font color="#ff4500">3</font> <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>draw_path</font> <font>(</font> <font color="#008000">self</font> . <font>marker</font> . <font>draw_mode</font> <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>translate_ctm</font> <font>(</font> -sx, -sy <font>)</font> &lt;br/&gt; <br>  <font color="#dc143c">gc</font> .  <font>restore_state</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _get_selected_points <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "gets in the datasources &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">metadata &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  index_datasource = <font color="#008000">self</font> .  <font>component</font> .  <font>index</font> &lt;br/&gt; <br>  index_selection = index_datasource.  <font>metadata</font> <font>[</font> <font color="#483d8b">'selections'</font> <font>]</font> &lt;br/&gt; <br>  index = index_datasource.  <font>get_data</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  value_datasource = <font color="#008000">self</font> .  <font>component</font> .  <font>value</font> &lt;br/&gt; <br>  value_selection = value_datasource.  <font>metadata</font> <font>[</font> <font color="#483d8b">'selections'</font> <font>]</font> &lt;br/&gt; <br>  value = value_datasource.  <font>get_data</font> <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  x_indices = numpy.  <font>where</font> <font>((</font> <font>(</font> index <font color="#66cc66">&gt;</font> index_selection <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <font color="#66cc66">&amp;</font> <font>(</font> index <font color="#66cc66">&lt;</font> index_selection <font>[</font> - <font color="#ff4500">1</font> <font>]</font> <font>)</font> <font>)</font> &lt;br /&gt; <br>  y_indices = numpy.  <font>where</font> <font>(</font> <font>(</font> value <font color="#66cc66">&gt;</font> value_selection <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <font color="#66cc66">&amp;</font> <font>(</font> value <font color="#66cc66">&lt;</font> value_selection <font>[</font> - <font color="#ff4500">1</font> <font>]</font> <font>)</font> <font>)</font> &lt;br /&gt; <br>  &lt;br/&gt; <br>  indices = <font color="#008000">list</font> <font>(</font> <font color="#008000">set</font> <font>(</font> x_indices <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <font color="#66cc66">&amp;</font> <font color="#008000">set</font> <font>(</font> y_indices <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  sel_index = index <font>[</font> indices <font>]</font> &lt;br/&gt; <br>  sel_value = value <font>[</font> indices <font>]</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">return</font> <font color="#008000">zip</font> <font>(</font> sel_index, sel_value <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _get_selection_index_screen_range <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "maps the selected bounds that were set by the tool into screen &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">space.</font>  <font color="#483d8b">The overlay &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  index_datasource = <font color="#008000">self</font> .  <font>component</font> .  <font>index</font> &lt;br/&gt; <br>  index_mapper = <font color="#008000">self</font> .  <font>component</font> .  <font>index_mapper</font> &lt;br/&gt; <br>  index_selection = index_datasource.  <font>metadata</font> <font>[</font> <font color="#483d8b">'selections'</font> <font>]</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> <font color="#008000">tuple</font> <font>(</font> index_mapper. <font>map_screen</font> <font>(</font> numpy. <font color="#dc143c">array</font> <font>(</font> index_selection <font>)</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _get_selection_value_screen_range <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  <font color="#483d8b">"" "maps the selected bounds that were set by the tool into screen &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">space.</font>  <font color="#483d8b">The overlay &lt;br/&gt;</font> <font color="#483d8b"><br></font>  <font color="#483d8b">"" "</font> &lt;br/&gt; <br>  value_datasource = <font color="#008000">self</font> .  <font>component</font> .  <font>value</font> &lt;br/&gt; <br>  value_mapper = <font color="#008000">self</font> .  <font>component</font> .  <font>value_mapper</font> &lt;br/&gt; <br>  value_selection = value_datasource.  <font>metadata</font> <font>[</font> <font color="#483d8b">'selections'</font> <font>]</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> <font color="#008000">tuple</font> <font>(</font> value_mapper. <font>map_screen</font> <font>(</font> numpy. <font color="#dc143c">array</font> <font>(</font> value_selection <font>)</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">class</font> PlotExample <font>(</font> HasTraits <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  plot = Instance <font>(</font> Plot <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  traits_view = View <font>(</font> Item <font>(</font> <font color="#483d8b">'plot'</font> , editor = ComponentEditor <font>(</font> <font>)</font> <font>)</font> , &lt;br/&gt; <br>  width = <font color="#ff4500">600</font> , height = <font color="#ff4500">600</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> <font color="#0000cd">__init__</font> <font>(</font> <font color="#008000">self</font> , index, value, <font color="#66cc66">*</font> args, <font color="#66cc66">**</font> kw <font>)</font> : &lt;br/&gt; <br>  <font color="#008000">super</font> <font>(</font> PlotExample, <font color="#008000">self</font> <font>)</font> .  <font color="#0000cd">__init__</font> <font>(</font> <font color="#66cc66">*</font> args, <font color="#66cc66">**</font> kw <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  plot_data = ArrayPlotData <font>(</font> index = index <font>)</font> &lt;br/&gt; <br>  plot_data.  <font>set_data</font> <font>(</font> <font color="#483d8b">'value'</font> , value <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>plot</font> = Plot <font>(</font> plot_data <font>)</font> &lt;br/&gt; <br>  line = <font color="#008000">self</font> .  <font>plot</font> .  <font>plot</font> <font>(</font> <font>(</font> <font color="#483d8b">'index'</font> , <font color="#483d8b">'value'</font> <font>)</font> <font>)</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  line.  <font>overlays</font> .  <font>append</font> <font>(</font> XRayOverlay <font>(</font> line <font>)</font> <font>)</font> &lt;br/&gt; <br>  line.  <font>tools</font> .  <font>append</font> <font>(</font> BoxSelectTool <font>(</font> line <font>)</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  index = numpy.  <font>arange</font> <font>(</font> <font color="#ff4500">0</font> , <font color="#ff4500">25</font> , <font color="#ff4500">0.25</font> <font>)</font> &lt;br/&gt; <br>  value = numpy.  <font>sin</font> <font>(</font> index <font>)</font> + numpy.  <font>arange</font> <font>(</font> <font color="#ff4500">0</font> , <font color="#ff4500">10</font> , <font color="#ff4500">0.1</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  example = PlotExample <font>(</font> index, value <font>)</font> &lt;br/&gt; <br>  example.  <font>configure_traits</font> <font>(</font> <font>)</font> </blockquote><br><br></li><li><h5>  Different markers with a selection: </h5><br><img src="https://habrastorage.org/storage/95eba1f4/f2a6319c/cfc2c6fc/2d65ea1f.png"><br><blockquote>  <font color="#ff7700">from</font> numpy <font color="#ff7700">import</font> arange, compress, arange &lt;br/&gt; <br>  <font color="#ff7700">from</font> numpy.  <font color="#dc143c">random</font> <font color="#ff7700">import</font> <font color="#dc143c">random</font> &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>example_support</font> <font color="#ff7700">import</font> DemoFrame, demo_main &lt;br/&gt; <br>  <font color="#ff7700">from</font> enable.  <font>api</font> <font color="#ff7700">import</font> Component, ComponentEditor, Window &lt;br/&gt; <br>  <font color="#ff7700">from</font> traits.  <font>api</font> <font color="#ff7700">import</font> HasTraits, Instance &lt;br/&gt; <br>  <font color="#ff7700">from</font> traitsui.  <font>api</font> <font color="#ff7700">import</font> Item, Group, View &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>api</font> <font color="#ff7700">import</font> AbstractDataSource, ArrayPlotData, Plot, \ &lt;br/&gt; <br>  HPlotContainer, LassoOverlay &lt;br/&gt; <br>  <font color="#ff7700">from</font> chaco.  <font>tools</font> .  <font>api</font> <font color="#ff7700">import</font> LassoSelection, ScatterInspector &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># # Create the Chaco plot.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_plot_component <font>(</font> <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create some data</font> &lt;br/&gt; <br>  npts = <font color="#ff4500">2000</font> &lt;br/&gt; <br>  x = sort <font>(</font> <font color="#dc143c">random</font> <font>(</font> npts <font>)</font> <font>)</font> &lt;br/&gt; <br>  y = <font color="#dc143c">random</font> <font>(</font> npts <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create a plot data obect and this data</font> &lt;br/&gt; <br>  pd = ArrayPlotData <font>(</font> <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"index"</font> , x <font>)</font> &lt;br/&gt; <br>  pd.  <font>set_data</font> <font>(</font> <font color="#483d8b">"value"</font> , y <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Create the plot</font> &lt;br/&gt; <br>  plot = Plot <font>(</font> pd <font>)</font> &lt;br/&gt; <br>  plot.  <font>plot</font> <font>(</font> <font>(</font> <font color="#483d8b">"index"</font> , <font color="#483d8b">"value"</font> <font>)</font> , &lt;br/&gt; <br>  <font color="#008000">type</font> = <font color="#483d8b">"scatter"</font> , &lt;br/&gt; <br>  name = <font color="#483d8b">"my_plot"</font> , &lt;br/&gt; <br>  marker = <font color="#483d8b">"circle"</font> , &lt;br/&gt; <br>  index_sort = <font color="#483d8b">"ascending"</font> , &lt;br/&gt; <br>  color = <font color="#483d8b">"red"</font> , &lt;br/&gt; <br>  marker_size = <font color="#ff4500">4</font> , &lt;br/&gt; <br>  bgcolor = <font color="#483d8b">"white"</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Tweak some of the plot properties</font> &lt;br/&gt; <br>  plot.  <font>title</font> = <font color="#483d8b">"Scatter Plot With Selection"</font> &lt;br/&gt; <br>  plot.  <font>line_width</font> = <font color="#ff4500">1</font> &lt;br/&gt; <br>  plot.  <font>padding</font> = <font color="#ff4500">50</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Right now, some tools are a little invasive, and we need the</font> &lt;br/&gt; <br>  <font color="#808080"># actual ScatterPlot object to give to them</font> &lt;br/&gt; <br>  my_plot = plot.  <font>plots</font> <font>[</font> <font color="#483d8b">"my_plot"</font> <font>]</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Attach some tools to the plot</font> &lt;br/&gt; <br>  lasso_selection = LassoSelection <font>(</font> component = my_plot, &lt;br/&gt; <br>  selection_datasource = my_plot.  <font>index</font> <font>)</font> &lt;br/&gt; <br>  my_plot.  <font>active_tool</font> = lasso_selection &lt;br/&gt; <br>  my_plot.  <font>tools</font> .  <font>append</font> <font>(</font> ScatterInspector <font>(</font> my_plot <font>)</font> <font>)</font> &lt;br/&gt; <br>  lasso_overlay = LassoOverlay <font>(</font> lasso_selection = lasso_selection, &lt;br/&gt; <br>  component = my_plot <font>)</font> &lt;br/&gt; <br>  my_plot.  <font>overlays</font> .  <font>append</font> <font>(</font> lasso_overlay <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Uncomment this updates:</font> &lt;br/&gt; <br>  <font color="#808080"># lasso_selection.incremental_select = True</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">return</font> plot &lt;br/&gt; <br>  &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># Attributes to use the plot view.</font>  &lt;br/&gt; <br>  size = <font>(</font> <font color="#ff4500">650</font> , <font color="#ff4500">650</font> <font>)</font> &lt;br/&gt; <br>  title = <font color="#483d8b">"Scatter plot with selection"</font> &lt;br/&gt; <br>  bg_color = <font color="#483d8b">"lightgray"</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># # Demo class that is used by the demo.py application.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">class</font> Demo <font>(</font> HasTraits <font>)</font> : &lt;br/&gt; <br>  plot = Instance <font>(</font> Component <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  traits_view = View <font>(</font> &lt;br/&gt; <br>  Group <font>(</font> &lt;br/&gt; <br>  Item <font>(</font> <font color="#483d8b">'plot'</font> , editor = ComponentEditor <font>(</font> size = size <font>)</font> , &lt;br/&gt; <br>  show_label = <font color="#008000">False</font> <font>)</font> &lt;br/&gt; <br>  orientation = <font color="#483d8b">"vertical"</font> <font>)</font> , &lt;br/&gt; <br>  resizable = <font color="#008000">True</font> , title = title &lt;br/&gt; <br>  <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _selection_changed <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  mask = <font color="#008000">self</font> .  <font>index_datasource</font> .  <font>metadata</font> <font>[</font> <font color="#483d8b">'selection'</font> <font>]</font> &lt;br/&gt; <br>  <font color="#ff7700">print</font> <font color="#483d8b">"New selection:"</font> &lt;br/&gt; <br>  <font color="#ff7700">print</font> compress <font>(</font> mask, arange <font>(</font> <font color="#008000">len</font> <font>(</font> mask <font>)</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">print</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _plot_default <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  plot = _create_plot_component <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Retrieve the plot hooked to the LassoSelection tool.</font>  &lt;br/&gt; <br>  my_plot = plot.  <font>plots</font> <font>[</font> <font color="#483d8b">"my_plot"</font> <font>]</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> &lt;br/&gt; <br>  lasso_selection = my_plot.  <font>active_tool</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Set up the trait handler for the selection</font> &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>index_datasource</font> = my_plot.  <font>index</font> &lt;br/&gt; <br>  lasso_selection.  <font>on_trait_change</font> <font>(</font> <font color="#008000">self</font> ._selection_changed, &lt;br/&gt; <br>  <font color="#483d8b">'selection_changed'</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">return</font> plot &lt;br/&gt; <br>  &lt;br/&gt; <br>  demo = Demo <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#808080"># Stand-alone frame to display the plot.</font>  &lt;br/&gt; <br>  <font color="#808080"># ================================================= ==============================</font> &lt;br/&gt; <br>  <font color="#ff7700">class</font> PlotFrame <font>(</font> DemoFrame <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  index_datasource = Instance <font>(</font> AbstractDataSource <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _create_window <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  &lt;br/&gt; <br>  component = _create_plot_component <font>(</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Retrieve the plot hooked to the LassoSelection tool.</font>  &lt;br/&gt; <br>  my_plot = component.  <font>plots</font> <font>[</font> <font color="#483d8b">"my_plot"</font> <font>]</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> &lt;br/&gt; <br>  lasso_selection = my_plot.  <font>active_tool</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Set up the trait handler for the selection</font> &lt;br/&gt; <br>  <font color="#008000">self</font> .  <font>index_datasource</font> = my_plot.  <font>index</font> &lt;br/&gt; <br>  lasso_selection.  <font>on_trait_change</font> <font>(</font> <font color="#008000">self</font> ._selection_changed, &lt;br/&gt; <br>  <font color="#483d8b">'selection_changed'</font> <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#808080"># Return a window containing our plots</font> &lt;br/&gt; <br>  <font color="#ff7700">return</font> Window <font>(</font> <font color="#008000">self</font> , - <font color="#ff4500">1</font> , component = component, bg_color = bg_color <font>)</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">def</font> _selection_changed <font>(</font> <font color="#008000">self</font> <font>)</font> : &lt;br/&gt; <br>  mask = <font color="#008000">self</font> .  <font>index_datasource</font> .  <font>metadata</font> <font>[</font> <font color="#483d8b">'selection'</font> <font>]</font> &lt;br/&gt; <br>  <font color="#ff7700">print</font> <font color="#483d8b">"New selection:"</font> &lt;br/&gt; <br>  <font color="#ff7700">print</font> compress <font>(</font> mask, arange <font>(</font> <font color="#008000">len</font> <font>(</font> mask <font>)</font> <font>)</font> <font>)</font> &lt;br/&gt; <br>  <font color="#ff7700">print</font> &lt;br/&gt; <br>  &lt;br/&gt; <br>  &lt;br/&gt; <br>  <font color="#ff7700">if</font> __name__ == <font color="#483d8b">"__main__"</font> : &lt;br/&gt; <br>  demo_main <font>(</font> PlotFrame, size = size, title = title <font>)</font> </blockquote><br><br></li></ul><br><br><h5>  To see how Chaco implements animation, look in the ets / chaco / examples / updating_plot folder <br></h5><br><br><h5>  Chaco to HPGL-GUI <br></h5><br>  In HPGL-GUI it was necessary to build histograms.  Matplotlib and Chaco were equally suitable for this.  The choice fell on Chaco, because  Matplotlib did not support PySide integration. <br>  The statistics window looks like this: <br><img src="https://habrastorage.org/storage/77420637/e63ba708/410472e4/389f800d.png"><br>  The code can be found here: <br>  <a href="https://raw.github.com/Snegovikufa/HPGL-GUI/master/gui_widgets/statistics_window.py">raw.github.com/Snegovikufa/HPGL-GUI/master/gui_widgets/statistics_window.py</a> <br><br>  PS If you need to tell about embedding in PyQt4 or PySide, then I will add. <br><br>  UPD.  Updated financial chart example: added detailed comments and made embedding in the PySide widget. </div><p>Source: <a href="https://habr.com/ru/post/118280/">https://habr.com/ru/post/118280/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118270/index.html">Scythe Kaze Server: getting ready for the summer</a></li>
<li><a href="../118271/index.html">GoogleDocs on Android</a></li>
<li><a href="../118272/index.html">Google Chrome 11 (04/27/2011)</a></li>
<li><a href="../118277/index.html">Lemmings on Android</a></li>
<li><a href="../118278/index.html">Paste Putty under 1 comb</a></li>
<li><a href="../118281/index.html">Create an application for Windows Phone 7 from start to finish. Part 8. Creating a consistent look.</a></li>
<li><a href="../118282/index.html">Books, videos, and other iOS development materials</a></li>
<li><a href="../118283/index.html">JQuery 1.6 RC 1 released</a></li>
<li><a href="../118284/index.html">Conference Flash GAMM Moscow 2011</a></li>
<li><a href="../118285/index.html">NY Times: Google, mobile search giant, looking for new revenue opportunities</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
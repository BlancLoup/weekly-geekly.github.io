<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fault tolerant garbage system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Actually the story was as follows. 
 For one firm N, it was necessary to develop a cheap and reliable data storage and processing system. Briefly abou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fault tolerant garbage system</h1><div class="post__text post__text-html js-mediator-article">  Actually the story was as follows. <br>  For one firm N, it was necessary to develop a cheap and reliable data storage and processing system.  Briefly about the data.  It is necessary to take information from clients (I‚Äôm missing what, something like tax reports) and keep it for many years.  Quite often it was required to search for this information and even more often to modify the data entered in the last couple of hours.  Loss of information is unacceptable in any case.  Including in case of fire or earthquake.  Previously, all this was done on paper and stored in large folders.  For parsing folders there was a whole department of meaningless and merciless people. <br><br>  All this had to be transferred to an automated basis.  The most interesting thing is that the development was paid quite decently, but they didn‚Äôt allocate money for iron at all - they asked for all this to be raised on the existing hardware.  The car park consisted of a dozen morally dead monsters and it was on them that the database server and backup server had to be raised. <br><br><a name="habracut"></a><br>  The machines were mainly P3, 128mb operational, 16mb video, 10GB screw.  That is not a standard server, to put it mildly. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It was proposed to backup every record - that is, to mirror the database server and backup server.  Given the volume of data and the slowness of the machines at the first tests, this showed unpleasantly long results when sampling from the database.  The base itself, by the way, did not greatly contribute to the speed of work, because it was completely normalized and compact. <br>  Since the editing of records in the database was quite frequent, this caused inconvenience. <br><br>  After a brainstorming session, it was decided to pervert somewhat. <br>  Total in the end: <br>  Server A. The main working server of the system, keeps the Base for the current day and executes all the main logic. <br>  Server B. The second server stores the database for all time, not counting the current day.  At midnight, data from A was poured into B. Here are scripts for compiling reports on periods. <br>  Server S. Backup server.  After overflowing at midnight, backup B, erased the old backup.  And mirror A at all times. <br><br>  Total: with the loss of any of the servers, we had all the information.  That is, A + B or C. <br><br>  Server C was settled separately in the case of an emergency (the customer is still paranoid) <br><br>  On all servers stood Linux, Apache and muscle.  The main code is written in PHP, backups on Python. <br><br>  Fire did not happen, earthquakes, too.  Everything works fine for the second year.  Later, the ‚Äúred button‚Äù was added - the ability to work at your own risk and risk in case of loss of one of the machines.  It seems not useful) <br><br>  I think this is a bicycle or excessive paranoia, but everything worked, everything passed crash tests and everyone was satisfied. <br><br>  % username%, how would you improve this system? <br><br>  UPD: advise which blog to move. </div><p>Source: <a href="https://habr.com/ru/post/87988/">https://habr.com/ru/post/87988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87980/index.html">Back to the Future</a></li>
<li><a href="../87981/index.html">The correct points of issuance of goods in online stores</a></li>
<li><a href="../87982/index.html">Metal detectors from the perspective of an experienced radio amateur</a></li>
<li><a href="../87983/index.html">Unlimited traffic from April 1</a></li>
<li><a href="../87985/index.html">Caution commission!</a></li>
<li><a href="../87989/index.html">Unlimited IE one-time CSS expressions</a></li>
<li><a href="../87990/index.html">St. Patrick's Day in Zurich with masters of testing</a></li>
<li><a href="../87991/index.html">Ready team for your Internet startup</a></li>
<li><a href="../87992/index.html">ScrumTrek and AgileRussia: March 24, "Architecture in Agile"</a></li>
<li><a href="../87993/index.html">Street views on Yandex.Maps are now available in Kiev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
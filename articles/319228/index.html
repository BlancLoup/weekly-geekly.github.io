<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Saving and loading the game in the Unreal Engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Dmitry. I create computer games on the Unreal Engine as a hobby. Today I will tell you how to save the game to disk and then downloa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Saving and loading the game in the Unreal Engine</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/932/2a8/5d2/9322a85d2f824646bfeb3682a3278488.jpg"><br><br>  Hello, my name is Dmitry.  I create computer games on the Unreal Engine as a hobby.  Today I will tell you how to save the game to disk and then download it from disk. <br><a name="habracut"></a><br>  First you need to determine which variables you are going to save. This is done for C ++: <br><br><pre><code class="cpp hljs">UPROPERTY(SaveGame)</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For blueprint: <br><br><img src="https://habrastorage.org/files/72a/4d2/00e/72a4d200e562414dabf4722f30705302.png" alt="image"><br><br>  After this, saving and loading is performed in this way: <br>  Preservation: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">FMemoryWriter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MemoryWriter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ObjectData, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">FObjectAndNameAsStringProxyArchive </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemoryWriter, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; Ar.ArIsSaveGame = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//Set achive is savegame Ar.ArNoDelta = true; Object-&gt;Serialize(Ar);</span></span></code> </pre> <br><br>  Loading: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">FMemoryReader </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MemoryReader</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ObjectData, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">FObjectAndNameAsStringProxyArchive </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemoryReader, </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; Ar.ArIsSaveGame = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//Set achive is savegame Ar.ArNoDelta = true; Object-&gt;Serialize(Ar);</span></span></code> </pre> <br><br>  As you can see, saving from download differs only in what kind of archive we use FMemoryWriter - when saving and FMemoryReader when loading. <br>  Object - This is an instance of the class of the variable values ‚Äã‚Äãwe want to save. <br>  ObjectData - This is an array of bytes that we write to the file or read from the file. <br>  ArIsSaveGame - This flag indicates that the archive used to save variables is marked SaveGame. <br>  ArNoDelta - This flag should be set so that an error does not occur, which occurs if the value of the variable is first set in the class constructor and then on the class property panel.  When saving a variable, the value of which is equal to the value in the constructor, and the subsequent loading, the value from the property panel will be loaded. <br><br>  After all the values ‚Äã‚Äãof variables are saved to the archive, you need to write this archive to a file.  This is done like this: <br><br>  Preservation: <br><br><pre> <code class="cpp hljs">FFileHelper::SaveArrayToFile(Data, *SavePath)</code> </pre> <br>  Loading: <br><br><pre> <code class="cpp hljs">FFileHelper::LoadFileToArray(Data, *SavePath)</code> </pre> <br>  In addition, to save disk space, you can save and load files in a compressed form: <br><br>  Preservation: <br><br><pre> <code class="cpp hljs">TArray&lt;uint8&gt; CompressedData; <span class="hljs-function"><span class="hljs-function">FArchiveSaveCompressedProxy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Compressor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CompressedData, ECompressionFlags::COMPRESS_ZLIB)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// Compresed Compressor &lt;&lt; Data; //send archive serialized data to binary array Compressor.Flush(); FFileHelper::SaveArrayToFile(CompressedData, *SavePath)</span></span></code> </pre> <br>  Loading: <br><br><pre> <code class="cpp hljs">FFileHelper::LoadFileToArray(CompressedData, *SavePath) <span class="hljs-comment"><span class="hljs-comment">// Decompress File FArchiveLoadCompressedProxy Decompressor(CompressedData, ECompressionFlags::COMPRESS_ZLIB); //Decompress Decompressor &lt;&lt; Data;</span></span></code> </pre> <br>  When using compression, we need to create an intermediate archive FArchiveSaveCompressedProxy ‚Äî for data compression and FArchiveLoadCompressedProxy ‚Äî for data recovery. <br><br>  Actually, that's all <br>  ‚Üí <a href="https://cloud.mail.ru/public/KEBU/MtVNfWqGG">here is an example</a> <br><br>  Here, when you press s, all the actors are saved on the map that are inherited from the ISaveObject_StoryGraph class.  When l is pressed, the corresponding load occurs, p is the output of variables on the screen i is the increment of variables <br><br>  In addition, the plugin for editing quests also added the ability to save and load (the [- save,] - load keys), <br>  ‚Üí <a href="https://github.com/Deema35/StoryGraph">here it is</a> . <br><br>  You can read it <a href="https://habrahabr.ru/post/318366/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/319228/">https://habr.com/ru/post/319228/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319214/index.html">Cheap Ways to Heat Up Storage with an SSD</a></li>
<li><a href="../319216/index.html">Simple FDTD implementation in Java</a></li>
<li><a href="../319218/index.html">Detection in the code of the defect "null pointer dereferencing"</a></li>
<li><a href="../319222/index.html">Reducing the amount of PostgreSQL data on disk</a></li>
<li><a href="../319226/index.html">Simple and fast terrain generation algorithm</a></li>
<li><a href="../319230/index.html">A little bit about programming trends in 2016: a series of conferences #ITsubbotnik</a></li>
<li><a href="../319232/index.html">The reverse side of Agile</a></li>
<li><a href="../319234/index.html">Browsers and app specific security mitigation. Part 3. Google Chrome</a></li>
<li><a href="../319238/index.html">FloatingActionMode - contextual action panel for Android</a></li>
<li><a href="../319240/index.html">iOS: Work with the gallery (Photos framework). Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
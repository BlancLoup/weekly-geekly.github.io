<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Review of Psion Organizer II XP with internals and Tetris</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Psion Organizer II XP handheld computer was released by the British company Psion in 1986. He became a successful representative of the Psion Orga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Review of Psion Organizer II XP with internals and Tetris</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/e56/05a/196/e5605a196b7049d1a02a11c7c170ec9d.jpg"><br><br>  The Psion Organizer II XP handheld computer was released by the British company Psion in 1986.  He became a successful representative of the Psion Organizer line, in which the firstborn was Organizer I, which came off the assembly line in 1984.  The last representative of the series was Organizer II LZ, which appeared on sale in 1989. <br><br>  Psion Organizer is often titled as the first PDA in the world (what we called PDAs) and although this statement is controversial in my opinion, Organizers did have unique features for the handheld computers of those years. <br><a name="habracut"></a><br><h3>  Brief characteristics </h3><br>  <b>Year of release</b> : 1986 <br>  <b>CPU</b> : 8-bit CMOS Hitachi HD6303X operating at 0.92 MHz <br>  <b>ROM</b> : 32K or 64KB (for multilingual version) <br>  <b>RAM</b> : 16 or 32KB <br>  <b>Screen</b> : LCD, 2 lines of 16 characters. <br>  <b>Power supply</b> : 9 V battery type ‚Äúkrone‚Äù or from the adapter (not included) <br>  <b>Keyboard</b> : 36-button, ‚ÄúABC‚Äù layout <br>  <b>Size</b> : 142 x 78 x 29mm (with the protective cover closed) <br>  <b>Weight</b> : 250g <br>  <b>Price</b> : 139 pounds at the start of sales 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  A little background </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/web/1b2/efb/afa/1b2efbafaea945a7a54c427354fc7c81.jpg"></div><br>  The copy that you see in the photos was bought on ebay for a modest (for a working device in 1986) the amount of $ 30.  Such a low cost is apparently related to the device‚Äôs former popularity (more than a million devices of this line were sold), as well as its survivability.  Surprisingly, the lot was marked as "BRAND NEW", as far as this is true, I do not presume to judge, but the device actually arrived in a close to perfect condition. <br><br><h3>  Overview </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/web/a44/704/4de/a447044de09542158b0a4420ae831f71.jpg"></div><br>  The packaging is essentially battered by time.  Inside, under the protection of the foam, there is the Psion itself, the instruction manual, a description of the warranty, and an unfilled warranty card.  Unfortunately, the instruction and warranty card stuck together and in the process of separation the instruction cover was damaged, the box was apparently kept in a place with excessive humidity. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/451/d51/06c/451d5106cacf459daaddfbf1a3f88512.jpg"></div><br>  The case of the device is made of very durable plastic, it is noted in almost every description.  I happened to test his strength in practice - accidentally dropped from the table on a laminate, height ~ 75cm, I did not manage to find traces of a fall.  The Psion case has another feature - a downward sliding cover protecting the keyboard and plug-in memory modules.  The cover is removable, so Psion looks without it: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/181/8f0/99d/1818f099d1e04baa9968b0c2384ef741.jpg"></div><br>  Such attention to strength is due to the fact that the device was largely aimed at business applications.  On its basis, for example, mobile POS terminals were widely distributed;  Sony used Psion's in its European service centers;  they were used in geodetic works, and in other areas of activity. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/f9e/0bb/38d/f9e0bb38d2a64ee6b0eb0c659f0f2da5.jpg"></div><br>  The dimensions of the Psion are approximately the same as the current 5 "phones. For example, in comparison with the Nexus 5X: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/0f0/bea/db0/0f0beadb039c4d9ba7949ae92da963ad.jpg"></div><br>  The phone, however, is somewhat thinner. <br><br>  <b>The screen</b> is a symbolic LCD indicator, has 2 lines of 16 characters each.  5x8 character resolution.  Unfortunately, there is no direct access to individual pixels, which significantly limits the graphics capabilities (if of course you can even talk about graphics capabilities with 80x16 pixels), while the symbol table is completely missing pseudo-graphics.  But the developers left a loophole - 8 redefinable characters, so that 320 pixels at the same time at our disposal. <br>  If you have the effect of deja vu, it is not surprising.  The display controller is built on the basis of the <i>Hitachi HD44780</i> , and the matrix itself and the controller, as well as their counterparts, are actively used in DIY (and not only) to this day, that same ‚Äúgreen screen‚Äù, which can be found everywhere to connect Arduino, its direct descendant. <br><br>  <b>Keyboard</b> - 36-button membrane, ‚ÄúABC‚Äù layout.  Each alphanumeric button is responsible for entering two characters, switching between them is classic - with the SHIFT clamped, or the SHIFT + NUM combination.  In addition to the Alphanumeric keys, the keyboard has cursor control buttons;  standard SHIFT, DEL, SPACE, EXE (analogue of Enter);  the ON button, which even after 30 years regularly switches on the device, in the on state it performs the Esc functions;  The MODE button brings up something like a context menu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/234/899/6eb/2348996eb4f44d36b3d173a0e87cc9ee.jpg"></div><br>  The absence of the shutdown button may seem somewhat unexpected, you can only turn off the device from the main menu or, as advised in the instructions, do not turn off at all, the device will go into standby mode and after switching on the user will start work from the place where he finished.  You can also note the absence of such common punctuation marks as exclamation and interrogative, a bit strange for a device with the function of a notebook. <br><br>  The vertical ‚Äúcalculator‚Äù form factor, in my opinion, wins over the horizontal one, which was much more common among handheld computers of the 80s, you can even type on the go. <br><br>  On the back of the case there are two slots for memory modules.  Unfortunately, they were not part of the standard sales kit, instead I just have two plugs. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/182/4da/4b9/1824da4b9fb447d6aecda86e1e801827.jpg"></a> </div><br><br>  <b>Memory modules</b> existed of several types: <br><br>  <b>Datapack</b> - on the EPROM chip, the user could record data for long-term storage on it, but the deleted files were simply marked as deleted, the memory could only be ultraviolet irradiated, for which a special device was purchased (it was probably easier to buy a new module).  Up until the end of the 90s, the Psion user community published addresses of people across Europe who could send a memory module to erase by paying only postage.  Memory capacity from 8 to 128KB.  These modules were the most popular. <br><br>  With EPROM, so-called <b>Programpack</b> - modules with ready software were also distributed inside, although some of them used non-erasable PROMs.  Programpack'i released both Psion and numerous independent developers.  The programs were the most diverse - games, dictionaries and translators, a file manager, spreadsheets, and more, even an assembler. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/abb/e4b/24d/abbe4b24d7e94d0aacab30fa2f706f17.jpg"></a> </div><br>  <i>From left to right: 64KB Datapack, 32KB Rampak, 256KB Flashpak.</i>  <i>Photos taken from the site <a href="https://www.jaapsch.net/psion/galpacks.htm">www.jaapsch.net</a></i> <br><br>  <b>Rampack</b> - volatile <b>SRAMs</b> were used, they could be recorded and erased, but the storage time was limited to several years, there was a non-battery inside and the cost of the modules was significantly higher than that of the datapack.  Rampacks were up to 512KB in size. <br><br>  <b>Flashpack</b> - as the name implies, NOR-type flash memory chips inside, although these modules appeared much later than the start of sales of Organizer II, in 1986 this type of chips was not yet on sale.  Because of this, they were not fully supported. <br><br>  The device is powered by a single 9-volt battery 6F22 or more simply from the ‚ÄúCrown‚Äù.  Even in parallel with the purchase of the Organizer, I ordered a pair of batteries of this size, rechargeable via USB - I did not want to go broke on batteries.  I have never used these batteries, the usual alkaline crown was enough for all my research.  Judging by the user reviews, with active work, the battery had to be changed every couple of months. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/c5a/518/5ce/c5a5185ce7414d94820f0e949b46b5bc.jpg"></a> </div><br>  Above, under the protection of a sliding curtain, there is a connector for connecting external devices. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/4f6/4e4/8e7/4f64e48e76c0430583181c6de34ede7d.jpg"></a> </div><br>  Unfortunately, I don‚Äôt have a single external device, so I‚Äôd just note that a large number of peripherals were released for the Organizer, both by Psion and third-party manufacturers.  Among them were, for example, printers, barcode scanners, a modem, a pager, a magnetic card reader, RS232 converters, a power bank, and many other devices.  An interesting feature was that when the device was connected, Psion automatically ran the code contained in its memory (if it was), thus connecting, for example, a barcode scanner, the user needed additional programs and additional functions for OPL were added to the user. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/03d/688/db6/03d688db6cb644b383b8f14a939b49a8.jpg"></a> </div><br>  <i>From left to right: modem, pager, barcode scanner, thermal printer.</i>  <i>Photos taken from the site <a href="https://www.jaapsch.net/psion/galdev1.htm">www.jaapsch.net</a></i> <br><br><h3>  Geekporn </h3><br>  Of course, the psion has been opened. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/4d8/2ff/183/4d82ff1831074550ac53d7c202c98de4.jpg"></a> </div><br>  Judging by the stamps on the boards, my copy was assembled at the end of '87.  Piezodinamic is highly oxidized, but, fortunately, it is the only part with signs of corrosion. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/62f/122/afa/62f122afa6f14cc0be1aa0c254175e7a.jpg"></a> </div><br>  All components are located on two boards connected by a loop, on top of the power board, which also contains connectors for connecting peripherals, below the main board, on which 6 microcircuits are located - microprocessor, display controllers, 32KB RAM and 32KB ROM and one semi-custom multifunctional chip. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/5ab/a45/4a7/5aba454a72fb4da6abb2931ab3b589e9.jpg"></a> </div><br>  Top 2 chips - <i>Hitachi DG44100H</i> and <i>HD44780A00</i> .  <i>HD44780 is the</i> main chip of the display controller, but since it can control only 2 lines of 8 characters <i>each,</i> there is an auxiliary <i>DG44100H in the diagram</i> .  As I already wrote, <i>HD44780</i> based controllers are still widely distributed. <br><br>  Just below the <i>Hitachi HD6303XF</i> .  This is an 8-bit CMOS microprocessor (more precisely, MPU) from the <i>HD6301-HD6303 family</i> that were backward compatible with the well-known <i>Motorola 6800</i> .  The processor operates at a frequency of 0.9216 MHz. <br><br>  Even lower, to the left is the RAM chip - <i>HM62256LFP-12T</i> , the promised 32KB of SRAM memory. <br><br>  To her right is a semi-custom chip that performs several functions at once: it controls the on and off of the processor, polls the keyboard, provides the functionality of a real-time clock and some others. <br><br>  And at the very bottom of the chip, from the recently founded Atmel company, the <i>AT27C256</i> is a single-programmable memory chip (OTP) of 32KB EPROM. <br><br>  Here you have some more microprocessor with a bobbler: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/cad/255/c88/cad255c88a4246debdd1f3e8a77893f9.jpg"></a> </div><br>  Back side collage of both boards: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/web/128/260/4e4/1282604e49154f8dace28f6d15aa6496.jpg"></a> </div><br><h3>  Tetris </h3><br>  While buying the Organizer, there was a thought to write something for him.  And initially I wanted to completely immerse myself in antiquity and write directly on it, so I did not even consider buying a Com adapter, which I quickly regretted - it is very difficult to program on the screen in 2 lines, something like claustrophobia occurs.  As a result, I had to open Notepad ++, but there was an acute problem of transferring the code - of course it is possible to type on the calculator ABC keyboard after some getting used, but difficult, so debugging was also decided to be transferred to a computer. <br><br>  For Psion Organizer II, there was an official commercially distributed SDK, including a code editor, translator, debugger, simulator, and a utility for creating an image of memory modules. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/30d/132/f6f/30d132f6fb7a43d3ac5fd92fe64ca560.png"></div><br>  <i>Left editor, right debug process</i> <br><br>  Everything in it is good, but, due to the fact that the simulator is bundled and not a full-fledged emulator, we cannot work with low-level functions like peek, poke and run machine code, which is why test programs that work with redefined characters (User Defined Graphics or UDG, the same 320 pixels) becomes problematic. <br><br>  Fortunately for Psion's keyboard and for my fingers, in 98, independent developer Paul Robson wrote a full-fledged emulator of the entire Psion Organizer II line, for which Psion Inc. officially provided the images. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/1d2/780/35e/1d278035e22d4d6e922df2a8fa1d2380.png"></div><br>  I used this emulator in conjunction with the translator from the official SDK for development. <br><br>  On the development tools told, now briefly about the language itself OPL. <br>  OPL (Organizer Programming Language) is a BASIC-like interpreted programming language.  The translator built into the Organizer creates a byte-code, which is already being executed by the interpreter, thus achieving relatively high speed of the programs.  A distinctive feature of the OPL is the ability to perform machine instructions out of the box, thanks to which the device is at the complete disposal of the developer. <br><br>  So, after some thought about what to write under Psion, the choice fell on Tetris (yes, very original).  Firstly, in 30 years it was never written for the two-line Psion (maybe it is, but I found only an implementation for the four-line LZ model).  Secondly, you can use the graphics capabilities of the device and most importantly they are enough (almost).  There were some doubts about whether the interpreted language would have enough speed for Tetris on such a low-performance device, but the very first tests showed that there would be enough speed and this was completely confirmed - Tetris was written entirely in OPL and only at the end, more for interest, A couple of the most loaded sections for drawing were rewritten in machine codes. <br><br>  The main point was to draw a ‚Äúglass‚Äù with figures so that there were no noticeable spaces between the characters, for this I divided each character into six 2x2 pixel squares, in this form it turns out to evenly fill the entire playing field with beautiful squares (like a brick game), this type: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/599/f0b/f83/599f0bf83b1a4df8abef595a2ef344b5.png"></div><br>  But here we are in for an unpleasant moment - the limit of 8 UDGs, this would be enough only for the playing field measuring 6x8 squares, is clearly not enough.  Therefore, added to the game "feature" - "fog of war."  We draw from top to bottom the entire playing field and the falling figure as long as there are free UDGs and fill in the rest with the symbol "‚ñà", like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/9f4/8ef/ae5/9f48efae524d49b0980ccd1ce0283397.png"></div><br>  Now we can make the height of the glass almost canonical - 19 rows (the 20th row is busy drawing the bottom of the glass to separate the playing field from the information text), the width is only 6 bricks instead of the 10, but there's nothing you can do.  The free space left on the left is filled with the number of points scored, the level and the hint for the next figure.  Unfortunately, we don‚Äôt have the UDG left and had to display the next figure in letters (I didn‚Äôt know before, but it turns out that there are well-established letters ‚ÄúOISZLJT‚Äù for Tetris figures), as a result, the game takes the following form: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/0ef/fa0/711/0effa07115494dd79b10248d18ccdfb2.png"></div><br>  Well, as a cherry, I drew a headband inspired by a picture from Tetris‚Äôs GameBoy version: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/398/b38/443/398b3844331e43c88e1d2cca735cced0.png"></div><br>  Mm ... in my defense, let me just note that I had very few pixels! <br><br>  I will not dwell on the code in detail, there is nothing particularly interesting there.  I will note only a few specific moments that I encountered: <br><br>  - OPL is far from a record for compactness of the code, all these% $ in variable names as in BASIC, the absence of a for loop, the inability to initialize variables (especially arrays) when describing them lead to a strong redundancy of writing.  And in my head I always kept that moment that every 50 characters is an extra minute to enter the code in Psion, so I had to save letters hard, in the end I got into 3.5KB (‚Äúonly‚Äù an hour and a half for manual input); <br><br>  - Although OPL has support for procedures and functions, but it is implemented specifically - each procedure is described in a separate file and is accessible from any other program (which is the procedure).  This is probably convenient for use in small user-defined subroutines, but rather uncomfortable when writing a game, parts of which will not be clearly reused, and the overhead of calling functions is substantial.  In addition, several files are less convenient to synchronize manually.  This forced me to give up functions and limit myself to GOTO (the first program in which I used this operator, such is the experience); <br><br>  - You can fill an array only by sequential assignment of values ‚Äã‚Äãto each element.  This led to terrible things like ‚Äúf% (2) = 24: f% (3) = 24: f% (6) = 24‚Äù ... and further to 112 index (for storing figures).  In arrays, you also need to store machine code and of course the screensaver.  Hands on the keyboard Psion'a it can not enter, the psyche is not iron, I had to store such things as strings and convert them when you start the program. <br><br><div class="spoiler">  <b class="spoiler_title">Source code under spoiler</b> <div class="spoiler_text"><pre><code class="hljs cmake">TETRIS: local brd%(<span class="hljs-number"><span class="hljs-number">11</span></span>),bra%,cur%(<span class="hljs-number"><span class="hljs-number">11</span></span>),cra%,f$(<span class="hljs-number"><span class="hljs-number">112</span></span>),f% local nf%,row%,x%,y%,a%,px%,py%,pa% local i%,j%,k%,b% local un%,um%,s$(<span class="hljs-number"><span class="hljs-number">32</span></span>),s%,mc$(<span class="hljs-number"><span class="hljs-number">255</span></span>),mc% local tmr%,scr,scr$(<span class="hljs-number"><span class="hljs-number">47</span></span>),lvl%,lns% local kbdl%,bzmt%,mute%,kbmt% REM     hex-,      <span class="hljs-string"><span class="hljs-string">""</span></span>   mc$=<span class="hljs-string"><span class="hljs-string">"040404CE00030436378401C4014848481B16581BC6027D01802BFBB701815A2EF52D044F0926EF333226DB39"</span></span> mc%=ADDR(mc$)+<span class="hljs-number"><span class="hljs-number">1</span></span> do i%=PEEKB(mc%)-<span class="hljs-number"><span class="hljs-number">48</span></span> :j%=PEEKB(mc%+<span class="hljs-number"><span class="hljs-number">1</span></span>)-<span class="hljs-number"><span class="hljs-number">48</span></span> mc$=mc$+CHR$((i%-i%/<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>)*<span class="hljs-number"><span class="hljs-number">16</span></span>+j%-j%/<span class="hljs-number"><span class="hljs-number">16</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>) mc%=mc%+<span class="hljs-number"><span class="hljs-number">2</span></span> until i%*<span class="hljs-number"><span class="hljs-number">10</span></span>+j%=<span class="hljs-number"><span class="hljs-number">39</span></span> REM    -           ,        kbdl%=PEEKB($<span class="hljs-number"><span class="hljs-number">77</span></span>) POKEB $<span class="hljs-number"><span class="hljs-number">77</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> bzmt%=PEEKB($A4) kbmt%=PEEKB($<span class="hljs-number"><span class="hljs-number">20</span></span>C0) POKEB $<span class="hljs-number"><span class="hljs-number">20</span></span>C0,<span class="hljs-number"><span class="hljs-number">0</span></span> ONERR EXIT:: REM     ,         Psion' f$=<span class="hljs-string"><span class="hljs-string">"04000001&gt;&gt;44zg&gt;m0002000 000000270004&gt;oo&gt;376539llg&gt;mkvo0o8L&lt;Lhb72"</span></span> POKEB $<span class="hljs-number"><span class="hljs-number">180</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span> i%=<span class="hljs-number"><span class="hljs-number">0</span></span> do i%=i%+<span class="hljs-number"><span class="hljs-number">1</span></span> POKEB $<span class="hljs-number"><span class="hljs-number">181</span></span>,PEEKB(ADDR(f$)+i%)-<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>F until i%=<span class="hljs-number"><span class="hljs-number">64</span></span> CLS :AT <span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span> :PRINT <span class="hljs-string"><span class="hljs-string">"* ."</span></span>+CHR$(<span class="hljs-number"><span class="hljs-number">0</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">1</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">2</span></span>),<span class="hljs-string"><span class="hljs-string">"TETRIS "</span></span>,CHR$(<span class="hljs-number"><span class="hljs-number">3</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">4</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">5</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">6</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">7</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">1</span></span>) GET MENU:: b%=MENU(<span class="hljs-string"><span class="hljs-string">"START,INFO,QUIT"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b%=<span class="hljs-number"><span class="hljs-number">2</span></span> AT <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span> :PRINT <span class="hljs-string"><span class="hljs-string">"by azya, 2017"</span></span> VIEW(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"Q - quit, P - pause, Arrows - move, A - rotate, M - mute"</span></span>) :goto MENU:: <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> b%=<span class="hljs-number"><span class="hljs-number">3</span></span> goto EXIT:: <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> REM       ,   <span class="hljs-string"><span class="hljs-string">""</span></span>        <span class="hljs-number"><span class="hljs-number">0</span></span>F f$=<span class="hljs-string"><span class="hljs-string">"06600660066006600o0022220o00222203602310036023100630132006301320074022301700622007103220470022600720232027002620"</span></span> lns%=<span class="hljs-number"><span class="hljs-number">0</span></span> :scr=<span class="hljs-number"><span class="hljs-number">0</span></span> bra%=ADDR(brd%()) cra%=ADDR(cur%()) RANDOMIZE PEEKW($<span class="hljs-number"><span class="hljs-number">20</span></span>CB) nf%=INT(RND*<span class="hljs-number"><span class="hljs-number">7</span></span>) brd%(<span class="hljs-number"><span class="hljs-number">10</span></span>)=$<span class="hljs-number"><span class="hljs-number">00</span></span>FF s%=ADDR(s$) NEWF:: row%=<span class="hljs-number"><span class="hljs-number">0</span></span> f%=ADDR(f$)+<span class="hljs-number"><span class="hljs-number">1</span></span>+nf%*<span class="hljs-number"><span class="hljs-number">16</span></span> um%=<span class="hljs-number"><span class="hljs-number">5</span></span>+(nf%=<span class="hljs-number"><span class="hljs-number">0</span></span>) tmr%=PEEKW($<span class="hljs-number"><span class="hljs-number">20</span></span>CB) nf%=INT(RND*<span class="hljs-number"><span class="hljs-number">7</span></span>) x%=<span class="hljs-number"><span class="hljs-number">4</span></span> :y%=<span class="hljs-number"><span class="hljs-number">0</span></span> :a%=<span class="hljs-number"><span class="hljs-number">0</span></span> :py%=<span class="hljs-number"><span class="hljs-number">0</span></span> REM    i%=<span class="hljs-number"><span class="hljs-number">18</span></span> :b%=<span class="hljs-number"><span class="hljs-number">18</span></span> do POKEB bra%+b%,PEEKB(bra%+i%)+PEEKB(cra%+i%) <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> $<span class="hljs-number"><span class="hljs-number">81</span></span> POKEB cra%+b%,<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> PEEKB(bra%+b%)&lt;&gt;$FF b%=b%-<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> i%=i%-<span class="hljs-number"><span class="hljs-number">1</span></span> until i%=<span class="hljs-number"><span class="hljs-number">0</span></span> REM   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b%&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> scr=scr+<span class="hljs-number"><span class="hljs-number">40</span></span>-<span class="hljs-number"><span class="hljs-number">60</span></span>*(b%&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>)-<span class="hljs-number"><span class="hljs-number">200</span></span>*(b%&gt;<span class="hljs-number"><span class="hljs-number">2</span></span>)-<span class="hljs-number"><span class="hljs-number">900</span></span>*(b%&gt;<span class="hljs-number"><span class="hljs-number">3</span></span>) lns%=lns%+b% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> lns%&lt;<span class="hljs-number"><span class="hljs-number">151</span></span> lvl%=lns%/<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> i%=<span class="hljs-number"><span class="hljs-number">800</span></span> do BEEP <span class="hljs-number"><span class="hljs-number">17</span></span>,i% :BEEP <span class="hljs-number"><span class="hljs-number">15</span></span>,i%-<span class="hljs-number"><span class="hljs-number">200</span></span> i%=i%+<span class="hljs-number"><span class="hljs-number">100</span></span> until i%&gt;<span class="hljs-number"><span class="hljs-number">1100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> REM   s$=REPT$(<span class="hljs-string"><span class="hljs-string">" "</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>)+GEN$(<span class="hljs-number"><span class="hljs-number">1000000</span></span>+scr,<span class="hljs-number"><span class="hljs-number">7</span></span>)+REPT$(<span class="hljs-string"><span class="hljs-string">" "</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">91</span></span>) POKEB s%+<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">32</span></span> s$=s$+MID$(<span class="hljs-string"><span class="hljs-string">"OISZLJT"</span></span>,nf%+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)+CHR$(<span class="hljs-number"><span class="hljs-number">93</span></span>)+GEN$(<span class="hljs-number"><span class="hljs-number">100</span></span>+lvl%,<span class="hljs-number"><span class="hljs-number">3</span></span>) POKEB s%+<span class="hljs-number"><span class="hljs-number">30</span></span>,%L AT <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span> :PRINT s$ un%=<span class="hljs-number"><span class="hljs-number">0</span></span> :i%=<span class="hljs-number"><span class="hljs-number">1</span></span> POKEB $<span class="hljs-number"><span class="hljs-number">180</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span> do j%=<span class="hljs-number"><span class="hljs-number">0</span></span> do <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> brd%(i%) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> $E0E*(j%*<span class="hljs-number"><span class="hljs-number">7</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) POKEB s%+i%+<span class="hljs-number"><span class="hljs-number">16</span></span>*j%,<span class="hljs-number"><span class="hljs-number">255</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> un%&lt;um% REM     mc$ USR(mc%+<span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>*j%,brd%(i%)) POKEB s%+i%+<span class="hljs-number"><span class="hljs-number">16</span></span>*j%,un% un%=un%+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> j%=j%+<span class="hljs-number"><span class="hljs-number">1</span></span> until j%&gt;<span class="hljs-number"><span class="hljs-number">1</span></span> i%=i%+<span class="hljs-number"><span class="hljs-number">1</span></span> until i%&gt;<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> KEY :endwh MAIN:: POKEB cra%+py%,<span class="hljs-number"><span class="hljs-number">0</span></span> REM ,       ,       ,        i%=y%+<span class="hljs-number"><span class="hljs-number">4</span></span> do i%=i%-<span class="hljs-number"><span class="hljs-number">1</span></span> b%=(PEEKB(f%+a%-y%+i%) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> $F)*x% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> PEEKB(bra%+i%) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> b% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> y%=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> x%=<span class="hljs-number"><span class="hljs-number">4</span></span> goto GOVR:: <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> b% <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> $<span class="hljs-number"><span class="hljs-number">80</span></span> x%=x%/<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> b% <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> x%=x%*<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> row%=y%&gt;py% x%=px% :y%=py% :a%=pa% <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> goto MAIN:: <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> POKEB cra%+i%, b% until i%=y% px%=x% :py%=y% :pa%=a% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> row% i%=<span class="hljs-number"><span class="hljs-number">2000</span></span> do BEEP <span class="hljs-number"><span class="hljs-number">2</span></span>,i% i%=i%+<span class="hljs-number"><span class="hljs-number">200</span></span> until i%&gt;<span class="hljs-number"><span class="hljs-number">4400</span></span> goto NEWF:: <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> REM   un%=um% i%=y%/<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span> AT <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span> :PRINT s$ do b%=cur%(i%) <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> brd%(i%) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cur%(i%) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> $E0E POKEB $<span class="hljs-number"><span class="hljs-number">180</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>+un%*<span class="hljs-number"><span class="hljs-number">8</span></span> USR(mc%+<span class="hljs-number"><span class="hljs-number">3</span></span>,b%) AT i%,<span class="hljs-number"><span class="hljs-number">1</span></span> :POKEB $<span class="hljs-number"><span class="hljs-number">181</span></span>,un% un%=un%+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> cur%(i%) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> $<span class="hljs-number"><span class="hljs-number">7070</span></span> POKEB $<span class="hljs-number"><span class="hljs-number">180</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>+un%*<span class="hljs-number"><span class="hljs-number">8</span></span> USR(mc%,b%) AT i%,<span class="hljs-number"><span class="hljs-number">2</span></span> :POKEB $<span class="hljs-number"><span class="hljs-number">181</span></span>,un% un%=un%+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> i%=i%+<span class="hljs-number"><span class="hljs-number">1</span></span> until cur%(i%)=<span class="hljs-number"><span class="hljs-number">0</span></span> REM        do k%=KEY <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">95</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> k%=<span class="hljs-number"><span class="hljs-number">0</span></span> PAUSE -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> PEEKW($<span class="hljs-number"><span class="hljs-number">20</span></span>CB)-tmr%&gt;<span class="hljs-number"><span class="hljs-number">17</span></span>-lvl% tmr%=PEEKW($<span class="hljs-number"><span class="hljs-number">20</span></span>CB) y%=y%+<span class="hljs-number"><span class="hljs-number">1</span></span> goto MAIN:: <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k% <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> KEY :endwh <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> k%=<span class="hljs-number"><span class="hljs-number">6</span></span> scr=scr+<span class="hljs-number"><span class="hljs-number">1</span></span> y%=y%+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k%=<span class="hljs-number"><span class="hljs-number">3</span></span> BEEP <span class="hljs-number"><span class="hljs-number">15</span></span>,<span class="hljs-number"><span class="hljs-number">500</span></span> x%=x%-x%/<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k%=<span class="hljs-number"><span class="hljs-number">4</span></span> BEEP <span class="hljs-number"><span class="hljs-number">15</span></span>,<span class="hljs-number"><span class="hljs-number">500</span></span> x%=x%+x% <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k%=%A BEEP <span class="hljs-number"><span class="hljs-number">15</span></span>,<span class="hljs-number"><span class="hljs-number">750</span></span> a%=a%+<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k%=%P AT <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span> :PRINT <span class="hljs-string"><span class="hljs-string">"PAUSE"</span></span> :GET <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k%=%M mute%=-(mute%-<span class="hljs-number"><span class="hljs-number">1</span></span>) POKEB $A4,mute% <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> k%=%Q <span class="hljs-keyword"><span class="hljs-keyword">BREAK</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> goto MAIN:: <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> until <span class="hljs-number"><span class="hljs-number">0</span></span> GOVR:: scr$=<span class="hljs-string"><span class="hljs-string">"Scores:"</span></span>+GEN$(scr,<span class="hljs-number"><span class="hljs-number">6</span></span>)+<span class="hljs-string"><span class="hljs-string">" Level:"</span></span>+GEN$(lvl%,<span class="hljs-number"><span class="hljs-number">2</span></span>)+<span class="hljs-string"><span class="hljs-string">" Lines:"</span></span>+GEN$(lns%,<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> k%&lt;&gt;%Q scr$=<span class="hljs-string"><span class="hljs-string">"GAME OVER"</span></span>+CHR$(<span class="hljs-number"><span class="hljs-number">33</span></span>)+<span class="hljs-string"><span class="hljs-string">" "</span></span>+scr$ <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> do b%=DISP(<span class="hljs-number"><span class="hljs-number">1</span></span>,scr$+CHR$(<span class="hljs-number"><span class="hljs-number">9</span></span>)+<span class="hljs-string"><span class="hljs-string">" QUIT GAME"</span></span>+CHR$(<span class="hljs-number"><span class="hljs-number">63</span></span>)+<span class="hljs-string"><span class="hljs-string">" Y/N "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">95</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b%=%N <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> k%=%Q goto MAIN:: <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> b%=%N TETRIS: <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> until b%=%Y EXIT:: POKEB $<span class="hljs-number"><span class="hljs-number">77</span></span>,kbdl% POKEB $A4,bzmt% POKEB $<span class="hljs-number"><span class="hljs-number">20</span></span>C0,kbmt%</code> </pre> <br></div></div><br>  And finally, a video of what happened: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/arZiRCAWPq0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Selection of references: <br><br>  ‚Üí <a href="https://www.jaapsch.net/psion/">A very large collection of documents, photos and programs for all Psion Organizer models.</a> <br>  ‚Üí <a href="http://archive.psion2.org/org2/org2.htm">Mirror of the original Psion Organizer user community site, which was closed in 2002</a> <br>  ‚Üí <a href="http://forum.psion2.org/">User and Developer Forum</a> <br>  ‚Üí <a href="">Development kit</a> - collected in one archive the tools that I used during development. </div><p>Source: <a href="https://habr.com/ru/post/373655/">https://habr.com/ru/post/373655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../373643/index.html">Raspberry Pi3 vs DragonBoard. We respond to criticism</a></li>
<li><a href="../373645/index.html">Quite another tomorrow (story)</a></li>
<li><a href="../373647/index.html">Interview with Half-Life Writer Mark Laidlow</a></li>
<li><a href="../373649/index.html">Overview of universal robot robots</a></li>
<li><a href="../373653/index.html">Proteins synthesized from carbon dioxide and electricity</a></li>
<li><a href="../373657/index.html">Technoparks of the world and Russia</a></li>
<li><a href="../373659/index.html">Interview with George Church - Is the End of Aging Near?</a></li>
<li><a href="../373661/index.html">Thanks to Venmo, we now know the price for our friends.</a></li>
<li><a href="../373663/index.html">Dell Latitude 5289: a long-running and compact laptop-transformer</a></li>
<li><a href="../373665/index.html">Bondic Light Cured Plastic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
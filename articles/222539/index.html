<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do not deign to violate again, sir (ma'am)?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About a week ago, Vasyutka published a post about recognizing numbers and promised that we will post the software that we can try. We cheated a little...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do not deign to violate again, sir (ma'am)?</h1><div class="post__text post__text-html js-mediator-article">  About a week ago, <a href="http://habrahabr.ru/users/vasyutka/" class="user_link">Vasyutka</a> published a <a href="http://habrahabr.ru/post/221891/">post</a> about recognizing numbers and promised that we will post the software that we can try.  We cheated a little, not telling all the details.  Well, otherwise there would be no intrigue!  We did the core of the recognition algorithm six months ago, but the project for which it was done did not move.  He stopped somewhere in the alpha version.  Having thought and conferred with the customer, we decided that it was not good when such an algorithm was gathering dust on the shelf and did not benefit the society.  On the other hand, I did not want to lay out all the source code of the recognition part.  Then the idea was born, which will be discussed in this article. <br><img src="https://habrastorage.org/getpro/habr/post_images/e18/989/297/e189892978cb967096eb538c7c2fb75f.png" alt="image"><br>  We decided, in fact, to make an open server that would recognize the numbers coming in by http requests.  Since the whole idea is non-commercial, the server is, of course, weak, but I hope that this will be enough for the people to play. <br>  And here is a sharp turn of the plot.  This post is not about the protocol for accessing the server.  This will be the next post.  This post is about a program that we started to do as an example of working with a server, but which resulted in an interesting concept in our opinion.  The article will tell about the Android application, which you can take a picture of the car number ... And curse the owner with a dirty word!  Well, or see the statistics of how many times this motorist cursed. <br>  Those who are unbearable will be able to pick up work with the server from the source at the end of the article.  The rest will hold a couple of days in suspense, and then lay out the finished manual. <br><a name="habracut"></a><br>  In principle, the idea of ‚Äã‚Äãsuch software slipped periodically.  But in the performance of Android - an application where the process of shooting would be automated, I did not see it.  Perhaps our first implementation. <br>  <a href="http://habrahabr.ru/users/vasyutka/" class="user_link">Vasyutka</a> and I have never been android programmers, so everything is a little crooked.  As the server side.  We will be grateful for the advice. <br><br><h4>  A few words about the program </h4><br>  The program <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.opencv.samples.tutorial334565">is available</a> on Google Play.  Called "Recognitor".  It works on all the phones that we were able to get and test.  On some tablets, in order to display the video correctly, you need to call up the menu and click ‚Äúflip‚Äù there.  The program uses OpenCV, which drags the library.  Therefore, such a size (11 mb).  After starting the program, the video stream from the camera will go on the screen.  To start detection, just click on the shooting button.  Allocation of the number takes place on the phone, recognition - on the server. <br><img width="800" src="https://habrastorage.org/getpro/habr/post_images/d0f/bec/0c5/d0fbec0c55126b2f58b0a792a8fea40a.png"><br>  When shooting, the number should be visible to the eye in the video.  This is achieved at a distance of no more than 7-8 meters.  It is also required that the angle of inclination of the horizontal number does not exceed 15-20%, and the car was at an angle of no more than 30-40 degrees to the one removing.  After shooting, the program tries to contact the server to recognize the number (information is transmitted on the order of 10kb - the cut fragment with the number). <br><img width="800" src="https://habrastorage.org/getpro/habr/post_images/3f6/621/036/3f6621036f58e21b30c489a387f9adb9.png"><br>  Recognition is not debugged and it takes about 1 second for the number + time is spent on transmission, so after a couple of seconds, if the number was detected, the following menu is displayed: <br><img src="https://habrastorage.org/getpro/habr/post_images/5d3/8de/7fd/5d38de7fd508653ab5ced1ce09dad4e8.png"><br>  Our recognition is multi-threaded, it accepts several numbers in parallel.  On the left, the footage number that the program has detected is displayed.  On the right is its textual representation, which can be edited.  The center number is displayed again.  If you poke the buttons that make up the number, you can correct it by letter without calling the keyboard. <br><img src="https://habrastorage.org/getpro/habr/post_images/5bf/2ef/14c/5bf2ef14c9765200ea6b9dc9635dfd37.png"><br>  Bottom left shows how many times the driver was scolded with this number.  From the bottom right there is a button with a bad word that can curse a person.  If the number is corrected, then the database is accessed for new information. <br><br><h4>  Algorithm </h4><br>  After a person takes a picture, a frame is selected from the video stream and processed by the Haar classifier.  If such a number was found, it is sent to the server for further recognition.  If the number is not found - the program continues. <br>  After the last article, the trained classifier itself was asked several times.  In the source given at the end it is.  In a couple of days there will be an article about the protocols for accessing the server, it will be attached there with a separate file with explanations. <br>  The number on the server is processed by our algorithm, a little bit about which was described in the last <a href="http://habrahabr.ru/post/221891/">article</a> .  Searches for a detected number in the database.  The user is sent the recognized number and the number of its detections in the database. <br>  If the user changes the number, then re-request by car number. <br>  In short, the concept itself can be represented as follows: <br><img src="https://habrastorage.org/getpro/habr/post_images/60b/52c/619/60b52c6199622a676b17007810af378d.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What is not done </h4><br>  Not done dofig in part related to android and server: <br>  ‚Ä¢ Design of the program as in junior school <br>  ‚Ä¢ Instead of a full-size photo, a frame is taken from the stream. <br>  ‚Ä¢ Very weak infrastructure of the project, in fact, you can only curse the person, but you can not say for what, you can not curse in other words <br>  ‚Ä¢ Not all communications with the server are separated into separate streams; as a result, if the connection is lost, the program hangs for 10 seconds after clicking on some of the buttons. <br><br>  Instead of listing disadvantages, it is easier to say that we have nothing but the basic framework of the program. <br><br>  With recognition, everything is much more rosy, we are slowly closing it up, now it remains: <br>  ‚Ä¢ Only white numbers of the type are recognized: ‚Äúletter - three numbers - two letters - region‚Äù. <br>  ‚Ä¢ During the initial allocation, there are problems for numbers on white cars (where the number is whiter than the car). <br>  ‚Ä¢ Periodic disruptions in the processing that affect the stability of the algorithm (about 3-5% of the frames do not allocate any number). <br><br><h4>  Thinking out loud </h4><br>  It seems to us that the concept of software presented here is quite viable and has the right to exist.  Besides, sorry for the pathos, it is socially oriented.  If a person will often be scolded - maybe he will reconsider his behavior on the road and when parking? <br>  But we do not have the strength to make a full-fledged application with a branched structure, interface and website (we will maintain the current maximum, if we use it).  If suddenly someone has such powers, or comes up with another interesting and useful application, then we will maintain and improve the current recognition server. <br><br><h4>  Actually links: </h4><br>  <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.opencv.samples.tutorial334565">The program itself on the android</a> - everything they could have checked.  It seems to work.  Feel free to use the number of my typewriter, shot in the article :) <br>  <a href="https://github.com/ZlodeiBaal/Recognitor">Project sources</a> - on android, under the eclipse.  OpenCV libraries included. <br>  Vasya's article on number recognition. <br><br>  <b>PS Now we look what comes to the server.</b>  <b>People, the number should be in focus!</b>  <b>Strongly smeared numbers are not recognized by us!</b> <br><br>  <b>PSSPublished <a href="http://habrahabr.ru/post/223441/">Continuation</a> - Server Access Protocols.</b> </div><p>Source: <a href="https://habr.com/ru/post/222539/">https://habr.com/ru/post/222539/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../222527/index.html">The magazine "TsODy.RF" and the Association of Industry Data Centers will show all the paths that lead to the data center</a></li>
<li><a href="../222529/index.html">Python Meetup: March Meeting</a></li>
<li><a href="../222533/index.html">In honor of TechEd 2014, telerik offers free licenses</a></li>
<li><a href="../222535/index.html">DEKA ARM</a></li>
<li><a href="../222537/index.html">On the legality of the work of an individual with the App Store in the Russian Federation</a></li>
<li><a href="../222541/index.html">Linux kernel vulnerability to get local root</a></li>
<li><a href="../222543/index.html">Internal cuisine of PyCon Russia and international relations</a></li>
<li><a href="../222545/index.html">PrettyTasks Widget for Android with support for offline work</a></li>
<li><a href="../222547/index.html">Supermen - is it soon?</a></li>
<li><a href="../222549/index.html">Future API in 2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Enhanced Photography Sample Code for the Intel RealSense R200 Camera</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this document and sample application, I‚Äôll demonstrate how to use the Intel RealSense R200 camera and the Enhanced Photography functionality includ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Enhanced Photography Sample Code for the Intel RealSense R200 Camera</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/008/9c4/aaf/0089c4aaf0284a6c8093deea2fa6f1fd.jpg"><br><br>  In this document and sample application, I‚Äôll demonstrate how to use the <a href="https://software.intel.com/en-us/RealSense/R200Camera">Intel RealSense R200</a> camera and the <a href="https://software.intel.com/sites/landingpage/realsense/camera-sdk/v1.1/documentation/html/index.html%3Fdoc_epv_enhanced_photography.html">Enhanced Photography</a> functionality included with the <a href="https://software.intel.com/en-us/intel-realsense-sdk">Intel RealSense SDK</a> . <br><a name="habracut"></a><br><h2>  <font color="#0071c5">Requirements</font> </h2><br>  <b>equipment requirements</b> <br><br><ul><li>  4th generation Intel Core processor (based on Haswell microarchitecture) </li><li>  8 GB of free hard disk space </li><li>  Intel RealSense R200 Camera </li><li>  USB 3.0 port for camera connection </li></ul><br>  Software Requirements 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  64-bit version of Microsoft * 8.1 or later </li><li>  Microsoft Visual Studio * 2010‚Äì2015 with the latest service pack </li><li>  Microsoft .NET * 4.0 Framework for C # Development </li><li>  Intel RealSense SDK that can be downloaded <a href="https://software.intel.com/en-us/intel-realsense-sdk/download">here.</a> </li></ul><br>  Note.  This <a href="">particular sample project</a> was created in Visual Studio 2015 using the latest release of .NET. <br><br><h2>  <font color="#0071c5">Project structure</font> </h2><br>  In this sample application, I have separated the Intel RealSense SDK functionality from the GUI-level code so that developers can more conveniently focus on the functionality related to the enhanced Enhanced Photography capabilities of the R200 camera.  For this, I created the following C # wrapper classes. <br><br><ul><li>  <b>RSStreaming</b> .  Shell for the streaming functionality of the Intel RealSense SDK. </li><li>  <b>RSEnhancedPhotography</b> .  Shell for Enhanced Photography functionality Intel RealSense SDK. </li></ul><br>  In addition, for simplicity, I created separate WinForms forms for each type of Enhanced Photography function.  This creates a certain amount of duplicate code, but it provides clarity in the demonstration of each function Enhanced Photography. <br><br>  The project structure contains other elements besides those described here.  I will take a closer look at all the source code files and their work later in this document. <br><br>  I create my own events to demonstrate how, to the greatest extent possible, to separate the functionality of the Intel RealSense SDK from the source code of the graphical user interface.  Such a solution seems to me more ‚Äúclean‚Äù compared to passing the whole form to the class so that this class can access the properties in the form. <br><br>  Also, keep in mind that this sample application is not at all the benchmark for perfect software code.  There are almost no checks at runtime, there are no try / catch blocks.  I tried to make a simple and clear example with a clear code, so I tried to save the code from additional constructions as much as possible. <br><br>  The forms in the sample application are not very elegant, but they do their job well: they demonstrate how to use Enhanced Photography. <br><br><h2>  <font color="#0071c5">Visual Studio Project Structure</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4c1/f9d/27d/4c1f9d27d766474797a7619461f05796.png"></div><br>  The figure above shows the solution in Visual Studio 2015. The various folders contain the following. <br><br><ul><li>  <b>Forms</b> .  Various forms of WinForms, demonstrating the various features of Enhanced Photography. </li><li>  <b>Source</b> .  Source code distributed with the project. </li><li>  <b>Source \ CustomEventArgs</b> .  Contains classes derived from EventArgs own class. </li><li>  <b>MainForm.CS</b> .  The main form of the application. </li></ul><br><br><h2>  <font color="#0071c5">Simple overall sequence diagram</font> </h2><br><br><img src="https://habrastorage.org/files/fc2/a07/1c1/fc2a071c10054e09892425abe4db6ac8.png"><br><br>  When you run the sample application, the FormMain form is displayed.  In this form, you can start streaming by clicking the Streaming button. <img src="https://habrastorage.org/files/c41/cc1/1e4/c41cc11e4dee49d29b0c1daaf23575e0.png">  .  When this button is pressed, the application starts streaming using the functionality of the <i>RSStreaming</i> class. <br><br>  The <i>RSStreaming</i> class constantly updates <i>FormMain</i> , causing its internal <i>OnNewStreamingSample</i> event.  This is done for each frame coming from the camera. <br><br>  You can stop streaming by clicking the Stop Streaming button. <img src="https://habrastorage.org/files/d83/b11/5a9/d83b115a9b0b4aae8ee79833d9c70073.png">  .  After that, the streaming simply stops, there are no other commands available except how to turn it on again.  If you press the Photo button <img src="https://habrastorage.org/files/320/cfe/e23/320cfee23cfa4b93b17a3f9ac71838a1.png">  , image data is saved to disk and streaming stops.  After stopping the streaming and saving the photo to disk, the photo change buttons become active.  With their help, you can select one of the Enhanced Photography dialogs, demonstrating the capabilities implemented in this sample application. <br><br>  If you select one of the Enhanced Photo dialog boxes, the sample image stored on the disk is loaded and used.  This is explained in more detail later in the document. <br><br><h2>  <font color="#0071c5">Parsing code</font> </h2><br>  The following sections describe the entire application and its progress, describing the various classes. <br><br><h3>  <font color="#0071c5">Forms</font> </h3><br>  <b>FormDepthEnhance</b> .  Demonstrates the use of two different depth quality parameters to display depth data.  The user can choose low or high quality. <br><br><img src="https://habrastorage.org/files/709/ba0/109/709ba01092794f4eaf430c8eb7511e47.png"><br><br>  <b>FormDepthPasteOnPlane</b> .  This form demonstrates how to use the insert functionality on a plane to import an external image by clicking two points on a flat surface. <br><br><img src="https://habrastorage.org/files/253/bb2/71c/253bb271c0674b10869ec97c1329544a.png"><br><br>  <b>FormDepthRefocus</b> .  This form shows how to click anywhere on the image and make the image sharp at that location, and the rest of the image is blurred.  You can click anywhere in the image;  click location becomes a new focus point.  You can adjust the simulated aperture of the camera lens by moving the slider. <br><br><img src="https://habrastorage.org/files/cfa/e35/cd6/cfae35cd686c4c8491b4e82fdd187d6b.png"><br><br>  <b>FormDepthResize</b> .  This shows the resizing functionality: you can zoom the image to the size of a color image. <br><br><img src="https://habrastorage.org/files/27e/da3/bf4/27eda3bf4fd844b4b01bbaeb11953e36.png"><br><br>  <b>FormMeasure</b> .  Shows how to use the Enhanced Photography measurement functions to obtain distance, accuracy, and confidence values. <br><br><img src="https://habrastorage.org/files/df1/ae7/3c7/df1ae73c73164fddbe1c1157c68c0633.png"><br><br>  <b>FormMain</b> .  This is the main form of the application.  In it, a user can turn on streaming data from an Intel RealSense camera, stop streaming and take a snapshot.  You can then apply various Enhanced Photography functions to the captured image. <br><br><img src="https://habrastorage.org/files/f5c/2b5/ebb/f5c2b5ebb5ac4c94a7ed81bdbee011a3.png"><br><br><h3>  <font color="#0071c5">Source</font> </h3><br>  <b>RSEnhancedPhotography.CS</b> .  This is a wrapper class that encapsulates all the Enhanced Photography functionality of Intel RealSense cameras.  The purpose of this class is to separate as many features of the Intel RealSense camera from the level of the graphical user interface.  This class uses custom events to publish data to the client application.  The <i>RSEnhancedImageArg</i> class gets a new image that needs to be displayed. <br><br>  <b>RSPaintUtil.CS</b> .  This is a static helper class used to draw mouse click points and lines in C # PictureBox controls. <br><br>  <b>RSPoints.CS</b> .  This auxiliary class encloses the PXCMPointI32 point objects and creates functionality for storing points, checking point data, and transferring data about points that should be displayed on the screen. <br><br>  <b>RSStreaming.CS</b> .  This is the wrapper class for streaming Intel RealSense camera data.  It sends a stream of data and publishes an event for the client.  The event uses the RSSampleArg class to store data that will be used by the client. <br><br>  <b>RSUtility.CS</b> .  This is a static class containing source code.  The functionality implemented in it does not belong to any particular class. <br><br><h3>  <font color="#0071c5">Source \ CustomEventArgs Code</font> </h3><br>  <b>RSEnhancedImageArg</b> .  Extends <i>EventArgs</i> , contains a <i>PXCMImage</i> object.  This object will contain an image modified using the Enhanced Photography functionality of the Intel RealSense SDK.  This image is displayed in separate <i>WinForms PictureBox</i> controls. <br><br>  <b>RSMeasureArg.CS</b> .  Expands <i>EventArgs</i> , contains measurement data returned by Enhanced Photography functionality.  This data is used on the <i>WinForm FormMeasure</i> form to provide the user with measurement data. <br><br>  <b>RSSampleArg.CS</b> .  Expands <i>EventArgs</i> , contains the <i>PXCMCapture.Sample</i> object.  This object contains the last frame taken by the camera.  It is used for streaming data and for displaying it in the <i>WinForm FormMain</i> form. <br><br><h2>  <font color="#0071c5">Detailed analysis</font> </h2><br>  Now I will go to the description of the auxiliary classes that support forms.  I think it's better to learn how the base code works, and not just focus on the work of the forms.  Let's start with the first class, RSStreaming. <br>  I will not consider completely small details, such as the functions of receiving and assignment, they are completely understandable.  I will not describe any other obvious things. <br><br><h3>  <font color="#0071c5">RSStreaming</font> </h3><br>  RSStreaming is a wrapper class for streaming the Intel RealSense SDK.  This class is not too complicated.  The challenge is to give a simple example of streaming data from an Intel RealSense camera.  It can transmit a stream of an image, as well as take a snapshot and transmit both to the client using events. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> event EventHandler&lt;RSSampleArg&gt; OnNewStreamingSample;</code> </pre> <br>  As mentioned earlier in this document, I use events to send data to a client application (on forms).  RSStreaming sends data to the client (in this case, to FormMain) using the <i>OnNewStreamingSample</i> event.  It takes one parameter, <i>RSSampleArg</i> , which will contain the most recent camera sample. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Initialized</code> </pre><br>  A simple getter flag indicating whether the class has been initialized. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsStreaming</code> </pre><br>  A simple receiving flag indicates that the class is currently streaming data. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartStreaming</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  A common function that the client uses to start streaming data from the camera.  Checks if the class has been initialized properly.  If so, it calls the <i>InitCamera ()</i> function to initialize the camera. <br><br>  I would like to note that I use one function, which is usually ignored.  As you may have noticed, many examples of streaming typically use a <i>while loop</i> and <i>AcquireAccess</i> with some kind of mechanism to stop transmission using a logical flag.  This example uses a different approach. <br><br>  My approach is different: I use the <i>StreamFrames</i> function in the PXCMSenseManager.  It causes SenseManager to run its own internal stream and send data using event handling.  This is accomplished by assigning the object to the PXCMSenseManager.Handler function.  More on this in the description of the <i>InitCamera ()</i> function <i>below</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitCamera</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  <i>InitCamera</i> is a private function that initializes the camera and streaming transmission.  First we create the PXCMSenseManager and PXCMSession objects.  Then we need information about the device (camera), which we obtain using the static RSUtility function <i>GetDeviceByType ()</i> , passing it the session and the desired camera type. <br><br>  Then I create two PXCMVideoModule.DataDesc objects, one for the color image stream, the other for the depth stream.  Then I set up each thread.  After setting up the threads, I give the PXCMSenseManager command to enable threads. <br><br>  As stated in the description of the <i>StartStreaming ()</i> function, I use an event-based approach to control the transmission and reception of data.  To do this, I create and initialize the PXCMSenseManager.Handler event handler object and assign it to the <i>OnNewSample</i> function.  Every time the camera shoots a new frame, the <i>OnNewSample</i> event handler is <i>called</i> . <br><br>  Then I initialize SenseManager, send it to the handler object and give the command to use this object and its event handler. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> pxcmStatus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNewSample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mid, PXCMCapture.Sample sample )</span></span></span></span></code> </pre><br>  OnNewSample - event handler for the PXCMSenseManager.Handler object. <br><br>  <b>Options</b> <br><br><ul><li>  <b>Mid</b> .  Thread id  If several streams are requested using the <i>EnableVideoStream [s]</i> function, then this is PXCCapture.CUID + 0 or PXCCapture.CUID + 1 ... </li><li>  <b>PXCMCapture.Sample</b> .  Sample camera image. </li></ul><br>  When this function is called, I get the image from the <i>Sample</i> argument and put it in a new <i>RSSampleArg</i> object, then I <i>trigger the OnNewStreamingSample</i> event for this class.  After this event notifies the <i>FormMain</i> client that the new image is ready to be displayed. <br>  We release the frame and return the desired <i>pxcmStatus</i> , which in this case is not used. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StopStreaming</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  Stops streaming, closing threads and calling <i>Dispose ()</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  Frees up resources for garbage collection. <br><br><h3>  <font color="#0071c5">RSEnhancedPhotography</font> </h3><br>  The <i>RSEnhancedPhotography</i> class was created with the goal of <i>enclosing</i> all the Enhanced Photography functionality in one user-friendly class.  It works on the principle of events.  After image processing, an event is created that returns the newly created image or measurement data to the client application or class. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSEnhancedPhotography</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>  The constructor initializes some global variables used in the class.  The only input parameter is the original photo, taken in the main form.  It is fully initialized with image data and is used to initialize the local <i>_colorPhoto</i> object. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  Memory free for garbage collector. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SendOriginalImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  Returns the original image to the calling application using the <i>OnImageProcessed</i> event. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MeasurePoints</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( RSPoints points )</span></span></span></span></code> </pre><br>  <i>MeasurePoints</i> gets the completed <i>RSPoints</i> object.  First, I check that there really are two points in this object: the starting point and the ending point.  After this check, a <i>MeasureData</i> object is <i>created</i> , which is <i>sent to the MeasureDistance</i> function's <i>PXCMEnhancedPhoto objects</i> . <br><br>  Then I take the data from the filled <i>measureData</i> object and fill the <i>RSMeasureArg</i> object.  Note the parameter (mesaureData.distance / 10) that converts the value to centimeters.  After filling the <i>arg</i> object, I send it to the client via the <i>OnImageMeasured</i> event. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RefocusOnPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( RSPoints point, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> aperture = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">50</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span></code> </pre><br>  When using the camera, you can adjust the aperture to adjust the depth of field.  With a small aperture, we get a shallow depth of field: all objects in front of and behind the subject will be blurred. <br><br>  <i>RefocusOnPoint</i> works the same way.  This feature allows you to change the focus point on the image. <br><br>  Of course, for settings of this aperture, values ‚Äã‚Äãin the range from 0 to 100 are not suitable, but for our example they will fit perfectly.  If you want, convert them to the appropriate values ‚Äã‚Äãof the aperture scale and send me the updated code. <br><br>  <i>RefocusOnPoint</i> uses the <i>DepthRefocus</i> feature of the <i>PXCMEnhancedPhotos</i> class to create a new image with a new depth focus, using the original color photo, the point where the user clicks, and the aperture value.  After receiving the <i>PXCMPhoto</i> , I get the original image by calling <i>QueryReferenceImage ()</i> and providing the PXCMImage to the RSEnahncedImageArg instance.  After that, you just need to pass it back to the client application using the <i>OnImageProcessed</i> event. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DepthEnhancement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMEnhancedPhoto.DepthFillQuality quality )</span></span></span></span></code> </pre><br>  Improves or changes the quality of the image depth between two values: high or low.  Quality is indicated by the <i>DepthFillQuality</i> parameter. <br><br>  First, you need to initialize the local <i>PXCMPhoto</i> image by calling the <i>EnhanceDepth</i> function in PXCMEnhancedPhoto, providing the original <i>PXCMPhoto</i> image and the desired quality. <br><br>  Then, to initialize the <i>PXCMImage</i> , I use <i>QueryDepthImage</i> in <i>enhancedPhoto</i> to get the newly created depth image. <br><br>  After that, I create a new <i>RSEnhancedImageArg</i> object to send to the client using <i>OnImageProcessed</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DepthResize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  This is a simplified way to resize a depth image.  In this case, the size of the depth image becomes the same as the color image in the original PXCMPhoto object created in the constructor. <br><br>  First I need size information from a color photo.  To do this, I request the original PXCMPhoto object specified in the constructor.  Then I create an instance of the PhotoUtils object containing the DepthResize function.  After obtaining the size of the original image, I save the width and height values ‚Äã‚Äãin the required PXCMSizeI32 object. <br><br>  The following is a simple process: you need to give PXCMEnhancedPhoto a command to resize the image by calling the <i>DepthResize</i> function and specifying the PXCMPhoto object and the desired size. <br>  After resizing, everything happens in the usual way.  Create an image by polling the <i>enhancedPhoto</i> , fill in RSEnhancedArg, and send it to the client using <i>OnImageProcessed</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PastOnPlane</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( RSPoints points )</span></span></span></span></code> </pre><br>  This feature shows how you can insert a PXCMPhoto image on a flat surface.  In this case, the inserted image adapts to its surroundings.  For example, if you insert an image on a wall, it will look vertical and be at the same angle.  If you insert an image on the surface of the table, it will look as if it is on the table. <br><br>  First you need to make sure that there are two valid points, it is necessary for functionality. <br>  Then we load the image that needs to be inserted using the <i>LoadBitmap</i> function in the RSUtility. <br>  The main object for this is the <i>PXCMEnhancedPhoto.Paster</i> class.  This is a new class in the R5 release.  In the Paster class, there is a PasteOnPlane function, which was previously in the PXCMEnhancedPhoto class, and has now been moved to this new class. <br><br>  In this function, I check that the value returned from <i>PastOnPlane</i> is different from null.  The fact is that we have no guarantee that the <i>PasteOnPlane</i> function <i>succeeded</i> in performing the action.  For example, if the surface between two points is not flat, the function will not work as desired.  I just want to make sure that I am not using a null object. <br><br>  If a successful result is returned, I get the original image, save it, pass it to the RSEnhancedImageArg object and publish it in the client application. <br><br><h3>  <font color="#0071c5">RSUtility</font> </h3><br>  RSUtility is a static auxiliary class containing functionality not related to any other classes. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> PXCMCapture.<span class="hljs-function"><span class="hljs-function">DeviceInfo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDeviceByType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PXCMSession session, PXCMCapture.DeviceModel deviceType)</span></span></span></span></code> </pre><br>  This is an auxiliary function designed to obtain detailed information about the device, in this case about the R200 camera.  This functionality is demonstrated in a variety of RealSense examples. <br><br>  First we set the filter, specifying that we need a sensor as the main group, then as a subgroup we specify the video recording sensor. <br><br>  In one system there can be several devices, therefore it is necessary to go through all possible devices sequentially.  For each iteration, I <i>populate the</i> current <i>PXCMSession.ImplDesc</i> data in the <i>currentGroup</i> object.  If there is no error, go to the next step, where we fill the <i>PXCMCapture</i> object. <br><br>  <i>Having</i> prepared the <i>PXCMCapture</i> object, I <i>loop</i> through the various devices connected to this object.  I check if the information about the current device matches the camera we need.  If yes, the cycle is interrupted.  If not, go to the information about the next device connected to the <i>PXCMCapture</i> , until all devices are checked. <br><br>  When the device is found, we return it to the client, which in this case is an <i>RSStreaming</i> object. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Bitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToRGBBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMCapture.Sample sample )</span></span></span></span></code> </pre><br>  A polymorphic function simply calls <i>ToRGBBitmap</i> (a PXCMImage image), passing it the image of an example argument. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Bitmap </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToRGBBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMImage image )</span></span></span></span></code> </pre><br>  A simple function that uses the functionality of PXCMImage objects to get raster data using the <i>PXCMImage.ImageData</i> object.  Data is retrieved, stored in a .NET raster object, and returned to the client. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> PXCMImage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadBitmap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMSession session )</span></span></span></span></code> </pre><br>  This feature is used to support <i>PasteOnPlanes</i> .  It loads the predefined bitmap into the PXCMImage object and returns it to the client. <br><br>  First, it gets the path to the file and checks for the presence of the file.  If not, it returns null.  If the file exists, it creates a new .NET raster object, loading it from a file. <br><br>  The <i>PXCMImage.ImageInfo</i> object <i>is</i> used to store basic information about the raster image.  It is used when creating the PXCMImage object.  These are the specifications of the image that we will create. <br>  Then we need a <i>PXCMImage.ImageData</i> object containing the data of the actual bitmap.  A .NET BitmapData object is created and initialized with data that describes the format and structure of the data we need. <br><br>  For more information about how Bitmap.Lockbits work, see <a href="https://msdn.microsoft.com/en-us/library/5ey6h79d(v%3Dvs.110).aspx">here</a> .  The PXCMImage object releases access to image data to free up used memory;  the bitmap is unlocked, the PXCMImage is returned to the client. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDepthAtClickPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo, PXCMPointI32 point )</span></span></span></span></code> </pre><br>  This feature accepts <i>PXCMPhoto</i> and <i>PXCMPointI32</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SavePhoto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMSession session, PXCMCapture.Sample sample )</span></span></span></span></code> </pre><br>  Saves the photo to disk.  Uses this session to create a new PXCMPhoto object with save to disk functionality.  The PXCMPhoto object uses import from the preview sample to import image data into itself.  Find out if a file exists;  if so, delete it and save the file. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> PXCMPhoto </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OpenPhoto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMSession session )</span></span></span></span></code> </pre><br>  Simple function: checks if the XDM photo exists on the hard disk;  if so, use the <i>PXCMSession</i> object to create PXCMPhoto.  The photo object then loads the XDM file.  The function then returns PXCMPhoto to the client. <br><br><h3>  <font color="#0071c5">Rspaintutil</font> </h3><br>  The RSPaintUtil class is a helper class that is responsible for drawing points and lines in photos.  In addition, through the use of this class, duplication of code between different forms based on this functionality is reduced. <br><br>  This is a good starting point.  If present, creates a new .NET Point object, specifying the x, y values ‚Äã‚Äãof the starting point. <br><br>  Calls the <i>DrawCircle</i> function to draw a circle around the point of the click. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DrawTwoPointsAndLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( RSPoints points, PaintEventArgs e )</span></span></span></span></code> </pre><br>  Checks that both points are valid and creates two new .NET Point objects.  This function draws circles at these points, calling DrawCircle for each point.  Then a line is drawn between them using DrawLine. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DrawCircle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Point p, PaintEventArgs e )</span></span></span></span></code> </pre><br>  This function draws a circle around a .Net Point object with x, y coordinates.  This is done by creating a new Pen object.  To draw a circle, you need a rectangle.  It determines the size of the circle to draw.  For this, I created a function that draws a bounding box.  After creating the rectangle, I use the <i>DrawEllipse</i> function and draw event arguments to draw a circle the size of a rectangle. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DrawLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Point pointA, Point pointB, PaintEventArgs e )</span></span></span></span></code> </pre><br>  As in the case with a circle, you need to create a .NET Pen object, select its mode and draw a line between the start and end points using the <i>DrawLine</i> function and event arguments. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Rectangle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BuildBoundingRectangle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Point p )</span></span></span></span></code> </pre><br>  Creates a .NET rectangle object whose center is a point with x, y coordinates in p.  For this, a new Rectangle object is created.  I wanted the bounding box to be 10 x 10 pixels.  The value 10 x 10 I chose arbitrarily. <br><br><h3>  <font color="#0071c5">Rspoints</font> </h3><br>  RSPoints is a simple shell for managing two different possible points.  The dots indicate where the user clicked the PXCMPhoto photo that is displayed in the .NET PictureBox control. <br><br>  It uses two PXCMPointI32 objects that represent the starting and ending points.  In some cases, the <i>RSPoints</i> instance will only need a starting point, for example for the functionality of <i>RefocusOnPoint</i> .  In other cases, two valid points are needed for various functions, such as MeasurePoints, where a start point and an end point are needed. <br><br>  This class works in two modes: in single point mode, if actions are performed for which only one valid point is sufficient, or in multipoint mode, if available start and end points are required, for example, for <i>MeasurePoints</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSPoints</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  The constructor turns on single point mode, then calls <i>ResetPoints</i> to reset all x, y values. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddPoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y )</span></span></span></span></code> </pre><br>  This is about the same as adding an object to an array or to a list.  However, as you can see, there is neither an array nor a list.  Just two points.  I decided to make this class similar to the list, so I decided to add an array for points.  Is this class well thought out?  Perhaps not very well, but so far it doesn‚Äôt worry me much: it‚Äôs just a supporting class, it does what I need, and the rest is not so important. <br><br>  In single point mode, <i>AddPoints</i> always replaces the starting point.  This is done using the <i>ResetPoints</i> object. <br><br>  If we work with the mode of one point, then I do not need to add other points.  It is better to clear the existing starting point and set a new one. <br><br><h3>  <font color="#0071c5">RSSampleArg</font> </h3><br>  RSSAmpleArg inherits from <i>EventArgs</i> .  This class is intended for use with <i>RSStreaming</i> .  When <i>RSStreaming</i> is streaming, an instance of this class will be created with each new frame and filled with data from the camera, then transmitted to the client using the event class. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSSampleArg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMCapture.Sample sample )</span></span></span></span></code> </pre><br>  The constructor initializes the local object <i>PXCMCapture.Sample _sample</i> class with this parameter. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PXCMCapture.Sample Sample</code> </pre><br>  A simple getting method returns a local object <i>PXCMCapture.Sample</i> . <br><br><h3>  <font color="#0071c5">RSEnhancedImageArg</font> </h3><br>  RSEnhancedImageArg inherits from <i>EventArgs</i> .  This class is intended for use with <i>RSEnhancedPhotography</i> .  After <i>RSEnhancedPhotography</i> completes the image change, an instance of <i>RSEnhancedImageArg</i> is created, it is filled with the newly created image and sent to the client via the event class the client is subscribed to. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSEnhancedImageArg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMImage image )</span></span></span></span></code> </pre><br>  The form constructor initializes a single variable in this class ‚Äî the PXCMImage object. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PXCMImage EnhancedImage</code> </pre><br>  A simple getter method returns an instance of PXCMImage. <br><br><h3>  <font color="#0071c5">RSMeasureArg</font> </h3><br>  RSMeasureArg inherits from <i>EventArgs</i> .  This event is used in the <i>MeasurePoints</i> function of the <i>RSEnhancedPhotography</i> classes.  After calculating the distance with the <i>MeasurePoints</i> function <i>,</i> I use an instance of this class to store the returned distance, validity, and accuracy data in it.  After filling this object, it is used with the <i>Event</i> object to send data to the client application. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RSMeasureArg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> confidence, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> precision)</span></span></span></span></code> </pre><br>  Options <br><br><ul><li>  Floating point number  The measured distance between two points. </li><li>  Floating point number  The confidence level of the measurement in the SDK. </li><li>  Floating point number  The level of accuracy in the SDK. </li></ul><br>  The constructor fills the local data with input parameters. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Distance</code> </pre><br>  A simple get method returns the distance between two points. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Confidence</code> </pre><br>  A simple getting method returns the confidence level calculated when processing the distance between two points in the SDK. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Precision</code> </pre><br>  A simple acquisition method returns the level of accuracy calculated when processing the distance between two points in the SDK. <br><br><h3>  <font color="#0071c5">Formmain</font> </h3><br>  FormMain is the main form of the application.  With its help, the user can turn on and stop the streaming, as well as take a picture, which will be used by other forms for various Enhanced Photography functions. <br><br>  This form uses the <i>RSStreamingRGB</i> object to stream data from the camera.  The data is then displayed in the .NET PictureBox control using an Intel RealSense SDK helper object called <i>D2D1Render</i> . <br><br>  The form receives updates from <i>RSStreamingRGB</i> by subscribing to the <i>OnNewStreamingSample</i> event <i>RSStreaming</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  This is a form constructor.  It initializes global form objects, sets an event handler for data coming from <i>RSStreamingRGB</i> , and sets the desired state of the buttons. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rsRGBStream_NewSample</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, RSSampleArg sampleArg )</span></span></span></span></code> </pre><br>  Event handler for the <i>RSStreamingRGB</i> object.  Checks whether a color image should be viewed and passes the corresponding selection to the <i>_render</i> object. <br><br>  It then checks if a new photo needs to be taken;  if necessary, use <i>RSUtility</i> to save the photo to disk. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnStream_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>  Event handler when you click the Stream button.  Gives the <i>RSStreamingRGB</i> object a command to start streaming, sets buttons according to the application state. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnStopStream_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>  The Stop Streaming button event handler calls the <i>StopStreaming</i> function. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnTakeDepthPhoto_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>  Event handler for snapshot button.  Sets the snapshot flag to true so that the stream event handler saves the current image to disk, then instructs the form to stop streaming. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnableEnhancedPhotoButtons</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> enable )</span></span></span></span></code> </pre><br>  Sets the buttons according to the state of the application using an enable value. <br>  Perhaps this function will surprise you because there is no multi-threaded processing.      .         ?    ,        (  <i>RSStreamingRGB</i> ),       ,  . <br><br>   <i>StartStreaming</i>  <i>RSStreaming</i>    . <br><br><pre> <code class="cpp hljs">_senseManager.StreamFrames( <span class="hljs-literal"><span class="hljs-literal">false</span></span> );</code> </pre><br>    (  Intel RealSense SDK)      . -         . <br><br>   ,     ,    .        Windows   .   ,     .        <i>EnableEnhancedButtons</i> ,        .        ,   .         <i>EnableEnhancedPhotobuttons</i> .              . <br><br>    ,        <i>InvokeRequired</i>     else,       .     ,         . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnableStreamButtons</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> enable )</span></span></span></span></code> </pre><br>    ,  <i>EnableEnhancedPhotoButtons</i> ,    :        . <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StopStreaming</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span></code> </pre> <br> ,   RSStreaming  .  ,     .             . <br><br>      . <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e </span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>     Exit.   <i>Close()</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Form1_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(object sender, FormClosingEventArgs e)</span></span></span></span></code> </pre><br>    <i>FormClosing</i> . ,   <i>RSStreaming</i>  .  ,   . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnDepthResize_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnDepthEnhance_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnRefocus_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnPasteOnPlane_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnBlending_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>        .       ,   ,      .        ,    <i>RSUtility.OpenPhoto</i> .  <i>OpenPhoto</i>  ,       .        ,   ,   .  Everything is quite simple. <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btn_MouseEnter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs e </span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>        Start Streaming, Take Photo  Stop Streaming.   ,     ,     Tag. ,      ,      ,     . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btn_MouseLeave</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>       . <br><br><h3> <font color="#0071c5">FormMeasure</font> </h3><br> FormMeasure ,      Enhanced Photography.  <i>RSEnhancedPhotography</i>     Enhanced Photography  Intel RealSense SDK. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormMeasure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>  .   PXCMPhoto,    .            <i>OnImageMeasured</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitStatStrip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>       .      0, 0   x, y. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rsEnhanced_OnImageMeasured</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(object sender, RSMeasureArg e)</span></span></span></span></code> </pre><br>     <i>OnImageMeasured</i>  <i>RSEnhancedPhotography</i> .  <i>RSMeasuredArg</i> ,    .     . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pictureBox1_MouseClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, MouseEventArgs e )</span></span></span></span></code> </pre><br>        .     ,    .    ,  ,      /.       .     ,     .    ,  . <br><br>            ,  <i>UpdatePointsStatus</i> . <br><br>    (  ),      <i>MeasurePoints(‚Ä¶)</i>  <i>RSEnhancedPhoto</i> ,   .     ,    ,   <i>ResetPoints()</i>  <i>RSPoint</i> . <br><br>     invalidate  picturebox,     . ,         .       . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdatePointStatus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>       ;       . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pictureBox1_MouseMove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, MouseEventArgs e )</span></span></span></span></code> </pre><br>    ;     ,     .   x, y   . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pictureBox1_Paint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, PaintEventArgs e )</span></span></span></span></code> </pre><br>       picturebox.            . <br><br>     ,        .     ,        . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>     Exit   . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormMeasure_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, FormClosingEventArgs e )</span></span></span></span></code> </pre><br>    .     . <br><br><h3> <font color="#0071c5">FormDepthEnhance</font> </h3><br>    ,     ;    picturebox   .           . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthEnhance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>    ,  ,     picturebox   ,       . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rdo_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>        .   DepthEnhancement(‚Ä¶)  RSEnhancedPhoto,  ,     . <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _rsEnhanced_OnImageProcessed( object sender, RSEnhancedImageArg e )</code> </pre><br>   <i>OnImageProcessed</i> ,  <i>RSEnhancedPhotography</i>  .    picturebox     renderer. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>     Exit   . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  ,    . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthScaling_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, FormClosingEventArgs e )</span></span></span></span></code> </pre><br>    .   . <br><br><h3> <font color="#0071c5">FormDepthResize</font> </h3><br>       .             PXCMPhoto. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthResize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>  .     ,  ,  ,     <i>OnImageProcessed</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnResize_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>        <i>DepthResize(‚Ä¶)</i>  <i>RSEnahancedPhoto</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _rsEnhanced_OnImageProcessed( object sender, RSEnhancedImageArg e )</code> </pre><br>   <i>OnImageProcessed</i>   picturebox   ,      renderer. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>     Exit.  . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  ,      . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthResize_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, FormClosingEventArgs e )</span></span></span></span></code> </pre><br>      Cleanup. <br><br><h3> <font color="#0071c5">FormDepthRefocus</font> </h3><br> FormDepthRefocus       Enhanced Photography  Intel RealSense SDK.       ,      :      ,      . <br><br>        ,       . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthRefocus</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>    ,  .   <i>OnImageProcessed</i>       picturebox. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pictureBox1_MouseClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, MouseEventArgs e )</span></span></span></span></code> </pre><br>       picturebox.        ,  <i>RefocusOnPoint(‚Ä¶)</i> . <i>RSPoints ResPoints()</i>        . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tbAperture_Scroll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>   .   ,    ,   ,    <i>RefocusOnPoint</i> ,       :  . <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _rsEnhanced_OnImageProcessed( object sender, RSEnhancedImageArg e )</code> </pre><br>     <i>OnImageProcessed RSEnhancedObjects</i> .    renderer     picturebox. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>     Exit.  . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  ,      . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthResize_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, FormClosingEventArgs e )</span></span></span></span></code> </pre><br>      Cleanup. <br><br><h3> <font color="#0071c5">FormDepthPasteOnPlane</font> </h3><br>      :       ,       .       .   Intel RealSense SDK   ,       . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthPasteOnPlane</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>    ,  .   <i>OnImageProcessed</i>       picturebox. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _rsEnhanced_OnImageProcessed( object sender, RSEnhancedImageArg e )</code> </pre><br>     <i>OnImageProcessed RSEnhancedObjects</i> .    renderer     picturebox. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pictureBox1_MouseClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, MouseEventArgs e )</span></span></span></span></code> </pre><br>        .     ,    .    ,  ,      /.       .        picturebox,        . <br>     ,     .    ,  . <br><br>    (  ),      <i>MeasurePasteOnPlane(‚Ä¶)</i>  RSEnhancedPhoto,   .     ,    ,   <i>ResetPoints()</i>  RSPoint. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>     Exit.  . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  ,      . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthPasteOnPlane_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, FormClosingEventArgs e )</span></span></span></span></code> </pre><br>      Cleanup. <br><br><h3> <font color="#0071c5">FormDepthBlending</font> </h3><br> FormDepthBlending     .   ,       ,    ,    ,    Z  ,       . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthBlending</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( PXCMPhoto photo )</span></span></span></span></code> </pre><br>    ,  .   <i>OnImageProcessed</i>       picturebox. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pictureBox1_MouseClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, MouseEventArgs e )</span></span></span></span></code> </pre><br>        picturebox. ,         ‚Äî  .   ,    .   ,    Blend(),      PXCMPhoto. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Blend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>     ,    ,    <i>DepthBlend</i>   <i>RSEnhancedPhotograpy</i>     . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tbBlend_Scroll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, EventArgs e )</span></span></span></span></code> </pre><br>     .  <i>Blend()</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _rsEnhanced_OnImageProcessed( object sender, RSEnhancedImageArg e )</code> </pre><br>     <i>OnImageProcessed RSEnhancedObjects</i> .    renderer     picturebox. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">btnExit_Click</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, System.EventArgs e )</span></span></span></span></code> </pre><br>     Exit.  . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cleanup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( )</span></span></span></span></code> </pre><br>  ,      . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDepthBlending_FormClosing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( object sender, FormClosingEventArgs e )</span></span></span></span></code> </pre><br>      Cleanup. <br><br><h2>  <font color="#0071c5">Conclusion</font> </h2><br>         ,     Enhanced Photography,     SDK. ,      .  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/310804/">https://habr.com/ru/post/310804/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310792/index.html">Mobile VR development with Oculus and Gear VR</a></li>
<li><a href="../310794/index.html">Data structures for the smallest</a></li>
<li><a href="../310798/index.html">Setting up voice gateways Huawei eSpace IAD on the example of working with Asterisk PBX</a></li>
<li><a href="../310800/index.html">Michael Pryor, Trello: How to build a product for the mass market. Continuation</a></li>
<li><a href="../310802/index.html">Major processing plans to withdraw from the Russian market, possibly due to hacker actions</a></li>
<li><a href="../310806/index.html">My most important project was the bytecode interpreter (or ‚Äúhow to see the matrix‚Äù)</a></li>
<li><a href="../310808/index.html">Quality content for the site: what is it?</a></li>
<li><a href="../310810/index.html">Crysis worldwide via RDP protocol</a></li>
<li><a href="../310812/index.html">Microsoft, UN and EmerCoin: using blockchain technology in real projects</a></li>
<li><a href="../310814/index.html">Launch ReactOS on a secure military laptop from the M1 Abrams tank kit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
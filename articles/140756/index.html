<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Racing technologies 2: MoTeC M800 in action</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello colleagues! 
 Since in the last article you expressed a desire to learn more about how the engine control of a racing car looks like in real lif...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Racing technologies 2: MoTeC M800 in action</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/ca7/0f2/5b8/ca70f25b8553f69e6507451af5f9b63c.jpg" align="left">  Hello colleagues! <br>  Since in the <a href="http://habrahabr.ru/post/137163/">last article</a> you expressed a desire to learn more about how the engine control of a racing car looks like in real life, I‚Äôm ready to tell you how it works in practice.  Today I will show you with concrete examples how the control system and engine settings in my car are arranged.  <b>Subaru Impreza WRX STi</b> with the engine control unit <a href="http://www.motec.com/m800/m800overview/">MoTeC M800</a> will act as the test subject.  In this article you will find a description of the control program, basic functions and some nuances of customization.  Interested please pass under cat. <br><br><a name="habracut"></a><br><img src="https://habrastorage.org/storage2/c4c/a83/2a4/c4ca832a4aae04ead293897911ea5ad6.jpg" align="right">  As an introduction, let's take a direct look at the power plant, which is controlled by a computer.  This is a gasoline 4-cylinder EJ257 engine with boxer assembly and turbocharging.  It is equipped with 4 camshafts, 2 intake camshafts with the possibility of changing the valve timing.  Accordingly, it is equipped with 4 Bosch 1000CC nozzles, 4 candles with separate ignition coils and a Greedy TD06-20G turbine.  C it produced a lot of various modifications.  As a result, this model is able to develop peak power up to 450 horsepower. <br><br><img src="https://habrastorage.org/storage2/4a4/a6c/489/4a4a6c489c56f1c7990061eb2acb8335.jpg" align="left">  Such a powerful configuration forced to abandon the mass air flow sensor (MAF) in favor of the absolute pressure sensor of the air in the intake manifold (MAP) due to the fact that the upper limit of measurements of the standard MAF was reached.  From the point of view of control of the pressurization system, the classical solution in the form of the three-port saltwater Apexi is applied here.  REF / SYNC sensors (crankshaft position, ignition) are standard.  Also, the engine temperature sensor, the intake air temperature sensor, the control mechanisms of the electronic gas pedal and the electronic throttle valve and the controls of the variable valve timing system are used from standard devices.  The knock sensor, unfortunately, had to be abolished due to the lack of accurate calibrations of its values.  From the peripheral devices to the ECU are connected the radiator cooling fan relays, the power steering activity sensor and the fuel pump control system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To connect to the ECU, we need a special adapter <a href="http://www.motec.com/commscables/commcan/">Motec UTC CAN-to-USB</a> .  I use <a href="">ECU Manager v</a> as software <a href="">.</a>  <a href="">3.5</a> .  The software allows you to analyze firmware files in two modes: online and offline.  When you first adjust the parameters are made on the connected ECU directly to the operating firmware.  The second changes are made to the file, which must then be downloaded to the computer.  Well, let's get acquainted with the basic elements of the software (you can do this by installing it on your computer and creating a new project in it).  I would like to note that almost all items have a built-in help "F1". <br><br><br><img src="https://habrastorage.org/storage2/618/f62/7bd/618f627bd03fb6c5e9933a6117df3f60.png" align="right">  The main working menu is ‚ÄúAdjust‚Äù, through which we get into all the basic configuration mechanisms.  The most commonly used are fuel and ignition tuning.  In the second block, the ‚ÄúFunctions‚Äù tab is presented, storing the ‚Äúsweetest‚Äù in it: various specific functions.  <b>Digital</b> , <b>Auxiliary</b> , <b>Ignition,</b> and <b>Injector</b> are grouped I / O ports.  Each of them has its own capabilities and personal settings.  In their bulk, they are universal and allow you to assign any functions to them.  The last block has quite ‚Äútalking‚Äù tab names and for the most part contains parameters that are configured once.  It is also worth noting that the ECU has a password protection system for its own firmware, which allows the adjuster to block access to it in whole or in part. <br><br><img src="https://habrastorage.org/storage2/07c/a6e/c11/07ca6ec118bdd7621d62b632a5ac8611.png" align="left">  Of course, the main working tool is the fuel card (Adjust -&gt; Fuel -&gt; Main table), which determines how much fuel you need to apply at the moment.  It calculates the time for which you want to open the nozzle.  It is not constant and is summed up according to a complex scheme of ‚Äúcompensations‚Äù from the base values ‚Äã‚Äãin the table with additional parameters.  It depends on both the temperature regimes, the pressure in the intake manifold, and on any "arbitrary" formulas.  The mixture fed to the engine is one of the most important values ‚Äã‚Äãin engine operation.  If the mixture is too poor, you risk to get a detonation of fuel and prematurely bury the engine.  By feeding too much fuel, you create monstrous consumption combined with the risk of a fuel explosion in the exhaust manifold.  This is a very thin boundary between power, economy and durability.  You can get acquainted with various compensation modes in the tab Adjust -&gt; Fuel -&gt; Compensations. <br><br><img src="https://habrastorage.org/storage2/a55/020/0cc/a550200cc256aecde6b5c7833622605f.png" align="left">  The second main table is the control of <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B7%25D0%25B0%25D0%25B6%25D0%25B8%25D0%25B3%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">the ignition timing</a> (Adjust -&gt; Ignition -&gt; Main table).  This tincture is one of the decisive for achieving maximum efficiency of fuel combustion.  Since the quality of gasoline at gas stations suffers, the parameters must be aligned in such a way that they cover a certain range of fuel in terms of its burning rate.  Its calibration requires some understanding of the physics of the processes occurring in the engine.  Traditionally for many parameters, the wrong value leads to the purchase of a new engine.  Therefore, it is worth the most responsible approach to change, and not try to make them on the fly without a knock sensor.  As well as the fuel card, there is a set of compensations for changing the table dynamically depending on other parameters (Adjust -&gt; Ignition -&gt; Compensations). <br><br><img src="https://habrastorage.org/storage2/194/8d7/a57/1948d7a579c811bfbb5bd96c2c8553e0.png" align="right">  Next, pay attention to the tab Adjust -&gt; Functions.  Here are the control algorithms regulation of supercharging, setting the racing systems "antilag" and "traction control" and much more.  You can customize the change in engine behavior depending on the gear included, make up to three modes of nitrous oxide injection and build an automatic mixture control system using two lambda probes.  In principle, the palette of various functions is so rich that it allows you to implement any necessary function for both civilian driving and racing trips.  As Motec software improves, new add-on modules and algorithms appear.  Among all this palette, I would like to draw your attention to such a seemingly unremarkable function as <b>Idle Control</b> .  It is a system for maintaining engine idle. <br><br><img src="https://habrastorage.org/storage2/7f6/1ca/561/7f61ca561e0de95f25e6abcc717d056f.png" align="left">  For their control is applied <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%2598%25D0%2594-%25D1%2580%25D0%25B5%25D0%25B3%25D1%2583%25D0%25BB%25D1%258F%25D1%2582%25D0%25BE%25D1%2580">proportional-integral-differential controller</a> .  This is because maintaining idle speed of the engine is necessary under a wide variety of conditions.  Included electrical equipment (lights, window heater) or stove can significantly increase the load on the engine.  Accordingly, the computer should smoothly respond to the event and increase the number of revolutions of the crankshaft.  The configuration of these parameters is one of the main problems Motec: control of the engine at low speeds.  It takes a lot of time and effort to set the PID parameters as precisely as it was done on civilian cars.  But even after spending a week on it, you still have to come to terms with compromises like 1000 r / m and small ‚Äúwanderings‚Äù due to the too large differential component. <br><br>  Perhaps on this I finish the description of the software components.  A detailed description of each function is worthy of a separate article due to the mass of nuances and subtleties.  Of course, if there is interest, I am ready to continue the narration on the topics you have chosen. <br><br>  In general, to set up an ECU Motec requires a lot of patience and accuracy.  Any mistake can entail costly repairs.  Unfortunately, there are no voluminous manuals.  Almost all the knowledge and answers to specific questions are collected on the company <a href="http://www.motec.com/forum/">forum</a> .  But since each project is individual, much is learned from its mistakes. <br><br>  Thanks for attention!  I hope I told you something new. </div><p>Source: <a href="https://habr.com/ru/post/140756/">https://habr.com/ru/post/140756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140748/index.html">Translation of the first assignment of Technology Entrepreneurship course at Stanford University</a></li>
<li><a href="../140749/index.html">WPF Navigation: Using the Page + Frame Bundle</a></li>
<li><a href="../140750/index.html">Future points now</a></li>
<li><a href="../140752/index.html">Is there life after Phobos-Grunt?</a></li>
<li><a href="../140754/index.html">Tokyo court ruled to block Google search tips</a></li>
<li><a href="../140757/index.html">For the pirated version of Alan Wake changed the hero</a></li>
<li><a href="../140758/index.html">Drupal and multilingual, how to programmatically add a language switch</a></li>
<li><a href="../140759/index.html">Sony is going to release a laptop with Chrome OS</a></li>
<li><a href="../140760/index.html">CSS3 gradient for block borders</a></li>
<li><a href="../140761/index.html">STM32: Clock Security System</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deploying Django Projects with Fabric</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In one of the projects, you should regularly upload the code from the stage branch to the staging server. Started doing it manually - you log in via s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deploying Django Projects with Fabric</h1><div class="post__text post__text-html js-mediator-article">  In one of the projects, you should regularly upload the code from the stage branch to the staging server.  Started doing it manually - you log in via ssh, do the git push origin stage, if you need to - update the database and then restart apache.  By the end of this week, it was decided that it would be good to perform all these actions with one team.  I have gone through blogs - now they are very actively writing about the use of the <a href="http://fabfile.org/">Fabric</a> library for this purpose (this is an analogue of <a href="http://www.capify.org/">Capistrano</a> from Ruby on Rails). <br><a name="habracut"></a><br><h3>  How to install </h3><br>  Install the fabric library via pip or easy_install, then create a symbolic link for the fab application, or add a folder with bin files in your Python distribution in the PATH.  Below is a brief tutorial for Mac OS X + ports. <br><br> <code>sudo pip-2.6 install fabric <br> sudo ln -s /opt/local/Library/Frameworks/Python.framework/Versions/2.6/bin/fab /usr/bin/fab <br></code> <br><br><h3>  What Fabric does </h3><br>  Fabric allows you to perform a variety of ssh actions on a whole group of servers.  Actions are described in the file fabfile.py and represent normal Python functions.  Usually fabfile.py is placed in the root folder of the project (next to manage.py, settings.py, urls.py, ...). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote> <code><font color="#008000"><strong>from</strong></font> <font color="#0000FF"><strong>fabric.api</strong></font> <font color="#008000"><strong>import</strong></font> <font color="#666666">*</font> <br> <br> env <font color="#666666">.</font> hosts <font color="#666666">=</font> [ <font color="#BA2121">'moodbox.com'</font> ] <br> <br> <font color="#008000"><strong>def</strong></font> <font color="#0000FF">deploy</font> (): <br> local( <font color="#BA2121">'hg push'</font> ) <br> <font color="#008000"><strong>with</strong></font> cd( <font color="#BA2121">'hgreps/vorushin_ru'</font> ): <br> run( <font color="#BA2121">'hg update'</font> ) <br> run( <font color="#BA2121">'/etc/init.d/apache2 reload'</font> ) <br></code> </blockquote><br><br>  Now if I run fab deploy from the project folder vorushin_ru (the code of this blog written in Django), then first push will happen from my local machine, then ssh will be updated on the server and then restarted. <br><br><h3>  Any subtleties </h3><br>  First, work on ssh should go through certificates.  See <a href="http://www.electrictoolbox.com/article/linux-unix-bsd/create-rsa-dsa-keys-ssh/">ssh-keygen</a> , <a href="http://www.google.com/search%3Fq%3Dssh%2Bauthorized_keys">ssh authorized keys</a> . <br><br>  Secondly, if you need to pull from another server, you need to add the -A parameter when calling ssh.  Details - <a href="http://lincolnloop.com/blog/2009/sep/22/easy-fabric-deployment-part-1-gitmercurial-and-ssh/">lincolnloop.com/blog/2009/sep/22/easy-fabric-deployment-part-1-gitmercurial-and-ssh</a> <br><br>  Thirdly, if the development team is alternately done by a development team, then the project files should have write permissions for the entire development team.  Details - <a href="http://lincolnloop.com/blog/2009/oct/7/easy-fabric-deployment-part-2/">lincolnloop.com/blog/2009/oct/7/easy-fabric-deployment-part-2</a> <br><br>  Fourth, if several projects are running under Apache, then it is better to restart it via touch your.wsgi (if mod_wsgi is configured to work in daemon_mode). <br><br>  <i>The original article in my blog - <a href="http://vorushin.ru/blog/10-razvertyvanie-django-proektov-c-pomoshyu-fabric/">vorushin.ru/blog/10-razvertyvanie-django-proektov-c-pomoshyu-fabric</a></i> </div><p>Source: <a href="https://habr.com/ru/post/76619/">https://habr.com/ru/post/76619/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76600/index.html">Another blow to spammers</a></li>
<li><a href="../76609/index.html">When you need a lot, really a lot of servers</a></li>
<li><a href="../76610/index.html">Failover Service with CARP</a></li>
<li><a href="../76611/index.html">Physics on Flash. Box2D Engine</a></li>
<li><a href="../76613/index.html">The late news of the departure of Valery Lanovenko</a></li>
<li><a href="../76622/index.html">fasten Idea plugins to WebIde</a></li>
<li><a href="../76623/index.html">About a cruel serpent post</a></li>
<li><a href="../76624/index.html">Creating a 3d robot arm in flash (please help)</a></li>
<li><a href="../76626/index.html">QQ: register and set security questions</a></li>
<li><a href="../76629/index.html">Why I do not like video hosting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MS SQL 2011 - Modification of the returned data set</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the original sound and in life, this opportunity sounds like With Result Set . This piece allows you to change the names and data types in the data...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MS SQL 2011 - Modification of the returned data set</h1><div class="post__text post__text-html js-mediator-article">  In the original sound and in life, this opportunity sounds like <strong>With Result Set</strong> .  This piece allows you to change the names and data types in the data set returned by the stored procedure. <br><br>  Before we dive into the details of using this feature, let's look at how previous versions of SQL servers dealt with the data returned by the stored procedure.  What opportunities they provided to work with the result. <br><br>  To demonstrate the work, we will use the <strong>tbl_Test</strong> table consisting of 3 columns as an example. <br> <a href=""><img title="01" src="https://habrastorage.org/getpro/habr/post_images/29a/c2c/465/29ac2c4652dc285f2a82dcac141c520c.jpg" width="393" height="145"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><pre><code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--  ,    IF EXISTS (SELECT * FROM sys.objects WHERE name = N'tbl_Test' AND type = 'U') DROP TABLE tbl_Test GO SET ANSI_NULLS ON GO --   CREATE TABLE [dbo].[tbl_Test]( [Id] [int] NOT NULL, [Name] [varchar](50) NOT NULL, [PhoneNumber] [int] NOT NULL ) ON [PRIMARY] GO</span></span></code> </pre> <br>  Now write some information there.  Let it be 1000 entries: <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">--     CTE ;With Cte(Id,Name,PhoneNo) As ( Select Id = 1 ,Name='Name' + CAST( 1 As Varchar(50)) ,PhoneNo=12345678 Union All Select Id+1 ,Name= 'Name' + CAST( Id+1 As Varchar(50)) ,PhoneNo+1 From Cte Where Id &lt;1000 ) --      Insert Into dbo.tbl_test Select * From Cte Option( Maxrecursion 0) --   Select * From tbl_Test</span></span></code> </pre> <br><br>  Running the script above will output approximately the following data set (part) <br><pre>  Id Name PhoneNumber
 1 Name1 12345678
 2 Name2 12345679
 3 Name3 12345680
 4 Name4 12345681
 5 Name5 12345682
 ... </pre><br><br>  Now we will write a procedure that will output the query data to the <strong>tbl_Test</strong> table <strong>.</strong> <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCEDURE</span></span> dbo.Usp_FetchRecords <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span> ,<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> ,PhoneNumber <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> dbo.tbl_Test <span class="hljs-keyword"><span class="hljs-keyword">END</span></span></code> </pre> <br><br>  There are several ways to get a final set of data on the results of the stored procedure.  Some of them are described and discussed in an article by Erland Sommarskog in his <a href="http://www.sommarskog.se/share_data.html">article</a> .  We will use one of the approaches based on temporary tables. <br><br><h2>  Using temporary tables </h2><br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment">-- #Temp    tempdb,    IF OBJECT_ID('tempdb..#Temp') IS NOT NULL BEGIN Drop Table #Temp END --   CREATE TABLE #Temp ( Id int ,EmpName Varchar(50) ,PhoneNo int ) --   ,    INSERT INTO #Temp ( Id ,EmpName ,PhoneNo ) EXEC dbo.Usp_FetchRecords --      Select * from #Temp</span></span></code> </pre> <br>  The approach described above works perfectly well if we know in advance which columns and what type of output is required. <br><br>  <strong>The disadvantages of this and similar approaches:</strong> <br><ul><li>  None of the approaches offer a direct solution to the problem.  In any case, support from temporary tables or variables is required.  Consumes space in the database, under the temporary table. </li><li>  Query time increases </li><li>  When Open Raw Set or Open query queries are required, you must explicitly enable the <em>Ad Hoc Distributed Queries</em> function and then begin the work. </li><li>  In the case of the use of temporary tables or table-type variables, you need to know in advance the structure of the response procedure. </li></ul><br><br><h3>  New approach MS SQL 2011 </h3><br>  The new version allows you to get rid of these shortcomings and now we will see exactly how. <br><pre> <code class="sql hljs">EXEC Usp_FetchRecords <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SETS</span></span>( ( [Emp <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Emp <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ,[Phone <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ) )</code> </pre> <br>  The output will be: <br><pre>  Emp Id Emp Name Phone Number
 1 Name1 12345678 &lt;
 2 Name2 12345679 &lt;
 3 Name3 12345680 &lt;
 4 Name4 12345681 &lt;
 5 Name5 12345682 &lt;
 ... </pre><br><br>  The general syntax for using <strong>With Result Set is</strong> : <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SETS</span></span>( ( <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> Name1 DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] ,<span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> Name2 DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] , . . . . . . . . . . . . , . . . . . . . . . . . . . . ,<span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>-n DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] ) , ( <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> Name1 DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] ,<span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> Name2 DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] , . . . . . . . . . . . . , . . . . . . . . . . . . . . ,<span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>-n DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] ) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . , ( <span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> Name1 DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] ,<span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> Name2 DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] , . . . . . . . . . . . . , . . . . . . . . . . . . . . ,<span class="hljs-keyword"><span class="hljs-keyword">Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>-n DataType [<span class="hljs-keyword"><span class="hljs-keyword">Size</span></span>] ) )</code> </pre> <br><br>  In this way, you can arbitrarily change the names of the columns in the resulting dataset.  You can change the data type within the limits that are allowed for implicit type conversion.  Otherwise, the database will generate an error. <br><br>  Thus, in the example below, the base will generate an error about the wrong type conversion.  We are trying to return the <em>int</em> type while the field is declared as <em>varchar (50)</em> . <br><pre> <code class="sql hljs">EXEC Usp_FetchRecords <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SETS</span></span>( ( [Emp <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Emp <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> <span class="hljs-comment"><span class="hljs-comment">--    int ,[Phone Number] varchar(50) ) )</span></span></code> </pre> <br>  During script execution, we get the following error: <br><br>  <strong><em>Msg 8114, Level 16, State 2, Procedure Usp_FetchRecords, Line 5 Error converting data type varchar to int.</em></strong> <br><br>  The query that was demonstrated above is designed to convert a single result dataset using the With Result Set.  However, this technique, as can be seen from the general syntax, can be extended to several result sets.  Now there will be an example of how to do this. <br><br>  Imagine that we have a stored procedure that returns two data sets. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCEDURE</span></span> [dbo].[Usp_ModifiedFetchRecords] <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span> ,<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> ,PhoneNumber <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> dbo.tbl_Test; <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span> ,<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> dbo.tbl_Test <span class="hljs-keyword"><span class="hljs-keyword">Where</span></span> PhoneNumber % <span class="hljs-number"><span class="hljs-number">2</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span></code> </pre> <br><br>  The second select returns subscribers with even phone numbers.  A sample run might be (part of the result): <br><br> <a href=""><img title="02" src="https://habrastorage.org/getpro/habr/post_images/28a/62c/738/28a62c738964ae2cd46e4cfb3b7fa5c2.jpg" width="188" height="416"></a> <br><br>  Now we will try to apply With Result Set to get a more digestible result without changing the stored procedure itself. <br><pre> <code class="sql hljs">EXEC Usp_ModifiedFetchRecords <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SETS</span></span>( ( [Emp <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">First</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Emp <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">First</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ,[Phone <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">First</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ), ( [Emp <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Second</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Emp <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">From</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Second</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Result</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ) )</code> </pre> <br>  The result of the execution will now be in the spirit of: <br> <a href=""><img title="03" src="https://habrastorage.org/getpro/habr/post_images/dc3/177/285/dc3177285d3469f1bcbe7693624d4532.jpg" width="581" height="252"></a> <br><br>  In this case, the stored procedure returns two result data sets, but if we try to process only one of them in the With Result Set, we get an error from the SQL engine. <br><br>  <strong><em>Msg 11535, Level 16, State 1, Procedure Usp_ModifiedFetchRecords, Line 11, Result SETS;</em></strong> <br><br><h2>  How to get data from With Result Set </h2><br>  Sometimes it may be necessary to additionally process the value obtained with the With Result Set.  In this case, you can use temporary tables or table type variables. <br><br>  Consider an approach using table type variables. <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">Declare</span></span> @tblStoreWithResultSetsData <span class="hljs-keyword"><span class="hljs-keyword">Table</span></span> ( [Employee <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Employee <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ,[Emp Phone <span class="hljs-keyword"><span class="hljs-keyword">No</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> @tblStoreWithResultSetsData EXEC Usp_FetchRecords <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SETS</span></span>( ( [Emp <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Emp <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">6</span></span>) <span class="hljs-comment"><span class="hljs-comment">--  , --     6. --    ,[Phone Number] varchar(50) ) ) Select * From @tblStoreWithResultSetsData</span></span></code> </pre> <br>  The result will be expected, the name of the employee is reduced to 6 characters.  This can be seen in the following screenshot (last 10 entries) <br><br> <a href=""><img title="04" src="https://habrastorage.org/getpro/habr/post_images/ffe/a53/e4e/ffea53e4e7171811fa8b90e8d5242836.png" width="504" height="261"></a> <br><br><h3>  Possible use </h3><br><ol><li>  <em>Data conversion in</em> <em>SSIS packages will be easier</em> ; for an additional description, see the article <a href="http://consultingblogs.emc.com/jamesrowlandjones/archive/2010/11/16/denali-using-execute-with-result-sets-example-using-ssis-source-adaptors.aspx">here</a> . </li><li>  <em>Change data types without changing the schema</em> .  Imagine that a .Net application expects a value of a boolean type, and a value in the table is encoded with an int or char (1) type.  In general, you can apply value conversion with the Case When Then Else construct.  But it‚Äôs easier and more pleasant to immediately change the data type to bit (in the case of int). </li><li>  Another example of the application With Result Set, when the .Net program is waiting for an int, and the column in the database is of type float. </li><li>  <em>Possible immunity of</em> <em>DAL to schema changes.</em>  This refers to positive immunity when using the With Result Set set the column names for the resulting dataset.  Then it will not matter how the names change in the database itself.  A kind of VIEW analogue for stored procedures. </li></ol><br><br><h3>  Restrictions </h3><br>  You can not make a selective change of columns in the final data set.  For example, the following script will cause an error on execution: <br><pre> <code class="sql hljs">EXEC Usp_FetchRecords <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SETS</span></span>( ( [Emp <span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ,[Phone <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>] <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) ) )</code> </pre> <br>  Since the procedure returns a set of <em>three</em> columns.  The error will be as follows: <br><br>  <strong><em>Msg 11537, State 16, State 1, Procedure Usp_FetchRecords, Line 5 RESET SETS 2 column (s) at run time.</em></strong> <br><br>  <i>Transfers from the cycle:</i> <i><br></i>  <i>MS SQL Server 2011: <a href="http://habrahabr.ru/blogs/htranslations/123345/">Autonomous databases</a> , <a href="http://habrahabr.ru/blogs/sql/123446/">new Sequence object</a> , <a href="http://habrahabr.ru/blogs/sql/123491/">Offset operator</a> , <a href="http://habrahabr.ru/blogs/sql/123507/">error handling</a> , <a href="http://habrahabr.ru/blogs/sql/123573/">With Result Set construction</a> , <a href="http://habrahabr.ru/blogs/sql/123664/">new in SSMS</a> .</i> </div><p>Source: <a href="https://habr.com/ru/post/123573/">https://habr.com/ru/post/123573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123566/index.html">Skype to SIP Gateway do it yourself</a></li>
<li><a href="../123567/index.html">What does not hide LastPass?</a></li>
<li><a href="../123568/index.html">Behind the wheel of a vacuum cleaner or smart Firefox</a></li>
<li><a href="../123569/index.html">Asynchronous Replication with Oracle Streams</a></li>
<li><a href="../123571/index.html">Amazon Kindle warranty replacement instructions</a></li>
<li><a href="../123574/index.html">Facebook Video Calls - Based on Skype Technology</a></li>
<li><a href="../123575/index.html">An important step in the next generation of computers: Vital Insight Into Spintronics</a></li>
<li><a href="../123580/index.html">Good Modding,% username%!</a></li>
<li><a href="../123581/index.html">PowerPoint haters party created in Switzerland</a></li>
<li><a href="../123582/index.html">Any student of programmer knows this.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
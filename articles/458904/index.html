<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visualizing the number of wins for NBA teams using animated bar charts in R</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For a start, a little introductory information. My name is Vladislav and my acquaintance with R took place in August last year. I decided to study a p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visualizing the number of wins for NBA teams using animated bar charts in R</h1><div class="post__text post__text-html js-mediator-article"><p>  For a start, a little introductory information.  My name is Vladislav and my acquaintance with R took place in August last year.  I decided to study a programming language because of its applied nature.  From childhood I liked to keep sports statistics.  With age, this passion transformed into a desire to somehow analyze these figures and, based on data analysis, to produce, if possible, intelligent thoughts.  The problem is that sport in recent years has swept a wave of data, dozens of companies are competing among themselves, trying to count, describe and shove into the neuron any action of a football player, basketball player, baseball player on the court.  And Excel for analysis is not suitable categorically.  So I decided to study R so that the simplest analysis would not take half a day.  Already in the course of the study, interest was added to programming as such, but this is already lyrics. </p><a name="habracut"></a><br><p>  I want to immediately notice that much of what I write in the future <del>  already been in the simpsons </del>  it was on Habr√© in the article <a href="https://habr.com/ru/company/skillbox/blog/446952/">Create animated histograms with R.</a> This article, in turn, is a translation of the article <a href="https://towardsdatascience.com/create-animated-bar-charts-using-r-31d09e5841da">Create Trending Animated Bar Charts using R</a> with Medium.  Therefore, in order to somehow differ from the above articles, I will try to more fully describe what I am doing, as well as those moments that are not in the original article.  For example, I used the colors of the NBA commands to fill the columns, not the standard <code>ggplot2</code> palette, and the <code>data.table</code> package rather than <code>dplyr</code> in data processing.  The whole thing I have done in the form of a function, so now it is enough just to write the name of the team and the years for which you need to count the number of victories. </p><br><h2 id="dannye">  Data </h2><br><p>  For plotting, I used the data on the number of victories of each of the 30 NBA teams in the last 15 seasons.  They were collected from <a href="https://stats.nba.com/">stats.nba.com</a> using the <strong>NBA Data Retriever</strong> extension, which, through the use of the NBA API, produces csv-files with the necessary statistics.  Here is the complete data from my project <a href="">on Github</a> . </p><br><h2 id="ispolzuemye-biblioteki">  Used libraries </h2><br><pre> <code class="plaintext hljs">library(data.table) library(tidyverse) library(gganimate)</code> </pre> <br><p>  For data processing, I use <code>data.table</code> (simply because I have become acquainted with this package before).  I also load the <code>tidyverse</code> package <code>tidyverse</code> , and not a separate <code>ggplot2</code> so as not to worry if any idea suddenly <code>ggplot2</code> during the analysis that requires additional loading of the package from this set.  In this particular case, you can get by with <code>ggplot2</code> , the other <code>ggplot2</code> packages do not participate.  Well, <code>gganimate</code> sets the graphics in motion. </p><br><h2 id="rabota-s-dannymi">  Work with data </h2><br><p>  First you need to bring the data in order.  In principle, to build graphs, we need 2 of the 79 columns of the table with ‚Äúraw‚Äù data.  You can first select the necessary columns, you can first replace some values.  I went the second way. </p><br><p>  The table in <code>data.table</code> has the form <code>dt[i, j, by]</code> , where by is "responsible" for the grouping of elements.  I will group by the TeamName column.  And there is a snag.  This column displays the names of the teams: Lakers, Celtics, Heat, etc.  But during the period under review (from the 2004/05 season) several teams changed their names: New Orleans Hornets became New Orleans Pelicans, Charlotte Bobcats returned the historical name Charlotte Hornets, and Seattle Supersonics became Oklahoma City Thunder.  This can cause confusion.  The following conversions help to avoid this: </p><br><pre> <code class="plaintext hljs">table1 &lt;- table[TeamCity == "New Orleans" &amp; TeamName == "Hornets", TeamName := "Pelicans"][ TeamCity == "New Orleans/Oklahoma City" &amp; TeamName == "Hornets", TeamName := "Pelicans"][ TeamName == "Bobcats", TeamName := "Hornets"][ TeamName == "SuperSonics", TeamName := "Thunder"]</code> </pre> <br><p>  For this time period, the changes are minimal, but if you expand it, then by TeamName it will be very difficult to group and you will need to use a more reliable column.  In this data, this is TeamID. </p><br><p>  To get started, we get rid of the "extra" information, leaving only those columns that we need to work: </p><br><pre> <code class="plaintext hljs">table1 &lt;- table1[ , .(TeamName, WINS)]</code> </pre> <br><p>  The <code>data.table</code> construct. () Replaces the <code>list</code> function.  A more "classic" choice of columns is <code>table1 &lt;- table1[, c("TeamName", "WINS")]</code> .  After that, the table takes the following form: </p><br><div class="scrollable-table"><table><thead><tr><th>  Teamname </th><th>  WINS </th></tr></thead><tbody><tr><td>  Suns </td><td>  62 </td></tr><tr><td>  Heat </td><td>  59 </td></tr><tr><td>  Spurs </td><td>  59 </td></tr><tr><td>  Pistons </td><td>  54 </td></tr></tbody></table></div><br><p>  For animation for each season separately, this is enough, but to calculate the total number of victories over the selected period, you need to calculate the cumulative amount of victories. </p><br><p> <code>table1 &lt;- table1[, CumWins := cumsum(WINS), by = "TeamName"]</code> </p> <br><p>  Using the <code>cumsum</code> function <code>cumsum</code> we get the numbers we need.  Use: = instead of = allows you to add a new column to the table, I do not overwrite it with a single CumWins column.  <code>by = "TeamName"</code> groups data by team name and the cumulative amount is <code>by = "TeamName"</code> for each of the 30 teams separately. </p><br><p>  Next, I add a column with the year when each season began.  The season in the NBA is from October to May, so it falls on two calendar years.  In the designation of the season, the year of its beginning, i.e.  Season: 2018 on the graph is the season 2018/19 in reality. </p><br><p>  The original table has this data.  The SeasonID column shows the figure as 2 (year of the beginning of the season), for example, 22004. You can remove the first two using the <code>stringr</code> package or the basic functions R, but I went a little different way.  It turned out that I first use this column to specify the necessary seasons, then delete and create a column with dates again.  Extra action. </p><br><p>  I did this as follows: </p><br><p> <code>table1 &lt;- table1[,year := rep(seq(2004, 2018), each = length(unique(table1$TeamName)))]</code> </p> <br><p>  I was "lucky" that for the selected time period the number of teams in the NBA did not change, so I just repeated the numbers from 2004 to 2018 30 times.  Again, if you go down in history, this method will be inconvenient due to the fact that the number of teams in each season will be different, therefore it is preferable to use the option to clear the SeasonID column. </p><br><p>  Then add the cumrank column. </p><br><p> <code>table1 &lt;- table1[, cumrank := frank(-CumWins, ties.method = "random"), by = "year"]</code> </p> <br><p>  It represents the ranking of teams in each season by the number of victories and will be used as the values ‚Äã‚Äãof the X axis. <code>frank</code> a faster <code>data.table</code> analog of the base <code>rank</code> , minus means ranking in descending order (this can also be done with the help of the argument <code>decreasing = TRUE</code> . What order will teams with the same number of wins go, therefore <code>ties.method = "random"</code> . Well, all this is grouped within one year. </p><br><p>  And the last conversion of the table is the addition of the <code>value_rel</code> column. </p><br><p> <code>table1 &lt;- table1[, value_rel := CumWins/CumWins[cumrank==1], by = "year"]</code> </p> <br><p>  This column is the ratio of the number of victories of each team to the highest figure for the year.  The best team has this indicator equal to 1, the rest less, depending on the success of the season. </p><br><p>  After all additions, the table has the following form: </p><br><div class="scrollable-table"><table><thead><tr><th>  Teamname </th><th>  WINS </th><th>  Cumwins </th><th>  year </th><th>  cumrank </th><th>  value_rel </th></tr></thead><tbody><tr><td>  Spurs </td><td>  59 </td><td>  59 </td><td>  2004 </td><td>  3 </td><td>  0.9516129 </td></tr><tr><td>  Spurs </td><td>  63 </td><td>  122 </td><td>  2005 </td><td>  one </td><td>  1.0000000 </td></tr><tr><td>  Spurs </td><td>  58 </td><td>  180 </td><td>  2006 </td><td>  2 </td><td>  0.9729730 </td></tr><tr><td>  Spurs </td><td>  56 </td><td>  236 </td><td>  2007 </td><td>  one </td><td>  1.0000000 </td></tr></tbody></table></div><br><p>  The table shows only one team to clearly show cumulativeness.  All these actions are done, as in the change of names, a cascade of square brackets </p><br><pre> <code class="plaintext hljs">table1 &lt;- table1[ ,.(TeamName, WINS)][ , CumWins := cumsum(WINS), by = "TeamName"][ ,year := rep(seq(2004, 2018), each = length(unique(table1$TeamName)))][ , cumrank := frank(-CumWins, ties.method = "random"), by = "year"][ , value_rel := CumWins/CumWins[cumrank==1], by = "year"]</code> </pre> <br><h2 id="izmenenie-zalivki-stolbcov-so-standartnoy-na-cveta-komand">  Change column fill from standard to command colors. </h2><br><p>  You can immediately go to the construction of graphs, but there is still, I think, one important point: the color of the columns on the graph.  You can leave the standard <code>ggplot2</code> palette, but this is a bad option.  Firstly, it seems to me that she is not beautiful.  And secondly, it makes it difficult to find a team on a chart.  For NBA fans, each team is associated with a specific color: Boston is green, Chicago is red, Sacramento is purple, and so on.  Therefore, using the color of a command in a column fill helps to identify it faster, despite the abundance of blue and red. </p><br><p>  To do this, create a table <code>table_color</code> with the name of the team and its main color.  Colors are taken from <a href="https://teamcolorcodes.com/">teamcolorcodes.com</a> . </p><br><div class="scrollable-table"><table><thead><tr><th>  Teamname </th><th>  TEAM_color </th></tr></thead><tbody><tr><td>  Hawks </td><td>  # E03A3E </td></tr><tr><td>  Celtics </td><td>  # 007A33 </td></tr><tr><td>  Nets </td><td>  # 000000 </td></tr></tbody></table></div><br><p>  With the color table you need to do another manipulation.  Because  When constructing a graph, factors are used, then the order of commands changes.  First on the list will be Philadelphia 76, as the only owner of the "digital" name, and then according to the alphabet.  So we need to arrange the colors in the same order, and then extract the vector containing them from the table.  I did this as follows: </p><br><pre> <code class="plaintext hljs"> table_color &lt;- table_color[order(TeamName)] cols &lt;- table_color[, "TEAM_color"]</code> </pre> <br><h2 id="postroenie-grafika">  Plotting </h2><br><p>  We really build only one graph that contains all 450 (15 seasons * 30 teams) victory indicators, and then we ‚Äúdivide‚Äù it by the necessary variable (in our case by year) using the functions from the <code>gganimate</code> package. </p><br><pre> <code class="plaintext hljs">gg &lt;- ggplot(table1, aes(cumrank, group = TeamName, fill = as.factor(TeamName), color = as.factor(TeamName))) + geom_tile(aes(y = CumWins/2, height = CumWins, width = 0.7), color = NA, alpha = 0.8)</code> </pre> <br><p>  First we create a graphic object using the <code>ggplot</code> function.  In the argument <code>aes</code> specify how the variables from the table will be displayed on the graph.  We group them by TeamName, <code>fill</code> and <code>color</code> will be responsible for the color of the columns. </p><br><p>  True columns to call it is not entirely true.  With <code>geom_tile</code> we "divide" the data on the graph into rectangles.  Here is an example of this type of diagram: <br><img src="https://habrastorage.org/getpro/habr/post_images/210/405/916/2104059165b8000275951025c2020b5b.jpg"><br>  You can see how the graph is "divided" into squares (they are obtained from rectangles using the <code>coord_equal()</code> layer), three in each column.  But thanks to the <code>width</code> argument less than one, our tile takes the form of bars. </p><br><pre> <code class="plaintext hljs"> geom_text(aes(y = 0, label = paste(TeamName, " ")), vjust = 0.2, hjust = 1, size = 6) + geom_text(aes(y = CumWins, label = paste0(" ",round(CumWins))), hjust = 0, size = 7) + coord_flip(clip = "off", expand = FALSE) + scale_fill_manual(values = cols) + scale_color_manual(values = cols) + scale_y_continuous(labels = scales::comma) + scale_x_reverse() + guides(color = FALSE, fill = FALSE) +</code> </pre> <br><p>  Next, I add two signatures using <code>geom_text</code> : team name and number of wins.  <code>coord_flip</code> swaps the axes, <code>scale_fill_manual</code> and <code>scale_color_manual</code> changes the color of the columns, <code>scale_x_reverse</code> "expands" the <code>scale_x_reverse</code> axis. Notice that we take that color from the previously created vector <code>cols</code> . </p><br><p>  The <code>theme</code> layer contains parameters for customizing the display of the graph.  Here it is indicated how the headers and signatures of the axles should be displayed (in any way, what <code>element_blank</code> tells us in the right-hand side of the equation).  We remove the legend, the background, the frame, the grid lines along the Y axis. <code>plot.title</code> arguments <code>plot.title</code> , <code>plot.subtitle</code> , <code>plot.caption</code> we set the display options for the title, subtitle and caption of the graph.  For more details on the value of all parameters, see <a href="https://ggplot2.tidyverse.org/reference/theme.html">gglot2</a> </p><br><pre> <code class="plaintext hljs">theme(axis.line=element_blank(), axis.text.x=element_blank(), axis.text.y=element_blank(), axis.ticks=element_blank(), axis.title.x=element_blank(), axis.title.y=element_blank(), legend.position="none", panel.background=element_blank(), panel.border=element_blank(), panel.grid.major=element_blank(), panel.grid.minor=element_blank(), panel.grid.major.x = element_line( size=.1, color="grey" ), panel.grid.minor.x = element_line( size=.1, color="grey" ), plot.title=element_text(size=25, hjust=0.5, face="bold", colour="black", vjust=-1), plot.subtitle = element_text(size = 15), plot.caption =element_text(size=15, hjust=0.5, color="black"), plot.background=element_blank(), plot.margin = margin(2,2, 2, 4, "cm"))</code> </pre> <br><h2 id="sozdanie-animacii">  Create animation </h2><br><p>  I will not dwell on the use of the <code>transition_states</code> function, this part is identical to my earlier publication on Habr√©.  As for <code>labs</code> it creates a headline, subtitle, and a schedule signature.  Using <code>{closest_state}</code> allows you to display on the chart each specific year, the columns from which we are currently seeing. </p><br><pre> <code class="plaintext hljs"> anim &lt;- gg + transition_states(year, transition_length = 4, state_length = 1) + view_follow(fixed_x = TRUE) + labs(title = "Cumulative Wins by teams in seasons", subtitle = "Season: {closest_state}", caption = "Telegram: @NBAatlantic, Twitter: @vshufiskiy\n Data sourse: stats.nba.com")</code> </pre> <br><h2 id="funkciya-nba_cumulative_wins-dlya-sozdaniya-grafikov">  The <code>nba_cumulative_wins</code> function for creating graphs. </h2><br><p>  Writing functions simplifies and speeds up the process of getting the result if you need to use the code more than once.  Usually, a function in R has the following form: </p><br><pre> <code class="plaintext hljs">_ &lt;- function( ) { _ }</code> </pre> <br><p>  First of all, it is worth understanding what parameters you want to change with the help of a function, its arguments will depend on it.  The first argument is the name of the data table that is being input.  This allows you to rename it if such a desire arises, without changing anything in the function itself.  I also want the chart to display any number of commands: from one (which is meaningless) to 30 (no more).  I also want to be able to consider any temporary periods within the 15 years for which I have data.  All this is implemented in this form of function: </p><br><pre> <code class="plaintext hljs">nba_cumulative_wins &lt;- function(table, elements, first_season, last_season){ ... }</code> </pre> <br><p>  where <code>table</code> is the name of the table with input data <br>  <code>elements</code> - the names of the commands that should be displayed on the chart <br>  <code>first_season</code> - the first season that will be displayed on the chart <br>  <code>last_season</code> - the last season to be displayed on the chart. </p><br><p>  If the argument is very often used with some particular value, then you can set it by default.  Then, if it is omitted among the function arguments, this value will be substituted.  For example, if you register </p><br><p> <code>nba_cumulative_wins &lt;- function(table, elements, first_season, last_season = 2018)</code> </p> <br><p>  then the graphics will be built up to the season 2018/19, unless otherwise indicated. </p><br><h2 id="rabota-s-argumentami-elements-first_season-last_season">  Working with arguments <code>elements</code> , <code>first_season</code> , <code>last_season</code> </h2><br><p>  With the <code>elements</code> argument, we can specify the name of those commands that we want to see on the chart.  This is very convenient when there are 2 or 3 such teams, but if we want to display the entire league, we will have to write <code>elements = c()</code> and in brackets the names of all 30 teams. </p><br><p>  So I decided to "split" the input values ‚Äã‚Äãfor the <code>elements</code> argument into several groups. <br>  The <code>nba_cumulative_wins</code> function can build graphs for individual teams, divisions, conferences, or the NBA as a whole.  For this, I used the following construction: </p><br><pre> <code class="plaintext hljs"> select_teams &lt;- unique(table1$TeamName) select_div &lt;- unique(table1$Division) select_conf &lt;- unique(table1$Conference) select_nba &lt;- "NBA" table1 &lt;- if(elements %in% select_teams){ table1[TeamName %in% elements] } else if (elements %in% select_div){ table1[Division %in% elements] } else if(elements %in% select_conf){ table1[Conference %in% elements] } else if(elements == "NBA"){ table1 } else { NULL }</code> </pre> <br><p>  The <code>select_</code> character vectors contain the names of all 30 teams, 6 divisions, 2 conferences and the NBA, and the <code>unique</code> function leaves only one unique name, instead of 15 (by the number of years in the data). </p><br><p>  Next, using the <code>if...else</code> , the <code>elements</code> argument entered is checked to one of the classes ( <code>%in%</code> used to determine whether the element belongs to the vector), and the table with the data is modified accordingly.  Now, if I want to see the results of teams playing in the Southwest Division instead of </p><br><p> <code>elements = c("Mavericks", "Spurs", "Rockets", "Grillies", "Pelicans")</code> </p> <br><p>  it is enough for me to enter </p><br><p>  <code>elements = "Southwest"</code> , which is much faster and more convenient. </p><br><p>  Due to the possibility of choosing the seasons, work with dates also changes.  At the very beginning the line is added: </p><br><pre> <code class="plaintext hljs">table1 &lt;- table1[SeasonID &gt;= as.numeric(paste(2, first_season, sep = "")) &amp; SeasonID &lt;= as.numeric(paste(2, last_season, sep = ""))]</code> </pre> <br><p>  So I leave in the table only those rows that fall into our chosen time interval.  The code for creating the <code>year</code> column is also changed.  Now it looks like this: </p><br><pre> <code class="plaintext hljs">table1 &lt;- table1[ ,year := rep(seq(first_season, last_season), each = length(unique(table1$TeamName)))]</code> </pre> <br><p>  In connection with the grouping of elements, the procedure for obtaining the desired colors is complicated.  The fact is that in the table <code>table_color</code> only the names of the teams.  Therefore, we need to "expand" our cuts back.  To do this, use the <code>if...else</code> construct again. </p><br><pre> <code class="plaintext hljs"> elements1 &lt;- if (elements == "NBA"){ c("Hawks", "Celtics", "Nets", "Hornets", "Bulls", "Cavaliers", "Mavericks", "Nuggets", "Pistons", "Warriors", "Rockets", "Pacers", "Clippers", "Lakers", "Grizzlies", "Heat", "Bucks", "Timberwolves", "Pelicans", "Knicks", "Thunder", "Magic", "76ers", "Suns", "Trail Blazers","Kings", "Spurs", "Raptors", "Jazz", "Wizards") } else if (elements == "West") { c("Mavericks","Nuggets", "Warriors", "Rockets", "Clippers", "Lakers", "Grizzlies","Timberwolves", "Pelicans", "Thunder", "Suns", "Trail Blazers","Kings", "Spurs", "Jazz") } else if (elements == "East") { c("Hawks", "Celtics", "Nets", "Hornets", "Bulls", "Cavaliers","Pistons", "Pacers", "Heat", "Bucks", "Knicks", "Magic", "76ers", "Raptors", "Wizards") } else if (elements == "Pacific") { c("Warriors", "Clippers", "Lakers", "Suns", "Kings") } else if (elements == "Southeast") { c("Magic", "Hornets", "Heat", "Hawks", "Wizards") } else if (elements == "Southwest") { c("Mavericks", "Grizzlies", "Pelicans", "Rockets", "Spurs") } else if (elements == "Central") { c("Bucks", "Pacers", "Pistons", "Bulls", "Cavaliers") } else if (elements == "Atlantic") { c("Knicks", "Nets", "Celtics", "Raptors", "76ers") } else if (elements == "Northwest") { c("Nuggets", "Trail Blazers", "Jazz", "Thunder", "Suns") } else { elements }</code> </pre> <br><p>  Next we create a table with the names of the commands that we need, we connect this table with <code>table_color</code> using the <code>inner_join</code> function from the <code>dplyr</code> package.  <code>inner_join</code> includes only observations that are the same in both tables. </p><br><pre> <code class="plaintext hljs"> table_elements1 &lt;- data.table(TeamName = elements1) table_color &lt;- table_color[order(TeamName)] inner_table_color &lt;- inner_join(table_color, table_elements1) cols &lt;- inner_table_color[, "TEAM_color"]</code> </pre> <br><p>  The function changes the spelling of the title and subtitle.  They make this look: </p><br><pre> <code class="plaintext hljs">anim &lt;- gg + transition_states(year, transition_length = 4, state_length = 1) + view_follow(fixed_x = TRUE) + labs(title = paste("Cumulative Wins by teams in seasons", first_season, "-", last_season, sep = " "), subtitle = paste(if (elements %in% select_div ){ paste(elements, "Division", sep = " ") } else if (elements %in% select_conf ){ paste("Conference", elements, sep = " ") }, "Season: {closest_state}", sep = " "), caption = "Telegram: @NBAatlantic, Twitter: @vshufiskiy\nData sourse: stats.nba.com")</code> </pre> <br><h2 id="rendering">  Rendering </h2><br><p>  Further, all this is visualized. </p><br><pre> <code class="plaintext hljs">animate(anim, nframes = (last_season - first_season + 1) * (length(unique(table1$TeamName)) + 20), fps = 20, width = 1200, height = 1000, renderer = gifski_renderer(paste(elements[1], "cumwins.gif", sep = "_")))</code> </pre> <br><p>  I picked up the number in <code>nframes</code> empirically so that the speed increases / decreases depending on the number of selected commands. </p><br><h2 id="grafik">  Schedule </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e15/803/11d/e1580311d19d5f814b201c32237a3ed5.gif"></p><br><p>  I hope my post was interesting.  Project <a href="https://github.com/shufinskiy/nba_cumulative_wins">ID</a> on <a href="https://github.com/shufinskiy/nba_cumulative_wins">Github</a> . </p><br><p>  If you are interested in the sports component of these visualizations, you can visit my blog on sports.ru "On both sides of the Atlantic" </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/458904/">https://habr.com/ru/post/458904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458894/index.html">Typical people and the networks in which they inhabit</a></li>
<li><a href="../458896/index.html">Functional JavaScript: What are higher order functions and why are they needed?</a></li>
<li><a href="../4589/index.html">Packaging zune</a></li>
<li><a href="../458900/index.html">Console cartridges as modems</a></li>
<li><a href="../458902/index.html">5 common mistakes novice programmers in Python</a></li>
<li><a href="../458906/index.html">[Ekaterinburg, Announcement] Flutterton - workshop about the development on Flutter</a></li>
<li><a href="../458908/index.html">Scanning documents online</a></li>
<li><a href="../45891/index.html">Overview of MQ (Messages queue) for use in projects on PHP. Part 2</a></li>
<li><a href="../458910/index.html">Benchmarking PostgreSQL with large Linux pages</a></li>
<li><a href="../458912/index.html">Migrate to Zimbra with imapsync</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
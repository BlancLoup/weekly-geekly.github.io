<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to Gestures</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="or interpretation of gestures :) 

  

 Now we are working on a military example with gestures in the Android environment. The application will be a c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to Gestures</h1><div class="post__text post__text-html js-mediator-article">  <i>or interpretation of gestures :)</i> <br><br> <a href="http://img-fotki.yandex.ru/get/4527/11245482.2/0_63c5e_eb3a19bf_orig"><img src="https://habrastorage.org/getpro/habr/post_images/656/d53/ee7/656d53ee79fc263568d65fc1490a1fd5.png"></a> <br><br>  Now we are working on a military example with gestures in the Android environment.  The application will be a client of the <a href="http://apod.nasa.gov/apod/">Astronomy</a> website <a href="http://apod.nasa.gov/apod/">Picture of the Day</a> by NASA.  Every day on this site guys post some wonderful picture related to astronomy.  With gestures we will walk forward / backward and call the date selection dialog.  And to make it even more interesting, we will write it for Honeycomb. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The article consists of two parts: the first one will show how to create gestures using the Gestures Builder application and download them from the emulator to a separate binary file.  In the second part, we will load it into our application and start using it. <br><a name="habracut"></a><br><h2>  Making gestures </h2><br>  The <a href="http://developer.android.com/reference/android/gesture/package-summary.html">android.gesture</a> package appeared in API version 1.6 and is designed to significantly simplify the processing of gestures and reduce the amount of code that programmers will write.  At the same time, the pre-installed Gestures Builder application appeared in the emulator version 1.6 and higher, with its help we can create a set of prepared gestures and add them as a binary resource to our application.  To do this, we will make an emulator with a built-in image of an SD card, where the gesture file will be saved (without the Gestures Builder card, it will say that it has nowhere to record gestures) <br><br>  <b>Step 1.</b> Create an img SD card image using <i>mksdcard</i> .  This utility can be found in the folder &lt;path where android-sdk is installed&gt; \ tools.  The gesture file will weigh a little, but the android emulator has a limit on the minimum card size of something around 8-9 megabytes.  Therefore, we will create with a margin and some even size, for example, 64 MB.  We write: <br><br>  <i>mksdcard -l mySdCard 64M gestures.img</i> <br><br>  <b>Step 2.</b> Make the emulator run it with the gestures.img image.  We act as in the picture: <br><br><img src="https://habrastorage.org/storage/f69b38d5/fe142668/7cf802c5/55f418ff.png"><br><br>  To start the emulator with the image, go to &lt;path where android-sdk is installed&gt; \ tools and execute: <br><br>  <i>emulator -avd avd30 -sdcard gestures.img</i> <br><br>  <b>Step 3.</b> The emulator is running and we need to make our gestures.  To do this, open Gestures Builder, click Add gesture and the gesture editor opens in front of us.  Let's draw a gesture from left to right while holding down the left mouse button and at the top give it the name - <i>prev</i> .  Done  Then, by analogy (in the other direction), we create the <i>next</i> gesture and, as the last, write something similar to Latin D and call it <i>date</i> .  In the pictures below - how we do it (clickable): <br><br> <a href=""><img src="https://habrastorage.org/storage/f2d9bf7c/78521e1f/e83b27b7/c221b677.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/storage/2ff6f55e/c2c26c13/c7c01e4a/fdc6e0c9.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/storage/9a8a62e4/14bcf756/5f0b3d3e/c1b34448.png"></a> <br><br>  <b>Step 4.</b> We run a binary resource with gestures from the running emulator by running the tools directory: <br><br>  <i>adb pull / sdcard / gestures gestures</i> <br><br>  After which the file gestures should appear.  We will put it in your project along the path res \ raw \ gestures. <br><br><h2>  Using gestures </h2><br>  Our application will be called ApodGestures.  In the second part I will touch only those related to gestures.  You can take the entire program code on <a href="http://code.google.com/p/apod-gestures/">code.google.com</a> from the Mercurial repository, either run the <i>hg clone <a href="https://pyJIoH%40apod-gestures.googlecode.com/hg/">pyJIoH@apod-gestures.googlecode.com/hg</a> apod-gestures</i> console, or download the archive in the <a href="http://code.google.com/p/apod-gestures/downloads/list">Downloads</a> tab. <br><br>  ApodGestures will connect to the <a href="http://apod.nasa.gov/apod/">APOD</a> site, download the astronomical image in a separate stream and upload it to ImageView.  With the help of gestures, we will make the navigation: forward, backward and a dialog for choosing any date. <br><br>  In principle, there are no special features from Honeycomb here, therefore, having reduced the version, we will run the application on the phones without any problems.  Restrictions rather imposed Honeycomb himself, because  From this version on, the policy of what can be done in the main thread has been tightened.  Here I encountered an example of NetworkOnMainThreadException when working in the main HttpClient thread.  You can <a href="http://android-developers.blogspot.com/2010/12/new-gingerbread-api-strictmode.html">read here</a> . <br><br>  Having created a project, we put our binary resource along the path <i>apod-gestures \ res \ raw \ gestures</i> . <br><br>  The imageView in the xml layout will be placed on android.gesture.GestureOverlayView, which is a transparent overlay that can detect gesture input.  The code will be: <br><br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.gesture.GestureOverlayView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/gestures"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_weight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/ImageView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fill_parent"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/button_select_date"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center_horizontal|top"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"12dip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#AA000000"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#ffffffff"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Feb 10, 2011"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">android.gesture.GestureOverlayView</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Next, add a field to ApodGestures activity: <font color="#800050">private</font> GestureLibrary mGestureLib; <br>  We will load our gestures from the raw resource into it: <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.main); mGestureLib = GestureLibraries.fromRawResource(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, R.raw.gestures); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!mGestureLib.load()) { finish(); } GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures); gestures.addOnGesturePerformedListener(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); refreshActivity(); }</code> </pre> <br>  To start tracking the gestures entered, we implement our activity OnGesturePerformedListener and implement the onGesturePerformed method: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onGesturePerformed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GestureOverlayView overlay, Gesture gesture)</span></span></span><span class="hljs-function"> </span></span>{ ArrayList&lt;Prediction&gt; predictions = mGestureLib.recognize(gesture); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (predictions.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Prediction prediction = predictions.get(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prediction.score &gt; <span class="hljs-number"><span class="hljs-number">1.0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prediction.name.equals(Gestures.prev)) showPrevDay(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prediction.name.equals(Gestures.next)) showNextDay(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (prediction.name.equals(Gestures.date)) showSelectDateDialog(); } } }</code> </pre> <br>  As you can see, the name we entered in the Gestures Builder application is a gesture identifier.  Gestures is our class with constants where names are clogged fixed.  If someone is strained by fat yellow lines, we can set any color in xml for GestureOverlayView, properties android: gestureColor and android: uncertainGestureColor.  UncertainGestureColor is a color drawn on the view when there is no certainty that this is a gesture. <br><br>  You can make the colors gray and transparent: <br><pre> <code class="xml hljs">android:gestureColor="#AA000000" android:uncertainGestureColor="#AA000000"&gt;</code> </pre> <br>  An example of what happened in the end (still clickable). <br><br> <a href="http://img-fotki.yandex.ru/get/4426/11245482.2/0_63c60_fe65f8fc_orig"><img src="https://habrastorage.org/getpro/habr/post_images/74f/f90/e48/74ff90e489840b8a8c5a265d143337f9.png"></a> <br><br> <a href="http://img-fotki.yandex.ru/get/4527/11245482.3/0_63c61_70f5340a_orig"><img src="https://habrastorage.org/getpro/habr/post_images/1aa/ab4/753/1aaab47532a220ad03b43b1b63e1ccb6.png"></a> <br><br> <a href="http://img-fotki.yandex.ru/get/4424/11245482.3/0_63c62_5e38cad5_orig"><img src="https://habrastorage.org/getpro/habr/post_images/fcb/57c/b7e/fcb57cb7ea05233ee167bf27b8225546.png"></a> <br><br> <a href="http://img-fotki.yandex.ru/get/4527/11245482.3/0_63c63_8df5613f_orig"><img src="https://habrastorage.org/getpro/habr/post_images/2c9/7ab/3db/2c97ab3db5d11589ca884d70060d6d33.png"></a> <br><br> <a href="http://img-fotki.yandex.ru/get/4527/11245482.3/0_63c64_8ffc0ad8_orig"><img src="https://habrastorage.org/getpro/habr/post_images/153/cb5/70e/153cb570e7b9b295bf341fdeb54529dd.png"></a> <br><br>  Hope you enjoyed it. <br><br>  UPD.  Added apk file to the <a href="http://code.google.com/p/apod-gestures/downloads/list">Download</a> tab.  Installation requires Android 3.0 and higher. </div><p>Source: <a href="https://habr.com/ru/post/120016/">https://habr.com/ru/post/120016/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120009/index.html">How to become a system administrator - a guide for beginners (part 4)</a></li>
<li><a href="../120010/index.html">How often do you mow?</a></li>
<li><a href="../120013/index.html">Commentary of the day: Server Spring</a></li>
<li><a href="../120014/index.html">The device is an Internet radio station</a></li>
<li><a href="../120015/index.html">Namecoin: secure DNS based on P2P computing</a></li>
<li><a href="../120017/index.html">Traction with paypal (or problems after changing the name)</a></li>
<li><a href="../120018/index.html">Transfer contacts to wp7</a></li>
<li><a href="../120019/index.html">How to change MSI boards on Cougar Point chipsets in Ukraine</a></li>
<li><a href="../120020/index.html">Three months in Spain for your startup</a></li>
<li><a href="../120022/index.html">Robots, Spies and Entropy at Talk to Me</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
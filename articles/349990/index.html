<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to use response compression in ASP.Net Core</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Take advantage of the ASP.Net Core Response Compression Middleware component to reduce bandwidth requirements and increase the responsiveness of your ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to use response compression in ASP.Net Core</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/4d/_o/gb/4d_ogbg5yhlstnnkpuatng2___i.jpeg"></div><br>  Take advantage of the ASP.Net Core Response Compression Middleware component to reduce bandwidth requirements and increase the responsiveness of your applications. <br><a name="habracut"></a><br>  ASP.Net Core is an open, cross-platform and modular environment for creating high-performance web applications.  You can run ASP.Net Core applications on Windows, Linux and even MacOS.  Fully modern web infrastructure, ASP.Net Core has built-in support for compressing responses, allowing you to reduce the size of responses and reduce response time.  In this article, we will look at how response compression works and how we can use the intermediate processing component to compress responses in ASP.Net Core. <br><br>  Compression is an easy way to reduce network traffic and increase the speed of data exchange between web server resources and clients.  Gzip and Deflate are popular algorithms that are available to achieve compression, and most modern web browsers support response compression.  Intermediate processing to compress ASP.Net Core responses by default uses Gzip compression. <br><br>  Notice that the application pipeline in ASP.Net Core contains a number of request delegates that are called sequentially.  We will use this to implement query compression.  The intermediate processing pipeline is configured using the <code>Configure</code> method in the <code>Startup.cs</code> file.  Here you can combine your ASP.Net Core pipelines.  We will look at this further. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Creating an ASP.Net Core Application </h2><br>  Assuming that you are using Visual Studio Community Edition 2017 and .Net Core is already installed, follow these steps to create the first ASP.Net Core application in Visual Studio. <br><br><ol><li>  In the Visual Studio IDE, click File -&gt; New -&gt; Project. </li><li>  Select "ASP.Net Core Web Application (.Net Core)" from the list of templates. </li><li>  Select Web Application. </li><li>  Enter the application name and click OK. </li><li>  In the "New ASP.NET Core Web Application" window - select ".Net Core and ASP.Net Core 2.0." </li><li>  Then select the ‚ÄúWeb API‚Äù template, uncheck the ‚ÄúEnable Docker Support‚Äù checkbox, and click OK. </li></ol><br>  Now that you have created the ASP.Net Core project, install the <code>ResponseCompression</code> package through the NuGet package manager to enable Gzip compression in the newly created ASP.Net Core project. <br><br><pre> <code class="bash hljs">&gt; Install-Package Microsoft.AspNetCore.ResponseCompression -Version 2.0.1</code> </pre> <br>  At the time of this writing, the latest stable version of this package is 2.0.1. <br><br><h2>  Configure response compression in ASP.Net Core </h2><br>  After installing the <code>ResponseCompression</code> package, the next step is to configure it.  To do this, you will need to edit the <code>Startup.cs</code> file and enable compression using the <code>ConfigureServices</code> and <code>Configure</code> methods.  The <code>ConfigureServices</code> method is used to add services to the container, and the <code>Configure</code> method is used to configure the HTTP request pipeline.  Note that both methods run automatically at run time. <br><br>  Here's how to add a compression response in the <code>ConfigureServices</code> method of the <code>Startup.cs</code> file. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureServices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IServiceCollection services)</span></span></span><span class="hljs-function"> </span></span>{ services.AddResponseCompression(); services.AddMvc(); }</code> </pre> <br>  The following code fragment illustrates the <code>Configure</code> method.  Here we have added intermediate processing for compression to the pipeline before another processing. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IApplicationBuilder app, IHostingEnvironment env)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (env.IsDevelopment()) { app.UseDeveloperExceptionPage(); } app.UseResponseCompression(); app.UseMvc(); }</code> </pre> <br><h2>  Implementing a controller in ASP.Net Core </h2><br>  Now that the response compression has been set in the project and configured, let's implement the controller to demonstrate the response compression.  To do this, select the Controllers folder of your project and click "Add -&gt; Controller".  Select the API Controller - Empty template from the list of templates displayed in the Add Scaffold window, and enter a name for the controller when prompted.  Then replace the default code with the following. <br><br><pre> <code class="cpp hljs">[Produces(‚Äúapplication/json‚Äù)] [Route(‚Äúapi/Default‚Äù)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultController</span></span></span><span class="hljs-class"> :</span></span> Controller { <span class="hljs-comment"><span class="hljs-comment">// GET: api/Default [HttpGet] public List&lt;Message&gt; Get() { List&lt;Message&gt; lst = new List&lt;Message&gt;(); for(int index=0; index &lt;100; index++) { Message message = new Message(); message.Text = ‚ÄúThis is a text message.‚Äù; lst.Add(message); } return lst; } }</span></span></code> </pre> <br>  The <code>Message</code> class contains only one string property. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Message</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Text { get; <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>; } }</code> </pre> <br>  After performing this method, you can see that the size of the compressed response is 0.091 KB.  When compression was turned off, the response size was 3.419 KB.  To disable response compression, you can simply comment out the relevant lines in the Startup.cs file. <br><br>  In the <code>ConfigureServices</code> method: <br><br> <code>//services.AddResponseCompression();</code> <br> <br>  In the <code>Configure</code> method: <br><br> <code>//app.UseResponseCompression();</code> <br> <br>  In order for the response compression to work, the client must inform the server about its capabilities by sending an <code>Accept-Encoding</code> header with the request.  The server, in turn, must include this header in a compressed response in order to inform the client that the response has been compressed. <br><br>  Please note that although compression of responses in ASP.Net Core is flexible, easy to configure and easy to use, it is comparatively slower than IIS compression.  For more on compressing a response in ASP.Net Core, see the <a href="https://docs.microsoft.com/en-us/aspnet/core/performance/response-compression%3Ftabs%3Daspnetcore2x">Microsoft ASP.NET Core</a> documentation. </div><p>Source: <a href="https://habr.com/ru/post/349990/">https://habr.com/ru/post/349990/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349978/index.html">Wrong understanding of the principle of DRY</a></li>
<li><a href="../349980/index.html">Benjamin Franklin method for reading programming books</a></li>
<li><a href="../349982/index.html">The dark side of the serverless architecture or the complexity of estimating the real cost of serverless computing</a></li>
<li><a href="../349986/index.html">Asynchronous HTTP requests in C ++: incoming through RESTinio, outgoing through libcurl. Part 3</a></li>
<li><a href="../349988/index.html">Dot wow effects: magic with simple words</a></li>
<li><a href="../349992/index.html">Wi-Fi in law</a></li>
<li><a href="../349994/index.html">Fear of public speaking</a></li>
<li><a href="../349996/index.html">Binary ternary bit magic</a></li>
<li><a href="../349998/index.html">Secure home network: create an isolated segment for guests</a></li>
<li><a href="../350002/index.html">Two models are better than one. Experience Yandex.Translate</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
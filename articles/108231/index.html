<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I collect ugly from programmers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dear fellow programmers, I propose to share in the comments examples of errors that you think can be found in the program at the stage of its writing....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I collect ugly from programmers</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/7bf/de8/2ba/7bfde82ba19c473c19e27d434ec70c27.png">  Dear fellow programmers, I propose to share in the comments examples of errors that you think can be found in the program at the stage of its writing.  Surely everyone had situations when correcting a bloop after an hour of debugging, you sighed "oh, so what did the compiler not give me a warning here?" <br><br>  I am primarily interested in the patterns of errors made in C ++ programs.  But I deliberately did not put this post in the "C ++" section.  Give examples of errors from other languages.  Often considering an error, you can come up with an analogue in another language. <br><br>  I need errors to create a new, unique set of rules for diagnosing errors of a general type.  Rules that are really relevant, which will find errors not in abstract applications, but in sensations given to us.  It is not interesting to look for trigraphs that were randomly overlooked in the text.  I have never seen an error related to the trigraph.  But typos, where str.empty () is written to clean the string instead of str.clear (), is full.  For example, I wrote about such an example <a href="http://www.viva64.com/go.php%3Furl%3D418">here</a> .  And because such errors are not existing tools!  Therefore, we are following the path of creating the new, and not repeating the old. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now I will try to clarify what kind of mistakes I want to hear and how. <br><br><a name="habracut"></a><br><br>  I'll start with an example of the most banal typos. <br><pre>  double a;
 a = 1.536; </pre><br>  Instead, the point is randomly written comma.  As a result, this line is equivalent to "(a = 1), 536;"  and the variable 'a' will take the value 1. The compiler will naturally keep silent (at least Visual C ++). <br><br>  I am sure many people are already preparing a comment on the topic in their head that only a schoolboy can make such a mistake.  In vain.  No one is immune from such errors.  This situation was described by one of the best programmers I know.  This is <a href="http://www.viva64.com/go.php%3Furl%3D416">Dmitry Vyukov</a> , holder of the title "Intel Programmer, Intel Black Belt".  Author of many articles and project <a href="http://www.viva64.com/go.php%3Furl%3D194">Relacy Race Detector</a> . <br><br>  Here is his <a href="http://www.viva64.com/go.php%3Furl%3D417">message</a> on the RSDN site about this very comma.  Naturally, I could not help but pay attention to this post.  The error is very real, relevant and can be detected by static analysis of the source code.  Diagnostics of such errors was implemented by me in <a href="http://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> . <br><br>  Let's go further.  It is very easy to forget that std :: remove () does not remove elements, but only shifts them.  And as a result, should be used in conjunction with erase () functions.  Elena Sagalaeva (the author of the ‚ÄúAlena C ++‚Äù blog) made a good note about this: " <a href="http://www.viva64.com/go.php%3Furl%3D419">std :: remove and std :: remove_if don't actually delete anything</a> ." <br><br>  This is also a common, beautiful, up-to-date, high-level error.  I like her very much.  In a real application, it may look like this (ZThreads library): <br><br><pre>  void unregisterThread () {
   Guard &lt;TaskQueue&gt; g (_taskQueue);
   std :: remove (_threads.begin (), _threads.end (), ThreadImpl :: current ());
 } </pre><br>  This fragment was found by PVS-Studio, after the implementation of the corresponding check created after reading Alena‚Äôs article. <br><br>  I came up with the following rule myself, based on personal experience.  It happened, and even now it happens that I make typos and use the wrong variable name.  Some such errors can be detected automatically.  For example, it is suspicious when one variable is assigned a different value.  After the implementation of the corresponding diagnostics using PVS-Studio, we immediately discovered, for example, such an error in the Win32 ++ library: <br><br><pre>  class CSize: public SIZE
 {
   ...
   CSize (POINT pt) {cx = pt.x;  cx = pt.y;  } </pre><br>  I will give an example of another discussion, from which you can make a rule for static analysis.  Here people could not understand for a long time that it is impossible to work with an array of derived classes through a pointer to the base class.  And as is usually the case, they blamed the ‚Äúbuggy compiler‚Äù.  In a discussion, the discussion of the delete operator can be confusing, so I‚Äôll give my example: <br><br><pre>  class A
 {
   int a;
 };

 class B: public A
 {
   int b;
 };

 void FOO ()
 {
   B array [5];
   A * p = array;
   p [3] .a = 1;  // We do not understand where to write
 } </pre><br>  The size of classes A and B is different, and, therefore, array [i] and p [i] are addressed to different memory locations. <br><br>  This is a very good example where static analysis can save a lot of nerve cells and time.  The rule for diagnosing such errors in PVS-Studio has not yet been made, but it is written into the development plan. <br><br>  I described various examples of how, based on discussions in forums, articles, personal experience, it is possible to make interesting rules for analysis.  I will be glad if you share your examples or links to similar examples. <br><br>  PS <br><br>  If the opportunity to comment on the article is not available to you, then please write me on the karpov [@] viva64.com box or via the <a href="http://www.viva64.com/ru/about-feedback/">contact form</a> . </div><p>Source: <a href="https://habr.com/ru/post/108231/">https://habr.com/ru/post/108231/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108223/index.html">Play a random file? One line on bash</a></li>
<li><a href="../108227/index.html">Interview with Facebook.com founder Mark Zuckerberg</a></li>
<li><a href="../108228/index.html">MeeGo 2010: plans, sensors and super-TV for six months</a></li>
<li><a href="../108229/index.html">Core Data Database Prefilling</a></li>
<li><a href="../108230/index.html">10 reasons to make friends with HootSuite</a></li>
<li><a href="../108233/index.html">Meeting poSEEDelki in Yandex</a></li>
<li><a href="../108236/index.html">Java Core Task</a></li>
<li><a href="../108238/index.html">CodeRush custom test templates. Testing the order of method calls</a></li>
<li><a href="../108239/index.html">HTC Desire Z: phone, keyboard, root access</a></li>
<li><a href="../108241/index.html">You must be kidding, Mr. Dahl, or why Node.js is the crown of web server evolution</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
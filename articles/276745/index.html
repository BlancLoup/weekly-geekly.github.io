<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Compare prices in online bookstores using python, pandas and matplotlib</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will try to find the cheapest and most expensive online book store. 
 We will compare paper books that are in stock. In different stores a ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Compare prices in online bookstores using python, pandas and matplotlib</h1><div class="post__text post__text-html js-mediator-article">  Today we will try to find the cheapest and most expensive online book store. <br>  We will compare paper books that are in stock.  In different stores a very different number of books.  Somewhere less than 1000, and somewhere more than 200,000 books. <br><br><img src="https://habrastorage.org/files/1e8/ecc/fee/1e8eccfeeb0b4f9489e3aba762949dc1.png"><br><br>  By the way, the histogram is real.  How it is built and other interesting patterns under the cut. <br><a name="habracut"></a><br>  First you need to find a list of books that are in all stores. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I unloaded the database from the site <a href="http://bookradar.org/">bookradar.org</a> , in the form of a csv file.  Of course, I didn‚Äôt just unload it, but I specially processed it using Python to make it convenient to analyze.  Our columns are shops, lines are books, cell lines are prices for this book in a particular shop.  If there is no book in the store, then an empty value (NaN). <br><br><img src="https://habrastorage.org/files/9df/8dd/58e/9df8dd58ef744ccea315cee1b0294da8.png"><br><br>  Only paper books that have an ISBN listed are unloaded.  Books for which ISBN is not specified there is no possibility to understand that this is the same book.  Even books that are called the same and look the same can differ in price if for example these are editions of different years.  Therefore, to simplify the analysis we use only those books that can be easily compared. <br><br>  When drawing graphics for the first time, the scale was completely unreadable, since  there are some instances that cost 30-50 thousand rubles.  Therefore, when unloading, I deleted books that cost more than 1,500 rubles. <br><br><h2>  Choosing stores for analysis </h2><br>  Let's make the necessary imports and load the file into the DataFrame: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> IPython.display <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> HTML plt.style.use(<span class="hljs-string"><span class="hljs-string">'ggplot'</span></span>) %matplotlib inline filename = <span class="hljs-string"><span class="hljs-string">'books.csv'</span></span> data = pd.read_csv(filename, header=<span class="hljs-number"><span class="hljs-number">0</span></span>, na_values=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, low_memory=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) data.head()</code> </pre> <br>  This is the first few lines of our DataFrame. <br><table><thead><tr><th></th><th>  isbn </th><th>  dmkpress.com </th><th>  rufanbook.ru </th><th>  read.ru </th><th>  setbook.ru </th><th>  moymir.ru </th><th>  boffo.ru </th><th>  my-shop.ru </th><th>  ... </th></tr></thead><tbody><tr><th>  one </th><td>  9785994911389 </td><td>  NaN </td><td>  NaN </td><td>  69 </td><td>  100 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  ... </td></tr><tr><th>  2 </th><td>  9789855497791 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  310 </td><td>  NaN </td><td>  NaN </td><td>  403 </td><td>  ... </td></tr><tr><th>  3 </th><td>  9785942802943 </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  NaN </td><td>  ... </td></tr><tr><th>  four </th><td>  9785779717533 </td><td>  NaN </td><td>  NaN </td><td>  177 </td><td>  160 </td><td>  NaN </td><td>  NaN </td><td>  177 </td><td>  ... </td></tr></tbody></table><br>  We calculate the number of books for each store: <br><br><pre> <code class="python hljs">desc = data.describe() l = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> colname <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> desc: count = desc[colname][<span class="hljs-number"><span class="hljs-number">0</span></span>] l.append((count, colname)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sorted(l, reverse=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): print(<span class="hljs-string"><span class="hljs-string">"{:16} {}"</span></span>.format(t[<span class="hljs-number"><span class="hljs-number">1</span></span>], int(t[<span class="hljs-number"><span class="hljs-number">0</span></span>])))</code> </pre><br><br><pre> shop number of books
 ozon.ru 220962
 setbook.ru 208039
 my-shop.ru 203200
 books.ru 181817
 book-stock.ru 124308
 bookvoed.ru 117494
 labirint.ru 114803
 read.ru 93720
 spbdk.ru 43714
 chaconne.ru 42993
 biblion.ru 41898
 eksmo.ru 40582
 knigosvet.com 34645
 rufanbook.ru 6071
 combook.ru 4716
 bookmail.ru 2356
 boffo.ru 2341
 moymir.ru 740
 dmkpress.com 722
</pre><br><br>  Very small shops make no sense, because  overlapping books will be very little or no zero.  Choose stores from about 100 thousand books or a little less <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    stores = ['books.ru', 'labirint.ru', 'ozon.ru', 'my-shop.ru', 'read.ru', 'bookvoed.ru', 'book-stock.ru', 'setbook.ru'] data = data[stores] #       . # ..    ,     . data = data.dropna(axis=0) # ,   data.describe()</span></span></code> </pre><br>  Received a summary of the table: <br><table border="1"><thead><tr><th></th><th>  books.ru </th><th>  labirint.ru </th><th>  ozon.ru </th><th>  my-shop.ru </th><th>  read.ru </th><th>  bookvoed.ru </th><th>  book-stock.ru </th><th>  setbook.ru </th></tr></thead><tbody><tr><th>  count </th><td>  17834.000000 </td><td>  17834.000000 </td><td>  17834.000000 </td><td>  17834.000000 </td><td>  17834.000000 </td><td>  17834.000000 </td><td>  17834.000000 </td><td>  17834.000000 </td></tr><tr><th>  mean </th><td>  340.154312 </td><td>  343.349333 </td><td>  308.639677 </td><td>  294.602108 </td><td>  309.796400 </td><td>  315.771504 </td><td>  291.266794 </td><td>  286.433722 </td></tr><tr><th>  std </th><td>  189.347516 </td><td>  235.526318 </td><td>  209.594445 </td><td>  206.383899 </td><td>  208.093532 </td><td>  208.651959 </td><td>  204.553104 </td><td>  191.038253 </td></tr><tr><th>  min </th><td>  40.000000 </td><td>  17.000000 </td><td>  26.000000 </td><td>  14.000000 </td><td>  69.000000 </td><td>  13.000000 </td><td>  14.000000 </td><td>  77.000000 </td></tr><tr><th>  25% </th><td>  210.000000 </td><td>  169.250000 </td><td>  153.000000 </td><td>  142.000000 </td><td>  155.000000 </td><td>  162.000000 </td><td>  142.000000 </td><td>  140.000000 </td></tr><tr><th>  50% </th><td>  308.000000 </td><td>  293.500000 </td><td>  264.000000 </td><td>  248.000000 </td><td>  267.000000 </td><td>  271.000000 </td><td>  248.000000 </td><td>  240.000000 </td></tr><tr><th>  75% </th><td>  429.000000 </td><td>  435.000000 </td><td>  391.000000 </td><td>  380.750000 </td><td>  391.000000 </td><td>  402.000000 </td><td>  373.000000 </td><td>  360.000000 </td></tr><tr><th>  max </th><td>  1460.000000 </td><td>  1497.000000 </td><td>  1478.000000 </td><td>  1474.000000 </td><td>  1485.000000 </td><td>  1456.000000 </td><td>  1474.000000 </td><td>  1490.000000 </td></tr></tbody></table><br>  Books, which are in all stores, we found 17834. <br>  Some explanations: <br><ul><li>  <b>mean</b> - average </li><li>  <b>std</b> - standard deviation </li><li>  <b>50%, 25% and 75% of the</b> medians of the middle, lower and upper quantiles </li></ul><br>  According to this data, it is already possible to draw any conclusions.  If you look at the median, then the best price is offered by setbook.ru with 240, then go my-shop.ru and book-stock.ru with median 248. <br><br><h2>  Price distribution </h2><br>  Let's build a histogram and see which range has the most books.  This histogram is similar to the picture at the beginning of the post, only there are more bars. <br><br><pre> <code class="python hljs">plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>)) plt.xlabel(<span class="hljs-string"><span class="hljs-string">' , '</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'-, '</span></span>) data3 = data[stores] x = data3.as_matrix().reshape(data3.size) <span class="hljs-comment"><span class="hljs-comment">#        count, bins, ignored = plt.hist(x, bins=30)</span></span></code> </pre><br><br><img src="https://habrastorage.org/files/11d/dae/a90/11ddaea9051e483284528e836cb49420.png"><br><br>  Interestingly, it turned out two peaks, about 75 rubles and 215 rubles. <br><br>  And I got the distorted view by adding a couple of lines at the beginning of the previous piece of code: <br><pre> <code class="python hljs">plt.xkcd() <span class="hljs-comment"><span class="hljs-comment">#    plt.style.use('ggplot') #    xkcd, ..   xkcd </span></span></code> </pre><br><br><h2>  Price correlation </h2><br>  Now let's look at the correlation of prices in stores: <br><pre> <code class="python hljs">data.corr()</code> </pre><br><table border="1"><thead><tr><th></th><th>  books.ru </th><th>  labirint.ru </th><th>  ozon.ru </th><th>  my-shop.ru </th><th>  read.ru </th><th>  bookvoed.ru </th><th>  book-stock.ru </th><th>  setbook.ru </th></tr></thead><tbody><tr><th>  books.ru </th><td>  1.000000 </td><td>  0.971108 </td><td>  0.969906 </td><td>  0.965291 </td><td>  0.978453 </td><td>  0.970747 </td><td>  0.965809 </td><td>  0.966226 </td></tr><tr><th>  labirint.ru </th><td>  0.971108 </td><td>  1.000000 </td><td>  0.973731 </td><td>  0.968637 </td><td>  0.979923 </td><td>  0.970600 </td><td>  0.969971 </td><td>  0.965970 </td></tr><tr><th>  ozon.ru </th><td>  0.969906 </td><td>  0.973731 </td><td>  1.000000 </td><td>  0.973783 </td><td>  0.979620 </td><td>  0.967151 </td><td>  0.974792 </td><td>  0.971946 </td></tr><tr><th>  my-shop.ru </th><td>  0.965291 </td><td>  0.968637 </td><td>  0.973783 </td><td>  1.000000 </td><td>  0.976491 </td><td>  0.956980 </td><td>  0.996946 </td><td>  0.970588 </td></tr><tr><th>  read.ru </th><td>  0.978453 </td><td>  0.979923 </td><td>  0.979620 </td><td>  0.976491 </td><td>  1.000000 </td><td>  0.974892 </td><td>  0.976164 </td><td>  0.974129 </td></tr><tr><th>  bookvoed.ru </th><td>  0.970747 </td><td>  0.970600 </td><td>  0.967151 </td><td>  0.956980 </td><td>  0.974892 </td><td>  1.000000 </td><td>  0.958787 </td><td>  0.961217 </td></tr><tr><th>  book-stock.ru </th><td>  0.965809 </td><td>  0.969971 </td><td>  0.974792 </td><td>  0.996946 </td><td>  0.976164 </td><td>  0.958787 </td><td>  1.000000 </td><td>  0.972701 </td></tr><tr><th>  setbook.ru </th><td>  0.966226 </td><td>  0.965970 </td><td>  0.971946 </td><td>  0.970588 </td><td>  0.974129 </td><td>  0.961217 </td><td>  0.972701 </td><td>  1.000000 </td></tr></tbody></table><br>  Visible is a good correlation between the prices of all stores.  And if you look at a couple of my-shop.ru and book-stock.ru, then the correlation is as much as 0.996946, i.e.  prices are almost the same. <br><br>  We construct a histogram of the price distribution for books in each store and a scatter diagram for each pair of stores: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pandas.tools.plotting <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> scatter_matrix scatter_matrix(data, alpha=<span class="hljs-number"><span class="hljs-number">0.05</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>));</code> </pre><br><img src="https://habrastorage.org/files/54f/671/03d/54f67103da264a57924d45382f7ee55f.png"><br><br>  From the scatter diagrams, we again see the same picture as in the correlation table.  The correlation is clearly there, it can be clearly seen.  Increase the pair of stores for clarity. <br><br><pre> <code class="python hljs">scatter_matrix(data[[<span class="hljs-string"><span class="hljs-string">'ozon.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'labirint.ru'</span></span>]], alpha=<span class="hljs-number"><span class="hljs-number">0.05</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>));</code> </pre><br><br><img src="https://habrastorage.org/files/205/404/413/20540441355342d7ab561ad5a5c5875c.png"><br><br>  And now look at our pair of stores with very similar prices: <br><br><pre> <code class="python hljs">scatter_matrix(data[[<span class="hljs-string"><span class="hljs-string">'my-shop.ru'</span></span>, <span class="hljs-string"><span class="hljs-string">'book-stock.ru'</span></span>]], alpha=<span class="hljs-number"><span class="hljs-number">0.05</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>));</code> </pre><br><br><img src="https://habrastorage.org/files/c7b/fa7/466/c7bfa746649d4bfcb306191304854e48.png"><br><br>  It turned out almost perfect straight.  But still there are points that are located outside of it, i.e.  not 100% of the prices are the same. <br><br><h2>  Chart with all prices </h2><br>  Let's try to draw our table graphically. <br><pre> <code class="python hljs">plt.figure(figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>)) <span class="hljs-comment"><span class="hljs-comment">#       x = list(range(data['books.ru'].count())) colors = ['red', 'blue', 'green', 'orange', 'yellow', 'pink', 'brown', 'purple'] for index,store in enumerate(stores): plt.scatter(x, data[store], alpha=0.5, color=colors[index], label=store) plt.xlabel('n') plt.ylabel('price') plt.legend(loc='best');</span></span></code> </pre><br><br><img src="https://habrastorage.org/files/b96/b98/d8e/b96b98d8e884467599a13017cb955724.png"><br><br>  The chart is beautiful, but useless.  The points just overlap.  The last layer is purple, clearly painted over all the previous ones. <br><br><h2>  Number of books at the lowest price </h2><br>  Let's now determine the number of books at the lowest price in each store.  It should be noted that the minimum price for a particular book can be in several stores at once.  Therefore, we add columns like ‚Äúmin_ozon.ru‚Äù - if in this store this book has a minimum price set among all stores, set 1 otherwise NaN.  Such values ‚Äã‚Äãare selected for convenience of counting. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">has_min_price</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(store)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inner</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(row)</span></span></span><span class="hljs-function">:</span></span> prices = list(row[:len(stores)]) min_price = min(prices) store_price = prices[stores.index(store)] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> store_price == min_price <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> np.nan <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inner <span class="hljs-comment"><span class="hljs-comment">#        ;) def has_max_price(store): def inner(row): prices = list(row[:len(stores)]) max_price = max(prices) store_price = prices[stores.index(store)] return 1 if store_price == max_price else np.nan return inner for store in stores: data['min_' + store] = data.apply(has_min_price(store), axis=1) data['max_' + store] = data.apply(has_max_price(store), axis=1) HTML(data.head(10).to_html())</span></span></code> </pre><br><br>  It turned out such a table <br><br><img src="https://habrastorage.org/files/5f2/d95/59a/5f2d9559a27d481ea98d4c551da9145f.png"><br><br>  Now we will display the number of books at the minimum and maximum prices in each store: <br><br><pre> <code class="python hljs">desc = data.describe() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show_count</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(prefix)</span></span></span><span class="hljs-function">:</span></span> l = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> column_name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> desc: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> prefix <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> column_name: cnt = desc[column_name][<span class="hljs-number"><span class="hljs-number">0</span></span>] l.append((cnt, column_name)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> sorted(l, reverse=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>): print(t[<span class="hljs-number"><span class="hljs-number">1</span></span>].replace(prefix, <span class="hljs-string"><span class="hljs-string">''</span></span>), int(t[<span class="hljs-number"><span class="hljs-number">0</span></span>])) print(<span class="hljs-string"><span class="hljs-string">' :'</span></span>, desc[stores[<span class="hljs-number"><span class="hljs-number">0</span></span>]][<span class="hljs-number"><span class="hljs-number">0</span></span>]) print() print(<span class="hljs-string"><span class="hljs-string">'    :'</span></span>) show_count(<span class="hljs-string"><span class="hljs-string">'min_'</span></span>) print() print(<span class="hljs-string"><span class="hljs-string">'    :'</span></span>) show_count(<span class="hljs-string"><span class="hljs-string">'max_'</span></span>)</code> </pre><br><br><pre> Total books: 17834.0

 Number of books at the lowest price:
 book-stock.ru 8411
 my-shop.ru 7735
 setbook.ru 6359
 bookvoed.ru 1884
 ozon.ru 1015
 read.ru 914
 books.ru 379
 labirint.ru 335

 Number of books at the maximum price:
 books.ru 10323
 labirint.ru 4383
 bookvoed.ru 1143
 setbook.ru 1052
 ozon.ru 676
 book-stock.ru 372
 my-shop.ru 351
 read.ru 265
</pre><br><br>  By the number of books with the lowest price, book-stock.ru, my-shop.ru, setbook.ru are leading.  This is similar to what we have already seen from the medians, but the order has changed. <br><br>  And at the maximum prices lead books.ru, labirint.ru and bookvoed.ru. <br><br><h2>  Sort at the lowest price. </h2><br>  In order for the dots not to overwrite each other, we restrict ourselves to a small number of books. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(row)</span></span></span><span class="hljs-function">:</span></span> prices = list(row[:len(stores)]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min(prices) <span class="hljs-comment"><span class="hljs-comment">#        data['min'] = data.apply(get_min, axis=1) #     , #    300- ,           data2 = data.sort_values(['min'])[::300] #   plt.figure(figsize=(14, 10)) colors = ['red', 'blue', 'green', 'orange', 'yellow', 'pink', 'brown', 'purple'] for index,store in enumerate(stores): plt.scatter(x[:len(data2)], data2[store], alpha=1.0, color=colors[index], label=store) plt.xlabel('n') plt.ylabel('price') plt.legend(loc='upper left');</span></span></code> </pre><br><br><img src="https://habrastorage.org/files/c1e/4b0/49b/c1e4b049b6b94a88bc1b4262cd2a61fe.png"><br><br>  The chart displays prices for ~ 60 books taken from a sorted set at equal intervals.  It can be seen that prices on average are quite similar.  However, if you look at a separate green point, then the price there is clearly prohibitively high.  If we had shown not 60 points, but all 17 thousand. Then there would be clearly more such emissions. <br><br><h2>  findings </h2><br>  It turns out that, on average, the price of books in stores is not very different, roughly speaking from the last graph in the range of 100-150 rubles.  On the other hand, it‚Äôs like the average temperature in a hospital.  Prices seem almost the same, but for a particular book, they should be 3 times more expensive.  Actual information on the price of a different book, you can always look <a href="http://bookradar.org/">at the site</a> . <br><br>  We also did not take into account the terms of delivery (price and convenience) and personal discounts. </div><p>Source: <a href="https://habr.com/ru/post/276745/">https://habr.com/ru/post/276745/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276729/index.html">How to get a Spring logger</a></li>
<li><a href="../276731/index.html">Full-featured REST API for perfectionists in 5 minutes</a></li>
<li><a href="../276737/index.html">The digest of interesting materials for the mobile # 139 developer (February 1-7)</a></li>
<li><a href="../276739/index.html">Why Yandex refused to confirm sites txt file</a></li>
<li><a href="../276741/index.html">‚ÄúDevilish‚Äù ACL - my version of rights verification</a></li>
<li><a href="../276747/index.html">Perfect UI framework</a></li>
<li><a href="../276749/index.html">School of Data "Beeline" for managers</a></li>
<li><a href="../276751/index.html">IBM will strengthen the fight against cyber fraud using IRIS Analytics technology</a></li>
<li><a href="../276753/index.html">The digest of interesting materials from the world of web development and IT for the last week No. 197 (February 1 - 7, 2016)</a></li>
<li><a href="../276755/index.html">Does Google promote me sell kidney meme in Russia?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
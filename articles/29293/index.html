<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Alternative to cookies via java script</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Search in Habra did not give a similar article, so I dare share with those who are not yet aware 
 Many of you have faced the problem of storing data ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Alternative to cookies via java script</h1><div class="post__text post__text-html js-mediator-article">  Search in Habra did not give a similar article, so I dare share with those who are not yet aware <br>  Many of you have faced the problem of storing data on the client.  First of all, cookies come to my head, but the data storage restriction of no more than 4kb does not make everyone happy, today if I may let you tell you how to store about 100kb on the client using Java Script. <br><a name="habracut"></a><br>  The <a title="HTML5" href="http://www.whatwg.org/specs/web-apps/current-work/">HTML5</a> specification describes several techniques for storing data on a client without using cookies.  Consider some of them or their alternatives in more detail: <br><br><h1>  The sessionStorage attribute </h1><br>  This method is supported by Firefox since version two.  This is a global object that is stored in the current session of the document and is stored while the document is open, reloaded or restored, but opening a new window or tab with the same address will generate a new session. <br>  Example of use: <br><blockquote>  <font color="black">sessionStorage.text = <font color="#A31515">‚ÄúHabr remembers you,% username%‚Äù</font> ;</font> <font color="black"><br></font>  <font color="black">alert ( <font color="#A31515">‚ÄúUFO:‚Äû</font> + sessionStorage.text);</font> <font color="black"><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  The disadvantage of this approach is that it cannot spread to other pages or windows, and works only in the limit of its session. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  globalStorage </h1><br>  Due to the fact that HTML5 is still developing in Firefox there is a global object globalStorage, which allows you to store data in the browser for a long period of time without being tied to a session, which allows you to use and manipulate the saved data when opening a new window, tab, closing / opening a browser .  Binding storage of this kind is carried out by domain. <br>  Example of use: <br><blockquote>  <font color="black"><font color="#008000">// Initialize the repository</font></font> <font color="black"><br></font>  <font color="black">storage = globalStorage [ <font color="#A31515">‚Äúhabrahabr.ru‚Äù</font> ];</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// write the value</font></font> <font color="black"><br></font>  <font color="black">storage [ <font color="#A31515">'hello'</font> ] = <font color="#A31515">'Hi habrahabr!'</font></font>  <font color="black">;</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Display the value</font></font> <font color="black"><br></font>  <font color="black">alert (storage [ <font color="#A31515">'hello'</font> ]);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// If necessary, delete</font></font> <font color="black"><br></font>  <font color="black">delete storage [ <font color="#A31515">'hello'</font> ];</font> <font color="black"><br><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  This approach allows us to save up to 5 megabytes of information on a client in a specific domain, and use our storage within the domain and its subdomains.  That is, it will act like <a href="http://habrahabr.ru/">habrahabr.ru</a> , <a href="http://antyrat.habrahabr.ru/">antyrat.habrahabr.ru</a> , etc. <br><br><h1>  userData </h1><br>  But all that has been described above affects only Firefox (Gecko) browsers, what about IE? <br>  Small-scale went the other way, but did not limit the developers to the excellent possibility of cookies. <br>  Data storage on the client in the donkey is done by working with behavior.  Specifications for working with this can be read <a href="http://msdn.microsoft.com/en-us/library/ms531424(VS.85).aspx">here</a> , but for now we will consider an example: <br><blockquote>  <font color="black">&lt;! - First we need an item in which we will store data -&gt;</font> <font color="black"><br></font>  <font color="black">&lt;span id = <font color="#A31515">"customStorage"</font> &gt; &lt;/ span&gt;</font> <font color="black"><br></font>  <font color="black">&lt;! - Next, we need to initialize our repository -&gt;</font> <font color="black"><br></font>  <font color="black">&lt;script language = <font color="#A31515">"javascript"</font> type = <font color="#A31515">"text / javascript"</font> &gt;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ( <font color="#0000ff">document</font> .getElementById ( <font color="#A31515">'customStorage'</font> )) {</font> <font color="black"><br></font>  <font color="black">storage = <font color="#0000ff">document</font> .getElementById ( <font color="#A31515">'customStorage'</font> );</font> <font color="black"><br></font>  <font color="black">storage.addBehavior ( <font color="#A31515">"# default # userData"</font> );</font> <font color="black"><br></font>  <font color="black">storage.load ( <font color="#A31515">"habr"</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Initialization has passed and now we can already work with our repository</font></font> <font color="black"><br></font>  <font color="black">storage.setAttribute ( <font color="#A31515">‚Äúhello‚Äù</font> , <font color="#A31515">‚ÄúHabraprivet!‚Äù</font> );</font>  <font color="black"><font color="#008000">// Set our variable</font></font> <font color="black"><br></font>  <font color="black">storage.save ( <font color="#A31515">"habr"</font> );</font>  <font color="black"><font color="#008000">// And save it</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Now you can display the result</font></font> <font color="black"><br></font>  <font color="black">alert (storage.getAttribute ( <font color="#A31515">"hello"</font> ));</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">&lt;/ script&gt;</font> <font color="black"><br></font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  Also, our store as well as in cookies, you can set the time of life, but if necessary, you can <a href="http://msdn.microsoft.com/en-us/library/ms531424(VS.85).aspx">read about</a> how to do this. <br><br><h1>  Client-side Database Storage </h1><br>  The WebKit developers (Safari) came close to the HTML5 recommendations and made it possible to create a database on the client. <br>  Let's go straight to the example: <br><blockquote>  <font color="black"><font color="#008000">// open our database</font></font> <font color="black"><br></font>  <font color="black">db = openDatabase ( <font color="#A31515">"habrahabr"</font> , <font color="#A31515">"1.0"</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Create a table if it does not already exist</font></font> <font color="black"><br></font>  <font color="black">db.transaction ( <font color="#0000ff">function</font> (tx) {</font> <font color="black"><br></font>  <font color="black">tx.executeSql (</font> <font color="black"><br></font>  <font color="black"><font color="#A31515">‚ÄúCREATE TABLE IF NOT EXISTS habr (id TEXT, hello TEXT, unique (id))‚Äù</font> , <font color="#008000">// Query to the database</font></font> <font color="black"><br></font>  <font color="black">[], <font color="#008000">// Here, if necessary, we transfer variables to our request; they replace the characters "?" In our request.</font></font>  <font color="black"><font color="#008000">in order</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> (tx, result) {}, <font color="#008000">// processing if successful</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> (tx, error) {alert ( <font color="#A31515">‚ÄúUFO:‚Äû</font> + error.message);</font>  <font color="black">} <font color="#008000">// processing in case of failure</font></font> <font color="black"><br></font>  <font color="black">)</font> <font color="black"><br></font>  <font color="black">});</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// write the value</font></font> <font color="black"><br></font>  <font color="black">db.transaction ( <font color="#0000ff">function</font> (tx) {</font> <font color="black"><br></font>  <font color="black">tx.executesql ( <font color="#A31515">‚Äúinsert into habr (id, hello) values ‚Äã‚Äã('1', 'Habri hi!')‚Äù</font> , [],</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> (result) {},</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> (tx, error) {alert ( <font color="#A31515">‚ÄúUFO:‚Äû</font> + error.message);</font>  <font color="black">});</font> <font color="black"><br></font>  <font color="black">});</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Enter the result</font></font> <font color="black"><br></font>  <font color="black">db.transaction ( <font color="#0000ff">function</font> (tx) {</font> <font color="black"><br></font>  <font color="black">id = 1;</font> <font color="black"><br></font>  <font color="black">tx.executesql ( <font color="#A31515">‚Äúselect hello from habr where id =?‚Äù</font> , [id], <font color="#0000ff">function</font> (result) {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Display the result</font></font> <font color="black"><br></font>  <font color="black">alert (result.rows.item (0) .hello);</font> <font color="black"><br></font>  <font color="black">}, <font color="#0000ff">function</font> (tx, error) {alert ( <font color="#A31515">‚ÄúUFO:‚Äû</font> + error.message);</font>  <font color="black">});</font> <font color="black"><br></font>  <font color="black">});</font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br><br>  The disadvantage of this approach is that the database can only work within the domain.  Subdomains are not supported. <br>  A lot of information about this is not found, here is <a href="http://webkit.org/misc/DatabaseExample.html">this</a> example of digging. <br><br><h1>  Local SharedObject </h1><br>  Opera users are the least fortunate of all, none of the above examples, the opera does not support, so you need to resort to tricks. <br>  Starting with Flash Player 6.0.40.0, Flash supports Local SharedObject, here we will use it and we will. <br>  How it looks from ActionScript: <br><blockquote>  <font color="black"><font color="#008000">// Create Local SharedObject</font></font> <font color="black"><br></font>  <font color="black">theLocalSharedObject = sharedobject.getLocal ( <font color="#A31515">‚Äúhabra‚Äù</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Store the value</font></font> <font color="black"><br></font>  <font color="black">theLocalSharedObject.data.hello = <font color="#A31515">‚ÄúHabraprivet‚Äù</font> ;</font> <font color="black"><br></font>  <font color="black">theLocalSharedObject.flush ()</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Get the value</font></font> <font color="black"><br></font>  <font color="black">hello = theLocalSharedObject.data.hello;</font>  <font color="gray">* This source code was highlighted with <a href="http://source.virtser.net/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  I‚Äôm not very strong in a flash, and now I don‚Äôt have the means to describe this method in more detail, so I‚Äôll tell you the essence, all you need is to create a Flash &lt;=&gt; JS interaction bridge, to communicate with each other so that it is easy to transfer parameters flush and take them from his vault.  This method is valid for the entire domain.  Restrictions on size depends on the user's settings, the default is 100 kilobytes. <br><br><h1>  Silverlight Isolated Storage </h1><br>  If the user has Silverlight installed then you can use the Isolated Storage object. The specification for it can be found <a href="http://silverlight.net/QuickStarts/IsoStore/StoreData.aspx">here</a> . <br>  Again, now there is no possibility to describe this method in more detail. <br><br><hr><br>  As a result, we received a means of storing information on the client in the amount of 100kb.  You can use it for any purpose. <br>  At the moment I am writing a cross-browser data storage script on the client, which would be able to synchronize the storage in browsers through a flash.  A record read without a flash or when access is denied to use the built-in functions of browsers.  If the article seems interesting then I will post this lib. <br><br>  PS: Please do not kick much for the post, as this is my first post on Habr√©. <br>  <font color="#ffffff">PPS: Do you also have this bad habit of highlighting text before reading?</font> <br><br>  <strong>UPD</strong> : The <a href="https://habrahabr.ru/users/donquijote/" class="user_link">donquijote</a> user provided a link to a <a href="http://www.jstoolbox.com/2008/05/22/persistjs-sessii-v-javascript-bez-cookies/">script</a> that is trying to implement the described mechanism, the only drawback I think is that when opening another browser, the data is transferred only if it was eaten, and there and there the storage worked via flash.  In my article, I forgot to take into account 2 more very powerful data storage mechanisms on the client, this is <a href="http://www.adobe.com/products/air/">Adobe AIR</a> and <a href="http://gears.google.com/">Google Gears</a> , the implementation of the latter is in the above script, thanks to <a href="https://habrahabr.ru/users/shamaniac/" class="user_link">shamaniac</a> for the hint. <br><br></div><p>Source: <a href="https://habr.com/ru/post/29293/">https://habr.com/ru/post/29293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../292916/index.html">Why I love working on weekends and holidays</a></li>
<li><a href="../292918/index.html">MTS launches MTS TV service for smartphones, tablets, TVs and PCs</a></li>
<li><a href="../292920/index.html">What is the "viewing" of advertising?</a></li>
<li><a href="../292922/index.html">About 19% of companies will not transfer personal data to Russia</a></li>
<li><a href="../292928/index.html">Nikita Sherman (WIX): ‚ÄúI wanted to do too much with too little effort‚Äù</a></li>
<li><a href="../292932/index.html">New Google Analytics functionality: cohort analysis</a></li>
<li><a href="../292934/index.html">Natalya Bagrova and Evgenia Karpov: ‚ÄúWe have made the DataArt educational program ourselves‚Äù</a></li>
<li><a href="../292936/index.html">What lives product manager</a></li>
<li><a href="../292938/index.html">5 ways to increase personal and team productivity</a></li>
<li><a href="../292944/index.html">Service Sergei Petrossov to order private flights has raised $ 20 million</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
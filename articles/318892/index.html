<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pebble for lazy programmers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I was "lucky" - Pebble Time watches came to me at the same time as the news about the sale of the company. The joy of buying was overshadowed by two t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pebble for lazy programmers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d31/496/d72/d31496d72a094df4ad5a3d94dc018fcb.jpg" align="left">  I was "lucky" - Pebble Time watches came to me at the same time as the news about the sale of the company.  The joy of buying was overshadowed by two things: the ambiguity of the future platform and the not so big developer community and the lack of the applications I needed.  But these shortcomings more than paid off the opportunity to quickly and easily write the applications I needed, despite the lack of experience in C programming and JavaScript (I‚Äôll tell you more about it today). <br><br>  Pebble turned out to be really good for quickly writing applications for yourself.  Starting from receiving any information, ending with the management of <s>their</s> smart home <s>crafts</s> from the clock.  So hurry to buy pebble while they are in stock.  If you already have a pebble, I hope this article will help you spend a few holidays with benefit;) <br>  On Habr√© before there were articles on programming for Pebble, but they are somewhat outdated.  In this article I will talk about the current state of affairs with the Pebble IDE and we will write a simple JavaScript application. <br><a name="habracut"></a><br>  The ease and speed of programming begins with IDE.  Pebble has this very, very good.  I would not be surprised if one of the reasons for buying a company is to get ownership of such great development tools. <br><br>  The IDE is available in several versions: ‚Äúoffline‚Äù and new-fashioned ‚Äúcloudy‚Äù, thanks to which, you can start working from scratch and get the first working application in just 5 minutes, using only the browser. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A few words about "offline": officially IDE is available for linux and Mac OS.  Windows users are encouraged to use the virtual machine.  I personally don‚Äôt like to use them (joke about sex in a condom), and I found a way to launch IDE ‚Äúnatively‚Äù. <br><br>  The trick is to use the built-in bash in windows 10. The only problem occurred with the emulator, which needs a GUI.  The problem was solved by installing <a href="http://www.straightrunning.com/XmingNotes/">xming</a> , after which the emulator needs to be run like this: <br><br><pre><code class="bash hljs">DISPLAY=:0 pebble install --emulator basalt</code> </pre> <br><img src="https://habrastorage.org/files/ffc/8ed/204/ffc8ed204f434a73807939ab6d4ee562.png"><br><br><h3>  CloudPebble IDE </h3><br>  This is a really handy tool (available <a href="https://cloudpebble.net/ide/">here</a> ). <br><br>  Of the benefits: <br><br><ul><li>  Integration with github (import of projects, export and commits without leaving the browser) </li><li>  Full development cycle, starting from the creation of the project, to the receipt of the finished package for distribution. </li><li>  Debugging and running the application in the emulator (yes, yes, the emulator runs directly in the browser window), or immediately on the clock. </li></ul><br>  For those who do not use the cloud in principle, as well as for those who read this article after 2017, when it is possible the online IDE will no longer work, it is possible to install and run it on your local machine or server.  <a href="https://forums.pebble.com/t/build-your-own-cloudpebble-using-cloudpebble-compose/27170">The way is official</a> , from the developers. <br><br><h3>  Program easily and quickly. </h3><br>  Programming for Pebble on C, many articles were devoted, including on habr.  Now there is another interesting tool, this is the Pebble.js framework. <br><br>  The JavaScript program is not executed on the clock itself, but in the Pebble application, which is installed on the smartphone.  The clock serves as a kind of terminal that transmits keystrokes, etc., and to which come ‚Äúcommands‚Äù, such as drawing text, displaying a menu, etc. All this is completely transparent to the programmer. <br><br>  But this results in a significant disadvantage: without connecting to a smartphone, the application will not even start.  Therefore, it is not recommended to write on this framework, for example, watch faces (dials).  But applications that cannot work without a smartphone in any case (for example, a weather forecast) can be safely written in JavaScript. <br><br>  There are still some minor problems with the emulator: sometimes the application does not behave at all as it should, but when installed on the clock, everything works fine. <br><br>  Let's write something simple application that will show us some <s>useful,</s> useless information from the Internet.  I somehow liked <a href="http://fucking-great-advice.ru/">one site</a> that gives short but succinct advice on a given topic.  They have <a href="http://fucking-great-advice.ru/api/">an API</a> , so you can do without additional layers in the form of parsers, etc. <br><br>  Open the online ide and create a project. <br><br><img src="https://habrastorage.org/files/d92/e8b/18a/d92e8b18a7e24692adf8326186e7d2b3.png"><br><br>  First of all, we need to create an icon for the menu and configure the application.  In the left menu RESOURCES ‚Üí Add New.  We load the png icon (25x25), save and select the saved image in the settings menu image.  Please note that in the settings we can specify for which platforms we will compile the application (aplite - pebble and pebble steel, basalt - pebble time and time steel, chalk - pebble round).  Support for multiple platforms is a desirable thing if you will distribute the application, but for yourself you can leave one platform.  If the difference with color and non-color pebble is minimal, then with the pebble round you need to do a little different UI, although pebble.js does a lot for you. <br><br>  So, click on app source - app.js and write a few lines: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UI = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> main = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UI.Card({ <span class="hljs-attr"><span class="hljs-attr">banner</span></span>: <span class="hljs-string"><span class="hljs-string">'images/app_icon.png'</span></span>, <span class="hljs-attr"><span class="hljs-attr">title</span></span>:<span class="hljs-string"><span class="hljs-string">'Hello!'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: <span class="hljs-string"><span class="hljs-string">', !'</span></span>, <span class="hljs-attr"><span class="hljs-attr">style</span></span>:<span class="hljs-string"><span class="hljs-string">'large'</span></span> }); main.show();</code> </pre><br>  All, we have already received a working application, which we will immediately launch.  Click the build button on the right.  The application compiles and runs in the selected location.  In the compilation tab, we can choose the place to start the application.  This is either a built-in emulator, or directly on the clock (the developer mode in the pebble application and the devolopment connection must be enabled). <br><br><img src="https://habrastorage.org/files/fff/5f1/10f/fff5f110f7474958aaa299020b20700b.png"><br><br>  Pay attention to the Russian language.  Now pebble supports Russian out of the box, if the corresponding setting is selected, but this cannot be done in the emulator.  On the watch itself, everything works without problems: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e5b/363/2e0/e5b3632e0342436995c33d96cc09dcbb.png"></div><br>  Now it remains to add the ability to receive information from the Internet, for this is the most common library ajax.  Also add the ability to choose the topic of tips and save this setting.  For this we have the most common localStorage available. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UI = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ajax = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'ajax'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     var themes=['','','','','','','','','','','','',' ',' ',' ']; //      localStorage var cur_theme=localStorage.getItem('theme'); if (!cur_theme){cur_theme=0;} var main = new UI.Card({ banner: 'images/app_icon.png', subtitle:'', body: '', style:'large' }); function update(){ //  json  API ajax({ url: 'http://fucking-great-advice.ru/api/random_by_tag/'+themes[cur_theme]+'/', type: 'json' }, function(data) { //     main.subtitle(themes[cur_theme]); main.body(data.text.replace(/ /g, ' ')); } ); } function changeTheme(){ //   ,      cur_theme++; if (cur_theme==themes.length){cur_theme=0;} localStorage.setItem('theme',cur_theme); update(); } main.show(); //     select -   main.on('click','select',update); //     select -   main.on('longClick','select',changeTheme); update();</span></span></code> </pre><br>  As a result, we got a working application that can be installed directly on the watch (compilation - get PBW, and then open this file on the smartphone), or put it on the pebble market. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c95/342/fe7/c95342fe75cd42e6a5c28eea9f340899.png"></div><br>  For a few free nights, I wrote and <a href="https://apps.getpebble.com/en_US/developer/583c663200355a4bea00030d/1">laid out</a> already 4 applications (one of them is a client for instagram, it was written in C, because I couldn‚Äôt find a way to show downloaded graphics from the Internet in pebble.js). <br><br>  Full documentation on pebble.js can be found <a href="https://pebble.github.io/pebblejs/">here</a> .  And this project is available on <a href="https://github.com/kaist/fga-test">github</a> . </div><p>Source: <a href="https://habr.com/ru/post/318892/">https://habr.com/ru/post/318892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318878/index.html">History of participation (and almost victory) in the annual competition Russian AI Cup 2016</a></li>
<li><a href="../318880/index.html">Drawing vector graphics - triangulation, rasterization, anti-aliasing and new scenarios</a></li>
<li><a href="../318882/index.html">Launch Telegram bot on Android device (Remote Bot for Telegram)</a></li>
<li><a href="../318886/index.html">Comparison of signal recognition methods. Neural networks against matched filter</a></li>
<li><a href="../318890/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ243 (December 26 - January 1, 2017)</a></li>
<li><a href="../318894/index.html">How fake programmers design</a></li>
<li><a href="../318896/index.html">Truly live code reload in golang</a></li>
<li><a href="../318898/index.html">Simple XML Framework - we write API for working with diagrams DIA</a></li>
<li><a href="../318900/index.html">Sovereign Internet. Why it will not be in 2017</a></li>
<li><a href="../318904/index.html">How I uploaded base in GIT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web development based on Java EE + JSP + Hibernate + Maven + Spring MVC in NetBeans. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 This will be a series of articles that will help beginner Java developers in their difficult path. I will show an example of creating a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web development based on Java EE + JSP + Hibernate + Maven + Spring MVC in NetBeans. Part 1</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  This will be a series of articles that will help beginner Java developers in their difficult path.  I will show an example of creating an online store. <br>  The first thing you need is NetBeans 7.3.  Download <a href="https://netbeans.org/downloads/">here</a> . <br>  Why precisely he?  I think for beginners in EE - this is ideal. <br><br>  Used technologies: <br><a name="habracut"></a><br>  1) NetBeans 7.3; <br>  2) Maven; <br>  3) Hibernate; <br>  4) Spring MVC; <br>  5) JSP + JSTL; <br>  6) Knowledge about Servlets, Sessions, JavaBean, XML, etc .; <br>  7) HTML + CSS (a bit of beauty according to your taste, but it is better to pay the left people - you and the server side will have enough trouble); <br>  8) Java SE (knowledge of collections, ability to handle exceptions ... In general, the standard set); <br>  9) Knowledge of design patterns (DAO, Factory); <br>  10) JPA; <br>  11) SVN; <br>  12) SQL (for writing scripts that fill our databases). <br><br>  Let's start with where we store our code and how to share it with friends.  I think not all beginners know about repositories, and this part is for them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Svn </h4><br>  There is such a thing as a repository - a remote code storage server. <br>  If you are given a test task, and you send it as an archive, you will probably also be sent.  Maybe they will not, but they will definitely be disappointed in you. <br>  There are various CVS, SVN, Git repositories.  For starters, I think the best SVN.  Well, the main thing for you is not to know what it is, but to be able to apply.  As long as this is enough, the rest will come with experience. <br><br>  So, there is a website <a href="http://www.assembla.com/">www.assembla.com/</a> - You need to register there.  After registration, you need to create an open repository on this site on the start page.  After registration will be <u><font color="#0066cc">.</font></u>  <u><font color="#0066cc">Create your own space.</font></u> <br><br>  Next is a public project, and the first will be Subversion (SVN).  Give it a name and finish the creation.  After that, at the top, on the black bar of the site, his name will be displayed, you click on it - and you will be redirected to the page of your space.  There will be a tab "Source Code / SVN".  In this tab there will be a link to your project.  If all else fails, try finding a video on how to do this on <a href="http://www.youtube.com/">www.youtube.com/</a> . <br><br>  After all this you will have a link to your space.  To understand what it is, you need to take one of your projects (or create some kind of empty project in NetBeans).  Click on it with the right button and you will have access to the ‚ÄúVersion Management‚Äù -&gt; ‚Äúimport into the Subversion repository‚Äù menu.  After that there will be a dialog box, which will be the path to the repository - this is the link that you received on the site in the ‚ÄúSource Code‚Äù tab. <br><br>  Next, completely delete the project that you commit.  Then go to the folder where your projects are stored, and check that everything is really deleted.  Then you go back to NetBeans and look for the Group tab in the menu bar (in the panel where File, View, Edit, Transition, Source ...) it has our Subversion.  And in the submenu there is ‚ÄúGet‚Äù.  Further in the dialog boxes you will need to specify a link to the repository (this is the link you received on the site in the Source tab.) And when he offers to download folders, you will need to find your project and select it in the repository tree, and at the end you will Download your project.  This is how the code is exchanged. <br>  Your project will be constantly synchronized with the repository and mark files that have been changed, or new ones (something different from the version on the repository).  To update, you need to call the context menu, and in the "Version Management" tab there will be a large list of what you can do with the project.  ‚ÄúUpdate‚Äù is to update your files;  "Fix" - put the code that you wrote or changed in the repository;  ‚ÄúReset‚Äù - return to the version on the repository, and ‚ÄúCompare‚Äù - display of changes to rows that are different from the deleted ones.  This is a command exchange method that is always used and you need to get used to it. <br><br><h4>  Start </h4><br>  So, if we need to share the code with someone, show it to someone, we are now armed with a pretty tool for that. <br><br>  You have already downloaded NetBeans, played with SVN - now let's get down to business.  Create a project.  Click "Create a project", there choose Maven-&gt; Web application.  Call it what you want, it's all your imagination.  So, we have a web application, the assembly of our project is going to be maven, we have a goal, and now it's time to think about how to implement it.  That is, you, as a developer, should think about how your application will look like, which architecture to have, the package tree, and so on.  The total number of lines of code here is about 4000 and it is better to take care of the beautiful architecture in advance, otherwise then you just won‚Äôt understand where and how it works for you, what a miracle you, for example, display the last purchased thing, what do you think the total amount of purchases.  And if you are then asked to finish or add something - you realize that it is easier to write everything from scratch. <br><br>  And of course we need to estimate our plan of action. <br><br><h5>  So: Action Plan </h5><br>  1) we describe entity (entities) - entities.  This POJO is a class associated with a database using annotation (@Entity) or via XML.  We will use JPA, so we need to import javax.persistence. * Why not the Hibernate Persistence API, because if you use it and then we want to change the ORM library, you will have to rewrite our classes, and JPA is the standard from Sun.  Regarding what JPA is, well, for you I can say this in my own words: this is a library providing an API for working with * long-living * objects, that is, it allows us to conveniently store our objects in the database.  I can give advice: create a separate package for this, name it entity or domain - whatever you like, the main thing is that you understand.  In the end, it might look like this: edu.shop.model.domain.Customer.java edu.shop.model.domain.Notebook.java. <br>  I will describe in more detail when considering this item.  Now the task is to figure out a plan of action. <br><br>  2) Create HibernateUtil (in general, the suffix or prefix Util implies that the code in this class is universal and is used by many classes). <br>  So, in HibernateUtil we place SessionFactory.  He is heavyweight.  This code, in theory, should be independent of the entire application, since it establishes a connection to the database at startup and should give us only Sessions with the database.  We also register our entity classes in this class.  I will tell you more about this class later.  We will also post it in a separate package, for example, edu.shop.model.hbutil.HibernateUtil.java <br><br>  3) We write DAO. <br>  What to write in it?  We write what we want to get from the database, but we do not need to think about how this data came out, the result is important.  For example, we define the ProductDAO interface and write methods in it. <br>  List &lt;AnyEntity &lt;&gt;&gt; getAllProducts ();  then we write its implementation ProductDAOImpl. <br><br>  What is the idea?  If this application was written by me and you, you would say: ‚ÄúMicha, I need the following data from the database: all the goods that I have in the database‚Äù.  I answer: "no question."  And then the following development: in your code, wherever you need to make requests to the database, write the following% <br><br>  * here is the call to the method * .getAllProducts ();  - and you see that the compiler does not swear, and the implementation of this interface, I could not have time to write.  And what is the result?  You have compiled everything, but there is not even a working code.  Here we will apply Enums and the Factory pattern, and one more thing, but there is a time for everything.  It is in the DAO that particular attention should be paid to exception handling, at least to generate pages with errors.  So that you quickly find a piece of broken code.  Otherwise, you simply torture with debugging. <br><br>  3) This is where our work with Spring MVC will begin.  This is a long story and a separate article will be devoted to this.  Immediately I say - this is the most difficult thing in this application.  But I will show you a simpler version of how to display everything without worrying about the MVC pattern. <br>  We will affect the use of scripts. <br><br>  4) Here we will have auxiliary classes that add all sorts of goodies to our project: counting the total amount of purchases;  Last purchased item;  auxiliary variables that will be useful to us for the work of the method, which, for example, will bring us from the database things no more than 5000 UAH, or not less than 500;  output of all Asus brand laptops.  This item is closely interrelated with the previous one. <br><br>  For now let's stop on this.  We will deal with the rest a bit later.  So, we have a plan, let's proceed to its implementation. <br><br><h3>  Entity </h3><br>  We created our project and created our package with entities.  Let it be edu.shop.entity.  There we create such classes: <br><br>  Note.  The basket in which our purchased goods will be stored will be like a table in the database, I did this because I will show some basics of working with the database on it.  For a real case, it would be better to use collections for the storage of our goods. <br><br>  1) Product <br>  2) Notebook <br>  3) Camera <br>  4) Book <br>  5) Cable <br>  6) Customer <br>  7) Cart <br><br>  Let's talk a little about what is the essence of the class. <br>  Entity (Entity) - POJO class associated with a database using annotation (@Entity) or via XML.  This class has the following requirements: <br><br>  - Must have an empty constructor (public or protected); <br>  - Cannot be nested, interface or enum; <br>  - Cannot be final and cannot contain final-fields / properties; <br>  - Must contain at least one @ Id-field. <br><br>  In this case, an entity can: <br><br>  - Contain non-empty constructors; <br>  - Inherit and be inherited; <br>  - Contain other methods and implement interfaces. <br><br>  Entities can be related to each other: one-to-one, one-to-many, many-to-one, and many-to-many. <br><br>  We will use annotations.  And here at once we have the opportunity to describe in two ways.  Either we will write annotations directly above the fields, or above the getters.  I will say one thing: write correctly over getters, and you ask the reason in Google.  I can not absolutely describe all the topics here. <br><br>  There is one more thing I want to say.  To do this, you have to show 2 examples of the description of the class of the entity  So, the first example: <br>  I wrote comments to it in the code itself: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Serializable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.validation.constraints.Size; <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> Mikhail Shumenko */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-comment"><span class="hljs-comment">//   ,     . @Table(name = "CART")//    ,           CART // ,    ,     ,       //    public class CartEntity implements Serializable { //     .     // Id  @Id //,            Id //     ,        . @Column(name = "ID") //   ))     ?     //@GeneratedValue(strategy=GenerationType. TABLE  AUTO)  //   , Id    1    . //   20   ,    1  20. //   , id       - 345768. //   ,    id          . //  SEQUENCE,      Derby,       . // ,  .      @TableGenerator(name = "cartid", table = "cartpktb", pkColumnName = "idCart", pkColumnValue = "idCartValue",allocationSize = 1) @GeneratedValue (strategy = GenerationType.TABLE, generator = "cartid") private Integer id; //  .    25 . @Size(max = 25) @Column(name = "NAMEITEM") //    String,        VARCHAR(  Derby) // Integer,   ,      Integer //boolean  Derby -     SMALLINT private String nameItem; @Column(name = "PRICE") private Integer price; public CartEntity() { } public CartEntity( String nameItem, int price) { this.nameItem = nameItem; this.price = price; } public CartEntity(Integer id,String nameItem, int price) { this.id=id; this.nameItem = nameItem; this.price = price; } public CartEntity(Integer id) { this.id = id; } public Integer getId() { return id; } public void setId(Integer id) { this.id = id; } public String getNameItem() { return nameItem; } public void setNameItem(String nameItem) { this.nameItem = nameItem; } public Integer getPrice() { return price; } public void setPrice(Integer price) { this.price = price; } }</span></span></code> </pre> <br><br><h4>  The second way: we write over getters.  Explanations look in the code. </h4><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.Serializable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.persistence.*; <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> miha */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-comment"><span class="hljs-comment">//,     @Table //Hibernate    . public class Product implements Serializable { private Integer id; private String nameProduct; private Integer availableProduct; @Id @GeneratedValue(strategy = GenerationType.AUTO) //  Id  , ,         . public Integer getId() { return id; } public void setId(Integer id) { this.id = id; } public String getNameProduct() { return nameProduct; } public void setNameProduct(String nameProduct) { this.nameProduct = nameProduct; } public Integer getAvailableProduct() { return availableProduct; } public void setAvailableProduct(Integer availableProduct) { this.availableProduct = availableProduct; } }</span></span></code> </pre><br><br>  So, you have two examples of entity classes.  Create the rest using these examples.  Such fields as: model, year of publication, name, value - all to your imagination.  Include required field Available (in the translation availability).  It will come in handy later.  You can make it boolean and add a column named quantity.  All this is useful to us. <br><br><h3>  Now we give an example of our HibernateUtil </h3><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/* * To change this template, choose Tools | Templates * and open the template in the editor. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> edu.shumenko.hibernate; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.BookEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.CableEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.CameraEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.CartEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.CustomerEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.NotebookEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> edu.shumenko.entity.ProductEntity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.cfg.AnnotationConfiguration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.SessionFactory; <span class="hljs-comment"><span class="hljs-comment">/** * Hibernate Utility class with a convenient method to get Session Factory * object. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> Mikhail Shumenko */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HibernateUtil</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  SessionFactory. private static final SessionFactory sessionFactory; static { try { //   AnnotationConfiguration AnnotationConfiguration ac = new AnnotationConfiguration(); //    ,       . //  Entity   ,   -   . ac.addAnnotatedClass(ProductEntity.class).addAnnotatedClass(BookEntity.class).addAnnotatedClass(CableEntity.class) .addAnnotatedClass(CameraEntity.class).addAnnotatedClass(NotebookEntity.class). addAnnotatedClass(CartEntity.class).addAnnotatedClass(CustomerEntity.class); //       . //  .       //   ,  ,        . sessionFactory = ac.configure().buildSessionFactory(); } catch (Throwable ex) { // Log the exception. System.err.println("Initial SessionFactory creation failed." + ex); throw new ExceptionInInitializerError(ex); } } public static SessionFactory getSessionFactory() { return sessionFactory; } }</span></span></code> </pre><br><br><h3>  DAO </h3><br>  We proceed to the next part.  What is DAO.  This is a design pattern. <br><br>  Its meaning is: <br>  - All access to the database in the system is done through DAO for encapsulation. <br>  - Each DAO instance is responsible for one primary domain object or entity.  If a domain object has an independent life cycle, it must have its own DAO. <br>  - DAO is responsible for creating, reading (by primary key), updating and deleting (that is, CRUD (create, read, update, delete)) domain object. <br>  - The DAO may allow queries based on criteria other than the primary key.  I refer to such methods as finder or finders.  The finder method usually returns a collection of domain objects for which the DAO is responsible. <br>  - DAO does not handle transactions, sessions or connections.  This is done outside of DAO for flexibility. <br>  More details always tell Google. <br><br>  We will write DAO for our products for now. <br>  So, think about what we need.  The Product table will have 4 fields Id, nameProduct, available + amount + actionForServlet.  We will need it to create categories on our site.  Over the last field do not bother.  The only thing we need is a list of products. <br><br>  We write the interface <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductDAO</span></span></span><span class="hljs-class"> </span></span>{ ProductDAO INSTANCE_PRODUCT= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductDAOImpl(); <span class="hljs-function"><span class="hljs-function">List&lt;Product&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProducts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//       }</span></span></code> </pre><br><br>  The implementation of our interface.  Explanations look in the code <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/* * To change this template, choose Tools | Templates * and open the template in the editor. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> edu.shop.model.dao; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.Criteria; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.Session; <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> Mikhail Shumenko */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductDAOImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductDAO</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Product&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProducts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;Product&gt; result = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ,      // ,  -    ,     ,    . Session session = HibernateUtil.getSessionFactory().openSession(); try { session.beginTransaction().begin(); //Criteria          // , ,    //    -,  .       Cart   //   Cart.class Criteria criteria = session.createCriteria(Product.class); result = (List&lt;Product&gt;) criteria.list(); session.getTransaction().commit } catch (Exception e) { //   .        . e.printStackTrace(); }finally { if (session != null) session.close(); } return result; } }</span></span></code> </pre><br><br>  So, now we have the opportunity to receive data from the database.  You can use scripts to create a simple for-each loop and bring your products to your index.jsp page. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">border</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cellspacing</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cellpadding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> //INSTANCE_PRODUCT    ? // ProductDAO   ,    ProductDAOImpl //     -,     . //ProductDAO INSTANCE_PRODUCT= new ProductDAOImpl(); <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Product</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">product</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:ProductDAO.INSTANCE_PRODUCT.getProducts</span></span></span><span class="hljs-tag">()) {%&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&lt;%=product.getActionForServlet()%&gt;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=product.getName()%</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%}%</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Product</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">product</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ProductDAO.INSTANCE_PRODUCT.getProducts</span></span></span><span class="hljs-tag">()) {%&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=product.getAvailable()%</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%}%</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  But this is for the first time, but in general it is bad to do so.  This breaks our MVC pattern.  How to do it correctly, I will explain in the next lesson, if they give me an invite.  In the second lesson, we will deal with Spring, in the third we will touch the Factory pattern, and dive into the hibernate.  For especially impatient, I will show you how to remove from the database, save to the database and delete everything from the database completely.  Well, how to make it all interact as a whole with our application and leave a detailed review for later. <br><br><h4>  Save to DB </h4><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItemToCart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CartEntity cart)</span></span></span><span class="hljs-function"> </span></span>{ Session session = HibernateUtil.getSessionFactory().openSession(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { session.beginTransaction().begin(); session.save(cart); session.getTransaction().commit(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { ex.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (session != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { session.close(); } } }</code> </pre><br><br><h4>  Remove from database by id </h4><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteItemFromCart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer id)</span></span></span><span class="hljs-function"> </span></span>{ Session session = HibernateUtil.getSessionFactory().openSession(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { session.beginTransaction().begin(); CartEntity itemDelete = (CartEntity) session.get(CartEntity.class, id); session.delete(itemDelete); session.getTransaction().commit(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { ex.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (session != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { session.close(); } } }</code> </pre><br><br><h4>  Deleting group id from database. </h4><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteAllItemToCart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;Integer&gt; idAllItemsInCart)</span></span></span><span class="hljs-function"> </span></span>{ Session session = HibernateUtil.getSessionFactory().openSession(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { session.beginTransaction().begin(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Integer id:idAllItemsInCart){ CartEntity itemDelete = (CartEntity) session.get(CartEntity.class, id); session.delete(itemDelete); } session.getTransaction().commit(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { ex.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (session != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { session.close(); } } }</code> </pre><br><br>  You will also need a Hibernate configuration file.  Create in DB Derby shop.  The username and password of the root user and pass respectively.  If it does not work out - do not be discouraged - I will spend more time on this. <br><br><pre> <code class="java hljs">&lt;?xml version=<span class="hljs-string"><span class="hljs-string">"1.0"</span></span> encoding=<span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>?&gt; &lt;!DOCTYPE hibernate-configuration PUBLIC <span class="hljs-string"><span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span></span> <span class="hljs-string"><span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span></span>&gt; &lt;hibernate-configuration&gt; &lt;session-factory&gt; &lt;property name=<span class="hljs-string"><span class="hljs-string">"hibernate.dialect"</span></span>&gt;org.hibernate.dialect.DerbyDialect&lt;/property&gt; &lt;property name=<span class="hljs-string"><span class="hljs-string">"hibernate.connection.driver_class"</span></span>&gt;org.apache.derby.jdbc.ClientDriver&lt;/property&gt; &lt;property name=<span class="hljs-string"><span class="hljs-string">"hibernate.connection.url"</span></span>&gt;jdbc:derby:<span class="hljs-comment"><span class="hljs-comment">//localhost:1527/shop&lt;/property&gt; &lt;property name="hibernate.connection.username"&gt;root&lt;/property&gt; &lt;property name="hibernate.connection.password"&gt;pass&lt;/property&gt; &lt;property name="connection.characterEncoding"&gt;UTF-8&lt;/property&gt; &lt;property name="hibernate.hbm2ddl.auto"&gt;update&lt;/property&gt; &lt;/session-factory&gt; &lt;/hibernate-configuration&gt;</span></span></code> </pre><br><br>  How to fill out our database talk later.  You can fill them in manually.  Or wait for the next lesson. </div><p>Source: <a href="https://habr.com/ru/post/178865/">https://habr.com/ru/post/178865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178849/index.html">The story of a developer, or shooting at the stars, you will hit the moon</a></li>
<li><a href="../178851/index.html">Remake Race Into Space: how to improve the gameplay and interface?</a></li>
<li><a href="../178855/index.html">EB 122.4. Preparing for the delivery of the third group of electrical safety</a></li>
<li><a href="../178859/index.html">PHP NameSpace - how to cook it?</a></li>
<li><a href="../178861/index.html">Rules for effective meetings</a></li>
<li><a href="../178867/index.html">Usability checklist</a></li>
<li><a href="../178869/index.html">How can I see a regular movie in 3D</a></li>
<li><a href="../178871/index.html">JIRA: create plugins. Framework Features</a></li>
<li><a href="../178875/index.html">MySQL Database Sync Overview</a></li>
<li><a href="../178877/index.html">Using schema.org markup for company logos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
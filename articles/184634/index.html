<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing in Yandex. Matchers: when they are useful and how easy it is to use them</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you could guess from the picture on the right, we‚Äôll talk about automated testing. More precisely about such technology as matchers. They help to s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing in Yandex. Matchers: when they are useful and how easy it is to use them</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e1c/4f2/75e/e1c4f275efb76d296c6ae9e305e32910.gif" width="1" height="1"> <a href="http://habrahabr.ru/company/yandex/blog/184634/"><img src="https://habrastorage.org/getpro/habr/post_images/149/ca2/a03/149ca2a03b707e1297707be85d8fb85f.png" width="250" height="249" align="right" alt="Oranges have nothing to do with it"></a>  As you could guess from the picture on the right, we‚Äôll talk about automated testing.  More precisely about such technology as matchers.  They help to seriously reduce duplication of code and simplify the code of tests for perception, and creating and using matchmakers is quite simple. <br><br>  By itself, the technology of the matchrs is not new - in its current form, it was poured into the repository in July 2012, but it appeared even earlier.  But despite this, many people have not heard about it yet or are avoiding it for some reason.  We want to tell how easy it is to take advantage of its use, and share with you our library of matchmakers. <br><a name="habracut"></a><br>  Suppose we have a set of some fruits.  Among them, the most common round, orange and sweet. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fruit</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Color </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{...} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isSweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{...} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Shape </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getShape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{...} }</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is known that an orange meets these conditions.  In addition to fruit, we also have a conveyor through which such fruit can be passed.  There is also a task for the conveyor - weed out no oranges by conducting a series of tests. <br><br>  And here is luck - we just had an apparatus on hand that knows how to determine if a fruit is sweet and what color it is, compare its shape with a number of well-known ones and carry out many more checks.  This device is called <a href="http://en.wikipedia.org/wiki/JUnit">JUnit</a> . <br><br>  Before starting the test, a new fruit is thrown onto the conveyor. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ someFruit = getNextFruit(); }</code> </pre><br><br>  First we determine that the fruit is round. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeIsRound</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(<span class="hljs-string"><span class="hljs-string">"Expected shape - "</span></span> + Shape.ROUND + <span class="hljs-string"><span class="hljs-string">", but was - "</span></span> + someFruit.getShape(), someFruit.getShape(), Shape.ROUND); }</code> </pre><br><br>  Then that fruit is sweet. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeIsSweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertTrue(<span class="hljs-string"><span class="hljs-string">"Fruit should be sweet - expected TRUE"</span></span>, someFruit.isSweet()); }</code> </pre><br><br>  And finally, let's look at its color. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeHasOrangeColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(<span class="hljs-string"><span class="hljs-string">"Orange has orange color, but was - "</span></span> + someFruit.getColor(), someFruit.getColor(), Color.ORANGE); }</code> </pre><br><br>  Which cons are immediately obvious?  First, in each of the checks it was necessary to stick together a comment from the expected value, actual value, value of additional refinements and different interjections.  Even the description of this list is tiring. <br><br>  Secondly, imagine that we decided to define also a sort of oranges, added a special ‚Äútaster‚Äù for this and told him: ‚ÄúApprove only the sort‚Äú Valencia ‚Äù‚Äù.  But the "taster" does not know that he decided to check the machine, if he does not ask himself - the machine is not talkative.  As a result, he will try everything.  In order not to poison the ‚Äútaster‚Äù with a ball that you did not have time to check for sweetness, you need to teach him to ignore everything that is superfluous.  To do this, he needs to ask the machine separately and independently, after which everything discarded is put aside and no longer touch. <br><br>  A taster is just one more test in our JUnit machine, so you can and should use the built-in runtime mechanism to ignore the test - assume.  Then the scenario of starting the tasting will look like this. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">degusto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assumeTrue(<span class="hljs-string"><span class="hljs-string">"Expected shape - "</span></span> + Shape.ROUND + <span class="hljs-string"><span class="hljs-string">", but was - "</span></span> + someFruit.getShape(), someFruit.getShape().equals(Shape.ROUND)); assumeTrue(<span class="hljs-string"><span class="hljs-string">"Fruit should be sweet - expected TRUE"</span></span>, someFruit.isSweet()); assumeTrue(<span class="hljs-string"><span class="hljs-string">"Orange has orange color, but was - "</span></span> + someFruit.getColor(), someFruit.getColor().equals(Color.ORANGE)); <span class="hljs-comment"><span class="hljs-comment">//        . }</span></span></code> </pre><br><br>  It is well seen that each new ‚Äútaster‚Äù with this scenario description has two ways - copy-paste the script or make a new method for each set of pre-checks.  And in each pretesting you need to take care of drawing up a message about the reason for rejection.  Any of these options is difficult to maintain and very scary to perceive. <br><br>  On top of that, you have to <code>assertEquals</code> , <code>assertNotEquals</code> , <code>assertNotNull</code> , <code>assertArrayEquals</code> , etc.  In the standard JUnit distribution, these assert * are in almost every trivial case.  And some more - for each type of argument.  That is, the verification logic is enclosed in the name of the method and is strictly tied to its implementation.  Now imagine how much code would need to be duplicated and maintained, if for each assert * you had to do the same assume *. <br><br>  So, it is necessary to separate the logic of the test itself, the description output and the decision function: <br><br><ul><li>  reject - assert, </li><li>  ignore - assume </li><li>  as well as filtering, looking for the right ones, sifting, changing, etc. </li></ul><br>  This is where the gamers come in - small objects that contain decision-making logic, they know what they were waiting for and what they got, what they report on themselves.  The first three checks with the help of matchers describe the action almost poetically.  And it can be read by anyone who wants to know what the script is doing. <br><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeIsRoundWithMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThat(someFruit, is(round())); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeIsSweetWithMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThat(someFruit, is(sweet())); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeHasColorWithMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThat(someFruit, hasColor(Color.ORANGE)); }</code> </pre><br><br>  For such beauty, there is a special library <a href="https://code.google.com/p/hamcrest/wiki/Tutorial">Hamcrest</a> .  It contains both the interface for the implementation, and the methods of <b>assertThat</b> and <b>assumeThat</b> (the latter, in fact, is inside JUnit, but uses the interface from Hamcrest).  They ask the matcher about the object, making a decision. <br><br>  Starting with version 4.11, Hamcrest has a version not lower than 1.3 in JUnit dependencies.  It was she who introduced the interface, which implements everything described later.  Therefore, using maven, it is enough to connect JUnit 4.11, and the minimum necessary set of tools is ready to use.  And for a complete set of all available matchrs from the Hamcrest delivery, you will need the hamcrest-all artifact, which can be connected separately. <br><br>  <a href="">This is what your pom might look like</a> . <br><br><h4>  How it works? </h4><br>  The library has an abstract class <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit) ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code></code> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <ul><li> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </li> <li> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </li> <li> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </li> </ul> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <pre> <code class="hljs java"><code>TypeSafeMatcher,     .      : <br> <br> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî  , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function">  ,  ,       ‚Äî      </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">null</span></span></span></span></code><span class="hljs-function"><span class="hljs-function">    . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> , </span></span><a href=""><span class="hljs-function"><span class="hljs-function">,   ,</span></span></a><span class="hljs-function"><span class="hljs-function">  : </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><code class="java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shape expected; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShapeMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shape expected)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expected = expected; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expected.equals(fruit.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span><span class="hljs-function"> </span></span>{ mismatchDescription.appendText(<span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>).appendValue(item.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span><span class="hljs-function"> </span></span>{ description.appendText(<span class="hljs-string"><span class="hljs-string">"shape - "</span></span>).appendValue(expected); } <span class="hljs-meta"><span class="hljs-meta">@Factory</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ShapeMatcher </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        <span class="hljs-number"><span class="hljs-number">3</span></span> : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Matchers</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasShape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Shape shape)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), <span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>, <span class="hljs-string"><span class="hljs-string">"shape -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Shape </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getShape(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasShape(Shape.ROUND); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Boolean&gt;(is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>), <span class="hljs-string"><span class="hljs-string">"fruit should be sweet"</span></span>, <span class="hljs-string"><span class="hljs-string">"sweet -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.isSweet(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Color color)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), <span class="hljs-string"><span class="hljs-string">"fruit have color - "</span></span>, <span class="hljs-string"><span class="hljs-string">"color -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeBothSweetRoundAndOrangeColorWithMatchers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">  </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,    , ‚Äî       . ,                 .      ‚Äî   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="java"><span class="hljs-comment"><span class="hljs-comment">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,   :     .   ‚Äî ,         ,   </span></span><code><span class="hljs-comment"><span class="hljs-comment">hasItem()</span></span></code><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">   </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       </span></span><a href="https://github.com/yandex-qatools/matchers-java"><span class="hljs-comment"><span class="hljs-comment">github.com/yandex-qatools/matchers-java</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code> </pre> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <h4> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </h4> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <ul><li> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </li> <li> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </li> <li> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </li> </ul> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <pre> <code class="hljs java"><code>TypeSafeMatcher,     .      : <br> <br> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî  , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function">  ,  ,       ‚Äî      </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">null</span></span></span></span></code><span class="hljs-function"><span class="hljs-function">    . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> , </span></span><a href=""><span class="hljs-function"><span class="hljs-function">,   ,</span></span></a><span class="hljs-function"><span class="hljs-function">  : </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><code class="java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shape expected; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShapeMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shape expected)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expected = expected; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expected.equals(fruit.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span><span class="hljs-function"> </span></span>{ mismatchDescription.appendText(<span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>).appendValue(item.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span><span class="hljs-function"> </span></span>{ description.appendText(<span class="hljs-string"><span class="hljs-string">"shape - "</span></span>).appendValue(expected); } <span class="hljs-meta"><span class="hljs-meta">@Factory</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ShapeMatcher </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        <span class="hljs-number"><span class="hljs-number">3</span></span> : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Matchers</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasShape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Shape shape)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), <span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>, <span class="hljs-string"><span class="hljs-string">"shape -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Shape </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getShape(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasShape(Shape.ROUND); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Boolean&gt;(is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>), <span class="hljs-string"><span class="hljs-string">"fruit should be sweet"</span></span>, <span class="hljs-string"><span class="hljs-string">"sweet -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.isSweet(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Color color)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), <span class="hljs-string"><span class="hljs-string">"fruit have color - "</span></span>, <span class="hljs-string"><span class="hljs-string">"color -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeBothSweetRoundAndOrangeColorWithMatchers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">  </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,    , ‚Äî       . ,                 .      ‚Äî   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="java"><span class="hljs-comment"><span class="hljs-comment">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,   :     .   ‚Äî ,         ,   </span></span><code><span class="hljs-comment"><span class="hljs-comment">hasItem()</span></span></code><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">   </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       </span></span><a href="https://github.com/yandex-qatools/matchers-java"><span class="hljs-comment"><span class="hljs-comment">github.com/yandex-qatools/matchers-java</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code> </pre> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <h4> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </h4> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <pre> <code class="hljs java"><code>TypeSafeMatcher,     .      : <br> <br> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî  , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function">  ,  ,       ‚Äî      </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">null</span></span></span></span></code><span class="hljs-function"><span class="hljs-function">    . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> , </span></span><a href=""><span class="hljs-function"><span class="hljs-function">,   ,</span></span></a><span class="hljs-function"><span class="hljs-function">  : </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><code class="java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shape expected; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShapeMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shape expected)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expected = expected; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expected.equals(fruit.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span><span class="hljs-function"> </span></span>{ mismatchDescription.appendText(<span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>).appendValue(item.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span><span class="hljs-function"> </span></span>{ description.appendText(<span class="hljs-string"><span class="hljs-string">"shape - "</span></span>).appendValue(expected); } <span class="hljs-meta"><span class="hljs-meta">@Factory</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ShapeMatcher </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        <span class="hljs-number"><span class="hljs-number">3</span></span> : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Matchers</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasShape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Shape shape)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), <span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>, <span class="hljs-string"><span class="hljs-string">"shape -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Shape </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getShape(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasShape(Shape.ROUND); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Boolean&gt;(is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>), <span class="hljs-string"><span class="hljs-string">"fruit should be sweet"</span></span>, <span class="hljs-string"><span class="hljs-string">"sweet -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.isSweet(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Color color)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), <span class="hljs-string"><span class="hljs-string">"fruit have color - "</span></span>, <span class="hljs-string"><span class="hljs-string">"color -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeBothSweetRoundAndOrangeColorWithMatchers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">  </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,    , ‚Äî       . ,                 .      ‚Äî   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="java"><span class="hljs-comment"><span class="hljs-comment">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,   :     .   ‚Äî ,         ,   </span></span><code><span class="hljs-comment"><span class="hljs-comment">hasItem()</span></span></code><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">   </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       </span></span><a href="https://github.com/yandex-qatools/matchers-java"><span class="hljs-comment"><span class="hljs-comment">github.com/yandex-qatools/matchers-java</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code> </pre> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <pre> <code class="hljs java"><code>TypeSafeMatcher,     .      : <br> <br> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî  , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   , </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span></span></code><span class="hljs-function"><span class="hljs-function"> ‚Äî   . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function">  ,  ,       ‚Äî      </span></span><code><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">null</span></span></span></span></code><span class="hljs-function"><span class="hljs-function">    . </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> , </span></span><a href=""><span class="hljs-function"><span class="hljs-function">,   ,</span></span></a><span class="hljs-function"><span class="hljs-function">  : </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><br><span class="hljs-function"><span class="hljs-function"> </span></span><code class="java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shape expected; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShapeMatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shape expected)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.expected = expected; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">matchesSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> expected.equals(fruit.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeMismatchSafely</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit item, Description mismatchDescription)</span></span></span><span class="hljs-function"> </span></span>{ mismatchDescription.appendText(<span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>).appendValue(item.getShape()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">describeTo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Description description)</span></span></span><span class="hljs-function"> </span></span>{ description.appendText(<span class="hljs-string"><span class="hljs-string">"shape - "</span></span>).appendValue(expected); } <span class="hljs-meta"><span class="hljs-meta">@Factory</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ShapeMatcher </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        <span class="hljs-number"><span class="hljs-number">3</span></span> : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Matchers</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasShape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Shape shape)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), <span class="hljs-string"><span class="hljs-string">"fruit has shape - "</span></span>, <span class="hljs-string"><span class="hljs-string">"shape -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Shape </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getShape(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">round</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hasShape(Shape.ROUND); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Boolean&gt;(is(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>), <span class="hljs-string"><span class="hljs-string">"fruit should be sweet"</span></span>, <span class="hljs-string"><span class="hljs-string">"sweet -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.isSweet(); } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Matcher&lt;Fruit&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Color color)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), <span class="hljs-string"><span class="hljs-string">"fruit have color - "</span></span>, <span class="hljs-string"><span class="hljs-string">"color -"</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">featureValueOf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Fruit fruit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">orangeBothSweetRoundAndOrangeColorWithMatchers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">  </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,    , ‚Äî       . ,                 .      ‚Äî   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="java"><span class="hljs-comment"><span class="hljs-comment">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,   :     .   ‚Äî ,         ,   </span></span><code><span class="hljs-comment"><span class="hljs-comment">hasItem()</span></span></code><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment">   </span></span></a><span class="hljs-comment"><span class="hljs-comment"> . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">       </span></span><a href="https://github.com/yandex-qatools/matchers-java"><span class="hljs-comment"><span class="hljs-comment">github.com/yandex-qatools/matchers-java</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code> </pre> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> <h4> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </h4> <code><code>TypeSafeMatcher,     .      : <br> <br> public boolean matchesSafely(Fruit fruit)</code> ‚Äî  , <code>public void describeTo(Description description)</code> ‚Äî   , <code>protected void describeMismatchSafely(Fruit item, Description mismatchDescription)</code> ‚Äî   . <br> <br>  ,  ,       ‚Äî      <code>null</code>    . <br> <br> , <a href="">,   ,</a>  : <br> <br> <code class="java">public class ShapeMatcher extends TypeSafeMatcher&lt;Fruit&gt; { private Shape expected; public ShapeMatcher(Shape expected) { this.expected = expected; } @Override public boolean matchesSafely(Fruit fruit) { return expected.equals(fruit.getShape()); } @Override protected void describeMismatchSafely(Fruit item, Description mismatchDescription) { mismatchDescription.appendText("fruit has shape - ").appendValue(item.getShape()); } @Override public void describeTo(Description description) { description.appendText("shape - ").appendValue(expected); } @Factory public static ShapeMatcher round() { return new ShapeMatcher(Shape.ROUND); } }</code> <br> <br>    . ,  ,  ,        ,         ‚Äî   ! <br> <br>      <br>  , , , ,         .     ‚Äî     .       Java    <code>FeatureMatcher&lt;WhatWeGet, WhatWeWannaCheck&gt;</code> ,   :           . <br> <br>        3 : <br> <br> ,    <i>WhatWeWannaCheck</i> ,   (    ),    (   - ) <br>   ,   f <code>eatureValueOf</code>            .     Hamcrest     . <br> <br>     ,    <a href=""></a> ,   . <br> <br> <code class="java">public class Matchers { public static Matcher&lt;Fruit&gt; hasShape(final Shape shape) { return new FeatureMatcher&lt;Fruit, Shape&gt;(equalTo(shape), "fruit has shape - ", "shape -") { @Override protected Shape featureValueOf(Fruit fruit) { return fruit.getShape(); } }; } public static Matcher&lt;Fruit&gt; round() { return hasShape(Shape.ROUND); } public static Matcher&lt;Fruit&gt; sweet() { return new FeatureMatcher&lt;Fruit, Boolean&gt;(is(true), "fruit should be sweet", "sweet -") { @Override protected Boolean featureValueOf(Fruit fruit) { return fruit.isSweet(); } }; } public static Matcher&lt;Fruit&gt; hasColor(Color color) { return new FeatureMatcher&lt;Fruit, Color&gt;(equalTo(color), "fruit have color - ", "color -") { @Override protected String featureValueOf(Fruit fruit) { return fruit.getColor(); } }; } }</code> <br> <br> Feel the POWER OF MATCHERS <br>      ‚Äî   .    Hamcrest     : allOf, anyOf, both, either.         ,      . <br> <br>  ,     ¬´¬ª   : <br> <code class="java"> @Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assumeThat(someFruit, both(round()).and(sweet()).and(hasColor(Color.ORANGE))); //    }</code> <br> <br> <a href="">  </a> . <br> <br>     ,    , ‚Äî       . ,                 .      ‚Äî   : <br> <code class="java">@Test public void orangeBothSweetRoundAndOrangeColorWithMatchers() throws Exception { assertThat(someFruitList, everyItem(both(round()).and(sweet()).and(hasColor(Color.ORANGE)))); }</code> <br>  ,   :     .   ‚Äî ,         ,   <code>hasItem()</code> . <br> <br> <a href="">   </a> . <br> <br>     <br>    ,             .        ,    ‚Äî  ,   - .     ,     , ‚Äî ,   .           ,       -.          . <br> <br>       <a href="https://github.com/yandex-qatools/matchers-java">github.com/yandex-qatools/matchers-java</a> .</code> </div><p>Source: <a href="https://habr.com/ru/post/184634/">https://habr.com/ru/post/184634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../184620/index.html">Game console Ouya went on sale for 99 dollars</a></li>
<li><a href="../184622/index.html">DRAM inventor won Kyoto award</a></li>
<li><a href="../184624/index.html">[ANNOUNCEMENT] External battery case [CC-E960] 4500mAh for Google LG Nexus 4</a></li>
<li><a href="../184626/index.html">Firefox 22 release</a></li>
<li><a href="../184632/index.html">Customer Satisfaction Assessment</a></li>
<li><a href="../184636/index.html">Fire and geeks</a></li>
<li><a href="../184642/index.html">On the nature of thinking. Private opinion</a></li>
<li><a href="../184644/index.html">Video review Sony Xperia Z Ultra. Buy stalks separately</a></li>
<li><a href="../184648/index.html">Salaries of Ukrainian developers - May-June 2013</a></li>
<li><a href="../184650/index.html">Review of iOS 7 Beta 2 on iPad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Joystick on AT91SAM7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 It so happened that my baby, as befits a boy, is fond of cars. When he grew to 5 years old, he started playing Master Rally simulator. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Joystick on AT91SAM7</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  It so happened that my baby, as befits a boy, is fond of cars.  When he grew to 5 years old, he started playing Master Rally simulator.  Playing alone is not interesting, so I began to take part in it.  It soon became clear that discrete keyboard control did not allow me to compete equally and fight for victory.  Then I thought about the second wheel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/256/64f/32e/25664f32e79cea62f98e296761a58342.jpg" alt="image"><br><br>  It turned out that every time to get and install 2 steering wheels is not an easy and very annoying procedure.  So I decided to buy a pistol-type joystick - how to control radio-controlled cars. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/649/36c/2ae/64936c2ae3a27a337fd6d320b491e300.jpg" alt="image"></div><br><br>  Searching on the Internet, I realized that these are not produced and not sold.  Since I was already familiar with the AT91SAM7 controller, I quickly decided to make a USB joystick based on it using the simplest joystick from an old radio-controlled toy.  This article describes how to do this.  I've been using it for a year now, but I decided to share it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34d/f58/1f4/34df581f4a7ba6935a3fbe9ed0b531c1.jpg" alt="image"></div><a name="habracut"></a><br><h3>  What to use? </h3><br>  The joystick is made on the basis of the Olimex debug <a href="https://www.olimex.com/Products/ARM/Atmel/SAM7-H256/">board</a> .  You can read more about this board in this <a href="https://yadi.sk/i/cptSXoZci7gKp">document</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fdb/7eb/4a6/fdb7eb4a67aa7270528186ca90db280d.jpg" alt="image"><br><br>  We also need a joystick from some old radio-controlled toy and a USB cable.  That's what happened in the end.  A standard joystick with 3 buttons and two LEDs was added to the debug board.  The most difficult element of the design was the connection of the trigger with a variable resistor R1.  (See <a href="https://yadi.sk/i/UGy0K0dji8yzY">diagram</a> ). Here I used a resistor with a non-linear characteristic to obtain a larger change in resistance at a small angle of rotation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e48/27b/730/e4827b730a9bbad057da3585beaca303.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/dad/5b4/89c/dad5b489c5b381de2cc446d1af7e1a7f.jpg" alt="image"><br><br>  Initially, the return spring on the steering wheel was missing (Resistor R2).  But practice has shown that it is difficult to control, because the fingers do not feel the current position of the steering wheel, which leads to a violation of the tactile feedback between the steering wheel and the person.  The photo below shows how the spring is installed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c14/1c0/2f7/c141c02f7eee3adb72af2fb11aa7ef54.jpg" alt="image"><br><cut></cut><br><br><h3>  Scheme </h3><br>  This is the <a href="https://yadi.sk/i/UGy0K0dji8yzY">scheme</a> : <br><img src="https://habrastorage.org/getpro/habr/post_images/508/726/573/508726573c584fba3ff3aedba30ac4fa.jpg" alt="image"><br>  It is necessary to add that variable resistors can be from 1 to 15 kŒ©, and preferably with a linear characteristic for the steering wheel, for gas and brakes - at will.  At first I put the old wire (as I thought more reliable) resistor on the steering wheel, but after a couple of months it died, so it was replaced with the usual imported one, which turned out to be more reliable.  LED VD1 flashing, it flashes short flashes, if the device is successfully connected to the computer.  VD2 lights up when the S3 button is turned on. <br><br><h3>  Software </h3><br>  For writing programs used examples from the disk company Atmel, which are freely available on the Internet.  Here <a href="https://yadi.sk/d/HnkDMm0bi8zKn">you can find a project</a> .  In this project is a working binary for version AT91SAM7S256.  (\ Mouse \ FLASH \ Exe \ USB.bin) It can be directly poured into the controller.  For version S64, the binary is not checked directly when writing a blog.  Those who want to tinker or change something can set themselves an IAR Systems environment and indulge.  The advantage of the project is that it does not require a special driver for Windows XP or 7, it is picked up by the system as a standard joystick.  If you wish, you can change the number of buttons and axes.  The controller contains an 8-channel ADC and many ports.  To program the controller through the USB port, you need to use the SAM-BA 2.15 program.  All information and this program is available on the Atmel website. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e3/2f4/0fb/2e32f40fb9633d1a61ca5e0cd5edb277.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/336870/">https://habr.com/ru/post/336870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336858/index.html">Entertaining math with colored cubes</a></li>
<li><a href="../336860/index.html">How to hash passwords in high-load services. Yandex experience</a></li>
<li><a href="../336864/index.html">Getting ready for Java 9. Review of the most interesting improvements.</a></li>
<li><a href="../336866/index.html">Big Data and Odnoklassniki: what they do with the data in the 2nd most visited social network in Russia</a></li>
<li><a href="../336868/index.html">How to write a good SLA</a></li>
<li><a href="../336872/index.html">Creating an IT self-service portal using the example of MS SCCM and ServiceNow integration. Part 1</a></li>
<li><a href="../336874/index.html">Event digest for HR specialists in the IT field for September 2017</a></li>
<li><a href="../336876/index.html">Creating a programming language using LLVM. Part 8: Compile to Object Code</a></li>
<li><a href="../336878/index.html">We work on the Federal Law-54: How to automate couriers to meet the new requirements of the law?</a></li>
<li><a href="../336880/index.html">News online courses Mail.Ru Group: "Programming in Python"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Form Designer in Yii</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi habrayuzer! 

 In the majority of projects on Yii that I saw, work with forms was organized in the simplest way, where the rendering of the form wa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Form Designer in Yii</h1><div class="post__text post__text-html js-mediator-article">  Hi habrayuzer! <br><br>  In the majority of projects on Yii that I saw, work with forms was organized in the simplest way, where the rendering of the form was defined in the view file through the ActiveForm widget.  Yes, this is certainly justified for complex shapes that are problematic to fit into a pattern.  But today I want to talk about the form designer and show how we apply it. <br><a name="habracut"></a><br>  If you have little idea what a form designer is, then first I advise you to familiarize yourself with the relevant section of the documentation <a href="http://www.yiiframework.ru/doc/guide/ru/form.builder">www.yiiframework.ru/doc/guide/ru/form.builder</a> . <br><br>  It's simple.  We work with forms based on the principle ‚Äúdo not mix form models and table models‚Äù.  And the idea is to add form design functionality to the form model. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To do this, create a class from which our forms will be inherited.  Those.  let's make it so that the form model itself determines the rendering based on the shape configuration. <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * FormModel. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@author</span></span></span><span class="hljs-comment"> Andrey Nilov &lt;nilov</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@glavweb</span></span></span><span class="hljs-comment">.ru&gt; * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@copyright</span></span></span><span class="hljs-comment"> Copyright (c) 2007-2012 Glavweb.Soft, Russia. (http://glavweb.ru) */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FormModel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CFormModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Config of the form * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $_formConfig = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-comment"><span class="hljs-comment">/** * Config of the form by default * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_defaultFormConfig = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'method'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'post'</span></span> ); <span class="hljs-comment"><span class="hljs-comment">/** * Class name of form * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $_formClass = <span class="hljs-string"><span class="hljs-string">'CForm'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Object of Form * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> Form */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $_form = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Constructor * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $scenario Name of the scenario that this model is used in * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($scenario = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($scenario); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_setFormConfig(); } <span class="hljs-comment"><span class="hljs-comment">/** * Sets config of the form * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_setFormConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig = array_replace_recursive( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_defaultFormConfig, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig() ); } <span class="hljs-comment"><span class="hljs-comment">/** * Returns config of the form * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_formConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig; } <span class="hljs-comment"><span class="hljs-comment">/** * Returns the attribute labels * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array Attribute labels (name=&gt;label) */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributeLabels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getLabels(); } <span class="hljs-comment"><span class="hljs-comment">/** * Returns the config of the form * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFromConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig; } <span class="hljs-comment"><span class="hljs-comment">/** * Sets the config of the form * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> array $config * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> void */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFromConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig = $config; } <span class="hljs-comment"><span class="hljs-comment">/** * Returns labels * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLabels</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $labels = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig[<span class="hljs-string"><span class="hljs-string">'elements'</span></span>])) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig[<span class="hljs-string"><span class="hljs-string">'elements'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $name =&gt; $data) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($data[<span class="hljs-string"><span class="hljs-string">'label'</span></span>])) { $labels[$name] = $data[<span class="hljs-string"><span class="hljs-string">'label'</span></span>]; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $labels; } <span class="hljs-comment"><span class="hljs-comment">/** * Returns object of Form * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> Form */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_form === <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formClass(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_formConfig, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_form; } }</code> </pre> <br><br>  Go through the class in more detail.  The array "$ _formConfig" allows you to set the configuration of the form.  For example: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Config of the form * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> array */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $_formConfig = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'activeForm'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'CActiveForm'</span></span>, <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'registration_form'</span></span>, <span class="hljs-string"><span class="hljs-string">'enableClientValidation'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'clientOptions'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'validateOnSubmit'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ) ), <span class="hljs-string"><span class="hljs-string">'elements'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( .... <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ), <span class="hljs-string"><span class="hljs-string">'organization'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ), .... ), <span class="hljs-string"><span class="hljs-string">'buttons'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'register'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'submit'</span></span>, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ) ) );</code> </pre><br>  You can also override the "_formConfig ()" method to configure a form.  This is convenient when you need to implement some logic during configuration. <br><br>  The property "$ _formClass" allows you to change the class that is used to display the form (CForm or its descendant). <br><br>  Note that now you do not need to specify the attributes of the form.  To do this, we redefined the ‚ÄúattributeLabels ()‚Äù method and now attributes are equal to labels from the form configuration. <br><br>  You can get the form object (CForm) using the getForm () method. <br><br><h5>  Using. </h5><br>  Rendering Forms: <br><pre> <code class="php hljs">$formModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegistrationForm(); $form = $formModel-&gt;getForm(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $form;</code> </pre><br><br>  Use with table model. <br><pre> <code class="php hljs">$user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(); $user-&gt;setAttributes($formModel-&gt;getAttributes()); $result = $user-&gt;save();</code> </pre><br><br>  Customize the display form.  For each element in "$ _formConfig" we can specify our template with overriding the "layout" property: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $_formConfig = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( .... <span class="hljs-string"><span class="hljs-string">'elements'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( .... <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'layout'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"{input}\n{label}\n{hint}\n{error}"</span></span> ), .... ),</code> </pre><br><br><h5>  Auto add colon. </h5><br>  One of the problems that arose when using the form designer is the inability to automatically add a colon after the field header.  If a colon is inserted into the form's configuration in the label, it will also be visible when displaying errors.  To fix this, we expand the classes ‚ÄúCForm‚Äù and ‚ÄúCFormInputElement‚Äù and slightly fix our ‚ÄúFormModel‚Äù. <br><br>  In the "FormModel" add: <br><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * Automatically add a colon in time rendering * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> boolean */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $autoAddColonForRender = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br>  And change $ _formClass <br><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * Class name of form * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $_formClass = <span class="hljs-string"><span class="hljs-string">'Form'</span></span>;</code> </pre><br><br>  Create a new class ‚ÄúForm‚Äù, a successor of ‚ÄúCForm‚Äù, override the property "$ inputElementClass". <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Form</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CForm</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * The name of the class for representing a form input element. * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $inputElementClass = <span class="hljs-string"><span class="hljs-string">'FormInputElement'</span></span>; }</code> </pre><br><br>  Create a class "FormInputElement" (the successor of "CFormInputElement"), override the method "renderLabel ()" <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FormInputElement</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CFormInputElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string the layout used to render label, input, hint and error. They correspond to the placeholders * "{label}", "{input}", "{hint}" and "{error}". */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $layout = <span class="hljs-string"><span class="hljs-string">"{label}\n{input}\n{error}\n{hint}"</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Automatically add a colon in time rendering * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> boolean */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $addColon = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * Renders the label for this input. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renderLabel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $model = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getParent()-&gt;getModel(); $addColon = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addColon !== <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addColon : $model <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> FormModel &amp;&amp; $model-&gt;autoAddColonForRender; $label = $addColon ? <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getLabel() . <span class="hljs-string"><span class="hljs-string">':'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getLabel(); $options = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; $label, <span class="hljs-string"><span class="hljs-string">'required'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getRequired() ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes[<span class="hljs-string"><span class="hljs-string">'id'</span></span>])) { $options[<span class="hljs-string"><span class="hljs-string">'for'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;attributes[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CHtml::activeLabel(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getParent()-&gt;getModel(), <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name, $options); } }</code> </pre><br><br>  Now using the property "$ autoAddColonForRender" in the "FormModel" it is possible to automatically add a colon after the label for all form elements.  Or define it for each form element separately during the configuration of the form, by setting the corresponding value in "addColon". <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $_formConfig = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( .... <span class="hljs-string"><span class="hljs-string">'elements'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( .... <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'addColon'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ), .... ),</code> </pre><br><br>  That's all for today, thanks to everyone who read to the end.  Objective criticism is welcome. </div><p>Source: <a href="https://habr.com/ru/post/155127/">https://habr.com/ru/post/155127/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155113/index.html">Metropolis or Windows 8 through the eyes of Delphi programmers</a></li>
<li><a href="../155115/index.html">How does apache cassandra work?</a></li>
<li><a href="../155119/index.html">How to search and find the best employees in the mobile mode?</a></li>
<li><a href="../155121/index.html">Virtual walk through Google data centers</a></li>
<li><a href="../155125/index.html">We build a universal, USB machine charging (attempt the number of times)</a></li>
<li><a href="../155129/index.html">Deploying RemoteFX on Windows Server 2012</a></li>
<li><a href="../155131/index.html">FiM ++</a></li>
<li><a href="../155135/index.html">Implementing Enhanced Write Filter (EWF)</a></li>
<li><a href="../155141/index.html">LG Optimus VU - Wunderwaffe</a></li>
<li><a href="../155145/index.html">Android applications using Admob ads began to fall massively</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
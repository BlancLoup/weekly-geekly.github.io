<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why Intel processors consume more than expected: requirements for heat sink and turbo mode</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, a community of fans of self-assembly PC permeated the topic of energy consumption. Intel's newest eight-core processors have a TDP of 95 wat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why Intel processors consume more than expected: requirements for heat sink and turbo mode</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/0d5/996/568/0d599656876498476895cb8893ca749d.jpg"><br><br>  Recently, a community of fans of self-assembly PC permeated the topic of energy consumption.  Intel's newest eight-core processors have a <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D1%2580%25D0%25B5%25D0%25B1%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F_%25D0%25BA_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B5_%25D0%25BE%25D1%2585%25D0%25BB%25D0%25B0%25D0%25B6%25D0%25B4%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580%25D0%25B0">TDP of</a> 95 watts, however, users watch how they consume 150-180 watts, which makes no sense at all.  In this manual, we will explain to you why this is happening, and why it causes so many problems for review authors of iron. <br><br><h2>  What is TDP (Thermal Design Power, Heat Sink Requirements) </h2><br>  For each processor, Intel guarantees a certain operating frequency with a certain capacity, often with a specific cooler in mind.  Most people equate TDP to maximum power consumption, given that in calculations the thermal power of the processor that needs to be dissipated is equal to the power it consumes.  And usually TDP denotes the magnitude of this power. <br><a name="habracut"></a><br>  But, strictly speaking, TDP refers to the cooler's power dissipation capabilities.  TDP is the minimum cooler capability that guarantees the indicated efficiency.  Part of the energy is dissipated through the socket and motherboard, which means that the cooler rating may be lower than TDP, but in most discussions TDP and power consumption usually meant the same thing: how much power the processor consumes under load. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/41c/ef0/4f7/41cef04f7ede2c4d1c33b0a7a6174327.png"><br><br>  As part of the TDP system can be installed in the firmware.  If the processor used TDP as the maximum power limit, then we would see how the same measurement program generates similar graphics for high-power processors with multiple cores. <br><br>  In recent years, Intel has used this definition of TDP.  For any given processor, Intel guaranteed an operating frequency (base frequency) for a specific power - TDP.  This means that the processor type 65 W Core i7-8700, with the usual frequency of 3.2 GHz, and 4.7 GHz in <a href="https://ru.wikipedia.org/wiki/Turbo_Boost">turbo mode</a> , is guaranteed to consume up to 65 W only when operating at a frequency of 3.2 GHz.  Intel does not guarantee the effective operation of the above 3.2 GHz and 65 watts. <br><br>  In addition to the baseline, Intel also uses turbo mode.  Something like the Core i7-8700 can show 4.7 GHz in turbo mode, and consume much more power than a processor running 3.2 GHz.  The turbo mode for all cores on the Core i7-8700 processor operates at 4.3 GHz - much more than the guaranteed 3.2 GHz.  The situation is complicated when the turbo mode does not fall to the base frequency.  That is, if the processor works with a constant excess of TDP, the 65 W cooler you bought (or the one that came with it) will become a bottleneck.  If you need more speed, this cooler should be thrown out and get something better. <br><br>  However, the manufacturer does not tell you this.  If the cooling for the turbo mode is not enough, and the processor reaches the temperature ceiling, then most of the modern process will go into power limit mode, reducing the speed in order to stay within the specified power consumption.  As a result, a fast processor does not reach the limits of its capabilities. <br><br><h2>  So TDP means nothing?  Why did this become a problem just now? </h2><br>  Over the past decade, the method of using the term TDP has not changed, but processors have begun to use their energy budget differently.  The recent appearance of six- and eight-core consumer processors with 4 GHz frequencies means that the new processors with a large load exceed the stated TDP.  In the past, we have seen how quad-core processors with a rated 95 W rating used only 50 watts, even under full load in turbo mode.  And if we add the cores, and we don‚Äôt change the TDP designation on the packaging, then something should change. <br><br><h2>  Secret numbers that are not on the package </h2><br>  Inside each processor, Intel determines several energy levels based on capabilities and expected operating modes.  However, all these energy levels and capabilities can be adjusted at the firmware level, with the result that OEMs decide how these processors will work in their system.  As a result, the value of energy consumption by the processor in the system turns out to be a very vague indicator. <br><br>  For simplicity, you can follow three important values.  Intel calls them PL1 (energy level 1), PL2 (energy level 2) and T (Tau). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e52/b31/d11/e52b31d11fdc1aaaac10f1b6a51fc122.png"><br><br>  PL1 - effective uniform expected energy consumption in the long term.  In essence, PL1 is usually defined as a TDP of a processor.  That is, if TDP is 80 watts, then PL1 is 80 watts. <br><br>  PL2 - short-term maximum processor power consumption.  This value is higher than PL1, and the processor enters this state under load, which allows it to use turbo modes up to the maximum value PL2.  This means that if Intel has identified several turbo modes on the processor, they will work only when PL2 reaches maximum power consumption.  In PL1 mode, the turbo does not work. <br><br>  Tau is a temporary variable.  It determines how long the processor must remain in PL2 mode before rolling back to PL1.  Tau does not depend on the power and temperature of the processor (it is expected that when the temperature limit is reached, another set of extremely low voltage and frequency values ‚Äã‚Äãwill be used, and the PL1 / PL2 system will stop working). <br><br>  Here are the official definitions from Intel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c99/d3d/174/c99d3d174843f082a18778ff260afeaa.png"><br><br>  Let's look at the situation of a heavy load on the processor. <br><br>  First he starts work in PL2 mode.  If the load is single-flow, we must reach the upper value of the turbo, which is indicated in the specification.  Typically, the power consumption of a single core does not come close to the PL2 value of the entire chip.  If we continue to load the cores, the processor will respond, reducing the frequency of the turbo mode in accordance with the core values ‚Äã‚Äãdetermined by Intel.  If the power consumption of the processor reaches the value of PL2, then its frequency is changed so as not to go beyond the scope of PL2. <br><br>  When the system is under serious load for a long period of time, ‚ÄúTau‚Äù seconds, the firmware should switch to PL1 as a new power limit.  Turbo tables are no longer used - they only work with PL2 mode. <br><br>  If the consumption goes beyond PL1, then the frequency and voltage change so that the energy consumption remains within these limits.  That is, the processor completely reduces the frequency from the state of PL2 to the state of PL1 for the duration of the load.  This means that the temperature of the processor should decrease, and this should increase the lifetime of the processor. <br><br>  The PL1 mode works until the load disappears and the kernel goes into idle state for a certain amount of time (usually up to 5 seconds).  After this, the PL2 mode can be switched on again when another large load appears. <br><br>  Here are some examples of quantities - Intel lists several options in the specifications of various processors.  For example, I took the Core i7-8700K.  For this example, the following is true: <br><br> <code>PL1 = TDP = 95  <br> PL2 = TDP * 1.25 = 118.75  <br> Tau = 8 </code> <br> <br><img src="https://habrastorage.org/getpro/habr/post_images/be6/fed/110/be6fed11003a0009767ab63851d8fc87.png"><br><br>  In this case, the system should be able to accelerate to 119 W for eight seconds, and then roll back again to 95 W.  This has been the case for several generations of Intel processors, and for the most part, it didn‚Äôt matter much, since the processor‚Äôs power consumption was often much lower than the PL1 even under full load. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c83/883/1cc/c838831cc576fa17f1863e10cb64bac7.png"><br><br>  However, all the nonsense begins when motherboard manufacturers come into play, since PL1, PL2 and Tau can be configured in the firmware.  For example, in the graph above, you can remove restrictions from PL2, and assign PL1 to 165 W and 95 W. <br><br><h2>  World of random numbers </h2><br>  Basically I will talk about consumer electronics.  Often, PL1, PL2 and Tau are carefully monitored in cooling-limited conditions like laptops or small PCs.  I am familiar with several powerful, and at the same time stylish PC versions, in which PL2 was also equated with TDP, so that the processor could accelerate slightly, but not to such an extent that the load of one or two cores went beyond the TDP. <br><br>  However, in our reviews of the CPU, after the distribution of six-core processors, we often began to see numbers much larger than PL1 or PL2, and this consumption lasts for an arbitrarily long time, unless it goes beyond temperature limits.  Why is this happening? <br><br>  In any modern BIOS, especially among the main manufacturers of motherboards, there will be settings for limiting power (short-term and long-term) and duration.  In most cases, by default, the user does not know what value they are set to, since Auto will be written there, which is the code designation ‚Äúwe know which value to assign them, do not worry‚Äù.  Manufacturers will write the values ‚Äã‚Äãinto memory and use them, but the user will only see Auto.  As a result, you can assign PL2 to 4096 W and make Tau very large, for example, 65535, or -1 (infinity - depends on the BIOS version).  This means that the CPU will operate in turbo mode without interruption until it exceeds the temperature limits. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/004/f97/8e0/004f978e017fe20f365522dd88a7dae3.png"><br><br>  Why do manufacturers do this?  There may be many reasons for this, although the specific reasons may differ from particular manufacturers. <br><br>  First, it means that the user can maintain turbo mode all the time, and each core will work in turbo mode every second.  The results of performance measurements will reach the sky, in reviews or when a user is measured by indicators, everything looks great, <br><br>  Secondly, products are being developed for this.  Intel often with each launch determines the specification of the default motherboard (they even had their own motherboards, which they sold at retail), with a certain number of power phases and with an expected lifetime.  Manufacturers can obviously implement their own options: more power phases, more powerful phases, a special power supply to improve efficiency, etc.  If their board can support the turbo mode of all cores continuously, then why not? <br><br>  Third, manufacturers of more expensive board models know that enthusiasts will use improved cooling systems for them.  If the processor consumes more than 160 watts, and the user has a decent cooling system, then the turbo mode on all cores will improve the product experience.  Intel standards are defined for recommended coolers. <br><br><h2>  So how is it right, who to trust, what's the difference? </h2><br>  Intel sets standards for its parts.  PL1, PL2, Tau, motherboard layout, firmware settings - for everything there are default values ‚Äã‚Äãrecommended by Intel.  Some of them are public, for example, those that Intel indicates in documents, some are confidential (and Intel will not tell us about them, no matter how much we ask).  However, these are still recommended values.  And according to the results, motherboard manufacturers can do whatever they like.  And they do. <br><br>  As a result, for example, it becomes more difficult for me to test equipment because of this.  Different users will want our settings to be: <br>  1. Recommended by Intel, <br>  2. As out of the box, <br>  3. Turned to the maximum. <br><br>  And, of course, the recommendations of Intel will give much lower indicators than out of the box, and the option ‚Äúturned to the maximum‚Äù speaks for itself. <br><br>  It is worth noting that so far in all tests in all reviews of the CPU, hardware was launched on the ‚Äúout of the box‚Äù settings, and not the ‚Äúrecommended by Intel‚Äù settings. <br><br>  To give some context on the measurement values, we used a powerful CPU and <br>  got the following results in a 25-30 second full load test: <br><br><table><tbody><tr><th>  Anandtech </th><th>  PL2 </th><th>  Tau </th><th>  PL1 </th><th>  Result </th></tr><tr><td>  Unlimited </td><td>  4096W </td><td>  999s </td><td>  4096W </td><td>  100% </td></tr><tr><td>  Intel Spec, 165W </td><td>  207W </td><td>  8s </td><td>  165W </td><td>  98% </td></tr><tr><td>  Constant 165W </td><td>  165W </td><td>  1s </td><td>  165W </td><td>  94% </td></tr><tr><td>  Intel Spec, 95W </td><td>  118W </td><td>  8s </td><td>  95W </td><td>  84% </td></tr><tr><td>  Constant 95W </td><td>  95W </td><td>  1s </td><td>  95W </td><td>  71% </td></tr></tbody></table><br><br>  Recently, it was noticed that some motherboard manufacturers are changing their strategy for PL1 / PL2 / Tau, and are cutting Tau to something sensible, like 30 seconds.  When running speed measurements on such motherboards, users get less results than usual, although these results are closer to Intel specifications. <br><br>  The fact is that when the motherboard has the Auto value, the manufacturer usually does not disclose the exact value of this value.  As a result, it is very difficult to describe the operation of such equipment.  And these values ‚Äã‚Äãmay vary depending on the installed processor. <br><br>  We usually conduct tests with out-of-box settings, with the exception of memory, with which we use the values ‚Äã‚Äãrecommended by the manufacturer.  We believe that this is the most honest way to tell readers about what speed they can count on when virtually no settings have changed.  In reality, this usually means that PL2 is set to some very great value, and Tau - to very long.  We are constantly confronted with the turbo mode, while the temperature remains within the established limits. <br><br><h2>  Today's situation, and what can we do with it </h2><br>  I have long wanted to write a similar article, at least since the launch of Kaby Lake.  Most processors in consumer motherboards work with unlimited PL2, and this has been considered normal for years.  And only as a result of testing the Core i9-9900K, we began to notice something strange.  In our article last week about the new Xeon E, it says that our Supermicro motherboard literally follows the recommendations from Intel.  It may seem obvious that a more commercial / server board will follow the specifications from Intel, but I personally saw this live for the first time.  It is obvious that consumer fees for such specifications do not work, and did not work.  I would say that Intel's own test results (and Intel processors from AMD processors) on consumer motherboards also do not meet Intel specifications. <br><br>  So what do we do about it?  I would say that Intel needs to place two power symbols on the boxes: <br><ul><li>  TDP peak for PL2 </li><li>  TDP long term for PL1. </li></ul><br><br>  In this way, Intel and others will be able to explain peak consumption and base frequency. <br><br>  If users want consumer motherboards to change, it will be more difficult to do.  All manufacturers want to get ahead of each other, so we are faced with such things as the option Multi-Core Turbo, enabled by default.  Manufacturers prefer the path of "unlimited PL2", because it allows them to climb to the top of the speed charts.  But laptops with limited cooling capabilities often have their own PL1, PL2 and Tau versions, and often they strictly correspond to these parameters. <br><br>  The question is, how important are Intel's specifications for Intel desktop processors?  If we need to follow these recommendations literally, maybe we will take one more step and use only stock coolers? </div><p>Source: <a href="https://habr.com/ru/post/431276/">https://habr.com/ru/post/431276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431264/index.html">MIT course "Computer Systems Security". Lecture 19: "Anonymous Networks", part 2 (lecture from the creator of the Tor network)</a></li>
<li><a href="../431266/index.html">MIT course "Computer Systems Security". Lecture 19: "Anonymous Networks", part 3 (lecture from the creator of the Tor network)</a></li>
<li><a href="../431270/index.html">How to build Apple 1 and write a game for it</a></li>
<li><a href="../431272/index.html">The optimal temperature in the house or how to install the thermostat in the far room without wires</a></li>
<li><a href="../431274/index.html">Himself Santa Claus: As a developer of the application to earn maximum during the holiday period?</a></li>
<li><a href="../431278/index.html">In the robotic car you can get pumped up - but there is a solution for this problem.</a></li>
<li><a href="../431280/index.html">Night Sight: how Pixel phones are seen in the dark</a></li>
<li><a href="../431282/index.html">Slow software</a></li>
<li><a href="../431284/index.html">Centenary Holivar: creativity versus usability</a></li>
<li><a href="../431286/index.html">Forgotten Fraud: The World Power Systems Scam</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
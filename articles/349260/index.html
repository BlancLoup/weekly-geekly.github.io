<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is it a bird? This is a plane? No, this is your user's token flying to a new phone.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 Today I will talk about the API for developers from Google. It will be about how not to force the user to log in again in the application...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is it a bird? This is a plane? No, this is your user's token flying to a new phone.</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  Today I will talk about the API for developers from Google.  It will be about how not to force the user to log in again in the application after transferring data, or, to put it more precisely, how to use the Android Account Transfer API. <br><br>  Most likely, each of us bought a new smartphone and had to transfer all important information and applications from the old one to it.  Now this process has become quite simple thanks to technology <a href="https://www.techbout.com/how-to-use-tap-go-android-13293/">Tap &amp; Go</a> .  But there is one thing.  You have to login again wherever possible.  And what if this application is a type of fitness tracker, where I logged in once and forgot?  Recover password?  Headache again.  You can say: ‚ÄúBut there is a Smart Lock!‚Äù, And you will be right, but we must take into account all the cases.  What if a person forgot to save a password?  Or is he just paranoid and does not store passwords?  Or is the application not implemented <a href="https://developers.google.com/identity/smartlock-passwords/android/">Smart Lock</a> ?  I think that there will always be reasons to forget the authorization data.  But now there is a solution, and you can ease the burden of transferring the authentication data of your users.  Only here it is not for everyone.  Yes, and effectively earn at least a year. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/webt/1h/yi/wc/1hyiwcldkw-vra4seejfvgezbkm.png"></div><a name="habracut"></a>  Three questions follow from this: <br><br>  1. What is the Account Transfer API? <br>  2. Why is it not for everyone? <br>  3. Why effectively earn at least a year? <br><br><h2>  Required Requirements </h2><br>  As I said before, the Account Transfer API allows developers to transfer authorization information, including token and account information, from the old phone to the new one.  And what is needed for this? <br><br>  And here we run into the saddest part necessary to implement this technology. <br><br>  What do you need to make it work? <br><br>  1. Old device with Android version 4.0.1 or higher (API Level 14). <br>  Not such a problem, you say, and I agree with that, but look further. <br><br>  2. The new device to which we want to copy data must be running an OS not lower than Android 8.0 (API Level 26). <br><br>  This is the answer to the question ‚ÄúWhy does it work effectively for at least a year?‚Äù.  Yes, this year many devices will receive an Android update to Oreo, but they are unlikely to be sold from an already built-in OS with the necessary API Level.  Most likely, the stock versions will remain on the shelves, which will have the maximum Android Marshmallow on board.  And after the purchase will have to update them manually.  And this is the key moment for our feature.  It is very likely that the user will first transfer their data to the device, and only then update it. <br><br>  Not to be unfounded, I will show you the information of Google from February 5, 2018. <br><br><img src="https://habrastorage.org/webt/qb/qr/1n/qbqr1nvtjoxltqmeq7ekitm5p1i.png"><br><br>  3. Both devices must have Google Play version 11.2.0 and higher.  This should not be a big problem, unless, of course, you support devices without Google Play.  They transfer to organize fail. <br><br>  4. You must build your APK using Google Play services of at least 11.2.0.  It can become a problem only if you have reasons not to use the services of this version or not to use the services at all. <br><br>  5. An already implemented <a href="https://developer.android.com/reference/android/accounts/AbstractAccountAuthenticator.html">AbstractAccountAuthenticator</a> integrated with <a href="https://developer.android.com/reference/android/accounts/AccountManager.html">AccountManager is</a> required.  There is <a href="https://habrahabr.ru/company/e-Legion/blog/206210/">an excellent cycle of articles</a> on "Habr√©" on implementation. <br><br><h2>  How it works? </h2><br><img src="https://habrastorage.org/webt/82/xv/-o/82xv-oxteyr7h8lvbansht9imta.png"><br><br>  Provided that all requirements are met, a secure wired connection or encrypted via Bluetooth is created between the phones.  If during the transfer you want to check the validity of the token on your backend, then one of the devices must be connected to the Internet. <br><br>  Next, the system sends a <a href="https://developer.android.com/guide/components/broadcasts.html">Broadcast</a> message ( <a href="https://developers.google.com/android/reference/com/google/android/gms/auth/api/accounttransfer/AccountTransfer">ACTION_START_ACCOUNT_EXPORT</a> or <a href="https://developers.google.com/android/reference/com/google/android/gms/auth/api/accounttransfer/AccountTransfer.html">ACTION_ACCOUNT_EXPORT_DATA_AVAILABLE</a> ) about the readiness to start exporting data, upon receipt of which we must run the Foreground <a href="https://developer.android.com/guide/components/services.html%3Fhl%3Dru">Service</a> intended for data exchange.  Those.  we need to generate and send the user account data through a secure connection to the recipient device. <br><br><img src="https://habrastorage.org/webt/ys/e7/7m/yse77mfaqjfifak9ikao4jzeg0m.png"><br><br><img src="https://habrastorage.org/webt/lr/5d/de/lr5ddectgozklo5r8w4okg3nsf4.png"><br><br>  After that, the system sends another Broadcast message ( <a href="https://developers.google.com/android/reference/com/google/android/gms/auth/api/accounttransfer/AccountTransfer">ACTION_ACCOUNT_IMPORT_DATA_AVAILABLE</a> ) already to the receiving device.  Here you also need to run Foreground Service and process the received information. <br><br><img src="https://habrastorage.org/webt/fp/tz/bn/fptzbnu1jt5azufzm9h6n7plbmq.png"><br><br>  If a situation arises in which the service on the receiving device cannot be created at the time of transporting the data, the system will save the user data in temporary storage.  Data will be received when you first start the application. <br><br><img src="https://habrastorage.org/webt/ju/df/2q/judf2qltyvdaz4cgv1x5kmtzh_y.png"><br><br><h2>  Implementation </h2><br>  Finally you decide to proceed with the implementation. <br><br>  First you need to connect play-services-auth, if this has not been done before. <br><br><pre><code class="hljs pgsql">dependencies { // <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> Account Transfer api, use SDK <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">11.2</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> higher compile <span class="hljs-string"><span class="hljs-string">'com.google.android.gms:play-services-auth-base:&lt;VERSION_NUMBER&gt;'</span></span> }</code> </pre> <br>  Next, declare in the manifest BroadcastReceiver and Service: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".AccountTransferBroadcastReceiver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:exported</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.auth.START_ACCOUNT_EXPORT"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.auth.ACCOUNT_IMPORT_DATA_AVAILABLE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.gms.auth.ACCOUNT_EXPORT_DATA_AVAILABLE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">receiver</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".AuthenticatorService"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.accounts.AccountAuthenticator"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.accounts.AccountAuthenticator"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:resource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@xml/authenticator"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">service</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  As described above, the service should be started when receiving the corresponding Broadcast messages: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountTransferBroadcastReceiver</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BroadcastReceiver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Long running tasks, like calling Account Transfer API, shouldn't happen here. Start a // foreground service to perform long running tasks. Intent serviceIntent = AccountTransferService.getIntent(context, intent.getAction()); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) { context.startForegroundService(serviceIntent); } else { context.startService(serviceIntent); } } }</span></span></code> </pre> <br>  Well and accordingly, partial implementation of the service: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onHandleIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ String action = intent.getAction(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AccountTransfer.ACTION_ACCOUNT_IMPORT_DATA_AVAILABLE: importAccount(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ACTION_START_ACCOUNT_EXPORT: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AccountTransfer.ACTION_ACCOUNT_EXPORT_DATA_AVAILABLE: exportAccount(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">importAccount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Handle to client object AccountTransferClient client = AccountTransfer.getAccountTransferClient(this); // Make RetrieveData api call to get the transferred over data. Task&lt;byte[]&gt; transferTask = client.retrieveData(ACCOUNT_TYPE); try { byte[] transferBytes = Tasks.await(transferTask, TIMEOUT_API, TIME_UNIT); //import logic } catch (ExecutionException | InterruptedException | TimeoutException | JSONException e) { client.notifyCompletion( ACCOUNT_TYPE, AuthenticatorTransferCompletionStatus.COMPLETED_FAILURE); return; } client.notifyCompletion( ACCOUNT_TYPE, AuthenticatorTransferCompletionStatus.COMPLETED_SUCCESS); } private void exportAccount() { byte[] transferBytes = Foo.yourOwnMethodToGetAccountTransferBytes(); AccountTransferClient client = AccountTransfer.getAccountTransferClient(this); if (transferBytes == null) { // Notifying is important. client.notifyCompletion( ACCOUNT_TYPE, AuthenticatorTransferCompletionStatus.COMPLETED_SUCCESS); return; } // Send the data over to the other device. Task&lt;Void&gt; exportTask = client.sendData(ACCOUNT_TYPE, transferBytes); try { Tasks.await(exportTask, TIMEOUT_API, TIME_UNIT); } catch (ExecutionException | InterruptedException | TimeoutException e) { // Notifying is important. client.notifyCompletion( ACCOUNT_TYPE, AuthenticatorTransferCompletionStatus.COMPLETED_FAILURE); return; } }</span></span></code> </pre> <br>  A more detailed example can be found in <a href="https://github.com/googlesamples/account-transfer-api">the googlesamples repository</a> . <br><br>  For testing, Google suggests running the Setup Wizard command. <br><br><pre> <code class="bash hljs">$ adb shell am start -a android.intent.action.MAIN -n com.google.android.gms/.smartdevice.d2d.ui.TargetActivity</code> </pre> <br>  And all this is enough for your user to forget about the headache and unnecessary actions when working with your application after reinstalling it on a new device.  Perhaps this will be the key point that will make it clear to the user whether to continue using the application or delete it and forget. <br><br>  Summing up, I‚Äôll note that Google wants to minimize the time the user spends re-authorizing, and makes logical steps for this.  And it would be good to support them in this direction.  Although it takes some time for implementation, but it's worth it.  After all, the devil is in the details. <br><br>  Interesting information on this topic: <br><br>  <a href="https://developer.android.com/guide/topics/data/account-transfer.html">Documentation</a> <br>  <a href="https://www.youtube.com/watch%3Fv%3DGtp2oHGBqNY">Video Injection</a> <br>  <a href="https://github.com/googlesamples/account-transfer-api">Implementation example</a> </div><p>Source: <a href="https://habr.com/ru/post/349260/">https://habr.com/ru/post/349260/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349248/index.html">Operating systems from scratch; Level 0</a></li>
<li><a href="../349250/index.html">Using the Hi / Lo algorithm to generate keys in the Entity Framework Core</a></li>
<li><a href="../349252/index.html">Release Rust 1.24</a></li>
<li><a href="../349254/index.html">ITSM literacy program: Users and Customers - who is behind these names?</a></li>
<li><a href="../349256/index.html">Journal of the work with the network. Part 2</a></li>
<li><a href="../349262/index.html">Simulation of dynamic systems: the problem of external ballistics</a></li>
<li><a href="../349264/index.html">Ready site template with registration, users and admins on Flask with SQL or MongoDB databases</a></li>
<li><a href="../349266/index.html">PaEndpointBundle - an alternative to symfony controllers</a></li>
<li><a href="../349268/index.html">Issue # 11: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../349270/index.html">Student Insider: Keyhole News</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
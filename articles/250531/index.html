<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Antivirus, Android and x86. Interaction features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The theme of optimizing Android applications for the x86 platform does not leave the pages of our blog. Today we look at the problem from a somewhat s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Antivirus, Android and x86. Interaction features</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/9bc/2e3/4cb/9bc2e34cba6742e8b31c21e2b0a55c64.png"><br><br>  The theme of optimizing Android applications for the x86 platform does not leave the pages of our blog.  Today we look at the problem from a somewhat specific angle.  Are viruses being ported to Intel ...?  What are the nuances of the functioning of antiviruses on different platforms?  What problems do anti-virus software developers encounter on the optimization path?  With these questions turned to the team of Kaspersky Lab, which develops antivirus for Android. <br><a name="habracut"></a><br>  <b>Start over.</b>  <b>We install the application (by clicking on an unverified link or launching the installation manually) - we get an APK, which includes not only the declared functionality, but also malware, stealing passwords, sending paid SMS or blocking a smartphone with a subsequent ransom request.</b>  <b>Right?</b> <br>  <i>In general, yes.</i>  <i>Visitors of various kinds of pirated sites are most at risk, but occasionally infection infiltrates even into large official app stores.</i> <br><br>  <b>We assume that there is some kind of signature database, which is used to search for malicious code.</b>  <b>Should it be different for ARM and x86?</b>  <b>Do we understand correctly that for x86 we had to create our own base, and the main work in porting x86 was precisely to create this base?</b> <br>  <i>The database of signatures and heuristic rules is platform-independent.</i>  <i>In general, most Android malware does not have a native part at all and all their malicious code is written exclusively in Java, so the difference in architecture in this case is not significant.</i> <i><br></i>  <i>In any case, we support detecting ARM objects even on x86.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>If the authors of malicious programs for Android turned out to be more agile than some authors of the programs and ported their creations to x86, does that mean that your antivirus for ARM (working through the translator) couldn‚Äôt detect such viruses in principle, as there were no corresponding databases with code samples ‚Äù, and only detected malware on pure Java and in ARM applications?</b> <br>  <i>For us there is no difference on what the code - ARM or x86.</i>  <i>Our engine considers objects regardless of the platform on which it runs.</i>  <i>Those.</i>  <i>Our product on any platform is able to detect both ARM and x86 malware, if they are in the database.</i> <br><br>  <b>Is there really x86 malware?</b>  <b>How big is their base?</b> <br>  <i>Those who work only on x86 and do not work on ARM have not met.</i>  <i>This contradicts the logic of virus writers who are interested in maximizing the distribution of their offspring.</i> <br><br>  <b>But this is about malware.</b>  <b>Are there real viruses for Android, i.e.</b>  <b>Are pieces of code capable of infecting other files - spread and self-modifying to deceive antiviruses?</b>  <b>If so, how many are there, do they include native code or is Java sufficient, what files can they infect?</b> <br>  <i>Well, let's start with the fact that for distribution there is no need to infect other files.</i>  <i>You can, for example, send links to yourself on the contact list.</i>  <i>This behavior belongs to the class of worms.</i>  <i>And there are no classic infectors (or polymorphs) for Android yet.</i> <i><br></i>  <i>As you have already said, the antivirus code is almost all native, but, as it should be for Android applications, it is built as a set of called libraries.</i>  <i>Libraries from the ‚Äústandard‚Äù place / lib are hidden in a deeper hierarchy.</i>  <i>If possible, explain why this is done?</i> <i><br></i>  <i>Most of the libraries are in the lib folder, the anti-virus databases that require regular updates are separately rendered, they cannot be updated in the lib folder, since it is not available for writing.</i> <br><br>  <b>How exactly does antivirus work?</b>  <b>Does it check applications only before launch, or on disk too;</b>  <b>can you track ‚Äúsuspicious‚Äù operations in real time?</b>  <b>And what exactly does he do when they are detected?</b> <br>  <i>Anti-Virus in Kaspersky Internet Security for Android checks applications as they are installed and updated, at the request of the user (if the user clicked the scan button), on a schedule (the schedule is selected in the product settings).</i>  <i>In addition, the files saved in the Download folder are scanned (the files that the user downloads in the browser are saved there).</i>  <i>In addition, there is an extended protection mode, in this case the files on the memory card are checked for any changes, as well as all new files written to the memory card.</i> <i><br></i>  <i>As in the ‚Äúdesktop‚Äù products of Kaspersky Lab, Kaspersky Internet Security for Android uses a whole range of technologies to detect malware, including the heuristic engine, which allows you to detect entire families of malware using common features.</i>  <i>In this case, we have a requirement that the median load on the CPU from us does not exceed 10% during normal use of the device.</i> <br><br>  <b>What has been done to add x86 support to the Android product?</b> <br>  <i>Our Android product uses many cross-platform components of its own design, written in C ++ and used in most Kaspersky Lab products.</i>  <i>That is, most security modules are originally written for easy integration into different platforms.</i>  <i>Ensuring their assembly under Android x86 was not difficult - small changes in make-files, pressing a button, and the product is ready :).</i>  <i>The main burden fell on the testing department, because the already long list of test configurations and scripts added x86-based Android devices, which are now officially supported.</i> <i><br></i>  <i>Previously, on x86 devices, our product worked using the Hoodini library.</i>  <i>Of course, in this case, a binary translation of the code is performed with a certain damage to performance.</i> <br><br>  Yes, of course, talking about an x86 build would be incomplete without measuring the performance gain compared to the old, ‚Äúbinary-translated‚Äù version.  Intel experts tested the speed of Kaspersky Internet Security 11, assembled for x86 and ARM, using a device on the Intel Clover Trail platform (Intel Atom Z2760 processor).  The results were as follows: the performance of the native x86 application in the file scanning mode increased by 2.7 times.  Although, in fairness, it should be noted that there was some (more precisely - 15 percent) increase in the power consumption of the device during operation.  But, taking into account the decrease of this time, the overall result of the x86 version is unconditionally better than the original one. <br><br>  So, it is not necessary to optimize viruses for x86, but useful programs, including antiviruses, are highly desirable.  And the more important for software performance and speed, the more carefully you need to approach this issue. </div><p>Source: <a href="https://habr.com/ru/post/250531/">https://habr.com/ru/post/250531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250519/index.html">Free training on Microsoft courses on Software Assurance vouchers at TC MUK (Kiev)</a></li>
<li><a href="../250523/index.html">Lock-free data structures. Concurrent maps: rehash, no rebuild</a></li>
<li><a href="../250525/index.html">Another plugin manager for Vim</a></li>
<li><a href="../250527/index.html">Basic statistics: just about complex formulas</a></li>
<li><a href="../250529/index.html">Mobile App Distribution Services for iOS. Part 2: HockeyApp</a></li>
<li><a href="../250535/index.html">Annual Review: What's new for eBay?</a></li>
<li><a href="../250537/index.html">PIC16F1503. Wheelbarrow for pumping - 3. Power</a></li>
<li><a href="../250539/index.html">Making an online cinema for the blind (WCAG 2.0 AAA)</a></li>
<li><a href="../250541/index.html">Wiring diagrams with LaTeX and TikZ</a></li>
<li><a href="../250545/index.html">Intel¬Æ Graphics Technology. Part II: ‚Äúunload‚Äù calculations on graphics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
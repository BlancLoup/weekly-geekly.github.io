<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another way to implement binding computable properties in WPF</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Suppose there is a project on WPF and in it a ViewModel , in which there are two properties Price and Quantity, and the computable property TotalPrice...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another way to implement binding computable properties in WPF</h1><div class="post__text post__text-html js-mediator-article">  Suppose there is a project on WPF and in it a <a href="http://megadarja.blogspot.ru/2010/04/mvvm-wpf.html">ViewModel</a> , in which there are two properties Price and Quantity, and the computable property TotalPrice = Price * Quantity <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Order</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> _price; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> _quantity; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> Price { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _price; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_price == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; _price = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RaisePropertyChanged(<span class="hljs-string"><span class="hljs-string">"Price"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> Quantity { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _quantity; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_quantity == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; _quantity = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RaisePropertyChanged(<span class="hljs-string"><span class="hljs-string">"Quantity"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> TotalPrice {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Price*Quantity; }} } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RaisePropertyChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> propertyChanged = PropertyChanged; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (propertyChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) propertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(propertyName)); } }</code> </pre> <br><br></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If Price is changed in code, price changes will automatically appear in View, because the ViewModel will notify View of the Price change by calling the RaisePropertyChanged ("Price") event.  The calculated TotalPrice will not change in View, because no one calls RaisePropertyChanged ("TotalPrice").  You can call RaisePropertyChanged (‚ÄúTotalPrice‚Äù) in the same places where RaisePropertyChanged (‚ÄúPrice‚Äù) and RaisePropertyChanged (‚ÄúQuantity‚Äù) are called, but I <u><b>don‚Äôt want to smear across many places the information that TotalPrice depends on Price and Quantity, but I would like to store information about this in one place</b></u> .  To this end, <a href="http://habrahabr.ru/post/270979">people write</a> various dependency managers, but let's see <u><b>what minimum code is really needed for this</b></u> . <br><a name="habracut"></a><br>  The standard way to throw logic where it is not in terms of design is events.  The approach to the forehead is to create two events OnPriceChanged and OnQuantityChanged.  When these events fire, do RaisePropertyChanged ("TotalPrice").  Subscribe to these events in the ViewModel constructor.  After that, the information that TotalPrice depends on Price and Quantity will be in one place - in the constructor (well, or in a separate method, if you so wish). <br><br>  Let's simplify the task a bit: we already have the PropertyChanged event, which is triggered when the Price changes, so we use it. <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterPropertiesDependencies</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName, List&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; dependenciesProperties</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dependencyProperty <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> dependenciesProperties) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.PropertyChanged += (sender, args) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (args.PropertyName == dependencyProperty) RaisePropertyChanged(propertyName); }; } }</code> </pre><br><pre> <code class="cs hljs"> RegisterPropertiesDependencies(<span class="hljs-string"><span class="hljs-string">"TotalPrice"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; { <span class="hljs-string"><span class="hljs-string">"Price"</span></span>, <span class="hljs-string"><span class="hljs-string">"Quantity"</span></span>});</code> </pre><br><br>  This code has several drawbacks: firstly, I would not advise stitching property names in strings, it is better to get them out of lambda, and secondly, this code will not work if the calculated property has a more complex form, for example: TotalCost = o .OrderProperties.Orders.Sum (o =&gt; o.Price * o.Quantity). <br><br><div class="spoiler">  <b class="spoiler_title">OrderProperties code and ViewModel.</b>  <b class="spoiler_title">It's all obvious, you can not watch</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">OrderProperties</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ObservableCollection&lt;Order&gt; _orders = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObservableCollection&lt;Order&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ObservableCollection&lt;Order&gt; Orders { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _orders; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_orders == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; _orders = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RaisePropertyChanged(<span class="hljs-string"><span class="hljs-string">"Orders"</span></span>); } } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">BaseViewModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> Summa {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> OrderProperties.Orders.Sum(o =&gt; o.Price*o.Quantity); }} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> OrderProperties OrderProperties { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _orderProperties; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_orderProperties == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; _orderProperties = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RaisePropertyChanged(<span class="hljs-string"><span class="hljs-string">"OrderProperties"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> OrderProperties _orderProperties; }</code> </pre><br><br></div></div><br><br>  Subscribe through events for changes in the Price and Quantity of each item in the collection.  But elements can be added \ to the collection.  When changing the collection, you need to call RaisePropertyChanged ("TotalPrice").  When you add an item, you need to subscribe to change its Price and Quantity.  It is also necessary to take into account that someone can assign a new collection in OrderProperties, or a new OrderProperties in ViewModel. <br><br>  This is the result of this code: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterElementPropertyDependencies</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> propertyName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> element, ICollection&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; destinationPropertyNames, Action actionOnChanged = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (element == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (actionOnChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) actionOnChanged(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (element <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> INotifyPropertyChanged == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"      {0}, ..    INotifyPropertyChanged"</span></span>, element.GetType())); ((INotifyPropertyChanged)element).PropertyChanged += (o, eventArgs) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (destinationPropertyNames.Contains(eventArgs.PropertyName)) { RaisePropertyChanged(propertyName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (actionOnChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) actionOnChanged(); } }; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> RegisterCollectionPropertyDependencies&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> propertyName, ObservableCollection&lt;T&gt; collection, ICollection&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; destinationPropertyNames, Action actionOnChanged = <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (collection == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (actionOnChanged != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) actionOnChanged(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> collection) { RegisterElementPropertyDependencies(propertyName, element, destinationPropertyNames); } collection.CollectionChanged += (sender, args) =&gt; { RaisePropertyChanged(propertyName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (args.NewItems != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> addedItem <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> args.NewItems) { RegisterElementPropertyDependencies(propertyName, addedItem, destinationPropertyNames, actionOnChanged); } } }; }</code> </pre><br><br>  In this case, for OrderProperties.Orders.Sum (o =&gt; o.Price * o.Quantity), you need to use it like this: <br><br><pre> <code class="cs hljs">RegisterElementPropertyDependencies(<span class="hljs-string"><span class="hljs-string">"Summa"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {<span class="hljs-string"><span class="hljs-string">"OrderProperties"</span></span>}, () =&gt; RegisterElementPropertyDependencies(<span class="hljs-string"><span class="hljs-string">"Summa"</span></span>, OrderProperties, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] {<span class="hljs-string"><span class="hljs-string">"Orders"</span></span>}, () =&gt; RegisterCollectionPropertyDependencies(<span class="hljs-string"><span class="hljs-string">"Summa"</span></span>, OrderProperties.Orders, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span>[] { <span class="hljs-string"><span class="hljs-string">"Price"</span></span>, <span class="hljs-string"><span class="hljs-string">"Quantity"</span></span> })));</code> </pre><br><br>  I tested this code in different situations: I changed the Quantity of elements, created new Orders and OrderProperties, first I changed Orders and then Quantity, etc., the code worked correctly. <br><br>  <b>PS</b> By the way, I recommend to look towards the <a href="http://danielvaughan.org/post/Knockout-Style-Observables-in-XAML.aspx">Observables in the style of Knockout</a> .  There you don‚Äôt need to specify what the property depends on, you just need to pass an algorithm for its calculation: <br>  fullName = new ComputedValue (() =&gt; FirstName.Value + "" + ToUpper (LastName.Value)); <br>  The library will analyze the expression tree, see access to FirstName and LastName members in it, and check dependencies on its own.  There is no risk of forgetting to re-order dependencies after changing the property calculation algorithm.  True, it is said that the library is a bit unimproved, and does not keep track of nested collections, but if you have a car of free time, you can open the source code (available at the previous link) and work a bit with a file, or write your own expression tree analyzer bike. <br><br>  <b>PPS</b> Regarding garbage collection: if you add message output to element finalizers, you may find that when you close a window, all elements are collected by the garbage collector (despite the fact that the ViewModel has a link to the child element, and the child element has a link to the ViewModel in the event handler ).  This is because WPF uses <a href="https://msdn.microsoft.com/library/aa970850(v%3Dvs.100).aspx">weak events</a> through a <a href="https://msdn.microsoft.com/en-us/library/system.componentmodel.propertychangedeventmanager.aspx">PropertyChangedEventManager</a> to fix memory leaks during a DataBinding.  More information can be found on the links: <a href="https://social.msdn.microsoft.com/Forums/vstudio/en-US/12fe46f0-6ad8-44a3-845d-7c4c00b00aab/inotifypropertychanged%3Fforum%3Dwpf">[1]</a> , <a href="http://stackoverflow.com/questions/3712320/do-wpf-controls-use-weak-events-in-their-bindings/3713307">[2]</a> , <a href="http://stackoverflow.com/questions/9697628/how-is-memory-leak-avoided-with-inotifypropertychanged-interface">[3]</a> </div><p>Source: <a href="https://habr.com/ru/post/271105/">https://habr.com/ru/post/271105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../271089/index.html">Myths about changes in the Windows 10 activation system</a></li>
<li><a href="../271097/index.html">Zabbix - optimization with high loads</a></li>
<li><a href="../271099/index.html">Innovative Forum for development companies in Minsk</a></li>
<li><a href="../271101/index.html">Something "steals" disk space?</a></li>
<li><a href="../271103/index.html">Paul Graham: "Revenge of the nerds", part 3</a></li>
<li><a href="../271107/index.html">High Flight Frames - Cloud HR and Big Data</a></li>
<li><a href="../271109/index.html">AutoCAD: Communication with external data</a></li>
<li><a href="../271111/index.html">AllcountJS and ionic: Mobile application for CRM in 30 minutes</a></li>
<li><a href="../271113/index.html">Two-factor authentication of AnyConnect clients. Active Directory and Azure Multi-Factor Authentication Server</a></li>
<li><a href="../271115/index.html">Hibernate. Basic principles of working with sessions and transactions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
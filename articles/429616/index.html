<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Digital Workspace, Part 1: Citrix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Speaking about the spacecraft, plowing the expanses of the Bolshoi Theater digital transformation of companies, no one gives an explanation of what sp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Digital Workspace, Part 1: Citrix</h1><div class="post__text post__text-html js-mediator-article">  Speaking about the <s>spacecraft, plowing the expanses of the Bolshoi Theater</s> digital transformation of companies, no one gives an explanation of what specific steps need to be taken to come to this very digital era.  In this series of articles we will not talk about everything at once, but tell you about one of the directions - digitalization of the workspace (digital workspace).  We describe how each of the leading manufacturers of the region understands it, and what IT professionals can do with all this. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31f/530/c52/31f530c52968de40774a6cb19feeca43.png" width="500"></div><br><a name="habracut"></a><br><h2>  Citrix dive </h2><br>  The IT world does not stand still: each vendor develops its products and contributes something new to the line of equipment and software.  Citrix, as a leader in virtualization, network load balancing and user collaboration solutions, recently introduced new products.  The main directions actively developed by the vendor are terminal services and desktop virtualization (VDI). <br><br>  When designing IT projects, we solve many problems.  Often the first is the choice between a terminal solution and VDI.  Virtualization technology is more expensive when calculating budget estimates, but it allows you to create an isolated environment with a guest operating system.  The use of an isolated operating system by each client increases the security of the environment and avoids application conflicts.  In a terminal environment, situations arise when one application cannot work in multi-user mode.  You can answer the question ‚Äúwhat to choose?‚Äù By deploying solutions from Citrix in test mode and checking compatibility with applications used in a particular company. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Suppose we stopped at VDI.  In addition to the main introductory (number of users, integrated applications, technical parameters of one virtual place, etc.), you need to answer the question - to what extent do you need to save the changes made in the virtual workplace?  Virtual jobs without the ability to save data are called "non-persistent", and with the ability to save - "persistent".  The data that is stored in the virtual workplace is divided into two components: appdata (installed applications) and user profiles (user profiles with data).  If Citrix User Profile Management or Microsoft Roaming Profiles are actively used to manage user profiles, then the situation with user applications is more complicated.  Implementing such functionality without Personal vDisk or using full clones was simply impossible before. <br><br>  You can decide on a solution only after analyzing the infrastructure.  For example, in one of our projects, the customer used a self-written portal with application delivery.  In other words, the user could log in via a web browser, select the necessary applications and, in accordance with the security groups assigned to him in Active Directory, install them in his workplace.  This application delivery mechanism did not allow the use of non-persistent VDI and required data retention. <br><br>  There is another scenario where the customer uses a terminal farm to deliver all the applications.  In this case, persistent VDI is not required.  This saves computational resources in virtual workplaces and provides them for the needs of terminal services, leaving only those applications that require an isolated environment in a virtual workplace.  From the user's point of view, everything looks like a normal workplace. <br><br>  Below we look at the main innovations from Citrix, which will allow them to better understand their technologies after recent updates. <br><br><h2>  Rebranding </h2><br>  First of all, I would like to note the incredible love of the vendor to change the names of their products.  Get at least the main one, for which many are so fond of Citrix.  Once called, Metaframe, Presentation Server, and XenApp.  Now we stopped at Virtual Apps.  At the same time, the functionality remains the same everywhere - to provide access to server applications. <br><br>  Those who watch the vendor's news probably already know that the next rebranding of products has occurred and they are now called in a new way.  This applies not only to decisions on the organization of terminal access, but also to the rest of the product lines.  The figure below shows the old and new names.  Do not get confused :) <br><br><img src="https://habrastorage.org/webt/2i/mg/bl/2imgbl71wm0ud02icn2p4gng5_s.png"><br><br>  Changed not only the names of familiar products, but also the editorial levels of each of the solutions.  Pay attention to avoid confusion in XenApp product editions: now the Advanced level is not the starting license, but a license equal to the Enterprise level.  The table below shows all the changes: <br><br><table><tbody><tr><td>  <b>Obsolete name</b> <br></td><td>  <b>Outdated edition</b> <br></td><td>  <b>New name</b> <br></td><td>  <b>New edition</b> <br></td></tr><tr><td>  Xenapp <br></td><td>  Advanced <br></td><td>  Virtual Apps <br></td><td>  Standard <br></td></tr><tr><td>  Xenapp <br></td><td>  Enterprise <br></td><td>  Virtual Apps <br></td><td>  Advanced <br></td></tr><tr><td>  Xenapp <br></td><td>  Platinum <br></td><td>  Virtual Apps <br></td><td>  Premium <br></td></tr><tr><td>  XenDesktop <br></td><td>  VDI <br></td><td>  Virtual desktops <br></td><td>  Standard <br></td></tr><tr><td>  XenDesktop <br></td><td>  Enterprise <br></td><td>  Virtual Apps and Desktops <br></td><td>  Advanced <br></td></tr><tr><td>  XenDesktop <br></td><td>  Platinum <br></td><td>  Virtual Apps and Desktops <br></td><td>  Premium <br></td></tr><tr><td>  Xenserver <br></td><td>  Standard <br></td><td>  Hypervisor <br></td><td>  Standard <br></td></tr><tr><td>  Xenserver <br></td><td>  Enterprise <br></td><td>  Hypervisor <br></td><td>  Premium <br></td></tr><tr><td>  NetScaler ADC VPX <br></td><td>  Standard <br></td><td>  ADC VPX <br></td><td>  Standard <br></td></tr><tr><td>  NetScaler ADC VPX <br></td><td>  Enterprise <br></td><td>  ADC VPX <br></td><td>  Advanced <br></td></tr><tr><td>  NetScaler ADC VPX <br></td><td>  Platinum <br></td><td>  ADC VPX <br></td><td>  Premium <br></td></tr></tbody></table><br><h2>  Citrix App Layering </h2><br>  In addition to the changes in the names, I would like to note the updated vision of the VDI solutions of the main manufacturers.  It is about building a design using software that allows you to split the image into several layers.  In VMware, it is called App Volume, in Citrix - App Layering.  It is noteworthy that both solutions can work not only with VDI of their manufacturers, but also with competing solutions, for example, with VMware Horizon. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/88a/f9b/e64/88af9be648883c081ed4880e99c24b58.png"><br><br>  The main idea of ‚Äã‚Äãthe solution is to create different layers, for example, with the operating system, with a virtualization environment or with applications, and then compiling them into a working image for users.  This is all done quickly, at the output we get various types of images for different groups of users with their applications. <br><br>  The Citrix App Layering solution uses the following layers: <br><br><ul><li>  Platform (Platform Layer) </li><li>  Operating System (Operating System Layer) </li><li>  Application Layer </li><li>  Personal (User Layer) </li></ul><br>  Each layer consists of certain applications and is responsible for its functions (see below). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c2/1e5/9ff/3c21e59ff004dfef4a46b4ed92a529c7.png"><br><br>  A single monolithic image is assembled from the layers, which is delivered to the user.  Each layer must be prepared beforehand.  The process of assembling an image does not take much time. <br><br>  In addition to using monolithic images, App Layering has the ability to deliver application layers to a virtual workplace through Elastic Layering.  This feature allows you to personalize the user environment on request.  This feature is controlled through security groups in Active Directory, which allows you to add sets of applications to a virtual workspace. <br><br>  Licensing rules are shown in the table below: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d68/41a/319/d6841a31923103eb68dd8b39b05b0bde.png"><br><br>  <b>Important note</b> : App Layering is only available with active support from Citrix (Customer Success Services). <br><br><h2>  VDI Design and How to Use the Citrix App Layering </h2><br>  Let's talk a little about the designs of VDI solutions.  After we have decided on the number of persistent and non-persistent virtual workplaces, it is necessary to determine the mechanism for their creation.  Two technologies can be used for this: machine creation services (MCS) and provisioning services (PVS).  The main differences are listed below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e8a/741/1f8/e8a7411f8b4ee5a3cb37990ad7f6a206.png"><br>  <i>Comparison of the principles of the desktop deployment mechanisms</i> <br><br>  MCS works by accessing the Citrix Studio Management Console to the Virtualization Environment Management Server API (vCenter, VMM, XenCenter).  Through the necessary commands, basic actions are performed to create, delete, or change directories of virtual machines.  The service is installed in conjunction with the connection broker when you deploy Citrix Virtual Apps and Desktops.  Using MCS, you can create two types of virtual desktops: fast clone (fast clones) and full clone (full clones).  If everything is clear with full clone, since it is a complete copy of the master image, then fast clone is generated according to the following principle: virtual workplaces are created with two additional diff disks and an id disk from the master image.  I must say that the id disk is also present in full clones and stores information about domain membership.  The size of such a disk is 16 MB.  Diff disk stores master image changes.  The size of this disk is set for all virtual desktops when creating a directory.  When rebooting, the diff disk is reset to zero, so you cannot use it to build persistent VDI solutions.  To implement persistent VDI using fast clones, an additional personal vDisk technology is used, but more on that below. <br><br>  PVS works as a streaming service.  It is installed on a separate server, has its own management console.  Appeal to the API server management environment virtualization also occurs, but to a lesser extent.  Basic operations are performed over the network when loading virtual desktops.  Some are afraid of additional console, because  this complicates administration, but I urge not to be afraid.  PVS-service greatly simplifies the update of virtual desktops.  They are loaded from the image storage (standard network storage smb or a directory on the local disk of the PVS server).  The image is a service file and a virtual hard disk (.vhd) used when booting.  The update process thanks to this service is very simple - you just need to connect another virtual hard disk and reload the workplace.  Of course, using non-persistent virtual jobs are created using this service (note: this service has a caching method that allows you to save all changes, but I haven‚Äôt met such solutions in practice, so I wouldn‚Äôt recommend them).  To implement persistent VDI using the PVS service, the same principle was used as for fast clones. <br><br>  Due to the different specifics of technology, the load falls on the various components, respectively.  If, in the case of a PVS service, a large load falls on the network, in the case of using the MCS service, the load falls on the used storage system. <br><br>  I will give examples of the main designs of VDI solutions that I managed to implement: <br><br><ol><li>  Using the MCS service to create clones with a differential disk (fast clone), or PVS service and storing all changes (app data \ user profile) on a dedicated personal disk (Personal vDisk). </li><li>  Using the MCS service to create full clones (full clone) with the savings of wasted disk space due to data storage with deduplication and compression. </li><li> Using the MCS service to create clones with a differential disk (fast clone) or the PVS service and move user profiles using Citrix User Profile Management technology.  This, of course, is not complete persistent VDI; in such designs, the user only stores application settings, which are stored in the user profile and user data.  Installing applications in this configuration is impossible, since  after rebooting the virtual desktop, the changes are rolled back.  This design is often used in call-centers. </li></ol><br>  Most often I have observed the implementation of the 1st design or a mixed solution of 2 and 3 options. <br><br><h2>  RIP, Personal vDisk </h2><br>  After Citrix announced that personal vDisk technology would not be developed anymore, the implementation of the 1st design became unrealistic.  Customers began to abandon this idea, and the personal vDisk technology itself had a number of drawbacks.  In my practice, the solution worked well with static use of virtual workplaces, that is, when a virtual workplace was assigned to one user, respectively, he connected a personal disk on which all changes were stored.  When randomly using virtual desktops and personal disks, there were often problems when a user got a new virtual desktop and connected a personal disk to it.  But still, the use of the 1st design with statically allocated virtual desktops significantly saved disk space, user data and installed applications in the virtual workplace could be placed on ‚Äúslow‚Äù disks, and in order not to lose OS performance, all changes made from the master of the image (diff disk), placed on the "fast" disks.  Such a design made it possible to significantly save disk space and not lose the performance of virtual desktops. <br><br>  In the Citrix App Layering solution, it was announced that one of the layers (User Layer) would allow to implement functionality similar to personal vDisk, but for almost a year this layer was in the laboratory status.  In the latest update on September 25, an update on this topic finally appeared <a href="https://docs.citrix.com/en-us/citrix-app-layering/4/app-layering-4.pdf">in the App Layering document</a> and it was announced that the User Layer was available for use in production environments. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/60c/58d/6e8/60c58d6e8736897bff7e22b78bfb5e65.png"><br><br>  An important update that allows you to implement the design of the 1st type using Citrix App Layering and User Layer for storing user data and installed applications. <br><br><h2>  Conclusions and recommendations </h2><br>  Obvious problems of the classical organization of virtual workplaces forced Citrix to reconsider its approach towards the hybrid multi-layer virtual machine structure, which allowed creating persistent VDI in a non-persistent environment (looking ahead, this is also true for other vendors). <br><br>  In reality, Citrix focuses on the development of the Citrix App Layering, so I would recommend looking at this solution when developing a sketch for your VDI.  This product will significantly reduce the labor costs for servicing the master image, allow you to quickly compile the necessary images for different departments and, of course, increase the flexibility of the solution due to the Elastic Layer.  And do not forget about the User Layer, through which you can implement the design of the 1st type. <br><br>  <i>Roman Mirzayanov, Senior Computing Design Engineer,</i> <i><br></i>  <i>Jet Infosystems</i> </div><p>Source: <a href="https://habr.com/ru/post/429616/">https://habr.com/ru/post/429616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../429602/index.html">Unexpected Turing fullness everywhere</a></li>
<li><a href="../429604/index.html">Review of the laptop Lenovo S730-13 (2018): powerful iron in a stylish aluminum case</a></li>
<li><a href="../429606/index.html">Damn dozen for PM: book list for project managers</a></li>
<li><a href="../429610/index.html">The story of how to run the Android emulator or save on intel processor</a></li>
<li><a href="../429612/index.html">Fullsteks are eternal midies. Do not go on this path if you do not want to suffer</a></li>
<li><a href="../429618/index.html">XO electronic game</a></li>
<li><a href="../429620/index.html">How I created the maps of the continents for my game.</a></li>
<li><a href="../429622/index.html">Robots replaced Amazon 20,000 workers</a></li>
<li><a href="../429624/index.html">How NASA will use robots to create rocket fuel from Martian soil</a></li>
<li><a href="../429626/index.html">Hackers of the genome have demonstrated that no DNA will be anonymous</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we participated in the hackathon M.Video</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last weekend of September, our team took part in the hackathon M.Video on data analysis. The choice was offered two tasks: first - to generate ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we participated in the hackathon M.Video</h1><div class="post__text post__text-html js-mediator-article"><p>  In the last weekend of September, our team took part in the <a href="http://hackathon.mvideo.ru/">hackathon</a> M.Video on data analysis.  The choice was offered two tasks: first - to generate a product description based on reviews of products, the second - to highlight the most important characteristics of products based on the directory, data on the joint views and adding to the basket.  We solved both tasks.  Under the cut, the story of why we filled up this hackathon and what we learned. </p><br><p><img src="https://habrastorage.org/webt/59/ec/c3/59ecc35312cf8111295973.jpeg"></p><a name="habracut"></a><br><h1 id="postanovka-zadachi">  Formulation of the problem </h1><br><p>  When our team met before the start of the hackathon, we were confused by the lack of a clear statement of the task or wishes.  In the absence of the best, we began to generate ideas ourselves: </p><br><ul><li>  customer treatment system; </li><li>  recommendation system; </li><li>  an algorithm for navigating a variety of products; </li><li>  a system for collecting data on products on other sites. </li></ul><br><p>  We dreamed of provable increase in business metrics: views, conversion, average check and loyalty.  For several days we tried to pull information from an insider, but as a result we only got more confused.  When we arrived at M.Video‚Äôs office on Saturday, we had several options in our head about what could be done - and not one of them ended up coinciding with what we were really asked to do. </p><br><p>  It turned out that you need to generate descriptions of goods or identify their most significant characteristics.  And there will be no metrics, but there will be jury eyes. </p><br><p>  All three engineers in our team sat down to solve the tasks that we thought were correct.  Given the novelty of the data and a large number of experiments, it took the whole evening.  By late night, we had intermediate solutions, which we finished all morning.  By the deadline, we had three algorithms that were little related to each other.  Nobody did a review of algorithms, except for their tired creators.  It seems no wonder that we are not among the top three winners.  But the algorithms themselves seem worthy of attention. </p><br><h1 id="izvlechenie-szhatyh-opisaniy-tovarov-iz-otzyvov">  Extract compressed product descriptions from reviews </h1><br><p>  The first of the two tasks of the hackathon was formulated as a task for <a href="https://en.wikipedia.org/wiki/Automatic_summarization">automatic summatization of the text</a> .  It was necessary to create an algorithm that, according to a multitude of customer reviews for the product, generates one <em>synthetic</em> review containing the most important information about the product.  There were no formal requirements for synthetic reviews, so we ourselves came up with our Wishlist: </p><br><ol><li>  A synthetic review consists of separate statements about a product (some kind of structure is needed!); </li><li>  From each statement, you can go to the reviews on the basis of which it was created (to make it easier for them to believe); </li><li>  Each statement should, as far as possible, be based on more than one real recall (we love reliable information); </li><li>  Statements must show how goods differ from their peers (otherwise they are useless). </li></ol><br><p>  From these requirements it is already possible to proceed to the general scheme of the algorithm: </p><br><ol><li>  Pre-processing text reviews.  Each was broken up into words, and each word led to normal form (verbs to infinitive, nouns to nominative singular, etc.) using <a href="http://pymorphy2.readthedocs.io/en/latest/">pymorphy2</a> .  This is necessary to more correctly calculate the words.  In addition, we introduced several special words: the sequence of numbers was replaced by &lt;NUMBER&gt;, the smiles with positive and negative colors were replaced by &lt;SMILE_POS&gt; and &lt;SMILE_NEG&gt;. </li><li>  Weighing words.  We counted how many times each normalized word occurs in reviews for each product.  Each occurrence of the word in the review assigned the weight, the <a href="https://ru.wikipedia.org/wiki/TF-IDF">reverse share of reviews</a> in which it is used, among all products in this category.  Thus we tried to reduce the influence of uninformative words.  For example, the word "HEADPHONES" does not bear much information in the response to headphones.  But the words that are found only in the response to this product, we also assigned a weight of 0, because  these are usually very specific concepts that are difficult to compare.  For example, the word "JBLAWAREBLKI" in the response to the same headphones also does not carry meaning - it's just their name.  Thus, we executed Wishlist (4). </li><li>  Cutting each review for approval.  To do this, we broke it into sentences (just by punctuation).  The sentences were broken into various pieces (n-grams) in 2 and 3 words.  Assertions considered every sentence and every n-gram. </li><li>  Conversion of statements into numerical form.  For each statement, we found the average <em>attachment of</em> its words, weighted by the weights from paragraph 3. The <em>attachment</em> is a vector of 100 numbers unloaded from <a href="https://nlpub.ru/Russian_Distributional_Thesaurus">someone‚Äôs trained</a> <a href="https://ru.wikipedia.org/wiki/Word2vec">word2vec</a> model.  The main property of investments is that the words with similar meanings usually also have similar attachments, and vice versa.  And we counted the "weighted average word" for each statement, hoping that it would somehow convey a meaning. </li><li>  Grouping  For each product, we have launched the <a href="http://scikit-learn.org/stable/modules/clustering.html">DBSCAN</a> clustering algorithm on all vectorized statements about this product.  In other words, we found groups (clusters) from statements similar to each other (that is, described by similar vectors-embeddings).  Each cluster found should contain some important fact about the product.  Assertions that are not included in any cluster (DBSCAN is one of the few algorithms that can do this), we have excluded from consideration. </li><li>  Cluster ranking.  For each cluster, we calculated its rating - the sum of the word weights of all the statements included in it.  We applied a reduction factor to the rating of clusters that contain assertions from just one review, in order to fulfill the wishlist (3).  For each product, we took 5 clusters with the highest rating. </li><li>  The ranking of assertions within clusters.  In each of the selected clusters, it remains to find the only statement that best describes it.  To do this, we calculated the rating of each statement in the cluster as the average weight of words in this statement divided by the average distance from its investment to the attachments of other statements in the cluster.  1. The numerator is responsible for ensuring that the statement is informative, and the denominator is responsible for ensuring that the statement fits well enough with the entire cluster.  And for each of the selected clusters in a synthetic review, we made a statement with the maximum rating, satisfying Wishlist (1) and (2). </li></ol><br><p>  As a result, we got some synthetic reviews like this (on TV): </p><br><ul><li>  Horizontally excellent viewing angles </li><li>  Good image quality </li><li>  The picture is great </li><li>  Bought into the kitchen </li><li>  Sound good </li></ul><br><p>  For the first example, the pros and cons of our approach are visible.  Plus - that review is readable.  Minus - for example, that the 2 and 3 statements could be combined, but our clustering turned out to be too detailed.  Unfortunately, no way to check the quality of the generation of synthetic reviews, except for the method of gaze, we did not come up with.  A method of close (but quick) look showed that the reviews lack the structure, but in general look adequate. </p><br><p><img src="https://habrastorage.org/webt/59/ec/c3/59ecc30e0ee9a000208227.jpeg"></p><br><h1 id="izvlechenie-vazhnyh-svoystv-tovarov-iz-otzyvov">  Extract important product properties from reviews </h1><br><p>  Another branch of the work was associated with emotional coloring ( <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7_%25D1%2582%25D0%25BE%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B8_%25D1%2582%25D0%25B5%25D0%25BA%25D1%2581%25D1%2582%25D0%25B0">tonality</a> ) reviews.  For most of the reviews, a rating of goods from 1 to 5 was attached. During the selection round, we also <a href="https://github.com/avidale/mvideo_hack/tree/master/test_problem">solved the problem of</a> determining the tonality - predicting it from the text of the review.  To do this, each normalized word was turned into a binary variable, and linear regression was trained on them.  A large positive coefficient in front of a word in such a model means that it is usually found in positive reviews, and a negative one - in negative ones.  The greater the coefficient (in absolute value), the more the word influences the assessment of the product. </p><br><p>  For each product, we built such a regression on all the reviews on it (if there are enough of them. By sorting out the coefficients, you can find the most "positive" and "negative" words about this product. or ‚Äúdisgusting.‚Äù To exclude them, we had to make a special black list. To do this, we simply built a model of tonality on absolutely all products, and dragged the most significant coefficients out of it. They basically corresponded to non-informative value judgments  ipa "good / bad". </p><br><p>  The words that remained after filtering through the black list turned out to be really quite informative.  For example, for IPhone 6, the word ‚Äúquiet‚Äù turned out to be the biggest negative factor - and indeed, this is one of the main problems that its owners are complaining about. </p><br><p><img src="https://habrastorage.org/webt/59/ec/ce/59ecce15e98c7307783353.png"></p><br><p>  Probably, if we had embedded an emotional assessment of the properties of goods in synthetic reviews, this would make them attractive enough to ensure our victory.  But each of us, until the last moment, debugged our own model, and instead of normal integration, we simply recorded the output of one algorithm under another. </p><br><h1 id="poisk-vazhnyh-priznakov-po-povedeniyu-polzovateley">  Search for important signs on user behavior </h1><br><p> In addition to reviews, we had information about product views and adding them to the basket.  We decided to find out what properties of the product determines the conversion of views into purchases.  For any product, we had characteristics from the reference book: dimensions, screen resolution, processor brand, and so on.  We converted them to binary signs.  For them, for each category of goods, a logistic regression was built, predicting the probability of adding goods to the basket.  The obtained coefficients for the properties of goods can also be interpreted as the importance of these properties when making a purchase decision.  Then we did with them in much the same way as with the words in the reviews: weighed the importance of frequency, and selected the most important feature from each semantic group.  As a result, for each product we received its most important characteristics from the point of consumer behavior, but we did not have time to compare them with the results of the analysis of reviews, much less merge with them. </p><br><h1 id="glubokomyslennye-vyvody">  Profound conclusions </h1><br><p>  I would like to thank the organizers of the hakaton for an interesting task, qualitative data, and delicious food.  According to the general impression, these days and a half were very good. </p><br><p><img src="https://habrastorage.org/webt/59/ec/c3/59ecc37be6ce8174940743.jpeg"></p><br><p>  From the point of view of the organization, the hackathon lacked only the quality criteria announced from the very beginning, by which decisions would be compared.  Maximizing an unknown function is not the most productive.  There was not enough clear formulation of the problem before the hackathon began - the phrase ‚Äúaggregation of reviews on the site‚Äù and ‚Äúassistant seller for the selection of goods in the store‚Äù could be interpreted as you please. </p><br><p>  In hindsight, it is already clear that even in such conditions our team should not have rushed in different directions, like a swan, cancer and pike.  It was necessary to immediately determine how the ideal product description that we want to get at the output should look like.  From the first hours of the hackathon, we could concentrate on any one direction (not so much what it was), and by the evening have a working prototype.  Then for the second day of joint debugging, we would bring it to an already well-functioning product. </p><br><p>  In any case, we received a <a href="https://github.com/avidale/mvideo_hack">code</a> that can be reused, a large number of merch, and, most importantly, experience.  To solve the simple tasks of the store, it took almost half of the introductory course on machine learning.  But everything was decided, as usual, not by knowledge in programming and mathematics, but by organizational skills. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/340694/">https://habr.com/ru/post/340694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340682/index.html">Agent Intelligence from ServiceNow - neural networks in the service of technical support</a></li>
<li><a href="../340686/index.html">We extend and use Flatpages in Django. Embed CKEditor</a></li>
<li><a href="../340688/index.html">Each data center - by virtual reality</a></li>
<li><a href="../340690/index.html">Document generation - personal experience</a></li>
<li><a href="../340692/index.html">What stories will be popular in terms of information noise. Future storytelling</a></li>
<li><a href="../340696/index.html">array_ * vs foreach or PHP7 vs PHP5</a></li>
<li><a href="../340698/index.html">‚Äú4 weddings and one funerals‚Äù or linear regression for analyzing the open data of the Moscow government</a></li>
<li><a href="../340700/index.html">Language Faylyuren, or what do we do with the language?</a></li>
<li><a href="../340704/index.html">Artificial Intelligence Nemesida WAF</a></li>
<li><a href="../340706/index.html">Testing redux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
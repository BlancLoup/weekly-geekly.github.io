<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>EBU R128 / BS.1770-3: Packet volume normalization of audio / video files, P2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous post I described the idea of ‚Äã‚Äãbatch normalizing the volume of audio / video files. 

 It is time to lay out the implementation of thi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>EBU R128 / BS.1770-3: Packet volume normalization of audio / video files, P2</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="https://habrahabr.ru/post/311758/">previous post I</a> described the idea of ‚Äã‚Äãbatch normalizing the volume of audio / video files. <br><br>  It is time to lay out the implementation of this idea.  The solution was flexible and scalable. <br><br>  To use it, you need to stock up with knowledge of the audio and video <a href="http://bs1770gain.sourceforge.net/">hardware</a> , <a href="http://sox.sourceforge.net/">Sound on the eXchange</a> , <a href="https://ffmpeg.org/">FFmpeg</a> , <a href="http://bs1770gain.sourceforge.net/">BS1770GAIN manuals</a> , as well as my favorite <a href="https://www.autoitscript.com/">AutoIt</a> package. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On Windows Server, as well as some other Small Soft platforms, ffmpeg version 3.1 and older no longer works. <br><br>  The implementation is as follows: <br><br>  A rather uncomplicated script (autoit) listens to an ini file, sections of which are folders to listen.  Each section opens its own worker (an instance of the script), which reads the config before each pass through the media file.  When removing a section, the worker closes.  When closing the main worker, all open workers are closed. <br><br>  The config of the worker is: <br><br><pre><code class="hljs tex">[<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>host<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">]</span></span></span></span> destination=<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>host<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>bak=<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>host<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>stmp=tmp<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>tmp1=tmp<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>tmp2=tmp<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>otmp=tmp<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>destinationExtension=.avi threads=16 prepare_ffmpeg_cmd=-flags +ilme+ildct -deinterlace -c:v copy -c:a copy ffmpeg_cmd=-flags +ilme+ildct -deinterlace -c:v copy -c:a copy sox_cmd=compand 0.1,0.3 -90,-90,-70,-55,-50,-35,-31,-31,-21,-21,0,-20 0 0 0.1</code> </pre> <br><h2>  Manual: </h2><br><div class="spoiler">  <b class="spoiler_title">Read the manual</b> <div class="spoiler_text"><h3>  1) destination </h3><br>  Where to store the final files. <br><h3>  2) bak </h3><br>  Where to store the source files. <br>  My source files are in the network basket, the files are backed up in the same basket, in a separate daddy. <br><h3>  3) temporary directories </h3><br>  It is understood that there are several physical media on the machine that processes the video files. <br>  For example, I have the source files in one network basket, the finished files are in the second network basket, and the processing is done by the third machine. <br>  In the third machine, I stuck three hard drives for temporary files. <br><h4>  stmp </h4><br><pre> <code class="hljs perl">$sFile = $stmp &amp; $tempFile &amp; $sExtension</code> </pre> <br>  The file from the network basket arrives on hard0 <br><h4>  tmp1 </h4><br><pre> <code class="hljs perl">$audioInputSox = $tmp1 &amp; $tempFile &amp; <span class="hljs-string"><span class="hljs-string">"_sox.wav"</span></span> $audioOutput = $tmp1 &amp; $tempFile &amp; <span class="hljs-string"><span class="hljs-string">"_norm.wav"</span></span></code> </pre> <br>  If the <b>sox_cmd</b> value is present in the config, then the audio data is read from hard2 to and the result of processing is recorded hard1 <br>  When loudness is normalized, audio data is read from hard2 or hard1 ( <b>sox_cmd?</b> ) And written to hard1 <br><h4>  tmp2 </h4><br><pre> <code class="hljs perl">$audioInput = $tmp2 &amp; $tempFile &amp; <span class="hljs-string"><span class="hljs-string">".wav"</span></span></code> </pre> <br>  The original audio stream of the video file is read from hard0 to hard2 <br><h4>  otmp </h4><br><pre> <code class="hljs perl">$outFile = $otmp &amp; $tempFile &amp; <span class="hljs-string"><span class="hljs-string">"_out"</span></span> &amp; $destinationExtension</code> </pre> <br>  When assembling a finished video file, the video stream is read from hard0 ( <b>stmp</b> ), the audio stream is read from hard1 ( <b>tmp1</b> ), and the result is written to hard2 <br><h3>  4) destinationExtension </h3><br>  Result Video File Container <br><h3>  5) threads </h3><br>  Writes to the command line the assembly of the resulting video file threads = (threads) from the config. <br><h3>  6) prepare_ffmpeg_cmd </h3><br>  If not empty, then <br> <code>ffmpeg -y -ss 0:0:0.0 -r 25 -i [bak] [prepare_ffmpeg_cmd] [stmp]</code> <br>  Otherwise, the source file is copied from <b>bak</b> to <b>stmp.</b> <br><h3>  7) ffmpeg_cmd </h3><br>  Reads the file name. <br>  If at the end of the file name there is a construction of the form {HH MM SS mm ss}, then starting from the frame HH MM SS the tail of the file will be converted to the mm ss timing by the acceleration / deceleration method without distorting the audio track. <br>  The resulting file is assembled with the command <br> <code>ffmpeg -i [stmp(video)] -i [tmp1(normalized -23LUFS audio)] [ffmpeg_cmd] -map 0:v -map 1:a -threads [threads] [otmp] -y</code> <br> <h3>  sox_cmd </h3><br>  Audio filter will be applied before normalizing the sound. <br> <code>sox [tmp2] [tmp1] [sox_cmd]</code> <br> </div></div><br>  Here, in fact, the whole simple script.  Very comfortably.  Daddy creates himself, files tracks, processes, stores as necessary, buggy very rarely, almost never.  Memory does not eat, behaves with dignity) Use for health! <br><br><div class="spoiler">  <b class="spoiler_title">Read script code</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#Region</span></span> ;**** <span class="hljs-type"><span class="hljs-type">Directives</span></span> created by <span class="hljs-type"><span class="hljs-type">AutoIt3Wrapper_GUI</span></span> **** <span class="hljs-symbol"><span class="hljs-symbol">#AutoIt3Wrapper_Icon</span></span>=<span class="hljs-type"><span class="hljs-type">C</span></span>:\<span class="hljs-type"><span class="hljs-type">Program</span></span> <span class="hljs-type"><span class="hljs-type">Files</span></span> (x86)\<span class="hljs-type"><span class="hljs-type">AutoIt3</span></span>\<span class="hljs-type"><span class="hljs-type">Icons</span></span>\<span class="hljs-type"><span class="hljs-type">MyAutoIt3_Blue</span></span>.ico <span class="hljs-symbol"><span class="hljs-symbol">#AutoIt3Wrapper_Compile_Both</span></span>=y <span class="hljs-symbol"><span class="hljs-symbol">#AutoIt3Wrapper_UseX64</span></span>=y <span class="hljs-symbol"><span class="hljs-symbol">#EndRegion</span></span> ;**** <span class="hljs-type"><span class="hljs-type">Directives</span></span> created by <span class="hljs-type"><span class="hljs-type">AutoIt3Wrapper_GUI</span></span> **** <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;<span class="hljs-type"><span class="hljs-type">Array</span></span>.au3&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;<span class="hljs-type"><span class="hljs-type">File</span></span>.au3&gt; <span class="hljs-type"><span class="hljs-type">Func</span></span> randomString(<span class="hljs-string"><span class="hljs-string">$d</span></span>igits) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>wd = <span class="hljs-comment"><span class="hljs-comment">""</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>Space[<span class="hljs-number"><span class="hljs-number">3</span></span>] <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-string"><span class="hljs-string">$d</span></span>igits <span class="hljs-string"><span class="hljs-string">$a</span></span>Space[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-type"><span class="hljs-type">Chr</span></span>(<span class="hljs-type"><span class="hljs-type">Random</span></span>(<span class="hljs-number"><span class="hljs-number">65</span></span>, <span class="hljs-number"><span class="hljs-number">90</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) ;<span class="hljs-type"><span class="hljs-type">AZ</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>Space[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-type"><span class="hljs-type">Chr</span></span>(<span class="hljs-type"><span class="hljs-type">Random</span></span>(<span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">122</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) ;az <span class="hljs-string"><span class="hljs-string">$a</span></span>Space[<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-type"><span class="hljs-type">Chr</span></span>(<span class="hljs-type"><span class="hljs-type">Random</span></span>(<span class="hljs-number"><span class="hljs-number">48</span></span>, <span class="hljs-number"><span class="hljs-number">57</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) ;<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-number"><span class="hljs-number">-9</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>wd &amp;= <span class="hljs-string"><span class="hljs-string">$a</span></span>Space[<span class="hljs-type"><span class="hljs-type">Random</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">Return</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>wd <span class="hljs-type"><span class="hljs-type">EndFunc</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span>niFile = <span class="hljs-comment"><span class="hljs-comment">"watch.ini"</span></span> <span class="hljs-type"><span class="hljs-type">Dim</span></span> <span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">2</span></span>] <span class="hljs-type"><span class="hljs-type">Dim</span></span> <span class="hljs-string"><span class="hljs-string">$n</span></span>ewRun[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-type"><span class="hljs-type">Func</span></span> <span class="hljs-type"><span class="hljs-type">TerminateChilds</span></span>() <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> to <span class="hljs-type"><span class="hljs-type">UBound</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">ProcessClose</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$i</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">EndFunc</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span>, <span class="hljs-string"><span class="hljs-string">$j</span></span>, <span class="hljs-string"><span class="hljs-string">$e</span></span>xists, <span class="hljs-string"><span class="hljs-string">$p</span></span>id <span class="hljs-type"><span class="hljs-type">OnAutoItExitRegister</span></span> ( <span class="hljs-comment"><span class="hljs-comment">"TerminateChilds"</span></span> ) <span class="hljs-type"><span class="hljs-type">While</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource = <span class="hljs-type"><span class="hljs-type">IniReadSectionNames</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile) <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-type"><span class="hljs-type">UBound</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">$e</span></span>xists = <span class="hljs-type"><span class="hljs-type">False</span></span> <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$j</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource[<span class="hljs-string"><span class="hljs-string">$j</span></span>] == <span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$i</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-string"><span class="hljs-string">$e</span></span>xists = <span class="hljs-type"><span class="hljs-type">True</span></span> <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-string"><span class="hljs-string">$e</span></span>xists <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ProcessClose</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$i</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]) _ArrayDelete(<span class="hljs-string"><span class="hljs-string">$r</span></span>un, <span class="hljs-string"><span class="hljs-string">$i</span></span>) <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">EndIf</span></span> <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-string"><span class="hljs-string">$e</span></span>xists = <span class="hljs-type"><span class="hljs-type">False</span></span> <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$j</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-type"><span class="hljs-type">UBound</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource[<span class="hljs-string"><span class="hljs-string">$i</span></span>] == <span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$j</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-string"><span class="hljs-string">$e</span></span>xists = <span class="hljs-type"><span class="hljs-type">True</span></span> <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-string"><span class="hljs-string">$e</span></span>xists <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>id = <span class="hljs-type"><span class="hljs-type">Run</span></span>(@<span class="hljs-type"><span class="hljs-type">ScriptName</span></span> &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>ource[<span class="hljs-string"><span class="hljs-string">$i</span></span>] &amp; <span class="hljs-comment"><span class="hljs-comment">""</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span>) <span class="hljs-type"><span class="hljs-type">Dim</span></span> <span class="hljs-string"><span class="hljs-string">$t</span></span>emp[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">2</span></span>] = [[<span class="hljs-string"><span class="hljs-string">$p</span></span>id, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource[<span class="hljs-string"><span class="hljs-string">$i</span></span>]]] _ArrayAdd(<span class="hljs-string"><span class="hljs-string">$r</span></span>un, <span class="hljs-string"><span class="hljs-string">$t</span></span>emp) <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">EndIf</span></span> <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-type"><span class="hljs-type">UBound</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">ProcessExists</span></span>(<span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$i</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]) == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>id = <span class="hljs-type"><span class="hljs-type">Run</span></span>(@<span class="hljs-type"><span class="hljs-type">ScriptName</span></span> &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$i</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] &amp; <span class="hljs-comment"><span class="hljs-comment">""</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span>) <span class="hljs-string"><span class="hljs-string">$r</span></span>un[<span class="hljs-string"><span class="hljs-string">$i</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">$p</span></span>id <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">EndIf</span></span> <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-type"><span class="hljs-type">WEnd</span></span> <span class="hljs-type"><span class="hljs-type">EndIf</span></span> <span class="hljs-type"><span class="hljs-type">MsgBox</span></span>(<span class="hljs-string"><span class="hljs-string">$M</span></span>B_SYSTEMMODAL, <span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-comment"><span class="hljs-comment">"I am started "</span></span> &amp; @<span class="hljs-type"><span class="hljs-type">CRLF</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-type"><span class="hljs-type">Func</span></span> <span class="hljs-type"><span class="hljs-type">Terminated</span></span>() <span class="hljs-type"><span class="hljs-type">MsgBox</span></span>(<span class="hljs-string"><span class="hljs-string">$M</span></span>B_SYSTEMMODAL, <span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-comment"><span class="hljs-comment">"I am terminated "</span></span> &amp; @<span class="hljs-type"><span class="hljs-type">CRLF</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">1</span></span>], <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-type"><span class="hljs-type">EndFunc</span></span> <span class="hljs-type"><span class="hljs-type">OnAutoItExitRegister</span></span> ( <span class="hljs-comment"><span class="hljs-comment">"Terminated"</span></span> ) <span class="hljs-type"><span class="hljs-type">TraySetToolTip</span></span>(<span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-string"><span class="hljs-string">$t</span></span>ools = <span class="hljs-comment"><span class="hljs-comment">"bs1770gain-tools\"</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ource = <span class="hljs-string"><span class="hljs-string">$C</span></span>mdLine[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$d</span></span>estination = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"destination"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$b</span></span>ak = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"bak"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>tmp = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"stmp"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"tmp1"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$t</span></span>mp2 = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"tmp2"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$o</span></span>tmp = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"otmp"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$f</span></span>fmpeg_cmd = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"ffmpeg_cmd"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$d</span></span>estinationExtension = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"destinationExtension"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$t</span></span>hreads = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"threads"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ox_cmd = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"sox_cmd"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$b</span></span>ak) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$b</span></span>ak) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$d</span></span>estination) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$d</span></span>estination) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>tmp) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>tmp) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp1) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp1) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp2) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp2) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-type"><span class="hljs-type">FileExists</span></span>(<span class="hljs-string"><span class="hljs-string">$o</span></span>tmp) <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">DirCreate</span></span>(<span class="hljs-string"><span class="hljs-string">$o</span></span>tmp) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>File <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$d</span></span>escriptionFile <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInput <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$o</span></span>utFile <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>Titr <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$e</span></span>Titr <span class="hljs-type"><span class="hljs-type">While</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$f</span></span>iles = _FileListToArray(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">$F</span></span>LTA_FILES, <span class="hljs-type"><span class="hljs-type">False</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">For</span></span> <span class="hljs-string"><span class="hljs-string">$i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">To</span></span> <span class="hljs-type"><span class="hljs-type">Ubound</span></span>(<span class="hljs-string"><span class="hljs-string">$f</span></span>iles) - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$f</span></span> = <span class="hljs-string"><span class="hljs-string">$f</span></span>iles[<span class="hljs-string"><span class="hljs-string">$i</span></span>] <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>Drive = <span class="hljs-comment"><span class="hljs-comment">""</span></span>, <span class="hljs-string"><span class="hljs-string">$s</span></span>Dir = <span class="hljs-comment"><span class="hljs-comment">""</span></span>, <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName = <span class="hljs-comment"><span class="hljs-comment">""</span></span>, <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension = <span class="hljs-comment"><span class="hljs-comment">""</span></span> <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>PathSplit = _PathSplit(<span class="hljs-string"><span class="hljs-string">$f</span></span>, <span class="hljs-string"><span class="hljs-string">$s</span></span>Drive, <span class="hljs-string"><span class="hljs-string">$s</span></span>Dir, <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName, <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> = <span class="hljs-type"><span class="hljs-type">FileOpen</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension, <span class="hljs-string"><span class="hljs-string">$F</span></span>O_APPEND) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> == <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">FileClose</span></span>(<span class="hljs-string"><span class="hljs-string">$h</span></span>) <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> = <span class="hljs-type"><span class="hljs-type">FileOpen</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension, <span class="hljs-string"><span class="hljs-string">$F</span></span>O_APPEND) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> == <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">FileClose</span></span>(<span class="hljs-string"><span class="hljs-string">$h</span></span>) <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> = <span class="hljs-type"><span class="hljs-type">FileOpen</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension, <span class="hljs-string"><span class="hljs-string">$F</span></span>O_APPEND) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> == <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">FileClose</span></span>(<span class="hljs-string"><span class="hljs-string">$h</span></span>) <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">50</span></span>) <span class="hljs-type"><span class="hljs-type">Local</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> = <span class="hljs-type"><span class="hljs-type">FileOpen</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension, <span class="hljs-string"><span class="hljs-string">$F</span></span>O_APPEND) <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-string"><span class="hljs-string">$h</span></span> == <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">FileClose</span></span>(<span class="hljs-string"><span class="hljs-string">$h</span></span>) <span class="hljs-string"><span class="hljs-string">$b</span></span>ak = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"bak"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$d</span></span>estination = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"destination"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$s</span></span>tmp = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"stmp"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"tmp1"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$t</span></span>mp2 = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"tmp2"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$o</span></span>tmp = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"otmp"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$f</span></span>fmpeg_cmd = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"ffmpeg_cmd"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$d</span></span>estinationExtension = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"destinationExtension"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$t</span></span>hreads = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"threads"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$s</span></span>ox_cmd = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"sox_cmd"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$p</span></span>re_cmd = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$i</span></span>niFile, <span class="hljs-string"><span class="hljs-string">$s</span></span>ource, <span class="hljs-comment"><span class="hljs-comment">"prepare_ffmpeg_cmd"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile = randomString(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-string"><span class="hljs-string">$b</span></span>ak &amp;= <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension <span class="hljs-string"><span class="hljs-string">$s</span></span>File = <span class="hljs-string"><span class="hljs-string">$s</span></span>tmp &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension <span class="hljs-string"><span class="hljs-string">$d</span></span>escriptionFile = <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension &amp; <span class="hljs-comment"><span class="hljs-comment">".ini"</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInput = <span class="hljs-string"><span class="hljs-string">$t</span></span>mp2 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">".wav"</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInputSox = <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_sox.wav"</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput = <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_norm.wav"</span></span> <span class="hljs-string"><span class="hljs-string">$o</span></span>utFile = <span class="hljs-string"><span class="hljs-string">$o</span></span>tmp &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_out"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$d</span></span>estinationExtension <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">FileMove</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ource &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension, <span class="hljs-string"><span class="hljs-string">$b</span></span>ak, <span class="hljs-string"><span class="hljs-string">$F</span></span>C_OVERWRITE) == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">Not</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>re_cmd <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">FileCopy</span></span>(<span class="hljs-string"><span class="hljs-string">$b</span></span>ak, <span class="hljs-string"><span class="hljs-string">$s</span></span>File, <span class="hljs-string"><span class="hljs-string">$F</span></span>C_OVERWRITE) == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-type"><span class="hljs-type">ContinueLoop</span></span> <span class="hljs-type"><span class="hljs-type">Else</span></span> <span class="hljs-string"><span class="hljs-string">$c</span></span>md_pre = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffmpeg -y -ss 0:0:0.0 -r 25 -i "</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$b</span></span>ak &amp; <span class="hljs-comment"><span class="hljs-comment">""</span></span><span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$p</span></span>re_cmd &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>File <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_pre) <span class="hljs-type"><span class="hljs-type">EndIf</span></span> <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) ;<span class="hljs-string"><span class="hljs-string">$l</span></span>og = <span class="hljs-type"><span class="hljs-type">FileOpen</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">".bat"</span></span>, <span class="hljs-string"><span class="hljs-string">$F</span></span>O_OVERWRITE + <span class="hljs-string"><span class="hljs-string">$F</span></span>O_UTF8 + <span class="hljs-string"><span class="hljs-string">$F</span></span>O_CREATEPATH) <span class="hljs-string"><span class="hljs-string">$c</span></span>md_info = <span class="hljs-comment"><span class="hljs-comment">"cmd /c "</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffprobe -v quiet -print_format ini -show_format -show_streams "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>File &amp; <span class="hljs-comment"><span class="hljs-comment">" &gt; "</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$d</span></span>escriptionFile &amp; <span class="hljs-comment"><span class="hljs-comment">""</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_info) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_info) <span class="hljs-string"><span class="hljs-string">$d</span></span>ur = <span class="hljs-type"><span class="hljs-type">Number</span></span>(<span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$d</span></span>escriptionFile, <span class="hljs-comment"><span class="hljs-comment">"streams.stream.0"</span></span>, <span class="hljs-comment"><span class="hljs-comment">"duration"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>)) <span class="hljs-string"><span class="hljs-string">$c</span></span>md_AudioInput = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffmpeg -ss 0:0:0 -i "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>File &amp; <span class="hljs-comment"><span class="hljs-comment">" -t "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$d</span></span>ur &amp; <span class="hljs-comment"><span class="hljs-comment">" -vn -c:a pcm_s16le -af "</span></span><span class="hljs-comment"><span class="hljs-comment">"pan=stereo| FL &lt; FL + 0.5*FC + 0.6*BL + 0.6*SL | FR &lt; FR + 0.5*FC + 0.6*BR + 0.6*SR"</span></span><span class="hljs-comment"><span class="hljs-comment">" -ac 2 "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInput &amp; <span class="hljs-comment"><span class="hljs-comment">" -y -threads "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>hreads ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_AudioInput) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_AudioInput) <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput = <span class="hljs-comment"><span class="hljs-comment">"tmp\"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">".flac"</span></span> <span class="hljs-type"><span class="hljs-type">If</span></span> <span class="hljs-type"><span class="hljs-type">IsString</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>ox_cmd) <span class="hljs-type"><span class="hljs-type">And</span></span> <span class="hljs-string"><span class="hljs-string">$s</span></span>ox_cmd &lt;&gt; <span class="hljs-comment"><span class="hljs-comment">""</span></span> <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput = <span class="hljs-comment"><span class="hljs-comment">"tmp\"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_sox.flac"</span></span> <span class="hljs-string"><span class="hljs-string">$c</span></span>md_Sox = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"sox "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInput &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInputSox &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>ox_cmd ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_Sox) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_Sox) <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInput = <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInputSox <span class="hljs-type"><span class="hljs-type">EndIf</span></span> <span class="hljs-string"><span class="hljs-string">$c</span></span>md_BS1770gain = <span class="hljs-comment"><span class="hljs-comment">"bs1770gain --ebu "</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$a</span></span>udioInput &amp; <span class="hljs-comment"><span class="hljs-comment">""</span></span><span class="hljs-comment"><span class="hljs-comment">" -ao "</span></span><span class="hljs-comment"><span class="hljs-comment">"tmp"</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_BS1770gain) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_BS1770gain) <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-string"><span class="hljs-string">$a</span></span> = <span class="hljs-type"><span class="hljs-type">StringRegExp</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>FileName, <span class="hljs-comment"><span class="hljs-comment">"^.+{(\d{2}) (\d{2}) (\d{2}) (\d{2}) (\d{2})}$"</span></span>, <span class="hljs-string"><span class="hljs-string">$S</span></span>TR_REGEXPARRAYGLOBALMATCH) <span class="hljs-type"><span class="hljs-type">If</span></span> @error <span class="hljs-type"><span class="hljs-type">Then</span></span> <span class="hljs-string"><span class="hljs-string">$c</span></span>md_Output = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffmpeg -i "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>File &amp; <span class="hljs-comment"><span class="hljs-comment">" -i "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$f</span></span>fmpeg_cmd &amp; <span class="hljs-comment"><span class="hljs-comment">" -map 0:v -map 1:a -threads "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>hreads &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$o</span></span>utFile &amp; <span class="hljs-comment"><span class="hljs-comment">" -y"</span></span> ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_Output) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_Output) <span class="hljs-type"><span class="hljs-type">Else</span></span> <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_h = <span class="hljs-type"><span class="hljs-type">Number</span></span>(<span class="hljs-string"><span class="hljs-string">$a</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_m = <span class="hljs-type"><span class="hljs-type">Number</span></span>(<span class="hljs-string"><span class="hljs-string">$a</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_s = <span class="hljs-type"><span class="hljs-type">Number</span></span>(<span class="hljs-string"><span class="hljs-string">$a</span></span>[<span class="hljs-number"><span class="hljs-number">2</span></span>]) <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_m = <span class="hljs-type"><span class="hljs-type">Number</span></span>(<span class="hljs-string"><span class="hljs-string">$a</span></span>[<span class="hljs-number"><span class="hljs-number">3</span></span>]) <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_s = <span class="hljs-type"><span class="hljs-type">Number</span></span>(<span class="hljs-string"><span class="hljs-string">$a</span></span>[<span class="hljs-number"><span class="hljs-number">4</span></span>]) <span class="hljs-string"><span class="hljs-string">$d</span></span>ur = <span class="hljs-string"><span class="hljs-string">$d</span></span>ur - (<span class="hljs-string"><span class="hljs-string">$t</span></span>itr_h*<span class="hljs-number"><span class="hljs-number">60</span></span>*<span class="hljs-number"><span class="hljs-number">60</span></span> + <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_m*<span class="hljs-number"><span class="hljs-number">60</span></span> + <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_s) <span class="hljs-string"><span class="hljs-string">$d</span></span>stDur = <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_m*<span class="hljs-number"><span class="hljs-number">60</span></span> + <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_s <span class="hljs-string"><span class="hljs-string">$o</span></span>utDur = <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_h*<span class="hljs-number"><span class="hljs-number">60</span></span>*<span class="hljs-number"><span class="hljs-number">60</span></span> + <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_m*<span class="hljs-number"><span class="hljs-number">60</span></span> + <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_s + <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_m*<span class="hljs-number"><span class="hljs-number">60</span></span> + <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_s <span class="hljs-string"><span class="hljs-string">$s</span></span>peed = <span class="hljs-string"><span class="hljs-string">$d</span></span>stDur / <span class="hljs-string"><span class="hljs-string">$d</span></span>ur <span class="hljs-string"><span class="hljs-string">$c</span></span>odec = <span class="hljs-type"><span class="hljs-type">IniRead</span></span>(<span class="hljs-string"><span class="hljs-string">$d</span></span>escriptionFile, <span class="hljs-comment"><span class="hljs-comment">"streams.stream.0"</span></span>, <span class="hljs-comment"><span class="hljs-comment">"codec_name"</span></span>, <span class="hljs-type"><span class="hljs-type">Null</span></span>) <span class="hljs-string"><span class="hljs-string">$s</span></span>Titr = <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_stitr"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension <span class="hljs-string"><span class="hljs-string">$e</span></span>Titr = <span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_etitr"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Extension <span class="hljs-string"><span class="hljs-string">$c</span></span>md_ETirt = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffmpeg -y -ss "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_h &amp; <span class="hljs-comment"><span class="hljs-comment">":"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_m &amp; <span class="hljs-comment"><span class="hljs-comment">":"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_s &amp; <span class="hljs-comment"><span class="hljs-comment">" -i "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>File &amp; <span class="hljs-comment"><span class="hljs-comment">" -filter:v "</span></span><span class="hljs-comment"><span class="hljs-comment">"setpts="</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>peed &amp; <span class="hljs-comment"><span class="hljs-comment">"*PTS"</span></span><span class="hljs-comment"><span class="hljs-comment">" -t 00:"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_m &amp; <span class="hljs-comment"><span class="hljs-comment">":"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$d</span></span>ur_s &amp; <span class="hljs-comment"><span class="hljs-comment">" -c:v "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$c</span></span>odec &amp; <span class="hljs-comment"><span class="hljs-comment">" -qscale:v 0 -flags +ilme+ildct -deinterlace -an "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$e</span></span>Titr <span class="hljs-string"><span class="hljs-string">$c</span></span>md_STitr = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffmpeg -y -ss 0:0:0 -i "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>File &amp; <span class="hljs-comment"><span class="hljs-comment">" -t "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_h &amp; <span class="hljs-comment"><span class="hljs-comment">":"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_m &amp; <span class="hljs-comment"><span class="hljs-comment">":"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>itr_s &amp; <span class="hljs-comment"><span class="hljs-comment">" -c:v copy -an "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Titr <span class="hljs-string"><span class="hljs-string">$c</span></span>md_Output = <span class="hljs-string"><span class="hljs-string">$t</span></span>ools &amp; <span class="hljs-comment"><span class="hljs-comment">"ffmpeg -y -i concat:"</span></span><span class="hljs-comment"><span class="hljs-comment">""</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>Titr &amp; <span class="hljs-comment"><span class="hljs-comment">"|"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$e</span></span>Titr &amp; <span class="hljs-comment"><span class="hljs-comment">""</span></span><span class="hljs-comment"><span class="hljs-comment">" -i "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput &amp; <span class="hljs-comment"><span class="hljs-comment">" -t "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$o</span></span>utDur &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$f</span></span>fmpeg_cmd &amp; <span class="hljs-comment"><span class="hljs-comment">" -map 0:v -map 1:a -threads "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>hreads &amp; <span class="hljs-comment"><span class="hljs-comment">" "</span></span> &amp; <span class="hljs-string"><span class="hljs-string">$o</span></span>utFile ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_ETirt) ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_STitr) ;<span class="hljs-type"><span class="hljs-type">FileWriteLine</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og, <span class="hljs-string"><span class="hljs-string">$c</span></span>md_Output) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_ETirt) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_STitr) <span class="hljs-type"><span class="hljs-type">RunWait</span></span>(<span class="hljs-string"><span class="hljs-string">$c</span></span>md_Output) <span class="hljs-type"><span class="hljs-type">EndIf</span></span> ;<span class="hljs-type"><span class="hljs-type">FileClose</span></span>(<span class="hljs-string"><span class="hljs-string">$l</span></span>og) <span class="hljs-type"><span class="hljs-type">FileMove</span></span>(<span class="hljs-string"><span class="hljs-string">$o</span></span>utFile, <span class="hljs-string"><span class="hljs-string">$d</span></span>estination &amp; <span class="hljs-string"><span class="hljs-string">$s</span></span>FileName &amp; <span class="hljs-string"><span class="hljs-string">$d</span></span>estinationExtension, <span class="hljs-string"><span class="hljs-string">$F</span></span>C_OVERWRITE) <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>File) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$d</span></span>escriptionFile) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$s</span></span>Titr) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$e</span></span>Titr) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp2 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">".wav"</span></span>) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_sox.wav"</span></span>) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$t</span></span>mp1 &amp; <span class="hljs-string"><span class="hljs-string">$t</span></span>empFile &amp; <span class="hljs-comment"><span class="hljs-comment">"_norm.wav"</span></span>) <span class="hljs-type"><span class="hljs-type">FileDelete</span></span>(<span class="hljs-string"><span class="hljs-string">$a</span></span>udioOutput) ;<span class="hljs-type"><span class="hljs-type">Exit</span></span> <span class="hljs-type"><span class="hljs-type">Next</span></span> <span class="hljs-type"><span class="hljs-type">Sleep</span></span>(<span class="hljs-number"><span class="hljs-number">1000</span></span>) <span class="hljs-type"><span class="hljs-type">WEnd</span></span></code> </pre> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/333686/">https://habr.com/ru/post/333686/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333676/index.html">How EA made life difficult for us, or how we fixed a bug 12 years ago</a></li>
<li><a href="../333678/index.html">Warehouse management system using CQRS and Event Sourcing. Design</a></li>
<li><a href="../333680/index.html">C / C ++ on Linux in Visual Studio Code for Beginners</a></li>
<li><a href="../333682/index.html">Officially present dapp - DevOps utility to maintain CI / CD</a></li>
<li><a href="../333684/index.html">What is DevOps: an approach that can change everything</a></li>
<li><a href="../333688/index.html">Google plans to introduce cloud computing service for quantum computing.</a></li>
<li><a href="../333690/index.html">"Friday format": How to extinguish the flame or 8 sure ways to ruin the development</a></li>
<li><a href="../333692/index.html">Procedural generation in Distrust</a></li>
<li><a href="../333694/index.html">Continuing to explore Tizen: C # components turned out to be of high quality.</a></li>
<li><a href="../333696/index.html">The book "subject-oriented design: patterns, principles and methods"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
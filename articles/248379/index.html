<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple "iron" terminal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a continuation of the description of the microcontroller on the 6502 "Ayush" processor . In it, we will look at how to turn the contro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple "iron" terminal</h1><div class="post__text post__text-html js-mediator-article"> This article is a continuation of the description of the <a href="http://habrahabr.ru/post/223389/">microcontroller on the 6502 "Ayush" processor</a> .  In it, we will look at how to turn the controller into a full-fledged computer kit, and you don‚Äôt have to make Ayusha as a basis, any other device will do.  Well, or use the assembled terminal for something else.  And again, for the assembly will be applied "grass feed" ... <br><br><img src="https://habrastorage.org/files/577/d08/5b7/577d085b752c4cefa4d7f6b9418883dc.JPG" alt="image"><br><a name="habracut"></a><br>  To begin with, let us recall a little the history of computer engineering in the ‚Äúpre-micro-RSC‚Äù era.  In fact, most of the first computers were regular controllers, to which it was necessary to connect a keyboard, a TV set and a program reading / reading device (at that time a punisher or a cassette tape recorder).  The collected iron was called the terminal and was divided into two types - ‚Äúdumb‚Äù and intelligent terminals.  The second of them was essentially a separate full-fledged computer, had its own processor and could connect to more powerful counterparts.  But the first version did not have a processor, was going on a "hard" logic and could only communicate with external devices via a serial port, and therefore was called "stupid".  Well, stupid - not stupid, but such a terminal performed its task, especially as there were no special requirements for it. <br><br>  It was decided to assemble such a terminal for ‚ÄúAyushi‚Äù.  It was supposed to allow the output of alphanumeric information received from the controller to a standard TV, enter the program text from the built-in keyboard, and also allow the controller to communicate with a regular tape recorder.  Yes, in fact, the assigned tasks smelled like terry downgrading, but apart from them, the finished device could communicate not only with the existing controller, but also be a completely independent network (!, But more on that below) device.  And yes, no fans, no noisy things - silence when working! <br>  The scheme of the terminal can be found at the link at the end of the article.  Here I will describe the insides of the structure and the reason for their choice. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The TV output was made in violation of the 70s canons, using the ATMEGA8 single-chip microcontroller, on which, in principle, the entire terminal could be assembled (such designs exist).  But, since single-chip terminals do not allow them to specifically expand on hardware, they use non-canonical PS / 2 keyboards and do not allow working at speeds below 1200 bps, they were decided to refuse and leave the chip to work only on television output.  Why on the TV, and not on the VGA-compatible devices - there was a small car TV monitor, which was enough for working with Ayusha. <br><br>  For keyboard input, it was decided to use an ASCII keyboard.  As you know, all modern keyboards, both in homemade and industrial, are built on the basis of a matrix, with subsequent processing of keystrokes by the built-in (or additional) processor.  Matrix keyboards were used both in the Spectrum and in the RC-86, and the current AT-keyboards are also matrix ones.  However, the first computers, the same Apple-I / II, used ASCII-keyboards that did not take up the processor's computing time and issued a ready-made ASCII code of the pressed character right away, which in my opinion is much more convenient than wasting time on stupid matrix scanning standby pressing.  For clever keyboards, specialized chips were previously produced (in fact, a ROM with a table of ASCII codes), in other cases, when it was enough to use the first 128 characters of the table, simple diode coders were used.  It was based on Don Lancaster's well-known keyboard, and the chips currently missing in the market were replaced with simple transistor cascades.  Now I have an ASCII-keyboard, which is not ashamed to connect to the first Apple. <br><br>  In the vastness of the country, a set of keys, untouched from Soviet times, was found (thanks to Sergey, R7GW): <br><br><img src="https://habrastorage.org/files/c4e/c5b/9c8/c4ec5b9c829641ae9bec613bcefa8e57.jpg" alt="image"><br><br>  The keys were collected in a heap and placed together with the diode decoders on one board: <br><br><img src="https://habrastorage.org/files/287/6a9/337/2876a9337ed24b0dbe5c5c6f23325b80.jpg" alt="image"><br><br>  Of course, the construction should work not in principle, but in the case, therefore, the hull sculpting began from pieces of 10 mm plywood: <br><br><img src="https://habrastorage.org/files/d70/2b5/974/d702b597400f4727ad818e6dc7e32144.jpg" alt="image"><br><img src="https://habrastorage.org/files/a37/5c4/863/a375c4863c434693831a1748b93e407e.jpg" alt="image"><br><br>  After assembling the case and installing the keyboard into it, the case was painted with the so-called ‚Äúrubber paint‚Äù (rubber paint, essentially dissolved rubber in the cartridge), the necessary connectors and indicators were installed.  On the top of the case there are indicators for switching on and reading from a magnetic tape, as well as an input source switch (see below): <br><br><img src="https://habrastorage.org/files/20a/38c/054/20a38c0548684bc5ab42e0f4c553c450.jpg" alt="image"><br><br>  The back wall has a power connector with a switch and a fuse, a COM port, an output for a TV and a tape recorder, and a power connector for a TV or external devices: <br><br><img src="https://habrastorage.org/files/47c/b4a/d8c/47cb4ad8c0cf4019bc7c6574e0dbdf53.jpg" alt="image"><br><br>  In general, I admit that I was somewhat in a hurry with the manufacture of the case, so the heads of the screws and some rough edges that do not affect the overall operation of the terminal are visible. <br>  Since we do not have a processor, a node for converting a parallel code received from a keyboard into a serial code has appeared in the terminal scheme.  Having tried several options, it was decided to use as a basis the scheme on the multiplexer 155KP2, and not on the shift registers.  It came out easier and consumed less power.  You can see the result on the diagram, the link at the end of the article. <br>  The speed of the terminal - 300 bps. <br>  ... <br>  I hope everyone laughed and dried their tears, we continue. <br>  ... <br>  Why is such a low speed chosen?  First, based on the fact that the slowest part of the computer usually sits in front of it and is not able to type text at a speed higher than 33 characters per second.  Secondly, to display alphanumeric information on the monitor does not require high speed (in comparison with graphics).  Thirdly, we need to somehow communicate with the tape recorder, without using additional software appendages.  Well, in the fourth, the unhurried conclusion of the text on the monitor is soothing and somewhat resembles footage from the ‚ÄúMatrix‚Äù. <br><br>  Of course, without using the circuit blocks for interface with a tape recorder, you can raise the speed of the terminal's communication on the COM port to higher speeds (19.2 kbit / s - software limiting the used ATMMEGI firmware) without changing the main circuit.  Thus, the terminal can be connected to configure any device on the COM port - modems, tsisok, routers, etc., of course, in cases when updating the device firmware is not required. <br><br>  The tape recorder uses the <a href="http://en.wikipedia.org/wiki/Kansas_City_standard">Kansas</a> tape <a href="http://en.wikipedia.org/wiki/Kansas_City_standard">recording standard</a> .  In this case, "0" is encoded with a frequency of 2400 Hertz, and "1" is 1200 Hertz.  These frequencies are perfectly recorded both on a magnetic tape and on solid-state drives, and are much less susceptible to failures than the <a href="http://en.wikipedia.org/wiki/Non-return-to-zero">NRZ</a> code used in the same Micro-80 / RK-86.  For reading from the tape, a frequency comparator is used, at the output of which we get a serial data stream.  As was seen in the previous photo, we can choose the input source switch from where the controller will receive information - from the keyboard or from the tape, it will be absolutely indifferent to it.  We get a sort of driver-free communication unit of the controller with a magnetic tape, which also does not use processor resources. <br><br>  View of the terminal board is attached.  On the reverse side - MGTF is again mated, but this is not interesting, therefore, I don‚Äôt show it.  The transistor keys related to the keyboard are located on the right side of the board. <br><img src="https://habrastorage.org/files/826/321/812/8263218121e24f2b8021fdd85c4cc5b1.JPG" alt="image"><br><br>  Internal view of the terminal - all components in a wooden case. <br><img src="https://habrastorage.org/files/90e/adc/d6e/90eadcd6e9854e97a271a1ff90638c51.JPG" alt="image"><br><br>  How is the procedure for downloading the program from the magnetic tape can be viewed on the attached video.  The demo converter is loaded from decimal to hexadecimal and vice versa.  It should be noted that the download of the program itself contains some game moment, simultaneously allowing to evaluate the correctness of the work (thanks to <a href="http://geektimes.ru/users/inghost/" class="user_link">inghost</a> ). <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/WxOVNktjPVg%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700253,15700259&amp;usg=ALkJrhj-wLD1N1E_jvE1eyDe11lBqtIZWA" frameborder="0" allowfullscreen=""></iframe><br><br>  Summarize the view of the complex controller - terminal can be on the following photos, as with a conventional TV (photo at the beginning of the article), and with the car (here we use a micro cassette tape recorder, unlike the previous video). <br><img src="https://habrastorage.org/files/7cb/d41/1a8/7cbd411a8ab847329496d2ef93973da0.JPG" alt="image"><br><br>  The terminal was tested for networking using the COM-&gt; ETH converter bought on Aliexpress. <br><img src="https://habrastorage.org/files/061/263/058/0612630586ce4cf794f95076f4bc28e8.jpg" alt="image"><br><img src="https://habrastorage.org/files/19f/d53/f99/19fd53f99aa249c9b4bd3522712618b1.jpg" alt="image"><br><br>  Using the second converter and forwarding ports in the router, it was possible to control Ayusha via the Internet.  Although nothing prevents us in the same way to control any other devices through a virtual or real COM port. <br>  Well, to end the conversation.  On ‚ÄúAyusha it is already possible to play, on the photo screen of the launched program‚Äú Reversi ‚Äù.  And since the controller has already acquired <a href="http://www.qsl.net/rw6hrm/html/rtc.htm">a real-time clock chip</a> , it is already possible not only to play for a while, but also to use it in complex control devices. <br><img src="https://habrastorage.org/files/306/591/000/30659100010b4c25997f07e182e1e4e1.jpg" alt="image"><br><br>  Thank you for understanding. <br><br>  References <br>  <a href="http://www.qsl.net/rw6hrm/pdf/asciikbd.pdf">The article by Don Lancaster in the April issue of Popular Electronics magazine in 1974 about building an ASCII keyboard</a> <br>  <a href="">ASCII keyboard terminal layout</a> <br>  <a href="">Terminal layout</a> <br>  <a href="http://www.qsl.net/rw6hrm/html/6502.htm">Project main page</a> <br>  <a href="http://vk.com/sbc6502">Vkontakte community</a> </div><p>Source: <a href="https://habr.com/ru/post/248379/">https://habr.com/ru/post/248379/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248359/index.html">Once again about Hyper-Threading</a></li>
<li><a href="../248369/index.html">LinkMeUp. Issue number 23. Compass-EOS - the first router with optical switching within the board</a></li>
<li><a href="../248371/index.html">Unity3D - crossfade, the basics of working with sound (lesson)</a></li>
<li><a href="../248373/index.html">Android launchers. Three developer mistakes</a></li>
<li><a href="../248377/index.html">Handling custom gestures for Leap Motion. Part 1</a></li>
<li><a href="../248381/index.html">Volumetric planets in 2D via shader</a></li>
<li><a href="../248383/index.html">Gnuplot on homepage</a></li>
<li><a href="../248385/index.html">Named Function Arguments in C</a></li>
<li><a href="../248387/index.html">OAuth using JWT on salesforce</a></li>
<li><a href="../248391/index.html">Fighting 2D physics in Unity with the example of an endless game</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a mosaic image</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Surely you have repeatedly seen on the Internet these pictures: 


 I decided to write a universal script for creating such images. 

 Theoretical par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a mosaic image</h1><div class="post__text post__text-html js-mediator-article">  Surely you have repeatedly seen on the Internet these pictures: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec1/365/8b0/ec13658b0c0760f5da0e3f30b1f2bf47.jpg" alt="image"></div><br>  I decided to write a universal script for creating such images. <br><a name="habracut"></a><br><h3>  Theoretical part </h3><br>  Let's talk a little about how we are going to do all this.  Suppose that there is some limited set of images with which we can weave the canvas, as well as one image that must be presented in the form of a mosaic.  Then we need to split the image that needs to be converted into identical areas, each of which is then replaced with an image from a dataset with pictures. <br><br>  This raises the question of how to understand which image from dataset we should replace a certain area.  Of course, the ideal tiling of some area will be the same area.  Each area size <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.872ex" height="1.937ex" viewBox="0 -728.2 4250.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="1835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="2714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="3180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6E" x="3650" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> m \ times n </script>  can set <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.472ex" height="1.937ex" viewBox="0 -728.2 7522.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="1457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="2336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="2802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6E" x="3272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="4122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="4484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="4829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="5708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="6174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="6644" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 3 \ times n \ times m </script>  numbers (here, each pixel corresponds to three numbers - its R, G and B components).  In other words, each region is defined by a three-dimensional tensor.  Now it becomes clear that in order to determine the quality of the tiling of a region with a picture, provided that their sizes coincide, we need to calculate some loss function.  In this problem, we can consider the MSE of two tensors: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="45.915ex" height="3.262ex" viewBox="0 -987.6 19768.9 1404.6" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-4D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-53" x="1051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-45" x="1697" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="2461" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-78" x="2851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="3423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-79" x="3868" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="4366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-3D" x="5033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-66" x="6339" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="6890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="7341" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="7871" y="0"></use><g transform="translate(8304,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-75" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="1292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="2420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="2719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="3064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="3943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="4288" y="0"></use><g transform="translate(4650,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-4E" x="663" y="488"></use><g transform="translate(469,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="6368" y="0"></use><g transform="translate(6757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2212" x="7896" y="0"></use><g transform="translate(8897,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="693" y="-213"></use></g><g transform="translate(9732,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="550" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-4E" x="18880" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> MSE (x, y) = \ frac {\ sum \ limits_ {i = 1} ^ N (x_ {i} - y_ {i}) ^ 2} {N} </script></p><br>  Here <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> N </script>  - the number of signs, in our case <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.472ex" height="1.937ex" viewBox="0 -728.2 7522.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="1457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="2336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="2802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6E" x="3272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="4122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="4484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="4829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="5708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="6174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="6644" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> 3 \ times n \ times m </script>  . <br><br>  However, this formula is hardly applicable to real cases.  The fact is that when dataset is quite large, and the areas into which the original image is divided are rather small, you will have to do inadmissibly many actions, namely, compress each image from the dataset to the size of the area and read MSE <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.472ex" height="1.937ex" viewBox="0 -728.2 7522.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="1457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="2336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="2802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6E" x="3272" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="4122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="4484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="4829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="5708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="6174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="6644" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> 3 \ times n \ times m </script>  characteristics.  More precisely, in this formula it is bad that we are forced to compress absolutely every image for comparison, and not just once, but a number equal to the number of areas into which the original picture is divided. <br><br>  I propose the following solution to the problem: we will sacrifice a bit of quality and now we will characterize each picture from dataset only with 3 numbers: average RGB in the image.  Of course, several problems follow from this: first, now the ideal paving of the area is not only she, but, for example, it is also inverted (obviously, this paving is worse than the first), secondly, after calculating the average color we can get such R, G and B, that the image will not even have a pixel with such components (in other words, it is difficult to say that our eye perceives the image as a mixture of all its colors).  However, I did not think of a better way. <br><br>  It turns out that now it remains for us only once to calculate the average RGB for images from dataset, and then use the information obtained. <br><br>  Summarizing the above, we find that we now need some area to pick the closest RGB pixel from the set, and then tile the area with the image from the dataset that owns the found average RGB.  To compare the area and the pixel we do the same: we convert the area into three numbers and find the closest average RGB.  It turns out that we are only known <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.423ex" height="2.419ex" viewBox="0 -780.1 3195.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="1204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="1991" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="2436" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> R, G, B </script>  find in the set such <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.822ex" height="2.419ex" viewBox="0 -780.1 4228.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="1103" y="0"></use><g transform="translate(1548,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1112" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="2679" y="0"></use><g transform="translate(3124,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1074" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-8"> R_ {i}, G_ {i}, B_ {i} </script>  , that the Euclidean distance between these two points in three-dimensional space will be minimal: <br><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.866ex" height="2.901ex" viewBox="0 -935.7 20608.9 1249" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-71" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="1180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="1631" y="0"></use><g transform="translate(1993,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2212" x="1371" y="0"></use><g transform="translate(2371,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1074" y="-213"></use></g><g transform="translate(3475,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="4541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="5542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="5931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2212" x="6940" y="0"></use><g transform="translate(7941,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1112" y="-213"></use></g><g transform="translate(9071,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="550" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="10137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="11138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="11527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2212" x="12509" y="0"></use><g transform="translate(13510,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1074" y="-213"></use></g><g transform="translate(14613,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="550" y="513"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-3D" x="17728" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6D" x="18784" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="19662" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6E" x="20008" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ sqrt {(R - R_ {i}) ^ 2 + (G - G_ {i}) ^ 2 + (B - B_ {i}) ^ 2} = min </script><br><br><h3>  Dataset preprocessing </h3><br>  You can collect your own dataset pictures.  I used fusion dataset with images of cats and <a href="http://vision.stanford.edu/aditya86/ImageNetDogs/">dogs</a> . <br><br>  As I wrote above, we can once calculate the average RGB values ‚Äã‚Äãfor images from dataset and just save them.  What we are doing: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle items = {} <span class="hljs-comment"><span class="hljs-comment"># cv2      BGR,   RGB,     for path in os.listdir('dogs_images_dataset'): #      ,    for file in os.listdir(os.path.join('dogs_images_dataset', path)): file1 = os.path.join('dogs_images_dataset', path + '/' + file) img = np.array(cv2.cvtColor(cv2.imread(file1), cv2.COLOR_BGR2RGB)) r = round(img[:, :, 0].mean()) g = round(img[:, :, 1].mean()) b = round(img[:, :, 2].mean()) items[file1] = (r, g, b,) for file in os.listdir('cats_images_dataset'): #      ,          file1 = os.path.join('cats_images_dataset', file) img = np.array(cv2.cvtColor(cv2.imread(file1), cv2.COLOR_BGR2RGB)) r = round(img[:, :, 0].mean()) g = round(img[:, :, 1].mean()) b = round(img[:, :, 2].mean()) items[file1] = (r, g, b,) with open('data.pickle', 'wb') as f: pickle.dump(items, f)</span></span></code> </pre> <br>  This script will be executed for a relatively long time, after which the information we need will be saved in the data.pickle file. <br><br><h3>  Mosaic creation </h3><br>  Finally, we turn to creating a mosaic.  First, we write the necessary import s, and also declare several constants: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> cv2 <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sqrt PATH_TO_PICTURE = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-comment"><span class="hljs-comment">#       PICTURE = 'picture.png' #     VERTICAL_SECTION_SIZE = 7 #       HORIZONTAL_SECTION_SIZE = 7 #      </span></span></code> </pre><br>  We get the saved data from the file: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(<span class="hljs-string"><span class="hljs-string">'data.pickle'</span></span>, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: items = pickle.load(f)</code> </pre> <br>  We describe the loss function: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lost_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r_segm, g_segm, b_segm, arg)</span></span></span><span class="hljs-function">:</span></span> r, g, b = arg[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sqrt((r - r_segm) ** <span class="hljs-number"><span class="hljs-number">2</span></span> + (g - g_segm) ** <span class="hljs-number"><span class="hljs-number">2</span></span> + (b - b_segm) ** <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  Open the original image: <br><br><pre> <code class="python hljs">file = os.path.join(PATH_TO_PICTURE, PICTURE) img = np.array(cv2.cvtColor(cv2.imread(file), cv2.COLOR_BGR2RGB)) size = img.shape x, y = size[<span class="hljs-number"><span class="hljs-number">0</span></span>], size[<span class="hljs-number"><span class="hljs-number">1</span></span>]</code> </pre> <br>  Now note that tiling is possible if and only if <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="73.415ex" height="2.66ex" viewBox="0 -832 31609.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-78" x="389" y="0"></use><g transform="translate(962,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="1655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="2106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-67" x="2452" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="3182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-70" x="3652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="4155" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="4685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="5118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-76" x="5835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-64" x="6320" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6F" x="6844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="7329" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="7691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="8410" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-70" x="8880" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="9383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="9913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="10346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-78" x="10813" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="11385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="12025" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-70" x="12494" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="12998" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="13527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="13961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-77" x="14677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="15394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-64" x="15860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-67" x="16384" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="16864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="17581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-70" x="18050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="18554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="19083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="19517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-28" x="19983" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-79" x="20373" y="0"></use><g transform="translate(20870,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="21564" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="22015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-67" x="22361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="23091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-70" x="23561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="24064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="24594" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="25027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-76" x="25744" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-64" x="26229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6F" x="26753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="27238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="27600" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="28319" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-70" x="28789" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="29292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-63" x="29822" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="30255" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-79" x="30722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-29" x="31219" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> (x \ _orig \ space \ vdots \ space x) \ space \ wedge \ space (y \ _orig \ space \ vdots \ space y) </script>  where <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.674ex" height="2.298ex" viewBox="0 -728.2 5456.8 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="1265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="1717" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-67" x="2062" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="2543" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-79" x="2988" y="0"></use><g transform="translate(3485,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6F" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="4179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-69" x="4630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-67" x="4976" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> x \ _orig, y \ _orig </script>  - the size of the original image, and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.519ex" height="1.817ex" viewBox="0 -520.7 1515.2 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2C" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-79" x="1017" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> x, y </script>  - the size of the paving area.  Of course, the above condition is not always satisfied.  Therefore, we will cut the original image to the appropriate size, subtracting from the image size their residues from division into area sizes: <br><br><pre> <code class="python hljs">img = cv2.resize(img, (y - (y % VERTICAL_SECTION_SIZE), x - (x % HORIZONTAL_SECTION_SIZE))) size = img.shape x, y = size[<span class="hljs-number"><span class="hljs-number">0</span></span>], size[<span class="hljs-number"><span class="hljs-number">1</span></span>]</code> </pre> <br>  We now proceed directly to the tilting: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(x // HORIZONT AL_SECTION_SIZE): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> j <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(y // VERTICAL_SECTION_SIZE): sect = img[i * HORIZONTAL_SECTION_SIZE:(i + <span class="hljs-number"><span class="hljs-number">1</span></span>) * HORIZONTAL_SECTION_SIZE, j * VERTICAL_SECTION_SIZE:(j + <span class="hljs-number"><span class="hljs-number">1</span></span>) * VERTICAL_SECTION_SIZE] r_mean, g_mean, b_mean = sect[:, :, <span class="hljs-number"><span class="hljs-number">0</span></span>].mean(), sect[:, :, <span class="hljs-number"><span class="hljs-number">1</span></span>].mean(), sect[:, :, <span class="hljs-number"><span class="hljs-number">2</span></span>].mean()</code> </pre> <br>  Here, in the last but one line, the desired area of ‚Äã‚Äãthe picture is selected, and in the last line its average RGB components are considered. <br><br>  Now consider one of the most important lines: <br><br><pre> <code class="python hljs">current = sorted(items.items(), key=<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> argument: lost_function(r_mean, g_mean, b_mean, argument))[<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre> <br>  This line sorts all dataset images in ascending order by the value of the loss function for them and takes out argmin. <br><br>  Now we just have to crop the image and replace the area with it: <br><br><pre> <code class="python hljs">resized = cv2.resize(cv2.cvtColor(cv2.imread(current[<span class="hljs-number"><span class="hljs-number">0</span></span>]), cv2.COLOR_BGR2RGB), (VERTICAL_SECTION_SIZE, HORIZONTAL_SECTION_SIZE,)) img[i * HORIZONTAL_SECTION_SIZE:(i + <span class="hljs-number"><span class="hljs-number">1</span></span>) * HORIZONTAL_SECTION_SIZE, j * VERTICAL_SECTION_SIZE:(j + <span class="hljs-number"><span class="hljs-number">1</span></span>) * VERTICAL_SECTION_SIZE] = resized</code> </pre> <br>  Well, finally we will display the resulting image on the screen: <br><br><pre> <code class="python hljs">img = cv2.cvtColor(img, cv2.COLOR_RGB2BGR) cv2.imshow(<span class="hljs-string"><span class="hljs-string">'ImageWindow'</span></span>, img) cv2.waitKey(<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><h3>  A little more about the loss function </h3><br>  In general, there are several variants of the loss function, each of which is theoretically applicable to this problem.  Their quality can be assessed only by experience, what you can do :) <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="118.259ex" height="9.768ex" viewBox="0 -832 50916.9 4205.8" role="img" focusable="false" style="vertical-align: -7.836ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g transform="translate(12866,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-7C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="1357" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="1823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="2122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="2483" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="3013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-7C" x="3772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="4273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-7C" x="5273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="5802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="6630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="7097" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="7395" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="7757" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="8286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-7C" x="9073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="9574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-7C" x="10574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="11103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="11931" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="12398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="12696" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="13058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="13587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-7C" x="14347" y="0"></use></g><g transform="translate(12399,-1566)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-71" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="930" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="1381" y="0"></use><g transform="translate(1743,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="1295" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="1593" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="1955" y="0"></use><g transform="translate(2484,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1074" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="3920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="4920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="5749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="6215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="6514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="6875" y="0"></use><g transform="translate(7405,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1112" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="8867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="10118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="10947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="11413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="11712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="12073" y="0"></use><g transform="translate(12603,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1074" y="583"></use></g></g></g><g transform="translate(0,-3076)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-71" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="930" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="1381" y="0"></use><g transform="translate(1743,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-31" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-36" x="2280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="3031" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="3859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="4326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="4624" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="4986" y="0"></use><g transform="translate(5515,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1074" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="6951" y="0"></use><g transform="translate(7951,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-37" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-31" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-35" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="2280" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="10982" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="11811" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="12277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="12576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="12937" y="0"></use><g transform="translate(13467,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1112" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="14929" y="0"></use><g transform="translate(15930,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-37" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="2280" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="18961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="19790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="20256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="20555" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="20916" y="0"></use><g transform="translate(21446,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1074" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-73" x="25152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-71" x="25622" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-72" x="26082" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="26534" y="0"></use><g transform="translate(26895,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-31" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-36" x="2280" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="3932" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="3484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="4313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="4779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="5078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="5439" y="0"></use><g transform="translate(5969,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1074" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="7405" y="0"></use><g transform="translate(8405,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-37" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-31" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-35" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="2280" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="3932" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="11890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="12719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="13185" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="13484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="13845" y="0"></use><g transform="translate(14375,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-47" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1112" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2B" x="15837" y="0"></use><g transform="translate(16838,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-37" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="2280" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="3932" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-44" x="20323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-65" x="21151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-6C" x="21618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-74" x="21916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-61" x="22278" y="0"></use><g transform="translate(22807,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMATHI-42" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/454828/&amp;xid=17259,15700019,15700186,15700190,15700256,15700259&amp;usg=ALkJrhi0R9QtFer4f4D1OFSci9EbSTH2Dw#MJMAIN-32" x="1074" y="583"></use></g></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-13"> | \ Delta R | + | \ Delta G | + | \ Delta B | \\ sqrt {Delta R ^ 2 + Delta G ^ 2 + \ Delta B ^ 2} \\ sqrt {0.2126 \ Delta R ^ 2 + 0.7152 \ Delta G ^ 2 + 0.0722 \ Delta B ^ 2} \ \ \ sqrt {0.2126 ^ 2 \ Delta R ^ 2 + 0.7152 ^ 2 \ Delta G ^ 2 + 0.0722 ^ 2 \ Delta B ^ 2} </script></p><br><br><h3>  Conclusion </h3><br>  Here are some of my results: <br><br><div class="spoiler">  <b class="spoiler_title">Open</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/dc8/729/395/dc87293957d6476e4a865de29d665414.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/df8/ecd/b6e/df8ecdb6e4ad0c7bf55cc1f7a21fcac0.jpg" alt="image"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Originals</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f4a/41c/447/f4a41c44793e3070ab22541ee54f1c89.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/463/fd3/5f0/463fd35f0b3ccf5b86aaef2c2db7b0ff.jpg" alt="image"><br></div></div><br>  You can view the full source code, the already calculated data.pickle file, as well as the archive with the dataset I collected, in the <a href="https://github.com/afentev/Mosaic/tree/master">repository</a> . </div><p>Source: <a href="https://habr.com/ru/post/454828/">https://habr.com/ru/post/454828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454808/index.html">About spaceships and "space". How to make a feature by changing the whole product on the way</a></li>
<li><a href="../454810/index.html">Fresh air on Mars: bend a CO2 molecule and get oxygen</a></li>
<li><a href="../454818/index.html">Rekko Challenge - how to take 2nd place in the competition for the creation of recommendation systems</a></li>
<li><a href="../45482/index.html">HTTP_StaticMerger - automatic gluing of CSS and JS files for quick loading</a></li>
<li><a href="../454824/index.html">The simplest opamp on discrete elements</a></li>
<li><a href="../45483/index.html">Cartoon "Gypsy": You are not filmed in cartoons?</a></li>
<li><a href="../454832/index.html">Why a four-day work week is a bad fairy tale.</a></li>
<li><a href="../454834/index.html">Real terms of studying blind typing with low motivation</a></li>
<li><a href="../454840/index.html">Careful transfer to the Netherlands with his wife and mortgage. Part 2: document preparation and relocation</a></li>
<li><a href="../454844/index.html">Odaydzhest: interesting for designers for the week</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
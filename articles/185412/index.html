<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python Tools for Visual Studio, first-hand updates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is written by Pavel Minaev int19h - the developer from the PTVS team specifically for publication in our corporate blog on Habrahabr. Sha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python Tools for Visual Studio, first-hand updates</h1><div class="post__text post__text-html js-mediator-article">  <em>This article is written by Pavel Minaev <a href="https://habrahabr.ru/users/int19h/" class="user_link">int19h</a> - the developer from the PTVS team specifically for publication in our corporate blog on Habrahabr.</em>  <em>Share your impressions in the comments.</em>  <em>All feedback will be given to the team.</em> <br><br>  Hello!  I am a developer from the <a href="https://pytools.codeplex.com/">Python Tools for Visual Studio</a> team.  The other day we released a <a href="https://pytools.codeplex.com/releases/view/103101">new beta version of</a> our product, and taking advantage of the occasion, this time I would like to tell more in detail about what PTVS is and what it can offer you. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b0/92d/8c2/0b092d8c2c17db8be729cbc19e77ece7.png" alt="image"><br><a name="habracut"></a><br><h3>  What is PTVS? </h3><br>  In short, Python Tools for Visual Studio (hereinafter referred to as PTVS), as the name implies, is a free extension for Visual Studio 2010 and higher, which adds full Python support to this IDE.  Putting it yourself, you get editing code on Python with backlighting and advanced auto-completion, code navigation, refactoring, debugging, profiling, and Django support with the ability to publish Windows Azure websites in two clicks.  It supports all editions of Visual Studio, allowing the installation of extensions - as paid Professional, Premium and Ultimate, and free <a href="http://msdn.microsoft.com/en-us/library/vstudio/bb129445.aspx">Shell</a> .  In combination with the latter, PTVS is a full-fledged free development environment for Python under Windows - and in this version we have made a <a href="https://pytools.codeplex.com/downloads/get/697389">convenient combined installer</a> for VS Shell + PTVS.  If you have already set yourself Visual Studio 2013 Preview, then in the New Project dialog you will have a pleasant surprise: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img title="clip_image001" alt="clip_image001" src="https://habrastorage.org/getpro/habr/post_images/00d/602/01a/00d60201a216458a9c33f94ef08ab789.png" width="833" height="460"><br><br>  Our project is in some way unique to Microsoft.  Open source (under Apache License 2.0) will not surprise anyone now, but we not only <a href="https://pytools.codeplex.com/SourceControl/list/changesets">publish the source code</a> on CodePlex, but also invite everyone to <a href="https://pytools.codeplex.com/wikipage%3Ftitle%3DContributing%2520to%2520PTVS">work together on the project</a> .  Yes, we accept third-party code! <br><br>  And finally, since this moment most often causes confusion: PTVS is not IronPython, and this is not an environment focused exclusively on IronPython.  We support almost all Python implementations to one degree or another - CPython, IronPython, Jython, PyPy, Stackless - but the priority is to support the standard, and used by most of the Python developers, the CPython interpreter. <br><br>  Next, I will look at a number of the most interesting and unique features of PTVS in more detail. <br><br><h3>  Work with code </h3><br>  Perhaps, for any developer, first of all it is the convenience of working with the code that is decisive in choosing an IDE.  That is why the advanced engine for parsing the Python code - which implements auto-completion, refactoring, symbolic search and other key features - was the first thing that was created in the framework of the PTVS project.  With each new version, we improved the quality of parsing, and beta 2.0 is no exception. <br><br>  A simple auto-completion for dynamically-typed languages ‚Äã‚Äãis no longer surprising anyone today, but many editors are sticking to even trivial examples of using the dynamic capabilities of a language.  Take, for example, the following code: <br><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">g</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> g a = f(<span class="hljs-number"><span class="hljs-number">1</span></span>)(<span class="hljs-number"><span class="hljs-number">2</span></span>) b = f(<span class="hljs-number"><span class="hljs-number">3.0</span></span>)(a) c = f(<span class="hljs-string"><span class="hljs-string">u'a'</span></span>)(str(b)) d = (a, b, c)[input()]</code> </pre> <br>  Since the addition operator in Python is polymorphic, the type of the value returned by g - and, as a result, the type of values ‚Äã‚Äãin a, b, and c - depends solely on the types of arguments passed.  Type d is the most complicated because it is indirectly dependent on the types of all three previous variables - the editor must first be assembled and then the tuple disassembled. <br><br>  PTVS tries to unambiguously determine the type for each particular call, taking into account the previously derived types of arguments passed.  Here are the hints and additions that are given in the editor for the various variables in this code: <br><br><img title="clip_image002" alt="clip_image002" src="https://habrastorage.org/getpro/habr/post_images/0dd/65c/3e8/0dd65c3e89dc79f2c96f5abcb636d44d.png" width="530" height="143"><br><br><img title="clip_image003" alt="clip_image003" src="https://habrastorage.org/getpro/habr/post_images/32a/5b0/c97/32a5b0c9700d5c62a7c1f7a7e7e1c182.png" width="600" height="165"><br><br><img title="clip_image004" alt="clip_image004" src="https://habrastorage.org/getpro/habr/post_images/a5c/19c/a7d/a5c19ca7d642728fc87dccaf98771cdf.png" width="584" height="188"><br><br><img title="clip_image005" alt="clip_image005" src="https://habrastorage.org/getpro/habr/post_images/5ab/f4d/b66/5abf4db66a86ba20a621dd864622e0fa.png" width="301" height="198"><br><br>  As you can see, in the latter case, the variable has several potential types, and autocompletion displays them all. <br><br>  The result of type inference can be viewed on the other hand, if you request a hint for the function parameter in its body: <br><br><img title="clip_image006" alt="clip_image006" src="https://habrastorage.org/getpro/habr/post_images/334/4cf/55b/3344cf55b9273cade8e6b9442e2c0633.png" width="243" height="88"><br><br>  All types of arguments that the function is called anywhere in the code are collected here ‚Äî autocompletion for them in the function body will work accordingly.  This has an interesting consequence - if you use TDD, and first write tests for your functions and classes, and then implement them, then you will automatically receive the correct auto-completion for all parameters. <br><br>  In addition to auto-completion, the search for ads and variable references also works.  Here, PTVS has one interesting addition - if the variable that started the search refers to (or can refer to) functions or classes, then in the search results, in addition to the line to which this variable was assigned a value, there will also be original declarations of these functions and classes, even if the value was not assigned directly.  For example, if you add the following lines to the code above: <br><br><pre> <code class="hljs lisp">h = f if input() else f(<span class="hljs-name"><span class="hljs-name">a</span></span>) print h(<span class="hljs-name"><span class="hljs-name">b</span></span>)</code> </pre><br>  and execute the Find All References command on h, we get the following result: <br><br><img title="clip_image007" alt="clip_image007" src="https://habrastorage.org/getpro/habr/post_images/78b/5f1/87b/78b5f187bf46d5f3ad64c9e49851cedd.png" width="416" height="181"><br><br>  As you can see, the function g appears in the list, since it was it that was returned by the call f (a).  Of course, this is also reflected in the results of autocompletion when trying to call h - in the proposed signature options all known options for f and g will appear: <br><br><img title="clip_image008" alt="clip_image008" src="https://habrastorage.org/getpro/habr/post_images/ebe/791/d65/ebe791d659fba7348dc06493d2145646.png" width="198" height="49"><img title="clip_image009" alt="clip_image009" src="https://habrastorage.org/getpro/habr/post_images/3ea/d0c/f9a/3ead0cf9a44ca91e04e3075212e99687.png" width="154" height="49"><br><br><h3>  Debugging Mixed Code </h3><br>  Exclusive in beta 2.0 - this is no longer anywhere.  This is the case when a picture is worth a thousand words.  Here she is: <br><br> <a href=""><img title="clip_image010" alt="clip_image010" src="https://habrastorage.org/getpro/habr/post_images/eb5/eb1/9ad/eb5eb19ada3e70fc902531a57a4b70f1.png" width="800" height="590"></a> <br><br>  In the screenshot, a debugger attached to a C # program that loads CPython, which in turn loads a plug-in written in C ++, and all these three things call each other in a rather confusing way that can be explored in the window call stack.  Of course, you can create breakpoints in all projects, but the most important thing that gives such a combined mode is the possibility of step-by-step debugging of interlanguage calls.  For example, if you execute the Step In command on a Python code line that calls a class method implemented in C ++, you will be taken to the source of this method.  Similarly, it works for C ++ or C # code that calls PyObject_CallObject for a function written in Python.  Calls to native code in ordinary dynamic libraries via ctypes are also supported. <br><br>  Although the screenshot shows simultaneous debugging of three languages, in practice most often the case is limited to two - Python and C ++ (or C) - either this is a Python program that uses extension modules, or a C ++ program that uses Python as a scripting language.  For this reason, we added a number of features to the debugger that are available only for C / C ++.  Pay attention to the Locals window in the screenshot, and a detailed representation of the value of the a_natobj variable, which refers to an object of a class implemented in C ++: simultaneously with the Python representation of the object, it also shows C ++, the structure representation that implements its class.  There is also a mirror image of Python objects from C ++: this is what the same Locals window looks like in the frob function: <br><br><img title="clip_image011" alt="clip_image011" src="https://habrastorage.org/getpro/habr/post_images/8ec/97d/962/8ec97d9622f0760d4ae074ec75bcce4f.png" width="657" height="453"><br><br>  As you can see, the values ‚Äã‚Äãof variables declared in C ++ as PyObject (or some other standard type from the Python API) display the Python representations of these objects simultaneously with the fields of the corresponding C-structures. <br><br><h3>  Debug REPL </h3><br>  Having a normal REPL for Python is standard in the IDE for it, and PTVS is no exception - of course, we also support syntax highlighting and auto-completion (the latter, if possible, works directly with the values ‚Äã‚Äãin memory to give accurate hints for them) .  But we went further, and made support for the ‚Äúlive‚Äù REPL when debugging code ‚Äî that is, the REPL works directly on data in the process being debugged, allowing you to calculate complex expressions on the fly and redefine classes and functions.  Here is a screenshot of the debug REPL for the first example from this article: <br><br> <a href=""><img title="clip_image012" alt="clip_image012" src="https://habrastorage.org/getpro/habr/post_images/835/304/875/83530487597d154dbb95b8b2e8daf890.png" width="800" height="562"></a> <br><br><h3>  Django and Windows Azure </h3><br>  PTVS supports creating web applications on Django, providing syntax highlighting, code completion, and debugging for display templates: <br><br> <a href=""><img title="clip_image013" alt="clip_image013" src="https://habrastorage.org/getpro/habr/post_images/3c7/9b7/cb3/3c79b7cb3e8848fde84fe94be51c6190.png" width="800" height="645"></a> <br><br>  And, starting with this version of PTVS, applications created in this way can be published to a website in <a href="http://windowsazure.com/ru-ru/pricing/free-trial/">Windows Azure</a> with ease that was previously only available for ASP.NET: <br><br><img title="clip_image014" alt="clip_image014" src="https://habrastorage.org/getpro/habr/post_images/42a/361/97f/42a36197f8ced46ddafbedd620de637b.png" width="720" height="565"><br><br>  Et voil√†! <br><br><img title="clip_image015" alt="clip_image015" src="https://habrastorage.org/getpro/habr/post_images/faf/1de/009/faf1de009da72eeceba8342031dfaa9e.png" width="672" height="418"><br><br>  Yes, Azure websites now <a href="http://www.windowsazure.com/en-us/develop/python/">support Python</a> !  You can also use other Azure features ‚Äî table service, blob service, service bus, storage queues, etc.  - in your Python applications using the official <a href="https://github.com/WindowsAzure/azure-sdk-for-python">Windows Azure SDK for Python</a> , which our team also works on.  At the same time, the SDK is cross-platform: the only requirement for it is Python 2.6 or higher. <br><br><h3>  Profiling </h3><br>  Again, the screenshots will say much more than words: <br><br> <a href=""><img title="clip_image016" alt="clip_image016" src="https://habrastorage.org/getpro/habr/post_images/c9a/332/3cc/c9a3323cc9360d2a1b505ec383e2a8f5.png" width="800" height="444"></a> <br><br><img title="clip_image017" alt="clip_image017" src="https://habrastorage.org/getpro/habr/post_images/136/251/f43/136251f438cc35dc61eef374dec92a53.png" width="842" height="597"><br><br> <a href=""><img title="clip_image018" alt="clip_image018" src="https://habrastorage.org/getpro/habr/post_images/021/81a/881/02181a8816b336bab33de5c8346456af.png" width="800" height="533"></a> <br><br><h3>  ‚Ä¶ and much more! </h3><br>  PTVS capabilities are not limited to the above - we have other interesting features, such as refactoring, working with virtualenv and package management via pip and easy_install, remote debugging of programs on Linux and OS X, <a href="http://ipython.org/">IPython</a> support in the REPL (with visualization of graphs), and debugging and profiling of Python code on MPI clusters.  You can read about them in more detail on <a href="https://pytools.codeplex.com/documentation">the project documentation page</a> , or watch an <a href="http://www.youtube.com/watch%3Fv%3DTuewiStNT0M">overview video</a> . <br><br><h3>  Your feedback is very important to us </h3><br>  No, seriously, it really matters!  We have an <a href="https://pytools.codeplex.com/workitem/list/basic">open bug tracker</a> , and we are always happy to see in it bug reports and suggestions from users.  As for the proposals - this is not an empty phrase.  When we start working on a new version, and decide what exactly it will be in, then the first thing we do is open the feature requests list in the tracker, sort by user voices, and see what happens at the top.  So, in version 2.0, we implemented five features from the top 10 by votes, including three that were in the first three places.  If you just want to ask a question or discuss something, you can do it in our <a href="https://pytools.codeplex.com/discussions">forum</a> .  And, of course, I will be happy to answer any of your questions in the comments to this article. </div><p>Source: <a href="https://habr.com/ru/post/185412/">https://habr.com/ru/post/185412/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185398/index.html">681 megapixels of Mars, which almost no one saw</a></li>
<li><a href="../185402/index.html">So, you decided to create a security department ...</a></li>
<li><a href="../185406/index.html">Mogadishu Olympic</a></li>
<li><a href="../185408/index.html">New Intel Perceptual Computing SDK released</a></li>
<li><a href="../185410/index.html">Fakebook. Concept of sanity</a></li>
<li><a href="../185414/index.html">Programming Olympiad of the MIPT Summer School in Applied Mathematics and Physics</a></li>
<li><a href="../185418/index.html">Onyx Boox i63SL Kepler - reader based on Android</a></li>
<li><a href="../185420/index.html">Organize the search for molecular structures using the Lucene and Chemistry Development Kit</a></li>
<li><a href="../185422/index.html">Introduction to EagleMQ</a></li>
<li><a href="../185424/index.html">Reducing the cost of ownership of a large online store</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
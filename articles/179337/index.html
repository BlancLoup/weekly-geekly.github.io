<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I calculated the millionth article in Russian Wikipedia</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, May 11, 2013, at 01: 41: 39.8 UTC (05: 41: 39.8 Moscow time), the millionth article appeared in the Russian section of Wikipedia. By coincidenc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I calculated the millionth article in Russian Wikipedia</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/43f/ac4/f6a/43fac4f6a3564370e6aef4a5fbd18bb3.jpg" alt="1,000,000" align="right">  Today, May 11, 2013, at 01: 41: 39.8 UTC (05: 41: 39.8 Moscow time), the millionth article appeared in the Russian section of Wikipedia.  By coincidence, the Russian section today celebrates its 11th anniversary.  The <a href="https://ru.wikipedia.org/wiki/Life_Extension_Foundation">Life Extension Foundation</a> article was created by a member of <a href="https://ru.wikipedia.org/wiki/User:UG72">UG72</a> .  <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B8%25D0%25BA%25D0%25B8%25D0%25BF%25D0%25B5%25D0%25B4%25D0%25B8%25D1%258F:%25D0%259A_%25D1%2583%25D0%25B4%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258E/11_%25D0%25BC%25D0%25B0%25D1%258F_2013">Disputes have</a> already flared <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B8%25D0%25BA%25D0%25B8%25D0%25BF%25D0%25B5%25D0%25B4%25D0%25B8%25D1%258F:%25D0%259A_%25D1%2583%25D0%25B4%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258E/11_%25D0%25BC%25D0%25B0%25D1%258F_2013">up</a> about whether the article has the right to life, but the fact that it was she who took the line was unequivocally established. <br><br>  The Wikipedia article counter shows the number of articles in which there is at least one link (there are <a href="https://www.mediawiki.org/wiki/Manual:Article_count">two other rule settings</a> ).  Thus, its value can be affected by the creation and deletion of articles as well as the renaming and even any editing.  Add to this the fact that on the eve of the jubilee, the participants are beginning to massively fill their blanks in the hope that one of them will turn out to be an anniversary article, and that the meter, as a not very important thing, is updated asynchronously.  As a result, it becomes very difficult to calculate the necessary article.  But everyone is interested! <br><br>  It is possible to get out all the same. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  Due to the fact that any actions can affect the counter, and everything happens very quickly, attempts to calculate the article number are retrospectively doomed.  You need to look at the counter in real time.  When Wikipedia was not yet so well known, it was enough to go at the right time to a <a href="https://ru.wikipedia.org/wiki/Special:Newpages">list of new articles</a> where the counter was located at that time, and have time to take a screenshot.  But today, for example, the round value of the counter lasted less than two seconds. <br><br>  The Wikimedia Foundation has <a href="https://wiki.toolserver.org/view/Main_Page">Tulserver</a> - a set of servers to which the database of the Foundation‚Äôs projects are copied.  Shell access to them can request any technically competent participant.  Having gained access, Tulserver resources can be used for any actions that are useful for the foundation's projects. <br><br>  The current value of the articles counter is stored in the database;  there, of course, is information about new articles.  Therefore, to fix the anniversary moment, it is enough to poll the database several times per second, follow the counter changes and log them.  The log looks like this: <br><br><pre> 06: 05: 25.02 999397 Casisi, _Friedrich
 06: 05: 25.51 999398 Kasiski, _Friedrich
 06: 09: 02.67 999398 Krivolapov, _Grigory_Arhipovich
 06: 09: 03.32 999399 Krivolapov, _Grigory_Arhipovich
 06: 10: 16.17 999399 Light_industry_Russia
 06: 10: 18.39 999400 Light_industry_Russia
</pre><br>  Usually each article appears twice in it: for the first time the reading of the ‚ÄúLast created article‚Äù field changes, in the second - the value of the counter.  Thus, for example, <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D1%2581%25D0%25B8%25D1%2581%25D0%25BA%25D0%25B8,_%25D0%25A4%25D1%2580%25D0%25B8%25D0%25B4%25D1%2580%25D0%25B8%25D1%2585">Kasiski‚Äôs</a> article <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D1%2581%25D0%25B8%25D1%2581%25D0%25BA%25D0%25B8,_%25D0%25A4%25D1%2580%25D0%25B8%25D0%25B4%25D1%2580%25D0%25B8%25D1%2585">, _Friedrich,</a> was 999398th. <br><br>  Tonight there were problems in the anniversary area with access to Tulserver.  The tracking script continued to work and register new articles, but the value of the counter was different!  Understand why this is happening, quickly failed.  Monitoring tools said that replication is carried out correctly and without delay.  The difference in meter readings slowly floated around 100 articles.  Therefore, the script had to urgently rewrite, so he took the data directly from the site.  The instance working with the base remained running just in case. <br><br>  MediaWiki has a <a href="https://www.mediawiki.org/wiki/API">great API</a> that allows you to pull out a lot of interesting data.  To the API, you can formulate a request that simultaneously returns the value of the counter and the latest new pages: <br><br>  <a href="https://ru.wikipedia.org/w/api.php%3Fformat%3Djsonfm%26meta%3Dsiteinfo%26action%3Dquery%26siprop%3Dstatistics%26list%3Drecentchanges%26rctype%3Dnew">ru.wikipedia.org/w/api.php?format=jsonfm&amp;meta=siteinfo&amp;action=query&amp;siprop=statistics&amp;list=recentchanges&amp;rctype=new</a> <br><br>  The required data is in the fields <code>.query.statistics.articles</code> and <code>.query.recentchanges[0].title</code> .  You need to do the same with this data - constantly poll them and log any changes.  The asynchrony of the counter at the same time becomes noticeable in a smaller number of cases. <br><br>  Since the HTTP request is longer than the request to the database, I just in case launched the same script from my personal server.  At this I calmed down, lurked and waited. <br><br>  Article created.  Three logs in the million region look like this: <br><br><div class="spoiler">  <b class="spoiler_title">Tulserver data from a copy of the database</b> <div class="spoiler_text">  <a href="https://toolserver.org/~kalan/ruwiki-1m.txt">https://toolserver.org/~kalan/ruwiki-1m.txt</a> <br><pre> 01: 36: 32.57 999878 Klavdievo
 01: 36: 32.89 999879 Klavdievo
 ...
 01: 41: 37.88 999908 fine
 01: 41: 38.30 999909 fine
 01: 41: 38.49 999909 Kruchinin, _Vladimir_Fyodorovich
 01: 41: 38.93 999909 Kalyamin, _Vyacheslav_Ivanovich
 01: 41: 39.09 999910 Kalyamin, _Vyacheslav_Ivanovich
 01: 41: 40.69 999911 Kalyamin, _Vyacheslav_Ivanovich
 01: 41: 40.75 999911 Life_Extension_Foundation
 01: 41: 40.91 999912 Life_Extension_Foundation
 01: 41: 41.95 999912 Fortigin, _Vitaliy_Sergeevich
 01: 41: 42.11 999913 Fortigin, _Vitaliy_Sergeevich
 01: 41: 43.07 999913 The Emperor _-_ power
 01: 41: 43.29 999914 The Emperor _-_ power
 01: 41: 43.35 999914 Chertova, _Nadezhda_Andreevna
 01: 41: 43.97 999915 Glock_21
 01: 41: 44.59 999916 Glock_21
 01: 41: 44.65 999916 Volodya_Shishkin
 01: 41: 44.69 999917 Volodya_Shishkin
 ...
 01: 43: 17.60 999935 _ ()
 01: 43: 17.69 999936 Bobrik_ (village)
</pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">API server data</b> <div class="spoiler_text">  <a href="https://toolserver.org/~kalan/ruwiki-1m-2.txt">https://toolserver.org/~kalan/ruwiki-1m-2.txt</a> <br><pre> 01: 36: 32.67 999966 Klavdievo
 01: 36: 32.93 999967 Klavdievo
 ...
 01: 41: 38.01 999997 Finely
 01: 41: 38.67 999997 Kruchinin, Vladimir Fedorovich
 01: 41: 39.12 999998 Vyacheslav Kalyamin, Vyacheslav Ivanovich
 01: 41: 39.35 999999 Kalyamin, Vyacheslav Ivanovich
 01: 41: 39.80 1000000 Life Extension Foundation
 01: 41: 41.12 1000000 Fortigin, Vitaly Sergeevich
 01: 41: 41.56 1000001 Fortigin, Vitaly Sergeevich
 01: 41: 41.79 1000000 Fortigin, Vitaly Sergeevich
 01: 41: 42.00 1000001 Fortigin, Vitaly Sergeevich
 01: 41: 42.63 1000002 The emperor is power
 01: 41: 43.09 1000003 Nadezhda Andreevna Chertova
 01: 41: 43.32 1000004 Glock 21
 01: 41: 44.22 1000004 Volodya Shishkin
 ...
 01: 43: 17.01 1000023 Beaver (stanitsa)
 01: 43: 17.22 1000024 Beaver (stanitsa)
</pre><br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">My server, data from API</b> <div class="spoiler_text">  <a href="http://v.kalan.cc/ruwiki-1m-2.txt">http://v.kalan.cc/ruwiki-1m-2.txt</a> <br><pre> 01: 36: 32.72 999966 Klavdievo
 01: 36: 32.96 999967 Klavdievo
 ...
 01: 41: 37.95 999996 Fine
 01: 41: 38.19 999997 Finely
 01: 41: 38.68 999997 Kruchinin, Vladimir Fedorovich
 01: 41: 38.92 999997 Vyacheslav Ivanovich Kalyamin
 01: 41: 39.17 999999 Kalyamin, Vyacheslav Ivanovich
 01: 41: 39.88 1000000 Life Extension Foundation
 01: 41: 41.25 1000000 Fortigin, Vitaly Sergeevich
 01: 41: 41.73 1000001 Fortigin, Vitaly Sergeevich
 01: 41: 42.68 1000002 The Emperor is power
 01: 41: 42.92 1000002 Nadezhda Andreevna Chertova
 01: 41: 43.14 1000003 Nadezhda Andreevna Chertova
 01: 41: 43.38 1000004 Glock 21
 01: 41: 44.32 1000004 Volodya Shishkin
 ...
 01: 43: 17.10 1000023 Beaver (stanitsa)
 01: 43: 17.34 1000024 Beaver (stanitsa)
</pre><br></div></div><br><br>  For all three logs, it is clear that the <em>Life Extension Foundation</em> article took the line.  According to the articles of <em>Klavdievo</em> (999967) and <em>Bobrik (stanitsa)</em> (1000024), it can be concluded that the difference between the readings of Tulserver counters and Wikipedia itself in the segment of interest to us was equal to 88. . <br><br>  Fortunately, vandal articles this time swept past again. <br></div><p>Source: <a href="https://habr.com/ru/post/179337/">https://habr.com/ru/post/179337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179323/index.html">DLink DNS-325 - we connect cloud storages via WebDav</a></li>
<li><a href="../179327/index.html">Million articles in Russian Wikipedia!</a></li>
<li><a href="../179331/index.html">What has the IT industry learned from Linus Torvalds?</a></li>
<li><a href="../179333/index.html">Windows NT kernel developer explains reasons for poor OS performance</a></li>
<li><a href="../179335/index.html">Stop solving global problems!</a></li>
<li><a href="../179339/index.html">Monitor Magazine (April 1992) and the Parables of Computer Residents</a></li>
<li><a href="../179345/index.html">NeoLucida - 21st Century Portable Camera-Lucid</a></li>
<li><a href="../179349/index.html">Network caching in iOS. NSURLCache</a></li>
<li><a href="../179351/index.html">Mysterious stationery. Test 2</a></li>
<li><a href="../179359/index.html">MaskJS - HMV * framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to test the DSU in the data center</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the operation of data centers, we pay a lot of attention to testing engineering systems and equipment. One of the most important tests is the launc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to test the DSU in the data center</h1><div class="post__text post__text-html js-mediator-article">  In the operation of data centers, we pay a lot of attention to testing engineering systems and equipment.  One of the most important tests is the launch of diesel generator sets (DGS).  These tests help to test the performance of several engineering systems at once. <br><br>  DGU are responsible for guaranteed power supply.  In the case of interruptions in urban nutrition, they bear the entire burden of the data center.  Power from the DGU is usually called a backup, but it should be treated as the main one: only this type of power supply can we manage.  This is another reason why DGU tests are so necessary. <br><br>  On all sites, we have a total of 30 DGUs with a capacity from 1,200 to 1,750 kW.  Today we will tell how we test DGU in our data centers and what we pay attention to in the process.  We hope that our experience will be useful to owners of small server ones. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Before reading, we recommend that you run through our last <a href="https://habrahabr.ru/company/dataline/blog/310356/">article</a> and refresh your knowledge about the power supply device in data centers. <br><br><img src="https://habrastorage.org/files/dd7/a67/fab/dd7a67fab0aa4c0f933ac3599a8fff5f.jpg"><br>  <i>DGU indoors and in container performance.</i> <br><a name="habracut"></a><br><h2>  What we test and how </h2><br>  Test DGU need under load.  At idle, you will not check how the diesel generator sets cope with the load and synchronize if there are several of them.  Such tests - it's like a test drive, during which you just started the car, but did not drive a meter. <br><br>  Test DGU under load in two ways: <br><br><ul><li>  under the equivalent load, that is, the load is created artificially, for example, through the connection of heat guns.  This option is suitable for acceptance tests when there is no IT load yet. </li><li>  under load (IT equipment + infrastructure).  The following discussion focuses on this type of testing. </li></ul><br>  To test the DGU under load, you need to disconnect from at least one input of city power.  We briefly recall how this happens.  The switch to the power supply from the diesel generator set is controlled by automatic reserve transfer (ATS): it gives a signal to turn on the diesel generator set.  While the DGS start up, the load is kept by the UPS batteries.  As soon as the DGUs went into operation and synchronized, the ATS transfers the data center load to them.  This is how it happens: <br><br><img src="https://habrastorage.org/files/e1f/5e0/c46/e1f5e0c4613647349d0b1701391bb273.gif"><br><br>  During the launch of the DGU, the entire system of guaranteed and uninterrupted power supply is activated.  Therefore, in addition to the work of the DSU, we also check the work of these systems: <br><br><ul><li>  automatics: automatic input of a reserve (AVR); </li><li>  UPS and battery status (battery); </li><li>  DGU. </li></ul><br>  Along the way, we are testing a monitoring system: does it correctly display the status of the system and power supply equipment?  We check the clarity of the regulations and the work of engineers on them. <br><br>  Equipment that is not connected to uninterrupted power supply will also be tested.  As soon as the city power supply disappears, this equipment will turn off and turn on only after starting the diesel generator set.  The same thing will happen when we return from the DSU to city food.  Such exercises are additional tests for equipment.  Therefore, after each off. / On.  check the indication for errors.  In our case, this equipment includes air conditioners: only half is powered by a UPS. <br><br><h2>  When we test </h2><br>  In this case, it is not the frequency of test runs that is important, but their regularity: you need to work out a clear test schedule, which you will follow.  You think that it is enough to check DGU once a quarter, great.  The main thing is to stick to this schedule clearly and not to freeze. <br>  In addition to routine testing, you need to conduct tests after any maintenance and repairs, <br>  to check: <br><br><ul><li>  all faults eliminated; </li><li>  Are there any new mistakes? </li><li>  Are there any changes in the operation logic after maintenance? </li></ul><br><h2>  Preparation for testing </h2><br>  <b>Alert.</b>  In the testing regulations you need to pre-register who you need to notify and for how long.  This list may vary depending on internal requirements and processes.  Here is what the list of interested parties might look like: <br><br><ul><li>  external and internal customers; </li><li>  colleagues responsible for related systems (air conditioning, UPS, monitoring, etc.); </li><li>  DSU service contractor, if the contract does not stipulate mandatory participation in testing. </li><li>  employees of the company.  If the office is powered from the same sources as the server, then the colleagues may temporarily lose their light, restart the computers.  Warn them about this beforehand. </li></ul><br>  In the letter of notification we leave the contact of the person responsible for the test run so that in case of questions you can contact him. <br><br>  <b>Inspection DGU.</b>  In order not to be sent for testing with obviously defective equipment, the following indicators are taken before the test: <br><br><ul><li>  battery charge voltage; </li><li>  fuel and oil levels; </li></ul><br>  Visually inspected: <br><br><ul><li>  whether the engine is turned on; </li><li>  for faults </li><li>  for errors in display </li><li>  for the presence of drips of various liquids (oil, antifreeze). </li></ul><br>  <b>Check the power supply system equipment.</b>  The same procedure is carried out with the rest of the equipment of the systems of guaranteed and uninterrupted power supply.  The indication for errors and external condition is checked.  Engineers take readings from current analyzers on the main switchboard, check the UPS indication, the correct time. <br><br><h2>  Switching to power from the DGS </h2><br>  1. Turn off the phase control relay in MSB, i.e.  simulate the disappearance of urban food on one of the rays. <br>  2. The UPS records the loss of power at the input and instantly switches to stand-alone power from the batteries. <br><br><img src="https://habrastorage.org/files/818/927/d10/818927d102504ab6a144263dccbbdbcc.JPG"><br>  <i>UPS display.</i>  <i>The display shows that the power supply is turned off and the data center is powered by batteries.</i> <br><br>  3. At the same time, automatic transfer of reserves (ATS) to the MSB fixes an interruption with city power.  AVR waits 5 seconds and sends a signal to start DGI.  In operating mode, this delay eliminates the launch of a diesel generator set on a false alarm.  If the city food simply ‚Äúblinked‚Äù and recovered again in those 5 seconds, then there will be no command to start the diesel generator set. <br><br><img src="https://habrastorage.org/files/be2/286/4f5/be22864f53304224b7d5760bc806af38.JPG"><br>  <i>Display AVR GRShch.</i>  <i>LN1 means food from a city that is ‚Äúlost‚Äù (white oval).</i>  <i>LN2 - powered by DGS.</i> <br><br>  4. DGS start, go to the operating mode at 1500 revolutions per minute and synchronize with each other in 10-20 seconds. <br><br>  5. When power from the DGS appears on the backup line, the ATS opens the circuit breaker of the main city supply line. <br><br><img src="https://habrastorage.org/files/134/41c/d92/13441cd926104f20974f0a10b7fab1ba.JPG"><br>  <i>The black oval next to LN2 indicates that the voltage from the diesel generator set began to flow on the bus.</i>  <i>Automatic power line from the city is open.</i>  <i>The stopwatch counts the time after which the load will be transferred to the diesel generator set.</i> <br><br>  6. After 30‚Äì35 seconds from the moment of the command to start the diesel generator set, the AVR closes the backup line switch.  Now the data center is powered by DGU. <br><br><img src="https://habrastorage.org/files/09d/be7/ba8/09dbe7ba86164fa1bdc2e10432702cff.JPG"><br><br>  7. The UPS sees power recovery at the input and returns to standard mode. <br><br><img src="https://habrastorage.org/files/04a/8cd/40c/04a8cd40c31e4a378b5c4fc8b046e243.JPG"><br><br><h2>  What we check when DGS work </h2><br>  To ensure that everything works correctly, it is better to ‚Äústand‚Äù on diesel engines for at least 40‚Äì60 minutes.  Our experience shows that major errors occur either at startup or in a period of 40‚Äì60 minutes.  During this time, without haste, you can check all the basic parameters of diesel generators: <br><br><ul><li>  pressure; </li><li>  battery charge voltage; </li><li>  coolant temperature; </li><li>  uniform distribution of the load across the phases; </li><li>  the operation of the intake and exhaust louvers of the ventilation system. </li></ul><br>  In our case, if the load on each DGU is less than 30%, then the DGU one by one starts to go to the reserve.  In the event of a malfunction on the operating diesel-generator sets, he will quickly return to service.  There are always at least two DGUs in operation so that the N + 1 redundancy is respected. <br><br>  While DGUs are working, engineers also check infrastructure facilities that were turned off during the transition to power from diesel generators. <br><br><h2>  Return to city power supply </h2><br>  The data center returns to power from the city as follows: <br><br><ul><li>  Turn on the phase control relay. </li><li>  AVR after 5 seconds gives a signal to open the backup line switch. </li><li>  The UPS transfers to battery power. </li><li>  AVR after another 5 seconds closes the switch on the main city supply line. </li><li>  The UPS returns to standard mode. </li><li>  AVR waits 60 seconds, after which gives the command to stop the diesel generator set. </li></ul><br>  After returning to the city food, the engineer again checks the indication of the UPS, measures the currents on both inputs, the fuel in the diesel generator set, the engineering equipment that was turned off. <br><br><h2>  According to the test results </h2><br>  The entire preparatory process, timing, equipment readings during and after the test, as well as comments are recorded in the report. <br><br>  That's all for today.  Test your DGS.  And may they not let you down. </div><p>Source: <a href="https://habr.com/ru/post/319926/">https://habr.com/ru/post/319926/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319914/index.html">How flitk manages people online with overwhelming levels of paranoia</a></li>
<li><a href="../319916/index.html">How can you remotely and centrally carry out an inventory and audit of all IT assets of a company?</a></li>
<li><a href="../319918/index.html">Photoshop settings after installation</a></li>
<li><a href="../319920/index.html">Why data can be open and free</a></li>
<li><a href="../319922/index.html">Cocoa Delphi Flavored</a></li>
<li><a href="../319928/index.html">Plan without B: planning in the company from ‚ÄúI‚Äù to ‚Äúwe‚Äù</a></li>
<li><a href="../319932/index.html">Site security by its headers, or what to do if you want to crawl into the insides of each site</a></li>
<li><a href="../319934/index.html">Application Monitoring with Pinba</a></li>
<li><a href="../319936/index.html">JS optimization killers are no longer so scary</a></li>
<li><a href="../319938/index.html">How to find your first job as a programmer? From summary to trial period</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
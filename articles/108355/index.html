<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Getting rid of dead code in Javascript in IE9</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[From the translator: this translation is part of this official post from the blog of the IE team and is intended to clarify a recent misunderstanding...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Getting rid of dead code in Javascript in IE9</h1><div class="post__text post__text-html js-mediator-article">  [From the translator: this translation is part of <a href="http://blogs.msdn.com/b/ie/archive/2010/11/17/html5-and-real-world-site-performance-seventh-ie9-platform-preview-available-for-developers.aspx">this</a> official post from the blog of the IE team and is intended to clarify a recent misunderstanding: <a href="http://habrahabr.ru/blogs/browsers/108313/">IE9 - Cheating on SunSpider JS?</a>  ] <br><br>  One of the changes in our new JavaScript engine, code-named Chakra, is the destruction of dead code, in order to improve the performance of real sites.  Yesterday afternoon, someone posted a question with us on the connection - <a href="https://connect.microsoft.com/IE/feedback/details/622386/optimizations-applied-to-sunspider-math-cordic-are-too-fragile">"Sampling"</a> .  Since many people are interested in this question, this blog post is designed to answer it. <br><a name="habracut"></a><br><br>  In short, the JavaScript IE9 engine has undergone a huge variety of changes in order to improve the performance of real web applications.  You can try some sample applications on our website <a href="http://www.ietestdrive.com/">ietestdrive.com</a> , and then compare the results in different browsers.  The behavior of our JS engine is not a ‚Äúspecially tweaked‚Äù optimization and this is not a bug. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In Chakra, we applied some optimizations that are well known in the compiler world, in particular the elimination <a href="http://en.wikipedia.org/wiki/Dead_code_elimination">of dead code</a> .  This type of optimization scans the program code in search of code that does not change the state of the program, then removes this code.  This brings two benefits at once: reducing the size of the memory occupied by the program and increasing the speed of the program. <br><br>  Here is a very simple example of Javascript code that is a good candidate for deletion, because the condition will always be false and the js engine can easily delete it. <br><br><pre><code class="javascript hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = <span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = <span class="hljs-number"><span class="hljs-number">3</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> w = x + y;

    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (w != <span class="hljs-number"><span class="hljs-number">4</span></span>) {
        <span class="hljs-comment"><span class="hljs-comment">// dead code </span></span>
    }
}
</code></pre><br>
<br>
 ¬´¬ª   ,     ,   .   ,           ( computer science   <a href="http://en.wikipedia.org/wiki/Dead_store">¬´¬ª </a>),       <br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x;
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">300</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (i--) {
        x = a + b; <span class="hljs-comment"><span class="hljs-comment">// dead store</span></span>
    }
}
</code></pre><br>
<br>
  , ,   ,       ,      .<br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sum = <span class="hljs-number"><span class="hljs-number">0.0</span></span>;
    
    <span class="hljs-comment"><span class="hljs-comment">// dead loop elimination</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>; i++) {
        sum += a[i];
    }
}
</code></pre><br>
<br>
    ¬´¬ª ,    ,   ,    .              .<br>
<br>
 ,       math-cordic  Webkit SunSpider suite?      .<br>
<br>
<pre><code class="javascript hljs">
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cordicsincos</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ 
     <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> X;  
     <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Y;  
     <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> TargetAngle; 
     <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> CurrAngle;  
     <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Step;   
     X = FIXED(AG_CONST);         <span class="hljs-comment"><span class="hljs-comment">/* AG_CONST * cos(0) */</span></span> 
     Y = <span class="hljs-number"><span class="hljs-number">0</span></span>;                       <span class="hljs-comment"><span class="hljs-comment">/* AG_CONST * sin(0) */</span></span> 
   
    TargetAngle = FIXED(<span class="hljs-number"><span class="hljs-number">28.027</span></span>);  
    CurrAngle = <span class="hljs-number"><span class="hljs-number">0</span></span>;  
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Step = <span class="hljs-number"><span class="hljs-number">0</span></span>; Step &lt; <span class="hljs-number"><span class="hljs-number">12</span></span>; Step++) { 
        <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> NewX; 
            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TargetAngle &gt; CurrAngle) { 
               NewX = X - (Y &gt;&gt; Step);  
               Y = (X &gt;&gt; Step) + Y; 
               X = NewX; 
               CurrAngle += Angles[Step];  
            } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { 
               NewX = X + (Y &gt;&gt; Step); 
               Y = -(X &gt;&gt; Step) + Y; 
               X = NewX; 
               CurrAngle -= Angles[Step]; 
            } 
    } 
} 
</code></pre><br>
<br>
       ,        .    ,      .<br>
<br>
,         ,    ,     .<br>
<br>
    ,      . Sunspider        .        ,    JavaScript.<br>
<br>
        JavaScript,       ¬´¬ª .         ,     -       ,        -.   Chakra                 ¬´¬ª .  ,   <a href="https://connect.microsoft.com/ie">Connect</a>   ,      .   ¬´¬ª     .<br>
<br>
   ¬´¬ª     ,  Chakra     .               JavaScript      .<br>
<br>
 ‚Äî Dean Hachamovitch<br>
<br>
 :       IE9    <a href="http://ietestdrive.com/">ietestdrive.com</a><br>
    :<img src="http://ie.microsoft.com/testdrive/Benchmarks/SunSpider/SunSpiderResultsPPB7.png" alt="image"><br>
UPD:    ,   .        .<br>
<table>
<tbody>
<tr>
<th>Detailed Results</th>
<th>Average (ms)</th>
</tr>
<tr>
<td>IE8</td>
<td>3746</td>
</tr>
<tr>
<td>Firefox 3.6.12</td>
<td>753</td>
</tr>
<tr>
<td>Safari 5.0.2</td>
<td>328</td>
</tr>
<tr>
<td>Firefox 4.0 Pre-Release Beta7</td>
<td>277</td>
</tr>
<tr>
<td>Chrome 7.0</td>
<td>262</td>
</tr>
<tr>
<td>Opera 10.63</td>
<td>246</td>
</tr>
<tr>
<td>Opera 11 Alpha</td>
<td>242</td>
</tr>
<tr>
<td>Chrome 8.0 Beta</td>
<td>233</td>
</tr>
<tr>
<td>IE9 Platform Preview #7</td>
<td>216</td>
</tr>
</tbody>
</table></div><p>Source: <a href="https://habr.com/ru/post/108355/">https://habr.com/ru/post/108355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108345/index.html">Fully robotic farm</a></li>
<li><a href="../108346/index.html">The transition of Node.js under the wing of Joyent, the release of versions v0.2.5 and v0.3.1</a></li>
<li><a href="../108348/index.html">gettext: antelope roast recipe in Javascript</a></li>
<li><a href="../108351/index.html">FBI wants more control of the web</a></li>
<li><a href="../108352/index.html">Professor implants the lens on the back of the head (students against)</a></li>
<li><a href="../108356/index.html">Twitter Analytics Testing Started</a></li>
<li><a href="../108357/index.html">RZD +: Chrome extension to simplify the process of buying tickets on the Russian Railways website</a></li>
<li><a href="../108358/index.html">Acer 1825PTZ review: powerful netbook with touch screen</a></li>
<li><a href="../108364/index.html">Avaya IP Office for Dummies</a></li>
<li><a href="../108368/index.html">4th Autumn Startup Crash Test (Moscow, November 19)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
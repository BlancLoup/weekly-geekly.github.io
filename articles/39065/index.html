<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Features of the memory subsystem in MacOS X 10.6 Snow Leopard</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Below is a translation of the article "Road to Snow Leopard: twice the RAM, half the price, 64-bits" from AppleInsider.com. The article covers the fea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Features of the memory subsystem in MacOS X 10.6 Snow Leopard</h1><div class="post__text post__text-html js-mediator-article">  <i>Below is a translation of the article "Road to Snow Leopard: twice the RAM, half the price, 64-bits" from AppleInsider.com.</i>  <i>The article covers the features of the memory subsystem of the announced OS, and also contains a comparison of the work of the memory subsystem in 32-bit operating systems from Apple and Microsoft.</i> <a name="habracut"></a><br><br><h4>  System memory vs. application memory. </h4><br>  While the 4GB limit described earlier only begins to affect everyday users, there is another problem that limits the full use of installed memory to a specific application.  In fact, the real problem of a shortage of RAM is not how much memory can be installed, but how much memory an application can address for its needs. <br>  32-bit versions of Windows, Linux, and Mac OS X manage memory in 4 GB differently.  This means that their transition to 64-bit versions will give users completely different improvements.  In 32-bit versions of Linux and Mac OS X, the kernel allocates 4 GB of virtual memory for itself and as much for each application (or process).  The virtual memory subsystem allocates memory for reasons of maximum performance.  It is clear that the more memory the better. <br>  In a 32-bit version of Windows, each application receives only 2 GB of virtual address space;  4 GB are separated by the core.  By default, the split occurs in half, so the application gets 2 GB for use, while the kernel reserves the remaining 2 GB.  Using a special setting, Windows can be set to a ratio of 3 GB / 1 GB, which gives the application another GB, but does not allocate all 4 GB.  This affects every application that needs a lot of memory. <br>  The reason for this separation in Windows is performance.  Windows system calls can address memory areas allocated to an application and the kernel in a single approach, because the CPU can directly address both the kernel memory and application memory using the cached TLB lookup table. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/91f/b0f/a31/91fb0fa31175edd05b2e8c6014afadf1.jpg"><br><h4>  The more memory, the more responsibility </h4><br>  In contrast to Windows, 32-bit versions of Linux and Mac OS X provide each application with all 4 GB of virtual memory, their addresses overlap with the addresses of the kernel.  This means that the CPU TLB table cannot store cached addresses because it cannot distinguish one from the other. <br>  Each time the memory subsystem moves between two address spaces, it should clear the TLB table.  Each call to a 32-bit system clears the TLB twice, resetting the cache to zero and thereby decreasing the performance for which it was invented.  In Windows, purging occurs only at the time of switching between applications, since each application shares its virtual memory space with the kernel. <br>  In 64-bit Mac OS X Leopard, 64-bit applications have an enormous amount of memory, which far exceeds 4 GB.  This allows 64-bit applications to occupy higher address spaces, while the kernel occupies lower ones.  In the absence of address overlap, TLB does not need to be reset and it can work exactly as intended.  This advantage has not yet been fully utilized, since the core and most applications are still 32-bit (in the figure below - on the left). <br>  Snow Leopard will provide an opportunity to use 64-bit kernel and applications, completely eliminating the need to clear TLB, because the new kernel will not have shared address spaces, even in the case of 32-bit applications (in the figure below - on the right).  This will be the superiority of all users using a 64-bit OS and a Core 2 processor or better, even when using the Santa Rosa chipset, which will also be able to run 64-bit applications and virtual memory will not be limited to the number of addressable system memory. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/b93/557/27b/b9355727b41abc66169860370d349ab2.jpg"><br><h4>  Bigger, faster </h4><br>  Current 32-bit applications (Mac) have access to more memory than 32-bit Windows applications, but at the same time they reset the TLB table every time an application makes a system call than if it were just switching between applications.  With the advent of 64-bit, Leopard offers greater performance with unlimited virtual addressing. <br>  In 64-bit Windows, applications will go beyond the 2 GB addressable space, but there will not be a significant performance increase, since Windows has not previously encountered the problem of TLB cleanup. <br>  Both platforms will benefit from additional 64-bit registers.  This factor also explains why PowerPC G5 users will not see a big performance boost from standard applications ported to 64-bit.  32-bit PowerPC applications already have additional space in registers.  In most cases, they will work even more slowly due to the additional work on addressing.  This is one of the key reasons why Snow Leopard will be only Intel. <br><br><h4>  The dark side is 64-bit. </h4><br>  There is an additional load on Intel due to 64-bit addressing;  it is associated with the lack of a 64-bit market for the Windows platform.  Adobe faced this problem with the release of Photoshop CS4. <br>  At the same time, all Macs are now 64-bit and use a 64-bit OS, so there is no problem to adapt Apple‚Äôs previously written 64-bit programs.  Except for perhaps programs from third-party developers.  Apple must provide developers with new versions of drivers and plug-ins for the new kernel and force third-party developers to do the same. <br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/39065/">https://habr.com/ru/post/39065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390639/index.html">UNIBOTY and their combat "Fang"</a></li>
<li><a href="../390641/index.html">USB Batteries</a></li>
<li><a href="../390643/index.html">Samsung POWERBot VR9000 Robot Vacuum Cleaner</a></li>
<li><a href="../390645/index.html">Fantastic books on artificial intelligence</a></li>
<li><a href="../390647/index.html">Roskomnadzor considers the bill on fines for posting information on circumventing blocking sites premature</a></li>
<li><a href="../390651/index.html">Video review 3D printer UP! Box</a></li>
<li><a href="../390655/index.html">Moon under the microscope</a></li>
<li><a href="../390659/index.html">NASA is a psychological portrait of an ideal crew member for a flight to Mars</a></li>
<li><a href="../39066/index.html">Spore beats torrent records</a></li>
<li><a href="../390661/index.html">Male mice prefer action to erotica</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Eclipse #include <Arduino.h></title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 Recently, a couple of articles have been published on GT for and against the use of Arduino for something more profitable than blinking light...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Eclipse #include <Arduino.h></h1><div class="post__text post__text-html js-mediator-article">  Hello! <br>  Recently, a couple of articles have been published on GT <a href="https://geektimes.ru/post/269830/">for</a> and <a href="https://geektimes.ru/post/255760/">against</a> <a href="https://geektimes.ru/post/269830/">the</a> use of Arduino for something more profitable than blinking lights and creating home weather stations.  The usual such discourse from the world of technology, when technology is becoming more and more accessible to the general population, has floated, we know. <br>  Having a technical education and a university specialty directly related to the programming of microcontrollers, I understand those who are against.  And having many years of experience in commercialization not only of my own, but also to a greater degree of other people's knowledge and skills, I perfectly understand those who are behind. <br>  You are right, and you are also right, but the truth is, as always, somewhere <s>near the</s> middle. <br><a name="habracut"></a><br>  First of all, you need to understand what the dispute is about.  Arduino is not only beautifully packaged by Italians in PCBs and microcontroller boxes, and not only the Arduino IDE development environment.  First of all, these are libraries for rapid development, and in my opinion they are the most valuable.  If you look at the schematic diagrams of Arduino boards, then we will not see anything particularly impressive.  The development environment ... Let's just say, a <i>little does not reach the Borland C ++ sample of 1994</i> . <br>  As we know, these libraries are distributed under the GNU license, they can be taken and used without deducting royalties to their creators.  Such a business model requires you to earn on anything other than license fees.  So they earn, producing and selling in a beautiful package for 20 bucks that the electronics engineer will buy for 20 cents. <br>  And what is important here is not that they are such greedy bourgeois, robbing the working people and worthy of censure from all progressive humanity, but why they can do that.  Because: <br><ul><li>  We were at the right time in the right place and were the first to see those opportunities that others did not see; </li><li>  Made available to the consumer what was previously available to a narrow circle of limited persons; </li><li>  Beautifully all packed and presented to the consumer in a ready-to-use form. </li></ul><br><br>  Now, about why and how to cross the developments of the consumer segment of entertaining electronics with the development cycle of a commercial project.  In this cycle, the Arduino ecosystem has one very valuable feature ‚Äî development speed. <br>  Speed ‚Äã‚Äãis the ratio of the distance traveled to time.  The greater the speed, the faster we will do the work, or the more work we will do in the allotted time and hypothetically earn more money per unit of time. <br><br>  Imagine, the customer approached you, he has some personal requirements, and you don‚Äôt have in the bins of the Homeland an almost 86% finished project with similar functional characteristics.  Any customer has two main questions: <br><ol><li>  How much will it cost? </li><li>  When will it be ready? </li></ol><br>  (very often he needs the answer ‚Äúyesterday‚Äù to the second question) <br><table><tbody><tr><td>  The answer is a healthy programmer </td><td>  Arduinschika answer </td></tr><tr><td>  We need to conduct a pre-project study, draw up a technical task, carry out a series of iterations to clarify it and after its approval we will say in how many months we will be ready to present you the first prototype for further clarification of the functional requirements and product characteristics. </td><td>  Tomorrow I will present you a prototype, as I see it, and we will discuss the details.  The cost of the finished product with the circulation of M pieces will be from X to Y and it will take approximately Z weeks. </td></tr></tbody></table><br>  According to the experience of commercial activity, I dare say that the customer will choose the path of the Arduinschik <s>smoker</s> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Further about how to use Arduino for their own selfish purposes, with <s>blackjack and</s> group development, version control, project documentation and other stuffed swans from the world of commercial development. <br>  In fact, everything is very simple.  For this, apart from the developers, you need a development environment and a stand on which they can develop.  C ++, it is in Africa C ++, AVR and Arduino remains AVR. <br><br>  As a medium, consider Eclipse.  <a href="https://geektimes.ru/post/255644/">Here is a very good article</a> on how to configure Eclipse first to work with the AVR Toolchain, and then connect the Arduino libraries and flash the LED on Uno.  <a href="http://playground.arduino.cc/Code/Eclipse">And here it is even better</a> , but in English. <br>  I will supplement them a little with some rake, which I have stepped on, maybe it will save someone a couple of hours of time. <br>  All of the following is described for Linux and Leonardo.  For Windows, you must first install <a href="http://www.mingw.org/">MinGW / msys</a> . <br><br>  To build all the sources included in the Arduino core, you need to set the preprocessor constants correctly.  If you look at the source code of the libraries, you can see a lot of conditional compilation structures #ifdef #else #endif.  In the article on the link, the author scored all this, taking the finished .a file compiled by the Arduino IDE.  But not all libraries fall into the core, for example, SPI and Ethernet do not fall, and the same jokes with conditional compilation are waiting for them. <br>  It is very easy to figure out which constants and how to set. <br><ol><li>  Launch the Arduino IDE </li><li>  Choose a board that we use as a stand </li><li>  File - Settings - Show detailed output - Compiler </li><li>  Run the compilation and carefully read the console, look for the strings of the form <br><pre><code class="bash hljs">*** avr-g++ -c -g -Os -w -std=gnu++11 -fno-exceptions -ffunction-sections -fdata-sections -fno-threadsafe-statics -w -x c++ -E -CC -mmcu=atmega32u4 -DF_CPU=16000000L -DARDUINO=10607 -DARDUINO_AVR_LEONARDO -DARDUINO_ARCH_AVR -DUSB_VID=0x2341 -DUSB_PID=0x8036 <span class="hljs-string"><span class="hljs-string">'-DUSB_MANUFACTURER="Unknown"'</span></span> <span class="hljs-string"><span class="hljs-string">'-DUSB_PRODUCT="Arduino Leonardo"'</span></span> ***</code> </pre> <br>  All that is specified with the -D key (except for F_CPU, Eclipse will add it itself) must be added in the compiler settings in Eclipse. <br></li></ol><br><img src="https://habrastorage.org/files/b65/27d/dc8/b6527ddc8f374bd193b728fb70856b5b.png"><br>  In order for the compiler to find all the .h files that we want to use in the project, you need to specify the path to them in the settings.  There are two ways.  You can specify absolute paths to the Arduino IDE folders or link the library to the project and specify the relative path from {workspase} / {ProjName}.  The second method will allow you to compile the kernel in Eclipse, although there is no fundamental difference, and in the Arduino IDE and Eclipse avr-g ++ is responsible for the compilation. <br>  Additionally, we indicate the path to pins_arduino.h for the board we use in the project. <br><img src="https://habrastorage.org/files/23d/006/16a/23d00616a5b04c96b3d33ade8789b44f.png"><br>  In order not to break the coherent structure of the files of the library main.cpp from it we will not.  Just turn it on as it is from the kernel into the project, and call your file by some other name.  You do not need to declare the main () function in it, it already exists in main.cpp, initializes everything you need and calls the loop () function in an infinite loop, the linker collects everything as it should. <br><br>  Wednesday is ready to go.  We write in much the same way as in the Arduino IDE, but here we observe a little more strictly the observance of the canons of C ++.  And at any moment we can go down from high-level programming to the floor below.  If there is not enough speed to work with ports via digitalWrite, we write directly to the ports. <br>  Alas, the habit of hanging the processor by calling <pre> <code class="cpp hljs">delay(<span class="hljs-number"><span class="hljs-number">5000</span></span>);</code> </pre>  Eclipse does not treat.  This is taught somewhere, whether in high school, or junior high school, it penetrates so deeply into a person that no moralizing can guide a person on the right path. <br><br>  For fill and Arduino IDE and Eclipse use the utility programmer AVRDude.  She really knows Uno boards under the name ‚Äúarduino‚Äù, but she refuses to recognize cheaper Leonardo types under this name. <br>  Go to the boards.txt and find out that for the programmer <br> <code>leonardo.upload.protocol=avr109 <br></code> <br>  The programmer in AVRDude settings is called ‚ÄúAtmel AppNote AVR109 Boot Loader‚Äù, here it is: <br><img src="https://habrastorage.org/files/a47/e6b/bd4/a47e6bbd4afe47da8374653d5c7792ed.png"><br>  The only inconvenience is that Eclipse will not do this <br> <code>leonardo.upload.use_1200bps_touch=true <br></code> <br>  It is necessary to press reset with pens before loading. <br><br>  Well and in the conclusion the same project collected in Arduino IDE <br> <code>  28 432  (99%)  .   28 672 . <br>    1 254  (48%)  ,  1 306    . : 2 560 . <br></code> <br>  and in eclipse <br> <code>Invoking: Print Size <br> avr-size --format=avr --mcu=atmega32u4 EthernetController.elf <br> AVR Memory Usage <br> ---------------- <br> Device: atmega32u4 <br> <br> Program: 27834 bytes (84.9% Full) <br> (.text + .data + .bootloader) <br> <br> Data: 1257 bytes (49.1% Full) <br> (.data + .bss + .noinit) <br> <br> Finished building: sizedummy <br></code> <br>  Trifle, but for finishing off just these half a kilo and not enough. </div><p>Source: <a href="https://habr.com/ru/post/390441/">https://habr.com/ru/post/390441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390431/index.html">Home projectors Epson EH-TW5210, EH-TW5300 and EH-TW5350 - better, faster, brighter</a></li>
<li><a href="../390433/index.html">Google will not participate in the upcoming frequency auction in the US</a></li>
<li><a href="../390435/index.html">Mathematicians built a map of connections in the Star Wars universe</a></li>
<li><a href="../390437/index.html">Self-made electronic altimeter variometer with sound and light warning signals</a></li>
<li><a href="../390439/index.html">Mirrored interband Andreev reflections on van der Waals contacts between graphene and niobium selenide</a></li>
<li><a href="../390445/index.html">Scientists have invented thinner and stronger condoms</a></li>
<li><a href="../390447/index.html">Technological trends that all airlines and airports should be prepared for</a></li>
<li><a href="../390451/index.html">School Robotics Competition in Illinois, USA</a></li>
<li><a href="../390453/index.html">Mouse Upgrade - Add Wheel Tilts, Replace Electronics</a></li>
<li><a href="../390455/index.html">How did the kettle remote read</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dense code and testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is written in the wake of Steve Yegge's article. A portrait of a n00b . For me, the main message of the article sounded like this: less c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dense code and testing</h1><div class="post__text post__text-html js-mediator-article"> This article is written in the wake of <a href="http://steve-yegge.blogspot.com/2008/02/portrait-of-n00b.html">Steve Yegge's article.</a>  <a href="http://steve-yegge.blogspot.com/2008/02/portrait-of-n00b.html">A portrait of a n00b</a> .  For me, the main message of the article sounded like this: less comments, fewer classes, fewer methods, more code.  Make the code tighter, do not be zealous in modeling.  I find it difficult to judge this vision of the world, and indeed the question of comments as such is more speculative.  But what has become a steel needle in me is the problem of testing such a dense code. <br><br><a name="habracut"></a><br><br>  To describe the problem, let's look at a small example.  Suppose you have a server and commands come from outside.  You need to write the processing logic of these commands.  I would model this problem something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage1/bb736ea0/cbfba1e8/7bf07d16/b284f198.png"><br><br>  Why so and so much: firstly, we adhere to the principle of <em>Code to Interface</em> , which allows us, for example, when testing a server to forge (mock) a command handler;  secondly, by isolating the logic of each team in a separate class, we can easily test this logic.  You might think, why don't we just make one <code>Handler</code> class and add public methods for each team and submit these methods to tests, why make a bunch of classes?  But, in my opinion, the problem is that the function of the class in this case is somehow ‚Äúsmeared‚Äù by the class, in a sense, we open to the outside world the unnecessary details of the implementation of our handler.  After all, all that the server needs to know is that this class can process <em>any</em> command, and not that it can process command 1, command 2 and command 3. <br><br>  Now let's try to think about how this problem would be implemented in the form of a ‚Äúdense code‚Äù.  Of course, I can not speak and think for the author, a person with 20-25 years of experience.  Perhaps he means something else.  But in this context, for me, code compression is, for example, spike all handlers into one class.  And even better in one method: <br><br><pre> public class Handler {
     public Result handle (Command command) {
         if (command == COMMAND1) {
             // perform logic 1
         } else if (command == COMMAND2) {
             // perform logic 2
         } 
         //.  .  .  .
         else {
             log.error ("don't know how to handle command" + command);
         }
         return result;
     }
 }
</pre><br><br>  Or maybe not to carry out the processing of commands into a separate class at all?  Just put them right in the server? <br><br><pre> public class Server {
     public void converse (Socket client) {
         int command;
         while ((command = client.getInputStream (). read ())! = -1) {
             if (command == COMMAND1) {
                 // perform logic 1
             } else if (command == COMMAND2) {
                 // perform logic 2
             } 
             //.  .  .  .
             else {
                 log.error ("don't know how to handle command" + command);
             }
         }
     }
 }
</pre><br><br>  How do you intend <strong>to</strong> test it?  Only integration tests can somehow save the father of Russian democracy.  Perhaps the author meant something completely different?  I would be glad if Habraguru was enlightened by me and other ‚Äúteenagers‚Äù on this topic. <br><br>  In multi-paradigm languages ‚Äã‚Äãlike Lisp or Python, the situation is somewhat different.  Functions in them tend to turn into multi-layered map-filter-reduce layers. <br>  Here, it seems to me, there is not much point in separating each map, filter or reduce operation into a separate function.  It is enough to use well-tested predicates instead of deranged lambdas, comment on the most important layers of map-filter-reduce, and also test the final functions well. <br><br>  <strong>PS</strong> I‚Äôll make a reservation that I fully admit the dense implementation in imperative languages ‚Äã‚Äãof some algorithms like sorting.  Such algorithms as jugglers - there is no point in juggling with one ball, the meaning appears only when juggling with a set of balls (objects, variables, etc.) at the same time.  Although here, too, it seems to me, there are options. </div><p>Source: <a href="https://habr.com/ru/post/133957/">https://habr.com/ru/post/133957/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133946/index.html">As the customer remained the performer. Part II</a></li>
<li><a href="../133947/index.html">Letters and scribbles</a></li>
<li><a href="../133953/index.html">FiveGUI - beautiful buttons for canvas'a</a></li>
<li><a href="../133954/index.html">Review of the book ‚ÄúProgramming the Arduino / Freeduino microcontroller cards‚Äù</a></li>
<li><a href="../133956/index.html">Creating a proxy dll to run DirectDraw games in the window</a></li>
<li><a href="../133960/index.html">US Antimonopoly Committee authorized Google to buy Admeld</a></li>
<li><a href="../133961/index.html">Microdata & the microdata DOM API</a></li>
<li><a href="../133962/index.html">About the history of memcpy implementations and their performance</a></li>
<li><a href="../133963/index.html">Skype vulnerability allows you to determine the IP address of a particular user.</a></li>
<li><a href="../133964/index.html">Glory 1809 - how a wrist watch is sorted out and what it consists of</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
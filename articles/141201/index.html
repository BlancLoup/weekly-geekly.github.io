<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android application architecture. Part III - the main parts of the application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, we have already talked about the origin of the Android OS architecture and about the patterns implemented in this architecture . Now it's time to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android application architecture. Part III - the main parts of the application</h1><div class="post__text post__text-html js-mediator-article">  So, we have already talked <a href="http://habrahabr.ru/post/140459/">about the origin of the Android OS architecture</a> and <a href="http://habrahabr.ru/post/140655">about the patterns implemented in this architecture</a> .  Now it's time to talk about what the Android application is made of. <br><br>  This article will present the main "characters" of the architecture of the Android application. <br><a name="habracut"></a><br>  In general, the Android application consists of: <br><br><ul><li>  Java classes that are subclasses of main classes from the Android SDK ( <a href="http://developer.android.com/reference/android/view/View.html">View</a> , <a href="http://developer.android.com/reference/android/app/Activity.html">Activity</a> , <a href="http://developer.android.com/reference/android/content/ContentProvider.html">ContentProvider</a> , <a href="http://developer.android.com/reference/android/app/Service.html">Service</a> , <a href="http://developer.android.com/reference/android/content/BroadcastReceiver.html">BroadcastReciever</a> , <a href="http://developer.android.com/reference/android/content/Intent.html">Intent</a> ) and Java classes that do not have parents in the Android SDK. </li><li>  <a href="http://developer.android.com.ext.saariselka.ru/guide/topics/manifest/manifest-intro.html">Application manifest</a> </li><li>  Resources like strings, images, etc. </li><li>  Files </li></ul><br><h5>  Java classes </h5><br>  The following diagram shows the hierarchy of the main classes from the Android SDK, with which the developer has to deal: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/2de/ea9/b19/2deea9b1912aa819bf6e32cbb2581c10.png"><br><br>  In fact, there are many more classes, but these are the main ones.  Dedicated yellow - those with which the developer works directly (in particular, inherited from them).  The rest are just as important, but less commonly used directly. <br><br>  <a href="http://developer.android.com/reference/android/view/View.html">View</a> is the base class for all user interface widgets (GUI widgets).  The interface of an Android application is a tree of instances of the heirs of this class.  You can create this tree programmatically, but this is wrong.  The user interface is defined using XML (layer files, layout files), and at runtime it automatically turns (inflate, the term Android) into a tree of corresponding objects. <br><br>  The <a href="http://developer.android.com/reference/android/app/Activity.html">Activity</a> class and its subclasses contain the logic behind the user interface.  On closer inspection, this class corresponds to the ViewModel in the <a href="http://en.wikipedia.org/wiki/Model_View_ViewModel">Model-View-ViewModel</a> architectural pattern (MVVM).  The relationship between the Activity subclass and the user interface is a one-to-one relationship;  Normally, each Activity subclass has only one UI layer associated with it, and vice versa.  Activity has a life cycle. <br><br>  During the life cycle, an Activity can be in one of three states: <br><br><ul><li>  Active and running - this user interface is in the foreground (technically speaking - at the top of the activation stack) </li><li>  Suspended - if this user interface has lost focus, but is still visible.  In this state, no code is executed. </li><li>  Completed - if the user interface is invisible.  In this state, the code is not executed. </li></ul><br>  The activation code is executed <u>only</u> when the corresponding user interface is visible and has focus.  There is no guarantee that the Activity object and its associated objects are in memory when the activation is paused or completed (it is very important to remember this; we have previously discussed this point of memory management in Android). <br><br>  The <a href="http://developer.android.com/reference/android/content/ContentProvider.html">ContentProvider</a> class and its subclasses represent model in the MVVM architecture.  In most practical cases, this is a wrapper over a SQLite database with a slightly bizarre URI-based access method.  Theoretically, no one bothers the developer to create a ContentProvider based on something other than the database.  However, the content provider‚Äôs existing query () method returns a <a href="http://developer.android.com/reference/android/database/Cursor.html">Cursor</a> object, which is very similar to the JDBC <a href="http://download.oracle.com/javase/6/docs/api/java/sql/ResultSet.html">ResultSet</a> interface and how it works.  Therefore, it is unlikely that anyone will doubt that the real purpose of content providers is to encapsulate a database. <br><br>  I do not know how the Android team came to this design, but, in my opinion, there are two good, but not very compatible, ideas here. <br><br>  And that's why I think so.  The basic idea of ‚Äã‚Äãcontent providers seems to be based on the architecture of AJAX applications.  AJAX applications typically use the MVVM architecture, where the model is represented as a server-side URI (however, this has changed with HTML5, which allows you to store data locally).  In fact, the fact that content providers are requested using a URI and creating an extension using MIME types indicates that AJAX is at the core.  Let me remind you, the guys from Google created a large number of AJAX applications, such as Gmail, Google Docs, etc., so it‚Äôs quite natural that the ideas were borrowed from the AJAX architecture. <br><br>  Perhaps someone else came up with another great idea: how great it would be to have a full-fledged relational base on a mobile device!  (I note that it was around 2005, when mobile phones were much weaker than they are now).  And, as a result, they combined two good ideas into one ContentProvider class.  As it usually happens in software development, combining two good ideas does not always result in a good idea;  in the case of Android, we have a somewhat discouraging design of content providers. <br><br>  Class <a href="http://developer.android.com/reference/android/app/Service.html">Service</a> and its subclasses I find it difficult to somehow classify.  I think the guys at Google are experiencing the same difficulties (please read their documentation).  Their classification basically says what this class is not.  I personally think that a service is a type of Model that serves slightly different uses than ContentProvider. <br><br>  In my opinion, the architectural design of the Android Service is inspired by <a href="http://en.wikipedia.org/wiki/OSGi">OSGI services</a> . <br><br>  I think the services were created by the guys from Google as a solution to a logical problem that arose because of the Android thread model. <br><br>  Think about it: Activity is active and only runs when its user interface is in the foreground.  As soon as the interface of another Activity closes the current one with itself, the latter stops, even if it did something.  And what if you need to perform an operation, even if the process that performs it is not in the foreground?  With the help of Activity you can not do this.  You cannot do this with the help of ContentProvider, since they do not have their own life cycle, and they can be executed only while the Activity that uses it is active. <br><br>  And here services come to the rescue.  They can be performed even when the process in which they operate is not in the foreground.  So, if you are developing an activity that performs a time-stretched operation that should complete even working in the background, you must create a Service that implements this operation and start it from the Activity. <br><br>  Service also has a life cycle.  This means that it can be instantiated and launched by an Android application for some condition (we will discuss this later). <br><br>  As I already mentioned, Service, like model, has more general objectives than ContentProvier.  It can use a database, but its API is not associated with a database, as in the case of a ContentProvider.  In most cases, services are used to communicate with external servers. <br><br>  The <a href="http://developer.android.com/reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a> class and its subclasses represent a ‚Äúsubscriber‚Äù in the <a href="http://en.wikipedia.org/wiki/Publish_subscribe">publisher / subscriber</a> interaction mechanism implemented in the Android architecture. <br><br>  We have already talked about the mechanisms of interaction in the previous article. <br><br>  Of course, a developer for Android is not limited to just the extension of classes from the Android SDK.  He can write his own classes as he wants.  But they will all be only helper classes for classes from the Andoird SDK. <br><br><h5>  Android Manifesto </h5><br>  <a href="http://developer.android.com/guide/topics/manifest/manifest-intro.html">Android Manifesto</a> is another important part of the Android application.  The idea was inspired by <a href="">plug-in manifests for Eclipse</a> . <br><br>  The Android manifest is an XML file and performs several functions.  This is how Google describes them: <br><br><ul><li>  Specifies the name of the Java application package.  The package name is a unique identifier for the application. </li><li>  Describes the components of the application - activites, services, broadcasters and content providers.  Defines the class names that implement each of the components and announce their capabilities (for example, which Intent messages they can process).  These ads allow the Android system to know which components and under what conditions can be launched. </li><li>  It predetermines the processes that the application components will contain. </li><li>  Declares the permissions that an application must have to access secure parts of the API and interact with other applications. </li><li>  It also declares the permissions that are required to access application components. </li><li>  Lists Instrumentation classes that provide profiling and other information while the application is running.  These ads are present in the manifest only while the application is being developed and tested;  they are deleted before the application is published. </li><li>  Announces the minimum level of the Android API that the application requires. </li><li>  Lists the libraries with which the application should be associated. </li></ul><br><br>  Pay attention to the second paragraph.  This means that if a certain class extends an Activity, ContentProvider, BroadcastReceiver or Service in your application, this class cannot be used until it is described in the manifest. <br><br><h5>  Resources </h5><br>  Every modern GUI application uses resources in one form or another.  Android apps are no exception.  They use the following types of resources: <br><br><ul><li>  Images </li><li>  GUI Layers (XML Files) </li><li>  Menu declarations (XML files) </li><li>  Text strings </li></ul><br>  The way in which resources are associated with an Android application is something unusual.  As a rule, in Java resources are identified by strings.  Such strings may contain, for example, the path and name of the file containing the image, or the ID of the given string, etc.  The problem is that errors in such links cannot be detected during the translation of the code. <br><br>  Let's consider the following example.  The file named mybutton.png contains the image for the button.  The developer makes a mistake and dials mybuton.png, referring to the resource from the code.  As a result, the code tries to use a non-existent resource, but the compilation will succeed.  An error can only be detected during testing (or it may not be detected at all). <br><br>  The guys from Google have found an elegant solution to this problem.  When building an Android application, a special Java class is generated with the name <a href="http://developer.android.com/reference/android/R.html">R</a> (just one letter).  This class contains several static final data sets.  Each such data set is a link to a separate resource.  These links are used in the application code to communicate with resources.  Now every error in the link to the resources manifests itself in the compilation process. <br><br><h5>  Files </h5><br>  The Android application uses several different file types: <br><br><ul><li>  General Purpose Files </li><li>  DB files </li><li>  Opaque Binary Blob ( <a href="http://developer.android.com/reference/android/os/storage/StorageManager.html">OBB</a> ) <a href="http://developer.android.com/reference/android/os/storage/StorageManager.html">files</a> (they are an encrypted file system that can be mounted for an application) </li><li>  Cached files </li></ul><br>  Although, of course, all of them are only Linux files, it is understood to consider them as separate file types only in the context of processing them with various APIs and separate storage.  They are also separated from files stored in internal or external storage (the latter may be absent or disappear / appear at any time). <br><br>  The API for working with files is implemented by the <a href="http://developer.android.com/reference/android/content/Context.html">Context</a> class, from which the Activity and Service classes are generated.  This class has already been discussed by us <a href="http://wp.me/p1gzYo-3P">here</a> . <br><br>  That's all for today.  In the next article we will talk about how the different parts of the Android application interact with each other. <br><br>  Previous articles: <br><ul><li>  <a href="http://habrahabr.ru/post/140459/">Android application architecture.</a>  <a href="http://habrahabr.ru/post/140459/">Part I - the origins</a> </li><li>  <a href="http://habrahabr.ru/post/140655/">Android application architecture.</a>  <a href="http://habrahabr.ru/post/140655/">Part II - architectural styles and patterns</a> </li></ul><br><br>  Next article: <a href="http://habrahabr.ru/post/141504/">Android application architecture.</a>  <a href="http://habrahabr.ru/post/141504/">Part IV - integration level</a> </div><p>Source: <a href="https://habr.com/ru/post/141201/">https://habr.com/ru/post/141201/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141194/index.html">Dark places of the Mariana Trench - on Yandex.Maps</a></li>
<li><a href="../141196/index.html">What an ideal personalized letter should look like</a></li>
<li><a href="../141197/index.html">We turn over the Internet on April 1st</a></li>
<li><a href="../141199/index.html">We translate into code 5 really useful templates of adaptive markup.</a></li>
<li><a href="../141200/index.html">Fearless Genius: The Digital Revolution in Silicon Valley 1985-2000 (1-25)</a></li>
<li><a href="../141202/index.html">Bmorn V99 Tablet Review</a></li>
<li><a href="../141206/index.html">Signal Practice</a></li>
<li><a href="../141207/index.html">Designing web applications using Data Management System (based on scaffolding technology)</a></li>
<li><a href="../141208/index.html">Kyiv.py # 6. A small IMHO meeting report</a></li>
<li><a href="../141209/index.html">Mock Module: Dummy Mockups for Testing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
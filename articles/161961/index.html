<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The dependence of transparency on the orientation of the surface</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day, twirling a plastic cup in my hands, I noticed that the apparent transparency of plastic depends on the angle at which you look at the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The dependence of transparency on the orientation of the surface</h1><div class="post__text post__text-html js-mediator-article">  The other day, twirling a plastic cup in my hands, I noticed that the apparent transparency of plastic depends on the angle at which you look at the surface - if you look perpendicular to the surface, the background is clearly visible, and if you look along the surface, the material becomes almost opaque.  I was interested in this phenomenon, and I decided to build a mathematical model. <br><br>  No sooner said than done.  Under the cut, the output of the formula, the fragment shader code and a small demo. <br><a name="habracut"></a><br>  We assume that the material is homogeneous optical - its optical properties do not depend on direction.  Then the change in transparency is caused by different lengths of the path of the light beam in the thickness of the material. <br><br><img align="left" src="https://habrastorage.org/storage2/ff2/eb0/a72/ff2eb0a724696de1ecca1906ae09c761.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://latex.codecogs.com/svg.latex?\dpi{100}d_\varphi&amp;space;=&amp;space;\frac{d_0}{\cos&amp;space;\varphi},\cos&amp;space;\varphi&amp;space;=&amp;space;\vec{n}&amp;space;\cdot&amp;space;\vec{v}">  where <img src="http://latex.codecogs.com/svg.latex?\dpi{100}\vec{n}">  - unit surface normal vector, <img src="http://latex.codecogs.com/svg.latex?\dpi{100}\vec{v}">  - single direction vector to the observer. <br><br>  Let the apparent transparency of the material is determined by the opacity coefficient, which determines the mixing of the material color with the background color as follows: <img src="http://latex.codecogs.com/svg.latex?\dpi{100}C_\texttt{visible}&amp;space;=&amp;space;\alpha&amp;space;C_\texttt{material}&amp;space;&amp;plus;&amp;space;(1&amp;space;-&amp;space;\alpha)C_\texttt{background}"><br><br>  Let's see how the value <img src="http://latex.codecogs.com/svg.latex?\dpi{100}\alpha">  depends on the thickness of the material.  To do this, we divide the layer of material with thickness <img src="http://latex.codecogs.com/svg.latex?\dpi{100}d_0">  and opacity coefficient <img src="http://latex.codecogs.com/svg.latex?\dpi{100}\alpha_0">  on <img src="http://latex.codecogs.com/svg.latex?\dpi{100}N">  layers of equal thickness <img src="http://latex.codecogs.com/svg.latex?\dpi{100}d_\varepsilon">  each with opacity coefficient <img src="http://latex.codecogs.com/svg.latex?\dpi{100}\alpha_\varepsilon">  .  Let be <img src="http://latex.codecogs.com/svg.latex?\dpi{100}C_0">  - background color, <img src="http://latex.codecogs.com/svg.latex?\dpi{100}C_m">  - the color of the material, and <img src="http://latex.codecogs.com/svg.latex?\dpi{100}C_i,i=1...N">  - the color of the output of each layer. <br><br><img src="http://latex.codecogs.com/svg.latex?\dpi{100}&amp;space;C_1=\alpha_\varepsilon&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)C_0&amp;space;\par&amp;space;C_2=\alpha_\varepsilon&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)C_1&amp;space;=&amp;space;\alpha_\varepsilon&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)[\alpha_\varepsilon&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)C_0]&amp;space;=&amp;space;\par&amp;space;=&amp;space;(2\alpha_\varepsilon&amp;space;-&amp;space;\alpha_\varepsilon^2)C_m&amp;space;&amp;plus;&amp;space;(1-\alpha_\varepsilon)^2&amp;space;C_0&amp;space;=&amp;space;(1-(1&amp;space;-&amp;space;\alpha_\varepsilon)^2)&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)^2&amp;space;C_0&amp;space;\par&amp;space;C_3=\alpha_\varepsilon&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)C_2&amp;space;=&amp;space;\alpha_\varepsilon&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)[(1-(1&amp;space;-&amp;space;\alpha_\varepsilon)^2)&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)^2&amp;space;C_0]&amp;space;=&amp;space;\par&amp;space;=&amp;space;(\alpha_\varepsilon&amp;space;&amp;plus;&amp;space;1&amp;space;-&amp;space;\alpha_\varepsilon&amp;space;&amp;plus;&amp;space;(1&amp;space;-&amp;space;\alpha_\varepsilon)^3)C_m&amp;space;&amp;plus;&amp;space;(1-\alpha_\varepsilon)^3&amp;space;C_0&amp;space;=&amp;space;(1-(1&amp;space;-&amp;space;\alpha_\varepsilon)^3)&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)^3&amp;space;C_0&amp;space;\par&amp;space;...&amp;space;\par&amp;space;C_N=&amp;space;(1-(1&amp;space;-&amp;space;\alpha_\varepsilon)^N)&amp;space;C_m&amp;plus;(1-\alpha_\varepsilon)^N&amp;space;C_0"><br><br>  But also <img src="http://latex.codecogs.com/svg.latex?\dpi{100}&amp;space;C_N=\alpha_0&amp;space;C_m&amp;plus;(1-\alpha_0)C_0">  , and consequently: <br><img src="https://habrastorage.org/getpro/habr/post_images/075/780/234/075780234784b0d2b9090aae93bb128a.gif"><br><br>  Those.  with increasing thickness, the apparent transparency of the material decreases exponentially. <br><br>  Let the thickness <img src="http://latex.codecogs.com/svg.latex?\dpi{100}d_\varphi=kd_\varepsilon">  , then: <br><img src="http://latex.codecogs.com/svg.latex?\dpi{100}&amp;space;1&amp;space;-&amp;space;\alpha_\varphi&amp;space;=&amp;space;(1-\alpha_\varepsilon)^k=(1-\alpha_\varepsilon)^\frac{d_\varphi}{d_\varepsilon}=(1-\alpha_0)^{\frac{d_\varepsilon}{d}\times&amp;space;\frac{d_\varphi}{d_\varepsilon}}=(1-\alpha_0)^\frac{d_\varphi}{d_0}=(1-\alpha_0)^\frac{1}{\cos&amp;space;\varphi}"><br><br>  So, the required formula: <img src="http://latex.codecogs.com/svg.latex?{\color{Blue}&amp;space;\alpha(\varphi)&amp;space;=&amp;space;1&amp;space;-&amp;space;(1&amp;space;-&amp;space;\alpha_0)^\frac{1}{\cos&amp;space;\varphi}}"><br><br><img src="https://habrastorage.org/storage2/b9e/ecc/fcb/b9eeccfcb442784132897491e1ebdcfd.png"><br><br>  Below is the fragment shader code that implements this formula: <br><br><pre><code class="cpp hljs">varying vec4 v_color; varying vec3 v_normal; varying vec3 v_eye; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//         float cosPhi = dot(v_normal, v_eye) / sqrt( dot(v_normal, v_normal) * dot(v_eye, v_eye) ); //    ,        //     ,      // 0.999 ^ 10000 = 4.5173346E-5 float alpha = 1.0 - pow(1.0 - v_color.a, 1.0 / max(abs(cosPhi), 0.00001)); gl_FragColor = vec4(vec3(v_color), alpha); };</span></span></code> </pre> <br>  The result is this: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/FephnIZVG60%3Ffeature%3Doembed&amp;xid=25657,15700022,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhi1_Lf5p9ioSMg0Pq9yoO6L7mcmAA" frameborder="0" allowfullscreen=""></iframe><br><br>  The source code of the demo application is available on <a href="https://bitbucket.org/nickolas_pohilets/alpha_demo">bitbucket.org</a> </div><p>Source: <a href="https://habr.com/ru/post/161961/">https://habr.com/ru/post/161961/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161951/index.html">Ping-Pong on AVR</a></li>
<li><a href="../161953/index.html">Apple and Google will buy Kodak patents together</a></li>
<li><a href="../161955/index.html">Individually undertaking? In the cashier!</a></li>
<li><a href="../161957/index.html">Logic - weekly selection of gaming and IT industry news ‚Ññ4</a></li>
<li><a href="../161959/index.html">Framework in Marmalade (part 3)</a></li>
<li><a href="../161965/index.html">Parts prices 10 years ago</a></li>
<li><a href="../161967/index.html">The study of the attitude of popular programming languages ‚Äã‚Äãto random errors</a></li>
<li><a href="../161969/index.html">Inventarium.mobi - we pumped your feedback forms!</a></li>
<li><a href="../161971/index.html">Instant removal of special offers with kindle paperwhite</a></li>
<li><a href="../161973/index.html">The long-awaited revolutionary release of QEMU 1.3 has been released.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Point, point, comma: machine learning</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How to teach the search engine to properly break the text into sentences? Make it so that it can recognize points that are not ends of sentences. 

 O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Point, point, comma: machine learning</h1><div class="post__text post__text-html js-mediator-article">  How to teach the search engine to properly break the text into sentences?  Make it so that it can recognize points that are not ends of sentences. <br><br>  Our article on machine learning explains one of the techniques that are used in a search engine when there is a need to correctly split the text into sentences.  The solution of such a problem is of fundamental importance, for example, when generating snippets by search engines or when building a database of contexts of usage.  Now this technology is being integrated into the Index. Search. Mail. Ru.  According to our observations, the accuracy of the method is at least 99%. <br>  Read more about how this works in our article. <br><a name="habracut"></a><br><h5>  Problem and existing solution <br></h5>  When developing automatic word processing systems, the task of correctly splitting text into sentences often arises.  Its solution is of fundamental importance, for example, when generating snippets by search engines or when building a database of contexts of usage. <br><br>  In practice, you first need to find out whether the sign is the end of a sentence, then determine the places in the text where the divisor of the sentence was omitted, for example, by mistake.  Implementing (and calculating) the second is much more difficult, but, fortunately, there is no urgent need for this, since the implied ends of sentences are less common than the explicit ones. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Ends of sentences may be indicated by dots, question marks and exclamations, paragraph end characters, dots and, in some cases, colons.  The main problems are created by the dot symbol, since it is also used in abbreviations and literal notations - dates, ciphers, email addresses, web addresses, etc. <br><br>  To determine whether a point in this context is the end of a sentence, various methods are used, the complexity of which depends on the requirements for the result.  The most common are the methods that involve the use of regular expressions and tables of standard abbreviations, which in fairly simple cases give an acceptable result. <br><br>  The main disadvantage of abbreviations tables is that they cannot be applied to cases of non-standard (author's) abbreviations.  In addition, abbreviations may be at the end of a sentence, and some of them, for example, "etc.", "etc." often denote an explicit end of a sentence (by the way, this sentence is an exception). <br><br>  Information about whether a sign is the end of a sentence is stored in context and displayed according to certain rules.  To formulate them, based only on their own experience, is not so easy - especially given the fact that they need to be presented in the form of an algorithm. <br><br>  But it is still possible to derive rules that allow to automatically distinguish the signs of the ends of sentences with more than 99% accuracy. <br><br><h5>  Our method </h5>  The method that we decided to use for Search. Mail. Ru is to create a small set of basic rules (about 40) and then automatically build a classifier based on the results of applying these rules. <br><br>  The basic rules are divided into two types - substitutions and combinations.  Substitutions are set by regular expressions and check for specific simple context attributes such as, for example, ‚Äúspaces to the right‚Äù or ‚Äúone uppercase letter to the left‚Äù, etc. <br><br>  Combinations are algebraic constructions that are constructed from substitutions, for example, ‚Äúuppercase letter to the left‚Äù + ‚Äútitle to the right‚Äù (title is a word starting with a capital letter).  Each of the basic rules, when applied to a specific context, returns the number of points awarded, usually 0, -1 or +1.  The end result is calculated from the vector of points by means of a special classifier. <br><br>  A pleasant feature of this approach is the fact that to make a decision, it is necessary to calculate the values ‚Äã‚Äãof not all the rules, but only those that will be required by the classifier.  In addition, based on the importance of the rules for the classifier, you can optimize them, seeking to improve quality and performance. <br><br><h5>  On learning: decision trees </h5>  The selection of basic rules was done manually, using a specially developed declarative language.  To build a classifier, we used a machine learning algorithm based on ‚Äúdecision trees‚Äù. <br><br>  The training went on consistently, on documents of different types - web pages, artistic and formal texts.  In total, about 10 thousand episodes were selected with the ratio of the number of signs-divisors of sentences to non-divisors, as 2 to 3. To get the final one.  99% accuracy required six stages of training. <br><br>  For the first stage of training, data were prepared manually: it took about 1000 episodes to be considered.  At each subsequent stage, episodes were added to the training list, where the classifier ‚Äúwas mistaken‚Äù or ‚Äúdoubted‚Äù. <br><br><h5>  The most important rules </h5>  As already mentioned, the significance of individual rules is determined automatically in the learning process.  The higher the degree of correlation of the estimate obtained by a certain rule with the required answer, the higher this rule in the survey list, and the more often its execution will be checked. <br><br>  As a result of the experiments, we found that the most significant rules include: <br><br>  ‚Ä¢ "Type of delimiter", 3 rules.  The point, question mark and exclamation mark are determined respectively; <br>  ‚Ä¢ "Left / right spaces".  Determine the presence of whitespace characters to the right and left of the separator; <br>  ‚Ä¢ ‚ÄúPunctuation symbol on the right / left‚Äù; <br>  ‚Ä¢ ‚ÄúNumber to the right / left‚Äù; <br>  ‚Ä¢ ‚ÄúUppercase / lowercase letter right / left‚Äù; <br>  ‚Ä¢ ‚ÄúOpen / close bracket right / left‚Äù; <br>  ‚Ä¢ ‚ÄúStandard Abbreviations‚Äù; <br>  ‚Ä¢ ‚ÄúUnknown abbreviations of the general form xxx.-xx.  xx. "etc. <br><br><h5>  Algorithm for constructing a classifier </h5><br><img src="https://habrastorage.org/storage/21c3e3b0/9c6b757c/9bbe1d19/117a16c3.png"><br>  Figure 1. Fragment of the decision tree. <br><br>  As a basis for the classifier, we used ‚Äúdecision trees‚Äù, which are widely used in machine learning.  An example of a real ‚Äútree‚Äù from our classifier is shown in Figure 1 (we present a fragment, since the whole ‚Äútree‚Äù is too large). <br><br>  In the "nodes" of the tree are the conditions for checking the rules.  Record of the form ‚Äú20 &lt;0.5‚Äù means that if rule No. 20 scored less than 0.5 points, then you need to move to the left subtree, otherwise - to the right. <br><br>  In the "leaves of the tree" stored estimates of the likelihood that the divisor is the end of the sentence (the higher the value, the higher the probability).  In this example, the ‚Äútree‚Äù makes decisions based on the following rules: <br>  ‚Ä¢ # 0 - separator is a point <br>  ‚Ä¢ ‚Ññ4 - spaces on the right <br>  ‚Ä¢ ‚Ññ7 - upper left letter <br>  ‚Ä¢ # 18 - dot (+2 for the first point, +1 for the average, -1 for the last) <br>  ‚Ä¢ No. 20 - title to the right (title - a word written with a capital letter). <br>  Unfortunately, one ‚Äútree‚Äù cannot provide an acceptable quality of classification, therefore, as a classifier, we use a combination of several hundred relatively simple trees. <br><br>  Each "tree" is built in such a way as to maximally compensate for the error of the work of the other "trees" of the classifier (this approach is known in the special literature under the name boosting).  Additionally, to improve the quality of the classifier as a whole, we used the bootstrapping technique, where a random subset of the training set is used to build each "tree", changing from "tree" to "tree".  The composite classifier obtained in this way shows significantly better quality of work than a single ‚Äútree‚Äù. <br><br><h5>  Example of outputting a marking program for a random set of phrases </h5>  Inside the sn tags are whole sentences: <br><blockquote><code><a href="http://nowhere.ru.com/pupkin.html"></a> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font>      "". <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font> There is no silver bullet. <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font> . .  -   . <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font> . .         . <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font>   Unix  01. 01. 1970. <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font>     . .   11.06.1999. <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font>    v.pupkin@nowhere.ru.com,    - nowhere.ru.com/pupkin.html -   ,    . <font color="#0000ff">&lt;/</font> <font color="#800000">sn</font> <font color="#0000ff">&gt;</font></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The table shows the estimates made by the classifier.  The cut-off threshold (equal to 0.64) was chosen by the least squares method for the estimates obtained from the training set.  The shift of the threshold is explained by the asymmetry of the training sample relative to the number of cases when the sign is a separator and when it is not. <br><table border="1"><tbody><tr><td width="78">  <strong>Decision:</strong> </td><td width="489">  <strong>Context (separating character is in the center):</strong> </td><td width="73">  <strong>Rating:</strong> </td></tr><tr><td width="78">  Yes </td><td width="489">  `that day was" good. "  There is no silver bulle ' </td><td width="73">  1,000 </td></tr><tr><td width="78">  Yes </td><td width="489">  `There is no silver bullet.  A. S. Pushkin - a great p ' </td><td width="73">  0.734 </td></tr><tr><td width="78">  not </td><td width="489">  `re is no silver bullet.  A. S. Pushkin - the Great Russ' </td><td width="73">  -0,002 </td></tr><tr><td width="78">  not </td><td width="489">  `is no silver bullet.  A. S. Pushkin - the great Russian ' </td><td width="73">  0,003 </td></tr><tr><td width="78">  Yes </td><td width="489">  `in - the great Russian poet.  F. M. Dostoevsky lived in ' </td><td width="73">  0.972 </td></tr><tr><td width="78">  not </td><td width="489">  `- the great Russian poet.  F. M. Dostoevsky lived in not ' </td><td width="73">  -0,002 </td></tr><tr><td width="78">  not </td><td width="489">  `great Russian poet.  F. M. Dostoevsky lived in not himself </td><td width="73">  0,003 </td></tr><tr><td width="78">  Yes </td><td width="489">  `simple time for Russia.  The beginning of the Unix era </td><td width="73">  1,000 </td></tr><tr><td width="78">  not </td><td width="489">  `m epoch Unix is ‚Äã‚Äã01. 01. 1970. Vasily Pupkin ' </td><td width="73">  0.460 </td></tr><tr><td width="78">  not </td><td width="489">  `oh, Unix is ‚Äã‚Äãconsidered 01. 01. 1970. Vasily Pupkin was' </td><td width="73">  0.489 </td></tr><tr><td width="78">  Yes </td><td width="489">  `ix is ‚Äã‚Äãconsidered 01. 01. 1970. Vasily Pupkin was appointed ' </td><td width="73">  0,500 </td></tr><tr><td width="78">  not </td><td width="489">  `Lee Pupkin was appointed and.  about.  general manager ' </td><td width="73">  0.184 </td></tr><tr><td width="78">  not </td><td width="489">  `Pupkin was appointed and.  about.  general manager 1 ' </td><td width="73">  0.050 </td></tr><tr><td width="78">  not </td><td width="489">  `general manager 11.06.1999.  His postal address is' </td><td width="73">  -0.001 </td></tr><tr><td width="78">  not </td><td width="489">  The oral manager 11.06.1999.  His mailing address is' </td><td width="73">  -0.001 </td></tr><tr><td width="78">  Yes </td><td width="489">  The manager‚Äôs manager 11.06.1999.  His mailing address is v.pup ' </td><td width="73">  0,500 </td></tr><tr><td width="78">  not </td><td width="489">  `999.  His mailing address is v.pupkin@nowhere.ru.com, whether </td><td width="73">  -0,055 </td></tr><tr><td width="78">  not </td><td width="489">  `th address v.pupkin@nowhere.ru.com, personal page ' </td><td width="73">  0,000 </td></tr><tr><td width="78">  not </td><td width="489">  `address v.pupkin@nowhere.ru.com, personal page zde ' </td><td width="73">  0.001 </td></tr><tr><td width="78">  not </td><td width="489">  `ka here - <a href="http://nowhere.ru.com/pupkin.html">nowhere.ru.com/pupkin.html</a> - now ' </td><td width="73">  0,000 </td></tr><tr><td width="78">  not </td><td width="489">  `here - <a href="http://nowhere.ru.com/pupkin.html">nowhere.ru.com/pupkin.html</a> - now ' </td><td width="73">  -0.001 </td></tr><tr><td width="78">  not </td><td width="489">  `p: //nowhere.ru.com/pupkin.html - now everyone knows, ' </td><td width="73">  -0.001 </td></tr><tr><td width="78">  Yes </td><td width="489">  `Find out how to contact him. ' </td><td width="73">  0.972 </td></tr></tbody></table><br><h5>  And what about us? <br></h5>  Currently, machine learning technology on the correct breakdown of texts into sentences is embedded in the indexer of our search engine.  This introduction promises to improve the quality of snippets in Search. Mail.Ru, and also will allow to correctly determine the context in which the word is used - which in turn will increase the relevance of search results. <br><br><h5>  extracurricular reading </h5>  For a more in-depth acquaintance with machine learning algorithms, we recommend the book T.Hastie, R.Tibshirani, JHFriedman ‚ÄúThe elements of the statistical learning‚Äù, which is available <a href="http://www-stat.stanford.edu/~hastie/Papers/ESLII.pdf">online</a> . <br><br>  <i>Respectfully,</i> <i><br></i>  <i>Search Team@Mail.Ru</i> </div><p>Source: <a href="https://habr.com/ru/post/112142/">https://habr.com/ru/post/112142/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112133/index.html">Habrainterview with Alexey Terekhov (api.mail.ru)</a></li>
<li><a href="../112134/index.html">4 Russian CMS entered the world top</a></li>
<li><a href="../112137/index.html">Prologue: Fact Base from CSV File</a></li>
<li><a href="../112140/index.html">Features of working with VideoView</a></li>
<li><a href="../112141/index.html">Administration of SPB has created a mobile operator Smolny</a></li>
<li><a href="../112143/index.html">Come January 29 to the Microsoft office for Imagine Cup #imcupmeet!</a></li>
<li><a href="../112144/index.html">How to protect yourself from time-sink sites?</a></li>
<li><a href="../112146/index.html">Programming in PHP for command line</a></li>
<li><a href="../112148/index.html">2nd StartupPoint Meeting in Nizhny Novgorod</a></li>
<li><a href="../112150/index.html">Scala developers have won a grant from the European Union</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to sign java applet</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear reader. 
 Today you will learn how to sign a JAVA applet. To begin with, I will say that JAVA applets have limited functionality until the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to sign java applet</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear reader. <br>  Today you will learn how to sign a JAVA applet.  To begin with, I will say that JAVA applets have limited functionality until they are signed.  For example, unsigned applets cannot: <br><ul><li>  interact with the client's local file system; </li><li>  establish network connections with other servers; </li><li>  interact with the client's clipboard; </li><li>  some others. </li></ul><br><a name="habracut"></a><br>  There are several options for solving the problem: <br>  1. Allow execution on each local client machine.  To do this, you can edit the java.policy file, which is located in the folder with the JRE installed (by default in C: \ Program Files \ Java \ jre6 \ lib \ security).  And add the necessary permissions.  For example, to allow everything you can, you need to insert the line: <br><br><pre><code class="java hljs">grant { ... permission java.security.AllPermission; }</code> </pre> <br><br>  And if you want to allow only work with the clipboard for the <a href="http://hackmeplease.com/">hackmeplease.com</a> site: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="java hljs">grant codeBase <span class="hljs-string"><span class="hljs-string">"http://hackmeplease.com/*"</span></span> { permission java.awt.AWTPermission <span class="hljs-string"><span class="hljs-string">"accessClipboard"</span></span>; };</code> </pre><br><br>  This method will be useful only if the number of end users of your site is limited and you do not have to edit this file on every computer.  In addition, the security of this solution is not very high. <br><br>  2. Sign your Java applet.  So, what we have at the entrance: <br>  - installed JDK and JRE; <br>  - jar-file of your applet (there are some features of writing source code, see below); <br>  - desire to work with the clipboard.  To do this, the line should work correctly: <br><br>  Toolkit toolkit = Toolkit.getDefaultToolkit (); <br>  <strong>Clipboard clipboard = toolkit.getSystemClipboard ();</strong> <br><br>  In the case of calling these lines, from an unsigned applet, we get the following exception: <br>  <strong>java.security.AccessControlException: access denied (java.awt.AWTPermission accessClipboard)</strong> <br><br>  So let's get started: <br>  0. Go to the BIN folder of our JDK (for example, C: \ Program Files \ Java \ jdk1.6.0_23 \ bin). <br>  I. Create a local storage of our certificate (keystore): <br>  <strong>keytool -genkey -keystore .keystore -alias "Terrasoft" -validity 99999</strong> <br>  where Terrasoft is the alias name of our certificate; <br>  99999 - term in months of validity of the certificate; <br>  .keystore is the name of the file being created by the repository. <br><br>  In case of successful launch of the team, the system will ask us the password of our storage, as well as some information about the certificate (your full name, company name, city, country and blood group) <br><br>  As a result, we will have a .keystore file.  This is our repository, with which we will sign different applets. <br>  Ii.  We copy our JAR file into the BIN folder of our JDK.  Sign it with the following command: <br>  <strong>jarsigner.exe -keystore .keystore ClipboardLibrary.jar "Terrasoft"</strong> <br>  where Terrasoft is the alias name of our certificate; <br>  .keystore is the name of the storage file; <br>  ClipboardLibrary.jar - the name of the JAR file. <br>  The system will ask us the password - enter the one that you entered in section I. <br><br>  It seems to be ready ... Yes, right now, naive ... <br>  So, when you start the page with our applet on board, the user will receive a friendly message like: <br><img src="https://habrastorage.org/getpro/habr/post_images/c48/b29/8d5/c48b298d5bb5f2382f8773629423229b.png"><br><br>  Which means, "User, click Yes and say goodbye to your system, because we can do with it what we want." <br>  By the way, pay attention to NOT VERIFIED.  It means that we do not have a trust certificate.  To get a fiduciary, you need to contact special services in the internet and even pay money. <br><br>  But back to our sheep.  When accessing the clipboard, we again get an exception of the form: <br>  java.security.AccessControlException: access denied (java.awt.AWTPermission accessClipboard) <br><br>  Very sorry.  Well, it did not work out now - it will turn out another time.  Goodbye. <br><br>  Just kidding  In fact, at this moment all the guidelines for signing applets that I have met stop.  Like, signed applet nothing scary.  Let them all be ashamed. <br>  In short, the following trick to make our appeal to the clipboard work: <br><br>  Iii.  Change the source code. <br>  Instead of calling the form: <br><pre> <code class="java hljs">clipboard = toolkit.getSystemClipboard()</code> </pre><br>  You need to write a call of the form: <br><pre> <code class="java hljs">clipboard = (Clipboard) AccessController.doPrivileged(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrivilegedAction() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> toolkit.getSystemClipboard(); } });</code> </pre><br>  After that, you need to recompile your JAR and repeat step II (for those who read my message from the end - respect). <br><br>  But in general, that's all.  Should work.  I hope that it will come in handy to someone, and he will not spend as much of his life on this nonsense as I spent.  Hell, trouble and ire you don't want to wait for you (C).  Until new meetings on the air. </div><p>Source: <a href="https://habr.com/ru/post/201210/">https://habr.com/ru/post/201210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../201200/index.html">New free courses of virtual academy of Microsoft Virtual Academy</a></li>
<li><a href="../201202/index.html">Migrating to a new version of API</a></li>
<li><a href="../201204/index.html">Hadoop Part 2: Collecting Data with Flume</a></li>
<li><a href="../201206/index.html">How Passport.js works</a></li>
<li><a href="../201208/index.html">In South Australia, earned a wave power plant with a capacity of 1 MW</a></li>
<li><a href="../201212/index.html">About how I accidentally dropped the browser game server from EA</a></li>
<li><a href="../201214/index.html">Life Cycle Activity Stack (Part 1)</a></li>
<li><a href="../201218/index.html">What personal GTD / To-Do services lack</a></li>
<li><a href="../201220/index.html">Simulate the electrical activity of neurons</a></li>
<li><a href="../201222/index.html">[Answer] Building a street wifi network</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
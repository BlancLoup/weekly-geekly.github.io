<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Starry Sky on Canvas. Constellations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuation of the topic started in the previous article . The idea for its development was the reading of the article on Habre ‚Äú LibCanvas: On the w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Starry Sky on Canvas. Constellations</h1><div class="post__text post__text-html js-mediator-article">  Continuation of the topic started in the previous <a href="http://habrahabr.ru/post/189692/">article</a> .  The idea for its development was the reading of the article on <a href="http://habrahabr.ru/post/181554/">Habre</a> ‚Äú <a href="http://habrahabr.ru/post/181554/">LibCanvas: On the way to the stars</a> ‚Äù, which describes the implementation of the planetarium on the Canvas with the output of constellations and planets in the geodetic coordinate system (with the coordinates of the observation point, azimuth and height above the horizon).  In the post the author gives a <a href="">link</a> to the database of stars and constellations, which I kindly used.  The file contains the coordinates of the right ascension (Right Ascension, in hours) and declination (Declination, in degrees) of stars, constellation points and their names.  I transferred them to radians and saved them in a file <a href="">constellations.js</a> for my star project <a href="http://dbcartajs.appspot.com/starry.html">Starry Sky</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/784/0a1/bf3/7840a1bf3a3cf8643c90a52ab281f5ed.png" alt="Starry sky"><br><a name="habracut"></a><br><br><h4>  Difference </h4><br>  Comparing the results, I noticed that in the original planetarium everything looks the opposite way.  That is, the stars are displayed on the outer side of the sphere, and I - on the inner.  I decided to use another planetarium as a reference.  For this purpose, chose the project <a href="http://maps.mail.ru/stars.html">"Stars"</a> on Karta@Mail.ru.  It turned out that the correct mapping is on the inside of the star sphere.  This can be seen in the figure (time 2/3/2014 17: 2: 0, observation point - d 37, w 55 Moscow). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/2cb/992/060/2cb992060a7447ef98ae0cb117732919.png" alt="Planetarium diff"><br><br><h4>  What's new </h4><br>  In addition to the constellations in my <a href="http://dbcartajs.appspot.com/starry.html">Starry Sky</a> planetarium, I added information on stars, planets, and spacecraft points when you hover over them (active areas). <br>  For stars, the number is output from the Henry Draper'a (HD) catalog. <br><br>  In addition to stars and planets, ephemeris and orbits of spacecraft from the GLONASS constellation are added to the map.  The data is taken from the <a href="http://celestrak.com/">celestrak.com</a> resource and stored in the <a href="">tledata.js</a> file.  In total, 28 devices are grouped, the choice of devices is controlled by the satellites list ... The <a href="https://github.com/shashwatak/satellite-js">satellite-js</a> module is used to calculate the orbits and the positions of the spacecraft. <br><br>  Changing the scale of the map is tied to the change in height above the surface of the Earth.  The size of the star sphere is fixed because otherwise the image realism is lost, the code of the edge of the sky becomes smaller than the edges of the map.  Ideally, I would like to create the effect of an infinite Universe as in Celestia with the removal and approximation of stars and planets. <br><br>  Turn on or off layers (groups of objects) is now possible through a separate list of layers ... <br><br><ul><li>  cntlines - constellation lines, </li><li>  cntpos - the names of the constellations, </li><li>  star - stars </li><li>  sun sun </li><li>  moon - moon </li><li>  planet - planets </li><li>  earth - Earth, </li><li>  sattrac - spacecraft orbits, </li><li>  satsurface - satellite sub-points, </li><li>  sattrace - projections of spacecraft ephemeris on the Earth, </li><li>  satsector - spacecraft vision fields (18 degrees), </li><li>  satpos - spacecraft point in orbit, </li><li>  terminator - night zone. </li></ul><br><br><h4>  results </h4><br>  The main problem of the planetarium with <a href="http://astrokot.ru/planetarium/dev/planetarium.html">astrokot.ru</a> , as the author writes, is the slowness of the program.  I measured the times in the Firefox 19 profiler. In Planetarium - 1168 ms, in Starry - 525 ms.  Really slowly, Starry has more objects, and time is 2 times less.  Apparently, cycles use extra calculations that slow down the output. <br><br>  Exploring the star algorithms for my project, I try to simplify the calculations and the code as much as possible so that they are clear and intuitive.  Studying the codes of other projects (Celestia, Stellarium, libastro), especially on WebGL, it is very difficult to figure out which formulas are used and how they work.  For myself, I have highlighted two projects so far - libnova and Marble - whose code is understandable and most suitable for porting to other environments, for example, in JS. </div><p>Source: <a href="https://habr.com/ru/post/214373/">https://habr.com/ru/post/214373/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214359/index.html">Video banned on YouTube due to the 5-second presence of the actress</a></li>
<li><a href="../214361/index.html">Lenovo's first mobile trade show: MWC 2014</a></li>
<li><a href="../214363/index.html">Introducing Nokia Imaging SDK 1.1 with support for Windows 8.1 and Windows RT 8.1</a></li>
<li><a href="../214367/index.html">Dykstra from Tim from Stanford</a></li>
<li><a href="../214371/index.html">Contract programming in PHP</a></li>
<li><a href="../214377/index.html">Iron in the service of the algorithm (continued)</a></li>
<li><a href="../214379/index.html">How signals and slots work in Qt (part 1)</a></li>
<li><a href="../214385/index.html">Results Tizen App Chellange</a></li>
<li><a href="../214387/index.html">My smart home on .NET</a></li>
<li><a href="../214389/index.html">‚ÄúTo wash or not to wash?‚Äù Or how we launch our mobile application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
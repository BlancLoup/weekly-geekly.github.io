<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Situation: virtual GPUs are not inferior in performance to iron solutions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In February, a high-performance computing (HPC) conference was held at Stanford. VMware representatives said that when working with a GPU, the system ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Situation: virtual GPUs are not inferior in performance to iron solutions</h1><div class="post__text post__text-html js-mediator-article">  In February, a high-performance computing (HPC) conference was held at Stanford.  VMware representatives said that when working with a GPU, the system based on the modified ESXi hypervisor is not inferior in speed to bare metal solutions. <br><br>  We talk about the technologies that allowed to achieve this. <br><br> <a href="https://habr.com/ru/company/it-grad/blog/443946/"><img src="https://habrastorage.org/webt/8v/kv/yj/8vkvyjrwh-onxnppelxzpmkkzn0.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ photo <a href="">Victorgrigas</a> <a href="">CC BY-SA</a></i></font> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Performance problem </h2><br>  According to analysts, about 70% of workloads in data centers are <a href="https://www.nextplatform.com/2019/02/27/making-performance-a-priority-with-virtualized-gpus/">virtualized</a> .  However, the remaining 30% still work on bare metal without hypervisors.  These 30% for the most part consist of high-load applications associated, for example, with the training of neural networks, and using graphics processors. <br><br>  Experts explain this trend by the fact that the hypervisor, as an intermediate layer of abstraction, can affect the performance of the entire system.  In studies five years ago, <a href="https://isi.edu/~mkkang/papers/Cloud_2014.pdf">you can find data</a> on the reduction in the speed of work by 10%.  Therefore, companies and data center operators are in no hurry to transfer HPC-load into a virtual environment. <br><br>  But virtualization technologies are evolving and improving.  At the conference a month ago in VMware, they said that the ESXi hypervisor does not have a negative impact on GPU performance.  The computation speed can be reduced by three percent, and this is comparable with bare metal. <br><br><h2>  How it works </h2><br>  To increase the performance of HPC systems with graphics processors, VMware made a number of changes to the work of the hypervisor.  In particular, he was relieved of the vMotion function.  It is needed for load balancing and usually transfers virtual machines (VMs) between servers or GPUs.  Disabling vMotion led to the fact that each VM is now assigned a specific graphics processor.  This helped reduce the cost of data sharing. <br><br>  Another key component of the system <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.networking.doc/GUID-BF2770C3-39ED-4BC5-A8EF-77D55EFE924C.html">is</a> DirectPath I / O <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.networking.doc/GUID-BF2770C3-39ED-4BC5-A8EF-77D55EFE924C.html">technology</a> .  It allows the CUDA parallel computing driver to interact with virtual machines directly, bypassing the hypervisor.  When several VMs are required to run on one GPU at once, the GRID vGPU solution is enabled.  It divides the memory card into several segments (but the computational cycles are not divided). <br><br>  The operation scheme of two virtual machines in this case will look as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ts/ab/bm/tsabbmtivpd_ydgq4egnfrsgycw.png" width="400"></div><br><h2>  Results and forecasts </h2><br>  The company <a href="http://on-demand.gputechconf.com/gtc/2018/presentation/s8249-machine-learning-on-vmware-vsphere-using-nvidias-virtualized-gpus.pdf">conducted tests of the</a> hypervisor, having trained the language model based on <a href="https://ru.wikipedia.org/wiki/TensorFlow">TensorFlow</a> .  "Damage" performance was only 3-4%, compared with bare metal.  At the same time, in exchange, the system was able to allocate resources on demand, depending on current loads. <br><br>  The IT giant also <a href="https://blogs.vmware.com/apps/2018/08/sharing-nvidia-gpus-in-singularity-hpc-containers-leveraging-vsphere.html">conducted</a> container <a href="https://blogs.vmware.com/apps/2018/08/sharing-nvidia-gpus-in-singularity-hpc-containers-leveraging-vsphere.html">tests</a> .  Company engineers trained neural networks to recognize images.  At the same time, the resources of one GPU were distributed among four container VMs.  As a result, the performance of individual machines has decreased by 17% (compared to a single VM, which has full access to GPU resources).  However, the number of processed images per second <a href="">increased</a> three times.  It is expected that such systems <a href="https://blogs.vmware.com/vsphere/2018/10/machine-learning-with-gpus-on-vsphere.html">will find</a> application in the field of data analysis and computer modeling. <br><br>  Among the potential problems that VMware may encounter, experts <a href="https://www.nextplatform.com/2019/02/27/making-performance-a-priority-with-virtualized-gpus/">highlight a</a> rather narrow target audience.  With high-performance systems while working a small number of companies.  Although Statista <a href="https://www.statista.com/statistics/227284/share-of-global-cloud-data-center-workloads-development/">notes</a> that by 2021 94% of the workloads of the world data centers will be virtualized.  According <a href="https://www.marketsandmarkets.com/PressReleases/Quantum-High-Performance-Computing.asp">to</a> analysts, the cost of the HPC-market will increase from 32 to 45 billion dollars in the period from 2017 to 2022. <br><br><img src="https://habrastorage.org/webt/u9/-u/yv/u9-uyvvqxtluet_3rlbpftpkctg.jpeg"><br>  <font color="#A9A9A9"><i>/ <a href="">Global Access Point</a> PD Photo</i></font> <br><br><h2>  Similar solutions </h2><br>  There are several analogues on the market that are developed by large IT companies: AMD and Intel. <br><br>  The first company to virtualize GPUs <a href="https://www.amd.com/Documents/gpu-consistency-security-whitepaper.pdf">offers an</a> approach based on SR-IOV (single-root input / output virtualization).  This technology provides VM access to parts of the system's hardware capabilities.  The solution allows you to divide the graphics processor between 16 users with equal performance of virtualized systems. <br><br>  As for the second IT giant, their <a href="https://www.intel.com/content/www/us/en/solution-providers/documents/intel-citrix-xendesktop-virtualized-graphics-brief.html">technology is based</a> on the Citrix XenServer 7 hypervisor. It combines the work of a standard GPU driver and a virtual machine, which allows the latter to display 3D applications and desktops on devices of hundreds of users. <br><br><h2>  Future technology </h2><br>  The developers of virtual graphics processors <a href="https://www.networkworld.com/article/3197846/nvidia-gives-glimpse-of-the-future-at-its-gpu-technology-conference.html">are betting</a> on the introduction of AI systems and the growing popularity of high-performance solutions in the business technology market.  They hope that the need for processing large amounts of data will increase the demand for vGPU. <br><br>  Now manufacturers <a href="https://searchservervirtualization.techtarget.com/tip/GPU-virtualization-evolves-with-new-chip-types-on-the-horizon">are looking for a way to</a> combine the functionality of CPU and GPU in one core in order to speed up the solution of tasks related to graphics, performing mathematical calculations, logical operations, data processing.  The appearance on the market of such cores in the future will change the approach to resource virtualization and their distribution between workloads in a virtual and cloud environment. <br><br><hr><br>  What to read on the topic in our corporate blog: <br><br><ul><li>  <a href="https://iaas-blog.it-grad.ru/tendencii/pochemu-korporativnye-zakazchiki-ispolzuyut-virtualnye-mashiny-a-ne-kontejnery/">Why companies use virtual machines, not containers</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/novosti/kak-dela-u-vmware-obzor-novyx-reshenij/">"How are VMware?": A review of new solutions</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/funkcionalnost/novaya-funkcionalnost-v-vmware-vsphere-6-7/">VMware vSphere 6.7: What Are the New Functions of the Hypervisor?</a> </li></ul><br>  A couple of posts from our Telegram channel: <br><br><ul><li>  <a href="https://t.me/iaasblog/187">IT architecture of the future - who prepares for it and how</a> </li><li>  <a href="https://t.me/iaasblog/195">5 cloud management tools</a> </li><li>  <a href="https://t.me/iaasblog/194">How the IaaS provider protects customer data</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/443946/">https://habr.com/ru/post/443946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443934/index.html">CJDNS is dead, long live Yggdrasil</a></li>
<li><a href="../443936/index.html">Qualcomm won a lawsuit with Apple, but the war is not over</a></li>
<li><a href="../443938/index.html">NetXMS as a monitoring system for the lazy ... and a bit of comparison with Zabbix</a></li>
<li><a href="../443940/index.html">How NOT to translate movie titles</a></li>
<li><a href="../443942/index.html">Configuring 802.1X on Cisco Switches with Failover NPS (Windows RADIUS with AD)</a></li>
<li><a href="../443950/index.html">Trust, Advise, Suggest - hunt for real software reviews</a></li>
<li><a href="../443952/index.html">Sovereign Internet - for our money</a></li>
<li><a href="../443954/index.html">Technological singularity: the modern myth about the end of the world under the guise of a progress hypothesis</a></li>
<li><a href="../443956/index.html">Social network in 2019: Yandex launched "Aura"</a></li>
<li><a href="../44396/index.html">Plus minus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
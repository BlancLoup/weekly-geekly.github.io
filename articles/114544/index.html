<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Integrating Twitter into your Android app.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Integrating Twitter into your Android app. 
 Starting to write my small toy for google phone, I wanted to send records to twitter. As it turned out on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Integrating Twitter into your Android app.</h1><div class="post__text post__text-html js-mediator-article"><h4>  Integrating Twitter into your Android app. </h4><br>  Starting to write my small toy for google phone, I wanted to send records to twitter.  As it turned out on the Internet there are many articles about connecting to your account on Twitter, but there are very few working examples.  A little effort and I found the code I needed, which turned out to be quite efficient.  Well, let's get down to integration. <br><a name="habracut"></a><br>  Recently, Twitter has been using the OAuth protocol for authentication.  And so we need to log in using this protocol.  And actually, send a message straight to our microblog.  For this, I decided to use the following libraries: <br>  <a href="http://code.google.com/p/oauth-signpost/">signpost library</a> for direct use of the OAuth mechanism, <a href="http://twitter4j.org/en/index.html">Twitter4J library</a> for sending tweets. <br><br><h5>  We start </h5><br><br>  And so we need a working Twitter account (if you don‚Äôt have one, register <a href="http://twitter.com/signup">here</a> ).  Next, we need to register our test application to interact with Twitter.  And so we go <a href="https://dev.twitter.com/apps">here</a> <br>  Now we fill in the necessary fields, all that matters is the following: Application Type - Browser, Default Access type - Read &amp; Write.  The rest is filled in an arbitrary way, but remembering the format of the input data (we do not try to type in the URL &amp; callback URL something like &amp; * ^ &amp; JKLLKL :, enter everything as it should). <br><img src="https://habrastorage.org/storage/habraeffect/bb/45/bb45cfbac46ad1adf7241f7002a326ab.png" alt="image"><br>  As soon as they have filled in all the fields, entered a captcha - we will see the following text. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Consumer key <br>  ************************ (character set) <br>  Consumer secret <br>  ************************ (character set) <br>  Request token URL <br>  <a href="https://api.twitter.com/oauth/request_token">api.twitter.com/oauth/request_token</a> <br>  Access token URL <br>  <a href="https://api.twitter.com/oauth/access_token">api.twitter.com/oauth/access_token</a> <br>  Authorize URL <br>  <a href="https://api.twitter.com/oauth/authorize">api.twitter.com/oauth/authorize</a> <br>  Registered OAuth Callback URL <br>  <a href="http://smth.com/">smth.com</a> <br><br>  Yes, we will not use this callback in our application, there we will act a little differently and define our own callback. <br><br><h5>  We start writing the application </h5><br>  And so we will need the following libraries: <br><ul><li>  signpost-commonshttp4-1.2.1.1.jar </li><li>  signpost-core-1.2.1.1.jar </li><li>  httpclient-4.0.1.jar </li><li>  twitter4j-core-2.1.11 </li></ul><br><img src="https://habrastorage.org/storage/habraeffect/74/59/7459a9777ef8402d766dff14808cfc6f.png" alt="image"><br><img src="https://habrastorage.org/storage/habraeffect/81/6a/816afd4dba2c0860a3a0b4a61bcdc318.png" alt="image"><br>  And so now we have acc.  libraries. <br>  As a result, we outline a small plan of how our application will look like.  For simplicity, the example will be only 1 Activity. <br><ul><li>  status bar that displays whether we are connected to twitter or not </li><li>  the Tweet button, which actually posts our test message, and if we are not logged in, it opens the browser in which we log in </li><li>  just come out of Twitter, clearing the previous settings (what if some other application uses the account) </li></ul><br><img src="https://habrastorage.org/storage/habraeffect/2a/e8/2ae8969cd201ec740948b926dfcc997a.png" alt="image"><br><br><h6>  Constant file </h6><br>  In this file, we define the necessary constants for the connection. <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Constants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CONSUMER_KEY = <span class="hljs-string"><span class="hljs-string">"&lt;  CONSUMER KEY &gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String CONSUMER_SECRET= <span class="hljs-string"><span class="hljs-string">"&lt; CONSUMER SECRET &gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String REQUEST_URL = <span class="hljs-string"><span class="hljs-string">"http://api.twitter.com/oauth/request_token"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String ACCESS_URL = <span class="hljs-string"><span class="hljs-string">"http://api.twitter.com/oauth/access_token"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String AUTHORIZE_URL = <span class="hljs-string"><span class="hljs-string">"http://api.twitter.com/oauth/authorize"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String CALLBACK_SCHEME = <span class="hljs-string"><span class="hljs-string">"x-latify-oauth-twitter"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String CALLBACK_URL = CALLBACK_SCHEME + <span class="hljs-string"><span class="hljs-string">"://callback"</span></span>; }</code> </pre> <br>  I will give the scheme by which the interaction between Twitter and the application. <br><img src="https://habrastorage.org/storage/habraeffect/0f/dc/0fdccd7255a33c91810f63b78a8e8c52.png" alt="image"><br><br>  CONSUMER_KEY - a unique key for our application, we get as soon as we register our application (something like a login) <br>  CONSUMER_SECRET - the secret key for our application (something like a password for "login") <br>  REQUEST_URL - needed to get request token.  Part of OAuth.  We receive immediately after registration. <br>  AUTHORIZE_URL - URL required to access Twitter.  Part of OAuth.  We receive immediately after registration. <br>  ACCESS_URL - to get access token.  Part of OAuth.  We receive immediately after registration. <br>  CALLBACK SCHEME is the unique identifier that we use as a callback to get access token.  In general, the choice of the scheme is not limited.  For examples, we‚Äôll use x-sample-oauth-twitter here. <br>  CALLBACK_URL - actually our callback with which we received the answer, to which the authorization was successful, we can send the requests we need using the access token. <br><br><h6>  Tweet button </h6><br><br><pre> <code class="java hljs">tweet.setOnClickListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> View.OnClickListener() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (TwitterUtils.isAuthenticated(prefs)) { sendTweet(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Intent i = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(getApplicationContext(), PrepareRequestTokenActivity.class); i.putExtra(<span class="hljs-string"><span class="hljs-string">"tweet_msg"</span></span>,getTweetMsg()); startActivity(i); } } });</code> </pre><br>  Everything is simple here, our button just checks if the user is logged in, if everything is ok, then we send our message, if not, then we are prompted to log in to the browser.  For this we use PrepareRequestTokenActivity.  Login process a little later. <br><br><h6>  Authentification </h6><br>  Consider the situation first, we are with you (user) has not yet passed the process of authentication.  Before we can send our messages, we redirect in the browser to the login page of the twitter account.  This is implemented using PrepareRequestTokenActivity. <br>  Consider what classes we need for this. <br><br>  PrepareRequestTokenActivity ‚Äî Installs the OAuth user and provider (Signpost library) and the old asynchronous OAuthRequestTokenTask.  It also contains a callback when we have already been authenticated for access token. <br>  OAuthRequestTokenTask - is responsible for receiving the request token, and calling the browser, in which we actually go through authentication. <br>  RetrieveAccessTokenTask is an internal PrepareRequestTokenActivity class.  Called by the NewIntent method on the PrepareRequestTokenActivity.  Stores our received tokens after authorization. <br><br>  PrepareRequestTokenActivity and call the asynchronous OAuthRequestTokenTask <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.consumer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.provider = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CommonsHttpOAuthProvider(Constants.REQUEST_URL,Constants.ACCESS_URL,Constants.AUTHORIZE_URL); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Error creating consumer / provider"</span></span>,e); } Log.i(TAG, <span class="hljs-string"><span class="hljs-string">"Starting task to retrieve request token."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OAuthRequestTokenTask(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>,consumer,provider).execute(); }</code> </pre><br>  Here we get our callback URL to return control to the application (x-oauthflow-twitter: // callback). <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Void </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Void... params)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Log.i(TAG, <span class="hljs-string"><span class="hljs-string">"Retrieving request token from Google servers"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String url = provider.retrieveRequestToken(consumer, Constants.OAUTH_CALLBACK_URL); Log.i(TAG, <span class="hljs-string"><span class="hljs-string">"Popping a browser with the authorize URL : "</span></span> + url); Intent intent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND); context.startActivity(intent); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"Error during OAUth retrieve request token"</span></span>, e); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br><br><h6>  Login page </h6><br>  And so we are on the login page. <br>  In order for the browser to start, you must register our Activity (PrepareRequestTokenActivity) in the manifest file (AndroidManifest.xml) <br> <code>&lt;activity android:name=".PrepareRequestTokenActivity" android:launchMode="singleTask"&gt;&gt; <br> &lt;intent-filter&gt; <br> &lt;action android:name="android.intent.action.VIEW" /&gt; <br> &lt;category android:name="android.intent.category.DEFAULT" /&gt; <br> &lt;category android:name="android.intent.category.BROWSABLE" /&gt; <br> &lt;data android:scheme="x-oauthflow-twitter" android:host="callback" /&gt; <br> &lt;/intent-filter&gt; <br></code> <br><br><img src="https://habrastorage.org/storage/habraeffect/d8/98/d8980962779056edc09ba8ba5cc4f5c0.png" alt="image"><br>  We continue to work.  Now we need to get access token to access our microblog, we produce it via RetrieveAccessTokenTask.  Called by the onNewIntent method already mentioned above. <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNewIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onNewIntent(intent); SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Uri uri = intent.getData(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (uri != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) { Log.i(TAG, <span class="hljs-string"><span class="hljs-string">"Callback received : "</span></span> + uri); Log.i(TAG, <span class="hljs-string"><span class="hljs-string">"Retrieving Access Token"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RetrieveAccessTokenTask(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>,consumer,provider,prefs).execute(uri); finish(); } }</code> </pre><br><br>  Now that everything is in place, we must consider that we need to save our session, i.e.  even if we restarted the application, we do not need to re-authorize, for this we will write a function that stores all our values ‚Äã‚Äãin the background. <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Void </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Uri...params)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Uri uri = params[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { provider.retrieveAccessToken(consumer, oauth_verifier); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Editor edit = prefs.edit(); edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken()); edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret()); edit.commit(); String token = prefs.getString(OAuth.OAUTH_TOKEN, <span class="hljs-string"><span class="hljs-string">""</span></span>); String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, <span class="hljs-string"><span class="hljs-string">""</span></span>); consumer.setTokenWithSecret(token, secret); context.startActivity(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(context,AndroidTwitterSample.class)); executeAfterAccessTokenRetrieval(); Log.i(TAG, <span class="hljs-string"><span class="hljs-string">"OAuth - Access Token Retrieved"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"OAuth - Access Token Retrieval Error"</span></span>, e); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br>  The executeAfterAccessTokenRetrieval method immediately retrieves our message and carries it through the authentication procedure using OAuth. <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">executeAfterAccessTokenRetrieval</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String msg = getIntent().getExtras().getString(<span class="hljs-string"><span class="hljs-string">"tweet_msg"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { TwitterUtils.sendTweet(prefs, msg); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.e(TAG, <span class="hljs-string"><span class="hljs-string">"OAuth - Error sending to Twitter"</span></span>, e); } }</code> </pre><br>  Well, do not forget to inform the user about the successful implementation of our task.  write a simple toast for this. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Handler mTwitterHandler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Handler(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Runnable mUpdateTwitterNotification = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(getBaseContext(), <span class="hljs-string"><span class="hljs-string">"Tweet sent !"</span></span>, Toast.LENGTH_LONG).show(); } };</code> </pre><br>  The message itself is sent using the methods of the Twitter4J library. <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendTweet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SharedPreferences prefs,String msg)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ String token = prefs.getString(OAuth.OAUTH_TOKEN, <span class="hljs-string"><span class="hljs-string">""</span></span>); String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, <span class="hljs-string"><span class="hljs-string">""</span></span>); AccessToken a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AccessToken(token,secret); Twitter twitter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TwitterFactory().getInstance(); twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET); twitter.setOAuthAccessToken(a); twitter.updateStatus(msg); }</code> </pre><br>  Here's what I got in the end: <br><img src="https://habrastorage.org/storage/habraeffect/98/91/98915282b11fcaaf68b040628559e9d9.png" alt="image"><br><br>  Translation of the tutorial: <br>  <a href="http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/">blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application</a> <br>  with further performance checks. <br>  Used by: <br><ul><li>  <a href="http://code.google.com/p/oauth-signpost/">signpost library</a> </li><li>  <a href="http://twitter4j.org/en/index.html">Twitter4J library</a> </li></ul><br>  As well as the source code of the author of an English-language article, I hope they will help you to fully understand the described process - <a href="https://github.com/ddewaele/AndroidTwitterSample">github link</a> </div><p>Source: <a href="https://habr.com/ru/post/114544/">https://habr.com/ru/post/114544/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114531/index.html">How to manage IT-Schnick without competence in this area?</a></li>
<li><a href="../114533/index.html">The first marathon of two-legged robots</a></li>
<li><a href="../114537/index.html">New version: jQuery 1.5.1</a></li>
<li><a href="../114540/index.html">Creating a project portal using Google technologies</a></li>
<li><a href="../114541/index.html">Mono 2.10 released - F # included</a></li>
<li><a href="../114545/index.html">Windows and foam in art</a></li>
<li><a href="../114546/index.html">Sharpdevelop 4 development environment</a></li>
<li><a href="../114548/index.html">Harvard scientists have created an inexpensive system for the early detection of cancer</a></li>
<li><a href="../114550/index.html">Google launched a new search algorithm</a></li>
<li><a href="../114551/index.html">Generalization of the median filter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
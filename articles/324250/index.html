<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Calling Go functions from other languages</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since version 1.5, the Go compiler supports several build modes defined by the buildmode flag. They are also called Go ( Go Execution Modes ) executio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Calling Go functions from other languages</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/0f0/8fd/c54/0f08fdc54eeb4a0daf06f709a8d028ae.jpg" alt="image"></p><br><p> Since version 1.5, the Go compiler supports several build modes defined by the <code>buildmode</code> flag.  They are also called Go ( <em><a href="https://docs.google.com/document/d/1nr-TQHw_er6GOQRsF6T43GGhFDelrAP0NqSS_00RgZQ/edit">Go Execution Modes</a></em> ) execution modes.  With their help, <code>go tool</code> can compile Go packages in several formats, including archives and shared libraries of Go (shared libraries), archives and libraries of shared use of C, and from version 1.8 - dynamic Go plugins. </p><br><p>  In this article, we will look at compiling Go packages into C libraries.  In this build mode, the compiler generates a standard binary object file (shared object) (.so), passing Go functions as a C-style API.  We'll talk about how to create Go libraries that can be called from C, Python, Ruby, Node and Java. </p><br><p>  All code is available on <a href="https://github.com/vladimirvivien/go-cshared-examples">GitHub</a> . </p><a name="habracut"></a><br><h2 id="kod-na-go">  Go Code </h2><br><p>  First write the code on Go.  Suppose we have an awesome library, the goal is to make it available to other languages.  Before you compile the code into the library, you must meet four conditions: </p><br><ul><li>  The package must be related to packages of type <code>main</code> .  Then the compiler will compile it and all dependencies in one binary file of the common object. </li><li>  The source must import the pseudo-package <code>"C"</code> . </li><li>  To annotate functions that need to be made available to other languages, use the <code>//export</code> comment. </li><li>  An empty <code>main</code> function must be declared. </li></ul><br><p>  The following Go source exports four functions: <code>Add</code> , <code>Cosine</code> , <code>Sort</code> and <code>Log</code> .  I must admit that the awesome library is not so impressive.  However, its various function signatures (function signatures) will help us to study the possible consequences of type mapping. </p><br><p>  The <a href="">awesome.go</a> file: </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"math"</span></span> <span class="hljs-string"><span class="hljs-string">"sort"</span></span> <span class="hljs-string"><span class="hljs-string">"sync"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> count <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mtx sync.Mutex <span class="hljs-comment"><span class="hljs-comment">//export Add func Add(a, b int) int { return a + b } //export Cosine func Cosine(x float64) float64 { return math.Cos(x) } //export Sort func Sort(vals []int) { sort.Ints(vals) } //export Log func Log(msg string) int { mtx.Lock() defer mtx.Unlock() fmt.Println(msg) count++ return count } func main() {}</span></span></code> </pre> <br><p>  The package is compiled with the <code>-buildmode=c-shared</code> flag to create a binary object file: </p><br><pre> <code class="bash hljs">go build -o awesome.so -buildmode=c-shared awesome.go</code> </pre> <br><p>  The compiler creates the <code>awesome.h</code> header C-file and the <code>awesome.so</code> object <code>awesome.so</code> : </p><br><pre> <code class="bash hljs">-rw-rw-r ‚Äî 1362 Feb 11 07:59 awesome.h -rw-rw-r ‚Äî 1997880 Feb 11 07:59 awesome.so</code> </pre> <br><p>  Please note that the <code>.so</code> file size is about 2 MB.  Quite a lot for such a small library.  The fact is that the entire Runtime mechanic Go and the dependent packages are pushed into this file. </p><br><h3 id="zagolovochnyy-fayl">  Header file </h3><br><p>  It defines C-types, which, using <a href="https://golang.org/cmd/cgo/">cgo</a> semantics, <a href="https://golang.org/cmd/cgo/">are</a> mapped to compatible Go-types. </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Created by ‚Äúgo tool cgo‚Äù ‚Äî DO NOT EDIT. */</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> GoInt64; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> GoUint64; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> GoInt64 GoInt; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> GoFloat64; ... <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *p; GoInt n; } GoString; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *data; GoInt len; GoInt cap; } GoSlice; ... <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> ... extern GoInt Add(GoInt p0, GoInt p1); extern GoFloat64 Cosine(GoFloat64 p0); extern void Sort(GoSlice p0); extern GoInt Log(GoString p0); ...</span></span></code> </pre> <br><h3 id="fayl-razdelyaemogo-obekta">  Shared object file </h3><br><p>  This is a 64-bit binary ELF file of the shared object.  You can verify its contents with the <code>file</code> command. </p><br><pre> <code class="bash hljs">$&gt; file awesome.so awesome.so: ELF 64-bit LSB shared object, x86‚Äì64, version 1 (SYSV), dynamically linked, BuildID[sha1]=1fcf29a2779a335371f17219fffbdc47b2ed378a, not stripped</code> </pre> <br><p>  Using the <code>nm</code> and <code>grep</code> commands, you can verify that our Go functions are exported to an object file. </p><br><pre> <code class="bash hljs">$&gt; nm awesome.so | grep -e <span class="hljs-string"><span class="hljs-string">"T Add"</span></span> -e <span class="hljs-string"><span class="hljs-string">"T Cosine"</span></span> -e <span class="hljs-string"><span class="hljs-string">"T Sort"</span></span> -e <span class="hljs-string"><span class="hljs-string">"T Log"</span></span> 00000000000d0db0 T Add 00000000000d0e30 T Cosine 00000000000d0f30 T Log 00000000000d0eb0 T Sort</code> </pre> <br><h2 id="iz-ci">  Of c </h2><br><p>  There are two ways to use the library to call Go functions from C.  First bind the library: statically at compile stage, dynamically at runtime.  Or dynamically load and link the Go function symbols. </p><br><h3 id="dinamicheskoe-linkovanie">  Dynamic linking </h3><br><p>  In this case, we use the header file to create static links between types and functions exported in the object file.  The code is simple and clean (some print expressions are omitted): </p><br><p>  <a href="">Client1.c</a> file </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt; #include "awesome.h" int main() { printf("Using awesome lib from C:\n"); GoInt a = 12; GoInt b = 99; printf("awesome.Add(12,99) = %d\n", Add(a, b)); printf("awesome.Cosine(1) = %f\n", (float)(Cosine(1.0))); GoInt data[6] = {77, 12, 5, 99, 28, 23}; GoSlice nums = {data, 6, 6}; Sort(nums); ... GoString msg = {"Hello from C!", 13}; Log(msg); }</span></span></span></span></code> </pre> <br><p>  Now compile the C-code with the library of objects: </p><br><pre> <code class="bash hljs">$&gt; gcc -o client client1.c ./awesome.so</code> </pre> <br><p>  When the resulting binary file is launched, it is linked with the awesome.so library, calls exported functions from Go and returns: </p><br><pre> <code class="bash hljs">$&gt; ./client awesome.Add(12,99) = 111 awesome.Cosine(1) = 0.540302 awesome.Sort(77,12,5,99,28,23): 5,12,23,28,77,99, Hello from C!</code> </pre> <br><h3 id="dinamicheskaya-zagruzka">  Dynamic loading </h3><br><p>  With this approach, C-code uses the dynamic link loader library for dynamic loading and binding of exported symbols.  The functions defined in <code>dhfcn.h</code> apply: </p><br><ul><li>  to open a library file - dlopen, </li><li>  to search for characters - dlsym, </li><li>  to get errors - dlerror, </li><li>  to close the library file - dlclose. </li></ul><br><p>  This version will be longer because the binding and linking is done in your source code.  But it does the same thing as the previous version (some error handling and print expressions are omitted): </p><br><p>  <a href="">Client2.c</a> file </p><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdlib.h&gt; #include &lt;stdio.h&gt; #include &lt;dlfcn.h&gt; // define types needed typedef long long go_int; typedef double go_float64; typedef struct{void *arr; go_int len; go_int cap;} go_slice; typedef struct{const char *p; go_int len;} go_str; int main(int argc, char **argv) { void *handle; char *error; handle = dlopen ("./awesome.so", RTLD_LAZY); if (!handle) { fputs (dlerror(), stderr); exit(1); } go_int (*add)(go_int, go_int) = dlsym(handle, "Add"); if ((error = dlerror()) != NULL) { ... } go_int sum = (*add)(12, 99); printf("awesome.Add(12, 99) = %d\n", sum); go_float64 (*cosine)(go_float64) = dlsym(handle, "Cosine"); go_float64 cos = (*cosine)(1.0); printf("awesome.Cosine(1) = %f\n", cos); void (*sort)(go_slice) = dlsym(handle, "Sort"); go_int data[5] = {44,23,7,66,2}; go_slice nums = {data, 5, 5}; sort(nums); go_int (*log)(go_str) = dlsym(handle, "Log"); go_str msg = {"Hello from C!", 13}; log(msg); dlclose(handle); }</span></span></span></span></code> </pre> <br><p>  In the previous code, we defined our own subset of Go-compatible C types: <code>go_int</code> , <code>go_float</code> , <code>go_slice</code> and <code>go_str</code> .  We used <code>dlsym</code> to load the characters <code>Add</code> , <code>Cosine</code> , <code>Sort</code> and <code>Log</code> , followed by binding to the corresponding function pointers.  Then compiled the code, referring to the <code>dl</code> library (not awesome.so): </p><br><pre> <code class="bash hljs">$&gt; gcc -o client client2.c -ldl</code> </pre> <br><p>  When executing the code, the C binary file loads and links the awesome.so library.  The result is: </p><br><pre> <code class="bash hljs">$&gt; ./client awesome.Add(12, 99) = 111 awesome.Cosine(1) = 0.540302 awesome.Sort(44,23,7,66,2): 2,7,23,44,66, Hello from C!</code> </pre> <br><h2 id="iz-python">  From python </h2><br><p>  Python is a bit simpler.  We use the <a href="https://docs.python.org/3/library/ctypes.html">foreign function library</a> <code>ctypes</code> to call Go functions from the awesome.so library, as shown in the following example (some print expressions are omitted): </p><br><p>  <a href="https://github.com/vladimirvivien/go-cshared-examples/blob/master/client.py">Client.py</a> file </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> ctypes <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * lib = cdll.LoadLibrary(<span class="hljs-string"><span class="hljs-string">"./awesome.so"</span></span>) lib.Add.argtypes = [c_longlong, c_longlong] <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"awesome.Add(12,99) = %d"</span></span> % lib.Add(<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">99</span></span>) lib.Cosine.argtypes = [c_double] lib.Cosine.restype = c_double cos = lib.Cosine(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"awesome.Cosine(1) = %f"</span></span> % cos <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoSlice</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Structure)</span></span></span><span class="hljs-class">:</span></span> _fields_ = [(<span class="hljs-string"><span class="hljs-string">"data"</span></span>, POINTER(c_void_p)), (<span class="hljs-string"><span class="hljs-string">"len"</span></span>, c_longlong), (<span class="hljs-string"><span class="hljs-string">"cap"</span></span>, c_longlong)] nums = GoSlice((c_void_p * <span class="hljs-number"><span class="hljs-number">5</span></span>)(<span class="hljs-number"><span class="hljs-number">74</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">122</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>), <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>) lib.Sort.argtypes = [GoSlice] lib.Sort.restype = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> lib.Sort(nums) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoString</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Structure)</span></span></span><span class="hljs-class">:</span></span> _fields_ = [(<span class="hljs-string"><span class="hljs-string">"p"</span></span>, c_char_p), (<span class="hljs-string"><span class="hljs-string">"n"</span></span>, c_longlong)] lib.Log.argtypes = [GoString] msg = GoString(<span class="hljs-string"><span class="hljs-string">b"Hello Python!"</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>) lib.Log(msg)</code> </pre> <br><p>  Notice that the <code>lib</code> variable represents the loaded characters from the shared object file.  We declare the Python <code>GoString</code> and <code>GoSlice</code> classes to match them with the corresponding C structure types.  When executing Python code, Go functions are called from a common object: </p><br><pre> <code class="bash hljs">$&gt; python client.py awesome.Add(12,99) = 111 awesome.Cosine(1) = 0.540302 awesome.Sort(74,4,122,9,12) = [ 4 9 12 74 122 ] Hello Python!</code> </pre> <br><h2 id="iz-ruby">  Ruby out </h2><br><p>  Here everything is done according to the same principle as above.  Use the <a href="https://github.com/ffi/ffi">FFI gem</a> to dynamically load and call the exported functions from awesome.so. </p><br><p>  <a href="">Client.rb</a> file </p><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'ffi'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extend</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FFI::Library</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ffi_lib</span></span></span><span class="hljs-class"> './</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">so</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoSlice</span></span></span><span class="hljs-class"> &lt; FFI::Struct </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">layout</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pointer</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cap</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoString</span></span></span><span class="hljs-class"> &lt; FFI::Struct </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">layout</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pointer</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attach_function</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class">, [:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class">], :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attach_function</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cosine</span></span></span><span class="hljs-class">, [:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">], :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attach_function</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sort</span></span></span><span class="hljs-class">, [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoSlice</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">by_value</span></span></span><span class="hljs-class">], :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attach_function</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class">, [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoString</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">by_value</span></span></span><span class="hljs-class">], :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class">(12, 99) = ", </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Add</span></span></span><span class="hljs-class">(12, 99), "\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">print</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cosine</span></span></span><span class="hljs-class">(1) = ", </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cosine</span></span></span><span class="hljs-class">(1), "\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nums</span></span></span><span class="hljs-class"> = [92,101,3,44,7] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FFI::MemoryPointer</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">long_long</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nums</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">write_array_of_long_long</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nums</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slice</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome::GoSlice</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slice</span></span></span><span class="hljs-class">[:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">] = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ptr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slice</span></span></span><span class="hljs-class">[:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">] = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nums</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slice</span></span></span><span class="hljs-class">[:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cap</span></span></span><span class="hljs-class">] = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nums</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sort</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slice</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class"> = "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hello</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ruby!</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gostr</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome::GoString</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gostr</span></span></span><span class="hljs-class">[:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">] = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FFI::MemoryPointer</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">from_string</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gostr</span></span></span><span class="hljs-class">[:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">len</span></span></span><span class="hljs-class">] = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Log</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gostr</span></span></span><span class="hljs-class">)</span></span></code> </pre> <br><p>  In Ruby, we need to extend the <code>FFI</code> module to declare characters to be loaded from the shared library.  We declare the Ruby <code>GoSlice</code> and <code>GoString</code> classes to match them with the corresponding C-structures.  When executing the code, it calls the Go exported functions: </p><br><pre> <code class="bash hljs">$&gt; ruby client.rb awesome.Add(12, 99) = 111 awesome.Cosine(1) = 0.5403023058681398 awesome.Sort([92, 101, 3, 44, 7]) = [3, 7, 44, 92, 101] Hello Ruby!</code> </pre> <br><h2 id="iz-node">  From node </h2><br><p>  We will use the <a href="https://github.com/node-ffi/node-ffi">node-ffi</a> external functions library (and a couple of dependent packages) to dynamically load and call the exported Go functions from awesome.so: </p><br><p>  <a href="">Client.js</a> file </p><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ref = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"ref"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ffi = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"ffi"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Struct = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"ref-struct"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ArrayType = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"ref-array"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> LongArray = ArrayType(ref.types.longlong); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> GoSlice = Struct({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: LongArray, <span class="hljs-attr"><span class="hljs-attr">len</span></span>: <span class="hljs-string"><span class="hljs-string">"longlong"</span></span>, <span class="hljs-attr"><span class="hljs-attr">cap</span></span>: <span class="hljs-string"><span class="hljs-string">"longlong"</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> GoString = Struct({ <span class="hljs-attr"><span class="hljs-attr">p</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">n</span></span>: <span class="hljs-string"><span class="hljs-string">"longlong"</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> awesome = ffi.Library(<span class="hljs-string"><span class="hljs-string">"./awesome.so"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">Add</span></span>: [<span class="hljs-string"><span class="hljs-string">"longlong"</span></span>, [<span class="hljs-string"><span class="hljs-string">"longlong"</span></span>, <span class="hljs-string"><span class="hljs-string">"longlong"</span></span>]], <span class="hljs-attr"><span class="hljs-attr">Cosine</span></span>: [<span class="hljs-string"><span class="hljs-string">"double"</span></span>, [<span class="hljs-string"><span class="hljs-string">"double"</span></span>]], <span class="hljs-attr"><span class="hljs-attr">Sort</span></span>: [<span class="hljs-string"><span class="hljs-string">"void"</span></span>, [GoSlice]], <span class="hljs-attr"><span class="hljs-attr">Log</span></span>: [<span class="hljs-string"><span class="hljs-string">"longlong"</span></span>, [GoString]] }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"awesome.Add(12, 99) = "</span></span>, awesome.Add(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"awesome.Cosine(1) = "</span></span>, awesome.Cosine(<span class="hljs-number"><span class="hljs-number">1</span></span>)); nums = LongArray([<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">54</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">423</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> slice = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GoSlice(); slice[<span class="hljs-string"><span class="hljs-string">"data"</span></span>] = nums; slice[<span class="hljs-string"><span class="hljs-string">"len"</span></span>] = <span class="hljs-number"><span class="hljs-number">5</span></span>; slice[<span class="hljs-string"><span class="hljs-string">"cap"</span></span>] = <span class="hljs-number"><span class="hljs-number">5</span></span>; awesome.Sort(slice); str = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GoString(); str[<span class="hljs-string"><span class="hljs-string">"p"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Hello Node!"</span></span>; str[<span class="hljs-string"><span class="hljs-string">"n"</span></span>] = <span class="hljs-number"><span class="hljs-number">11</span></span>; awesome.Log(str);</code> </pre> <br><p>  Node uses an <code>ffi</code> object to declare and load characters from the shared library.  We will also declare the Node <code>GoSlice</code> and <code>GoString</code> structural objects to match them with the corresponding C-structures.  When executing code, the exported functions are called: </p><br><pre> <code class="hljs swift">awesome.<span class="hljs-type"><span class="hljs-type">Add</span></span>(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>) = <span class="hljs-number"><span class="hljs-number">111</span></span> awesome.<span class="hljs-type"><span class="hljs-type">Cosine</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-number"><span class="hljs-number">0.5403023058681398</span></span> awesome.<span class="hljs-type"><span class="hljs-type">Sort</span></span>([<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">54</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">423</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>] = [ <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">54</span></span>, <span class="hljs-number"><span class="hljs-number">423</span></span> ] <span class="hljs-type"><span class="hljs-type">Hello</span></span> <span class="hljs-type"><span class="hljs-type">Node!</span></span></code> </pre> <br><h2 id="iz-java">  From java </h2><br><p>  To call exported functions, we will use the <a href="https://github.com/java-native-access/jna">Java Native Access</a> (JNA) library (some expressions are omitted or given by abbreviations): </p><br><p>  <a href="">Client.java</a> file </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.sun.jna.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Client</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Awesome</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Library</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoSlice</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Structure</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Pointer data; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> len; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> cap; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoString</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Structure</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String p; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> n; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cosine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Sort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GoSlice.ByValue vals)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(GoString.ByValue str)</span></span></span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String argv[])</span></span></span><span class="hljs-function"> </span></span>{ Awesome awesome = (Awesome) Native.loadLibrary( <span class="hljs-string"><span class="hljs-string">"./awesome.so"</span></span>, Awesome.class); System.out.printf(... awesome.Add(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>)); System.out.printf(... awesome.Cosine(<span class="hljs-number"><span class="hljs-number">1.0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>[] nums = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>[]{<span class="hljs-number"><span class="hljs-number">53</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">88</span></span>}; Memory arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Memory(... Native.getNativeSize(Long.TYPE)); Awesome.GoSlice.ByValue slice = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Awesome.GoSlice.ByValue(); slice.data = arr; slice.len = nums.length; slice.cap = nums.length; awesome.Sort(slice); Awesome.GoString.ByValue str = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Awesome.GoString.ByValue(); str.p = <span class="hljs-string"><span class="hljs-string">"Hello Java!"</span></span>; str.n = str.p.length(); awesome.Log(str); } }</code> </pre> <br><p>  To use JNA, we define an Awesome Java interface that will represent characters loaded from awesome.so.  We will also declare the <code>GoSlice</code> and <code>GoString</code> classes to match them with the corresponding C-structures.  We compile and run the code, the exported functions are called: </p><br><pre> <code class="bash hljs">$&gt; javac -cp jna.jar Client.java $&gt; java -cp .:jna.jar Client awesome.Add(12, 99) = 111 awesome.Cosine(1.0) = 0.5403023058681398 awesome.Sort(53,11,5,2,88) = [2 5 11 53 88 ] Hello Java!</code> </pre> <br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  We looked at how to create a Go library for use by other languages.  By compiling Go packages into C-style libraries, you can easily access your Go-projects with C, Python, Ruby, Node, Java, etc. using in-process integration of binary object files. Therefore, next time when you make a super API on Go, don't forget to share it with developers in other languages. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/324250/">https://habr.com/ru/post/324250/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324238/index.html">J-Bird, or as a bummer game sold</a></li>
<li><a href="../324240/index.html">We assemble your OpenShift Origin Cluster</a></li>
<li><a href="../324242/index.html">Replacing Oracle with PostgreSQL and the ability to work with partitioning inside a DLP system</a></li>
<li><a href="../324244/index.html">How to search for patterns in stock data and use them in trading?</a></li>
<li><a href="../324246/index.html">Active Directory Recycle Bin: Usage Guidelines</a></li>
<li><a href="../324256/index.html">Segmental</a></li>
<li><a href="../324258/index.html">How the dislike for the code helped me to ‚Äúpump over‚Äù designer skills</a></li>
<li><a href="../324260/index.html">Creating Web Applications with Scala.js and React - Part 1</a></li>
<li><a href="../324262/index.html">Interview IT specialists. On ‚Äúyou‚Äù or on ‚Äúyou‚Äù?</a></li>
<li><a href="../324264/index.html">Get the list of PostgreSQL statements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Localizing Google Chrome Extensions - Necessary and Easy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The variety and easy availability of extensions have played a significant role in the popularity of the Google Chrome browser. Probably many of you ha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Localizing Google Chrome Extensions - Necessary and Easy</h1><div class="post__text post__text-html js-mediator-article">  The variety and easy availability of extensions have played a significant role in the popularity of the Google Chrome browser.  Probably many of you have the experience of writing them.  Perhaps not yet experience, but already a desire to try, or even a specific idea.  It remains only to start. <br><br>  Already at the design stage, I suggest you think about multilanguage.  Most people are much more comfortable using the product in their own language, even if they know English, and especially if they do not know. <br><br>  A lot of benefits for you: the potential audience will grow significantly, the number of installations will increase.  You will receive an intriguing feedback: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/334/4fd/ac3/3344fdac3a684997abc5f4768fe72f5f.png" alt="Intriguing Feedback" width="525" height="187"><br><br>  In this post, I will talk about how I translated my extension ‚Äú <a href="https://chrome.google.com/webstore/detail/image-in-the-center/kcpejamelebpigblebnbabhndaaffjok">Image in the Center</a> ‚Äù into 11 languages, how I organized the process and what auxiliary tools I used to automate the boring routine. <br><a name="habracut"></a><br><h4>  Documentation </h4><br>  The Google Chrome developer documentation <a href="https://developer.chrome.com/extensions/i18n">details</a> what you need to do to translate the interface of your extension or application into more than 50 languages.  Do not worry, it is not necessary to translate to all 50, you can skip Vietnamese, or even leave a couple of popular ones, including Russian. <br><br>  Distracted.  In short, then: <br><br><ol><li>  All translations are inside the <i>_locales</i> directory located in the project root. </li><li>  For each language inside <i>_locales</i> , a folder is created corresponding to the language identifier.  For Russian <i>ru</i> , for English <i>en</i> and so on.  Their full list <a href="https://developer.chrome.com/webstore/i18n%3Fcsw%3D1">is at the docks</a> . </li><li>  Inside the directory with the name-locale is the file <i>messages.json</i> .  Translation in it. </li></ol><br><br>  The file is simple - it is a list of keys, each of which corresponds to a specific word, phrase, sentence, or whole story.  For these keys, pieces of text will be taken from <i>messages.json</i> and added to the interface.  Each of them carries three parts: <br><br><ul><li>  <i>message</i> - the same text for display on the screen, for which everything was started. </li><li>  <i>description</i> is auxiliary text that allows the translator to understand the context of using <i>message</i> .  After all, depending on the situation, the same word can be translated in different ways.  So <i>‚Äúspit (narrow strip of land going from the coast)‚Äù</i> will turn into <i>‚Äúforeland‚Äù</i> , and <i>‚Äúspit (agricultural tool)‚Äù</i> into <i>‚Äúscythe‚Äù</i> .  The text in the <i>description is</i> optional, you can skip it. </li><li>  <i>placeholders</i> - an optional property that allows you to pass an arbitrary context to a phrase.  For example, for Pasha, show the title <i>‚ÄúHello, Pasha!‚Äù</i> , And for Masha, <i>‚ÄúHello, Masha!‚Äù</i> .  Details on the use of placeholders can be read in the appropriate <a href="https://developer.chrome.com/extensions/i18n-messages">section of the documentation</a> . </li></ul><br><br><img src="https://habrastorage.org/files/2fd/7c1/c62/2fd7c1c62da041d49f4c5d64b52e5a1a.png" width="456" height="428" alt="Directory structure _locales"><br><br>  Unfortunately, the Chromium engine development group, which is the basis of Google Chrome, did not implement ‚Äúpluralization‚Äù (declination of words depending on the numeral) at the level of the locale file structure.  They can be understood.  Due to the diversity of languages, due to the abundance of specific rules, it would be very difficult to make it.  Instead, <a href="https://www.chromium.org/developers/design-documents/extensions/how-the-extension-system-works/i18n">they propose to</a> use ambiguous language, for example, <i>‚ÄúNumber of available languages: 11‚Äù</i> instead of <i>‚ÄúTranslated into 11 languages‚Äù</i> . <br><br>  When you decide to add a translation to another language, you will need to create another directory, place the file there and carefully fill in the keys, as in the other fields, phrase by phrase. <br><br>  But what if there is another button in the interface?  It does not matter - we open each directory in succession, then each file, add a new key with the name of the button, write the translation, save it.  So, stand, and add to the <i>fr</i> directory?  Open the file, check, save ... And translated into Spanish?  We open, check, save ... <br><br>  And what if there are five new elements in the interface?  What if ten?  The likelihood of an error is very high. <br><br>  Google has given developers quite good tools for internationalization, but in practice daily work with a bundle of files is inconvenient and boring.  Even if you are willing to accept boredom, the human factor leaves a loophole for mistakes.  Their probability must be reduced whenever possible. <br><br>  How to improve the existing scheme? <br><br><h4>  Optimization </h4><br>  Having decided that it is better to lose a day, and then in five minutes to fly, I began to search for a more convenient solution.  I will not lie, I searched for a short time.  Like any other developer, he quickly gave up and took hold of his bike. <br><br>  The first thing that comes to mind is that it is much more convenient to store and edit phrases in one place, in one file.  So that everything was immediately before my eyes. <br><br>  The ideal format is the table.  Columns correspond to languages, strings - keys with phrases.  You can use any convenient editor: Microsoft Excel, Numbers from Apple, something else.  I stopped at the tables from Google Docs.  For example, a fragment of my only file now looks like this: <br><br><img src="https://habrastorage.org/files/326/73e/a8a/32673ea8a99247b4a0414d8fbeff99df.png" width="955" height="350" alt="Example of using a table"><br><br>  With such a table it is easy to add new languages ‚Äã‚Äã- copy the file and send it to the translator.  He fills his column and sends back. <br><br>  With such a table it is easy to add new phrases - we create a new line for the next key and consistently fill all the columns.  You can adjust the backlighting of empty cells in the editor with an alarming orange color - now we will definitely not miss anything. <br><br>  Placers are also added simply; you wrap the group in parentheses, you divide the key and value with a colon ( <a href="https://docs.google.com/spreadsheets/d/1ONVyE5iwe7Hjg74eUQ5WdJjQ7i8kWNcbfXI-uh3bvdc/edit">see example</a> ). <br><br>  Creating a structure, correspondence with translators, something on their own - the table is ready.  What's next? <br><br><h4>  Automation </h4><br>  To generate all the necessary directories and files, I wrote the npm-module <a href="https://www.npmjs.com/package/csv-locales">csv-locales</a> .  Its core is another, third-party utility <a href="https://www.npmjs.com/package/csv-parse">csv-parse</a> .  The name does not lie, it parses the CSV file, converts it to json and sends the result to me.  The CSV file itself is exported from our table.  Further, the document is analyzed and divided into smaller fragments, into separate languages.  They are in the form of <i>messages.json</i> placed in the target directories.  Everything happens one to one, as I mentioned a little higher, but almost instantly and without mistakes <i>** laughter from the audience **</i> . <br><br>  We will reduce our participation to a minimum, we will start the process with a single command from the console.  I wrapped the module in plugins for two popular build systems: <br><br><ol><li>  <a href="https://www.npmjs.com/package/grunt-csv-locales">grunt-csv-locales</a> </li><li>  <a href="https://www.npmjs.com/package/gulp-csv-locales">gulp-csv-locales</a> </li></ol><br><br>  All that is required is to export your file to CSV format and set a script on it.  As a basis for the table we use <a href="https://docs.google.com/spreadsheets/d/1ONVyE5iwe7Hjg74eUQ5WdJjQ7i8kWNcbfXI-uh3bvdc/edit%3Fusp%3Dsharing">this sample</a> . <br><br>  Configuration example for grunt: <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">grunt</span></span></span><span class="hljs-function">) </span></span>{ grunt.initConfig({ <span class="hljs-attr"><span class="hljs-attr">csvLocales</span></span>: { <span class="hljs-attr"><span class="hljs-attr">all</span></span>: <span class="hljs-string"><span class="hljs-string">'source/locales.csv'</span></span>, <span class="hljs-attr"><span class="hljs-attr">options</span></span>: { <span class="hljs-attr"><span class="hljs-attr">dirPath</span></span>: <span class="hljs-string"><span class="hljs-string">'_locales'</span></span> } } }); grunt.loadNpmTasks(<span class="hljs-string"><span class="hljs-string">'grunt-csv-locales'</span></span>); };</code> </pre> <br><br>  Result: <br><br><img src="https://habrastorage.org/files/482/4c3/a64/4824c3a644b6497dac84ee19cd1f4ec4.png" width="300" height="171" alt="The newly created _locales directory"><br><br>  Hooray!  Adding new languages, new text elements to the interface no longer causes depression.  Automation of the routine allows you to focus on the really important points, on more interesting tasks, without the boring <i>‚Äúopened / edited / closed / repeated‚Äù</i> . <br><br>  It should be mentioned that the Google team offers to order the translation of your extension right from the developer‚Äôs toolbar.  You just need to download the original <i>message.json</i> , select languages ‚Äã‚Äãand pay for the work of translators.  I have not tried.  This service appeared relatively recently, when I no longer needed it.  Plus, the money will be much more expensive than freelance translators.  If you have experience of such a translation, please tell us about it in the comments. <br><br><img src="https://habrastorage.org/files/f96/a87/b9d/f96a87b9d469481db8dd483f75b6d08c.png" width="629" height="119" alt="Interface translation order interface in the developer panel"><br><br>  The standard solution for software localization is the <a href="http://www.gnu.org/software/gettext/manual/gettext.html">gettext</a> library.  It is not used for Google Chrome extensions, however, <a href="https://www.npmjs.com/package/gettext-parser">gettext-parser</a> already exists in npm, which means, if desired, we can implement support for PO files.  What are not plans for the future? <br><br>  For those who read to the end, useful links: <br><br><ul><li>  <a href="https://www.npmjs.com/package/grunt-csv-locales">grunt task</a> </li><li>  <a href="https://www.npmjs.com/package/gulp-csv-locales">gulp task</a> </li><li>  underlying <a href="https://www.npmjs.com/package/csv-locales">csv-locales</a> module </li><li>  <a href="https://docs.google.com/spreadsheets/d/1ONVyE5iwe7Hjg74eUQ5WdJjQ7i8kWNcbfXI-uh3bvdc/edit%3Fusp%3Dsharing">sample table structure</a> </li><li>  <a href="https://developer.chrome.com/webstore/i18n">Google Chrome documentation</a> for translating extensions and applications to different languages </li><li>  <a href="">funny gif with cat</a> </li></ul><br><br>  I will be glad to answer your questions, to hear feedback.  Tell us about your experiences.  What are you using?  What advise me? </div><p>Source: <a href="https://habr.com/ru/post/267501/">https://habr.com/ru/post/267501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267487/index.html">Embarcadero Technologies sold to Idera</a></li>
<li><a href="../267491/index.html">About UEFI security, part four</a></li>
<li><a href="../267495/index.html">New in Runkit 1.0.4: PHP 5.6+, closures everywhere and 12 more new features</a></li>
<li><a href="../267497/index.html">Recipes for Android: How to make a delicious LayoutManager</a></li>
<li><a href="../267499/index.html">Messy about developing letters</a></li>
<li><a href="../267503/index.html">Python Meetup 08.28.15: full-text search and Europython 2015</a></li>
<li><a href="../267505/index.html">Basics of NHibernate (easy tutorial)</a></li>
<li><a href="../267507/index.html">Another way to disable telemetry collection in Windows 10 OS</a></li>
<li><a href="../267509/index.html">Replicated object. Part 1: Introduction</a></li>
<li><a href="../267511/index.html">Yandeks.Blogi - we will think for you</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
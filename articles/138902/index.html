<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bridge pattern extra touches</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Discussion of the long-suffering pattern of the Bridge in Habr√© revealed many interesting opinions and delusions. Let's try to understand, reanimate t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bridge pattern extra touches</h1><div class="post__text post__text-html js-mediator-article">  Discussion of the long-suffering pattern of the Bridge in Habr√© revealed many interesting opinions and delusions.  Let's try to understand, reanimate this template in the eyes of those who struggle with the wording of the original GoF catalog, and show a few additional touches to those interested in the topic of templates. <br><a name="habracut"></a><br><br><h4>  Briefly about the patterns GoF (Gang of Four - "gang of four") </h4><br><br>  <i>‚ÄúWe are not endowed with foresight, so those who attribute extraordinary abilities to the‚Äú gang of four ‚Äùwill be struck by the chaos of our development process.‚Äù</i> <br>  John Vlissides 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>‚ÄúWhen we wrote our book, we really tried to hide something, We wanted to avoid talking about the fact that one template is a specialization of another, or one template is contained in another as its component.</i>  <i>We did not want to be distracted, and decided to talk only about patterns.</i>  <i>This is partly why we did not describe the ‚Äúabstract class‚Äù as an independent template, since it is contained in most of the templates.</i>  <i>I think it was a justified decision when creating the first template catalog, but now the situation has changed.</i>  <i>People want to know about the relationships between the templates, and we need to tell them about it. ‚Äù</i> <br>  Ralph Johnson <br><br>  <i>‚ÄúThe design patterns developed by GoF take into account only aspects of the micro-architecture.</i>  <i>It is necessary to choose the macroarchitecture correctly: splitting into levels, distribution, isolation of functions ..., and also nanoarchitecture: encapsulation, the principle of the Liska substitution (Barbara Liskov).</i>  <i>It is possible that in some places it will be possible to use a certain design pattern, in any case, it is very unlikely that such a pattern has already been developed and described in any book. ‚Äù</i> <br>  Richard Helm <br><br>  GoF templates are built on two basic principles. <ol><li>  <b>Find the points of change and encapsulate them.</b> </li><li>  <b>Composition of objects at run time is preferable to inheritance.</b> </li></ol>  Criteria for including a template in a directory <ul><li>  Repeatability of reception in at least 3 independent implementations.  If possible, regardless of the programming language. </li><li>  The agreement of the group with the name (metaphor) and the basic structure of the template. </li></ul><br><br><h4>  Bridge Template ("Bridge") </h4><br><br>  Type: <b>structural</b> <br>  Level: <b>component</b> <br>  Another name: <b>Handle / Body ("Description / Body")</b> <br>  Application <b>time</b> : the <b>moment of design</b> . <br><br>  <b>Purpose</b> <br>  The separation of a complex component into two independent, but interrelated hierarchical structures: functional abstraction and internal implementation. <br>  This makes it easy to change any aspect of a component. <br><br><h5>  Demonstration </h5><br>  Consider the ideas underlying this pattern on the example of modeling a component called "Car".  Practical value will not be an end in itself. <br>  <b>Step 1.</b> The hierarchy of functionality (first level), in this case it will be integrated types of cars. <br><img src="https://habrastorage.org/storage2/655/1a9/191/6551a919158ecd96c30acb3377527bd4.png"><br><br>  <b>Step 2.</b> The implementation space will reflect the options for representing the car in the depths of the manufacturer's company.  Pay attention to the explosive increase in static links in the model and, accordingly, the number of classes to be developed when using inheritance.  But at the time of execution, the complexity of the model is linear. <br><img src="https://habrastorage.org/storage2/497/043/f42/497043f4253c044f50afffec8a99719a.png"><br><br><img src="https://habrastorage.org/storage2/521/734/305/5217343058eced503c1f9c1eb27e8f5e.png"><br><br>  <b>Step 3.</b> Separation of hierarchies, postponing the binding until execution.  Compare with the circuit element "multi-position switch" or "multiplexer". <br><img src="https://habrastorage.org/storage2/4ac/527/f1d/4ac527f1ddcbc0641626c48c49175c1f.png"><br><br>  <b>Step 4.</b> ‚ÄúClassic‚Äù presentation of the template with the specified features. <br><img src="https://habrastorage.org/storage2/663/2c6/f84/6632c6f84340d66b4c42d47c05ebbd9b.png"><br><br><h5>  Comparison with inheritance </h5><br>  Functionality options: __ 2 ... ..3 .... 3 ... 4 ... ... 4 ... .5 <br>  Implementation options: ________ 2 ... ..2 ... .3 ... .3 ... ... 4 ... .4 <br>  Classes (inheritance): ______ 4 ... ..6 ... .9 ... 12 ... 16 ... 20 <br>  Classes (Bridge template): ______ 4 .... 5 ... .6 ... 7 ... ... 8 ... ..9 <br><br>  The architecture of the Bridge template allows the multiplexing of various variants of the external representation and internal implementation of the component.  The term "multiplexing" means the possibility of association in any combination of external and internal elements, which provides an increase in the range of possible variations of the component. <br>  Separating a component into two separate concepts, in addition, helps to facilitate understanding of the purpose of the component and its maintenance.  This is explained by the fact that each branch of inheritance is built on the basis of one concept - either abstraction or implementation. <br><br><h5>  Important points </h5><br><br>  <b>Borders:</b> Functions and implementation are closely related hierarchies that are at the same conceptual level, reflecting the peculiarity of the structure of one component.  Note that the implementation is in the ‚Äúprivate / protected‚Äù part of the component and reflects the points of variation of the functional concept. <br>  Example: GUI in Java.  Public is in java.awt. *.  Private in internal packages sun. *.  This provides protection for an important invariant because there is no point in using, for example, a Win implementation on a Mac, and even less to allow an external (untrusted) code to replace the implementation. <br><br>  <b>Main hierarchy: The</b> functional hierarchy is the main one, it knows about the variation and uses it (unidirectional association).  The implementation hierarchy is subject to the needs of the required functions.  That is why in GoF it turns out that the DrawRectangle () method is at the functional level, and DrawLine () at the platform implementations level. <br>  With a bidirectional association, we are no longer getting a ‚Äúbridge‚Äù, but a ‚Äúgo-between‚Äù for GoF. <br><br>  <b>Place among structural patterns: The</b> classical wording speaks of the equivalence of changes in both hierarchies.  However, one of the "bandits" John Vlissides is given the following list of points of variation. <br>  ADAPTER - object interface; <br>  BRIDGE - object implementation; <br>  COMPOSITE - structure and composition of the object; <br>  DECORATOR - the duties of the object without spawning a subclass; <br>  FACADE - subsystem interface; <br>  FLYWEIGHT - storage overhead; <br>  PROXY - a way to access the object and / or its location. <br><br>  <b>Relationship with other templates:</b> If you try to go to the ‚Äúbridge‚Äù in the existing model, then in 99% of cases you either aggregate / adapt independent entities or use an intermediary / strategy to encapsulate the changes, just do not forget that the original template is a design time reception refactoring), such an initial step, but as soon as your ‚Äúimplementation‚Äù leaves the ‚Äúprivate‚Äù zone and heals on its own it is no longer a ‚Äúbridge‚Äù.  The connection between levels, dependency inversion, anything but a ‚Äúbridge‚Äù in the sense of GoF. <br>  The ‚Äúbridge‚Äù must be ‚Äúconfigured‚Äù at the time of execution, do not forget any combination of Abstraction - Realization is possible.  The logic of ‚Äúconfiguring‚Äù and observing invariants is either hidden in the component or given to a higher level component (in difficult cases there may be an Abstract factory, a dependency container, etc.). <br>  Such options as the separation of the implementation between objects at the time of execution, the use of multiple implementations at the same time.  They are described in GoF and can be considered as exotic cases in which the ‚Äúbridge‚Äù context for the application of another pattern. <br><br>  <b>Define for your component:</b> what the concept of equality of entities in relation to the Bridge pattern means.  Is it necessary to compare only abstractions or only realizations of objects, or do we need to consider them as a whole? <br><br>  <b>The problem of the quality of the model:</b> is that often the development of the implementation of the template is carried out on the basis of one or two possible variations.  The danger is that with the subsequent development of the pattern, it turns out that some of the elements that were considered basic, in fact, are concrete variations based on abstraction and / or implementation.  This moment was somewhat messy in the article of the user <a href="https://habrahabr.ru/users/tac/" class="user_link">tac</a> <a href="http://habrahabr.ru/blogs/complete_code/138357/">link</a> .  But it is important to remember that templates do not determine the quality of the domain model, the depth and adequacy of the model essentially depends on the primary tasks of the application, the designer‚Äôs qualifications and the opinion of experts in the relevant field. <br>  Empirical (mechanical) criterion - if here and now (at the time of design) you <u>really need</u> (Functionality options + Implementation options)&gt; 6, i.e., the ratio of the level is 3: 3, 3: 4 and higher, then <br>  - break hierarchies <br>  - What is the ratio of code volume turned out to be 80%: 20%, 50%: 50%, 20% -80%? <br>  - think whether your original concept has broken up into independent entities? <br><br>  <b>The problem of the original metaphor:</b> construction metaphor + vague wording in the catalog leads to the fact that any horizontal arrow between two independent hierarchies is declared a "bridge".  Metaphor "multiplexer" better reflects the basic technique of implementation, and limiting the level of one component holds a clear logical border with other patterns. <br>  I hope the ‚Äúextra touches‚Äù outlined made it possible to more clearly show the essence of the template. <br><br>  <b>Bibliography</b> <br><br>  <b>E. Gamma, R. Helm, R. Johnson, D. Vlissides - Object-Oriented Design Techniques.</b>  <b>Design patterns.</b>  Catalog templates GoF. <br>  <b>J. Vlissides - Applying design patterns.</b>  <b>Additional touches.</b>  Here are the templates that are not included in the main directory Pull / Push, Multicast ... and just interesting sketches of creative torment "gangs". <br>  <b>A. Shalloway, J. Trott - Design Patterns.</b>  <b>A new approach to object-oriented analysis and design.</b>  Reasoning about the vagueness of the formulation of the "bridge" and the search for the context of application.  Also good reasoning is about combining / applying patterns. <br>  <b>S.Stelting, O. Maassen - Application of JAVA templates.</b>  Clear positioning of the ‚Äúbridge‚Äù as a component level template.  Introducing the telephone switch metaphor. </div><p>Source: <a href="https://habr.com/ru/post/138902/">https://habr.com/ru/post/138902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138892/index.html">Mobile-ID technology</a></li>
<li><a href="../138894/index.html">Apple Museum</a></li>
<li><a href="../138898/index.html">Free Siberian style</a></li>
<li><a href="../138899/index.html">Samsung Galaxy Beam - a new smartphone with a projector</a></li>
<li><a href="../138901/index.html">Billboard recognizes women</a></li>
<li><a href="../138903/index.html">Google is not satisfied with Google Music yet.</a></li>
<li><a href="../138905/index.html">MWC Premieres: Sony Xperia U and Sony Xperia P</a></li>
<li><a href="../138906/index.html">Extract meta information from C / C ++ code using (py) gccxml</a></li>
<li><a href="../138907/index.html">New kind of competition among mobile applications</a></li>
<li><a href="../138908/index.html">IconBIT Toucan W Review: Can this Android OS device be a substitute for a home computer?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
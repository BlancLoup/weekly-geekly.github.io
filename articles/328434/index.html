<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Explore RxJava 2 for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My name is Arkady, I'm an Android developer at Badoo. Recently in our blog there are a lot of posts about Go, PHP, JS, QA, and I decided to dilute the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Explore RxJava 2 for Android</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/web/28e/a5d/f9f/28ea5df9f14448869116883433fd8c12.jpg" alt="enter image description here"></p><br><p>  My name is Arkady, I'm an Android developer at Badoo.  Recently in our blog there are a lot of posts about Go, PHP, JS, QA, and I decided to dilute them with topics on mobile development.  Just engaged in porting an Android project from RxJava 1 to RxJava 2 and read everything you can find on this topic on the Internet.  In particular, the report of Jake Worton from the conference GOTO Copenhagen 2016. It seemed to me that this is a worthy candidate for translation - I think many Android developers are thinking about switching to RxJava 2, and they are interested in what has changed since the first version. </p><br><p>  Jake made a rather voluminous introduction to reactive programming, so knowledge of RxJava 1 is not required to understand the article.  The report was prepared when RxJava2 was still preparing for release (currently version 2.1.0 has already been released). </p><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/htIXKI5gOQU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="pochemu-reactive">  Why Reactive? </h3><br><p>  Why all around suddenly began to talk about reactive programming?  If you cannot make an application completely synchronous, then the presence of a single asynchronous resource completely breaks the traditional imperative programming style to which we are accustomed.  ‚ÄúBreaking‚Äù is not in the sense of ‚Äúeverything stops working‚Äù, but in the sense of ‚Äúleads to an increase in complexity‚Äù, and as a result you begin to lose all the advantages of imperative programming. </p><br><p>  To explain why I think this is a serious problem, I will give an example. </p><br><p>  Let's start with a simple class that can get a User object for us with some modifiers. </p><br><pre><code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age)</span></span></span></span>; } UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); System.out.println(um.getUser()); um.setName(<span class="hljs-string"><span class="hljs-string">"Jane Doe"</span></span>); System.out.println(um.getUser());</code> </pre> <br><p>  If we lived in a synchronous, single-threaded world, then this code would do exactly what is expected: creating an instance, outputting a user, changing some properties, outputting a user. </p><br><p>  The problem arises when we begin to resort to asynchrony.  Suppose we need to reflect changes in properties on the server side.  For this, the last two methods must be asynchronous.  How would we then change the code? </p><br><p>  One solution is to do nothing at all: you can assume that the asynchronous server update call will be successful, so you can make changes locally.  They will be reflected instantly.  As you know, this is not the best idea.  Networks are unpredictable, the server can return an error, and then you have to somehow roll back the local state. </p><br><p>  A simple solution is to use <code>Runnable</code> , which will be executed when the asynchronous call completes successfully.  This is a <strong>reactive</strong> behavior: we update the displayed data only when we are sure that the change request was successful. </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name, Runnable callback)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age, Runnable callback)</span></span></span></span>; } UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); System.out.println(um.getUser()); um.setName(<span class="hljs-string"><span class="hljs-string">"Jane Doe"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(um.getUser()); } });</code> </pre> <br><p>  However, we do not handle problems that may arise (for example, network problems).  So maybe it is worth creating a special <code>Listener</code> so that we can do something in case of an error? </p><br><pre> <code class="java hljs">UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); System.out.println(um.getUser()); um.setName(<span class="hljs-string"><span class="hljs-string">"Jane Doe"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager.Listener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">success</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(um.getUser()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">failure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOException e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO show the error... } });</span></span></code> </pre> <br><p>  We can inform the user about the problem.  We can automatically try again.  Such solutions work, and go in this direction when you need to combine asynchronous code with code running in a single thread (in the case of Android, this is a UI stream). </p><br><p>  The more you need to make asynchronous calls, the more problems arise.  For example, when a user fills out a form, he changes several properties.  Or you have a sequence of asynchronous calls, when the successful execution of one call must start another asynchronous call, which can also be successful or unsuccessful. </p><br><pre> <code class="java hljs">UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); System.out.println(um.getUser()); um. setName(‚ÄúJane Doe‚Äù, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager.Listener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">success</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(um.getUser()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">failure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOException e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO show the error‚Ä¶ } }); um.setAge(40, new UserManager.Listener() { @Override public void success() { System.out.println(um.getUser()); } @Override public void failure(IOException e) { // TODO show the error‚Ä¶ } });</span></span></code> </pre> <br><p>  Do not forget also that all this happens in the context of Android.  Therefore, many other factors need to be considered.  For example, we can try to transfer information directly to the UI in the <code>success</code> callback, but the problem is that the Android activity is ephemeral.  They can be destroyed at any time.  Let's say the user receives an incoming call - and your application is minimized by the system.  Or maybe the user clicked on <code>Home</code> or <code>Back</code> .  If the asynchronous call returns after destroying the UI, then you will have difficulty. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.user); TextView tv = (TextView) findViewById(R.id.user_name); tv.setText(um.getUser().toString()); um.setName(<span class="hljs-string"><span class="hljs-string">"Jane Doe"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager.Listener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">success</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ tv.setText(um.getUser().toString()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">failure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOException e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO show the error... } }); } }</span></span></code> </pre> <br><p>  There are imperative approaches to solving the problem.  We can check the status before calling UI methods. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.user); TextView tv = (TextView) findViewById(R.id.user_name); tv.setText(um.getUser().toString()); um.setName(‚ÄúJane Doe‚Äù, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager.Listener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">success</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isDestroyed()) { tv.setText(um.getUser().toString()); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">failure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOException e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO show the error‚Ä¶ } }); } }</span></span></code> </pre> <br><p>  In this example, we are creating an anonymous type that uniquely leads to a short-term memory leak, because it will keep a link to our <code>Activity</code> until the asynchronous call is completed. </p><br><p>  The problem also lies in the fact that we do not know in which threads these callbacks are called.  They may be called in a background thread, so you need to pass events to the main thread ( <code>main/UI thread</code> ). </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> UserManager um = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager(); <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.user); TextView tv = (TextView) findViewById(R.id.user_name); tv.setText(um.getUser().toString()); um.setName(<span class="hljs-string"><span class="hljs-string">"Jane Doe"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserManager.Listener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">success</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ runOnUiThread(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isDestroyed()) { tv.setText(um.getUser().toString()); } } }); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">failure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOException e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO show the error... } }); } }</span></span></code> </pre><br><p>  We have cluttered the <code>Activity</code> bunch of things that are not related to the main task solved by our code.  And all this is just to start working asynchronously and process asynchronous results.  We only implemented an asynchronous request call;  we do not block user input, do not handle button presses, and do not work with multiple fields. </p><br><p>  Even when your code solves only one simple task, and you start turning it into a real application, you immediately have problems, and you are left alone with the need to manage a bunch of states and checks in your <code>Activity</code> . </p><br><h3 id="reaktivnoe-myshlenie">  Reactive thinking </h3><br><p>  In a real application, everything works asynchronously.  We have a network to which we send requests and from which we receive answers over a long period of time.  We cannot block the main thread of execution, so work with the network should be performed in the background thread.  We cannot block the main thread when working with the file system, database, writing to the repository, or even <code>shared preferences</code> , so we have to perform these operations in the background threads. </p><br><p>  Users are also something like asynchronous data sources.  We give them information through the UI, and they respond to it by pressing buttons and entering data into the fields. </p><br><p><img src="https://habrastorage.org/web/dd1/7bf/d75/dd17bfd75fcb469a98d4a3d9669ae06a.png" alt="enter image description here"></p><br><p>  The user may return to the application at different times.  And the application must be ready to receive data, must be reactive, so that there is no state in which the main thread of execution is blocked;  so that there is no situation when a part of the data arrives asynchronously, but the application does not expect this and as a result does not take into account the data received or even drops.  Therein lies the difficulty: you must maintain all these states in your <code>Activity</code> / <code>Fragment</code> .  It is necessary to come to terms with the fact that numerous asynchronous sources generate and consume data, possibly at different speeds.  And this we still do not take into account the work of Android itself, which is an asynchronous platform.  We have push notifications, broadcast messages, and configuration changes.  Users can at any time rotate the device from portrait orientation to landscape and back, and if your code is not ready for this, the application will crash or behave incorrectly. </p><br><p>  <strong>As long as you cannot ensure the synchronization of the entire architecture of your application, the presence of a single asynchronous resource will break the traditional imperative programming style.</strong> </p><br><p>  It is difficult to find an application that does not use network requests, and they are inherently asynchronous.  You have a disk, a database - asynchronous sources.  The UI should also be considered solely as an asynchronous source.  So by default everything in Android functions asynchronously.  If you cling to traditional imperative programming and state management techniques, you will harm yourself. </p><br><p><img src="https://habrastorage.org/web/a52/9eb/87c/a529eb87c57c4f5990de2cb5cf74d812.png" alt="enter image description here"></p><br><p>  Instead of trying to coordinate all the asynchronous elements of the architecture, we can discard this responsibility by connecting them directly.  You can directly sign the UI to the database so that it responds to data changes.  You can change the database and network calls so that they respond to a button click, rather than trying to get a click and then send it. </p><br><p>  It would be great if the network response we received updated the data.  After all, when data is updated, the UI is automatically updated.  So we disclaim responsibility for this.  If Android does something asynchronously (for example, screen rotation or broadcast broadcasting), then it would be great if it would automatically affect the interface or automatically start some background task. </p><br><p><img src="https://habrastorage.org/web/2a5/0cf/c06/2a50cfc0683b43028ad1d1650dd4dd35.png" alt="enter image description here"></p><br><p>  In general, this approach allows us not to write a bunch of code needed to support states: instead of managing states, we simply connect the components together. </p><br><h3 id="rxjava">  Rxjava </h3><br><p>  Go to RxJava.  This reactive library became the most popular when developing for Android for the most part because it was the first full-fledged [reactive] tool for Java.  RxJava 2 retains support for the old version of Java, which is important for Android development. </p><br><p>  RxJava provides: </p><br><ul><li>  a set of classes for representing data sources; </li><li>  a set of classes for listening to data sources; </li><li>  a set of methods for converting and combining data (operators). </li></ul><br><h3 id="istochniki">  Sources </h3><br><p>  The data source does some work when you start or stop listening to it.  Submit a network request that will not be sent until you begin to wait for a response.  And if you unsubscribe from the data source before it is completed, then theoretically it can cancel the network request. </p><br><p>  The source can work both synchronously and asynchronously.  For example, a blocking network request running in a background thread, or something purely asynchronous, such as accessing Android and waiting onActivityResult.  A source can produce one element or several elements.  Network request will return one response.  But while your UI is working, the button click flow is potentially endless, even if you are subscribed to a single button. </p><br><p>  More sources may be empty.  This is the concept of a data source that does not contain any elements and whose work either succeeds or fails.  To make it clear: Imagine that you are writing data to a database or file.  They do not return items to you.  The recording is either successful or not.  In RxJava, sources model this approach of ‚Äúexecution or failure‚Äù using the so-called terminal events <code>onComplete()/ onError()</code> .  This is similar to the method that either returns the answer or throws an exception. </p><br><p>  Completion may not be.  For example, we simulate a button press as a data source, which works as long as the UI works.  And when the UI disappears, then you probably unsubscribe from this source of button presses, but it does not complete its work. </p><br><p>  All this corresponds to the <code>Observer</code> pattern.  We have something that can generate data;  there is an agreement on how this data should look.  And we want to watch them.  We want to add a listener and receive notifications when something happens. </p><br><h4 id="flowable-vs-observable">  Flowable vs.  Observable </h4><br><p>  In RxJava 2, sources are represented by two main types - Flowable and Observable.  They are arranged very similar.  Both generate zero to n elements.  Both may succeed or fail.  So why do we need two different types to represent the same data structure? </p><br><p>  It all comes down to such a thing as <a href="https://github.com/ReactiveX/RxJava/wiki/Backpressure">backpressure</a> .  Without going into details, I‚Äôll just say that backpressure slows down the data source.  Existing systems have limited resources.  And with the help of backpressure, we can tell everyone who sends us data to slow down, because we cannot process information at the speed with which it arrives to us. </p><br><p>  RxJava 1 had backpressure support, but it was added rather late in the API development process.  In RxJava 1, every type in the system has a backpressure mechanism.  And although the concept of backpressure is supported by all types, far from all sources implement it, so using this mechanism can lead to a crash of the application.  The use of backpressure must be designed and accounted for in advance.  That is why in RxJava 2 two different types of sources.  Therefore, you can now specify using the source type whether backpressure support should be provided. </p><br><p>  Suppose we have a data source - touch screen events.  We can't slow it down.  You can‚Äôt tell the user: ‚ÄúDraw a half of the symbol, stop and wait for me to process and then draw the rest.‚Äù  We can slow down the data entry otherwise, for example, by disabling the buttons or displaying another UI, but the source itself cannot be slowed down. </p><br><p>  Take another example: we have a database containing a large set of rows from which we need to extract several at a time.  A DB can very effectively solve this problem thanks to a tool such as <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2583%25D1%2580%25D1%2581%25D0%25BE%25D1%2580_%2528%25D0%25B1%25D0%25B0%25D0%25B7%25D1%258B_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585%2529">cursors</a> .  But for the flow of touch events this is impossible to implement, because it is impossible to slow down the user's finger. </p><br><p>  In RxJava 1, both of the above types are implemented as Observable, so it may happen that you try to use backpressure in runtime, and as a result you get the exception <code>MissingBackpressureException</code> .  This was the reason why in RxJava 2 sources are presented in the form of different types: one supports backpressure, the second - no.  Both types of <code>Observable</code> and <code>Flowable</code> behave similarly in terms of data transfer to callbacks.  There are two corresponding interfaces for this: </p><br><p>  <code>Observer</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Disposable d)</span></span></span></span>; }</code> </pre> <br><p>  And <code>Subscriber</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscription s)</span></span></span></span>; }</code> </pre> <br><p>  The first method is called <code>onNext</code> , elements will be delivered here.  This method is called whenever an <code>Observable</code> or <code>Flowable</code> generates an element, allowing it to be processed arbitrarily.  This can happen endlessly.  If you listen to a button press, the <code>onNext</code> method will be called up with each press.  For finite sources, there are two terminal events: </p><br><ul><li>  <code>onComplete</code> - means successful completion; </li><li>  <code>onError</code> - means that either the execution of onNext resulted in an exception, or there was a problem on the source side. </li></ul><br><p>  <code>onComplete</code> and <code>onError</code> are terminal events, that is, you will not receive any events from the source after receiving one of them. <br>  The difference between the <code>Observer</code> and <code>Subscriber</code> interfaces lies in the latter method - <code>onSubscribe</code> .  This is a new method compared to RxJava 1. When you subscribe to <code>Observable</code> or <code>Flowable</code> , you create a resource, and resources often need to be cleared after you finish working with them.  The <code>onSubscribe</code> is called as soon as you start listening to Observable or Flowable, and it will give you an object of one of two types: <code>Disposable</code> . </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Disposable d)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Disposable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br><p>  Or <code>Subscription</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscription s)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscription</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cancel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; }</code> </pre> <br><p>  For <code>Observable</code> the <code>Disposable</code> type allows you to call the dispose method, meaning "I‚Äôve finished working with this resource, I don‚Äôt need data anymore."  If you have a network request, it can be canceled.  If you listened to an endless stream of button presses, this will mean that you no longer want to receive these events, in which case you can delete <code>OnClickListener</code> from <code>View</code> . </p><br><p>  All this is true for the <code>Subscription</code> interface.  Although it is called differently, it is used in the same way: it has a <code>cancel()</code> method, similar to <code>dispose()</code> .  It differs only in the presence of the second method <code>request(long r)</code> , through which the <code>backpressure</code> is manifested in the API.  Using this method, we are telling <code>Flowable</code> that we need more elements. </p><br><table><thead><tr><th></th><th>  <strong>With backpressure support</strong> </th><th>  <strong>Without backpressure support</strong> </th></tr></thead><tbody><tr><td>  0 ‚Äì n elements, <code>complete | error</code> <code>complete | error</code> </td><td>  Flowable </td><td>  Observable </td></tr></tbody></table><br><p>  So the only difference between these two types is that one supports backpressure and the other does not. </p><br><h3 id="reaktivnye-potoki">  Reactive Streams </h3><br><p>  I want to touch on the question of why the types of <code>Disposable</code> and <code>Subscription</code> have different names, like their methods - <code>dispose()</code> and <code>cancel()</code> .  Why it was impossible to simply expand one by another by adding the <code>request()</code> method?  It's all about the specification of reactive flows.  It is the result of the initiative of a number of companies that came together and decided to develop a standard set of interfaces for reactive Java libraries.  The specification includes four interfaces. </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscriber&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&gt; s)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscription s)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscription</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cancel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Processor</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">&gt; </span></span>{ }</code> </pre> <br><p>  In the presented code, you see the <code>Subscriber</code> and <code>Subscription</code> types.  They are part of the specification, and that is why these names were used in RxJava 2. Since they are part of the standard, we can‚Äôt do anything about it.  But this situation has a good side.  Suppose you need to use two different libraries for threads.  If their authors have implemented the above standard, then you can switch between them without serious consequences. </p><br><table><thead><tr><th></th><th>  <strong>Reactive Streams (With backpressure support)</strong> </th><th>  <strong>Without backpressure support</strong> </th></tr></thead><tbody><tr><td>  0 ... n elements, <code>complete | error</code> <code>complete | error</code> </td><td>  Flowable </td><td>  Observable </td></tr></tbody></table><br><p>  The Flowable type implements the specification of reactive flows, which implies backpressure support. </p><br><p>  Let's return to our <code>UserManager</code> .  We used to extract users from this class, displaying them when we thought it appropriate.  Now we can use Observable: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Observable&lt;User&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age)</span></span></span></span>; }</code> </pre> <br><p>  <code>Observable&lt;User&gt;</code> is the source of User objects.  It generates an element with every change, and we can respond to it by displaying data on the screen.  Now you should not try to determine the most appropriate time for this based on other events occurring in the system. </p><br><h3 id="specializirovannye-istochniki">  Specialized sources </h3><br><p>  RxJava 2 has three specialized sources, which are a subset of <code>Observable</code> .  The first is called <code>Single</code> .  It either contains one element, or gives an error, so this is not so much a sequence of elements as a potentially asynchronous source of a single element.  It does not support backpressure.  You can imagine it as a normal method.  You call the method and get the return value;  either method throws an exception.  This scheme is implemented by <code>Single</code> .  You subscribe to it and get either an item or an error.    <code>Single</code>  . </p><br><p>    <code>Completable</code> .    void-.        - ,   .      ,   ,     ,   . </p><br><p>   ‚Äî <code>Maybe</code> .       RxJava 1.     ,   ,     ‚Äî   Optional.      backpressure. </p><br><p>  RxJava 2  ,  <code>Single/ Completable/ Maybe</code> ,    <code>backpressure</code> (  Reactive Streams Specification). </p><br><table><thead><tr><th></th><th> <strong>  (  backpressure)</strong> </th><th> <strong>  backpressure</strong> </th></tr></thead><tbody><tr><td> 0‚Ä¶n , <code>complete | error</code> </td><td> Flowable </td><td> Observable </td></tr><tr><td> <code>item | complete | error</code> </td> <td></td><td> Maybe </td></tr><tr><td> <code>item | error</code> </td> <td></td><td> Single </td></tr><tr><td> <code>complete | error</code> </td> <td></td><td> Completable </td></tr></tbody></table><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Observable&lt;User&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age)</span></span></span></span>; }</code> </pre> <br><p>   <code>setName</code>  <code>setAge</code> ,      ,   ,    .      <code>Completable</code> . </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserManager</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Observable&lt;User&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Completable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Completable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> age)</span></span></span></span>; }</code> </pre> <br><h3 id="sozdanie-istochnikov">   </h3><br><p>    ,        ,    ,   .      ,       . </p><br><pre> <code class="java hljs">Flowable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Flowable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"World"</span></span>); Observable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Observable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"World"</span></span>); Maybe.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Single.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>);</code> </pre> <br><p>        <code>Iterable</code> . </p><br><pre> <code class="java hljs">String[] array = { ‚ÄúHello‚Äù, ‚ÄúWorld‚Äù }; List&lt;String&gt; list = Arrays.asList(array); Flowable.fromArray(array); Flowable.fromIterable(list); Observable.fromArray(array); Observable.fromIterable(list);</code> </pre> <br><p>     , ,   ,         ,     ( ,   ). </p><br><p>   <code>fromCallable</code> . </p><br><pre> <code class="java hljs">Observable.fromCallable(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Callable&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getName(); } });</code> </pre> <br><p>        ,     . fromCallable   Java- <code>Callable</code> ,   ,     . , HTTP-    -. </p><br><pre> <code class="java hljs">OkHttpClient client = <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ Request request = // ‚Ä¶ Observable.fromCallable(new Callable&lt;String&gt;() { @Override public String call() throws Exception{ return client.newCall(request).execute(); } });</span></span></code> </pre> <br><p>  Observable (   )  ,     ,      <code>onError</code> .      ,      <code>onNext</code> . </p><br><p> <code>fromCallable</code>     : </p><br><pre> <code class="java hljs">Flowable.fromCallable(() -&gt; <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Observable.fromCallable(() -&gt; <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Maybe.fromCallable(() -&gt; <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Single.fromCallable(() -&gt; <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Completable.fromCallable(() -&gt; <span class="hljs-string"><span class="hljs-string">"Ignored!"</span></span>);</code> </pre> <br><p>       .       ,  . </p><br><p>  <code>Maybe</code>  <code>Completable</code>      .    ,   , ‚Äì    ,   . </p><br><pre> <code class="java hljs">Maybe.fromAction(()-&gt; System.out.println(‚ÄúHello‚Äù)); Maybe.fromRunnable(()-&gt; System.out.println(‚ÄúHello‚Äù)); Completable.fromAction(()-&gt; System.out.println(‚ÄúHello‚Äù)); Completable.fromRunnable(()-&gt; System.out.println(‚ÄúHello‚Äù));</code> </pre> <br><p> ,  ,    Observable   <code>create</code> . </p><br><pre> <code class="java hljs">Observable.create(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObservableOnSubscribe&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ObservableEmitter&lt;String&gt; e)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ e.onNext(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); e.onComplete(); } });</code> </pre> <br><p>     RxJava 1,     ‚Äì     ,       RxJava 1.      RxJava 2,   create ‚Äì     ,        .   ,   subscribe,       .     <code>ObservableEmitter</code> ,   .        <code>ObservableEmitter</code> .       ,      . </p><br><p>   . </p><br><pre> <code class="java hljs">Observable.create(e -&gt; { e.onNext(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); e.onComplete(); });</code> </pre> <br><p>       . </p><br><pre> <code class="java hljs">Observable.create(e -&gt; { e.onNext(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); e.onNext(<span class="hljs-string"><span class="hljs-string">"World"</span></span>); e.onComplete(); });</code> </pre> <br><p>  <code>onNext</code>  . </p><br><p>    ‚Äî      .  ,     HTTP-,    <code>onNext</code>   HTTP-. </p><br><pre> <code class="java hljs">OkHttpClient client = <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ Request request = // ‚Ä¶ Observable.create(e -&gt; { Call call = client.newCall(request); call.enqueue(new Callback() { @Override public void onResponse(Response r) throws IOException { e.onNext(r.body().string()); e.onComplete(); } @Override public void onFailure(IOException e) { e.onError(e); } }); });</span></span></code> </pre> <br><p> ,  <code>Observable</code>    <code>reate</code> ,   ,    .  -   HTTP-,       .     HTTP-   . </p><br><pre> <code class="java hljs">Observable.create(e -&gt; { Call call = client.newCall(request); e.setCancelation(() -&gt; call.cancel()); call.enqueue(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Callback() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResponse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Response r)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ e.onNext(r.body().string()); e.onComplete(); }A <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFailure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOException e)</span></span></span><span class="hljs-function"> </span></span>{ e.onError(e); } }); });</code> </pre> <br><p>  Android    . ,   <code>Observable</code> ,      ,       <code>Listener</code> ,    . </p><br><pre> <code class="java hljs">View view = <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ Observable.create(e -&gt; { e.setCancellation(() -&gt; view.setOnClickListener(null)); view.setOnClickListener(v -&gt; e.onNext(v)); });</span></span></code> </pre> <br><p>     <code>create</code>     : </p><br><pre> <code class="java hljs">Flowable.create(e -&gt; { ‚Ä¶ }); Observable.create(e -&gt; { ‚Ä¶ }); Maybe.create(e -&gt; { ‚Ä¶ }); Single.create(e -&gt; { ‚Ä¶ }); Completable.create(e -&gt; { ‚Ä¶ });</code> </pre> <br><h3 id="nablyudenie-za-istochnikami">    </h3><br><p>    <code>onSubscribe</code>   <code>Observer</code> / <code>Subscriber</code> . </p><br><p> <code>Observer</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Observer</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Disposable d)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Disposable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br><p> <code>Subscriber</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscription s)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscription</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cancel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> r)</span></span></span></span>; }</code> </pre> <br><p>   ,     <code>Observer/ Subscriber</code> ,       subscribe.       -   <code>onSubscribe</code> ‚Äì    -    <code>Disposable</code> / <code>Subscription</code>   . </p><br><pre> <code class="java hljs">Observable&lt;String&gt; o = Observable.just(‚ÄúHello‚Äù); o.subscribe(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Observer&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sring s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Disposable d)</span></span></span><span class="hljs-function"> </span></span>{ ??? } });</code> </pre> <br><p>      <code>DisposableObserver</code> ,      ,            <code>Observable</code> . </p><br><pre> <code class="java hljs">Observable&lt;String&gt; o = Observable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); o.subscribe(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableObserver&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } });</code> </pre> <br><p>    ?       . <br>   ‚Äì    <code>DisposableObserver</code>  <code>Observer</code> .   <code>Disposable</code> ,     dispose,       . </p><br><pre> <code class="java hljs">Observable&lt;String&gt; o = Observable.just(‚ÄúHello‚Äù); DisposableObserver observer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableObserver&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sring s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } } o.subscribe(observer); observer.dispose();</code> </pre> <br><p>  RxJava 2     <code>subscribeWith</code> ,    <code>subscribe</code>  RxJava 1.   <code>Disposable</code> . </p><br><pre> <code class="java hljs">Observable&lt;String&gt; o = Observable.just(‚ÄúHello‚Äù); Disposable d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> o.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableObserver&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } }); d.dispose();</code> </pre> <br><p>       RxJava    <code>Disposable</code> :      ,   <code>Disposable</code> ,    <code>CompositeDisposable</code>      . </p><br><pre> <code class="java hljs">Observable&lt;String&gt; o = Observable.just(‚ÄúHello‚Äù); CompositeDisposable disposables = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CompositeDisposable(); disposables.add(o.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableObserver&lt;String&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sring s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } })); disposables.dispose();</code> </pre> <br><p>  Android      ,     <code>CompositeDisposable</code>  <code>Activity</code>  ,     <code>onDestroy</code> (  -). </p><br><p>  <code>subscribeWith</code>        backpressure. </p><br><pre> <code class="java hljs">Observable&lt;String&gt; o = Observable.just(‚ÄúHello‚Äù); Disposable d2 = o.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableObserver&lt;String&gt;() { ‚Ä¶ }); Maybe&lt;String&gt; m = Maybe.just(‚ÄúHello‚Äù); Disposable d3 = m.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableMaybeObserver&lt;String&gt;() { ‚Ä¶ }); Single&lt;String&gt; s = String.just(‚ÄúHello‚Äù); Disposable d4 = s.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableSingleObserver&lt;String&gt;() { ‚Ä¶ }); Completable c = Completable.completed(); Disposable d5 = c.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Disposable Completable Observer&lt;String&gt;() { ‚Ä¶ });</code> </pre> <br><p>  <code>Flowable</code>    <code>subscribeWith</code> ,    ,  <code>Flowable</code>   <code>onSubscribe Subscription</code> ,   <code>Disposable</code> . </p><br><pre> <code class="java hljs">Flowable&lt;String&gt; f = Flowable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Disposable d1 = f.subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableSubscriber&lt;String&gt;() { ‚Ä¶ });</code> </pre> <br><p>          <code>Disposable</code> ,  <code>Flowable</code>    . </p><br><p>     , ,   .    ,    -   .    ,      .   <code>Disposable</code>    Observable,   . </p><br><h3 id="operatory">  Operators </h3><br><p>     : </p><br><ul><li>     ; </li><li>   ; </li><li>   . </li></ul><br><p>   . <br>   ,          ,      . ,     <code>toUppercase()</code>      . </p><br><pre> <code class="java hljs">String greeting = ‚ÄúHello‚Äù; String yelling = greeting.toUppercase();</code> </pre> <br><p>      <code>Observable</code>       . </p><br><pre> <code class="java hljs">Observable&lt;String&gt; greeting = Observable.just(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); Observable&lt;String&gt; yelling = greeting.map(s -&gt; s.toUppercase());</code> </pre> <br><p>      <code>map</code> .          - ,     . </p><br><p>    <code>User</code> :   ,      ,          .   ,       ,     . </p><br><pre> <code class="java hljs">Observable&lt;User&gt; user = um.getUser(); Observable&lt;User&gt; mainThreadUser = user.observeOn(AndroidSchedulers.mainThread());</code> </pre> <br><p>  : ¬´        <code>Observable</code> ¬ª.          . </p><br><p>    observeOn    ,     <code>Observable</code> . </p><br><pre> <code class="java hljs">OkHttpClient client = <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ Request request = // ‚Ä¶ Observable&lt;Response&gt; response = Observable.fromCallable(() -&gt; { return client.newCall(request).execute(); }); Observable&lt;Response&gt; backgroundResponse = response.subscribeOn(Schedulers.io());</span></span></code> </pre> <br><p>   .    ,    ,       .   ,    (   ),       .    ,  <code>Schedulers.io()</code> ‚Äî    .      ,       .  <code>subscribeOn</code> ‚Äî  ,     . </p><br><p> ,       <code>Observable</code> .   ,         .        ‚Äì      .        .         .     .    .   . </p><br><pre> <code class="java hljs">OkHttpClient client = <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ Request request = // ‚Ä¶ Observable&lt;Response&gt; response = Observable.fromCallable(() -&gt; { return client.newCall(request).execute(); }) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .map(response -&gt; response.body().string()); // NetworkOnMainThread!</span></span></code> </pre> <br><p>    map   <code>observeOn</code> ,        Android.      HTTP-    ‚Äì      ,     . </p><br><pre> <code class="java hljs">OkHttpClient client = <span class="hljs-comment"><span class="hljs-comment">// ‚Ä¶ Request request = // ‚Ä¶ Observable&lt;Response&gt; response = Observable.fromCallable(() -&gt; { return client.newCall(request).execute(); }) .subscribeOn(Schedulers.io()) .map(response -&gt; response.body().string()); // Ok! .observeOn(AndroidSchedulers.mainThread())</span></span></code> </pre> <br><h4 id="specializaciya-operatorov">   </h4><br><p>  RxJava  ,   <code>Observable</code>    . ,  <code>first()</code> ,         .  RxJava 1   <code>Observable</code> ,    .   :       ,      <code>get(0)</code> ,    ,        ,    , ‚Äì   .  RxJava 2  :   <code>first()</code> ,    ,   <code>Single</code> . </p><br><p><img src="https://habrastorage.org/web/2cc/970/204/2cc9702045a346cba7ec91036a86cd77.png" alt="enter image description here"></p><br><p>  <code>Observable</code>  ,     ,   <code>Single</code>   ,   . </p><br><p><img src="https://habrastorage.org/web/0bb/da8/6ff/0bbda86ffe1d4e928dc6b55fbc39575b.png" alt="enter image description here"></p><br><p>    <code>firstElement()</code> ,   <code>Maybe</code> .  <code>Observable</code>     <code>Maybe</code>  . </p><br><p><img src="https://habrastorage.org/web/ca9/80c/c3e/ca980cc3edec446f9fac0b47b90304b3.png" alt="enter image description here"></p><br><p>  ,  <code>Completable</code> .       ,       ,     <code>ignoreElements</code> . </p><br><p><img src="https://habrastorage.org/web/28a/3e0/45e/28a3e045e9454898a706c4cbc29b8b1d.png" alt="enter image description here"></p><br><p>      <code>Flowable</code> :      ,       . </p><br><p>      . </p><br><p><img src="https://habrastorage.org/web/ca8/c58/322/ca8c583221b14dcd801184b962dda7fd.png" alt="enter image description here"></p><br><p>        ¬´¬ª . ,        ,       ,    ¬´¬ª   <code>Single</code> .        ¬´¬ª . ,    <code>Single</code>     <code>Observable</code> . </p><br><h3 id="reaktivnyy-podhod">   </h3><br><p>          ,     User  : ¬´      ,       UI    ¬ª.         User',       ,         . </p><br><pre> <code class="java hljs">um.getUser() .observeOn(AndroidSchedulers.mainThread()) .subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableObserver&lt;User&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(User user)</span></span></span><span class="hljs-function"> </span></span>{ tv.setText(user.toString()); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* ignored */</span></span> } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* crash or show */</span></span> } }));</code> </pre> <br><p>   ,   -    Disposable.    Android,         <code>Activity</code> .  <code>onDestroy</code>    <code>Disposables</code> . </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// onCreate disposables.add(um.getUser() .observeOn(AndroidSchedulers.mainThread()) .subscribeWith(new DisposableObserver&lt;User&gt;() { @Override public void onNext(User user) { tv.setText(user.toString()); } @Override public void onComplete() { /* ignored */ } @Override public void onError(Throwable t) { /* crash or show */ } })); // onDestroy disposables.dispose();</span></span></code> </pre> <br><p> ,        ,  ,       .         ‚Äì        .              . </p><br><pre> <code class="java hljs">disposables.add(um.setName(<span class="hljs-string"><span class="hljs-string">"Jane Doe"</span></span>) .subscribeOn(Schedulers.io()) .observeOn(AndroidSchedulers.mainThread()) .subscribeWith(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DisposableCompletableObserver() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// success! re-enable editing } @Override public void onError(Throwable t) { // retry or show } }));</span></span></code> </pre> <br><p> :          .     <code>Disposable</code> .       <code>Disposable</code> . </p><br><p>   RxJava 2    ,        Android:     .      ,        <code>Observable</code> ,   .   map,    <code>Observable</code> ,   ,      . </p><br><p>         .  RxJava 2   .        ,     .   ,     ,    ‚Äì    API. </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  RxJava 2   :     ‚Äî   ,  Android,  ,  UI ‚Äî    ,       ,          . </p><br><p>    RxJava 1,    <a href="http://github.com/akarnokd/RxJava2Interop"> ,</a>   .           RxJava 2. </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RxJavaInterop</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Flowable&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV2Flowable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rx.Observable&lt;T&gt; o)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Observable&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV2Observable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rx.Observable&lt;T&gt; o)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Maybe&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV2Maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rx.Single&lt;T&gt; s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Maybe&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV2Maybe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rx.Completable c)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Single&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV2Single</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rx.Single&lt;T&gt; s)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Completable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV2Completable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rx.Completable c)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; rx.<span class="hljs-function"><span class="hljs-function">Observable&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV1Observable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Publisher&lt;T&gt; p)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; rx.<span class="hljs-function"><span class="hljs-function">Observable&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV1Observable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Observable&lt;T&gt; o, ‚Ä¶)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; rx.<span class="hljs-function"><span class="hljs-function">Single&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV1Single</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Single&lt;T&gt; o)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; rx.<span class="hljs-function"><span class="hljs-function">Single&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV1Single</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Maybe&lt;T&gt; m)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> rx.<span class="hljs-function"><span class="hljs-function">Completable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV1Completable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Completable c)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> rx.<span class="hljs-function"><span class="hljs-function">Completable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toV1Completable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Maybe&lt;T&gt; m)</span></span></span><span class="hljs-function"> </span></span>{ ‚Ä¶ } }</code> </pre> <br><p>       ‚Äî .   ,       .   ,     - . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/328434/">https://habr.com/ru/post/328434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328424/index.html">Deep Learning against cancer. Intel Contest</a></li>
<li><a href="../328426/index.html">How to become a web developer in 2017 - an action plan</a></li>
<li><a href="../328428/index.html">Welcome to MOSDROID May Meetup May 20</a></li>
<li><a href="../328430/index.html">New tools for organizing effective teamwork</a></li>
<li><a href="../328432/index.html">How we published an iOS video chat app on the App Store</a></li>
<li><a href="../328436/index.html">Bash scripts, part 11: expect and automate interactive utilities</a></li>
<li><a href="../328440/index.html">Do I need to experiment in the development process?</a></li>
<li><a href="../328442/index.html">"The most serious opportunity I, of course, consider a multimaster," - Ivan Frolkov on the development of Postgres Pro EE</a></li>
<li><a href="../328444/index.html">ONTAP 9.2: new functionality</a></li>
<li><a href="../328446/index.html">Cellular communication even in the taiga: three generations of mobile base stations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
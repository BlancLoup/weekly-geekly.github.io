<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandeks.Probki: get the area covered with traffic jams + alternative cork gadget</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, Yandex began to give data on traffic jams for a large number of other regions, except for Moscow, St. Petersburg, Kiev and Yekaterinb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandeks.Probki: get the area covered with traffic jams + alternative cork gadget</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fce/37b/f79/fce37bf79cea05638a1fbfd10d90a9e0.png" align="left">  Not so long ago, Yandex began to give data on traffic jams for a large number of other regions, except for Moscow, St. Petersburg, Kiev and Yekaterinburg.  <a href="http://habrahabr.ru/blogs/webdev/86857/">How to place a layer with traffic jams on my map</a> I wrote earlier.  Today we will understand how you can get a list of regions in which traffic jams are processed. <br><br>  Yandex.Prob, along with <a href="">trf.maps.yandex.net/trf/stat.js</a> , also has <a href="">trf.maps.yandex.net/trf/coverage.js</a> .  This script tells us which regions are covered with traffic data (or at least this information is supported). <br><br><a name="habracut"></a><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">YMaps.TrafficLoader.onLoad( <br> <font color="#A31515">"coverage"</font> , <br> { <br> regions: ( <font color="#0000ff">function</font> (){ <br> <font color="#0000ff">function</font> p(x,y){ <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> YMaps.GeoPoint(x,y); <br> } <br> <font color="#0000ff">function</font> b(l,b,r,t){ <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> YMaps.GeoBounds(p(l,b),p(r,t)); <br> } <br> <font color="#0000ff">return</font> [ <br> { <br> name: <font color="#A31515">"   "</font> , <br> regionId: <font color="#A31515">"1"</font> , <br> view:{ <br> point:p(37.620070,55.753630), <br> boundedBy:b(36.61977492,55.3105725984,38.35467432,56.4313303008) <br> }, <br> boundedBy:b(35.14318524,54.2560801359,40.20433848,56.9613240948) <br> } <br> ]; <br> })() <br> } <br> );</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you do all the transformations that are performed, the following object is obtained at the input: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">return</font> { <br> regions: [ <br> { <br> name: <font color="#A31515">"   "</font> , <br> regionId: <font color="#A31515">"1"</font> , <br> view:{ <br> point: YMaps.GeoPoint(37.620070,55.753630), <br> boundedBy: YMaps.GeoBounds(36.61977492,55.3105725984,38.35467432,56.4313303008) <br> }, <br> boundedBy: YMaps.GeoBounds(35.14318524,54.2560801359,40.20433848,56.9613240948) <br> } <br> ]; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  YMaps.TrafficLoader is used again.  The data comes in the form of an object with a regions field that contains an array of objects.  Each object has the same set of fields: <br><ul><li>  name - the name of the region or city; </li><li>  regionId - some kind of ID.  it is also present in the output of stat.js; </li><li>  view: viewport, view.point - an object of type <a href="">YMaps.GeoPoint</a> ‚Äî the center of the area, conveniently used with <a href="">YMaps.Map.setCenter (geoPoint)</a> to go to the desired area, view.boundedBy ‚Äî <a href="">YMaps.GeoBounds</a> ‚Äî a rectangle bounding the coverage area; </li><li>  boundedBy is similar to view.boundedBy. </li></ul><br>  According to the results of "research", I made Windows Sidebar Widgets with traffic jams in any city that is now supported by Yandex.  Not as cool as the original, but it allows you to view the map directly in the widget without opening the site itself. <br>  <a href="http://widgets.elifantiev.ru/widgets/roadcams/winGadget/traffic.gadget">Download the widget for Windows Sidebar "Other Yandex.Probki"</a> </div><p>Source: <a href="https://habr.com/ru/post/87294/">https://habr.com/ru/post/87294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87287/index.html">Build and configure Transmission in Debian or anything you wanted to know about Transmission but were afraid to ask</a></li>
<li><a href="../87289/index.html">About RSS Habra and usability ...</a></li>
<li><a href="../87290/index.html">Smallest ThinkPad</a></li>
<li><a href="../87291/index.html">Cloudconf-2010 is getting closer, everything is more interesting!</a></li>
<li><a href="../87293/index.html">New Blogger Blogging Template Designer</a></li>
<li><a href="../87300/index.html">Quartz Composer: music cube</a></li>
<li><a href="../87301/index.html">Apple Store prepares for pre-order iPad</a></li>
<li><a href="../87303/index.html">Harmony</a></li>
<li><a href="../87304/index.html">Automatic compilation of computer name and issue it via DHCP</a></li>
<li><a href="../87308/index.html">CoolerMaster NotePal X2 Notebook Cooling Pad Review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
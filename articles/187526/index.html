<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing your Orm for Android with Canas and Senorites, Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Some community interest in my first article made me work hard on orm . I still don't like everything in it (somewhere the code is not o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing your Orm for Android with Canas and Senorites, Part 2</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Some community interest in my first article made me work hard on <b>orm</b> .  I still don't like everything in it (somewhere the code is not optimized; somewhere the implementation is not the same as I wanted; there are not enough checks and perhaps stability), but it performs all the functions I need at the current moment.  And so, meet: <a href="https://github.com/UCASoft/UcaOrm">UcaOrm</a> ! <br><br><a name="habracut"></a><h4>  Using </h4><br>  <b>We</b> will consider working with <b>orm</b> on the example of the following model (more on the model in <a href="http://habrahabr.ru/post/186078/">the 1st part</a> ): <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseEntity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrmEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(primaryKey = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, inherited = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Long id; } <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(name = <span class="hljs-string"><span class="hljs-string">"car_type"</span></span>, cashedList = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CarType</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String code; } <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(rightJoinTo = {Truck.class}) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"car_type"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CarType type; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;Wheel&gt; wheels; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"engine_power"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> enginePower; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"doors_count"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> doorsCount; } <span class="hljs-meta"><span class="hljs-meta">@Table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wheel</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"car_id"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Car car; <span class="hljs-meta"><span class="hljs-meta">@Column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String manufacturer; } <span class="hljs-meta"><span class="hljs-meta">@Table</span></span>(leftJoinTo = Car.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Truck</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Column</span></span>(name = <span class="hljs-string"><span class="hljs-string">"is_tipper"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isTipper; }</code> </pre> <br><h5>  Customization </h5><br>  After adding the library to the project (in the future I plan to upload the compiled <b>jar</b> , but for now you can build it yourself from the sources), you need to create a <b>Helper</b> inherited from <b>OrmHelper</b> : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DataBaseHelper</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrmHelper</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DataBaseHelper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Context context, String name, SQLiteDatabase.CursorFactory factory, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> version)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(context, name, factory, version); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onUpgrade</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> oldVersion, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newVersion)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefaultValues</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class&lt;? extends OrmEntity&gt; entityClass, ArrayList&lt;String&gt; columns, ArrayList&lt;ContentValues&gt; valueList)</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre><br><br>  The <b>getDefaultValues</b> method allows adding initial data to created tables.  Its implementation is not yet very convenient, and in the future it will undergo processing. <br>  Now we need to register a <b>helper</b> .  This is done through the heir <b>Application</b> : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyApp</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { OrmFactory.SetHelper(DataBaseHelper.class, getApplicationContext()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); } } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTerminate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ OrmFactory.ReleaseHelper(); <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onTerminate(); } }</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By default, the base name is formed from the <b>Label</b> application, and the version will be 1st.  To change this, add the following lines to <b>manifest</b> : <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UO_DB_NAME"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Cars"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UO_DB_VERSION"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><h5>  Creating tables </h5><br>  The tables are created in the <b>onCreate</b> method, and the update in the <b>onUpdate</b> method, but the update is not yet supported in <b>orm</b> . <br>  And so, create the necessary tables: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { OrmUtils.CreateTable(CarType.class); OrmUtils.CreateTable(Car.class); OrmUtils.CreateTable(Wheel.class); OrmUtils.CreateTable(Truck.class); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); } }</code> </pre><br>  And fill in the <b>CarType</b> table <b>with the</b> initial data: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefaultValues</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class&lt;? extends OrmEntity&gt; entityClass, ArrayList&lt;String&gt; columns, ArrayList&lt;ContentValues&gt; valueList)</span></span></span><span class="hljs-function"> </span></span>{ ContentValues values; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entityClass.equals(CarType.class)) { values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContentValues(); values.put(columns.get(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">"Passenger"</span></span>); valueList.add(values); values = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContentValues(); values.put(columns.get(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">"Truck"</span></span>); valueList.add(values); } }</code> </pre><br>  As already said, the implementation of <b>getDefaultValues ‚Äã‚Äãis</b> lame. <br><br><h5>  Simple sampling </h5><br>  Since we have already filled the <b>CarType</b> table <b>with</b> data, I suggest first to consider a simple sample, and then creating instances and a sample from <b>Where</b> . <br>  Let's create a copy of the type " <i>passenger car</i> ".  To do this we first need to get all the types available to us.  Since all entities that <b>orm</b> works <b>with</b> must inherit from <b>OrmEntity</b> , we will use its static <b>getAllEntities</b> methods.  For beauty, we can block it in the class <b>CarType</b> : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;CarType&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllCarTypes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> OrmEntity.getAllEntities(CarType.class); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br><h5>  Entity creation </h5><br>  Create an instance of Car: <br><pre> <code class="java hljs"> Car car = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Car(); car.setType(CarType. getAllCarTypes().get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); car.setEnginePower(<span class="hljs-number"><span class="hljs-number">116</span></span>); car.setDoorsCount(<span class="hljs-number"><span class="hljs-number">4</span></span>); Wheel whell = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Whell(); whell.setCar(car); whell.setManufacturer(<span class="hljs-string"><span class="hljs-string">"Michrelli"</span></span>); car.addWheel(whell);</code> </pre><br>  Of course, <b>whell.setCar is</b> better to pull inside <b>addWheel</b> like <b>whell.setCar (this)</b> , but I‚Äôll give it here for clarity. <br>  And just pull the <b>alter</b> method: <br><pre> <code class="java hljs"> car.alter();</code> </pre><br>  Change the instance a bit: <br><pre> <code class="java hljs"> car.setEnginePower(<span class="hljs-number"><span class="hljs-number">120</span></span>); car.getWheels().get(<span class="hljs-number"><span class="hljs-number">0</span></span>).setManufacturer(<span class="hljs-string"><span class="hljs-string">"Pirlin"</span></span>);</code> </pre><br><br>  And just call again, <b>alter</b> : <br><pre> <code class="java hljs"> car.alter();</code> </pre><br>  Now create a " <i>truck</i> ": <br><br><pre> <code class="java hljs"> Truck truck = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Truck(); truck.setType(CarType.getAllCarTypes().get(<span class="hljs-number"><span class="hljs-number">1</span></span>)); truck.setEnginePower(<span class="hljs-number"><span class="hljs-number">220</span></span>); truck.setDoorsCount(<span class="hljs-number"><span class="hljs-number">2</span></span>); Wheel whell = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Whell(); whell.setCar(truck); whell.setManufacturer(<span class="hljs-string"><span class="hljs-string">"Michrelli"</span></span>); truck.addWheel(whell); truck.setTipper(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); truck.alter();</code> </pre><br>  And the type of the variable is not important to us, we can declare it as <b>Car</b> , the main thing that lies in it. <br><br><h5>  Sample </h5><br>  We implement two methods in <b>Car</b> : <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;Car&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllCars</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> OrmEntity.getAllEntities(CarType.class, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;Car&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCarsWithoutTrucks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> OrmEntity.getAllEntities(CarType.class); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { e.printStackTrace(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; }</code> </pre><br>  The difference is only in the <b>getAllEntities</b> call, however <b>getAllCars</b> returns two records, and <b>getCarsWithoutTrucks</b> only one: the second parameter indicates whether to select records associated with child tables, or only self-sufficient ones. <br>  It is important to note the following: let's say we create a second instance with the type of <b>Passenger</b> .  In the sample, since the <b>CarType</b> class <b>is</b> marked <b>CashedList</b> , both instances of <b>Car</b> will refer to the same instance of <b>CarType</b> . <br><br><h5>  Sampling with <b>Where</b> </h5><br>  Well, the most interesting! <br>  <b>OrmEntity</b> has a static <b>Where</b> method that takes an entity class to fetch.  For beauty, turn it off in <b>Car</b> : <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> OrmWhere </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Where</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Where(Car.class); }</code> </pre><br>  And try to find cars with a power of <b>120</b> hp: <br><br><pre> <code class="java hljs"> List&lt;Car&gt; cars = Car.Where().Equals(<span class="hljs-string"><span class="hljs-string">"engine_power"</span></span>, <span class="hljs-number"><span class="hljs-number">120</span></span>).Select();</code> </pre><br>  Or cars with <b>120</b> hp  and which has four doors: <br><br><pre> <code class="java hljs"> List&lt;Car&gt; cars = Car.Where().Equels(‚Äúengine_power‚Äù, <span class="hljs-number"><span class="hljs-number">120</span></span>).And().Equals(<span class="hljs-string"><span class="hljs-string">"doors_count"</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>).Select();</code> </pre><br>  Or one of the cars that has a <b>Pirlin</b> wheel: <br><br><pre> <code class="java hljs"> Car car = Car.Where().FindChild(Wheel.class, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrmWhere(Wheel.class).Equals(<span class="hljs-string"><span class="hljs-string">"manufacturer"</span></span>, <span class="hljs-string"><span class="hljs-string">"Pirlin"</span></span>)).SelectFirst();</code> </pre><br>  It is not yet possible to make a selection with inclusion from child tables (although <b>orm</b> supports it and, all that is needed is to add another <b>Select</b> method with the <b>includeLeftChild</b> parameter in <b>OrmWhere</b> ). <br><br><h4>  Conclusion </h4><br>  That's almost all what my <b>orm</b> is capable of so <b>far</b> .  Now, the version number that I would assign to him is <b>0.1</b> .  As I have already said, it implements everything that my application needs at the moment, and therefore such little things as, for example, <b>Less</b> or <b>Great</b> in <b>OrmWhere</b> are not yet implemented.  The ability to update or delete tables is not implemented (although you can add new ones through the same <b>CreateTable</b> ).  Because of the <b>left</b> and <b>right join</b> tables, we had to abandon calling <b>query</b> with parameters and pull <b>rawQuery</b> from <b>SQLiteDatabase</b> , as well as the cost of <b>selecting</b> all cached list entries increased from <b>O (nk)</b> (where <b>n</b> is the number of all records in the table, and <b>k</b> - number of already selected records) to <b>O (n)</b> .  The types currently supported are: <b>Int</b> , <b>Long</b> , <b>Double</b> , <b>Date</b> , <b>String</b> , <b>Drawable,</b> and <b>Document</b> . <br>  Perhaps I forgot to mention something, but in any case I will be happy with any questions and, especially, with the proposals for the development of <a href="https://github.com/UCASoft/UcaOrm">UcaOrm</a> . </div><p>Source: <a href="https://habr.com/ru/post/187526/">https://habr.com/ru/post/187526/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../187512/index.html">Dynamic string search in iOS</a></li>
<li><a href="../187514/index.html">Video review tablet (ultrabook) Acer Aspire P3-171</a></li>
<li><a href="../187518/index.html">Windows Azure Recovery Services. Part 3: Working with the Backup Agent</a></li>
<li><a href="../187520/index.html">Get BlackBerry Z10 and Unity BlackBerry 10 Pro add-on for free</a></li>
<li><a href="../187522/index.html">Configuring WinDbg</a></li>
<li><a href="../187528/index.html">Large-scale update of the user part Online.ePayService</a></li>
<li><a href="../187532/index.html">MVP is not a cheap product, but an intelligent learning process.</a></li>
<li><a href="../187536/index.html">Site Optimization for tablets</a></li>
<li><a href="../187538/index.html">IT workshop. Lecture # 1 from EMC: Supercomputers. Internal architecture of enterprise level systems</a></li>
<li><a href="../187540/index.html">Comparing Open Source Licenses from GitHub</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Security Week 09: Cloudflare Vulnerability, IoT Bears Privacy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Day at the branch of the bank "Breakthrough" Ivan Petrovich Khatatapasov not asked. On the eve they sent a muddy and promising paper from the center a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Security Week 09: Cloudflare Vulnerability, IoT Bears Privacy</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/0ca/4df/abf/0ca4dfabf7fd45518508f9a32d977ae1.jpg" align="right">  Day at the branch of the bank "Breakthrough" Ivan Petrovich Khatatapasov not asked.  On the eve they sent a muddy and promising paper from the center about the introduction of some new practices and metrics.  In the morning, a truck drove into the courtyard of the bank and unloaded a shapeless pile of money right on the ground.  By telephone, Ivan Petrovich was told that as part of the optimization of the regional network, a small part of the funds would be temporarily stored in this department, for which Ivan Petrovich could receive a commission: ‚ÄúWell, take a bucket of money there.  No, receipts are not needed, but only one bucket. ‚Äù <br><br>  Having spent the whole night with a rifle on a heap of dough, Ivan Petrovich protested, but he was made to understand that this is a new progressive edzhyle banking technique incorporated on the basis of the best examples of world case studies, and there is nothing here to arise at all.  The pile was left unattended: it was successfully sprinkled with snow, and in general it was not so noticeable from the street, although attempts to recount the money all the time gave a different amount: incomprehensible young people on the trucks periodically took something and brought it by eye. <br><br>  That is, ahem, what is it about me.  The above absurdity in the context of storing personal data online regularly turns into a harsh reality: then Yahoo!  billions!  passwords!  stolen!, then from Cloudflare as a result of an error ( <a href="https://threatpost.com/cloudflare-bug-leaks-sensitive-data/123891/">news</a> ) important data will spray a thin layer on the sites of clients and Google.  Today's issue is about privacy.  And the correct risk assessment. <br><a name="habracut"></a><br>  <b>What happened to Cloudflare?</b> <br>  It all started with this tweet: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); width: 500px; margin: 10px auto; max-width: 100%; min-width: 220px;" data-tweet-id="832744397800214528"></twitter-widget><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><br>  A researcher from the Google Project Zero team, Tavis Ormandi (I already wrote about him <a href="https://habrahabr.ru/company/kaspersky/blog/320654/">earlier</a> ) found in the infrastructure of the company Cloudflare, which provides content delivery services, protection from DDoS attacks and others, a serious vulnerability.  It is difficult to describe it in simple words, except perhaps only such: ‚Äúthe robots have broken‚Äù.  The various Cloudflare services are based on a single principle: a layer is built between the site and the visitor, data is transmitted through a proxy, as a result of which it becomes possible to balance the load, cut off DDoS garbage traffic and so on. <br><br>  It is with the proxy infrastructure, which is essentially common to all clients, and the problem occurred.  In addition to sending web pages on the way from the server to the client, they could have been modified: the code for analytics was inserted, e-mail addresses and the like were obfuscated.  The process that controlled the modification on the proxy side had a bug in it that inserted some garbage into the code.  As Tavis Ormandi found out, it was not garbage at all, but pieces of data from the RAM of the proxy server, containing, among other things, private data.  Cookies, authorization tokens and other very valuable information.  The issued web pages were eventually indexed by search robots. <br><br>  I must say that the investigation of this vulnerability was almost a reference.  The vulnerability was closed by disabling non-critical services on the side of Cloudflare within 24 hours.  At the same time, serious work was done with search engines (primarily on Google, but not only) on removing indexed private information.  Reports on the nature of the problem - detailed, with code examples.  More information - at Cloudflare blogpost and <a href="https://bugs.chromium.org/p/project-zero/issues/detail%3Fid%3D1139">Tavis</a> bug report. <br><br>  It is more difficult to answer the question: Who has suffered and what now to do with it?  I will try, by virtue of my capabilities, to highlight this topic, but first I will tell about smart, but vulnerable teddy bears. <br><br>  Bears, Karl! <br><br>  <b>More than two million voice messages were recorded to smart children's toys.</b> <br>  <a href="https://threatpost.com/childrens-voice-messages-leaked-in-cloudpets-database-breach/123956/">News</a>  The blog post <a href="https://www.troyhunt.com/data-from-connected-cloudpets-teddy-bears-leaked-and-ransomed-exposing-kids-voice-messages/">researcher</a> Troy Hunt. <br><br>  There is such a company <a href="http://cloudpets.com/">Cloudpets</a> .  Produces children's toys with enhanced functionality.  You can remotely deliver voice messages using a wireless network connection to a bear (or whatever, whatever).  The user of the bear (oh everything) sees the receipt of a new message in the form of a flashing heart, and can lose it by making a hug session with the device (aaaaaa!). <br><br><img src="https://habrastorage.org/files/f22/100/1f7/f221001f790e4ba8970905a23f831f22.jpg"><br><br>  AAAAAAAAAAAAA! <br>  No, and what?  Brave new world.  Everything would be fine, but a database of users, including personal data and recorded voice messages, was placed on a badly protected server.  For data storage, the MongoDB DBMS was used, due to the crooked settings available from the Internet without authorization.  Unprotected DBMSs are increasingly falling victim to hackers and extortionists - I <a href="https://habrahabr.ru/company/kaspersky/blog/319502/">wrote</a> about this at the beginning of the year. <br><br>  In the process of disclosing information about the vulnerability of the vendor, everything went wrong.  The problem was discovered immediately by two researchers independently of each other.  Their messages to the manufacturer were ignored.  Only the researcher Troy Hunt was able to force the vendor to react when he <a href="https://www.troyhunt.com/data-from-connected-cloudpets-teddy-bears-leaked-and-ransomed-exposing-kids-voice-messages/">reported</a> a problem on his blog.  In response, Cloudpets reported that (a) the data were actually available, but information can only be obtained by knowing the password of a specific user and (b) the storage and management of the database was carried out by a third-party organization, for which the vendor cannot be responsible. <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); width: 500px; margin: 10px auto; max-width: 100%; min-width: 220px;" data-tweet-id="836598007869026304"></twitter-widget><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><br>  Seriously, they said so.  They also explained the lack of response to the initial messages: ‚ÄúWe cannot accept such serious information when it is not clear who sends it.‚Äù <br><br>  Come on!  About passwords: it is clear that the requirements for such a service are very minimal, and it is quite easy to pick up many of them (more than 800,000 users were affected, if we take it into account).  The problem is not even in the leakage of personal data (the database was open for a long time and anyone could download it), the problem was not the most adequate reaction of the vendor.  Well, and a note for the future: even if the contractor is to blame for the leak, the customer will still suffer damage.  Alas. <br><br>  <b>What to do?</b> <br><br>  So, about the risk assessment.  In the case of teddy bears, only end users suffered, most of them, unfortunately, do not even know about the problem.  The potential victims of Cloudflare are medium and large companies.  So it turns out that businesses have to spend significant funds on the development of their own expertise, including in order to <i>properly assess the risks of another threat</i> . <br><br>  If somewhere on the Internet something happened, you need to understand how this affects the risks of your business.  On the example of Cloudflare, it is clear that the polar variants: ‚Äúthis does not concern us‚Äù and ‚Äúaah, everything is lost, we all will die‚Äù are equally bad.  Such estimates from the shoulder - rather the lot of the media <s>and weekly digests</s> .  The only adequate analysis of the problem from this point of view is published <a href="https://medium.com/%40magoo/cloudbleed-retrospective-79f00432db3">here</a> , and then, in my opinion, it is too alarmist.  Considering that the Cloudflare service has led to a random leakage of any data that is at the time of the bug in the server‚Äôs memory, it can be argued that all the clients of this company are at risk.  Who exactly is impossible to know, information from the search engines is worn out.  At the same time, no one excludes the presence of leaks on the side of informal robots-assemblers, who do not work not on search, but in general with not very clear goals.  The chances that the bad guys have the data are there, but it is impossible to verify. <br><br>  And now what?  Reset passwords to all users?  Recall authorization tokens?  The general conclusion is probably the following: no sharp movements should be made, but we must assume that the probability of a leak is different from zero, know the possible parameters of this leak and be prepared for the fact that the data can be used to attack.  The story of Cloudflare - it‚Äôs not about real trouble, it‚Äôs more about how information security is no longer limited to patching up fresh holes.  This is a tactic, and still need a strategy.  You need to build protection based on the fact that your data are dumped somewhere in a heap in some backyard. <br><br>  With bears easier.  When buying a toy for a child, you need to understand that your messages are already being heard by someone else.  This is not paranoia, this is reality.  It is not enough to make a beautiful and smart toy, it is required to provide at least some evidence that you, as a vendor, have thought about the security of other people's data. <br><br>  <i>Slightly crazy about what is happening, the editorial board of the weekly digest goes on a short vacation.</i>  <i>Do not switch, we will return.</i> <br><br><img src="https://habrastorage.org/files/1a3/d84/77c/1a3d8477c94641beaa19694292d10b54.png" align="right"><h3>  Antiquities </h3><br>  "Socha-753" <br><br>  Resident is a very dangerous virus, it typically infects .COM files when they are opened.  When launching files (except ME $ .OVL and NCMAIN.EXE), the command line is added to the file C: \ M_EDIT \ ME $ .OVL.  It is propagated if the system timer indicates 1981. Intercepts int 21h, contains the strings: ‚ÄúSocha‚Äù, ‚ÄúC: \ m_edit \ me $ .ovl‚Äù, ‚ÄúcomCOM‚Äù. <br><br>  <i>Quote from the book "Computer viruses in MS-DOS" Eugene Kaspersky.</i>  <i>1992</i>  <i>Page 83.</i> <br><br>  <i><strong>Disclaimer:</strong> This column reflects only the personal opinion of its author.</i>  <i>It may coincide with the position of Kaspersky Lab, or it may not coincide.</i>  <i>Then how lucky.</i> </div><p>Source: <a href="https://habr.com/ru/post/322914/">https://habr.com/ru/post/322914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322900/index.html">What is logic programming and why do we need it</a></li>
<li><a href="../322904/index.html">Setting up the SELinux environment by the example of a LAMP server</a></li>
<li><a href="../322906/index.html">Cirrascale Artificial Intelligence Cloud: Experiments with AI and Deep Learning</a></li>
<li><a href="../322908/index.html">Test article on checking vulnerabilities in habrahabr</a></li>
<li><a href="../322912/index.html">Some aspects of the use of cartographic materials or how not to get on 300 thousand rubles. for the site map</a></li>
<li><a href="../322916/index.html">59 ways to monetize your indie game</a></li>
<li><a href="../322924/index.html">Simple Stream implementation from Java 8 to C ++</a></li>
<li><a href="../322930/index.html">Ideal catalog, architecture sketch</a></li>
<li><a href="../322932/index.html">Amazon S3 about three or four hours worked intermittently, Medium, Slack, Coursera, Trello lay</a></li>
<li><a href="../322934/index.html">Competition for the best domain for CDN from King Servers (Updated)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dictionary generators</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some of the great features of the Python language are undeservedly ignored and many programmers do not know about them. This time it will be a questio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dictionary generators</h1><div class="post__text post__text-html js-mediator-article">  Some of the great features of the Python language are undeservedly ignored and many programmers do not know about them.  This time it will be a question of an excellent language opportunity that makes the code clearer: dictionary generators are single-line expressions that return a dictionary.  But let's start with compact list generators and the task of removing non-unique elements of collections. <br><br>  It will be interesting mainly to beginners in Python. <br><a name="habracut"></a><br><h5>  List generators </h5><br><br>  The easiest way to create a list is to use a single-line expression - a list generator.  It is used quite often, and I have met it in many examples and in the code of many libraries. <br>  Suppose that we have a function that returns a list.  A good example is the <i>range (start, end)</i> function, which returns numbers between <i>start</i> and <i>end</i> .  Starting with Python 3.0, it is implemented as a <a href="https://wiki.python.org/moin/Generators">generator</a> and does not immediately return a complete list, but returns number by number as needed.  In Python 2. *, the <i>xrange ()</i> function was used for this.  Getting a list of numbers from 1 to 10 using this function could look like this: <br><pre><code class="python hljs">numbers = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>): numbers.append(i)</code> </pre> <br>  If we need only even numbers, we could implement it as follows: <br><pre> <code class="python hljs">numbers = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>: numbers.append(i)</code> </pre><br>  List generators make code much easier.  This is the expression that returns a list in general: <br><pre> <code class="python hljs">[ expression <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> conditional ]</code> </pre><br>  Using it, the first example can be rewritten as: <br><pre> <code class="python hljs">numbers = [i <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>)]</code> </pre><br>  and the second is: <br><pre> <code class="python hljs">numbers = [i <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre><br>  Of course, this syntax may seem strange at first glance, but when you get used to it, the code will become simpler and clearer. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Remove duplicates </h5><br>  Another common task when working with collections is the removal of identical elements.  It can be solved by a variety of methods. <br>  Suppose we work with this list: <br><pre> <code class="python hljs">numbers = [i <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>)] + [i <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>)]</code> </pre><br>  The most difficult way to remove duplicates, which I met, looks like this: <br><pre> <code class="python hljs">unique_numbers = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> numbers: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> n <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> unique_numbers: unique_numbers.append(n)</code> </pre><br>  Of course, and it works, but there are easier solutions.  You can use the standard type set.  Sets can not contain the same elements by definition, so if you convert the list into a set - duplicates are deleted.  But we will get a lot and not a list, so if we want a list of unique values, we need to convert again: <br><pre> <code class="python hljs">unique_numbers = list(set(numbers))</code> </pre><br><br><h5>  Deleting duplicate objects </h5><br>  A completely different situation with objects or dictionaries.  For example, we have a list of dictionaries in which one of the values ‚Äã‚Äãis used as an identifier: <br><pre> <code class="python hljs">data = [ {<span class="hljs-string"><span class="hljs-string">'id'</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>}, {<span class="hljs-string"><span class="hljs-string">'id'</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>}, {<span class="hljs-string"><span class="hljs-string">'id'</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>}, {<span class="hljs-string"><span class="hljs-string">'id'</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>}, {<span class="hljs-string"><span class="hljs-string">'id'</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-string"><span class="hljs-string">'data'</span></span>: <span class="hljs-string"><span class="hljs-string">'...'</span></span>}, ]</code> </pre><br>  Deleting can be implemented with more or less code.  Of course, the less - the better!  The long version might look like this: <br><pre> <code class="python hljs">unique_data = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> d <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data: data_exists = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ud <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> unique_data: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ud[<span class="hljs-string"><span class="hljs-string">'id'</span></span>] == d[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]: data_exists = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> data_exists: unique_data.append(d)</code> </pre><br><br>  You can get the same result using the opportunity I found out a couple of days ago: dictionary generators.  They have syntax similar to list generators, but return a dictionary: <br><pre> <code class="python hljs">{ key:value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> conditional }</code> </pre><br>  If you rewrite the code from the example above with the use of this feature, there will be only one line: <br><pre> <code class="python hljs">{ d[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]:d <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> d <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data }.values()</code> </pre><br>  In this line of code, a dictionary is created, the keys of which are the fields that we have taken as a unique identifier, then using the values ‚Äã‚Äã() method, we get all the values ‚Äã‚Äãfrom the created dictionary.  Since  the dictionary can contain no more than one entry for each key - the resulting list does not contain duplicates, which is what we needed. <br>  This feature was added to Python 3.0 and backported to Python 2.7. In earlier versions, you can use a structure like this to solve this problem: <br><pre> <code class="python hljs">dict((key, value) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> list <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> condition)</code> </pre><br>  A list of tuples (pairs) is generated and passed to their dict () constructor, which takes the first element of the tuple as the key and the second as the value.  With this approach, the solution of the same problem will look like this: <br><pre> <code class="python hljs">dict((d[<span class="hljs-string"><span class="hljs-string">'id'</span></span>], d) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> d <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data).values()</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/224163/">https://habr.com/ru/post/224163/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224143/index.html">Discover Meteor book translated into Russian</a></li>
<li><a href="../224147/index.html">PHDays IV Top Reports: Surveillance, Hacking and National Cyberwar Features</a></li>
<li><a href="../224149/index.html">Qi charger for any phone / smartphone and general gadget</a></li>
<li><a href="../224155/index.html">Software project management - inside out</a></li>
<li><a href="../224159/index.html">Accelerate Wordpress</a></li>
<li><a href="../224167/index.html">Sudden Death Syndrome (aka Sudden Death Syndrome, aka SDS) Samsung Galaxy Note 2 and Samsung Galaxy S3</a></li>
<li><a href="../224169/index.html">Sound card as a serial port</a></li>
<li><a href="../224171/index.html">How to make a robot in 24 hours</a></li>
<li><a href="../224173/index.html">How I made a power control widget for my space flight browser simulator</a></li>
<li><a href="../224175/index.html">[libGDX] Writing a full game for Android. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
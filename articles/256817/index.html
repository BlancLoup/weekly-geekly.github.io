<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Native Script. One code for all platforms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Native script (NS) is a library that allows you to make cross-platform applications using XML, CSS, JavaScript. Native script solves the same problem ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Native Script. One code for all platforms</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/c51/541/e1f/c51541e1f1194eccbfc707fe43464d7a.jpg" alt="image"><br><br>  Native script (NS) is a library that allows you to make cross-platform applications using XML, CSS, JavaScript.  Native script solves the same problem as the already known phonegap (creating cross-platform applications), but they have different approaches.  Phonegap uses the browser engine to display your UI (in fact, you get a web page), Native script uses native rendering, uses elements of the native UI.  The next important difference is that in order to access the camera, gps, and so on, you need to install plug-ins in the phonegap, while NS gives access from the box. <a name="habracut"></a><br>  It is worth emphasizing that applications can be written for Android 4.2 and higher, and for iOS 7.1 and higher. <br><br><h4>  <b>Fast start</b> </h4><br>  To install a native script, nodejs is required, so if you don‚Äôt have one yet, go <a href="https://nodejs.org/">here</a> .  Then everything is simple.  To install NS on the command line, execute: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">npm install -g nativescript</code> </pre> <br>  To create a project: <br><br><pre> <code class="bash hljs">tns create MyApp</code> </pre><br>  After the project is created, go to the project directory: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> MyApp</code> </pre><br>  And, like in phonegap, we add platforms: <br><br><pre> <code class="bash hljs">tns platform add android tns platform add ios</code> </pre><br>  Everything is ready to run our first native script application.  In order to do this, you need to lead one of the following commands: <br><br>  Launch on a device connected via USB: <br><br><pre> <code class="bash hljs">tns run android</code> </pre><br>  Run in the emulator: <br><br><pre> <code class="bash hljs">tns run android --emulator</code> </pre><br>  You can also run in Genymotion: <br><br><pre> <code class="bash hljs">tns run android --geny &lt;device name&gt;</code> </pre><br>  In general, no matter how you launch, you will have an application that counts the number of button presses left until the text ‚ÄúHoorraaay!  You unlocked the NativeScript clicker achievement! ‚Äù. <br><br><img src="https://habrastorage.org/files/7a9/44d/6ff/7a944d6ff0c349778b124ef7696ea5fe.png"><br><br>  Here is a comparison of how the application looks on iOS and Android. <br><br><img src="https://habrastorage.org/files/4b0/18d/dce/4b018ddcebaa4e70a93e80da1c4d4de8.png"><br><br>  As you can see, the button is native everywhere, although the code for both platforms is the same. <br><br><h4>  <b>What's inside?</b> </h4><br>  The project structure is presented below: <br><br><img src="https://habrastorage.org/files/c1f/383/fa2/c1f383fa26954836b74b3d868c38368e.png"><br><br>  Everything related to the type of application is in the <i>main-page.xml file</i> .  Anyone who is used to working with html will be terrified by this file, but the benefit of the documentation is very good, and a little later everything becomes clearer. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.nativescript.org/tns.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">loaded</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pageLoaded"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Tap the button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cssClass</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"TAP"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ tapAction }}"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ message }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cssClass</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"message"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">textWrap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">StackLayout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <i>app.js</i> - entry point to the application.  In NS, modules are used, as well as nodejs.  I think everything is so clear here. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> application = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"application"</span></span>); application.mainModule = <span class="hljs-string"><span class="hljs-string">"main-page"</span></span>; application.cssFile = <span class="hljs-string"><span class="hljs-string">"./app.css"</span></span>; application.start();</code> </pre><br>  <i>main-page.js</i> - contains the code for main-page.xml. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> vmModule = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./main-view-model"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pageLoaded</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">args</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = args.object; page.bindingContext = vmModule.mainViewModel; } exports.pageLoaded = pageLoaded;</code> </pre><br>  The pageLoaded function will be executed when the page is loaded (see main-page.xml).  The string page.bindingContext = vmModule.mainViewModel sets the binding context for this page (something like $ scope in an angular).  Well, the last line exports the function. <br><br>  The next file, main-view-model.js, will allow a closer look at the data binding mechanism in NS.  NS supports two-way and one-way binding. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> __extends = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.__extends || <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> b) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b.hasOwnProperty(p)) d[p] = b[p]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor = d; } __.prototype = b.prototype; d.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> __(); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observable = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"data/observable"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloWorldModel = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_super</span></span></span><span class="hljs-function">) </span></span>{ __extends(HelloWorldModel, _super); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HelloWorldModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ _super.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter = <span class="hljs-number"><span class="hljs-number">42</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.set(<span class="hljs-string"><span class="hljs-string">"message"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter + <span class="hljs-string"><span class="hljs-string">" taps left"</span></span>); } HelloWorldModel.prototype.tapAction = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter--; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.set(<span class="hljs-string"><span class="hljs-string">"message"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hoorraaay! You unlocked the NativeScript clicker achievement!"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.set(<span class="hljs-string"><span class="hljs-string">"message"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.counter + <span class="hljs-string"><span class="hljs-string">" taps left"</span></span>); } }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HelloWorldModel; })(observable.Observable); exports.HelloWorldModel = HelloWorldModel; exports.mainViewModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HelloWorldModel();</code> </pre><br>  In order for the dataBinding to work, in NS the object must throw a propertyChange event.  This is implemented in the Observable class.  In our case, it is passed to the function in which the HelloWorldModel inherits it.  Further, already through the set method, the fields are assigned values.  The __extends function at the very top of the file serves to implement inheritance. <br><br>  Check the two-way binding in the case.  Add two lines before the tag to main-page.xml. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextField</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ name }}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">hint</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  "</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cssClass</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{name, !!name ? 'title ' : 'title hidden'}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{ name, 'Hello ' + name }}"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  In the main-view-model.js file, add the line to the HelloWorldModel function: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.set(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre><br>  Finally in app.css.  It is worth emphasizing that not all CSS properties are supported, the full list can be found <a href="http://docs.nativescript.org/styling.html">here</a> . <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.hidden</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">visibility</span></span>: collapsed; }</code> </pre><br>  As a result, we get: <br><br><img src="//habrastorage.org/files/9db/2bc/f8a/9db2bcf8a5274bfeb23bd15c591fd237.jpg"><br><br><h4>  <b>Conclusion</b> </h4><br>  Native script for me, as for a web developer, left mixed feelings.  On the one hand, it is clear that the authors tried to do everything close to the web (JavaScript, CSS), but on the other hand, CSS properties are not all supported; in order to deal with XML you have to constantly go into the documentation.  Perhaps NS will solve the problems that exist in the phonegap, somewhere here and there, there are some difficulties related to the web origin of the application.  In any case, it‚Äôs cool that another framework has appeared that allows those who know JavaScript to write cross-platform applications, because  this market is becoming crowded (phoneGap, Native Script, React Native) and as a result, the quality of frameworks should improve. </div><p>Source: <a href="https://habr.com/ru/post/256817/">https://habr.com/ru/post/256817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256805/index.html">HP StormRunner Load. A practical guide. Part II</a></li>
<li><a href="../256809/index.html">HP Blade Workshop Video</a></li>
<li><a href="../256811/index.html">Dino Esposito will perform in St. Petersburg</a></li>
<li><a href="../256813/index.html">Vivaldi TP3 - we do the browser together</a></li>
<li><a href="../256815/index.html">BalanceBall. Self-balancing platform from A to Z</a></li>
<li><a href="../256819/index.html">Interesting notes on C # and CLR</a></li>
<li><a href="../256821/index.html">How IQueryable and LINQ Data Providers Work</a></li>
<li><a href="../256823/index.html">Features of conceptual domain modeling</a></li>
<li><a href="../256825/index.html">What prepares us for C # 7 (Part 1. Tuples)</a></li>
<li><a href="../256827/index.html">Reverse engineering integer division by constant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
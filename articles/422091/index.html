<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Effective use of array methods in javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of the material, the translation of which we publish today, says that in the past few months, when checking pull requests, he always came a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Effective use of array methods in javascript</h1><div class="post__text post__text-html js-mediator-article">  The author of the material, the translation of which we publish today, says that in the past few months, when checking pull requests, he always came across the same four shortcomings related to the irrational use of array methods in JavaScript.  In order for such flaws in the code, which had previously appeared in his programs, become less, he wrote this article. <br><br> <a href="https://habr.com/company/ruvds/blog/422091/"><img src="https://habrastorage.org/webt/tp/fn/nn/tpfnnn-6nib_hhiucgr13y9ns00.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Replacing indexOf () with includes ()</font> </h2><br>  "If you are looking for something in an array, use the <code>indexOf()</code> method."  Something like this recommendation I met at one of the courses when I was learning JavaScript.  The recommendation is quite normal, nothing bad can be said about it. <br><br>  On MDN, you can see that the <code>indexOf()</code> method returns the first index by which an element can be found in the array.  This means that if we plan to use this index in the program, the <code>indexof()</code> method is excellent for searching elements in arrays. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But what if we just need to find out if there is a certain element in the array or not?  That is, we are not interested in the index of this element, if it is in the array, but in the fact of its presence or absence.  With this approach, we are quite satisfied with the command that returns <code>true</code> or <code>false</code> .  In such cases, I recommend using not the <code>indexOf()</code> method, but the <code>includes()</code> method, which returns a boolean value.  Consider an example: <br><br><pre> <code class="hljs javascript"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> characters = [ <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-string"><span class="hljs-string">'hulk'</span></span>, <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span>, <span class="hljs-string"><span class="hljs-string">'hulk'</span></span>, <span class="hljs-string"><span class="hljs-string">'thor'</span></span>, ]; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(characters.indexOf(<span class="hljs-string"><span class="hljs-string">'hulk'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// 2 console.log(characters.indexOf('batman')); // -1 console.log(characters.includes('hulk')); // true console.log(characters.includes('batman')); // false</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Using the find () method instead of the filter () method</font> </h2><br>  The <code>filter()</code> method is a very useful tool.  He, on the basis of one array, creates another array containing the elements of the source array corresponding to the given condition.  As can be understood from the name of this method, it is intended for filtering arrays, during which arrays are usually obtained that are shorter than the original ones. <br><br>  What if we know that after filtering the array, only one element will remain?  For example, this can happen when trying to filter the elements of an array based on some unique identifier.  In such a situation, I would not advise using the <code>filter()</code> method, since the array that it forms will contain only one element.  If we are interested in an array element with a unique value, then we are going to work with a single value, and to represent such a value, the array is not needed. <br><br>  If we talk about the performance of the <code>filter()</code> method, then it turns out that in order to form a list of the elements corresponding to the condition specified when it was called, you will have to look through the entire array.  Moreover, imagine that there are hundreds of elements in an array that satisfy a given condition.  This will result in the resulting array being rather large. <br><br>  In order to avoid getting into such situations, I would advise using the <code>find()</code> method.  When called, it is passed a callback describing a condition very similar to that used with the <code>filter()</code> method, but the <code>find()</code> method returns only the first element that matches the condition.  In this case, this method stops working immediately after it finds such an element.  The entire array to him, in the end, do not have to browse. <br><br><pre> <code class="hljs pgsql"><span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; const characters = [ { id: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span> }, { id: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span> }, { id: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, { id: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, ]; <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> getCharacter(<span class="hljs-type"><span class="hljs-type">name</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">character</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">character</span></span>.name === <span class="hljs-type"><span class="hljs-type">name</span></span>; } console.log(characters.<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(getCharacter(<span class="hljs-string"><span class="hljs-string">'captain_america'</span></span>))); // [ //   { id: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, //   { id: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }, // ] console.log(characters.find(getCharacter(<span class="hljs-string"><span class="hljs-string">'captain_america'</span></span>))); // { id: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'captain_america'</span></span> }</code> </pre> <br><h2>  <font color="#3AC1EF">Replacing the find () Method with the Some () Method</font> </h2><br>  I have to admit that the mistake that we will discuss now, I have committed many times.  Then I was advised to look at <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">MDN</a> and see how to improve what I was doing irrationally.  In a nutshell, this is very similar to what we have just discussed, referring to the methods <code>indexOf()</code> and <code>includes()</code> . <br><br>  In the above case, we saw that the <code>find()</code> method, as an argument, takes a callback and returns an array element.  Is it possible to call the <code>find()</code> method the most successful solution if we need to find out if the array contains some value or not?  Perhaps - no, because this method returns the value of an element of the array, rather than a logical value. <br><br>  In this situation, I would recommend using the <code>some()</code> method, which returns a boolean value. <br><br><pre> <code class="hljs javascript"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> characters = [ { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'wonder_woman'</span></span>, <span class="hljs-attr"><span class="hljs-attr">env</span></span>: <span class="hljs-string"><span class="hljs-string">'dc_comics'</span></span> }, ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasCharacterFrom</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">env</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">character</span></span></span><span class="hljs-function"> =&gt;</span></span> character.env === env; } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(characters.find(hasCharacterFrom(<span class="hljs-string"><span class="hljs-string">'marvel'</span></span>))); <span class="hljs-comment"><span class="hljs-comment">// { id: 1, name: 'ironman', env: 'marvel' } console.log(characters.some(hasCharacterFrom('marvel'))); // true</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Using the reduce () method instead of a combination of the filter () and map () methods</font> </h2><br>  It is worth saying that the <code>reduce()</code> method cannot be attributed to simple to understand.  However, if what can be done with it is done in two steps, using the <code>filter()</code> and <code>map()</code> methods that are chained, it seems that something in this approach is wrong. <br><br>  I say that with this approach, the array must be viewed twice.  The first pass performed by the <code>filter()</code> method involves viewing the entire array and creating a new, filtered array.  After the second pass, performed by the <code>map()</code> method, again, a new array is created, which contains the results of the transformation of the array elements obtained after the <code>filter()</code> method works.  As a result, in order to enter the finished array, two methods are used.  Each method has its own callback, while creating such an operation using the <code>filter()</code> method creates an array with which we can no longer work. <br><br>  In order to reduce the load on the system created by using two methods and to improve the performance of programs, in such cases I would advise using the <code>reduce()</code> method.  The result will be the same, and the code will turn out better.  This method allows you to filter the elements of interest to us and add them to the battery.  A battery can be a numeric variable that stores, say, the sum of the elements of an array, it can be an object, a string, or an array in which we can accumulate the elements we need. <br><br>  In our case, since we are talking about using the <code>map()</code> method, I would advise using the <code>reduce()</code> method with an array as a battery.  In the following example, we filter the elements of the array, which are objects, by the value of the <code>env</code> field, and perform their conversion. <br><br><pre> <code class="hljs pgsql"><span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; const characters = [ { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span> }, { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'wonder_woman'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'dc_comics'</span></span> }, ]; console.log( characters   .<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>(<span class="hljs-type"><span class="hljs-type">character</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">character</span></span>.env === <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>)   .map(<span class="hljs-type"><span class="hljs-type">character</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>.assign({}, <span class="hljs-type"><span class="hljs-type">character</span></span>, { alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] })) ); // [ //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] }, //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] } // ] console.log( characters   .reduce((acc, <span class="hljs-type"><span class="hljs-type">character</span></span>) =&gt; {     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">character</span></span>.env === <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>       ? acc.concat(<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>.assign({}, <span class="hljs-type"><span class="hljs-type">character</span></span>, { alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] }))       : acc;   }, []) ) // [ //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'ironman'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] }, //   { <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'black_widow'</span></span>, env: <span class="hljs-string"><span class="hljs-string">'marvel'</span></span>, alsoSeenIn: [<span class="hljs-string"><span class="hljs-string">'Avengers'</span></span>] } // ]</code> </pre> <br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  In this material, we examined some approaches to the effective use of array methods in solving various problems.  We believe that the ideas on which the recommendations given by the author of this article are based may help in improving the JS code in other situations. <br><br>  <b>Dear readers!</b>  Have you ever met with examples of the unsustainable use of JavaScript mechanisms? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/webt/xo/rv/il/xorvilnd4ei8brpdilnh8o--s_i.jpeg"></a> </div><p>Source: <a href="https://habr.com/ru/post/422091/">https://habr.com/ru/post/422091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422081/index.html">Application for the multiplatform bot framework</a></li>
<li><a href="../422083/index.html">One-page site on Kotlin and SpringBoot without using JSP</a></li>
<li><a href="../422085/index.html">Sort by selection</a></li>
<li><a href="../422087/index.html">Computer vision in industry. Lecture in Yandex</a></li>
<li><a href="../422089/index.html">Execution Context and Call Stack in JavaScript</a></li>
<li><a href="../422093/index.html">"Storytelling with Data", Cole Nussbaumer Knaflic: An Informal Summary of the Book</a></li>
<li><a href="../422095/index.html">A special-purpose audio gadget: the ‚Äúquiet‚Äù voice of ‚ÄúMedusa‚Äù, ‚ÄúWhisper‚Äù of shields and 162 dB from LRAD</a></li>
<li><a href="../422097/index.html">Notes IoT provider. About frequency</a></li>
<li><a href="../422099/index.html">Large operators will earn on the "law of Spring", providing hosting services to small operators</a></li>
<li><a href="../422101/index.html">"Alice" teaches foreign languages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino DIY Watch - homemade clock on the Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After several years of exploring Arduino, I wanted to do something really interesting and useful. It was decided to make a wristwatch. But not just a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino DIY Watch - homemade clock on the Arduino</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/65d/d6e/9d0/65dd6e9d099e44e7a742803bd63d7e87.jpg"><br><br>  After several years of exploring Arduino, I wanted to do something really interesting and useful.  It was decided to make a wristwatch.  But not just a watch, but really compact, comfortable, outwardly not very scary and most importantly with long battery life hours. <br>  And so meet homemade watches on the Arduino or DIY Arduino Watch! <br><a name="habracut"></a><br><br>  DIY Arduino Watch is a compact and lightweight wrist watch with a 1.3-inch display made using OLED technology.  The clock can be easily programmed in the Arduino environment via a micro USB connector, using an external programmer.  When programming the clock in the environment settings, you must select the Arduino pro mini 3.3V 8MHz board.  The watches have low power consumption, which allows working for more than 6 months from one CR2032 battery (provided that the time is displayed for 3 seconds, and the owner watches the time 12 times a day).  The standby current is about 7-8 ŒºA, in the time display mode is 10-12 mA.  The clock also allows you to measure the supply voltage using the built-in 1.1V reference voltage source. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For the most economical use of energy all the time while the clock does not display the time the microcontroller is in a state of deep sleep.  It can only be awakened by an external interrupt (button 1).  The screen also goes to sleep and wake up the microcontroller when the latter wakes up. <br><br>  Let's talk about the involved pins of the microcontroller: <br>  A0 - measurement of battery voltage <br>  2 - Button 1 (wakes the clock from sleep mode) <br>  A1 - Button 2 <br>  3 - Button 3 <br><br><img src="https://habrastorage.org/files/7f6/647/257/7f66472574ef45b180fb2b69367f4fb6.jpg" alt="image"><br><br>  Components required for the manufacture of watches: <br>  1. Atmega328p microcontroller in QFP32 package; <br>  2. OLED Display 128x64 1.3 ‚Äù(SH1106); <br>  3. DS1337 Real Time Clock in SOP-8; <br>  4. Clock buttons; <br>  5. Micro usb connectors mom and dad; <br>  6. CR2032 battery; <br>  7. SMD capacitors, resistors and quartz at 8MHz and 32kHz; <br>  8. Double-sided PCB; <br>  9. The body, consisting of 3 parts, printed on a 3D-printer. <br><br><img src="https://habrastorage.org/files/558/0e4/b89/5580e4b899a249aaa7d6f65cda8ea655.jpg"><br><br>  Schematic diagram of the clock <br><img src="https://habrastorage.org/files/aaf/eac/c73/aafeacc734974ac6830a4e57a59b71c1.JPG"><br><br>  When you have all the necessary parts, you can begin to manufacture the printed circuit board.  I made the board using the LUT method, but with only one caveat - instead of glossy paper, I used transparent (it is possible and color, just with transparent is more convenient) Oracl self-adhesive vinyl film, which allows you to perfectly transfer all toner to textolite.  The technology is as follows.  First, on a plain paper, print a board drawing, then cut out a vinyl film that is slightly larger than the drawing itself and paste on the printed board drawing on paper.  Then again, on the same sheet of paper, print the drawing of the board, so that the print would turn out on the vinyl film itself.  Well, then follow the established scheme.  Keep the picture under the iron for about a minute - as a rule, during this time the toner has time to stick to the PCB, and the film has time to soften, so that the toner is completely behind the vinyl.  The result is an excellent transfer of the image without the villi and white bloom. <br><br>  The layout of the elements on the board <br><img src="https://habrastorage.org/files/3e1/f0d/d7a/3e1f0dd7af474232b931cb5bc4ea8780.JPG"><br><br>  There are dots in the picture of the printed circuit board at the top and bottom that allow you to precisely align the patterns on different sides of the board. <br><br>  The next step is flashing the bootloader into the microcontroller.  The bootloader is used from Arduino pro mini 3.3V 8MHz with a few changes.  In order to make the microcontroller's consumption in sleep mode about 1 ¬µA and also allow the microcontroller to work at a voltage below 1.8V, you must disable Brown-out Detection (BOD).  To do this, you need to open the boards.txt file, which lies in the folder with the Arduino in the following path hardware / arduino / avr.  Find the line in the file. <br><br>  "## Arduino Pro or Pro Mini (3.3V, 8 MHz) w / ATmega328" <br><br>  below which are the fyuz settings for the bootloader for the Arduino Pro or Pro Mini (3.3V, 8 MHz).  Below we find the line: <br>  pro.menu.cpu.8MHzatmega328.bootloader.extended_fuses = 0x05 <br>  And replace it with <br>  pro.menu.cpu.8MHzatmega328.bootloader.extended_fuses = 0x07 <br><br>  Save the boards.txt and flashing the bootloader to the microcontroller. <br><br>  We solder all the details on the printed circuit board according to the pattern with the location of the elements. <br><br>  The display can be bought both separately and on the board.  In the latter case, it will have to be unsoldered, for which you can take the necessary strapping for the display from the board. <br><br>  The case was printed on a 3D plastic ABS printer.  For watches fit any suitable straps 20mm wide. <br><br>  I give a complete sketch of the program for hours.  At the moment, the clock can display the current time and date, as well as make their setting.  With the current functionality, the size of the sketch is about 20 kb. <br><br><div class="spoiler">  <b class="spoiler_title">Sketch</b> <div class="spoiler_text">  // Arduino DIY Watch <br>  // Ivan Grishin <br>  // e-mail: arduinowatch@mail.ru <br>  // <br>  // <br>  // Button 1 &gt;&gt;&gt;&gt; 2 <br>  // Button 2 &gt;&gt;&gt;&gt; A1 <br>  // Button 3 &gt;&gt;&gt;&gt; 3 <br>  // Vbat &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; A0; <br><br>  #include "LowPower.h" <br>  #include &lt;SPI.h&gt; <br>  #include &lt;Wire.h&gt; <br>  #include &lt;Adafruit_GFX.h&gt; <br>  #include &lt;Adafruit_SH1106.h&gt; <br>  #include &lt;DS1337.h&gt; <br>  #define OLED_RESET 4 <br>  Adafruit_SH1106 display (OLED_RESET); <br><br>  #include &lt;stdio.h&gt; <br>  DS1337 RTC = DS1337 (); <br><br>  int val = 0; <br>  const int b1 = 2; <br>  const int b2 = A1; <br>  const int b3 = 3; <br>  const int vb = A0; <br>  int mode = 1; <br>  int modest = 0; <br>  int h = 0; <br>  int m = 0; <br>  int s = 0; <br>  int d = 0; <br>  int mo = 0; <br>  int y = 0; <br>  int lock = 0; <br>  int volt = 0; <br>  float vbat = 0; <br>  int timebat = 1; <br>  int voltTime = 1; <br><br>  // # define BAT_HEIGHT 16 <br>  // # define BAT_GLCD_WIDTH 7 <br>  static const unsigned char PROGMEM bat_bmp0 [] = <br>  {B00111111, B11111111, <br>  B00100000, B00000001, <br>  B11100000, B00000001, <br>  B11100000, B00000001, <br>  B11100000, B00000001, <br>  B00100000, B00000001, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp1 [] = <br>  {B00111111, B11111111, <br>  B00100000, B00000011, <br>  B11100000, B00000011, <br>  B11100000, B00000011, <br>  B11100000, B00000011, <br>  B00100000, B00000011, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp2 [] = <br>  {B00111111, B11111111, <br>  B00100000, B00000111, <br>  B11100000, B00000111, <br>  B11100000, B00000111, <br>  B11100000, B00000111, <br>  B00100000, B00000111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp3 [] = <br>  {B00111111, B11111111, <br>  B00100000, B00001111, <br>  B11100000, B00001111, <br>  B11100000, B00001111, <br>  B11100000, B00001111, <br>  B00100000, B00001111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp4 [] = <br>  {B00111111, B11111111, <br>  B00100000, B00011111, <br>  B11100000, B00011111, <br>  B11100000, B00011111, <br>  B11100000, B00011111, <br>  B00100000, B00011111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp5 [] = <br>  {B00111111, B11111111, <br>  B00100000, B00111111, <br>  B11100000, B00111111, <br>  B11100000, B00111111, <br>  B11100000, B00111111, <br>  B00100000, B00111111, <br>  B00111111, B11111111,}; <br>  static const unsigned char PROGMEM bat_bmp6 [] = <br>  {B00111111, B11111111, <br>  B00100000, B01111111, <br>  B11100000, B01111111, <br>  B11100000, B01111111, <br>  B11100000, B01111111, <br>  B00100000, B01111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp7 [] = <br>  {B00111111, B11111111, <br>  B00100000, B11111111, <br>  B11100000, B11111111, <br>  B11100000, B11111111, <br>  B11100000, B11111111, <br>  B00100000, B11111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp8 [] = <br>  {B00111111, B11111111, <br>  B00100001, B11111111, <br>  B11100001, B11111111, <br>  B11100001, B11111111, <br>  B11100001, B11111111, <br>  B00100001, B11111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp9 [] = <br>  {B00111111, B11111111, <br>  B00100011, B11111111, <br>  B11100011, B11111111, <br>  B11100011, B11111111, <br>  B11100011, B11111111, <br>  B00100011, B11111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp10 [] = <br>  {B00111111, B11111111, <br>  B00100111, B11111111, <br>  B11100111, B11111111, <br>  B11100111, B11111111, <br>  B11100111, B11111111, <br>  B00100111, B11111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp11 [] = <br>  {B00111111, B11111111, <br>  B00100111, B11111111, <br>  B11100111, B11111111, <br>  B11100111, B11111111, <br>  B11100111, B11111111, <br>  B00100111, B11111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp12 [] = <br>  {B00111111, B11111111, <br>  B00101111, B11111111, <br>  B11101111, B11111111, <br>  B11101111, B11111111, <br>  B11101111, B11111111, <br>  B00101111, B11111111, <br>  B00111111, B11111111,}; <br><br>  static const unsigned char PROGMEM bat_bmp13 [] = <br>  {B00111111, B11111111, <br>  B00111111, B11111111, <br>  B11111111, B11111111, <br>  B11111111, B11111111, <br>  B11111111, B11111111, <br>  B00111111, B11111111, <br>  B00111111, B11111111,}; <br><br>  void wakeUp () {} <br><br>  void setup () { <br>  display.begin (SH1106_SWITCHCAPVCC, 0x3c); <br>  RTC.start (); <br>  pinMode (b1, INPUT); <br>  pinMode (b2, INPUT); <br>  pinMode (vb, INPUT); <br>  analogReference (INTERNAL); <br>  display.setRotation (2);  // image rotation 180 degrees <br><br>  } <br><br>  void loop () { <br><br>  display.SH1106_command (SH1106_DISPLAYOFF); <br>  mode = 1; <br>  attachInterrupt (0, wakeUp, HIGH); <br>  LowPower.powerDown (SLEEP_FOREVER, ADC_OFF, BOD_OFF); <br>  detachInterrupt (0); <br>  display.clearDisplay (); <br>  delay (10); <br>  display.SH1106_command (SH1106_DISPLAYON); <br><br>  for (val; val &lt;= 150;) <br>  { <br>  RTC.readTime (); <br>  int state1 = digitalRead (b1); <br>  int state2 = digitalRead (b2); <br>  int state3 = digitalRead (b3); <br><br><br>  if (state2 == 1 &amp;&amp; lock == 0) <br>  { <br>  mode ++; <br>  delay (130); <br>  state2 = 0; <br>  } <br><br>  if (state3 == 1) <br>  { <br>  display.begin (SH1106_SWITCHCAPVCC, 0x3c); <br>  display.setRotation (2); <br>  display.clearDisplay (); <br>  delay (100); <br>  } <br><br>  if (mode == 1) { <br>  time (); <br>  battery (); <br>  display.display (); <br>  val ++; <br>  } <br><br>  // ++++++++++++++++ MODE SET TIME +++++++++++++++++ <br>  while (mode == 2) <br>  { <br>  int state1 = digitalRead (b1); <br>  int state2 = digitalRead (b2); <br>  int state3 = digitalRead (b3); <br><br>  lock = 1; <br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br>  // +++++++++++++++++++ Set HOURS ++++++++++++++++++++ <br>  if (modest == 1) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (BLACK, WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.setTextColor (WHITE); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  battery (); <br>  display.setTextSize (1); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.print (y); <br>  display.display (); <br>  if (state1 == 1) <br>  { <br>  h ++; <br>  delay (150); <br>  } <br>  if (state3 == 1) <br>  { <br>  h--; <br>  delay (150); <br>  } <br><br>  if (h&gt; = 24) <br>  {h = 0;} <br><br>  if (h &lt;0) <br>  {h = 23;} <br><br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br><br>  } <br>  // ++++++++++++++++++++++++++++ SET MIN +++++++++++++++++ + <br>  if (modest == 2) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  display.setTextColor (BLACK, WHITE); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br><br>  display.print (m); <br>  display.setTextColor (WHITE); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  battery (); <br>  display.setTextSize (1); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.print (y); <br>  display.display (); <br>  if (state1 == 1) <br>  { <br>  m ++; <br>  delay (100); <br>  } <br>  if (state3 == 1) <br>  { <br>  m--; <br>  delay (150); <br>  } <br><br>  if (m&gt; = 60) <br>  {m = 0;} <br><br>  if (m &lt;0) <br>  {m = 59;} <br><br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br>  } <br><br>  // +++++++++++++++++++++++ SET SEC +++++++++++++++++++++++ <br>  if (modest == 3) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  display.setTextColor (BLACK, WHITE); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  display.setTextColor (WHITE); <br>  battery (); <br>  display.setTextSize (1); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.print (y); <br>  display.display (); <br>  if (state1 == 1) <br>  { <br>  s ++; <br>  delay (100); <br>  } <br>  if (state3 == 1) <br>  { <br>  s--; <br>  delay (150); <br>  } <br><br>  if (s&gt; = 60) <br>  {s = 0;} <br><br>  if (s &lt;0) <br>  {s = 59;} <br><br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br>  } <br>  // +++++++++++++++++++++++ END SET SEC ++++++++++++++++++++++ <br><br>  // +++++++++++++++++++++++ SET DAY +++++++++++++++++++++++ <br>  if (modest == 4) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  display.setTextColor (WHITE); <br>  battery (); <br>  display.setTextSize (1); <br>  display.setCursor (40,50); <br>  display.setTextColor (BLACK, WHITE); <br>  display.print (d); <br>  display.setTextColor (WHITE); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.print (y); <br>  display.display (); <br>  if (state1 == 1) <br>  { <br>  d ++; <br>  delay (100); <br>  } <br>  if (state3 == 1) <br>  { <br>  d--; <br>  delay (150); <br>  } <br><br>  if (d&gt; = 32) <br>  {d = 1;} <br><br>  if (d &lt;0) <br>  {d = 31;} <br><br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br>  } <br>  // +++++++++++++++++++++++ END SET DAY ++++++++++++++++++++++ <br><br>  // +++++++++++++++++++++++ SET MON +++++++++++++++++++++++ <br>  if (modest == 5) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  display.setTextColor (WHITE); <br>  battery (); <br>  display.setTextSize (1); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.setTextColor (BLACK, WHITE); <br>  display.print (mo); <br>  display.setTextColor (WHITE); <br>  display.print ('/'); <br>  display.print (y); <br>  display.display (); <br>  if (state1 == 1) <br>  { <br>  mo ++; <br>  delay (100); <br>  } <br>  if (state3 == 1) <br>  { <br>  mo--; <br>  delay (150); <br>  } <br><br>  if (mo&gt; = 13) <br>  {mo = 1;} <br><br>  if (mo &lt;0) <br>  {mo = 12;} <br><br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br>  } <br>  // +++++++++++++++++++++++ END SET DAY ++++++++++++++++++++++ <br><br>  // +++++++++++++++++++++++ SET YEAR +++++++++++++++++++++++ <br>  if (modest == 6) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  display.setTextColor (WHITE); <br>  battery (); <br>  display.setTextSize (1); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.setTextColor (BLACK, WHITE); <br>  display.print (y); <br>  display.display (); <br>  if (state1 == 1) <br>  { <br>  y ++; <br>  delay (100); <br>  } <br>  if (state3 == 1) <br>  { <br>  y--; <br>  delay (150); <br>  } <br><br>  if (y&gt; = 2020) <br>  {y = 2000;} <br><br>  if (state2 == 1) <br>  { <br>  modest ++; <br>  delay (150); <br>  state2 = 0; <br>  } <br>  } <br>  // +++++++++++++++++++++++ END SET YEAR ++++++++++++++++++++++ <br><br>  // ++++++++++++++++++++++ WRITE to DS1337 +++++++++++++++ <br><br>  if (modest == 7) <br>  { <br>  RTC.setSeconds (s); <br>  RTC.setMinutes (m); <br>  RTC.setHours (h); <br>  RTC.setDays (d); <br>  RTC.setMonths (mo); <br>  RTC.setYears (y); <br>  RTC.writeTime (); <br>  delay (1); <br>  lock = 0; <br>  modest = 1; <br>  mode = 1; <br>  val = 0; <br>  } <br>  } <br>  val ++; <br><br>  } <br>  val = 0; <br>  display.clearDisplay (); <br>  // delay (50); <br>  } <br><br>  void battery (void) <br>  { <br>  if (voltTime == 1) <br>  { <br>  volt = analogRead (vb); <br>  vbat = volt * 0.0045; <br>  voltTime = 5; <br>  } <br>  voltTime--; <br><br>  if (2&gt; vbat &amp;&amp; vbat&gt; = 1) {display.drawBitmap (0,0, bat_bmp0, 16, 7, 1);} <br>  if (2.1&gt; vbat &amp;&amp; vbat&gt; = 2) {display.drawBitmap (0,0, bat_bmp1, 16, 7, 1);} <br>  if (2.2&gt; vbat &amp;&amp; vbat&gt; = 2.1) {display.drawBitmap (0,0, bat_bmp2, 16, 7, 1);} <br>  if (2.3&gt; vbat &amp;&amp; vbat&gt; = 2.2) {display.drawBitmap (0,0, bat_bmp3, 16, 7, 1);} <br>  if (2.4&gt; vbat &amp;&amp; vbat&gt; = 2.3) {display.drawBitmap (0,0, bat_bmp4, 16, 7, 1);} <br>  if (2.5&gt; vbat &amp;&amp; vbat&gt; = 2.4) {display.drawBitmap (0,0, bat_bmp5, 16, 7, 1);} <br>  if (2.6&gt; vbat &amp;&amp; vbat&gt; = 2.5) {display.drawBitmap (0,0, bat_bmp6, 16, 7, 1);} <br>  if (2.7&gt; vbat &amp;&amp; vbat&gt; = 2.6) {display.drawBitmap (0,0, bat_bmp7, 16, 7, 1);} <br>  if (2.8&gt; vbat &amp;&amp; vbat&gt; = 2.7) {display.drawBitmap (0,0, bat_bmp8, 16, 7, 1);} <br>  if (2.9&gt; vbat &amp;&amp; vbat&gt; = 2.8) {display.drawBitmap (0,0, bat_bmp9, 16, 7, 1);} <br>  if (3&gt; vbat &amp;&amp; vbat&gt; = 2.9) {display.drawBitmap (0,0, bat_bmp10, 16, 7, 1);} <br>  if (3.1&gt; vbat &amp;&amp; vbat&gt; = 3) {display.drawBitmap (0,0, bat_bmp11, 16, 7, 1);} <br>  if (3.2&gt; vbat &amp;&amp; vbat&gt; = 3.1) {display.drawBitmap (0,0, bat_bmp12, 16, 7, 1);} <br>  if (4&gt; vbat &amp;&amp; vbat&gt; = 3.2) {display.drawBitmap (0,0, bat_bmp13, 16, 7, 1);} <br>  / * <br>  if (2&gt; vbat &amp;&amp; vbat&gt; = 1) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1);} <br>  if (2.1&gt; vbat &amp;&amp; vbat&gt; = 2) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (13,1, 13,1,1);} <br>  if (2.2&gt; vbat &amp;&amp; vbat&gt; = 2.1) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (13,1, 2,6,1);} <br>  if (2.3&gt; vbat &amp;&amp; vbat&gt; = 2.2) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (12,1, 3,6,1);} <br>  if (2.4&gt; vbat &amp;&amp; vbat&gt; = 2.3) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (11,1, 4,6,1);} <br>  if (2.5&gt; vbat &amp;&amp; vbat&gt; = 2.4) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (10,1, 5,6,1);} <br>  if (2.6&gt; vbat &amp;&amp; vbat&gt; = 2.5) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (9,1, 6,6,1);} <br>  if (2.7&gt; vbat &amp;&amp; vbat&gt; = 2.6) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (8,1, 7,6,1);} <br>  if (2.8&gt; vbat &amp;&amp; vbat&gt; = 2.7) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (7,1, 8,6,1);} <br>  if (2.9&gt; vbat &amp;&amp; vbat&gt; = 2.8) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (6,1, 9,6,1);} <br>  if (3&gt; vbat &amp;&amp; vbat&gt; = 2.9) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (5,1, 10,6,1);} <br>  if (3.1&gt; vbat &amp;&amp; vbat&gt; = 3) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (4,1, 11,6,1);  } <br>  if (3.2&gt; vbat &amp;&amp; vbat&gt; = 3.1) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (3,1, 12,6,1);} <br>  if (4&gt; vbat &amp;&amp; vbat&gt; = 3.2) {display.drawRect (0,2,2,4,1); display.drawRect (2,0,14,8,1); display.fillRect (2,1, 13,6,1);} <br>  * / <br>  display.setTextSize (1); <br>  display.setCursor (90.0); <br>  display.print (vbat); <br>  display.print ("V"); <br>  } <br><br>  void time (void) <br>  { <br>  h = RTC.getHours (); <br>  m = RTC.getMinutes (); <br>  s = RTC.getSeconds (); <br>  d = RTC.getDays (); <br>  mo = RTC.getMonths (); <br>  y = RTC.getYears (); <br><br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  display.setTextSize (1); <br>  display.setTextColor (WHITE); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.print (y); <br>  } <br><br>  void show_time (void) <br>  { <br>  display.clearDisplay (); <br>  display.setTextSize (3); <br>  display.setTextColor (WHITE); <br>  display.setCursor (0.20); <br>  if (h &lt;= 9) <br>  {display.print ("0");} <br>  display.print (h); <br>  display.print (":"); <br>  if (m &lt;= 9) <br>  {display.print ("0");} <br>  display.print (m); <br>  display.setTextSize (2); <br>  display.setCursor (90,28); <br>  display.print (":"); <br>  if (s &lt;= 9) <br>  {display.print ("0");  } <br>  display.print (s); <br>  display.setTextSize (1); <br>  display.setTextColor (WHITE); <br>  display.setCursor (40,50); <br>  display.print (d); <br>  display.print ('/'); <br>  display.print (mo); <br>  display.print ('/'); <br>  display.print (y); <br>  } <br></div></div><br><br>  At the end of the article there will be a link to all the necessary materials for self-made watches.  Several changes have been made to these materials, which should correct minor issues found in already made hours.  For example, the printed circuit board is fixed and now it does not require additional jumpers, the size of the board itself is also slightly increased, which made it possible to shift the micro USB connector closer to the watch case. <br><br>  The list of materials includes: <br>  - sketch <br>  - PCB (Sprint Layout) <br>  - 3D-model of the watch case (stl) <br>  - the necessary libraries for Arduino <br>  - basic electric circuit <br><br>  <a href="https://cloud.mail.ru/public/58q6/qJgf3QbqY">DOWNLOAD FILES</a> <br>  <a href="https://cloud.mail.ru/public/Dj2z/ps6UjKYp6">PCB file</a> <br><br>  Future plans: <br>  - replace ds1337 with ds3231 <br>  - add controller to charge the battery <br>  - add vibration motor <br>  - realize the work of alarms <br>  - replace the display connection from I2C to SPI <br>  - add BLE <br><br>  In conclusion, I want to say that on the basis of this device, you can implement many interesting and unusual devices and not all of them should be for hours.  But at the same time, the possibility of independent programming opens up wide possibilities for customizing watches and their interface.  Those.  you can actually use any font or image, various options for the location of elements on the screen, limited only by your imagination. <br><br>  Video, where you can look at the clock and their work, as well as learn more about their device. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/ZaAbz3e_7gY%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiR9a1nrxcm6pkbq_JpqqRhPQpQ9A" frameborder="0" allowfullscreen=""></iframe><br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/sBO4LEYzwpk%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi9jzDbu8Vz9pB-EujcSGfD0h330w" frameborder="0" allowfullscreen=""></iframe><br><br>  That's all for now.  I look forward to your questions and healthy criticism ... <br><br>  UPD.  An added PCB file will be added on Monday February 29th. </div><p>Source: <a href="https://habr.com/ru/post/368101/">https://habr.com/ru/post/368101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../368089/index.html">Service "Yandex.Taxi" earned in Minsk</a></li>
<li><a href="../368091/index.html">Russian cosmonauts do not drink water obtained from the urine of the crew</a></li>
<li><a href="../368093/index.html">Domestic igrostroy in business: arcade Creepy Road came out on Kickstarter</a></li>
<li><a href="../368097/index.html">In English Wikipedia found 272 mystifications, which existed for more than a year. Record - 10 years and 1 month</a></li>
<li><a href="../368099/index.html">Project "Eye" p.11</a></li>
<li><a href="../368103/index.html">Buzz Aldrin is developing a 25-year plan for the colonization of Mars</a></li>
<li><a href="../368105/index.html">In Europe, only a third of discarded electronics is recycled.</a></li>
<li><a href="../368107/index.html">Automatic home heating control with their own hands. Part 2</a></li>
<li><a href="../368109/index.html">The first rocket "Soyuz-2.1a" will be sent to the Vostochny cosmodrome on September 6</a></li>
<li><a href="../368113/index.html">Autowatering systems from drip to autolevel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Kings of the North" - the battle for gameplay</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Can i play tafle 
 Nine skills i know 
 I forget infrequently the runes 
 I keep books and accounts 
 I can ski on skis 
 Rowing and shooting well 
 F...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Kings of the North" - the battle for gameplay</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/6af/80f/d5a/6af80fd5a365964f6326382b551b36bc.jpg">  <i><b>Can i play tafle</b></i> <i><b><br></b></i>  <i><b>Nine skills i know</b></i> <i><b><br></b></i>  <i><b>I forget infrequently the runes</b></i> <i><b><br></b></i>  <i><b>I keep books and accounts</b></i> <i><b><br></b></i>  <i><b>I can ski on skis</b></i> <i><b><br></b></i>  <i><b>Rowing and shooting well</b></i> <i><b><br></b></i>  <i><b>From the arts, I know both ...</b></i> <i><b><br><br></b></i>  <i><b><a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B0%25D0%25B3%25D0%25B0_%25D0%25BE%25D0%25B1_%25D0%25BE%25D1%2580%25D0%25BA%25D0%25BD%25D0%25B5%25D0%25B9%25D1%2586%25D0%25B0%25D1%2585">The Orcnean Saga</a></b></i> <br><br>  The story I want to tell is full of mysteries, incomprehensible code, sleepless nights, <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25BB%25D0%25B5%25D0%25B9%25D0%25BF%25D0%25BD%25D0%25B8%25D1%2580">noise of feline steps ...</a> <br>  This is one of those stories in which the process is much more important than the result.  If you need a result, you can find it <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D2351">here</a> , but if you are interested in the details, what ... I am ready to talk about my ordeals. <br><a name="habracut"></a><br>  It all started as usual.  <a href="http://www.youtube.com/user/MrSultanRatrout">Sultan Ratrout</a> , a big fan of board games, found one of my videos on YouTube and asked me to develop for him a collection of the most famous games of the family of <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">checkers</a> .  The request surprised me.  To say that there are a lot of such programs means only a few understatement.  Checkers are available for every taste and for many different platforms.  In <a href="http://www.zillions-of-games.com/">ZoG</a> alone, <a href="http://www.zillions-of-games.com/">there</a> are more than 20 items.  The devil, as usual, was hidden in the details. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I already <a href="http://habrahabr.ru/post/253397/">wrote</a> that implementing checkers completely correctly and authenticly is not at all easy.  The rules for turning drafts into queens (sometimes quite complicated ones) and the ‚Äúmajority rule‚Äù (in its various interpretations) turn this development into a real test of attentiveness, and the complexity of implementing the ‚ÄúTurkish strike‚Äù rule generally deserves a separate discussion.  Alas, on closer examination, the ‚Äúcheck‚Äù programs for Zillions of Games turned out to be extremely far from ideal. <br><br>  The first sign was a bug I found in the <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D218">collection of</a> checkers from Uwe Wiedemann.  In its implementation of ‚ÄúRussian drafts‚Äù, the piece, which turned out to be in the zone of transformation during the battle, did not continue to move if the next piece could be taken only with the help of the queen.  I published a fix and thought to calm down on it, but looking at other options, I realized that it was easier to develop my own set of games than to correct all the errors in existing implementations.  Even the version from the ZoG developers themselves, supplied with the program, worked with monstrous errors! <br><br>  As a result, I decided to create my collection of checkers.  Of course, I began with a careful analysis of existing implementations.  Of these, he also took graphic resources, correcting minor flaws in a graphic editor (the same set of resources was already used by <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1363">several</a> <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1432">authors</a> ).  I learned a lot from the program code.  For example, in the "Turkish checkers", the lady, during the battle, it is forbidden to change the direction of motion to the opposite.  Here is how elegant it is implemented: <br><br><div class="spoiler">  <b class="spoiler_title">Fight lady</b> <div class="spoiler_text"><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> dama-king-jump ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">enemy</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? mark (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? (<span class="hljs-name"><span class="hljs-name">opposite</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) ) capture back (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> continuetype) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> dama-king-continue ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> not-last-from?) ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">enemy</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? mark (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? (<span class="hljs-name"><span class="hljs-name">opposite</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) ) capture back (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> continuetype) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) )) (<span class="hljs-name"><span class="hljs-name">game</span></span> (<span class="hljs-name"><span class="hljs-name">title</span></span> <span class="hljs-string"><span class="hljs-string">"Turkish Dama"</span></span>) ... (<span class="hljs-name"><span class="hljs-name">move-priorities</span></span> jumptype normaltype) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> King) (<span class="hljs-name"><span class="hljs-name">image</span></span> First <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerKingWhite.bmp"</span></span> Second <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerKingBlack.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">move-type</span></span> jumptype) (<span class="hljs-name"><span class="hljs-name">dama-king-jump</span></span> n) (<span class="hljs-name"><span class="hljs-name">dama-king-jump</span></span> e) (<span class="hljs-name"><span class="hljs-name">dama-king-jump</span></span> w) (<span class="hljs-name"><span class="hljs-name">dama-king-jump</span></span> s) (<span class="hljs-name"><span class="hljs-name">move-type</span></span> continuetype) (<span class="hljs-name"><span class="hljs-name">dama-king-continue</span></span> n) (<span class="hljs-name"><span class="hljs-name">dama-king-continue</span></span> e) (<span class="hljs-name"><span class="hljs-name">dama-king-continue</span></span> w) (<span class="hljs-name"><span class="hljs-name">dama-king-continue</span></span> s) (<span class="hljs-name"><span class="hljs-name">move-type</span></span> normaltype) (<span class="hljs-name"><span class="hljs-name">king-shift</span></span> n) (<span class="hljs-name"><span class="hljs-name">king-shift</span></span> e) (<span class="hljs-name"><span class="hljs-name">king-shift</span></span> w) (<span class="hljs-name"><span class="hljs-name">king-shift</span></span> s) ) ) )</code> </pre> <br></div></div><br>  The <b>last-from</b> predicate <b>?</b>  checks whether the current field is the initial field of the previous (partial) move.  If we cross such a field, then the direction of movement of the woman has changed to the opposite and the course cannot be performed.  Of course, such a check should not be performed within the framework of the very first partial move.  Here come the modes of progress.  The first move is carried out within the priority mode of <b>jumptype</b> and performs switching in <b>continuetype</b> , within which all subsequent moves must be performed.  It turned out (I did not know this before) that the explicitly assigned <b>continuetype is</b> not required to be mentioned in the list of priorities. <br><br>  Another pleasant surprise was the method of calculating the ‚Äúlong‚Äù move, when fighting a lady, when a lady, can stop not only on the field next to the knocked figure (as in ‚Äú <a href="http://thaichess.narod.ru/index/0-36">Thai drafts</a> ‚Äù), but also on any free field that follows.  It turned out that it is not necessary to write footcloths from ‚Äúcopy-paste‚Äù: <br><br><div class="spoiler">  <b class="spoiler_title">Possible description of the fight dyke</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump-1 ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump-2 ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) )) (<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump-3 ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) )) ...</code> </pre><br></div></div><br>  I recall that the problem is that the obvious implementation leads to an error in the process of generating a turn: <br><br><div class="spoiler">  <b class="spoiler_title">This code does not work!</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) capture $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) ))</code> </pre><br></div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/31a/fc2/2b7/31afc22b7f7141918463b8f9c0588e95.PNG"></div><br>  The correct implementation is somewhat reminiscent of the <a href="http://russian.joelonsoftware.com/Articles/BacktoBasics.html">Slamiell painter</a> .  From the point of possible completion of the move (several are generated in the cycle), it is necessary to return in the opposite direction and remove the first enemy figure encountered.  It's funny, but this is the only way it works! <br><br><div class="spoiler">  <b class="spoiler_title">Alternative solution</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> king-jump ( (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">enemy</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? mark (<span class="hljs-name"><span class="hljs-name">while</span></span> empty? (<span class="hljs-name"><span class="hljs-name">opposite</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) ) capture back (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> continuetype) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) ))</code> </pre><br></div></div><br>  If you smile, then we are moving in the right direction.  But hey, we haven‚Äôt considered the ‚ÄúTurkish strike‚Äù yet!  In order not to "take" the enemy pieces again, they need to somehow mark.  This can be done in two ways.  You can change the shape type, or use one of its attributes (the latter method is not available in <a href="http://www.zillions-of-games.com/cgi-bin/zilligames/submissions.cgi%3Fdo%3Dshow%3Bid%3D1452">Axiom</a> ).  Upon completion of the compound move, you can delete all previously marked shapes. <br><br><div class="spoiler">  <b class="spoiler_title">Turkish strike (use of attributes)</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> checker-captured-find mark (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> enemy? (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not</span></span> captured?)) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> more-captures true) ) ) back ) (<span class="hljs-name"><span class="hljs-name">define</span></span> checker-jump ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> captured?)) (<span class="hljs-name"><span class="hljs-name">set-attribute</span></span> captured? true) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> more-captures false) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? more-captures)) mark a0 (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">if</span></span> captured? capture) ) back ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">add</span></span> King) else (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) ) )) ... (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> Checker) (<span class="hljs-name"><span class="hljs-name">image</span></span> First <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerWhite.bmp"</span></span> Second <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerBlack.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">attribute</span></span> captured? false) (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">move-type</span></span> jumptype) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> nw sw ne) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> sw se nw) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> ne se nw) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> se ne sw) (<span class="hljs-name"><span class="hljs-name">move-type</span></span> normaltype) (<span class="hljs-name"><span class="hljs-name">checker-shift</span></span> nw) (<span class="hljs-name"><span class="hljs-name">checker-shift</span></span> ne) ) )</code> </pre><br></div></div><br>  For simplicity, here is the <a href="http://en.wikipedia.org/wiki/English_draughts">English version of</a> checkers.  The solution with the "long-range" ladies looks more complicated.  The most obvious moment in this code is the definition of the moment of completion of the compound move.  The solution is quite straightforward - to determine whether the move continues, we simply search for the figure that we can ‚Äúeat‚Äù further, in one of three directions (since, from the ZoG point of view, the directions are not interconnected, all three must be passed to the macro) .  This <b>should</b> work!  But it <b>does not</b> work: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/cDeY4SXHNFg%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhgmVoXh-lZBMXaCs1FJRqL8hmJphw" frameborder="0" allowfullscreen=""></iframe><br><br>  What's the matter?  Maybe something is wrong with the attributes?  Let's try changing the shape type: <br><br><div class="spoiler">  <b class="spoiler_title">Turkish strike (change of type of figures)</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> checker-captured-find mark (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> enemy? (<span class="hljs-name"><span class="hljs-name">empty</span></span>? $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? XChecker))) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> more-captures true) ) ) back ) (<span class="hljs-name"><span class="hljs-name">define</span></span> checker-jump ( $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? XChecker))) (<span class="hljs-name"><span class="hljs-name">change-type</span></span> XChecker) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> more-captures false) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? more-captures)) mark a0 (<span class="hljs-name"><span class="hljs-name">while</span></span> (<span class="hljs-name"><span class="hljs-name">on-board</span></span>? next) next (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">piece</span></span>? XChecker) capture) ) back ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">add</span></span> King) else (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) ) )) ... (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> Checker) (<span class="hljs-name"><span class="hljs-name">image</span></span> First <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerWhite.bmp"</span></span> Second <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerBlack.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">move-type</span></span> jumptype) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> nw sw ne) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> sw se nw) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> ne se nw) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> se ne sw) (<span class="hljs-name"><span class="hljs-name">move-type</span></span> normaltype) (<span class="hljs-name"><span class="hljs-name">checker-shift</span></span> nw) (<span class="hljs-name"><span class="hljs-name">checker-shift</span></span> ne) ) ) (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> XChecker) (<span class="hljs-name"><span class="hljs-name">image</span></span> First <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerWhite.bmp"</span></span> Second <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerBlack.bmp"</span></span>) )</code> </pre><br></div></div><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/31DTN-I04D4%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhgGKtuVaehehNL4EQqsC3MzGYmCGA" frameborder="0" allowfullscreen=""></iframe><br><br>  Already better!  At least this zombie is not trying to eat us!  That is exactly what this error looks like in the official Russian Drafts editorial from the developers of Zillions of Games.  The last piece taken is not removed from the board.  She certainly can not walk, but prevents the movement of other figures!  In order to figure out what's the matter, let's upload the protocol of this ‚Äúmini-game‚Äù to the ZSG file: <br><br><div class="spoiler">  <b class="spoiler_title">ZSG log</b> <div class="spoiler_text">  1. partial 2 Checker a5 - c7 = XChecker on b6 <br>  1. partial 2 Checker c7 - e5 = XChecker on d6 <br>  1. partial 2 Checker e5 - g7 = XChecker on f6 x b6 x d6 <br></div></div><br>  It's all in the last move.  We ‚Äúmark‚Äù the figure on the <b>f6</b> field for deletion, but do not delete it along with the others!  Obviously, the program simply cannot do this.  When using attributes, the log looks more complicated, but the essence remains the same.  We cannot remove a piece with which we did something within the same partial move.  Whether we changed the attribute or the type of the figure - it does not matter.  Immediate deletion of such a figure is incompatible with the capabilities of ZSG notation! <br><br>  The solution to the problem is obvious, although it does not make the code more ‚Äúreadable.‚Äù  You do not need to ‚Äúmark‚Äù the last figure, you just need to ‚Äútake‚Äù it: <br><br><div class="spoiler">  <b class="spoiler_title">Fight in Russian checkers</b> <div class="spoiler_text"><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> russian-checker-jump ( (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> captured?)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> enemy?) (<span class="hljs-name"><span class="hljs-name">verify</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> captured?)) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">verify</span></span> empty?) (<span class="hljs-name"><span class="hljs-name">set-flag</span></span> more-captures false) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">king-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">king-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) (<span class="hljs-name"><span class="hljs-name">king-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span>) else (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">2</span></span>) (<span class="hljs-name"><span class="hljs-name">checker-captured-find</span></span> $<span class="hljs-number"><span class="hljs-number">3</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? more-captures) (<span class="hljs-name"><span class="hljs-name">opposite</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">markit</span></span>) $<span class="hljs-number"><span class="hljs-number">1</span></span> ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? more-captures)) (<span class="hljs-name"><span class="hljs-name">opposite</span></span> $<span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> enemy? capture ) $<span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">capture-all</span></span>) ) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">in-zone</span></span>? promotion) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? more-captures) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> King jumptype) else (<span class="hljs-name"><span class="hljs-name">add</span></span> King) ) else (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">flag</span></span>? more-captures) (<span class="hljs-name"><span class="hljs-name">add-partial</span></span> jumptype) else add ) ) ))</code> </pre><br></div></div><br>  Having dealt with all these problems, I quickly ‚Äústamped‚Äù a gentleman's set of games, including mandatory <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D1%2583%25D1%2580%25D0%25B5%25D1%2586%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2588%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Turkish</a> , <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D1%2580%25D0%25BC%25D1%258F%25D0%25BD%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2588%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Armenian</a> , <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BD%25D0%25B3%25D0%25BB%25D0%25B8%25D0%25B9%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2588%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">English</a> and <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D1%2583%25D1%2581%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D1%2588%25D0%25B0%25D1%2588%25D0%25BA%25D0%25B8">Russian</a> checkers.  The exotic was represented by the <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B5%25D0%25BD%25D1%258B">Ossetian</a> and <a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25BE%25D0%25B1%25D0%25B8%25D1%2582">Khakass</a> checkers, but the collection still lacked a ‚Äúzest‚Äù. <br><br>  I decided to stake this position for the " <a href="http://gamesofword.ru/article/view-35.html">Northern Drafts</a> ".  This variant differs from the ‚ÄúRussian checkers‚Äù that are usual to us by just one rule: the ‚Äúeaten‚Äù lady does not get out of the board, but ‚Äúgoes down in rank‚Äù to ordinary checkers.  This seemingly small difference radically changes the nature of the game in the endgame.  Suffice it to say that two ladies quite easily catch one, even if it is on the ‚Äúbig‚Äù - the main diagonal of the board! <br><br>  The choice was made, it remains to bring it to life.  The first version played something like this: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/iSBLz_Qb7q4%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhh6FudRe07YcUCxr75C0RUTKZlvNg" frameborder="0" allowfullscreen=""></iframe><br><br>  Very brutal, but not quite as desired.  When there are only a couple of pieces in the game (like in <a href="http://en.wikipedia.org/wiki/Chu_shogi">Chu Shogi</a> ) that can ‚Äúeat‚Äù any opponent's piece and return to the site within one turn, it can be funny, but when there are many such pieces and they are long-range ... the gameplay seriously suffers.  It became clear that it was necessary to somehow prohibit the possibility of re-‚Äúeating‚Äù the figure during one move, but how to do it? <br><br>  In ZoG, the choice is small.  The <b>last-from</b> predicate <b>?</b>  , will not allow to solve the problem, as the woman can ‚Äúeat‚Äù the figure on the return movement and not reaching the starting field of the previous turn.  Positional flags, allowing to bind a boolean value to an arbitrary field, alas, did not fit.  There was a great temptation to use them, since the documentation guarantees their automatic cleaning at the beginning of each turn. <br><br>  Unfortunately, this clearing occurs at the beginning of each <b>partial</b> move and, as a means of transmitting information between partial moves, positional flags are completely useless!  Attributes remain.  You can mark ‚Äútaken‚Äù pieces by setting attributes, but in this case, we need to take care of clearing them between compound moves. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/mhw8se370fE%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhi30r5RYLReWGGGRZNooHn8P8QAXg" frameborder="0" allowfullscreen=""></iframe><br><br>  Another bug was connected with this (it was not easy to notice and localize it).  Although the attribute clearing was performed when the pieces were moved, the attribute of the shape that performed the move did not seem to be cleared.  The ZSG log again helped to deal with this (in the list of moves displayed by the program, information about changes in attribute values ‚Äã‚Äãis hidden): <br><br><div class="spoiler">  <b class="spoiler_title">ZSG log</b> <div class="spoiler_text">  1. partial 3 King d8 - a5 = Checker on c7 @ c7 0 1 <br>  1. partial 3 King a5 - e1 = Checker on c3 @ c3 0 1 <br>  1. Checker c7 - b6 @ c3 0 0 @ c7 0 0 <br>  2. partial 3 King e1 - a5 x c3 <br>  2. Checker b6 - c5 @ b6 0 0 <br></div></div><br>  In the third line you can see that the attributes are cleared, but the attribute is cleared at position <b>c7</b> , while the shape has already moved from this field to <b>b6</b> !  After making the necessary corrections, everything began to work as planned: <br><br><div class="spoiler">  <b class="spoiler_title">north-shift</b> <div class="spoiler_text"><pre> <code class="diff hljs">(define clear-all mark a0 (while (on-board? next) next (if (piece? Checker) (set-attribute captured? false) ) ) back ) (define north-shift ( (clear-all) $1 (verify empty?) (if (in-zone? promotion) (add King) else + (set-attribute captured? false) add ) ))</code> </pre><br></div></div><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Vz_GEFCWeA0%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhitx0PW47-AkMECqgnjxfpZbyTH9g" frameborder="0" allowfullscreen=""></iframe><br><br>  There was one more problem.  At the beginning of the game, the Northern Checkers were no different from the ‚ÄúRussians,‚Äù and you had to live to see the ladies.  Thus, the ‚ÄúNorthern Kings‚Äù variant was born, in which the game began with ladies!  The mass availability of long-range queens at the very beginning of the game, as well as their phenomenal vitality, provided the game with a completely unique, ‚Äúexplosive‚Äù gameplay.  I consider this game the ‚Äúpearl‚Äù of my collection: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/FmqjnYi_MuM%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhhTbqIixc2aNSI6JUKPsokRXHmPLw" frameborder="0" allowfullscreen=""></iframe><br><br>  On this joyous note could be finished.  In fact, the collection is ready, everything works, it has a couple of unique games.  But a few moments seriously darken my joy.  Firstly, these constant ‚Äúrake dances‚Äù make the code so confusing that I don‚Äôt vouch for the fact that there are no mistakes left in it (and it gnaws at night).  In addition, I did not manage to solve some of the problems. <br><br>  In Ossetian Kena, checkers can jump over friendly figures.  I would like to be able to interleave such moves with the battle of enemy figures in random order, but this does not work!  Even without taking into account the fact that for such moves ( <a href="http://habrahabr.ru/post/253397/">even theoretically</a> ), it is impossible to make the take mandatory, the very attempt to ‚Äúloop‚Äù the moves in this way leads to an immediate error. <br><br><div class="spoiler">  <b class="spoiler_title">Ossetian Kenes</b> <div class="spoiler_text"><pre> <code class="lisp hljs"> (<span class="hljs-name"><span class="hljs-name">piece</span></span> (<span class="hljs-name"><span class="hljs-name">name</span></span> Checker) (<span class="hljs-name"><span class="hljs-name">image</span></span> First <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerWhite.bmp"</span></span> Second <span class="hljs-string"><span class="hljs-string">"images/wiedem/CheckerBlack.bmp"</span></span>) (<span class="hljs-name"><span class="hljs-name">moves</span></span> (<span class="hljs-name"><span class="hljs-name">move-type</span></span> jumptype) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> n) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> e) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> w) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> s) (<span class="hljs-name"><span class="hljs-name">move-type</span></span> continuetype) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> n) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> e) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> w) (<span class="hljs-name"><span class="hljs-name">checker-jump</span></span> s) <span class="hljs-comment"><span class="hljs-comment">; (ken-jump-variant n) ; (ken-jump-variant e) ; (ken-jump-variant w) ; (ken-jump-variant s) (move-type normaltype) (checker-shift n) (checker-shift e) (checker-shift w) (ken-jump-variant n) (ken-jump-variant e) (ken-jump-variant w) (ken-jump-variant s) ) )</span></span></code> </pre><br></div></div><br>  It is necessary to remove these comments and everything breaks down!  Even if you mark friendly figures, forbidding repeated jumps over them, this does not help.  If we talk about the "marks", then the great success is that in none of the variants of the checkers is it necessary to prohibit the repetition of the passage through the empty fields.  This is good luck, since it is impossible to implement such a ban in ZoG (in any case, in a simple way).  Positional flags could help in this, but ... apparently not in our universe. <br><br>  ZoG, in turn, is always ready to put a new surprise: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/P0sRU19KCTA%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhicDJghF1X9xk3O0uol3Rr0vBrEow" frameborder="0" allowfullscreen=""></iframe><br><br>  Yes, yes, the program behaves differently depending on whether it is running under AI control or in manual mode!  Long-distance ladies, the rule of the majority and the Turkish strike - when all the "three riders" get together ... AI can start behaving strangely.  Moreover, even when I was shooting this video, the error did not manifest itself deterministically - sometimes one piece was taken, sometimes two.  I do not know how to deal with this.  We have to compromise with the conscience and disable one of the three options.  For example, in the "International drafts" had to abandon the "rule of majority". <br><br>  In any, even the largest, a barrel of honey, there is always a place for a small spoon of tar ... <br></div><p>Source: <a href="https://habr.com/ru/post/254947/">https://habr.com/ru/post/254947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254933/index.html">Sample test items for iOS developers</a></li>
<li><a href="../254937/index.html">Secrets of exporting from Blender to Unity</a></li>
<li><a href="../254939/index.html">A detailed look at the legacy of Leibniz</a></li>
<li><a href="../254941/index.html">Code Quality Visualization with PhpMetrics</a></li>
<li><a href="../254945/index.html">The digest of interesting materials for the mobile developer # 97 (March 30 - April 5)</a></li>
<li><a href="../254949/index.html">Static analysis of PHP code on the example of Symfony2 (part 2)</a></li>
<li><a href="../254951/index.html">Thorns around gold</a></li>
<li><a href="../254955/index.html">Morphological image processing. Lectures from Yandex</a></li>
<li><a href="../254957/index.html">Risks and metrics in test automation</a></li>
<li><a href="../254959/index.html">Ansible - let's try</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
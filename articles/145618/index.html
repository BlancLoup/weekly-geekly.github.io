<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JavaScript loader without define</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habr! 

 Everyone knows the solution to the problem of loading scripts. 
 For example Curl.JS, Require.JS, + popular frameworks can do this too. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JavaScript loader without define</h1><div class="post__text post__text-html js-mediator-article">  Hi Habr! <br><br>  Everyone knows the solution to the problem of loading scripts. <br>  For example Curl.JS, Require.JS, + popular frameworks can do this too. <br><br>  <b>MAIN UPDATE:</b> Everything was discussed in the comments.  Thank you <a href="http://habrahabr.ru/users/azproduction/" class="user_link">azproduction</a> and <a href="http://habrahabr.ru/users/nuit/" class="user_link">nuit</a> for ideological comments, and <a href="http://habrahabr.ru/users/ainu/" class="user_link">ainu</a> for moral support. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the comments it is clear that 100% is better to use <a href="https://github.com/azproduction/lmd">LMD</a> , because  there everything is the same as is told here, only there is dependency accounting, cache, etc.  And yes, it was invented much earlier, i.e.  was first! <br><br>  What is <a href="http://habrahabr.ru/post/145269/">LMD</a> : read respected <a href="http://habrahabr.ru/users/azproduction/" class="user_link">azproduction</a> . <br><br>  Under the cut there is a code that can be used for informational purposes to answer the question of why MAIN UPDATE was written, that is, why you should use LMD instead of what‚Äôs under the cut. <br>  It is also important that the 'with' operator is currently <a href="http://habrahabr.ru/post/120364/">Deprecated</a> . <br><br><a name="habracut"></a><br><br>  All this is written with reference to the <a href="http://tomdale.net/2012/01/amd-is-not-the-answer/">link</a> . <br><br>  Only the bootloader code is given, no additional aspects that are included in the LMD - no. <br><br>  <b>UPD:</b> done in an attempt to implement in the browser how <a href="https://developer.mozilla.org/en/XPCOM_Interface_Reference/mozIJSSubScriptLoader">mozIJSSubScriptLoader</a> and / or <a href="https://developer.mozilla.org/en/Components.utils.import">Components.utils.import</a> for Firefox extensions work. <br><br>  Ie, load the script, while redefining its scope. <br><br>  <a href="http://wentout.github.com/SubScriptLoader/">An example</a> . <br><br>  A couple of links to the initial source: <a href="http://jsfiddle.net/YEC3w/">One</a> and <a href="http://jsfiddle.net/Nh7uN/">Two</a> <br><br>  The final code for the script loader as a method for jQuery: <br><br><pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> jQuery, undefined </span></span></span><span class="hljs-function">)</span></span>{ jQuery.loadSubScript = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> url, scope, thisName, returnCallback </span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    scope    var scope = scope || window; //  var thisName = thisName || window; $.ajax( { url: url , type: 'GET' , dataType: 'text' , success: function( data ){ try{ //   ,    with var fns = new Function( 'with( this ){ return ' + Function.apply( null, [ data ] ) + '; }' ); //    with fns = fns.call( scope ); //    this var turn = fns.call( thisName ); //    callback,    returnCallback &amp;&amp; returnCallback( turn ); }catch(e){ alert(e); } } , error: function( jqXHR, textStatus, errorThrown ){ alert('Loader Error:\n' + errorThrown ); } } ); }; })( jQuery );</span></span></code> </pre> <br><br>  There is also <a href="">NOT a Plugin</a> in which the noConflict method is implemented, which allows to remove the loader code from the window (jQuery is still used for $ .ajax). <br><br>  What can be obtained using this code: <br><br><ul><li>  Just load the script into the global object: window. </li><li>  Download the script with the "substitution" scope: window + YourOwnScopObject. </li><li>  Download the script with the substitution of this. </li><li>  Returning something in callback, for example, simply by writing return in your loadable script. </li><li>  Get rid of define (). </li></ul><br><br>  Of course, if something will carry a <b>var</b> , then it will be inside the created circuit.  Without var, as it should be, it will go to window.  What are the methods of the object passed into the scope will be available without a dot.  With this - everything is as usual, in case of its substitution. <br><br>  Restrictions: local files in Google Chrome and Opera. <br>  For Chrome, it is treated by running with the key: --allow-file-access-from-files. <br><br>  But it is better to use LMD. <br><br>  Use on health! <br><br>  <b><a href="https://github.com/wentout/SubScriptLoader">GIT Link</a></b> <br><br>  Best Regards! <br><br>  PS: I do not know which license to choose, probably MIT + GPLv3. </div><p>Source: <a href="https://habr.com/ru/post/145618/">https://habr.com/ru/post/145618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145610/index.html">Emacs 24.1 Released</a></li>
<li><a href="../145612/index.html">There is a contact, no signal</a></li>
<li><a href="../145613/index.html">The Linaro project has achieved a significant increase in the performance of the Android OS</a></li>
<li><a href="../145615/index.html">How I opened a business account in the USA</a></li>
<li><a href="../145617/index.html">Why, why and how did I buy an apartment in California?</a></li>
<li><a href="../145619/index.html">Pixel identity crisis</a></li>
<li><a href="../145620/index.html">Battle Titans FreeSwitch vs. Asterisk - Performance Test</a></li>
<li><a href="../145621/index.html">Anubis PHP Encryption Algorithm</a></li>
<li><a href="../145623/index.html">Google closes most of Meebo‚Äôs products, including Meebo.com</a></li>
<li><a href="../145625/index.html">Google will be the default search engine in the Russian-language Firefox 14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
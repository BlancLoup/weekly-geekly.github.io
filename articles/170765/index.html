<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing an extension for Google Chrome (and publish it)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ladies and gentlemen! Today we will try to write and publish an extension for Google Chrome. It will translate the text entered by the user from Engli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing an extension for Google Chrome (and publish it)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/2b9/cfa/8ef/2b9cfa8efa2a6bd3bb109fb247ab8b74.png"><br><br>  Ladies and gentlemen!  Today we will try to write and publish an extension for Google Chrome.  It will translate the text entered by the user from English to Russian and vice versa. <br><a name="habracut"></a><br><br><h4>  The king issued a manifesto ... </h4><br>  (I advise you to create a directory so that the files are not lost.) <br>  So where does the expansion start?  Yes, from the manifesto (did you say that?).  Manifesto is a file formatted in JSON format, in which all application or extension resources are specified, different permissions (so permissions are translated? I‚Äôll go check on my translator ...), name, description, etc.  Now you will see the manifesto of our application, and then we will analyze it.  Name this file <b>manifest.json</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">01</span></span>{ <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-string"><span class="hljs-string">"manifest_version"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">04</span></span> <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-number"><span class="hljs-number">05</span></span> <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-number"><span class="hljs-number">06</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-string"><span class="hljs-string">"icons"</span></span>: { <span class="hljs-number"><span class="hljs-number">08</span></span> <span class="hljs-string"><span class="hljs-string">"16"</span></span>: <span class="hljs-string"><span class="hljs-string">"16x16.png"</span></span>, <span class="hljs-number"><span class="hljs-number">09</span></span> <span class="hljs-string"><span class="hljs-string">"32"</span></span>: <span class="hljs-string"><span class="hljs-string">"32x32.png"</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-string"><span class="hljs-string">"48"</span></span>: <span class="hljs-string"><span class="hljs-string">"48x48.png"</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-string"><span class="hljs-string">"128"</span></span>: <span class="hljs-string"><span class="hljs-string">"128x128.png"</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> }, <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">131</span></span> <span class="hljs-string"><span class="hljs-string">"permissions"</span></span>: [ <span class="hljs-number"><span class="hljs-number">132</span></span> <span class="hljs-string"><span class="hljs-string">"http://translate.yandex.net/*"</span></span> <span class="hljs-number"><span class="hljs-number">133</span></span> ], <span class="hljs-number"><span class="hljs-number">134</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-string"><span class="hljs-string">"browser_action"</span></span>: { <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-string"><span class="hljs-string">"default_title"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-string"><span class="hljs-string">"default_icon"</span></span>: <span class="hljs-string"><span class="hljs-string">"48x48.png"</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-string"><span class="hljs-string">"default_popup"</span></span>: <span class="hljs-string"><span class="hljs-string">"popup.html"</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> } <span class="hljs-number"><span class="hljs-number">19</span></span> }</code> </pre> <br>  So: <br>  2. Specify the manifest version (at the moment 2 is the latest version, 1 is no longer supported) <br>  4. Display name of the application <br>  5. Version of the application (does not include letters, only numbers and points. You are free to choose any format. 1 and 1.1, and 1.0.0.1 - everything is correct) <br>  7-12.  We describe the icons used in the application.  All of course must be in the specified directory.  ‚Äú16‚Äù means that the icon has a size of 16x16.  I took the icons from the site iconsearch.ru, but you can take any others. <br>  <b>UPD:</b> 131-133 - we ask permission to access the address of the translation.  This was not in the article initially, as it worked without it.  Most likely, this is a bug, which means you need to train yourself to use permissions, because somewhere it may work (as in this case), but somewhere it will not. <br>  14. In this line, we indicate that our application is an extension and it has an icon next to the address bar. <br>  15. The text of the tooltip when hovering over the icon. <br>  16. Standard icon.  It should have a size of 49x49, but since it is very specific, it is difficult to find an icon of this size, I use the icon 48x48 and Chrome itself will change its size.  Great, right? <br>  17. Here we indicate which html document will pop up when a button is clicked. <br><br>  So, with the manifesto done, it's time to write html <br><br><h4>  Let's mark the territory ... </h4><br>  Our document will be very simple.  One area for entering text, a submit button and a block for text output.  Unfortunately, the study of html is beyond the scope of our review, but I think that many of my readers are already familiar with it.  If you are not one of them, then simply copy this content of the Chinese diploma into your project.  Name this file <b>popup.html</b> <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"jquery.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"popup.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn_submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"result"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/storage2/20a/73d/19b/20a73d19b228acb4b3917304814d95c0.png"><br><br><h4>  What about interactivity? </h4><br>  Now let's move on to what our extension would not make sense to do - go to JavaScript!  I will use the jQuery library, despite the fact that it was possible to do without it in this project.  Download jquery.js from jquery.com and put it in the directory of our project (do not forget to rename it to jquery.js!). <br>  So, the actual code for the <b>popup.js</b> file is the heart of our extension. <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">01</span></span> $(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-number"><span class="hljs-number">02</span></span> $(<span class="hljs-string"><span class="hljs-string">'#btn_submit'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-number"><span class="hljs-number">03</span></span> e.preventDefault(); <span class="hljs-number"><span class="hljs-number">04</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input = $(<span class="hljs-string"><span class="hljs-string">'#input'</span></span>).val(); <span class="hljs-number"><span class="hljs-number">06</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-string"><span class="hljs-string">"http://translate.yandex.net/api/v1/tr.json/translate"</span></span>; <span class="hljs-number"><span class="hljs-number">08</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent = <span class="hljs-regexp"><span class="hljs-regexp">/[-]/i</span></span>; <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> language = (parent.test(input))? <span class="hljs-string"><span class="hljs-string">'ru-en'</span></span>:<span class="hljs-string"><span class="hljs-string">'en-ru'</span></span>; <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> $.getJSON(url, {<span class="hljs-attr"><span class="hljs-attr">lang</span></span>: language, <span class="hljs-attr"><span class="hljs-attr">text</span></span>: input}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-number"><span class="hljs-number">14</span></span> $(<span class="hljs-string"><span class="hljs-string">'#result'</span></span>).text(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> res.text) { <span class="hljs-number"><span class="hljs-number">16</span></span> $(<span class="hljs-string"><span class="hljs-string">'#result'</span></span>).text($(<span class="hljs-string"><span class="hljs-string">'#result'</span></span>).text() + res.text[i] + <span class="hljs-string"><span class="hljs-string">" "</span></span>); <span class="hljs-number"><span class="hljs-number">17</span></span> } <span class="hljs-number"><span class="hljs-number">18</span></span> }); <span class="hljs-number"><span class="hljs-number">19</span></span> }); <span class="hljs-number"><span class="hljs-number">20</span></span> });</code> </pre><br><br>  I will not dwell on everything, since learning JavaScript again is not our goal right now.  I will stop only on the main. <br>  7. In the variable write the address to which we can apply for translation.  It can be found in the Yandex API documentation. <br>  9-11.  Using all our knowledge in RegExp-ah, we determine the presence of Russian letters in the string.  If they are present, then we consider the text Russian. <br>  13. We form JSON for sending.  It includes the actual text and input language. <br>  14. We reset the text in the output block.  Suddenly there is something already written? <br>  15-17.  For the output, we need a cycle, because we will return the MASSIF lines of text.  This data can also be found in the API. <br><br>  With the code too finished.  Now you can check the extension on the local machine.  Open Chrome, Menu -&gt; Tools -&gt; Extensions.  At the very top, check the Developer Mode box, click Download unpacked extension, and indicate the path to our directory.  Voila!  You can use!  But how to bring this work of art to the masses? .. <br><br><h4>  Distributor required </h4><br>  Especially for us, Google came up with the Chrome Web Store, as well as a developer panel.  All so that we feel comfortable.  True, the service will have to pay $ 5.  Art requires sacrifice ... <br>  So, the developer toolbar is located at <a href="https://chrome.google.com/webstore/developer/dashboard">this</a> address.  Go to your Google account, and click the big button Add a new product. <br><img src="https://habrastorage.org/storage2/649/9c9/4cb/6499c94cbbd9692b9d0f23ab9f5f887b.png"><br><br>  We pack our directory (it is its very, not the contents) in a zip file.  We send it to the server. <br>  Before us appears a page of great beauty.  Fill in the fields, all recommendations appear on the right.  I will give advice only about advertising images.  If possible, make the smallest image, because the larger the images, the higher the search will be displayed on the Web Store page. <br><br><img src="https://habrastorage.org/storage2/8c1/977/d67/8c1977d671e97c17ae205adf3821af49.png"><br><br>  So thank you all.  A curtain! <br><br><h4>  Gained knowledge </h4><br>  Today we got acquainted with the basics of developing extensions for Chrome.  Here are the links that will help you in this difficult task: <br><br>  <a href="https://developer.chrome.com/extensions/devguide.html">Chrome Extensions Help</a> <br>  <a href="https://developers.google.com/chrome/web-store/">Web Store Help</a> <br>  <a href="http://api.yandex.ru/translate/">Help Translate Api</a> <br>  <a href="http://learn.javascript.ru/">Javascript tutorial</a> </div><p>Source: <a href="https://habr.com/ru/post/170765/">https://habr.com/ru/post/170765/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170755/index.html">Export favorites Habra in FB2 - high-speed PHP-version</a></li>
<li><a href="../170757/index.html">Master's program at the Academic University of the Russian Academy of Sciences: sharing experience</a></li>
<li><a href="../170759/index.html">Orchard CMS: software content of the site</a></li>
<li><a href="../170761/index.html">Presentation of new phones at the exhibition MWC-2013</a></li>
<li><a href="../170763/index.html">Is IPTV over Wi-Fi a problem? Absolutely no problem!</a></li>
<li><a href="../170767/index.html">More than plain vanilla scrum. Common practice with requirements</a></li>
<li><a href="../170769/index.html">Nokia 105 for 15 euros with a flashlight and a 800 mAh battery</a></li>
<li><a href="../170771/index.html">Laravel 4. Differences and comparisons</a></li>
<li><a href="../170773/index.html">Price free: Real Racing 3 needs to spend over $ 500</a></li>
<li><a href="../170777/index.html">How two weeks ?!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
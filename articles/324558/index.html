<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Huawei USG 6320. First View of Zisovod</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All tsiska, yes tsiska with its firewall. But here we have taken on the test of the ITU from Huawei. And fashionable ITU, a new generation. We looked,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Huawei USG 6320. First View of Zisovod</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/6b5/bcf/eb9/6b5bcfeb9610458e8ce8b376a34a5daa.jpg"></div><br>  All tsiska, yes tsiska with its firewall.  But here we have taken on the test of the ITU from Huawei.  And fashionable ITU, a new generation.  We looked, felt, decided to share first impressions.  I‚Äôll say right away that we didn‚Äôt carry out any load testing, we only got acquainted with the functionality. <br><a name="habracut"></a><br>  The model Huawei USG6320 came into our hands.  (Not to be confused with Zywall USG by the way from Zyxel). <br><br>  This is the second after the youngest model (USG6310) in the USG6000 lineup for small and medium businesses.  A little confused by the success stories of this solution on the manufacturer's website: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/220/3e5/b18/2203e5b18f5c4acebdd2721a16501ede.png"></div><br>  Anyway. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Appearance photo: <br><br><img src="https://habrastorage.org/files/ca7/211/37e/ca721137eefa401fac79fce4b1c4b4cd.png"><br><br>  Outside 8 gigabit ports and console port.  It would seem, everything is simple.  But the fun site <a href="http://e.huawei.com/">e.huawei.com</a> again warns: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a82/92b/5ff/a8292b5fffe546938bd67501876e8258.png"></div><br>  So.  Ports are deaf?  Seriously?  How does this affect packet transfer?  May not hear collisions in the environment?  Or will there be problems with Spanning Tree, Listening State - ‚ÄúA?  What?  BPDU come or not?  Repeat, can not hear! ".  Well, okay, if something goes wrong, I lend a hearing aid from my grandmother. <br><br>  Turn on the device, connect to the console.  After loading we have the command line.  Instead of conf t - system-view, instead of show - display.  Ok, you can live.  Of course, it‚Äôs not a good idea to mess around with an unfamiliar command line, I want to quickly see the GUI.  Therefore, we configure the IP address on the interface, check that the interface can be connected and that the web services are running, and open the browser. <br><br><div class="spoiler">  <b class="spoiler_title">Commands for verification</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/6af/194/78d/6af19478dfbf46ecb3992e67e3564ad3.png"><br><img src="https://habrastorage.org/files/51d/306/9da/51d3069dad69413e8e5e0979861f853c.png"><br></div></div><br>  The Web interface immediately kindly offers to go through a simple Wizard to set the initial screen parameters: IP addresses of the external and internal interfaces, connection to the provider, DHCP for the local network, etc. <br><br><div class="spoiler">  <b class="spoiler_title">Startup wizard</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/b1f/db9/de3/b1fdb9de362a47998c6e89d1b633bafc.png"><br></div></div><br>  Do not forget to check the box ‚ÄúDo not display this page upon the next login‚Äù, otherwise Huawei will kindly offer Startup Wizard after each connection to the Web interface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/437/3a0/f05/4373a0f053ef4135acc3afe5855ea033.jpg"></div><br>  By the way, as it turned out, if you enter the login / password several times when connecting to the device (web, ssh, telnet), Huawei takes offense for 10 minutes and stops communicating with you (picture of a shy Chinese).  Honestly, I immediately find out how this behavior is turned off, I did not succeed.  Well, okay, maybe the ports are deaf. <br><br><h4>  <b>Overview of the graphical interface and device capabilities</b> </h4><br>  Joking aside, more to the point.  Immediately, I note: Web-interface is logical and intuitive.  Everything works very quickly, especially when compared with the heavyweight Cisco FMC. <br><br>  At the top there are six tabs: <b>Dashboard</b> , <b>Monitor</b> , <b>Policy</b> , <b>Object</b> , <b>Network</b> , <b>System</b> : <br><br><img src="https://habrastorage.org/files/2a7/77f/b2e/2a777fb2e09e4855a0e56989822fc71a.png"><br><br>  <b>Dashboard tab</b> .  It's all clear.  Some infographics, device information, licenses, syslog messages, etc. <br><br><div class="spoiler">  <b class="spoiler_title">Dashboard screenshots</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/a73/fe0/1cd/a73fe01cdcf043e4a92acb20ec9e99f1.png"><br><img src="https://habrastorage.org/files/53a/08a/a58/53a08aa58bf84497ae91f01abf252701.png"><br><img src="https://habrastorage.org/files/c30/9f5/f95/c309f5f95a124e1d93cc23d44315f6b8.png"><br></div></div><br>  <b>Monitor tab</b> .  Here you can see information about current connections, some statistics. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshots Monitor</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/b15/b9d/dbd/b15b9ddbdf414a6ba24dcf1353155c9f.png"><br><img src="https://habrastorage.org/files/2ff/40a/5e4/2ff40a5e48ea4ec2bc01a7c403217495.png"><br></div></div><br>  Here are some diagnostic tools.  Nice that there is <br><br><div class="spoiler">  <b class="spoiler_title">Packet tracing</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/ec1/558/424/ec1558424e304c31bce7784bf0c52074.png"><br></div></div>  and <br><div class="spoiler">  <b class="spoiler_title">Packet capture</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/d4d/6b7/b58/d4d6b7b58db840d1b9817838f8adfaca.png"><br></div></div><br>  <b>Policy tab</b> .  The most important tab.  All traffic management policies are consolidated here: <br><br><ol><li>  <u><i>Security Policy</i></u> - large access list. <br><br><div class="spoiler">  <b class="spoiler_title">Classic tabular display</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/07e/b51/337/07eb513376d84303bf2fd6782940d21e.png"><br></div></div><br></li><li>  <u><i>NAT Policy</i></u> ‚Äî all necessary IP address translation options: dynamic NAT, server publishing, NAT exceptions, etc. <br><br><div class="spoiler">  <b class="spoiler_title">NAT</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/33a/208/98a/33a20898a578451c819ac5c889762891.png"><br></div></div><br>  Nuance.  There is no possibility to configure Destination NAT.  And this is sometimes useful.  For example, when, for some reason, the address of an external resource is firmly ‚Äúsewn up‚Äù on the service, and this same external resource moves to a different IP address.  Faced, it happens.  Well, it's the little things ... <br><br></li><li>  <u><i>Bandwidth Management and Quota Control</i></u> .  Cool, that is.  Highly demanded. <br><br></li><li>  <u><i>Proxy Policy</i></u> .  You can enable non-caching proxying.  The device can proxy user requests, that is, Huawei gets into a TCP session gap between the client and the server: <br><br><img src="https://habrastorage.org/files/8df/7be/c1a/8df7bec1ac0341fabc3725b5b561bb67.png"><br><br>  There are two proxying options: TCP Proxy and SSL Decrypt.  The last option is to decrypt SSL traffic.  Decryption works as standard, with certificate substitution.  Test failed: SSL Decrypt requires an additional non-realistic license.  Moreover, the policy can be configured, they just do not work. <br><br></li><li>  <u><i>Authentication Policy</i></u> .  Oooh, this is one of my favorite topics - user authentication, AD integration and all that.  In the policy settings, everything is simple: choose a traffic pattern and say whether to authenticate or not. <br><br><div class="spoiler">  <b class="spoiler_title">Auth policy</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/20f/cd1/031/20fcd10315184b798311bc44b28775aa.png"><br></div></div><br>  How exactly to authenticate users is configured in another tab - Objects - in the settings of the authentication domain.  But once in another tab, then we will return to this issue later. <br><br></li><li>  Remain <u><i>Security Protection</i></u> and <u><i>ASPF</i></u> .  I will not stop in detail.  In short, Security Protection includes various protection against DDoS attacks, flooding, IP Sweep, Port Scanning, defragmentation, blacklists, and so on and so forth. <br><br>  ASPF (application specific packet filter) is an inspection of packets for opening additional sessions through a firewall.  For FTP, SIP, H323, etc. <br></li></ol><br>  <b>Objects tab</b> .  Here everything that is subsequently applied in policies is configured (on the Policy tab).  In particular, everything related to Content Security.  For example: <br><br><ol><li>  <i><u>Antivirus settings</u></i> <div class="spoiler">  <b class="spoiler_title">Screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/c2a/8d8/919/c2a8d8919d394f7eb0fbeb831494cab5.png"><br></div></div><br></li><li>  <i><u>IPS settings</u></i> <div class="spoiler">  <b class="spoiler_title">Screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/8db/c6f/ecc/8dbc6fecc1b7431a92cbfcfa08614a40.png"><br><img src="https://habrastorage.org/files/42b/5aa/bc4/42b5aabc41284e8496c1ec27df34516d.png"><br></div></div><br></li><li>  <i><u>URL filtering profile</u></i> <div class="spoiler">  <b class="spoiler_title">Screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/04b/624/571/04b6245718e84d2f877130c5e5a7bb5b.png"><br></div></div><br></li><li>  <i><u>Email Protection</u></i> <div class="spoiler">  <b class="spoiler_title">Screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/8f8/a80/49c/8f8a8049cd5e413586c0677476dfe49d.png"><br></div></div><br></li><li>  <i><u>Etc.</u></i> </li></ol><br>  <b>Network tab</b> .  Here we set up our interfaces, routing and VPN. <br><div class="spoiler">  <b class="spoiler_title">Network</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/58f/cc3/44d/58fcc344d6b94c87a66fb3d0bd6bcbdd.png"><br></div></div>  I will not dwell here in detail, I will mention only a few points: <br><br><ol><li>  <u><i>Interfaces</i></u>  By default, all interfaces are routed.  But any interface can be made switched, configured as access or as trunk.  You can add interface vlan, subinterface, aggregate ports.  In general, in terms of interfaces, everything is very, very flexible.  This is a plus. <br><br></li><li>  <u><i>Routing</i></u>  There is a PBR, there are options for balancing on WAN ports.  You can add tracking to static routes.  From dynamic protocols are present RIP, OSPF and BGP. <br><br></li><li>  <u><i>VPN</i></u> .  There are L2TP, GRE, DSVPN.  The latter is an analogue of DMVPN in tsiska.  Stop.  But where is IPsec?  Where is SSL VPN?  I remember exactly what I saw in the bulletin data on IPsec and SSL VPN.  Ok, we study the user manual.  We find the following phrase: <br><br>  <i>The IPSec VPN and SSL functions are in accordance with Russian laws.</i> <br><br>  Gee.  Are there no options to use these services in Russia?  - Of course there is.  As it turned out, we got a piece of hardware from the PWE (payload without encryption) software.  That is, as NPE (no payload encryption) at tsiska.  In order not to receive permission from the FSB, such devices are imported.  To start encryption, full-fledged software is simply downloaded and installed.  By the way, without problems, you can enter a piece of hardware with encryption officially - with obtaining permission from the FSB to import.  In this case, the delivery time will simply increase. </li></ol><br>  <b>System tab</b> .  There is nothing interesting here - standard system settings: time, SNMP, administrator accounts, logging, licenses, updates, upgrades, etc.  In general, the narrative is limited to a screenshot. <br><br><div class="spoiler">  <b class="spoiler_title">Screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/3ce/a79/449/3cea79449fec42ba8bd23a994b31605a.png"><br></div></div><br>  <b>Let's go back to the Security Policy</b> and see them in more detail.  This is the place where all the functions of the device are combined.  Click Add and see what can be configured in terms of filtering traffic. <br><br><div class="spoiler">  <b class="spoiler_title">Add Security Policy</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/dcf/d84/a01/dcfd84a01fe544799bcd266c49e22a6e.png"><br></div></div><br>  The first options are classic firewall: zones and IP addresses.  Just below - Services.  These are port numbers.  Everything is standard. <br><br>  More interesting options. <br><br><ol><li>  <b>User</b> .  If an authentication domain is configured, you can select existing users and user groups in this tab.  In my example on the device the basis from corporate AD is tightened. <br><br><div class="spoiler">  <b class="spoiler_title">User</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/b69/140/2a7/b691402a79e74ccab06c331dd26b43e3.png"><br></div></div><br>  Additional options <i>User -&gt; Access Mode</i> .  If authentication is performed using a third-party access server - Terminal Security Management (TSM), you can monitor users depending on how they connect to the network. <br><br><div class="spoiler">  <b class="spoiler_title">User ‚Üí Access Mode</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/a54/397/fe1/a54397fe17ef47ba9641619986a18e1c.png"><br></div></div><br>  Additional options <i>User ‚Üí Device</i> - an indication of the TSM server.  As I understand it, TSM is an analogue of Cisco ISE.  Allows you to implement 802.1x, provides control of connection to the network of end equipment.  Cool. <br><br></li><li>  <b>Application</b> .  Required for ITU new generation.  Allows you to select various Internet applications. <br><br><div class="spoiler">  <b class="spoiler_title">Application</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/e37/7fc/933/e377fc933fcb491ca310fff0e95d5dfd.png"><br></div></div><br>  Existing application signatures can be found in more detail in the Objects tab. <br><br><div class="spoiler">  <b class="spoiler_title">Application list</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/dd3/b5c/b8d/dd3b5cb8dcd642f98f7995bcd42216df.png"><br></div></div><br>  It is seen that the applications are categorized and ranked by risk.  It is possible to create signatures of your own applications. <br><br>  The abundance of specific Chinese applications catches the eye.  Here are some funny names: <br><br><img src="https://habrastorage.org/files/e20/f37/b77/e20f37b7782e4959a0e76820fbff1ed5.png"><br><br>  And indeed, how often in Russia we hear ‚ÄúWaiHuiTong does not work for me‚Äù, or we suggest that the authorities visit DaZhiHui.  In general, an exclusive and irreplaceable functionality for our realities. <br><br></li><li>  <b>Scheduling</b> is another nice option. <br><br><div class="spoiler">  <b class="spoiler_title">Scheduling</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/021/d52/133/021d521335cb4bcea086110ed9ad7c55.png"><br></div></div><br></li><li>  <b>The remaining options</b> are for content security. <br><br><div class="spoiler">  <b class="spoiler_title">Content security</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/388/6f6/6b0/3886f66b012c4feea7c5c146bd6fe87f.png"><br></div></div></li></ol><br>  As you can see, the device has a powerful set of content security tools: <br><br><ul><li>  file antivirus; </li><li>  IPS; </li><li>  URL filtering; </li><li>  File transfer control; </li><li>  Protection against information leakage; </li><li>  Additional application control.  This again refers to the transfer of files and information within specific applications. </li><li>  Email filtering, including integrated anti-spam. </li></ul><br>  In general, the functionality of the device is very wide.  The device not only fits perfectly with the definition of a new generation of ITU, but can also compete in the UTM segment.  At first glance, everything is cool.  But how effective the presented functionality is and how efficiently each module works out is the topic of deeper research.  I do not want to go into boring arguments here, because now it‚Äôs just about first impressions about the device. <br><br><h4>  <b>Some settings</b> </h4><br>  So, with the capabilities of Huawei more or less familiar.  Let's go to the settings and tests. <br><br>  <b>Consider authentication</b> .  As promised, I‚Äôll deal with integration with AD in a little more detail.  Who cares, I ask under the cat. <br><br><div class="spoiler">  <b class="spoiler_title">AD integration</b> <div class="spoiler_text">  First you need to configure the Authentication Server.  Select the type of LDAP server. <br><img src="https://habrastorage.org/files/74a/ce2/7bd/74ace27bd71f4079acafab9c7ae4462c.png"><br>  Set the parameters of the LDAP server. <br><img src="https://habrastorage.org/files/fdc/360/4f4/fdc3604f484a46f4bb47f7c49fd2e7ac.png"><br>  By the way, by default, in the ‚ÄúUser Filtering Field‚Äù field, Huawei suggests using cn.  For my account in CN = Boris Uskov.  And I was pleasantly surprised that Huawei is not experiencing any problems with Cyrillic.  Cyrillic is perfectly displayed in the policy settings.  Moreover, during testing, when in the authentication process you enter into the login window "Boris Uskov" - authentication is successful.  However, for convenience, I replaced the User Filtering Field with sAMAccountName and began to use my usual AD login. <br><br>  After filling in the parameters, we acquire Detection and check that the connection with the LDAP server is established successfully. <br><br><img src="https://habrastorage.org/files/5e5/012/fc5/5e5012fc5c9c4b359da111de5f498349.png"><br>  Now that we have established a connection with the LDAP server, we can pull up the user and group directory on Huawei so that we can use the names in the policy settings.  This is done in the User Import menu on the Server Import tab. <br><img src="https://habrastorage.org/files/e85/e41/31e/e85e4131ef85492da9087b4e487db1c5.png"><br>  Here you need to create a profile to import users from the directory. <br><img src="https://habrastorage.org/files/8af/972/218/8af9722189cc483e8b7cdf12f89fae3e.png"><br>  It remains to configure the Authentication domain. <br><img src="https://habrastorage.org/files/e5a/a51/e1f/e5aa51e1f1e344c9a64c5b66ad210593.png"><br>  Now in the User / Group and Security Group menu there are users from the directory. <br><img src="https://habrastorage.org/files/094/821/dea/094821dea14f41b0a97384caf0d264b6.png"><br>  All is ready.  Now in the Security Policy settings you can use the names of users and groups in your directory, and in the Authentication Policy settings you can enable authentication. <br></div></div><br>  So, we are connected to AD via LDAP, users from the directory are pulled to the device.  Now let's see what authentication options are available.  This can be done in the menu Authentication Item. <br><br><div class="spoiler">  <b class="spoiler_title">Authentication Item</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/984/633/0b1/9846330b1d2c47b798da3f984deb1bea.png"><br></div></div><br>  By default, active user authentication through the built-in portal works.  It can be customized.  You can use a third-party portal for authentication. <br><br>  Active authentication is not very convenient, since the user will have to manually enter a username / password to access the Internet.  Huawei offers some options for Single Sign On (SSO). <br><br><div class="spoiler">  <b class="spoiler_title">SSO Configuration</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/7df/c90/530/7dfc90530f9041718c188db12f56f438.png"><br></div></div><br>  For AD SSO, there are two options for passive authentication - to install an agent on a computer in a domain or on a domain controller (well, this is a classic), or to listen to the exchange of authentication messages between a client machine and AD.  Moreover, if the authentication packets do not pass through Huawei, we can mirror this traffic to the selected port (see the Receive a Copy of Authentication Packets setting, Receiving Interface setting in the screenshot above).  I'll tell you right away how this kitchen works - I didn‚Äôt have time to check it.  Hope that works. <br><br>  Note that active authentication using Kerberos / NTLMSSP is not supported.  Terminal server authentication is also not provided. <br><br>  The last thing I would like to mention in terms of authentication is convenient to view active users.  This is the Online User menu. <br><br><div class="spoiler">  <b class="spoiler_title">Online user</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/3bb/d6a/c4c/3bbd6ac4cd2f4ab18fb3a9b034137612.png"><br></div></div><br>  From here you can see who and when successfully passed the authentication, to which groups the user belongs.  Here you can disconnect and lock users. <br><br>  <b>Let's do a test</b> .  Tiny test of NGFW functions.  And we will round out. <br><br>  Traditionally, we check the possibility of blocking soc.  networks for different user groups from AD.  Create two rules in the Security Policy: in_out_admins and in_out_users.  According to the first rule, members of the AD group IT department will have unlimited access to the Internet.  According to the second rule, all remaining users will be banned from the URL category social.  network. <br><br><div class="spoiler">  <b class="spoiler_title">Policy setting</b> <div class="spoiler_text">  First, we activate all possible trial licenses.  Term - for 2 months. <br><img src="https://habrastorage.org/files/bcc/351/a52/bcc351a526304a4d8fcaded29572dd00.png"><br>  Next, connect the device to the database URL. <br><img src="https://habrastorage.org/files/44d/d59/887/44dd598875294343917b74b27339807d.png"><br>  Now we set up the filtering URL profile, which we will call block_social_nets. <br><img src="https://habrastorage.org/files/f76/4c9/6aa/f764c96aa0a34395b6a6f2462691ee0e.png"><br>  Now everything is ready for setting up two Security Policy. <br><img src="https://habrastorage.org/files/7bb/b72/f20/7bbb72f20e604bd6aa350b4b979ed67f.png"><br><img src="https://habrastorage.org/files/bbd/57e/429/bbd57e42997c486e9d3796c5ce7decde.png"><br>  All is ready. <br></div></div><br>  Checking what happened.  Open the browser on the laptop for Huawei and go to ya.ru.  We are redirected to the authentication portal: <br><br><img src="https://habrastorage.org/files/1cf/aa5/bee/1cfaa5beefd541e98d2c45cc95cedfe0.png"><br><br>  We enter first under the account of a regular user (not an IT department) and check the availability of social services.  networks (must be blocked). <br><br><img src="https://habrastorage.org/files/95c/cab/44a/95ccab44a42346e8af1d7852c49555ed.png"><br><br>  Hurray, vk.com is blocked.  Of course, the End-User-Notification is as austere as possible, but still. <br><br><img src="https://habrastorage.org/files/c22/ed1/01d/c22ed101d28f4c06a4e34a98260fb0ac.png"><br><br>  Everything is OK, normal flight.  So, now facebook.com: <br><br><img src="https://habrastorage.org/files/0be/765/59b/0be76559b4374b8899243e99cc5ad844.png"><br><br>  Oh, what are you, dear ... <br><br>  Same with hi5.com. <br><br><img src="https://habrastorage.org/files/75c/ef0/530/75cef053033d47df832eab050beee21a.png"><br><br>  Well, there are obvious blunders.  Well, we do not despair.  And what if you add a social lock.  networks not only as URL categories, but also as Internet applications.  We try.  Add a policy to the Security Policy. <br><br><div class="spoiler">  <b class="spoiler_title">Add policy</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/979/421/9e8/9794219e8adf450d986f0fb488cd07b1.png"><br></div></div><br>  We try again.  Uuuvala, access to facebook.com and hi5.com disappears: <br><br><img src="https://habrastorage.org/files/fcf/390/ffe/fcf390ffe1e74f3685c3d3d8ec094a51.png"><br><br>  True, the End-User-Notification is also not displayed ... Well, nothing, well, let's survive. <br><br>  Now we try to go under another uchetkoy.  This time from the IT department.  Script access to social.  networks should appear if Huawei does not mess up group membership.  First disconnect the current user. <br><br><img src="https://habrastorage.org/files/b9d/c0e/c27/b9dc0ec27a3547f88c1efd0c5a5cfe8d.png"><br><br>  We are authenticating again on the portal.  We try vk.com, facebook.com, etc .: <br><br><img src="https://habrastorage.org/files/fde/4af/40e/fde4af40e3af44af929b508e6dec6a16.png"><br><br>  Well, everything is cool, access works! <br><br><h4>  <b>What did not like</b> </h4><br>  It would be great to see user sessions on Huawei: who goes where, what URLs are visiting, why the session is blocked, etc.  But the only thing I saw was the Session Table on the Monitoring tab: <br><br><div class="spoiler">  <b class="spoiler_title">Session table</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/67a/dd6/64f/67add664fae744c49ed30015d776157a.png"><br></div></div><br>  This table is not informative.  There are only IP addresses, ports, zones, the work of NAT and the name of the policy under which the transaction falls.  No usernames, no URL, no categories, no applications.  There is not even an Action column!  That is, it is not clear whether the transaction was allowed or dropped.  Searching the table is, of course, just as worthless. <br><br>  No, no, I understand perfectly, all this information can be collected from user tables, from syslog messages, etc.  But still, NGFW without the built-in event analysis and at least some reports are built - it seems to me that it is not serious. <br><br>  We began to find out.  They explained to us that the two low-end models of the line (USG6310 and USG6320) do not really have an integrated monitoring tool.  These models are positioned for branches.  And monitoring should be in the center.  As a separate monitoring and management system LogCenter, eSight module.  You can send all the logs there and from there make centralized traffic reports, users, URLs, etc. <br><br>  Older models, starting with USG6330, have full built-in monitoring.  Only the device must be equipped with HDD for storing logs.  As an example, we were sent a screenshot of the Monitoring tab: <br><br><div class="spoiler">  <b class="spoiler_title">Screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/67e/67b/040/67e67b040ef64910ba7d36593a737f18.png"><br></div></div><br><h4>  <b>How much is cho?</b> </h4><br>  The piece of iron we tormented costs <b>$ 1,202</b> . <br><br>  A bundle that includes the device and 1-year license-subscription IPS-AV-URL will cost <b>$ 1,586</b> . <br><br>  An interesting point licensing scheme.  To open the remaining options, namely, content security (file control, DLP, antispam, SSL decryption), you need a LIC-CONTENT license, which costs 1 cent.  As explained to us, this is also due to export restrictions in various countries.  For example, in Korea, the use of SSL decryption is limited. <br><br>  Of course, the license-subscription IPS, AV, URL is a separate position, for 1 or 3 years.  Line items on SSL VPN. <br><br>  The youngest piece of hardware USG 6310 will cost <b>$ 809</b> . <br>  Bundle IPS-AV-URL - <b>$ 1,193</b> . <br><br>  Older piece of iron - USG6330 - <b>$</b> 2,268. <br>  Bundle IPS-AV-URL - <b>$ 2,997</b> . <br>  Plus, for full monitoring will require HDD.  At 300 GB - <b>$ 494</b> , At 600 GB - <b>$ 555</b> . <br><br>  All prices are RPL, no discounts. <br><br><h4>  <b>Conclusion</b> </h4><br>  So, Huawei USG6320.  Pros: <br><br><ul><li>  Convenient intuitive and fast Web-based interface; </li><li>  Functionality: <br><br><ul><li>  Flexible configuration of interfaces, routing; </li><li>  Wide range of content security functionality; </li><li>  Different user authentication options. </li></ul></li></ul><br>  Minuses: <br><br><ul><li>  Lack of built-in monitoring tools and reports.  Only relevant for low-end models USG6310 and USG6320. </li></ul><br>  Nuances  As usual, the devil is in the details.  Yes, the functionality is very wide.  But, if we start digging deeper into each module, nuances will come out.  Here are some examples: <br><br><ul><li>  URL filtering.  On the simplest test, the flaws got out: facebook.com and hi5.com are blocked only by filtering applications.  At the same time, we lose End-User-Notification. </li><li>  Authentication.  No Kerberos, NTLMSSP, terminal server authentication is not supported. <br></li><li>  Ips.  Yes, there are signatures.  There are preconfigured policies - some generalized recommendations for the network.  But Huawei does not collect information about your network.  Accordingly, it cannot adjust policies for specific tasks, ensure the reduction of False Negative, False Positive.  I'm not talking about the correlation of events. <br></li><li>  Email filtering.  Antispam.  In fact, it's about black-and-white lists, and anti-spam engine, which works on the principle of on / off.  Reputation senders?  Custom quarantine?  Application Verification?  No no no.  I think, not one sane administrator would not put Huawei USG as the only means of protecting a corporate mailer. <br></li><li>  etc. <br></li></ul><br>  But all this is not so bad.  The competitors are all the same.  Some functions work out very clearly, some added to the device purely nominally. <br><br>  As a result, the first impression is positive.  The solution can compete, moreover, both in the NGFW segment and in the UTM. </div><p>Source: <a href="https://habr.com/ru/post/324558/">https://habr.com/ru/post/324558/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324548/index.html">.NET programming language development strategy</a></li>
<li><a href="../324550/index.html">Source Code Analysis Another World</a></li>
<li><a href="../324552/index.html">JNI and Delphi. Examples</a></li>
<li><a href="../324554/index.html">Open Data Council: plans of Rosleskhoz and Rospatent and disclosure of cartographic data</a></li>
<li><a href="../324556/index.html">Welcome to the ‚Äúiron‚Äù hakaton in Skolkovo</a></li>
<li><a href="../324560/index.html">Sparta - penetration testing system</a></li>
<li><a href="../324562/index.html">Creating cross-platform applications with React Native</a></li>
<li><a href="../324564/index.html">Development of R & D projects continues: launch of Wolfram Language 11.1</a></li>
<li><a href="../324566/index.html">Publisher Peter. Spring sale</a></li>
<li><a href="../324568/index.html">Blockchain will change the world: but what will people do?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
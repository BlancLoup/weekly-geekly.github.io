<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I screwed reCaptcha to PHPBB 2 under Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous note, I already wrote about the simple method of distorting the standard ‚Äúcaptcha‚Äù PHPBB 2, for the purpose of protection against auto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I screwed reCaptcha to PHPBB 2 under Windows</h1><div class="post__text post__text-html js-mediator-article"> In the <a href="http://handy-notes.blogspot.com//2007/04/phpbb-captcha-phpbb.html">previous note,</a> I already wrote about the simple method of distorting the standard ‚Äúcaptcha‚Äù PHPBB 2, for the purpose of protection against autoposting and bots, and, skeptically, some did not belong to this method, it still works and successfully fulfills its mission by separating ‚Äúcutlets from flies. " <br><br>  Today I would like to talk about another effective method of killing two birds with one stone.  I will link reCaptcha to PHPBB 2, and even on the Windows platform. <br><a name="habracut"></a><br>  What is <a href="http://recaptcha.net/">reCaptcha</a> ? <br>  I doubt very much that you have not heard about it yet, but at least you could see the usual ‚Äúcaptcha‚Äù.  Those who are not familiar at all about how the method of recognizing human actions from computer actions (bot, spam posting programs, etc.) works out can be fluently familiar with the term <a href="http://ru.wikipedia.org/wiki/CAPTCHA">Captcha</a> and find out about <a href="http://ru.wikipedia.org/wiki/CAPTCHA">reCaptcha</a> and understand why you will kill two birds with one stone - yours and someone else's. <br><br>  Too lazy to click?  I can summarize: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      reCaptcha was born at the university walls of Carnegie Mellon University and the indirect reason for its creation was the problem of digitizing books for the <a href="http://www.archive.org/">Internet Archive</a> project, when OCR systems did not cope with their task due to the strong distortion of the source text and failed to perform 100% recognition. <br><br>  The essence of the technique is as follows: two words are offered to you in the form of a standard captcha, one is known in advance by the system, i.e.  already recognized, the other is not.  If you correctly recognize the known, then the system assumes that you may have correctly entered the one that has not yet been recognized.  For better accuracy, this word is proposed for recognition several more times by other users of the system.  This way you help digitize books and protect against bots. <br><br>  Actually, the idea itself is not new, I recall that Google, and in particular Google Images, has already actively used the solution for attracting human Internet resources for image recognition and tagging. <br><br>  Thus, if you decide to tie this miracle to your PHPBB, and you can use it not only there, but wherever you want (the official site already has links <a href="http://recaptcha.net/resources.html">to a bunch of ready-made modules</a> for Wordpress, Drupal, vBulletin, etc.) , then you need to perform <a href="http://recaptcha.net/plugins/phpbb/">several steps</a> , which will be discussed. <br><br>  In general, two modules are now available for PHPBB - <a href="http://www.phpbb.com/community/viewtopic.php%3Ff%3D16%26t%3D588059">one</a> for installation on the registration page and the <a href="http://www.phpbb.com/community/viewtopic.php%3Ff%3D16%26t%3D588297">other</a> for guest posting.  I will consider the installation only for the registration page, because  guest posting is always disabled.  (Principle: ‚ÄúIf you want to say something sensible and you want something to listen to you, please introduce yourself,‚Äù removes many problems) <br><br>  So, let's begin. <br>  <a href="http://code.google.com/p/recaptcha/downloads/list%3Fq%3DPB2-Latest">Download the latest module</a> , unpack the archive and copy the files recaptchalib.php and usercp_register.patch to the PHPBB directory - includes, and the file profile_add_body.tpl.patch to the directory of your templates (skins, skins ... I don‚Äôt know what you call them), I have For example, this is without options - templates / subSilver /. <br>  According to the instructions we are trying to patch the PHPBB code.  Go to the includes, and without a hint of a catch, we launch the magic command: <br><br> <code>patch -b usercp_register.php &lt; usercp_register.patch <br></code> <br>  and get the answer: <br>  "Patch" is not internal or external <br>  command, executable program or batch file. <br><br>  from which it is quite obvious that we are not such ‚Äúcool programmers‚Äù who always have such wonderful utilities as patch, diff, etc. at hand, and the ‚Äúmanufacturers‚Äù of mods for PHPBB are probably so bogged down in Linux that they thought without needs to explain how this is easy to do under Windows. <br><br>  Well, you will have to install a magic patch utility, if there is none.  It can be taken either from the <a href="http://www.cygwin.com/">Cygwin</a> project, or <a href="http://sourceforge.net/project/showfiles.php%3Fgroup_id%3D23617%26package_id%3D32165">directly from here</a> from GnuWin32. <br><br>  Install it, run the command again and get a new error: <br> <code>patching file usercp_register.php <br> Assertion failed: hunk, file ../patch-2.5.9-src/patch.c, line 354 <br> <br> This application has requested the Runtime to terminate it in an unusual way. <br> Please contact the application's support team for more information. <br></code> <br>  In order to understand the cause of the problem, I had to very actively "dig" on the Internet.  Although, as it turned out, the problem is in sight and lies in the Unix format of the usercp_register.patch and profile_add_body.tpl.patch files (Unix lines end with one LF character, whereas in Windows you need two CR + LF).  Therefore, in Windows, the file format must be converted to the "desired", for example: <br><br> <code>more usercp_register.patch &gt;usercp_register.new.patch <br> more profile_add_body.tpl.patch &gt;profile_add_body.tpl.new.patch <br></code> <br><br>  Everything, finally, after all this, you can safely perform the patching, adding a few parameters: <br><br> <code>patch -lb usercp_register.php -i usercp_register.new.patch <br> patch -lb profile_add_body.tpl -i profile_add_body.tpl.new.patch <br></code> <br><br>  With the installation finished, proceed to configuration and launch. <br><br>  <a href="http://admin.recaptcha.net/">We register</a> on the reCaptcha site, add our domain to the profile and get private public and private keys, which we insert into the corresponding values ‚Äã‚Äãof the variables $ recaptcha_public_key and $ recaptcha_private_key, located in the usercp_register.php file (the one in the includes / folder). <br><br>  Now the last important chord, we make reCaptcha look like in Russian ( <a href="http://recaptcha.net/apidocs/captcha/client.html">you can even customize it at your leisure</a> ). <br><br>  I simply added the following to the top of the profile_add_body.tpl file: <br><br> <code>&lt;script&gt; <br> var RecaptchaOptions = { <br> lang : 'ru' <br> }; <br> &lt;/script&gt; <br></code> <br><br>  That's all, you should get something like this reCaptch'i (be healthy :)): <br><img src="https://habrastorage.org/getpro/geektimes/post_images/7c4/939/085/7c493908555f4b67ced31d2f4efb01be.gif"><br><br>  Source: <a href="http://handy-notes.blogspot.com/2007/11/phpbb-recaptcha.html" title="reCaptcha + PHPBB 2 for Windows">Notes on hand</a> </div><p>Source: <a href="https://habr.com/ru/post/16297/">https://habr.com/ru/post/16297/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162957/index.html">Payments to DealExtreme (www.dx.com) are now available via WebMoney</a></li>
<li><a href="../162961/index.html">Would you buy a paid and stable Linux distro?</a></li>
<li><a href="../162963/index.html">New courses on Windows Server 2012 on the MVA portal</a></li>
<li><a href="../162965/index.html">The most stupid domain dispute of the year</a></li>
<li><a href="../162969/index.html">How to choose an investor and present a project to him: checklist, rake and delusions</a></li>
<li><a href="../162977/index.html">Hey, marketers, what's wrong with you? Or about promoting free apps.</a></li>
<li><a href="../162979/index.html">Another Dropbox clone with the ability to install your own server or ownCloud vs. Seafile</a></li>
<li><a href="../16298/index.html">2008 could be a breakthrough year for Linux</a></li>
<li><a href="../162981/index.html">War and the world of technology business at TechCrunch Moscow 2012</a></li>
<li><a href="../162983/index.html">Visualization of presentations in the style of IT-companies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
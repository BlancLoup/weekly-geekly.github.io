<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Useful Wordpress plugins. OptionTree - site settings page</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Due to the fact that most of the sites I develop are created using Wordpress CMS and have to constantly deal with non-trivial tasks, I decided to shar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Useful Wordpress plugins. OptionTree - site settings page</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/2d4/6a3/bf8/2d46a3bf87864d83a5d6bc979ef668bf.jpg"><br><br>  Due to the fact that most of the sites I develop are created using Wordpress CMS and have to constantly deal with non-trivial tasks, I decided to share with you the experience of using various plug-ins.  Both free and paid, and try to adhere to this format: one article - one plugin.  I will try to consider only the development that really deserves attention, and in my first story I will tell you about OptionTree - a great, in my opinion, solution for creating a page with user settings for the site. <br><a name="habracut"></a><br><h1>  What are user settings? </h1><br>  Wordpress templates (themes) that we can use on our site very often allow us to customize some additional parameters, such as the color of the headers.  All paid topics that I had to use significantly expand the functionality of the administrative panel with a separate interface.  Below I give an example of such an extension, please see. <br><br><img src="https://habrastorage.org/files/21a/656/1ec/21a6561ec9b8414b95cbdba7e16048f5.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When a unique website is created (by uniqueness, I mean a website that uses a template designed specifically for the client with a unique design and functionality), it is often necessary to create an opportunity for administrators to change certain parameters.  Almost always it is necessary to give the opportunity to change the logo file, some elements on the main page, social networking icons, the background color in the ‚Äúbasement‚Äù of the site, etc.  This option for developers is provided by the OptionTree plugin, which can be downloaded for free from the official Wordpress site. <br><br><h1>  After installation... </h1><br>  By installing and activating the plugin, we, conditionally, get two parts: one for website developers, the other for users.  The first part is available from the menu item ‚ÄúOptionTree‚Äù - ‚ÄúSettings‚Äù, which appears after the activation of the plug-in on the left in the administrative part of Wordpress.  Feel free to click there and get a unique interface to form a set of custom fields that will be available to users in the second part of the plugin - ‚ÄúAppearance‚Äù - ‚ÄúTheme Options‚Äù. <br><br><img src="https://habrastorage.org/files/213/cf7/1a6/213cf71a6b9c4eba855e9c91da62b8c9.jpg"><br><br><h1>  Theme Options UI Builder </h1><br>  So, how to create settings?  Under a separate setting, I will mean some field that will be available to the user, the site administrator for editing.  UI Builder allows you to create sections or sections, let's call it better so that within these or other settings will be located.  In the figure above, I gave an example of settings consisting of two sections: ‚ÄúBasic‚Äù and ‚ÄúServices‚Äù.  Those.  it is assumed that in the ‚ÄúGeneral‚Äù section some general settings of the site will be placed, and in the ‚ÄúServices‚Äù section - specific to the services page.  Let's see how the sections look to the user.  Go to the "Appearance" - "Theme Options" and - hurray!  Here it is the settings page! <br><br><img src="https://habrastorage.org/files/259/904/b44/259904b449ec43859899374a91a70e39.jpg"><br><br>  On the left we see sections that can be switched, on the right - a set of settings inside the section.  Sections are created using Theme Options UI Builder on the button ‚ÄúAdd section‚Äù, and for the section you must enter its title and unique identifier.  Let's create the Advanced section and add a few settings there. <br><br><img src="https://habrastorage.org/files/8c0/c15/ac8/8c0c15ac8af84737a186853c984eaec7.jpg"><br><br>  All changes, of course, are recorded by clicking on the ‚ÄúSave Changes‚Äù button.  Now we will add a setting for the user, well, for example, the color of the headers.  Click ‚ÄúAdd setting‚Äù and, see which set of fields is available for selection.  It can be said huge!  Select "Colorpicker" and enter a title and unique identifier.  Be careful with identifiers, it is by a unique identifier that then in the template code we will be able to access the value of this field. <br><br><img src="https://habrastorage.org/files/e66/b23/b5e/e66b23b5e8cc45f0a499a076c70af7c1.jpg"><br><br>  Let's see what is now available to the user for editing: a new section and a new setting have appeared, the ‚ÄúHeader color‚Äù field, which the user can now edit in a convenient way.  Look, I will not dwell on the full list of fields available for creation, it is, of course, in the documentation for the plugin and on the official website of the developers.  If, however, some fields cause you interest - write, I will update this publication with a description of one or another type of proposed fields.  In principle, the field name understands its meaning, but, I repeat, if something causes you difficulties, feel free to contact me, I will definitely explain. <br><br><img src="https://habrastorage.org/files/529/dca/c56/529dcac569e64ee3b29500083e9be33c.jpg"><br><br><h1>  Editing the template </h1><br>  Now we, as developers, need to make changes to the site template in order to get the value of a field that the user has entered or selected.  For this is responsible some function, an example of the use of which for our choice of the color of the headings, I give below.  Moreover, I note that the options for using this plug-in can be a huge variety, in the example I have given, the header style of the document will now be displayed inside the header.php file of the template, namely, their color, depending on the h_color field value. <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> h1,h2,h3,h4,h5,h6 { color: </span><span class="php"><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span></span><span class="xml"><span class="php"> </span></span><span class="hljs-keyword"><span class="xml"><span class="php"><span class="hljs-keyword">echo</span></span></span></span><span class="xml"><span class="php"> ot_get_option( </span></span><span class="hljs-string"><span class="xml"><span class="php"><span class="hljs-string">"h_color"</span></span></span></span><span class="xml"><span class="php">); </span></span><span class="hljs-meta"><span class="xml"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span></span><span class="xml">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Those.  the function ot_get_option ($ option_id, $ default) is responsible for outputting the field value, the parameters of which are the field identifier that we, as developers, set ourselves; in our case, we output the value of the h_color field.  The second parameter of the function is the output format, let's look at this in more detail.  For example, we need to make an option that allows the user to create their own set of icons for social networks.  For this we will use the List Item field (in the illustration below). <br><br><img src="https://habrastorage.org/files/d73/695/da7/d73695da73b34482aa076ecf369762f2.jpg"><br><br>  This field allows you to create a set of repeating fields, when the user can add the same parameters within the same setting.  A little bit incomprehensible, I will try to explain and then show in the code how it works.  In our case, we assign the social_icons identifier to the List Item field and inside this field (note that there is another ‚ÄúAdd setting‚Äù button) we will add two fields: an icon file and a link.  The type of the first field will be Upload, the type of the second - Text.  The first field id will be icon_image, the second one will be icon_link. <br><br><img src="https://habrastorage.org/files/1b5/433/293/1b543329398040408fc7fc1a2dd0ba95.jpg"><br><br>  What will the user get?  Now he can add several social networking icons by clicking on the ‚ÄúAdd new‚Äù button on the settings page.  Moreover, note that the number of such settings is now unlimited and depends only on the user. <br><br><img src="https://habrastorage.org/files/f58/fee/b8d/f58feeb8d17042eba1261ae3875d7a63.jpg"><br><br>  In order to display such a complex field in the template, it is necessary to use a slightly different output format, below - a piece of PHP code for such a case.  I will try to explain with comments what is happening. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( function_exists( <span class="hljs-string"><span class="hljs-string">'ot_get_option'</span></span> ) ) { <span class="hljs-comment"><span class="hljs-comment">//    //    social_icons   $icons = ot_get_option( 'social_icons', array() ); if ( ! empty( $icons ) ) { //    , ..    foreach( $icons as $icon ) { echo '&lt;a href="'.$icon['icon_link'].'"&gt;&lt;img src="' . $icon['icon_image'] . '" alt="' . $icon['title'] . '" /&gt;&lt;/a&gt;'; //     } } } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br><br><h1>  In custody </h1><br>  There are really a lot of types of fields that you can use, the plug-in developers did their best: it's the choice of date, the choice of color, you can create image galleries, switches, etc.  By combining such fields and correctly displaying them in a template, the site developer will provide the user with a convenient interface for changing certain settings.  I note that in one of the latest sites I had to create more than 50 different fields so that customers could change the colors of headlines on the site, texts on the main page, change the number of news items displayed on the page, edit contacts and a map of the passage and many others. </div><p>Source: <a href="https://habr.com/ru/post/258503/">https://habr.com/ru/post/258503/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258489/index.html">OpenEMS modeling basics</a></li>
<li><a href="../258491/index.html">64-bit code in 2015: what's new in diagnosing possible problems?</a></li>
<li><a href="../258495/index.html">About data transmission via audio jack</a></li>
<li><a href="../258499/index.html">OWASP TOP-10: A Practical View of Web Application Security</a></li>
<li><a href="../258501/index.html">Free functional test webinar from TestCafe</a></li>
<li><a href="../258505/index.html">Branch model and git module management for a large project</a></li>
<li><a href="../258507/index.html">Transistor amplifier class A do it yourself</a></li>
<li><a href="../258509/index.html">‚ÄúWhispering‚Äù neighbor through chanspy [FreePBX]</a></li>
<li><a href="../258513/index.html">How I once hacked an online casino</a></li>
<li><a href="../258515/index.html">How I wrote a simple application for Android / iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
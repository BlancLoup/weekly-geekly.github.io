<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How easy it is for an artisan to dream with a 3D core</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How to use the geometric 3D-core when developing applications for CAD, says Valery Golovanev, analyst and programmer, application developer for KOMPAS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How easy it is for an artisan to dream with a 3D core</h1><div class="post__text post__text-html js-mediator-article">  How to use the geometric 3D-core when developing applications for CAD, says Valery Golovanev, analyst and programmer, application developer for KOMPAS-3D.  With lyrical introduction and deep immersion in the world of mechanical transmissions. <br><br><img src="https://habrastorage.org/webt/rb/ok/iv/rbokiv2qopdlse-telyivhpvybm.jpeg" alt="image"><br><a name="habracut"></a><br>  My great-great-great-great-grandfather Efim Stepanovich (a plowman, a cooper and a joiner), my great-grandfather Trifon Efimovich (a plowman and a carpenter) and my grandfather Mikhail Trifonovich (a blacksmith, a carpenter, a joiner, a cooper) were artisans.  And I'm a master man.  Engineer and amateur carpenter. <br><br>  It is difficult for any craftsman ... It is difficult without interesting tasks, it is difficult when there are not enough opportunities for their implementation.  In the character of a real artisan person, to set in front of you, sometimes seemingly little doable, tasks and implement them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When six years ago, in the summer of 2012, I returned to my offspring - the KOMPAS-Shaft design library for bodies of rotation (now the application ‚ÄúShafts and 3D mechanical transmissions‚Äù for KOMPAS-3D), then I printed a pair of circular tooth teeth on my IP stamp .  At that moment I only dreamed that someday I could make them in 3D - it was rather a kind of symbol.  With age, you treat the signs and symbols of fate more closely ... The goal was materialized! <br><br><h1>  <font color="#00B2FF">From the worm wheel to hypoid gear in KOMPAS-3D</font> </h1><br>  How did it all start?  With desire!  I really wanted to give the designer real 3D-models of mechanical gears, and not some kind of ‚Äúsimilarity‚Äù, so that you can: <br><br><ol><li>  Produce a gear or worm wheel or sprocket using a 3D model.  Or konchku with a circular tooth, or (oh dream ...) a hypoid pair. </li><li>  To see in the 3D-assembly not conditional ‚Äúcrocosybras‚Äù, but real models. </li><li>  And further ... And why, in fact, it is necessary to focus in mechanical gears on the possibility (limitation) of the usual technology?  It is wrong to infringe a design with technology.  It is necessary to make the right gear with the optimal 3D-geometry of the active working surfaces from the point of view of operation, and the technology should ensure their production.  And this technology, called additive, is already there!  Modern industrial 3D printers make it possible for metal to print fully loaded products, and experiments go far: details created by an additive method soon will be an ordinary phenomenon in a machine-building product, if not mass, then in small-scale - for sure. </li></ol><br>  It took about three years and in the spring of 2015 I decided to make a real worm wheel using the API KOMPAS.  The principle of implementation in this task was clear to me for a long time: it is necessary to sweep the workpiece with a tool, that is, an imitation of machining in KOMPAS-3D.  Not to say that it was easy.  Cutting a set of multiple tool positions is incorrect and long.  It is necessary to form a set of surfaces of the instrument positions and create an envelope surface of the cutout along them.  Which in general happened, but it worked very slowly. <br><br>  In addition, it was necessary to add realism to the process, that is, to take into account the tolerances in the formation of 3D geometry.  In general, having solved one problem, I wanted more - greater accuracy, measurements of the worm wheel tooth and the formation of callouts in the drawings with the profile of this tooth (what if the toolmakers want to make measuring templates?).  By the way, in the same year, at my factory, Kazzincmash produced two pairs of worm wheels for my models, which were successfully put in work units and received positive feedback. <br><br><img src="https://habrastorage.org/webt/ro/aj/p8/roajp8b_d3i0nwdjm4u2cwpcdts.png" alt="image"><br><br><img src="https://habrastorage.org/webt/uf/lz/7g/uflz7gu7qvcu8f9-7clwwj-su7y.jpeg" alt="image"><br><br>  Go ahead!  In the fall of 2015, with the filing (or kick-off) of Vladimir Panchenko, the head of the KOMPAS-3D Application division, and under the care of Alexey Sultanov, I began to study programming on the C3D core, on which KOMPAS-3D was built.  The goal is to get freedom!  And I got it.  I was no longer limited by the number of operations and procedures performed.  Everything happened fast enough.  At the exit, I had a body - an array of cutouts from the workpiece of a worm wheel.  Well, then everything is simple: the boolean operation and the worm wheel is ready. <br><br> <a href=""><img align="right" src="https://habrastorage.org/webt/sl/a1/ec/sla1ec3pzepon3dzd4w0qqzzlgu.png"></a> <br>  Nikolay Golovanov, Head of C3D Labs Development <br><blockquote>  <i>Some applications of the KOMPAS-3D system, including the application ‚ÄúShafts and mechanical 3D transmissions‚Äù, work directly with the geometric core C3D.</i>  <i>This allows application developers to approach their tasks more flexibly by expanding the functional (working with low-level functions) and building geometric objects.</i> <i><br><br></i>  <i>If you are writing an application for KOMPAS-3D and you want to use C3D features directly, it makes sense to contact the kernel that is built into KOMPAS-3D itself.</i>  <i>This method has the only limitation: it is necessary to use only C ++, since COMPASS itself is written in this language.</i>  <i>If you decide to work with a separate copy of the kernel inside your own application, then C # and, in some cases, JavaScript will be available to you.</i> <i><br></i> </blockquote><br>  This was followed by cylindrical external engagement.  It would seem simple, and yet in the case of the helical wheel and the screw cut operation in API KOMPAS-3D, it was also built for a long time.  Now these gears can be formed with a real backing. <br><br>  Well, at the end of 2015, the process of work on circular tooth teeth started. <br>  The algorithm at that time was worked out on the API COMPAS.  The first models with not very good geometry were formed before the day of pure time.  Here, one sweeping surfaces did not do.  The conical bevel gears were created, and it was necessary to form a wheel, having processed it with a prototype gear-cutting head.  Then, using the obtained 3D geometry, form and save a prototype of a gear tool, remove controlled dimensions from all of this and transfer them to a drawing.  Further, already on the gear, given that it turned out to be ideally rolling, it was necessary to localize the contact, i.e., to ensure the correct position and size of the contact patch in the gear. <br><br>  Difficult and very interesting task.  Occasionally, Nikolai Golovanov and his team ruled according to my remarks the C3D functional.  Thus, my horse was also a good test for the core. <br><br> <a href=""><img align="right" src="https://habrastorage.org/webt/sl/a1/ec/sla1ec3pzepon3dzd4w0qqzzlgu.png"></a> <br>  Nikolay Golovanov, Head of C3D Labs Development <br><blockquote>  <i>Recently, in the geometric core C3D, Loft-surfaces, constructed by sections, have undergone significant processing.</i>  <i>They were used to simulate the contact points of gears.</i> </blockquote><br>  Konichki on my models were made repeatedly at different enterprises and work in real nodes.  The localization algorithm has been tested. <br><br><img src="https://habrastorage.org/webt/mh/eg/dy/mhegdycruaydnexfkp-je3ls67w.png" alt="image"><br><br>  But it was hard to stop at that.  I did not like this localization.  It was too difficult to provide it.  And in the spring of 2018 came the idea of ‚Äã‚Äãa more ‚Äúsimple‚Äù method of localization.  Actually, the idea is not mine, I spied it in the materials of the Klingelnberg company - they have this called <b>profile and lengthwise crowning</b> . <br><br><img src="https://habrastorage.org/webt/tq/lv/yd/tqlvyda5sfepvrzwjxjyprkatxi.png" alt="image"><br><br>  I called it ‚Äúmake a tooth with a mound,‚Äù which is what happened.  In each section of the profile of the notch, its recalculation was made, and the mound was a success.  Localization coefficients have become simpler and easier to understand. <br><br><img src="https://habrastorage.org/webt/cn/oa/kg/cnoakgrrqg6kooipmmmndabcyz4.png" alt="image"><br><br>  Briefly about the result: a contact patch, and this is a set of instant contact sites on a gear tooth in one cycle of its rotation = 360 / number of gear teeth, NOW ALWAYS is in the middle of the active tooth surface (at the top of the hillock), its size is more than 60% the entire surface. <br><br><blockquote>  What it gives: <br><br><ul><li>  transmissions will be more durable and reliable </li><li>  reduced noise in the transmission </li><li>  the transmission will be less sensitive to mounting errors. </li></ul></blockquote><br>  To make them, however, so far it will turn out only on the CNC, but in the future, additive technologies will also be tightened. <br><br>  Well, the curtain ... This year, the dream transfer is realized, my most difficult dream today is the hypoid gears.  Much that had to be done for this ... Six years on the way after returning to the development of CAD.  Although in fact the way began in 1991 with a custom project to create software for calculating bevel gears with a circular tooth. <br><br><img src="https://habrastorage.org/webt/sv/ic/dw/svicdwd7zh9sjpxcy6ngnmsl3ki.png" alt="image"><br><br>  Naturally, the tooth "knoll" is implemented in them. <br><br><img src="https://habrastorage.org/webt/z0/x-/hg/z0x-hgbugjb5y0ze7ugdepnhk4e.png" alt="image"><br><br> <a href=""><img align="right" src="https://habrastorage.org/webt/hl/da/gz/hldagzyl3cirnwkb6krw4et_3h8.png"></a> <br>  Vladimir Panchenko, Head of the KOMPAS-3D Application Division, ASCON <br><blockquote>  <i>The use of the nucleus in the application "Shafts and mechanical transmissions" prompted the recall of "Kazzincmash."</i>  <i>It was obvious to me that it was possible to build quickly, it remained only to convince Valery of this.</i>  <i>An aggravating circumstance was that Valery did not like C ++, and the use of C3D functions in the context of KOMPAS-3D is possible only in this programming language.</i>  <i>I had to do the layout, thanks to Alexey Sultanov.</i> <i><br><br></i>  <i>A simple translation of the code into the forehead immediately gave a tangible gain in speed: the exact model of the tooth of the worm wheel was built in 10 seconds.</i>  <i>The worm wheel was built on the API for about an hour.</i> <i><br><br></i>  <i>Well, after Valery's skill allowed to create and konchiki with a circular tooth.</i> <i><br></i>  <i>This is how we raised the project ‚ÄúShafts and mechanical gears‚Äù to a whole new level.</i> </blockquote><br><h1>  <font color="#00B2FF">How the 3D core works in mechanical gear modeling</font> </h1><br>  The most common operations are used from the kernel functional: create a plane, construct a sketch / surface / intersection of surfaces, etc. <br><br>  For example, consider the sequence of operations required to form a 3D model of a bevel-wheel cut-out with circular teeth (the wheels, not the gears): <br><br><ol><li>  We form the surfaces of the cones - the separating cone, the cone of the peaks and the cone of the depressions.  To do this, planes are created at the corresponding calculated distances and sketches of circles of calculated diameters are built on them, and cones are already drawn along them. </li><li>  We build the points of the centers of the dividing cone and the cone of the depressions. </li><li>  Next, a tangent plane to the cone of the troughs (1) and a plane along the midpoint of the wheel in the trough (2) are formed.  The intersection of the plane (1) and the XOY plane forms the axis of intersection (3), and the intersection of the plane (2) and the plane (1) forms the axis of intersection (4). </li><li>  At the intersection of these axes there will be a point through which the top of the gear-cutting head passes. <br><br><img src="https://habrastorage.org/webt/qf/xa/jl/qfxajlw1nnioaigzxjtz3zcputi.png" alt="image"><br></li><li>  From this point, knowing the average angle of inclination of the teeth (just at this point), we calculate the center of the gear-cutting head. </li><li> The projections of the half-arc of the gear-cutting head onto the cones of the depressions (5) and the pitch cone will be our guides.  On this guide (5) the base surface of the cut will be built (loft in three sections with the calculated profile of the gear cutter). <br><br><img src="https://habrastorage.org/webt/cj/4q/ze/cj4qzejlmvcgr_cxrmhsvkgvxgc.png" alt="image"><br></li><li>  Further, having a procedure for performing a similar operation at different angles of swing of the gear-cutting head when machining the wheel, we obtain an array of cut surfaces (6). <br><br><img src="https://habrastorage.org/webt/jf/9u/5c/jf9u5cagksg35xzvhbixmurqkgu.png" alt="image"><br></li><li>  After that, in a sufficient number of sections (not less than 20) in normal planes to the guide (the projection of the half-arc of the gear-cutting head on the dividing cone) will be obtained sets of lines of intersection of the array of surfaces. <br><br><img src="https://habrastorage.org/webt/l8/ov/63/l8ov63sza8si96zktfykh8uud9w.png" alt="image"><br></li><li>  Mathematical processing of the obtained set of intersection lines will allow us to obtain their envelope, which will be one of the sections of the actual tooth cut-out of the wheel. <br><br><img src="https://habrastorage.org/webt/8j/lo/ve/8jloveaer9an-em2m86tvsumpj4.png" alt="image"><br></li><li>  The totality of these sections of the cut-outs will be the final loft - cut-out of the tooth of the wheel. <br><br><img src="https://habrastorage.org/webt/45/so/-_/45so-_oq_pvnzrego_j5i5htvjk.png" alt="image"><br><br><img src="https://habrastorage.org/webt/up/g5/jc/upg5jculy8hprguk1qejuivdfpg.png" alt="image"><br><br><img src="https://habrastorage.org/webt/mh/8h/p-/mh8hp-1dyyccbqhipyqc6_d_pr0.png" alt="image"><br></li><li>  The resulting geometry will be automatically removed (the tooth is built, the section is made with the cutting plane and calculated on it) the control dimensions, the tooth profile itself, and all this is transferred to the drawing. <br><br><img src="https://habrastorage.org/webt/mu/ge/zd/mugezdqezcmw9xbv45depg0wss4.png" alt="image"><br><br><img src="https://habrastorage.org/webt/7c/oo/7w/7coo7wpxouwxal0h5rp6c6bybyw.png" alt="image"><br></li><li>  Everything is quite simple, though in this particular case and without considering the ‚Äúsmall‚Äù nuances of mathematical calculations hidden from the eyes of readers. </li></ol><br><br>  What else does a craftsman need in this case?  Spatial imagination, fantasy and the ability to dream in the end! <br><br> <a href=""><img align="right" src="https://habrastorage.org/webt/hl/da/gz/hldagzyl3cirnwkb6krw4et_3h8.png"></a> <br>  Vladimir Panchenko, Head of the KOMPAS-3D Application Division, ASCON <br><blockquote>  <i>What is faster API KOMPAS-3D or C3D?</i>  <i>The question sounds paradoxical.</i>  <i>C3D is the same geometric kernel KOMPAS-3D!</i>  <i>As the core works, so does KOMPAS-3D.</i>  <i>But on closer examination, especially in the context of an application developer, everything falls into place.</i> <i><br><br></i>  <i>The standard scheme for the developer looks like this.</i>  <i>Calling the API function KOMPAS-3D leads to the addition of an object to the document model, and then to create the geometry, a call goes to C3D.</i>  <i>Then, in a chain, in reverse order, the data is returned back to the API, and here in the hands of the developer the interface of the created object.</i> <i><br><br></i>  <i>At the same time, something happens with the data at each step: in the API they are packaged in COM, in the document model they are checked for correctness in the current context, and attributes and drawing data are added.</i>  <i>Of course, all these actions are optimized and take very little time.</i>  <i>If the developer needs to get a cylindrical shaft step, then he creates a sketch and an extrusion operation in KOMPAS-3D - just two objects and two chaining.</i>  <i>But the situation is fundamentally changing in the case of geometry for a conical gear with a circular tooth.</i>  <i>To do this, you need to create a lot of auxiliary curves, surfaces (and all this is not analytical cylinders and cones, but NURBS), their intersections.</i>  <i>Pumping data begins to take significant time already.</i>  <i>The kernel will be mostly idle.</i>  <i>To avoid temporary losses, interaction with the API and the document model is minimized - add an operation with the body and accept a body that is modeled in C3D.</i>  <i>We get one run in C3D and optimally create all auxiliary geometry on the stack, intersect what we need and get the result.</i>  <i>Only the kernel works and works very quickly.</i> </blockquote><br><br> <a href=""><img src="https://habrastorage.org/webt/m-/so/so/m-soso9loaz7facieovewkhrygi.png"></a>  <a href="">Valery Golovanev</a> , engineer-analyst and programmer, Kurgan, pos.  Teply Stan. </div><p>Source: <a href="https://habr.com/ru/post/421191/">https://habr.com/ru/post/421191/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421177/index.html">How to attract a data analyst when your company does not even have a website</a></li>
<li><a href="../421179/index.html">HashMap internal work in Java</a></li>
<li><a href="../421183/index.html">IBM patents drones that recognize emotions and carry coffee to people. And what else to write on Friday?</a></li>
<li><a href="../421187/index.html">Deep learning to identify paintings</a></li>
<li><a href="../421189/index.html">Moving the database to an older version of MS SQL Server</a></li>
<li><a href="../421193/index.html">Audi PB18 e-tron</a></li>
<li><a href="../421195/index.html">Artificial intelligence</a></li>
<li><a href="../421197/index.html">Russia is developing a neuro headset for people with speech and motor impairments</a></li>
<li><a href="../421199/index.html">Fintech Digest: AI-technologies are changing the banking services market, email as a payment tool, cryptocurrency in Australia</a></li>
<li><a href="../421201/index.html">What's new in AppCode 2018.2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
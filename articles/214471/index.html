<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My acquaintance with WM Awesome. Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The third part of my post (the previous one can be found here ) 

 In this piece, assign mouse buttons and keyboards. A small note: for Mod4 + PrntScr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My acquaintance with WM Awesome. Part 3</h1><div class="post__text post__text-html js-mediator-article">  The third part of my post (the previous one can be found <a href="http://habrahabr.ru/post/214467/">here</a> ) <br><br>  In this piece, assign mouse buttons and keyboards.  A small note: for Mod4 + PrntScr, I assigned to take a screenshot of the selected area, and on just a PtntScrn screenshot of the entire screen, but the second case does not work ‚Äî you don‚Äôt get your hands on the screen (for the screenshots you will need to install the xsnap package <br><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Purpose of buttons and combinations</b> <div class="spoiler_text"><pre><code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">----------------------------------- ---   --- ----------------------------------- root.buttons(awful.util.table.join( --   -   awful.button({ }, right_button, function() main_menu:toggle() end), --   -     awful.button({ }, plus_button, awful.tag.viewnext ), awful.button({ }, minus_button, awful.tag.viewprev ) )) ------------------------------------------- ---   --- ------------------------------------------- --    globalkeys = awful.util.table.join( --    awful.key( { modkey, }, key_Left, awful.tag.viewprev ), awful.key( { modkey, }, key_Right, awful.tag.viewnext ), awful.key( { modkey, }, key_Esc, awful.tag.history.restore ), --awful.key( { }, key_Alt_R, function () kbdcfg.switch() end), --    ( ) awful.key( { modkey, }, key_Tab, function() awful.client.focus.history.previous() if client.focus then client.focus:raise() end end ), --    --  awful.key( { modkey, }, key_X, function() awful.util.spawn(terminal) end ), --   awful.key( { modkey, }, key_R, function() bottom_prompt_box[mouse.screen]:run() end ), awful.key( { }, key_Home, function() awful.util.spawn_with_shell("google-chrome-stable") end ), --  awesome awful.key( { modkey, "Control" }, key_R, awesome.restart), awful.key( { modkey }, key_F1, function () awful.util.spawn('slimlock') end), awful.key( { }, key_Print, function () awful.util.spawn_with_shell("DATE=`date +%d%m%Y_%H%M%S`; xsnap -file $HOME/Snapshots/snap$DATE") end), awful.key( { modkey }, key_Print, function () awful.util.spawn_with_shell("DATE=`date +%d%m%Y_%H%M%S`; xsnap -nogui -file $HOME/Snapshots/snap$DATE") end), awful.key( { }, key_Vol_Up, function () volumecfg.up() end), awful.key( { }, key_Vol_Down, function () volumecfg.down() end), awful.key( { }, key_Mute, function () volumecfg.toggle() end) ) ------------------------------------------------------ ---    --- ------------------------------------------------------ clientkeys = awful.util.table.join( --     awful.key( { modkey, }, key_F, function(c) c.fullscreen = not c.fullscreen end ), --   awful.key( { modkey, "Shift" }, key_C, function(c) c:kill() end ), --      awful.key( { modkey, "Control" }, key_Space, awful.client.floating.toggle ), --      awful.key( { modkey, "Control" }, key_Return, function(c) c:swap( awful.client.getmaster() ) end ), --     ??? awful.key( { modkey, }, key_O, awful.client.movetoscreen ), --     awful.key( { modkey, }, key_T, function(c) c.ontop = not c.ontop end ), --   awful.key( { modkey, }, key_N, function(c) c.minimized = true end ), --   awful.key( { modkey, }, key_M, function(c) c.maximized_horizontal = not c.maximized_horizontal c.maximized_vertical = not c.maximized_vertical end ) )</span></span></code> </pre> <br></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here are defined some combinations for tags, roles and signals.  For example, the pidgin at me opens only on 4 tags, and in the signal I prescribe - to display the maximize button on the windows, close, the window icon and title. <br><div class="spoiler">  <b class="spoiler_title">Combinations for windows, rules and signals</b> <div class="spoiler_text"><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">----------------------------------------------------------------------------------------------------------------------- ---             --- ----------------------------------------------------------------------------------------------------------------------- for i = 1, 9 do -- modkey + &lt; &gt; --     globalkeys = awful.util.table.join( globalkeys, awful.key({ modkey }, "#" .. i + 9, function() local screen = mouse.screen local tag = awful.tag.gettags(screen)[i] if tag then awful.tag.viewonly(tag) end end), -- modkey + Ctrl + &lt; &gt; --      awful.key({ modkey, "Control" }, "#" .. i + 9, function() local screen = mouse.screen local tag = awful.tag.gettags(screen)[i] if tag then awful.tag.viewtoggle(tag) end end), -- modkey + &lt; &gt; --        awful.key({ modkey, "Shift" }, "#" .. i + 9, function() local tag = awful.tag.gettags(client.focus.screen)[i] if client.focus and tag then awful.client.movetotag(tag) end end), -- modkey + &lt; &gt; --       ,       awful.key({ modkey, "Control", "Shift" }, "#" .. i + 9, function() local tag = awful.tag.gettags(client.focus.screen)[i] if client.focus and tag then awful.client.toggletag(tag) end end) ) end ---------------------------------------------------------------------------- ---       --- ---------------------------------------------------------------------------- clientbuttons = awful.util.table.join( --   awful.button( { }, left_button, function(c) client.focus = c; c:raise() end), --  awful.button( { modkey }, left_button, awful.mouse.client.move), --   awful.button( { modkey }, right_button, awful.mouse.client.resize) ) --    root.keys(globalkeys) ---------------------------------- ---   --- ---------------------------------- awful.rules.rules = { { --      rule = { }, properties = { border_width = beautiful.border_width, --     border_color = beautiful.border_normal, --       focus = awful.client.focus.filter, --     :( keys = clientkeys, --   buttons = clientbuttons} --   }, --{ rule = { class = "MPlayer" }, -- properties = { floating = true } }, --{ rule = { class = "pinentry" }, -- properties = { floating = true } }, --{ rule = { class = "Gimp" }, -- properties = { floating = true } }, -- Set Firefox to always map on tags number 5 of screen 1. --{ rule = { class = "Firefox" }, -- properties = { tag = tags[1][5] } } -- "":     { rule = { class = "Conky"}, properties = { border_width = 0, floating = true } }, { rule = { instance = "Pidgin" }, properties = { tag = tags[1][4], floating = false, maximized_horizontal = false, maximized_vertical = false } }, { rule = { instance = "Skype" }, properties = { floating = true, maximized_horizontal = false, maximized_vertical = false } } } -------------------- ---  --- -------------------- client.connect_signal("manage", function (c, startup) -- Enable sloppy focus c:connect_signal("mouse::enter", function(c) if awful.layout.get(c.screen) ~= awful.layout.suit.magnifier and awful.client.focus.filter(c) then client.focus = c end end) if not startup then -- Set the windows at the slave, -- ie put it at the end of others instead of setting it master. -- awful.client.setslave(c) -- Put windows in a smart way, only if they does not set an initial position. if not c.size_hints.user_position and not c.size_hints.program_position then awful.placement.no_overlap(c) awful.placement.no_offscreen(c) end end end) --     client.connect_signal("focus", function(c) --    c.border_color = beautiful.border_focus --    --      local left_layout = wibox.layout.fixed.horizontal() left_layout:add(awful.titlebar.widget.iconwidget(c)) --       local right_layout = wibox.layout.fixed.horizontal() --right_layout:add(kbdcfg.widget) right_layout:add(awful.titlebar.widget.maximizedbutton(c)) right_layout:add(awful.titlebar.widget.closebutton(c)) --   local middle_layout = wibox.layout.flex.horizontal() local title = awful.titlebar.widget.titlewidget(c) title:set_align("center") middle_layout:add(title) --      local layout = wibox.layout.align.horizontal() layout:set_left(left_layout) layout:set_right(right_layout) layout:set_middle(middle_layout) --      awful.titlebar(c):set_widget(layout) --     awful.titlebar(c, {size = 18}) end) client.connect_signal("unfocus", function(c) c.border_color = beautiful.border_normal awful.titlebar(c, {size = 18}) end)</span></span></code> </pre><br></div></div><br><br><h4>  Switch layouts. </h4><br><br>  I‚Äôll say right away that xkbcomp should be rolled back to version 1.2.3, since there is a bug in 1.2.4 (when switching layouts, the mouse buttons do not work) <br><br>  About the layout in general, you can add an implementation like this in the gentoo wiki is written, but then we will not have hotkeys working (for system keys, we specified key codes, so this is not a problem for us), but such as ctrl + C, etc. .  will not work. <br><br>  in the new versions of Xorg, the servers removed xorg.conf, now the configuration is in a different place.  Create a directory <br> <code>sudo mkdir /etc/X11/xorg.conf.d</code> <br> <br>  And in it we will create 2 files, 01-keyboard-layout.conf and 01-enable-pointerkeys.conf <br>  In the first: <br><pre> <code class="bash hljs">Section <span class="hljs-string"><span class="hljs-string">"InputClass"</span></span> Identifier <span class="hljs-string"><span class="hljs-string">"keyboard-layout"</span></span> MatchIsKeyboard <span class="hljs-string"><span class="hljs-string">"on"</span></span> Option <span class="hljs-string"><span class="hljs-string">"XkbLayout"</span></span> <span class="hljs-string"><span class="hljs-string">"us,ru"</span></span> Option <span class="hljs-string"><span class="hljs-string">"XkbOptions"</span></span> <span class="hljs-string"><span class="hljs-string">"grp:ctrl_shift_toggle,terminate:ctrl_alt_bksp EndSection</span></span></code> </pre><br>  Restart the X server with ctrl + alt + backspace and change the layout using ctrl + shift <br><br>  After changing the layout, the mouse buttons are disabled by default; therefore, we‚Äôll write them in the second one (with the xkbcomp-1.2.4 version, this does not work): <br><pre> <code class="bash hljs">Section <span class="hljs-string"><span class="hljs-string">"InputClass"</span></span> Identifier <span class="hljs-string"><span class="hljs-string">"Keyboard Defaults"</span></span> MatchIsKeyboard <span class="hljs-string"><span class="hljs-string">"yes"</span></span> Option <span class="hljs-string"><span class="hljs-string">"XkbOptions"</span></span> <span class="hljs-string"><span class="hljs-string">"keypad:pointerkeys"</span></span> EndSection</code> </pre><br><br>  Now let's make our urxvt pleasing to our eyes, for this we edit the ~ / .Xdefaults file (again, if we don‚Äôt have it, feel free to create it) <br><div class="spoiler">  <b class="spoiler_title">My ~ / .Xdefaults</b> <div class="spoiler_text"><pre> <code class="bash hljs">!darkgray *background: <span class="hljs-comment"><span class="hljs-comment">#212121 !silver *foreground: #C0C0C0 !black *color0: #251f1f *color8: #5e5e5e !red *color1: #eb4509 *color9: #eb4509 !green *color2: #94e76b *color10: #95e76b !yellow *color3: #ffac18 *color11: #ffac18 !blue *color4: #46aede *color12: #46aede !magenta *color5: #e32c57 *color13: #e32c57 !cyan *color6: #d6dbac *color14: #d6dbac !white *color7: #efefef *color15: #efefef !save 5000 lines URxvt*saveLines: 5000 !left button URxvt.matcher.button: 1 !default brauser google chrome URxvt.urlLauncher: google-chrome-stable !underline links URxvt.underlineURLs: true ! URxvt.keysym.Mu: perl:url-select:select_next !disabled button 'new tab' URxvt.tabbed.new-button:no !? URxvt.tabbed.tabbar-fg: 15 !? URxvt.tabbed.tabbar-bg: 8 !? URxvt.tabbed.tab-fg: 8 !? URxvt.tabbed.tab-bg: 14 Rxvt.font: -misc-fixed-medium-r-normal--15-140-75-75-c-90-iso8859-1 URxvt.boldFont: -misc-fixed-bold-r-normal--15-140-75-75-c-90-iso8859-1 !disable scrollbar URxvt*scrollBar: false</span></span></code> </pre><br></div></div><br><br>  As a result, we get a pleasant color scheme for our terminal. <br><br>  As a result, we get just such a pleasant and very convenient system: <br><img src="https://habrastorage.org/getpro/habr/post_images/fe2/7d2/3f9/fe27d23f9454833de238d17e39cebb3c.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/b92/761/f8b/b92761f8b9645942b142774f9df6b337.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/d95/bb7/516/d95bb75163f7e2675dc32b3b82b4d74a.jpg"><br><br>  Of course, I have not reached such a level as unlogic and my config can still be improved to infinity, but I got a convenient and workable system. <br><br>  PS In emacs I have a monokai color scheme. <br>  PPS I hope I did not forget to describe. </div><p>Source: <a href="https://habr.com/ru/post/214471/">https://habr.com/ru/post/214471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214453/index.html">Debugging Applications with dtrace</a></li>
<li><a href="../214457/index.html">The first cars with iOS on board will be shown at the Geneva Motor Show</a></li>
<li><a href="../214463/index.html">VK: 451 Unavailable For Legal Reasons</a></li>
<li><a href="../214465/index.html">Troll-cybersquatter fined 32 thousand dollars</a></li>
<li><a href="../214467/index.html">My acquaintance with WM Awesome. Part 2</a></li>
<li><a href="../214475/index.html">Domestic television game console "Astra" - greetings from the 90s</a></li>
<li><a href="../214477/index.html">1000+ KPI</a></li>
<li><a href="../214485/index.html">Galileo developer kit for Internet Of Things and a developer program</a></li>
<li><a href="../214487/index.html">What's inside the 2014 Olympic fan medal?</a></li>
<li><a href="../214495/index.html">Photo excursion to the data center "DataPro Tver", Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
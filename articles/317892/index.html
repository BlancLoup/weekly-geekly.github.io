<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SwiftLint - clean and tidy iOS project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Go 

 I think everyone knows how difficult it is to maintain compliance with the code style and agreements in an iOS project. Today we will talk about...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SwiftLint - clean and tidy iOS project</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/2b0/084/21a/2b008421ab5b491faa04b2f541b455c0.jpg" alt="image">  Go <br><br>  I think everyone knows how difficult it is to maintain compliance with the code style and agreements in an iOS project.  Today we will talk about how to automate this process using SwiftLint utility. <br><a name="habracut"></a><br>  SwiftLint is a utility from Realm developers for automatically checking Swift-code.  The utility contains a set of rules based on the <a href="https://github.com/github/swift-style-guide">GitHub's Swift Style Guide</a> and common sense.  Of course, you can add your own rules.  SwiftLint supports integration with Xcode, Appcode, Atom. <br><br>  <b>Installation and Setup</b> <br>  Download and install the latest release from the <a href="https://github.com/realm/SwiftLint/releases">repository</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Or install through the terminal: <br><br><pre><code class="bash hljs">$ brew update $ brew install swiftlint</code> </pre> <br>  You can update the utility like this: <br><br><pre> <code class="bash hljs">$ brew update $ brew upgrade swiftlint</code> </pre> <br>  Switch to another version: <br><br><pre> <code class="bash hljs">$ brew switch swiftlint &lt; &gt;</code> </pre> <br>  Check current version: <br><br><pre> <code class="bash hljs">swiftlint version</code> </pre> <br>  Go to the project settings, Build Phases and add to the Run Script section: <br><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">which</span></span> swiftlint &gt;/dev/null; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> swiftlint <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"error: SwiftLint does not exist, download it from https://github.com/realm/SwiftLint"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span></code> </pre> <br><blockquote>  Tip: it is highly recommended to use the ‚Äúexit 1‚Äù command - this guarantees that all members of the team will install SwiftLint </blockquote><br>  <b>First start</b> <br>  Now that SwiftLint is installed, code verification will occur at the end of each build of the project.  After the first launch, you will most likely see something like: <br><br><img src="https://habrastorage.org/files/082/bd5/ccd/082bd5ccd6cf4b36ae58cd74ddeb73c0.jpg"><br><br>  Do not worry much, most errors and warnings are quite simple and easily fixable.  Do not rush to fix them manually, since SwiftLint has a great auto-correction feature, it is safe enough.  To use it in the terminal, go to the project directory and execute the command: <br><br><pre> <code class="bash hljs">swiftlint autocorrect</code> </pre> <br>  We collect the project again: the number of errors has been reduced by several times, but the rest will have to be corrected manually. <br><blockquote>  Tip: do not add auto-correction in Run Script, otherwise programmers will not get used to thinking or will not even be aware of some conventions. </blockquote><br>  <b>rules</b> <br>  The list of predefined rules can be seen by running the command: <br><br><pre> <code class="bash hljs">swiftlint rules</code> </pre> <br><img src="https://habrastorage.org/files/df7/cf3/4ad/df7cf34ad12c40fb938cd151acac3cfa.png"><br><br>  Each rule has a description and a set of parameters: <br><br><ul><li>  opt-in - whether the rule is optional (disabled by default); </li><li>  correctable - is it possible to customize the rule; </li><li>  enabled in your config - is it enabled in the project; </li><li>  configuration - parameters. </li></ul><br>  You can also see the <a href="https://github.com/realm/SwiftLint/tree/master/Source/SwiftLintFramework/Rules">source of the rules</a> for more understanding. <br><br>  Separately, I want to highlight a few very useful rules: <br><br><ul><li>  cyclomatic_complexity - the rule limiting <a href="https://ru.wikipedia.org/wiki/%25D0%25A6%25D0%25B8%25D0%25BA%25D0%25BB%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D1%2581%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">cyclomatic complexity;</a> </li><li>  nesting - the level of nesting of classes and functions; </li><li>  file_length - the number of lines in the file; </li><li>  function_body_length - the number of lines in the function; </li><li>  force_try / cast / unwrapping - the presence of operations that potentially lead to crash; </li><li>  weak_delegate - check that the delegate is holding a weak reference; </li><li>  missing_docs - whether comments on public functions / properties are written. </li></ul><br>  <b>Configuration</b> <br>  Most likely you will need to disable, configure or add any rules.  To do this, you need to create a .swiftlint.yml file in the project root. <br><br>  Available configuration options: <br><br>  List of rules that need to be disabled: <br><br><pre> <code class="hljs">disabled_rules: - colon - comma - control_statement</code> </pre> <br>  The list of optional rules that need to be enabled (disabled by default): <br><br><pre> <code class="hljs">opt_in_rules: - empty_count - missing_docs</code> </pre> <br>  Exclude subdirectories or files: <br><br><pre> <code class="hljs">excluded: - Carthage - Pods - Source/ExcludedFolder - Source/ExcludedFile.swift</code> </pre> <br>  Include subdirectories or files (alternatively excluded): <br><br><pre> <code class="hljs">included: - MyProject - MyProjectKeyboard - MyProjectTests</code> </pre> <br>  Rule parameters (available parameters can be found in the list of rules): <br><br><pre> <code class="hljs mel">file_length: <span class="hljs-keyword"><span class="hljs-keyword">warning</span></span>: <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>: <span class="hljs-number"><span class="hljs-number">600</span></span></code> </pre> <br>  Report type (available options: xcode, json, csv, checkstyle, junit): <br><br><pre> <code class="hljs">reporter: xcode</code> </pre> <br>  Maximum number of warnings allowed: <br><br><pre> <code class="hljs">warning_threshold: 15</code> </pre> <br><blockquote>  Tip: be sure to add warning_threshold to the configuration file so that the number of warnings does not increase. </blockquote><br>  <b>Nested configurations</b> <br>  You can create multiple configuration files (.swiftlint.yml) for various subdirectories.  SwiftLint will automatically use the configuration located in the folder with the scanned files.  Parameters excluded and included for nested configurations will be ignored. <br><br>  <b>Add your own rules</b> <br>  SwiftLint allows you to add your own rules based on regular expressions.  To do this, in the .swiftlint.yml file, add the custom_rules section.  You can specify the following parameters for the rule: <br><br><ul><li>  identifer - identifier (required); </li><li>  regexp - condition of finding (required); </li><li>  name - the name of the rule, displayed in the text of the error (optional); </li><li>  message - error description (required); </li><li>  match_kinds - in which entities to search for an entry, available values ‚Äã‚Äã(you can specify several): comment, identifier, number, parameter, string, the full list is available in the documentation (required); </li><li>  severity - type: warning (warning) or error (error) (optional, by default - warning); </li><li>  included - what files need to be checked (optional </li></ul><br>  Rule checking naming with suffix -id.  (for example: userId is correct, userID is incorrect): <br><br><pre> <code class="hljs pgsql">custom_rules: id_suffix_naming: <span class="hljs-type"><span class="hljs-type">name</span></span>: "Wrong name" regex: "(ID)" match_kinds: - <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> - identifier message: "Use 'Id' instead 'ID'" severity: error</code> </pre> <br><img src="https://habrastorage.org/files/81a/1ac/bdf/81a1acbdfc784ef0827c08f0fe1d867e.png"><br><br>  <b>Disable rules in code</b> <br>  If you want to disable checking in part of the code, use the following construction: <br><br><pre> <code class="hljs xml">// swiftlint:disable <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rule1</span></span></span><span class="hljs-tag">&gt;</span></span> [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rule2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rule3</span></span></span><span class="hljs-tag">&gt;</span></span>...] ......... // swiftlint:enable <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rule1</span></span></span><span class="hljs-tag">&gt;</span></span> [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rule2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rule3</span></span></span><span class="hljs-tag">&gt;</span></span>...] func printName() { // swiftlint:disable force_cast let name = loadName() as! String // swiftlint:enable force_cast print(name) }</code> </pre> <br>  <b>Project build speed</b> <br>  Obviously, using SwiftLint requires additional time when building a project.  If the build speed noticeably sags, you should consider checking only the modified files.  To do this, replace the test script in Build Phases with: <br><br><div class="spoiler">  <b class="spoiler_title">Script</b> <div class="spoiler_text"><pre> <code class="bash hljs">count=0 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file_path <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(git ls-files -om --exclude-from=.gitignore | grep <span class="hljs-string"><span class="hljs-string">".swift$"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> SCRIPT_INPUT_FILE_<span class="hljs-variable"><span class="hljs-variable">$count</span></span>=<span class="hljs-variable"><span class="hljs-variable">$file_path</span></span> count=$((count + 1)) <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> file_path <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(git diff --cached --name-only | grep <span class="hljs-string"><span class="hljs-string">".swift$"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> SCRIPT_INPUT_FILE_<span class="hljs-variable"><span class="hljs-variable">$count</span></span>=<span class="hljs-variable"><span class="hljs-variable">$file_path</span></span> count=$((count + 1)) <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> SCRIPT_INPUT_FILE_COUNT=<span class="hljs-variable"><span class="hljs-variable">$count</span></span> swiftlint lint --use-script-input-files</code> </pre> <br></div></div><br>  <i>A few examples of SwiftLint configurations in well-known companies:</i> <br><br><div class="spoiler">  <b class="spoiler_title">Kickstarter</b> <div class="spoiler_text"><pre> <code class="hljs vhdl">disabled_rules: - function_parameter_count - nesting - variable_name - weak_delegate - trailing_comma opt_in_rules: - empty_count - force_unwrapping - private_outlet line_length: <span class="hljs-number"><span class="hljs-number">110</span></span> type_body_length: <span class="hljs-literal"><span class="hljs-literal">warning</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-literal"><span class="hljs-literal">error</span></span>: <span class="hljs-number"><span class="hljs-number">400</span></span> excluded: - Carthage/ - Frameworks/ - Kickstarter-iOS.playground/ - Kickstarter-tvOS.playground/ - <span class="hljs-keyword"><span class="hljs-keyword">Library</span></span>/Strings.swift - bin/strings.swift reporter: <span class="hljs-string"><span class="hljs-string">"xcode"</span></span> custom_rules: localized_lensing: name: <span class="hljs-string"><span class="hljs-string">"Localized Lensing"</span></span> regex: <span class="hljs-string"><span class="hljs-string">"\.~\s+Strings\s*\."</span></span> message: <span class="hljs-string"><span class="hljs-string">"Capture calls to `Strings` functions using `%~ { _ in Strings... }`"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">severity</span></span>: <span class="hljs-literal"><span class="hljs-literal">error</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Firefox</b> <div class="spoiler_text"><pre> <code class="hljs vbscript">disabled_rules: # rule identifiers <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> exclude from running - legacy_constructor - variable_name - legacy_cggeometry_functions - legacy_constant - todo - trailing_newline - empty_count - force_cast - type_name - function_body_length - missing_docs - conditional_binding_cascade - valid_docs - cyclomatic_complexity - type_body_length - function_parameter_count - force_try - control_statement - trailing_whitespace - leading_whitespace - operator_whitespace - file_length - mark opt_in_rules: # some rules are only opt-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> - closing_brace - opening_brace - return_arrow_whitespace - trailing_semicolon - statement_position # Find all the available rules by running: # swiftlint rules included: # paths <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> include during linting. `--path` <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> ignored <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> present. excluded: # paths <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> ignore during linting. Takes precedence over `included`. - Carthage - Pods - Source/ExcludedFolder - Source/ExcludedFile.swift - ThirdParty - FxA - FxAClient - build # configurable rules can be customized from this configuration file # binary rules can <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> their severity level trailing_semicolon: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> empty_count: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> closing_brace: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> opening_brace: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> return_arrow_whitespace: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> statement_position: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> colon: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> comma: <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> line_length: <span class="hljs-number"><span class="hljs-number">1000</span></span> reporter: <span class="hljs-string"><span class="hljs-string">"json"</span></span> # reporter type (xcode, json, csv, checkstyle)</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Realm</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">included: - Realm/ObjectServerTests - RealmSwift - Realm/Swift variable_name: min_length: # <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> possible <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">disable</span></span> this partial <span class="hljs-keyword"><span class="hljs-keyword">rule</span></span>, so <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> it <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> zero <span class="hljs-built_in"><span class="hljs-built_in">warning</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> error: <span class="hljs-number"><span class="hljs-number">0</span></span> disabled_rules: - file_length - force_cast - force_try - function_body_length - todo - type_body_length - line_length - vertical_whitespace - syntactic_sugar</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Tinkoff</b> <div class="spoiler_text">  warning_threshold: 15 <br><br>  excluded: <br>  - Pods <br>  - MBUITest <br><br>  disabled_rules: <br>  - trailing_whitespace <br><br>  line_length: <br>  warning: 150 <br><br>  function_parameter_count: <br>  warning: 10 <br>  error: 15 <br><br>  file_length: <br>  warning: 500 <br><br>  type_body_length: <br>  warning: 400 <br>  error: 450 <br></div></div><br>  SwiftLint allowed our ios development team to spend less time on code review, sticking to a single code style and improving code quality.  If you are not using SwiftLint in your project, then be sure to try. <br><br>  <b>Useful links:</b> <br><br>  ¬ª <a href="https://github.com/realm/SwiftLint">SwiftLint repository</a> <br>  ¬ª <a href="https://github.com/realm/SwiftLint/tree/master/Source/SwiftLintFramework/Rules">SwiftLint rules list</a> <br>  ¬ª <a href="https://github.com/realm/SwiftLint/issues/413">About checking only changed files</a> <br>  ¬ª <a href="https://github.com/github/swift-style-guide">GitHub's Swift Style Guide</a> <br>  ¬ª <a href="https://tailor.sh/">Tailor - an alternative to SwiftLint</a> </div><p>Source: <a href="https://habr.com/ru/post/317892/">https://habr.com/ru/post/317892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317878/index.html">VulnHub Analysis of tasks with CTF SkyDog: 2016 - Catch Me If You Can</a></li>
<li><a href="../317880/index.html">Why are we angry?</a></li>
<li><a href="../317882/index.html">Lock-free data structures. Iterable list</a></li>
<li><a href="../317884/index.html">Transaction Isolation Levels with PostgreSQL Examples</a></li>
<li><a href="../317886/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ241 (December 12 - 18, 2016)</a></li>
<li><a href="../317894/index.html">Alameda, Bower and NPM integration in the CleverStyle Framework</a></li>
<li><a href="../317896/index.html">WPF - Floppy Pages</a></li>
<li><a href="../317900/index.html">Check Umbraco source code again</a></li>
<li><a href="../317904/index.html">How to fill out and sign documents automatically using DocuSign</a></li>
<li><a href="../317906/index.html">Telegram-bot for the system administrator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
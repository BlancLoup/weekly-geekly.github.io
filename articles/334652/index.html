<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android O: features support for the new operating system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! An important event will take place very soon - the release of Android O. Support for new versions of the operating system is the responsibility...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android O: features support for the new operating system</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello!  An important event will take place very soon - the release of Android O. Support for new versions of the operating system is the responsibility of any serious product.  Each update of Android forces many developers to work seriously to preserve the functionality of existing functions and bring new ones thanks to the capabilities of new versions of Android. </p><br><p>  In this article we will look at the main changes of Android O and evaluate their possible impact. </p><br><p><img src="https://habrastorage.org/web/4fb/50c/9e2/4fb50c9e2e4e40a2bd69377e184ee35f.png" alt="image"></p><a name="habracut"></a><br><p><img src="https://habrastorage.org/web/b16/9fc/6d7/b169fc6d706a420db4f43d572465b8c5.png" alt="image"></p><br><p>  Working on Android O, Google developers first of all solved the problem of fast battery charge on Android devices, so the main changes are related to the optimization of background tasks and the use of application resources. </p><br><p>  Changes in Android O can be divided into two categories: </p><br><ol><li><p>  Potentially "breaking" the current performance and requiring additional efforts to support; </p><br><table><tbody><tr><th>  Threat </th><th>  Target&gt; = O </th><th>  Target &lt;o </th><th>  Effect </th></tr><tr><td>  Background Location Limits </td><td>  Affected </td><td>  Affected </td><td>  Restriction on geolocation query </td></tr><tr><td>  Background Execution Limits </td><td>  Affected </td><td>  Ok </td><td>  Changing the list of available broadcasts in the manifest; <br>  Changing the time of the services in the background. </td></tr><tr><td>  Notification Channels </td><td>  Affected </td><td>  Ok </td><td>  Improvements for notification channels </td></tr><tr><td>  Windowmanager </td><td>  Affected </td><td>  Ok </td><td>  Effect on overlapping windows </td></tr><tr><td>  Privacy (Build.Serial / net.dns / etc) </td><td>  Affected </td><td>  Affected </td><td>  Changing the availability of user IDs </td></tr><tr><td>  AccountManager. <br>  getAccounts () </td><td>  Affected </td><td>  Ok </td><td>  A request for a list of accounts on the device returns null </td></tr></tbody></table><br></li><li>  Opportunities to implement new features. <br><table><tbody><tr><th>  New opportunities </th><th>  Application </th></tr><tr><td>  Android Enterprise </td><td>  Improving device control </td></tr><tr><td>  Autofill Framework </td><td>  Autocomplete entry fields </td></tr><tr><td>  Notification Channels </td><td>  UX enhancement </td></tr><tr><td>  Picture in Picture </td><td>  UX enhancement </td></tr><tr><td>  Adaptive Icon </td><td>  Vendor firmware consistency </td></tr><tr><td>  Accessibility button and fingerprint gestures </td><td>  Improving UX (accessibility button in the navigation bar, trapping gestures on the fingerprint scanner) </td></tr><tr><td>  Webview Apis (eg Safebrowsing) </td><td>  Improved Webview built-in capabilities </td></tr><tr><td>  Pinning shortcuts and Widgets </td><td>  Software creation of shortcuts and widgets in the launcher </td></tr></tbody></table></li></ol><br><p>  In our opinion, these are the most significant (at least for Kaspersky Lab) changes in Android O. Consider each separately. </p><br><h3 id="background-location-limits">  Background Location Limits </h3><br><p>  This is a limit on the number of location requests for applications in the background.  So, starting with Android O and regardless of the TargetSDK installed, applications can receive only a few location updates per hour.  However, these restrictions do not apply to applications for which at least one of the following parameters is valid: </p><br><ul><li>  The application is not in the background (the Activity is running, which is in the Started or Paused state); </li><li>  The application has an active foreground service; </li><li>  Another Foreground application has a connection with the current one (both through the bind service and through the content provider). </li></ul><br><p>  Thus, for Foreground applications, the behavior will be the same as in previous versions of Android. </p><br><p>  If the foreground service is absent, then the geolocation request will be changed: </p><br><ul><li>  Fused Location Provider (FLP) <br><ul><li>  For Background applications, the system will determine a new location only a few times per hour, even if the application explicitly requested more updates. </li><li>  For foreground applications, the logic of operation will remain unchanged. </li></ul></li><li>  Geofencing <br><ul><li>  Background applications will be able to receive updates from geofencing-api more often than updates from Fused Location Provider </li></ul></li><li>  GNSS Measurements and GNSS Navigation Message <br><ul><li>  For applications that are in the background, updates for the GnssMeasurement and GnssNavigationMessage services will not come </li></ul></li><li>  Location manager <br><ul><li>  For Background applications, the system will determine a new location only a few times per hour. </li></ul></li></ul><br><h3 id="background-execution-limits">  Background execution limits </h3><br><p>  The restriction on the background operation of the application is a key change of Android O, which will be noticeable to a large extent only when switching to targetSdk ‚ÄúO‚Äù.  If targetSdk &lt;= 25, then if the application is in the background and has been transferred by the system to the Cached state (when the system is free to kill the process at any time), and it does not have active components, the system will release all WakeLock ( that the application should not be able to sleep) of this application.  It is important to note that if the application is not targetSDK &lt;O, then in the settings you can set the behavior policy the same as if the application were with targetSDK O. </p><br><p>  For applications with targetSdk, the ‚ÄúO‚Äù background execution limits consist of two categories: </p><br><ol><li> <strong>Limit Background Services</strong> <br>  After the application has moved to the background, it has a ‚Äúwindow‚Äù in a few minutes, during which services can start and work.  After the expiration of this interval, all services are stopped, and the launch of new ones will cause the application to crash.  Google tries to minimize the number of running background services and suggests using JobScheduler and GcmNetworkManager. <br>  If you need to perform lengthy tasks in the background, it is recommended to use foregroundService, which will explicitly tell the user that the application is running. <br>  It is worth noting that after you call <code>startForeground()</code> , you must call <code>startForeground()</code> within 5 seconds, otherwise the system may show ANR. </li><li>  <strong>Registration restrictions for broadcasts in the manifest</strong> <br>  The new version of Android continues the work begun by Android 7.0 (probably everyone remembers the applications that were re-elevated with each change of the mobile station).  But if in the 7th version in the manifesto it was impossible to register only a few Broadcast, now there are a majority of such Broadcasts. </li></ol><br><h3 id="notification-channels">  Notification Channels </h3><br><p>  Notification Channels is a tool for grouping notifications into subject groups that a user can manage directly.  If the application is built with target&gt; = O, then at least one of the notification channels must be supported.  In case targetApi &lt;O, then the work with notifications inside the product will remain the same. </p><br><h3 id="windowmanager">  Windowmanager </h3><br><p>  Android O introduces a new type of windows (for targetSDK O) that can be displayed on top of other windows - TYPE_APPLICATION_OVERLAY.  In this case, several old types of windows have become <strong>deprecated</strong> , and now when they are used, a <strong>RuntimeException is</strong> generated. <br>  These types of windows can now be used only by system applications: </p><br><ul><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_PHONE</a> </li><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_PRIORITY_PHONE</a> </li><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_SYSTEM_ALERT</a> </li><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_SYSTEM_OVERLAY</a> </li><li>  <a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html">TYPE_SYSTEM_ERROR</a> </li></ul><br><h3 id="privacy-buildserialnetdnsetc">  Privacy (Build.Serial / net.dns / etc) </h3><br><p>  In Android O, there are some improvements designed to help the user manage access to their ids.  These improvements include: </p><br><ul><li>  Restriction on the use of permanent (not reset) device-dependent identifiers </li><li>  Updating the Wi-Fi system of the stack associated with changes to the Wi-Fi chipset firmware on devices like Pixel, Pixel XL and Nexus 5x to randomize MAC addresses during network scans </li><li>  Updating in the mechanism by which applications requested account information and giving more control over user data </li></ul><br><h3 id="accountmanagergetaccounts">  AccountManager.getAccounts () </h3><br><p>  Starting with Android O, the GET_ACCOUNTS permission is not enough to access the list of accounts.  Now there are two options for applications with targetSDK O: </p><br><ul><li>  Use <code>AccountManager.newChooseAccountIntent()</code> . </li><li>  Use the method defined by the authenticator to access the account. </li></ul><br><h3 id="android-enterprise">  Android Enterprise </h3><br><p>  Google is actively developing Android for Work.  In Android O, they provided more options for controlling the device.  For example, for a working profile, you can get a separate lock with your own settings, find out information about available system updates. </p><br><h3 id="autofill-framework">  Autofill Framework </h3><br><p>  With the advent of the Autofill Framework API, it has become possible to more conveniently fill user data into applications than when using Accessability.  When you call the framework, you will need to match the packageName of the product for which the call to autocomplete occurred, and then provide the input data.  To correctly identify the login and password fields, you need to create and maintain a database with resourceId controls or other service information that allows you to correctly identify UI elements for autofilling. </p><br><h3 id="picture-in-picture">  Picture in Picture </h3><br><p>  Android O allows you to run activity in Picture-In-Picture, which is a special type of multi-window mode.  Google recommends using this mode exclusively for video display applications. </p><br><h3 id="adaptive-icon">  Adaptive Icon </h3><br><p>  Starting with Android O, you can provide another version of <strong>Launcher Icon</strong> for the application, which the system can easily cut to a form that is used by the device manufacturer.  Also, if there is such an icon, the system will be able to do some animation of application icons. </p><br><h3 id="pinning-shortcuts-and-widgets">  Pinning shortcuts and Widgets </h3><br><p>  New feature Android O - software creating shortcuts and widgets in the launcher.  The label is a separate icon that allows you to perform a task in the application for a given intent.  Successful attachment of a widget or shortcut requires user consent in the system confirmation dialog. </p><br><h3 id="vyvod">  Conclusion </h3><br><p>  The time when Android allowed you to do whatever you want is a thing of the past.  Android expands the "legal" tools to create new functions, closes gaps for hacks and makes you work honestly.  Android O breaks a part of existing applications, but tries to make the end users happier.  Cheers thanks! <br>  I wish everyone to write good apps, think about users and be happy owners of Android devices. </p><br><p>  <strong>PS</strong> <br>  The author of the article is Alexander Shindin <a href="https://habrahabr.ru/users/ayushindin/" class="user_link">ayushindin</a> . <br>  Sasha wrote an article and boldly fell ill, so he trusted me to put the article on Habr to me =) <br>  We wish him a speedy recovery! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/334652/">https://habr.com/ru/post/334652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334642/index.html">Alternative planetary data for geographic information systems</a></li>
<li><a href="../334644/index.html">Clustering markers on the Google Maps API map</a></li>
<li><a href="../334646/index.html">How to monitor the state of a corporate wireless network with Extreme NSight</a></li>
<li><a href="../334648/index.html">Modular testing of Pega applications: changing lives for the better with Ninja</a></li>
<li><a href="../334650/index.html">The authenticity of your videos is now undeniable thanks to Prover.</a></li>
<li><a href="../334656/index.html">5 fresh examples of parsing and improving the design in simple ways</a></li>
<li><a href="../334658/index.html">How to try to make the user comfortable and bungle something in the process.</a></li>
<li><a href="../334660/index.html">Test documentation. Turn tables into trees</a></li>
<li><a href="../334662/index.html">Zimbra - we build communications in the company</a></li>
<li><a href="../334664/index.html">About supporting C # language features in Visual Studio and CodeRush for Roslyn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
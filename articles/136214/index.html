<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[archlinux testing news] / usr support on a separate section</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, habra people! 

 Along with the release of mkinitcpio 0.8.2, we added support for mounting / usr from early userspace, if / usr is located on a se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[archlinux testing news] / usr support on a separate section</h1><div class="post__text post__text-html js-mediator-article">  Hi, habra people! <br><br>  Along with the release of mkinitcpio 0.8.2, we added support for mounting / usr from early userspace, if / usr is located on a separate partition.  Whoever shouted the loudest there ‚Äúwe want a feature, the essence is as follows ..‚Äù, well, now it is and it should be tested. <br><br>  To make it work, you need two things: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><br clear="all">  1) Enable the shutdown hook in /etc/mkinitcpio.conf.  It will copy the contents of the initramfs to / run / initramfs during the boot process and add a small script (SUDDENLY called shutdown).  When turned off, initscripts will mount the API filesystems to / run / initramfs, switch to this new root and then unmount the real file systems. <br><br>  At the time of writing, it all works as stupid as possible.  Complex systems such as LVM do not understand, and encryption mappings do not close.  Perhaps this will be added in the next release. <br><br>  2) Add the fsck hook to /etc/mkinitcpio.conf.  If / usr has a file system that is different from the root file system, you need to add it to autodetect.  If you don‚Äôt add this hook, a lot of sad things can happen (and after that you will go crying that Archa is for the red-eyed people, and you need to throw Debian Stable urgently :)  Perhaps in the next release, the hook will become smart enough to handle binaries from the root and / usr only. <br><br>  This fsck hook is recommended for absolutely everyone, and not only for those who have a separate / usr.  Running fsck in early userspace means that the disk can be checked before mounting - so you can repair it without rebooting. <br><br>  When using systemd, everything should work the same way.  The shutdown script is ignored, and the root will not be rechecked due to the presence of the signal file, which appeared in / run / initramfs. <br><br>  (Responsible for the disgrace - Dave Reizner.) <br><br>  Happy new updates, gentlemen! </div><p>Source: <a href="https://habr.com/ru/post/136214/">https://habr.com/ru/post/136214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136205/index.html">Configuring Squid 3 + QuintoLabs Content Security 1.4 and Integration with Active Directory</a></li>
<li><a href="../136206/index.html">At first they don't notice you, then they laugh at you, then they fight with you. And then you win. Mahatma Gandhi</a></li>
<li><a href="../136209/index.html">CyberPlat has closed acceptance of credit cards from abroad</a></li>
<li><a href="../136210/index.html">Why C is faster than Java (from the perspective of a Java developer)</a></li>
<li><a href="../136213/index.html">We are 1 year old!</a></li>
<li><a href="../136216/index.html">Facebook allows you to listen to music with friends</a></li>
<li><a href="../136218/index.html">Integration of some features of Scoreloop social gaming network into an Android application</a></li>
<li><a href="../136219/index.html">MSP430 Lunchpad Review and Test Project</a></li>
<li><a href="../136220/index.html">The first batch of 25-dollar computers Raspberry Pi entered production</a></li>
<li><a href="../136221/index.html">Playstation 4 will not be introduced in June</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CodingFuture + Puppet. Part II: Access and Standard Environment (cfauth + cfsystem)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Deployment Option for Linux Systems Based on Puppet 4. Part II: Access and Standard Environment (cfauth + cfsystem) 
 In short: 


1. cfauth - configu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CodingFuture + Puppet. Part II: Access and Standard Environment (cfauth + cfsystem)</h1><div class="post__text post__text-html js-mediator-article"><p>  Deployment Option for Linux Systems Based on Puppet 4. Part II: Access and Standard Environment (cfauth + cfsystem) </p><br><h1 id="vkratce">  In short: </h1><br><blockquote><ol><li> <strong><a href="https://forge.puppetlabs.com/codingfuture/cfauth">cfauth</a></strong> - configures SSH service, admin account, <code>sudo</code> , superuser password </li><li>  <strong><a href="https://forge.puppetlabs.com/codingfuture/cfsystem">cfsystem</a></strong> - configuration: APT, time zone, system mail, time synchronization, extended list of standard packages </li><li>  All modules are integrated with the <strong><a href="https://forge.puppetlabs.com/codingfuture/cfnetwork">cfnetwork</a></strong> network filter <strong><a href="https://forge.puppetlabs.com/codingfuture/cfnetwork">module</a></strong> and do not require additional settings. </li></ol><br></blockquote><a name="habracut"></a><br><h2 id="tematicheskiy-cikl">  Thematic cycle: </h2><br><ul><li>  <em><a href="https://habrahabr.ru/post/277085/">Part I: network and network filter (cfnetwork + cffirehol)</a></em> </li><li>  <strong><em>Part II: Access and Standard Environment (cfauth + cfsystem)</em></strong> </li><li>  <em><a href="https://habrahabr.ru/post/278163/">Part III: Install Puppet Server (cfpuppetserver)</a></em> </li><li>  <em><a href="https://habrahabr.ru/post/279375/">Part IV: Centralized Management (cftotalcontrol)</a></em> </li><li>  <em><a href="https://habrahabr.ru/post/305108/">Part V: Databases (cfdb)</a></em> </li><li>  <em><a href="https://habrahabr.ru/post/320244/">Part VI: Topical Blacklists and Secure Knock</a></em> </li></ul><br><p>  This pair of modules serves to automate standard actions that need to be carried out on virtually any deployed system. </p><br><h1 id="modul-cfauth">  <code>cfauth</code> module </h1><br><h3 id="celi">  goals </h3><br><ul><li>  Clean OpenSSH config and leave only the most necessary <br><ul><li>  Access only by public key </li><li>  Disabling the receiving of client‚Äôs DNS servers - both automatically and with additional brakes (not always) </li><li>  Turning off OpenSSH and Debian banners </li><li>  Enable aggressive SSH KeepAlive </li></ul></li><li>  Allow SSH access only for users of the special group <code>ssh_access</code> </li><li>  Set superuser password in encrypted form </li><li>  Creating a separate user for SSH access <br><ul><li>  Permit <code>sudo</code> commands </li><li>  By default, without a password (simplifies the administration of a large number of systems): <br><ul><li> <code>/opt/puppetlabs/puppet/bin/puppet agent --test</code> </li> <li> <code>/usr/bin/apt-get update</code> </li> <li> <code>/usr/bin/apt-get dist-upgrade</code> </li> <li> <code>/usr/bin/apt-get autoremove *</code> </li> </ul></li><li>  The default allowed environment settings are: <br><ul><li> <code>DEBIAN_FRONTEND</code> </li> </ul></li><li>  It is acceptable to disable the <code>sudo</code> password for all commands - conveniently and relatively safely for a large number of machines in the DMZ </li></ul></li></ul><br><h2 id="konfiguraciya">  configuration </h2><br><ul><li>  <strong><code>cfauth::admin_auth_keys</code></strong> - mandatory list of public SSH keys in the format <a href="https://docs.puppetlabs.com/puppet/latest/reference/type.html">ssh_authorized_key</a> <br><ul><li>  <code>user</code> parameter is already set </li><li>  <code>type = 'ssh-rsa'</code> - default </li></ul></li><li>  <strong><code>admin_user = 'adminaccess'</code></strong> is the name of the administrator account.  It is advisable to change and not use the standard. </li><li>  <strong><code>admin_password = undef</code></strong> - if specified, sets the hashed password for <code>root</code> users and <code>$admin_user</code> <br>  <em>It is recommended to use <code>mkpasswd -m sha-512</code> to generate a password.</em> </li><li>  <strong><code>admin_hosts = undef</code></strong> - passed as <code>src</code> for the <code>cfnetwork::service_port</code> filter.  <strong><em>Highly recommended.</em></strong> </li><li>  <strong><code>sudo_no_password_all = false</code></strong> - if <code>true</code> , then allows the user <code>$admin_user</code> to run all commands via <code>sudo</code> without a password </li><li>  <strong><code>sudo_no_password_commands = undef</code></strong> - an additional list of <code>sudo</code> commands that <code>$admin_user</code> can execute without a password.  For cases where it is inappropriate to allow all commands. </li><li>  <strong><code>sudo_env_keep = []</code></strong> - additional environment variables that are allowed to leave for <code>sudo</code> </li><li>  <strong><code>sshd_ports = 22</code></strong> - the list of default SSH ports.  Automatically creates a <code>cfssh</code> service via <code>cfnetwork::describe_services</code> </li><li>  <strong><code>sshd_config_template = 'cfauth/sshd_config.epp'</code></strong> - ability to override the standard template for generating the OpenSSH configuration file </li></ul><br><h1 id="modul-cfsystem">  <code>cfsystem</code> module </h1><br><p>  This module is focused not only on separate systems, but also on the ability to provide standard services within the DMZ in order to limit admissible outgoing connections and maintain ethical network standards - do not break a team of dozens of systems into external services. </p><br><h3 id="celi-1">  goals </h3><br><ul><li>  Setting <code>hostname</code> to <code>certname</code> is for prevention </li><li>  Set APT settings for a specific release of Debian or Ubuntu <br><ul><li>  By default, <a href="https://wiki.debian.org/AptPreferences">APT pinning is</a> installed 1001 for basic packages, which forcibly installs actual packages even if a rollback to older versions is required (relevant if testing or unstable packages were accidentally installed) </li><li>  If necessary, configure a caching proxy server <br><ul><li>  It is advisable only when deploying more than one system in one place </li><li>  <a href="https://www.unix-ag.uni-kl.de/~bloch/acng/">Apt-cacher-ng is used</a> </li><li>  It can be used as a simple HTTP / HTTPS proxy for downloading other updates to the infrastructure without the need to allow outgoing connections to the outside world.  For obvious reasons, HTTPS is not cached. </li></ul></li></ul></li><li>  Sets the time zone. <br>  <em>Recommendation: the taste and color, but UTC by default solves many problems - I speak both as an admin and as a developer.</em> </li><li>  Sets up constant time synchronization. <br><ul><li>  If necessary, allow other machines to use this system as a time reference. </li></ul></li><li>  Set <code>SMTP</code> settings <br><ul><li>  If necessary, specify a smarthost with a login and password. </li><li>  If necessary, allow other local machines to centrally send their system messages. <br>  <em>Note: this is convenient from the point of view of network security, storing smarthost access or the correct DNS settings, etc.</em> </li></ul></li><li>  Install all necessary network filter rules via the <code>cfnetwork</code> API </li><li>  Install a wide variety of administrative tools available to the administrator, which are not included in the standard list of utilities, including: <em>etckeeper, curl, htop, tree, ethtool, iftop, netcat, netstat-nat, conntrack, telnet, screen, apticron, chkrootkit, rkhunter , debsums, etc.</em>  <em>(not full and will be expanded, it is possible to add a configuration option)</em> </li><li>  Install and retrieve <code>cf_location</code> and <code>cf_location_pool</code> special facts that are convenient to use in the Hiera configuration. </li><li>  Setting standard system parameters </li><li>  Forcing the installation of a noop I / O scheduler for SSDs and virtual disks (on guest systems) </li><li>  Ability to add arbitrary commands to /etc/rc.local </li><li>  Set all possible locales and select one standard (default is en_US.UTF-8) </li><li>  Daily check of the need to reboot if the kernel version does not match the newest installed one </li><li>  Forced client update puppet.conf </li><li>  A set of helper scripts installed under / opt / codingfuture / bin and added to the Shell and Csh path: <br><ul><li>  cf_clear_email_queue - remove all messages from the system queue for sending </li><li>  cf_clear_frozen_emails - remove only frozen messages from the send queue </li><li>  cf_send_test_email - send test emails to admin address </li><li>  cf_kernel_version_check - check the discrepancy between the running kernel version and the latest installed one </li></ul></li></ul><br><h3 id="klass-cfsystem">  <code>cfsystem</code> class </h3><br><p>  <strong>All nested classes are added automatically.</strong> </p><br><ul><li>  <strong><code>allow_nfs = false</code></strong> - if not allowed, then cut out the default RPC &amp; NFS </li><li>  <strong><code>admin_email = undef</code></strong> - email address for system notifications </li><li>  <strong><code>repo_proxy = undef</code></strong> - set HTTP / HTTPS proxy server for downloading system packages <br><ul><li>  <code>host</code> - IP or name </li><li>  <code>port</code> - TCP port </li></ul></li><li>  <strong><code>add_repo_cacher = false</code></strong> - set a proxy server accepting clients on <code>$service_face</code> </li><li>  <strong><code>service_face = 'any'</code></strong> - the <code>cfnetwork::iface</code> interface on which to listen to clients if services are enabled </li><li>  <strong><code>ntp_servers = [ 'pool.ntp.org' ]</code></strong> - list of NTP servers to synchronize </li><li>  <strong><code>add_ntp_server = false</code></strong> - install an NTP server that accepts clients on <code>$service_face</code> </li><li>  <strong><code>timezone = 'Etc/UTC'</code></strong> - time zone </li><li>  <strong><code>apt_purge</code></strong> - passed to <code>apt::purge</code> , removes all unmanaged settings of repositories and package preferences </li><li>  <strong><code>apt_update</code></strong> is passed to <code>apt::update</code> .  By default, daily with a timeout of 300 seconds. </li><li>  <strong><code>apt_pin = 1001</code></strong> - priority for standard packages.  Additional repositories are added as $ apt_pin + 1 (1001&gt; = forced downgrade) </li><li>  <strong><code>apt_backports_pin = 600</code></strong> - if you do not install&gt; = $ apt_pin&gt; 1000, then the packages will automatically roll back to the old version (so by default, due to <a href="http://backports.debian.org/FAQ/">limited support for security updates</a> ) </li><li>  <strong><code>real_hdd_scheduler = 'deadline'</code></strong> is the default hard disk I / O scheduler.  For SSD and virtualok always noop. </li><li>  <strong><code>rc_local = undef</code></strong> - additional list of commands for /etc/rc.local </li><li>  <strong><code>puppet_host = "puppet.${::trusted['domain']}"</code></strong> - address of Puppet Server </li><li>  <strong><code>puppet_cahost = $puppet_host</code></strong> - address Puppet CA </li><li>  <strong><code>puppet_env = $::environment</code></strong> - the current environment (usually <code>production</code> ) </li><li>  <strong><code>puppet_use_dns_srv = false</code></strong> - does <a href="https://docs.puppetlabs.com/guides/scaling_multiple_masters.html">DNS SRV use records</a> to detect <code>$puppet_host</code> and <code>$puppet_cahost</code> </li><li>  <strong><code>locale = 'en_US.UTF-8'</code></strong> is the default locale </li></ul><br><h3 id="klass-cfsystemhierapool">  class <code>cfsystem::hierapool</code> </h3><br><p>  Installing and maintaining facts that are handy for setting up a hierarchy in hiera.yaml. </p><br><ul><li>  <code>cf_location</code> is essentially the associative name of the physical data center.  On this basis, it is convenient to set the addresses of the APT package repository, etc. </li><li>  <code>cf_location_pool</code> is a specific group of servers; it implies a separate DMZ group at a specific location. </li></ul><br><p>  Example: </p><br><pre> <code class="hljs ruby">--- <span class="hljs-symbol"><span class="hljs-symbol">:backends</span></span>: - yaml <span class="hljs-symbol"><span class="hljs-symbol">:hierarchy</span></span>: - <span class="hljs-string"><span class="hljs-string">"%{::trusted.domain}/%{::trusted.hostname}"</span></span> - <span class="hljs-string"><span class="hljs-string">"%{::trusted.domain}"</span></span> - <span class="hljs-string"><span class="hljs-string">"%{::cf_location}/%{::cf_location_pool}"</span></span> - <span class="hljs-string"><span class="hljs-string">"%{::cf_location}"</span></span> - common <span class="hljs-symbol"><span class="hljs-symbol">:merge_behavior</span></span>: deeper <span class="hljs-symbol"><span class="hljs-symbol">:yaml</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">:datadir</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span></code> </pre> <br><p>  Options: </p><br><ul><li>  <strong><code>location = undef</code></strong> - saves to <code>/etc/cflocation</code> , if specified </li><li>  <strong><code>pool = undef</code></strong> - saves to <code>/etc/cflocationpool</code> if specified </li></ul><br><h3 id="klass-cfsystememail">  class <code>cfsystem::email</code> </h3><br><p>  Configure sending system notifications. </p><br><ul><li>  <strong><code>smarthost = undef</code></strong> - installs smarthost for SMTP </li><li>  <strong><code>smarthost_login = undef</code></strong> - login for smarthost if necessary </li><li>  <strong><code>smarthost_password = undef</code></strong> - password for smarthost if necessary </li><li>  <strong><code>relay_nets = &lt;private subnets&gt;</code></strong> list of networks that are allowed to send messages through this system (does not include by itself) </li><li>  <strong><code>listen_ifaces = undef</code></strong> - a list of <code>cfnetwork::iface</code> interfaces on which to listen to clients for sending emails </li><li>  <strong><code>disable_ipv6 = true</code></strong> ‚Äî disable IPv6 ‚Äî goes straight to the Exim4 config. <br>  <em>Note: Using IPv6 for SMTP is still a bad idea.</em> </li></ul><br><h3 id="klass-cfsystemsysctl">  class <code>cfsystem::sysctl</code> </h3><br><ul><li>  <strong><code>vm_swappiness = 1</code></strong> - 0-100 (%), reduces the use of swap to the minimum by default. </li></ul><br><p>  This functionality is not yet complete and is likely to expand. </p><br><h3 id="klass-cfsystemdebian">  class <code>cfsystem::debian</code> </h3><br><p>  Specific to Debian: </p><br><ul><li>  <strong><code>apt_url = 'http://httpredir.debian.org/debian'</code></strong> - Base Address for APT <br>  <em>Attention: problems with apt-cacher-ng were noticed - it is better to specify fixed if used for infrastructure</em> </li><li>  <strong><code>security_apt_url = 'http://security.debian.org/'</code></strong> - Base address for Debian Security APT </li><li>  <strong><code>release</code> = 'jessie'</strong> - release name </li></ul><br><h3 id="klass-cfsystemubuntu">  class <code>cfsystem::ubuntu</code> </h3><br><p>  Specific to Ubuntu: </p><br><ul><li>  <strong><code>apt_url = 'mirror://mirrors.ubuntu.com/mirrors.txt'</code></strong> - Base address for APT </li><li>  <strong><code>release = 'wily'</code></strong> - release name </li></ul><br><h3 id="tip-cfsystemdebiandebconf">  type <code>cfsystem::debian::debconf</code> </h3><br><p>  A wrapper around the standard <code>package</code> type, but with support for ideologically correct Debian Config configuration. </p><br><ul><li>  <strong><code>package = $title</code></strong> - the name of the package, right in the <code>package</code> </li><li>  <strong><code>ensure = present</code></strong> - right in the <code>package</code> </li><li>  <strong><code>config = []</code></strong> - configuration options for <code>debconf-set-selections</code> </li></ul><br><h1 id="zhivoy-primer">  Living example </h1><br><p>  The full deployment of infrastructure in Vagrant can be found <a href="https://github.com/codingfuture/puppet-test">here</a> . </p><br><h3 id="nastroyki-hiera">  Hiera settings </h3><br><pre> <code class="hljs rust">--- classes: - cfsystem #       `cf_location`  `cf_location_pool`    # ,       cfsystem::hierapool::location: <span class="hljs-symbol"><span class="hljs-symbol">'somelocation</span></span>' cfsystem::hierapool::pool: <span class="hljs-symbol"><span class="hljs-symbol">'somepool</span></span>' cfauth::admin_user: vagrant # mkpasswd -m sha-<span class="hljs-number"><span class="hljs-number">512</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">'vagrant</span></span>' cfauth::admin_password: '$<span class="hljs-number"><span class="hljs-number">6</span></span>$W32Psa5h$l7iIrVFdG.<span class="hljs-number"><span class="hljs-number">6</span></span>SRta86n1GlDcMBapDP3fpzLD4F2Vkz2xTfd2GFg34h5CEBH3JifiVRszumAteGDLXZEbp2bx3Z0' cfauth::sudo_no_password_all: <span class="hljs-literal"><span class="hljs-literal">true</span></span> cfauth::admin_auth_keys: data_test: key: <span class="hljs-symbol"><span class="hljs-symbol">'AAAAB3NzaC1yc2EAAAADAQABAAAAgQDiruOsKA2xTeITRnmLlWph1xNdyoX7cufWU48737E8KQSltRZEeyyLKKPR0L</span></span>+XTwrvpIhwymikP+<span class="hljs-number"><span class="hljs-number">7</span></span>K77KMF8yEg9f98FaYtxGdEvPqGVO7Dezdg3eQmQzYce0/wlgLXn0GJa2TcrG7lvSnHkCjbOV5lRWP5vY92skYQHhuwtMgtQ==' options: - <span class="hljs-symbol"><span class="hljs-symbol">'from</span></span>=<span class="hljs-string"><span class="hljs-string">"10.0.0.0/8,192.168.0.0/16,172.16.0.0/12"</span></span>' #        IP cfauth::admin_hosts: - '<span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span>' - '<span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span>' - '<span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">12</span></span>' #  APT , NTP  SMTP Smarthost    cfsystem::repo_proxy: host: maint.example.com port: <span class="hljs-number"><span class="hljs-number">3142</span></span> cfsystem::ntp_servers: <span class="hljs-symbol"><span class="hljs-symbol">'maint</span></span>.example.com' cfsystem::email::smarthost: <span class="hljs-symbol"><span class="hljs-symbol">'maint</span></span>.example.com' #       <span class="hljs-symbol"><span class="hljs-symbol">'maint</span></span>.example.com' #=================================================== cfsystem::add_repo_cacher: <span class="hljs-literal"><span class="hljs-literal">true</span></span> cfsystem::add_ntp_server: <span class="hljs-literal"><span class="hljs-literal">true</span></span> cfsystem::ntp_servers: - <span class="hljs-number"><span class="hljs-number">0</span></span>.debian.pool.ntp.org - <span class="hljs-number"><span class="hljs-number">1</span></span>.debian.pool.ntp.org - <span class="hljs-number"><span class="hljs-number">2</span></span>.debian.pool.ntp.org - <span class="hljs-number"><span class="hljs-number">3</span></span>.debian.pool.ntp.org cfsystem::email::smarthost: cfsystem::email::listen_ifaces: <span class="hljs-symbol"><span class="hljs-symbol">'main</span></span>'</code> / wlgLXn0GJa2TcrG7lvSnHkCjbOV5lRWP5vY92skYQHhuwtMgtQ ==' <code class="hljs rust">--- classes: - cfsystem #       `cf_location`  `cf_location_pool`    # ,       cfsystem::hierapool::location: <span class="hljs-symbol"><span class="hljs-symbol">'somelocation</span></span>' cfsystem::hierapool::pool: <span class="hljs-symbol"><span class="hljs-symbol">'somepool</span></span>' cfauth::admin_user: vagrant # mkpasswd -m sha-<span class="hljs-number"><span class="hljs-number">512</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">'vagrant</span></span>' cfauth::admin_password: '$<span class="hljs-number"><span class="hljs-number">6</span></span>$W32Psa5h$l7iIrVFdG.<span class="hljs-number"><span class="hljs-number">6</span></span>SRta86n1GlDcMBapDP3fpzLD4F2Vkz2xTfd2GFg34h5CEBH3JifiVRszumAteGDLXZEbp2bx3Z0' cfauth::sudo_no_password_all: <span class="hljs-literal"><span class="hljs-literal">true</span></span> cfauth::admin_auth_keys: data_test: key: <span class="hljs-symbol"><span class="hljs-symbol">'AAAAB3NzaC1yc2EAAAADAQABAAAAgQDiruOsKA2xTeITRnmLlWph1xNdyoX7cufWU48737E8KQSltRZEeyyLKKPR0L</span></span>+XTwrvpIhwymikP+<span class="hljs-number"><span class="hljs-number">7</span></span>K77KMF8yEg9f98FaYtxGdEvPqGVO7Dezdg3eQmQzYce0/wlgLXn0GJa2TcrG7lvSnHkCjbOV5lRWP5vY92skYQHhuwtMgtQ==' options: - <span class="hljs-symbol"><span class="hljs-symbol">'from</span></span>=<span class="hljs-string"><span class="hljs-string">"10.0.0.0/8,192.168.0.0/16,172.16.0.0/12"</span></span>' #        IP cfauth::admin_hosts: - '<span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">8</span></span>' - '<span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span>' - '<span class="hljs-number"><span class="hljs-number">172.16</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">12</span></span>' #  APT , NTP  SMTP Smarthost    cfsystem::repo_proxy: host: maint.example.com port: <span class="hljs-number"><span class="hljs-number">3142</span></span> cfsystem::ntp_servers: <span class="hljs-symbol"><span class="hljs-symbol">'maint</span></span>.example.com' cfsystem::email::smarthost: <span class="hljs-symbol"><span class="hljs-symbol">'maint</span></span>.example.com' #       <span class="hljs-symbol"><span class="hljs-symbol">'maint</span></span>.example.com' #=================================================== cfsystem::add_repo_cacher: <span class="hljs-literal"><span class="hljs-literal">true</span></span> cfsystem::add_ntp_server: <span class="hljs-literal"><span class="hljs-literal">true</span></span> cfsystem::ntp_servers: - <span class="hljs-number"><span class="hljs-number">0</span></span>.debian.pool.ntp.org - <span class="hljs-number"><span class="hljs-number">1</span></span>.debian.pool.ntp.org - <span class="hljs-number"><span class="hljs-number">2</span></span>.debian.pool.ntp.org - <span class="hljs-number"><span class="hljs-number">3</span></span>.debian.pool.ntp.org cfsystem::email::smarthost: cfsystem::email::listen_ifaces: <span class="hljs-symbol"><span class="hljs-symbol">'main</span></span>'</code> </pre> <br><p>  <strong>UPD 2016-02-18:</strong> </p><br><ul><li>  Added description of auto configuration of disk I / O scheduler </li><li>  Support for arbitrary commands in /etc/rc.local </li></ul><br><p>  <strong>UPD 2016-03-12:</strong> </p><br><ul><li>  Office apt pinning </li><li>  Locale management </li><li>  Check for a reboot if the kernel version does not match the newest installed one </li><li>  A set of previously not documented support scripts for Exim </li><li>  Puppet Agent Configuration Options </li><li>  Type cfsystem :: debian :: debconf </li><li>  Added support for variable environments for <code>sudo</code> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/277309/">https://habr.com/ru/post/277309/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277297/index.html">VR and AR Digest: February</a></li>
<li><a href="../277301/index.html">Bagel, pixelart, space. ‚ÄúWow, another planet!‚Äù</a></li>
<li><a href="../277303/index.html">Questionnaire customers. Zoho Survey Description</a></li>
<li><a href="../277305/index.html">Here it is, mutated algorithm. Or what can not "Lisp"</a></li>
<li><a href="../277307/index.html">Russian call center: Ekaterinburg Naumen + SIP-Gateway assembly Novosibirsk, the results</a></li>
<li><a href="../277311/index.html">Why are mobile web apps so slow?</a></li>
<li><a href="../277313/index.html">How I made a mistake when writing a hash table and what conclusions did I make of it</a></li>
<li><a href="../277315/index.html">Like this - to be a software developer for cars. Part 2/2</a></li>
<li><a href="../277317/index.html">Advanced internal SEO for e-commerce</a></li>
<li><a href="../277319/index.html">Azure-IaaS-Digest number 1 (January \ February)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
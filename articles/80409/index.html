<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a simple SOCKS4 server in Assembler language</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago, I wanted to try to implement a proxy server for my own needs, and one that could be used in the future, as well as its size was minimal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a simple SOCKS4 server in Assembler language</h1><div class="post__text post__text-html js-mediator-article">  Some time ago, I wanted to try to implement a proxy server for my own needs, and one that could be used in the future, as well as its size was minimal.  A natural option for me was an implementation using assembler.  The program turned out to be small, convenient, and later I used it very often.  But now, after years, I would like to show the simplest implementation of one protocol, SOCKS4.  This protocol was created so that clients located on the local network behind a firewall could access the external network.  At the same time, customer requests in this case have the opportunity to control :) The very first thing that is needed during implementation is to read the documentation describing this protocol, since we want our protocol to be understood by standard programs, without ‚Äúundermining the file‚Äù.  So, the documentation: <br><br>  <a href="http://ru.wikipedia.org/wiki/SOCKS">SOCKS protocol description</a> <br>  <a href="http://www.ufasoft.com/doc/socks4_protocol.htm">SOCKS: A protocol for TCP proxy across firewalls</a> <br><br>  Now, armed with a description, let's get started.  The work of the proxy server consists in accepting a request from a client in a specific format, forming a socket and connecting it to the address requested by the client, and then providing data exchange between two sockets before they are closed by the server or the client.  Let's start the implementation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  <b><i>Macros and data structures used in the program</i></b> <br><br>  Form the include file, includes.inc.  In this file we will place the standard macros + structures for working with SOCKS4 when writing Windows programs.  Here I will not give all the macros, I will give only the description and functionality necessary to solve the main problem, everything else you will find in the attached file with the source codes. <br><pre><code class="hljs dos">; SOCKS4 ‚Äì ,  ,    ;   (DSTIP)/(DSTPORT) CONNECT_SOCK4 Struc VN Db ? <span class="hljs-built_in"><span class="hljs-built_in">CD</span></span> Db ? DSTPORT Dw ? DSTIP Dd ? NULL Db ? CONNECT_SOCK4 Ends ; SOCKS4 -  -  . RESPONSE_SOCK4 Struc VN Db ? <span class="hljs-built_in"><span class="hljs-built_in">CD</span></span> Db ? DSTPORT Dw ? DSTIP Dd ? RESPONSE_SOCK4 Ends</code> </pre> <br><br>  By and large, the CONNECT_SOCK4 and RESPONSE_SOCK4 structures are no different, since we implement the protocol without authorization.  But I decided to leave them all the same so that in the future it was easy to change them, for refinement.  In the structures themselves, in the variable VN, the protocol version is indicated, in our case, there should always be 4 here, in the case of SOCKS5 there is 5 in this variable (the protocol is basically similar).  The variable CD is used to return the result of the proxy request to the client to the address requested by the client (90 - connection successful / 91 - connection failed). <br>  In fact, we have three stages in the program. <br>  * First, we initialize the socket, listen to the socket for client requests, create a processing thread. <br>  * The second stage is the analysis of the client's request, an attempt to create and connect the socket with the server requested by the client. <br>  * And the final, third stage is the transfer of data between the client's socket and the socket created and connected to us with the requested address. <br><br>  <b><i>Implementation of the first stage, initialization of the program:</i></b> <br><br><pre> <code class="hljs pgsql">;  ,     WinMain Proc <span class="hljs-keyword"><span class="hljs-keyword">LOCAL</span></span> ThreadId, hServSock :DWORD <span class="hljs-keyword"><span class="hljs-keyword">LOCAL</span></span> hostname[<span class="hljs-number"><span class="hljs-number">256</span></span>] :BYTE <span class="hljs-keyword"><span class="hljs-keyword">LOCAL</span></span> _wsa :WSADATA <span class="hljs-keyword"><span class="hljs-keyword">LOCAL</span></span> _our :sockaddr_in ;     ,     <span class="hljs-number"><span class="hljs-number">1.1</span></span>, ;     invoke WSAStartup, <span class="hljs-number"><span class="hljs-number">0101</span></span>h, ADDR _wsa .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax == <span class="hljs-number"><span class="hljs-number">0</span></span> ;   ,  ,     invoke gethostname, ADDR hostname, <span class="hljs-number"><span class="hljs-number">256</span></span> invoke gethostbyname, ADDR hostname .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax == <span class="hljs-number"><span class="hljs-number">0</span></span> invoke inet_addr, ADDR hostname .<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> mov eax, [eax + <span class="hljs-number"><span class="hljs-number">12</span></span>] mov eax, [eax] mov eax, [eax] .endif mov _our.sin_addr, eax invoke inet_ntoa, eax mov _our.sin_family, AF_INET mov _our.sin_addr.S_un.S_addr, INADDR_ANY xor eax, eax ;  ,       mov ax, SOCKS_PORT invoke htons, eax mov _our.sin_port, ax invoke socket, AF_INET, SOCK_STREAM, <span class="hljs-number"><span class="hljs-number">0</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax != INVALID_SOCKET ;     mov hServSock, eax ;          invoke bind, hServSock, ADDR _our, SIZEOF sockaddr_in .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax != SOCKET_ERROR @@: ;     invoke <span class="hljs-keyword"><span class="hljs-keyword">listen</span></span>, hServSock, SOMAXCONN .repeat ;  ,      invoke accept, hServSock, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">until</span></span> eax != INVALID_SOCKET ;  ,       xchg eax, ebx invoke CreateThread, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, ADDR socketThread, ebx, <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>, ADDR ThreadId ;     jmp @B .endif .endif invoke closesocket, hServSock .endif invoke ExitProcess, <span class="hljs-number"><span class="hljs-number">0</span></span> WinMain Endp</code> </pre><br>  This is our first procedure, I tried to comment on the code as much as possible so that you could figure it out, but if something is not clear, please contact me or MSDN.  In principle, all code is written using MASM and WinAPI syntax.  The result of the work of the above function should be a working socket on one of the network addresses of your machine (local address, or external address if you have a real IP) + the function creates a separate stream used by the client to work with the incoming client.  Now let's go further ... <br><br>  <b><i>The second stage, the analysis of the client's request</i></b> <br><br>  At the second stage, all that needs to be done is to accept the CONNECT_SOCK4 structure, create a socket, try to connect it and send a response to the client.  Implementation: <br><br><pre> <code class="hljs markdown">socketThread Proc sock:DWORD LOCAL lpMem, <span class="hljs-emphasis"><span class="hljs-emphasis">_csock, ThreadId, dAmount :DWORD LOCAL Remote :sockaddr_</span></span>in LOCAL wrFds, rdFds :fd<span class="hljs-emphasis"><span class="hljs-emphasis">_set LOCAL hResp :RESPONSE_</span></span>SOCK4 ;       invoke FdZero, ADDR rdFds invoke FdSet, sock, ADDR rdFds invoke select, NULL, ADDR rdFds, NULL, NULL, NULL ;      invoke ioctlsocket, sock, FIONREAD, ADDR dAmount ;     mov lpMem, @Result(LocalAlloc, LMEM<span class="hljs-emphasis"><span class="hljs-emphasis">_FIXED or LMEM_</span></span>ZEROINIT, dAmount) ;      invoke recv, sock, lpMem, dAmount, 0 ;   lea edi, hResp mov esi, lpMem ;  Esi   .   ()   SOCKS4, ; SOCKS5      ,    ... Assume Esi : Ptr CONNECT<span class="hljs-emphasis"><span class="hljs-emphasis">_SOCK4 Assume Edi : Ptr RESPONSE_</span></span>SOCK4 .if [<span class="hljs-string"><span class="hljs-string">esi</span></span>].VN == 4 ;    4 .if [<span class="hljs-string"><span class="hljs-string">esi</span></span>].CD == 1 invoke socket, AF<span class="hljs-emphasis"><span class="hljs-emphasis">_INET, SOCK_</span></span>STREAM, 0 .if eax != INVALID<span class="hljs-emphasis"><span class="hljs-emphasis">_SOCKET mov _</span></span>csock, eax ;    ,      mov Remote.sin<span class="hljs-emphasis"><span class="hljs-emphasis">_family, AF_</span></span>INET mov ax, [<span class="hljs-string"><span class="hljs-string">esi</span></span>].DSTPORT mov Remote.sin<span class="hljs-emphasis"><span class="hljs-emphasis">_port, ax mov eax, [esi].DSTIP mov Remote.sin_</span></span>addr, eax mov cx, [<span class="hljs-string"><span class="hljs-string">esi</span></span>].DSTPORT mov edx, [<span class="hljs-string"><span class="hljs-string">esi</span></span>].DSTIP ;  Edi    mov [<span class="hljs-string"><span class="hljs-string">edi</span></span>].VN, 0 mov [<span class="hljs-string"><span class="hljs-string">edi</span></span>].DSTPORT, cx mov [<span class="hljs-string"><span class="hljs-string">edi</span></span>].DSTIP, edx ;      invoke connect, <span class="hljs-emphasis"><span class="hljs-emphasis">_csock, ADDR Remote, SIZEOF Remote .if !eax ;  ,    mov [edi].CD, 90 ;   ,     invoke send, sock, ADDR hResp, SIZEOF RESPONSE_</span></span>SOCK4, 0 ;        ;    ; -        , ;   ; -       , ;     mov ebx, @Result(LocalAlloc, LMEM<span class="hljs-emphasis"><span class="hljs-emphasis">_FIXED or LMEM_</span></span>ZEROINIT, SIZEOF THREAD<span class="hljs-emphasis"><span class="hljs-emphasis">_DATA) Assume Ebx : Ptr THREAD_</span></span>DATA mov eax, <span class="hljs-emphasis"><span class="hljs-emphasis">_csock mov [ebx].Server, eax mov eax, sock mov [ebx].Client, eax Assume Ebx : Nothing ;     (    ;    ) invoke CreateThread, NULL, NULL, ADDR ClientSock, ebx, NULL, ADDR ThreadId .else ;     -    invoke closesocket, _</span></span>csock ; ,     mov [<span class="hljs-string"><span class="hljs-string">edi</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">RESPONSE_SOCK4.CD</span></span>], 91 ;   ,     invoke send, sock, ADDR hResp, SIZEOF RESPONSE_SOCK4, 0 .endif .endif .endif .endif Assume Edi: Nothing Assume Esi: Nothing ;  ,    invoke LocalFree, lpMem ret socketThread Endp</code> </pre><br>  The result of this procedure is a connected socket, as well as a stream created that implements the exchange of data between two sockets.  It's simple.  It is only necessary to clarify, here are used a few points on addressing within the structures that are entered into MASM to facilitate the life of the programmer.  The first moment, the macro ‚ÄúAssume‚Äù. <br>  The Assume Esi: Ptr CONNECT_SOCK4 line tells the compiler that this register (Esi) contains the address of the CONNECT_SOCK4 structure, which further simplifies the access to variables inside this structure.  Assume Esi: Nothing unbinds.  To better understand, it will probably be easier if I specify several addressing options: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Assume</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Esi</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Ptr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">CONNECT_SOCK4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">al</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[esi]</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.VN</span></span> ;   <span class="hljs-selector-tag"><span class="hljs-selector-tag">AL</span></span>     <span class="hljs-selector-tag"><span class="hljs-selector-tag">VN</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">al</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[esi]</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.CD</span></span> ;   <span class="hljs-selector-tag"><span class="hljs-selector-tag">AL</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">CD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ax</span></span>. <span class="hljs-selector-attr"><span class="hljs-selector-attr">[esi]</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.DSTPORT</span></span> ;   <span class="hljs-selector-tag"><span class="hljs-selector-tag">AX</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">DSTPORT</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Assume</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Esi</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Nothing</span></span></code> </pre><br>  or <br><pre> <code class="hljs markdown">mov al, [<span class="hljs-string"><span class="hljs-string">esi</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">CONNET_SOCK4.VN</span></span>] ;   AL     VN mov al, [<span class="hljs-string"><span class="hljs-string">esi</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">CONNET_SOCK4.CD</span></span>] ;   AL  CD mov ax, [<span class="hljs-string"><span class="hljs-string">esi</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">CONNET_SOCK4.DSTPORT</span></span>] ;   AX  DSTPORT</code> </pre><br>  or <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">al</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">byte</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ptr</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[esi]</span></span> ;   <span class="hljs-selector-tag"><span class="hljs-selector-tag">AL</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">VN</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">al</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">byte</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ptr</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[esi+1]</span></span> ;   <span class="hljs-selector-tag"><span class="hljs-selector-tag">AL</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">CD</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mov</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ax</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">word</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ptr</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[esi+2]</span></span> ;   <span class="hljs-selector-tag"><span class="hljs-selector-tag">AX</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">DSTPORT</span></span></code> </pre><br><br>  I think you obviously, just like me, that it is faster, more convenient and clearer to use the first option.  Although if you need to refer to one variable structure - has the right to exist and the second option.  The third option I think is better to use in cases where the data at the address are not structured.  But, as you know, the taste and color, each a Tambov wolf to himself.  Use the method you prefer. <br>  Another point worth clarifying.  Macro <a href="http://habrahabr.ru/users/result/" class="user_link">Result</a> .  This macro is written so that you can call the WinAPI function in one line and put the result of the execution in a register or memory.  So the string: <br><pre> <code class="hljs perl">mov lpMem, @Result(LocalAlloc, LMEM_FIXED <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> LMEM_ZEROINIT, dAmount)</code> </pre><br>  It first performs the following call: <br><pre> <code class="hljs pgsql">invoke LocalAlloc, LMEM_FIXED <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> LMEM_ZEROINIT, dAmount</code> </pre><br>  and after the execution of this call, the result of execution (Eax) is entered into the lpMem variable.  In this particular case, the memory will be allocated, and the address will be written into the variable at which the area allocated for us is located. <br><br>  <b><i>Stage Three, Data Transfer</i></b> <br><br>  So, the two most difficult stages are completed.  The client came, we connected it to the remote server and the turn of the simplest ‚Äúmonkey‚Äù work came.  Data transfer between two sockets.  Let's make it simple, in a quick way: <br><pre> <code class="hljs ruby">;         .... ClientSock Proc <span class="hljs-symbol"><span class="hljs-symbol">Param:</span></span>DWORD LOCAL sserver, <span class="hljs-symbol"><span class="hljs-symbol">sclient:</span></span>DWORD LOCAL rdFds <span class="hljs-symbol"><span class="hljs-symbol">:fd_set</span></span> LOCAL dAmount, <span class="hljs-symbol"><span class="hljs-symbol">lpBuf:</span></span> DWORD ;  Param         , ;     mov ebx, Param Assume <span class="hljs-symbol"><span class="hljs-symbol">Ebx:</span></span> Ptr THREAD_DATA mov eax, [ebx].Server mov sserver, eax mov eax, [ebx].Client mov sclient, eax Assume Ebx : Nothing ;     invoke LocalFree, Param @@: invoke FdZero, ADDR rdFds invoke FdSet, sserver, ADDR rdFds invoke FdSet, sclient, ADDR rdFds invoke select, NULL, ADDR rdFds, NULL, NULL, NULL ; ,      .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax == SOCKET_ERROR <span class="hljs-params"><span class="hljs-params">||</span></span> eax == <span class="hljs-number"><span class="hljs-number">0</span></span> ;   -  jmp @F .endif ;     ,    ? invoke FdIsSet, sserver, ADDR rdFds .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax ;      invoke ioctlsocket, sserver, FIONREAD, ADDR dAmount ;     mov lpBuf, @Result(LocalAlloc, LMEM_FIXED <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> LMEM_ZEROINIT, dAmount) invoke recv, sserver, lpBuf, dAmount, <span class="hljs-number"><span class="hljs-number">0</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax == SOCKET_ERROR <span class="hljs-params"><span class="hljs-params">||</span></span> eax == <span class="hljs-number"><span class="hljs-number">0</span></span> jmp @F .endif invoke send, sclient, lpBuf, eax, <span class="hljs-number"><span class="hljs-number">0</span></span> invoke LocalFree, lpBuf .endif ;         ? invoke FdIsSet, sclient, ADDR rdFds .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax ;      invoke ioctlsocket, sclient, FIONREAD, ADDR dAmount ;     mov lpBuf, @Result(LocalAlloc, LMEM_FIXED <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> LMEM_ZEROINIT, dAmount) invoke recv, sclient, lpBuf, dAmount, <span class="hljs-number"><span class="hljs-number">0</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> eax == SOCKET_ERROR <span class="hljs-params"><span class="hljs-params">||</span></span> eax == <span class="hljs-number"><span class="hljs-number">0</span></span> jmp @F .endif invoke send, sserver, lpBuf, eax, <span class="hljs-number"><span class="hljs-number">0</span></span> invoke LocalFree, lpBuf .endif ;     jmp @B @@: ;   invoke closesocket, sserver invoke closesocket, sclient ;    invoke ExitThread, <span class="hljs-number"><span class="hljs-number">0</span></span> ClientSock Endp</code> </pre><br>  Initially, in this procedure, internal variables are initialized from the structure passed to the stream so that they are more convenient to use.  Then, the loop checks whether there is data to read from the sockets, then two pieces of code (in fact, copy-paste, I didn‚Äôt bother taking out the function and optimizing because it‚Äôs so clearer) reading from one socket and sending it to the second. <br>  Everything, hooray!  Compile and try.  In principle, the best option is FireFox.  In the connection settings, we indicate that you need to use a SOCKS4 proxy server.  We indicate its address and the port on which it is located with us.  After that, we save the settings and enjoy the Internet, passed through our proxy, 3.5 KB in size))) Yes, I will clarify.  To compile, it is advisable to have the <a href="http://www.masm32.com/">MASM32</a> package installed; compilation is done using the bldall.bat bldallc.bat batch files (the console version of the application). <br><br>  The source code of the application, as well as several old projects in assembly language, can be found here: <br><br>  <a href="https://github.com/dovgalenko/Socks4">Socks4</a> </div><p>Source: <a href="https://habr.com/ru/post/80409/">https://habr.com/ru/post/80409/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80401/index.html">GUI for connecting network volumes via SSH</a></li>
<li><a href="../80405/index.html">Audiobooks 2009</a></li>
<li><a href="../80406/index.html">Touch Screen Accuracy Comparison</a></li>
<li><a href="../80407/index.html">Inbrics M1 - the thinnest Android-smartphone with a QWERTY-keyboard. Do you still want Milestone?</a></li>
<li><a href="../80408/index.html">Do you often listen to audio books?</a></li>
<li><a href="../80411/index.html">Hacker in Law (blogger bablaw) reprinted an open letter to the President in defense of genuine software freedom</a></li>
<li><a href="../80412/index.html">Mobile phones protect against Alzheimer's disease</a></li>
<li><a href="../80413/index.html">OperaTor updated to 3.5</a></li>
<li><a href="../80414/index.html">Hands reached: we continue about ASA</a></li>
<li><a href="../80417/index.html">Visualization of links between web resources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
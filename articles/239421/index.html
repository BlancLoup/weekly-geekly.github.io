<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NemerleWeb - Unique Web Framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="NemerleWeb is a framework for creating single-page web applications (Single Page Application - SPA), which translates Nemerle code into a mix of JavaS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NemerleWeb - Unique Web Framework</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b19/ad3/b3a/b19ad3b3a7c86297fd15a7dfe6d80aff.png" alt="NemerleWeb" align="left">  <b>NemerleWeb</b> is a framework for creating single-page web applications (Single Page Application - SPA), which translates Nemerle code into a mix of JavaScript and HTML, and also provides two-way data binding, transparent duplex communication with the server, static typing with real tips and many more what else. <br><br><h4>  How it works? </h4><br>  The developer describes the logic of the models in the Nemerle compiled language. <br>  Thanks to macros, the code in this language is very concise, in fact, we only describe the logic of the application.  This distinguishes our solution from libraries in pure JavaScript. <br><a name="habracut"></a><br>  Most models contain one or more HTML templates with which two-way data binding is performed.  Binding, like the rest of the code, looks very simple: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äù$Name‚Äù</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  It is enough to put the first $ in the attribute, and the attribute will be calculated automatically, based on the following code. <br>  In this code, by the way, almost any expressions are allowed - the main thing is that these expressions fit in the resulting HTML. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Further, from the created model, * .js files and templates are generated, and the whole thing is inserted into your static page. <br><br>  Model description is a single file inside an ordinary ASP.NET MVC project. <br><br><h4>  Show me the code! </h4><br>  The code for the simplest model looks like this: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Unit</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Page</span></span> { Name : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> = <span class="hljs-string"><span class="hljs-string">"world"</span></span>; [Html] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">View</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) : </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span></span> { &lt;<span class="hljs-meta"><span class="hljs-meta"># &lt;input value=‚Äù$Name‚Äù /&gt; &lt;div&gt;Hello, $Name&lt;/div&gt; #&gt; } }</span></span></code> </pre><br>  Watch: <a href="http://www.nemerleweb.com/helloworld">Result</a> , <a href="">Source Code</a> <br><br>  This will generate a JavaScript ‚Äúclass‚Äù <b>Page</b> and an HTML <b>Page_View</b> template, which includes primitives for automatic two-way data binding. <br><br>  The <b>[Unit]</b> attribute marks the classes from which the client side code should be created, and the <b>[Html]</b> methods that we want to turn into templates. <br><br><h4>  I already have a ready site on C # </h4><br>  If you have a ready site to which you do not want to drag Nemerle, you can create a separate project on Nemerle, the model from which you insert into the main site in C # in this way: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PageWithModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-string"><span class="hljs-string">"Index"</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>)NemerleProject.MyModel.Render()); }</code> </pre><br>  The static Render method will be automatically generated by the compiler for any model you create.  In this method, by the way, you can pass parameters with which the client-side constructor will be called later. <br><br><h4>  Why Nemerle and NemerleWeb? </h4><br>  The fact is that Nemerle has a very developed infrastructure for creating macros.  The developer is allowed to intervene in many stages of the compilation and, if necessary, make his own changes. <br>  It was metaprogramming that made it possible to create a framework with a very laconic structure and with almost unlimited possibilities.  And since Nemerle is also statically typed, we get intelligence and a basic check for typos for free. <br><br><h4>  Task list </h4><br>  To demonstrate the possibilities, I chose a typical ToDo list, but with advanced features.  Our list will automatically save changes to the server, while notifying other clients about the update via SignalR. <br><br>  Tasks will be sorted by priority using LINQ.  By the way, they can be used directly from the template. <br><br>  To communicate the server with the client, we use SignalR, which is already the standard for this kind of solutions in ASP.NET. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//       [Unit]    JavaScript, //    Server,     // ASP.NET MVC Controller [Unit] public class ReactiveToDo { //  [Dto]     public mutable. //    [Record],   , //     [Dto] public class Task { Name : string; IsDone : bool; Priority : string; } //       [Unit]        Server,    . //  Nemerle         C#. //    ,      mutable. mutable _tasks = List.[Task](); mutable _todoName = "New task"; mutable _todoPriority = "high"; public this() { //  server  ,    Unit //   Server (. ) //    Load()  callback, //   . //     Load ,  callback -   . //      XMLHttpRequest //         . _ = server.Load(tasks =&gt; SetTasks(tasks)); } //          SignalR, //         SetTasks(tasks : List[Task]) : void { _tasks = tasks; } Add() : void { _tasks.Add(Task(_todoName, false, _todoPriority)); SaveToServer(); _todoName = "Task #" + _tasks.Count; _todoPriority = "high"; } SaveToServer() : void { //  Save   List[Task],     //     . //         , //      ,   //  window.console.log    JavaScript . _ = server.Save(_tasks, status =&gt; window.console.log(status)) } //         . //   ,     LINQ, //     linq.js // &lt;# #&gt; -  C#   @‚Äù‚Äù,     . //     : &lt;# &lt;# a #&gt; #&gt; . [Html] public View() : string { &lt;# &lt;table class="reactive-todo-table"&gt; &lt;tr&gt; &lt;th&gt;Priority&lt;/th&gt;&lt;th&gt;Task&lt;/th&gt;&lt;th&gt;Status&lt;/th&gt; &lt;/tr&gt; &lt;tr $foreach(task in _tasks.OrderBy(t =&gt; t.Priority))&gt; &lt;td&gt;$(task.Priority)&lt;/td&gt; &lt;td&gt;$(task.Name)&lt;/td&gt; &lt;td&gt;&lt;input type="checkbox" event-change="$SaveToServer" checked="$(task.IsDone)" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;div&gt; &lt;input value="$_todoName" /&gt; &lt;select value="$_todoPriority"&gt; &lt;option&gt;high&lt;/option&gt; &lt;option&gt;low&lt;/option&gt; &lt;/select&gt; &lt;button click="$Add"&gt;Add&lt;/button&gt; &lt;/div&gt; #&gt; } //       ASP.NET MVC //        , //         ,  //     . //  [SignalR]    Server, //       broadcast  signal (. ) [SignalR] public class Server { //     . //          . static mutable _db : List[Task] = List(); static this() { _db.Add(Task("Write article", false, "high")); _db.Add(Task("Fix website bugs", false, "high")); _db.Add(Task("Add new functionality", false, "low")); } public Load() : List[Task] { // Nemerle    return    //      "  " _db } //     . //        'void'. public Save(tasks : List[Task]) : string { _db = tasks; //    SignalR.  ,    //    .      //  client,        //  . //    . //  broadcast   SetTasks   . //      signal,   //           broadcast client.SetTasks(_db); //  ,   : "ok" } } }</span></span></code> </pre><br>  Watch: <a href="http://www.nemerleweb.com/reactivetodo">Result</a> , <a href="">Source Code</a> <br>  An example cleared of comments: <a href="https://gist.github.com/ionoy/1424ef755d04cec34284">gist</a> <br><br>  Note: Open the page in two tabs at the same time to see how the data is updated automatically. <br><br><h4>  Retreat </h4><br>  The purpose of this publication is not to encourage people to use NemerleWeb in production, but rather to tell about the project and, perhaps, find like-minded people.  In our humble opinion, the Nemerle macrosystem allows you to do things that were simply not available in web development before, so we got carried away with this venture.  We hope very much that in the end it will be possible to make a slender reliable framework out of this. <br><br><h4>  Conclusion </h4><br>  On this first time to complete the article. <br><br>  In the following parts we will tell about: <br><ul><li>  Data binding templates. </li><li>  Contact with the server, SignalR </li><li>  Details of translation, Typescript (yes, we can automatically parse the Typescript declaration) </li></ul><br><br><h4>  Links </h4><br>  Project website: <a href="http://www.nemerleweb.com/">www.nemerleweb.com</a> <br>  Repository: <a href="https://github.com/NemerleWeb/NemerleWeb">https://github.com/NemerleWeb/NemerleWeb</a> </div><p>Source: <a href="https://habr.com/ru/post/239421/">https://habr.com/ru/post/239421/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239409/index.html">Why snowkit</a></li>
<li><a href="../239411/index.html">Protecting HTTP traffic with Citrix Netscaler</a></li>
<li><a href="../239413/index.html">"Smart money" from Microsoft and FRIA for startups</a></li>
<li><a href="../239415/index.html">Jump start on October 7th. Modernizing the company's IT infrastructure using Windows Server 2012 R2</a></li>
<li><a href="../239419/index.html">Installing and running Asterisk on an Android smartphone</a></li>
<li><a href="../239423/index.html">Chrome who stole christmas</a></li>
<li><a href="../239429/index.html">Another non-discovery of life on Mars?</a></li>
<li><a href="../239431/index.html">Reflections on design principles</a></li>
<li><a href="../239433/index.html">Apache Cordova adds support for Windows 8.1 and Windows Phone 8.1</a></li>
<li><a href="../239435/index.html">Dangerous finally or waiting 5.6</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Optimization of loading static data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A small question about how to optimize the loading of a large amount of static data into a PHP program. 

 There was a problem loading pre-calculated ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Optimization of loading static data</h1><div class="post__text post__text-html js-mediator-article">  A small question about how to optimize the loading of a large amount of static data into a PHP program. <br><br>  There was a problem loading pre-calculated data into the program for finding the path between two points (no matter what).  The problem arose so strongly that the loading of the calculated data began to occupy 90% of all subsequent calculations. <br>  My data is a two-dimensional array consisting of 200 by 200 cells approximately. <br><br><h3>  I'm testing unserialize, json_decode </h3><br>  with letter keys <br>  json_decode - 0.080sec <br>  unserialize - 0.072sec 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      digital keys only <br>  json_decode - 0.041 sec (170kb) <br>  unserialize - 0.037 sec (500kb) <br><br>  The route itself is searched for 0.0004-0.0012 sec :) <br>  So you need to think of something else. <br><br><a name="habracut"></a>  As an option - you can download data selectively.  But for me this option did not fit (because under certain conditions it is necessary to use all the data). <br><br><h3>  And if you use the generated PHP-array with eval? </h3><br>  eval - 0.086sec <br>  It is no good.  :( <br><br>  But what prevents me from uploading the generated PHP file instead of eval, which will be generated when the data changes? <br>  In theory, it should load data faster. <br>  As a result, the following code was born: <br><blockquote><code><font color="black">define( <font color="#A31515">"PREDEFINED_PATH"</font> , <font color="#A31515">"path.inc"</font> ); <br> <br> include_once(PREDEFINED_PATH); <br> <br> <font color="#0000ff">function</font> create(){ <br> $data=array(); <br> <br> <font color="#008000">//  2D  $data</font> <br> <font color="#008000">// ...</font> <br> <br> file_put_contents(PREDEFINED_PATH, <font color="#A31515">"&lt;?function return_path(){return "</font> .var_export($data,TRUE). <font color="#A31515">";}?&gt;"</font> ); <br> <br> } <br> <br> <font color="#0000ff">function</font> use(){ <br> <font color="#008000">//</font> <br> <br> <font color="#008000">//$path=serialize($p);</font> <br> <font color="#008000">//$path=json_decode($p);</font> <br> $path=return_path(); <br> } <br></font></code> </blockquote><br><blockquote> <code><font color="black"><font color="#008000">//  path.inc </font> <br> &lt;? <font color="#0000ff">function</font> return_path(){ <font color="#0000ff">return</font> array(1=&gt;array(1=&gt;array(1=&gt;2,2=&gt;12,3=&gt;...)));}?&gt;</font> <br> <br> <font color="#008000">//  return_path   </font></code> </blockquote> <br><br>  The test showed 0.023 sec (640kb). <br>  It is 1.6 times faster than unserialize.  True, it takes more space. <br>  But this is a fixable matter - you can save it manually, for example, without saving keys, spaces, and transitions to the next line (which makes var_export). <br>  The only negative is the static data structure. <br><br><h3>  eAccelerator </h3><br>  The second minus - we didn‚Äôt have another experiment - download. <br>  include should convert 640 kb of text to code, and it takes 0.37 sec.  Oh, how not great. <br><br>  This is where eAccelerator comes to the rescue :) reducing the second and subsequent include files to 0.0001, which does not affect the resulting speed. <br><br>  ps thanks to <a href="https://habrahabr.ru/users/tigr/" class="user_link">TiGR</a> user for constructive criticism. </div><p>Source: <a href="https://habr.com/ru/post/56240/">https://habr.com/ru/post/56240/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../56223/index.html">And how do you do the pagination on your sites</a></li>
<li><a href="../56225/index.html">OpenTTD 0.7.0</a></li>
<li><a href="../56228/index.html">Performance Optimization in C ++ Applications (Windows)</a></li>
<li><a href="../56231/index.html">Acer Hornet Nettop may be the first implementation of the NVIDIA Ion platform</a></li>
<li><a href="../56236/index.html">Evernote in Russia: The Elephant Reached</a></li>
<li><a href="../56242/index.html">Nokia E97 Envelop concept phone</a></li>
<li><a href="../56248/index.html">What's new will be in WordPress 2.8</a></li>
<li><a href="../56251/index.html">Yota for business - commercial launch</a></li>
<li><a href="../56254/index.html">Amazon launches new cloud service Elastic MapReduce</a></li>
<li><a href="../56255/index.html">PyGame. Introduction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
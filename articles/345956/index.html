<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>History 3 places Russian AI Cup 2017</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! In this article, I want to briefly outline the key points of my strategy during the last Russian AI Cup programming competition in artificial i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>History 3 places Russian AI Cup 2017</h1><div class="post__text post__text-html js-mediator-article">  Hello!  In this article, I want to briefly outline the key points of my strategy during the last Russian AI Cup programming competition in artificial intelligence. <br><br><img src="https://habrastorage.org/webt/6n/au/ov/6nauovctjocniui6wx6itj2tyao.png"><br><br><h2>  A bit about Russian AI Cup </h2><br>  The essence of the event is that it was necessary to write a bot for the game, the rules of which were set by the organizers and changed during the event. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The peculiarity of the task of this year was that it was necessary to create an artificial intelligence that controls a large number of combat units. <br><br>  Rules can be found <a href="https://habrahabr.ru/company/mailru/blog/340540/">here</a> . <br><a name="habracut"></a><br><h2>  Something about me </h2><br>  My profile is <a href="http://russianaicup.ru/profile/Leos">Leos</a> . <br><br>  I took part in a similar event for the second time. <br><br>  The first experience was in 2015 - Russian AI Cup 2015, CodeRacing.  Then all I achieved was getting into the second round.  And this could have ended and there would be no story, but one day on Habr√© I came across an article from one of the winners who radically changed my idea of ‚Äã‚Äãwhat should have been done.  From that moment I waited for the next opportunity to take part in such an event. <br><br>  2016 had to be missed - the army. <br><br>  I started participating in this competition almost from the very start of the open beta test. <br><br><h2>  Strategy </h2><br>  <b>The first sensible strategy</b> was a simple sandwich plus fighters who acted independently. <br><br>  However, it was clear that in the second round, sandwiches would not be effective, so it was necessary to look for something else.  Potential fields <a href="http://russianaicup.ru/profile/GreenTea">suggested themselves</a> and after I saw them in action from <a href="http://russianaicup.ru/profile/GreenTea">GreenTea</a> , it became clear that I would use them. <br><br>  <b>The second strategy</b> was the small sandwiches (big buter broke into 10 groups).  Fighters still acted independently. <br>  Here are some examples of how she worked against various opponents' strategies in the first round: <br>  The enemy has several groups: <a href="http://russianaicup.ru/game/view/106992">russianaicup.ru/game/view/106992</a> <br>  Opponent sandwich: <a href="http://russianaicup.ru/game/view/124483">russianaicup.ru/game/view/124483</a> <br><br>  The main advantage of this strategy was that groups with a large number of wounded units could be diverted to a safe distance and all ARRVs were expelled. <br><br>  But the shortcomings were more significant: <br><br><ul><li>  Firstly, the construction of these sandwiches took about 1500 ticks at the start, and when the facilities appeared, it was important to begin to act on the map as quickly as possible. </li><li>  Secondly, the sandwiches were forced to move with a minimum speed in order not to disturb their structure. </li><li>  Finally, the sandwiches themselves were quite vulnerable, and if my fighters died at the beginning of the battle, the enemy fighters and helicopters were enough to completely destroy my troops. </li></ul><br>  <b>The third strategy</b> was to use 5 groups as is.  Probably, this is the most optimal strategy for splitting troops, since most of the participants in the final have come to this. <br><br><h2>  Turn sequence </h2><br>  In the first versions I went in groups every 10 ticks in turn, and the order was broken only by the enemy‚Äôs nuclear strikes. <br><br>  In the final version for each group I calculate the need for a move.  The need for a move is determined by the maximum potential difference for the corresponding group, and the enemy‚Äôs nuclear strike is taken into account separately.  If there is no group with sufficient need for a move, then we do nothing. <br><br>  Here it is also worth noting that some actions require several actions in a row (for example, selecting and moving a group).  Therefore, I started the monitor, which is captured if the action does not consist of a single command, and when the monitor is captured, only its owner can perform actions. <br><br>  I didn't have any queues for the teams.  In order not to re-allocate an already selected group, I always remember which group is currently selected. <br><br><h2>  Selection of priority groups based on potential difference </h2><br>  Potentials counted for all their groups. <br><br>  Went through 64 different directions.  First the formula: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af7/184/b26/af7184b26ae7d7fff3d5e00bcacbf1bf.svg" alt="image"></div><br>  Where <img src="https://habrastorage.org/getpro/habr/post_images/bf2/4ea/6ae/bf24ea6ae950e50811ec8b23939fe982.svg" alt="image">  - the potential of the group in the center, <br><img src="https://habrastorage.org/getpro/habr/post_images/ab6/6a8/2fc/ab66a82fc8c4351cd23a72af3dbabd63.svg" alt="image">  - potential at the <i>k</i> -th point, <br><img src="https://habrastorage.org/getpro/habr/post_images/2d6/434/201/2d6434201cad34fb1829a624d85e7014.svg" alt="image">  - the number of ticks needed to get to the <i>k</i> -th point. <br><br>  Actually <img src="https://habrastorage.org/getpro/habr/post_images/14d/a45/90a/14da4590a9f173f1c679275eeb668134.svg" alt="image">  - this is a relative potential difference.  I counted it for each direction.  Points <img src="https://habrastorage.org/getpro/habr/post_images/ab6/6a8/2fc/ab66a82fc8c4351cd23a72af3dbabd63.svg" alt="image">  - these are just some points on this direction that are remote for a given distance. <br><br>  Using the same formula, I calculated the relative potential difference for the current direction of movement - <img src="https://habrastorage.org/getpro/habr/post_images/dae/f4b/a7e/daef4ba7e0cdec4f1618a5c6e1bbf85d.svg" alt="image">  . <br><br>  Considered the top priority group with the maximum difference <img src="https://habrastorage.org/getpro/habr/post_images/3e0/fa8/074/3e0fa80747dc08c31f9460ad022fc585.svg" alt="image">  . <br><br><h2>  Potential calculation </h2><br>  I focused on the selection of potentials.  In fact there should be a lot of mathematics here, but I will write only the essence: <br><br>  There were 3 types of potentials: <br><br><ul><li>  Strongly decreasing (set by exponent) </li><li>  Medium decreasing (asked <img src="https://habrastorage.org/getpro/habr/post_images/1ef/9ab/76f/1ef9ab76ffbdf954eb4e9807491ece2e.svg" alt="image">  ) </li><li>  Weakly decreasing (asked <img src="https://habrastorage.org/getpro/habr/post_images/81b/82c/cec/81b82ccec969de249581cd223c56a11d.svg" alt="image">  ) </li></ul><br>  There were 4 objects generating potentials: <br><br>  1) the boundaries of the map <br><br>  Highly decreasing, repulsive potential, so as not to be driven into a corner, not to crash into the edges of the map. <br><br>  2) Allied units <br><br><ul><li>  Highly decreasing, repulsive potential for groups that may encounter. </li><li>  ARRV generated a moderately decreasing attracting potential for air groups. </li><li>  TANK and ARRV generated a moderately decreasing attracting potential for FIGHTER. </li><li>  IFV generated a moderately decreasing pull potential for HELICOPTER. </li></ul><br>  Here, the last two capabilities were added with the introduction of the fog of war, so that air forces cover ground forces by default. <br><br>  3) Enemy units <br><br>  Medium decreasing potential, for which the sign and the coefficient was calculated using his battle simulator. <br><br>  4) Facilities <br><br>  Weakly decreasing potential, about the coefficient for which I will write in more detail. <br><br><h2>  Capture facilities </h2><br>  I calculated the coefficients from each structure for all my groups.  The emphasis is on the following things: <br><br><ul><li>  Do not run a crowd to capture one building. </li><li>  Protection of their facilities, while capturing the enemy. </li><li>  Not to seize facilities that the enemy protects, including retreating, throwing a grip if I am attacked. </li></ul><br>  I did not invent anything abstruse here, I registered everything with ifems, then I selected more or less adequate coefficients by trial and error. <br><br><h2>  Manufacture of machinery </h2><br>  The type of equipment produced was determined using the battle simulator. <br><br>  The merging of technology into new groups took place when the potential difference for a new group was quite large.  At the same time, for these groups, only the enemy potentials and the potentials of the structures were taken into account (this was corrected on the day between the finals, because of which I suffered a lot of unpleasant defeats on the first day of the final). <br><br><h2>  Battle simulator </h2><br>  Already mentioned twice, but nothing special about it.  The goal of the simulator was to determine how much one group is stronger than another. <br><br>  2 groups take part in the battle.  I consider their full health and damage taking into account all the features (ground / air, type of equipment, ARRV). <br>  After that, I run an iterative process.  Damage at each iteration is proportional to current health.  Health at each iteration decreases by the amount of damage to the enemy. <br>  The number of iterations in the latest version was 10. <br><br>  In general, it worked well and my units did not climb into losing clashes. <br><br><h2>  Clustering </h2><br>  Naturally it was necessary to determine the enemy group.  Here I made a simple algorithm as a stub, which remained with me to the end. <br><br>  I divided the region into 8x8 tiles, and if there are enemy units in the neighboring tiles at a distance of less than 9, then I combined them into one group. <br><br><h2>  Approximation of enemy groups </h2><br>  Approximated adversary groups with an ellipse.  Deliberately wrong algorithm, which again used as a stub, but came to the end with me. <br><br>  Defined the main axis and the normal to it, which passed through the center of the group in the direction of the most distant technology in the group and in the perpendicular to it, respectively.  Then determined the radii. <br><br><h2>  Fog of war </h2><br>  Nothing special came up with the introduction of the fog of war.  I memorized the positions of the enemy, added additional potentials, so that the air forces covered ground forces. <br><br><h2>  Visualizer </h2><br>  With the visualizer did not bother much.  Draw only potential fields.  And when analyzing games I used it in conjunction with the locale runner. <br><br>  I will add a few examples to have pictures. <br><br><img src="https://habrastorage.org/webt/-v/qe/7q/-vqe7qn5rlufohl2pbw6dsbezco.png"><br><br>  Here the fat green spot is my helicopters, and a potential field is built for them. <br><br>  Blue color corresponds to positive potentials, red - negative, black on a red background - very large in absolute value negative. <br><br>  Right-below three enemy ground groups that attract my helicopters.  In the center are enemy fighters that my helicopters fear.  A big black spot - my fighters, which can not be encountered. <br><br><img src="https://habrastorage.org/webt/3w/zm/jb/3wzmjblauijcdcqinpj7trw-ecu.png"><br><br>  Another example in which the actor is my IFV.  Here, all enemy groups, as well as the two on the right, are positive charges. <br><br>  Black spots correspond to places that are undesirable to move because of collisions with their groups.  The lower left structure has no effect, since the ARRV group has already moved to capture it. <br><br>  Both examples are taken from this battle - <a href="http://russianaicup.ru/game/view/310222">russianaicup.ru/game/view/310222</a> , 730 and 1800 ticks, respectively. <br><br><h2>  Code </h2><br>  Here is the <a href="https://bitbucket.org/ObukhovDmitry/raic2017">link</a> to my repository. <br>  Wrote in Java.  The quality of the code is what it is when I wrote, I did not expect that someone would see it.  Well, I'm not a javist, Java courses took place at the same time as ai cap. <br><br><h2>  And all? </h2><br>  Total: a lot of crutches and stubs, no abstruse algorithms. <br><br>  It turned out completely without emotion and dry, but I hope someone will find something useful for themselves. <br><br>  PS I almost forgot, all happy New Year!  :) <br><br>  Update: Corrected formulas to be visible on a mobile phone. </div><p>Source: <a href="https://habr.com/ru/post/345956/">https://habr.com/ru/post/345956/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345944/index.html">Simula - 50 years of OOP</a></li>
<li><a href="../345946/index.html">Objective-C compliant "Swift" code</a></li>
<li><a href="../345948/index.html">Enterprise Architecture vs alchemy enterprises. Part 2. Nowhere is easier: simple framework and simple enterprise.</a></li>
<li><a href="../345950/index.html">Welcome to the era of deep neuroevolution</a></li>
<li><a href="../345954/index.html">Simplify the work with RecyclerView</a></li>
<li><a href="../345958/index.html">How I wrote the game in 6 days</a></li>
<li><a href="../345960/index.html">ICA (state machine) for teapots on the example of the class "button" in the arduino</a></li>
<li><a href="../345962/index.html">Coding with the withdrawal of information. Part 2, Mathematical</a></li>
<li><a href="../345964/index.html">On the question of the principles of asynchronous solutions</a></li>
<li><a href="../345968/index.html">System for collecting, analyzing, notifying and visualizing logs on syslog-ng, elasticsearch, kibana, grafana, elasticalert</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
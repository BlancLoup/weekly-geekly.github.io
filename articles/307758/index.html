<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Restore from backup using Veeam Agent for Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The ultimate goal of creating a backup is to provide data recovery in the event of a failure, and today I will briefly describe how the new Veeam Agen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Restore from backup using Veeam Agent for Linux</h1><div class="post__text post__text-html js-mediator-article">  The ultimate goal of creating a backup is to provide data recovery in the event of a failure, and today I will briefly describe how the new Veeam Agent for Linux can handle this.  Take as the "guinea pig" the same backup, the creation of which was described <a href="https://habrahabr.ru/company/veeam/blog/306032/">in the previous post</a> , and see how you can recover from it.  For this, welcome under cat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4cf/92d/946/4cf92d946822477c9905fc1dbb13e90a.png"></div><br><a name="habracut"></a><br><h1>  File level recovery </h1><br>  As you remember, Veeam Agent for Linux successfully saved the backup to the NFS server.  Run the UI already familiar to us by entering the command <br> <code>veeam</code> <br>  Check the clock, that is, the data on the last session of the backup task: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/edc/be8/364/edcbe8364f7b44fcbc0a874098aafefd.png"></div><br>  Below, in the list of commands, the <b>R</b> command now appears <b>(Recover Files)</b> - recover files.  It will display information about the available backups: what host was in operation, what task created backup, how many recovery points (in our case, one) and at what time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/409/b75/7ac/409b757ac05a4882b42d8290d1074976.png"></div><br>  Press <b>Enter</b> twice, and the selected backup is mounted on our host's file system in the <i>/ mnt / backup</i> folder: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b3e/541/e0e/b3e541e0e7b4454bbfab9b462f8cdea1.png"></div><br>  Why did we decide to limit this operation?  Just thought that users usually have their own preferences in working with files, and there is no need to reinvent the wheel.  So after the mount has passed, you can use your usual method - for example, the command line or the popular <b>Midnight Commander</b> ( <b>mc</b> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/12c/de9/4e6/12cde94e63254b1098efa611aa4e3d9c.png"></div><br><h1>  Volume Recovery </h1><br>  Now let's see how the entire volume recovery is performed.  To begin with, we perform a machine boot using Veeam Recovery Media (downloaded with the installation package of the Veeam Agent for Linux solution).  It is launched using the ISO file. <br><br>  Veeam Recovery Media opens us a graphical interface with the following set of commands: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4cf/92d/946/4cf92d946822477c9905fc1dbb13e90a.png"></div><br>  Here you can restore volumes ( <b>Restore volumes</b> ), restore files ( <b>Restore files</b> ), network settings ( <b>Configure network</b> ), go to the command line ( <b>Switch to command line</b> ), and also reboot ( <b>Reboot</b> ) and shutdown ( <b>Shutdown</b> ). <br>  If, as in our example (and as recommended!), The backup is not stored on the local machine, but on the network storage system, then before starting the recovery procedure you must ensure that you have access to the backup storage location, and during the procedure you need to configure the settings network.  You can set the settings manually.  For this: <br><br><ol><li>  In this menu, select the <b>Configure network</b> item, then select the desired network adapter in the list, which will be used to connect to the storage system, and press <b>Enter</b> . <br><br></li><li>  In the <b>Configure adapter</b> dialog, select <b>Manual</b> (manual configuration) and press <b>Enter</b> . <br><br></li><li>  In the <b>Adapter settings</b> dialog, specify the required: IP address, subnet mask, default gateway, DNS server <br><br></li><li>  Click <b>Apply</b> and click <b>Enter</b> . <br><br><br>  If you are working with a DHCP server, Veeam Agent for Linux will automatically make the necessary settings - if you select <b>Auto</b> in the <b>Configure adapter</b> dialog. <br><br></li><li>  We continue to restore the volume: select the appropriate operation from the list of commands - this is <b>Restore volumes</b> . <br><br></li><li>  Next, in the <b>Select Backup Location</b> step, you need to specify the location of our backup.  For our example, you need to select the option to add balls <b>Add shared folder ...</b> <br><br></li><li>  Then, on the <b>Mount Shared Folder</b> step, we indicate that we have NFS: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e3a/f83/3e2/e3af833e2e074ab8b2c654257a337489.png"></div><br></li><li>  In the <b>Server / Directory</b> field, enter the name of the network orbs in which the backup files are located.  Veeam Agent for Linux mounts it to the <i>/ media</i> folder on our recovery image file system and displays the contents of the mounted volume.  In the <b>Browse for Backup Files</b> step, you can select the desired restore point to import it: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/617/80f/f2b/61780ff2b0214cb5abfec56e1553aa5a.png"></div><br>  <i>Useful:</i> If your backups are stored on one of the local devices, then in the <b>Select Backup Location</b> step, you will naturally select the <b>Mount local disk</b> option.  At the same time, it will be possible to perform mounting repeatedly for several devices on which backup files live.  To do this, go back to the step of choosing the location of the <b>Backup Backup Location</b> backup and again select the <b>Mount local disk</b> option. <br><br></li><li>  On the <b>Backup</b> step, select the required backup and in it the restore point. <br><br></li><li>  Then, at the <b>Disk Mapping</b> step, you can see which volumes the machine has in production (that is, the local host, <b>Current System</b> ) and in the backup.  Veeam Agent for Linux displays detailed information for the selected volume, including partition type, file system, location of the mount point, volume size, and also lists the available commands: <br><br><ul><li>  <b>Restore volume from</b> (restore volume) - restore this volume from backup. <br><br></li><li>  <b>Delete partition</b> - allows you to re-partition the disk before recovering the volume.  After deleting the partition, you can create a new one and put a volume on it from the backup. <br><br></li><li>  [to restore LVM volumes] <b>Create LVM physical volume</b> ‚Äî create a LVM physical volume on the selected partition and add it to an existing volume group (VG) or create a new group.  This will restore LVM logical volumes or volume groups to the selected VG. <br><br></li><li>  <b>Close</b> - close the dialog and select another volume. </li></ul><br>  Here we select <b>Restore volume</b> from and press <b>Enter</b> . <br><br></li><li>  In the <b>Current system</b> pane, in the <b>Restore</b> field, the name of the volume to be restored will appear next to the selected volume: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/431/45a/643/43145a64348f4bf6837c0f6d1feb20da.png"></div><br></li><li>  We confirm the choice (be careful, an oversight can be costly, because the data will be overwritten by those in the backup!), Click <b>(Start restore)</b> . <br><br></li><li>  Look at the brief summary, confirm the choice once again and watch the progress: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/671/36e/2b0/67136e2b0d634cc2a2208dac0e4cf6c6.png"></div><br></li></ol><br>  After completing the process, we finish working with Veeam Recovery Media: <br><br><ol><li>  Press <b>Esc</b> to return to the main menu. </li><li>  Disable media with recovery image. </li><li>  In the main menu, select <b>Reboot</b> and press <b>Enter</b> . </li><li>  We are waiting for the OS to start. </li></ol><br>  Here, in general, is the whole story about how the restoration is performed using Veeam Agent for Linux. <br><br><h3>  useful links </h3><br><ul><li>  <a href="https://habrahabr.ru/company/veeam/blog/306032/">Read the article about backup using Veeam Agent for Linux</a> </li><li>  <a href="https://go.veeam.com/webinar-linux-automation-backup-availability.htm">Learn more</a> about working with Veeam Agent for Linux at the upcoming 'live' webinar (in English) </li><li>  <a href="https://www.veeam.com/beta/val.html">Take part in beta testing</a> </li></ul><br>  <i>UPD:</i> Please note - the <a href="https://www.veeam.com/beta/val.html">link for downloading</a> from September 1 issued beta # 2.  Instructions for downloading and the password can still be found <a href="https://forums.veeam.com/veeam-agent-for-linux-f41/topic37366.html">on the</a> product <a href="https://forums.veeam.com/veeam-agent-for-linux-f41/topic37366.html">forum</a> . </div><p>Source: <a href="https://habr.com/ru/post/307758/">https://habr.com/ru/post/307758/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307746/index.html">MongoDB as a logger for OSSIM</a></li>
<li><a href="../307750/index.html">Nest Admin - control panel for sites (landing page)</a></li>
<li><a href="../307752/index.html">New flash storage for Big Data from IBM: Deep Flash 150</a></li>
<li><a href="../307754/index.html">Appcelerator Releases Hyperloop</a></li>
<li><a href="../307756/index.html">Container Virtualization: Standards Coming Soon</a></li>
<li><a href="../307760/index.html">How to plan and evaluate projects in Agile?</a></li>
<li><a href="../307762/index.html">Refactoring - power hidden in quality code</a></li>
<li><a href="../307764/index.html">Mitap Haskell programmers at Kaspersky Lab (in the sense of - waiting)</a></li>
<li><a href="../307766/index.html">Adobe AIR + Starling + rasterizing vector graphics</a></li>
<li><a href="../307768/index.html">The tale of virtualization-clustering and storage Fujitsu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
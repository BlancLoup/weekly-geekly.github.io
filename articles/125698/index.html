<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to SproutCore Part One</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, there have been many articles on JavaScript MVC frameworks. Apparently there is a need for such tools. My attention was drawn to a product c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to SproutCore Part One</h1><div class="post__text post__text-html js-mediator-article">  Recently, there have been many articles on JavaScript MVC frameworks.  Apparently there is a need for such tools.  My attention was drawn to a product called SproutCore.  Having discovered the meager availability of information in Russian, I decided to translate for myself a number of manuals from the official framework website.  I will share with the community the first of them. <br><br>  After reading this manual, you will be able to: <br><ul><li>  Use templates SproutCore, to describe the appearance of the application; </li><li>  Handle events inside the view; </li><li>  Use bindings to update the view after changing the state of the model. </li></ul><br><br>  You will learn all this while creating the application Todo-list. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The source code for this application is available on <a href="https://github.com/sproutcore/Todos-Example/">Github</a> .  There is also a <a href="http://vimeo.com/23527342">screencast</a> . <br><a name="habracut"></a><br>  <b>1 Installing SproutCore</b> <br><br>  It is assumed that you already have SproutCore installed, otherwise you need to install it. <br>  You can download the installer from the official SproutCore site, or you can install it using the RubyGems gem install sproutcore command. <br><br>  By the way, SproutCore is written in ruby, so the installer will still install the ruby ‚Äã‚Äãinterpreter.  After the end of development, you can make a build of the application, then ruby ‚Äã‚Äãwill no longer be needed, but more on that another time. <br><br>  I installed using RubyGems, there were no problems. <br><br>  <b>2 Creating a new application</b> <br><br>  First, let's generate the HTML application with the command: <br><br>  <b>$ sc-init todos - template</b> <br><br>  This utility will create several files in the <b>apps / todos</b> directory. <br><br>  <b>apps /</b> <br>  <b>todos /</b> <br>  <b>todos.js</b> is a JavaScript file that defines your models, views, and controllers. <br>  <b>resources /</b> <br>  <b>templates /</b> - contains application templates. <br>  <b>todos.handlebars</b> is the main application template. <br>  <b>images /</b> - contains images here. <br>  <b>stylesheets /</b> - and here are the styles. <br>  <b>todos.css</b> - the main style sheet for the application. <br>  <b>tests /</b> <br>  <b>Buildfile</b> - Contains commands for building an application.  In most cases, you can use the default file. <br>  <b>README</b> - Description of the project. <br><br>  If you open the <b>apps / todos / todos.js file,</b> you will see the following <br><pre><code class="javascript hljs">Todos = SC.Application.create(); SC.ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Todos.mainPane = SC.TemplatePane.append({ <span class="hljs-attr"><span class="hljs-attr">layerId</span></span>: <span class="hljs-string"><span class="hljs-string">"todos"</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateName</span></span>: <span class="hljs-string"><span class="hljs-string">"todos"</span></span> }); });</code> </pre> <br><br>  This code creates a namespace for the application (in this case, ‚ÄúTodos‚Äù), and adds a new panel. <br>  The panel is responsible for delegating events and placing your templates in the DOM, but more on that later. <br><br>  If, when generating an application, the name contains uppercase characters, for example, ToDos, then the namespace will be called ToDos, <br>  and directory names will contain underscores (in the given example, apps / to_dos). <br><br>  <b>3 model announcement</b> <br><br>  We create a todo list, respectively, users should be able to add tasks to the list, and also mark completed tasks. <br>  Define the model as a new subclass of SC.Object. <br>  Now the <b>apps / todos / todos.js file</b> looks like this: <br><br><pre> <code class="javascript hljs">Todos = SC.Application.create(); Todos.Todo = SC.Object.extend({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">isDone</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }); SC.ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Todos.mainPane = SC.TemplatePane.append({ <span class="hljs-attr"><span class="hljs-attr">layerId</span></span>: <span class="hljs-string"><span class="hljs-string">'todos'</span></span>, <span class="hljs-attr"><span class="hljs-attr">templateName</span></span>: <span class="hljs-string"><span class="hljs-string">'todos'</span></span> }); });</code> </pre><br>  Note that the model definition must follow after creating the Todos object. <br>  Now we have a model class with two properties, title - string and isDone - boolean. <br><br>  <b>4 Controlling a model using a controller</b> <br><br>  Now that the data has been described using a model, we will create a controller to control it.  Since we need an ordered list of tasks, we will use an instance of the SC.ArrayController class. <br><br>  At the end of the <b>apps / todos / todos.js file</b> we add: <br><pre> <code class="javascript hljs">Todos.todoListController = SC.ArrayController.create({ <span class="hljs-comment"><span class="hljs-comment">//      . content: [] });</span></span></code> </pre><br>  In MVC frameworks, such as SproutCore, the controller is a bridge between the model (responsible for working with data) and the view (responsible for displaying data). <br><br>  Now we have a controller without data, we will add to it a method for creating a new task.  Update the previous code in the <b>apps / todos / todos.js file</b> : <br><pre> <code class="javascript hljs">Todos.todoListController = SC.ArrayController.create({ <span class="hljs-comment"><span class="hljs-comment">//      . content: [], //      ,     . createTodo: function(title) { var todo = Todos.Todo.create({ title: title }); this.pushObject(todo); } });</span></span></code> </pre><br>  SC.ArrayController acts as a proxy to the contents of the array.  SproutCore will apply all changes made to the ArrayController directly to the contents of the array. <br><br>  <b>5 Creating a new task using a text field.</b> <br><br>  For this example, a CSS file was prepared that can be downloaded <a href="">here</a> and <br>  replace them with an empty file generated by the application creation utility located at <b>apps / todos / resources / stylesheets / todos.css</b> . <br><br>  We have a model and a controller that is configured to work with it, now let's get down to the most interesting part - creating a user interface.  To begin with, we will create a text field in which the user can enter the name of the task being created. <br><br>  To describe the user interface patterns in SproutCore, Handlebars are used, which has been somewhat extended for more convenience. <br><br>  To start working with views, open the <b>resources / templates / todos.handlebars file</b> . <br>  It contains the following: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to SproutCore!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Replace the contents with: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Todos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"new-todo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  ?"</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br>  Get more information on using Handlebars <a href="http://www.handlebarsjs.com/">here</a> .  To learn more about using Handlebars with SproutCore, read <a href="http://guides-redesign.strobeapp.com/using_handlebars.html">here</a> . <br><br>  Now that we have a model, controller and view, it's time to open the application in the browser and see how it looks.  To simplify the development process, there is the sc-server utility.  This command must be executed from the directory where the application is located. <br> <code><a href="http://0.0.0.0/"></a> $ sc-server <br> <br> Starting server at 0.0.0.0:4020 in debug mode <br> To quit sc-server, press Control-C <br> &gt;&gt; Thin web server (v1.2.1 codename Bat-Shit Crazy) <br> &gt;&gt; Maximum connections set to 1024 <br> &gt;&gt; Listening on 0.0.0.0:4020, CTRL+C to stop <br></code> <br>  Open a web browser and go to <a href="http://localhost:4020/todos">http: // localhost: 4020 / todos</a> .  Admire your creation.  After we make sure the application is working, it's time to tell SproutCore how to handle tag events.  When the user enters the name of the task and presses Enter, we will create a new task and add it to the array of tasks. <br><br>  In SproutCore, the view is responsible for updating the DOM tree and handling events.  In addition, it is possible to buffer changes in the DOM to improve performance, and to support universal cross-platform event handling.  Whenever you need to display <br>  dynamic content, you need to use the view object. <br><br>  Add the following code to the <b>apps / todos / todos.js file</b> before calling the SC.ready function: <br><pre> <code class="javascript hljs">Todos.CreateTodoView = SC.TextField.extend({ <span class="hljs-attr"><span class="hljs-attr">insertNewline</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.get(<span class="hljs-string"><span class="hljs-string">'value'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value) { Todos.todoListController.createTodo(value); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.set(<span class="hljs-string"><span class="hljs-string">'value'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); } } });</code> </pre><br>  When CreateTodoView contains a text field, we create a subclass of SC.TextField, which provides several conveniences for working with text fields.  For example, you can access property values ‚Äã‚Äãand respond to requests for higher-level events, such as insertNewline, <br>  when the user presses Enter.  Now that we have defined our presentation, we need to include it in the template. <br><br>  edit the <b>apps / todos / resources / templates / todos.handlebars file</b> : <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Todos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> {{#view Todos.CreateTodoView}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"new-todo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  ?"</span></span></span><span class="hljs-tag"> /&gt;</span></span> {{/view}}</code> </pre><br>  <b>#view</b> is an auxiliary block of Handlebars (helper or helper - as usual), which connects SC.TemplateView and HTML elements.  This means that the behavior described in the view (for example, event handling) will be associated with HTML elements inside the <b>#view</b> block. <br><br>  Now that we have an interface for creating new tasks, we will create an interface for displaying them. <br>  We will use the <b>#collection</b> block to display the list.  <b>#collection</b> will create an instance of SC.TemplateCollectionView, which will display each item in the list according to the HTML code inside the <b>#collection</b> block. <br><br>  Add the following code to the end of the <b>apps / todos / resources / templates / todos.handlebars file</b> : <br><pre> <code class="javascript hljs">{{#collection SC.TemplateCollectionView contentBinding=<span class="hljs-string"><span class="hljs-string">"Todos.todoListController"</span></span>}} {{content.title}} {{/collection}}</code> </pre><br>  We declared a collection binding to the content of todoListController. <br>  Now each element of the array will be displayed in accordance with the {{content.title}} template. <br><br>  Note that in order to create a binding (binding) you must declare a property whose name ends with a Binding.  In our case, the content property will be bound to Todos.todoListController and all changes to the content property will cause changes to Todos.todoListController. <br><br>  Great time to look at our application <a href="http://localhost:4020/todos">http: // localhost: 4020 / todos</a> in your browser.  It looks the same as before, but if you type the name of the task in the text field and press Enter, it will automatically be added to the list below the text field. <br><br>  Bindings or Bindings is the primary tool for working with data in SproutCore.  They do all the dirty work of data synchronization and display. <br><br>  <b>6 Task Mark</b> <br><br>  We have the ability to add tasks, but there is no way to mark their implementation.  Let's add this feature. <br><br>  The first thing we will do is add a checkbox to each item in the task list.  As mentioned earlier, in order to handle events (for example, user input), you must apply a view object to the part of HTML that needs this processing.  In our case, we add a checkbox and want to be notified every time a user changes his status.  Remember that we can link the view and the HTML content using the <b>#view</b> helper.  At the same time, we can refer <br>  on specific objects from HTML elements that are responsible for displaying data using the <b>view</b> helper (note the absence of #).  For example, you can create a complex presentation <br>  which will be used several times.  In this case, there is no need to update all templates when one of the elements needs to be updated. <br><br>  Replace the previous code in the <b>apps / todos / resources / templates / todos.handlebars file</b> with the following: <br><pre> <code class="javascript hljs">{{#collection SC.TemplateCollectionView contentBinding=<span class="hljs-string"><span class="hljs-string">"Todos.todoListController"</span></span>}} {{view Todos.MarkDoneView}} {{/collection}}</code> </pre><br>  Now we will describe Todos.MarkDoneView which we will refer to in the template.  When our view contains a checkbox, we declare a subclass of SC.Checkbox, which passes the value and title properties to the view. <br><br>  SproutCore binds the change event handler and updates the value when the handler finishes its work.  In different browsers this task may be implemented in different ways, but SproutCore will save you from these problems. <br><br>  For each item in the SC.TemplateCollectionView list, create a child view whose content property will contain a view object.  In our case, this will be a child view for each task, and the value of the content property will be tied to the contents of the specific task. <br><br>  This will allow us to easily link the properties of the checkbox and the properties of the object.  In our case, we will bind the value property (checkbox) with the isDone property (object) and the title property (checkbox) with the title property (object). <br><br>  Add the following code to the <b>apps / todos / todos.js</b> file before calling the SC.ready function: <br><pre> <code class="javascript hljs">Todos.MarkDoneView = SC.Checkbox.extend({ <span class="hljs-attr"><span class="hljs-attr">titleBinding</span></span>: <span class="hljs-string"><span class="hljs-string">'.parentView.content.title'</span></span>, <span class="hljs-attr"><span class="hljs-attr">valueBinding</span></span>: <span class="hljs-string"><span class="hljs-string">'.parentView.content.isDone'</span></span> });</code> </pre><br>  To give the task list a unique look, the CSS file contains different classes for active and completed tasks.  Let's connect the class property (checkbox) and the isDone property (object). <br><br>  Replace the task list display code in the <b>apps / todos / resources / templates / todos.handlebars file</b> with the following: <br><pre> <code class="javascript hljs">{{#collection SC.TemplateCollectionView contentBinding=<span class="hljs-string"><span class="hljs-string">"Todos.todoListController"</span></span> itemClassBinding=<span class="hljs-string"><span class="hljs-string">"content.isDone"</span></span>}} {{view Todos.MarkDoneView}} {{/collection}}</code> </pre><br>  Each element will receive an is-done class if the isDone property of the associated object is true.  SproutCore will automatically generate the class name based on the property name. <br><br>  Each view has a number of properties, such as ID, class, and classBinding.  The helper collection allows you to add to the elements any of these properties that will also be applied to all child views.  For example, if you define the itemClass property in collection, then each of the elements will have a class property. <br><br>  Now reload the application in the browser and try to mark the task as completed, the task text will immediately be crossed out.  If you change the isDone property of any array element, the corresponding HTML element will change its appearance.  SproutCore will do this automatically. <br><br>  <b>7 Learn more</b> <br><br>  We can add tasks and mark completed.  Can we still extract any information from the list?  Let's display at the top of the list the number of outstanding tasks. <br><br>  Open <b>apps / todos / resources / templates / todos.handlebars</b> and add a new view element after Todos.CreateTodoView. <br><pre> <code class="javascript hljs">{{#view Todos.StatsView id=<span class="hljs-string"><span class="hljs-string">"stats"</span></span>}} {{displayRemaining}} {{/view}}</code> </pre><br>  The {{displayRemaining}} expression will automatically update the DOM when the displayRemaining property of the Todos.StatsView view changes. <br><br>  Add a description of the view to the file <b>apps / todos / todos.js</b> before calling SC.ready: <br><pre> <code class="javascript hljs">Todos.StatsView = SC.TemplateView.extend({ <span class="hljs-attr"><span class="hljs-attr">remainingBinding</span></span>: <span class="hljs-string"><span class="hljs-string">'Todos.todoListController.remaining'</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayRemaining</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> remaining = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.get(<span class="hljs-string"><span class="hljs-string">'remaining'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (remaining === <span class="hljs-number"><span class="hljs-number">1</span></span> ? remaining +<span class="hljs-string"><span class="hljs-string">"   "</span></span> : <span class="hljs-string"><span class="hljs-string">"   : "</span></span>+remaining); }.property(<span class="hljs-string"><span class="hljs-string">'remaining'</span></span>) });</code> </pre><br>  displayRemaining contains a plural string based on the number of remaining tasks.  Here is another major tool SproutCore in action, it is called a computed property.  A calculated property is a property whose value is determined using a function. <br><br>  To get the actual number of tasks not completed, add the corresponding property to the controller. <br><br>  in the <b>apps / todos / todos.js file,</b> update the code as follows: <br><pre> <code class="javascript hljs">Todos.todoListController = SC.ArrayController.create({ <span class="hljs-comment"><span class="hljs-comment">// ... remaining: function() { return this.filterProperty('isDone', false).get('length'); }.property('@each.isDone') });</span></span></code> </pre><br>  In this case, we use the <a href="https://habrahabr.ru/users/each/" class="user_link">each</a> dependency key.  Thus, we declare the dependence on the change of the isDone property of any element of the array.  Properties with the key <a href="https://habrahabr.ru/users/each/" class="user_link">each are</a> also updated when adding or removing items.  It is necessary to declare dependency keys, since  SproutCore uses them to update bindings.  That's how it works. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/945/784/9df/9457849df084396057e2638f808532b9.png" alt="bindings"><br><br>  <b>8 Deleting completed tasks</b> <br><br>  When working with the application, you will need to periodically delete completed tasks.  As you understand, we want to make changes to todoListController and have SproutCore automatically display these changes. <br>  To do this, add the clearCompletedTodos method to the controller. <br><br>  in the <b>apps / todos / todos.js file,</b> update the code to the following: <br><pre> <code class="javascript hljs">Todos.todoListController = SC.ArrayController.create({ <span class="hljs-comment"><span class="hljs-comment">// ... clearCompletedTodos: function() { this.filterProperty('isDone', true).forEach(this.removeObject, this); } });</span></span></code> </pre><br>  Now add a button to the template. <br>  Open <b>apps / todos / resources / templates / todos.handlebars</b> and add a button for StatsViews: <br><pre> <code class="javascript hljs">{{#view Todos.StatsView id=<span class="hljs-string"><span class="hljs-string">"stats"</span></span>}} {{#view SC.Button classBinding=<span class="hljs-string"><span class="hljs-string">"isActive"</span></span> target=<span class="hljs-string"><span class="hljs-string">"Todos.todoListController"</span></span> action=<span class="hljs-string"><span class="hljs-string">"clearCompletedTodos"</span></span>}}    {{/view}} {{displayRemaining}}. {{/view}}</code> </pre><br>  We defined an instance of SC.Button, which calls the object's method when pressed.  In our case, we created a button to call the TodC.todoListController object's clearCompletedTodos method.  We also announced that when the button is pressed, it is necessary to add the is-active class to it.  This will allow you to change the appearance of the button. <br><br>  Now try to download the application, add tasks, mark some of them as completed and remove them from the list.  As you can see, everything works. <br><br>  <b>9 Mark all</b> <br><br>  Suppose we decided to mark all tasks as completed.  Now it is not difficult, because  the main work has already been done. <br><br>  Add the allAreDone method to todoListController.  Update the code in the <b>apps / todos / todos.js file</b> to the following: <br><pre> <code class="javascript hljs">Todos.todoListController = SC.ArrayController.create({ <span class="hljs-comment"><span class="hljs-comment">// ... clearCompletedTodos: function() { this.filterProperty('isDone', true).forEach(this.removeObject, this); } });</span></span></code> </pre><br>  SproutCore has many enumerated helpers.  everyProperty ('isDone', true) returns true if every element in the array has an isDone property equal to true.  You can learn more by reading the <a href="http://guides.sproutcore.com/enumerables.html">manual</a> . <br><br>  Next, we will create a check box to mark all the tasks completed and associate its value with the property of the controller.  In the <b>apps / todos / resources / templates / todos.handlebars file</b> immediately after Todos.StatsView, we add: <br><pre> <code class="javascript hljs">{{view SC.Checkbox <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"mark-all-done"</span></span> title=<span class="hljs-string"><span class="hljs-string">" "</span></span> valueBinding=<span class="hljs-string"><span class="hljs-string">"Todos.todoListController.allAreDone"</span></span>}}</code> </pre><br>  If you download the application now and try to mark all tasks as completed, you will see that the ‚Äúdo everything‚Äù checkbox automatically changed the state, but it does not work in the opposite direction.  When you click on the "execute all" checkbox, no changes are made to the task list.  To make the flag work as it should, we rewrite the allAreDone method in todoListController. <br><br>  Update the code in the <b>apps / todos / todos.js file</b> to the following: <br><pre> <code class="javascript hljs">Todos.todoListController = SC.ArrayController.create({ <span class="hljs-comment"><span class="hljs-comment">// ... allAreDone: function(key, value) { if (value !== undefined) { this.setEach('isDone', value); return value; } else { return this.get('length') &amp;&amp; this.everyProperty('isDone', true); } }.property('@each.isDone') });</span></span></code> </pre><br>  When you try to assign a value to a calculated property, the function of the property is called with the key and value parameters.  This is what we use in our example, by clicking on the checkbox, SproutCore tries to change the allAreDone property, respectively, we can intercept this call. <br><br>  Now the application works as we wanted. <br><br>  <b>10 Styles for mobile devices</b> <br><br>  Our application can be considered fully functional on all types of modern mobile devices.  Let's optimize it for different screen resolutions.  Download the CSS file <a href="">here</a> and save as <br>  <b>apps / todos / resources / stylesheets / todos_mobile.css</b> .  Now open the application using a mobile device and you will see also the application only designed for a mobile device. <br><br>  Good luck in the development of SproutCore. <br>  Original <a href="http://guides.sproutcore.com/getting_started.html">article</a> . </div><p>Source: <a href="https://habr.com/ru/post/125698/">https://habr.com/ru/post/125698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125689/index.html">6,000,000,000 photos on Flickr</a></li>
<li><a href="../125690/index.html">Diablo 3 beta test starts</a></li>
<li><a href="../125693/index.html">Google Music Beta gives users two sets of cloud keys for their best friends.</a></li>
<li><a href="../125695/index.html">StructureMap - quick reference for work (2/3)</a></li>
<li><a href="../125697/index.html">Several patents. Part 1. Apple</a></li>
<li><a href="../125699/index.html">PyQt: simple threading</a></li>
<li><a href="../125701/index.html">FAS against limiting the length of SMS messages in Cyrillic</a></li>
<li><a href="../125702/index.html">Staff: how not to mess with the management team</a></li>
<li><a href="../125704/index.html">Yahoo Domains and Domain Hijacking</a></li>
<li><a href="../125708/index.html">Qwerty ‚Üí Dvorak: how can this be done</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
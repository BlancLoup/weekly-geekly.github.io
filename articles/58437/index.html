<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Save an image from Adobe Flash Player to disk using MDM Zinc</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, hello. 

 A little background. It all started with a regular Flash site, the maximum functionality of which was to open a window with text by p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Save an image from Adobe Flash Player to disk using MDM Zinc</h1><div class="post__text post__text-html js-mediator-article">  Hello, hello. <br><br>  A little background.  It all started with a regular Flash site, the maximum functionality of which was to open a window with text by pressing a button.  Then there was the first game in the form of a tank rolling around the field with a turning barrel, then the first MMORPG.  After that, where I got a job, they realized that the MMORPG was not exactly what was needed, and everyone decided to release PC games.  On disks, in beautiful boxes, everything is as it should be. <br><a name="habracut"></a><br>  What programming language to choose?  All together they chanted: ‚ÄúXi, Xi, Xi‚Äù.  Everything would be fine if it were not for one ‚ÄúBUT‚Äù (this ‚Äúbut‚Äù became known just before the start of work).  The same version of the game was supposed to be online, on the site, embedded in HTML with a bunch of visitors (remember how I talked about abandoning the MMORPG? Aha, right!).  How to make a file with the .EXE extension with HTML or PHP did not occur to anyone.  It was decided to do this: for the PC, write everything in ActionScript (then still 2.0), wrap it with a component for Builder, and for the web, wrap the SWF file with HTML code.  And everything turned out.  We did not need the web version, and the full-fledged PC version of the game was written in ActionScript 2.0.  And it is convenient for artists to draw, and we, as flash-programmers, are happy. <br><br>  Get to the point.  This game has evolved.  To date, 9 versions have been released, which are successfully sold and, accordingly, purchased.  With each new version of the game, its functionality increased, and at this moment we came together to a situation where you need to take the current image of the character and save it to disk.  Here we are.  What can save flash to disk?  - pathetic SharedObject with text data.  And here we have no time for jokes.  Here we are dealing with images.  I need a JPEG and whatever you like, whatever you want, do it, but just save it to me.  At first they formed byte arrays, sent fscommand to the shell, did the shell destroy it, form an image and save it to disk?  Conveniently?  - Of course not.  To reconfigure something, it was necessary to completely change the entire code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And here the case pushed me to MDM Zinc from Multidmedia.  A great tool for creating desktop applications for both Windows and Linux and MacOS.  We load into it the USB stick and the desktop application is ready.  EXE-shnichek, with integrated Flash Player'om and great functionality to work with all the delights of Windows.  Although the registry climb, even in the file system. <br><br>  Zinc is installed elementary.  You practically do not need to do anything (except how to install an extension using the extension manager).  And the scope for thought opens up huge.  So I began to slowly do ImageSaver (as I called it).  Decided to do so first.  I open the application, select the file with the picture, load it into the shell, photograph the desired part of the movie, saving the image to disk.  First, create a movie (movie). <br><br>  <a href="http://pics.livejournal.com/dafive/pic/00012agz">See what should be in the Flash movie</a> <br><br>  An empty image loader clip is given by (instance name) - <i>mc_loader</i> .  Clip scanner (blue transparent rectangle) give the name - <i>imageScanner</i> .  As the Document class parameter in the video (the properties tab), we specify the Saver.  The class should be in the same folder as the movie and application.  In the movie library throw component Zinc. <br><br>  Next, write the Saver code: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">/**</font> <br> <font color="#008000">* @author DaFive</font> <br> <font color="#008000">* mailto, gtalk: dafive.get@gmail.com</font> <br> <font color="#008000">* icq: 163-092-469</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* ImageSaver class. Interaction with MDM.Zinc.</font> <br> <font color="#008000">*</font> <br> <font color="#008000">* */</font> <br> <br> package { <br> <br> import flash.display.Loader; <br> import flash.display.Sprite; <br> import flash.events.MouseEvent; <br> import flash.display.MovieClip; <br> import flash.net.URLRequest; <br> import flash.utils.Timer; <br> import flash.events.TimerEvent; <br> import flash.events.Event; <br> <br> import mdm.*; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Saver extends Sprite <br> { <br> <br> <font color="#008000">//   </font> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> TIMER:Timer; <br> <font color="#008000">//</font> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> TIME: <font color="#0000ff">int</font> = 0; <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> myAppPath:String; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> Saver(): <font color="#0000ff">void</font> <br> { <br> <font color="#008000">//!!   init  mdm-.</font> <br> mdm.Application.init( <font color="#0000ff">this</font> , onInit); <br> } <br> <br> <font color="#008000">//  Zinc</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> onInit(): <font color="#0000ff">void</font> <br> { <br> myAppPath = mdm.Application.path; <br> <br> <font color="#008000">//   </font> <br> mdm.Application.bringToFront(); <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">var</font> myFilePath:String = mdm.Dialogs.BrowseFile.show(); <br> <br> mdm.Dialogs.prompt(myFilePath); <br> <br> <font color="#008000">//   </font> <br> <font color="#0000ff">var</font> myLoader:Loader       = <font color="#0000ff">new</font> Loader(); <br> <font color="#0000ff">var</font> requestPhoto:URLRequest   = <font color="#0000ff">new</font> URLRequest(myFilePath); <br> <br> myLoader.load(requestPhoto); <br> <br> mc_loader.addChild(myLoader); <br> <br> myLoader.contentLoaderInfo.addEventListener(Event.INIT, initPhoto, <font color="#0000ff">false</font> , 0, <font color="#0000ff">true</font> ); <br> <br> <br> imageScanner.addEventListener(MouseEvent.MOUSE_DOWN, onScannerPress, <font color="#0000ff">false</font> , 0, <font color="#0000ff">true</font> ); <br> imageScanner.addEventListener(MouseEvent.MOUSE_UP, onScannerRelease, <font color="#0000ff">false</font> , 0, <font color="#0000ff">true</font> ); <br> <br> imageScanner.buttonMode = <font color="#0000ff">true</font> ; <br> <br> save_btn.addEventListener(MouseEvent.CLICK, onSave, <font color="#0000ff">false</font> , 0, <font color="#0000ff">true</font> ); <br> } <br> <br> <font color="#008000">// </font> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> initPhoto(e:Event): <font color="#0000ff">void</font> <br> { <br> mdm.Dialogs.prompt ( <font color="#A31515">""</font> ); <br> } <br> <br> <font color="#008000">//</font> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onSave(e:MouseEvent): <font color="#0000ff">void</font> <br> { <br> save_btn.removeEventListener(MouseEvent.CLICK, onSave); <br> <br> imageScanner.alpha = 0; <br> <br> TIMER = <font color="#0000ff">new</font> Timer(1000, 0); <br> TIMER.start(); <br> TIMER.addEventListener(TimerEvent.TIMER, onTimer, <font color="#0000ff">false</font> , 0, <font color="#0000ff">true</font> ); <br> } <br> <br> <font color="#008000">//   ,  ,  </font> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onTimer(e:TimerEvent): <font color="#0000ff">void</font> <br> { <br> TIME ++; <br> <br> <font color="#0000ff">if</font> (TIME == 1) <br> { <br> <font color="#0000ff">var</font> rnd_val:Number = Math.random(); <br> <br> mdm.Image.ScreenCapture.movieAreaToBmp(imageScanner.x, imageScanner.y, imageScanner.width, imageScanner.height, myAppPath+ <font color="#A31515">"\\shot_"</font> + rnd_val + <font color="#A31515">".bmp"</font> ); <br> <br> mdm.Image.bmpToJpg(myAppPath+ <font color="#A31515">"\\shot_"</font> + rnd_val + <font color="#A31515">".bmp"</font> ); <br> <br> mdm.FileSystem.deleteFile(myAppPath+ <font color="#A31515">"\\shot_"</font> + rnd_val + <font color="#A31515">".bmp"</font> ); <br> <br> TIMER.stop(); <br> TIMER.reset(); <br> TIMER.removeEventListener(TimerEvent.TIMER, onTimer); <br> <br> TIME = 0; <br> <br> save_btn.addEventListener(MouseEvent.CLICK, onSave, <font color="#0000ff">false</font> , 0, <font color="#0000ff">true</font> ); <br> <br> imageScanner.alpha = 1; <br> } <br> } <br> <br> <font color="#008000">//  </font> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onScannerPress(e:MouseEvent): <font color="#0000ff">void</font> <br> { <br> e.currentTarget.startDrag( <font color="#0000ff">false</font> ); <br> } <br> <br> <font color="#008000">// </font> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onScannerRelease(e:MouseEvent): <font color="#0000ff">void</font> <br> { <br> e.currentTarget.stopDrag(); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The most important thing is to call the initialization application function MDM in the constructor of the Saver class.  Without it, nothing will work in the third version of the ActionScript language.  In the second works, but here - no. <br><br>  As you can see, our scanner is assigned the drag property (by pressing the LMB) and the drop property (when the LMB is released).  That is, we can carry it on the desired piece of the image.  Scanner size is fixed, but you can easily change it. <br><br>  By pressing the "Save" button, the timer starts in one second.  For if we do without a timer, the transparent rectangle will also be saved.  We hide it.  The thing is this.  Zinc is not able to save the desired piece of the image with the desired coordinates immediately in JPG.  But save to BMP and convert it to JPG.  This is what we do after if (TIME == 1). <br><br>  The file is assigned a name randomly (specially made so that you can save several versions of the image and not rub them).  The file will be saved in the folder where the application itself lies (myAppPath will help us).  Then there is a conversion from BMP to JPG (mdm.Image.bmpToJpg) and the subsequent deletion of the BMP file as unnecessary. <br><br>  <a href="http://pics.livejournal.com/dafive/pic/0000cdaq">What Zinc extensions need to be connected?</a> <br><br>  <a href="http://pics.livejournal.com/dafive/pic/00013dq8">What we get with the project build?</a> <br><br>  <a href="http://pics.livejournal.com/dafive/pic/00014cgd">How do we direct the scanner?</a> <br><br>  <a href="http://pics.livejournal.com/dafive/pic/000152dy">Saved Image</a> <br><br>  I hope that someone will come in handy.  Do not scold, if that.  My first topic. </div><p>Source: <a href="https://habr.com/ru/post/58437/">https://habr.com/ru/post/58437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../58427/index.html">Swedish Internet providers supported pirates</a></li>
<li><a href="../58430/index.html">Is Google Searching Social?</a></li>
<li><a href="../58431/index.html">Poll results. What prototyping tool do you use?</a></li>
<li><a href="../58432/index.html">In June, the first netbooks will appear on Nvidia Ion</a></li>
<li><a href="../58435/index.html">Opera Desktop, the progenitor of modern Opera browsers, celebrates its 15th anniversary</a></li>
<li><a href="../58438/index.html">Google learned to look for pictures on the set parameters</a></li>
<li><a href="../58440/index.html">Will iPhone soon get a version for CDMA networks?</a></li>
<li><a href="../58441/index.html">The exhibition - the phenomenon of the Internet Art WWW</a></li>
<li><a href="../58443/index.html">100 applications for the contest from Softline Venture Partners "Dev Generation 2009"</a></li>
<li><a href="../58444/index.html">Familiarity with the fourth version. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Running the game under Windows Phone 8</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I told in previous articles how we ran the game on Google Play and on social networks . The next platform was supposed to be iOS, but again there was ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Running the game under Windows Phone 8</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/17c/ebd/10d/17cebd10d9cac285c31d25c3e0f442bd.png"><br>  I told in previous articles how we ran the game on <a href="http://habrahabr.ru/post/181273/">Google Play</a> and on <a href="http://habrahabr.ru/post/188964/">social networks</a> .  The next platform was supposed to be iOS, but again there was a hitch and the decision was made to try out Windows Phone 8. It took several weeks to port the game and as many more for approval in the market.  In the article I will tell you what we have done and what came of it. <br><a name="habracut"></a><br><h4>  Preparation of all necessary for development </h4><br>  First of all, I needed a device on WP8, on which it would be possible to conduct tests.  The choice fell on a budget <b>Nokia Lumia 520</b> for $ 190.  I have never used this OS before and did not think I would like it, but having used the phone for a couple of days, I realized that everything was not so bad.  The lack of discretion is certainly saddening, but on the other hand, I am glad that applications on WP8 are not subject to hacking.  There were also experiences at the expense of power, I thought there would be lags in games - but no, everything works quickly. <br>  Next, install <b>Windows 8.1</b> .  At first, I spat for a long time - it is very inconvenient to launch programs outside the desktop, and the lack of a start-up is frightening.  Strongly deduced my habit of periodically pressing the "windows" button on the keyboard.  If in previous versions the start panel was opened, in the eighth version it was thrown from the desktop to the screen with squares in the metro style.  Strained. <br>  I was very pleased that Windows 8.1 and Visual Studio 2013 were free for many days and during that time I managed to do everything I needed. <br>  To start development, it is not necessary to have a developer account.  It is only necessary to unlock the phone through Windows Phone Developer Registration.  After that, you can build the application on the device and test it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82f/ca1/e05/82fca1e05faf7a3a1c0696aa8ec68243.jpg"><br><br>  Developer account will be needed later when you need to put the game on the market.  I did not have to buy it, because I work through a publisher (HeroCraft). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Features of porting games to Unity3d under WP8 </h4><br>  Building on Windows Phone is a bit like iOS.  First, an intermediate project is created that opens through VS 2013, and only then you can bring up the final * .xap file. <br><br>  Many libraries are not available for this platform.  That's what <b>stopped working</b> for me: <br><ul><li>  System.Security.Cryptography.MD5CryptoServiceProvider.  Encryption via MD5, an alternative script was found that allows md5 to be generated. </li><li>  `System.Runtime.Serialization.SerializationInfo`.  Deserialization through Json.FX stopped working.  As a result, we had the old fashioned way through string.Split. </li></ul><br>  Not without bugs.  The suspension of the car stopped working, the wheels flew in the air.  It turned out that WheelCollider.GetGroundHit works crookedly, in the end I redid it into <a href="http://docs.unity3d.com/Documentation/ScriptReference/Physics.Raycast.html">Physics.Raycast</a> . <br><br>  A little awkward to follow the links.  The standard method <a href="http://docs.unity3d.com/Documentation/ScriptReference/Application.OpenURL.html">Application.OpenURL ()</a> does not fit.  It is necessary to create a special method in the VS solution, which will then be called on the event via Unity3d. <br><br>  It is unpleasant that there is no debug yet, although they say in version 4.3 it should appear. <br><br>  You also need a pack of several square icons of different sizes. <br><br>  I also had to redo several features from KFOR publisher.  We have completely abandoned it for this platform.  The player rating was compiled on php + mysql, and the Rate me window was reassembled with a new interface and another implementation. <br><br><h4>  Adjustment of balance and monetization </h4><br>  Compared to Android, for WP8 we tightened the balance and introduced gasoline, which is consumed with each race and is gradually restored.  Such a scheme is now quite popular. <br>  In the window of donate coins, we adjusted the prices, raised the minimum payment to $ 2, and the maximum to $ 30.  Also for larger payments, we write how many additional coins a player will receive in relation to the first payment in percent. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/34d/ed9/ee3/34ded9ee3e92b6c83a4e5237dfdfee9c.jpg"><br><br><h4>  In-game purchases </h4><br>  Freemium game, so I had to deal with the payment.  I am glad that there are enough examples that have helped to understand how everything works.  To test payments, you need to fill the game on the market, but only <u>as BETU</u> !  We casually threw in the release for the first time, in the end we waited a long time for the moderators to see the raw version and reject the game.  Then perezalili in beta and the game became available for the test during the day.  It seems that you can still deploy a virtual machine for running bills, but this method seems much more complicated.  Products are divided into two categories - Comsumable (consumables, coins, and so on) and Durable (the opening of additional content and so on). <br>  If you do laziness yourself, then Asset Store has ready-made plugins for micropay integration.  The cost is around $ 30. <br><br><h4>  In-game advertising </h4><br>  Yes, there is an advertisement in the game.  It appears in the windows of the pause and results, as well as on the screen of Lockscreen.  I wanted to insert the usual admob, but it was not for WP8, as a result I had to insert an ad from NAX (Nokia Ad Exchange).  No problems have arisen, there is <a href="http://habrahabr.ru/company/Nokia/blog/184194/">an article about the introduction of this network</a> .  By the way, after I implemented NAX, the <a href="https://developers.google.com/mobile-ads-sdk/download">admob SDK for WP8 came out</a> , but it was too late to recompile the project. <br><br><h4>  Gulf Market Games </h4><br>  <b>Moderation is tough and long, but very high quality.</b>  Very much for the Back button system.  In all situations, it should work.  We stalled several times because of this button.  I was surprised that Microsoft has good testers.  Send reports, as expected - in pdf-format, clearly describe how to repeat the bug, write, as it should be, but as in the game.  Well done. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a5/0c4/794/4a50c47943fb7d18c049e0ad11b64c4a.jpg"><br><br>  <b>Sorry for the duration of the test.</b>  Doreliznye checks for 5 days - this is ok.  Everything is fine here, but with post-release fixes it's very hard.  It turned out that when I fixed the bug with the back button, I created a new one, which Frizil (stopped) the game in some places.  Fix made quickly, it was necessary to change the value of the variable in just one place.  But in the end, the check took about 5 days, while the game was very actively gaining momentum.  From my point of view, this is not very correct.  It should be possible to accelerate the filling of critical fixes, and then in 5 days the game can be ‚Äúmerged‚Äù.  The unpleasant situation turned out.  You will probably say that you need to do everything right away right away ... Yes, but this is not always the case. <br><br><h4>  PR </h4><br>  With promotion, the situation is quite nice, it is very conditional, since there are very few resources.  In theory, if you buy a review on w3bsit3-dns.com, then there will certainly be a return, given that Russia is a big market for Windows Phone, but we did not.  Generally paid reviews did not buy.  The publisher did the newsletter on their channels, after which there were reviews on the game, which is also nice.  Also, Microsoft and Nokia have confirmed that they will put our game in promo. <br>  In any case, I believe that due to a little competition, there can be no problems on this platform with the promotion. <br><br><h4>  Release and Statistics </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/f80/94a/411/f8094a41150ffb4fcdb73d28483f766e.png"><br>  The game quickly reached the top and brought down a lot of horse racing, even more than on Android after the release.  The critical bug, which stayed in the market for 7 days, spoiled everything, but I hope the main part of the audience is not lost. <br>  Downloads for the first 10 days - 100k (on Android - 50k).  ARPU is also twice as high. <br><br><h4>  useful links </h4><br><ul><li>  <a href="http://channel9.msdn.com/Series/Windows-Phone-8-Development-for-Absolute-Beginners">Available lessons for beginners on the WP 8 SDK</a> </li><li>  In-game purchases ( <a href="http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206949(v%3Dvs.105).aspx">basics</a> and <a href="http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681689(v%3Dvs.105).aspx">testing</a> ) </li><li>  <a href="http://habrahabr.ru/company/Nokia/blog/184194/">The introduction of advertising from NAX</a> </li><li>  <a href="http://forum.unity3d.com/threads/192097-Application-OpenURL-causing-application-on-WP8-phone-to-stop">Follow link through Unity3d</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/198594/">https://habr.com/ru/post/198594/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198578/index.html">ZeroMQ. Chapter 1: Getting Started</a></li>
<li><a href="../198580/index.html">American sues Apple for iOS 7: "This is banditry"</a></li>
<li><a href="../198584/index.html">Cygnus commercial cargo spacecraft successfully undocked from the ISS</a></li>
<li><a href="../198588/index.html">What is faster while (true) or for (;;)?</a></li>
<li><a href="../198592/index.html">Loc Kit Conference Report</a></li>
<li><a href="../198596/index.html">Private version of salvation from SORM-3</a></li>
<li><a href="../198600/index.html">SDL 2.0 Lesson Cycle: Lesson 1</a></li>
<li><a href="../198602/index.html">Increase store conversion through purchases on credit</a></li>
<li><a href="../198606/index.html">Inflate tables and devour tablespaces</a></li>
<li><a href="../198608/index.html">USB Standard Organization vs Open Source</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Superbase"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once I was given the task - to generate reports on data from a dozen of branches on office and household hardware (P4-2GHz, 1Gb RAM), which are repres...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Superbase"</h1><div class="post__text post__text-html js-mediator-article">  Once I was given the task - to generate reports on data from a dozen of branches on office and household hardware (P4-2GHz, 1Gb RAM), which are represented in the form of hundreds of separate databases with a thousand files each.  These were the 1C-Trade 7.7 (dbf) bases, cropped by months, which came from the branches on flash drives.  The total volume was measured in hundreds of gigabytes, but it took more than an hour to copy.  But reports for 3 years for all branches were carried out in a few minutes.  How? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/ca0/558/34e/ca055834e190fcc27a73645ec9ed5df8.jpg"></div><br><br>  Very simple.  A superbase was created.  No, this is not one big common base where data from all bases are merged.  I tried it, it turns out.  Too large volumes, too many problems with data synchronization.  Everything is much simpler ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  Superbase is an empty database that can work with other databases.  It has a list of available databases and a set of treatments (scripts) for receiving data and generating reports. <br><br>  For example, you need a report on the settlement with the client LLC "Spartak".  Specify part of the name and TIN (if any), set the period and other parameters.  The superbase starts the databases known to it one by one and, via the API (via OLE), sends them the command to generate such a report with such parameters.  The base forms the report and gives it to the super base.  From separate reports for each database, one general report is collected.  The data collected for the reports is cached; when re-forming with similar conditions, it is not necessary to re-collect the data. <br><br>  Since the database is accessed via the API, the version and structure of the specific database is completely unimportant.  Branches are autonomous, each has its own troubles, each solves them in its own way.  General only the format of issuing reports and the format of receiving the primary (invoices, bills, invoices, warrants and other standard paper documents).  In addition, the quality of data at each branch is different.  Some neatly conduct reference books and documents, fill in all the basic details.  Others write as in vain, with errors and duplicates, the details are either not filled or with errors.  But this is not so important, part of the name is enough.  In the final report will be a breakdown of different versions of the names, remove the extra is easier than getting the missing. <br><br>  Another great convenience - the database can be on different carriers.  It can be flash drives, USB-HDD, network balls.  The bases can be switched on and off ‚Äúon the move‚Äù - they are, in fact, launched autonomously and atomically, the failure of a separate base does not harm in any way.  You can simultaneously run several databases from different media without loss of performance on IOPS and locks.  Such is the dynamic partitioning for the poor. <br><br>  The speed was achieved much more than on one common base, even if you use MS-SQL on SSD and more powerful hardware.  At the same time, several databases were launched from different media, while there were no problems with locks and single-threadedness of each separate database.  On flash drives, the bases sometimes worked even faster than on the HDD.  The reports were formed in parts, which allowed to begin their consideration before the end of the whole process.  In case of errors in the conditions, you can slow down the report, without waiting until it is fully formed. <br><br>  Another plus is security.  Since the bases at the branches were cut off every month and were stored on portable media, then: <br>  - there was no extra data for outsiders (data for just the current month maximum) <br>  - there is no possibility for cunning personnel to spoil data for past periods.  And if you decide to spoil it, you can easily compare it with the state at the end of the previous period. <br>  - data loss in case of force majeure is not more than a month.  Once there was a raider attack.  Lost data in just 3 days, and the villains got a stub of one base in a week. <br>  - Portable media (especially flash drives) in case of force majeure can be easily destroyed or hidden.  And no traces, passwords, and other hints.  And the work does not affect. <br><br>  A little bit about the implementation details.  All this was done on the 1C-Enterprise 7.7 release 25. Two options for opening bases - one through OLE, for unhurriedly pulling out the primary and reference books.  The second is an autonomous launch from the command line, with the start of autorun.ert processing.  Before opening the database, this autorun.ert and the settings file were copied to the base directory.  After processing, the result was saved to a file (usually as a List of Values ‚Äã‚Äãor Table of Values, serialized through ValueViFile ()). <br><br>  Most often, the superbase was used to transfer the primary organization from the operational trading bases on the ‚Äúpure‚Äù bases of legal entities.  To do this, first created a large list of all invoices without tabular parts.  Then this list was manually (almost manually) filtered by accountants, there were only ‚Äúclean‚Äù documents on a particular legal entity.  And after that, from the available databases, the documents from the filtered list were copied into the finishing base of the legal entity. </div><p>Source: <a href="https://habr.com/ru/post/142167/">https://habr.com/ru/post/142167/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142159/index.html">Semantic Web, ARC2 and PHP</a></li>
<li><a href="../142160/index.html">GTD: Programs and Services for Task Management</a></li>
<li><a href="../142162/index.html">The introduction of electronic payment methods in the company</a></li>
<li><a href="../142164/index.html">Website development - from the first meeting with the customer to the delivery of the project, or how to be a freelancer and survive</a></li>
<li><a href="../142166/index.html">Yandex.Probki. Do you go there?</a></li>
<li><a href="../142168/index.html">NormaSahar - a diabetic startup</a></li>
<li><a href="../142169/index.html">Conference Records Lang.NEXT 2012 for those interested in programming languages</a></li>
<li><a href="../142170/index.html">‚ÄúRunet today‚Äù, April 16, 2012. Experts of the issue: Stanislav Protasov, Pavel Alashkin</a></li>
<li><a href="../142171/index.html">StartUp Sabantuy! - new IT park project</a></li>
<li><a href="../142172/index.html">Build Ruby Binding C-Library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
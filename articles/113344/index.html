<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JavaScript 1.8</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="JavaScript 1.8 provides a huge amount of tasty syntactic sugar, mostly by functionalists. But very few developers know about this beauty. Of course, u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JavaScript 1.8</h1><div class="post__text post__text-html js-mediator-article">  JavaScript 1.8 provides a huge amount of tasty syntactic sugar, mostly by functionalists.  But very few developers know about this beauty.  Of course, unfortunately, even Chrome doesn‚Äôt support all these goodies (let alone IE?), But only Firefox 3+, but the JavaScript developer just has to know about all these new products. <br><br>  The most complete information can be found in the articles on <a href="https://developer.mozilla.org/en-US/" title="Mozilla Developer Network">MDN</a> : <ul><li>  <a href="">New in JavaScript 1.7</a> </li><li>  <a href="">New in JavaScript 1.8</a> </li></ul><br><br>  And I translated a small, but interesting article by John Resig (author of jQuery), which reveals some of the new features in it: Expression Closures, Generator Expressions, __iterator__, Array Reduce and something else: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    - document.addEventListener("click", function() false, true); //    for ( let i in 3 ) alert( i ); //    100 ,   [ 0 for ( i in 100 ) ]; //    10*10 [[ i == j ? 1 : 0 for ( i in 10 ) ] for ( j in 10 )];</span></span></code> </pre> <br><a name="habracut"></a><br>  Although the article was written in 2007, I did not find its translation into Russian and there is generally enough information on this topic in Russian.  All the code in the examples works fine in Firefox 3+. <br><br><h2>  Progress in JavaScript 1.8 </h2><br>  If you have not followed the progress in the development of JavaScript 1.8, I offer you a quick overview of what is already in the nightly build of Firefox 3. <br>  So far, the latest versions have added three main features, and more are expected.  The main objective of this ‚Äúlight‚Äù version is to bring the current JavaScript implementation to the desired JavaScript 2 specification. <br><br><h2>  Lexical closures (Expression Closures) </h2><br>  Lexical closures have recently been added to the trunk, and they will certainly be interesting to functional programming lovers.  In fact, it‚Äôs just an elegant entry for writing simple functions that make a language like typical lambda notation. <br>  Let's look at the syntax of lambda functions in different languages: <br><br>  Python: <pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: x * x</code> </pre><br>  Smalltalk: <pre> <code class="smalltalk hljs">[ :x | x * x ]</code> </pre><br>  JavaScript 1.8: <pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-function"> * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span></span></code> </pre><br>  Javascript 1.7 and up: <pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x * x; }</code> </pre><br><br>  Perhaps my favorite example is setting an event handler: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"click"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">false</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">true</span></span></span><span class="hljs-function">);</span></span></code> </pre><br>  Or in combination with this notation and some functions used for arrays from JavaScript 1.6: <br><pre> <code class="javascript hljs">elems.some(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">elem</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">elem</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">type</span></span></span><span class="hljs-function"> == "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">text</span></span></span><span class="hljs-function">");</span></span></code> </pre><br>  This will give you an elegant JS / DOM code. <br><br><h2>  Generation Expressions (Generator Expressions) </h2><br>  This is another new example.  It is more complicated than the previous one, as several concepts are covered here.  Specifically, the example requires knowledge of most of the features of JavaScript 1.7 - especially iterators, generators, and array generators.  This feature is based on generator expressions borrowed from Python. <br>  In the ticket tracking this feature, Brendan posted an elegant and functional solver Sudoku, written using the new syntax offered by this add-on.  This demo version is based on a <a href="http://norvig.com/sudoku.html">similar</a> , written in Python, which demonstrates the use of generator expressions. <br><br>  For a better understanding of the meaning of this function, let's look at the sample code for JavaScript 1.8, taken from the Sudoku solver. <br><pre> <code class="javascript hljs">dict([s, [u <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (u <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> unitlist) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (u.contains(s))]] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> squares))</code> </pre><br>  This expression relies on the dict () function, which takes a 2xN matrix and converts it into a key / value pair.  Here is its code: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dict</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">A</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> d = {} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> A) d[e[<span class="hljs-number"><span class="hljs-number">0</span></span>]] = e[<span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> d }</code> </pre><br>  Let's look at each element of this expression for a better understanding of what is happening. <br><pre> <code class="javascript hljs">[u <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (u <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> unitlist) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (u.contains(s))]</code> </pre><br>  The first part of the expression is an example of generating arrays from JavaScript 1.7.  Namely, we go through each item in the list. <br>  and create an array with indices that contain s. <br><pre> <code class="javascript hljs">[s, ...] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> squares)</code> </pre><br>  The second part of the expression is another example of array generation.  At first glance, this is another feature of JavaScript 1.7 ‚Äî destructive assignment, but it is not. <br>  Destructive assignment occurs when you assign a new value to an old array element ‚Äî and here we add this value to a new array.  New two-dimensional arrays will subsequently be passed to the dict function. <br><pre> <code class="javascript hljs">dict([s, ...] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> squares))</code> </pre><br>  This is where the magic is hidden.  In JavaScript 1.7, we can call the dict () function like this: <br><pre> <code class="javascript hljs">dict([[s, ...] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> squares)])</code> </pre><br>  Note the explicit use of list generation.  The problem with the additional generation lies in the fact that it must be executed completely to build the whole array (which is converted into a dictionary / hash).  However, the absence of one more [...] and determines the expression-generator.  This makes the JavaScript 1.8 line equivalent to the following JavaScript 1.7 line: <br><pre> <code class="javascript hljs">dict((<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (s <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> squares) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> [s, ...] ; })())</code> </pre><br><br>  Here you see that the generator expression creates an array lazily - that is, the values ‚Äã‚Äãwill not be generated until they are needed in the dict () function (as a result, we get fewer operations and better performance) <br><br>  Here is another example of a generator expression: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,      function val_iter(obj) { return (obj[x] for (x in obj)); } //     for ( let key in obj ) { ... } //     for ( let value in val_iter(obj) ) { ... }</span></span></code> </pre><br><br>  Of course, the val_iter () function can also be built using JavaScript 1.7, using yield: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val_iter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> obj) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> obj[x]; }</code> </pre><br><br>  Generator expressions will be particularly useful in code that is greedy for memory and CPU - for example, in the same solver Sudoku, because now you can get the results of solutions only when they are needed - and not calculate them in advance. <br><br><h2>  Having fun with iterators </h2><br><br>  By the way, I recently already dealt with iterators and generators - and I lacked the possibility of a simple iteration over a set of numbers (for example, 0-9).  Having worked with a file a bit, we can add this feature to the language: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      Number.prototype.__iterator__ = function() { for ( let i = 0; i &lt; this; i++ ) yield i; }; //    for ( let i in 3 ) alert( i ); //    100 ,   [ 0 for ( i in 100 ) ] //    10*10 [[ i == j ? 1 : 0 for ( i in 10 ) ] for ( j in 10 )]</span></span></code> </pre><br><br>  Maybe dupe, but I was in the wildest delight of it. <br><br><h2>  Array Reduce </h2><br>  The last thing to understand is the new Array.reduce / Array.prototype.reduce methods with JavaScript 1.6 Array Extras. <br><br>  You can apply reduce to an array like this: <br><pre> <code class="javascript hljs">someArray.reduce( fn [, initial] );</code> </pre><br><br>  with the function, it will look like this: <br><pre> <code class="javascript hljs">someArray.reduce(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">lastValue, curValue</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lastValue + curValue; });</code> </pre><br><br>  The lastValue argument is the result of the callback of the reduce function.  When you first call lastValue will be equal to the first element of the list or the value of initial, if you passed it, and the value curValue - the next element of the list <br><br>  Thus, if you want to find a sum of numbers from 0 to 99, you can do it as follows (using JavaScript 1.8 and the above numeric iterator) <br><pre> <code class="javascript hljs">[x <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> )].reduce(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a,b</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">+</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function">);</span></span></code> </pre><br><br>  Elegant, isn't it? <br><br>  You can also use reduce for things like merging multiple DOM nodes into a single array: <br><pre> <code class="javascript hljs">nodes.reduce(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a,b</span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">b.childNodes</span></span></span><span class="hljs-function">), []);</span></span></code> </pre><br><br><h2>  Try it yourself! </h2><br>  Everything I mentioned above works in the latest builds of Firefox 3, so if you want to try out one of the above, just do the following: <br>  1. Download the nightly build of Firefox 3 <br>  2. Create a page that contains the following tag (with the 'version = 1.8' attribute that has just been added): <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/javascript;version=1.8"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"><span class="undefined"> ... your code ...</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And that's all you need - enjoy! </div><p>Source: <a href="https://habr.com/ru/post/113344/">https://habr.com/ru/post/113344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113337/index.html">Mozilla plans to release four versions of Firefox this year.</a></li>
<li><a href="../113338/index.html">Travel with google</a></li>
<li><a href="../113339/index.html">A bit about JIT compilation or writing an optimized Brainfuck interpreter</a></li>
<li><a href="../113342/index.html">SCO OpenServer 5.0.7V Virtualization under Hyper-V</a></li>
<li><a href="../113343/index.html">Social goals</a></li>
<li><a href="../113345/index.html">Attachment Contest for Internet Explorer 9</a></li>
<li><a href="../113349/index.html">Droider Chart. Issue 38</a></li>
<li><a href="../113350/index.html">6 steps of loading Linux on fingers</a></li>
<li><a href="../113351/index.html">Recent high beta radioactive air pollution in nizhny novgorod and kirov</a></li>
<li><a href="../113354/index.html">Creating a new virtual machine in one minute or ‚Äúvagrant up!‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
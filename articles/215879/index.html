<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing documentation for Ruby on Rails projects using YARD</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, habrazhiteli! Found that the site has no article on how to organize the process of creating documentation for Ruby on Rails projects. Fix th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing documentation for Ruby on Rails projects using YARD</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/05a/c58/85a/05ac5885a98eb0338db47dd1875f1254.jpg" alt="image">  Good day, habrazhiteli!  Found that the site has no article on how to organize the process of creating documentation for Ruby on Rails projects.  Fix this problem. <br><br>  The article will explain how to use the <a href="http://yardoc.org/">YARD gem</a> to write competent documentation for rail projects and automatically generate a document where this documentation will be presented in a presentational form.  An example of the documentation can be found in the site code <a href="https://github.com/cbrwizard/rashka">ValiIzRashki</a> . <br><a name="habracut"></a><br>  For a start - a little theory.  To some, this may seem like captaincy, but my goal now is to convince those who do not write code documentation that this is very useful and not at all difficult.  The documentation, as a rule, is understood as comments to the code or a separate document where the site code is described. <br><br><h4>  Theory: why write documentation? </h4><br>  Answering is simple: so that the code is clearer.  Your colleague will not need to distract you and ask a thousand questions, and you will not have to wrestle with your head, remembering the intricacies of your own code.  In clear code, it is easier to find and destroy the bug.  It will also be easier for you yourself to add a new feature to the code that the customer or designer just invented. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  But the best comment is one you don‚Äôt need to write? </h5><br>  Indeed, it is necessary to write such clear code so that the amount of comments necessary for understanding it is minimal.  This is achieved by using variables with clear names, predictable and modular code structure, and so on.  I myself have tried to write code without resorting to comments.  But I soon realized that it would be more profitable to spend two seconds reading a code comment than spending 5-10 reading and understanding even the most understandable code.  Like it or not, in normal language it is possible to transfer the essence of the code much easier and more efficiently. <br><br><h5>  But writing documentation is very long! </h5><br>  Nothing like this.  According to the method described here, on writing the documentation for the code that you just wrote, you will spend, on average, a minute.  This minute will more than pay off as soon as you return to the code next time. <br><br>  If you want more arguments in the plus documentation, you can read other articles by smart people on this topic, for example, view <a href="http://warpspire.com/talks/documentation/">this</a> presentation.  And we proceed to practice. <br><br><h4>  Practice: structured YARD comments </h4><br>  First, in my Ruby on Rails projects, I wrote comments without a specific structure.  Before each method he briefly wrote what was happening there.  Then I realized that it would be convenient to describe, for example, the parameters that this method takes;  as well as what it returns.  The question arose, why not stick to a single comment template everywhere? <br><img src="https://habrastorage.org/getpro/habr/post_images/822/7cb/472/8227cb4720b0b5386c0ee371339e7efa.jpg"><br><br>  Found <a href="http://yardoc.org/">YARD</a> heme.  Its essence is that you write comments to your code using a certain simple syntax, something remotely resembling xml / html.  Then you run a command that will create html files, where your code and documentation for it will be written in a convenient format.  The analogue is the <a href="http://docs.seattlerb.org/rdoc/">RDOC</a> gem, but its syntax seemed more complicated. <br><br>  Set the heme <br><pre><code class="bash hljs">$ gem install yard</code> </pre> <br>  either add to gemfile <br><pre> <code class="ruby hljs"> gem <span class="hljs-string"><span class="hljs-string">'yard'</span></span></code> </pre><br>  and run bundle install. <br><br>  Take the approximate method from the site <a href="http://valiizrashki.ru/">valiizrashki.ru</a> <br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">try_to_evacuate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(country_id)</span></span></span></span> country = Country.find(country_id) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> country.allows_immigrants? evacuate! <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  The method determines whether it is possible to immigrate to another country and is evacuated.  So we will write down before the declaration of the method as a comment. <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># ,         def try_to_evacuate(country_id) country = Country.find(country_id) ...</span></span></code> </pre><br>  The method is called when you click on the button "throw".  We'll write this with the help of the YARD @note tag, which is responsible for various additional data.  The syntax is: <br><pre> <code class="ruby hljs">@<span class="hljs-number"><span class="hljs-number">_</span></span> ()  </code> </pre><br>  If we want to fit several lines in one tag, we use tabulation <br><pre> <code class="ruby hljs">@<span class="hljs-number"><span class="hljs-number">_</span></span>      </code> </pre><br>  Let's write information about the place of the call with the <code>@note</code> tag in the same place before declaring the method: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># ,         # </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@note</span></span></span><span class="hljs-comment">      "" def try_to_evacuate(country_id) ...</span></span></code> </pre><br>  We write that a parameter accepts a parameter using the <code>@param</code> tag.  The data type of this parameter is written in square brackets, followed by the parameter description. <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> country_id [Integer] id </span></span></code> </pre><br>  We write what exactly this method returns with the <code>@return</code> tag.  Here we write in square brackets the type of data that will be returned to us, followed by a description of the value. <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> [Boolean]   </span></span></code> </pre><br>  For clarity, we will write an example of using this method.  We do this with the <code>@example</code> tag, in this case using tabulation. <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@example</span></span></span><span class="hljs-comment"> # try_to_evacuate(2)</span></span></code> </pre><br>  Also leave a link to the country model documentation using the <code>@see</code> tag so that you can quickly jump over there. <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@see</span></span></span><span class="hljs-comment"> Country</span></span></code> </pre><br>  The result was: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># ,         # </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> country_id [Integer] id  # </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@note</span></span></span><span class="hljs-comment">      "" # </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@example</span></span></span><span class="hljs-comment"> # try_to_evacuate(2) # </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> [Boolean]    # </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@see</span></span></span><span class="hljs-comment"> Country def try_to_evacuate(country_id) country = Country.find(country_id) if country.allows_immigrants? evacuate! true else false end end</span></span></code> </pre><br>  There are other tags in the YARD documentation that you can learn from <a href="">this</a> link. <br><h5>  Documentation time! </h5><br>  To make everything incredibly mathematically, create a configuration file in a project called <code>.yardopts</code> with the following contents: <br><pre> <code class="ruby hljs">--private --protected -o doc/ruby</code> </pre><br>  After that, go to the terminal in the folder of your project and run the command there <br><pre> <code class="bash hljs">$ yard</code> </pre><br>  Created folder doc / ruby.  Let's open it in the explorer and open _index.html there.  In the browser, go to our method and see this: <br><img src="https://habrastorage.org/getpro/habr/post_images/4d4/615/e5e/4d4615e5ee0e819da8d3faa264e8bf02.jpg"><br>  Looks good.  And the reference to the model method works. <br><br>  Why did we make the settings file?  That each time it was possible to start generation documentation the simple <code>yard</code> command.  The first two lines in the file are responsible for adding private methods to the documentation, and the third - assigns the folder in which the documentation will appear. <br><br><h5>  Bonus: documenting coffeescript </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/df7/a02/a7a/df7a02a7a1c332bbfd73381644a3e64a.jpg"><br>  For coffeescript they made a tool with similar syntax and functionality called <a href="https://github.com/coffeedoc/codo">codo</a> .  I see no reason to limit myself to the Ruby code documentation and not to write it for scripts. <br><br>  An example of a documented function that converts a number to radians: <br><pre> <code class="coffeescript hljs"> <span class="hljs-comment"><span class="hljs-comment">#    # @param x [Integer]  # @return [Integer]  rad:(x) -&gt; x * Math.PI / 180</span></span></code> </pre><br>  Create a <code>.codoopts</code> file in the project root and write there: <br><pre> <code class="coffeescript hljs">-o doc/coffee</code> </pre><br>  After that, when you run the command in the root of the project <br><pre> <code class="bash hljs">$ codo</code> </pre><br>  We will create documentation for coffeescript in the doc / coffee folder. <br><br>  Done, you are amazing! <br><br><h4>  Conclusion </h4><br>  In the end I want to note that even if you do not intend to use automatic documentation generation, I still advise you to start writing comments on the code in a structural form.  It will make life easier for you and your colleagues! </div><p>Source: <a href="https://habr.com/ru/post/215879/">https://habr.com/ru/post/215879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215863/index.html">Startup step by step: first business model</a></li>
<li><a href="../215869/index.html">Debt alert system, or another autoinformer</a></li>
<li><a href="../215871/index.html">Why do we need remote presence robots?</a></li>
<li><a href="../215873/index.html">Highscreen Boost 2 SE smartphone review: Bug fixes with Qualcomm Snapdragon 400</a></li>
<li><a href="../215875/index.html">We invite to the webinars for developers to work with the platform Nokia X</a></li>
<li><a href="../215881/index.html">Taxi in New York: visualization of movements for the year</a></li>
<li><a href="../215883/index.html">Micro issue SDSM. Preparing a laboratory for multicasts in GNS3</a></li>
<li><a href="../215887/index.html">Does Wargaming have a lot of analytics to do?</a></li>
<li><a href="../215889/index.html">Portaller</a></li>
<li><a href="../215895/index.html">A miniature tricopter with a 1080p HD camera on a Kickstarter collected almost $ 1 million instead of 35 thousand</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
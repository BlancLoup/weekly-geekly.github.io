<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Onion architecture. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier, I mentioned several times about a special type of architecture, which I call onion architecture. This architecture is ideal for applications ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Onion architecture. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Earlier, I mentioned several times about a special type of architecture, which I call onion architecture.  This architecture is ideal for applications with a long life cycle and complex business logic.  I believe that its use in such projects leads to excellent results, as a result of the emphasis initially placed in the architecture on the separation of various aspects of the application.  The onion architecture pays special attention to the description of the system behavior in terms of contract programming and the removal of the infrastructure code to external modules.  In the diagram below, you can see a graphical representation of the traditional ‚Äúlayered‚Äù architecture.  This is a very popular approach that is used in various variations in the many projects I have seen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/043/9f1/302/0439f1302550fdb9ca2de3850fc605f7.png" alt="image"><br><a name="habracut"></a><br>  Each next layer is closely connected with its neighbors and depends on the used infrastructure modules and services.  The main disadvantage of multi-layered architecture is the high connectivity it generates.  As we know, the worst manifestation of high connectivity is the penetration of UI elements and business logic into the data access layer.  In projects using multi-layer architecture, the UI remains closely associated with the data access layer.  Passing addiction remains addiction.  The UI layer cannot function separately from the business logic layer, just as the business logic layer is not able to function separately from the data access layer.  I deliberately ignore issues related to infrastructure, since infrastructure tends to change from project to project.  The data access layer is constantly changing.  Historically, data management approaches are updated at least once every three years.  Therefore, in applications with a long life cycle, you need to be prepared for the fact that after three years you have to make changes to the data access layer.  If a high connectivity prevents replacing outdated modules independently of each other, the whole system can go into a state of decline and the team will have nothing left but to completely rewrite it. <br><br>  <b>I propose a new approach to building applications.</b>  To be honest, it is not entirely new, but I propose to give it a name and fix it in line with other architectural patterns.  Patterns are useful because they provide developers with a common vocabulary to simplify communication.  Onion architecture has many aspects, and we need to give it a name for more effective communication.  The diagram below shows the onion architecture. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/06c/141/f65/06c141f6513464e2f7c2db6876e64013.png" alt="image"><br><br>  Its key feature is in coherence management.  The fundamental rule is that any application module may depend on modules closer to the center of the bulb, but cannot depend on more distant ones.  In other words, any connectedness should be directed to the center of the bulb. <br>  Onion architecture to OOP and puts objects above any other aspects of the application.  In the center is the domain model of the application.  There are other layers with additional business logic around the domain model.  The number of layers in an application can vary, but the domain model must always remain in the very center and, since any connectedness is directed toward the center, the domain model is only connected with itself.  The first layer around the domain model is the place where the interfaces of the repositories are usually located, ensuring the preservation and retrieval of objects.  It should be noted that the process of saving objects is outside the application kernel, since this process usually involves interaction with the database server, and only interfaces are located in the center of the kernel.  On the outer radius of the application are UI, infrastructure and tests.  The outer layer is reserved for elements that change frequently.  These elements must be isolated from the application kernel.  At the very edge, there are classes that implement the interfaces of the repositories.  These classes are closely related to a specific data access technology, and that is why they must be moved outside the core of the application. <br>  Onion architecture is based on the principle of dependency inversion.  The application requires implementations of the interfaces located in the kernel, and since specific implementations are located on the external radius of the application, the application also needs a mechanism for injecting dependencies. <br><br>  <b>The database is not located in the application center.</b>  Moving the database engine from the kernel to a separate module can be a serious step for people thinking of applications solely in the context of interacting with data sources.  Of course, applications can use databases to save objects, but only through a layer of infrastructure code that implements the interfaces used in the application kernel.  Disconnection between application and database, file system, etc.  reduces the cost of supporting the application throughout its life cycle. <br>  <a href="http://alistair.cockburn.us/index.php/Main_Page">Alistair Cockburn</a> in his blog once wrote on the topic of <a href="http://alistair.cockburn.us/index.php/Hexagonal_architecture">Hexagonal architecture</a> .  The hexagonal and onion architecture is based on general principles: transferring infrastructure to external modules and writing adapters to them.  I plan to write more on the use of onion architecture when building enterprise-level applications.  I still remain in this environment and continue the discussion on onion architecture in this context. <br><br>  <b>From the translator.</b>  This post is the first of a series of posts by Jeffrey Palermo on onion architecture.  If habrasoobschestva have an interest, I can do the translation and the rest of the parts. <br></div><p>Source: <a href="https://habr.com/ru/post/233747/">https://habr.com/ru/post/233747/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../233733/index.html">Junior required</a></li>
<li><a href="../233735/index.html">Getting CISA. The history of one certificate and assistance to interested</a></li>
<li><a href="../233737/index.html">Porting your favorite Android game</a></li>
<li><a href="../233743/index.html">Conversion optimization: 7 recommendations for using predictive analytics</a></li>
<li><a href="../233745/index.html">This is Science: What's inside a neuromorph chip?</a></li>
<li><a href="../233749/index.html">3Doodler - review pen 3d-printer</a></li>
<li><a href="../233751/index.html">IBM Simon: the world's first smartphone turned 20 years old</a></li>
<li><a href="../233753/index.html">Relocation of electronics in Shenzhen. Is it worth it to go that far?</a></li>
<li><a href="../233755/index.html">How to create an interesting game setting? Level One: Text</a></li>
<li><a href="../233761/index.html">Databases and NoSQL (Chapter 4 of the book "Scalable and high-performance web applications")</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We delegate the right to restore virtual machines, files and application objects using Enterprise Manager</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a recent post , it was discussed how you can delegate file recovery operations to virtual users using the Veeam Self-Service File Restore web porta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We delegate the right to restore virtual machines, files and application objects using Enterprise Manager</h1><div class="post__text post__text-html js-mediator-article">  In a recent <a href="https://habrahabr.ru/company/veeam/blog/279327/">post</a> , it was discussed how you can delegate file recovery operations to virtual users using the Veeam Self-Service File Restore web portal.  Today, as promised, I will talk about delegating the rights to restore various objects from a backup using Veeam Backup Enterprise Manager. <br>  In organizations (especially large ones), over time it becomes necessary to divide the areas of responsibility of IT professionals.  For example, one of them is responsible for the operation of the database servers, the other for the mail servers, the third for SharePoint, and so on.  In addition, a support service for internal users is being organized, and its responsibilities include, among other things, assistance in restoring specific machines, files, etc.  To perform recovery tasks, people will need the appropriate rights and user-friendly interface.  Here it is reasonable to use Veeam Backup Enterprise Manager, in particular, its user role settings. <br>  For details, welcome under cat. <br><br><img src="https://habrastorage.org/files/0cc/717/e66/0cc717e6605f47468ed8cce217071be0.png"><br><br><a name="habracut"></a><br><h1>  Assigning roles </h1><br>  Before starting the delegation of rights, make sure that the Veeam Backup Enterprise Manager service runs under an account that is included in the Active Directory domain - then you can assign the necessary roles to users and groups from AD. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We go to the Enterprise Manager web portal using an account with portal administrator privileges - by default, the person who performed the installation and those who belong to the local administrators group on this machine have it. <br><br><ol><li>  Click <b>Configuration</b> at the top right and then at the left select the <b>Roles</b> tab: <br><br><img src="https://habrastorage.org/files/a65/d0b/ffd/a65d0bffd67147aaad5865342369e129.png"><br><br></li><li>  To add a new portal user, click <b>Add</b> . </li><li>  In the dialog that opens, we start with the <b>Account type</b> field: <br><br><img src="https://habrastorage.org/files/0cc/717/e66/0cc717e6605f47468ed8cce217071be0.png"><br><br><ul><li>  In the drop-down list, select <b>User</b> , if we want to give rights to a single user. </li><li>  To assign rights to a group, we select, respectively, <b>Group</b> . </li></ul><br></li><li>  In the <b>Account</b> field we enter the account to which we will assign the rights in the format <i>domain / name</i> . </li><li>  Go to the list of user roles Enterprise Manager. <br><ul><li>  <i>Portal Administrator</i> - those who are assigned this role get access to all the settings and features of the Enterprise Manager.  They will be able to search and restore any backup virtual machines and files, as well as set the parameters of the Enterprise Manager in the settings panel (by clicking <b>Configuration</b> ).  Users with other roles this panel is not available. </li><li>  <i>Portal User</i> and <i>Restore Operator</i> - users with such roles, as a rule, have access to a limited number of virtual machines (this is their "allowed scope").  For example, it is reasonable for the database administrator to grant the right to restore SQL and Oracle servers.  On the <b>VMs</b> and <b>Files</b> tabs after login such a user will see only the data of those machines that are included in his ‚Äúscope‚Äù.  <i>Portal Users</i> will see backup statistics for VMs available to them in the <b>Dashboards</b> tab. </li></ul><br></li></ol><br>  <i>Important!</i>  If you have a version of Veeam Backup &amp; Replication Enterprise Plus, then the scope can be varied up to the machine;  in other cases, the scope will include all <b>VMs</b> ( <b>All VMs</b> ), but the flexibility in assigning rights is quite sufficient - it can be the entire virtual machine, all of the files taken separately. <br><br><h1>  Configuring the "allowed scope" </h1><br>  For our user who has the role of <i>Portal User</i> or <i>Restore Operator</i> , we want to select specific machines that he will be allowed to restore. <br><ol><li>  To do this, from the <b>Restore scope</b> options, select <b>Selected virtual machines only</b> and press the <b>Choose</b> button. </li><li>  In the <b>Manage scope objects</b> dialog, click on <b>Add object</b> and select what type of object will be added to the list of allowed for restoration by our user: <br><br><img src="https://habrastorage.org/files/1f6/13b/133/1f613b13397d41e19760cdc5a8da1298.png"><br><br></li><li>  Then we select specific objects in the tree: <br><br><img src="https://habrastorage.org/files/181/81a/cb3/18181acb33be454a9c7eac6a8024158e.png"><br></li></ol><br>  Click <b>OK</b> to save the settings. <br><br>  If the delegation of restoration rights at the VM level is sufficient, then our steps are completed. <br>  If you need to issue rights with a high level of granularity, then go ahead. <br><br><h1>  Assign Granular Rights </h1><br>  In the same <b>Account</b> dialog, go to the <b>Allow restore of</b> options and select what will be allowed to be restored to this user: <br><ul><li>  The entire <b>virtual machine</b> ‚Äî machines from the ‚Äúscope‚Äù outlined earlier will be visible to the user when he opens the <b>VMs</b> tab.  One-click recovery of machines is described in detail in the " <a href="https://helpcenter.veeam.com/backup/em/1click_vm_restore.html">Performing 1-Click VM Restore</a> " user manual section.  In short: an Enterprise or Enterprise Plus license is required;  the machine will be restored to its original location (where it was located when creating the backup);  recovery from hardware snapshots is not supported from the Enterprise Manager web portal (it works only from the management console Veeam Backup).  Guest files will be hidden for the user, unless you select the next option. </li><li>  <b>Guest files</b> - options are possible here: <br><ul><li>  Allow only restore to original location ( <b>Allow in-place file level restores only</b> ) - in this case, the user will not have the right to save files to his local machine, the <b>Download</b> button will be inactive. </li><li>  Allow only file recovery with the following extensions ( <b>Allow restores files with these extensions only</b> ) - an even stricter limitation: specify the types of files our user can recover using commas. </li></ul><br></li><li>  If our user is the Exchange server administrator, and we want to allow him to restore objects from mailboxes (that is, letters, tasks, or calendar), then we select <b>Microsoft Exchange items</b> </li><li>  If the user is the SQL database administrator, and we allow him to restore the databases to the point in time he needs, then we select <b>Microsoft SQL Server databases</b> .  Here you can impose an additional restriction by specifying that the user is not allowed to restore to production, which could overwrite the current data with data from the backup ( <b>Deny in-place database restores (safer)</b> ). <br><br><img src="https://habrastorage.org/files/0cc/717/e66/0cc717e6605f47468ed8cce217071be0.png"><br><br></li></ul><br>  All these administrators will see the backups of their applications and will be able to restore the necessary objects by opening the <b>Items</b> tab in Enterprise Manager.  In more detail, the recovery processes for these applications are described in the " <a href="https://helpcenter.veeam.com/backup/em/em_backup_restore_app_items.html">Backup and Restore of Application Items</a> " user's manual. <br>  Finally, click <b>OK</b> , saving the settings. <br>  It should be borne in mind that the "scope" is updated automatically once a day, as well as after any editing of rights according to the described procedure. <br><ul><li>  If the user after login does not see the machines that you have allowed him to restore, he should click on the link <u>I</u> update <u>my VMs</u> to refresh the data in the view. </li><li>  Admin rights can update the ‚Äúscope‚Äù view manually at once for all roles that are configured in Enterprise Manager ‚Äî to do this, open the <b>Configuration</b> view, select <b>Roles</b> on the left and click the <b>Rebuild roles</b> button. </li></ul><br>  This completes the role setup procedure. <br><br><h1>  What else to read </h1><br><ul><li>  Article on Habr√© " <a href="https://habrahabr.ru/company/veeam/blog/279327/">Let's organize the recovery of virtual machine files using the web portal Veeam Self-Service File Restore</a> " </li><li>  <a href="https://helpcenter.veeam.com/evaluation/backup/hyperv/ru/distribured_backup_infrastructure.html">Basic scenarios for using Enterprise Manager (for version 8.0, in Russian)</a> </li><li>  <a href="https://helpcenter.veeam.com/backup/em/introduction.html">User Guide (in English)</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/283024/">https://habr.com/ru/post/283024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283010/index.html">Viber received end-to-end encryption by default</a></li>
<li><a href="../283012/index.html">Experience of using contracts in REST API calls</a></li>
<li><a href="../283018/index.html">Dagger 2. We treat dependencies by the method of Google</a></li>
<li><a href="../283020/index.html">The first success of a complex game bot</a></li>
<li><a href="../283022/index.html">Developers lazy to the edge?</a></li>
<li><a href="../283026/index.html">How to replace ELK for viewing logs?</a></li>
<li><a href="../283028/index.html">Squid's serious proxy vulnerability can ‚Äúpoison cache‚Äù</a></li>
<li><a href="../283030/index.html">Once again on minimizing boolean functions</a></li>
<li><a href="../283036/index.html">Means of data collection in computer technical expertise</a></li>
<li><a href="../283038/index.html">Performance without event loop</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
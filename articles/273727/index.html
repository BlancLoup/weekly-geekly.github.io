<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Swift. Functional programming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Author: Igor Litvinenko, Senior Mobile Developer. 

 In this article I will talk about functional programming. Or rather, we will look at the problems...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Swift. Functional programming</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/a92/a4e/0a6/a92a4e0a66f049a2aa7e2661df1ca4f6.png"></div><br>  Author: Igor Litvinenko, Senior Mobile Developer. <br><br>  In this article I will talk about functional programming.  Or rather, we will look at the problems of imperative and object-oriented programming, then we will look at functional programming and try to find a solution to these problems in it.  We will also see when it is necessary to use functionally programming and when it is not necessary. <br><br><h5>  <b>History tour</b> </h5><br>  A bit of history.  It so happened that all development methodologies came from academic sources.  Then it had to go somewhere from two to several decades in order for the methodology to become popular.  This was partly the case because we, the developers, need time to change our vision in order to change our ways of solving problems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I really liked the example from the book ‚ÄúWe Think Functionally‚Äù (or ‚ÄúFunctional Thinking‚Äù).  Imagine that you are a lumberjack, and you have the biggest ax in the forest, which allows you to be the best and most successful lumberjack.  But then you read in some magazine a marketer's note that they have now invented a new, extremely effective and modern concept of felling the forest - with the help of chainsaws.  Then you order a chainsaw - you deliver it, you unpack it, but you don‚Äôt know how it turns on.  But you know very well how to chop wood with an ax.  And you take a chainsaw and try to cut trees with it just as you usually chop with an ax.  And, of course, you can‚Äôt do anything - you have no choice but to return to the ax again.  But then a neighbor comes to you and explains how to start a chainsaw - and you finally begin to effectively cut down the forest with a chainsaw. <br><a name="habracut"></a><br>  I say this to the fact that an idea, concept or methodology will not take off until it becomes overgrown with accompanying materials (for example, manuals, best practices), and so far a layer of tasks that we can perfectly solve with the help of a new methodology stand out. <br><br>  If we look at the history, we see that procedural programming coped well with its tasks - it was very fast.  And when they invented the first object-oriented language (Simula 67) in 1967, no one understood why this language is needed - everyone paid attention only to the performance losses associated with the need to find the correct implementation of the method, or the right heir, etc. But then the programs began to perform a larger layer of tasks: they became more complicated, the development teams became larger, and it turned out that the object-oriented approach was lacking.  As a result, the imperative object-oriented approach to software development became popular with the introduction of C ++, introduced in 1983. <br>  The same story - with cross-platform languages ‚Äã‚Äãlike Java and .NET.  The concept originated in 1980: the environment allowed to run the code on Pascal on two machines: Apple 2 and IBM PC.  But then there was no power at all to transfer to bytecode and its subsequent translation into machine code.  And in the 90s, Sun introduced Java.  Now, cross-platform Java and .NET languages ‚Äã‚Äãare much more in demand than specialists in various machine languages.  After all, in the 90s it became clear that it is better to put more expensive powerful hardware on the server, where all the necessary code will be executed during production, but at the same time save on development.  After getting acquainted with Java, which has a very good object-oriented model and a garbage collector, most people no longer want, of course, to move to manual memory management. <br><br><h5>  <b>The problems of the imperative (and object-oriented) approach</b> </h5><br>  However, the imperative, object-oriented approach has its drawbacks. <br><br><ul><li>  <b>Threshold of entry</b> .  First, we need to understand the terminology: for example, we need to know what inheritance is and how to use it and, more importantly, when not to use it, but to use an ordinary composition.  Secondly, there is a threshold for entry into the project.  For example, when you come to a project at the stage of active development, you will have to deal with objects and their interactions. </li><li>  <b>Nontrivial splitting into abstractions</b> .  It does not always make sense to directly transfer physical objects into programming objects ‚Äî you still have to somehow split up these objects, introduce additional ones, create different levels of abstraction.  At the same time, it is impossible to learn how to do it correctly in any book - it will still come with experience.  From books you can only learn about design patterns, but there is another problem: </li><li>  <b>Misunderstanding patterns are anti-patterns</b> .  Design patterns are designed to ensure that the part of the code that can potentially be changed is transferred as deeply as possible, that is, to go down as low as possible to a specific implementation, but the general logic remains unchanged.  This, of course, is very convenient, but people are lazy and do not always understand what they are doing.  Because of this, anti-design patterns have appeared.  For example, a ‚Äúdivine object‚Äù appeared, which ‚Äúknows‚Äù everything about everyone and deprives us of most of its flexibility.  The poltergeist class has also appeared: you see what this class does, but you do not understand why it is here.  So in imperative programming, we have a lot of these kinds of side effects that any class can cause. </li><li>  <b>Unobvious side effects on the interface</b> . </li></ul><br><br>  Of course, some problems can be solved by attracting experienced guys who can do refactoring.  But when we talk about multithreading, the concept of imperative programming stops working.  After all, it is rather difficult to follow the changes in the state of objects in different streams and synchronize them, to do some atomic operations.  You can not just take the program out of the box and parallelize it on multiple processors.  Moreover, if a non-parallelized code within a program is more than 30%, you will not be able to get any benefits from multiprocessor systems: too much time will be spent on synchronization and atomic actions.  Hence the following disadvantages: <br><ul><li>  <b>The concept of state change itself stops working.</b> </li></ul><br><br>  When the concept does not work, people start looking for others.  And then we will see that, in one way or another, functional programming has begun to creep into our favorite languages.  We had blocks in Objective-C, we have closures in Swift, we have support for lambda functions in C ++ starting from the 11th standard, and even Java began to acquire lambda expressions.  At the hearing, now such languages ‚Äã‚Äãas Clojure and Scala.  So now let's see what functional programming is. <br><br><h5>  <b>Functionally programming (FP) and its basic principles</b> </h5><br>  If you thought that functional programming is programming with functions, you are right.  In this case, we write in a more mathematical style.  We always have input and output data, and we write functions, as if composing a pipe within which the data flows. <br><br>  The main pillars of OP: <br><br>  The main pillars of OP: <br>  ‚óè Constant input data. <br>  ‚Ä¢ No side effects. <br>  ‚Ä¢ Multithreading. <br>  ‚óè Changing the level of abstraction due to higher-order functions. <br>  ‚Ä¢ More reusable code. <br>  ‚Ä¢ Better readability of the code. <br>  ‚Ä¢ Preservation of context. <br><br>  The invariability of the input data ensures that all side effects are cut off.  This means that you can no longer worry about multi-threaded systems: nothing changes and no synchronization is needed. <br><br>  Using higher order functions.  This means that you can write functions that take other functions as parameters, which allows you to go to the next level of abstraction when you write more general logic, and the way a particular implementation of an action is passed as a parameter of your functions. <br><br><h6>  <b>Input invariance</b> </h6><br>  Let's now take a closer look at the immutability of the input data.  When you come to a project and ask a colleague to help you figure it out, you always have to draw a diagram: objects, methods, messages, what state you should go to, etc. And then you start watching the function.  And when you watch a function, you need to: <br><br><ol><li>  Understand what this function does. </li><li>  Understand how it will be called - inside this object or outside, or caused by a timer, or by notification, or something else. </li><li>  You are watching the interface of an object.  How many other objects are affected by this interface? </li></ol><br><br>  Of course, you can not answer this question.  You cannot even say what will happen in a global sense if you call a particular method.  This is the main problem. <br><br>  Here is some example code: <br><br><img src="https://habrastorage.org/files/0c6/781/f2a/0c6781f2a39e4affb6b50ab2bafd1645.png"><br><br>  Suppose we have a class ‚ÄúUser‚Äù, there is a ‚ÄúViewController‚Äù that stores this ‚ÄúUser‚Äù, and we have a class ‚ÄúNetworkOperation‚Äù - that is, roughly speaking, a request.  Since the type ‚ÄúUser‚Äù is reference, that is, is passed by reference, you, having changed something in ‚ÄúViewController‚Äù, change something in ‚ÄúNetwork Operation‚Äù, very far, and then, as they say, fun debag! <br><br>  What to do with it?  There are two types of data in Swift: reference type and value type.  The reference data type is something living, something that somehow reacts and can change its state.  Significant type is something dead and unresponsive, simple data.  The concept itself says that we need to abandon the use of active objects, that is, from the reference type, and go to using only values.  Thus, already at the level of the language, you will get rid of side effects: there is only simple data that doesn‚Äôt change itself inside and does not create any additional links.  And it is already much easier. <br><br>  Suppose we have an array "a", which includes the elements "1", "2", "3".  The array ‚Äúb‚Äù is a reference to ‚Äúa‚Äù: <br><br><img src="https://habrastorage.org/files/d2c/02e/7ae/d2c02e7ae20149079e2ed6b42ccda348.png"><br><br>  And let's say you want to add an element to the ‚Äúb‚Äù array.  Then, if b were an object, it would change.  Here, your ‚Äúa‚Äù remains unchanged, that is, there are no side effects at the value level: <br><br><img src="https://habrastorage.org/files/fe3/a6f/973/fe3a6f9738d54b1e8e8209ef3202c94d.png"><br><br>  If we work with ‚ÄúView‚Äù, which works as a reference type, when changing ‚Äúalpha‚Äù in the variable ‚Äúbeta‚Äù, we change ‚Äúalpha‚Äù in the variable ‚Äúa‚Äù: <br><br><img src="https://habrastorage.org/files/5ce/bcf/444/5cebcf444fdc41968b069a44ce53c099.png"><br><br>  Of course, you might think that a significant type seems to be cut off a little - these are simple data with which, it would seem, nothing can be done.  But in reality, this is not the case: in Swift, enumerated types (enum) and structures (struct) are significant types.  And the structures are able to implement protocols, store methods, make some calculations - in fact, they are already starting to gradually go out on the same level with objects.  However, they have three main advantages: <br><br><ol><li>  First, the structure is always constant and cannot change over time. </li><li>  Secondly, isolation: significant types are always isolated.  When we, for example, use the reference type ‚ÄúUser‚Äù, we create dependencies between components inside.  If we use a structure, that is, a significant type, we have no dependencies, and all data is isolated.  Here, in brief, about significant types. </li><li>  Thirdly, it is interchangeability.  There is no ‚Äúinstance-structure‚Äù concept, as is the case with objects ‚Äî in other words, we do not have an ID.  By and large, the significant type is characterized only by the topics of the data that it has inside - this means that they can be interchangeable.  For example, when you say a = [1, 2, 3], it does not matter to me where physically, this object lies in memory.  That is, if I turn to ‚Äúa‚Äù, there will be an array with this data.  Where they come from me is another question. </li></ol><br><br><h6>  <b>Changing the level of abstraction due to higher order functions</b> </h6><br>  Changing the level of abstraction due to higher-order functions means that we can take a function inside our function and execute it as an argument.  It also means that in Swift, functions have become 1st class variables - we can handle them in the same way as ordinary variables (cache, accept inside a function, return as results of another function).  At the Swift language level, we have already implemented the basic functions of the FP, such as ‚Äú <b>map</b> ‚Äù, ‚Äú <b>filter</b> ‚Äù and ‚Äú <b>reduce</b> ‚Äù.  An example of using these functions: <br><br><img src="https://habrastorage.org/files/d3d/c8e/467/d3dc8e4671b2426c868e219e795ae97a.png"><br><br>  ‚Äú <b>Map</b> ‚Äù simply transfers a collection of objects of one type to a collection of objects of another type.  An example from life.  In my previous project, the model of the entire system was written on meaningful types.  But some values ‚Äã‚Äãneeded to be saved to the database.  When we save to the database, we can operate on the object level with the class ‚ÄúNSManagedObject‚Äù (this is a reference data type).  And here the ‚Äúmap‚Äù function helped me a lot: let's say when you make a query to the database, these objects are returned to you, and you return the wrong collection that returned to you, and you write ‚Äúmap‚Äù (‚Äútranslate to the significant type "), and the data of the significant type is returned to you. <br><br>  To make the code even more readable and beautiful, Swift provides an abbreviation (shorthand notation), allowing you to organize very fast access to variables.  When you write ‚Äú$ 0‚Äù, ‚Äú$ 1‚Äù, ‚Äú$ 2‚Äù, you refer to the parameter number that went inside your circuit. <br><br>  And one more supplement.  If your closure returns some value, the result of the last line, if you did not write ‚Äúreturn‚Äù, will be returned as the result of your operation.  Because of this, in this case, the ‚Äúmap‚Äù function simply returns the squares of these numbers. <br><br>  The next function is ‚Äú <b>filter</b> ‚Äù.  Here we simply pass the closure, which must necessarily return a bool, so that we can determine whether to include this or that expression in the result set. <br><br>  The ‚Äú <b>reduce</b> ‚Äù function compresses our collection to one value.  For example, the above is an example of how to count the number of chapters in the first act of Romeo and Juliet. <br><br>  Since functions do not change anything and have no global effect, already at this stage, when we compiled the application, functions like ‚Äúmap‚Äù, ‚Äúfilter‚Äù and ‚Äúreduce‚Äù automatically work on all processors.  That is, we do not change anything outside and know exactly what to do with each individual element - we all scattered all of the processors and returned our result.  Everything works very well! <br><br><h5>  <b>Optional data types and Swift sugar</b> </h5><br>  Let's now look at other features that are present in Swift, but are not mandatory for a functional language. <br><br><ul><li>  <b>Generic types (generics)</b> are always cool.  We write more abstract code. </li><li>  <b>Static typing</b> makes it easier to understand the written code and simplifies testing. </li><li>  <b>Operator overloading</b> allows us to write clear and intuitive code. </li><li> <b>The optional types</b> have greatly changed the API that the SDK itself provides.  Suppose we have an ‚ÄúindexOfObject‚Äù in Objective C - it always returns a value, but you need to compare the resulting value with the constant ‚ÄúNSNotFound‚Äù, and if they are not equal, we find something: ‚Äú(NSUInteger) indexOfObject :( ObjectType) anObject ‚Äù.  In Swift, everything is much simpler: we return an optional ‚Äúindex‚Äù element: if this element is in the collection, then ‚Äúindex‚Äù is returned, if not, then ‚Äúindex‚Äù is not present: <code>public func indexOf(element: Self.Generator.Element) -&gt; Self.Index? <br></code> <code>public func indexOf(element: Self.Generator.Element) -&gt; Self.Index? <br></code> </li></ul><br><br><h5>  <b>We understand examples</b> </h5><br>  And now let's move from theory to practice. <br><br><h6>  <b>Example 1. Validation of a local file</b> </h6><br>  First we consider the imperative solution of the problem, and then we move on to the functional one. <br><br>  Suppose we have a function with which we pass the URL to a local file, and it determines whether the file is obsolete: <br><br><img src="https://habrastorage.org/files/f9c/373/94e/f9c37394ef01424eb1a77f7b45464bab.png"><br><br>  When using an imperative object-oriented approach, the solution would be something like the following: we would take a link to the file, check if it exists.  Then, if it exists, would take attributes from it.  If attributes exist, try extracting the date from the attributes and checking if the file is obsolete or not.  That is, we have a clear sequence of actions so that we can get an answer.  If we could not expand any optional types, then we, of course, return ‚Äúfalse‚Äù. <br><br>  OP proposes to start with splitting into small functions: <br><br><img src="https://habrastorage.org/files/10b/52b/990/10b52b990171418eb1975df07928d643.png"><br><br>  The first function will simply determine whether the file exists: accept a string, return an optional string (do one operation ‚Äî if the file exists, return).  The next one is getting the attributes, where we get the input line to an already exactly existing file, and return the possible attributes that we managed to get.  The next function will pull the date from the previously received attributes - here we use the abbreviation (‚Äú$ 0‚Äù).  It turns out that the whole path, that is, a pipe composed of functions, will be like this: we get the path, check the existence of the file, extract the attributes and check the creation date. <br><br>  To make the solution even more beautiful, we define the ‚Äúbind‚Äù function, which will bind the two functions, and define an operator that simply refers to this function.  The ‚Äúbind‚Äù function takes an optional value and an optional function (something needs to be done with this value) and also returns an optional value.  If the value is, the function is executed, and if not, it is not. <br><br><img src="https://habrastorage.org/files/16a/5d0/5e1/16a5d05e120f4fb794c9c068866746f2.png"><br><br>  As a result, we have such a very visual method: <br>  <b>return</b> filePath &gt;&gt; = fileExists &gt;&gt; = retrieveFileAttributes &gt;&gt; = extractCreationDate &gt;&gt; = checkExpired ??  <b>false</b> <br><br>  I do not know about you, but I am very annoyed with work with social networks.  For example, to write to Facebook you need to: check whether the user is logged in or not (if not logged in, log in);  if logged in, check whether there is a right to post entries, if not, ask for it, if there is, collect the entry.  Now imagine how this would all turn into such a small chain of calls: you immediately see what it does if errors occur, know exactly what function it is caused by. <br><br><h6>  <b>Example 2</b> </h6><br>  The second example shows how easy it is to understand a program in a functional language: <br><br><img src="https://habrastorage.org/files/791/e36/26a/791e3626a66947b9b4eb4e1e73ecef4e.png"><br><br>  Here we have an array of names.  What are we doing with him?  First, ‚Äúfilter‚Äù - cut off all names that have one character.  Then we make the first capital letter and combine it all with a separator with a comma.  It turns out that we take the input array, remove the names with one character, and turn it into a string.  And now think how much time it would take for you to write such a code in an imperative language, and how much time it would take if you saw such a code in someone else‚Äôs project. <br><br><h5>  <b>When it is not necessary to apply the OP</b> </h5><br>  But not always a functional solution is the best.  Suppose we need to count the number of occurrences of each word in the input string.  For this we would do something like this: <br><br><img src="https://habrastorage.org/files/349/f4d/119/349f4d1192c64fbaa87d013d7a4de95d.png"><br><br>  That is, we would create a result that was a dictionary.  We would break the string on the regular line and check for all matches whether the given word is a pretext: if not, we would increase the value of its index. <br><br>  And in a functional language, it would look like this: <br><br><img src="https://habrastorage.org/files/ea1/026/5b5/ea10265b54654359894f275c083761ba.png"><br><br>  Here we split off separately the function that accepts the input string, and the regular expression - it breaks and returns the result.  And then the fun begins.  Our main function first makes a ‚Äúmap‚Äù, which translates the input data into lower case.  Next step: we check whether this word is independent or just a preposition.  And then we begin ‚ÄúforEach‚Äù, which says that this piece is made for each element. <br><br>  Yes, our functions like ‚Äúmap‚Äù, ‚Äúfilter‚Äù and ‚ÄúforEach‚Äù are optimized and all that.  But just think how many iterations will be done!  After all, first we go down and make a ‚Äúmap‚Äù for all the elements, then we will filter the extra words, and only then we apply it for all of them.  In the first case, all this was solved in one cycle. <br><br>  Such is the example of the unsuccessful transfer of the functional style. <br><br><h5>  <b>Conclusion</b> </h5><br>  I do not want to say that we all need to go from our favorite object-oriented programming to functional.  Let's be honest - the time for universal application of functional programming has passed.  I say that we should use an object-oriented approach where it is needed: where we have UI components, where it is important to have inheritance, where it is important that some methods be defined in the ancestor, where we define all this logic.  But we also have a huge reservoir of tasks (for example, data processing, list filtering, etc.), which are very well solved with the help of FP. <br><br>  Therefore, I urge to write UI as an object-oriented method, and to make the model on meaningful types.  Then we get a gain in performance and readability, get rid of unwanted effects.  Moreover, our code will become testable. <br><br>  After all, how is the testing written in the imperative language?  We create the universe, perform some actions and see what has changed in the universe. <br><br>  If we want to test something that is deep in the tests, we need to make a chain of challenges.  In the OP, everything is simple: we know that the function always returns the same value for the same input data, which allows writing short data for tests. </div><p>Source: <a href="https://habr.com/ru/post/273727/">https://habr.com/ru/post/273727/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273717/index.html">What's new in Hyper-V for Windows Server 2016</a></li>
<li><a href="../273719/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 23. "Anglerphish"</a></li>
<li><a href="../273721/index.html">Fixed opening links with a wheel and other fixes in Vivaldi 1.0.357.5 assembly</a></li>
<li><a href="../273723/index.html">Script for quick assessment of the status of Linux systems</a></li>
<li><a href="../273725/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 24. "Exposure"</a></li>
<li><a href="../273731/index.html">SWAT - DSL for rapid development of automated web application tests</a></li>
<li><a href="../273733/index.html">‚ÄúWings, paws and tails‚Äù of our Linux hosting, part 1: how we automated the deployment of infrastructure</a></li>
<li><a href="../273737/index.html">What year 2015 brought us?</a></li>
<li><a href="../273741/index.html">Adobe Playpanel project closes January 31, 2016</a></li>
<li><a href="../273743/index.html">QThread + QtSql the right way</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
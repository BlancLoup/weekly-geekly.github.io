<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title><base> is bad.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The <base> , with which the browser is given a base path for resolving relative links, is harmful and should not be used in a good layout. Instead, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1><base> is bad.</h1><div class="post__text post__text-html js-mediator-article"> The <code>&lt;base&gt;</code> , with which the browser is given a base path for resolving relative links, is harmful and should not be used in a good layout.  Instead, there is a fairly strict and flexible method for specifying the paths to resources. <br>  Due to the spreading mode on CNC, web technologists began to encounter the following problem more often - files (for example, CSS or images), located on the server literally in the next folder with layout templates, now cannot be addressed by relative paths.  When automatically creating pages on very extensive sites, there is practically no way to automatically change the relative paths to resources depending on the address of the page being viewed, and the usual relative paths stop working. <br><a name="habracut"></a><br><h4>  What is he talking about? </h4><br>  Browser browsing address <code><a href="http://example.com/blog/record1/"></a> example.com/blog/record1</code>  <code><a href="http://example.com/blog/record1/"></a> example.com/blog/record1</code> , will try to resolve the <code>../css/blog.css</code> link to <code><a href=""></a> example.com/blog/css/blog.css</code>  <code><a href=""></a> example.com/blog/css/blog.css</code> .  Perhaps this is not so bad, but in a situation where the address will be something like <code><a href="http://example.com/blog/tags/test/"></a> example.com/blog/tags/test</code>  <code><a href="http://example.com/blog/tags/test/"></a> example.com/blog/tags/test</code> , the same link resolves to <code><a href=""></a> example.com/blog/tags/css/blog.css</code>  <code><a href=""></a> example.com/blog/tags/css/blog.css</code> .  Obviously, although the presence of the same file at several URLs can be realized, this is clearly not worth doing.  Even if the <code>css</code> folder is in the same place as the layout templates, the problem of relative addressing will not go anywhere. <br><h4>  As in such cases usually come </h4><br>  Web programmers and technologists around the world remembered in this difficult situation about the tag <code>&lt;base&gt;</code> .  According to specification: <br><blockquote>  The <code>BASE</code> element allows authors to explicitly specify the base URI of the document. <br>  If the <code>BASE</code> element is specified, it must be present in the <code>HEAD</code> section of the HTML document, before elements refer to external resources.  The path information specified in the <code>BASE</code> element affects only the URI in the document that contains this element. </blockquote><br>  The solution seems ingeniously simple: by specifying <code>base href="http://example.com/templates/"</code> in the element, we will force the browser to resolve all the above relative URLs into links to actually existing files lying on the same place.  Having got rid of the habit of traveling up the directory tree in our relative path, we will get rid of these problems completely. <br><h4>  What's wrong? </h4><br>  Here is just a brief list of problems that arise when using <code>&lt;base&gt;</code> for such purposes: <br><ol><li>  The site stops working from the rest of the domains - even if you try to browse <code><a href="http://www.example.com/"></a> www.example.com</code>  <code><a href="http://www.example.com/"></a> www.example.com</code> browser will try to pull resources with <code><a href="http://example.com/"></a> example.com</code>  <code><a href="http://example.com/"></a> example.com</code> ( <em>without www</em> ).  For CSS and images this is not so scary, but with scripts (especially HTC for Internet Explorer), cookies, ActiveX, Flash (if it means interaction with the server), and also if the user accesses the https protocol, the user will have more or less serious Problems.  Consider also the difficulties when transferring a site to another domain (or using its engine for another site). </li><li>  <code>&lt;Base&gt;</code> also affects the relative addresses used in the links, which are now also resolved according to the base path.  Even if you specify <code>base href="</code> <code><a href="http://example.com/"></a> example.com</code>  <code><a href="http://example.com/"></a> example.com</code> <code>/"</code> , there is a collision between domains, indicated in the first problem. </li><li>  The problem of the psychological plan: the base path specified in projects with large branching, modular structure of templates or simply a large amount of code can confuse a ‚Äúfresh‚Äù layout designer, unfamiliar with the project, but having the task to insert a couple of pictures on the page. </li><li>  The most amazing problem: everybody's favorite IE browser, if there is a <code>&lt;base&gt;</code> and markup elements with the specified <code>float</code> CSS property (for example, <code>&lt;div style="float: left;"&gt; !&lt;/div&gt;</code> ), in the document you are viewing, will allow the mouse to select text in such elements.  What connection can be here is not clear, but true. </li><li>  The same IE, when resolving paths used in CSS filters (for example, AlphaImageLoader), ignores the indication of the base path and tries to resolve relative links, as if there was no <code>&lt;base&gt;</code> .  You will not notice this if you specify the site root as the base path, but with any other folder used in this quality, the standard "medicine" for PNG stops working. </li></ol><br>  So, we have in the end: as the base path it is better to use the root of the server, but this will create some problems in IE and serious problems for the work of the site with several domains.  Having solved the problem with relative paths, we created a few more. <br>  It seems to me that due to the above difficulties, it is better to refuse the <code>&lt;base&gt;</code> tag altogether.  And to solve the main stated problem, use other methods of working with relative links. <br><h4>  ‚ÄúSemi-Absolute‚Äù Addressing </h4><br>  The fact is that if we just address resources from the server root, starting the path with the <code>/</code> character (‚Äúslash‚Äù), then we can do without <code>&lt;base&gt;</code> , while allowing the site to work from any domain and have some other benefits.  I call this addressing, as opposed to the commonly used reference one, ‚Äúsemi-absolute‚Äù (because the protocol and domain are not specified, in contrast to the present absolute addressing). <br>  That is, the CSS file specified in the problem example should be addressed as <code>/templates/css/blog.css</code> .  Such a link will work with any domain (as well as a protocol and port), since the default browser will use the directory of the document being called as the base directory (that is, for example, <code><a href="http://example.com/blog/record1/"></a> example.com/blog/record1</code>  <code><a href="http://example.com/blog/record1/"></a> example.com/blog/record1</code> - for the browser, this path looks like the directory from which it views the index document).  Relative links starting with a slash will be preceded by the browser used by the protocol and all other parts of the URL, ending with the current domain (and the port, if specified).  Thus, the problem of addressing resources is solved without unnecessary problems with domains. <br>  At the same time, I call for a meticulous sequence: everywhere, including the <code>url()</code> constructs and filters in CSS and hyperlinks between documents, this notation should be used if it is about working within the same domain.  This will allow some freedom in handling files (for example, share the CSS file in the <code>images</code> folder, or move it to a separate one), while maintaining strict code order and efficiency.  Unfortunately, many IDEs used in web development do not have the appropriate settings for addressing resources, indulge too much relative addressing (especially with directory tree climbing), and even perceive existing files, but those indicated by the ‚Äúsemi-absolute‚Äù method, as non-existent resources.  You should not depend on your tools, it is better to think with your head. <br>  However, even with ‚Äúsemi-absolute‚Äù addressing, it is not without problems (and what did you think).  In my practice, the problem arose with Flash - according to the statement of work, she did not just play a movie, but from time to time <nobr>she</nobr> contacted the server <nobr>for some kind of</nobr> flash business for a single file.  The flash drive file should have been loaded from the ‚Äúcurrent directory‚Äù, addressing it as <code>file.txt</code> .  Since the CNC engine was used, each page had its own catalog, and therefore, the flash drive did not work. <br>  That time I solved the problem by asking the Flash technologist to address this file as <code>/flash/file.txt</code> .  This resolved the problem on the server, however it ruined the life of the Flash technologist himself (when working in the local file system, such addressing is allowed in a way like <code>C:/flash/file.txt</code> ).  Of course, there is a better solution. <br><h4>  We specify Flash its place </h4><br>  When implementing a Flash movie that needs to communicate with its server via http (for example, reading files through the web), you can specify the base directory specifically for each video being deployed without using <code>&lt;base&gt;</code> .  To do this, you need to specify the base parameter in the flash insertion code with a value equal to the address of the desired directory in a ‚Äúsemi-absolute‚Äù form.  That is, in my case, the implementation code of the flash drive looked like this: <br><blockquote> <code>&lt;object ‚Ä¶&gt; <br> &lt;param name="base" value="/flash/"&gt; <br> ‚Ä¶ <br> &lt;embed base="/flash/" src="/flash/01.swf" ‚Ä¶&gt; <br> ‚Ä¶</code> <br>  special thanks to the authors of Habrakhabr for the ‚Äúconvenient" means of publishing the code <br></blockquote><br><br>  In fact, I still set the base directory, but I did it only for one Flash-movie, without specifying the protocol and domain name (they will be substituted in the same way as when resolving "semi-absolute" links).  For the next video, you can specify a different directory, or, if you are satisfied with working with the root directory of server webspace, you can simply specify ‚Äú <code>/</code> ‚Äù.  The flash technologist can now always be sure of the position of the flash drive in the web server space and indicate the paths to the resources in a convenient way (not necessarily as ‚Äúsemi-absolute‚Äù). <br><h4>  PS </h4><br>  If someone else is not very clear, I urge to use such a method exclusively within the framework of my authority and on the basis of my own practice.  That is why I published the topic in my personal blog, and not in the relevant collective ones. <br><br>  If you do not trust me, or for some reason you have your own opinion on this, I suggest not to plant unnecessary discussions, but to express your opinion in your personal blog.  Here, only my own IMHO is recorded, why &lt;base&gt; is harmful, and what to do in its absence. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/18116/">https://habr.com/ru/post/18116/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181145/index.html">ActiveRecord Hacks</a></li>
<li><a href="../181147/index.html">Do not do as I do. Or about your future job</a></li>
<li><a href="../18115/index.html">Avatars have overtaken blacks on energy consumption</a></li>
<li><a href="../181151/index.html">The algorithm of the game "sea battle": the shelling of the enemy</a></li>
<li><a href="../181159/index.html">Device of points of virtual reality Oculus Rift</a></li>
<li><a href="../181161/index.html">The new technology of noise reduction allows you to transfer 400 Gb / s over fiber for 12,800 km without signal repeaters</a></li>
<li><a href="../181165/index.html">Robotic Data Center of the Future</a></li>
<li><a href="../18117/index.html">A new book by Vadim Panov - "Bonfires on the altars".</a></li>
<li><a href="../181173/index.html">Servers and data centers in the Netherlands - operating experience</a></li>
<li><a href="../181175/index.html">Does the programmer need free buns?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
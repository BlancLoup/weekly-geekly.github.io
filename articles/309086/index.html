<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NVMe over Fabric, Fiber Channel and others</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About the impending death of Fiber Channel say a little less than about the death of tape drives. Even when the speed was limited to 4 Gbps, even then...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NVMe over Fabric, Fiber Channel and others</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d9f/00f/799/d9f00f7993104999bb1609d605961823.png" alt="image" align="left" width="50%">  About the impending death of Fiber Channel say a little less than about the death of tape drives.  Even when the speed was limited to 4 Gbps, even then, FC replaced the new-fangled iSCSI (although the sane budget is only for 1 Gbps option, but 10 is somewhere very near).  Time passed, and 10 Gbit ethernet remained too expensive and, moreover, could not provide low latency.  ISCSI as a protocol for communicating servers with disk systems, although it was widely spread, could not completely force out FC. <br><br>  The past years have shown that the infrastructure of the Fiber Channel continues to grow rapidly, the speed of interfaces is growing and it is clearly premature to talk about the coming demise.  And in the spring of this (2016) year, the Gen 6 standard was announced, doubling the maximum speed from 16GFC to 32GFC.  In addition to the traditional increase in productivity, the technology has received a number of other innovations. <br><br>  The standard allows you to combine 4 FC lines into one 128GFC channel for connecting switches with each other via a high-speed ISL link.  Error Correction (Forward Error Correction, FEC) was already available in fifth-generation FC products as an option, but in Gen 6 its support became mandatory.  At such high speeds, not only does the likelihood of errors increase (the BER for Gen 6 is 10-6), but the effect of errors on performance increases even more because of the need to re-send frames.  FEC allows the receiving party to correct errors without having to make repeated requests for frame forwarding.  As a result, we get a smoother data transfer rate.  Energy efficiency was also ignored - to reduce energy consumption, copper ports can be completely shut off, and optical ports can reduce power by up to 60%. <br><a name="habracut"></a><br>  Still, the strength of the FC technology is the low latency (which is still 70% lower compared to the currently widely used 8 Gbps standard).  It is the combination of low latency and high performance that makes 32GFC a suitable solution for connecting All-Flash arrays.  On the horizon, NVMe systems, which place the highest demands on the storage network infrastructure, are becoming more and more visible, and 32GFC has every chance of winning a worthy place. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      FC Gen 6 chips, adapters and a Brocade G620 switchboard were announced in the spring along with the standard itself, and not so long ago new directors (chassis switches) of the Brocade X6 Director family were announced.  In the maximum configuration (8 slots), it supports up to 384 32GFC ports + 32 128GFC ports with a total bandwidth of 16Tbps.  Depending on the chassis, you can install 8 or 4 FC32-48 line cards (48 32GFC ports) or multi-protocol SX6 cards (16 32GFC ports, 16 1 / 10GbE ports, and two 40GbE ports).  Blades SX6 allow you to use IP networks to connect switches.  Unfortunately, the chassis was not upgraded and the good old DCX-8510 cannot be upgraded to 32GFC, but for the X6 lineup it is declared to support Gen 7 standard cards. <br><br>  Considerable attention is paid not only to the hardware capabilities, but also to the control system.  Brocade Fabric Vision with IO Insight technology allows proactive monitoring of the entire I / O channel, including not only to physical servers, but also from individual virtual machines to specific LUNs on storage systems.  In a situation where many different applications are consolidated on one storage system, the performance analysis of the entire complex is rather complicated and collecting metrics at the switch level can significantly simplify the search for a problem.  Customizable alerts help to quickly respond to potential problems and prevent degradation of performance of key applications. <br><br>  But of course, the Fiber Channel is not the only one living and Mellanox announced the upcoming release of the BlueField chip family.  These are systems on a chip (SoC) with support for NVMe over Fabric and an integrated controller ConnecX-5.  The chip supports Infiniband up to EDR speeds (100Gb / s), as well as 10/25/40/50 / 100Gb Ethernet.  BlueField aims to be used both in NVMe AllFlash arrays and in servers for connecting NVMe over Fabric.  It is expected that the use of such specialized devices will provide an opportunity to increase the efficiency of servers, which is very important for HPC.  Use as a network controller for NVMe storage eliminates PCI express switches and powerful processors.  Someone may say that such specialized devices are contrary to the ideology of software defined storage and the use of commodity hardware.  But I think that since we have the opportunity to reduce the price of the solution and optimize performance, this is the right approach.  The first BlueField shipments are promised in early 2017. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/85d/69a/bb1/85d69abb1ecd42d0875c4a1bcf2bd457.png" alt="image"></div><br>  In the near future, the number of NVMe storage systems will steadily increase.  Connecting servers through a PCI-express switch, although it provides maximum speed, but has a number of drawbacks, therefore, the published version 1.0 of the standard ‚ÄúNVM Express over Fabrics‚Äù came to the fore.  FC or RDMA factory can be used as transport, the latter in turn can be physically implemented on the basis of Infiniband, iWARP or RoCE. <br><br>  RDMA transport through Infiniband will prevail rather in HPC systems, as well as where it is possible to attach hands with ‚Äúdo-it-yourself‚Äù.  There is no negative point in this phrase - Fiber Channel has been a recognized corporate standard for many years and the likelihood of running into problems is much lower than when using RDMA.  This applies to both compatibility with a wide range of application software, and ease of management.  All this has a price that the corporate market is following closely. <br><br>  At one time, some manufacturers predicted the great success of FCoE technology, as it allows unifying the storage network with a conventional data transfer network, but in fact it was not possible to achieve significant success in gaining the market.  Nowadays, the NVMe storage system with an Ethernet connection and NVMe over Fabric data transfer via RoCE (RDMA over Converged Ethernet) is actively developing.  There is a possibility that success here will be more significant than with the introduction of FCoE to the masses, but I am sure that we will see more than one generation of Fiber Channel devices.  And now it is very early to say that ‚Äúat last only ethernet can be dispensed with‚Äù - yes, it is often possible, but it‚Äôs far from the fact that it will be cheaper. <br><br>  Today, if the FC network is already deployed, it is very rare to introduce alternative solutions - it is better to upgrade the equipment to Gen 6 or Gen 5 standards - the effect will be even with a partial upgrade.  Despite the fact that the existing storage system does not support maximum speed, updating the storage network often reduces latency and increases the integrated performance of the entire complex. <br><br>  Trinity engineers will be happy to advise you on server virtualization, storage systems, workstations, applications, networks. <br><br>  Visit the popular <a href="http://3nity.ru/">technical forum of Trinity</a> or <a href="http://www.trinitygroup.ru/about/kons/">order a consultation</a> . <br><br>  Other Trinity articles can be found <a href="http://blog.trinitygroup.ru/">on the</a> <a href="https://habrahabr.ru/company/trinity/">Trinity</a> <a href="http://blog.trinitygroup.ru/">blog</a> and <a href="https://habrahabr.ru/company/trinity/">hub.</a>  Subscribe! </div><p>Source: <a href="https://habr.com/ru/post/309086/">https://habr.com/ru/post/309086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309072/index.html">Perimeter defense: old attacks are not worse than new ones</a></li>
<li><a href="../309074/index.html">Type inference in programming</a></li>
<li><a href="../309076/index.html">Unreachable web: how we made such a mess</a></li>
<li><a href="../309078/index.html">Tips for working with Steam GreenLight or how not to get bogged down in a swamp</a></li>
<li><a href="../309080/index.html">On the process of creating a server - from idea to detail</a></li>
<li><a href="../309088/index.html">DisQwerty: you do not need more than one button to type</a></li>
<li><a href="../309092/index.html">Visualization of the photo portfolio. Part 1: Unusual deep learning</a></li>
<li><a href="../309094/index.html">Samsung has created a ‚Äúdigital eye‚Äù based on the IBM Truenorth chip</a></li>
<li><a href="../309096/index.html">Dagaz: In the wilds of notations</a></li>
<li><a href="../309098/index.html">[St. Petersburg, Announcement] CodeFreeze meeting with PHP developer Dmitry Stogov about the internal structure of the PHP virtual machine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
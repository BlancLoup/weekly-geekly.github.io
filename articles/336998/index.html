<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fast rendering of ocean waves on mobile devices</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Modeling water in computer graphics in real time is still a very difficult task. This is especially important when developing computer games in which ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fast rendering of ocean waves on mobile devices</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/90d/f2c/30a/90df2c30a2d74061a09e6222e8be48a8.png"><br><br><p>  Modeling water in computer graphics in real time is still a very difficult task.  This is especially important when developing computer games in which you want to create a visually attractive picture for a player within the framework of a hard limit on computing resources.  And if on the desktops the programmer can still count on the presence of a powerful video card and processor, then in mobile games it is necessary to rely on a much weaker hardware. </p><br><p>  In this article we wanted to talk about modeling waves in the open sea and present an algorithm that allowed us to achieve quite interesting results with acceptable 25-30Fps on an average china phone. </p><a name="habracut"></a><br><p>  In general, the experimentally selected <a href="http://evasion.imag.fr/~Fabrice.Neyret/images/fluids-nuages/waves/Jonathan/articlesCG/waterslides2001.pdf">Phillips</a> spectrum is used to model the surface of waves in the open sea, i.e.  decomposition of the entire spectrum of waves in Fourier components, which are animated in time.  However, this solution is very resource-intensive and, although fast Fourier decomposition can be performed on a video card, it is almost impossible to use it on weak smartphones both due to speed and due to the limited functionality of the video card (support for rendering in float texture, limited computation accuracy).  An example of such a method can be found <a href="http://david.li/waves/">here</a> and <a href="http://www.keithlantz.net/2011/10/ocean-simulation-part-one-using-the-discrete-fourier-transform/">here</a> . </p><br><p>  A simpler method is to generate the distribution of waves in advance (or directly in the shader), and then add the waves of different phases and amplitudes. <br>  Despite the simplicity of the method, it can provide very impressive results, but it requires fine tuning and has several limitations.  Consider this approach in more detail and try to deal with the emerging nuances in terms of picture quality and speed. </p><br><h2 id="generaciya-voln">  Wave generation </h2><br><p>  To generate a wave, we need to know its height at a certain point.  It can be obtained in many ways.  For example, it is easy to use a combination of sines, cosines of the coordinates of this point, but it is obvious that the resulting distribution of heights looks too artificial and is not suitable for solving our problem.  In this case, a periodicity is observed even if the direction of the waves is changed relative to each other. </p><br><div class="spoiler">  <b class="spoiler_title">Simple but unnatural sea</b> <div class="spoiler_text"><p>  Running a little ahead, the image below shows the surface of the water obtained by adding waves of different amplitudes and heights. </p><br><img src="https://habrastorage.org/web/755/a71/875/755a71875ea8482fa09459e67e2836fd.png"><br><p>  The same algorithm, but from a distance there is a periodicity. </p><br><img src="https://habrastorage.org/web/961/406/9ae/9614069aeb764cbf9bc456e8a7d2a87d.png"></div></div><br><p>  It is more optimal to use the <a href="https://habrahabr.ru/post/265775/">Perlin noise</a> , an example of which generation on shaders is presented below (the code for Cg, for GLSL requires cosmetic changes): </p><br><pre><code class="hljs mel"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(float2 n) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> frac(<span class="hljs-keyword"><span class="hljs-keyword">sin</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">dot</span></span>(n, float2(<span class="hljs-number"><span class="hljs-number">12.9898</span></span>, <span class="hljs-number"><span class="hljs-number">4.1414</span></span>))) * <span class="hljs-number"><span class="hljs-number">43758.5453</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> <span class="hljs-keyword"><span class="hljs-keyword">noise</span></span>(float2 n) { const float2 d = float2(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>); float2 b = <span class="hljs-keyword"><span class="hljs-keyword">floor</span></span>(n), f = <span class="hljs-keyword"><span class="hljs-keyword">smoothstep</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, frac(n)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lerp(lerp(<span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(b), <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(b + d.yx), fx), lerp(<span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(b + d.xy), <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span>(b + d.yy), fx), fy); }</code> </pre> <br><p>  rand generates a pseudo-random value, and noise interpolates four random numbers in the corners of the square to any point inside it. </p><br><div class="spoiler">  <b class="spoiler_title">Perlin noise</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/549/eec/582/549eec5823e14ce09f45a74ba27f99af.png"><br><p>  No periodicity observed </p><br><img src="https://habrastorage.org/web/797/ca9/a91/797ca9a916f54b5bb80adac6141efcf3.png"></div></div><br><p>  The result is already better, the distribution of the waves has noticeably changed, but their shape also differs from the natural waves.  With a small amplitude, this is still acceptable, but for large waves, there are sharp peaks. </p><br><p>  When using the Phillips spectrum, this is solved by shifting the grid of the water surface to the peaks, which gives the desired shape.  However, a simpler method and much more efficient in our case is the use of a simple formula, which leads to a satisfactory result in the form of pointed waves. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mo>=</mo><mn>1</mn><mo>&amp;#x2212;</mo><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.235ex" height="2.66ex" viewBox="0 -832 5268 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-3D" x="854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-31" x="1910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2212" x="2633" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-32" x="3634" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-7C" x="4134" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-68" x="4413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-7C" x="4989" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mo>=</mo><mn>1</mn><mo>‚àí</mo><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> h = 1- 2 | h | </script></p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/64e/5f8/e53/64e5f8e536c74fe49c90a7a68ab160a4.png"></div><br><p>  The disadvantage of the method is that it leads to the appearance of circles and other closed figures that are noticeable to the eye, but with an appropriate selection of parameters, this disadvantage becomes insignificant. </p><br><img src="https://habrastorage.org/web/43a/589/1de/43a5891de19a4c798223ac1c15d077ab.png"><br><br><h2 id="fazovoe-raspredelenie-i-animaciya">  Phase distribution and animation </h2><br><p>  Obviously, the presence of only one phase (or otherwise octaves) for water is not enough to get realistic water and it is required to impose several waves with different amplitude and phase, which allows to obtain both large waves and small ripples on the surface. </p><br><pre> <code class="hljs matlab">float amp = maxHeight / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (int <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt; count; ++<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>){ h += amp * phase(pos + v[<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>]*t); pos *= sp; amp /= sa; }</code> </pre> <br><p>  Good results are obtained by choosing sp, sa equal to 2, but we are free to choose any values ‚Äã‚Äãthat provide acceptable results.  The selection of these parameters allows you to get a variety of types of waves and manage their change up to complete calm. </p><br><p>  To animate the waves, it is enough to shift each phase in its direction.  It should be borne in mind that the speed of movement of large waves is greater and the waves move mainly in the same direction. </p><br><h2 id="optimizaciya">  Optimization </h2><br><p>  As the experiments showed, it is quite enough to have about 7 phases to get a ‚Äútasty‚Äù picture and, in principle, there was no need for the next bike.  However, the very first tests on smartphones were shocked because  FPS inexorably sought to 0, which could not but grieve.  Let's see how many operations in the shader are required to display a single point: </p><br><ul><li>  Perlin noise: For each vertex, 4 random values ‚Äã‚Äãare required, i.e. 4 sin, 4 fract and other simpler operations. </li><li>  The calculation for 7 waves is 28 sin. </li><li>  Calculation of surface normals: In addition to the height of the point itself, we need to know the heights of 2 adjacent points.  Accordingly, the number of payments increases 3 times - up to 84!  sin operations. </li></ul><br><p>  In general, one can disagree with the above reasoning, since  it is sufficient to calculate the height of the surface as a whole for each vertex of the mesh, which is certainly faster than reading for each point of the screen.  But in this case, about any realism can not dream.  Maxmum, we get a very rough approximation to the desired result.  Thus, all the above operations have to be calculated in the fragment shader.  Optimization options: </p><br><ul><li>  Try to reduce the number of phases, but as mentioned earlier, it is desirable to have about 7 phases for an acceptable display.  A smaller number significantly degrades the "quality" of the waves. </li><li>  Try to replace the costly operation of calculating the noise on a sample of the finished texture.  Instead of 84 sin, we get 21 samples already (since 4 sin is required for Perlin noise). </li></ul><br><h3 id="karta-vysot-normaley">  Elevation-normal map </h3><br><p>  The last option has the right to life, but fps is also too small - about 3-4 frames per second.  In addition, in this case, when calculating the normal, we rest on the accuracy of data storage in the texture, which leads to the appearance of ‚Äústeps‚Äù on the water.  Of course, you can use a texture with real numbers, but then we will further limit the number of supported devices. </p><br><p>  At the same time, to obtain the height of a point, it is necessary to read the height value from the texture, but nothing prevents us from baking a normal map in this texture as well.  Thus, with one sample from the texture we can get the height of the point and at the same time the normal to it.  Baking data into texture can be performed in advance or directly on the video card by rendering to texture (for example, before launching the application or changing parameters). </p><br><p>  When calculating the texture, it is necessary to ensure sufficient accuracy of normal storage.  If you keep the normal in the usual form of a normal map, then this accuracy is insufficient, which is manifested in image artifacts. </p><br><p>  Indeed, to obtain a normal, it suffices to keep only the projection of the normal in the horizontal plane (n <sub>x</sub> , n <sub>y</sub> ).  In general, each of these components varies in the range [-1,1].  But in the case of water, the range used is substantially less, since  the normals are mainly oriented upwards (which is especially noticeable when generating small amplitude waves).  Thus, if we normalize this range by the maximum value, then we can significantly increase the accuracy of storing the normals and, accordingly, the picture quality. </p><br><div class="spoiler">  <b class="spoiler_title">Example of a height map with normals</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/web/fd8/6d9/495/fd86d9495e2f4788b66a066f9530f4a5.png"></div></div></div><br><p>  In this case, to generate the resultant wave, it is necessary to accurately transform the normal of each phase, taking into account the amplitude of the wave, its phase, as well as the scaling factor chosen above. </p><br><h3 id="dopolnitelnaya-optimizaciya">  Additional optimization </h3><br><p>  Despite the performed optimizations, we still have a sample of 7 textures and we would like to reduce this number.  As mentioned earlier, reducing this number in general is not desirable. </p><br><p>  However, we keep the shape of the waves in texture, in which we can generate several phases at once instead of one phase. </p><br><div class="spoiler">  <b class="spoiler_title">Overclocked elevation map</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/c85/304/6cf/c853046cf277423e8eca8bd83f347f92.png"></div></div><br><p>  This solves the problem of generating a multitude of waves with a small number of passes, however during animation it becomes noticeable that some of the waves move at the same speed.  To reduce this effect, you can save the waves with a larger phase difference, for example, 1 - 3 - 5, while rendering we get 1-1'-3-3'-5-5 '.  We also used the approach in which the first two phases of the four used one texture, and the last two already had the other with a different distribution and number of phases.  This is the way to get the image shown at the beginning of the post. </p><br><h3 id="nedostatki-metoda">  Disadvantages of the method </h3><br><ul><li>  The main technical problem is that to obtain waves, it is necessary to have a possibility of <a href="https://www.khronos.org/opengl/wiki/Vertex_Texture_Fetch">sampling from the texture in the vertex shader</a> .  Technically, this is supported with Opengl ES 2.0, but not all smartphones provide this functionality. </li><li>  The need for careful selection of parameters to hide the artifacts of the method and get an attractive image. </li><li>  The resulting sea is periodic in nature and this limits the scope of application.  When flying high above the surface, periodicity catches the eye. </li></ul><br><h3 id="esche-nemnogo-pro-optimizaciyu">  A little more about optimization </h3><br><p>  In addition to the methods described above, we tested several other optimization options.  The most interesting of them seemed to us interpolation of waves in time. </p><br><p>  The meaning of this method is that we can render the resulting map of heights and normals at certain points in time into texture, and interpolate heights and normals for others. <br>  Thus, once every N frames, a full calculation of the surface is required, and an N-1 frame can be considered by simply sampling from two textures. </p><br><p>  In this case, it turns out that one wave decreases and the next one appears next.  As N decreases, the animation becomes smoother, although the effectiveness of the method decreases. <br>  Thus, it can be quite effectively used in certain conditions, for example, at a low wave velocity or at a relative distance from the surface, when the lack of a method becomes less noticeable. </p><br><h3 id="liniya-gorizonta">  Skyline </h3><br><p>  At the moment we have got quite viable and pretty water, but we didn‚Äôt discuss which grid we would use for the surface of the water.  Obviously, to display water to the horizon line, we actually have to use an infinitely large mesh of points (at least stretch it to the clipping plane of the camera), while the number of points in it is very limited).  Simple linear scaling does not work, because near the camera the mesh becomes too rarefied, and in the vicinity of the horizon, on the contrary, it is too thick. </p><br><p>  The easiest way to solve this problem is to scale the mesh in the vertex shader depending on the distance to the camera.  The disadvantage is quite obvious - it is difficult to choose the necessary parameters, and the resulting distribution of points will also still be uneven. </p><br><p>  Another option is to use a mesh with different details depending on the distance.  But this may lead to jerks when changing the level of detail, and also requires the introduction of additional logic to control these levels. </p><br><h3 id="proeciruemaya-setka">  Projected Mesh </h3><br><p>  The most convenient is the use of the <a href="http://habib.wikidot.com/projected-grid-ocean-shader-full-html-version">projected Grid</a> method, which can generally be described as follows: </p><br><ul><li>  A uniform flat mesh is created, in coordinates [-1..1], always located in the camera space. </li><li>  In the vertex shader, this grid is projected on a horizontal plane. </li><li>  For the obtained point, all calculations are performed to display the water. </li></ul><br><p>  As an analogy, you can imagine a slide with dots attached to a spotlight (camera).  Where the shadow from the point falls on the plane and the desired point is located.  At the same time, from the point of location of the camera, the observer will see the same uniform grid. </p><br><p>  This method has several advantages: </p><br><ul><li>  The resulting mesh is uniform and allows you to easily change its size. </li><li>  Not costly performance method.  For correct calculation, one multiplication and addition of vectors in the vertex shader is enough </li></ul><br><h2 id="raschet-osvescheniya">  Lighting calculation </h2><br><p>  The basis for obtaining the correct image is the correct accounting of all components of the light flux - reflected light, light scattered in the water column, glare from the sun, etc. <br>  In general, this is a non-trivial task, but in our case we used a simpler approach, since  there was no need to display the bottom surface, caustics and others. </p><br><p>  A detailed description of the calculation of lighting will not be, because  There are many detailed articles on this subject (for example, <a href="https://habibs.wordpress.com/water-mathematics/">here</a> , <a href="http://cdn.imgtec.com/sdk-documentation/Shader%2BBased%2BWater%2BEffects.Whitepaper.pdf">here</a> ).  I would just like to note the need to choose the "right" formula for calculating the Fresnel coefficient. </p><br><p>  In the first version of the shader, we could not achieve realistic-looking water.  The result was more like drawn or plastic water.  It turned out that we used the most primitive version to calculate the Fresnel coefficient: </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mn>1</mn><mo>&amp;#x2212;</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.267ex" height="2.66ex" viewBox="0 -832 4420.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-63" x="1723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-6F" x="2156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-73" x="2642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-28" x="3111" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-61" x="3501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-29" x="4030" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mn>1</mn><mo>‚àí</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> 1-cos (a) </script></p><br>  .  At the same time, replacing the formula with <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>R</mi><mn>0</mn></msub><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><msub><mi>R</mi><mn>0</mn></msub><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>&amp;#x2212;</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo stretchy=&quot;false&quot;>)</mo><msup><mo stretchy=&quot;false&quot;>)</mo><mn>5</mn></msup><mo>,</mo><msub><mi>R</mi><mn>0</mn></msub><mo>=</mo><mn>0.04</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.504ex" height="3.021ex" viewBox="0 -987.6 16578.2 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-30" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2B" x="1435" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-28" x="2436" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-31" x="2825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2212" x="3548" y="0"></use><g transform="translate(4549,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-30" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-29" x="5762" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-28" x="6152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-31" x="6541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2212" x="7264" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-63" x="8265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-6F" x="8698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-73" x="9184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-28" x="9653" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-61" x="10043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-29" x="10572" y="0"></use><g transform="translate(10962,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-35" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2C" x="11805" y="0"></use><g transform="translate(12250,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-30" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-3D" x="13741" y="0"></use><g transform="translate(14798,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-30" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/simbirsoft/blog/336998/&amp;xid=17259,15700021,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgV6_lPeQ9tQqXs-PHUl60NKFdx6w#MJMAIN-34" x="1279" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>R</mi><mn>0</mn></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><msub><mi>R</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mn>1</mn><mo>‚àí</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>5</mn></msup><mo>,</mo><msub><mi>R</mi><mn>0</mn></msub><mo>=</mo><mn>0.04</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> R_0 + (1-R_0) (1-cos (a)) ^ 5, R_0 = 0.04 </script></p><br>  significantly improved the realism of water.  Other approximations for the Fresnel coefficient can be found <a href="http://steps3d.narod.ru/tutorials/fresnel-tutorial.html">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2 id="rezultaty">  results </h2><br><p>  We have implemented the above water simulation method in Unity3D.  We used explicit vertex and fragment shaders to calculate the lighting and create the waveform (it could be implemented on <a href="https://docs.unity3d.com/Manual/SL-SurfaceShaders.html">surface</a> shaders, but this does not play a fundamental role).  When testing for android smartphones, we received from 25 fps (Adreno 405 + MediaTek MT6735P) to 45 (Adreno 505 + Snapdragon 430).  On the part of smartphones, as expected, the application did not work due to the lack of support for <a href="https://www.khronos.org/opengl/wiki/Vertex_Texture_Fetch">reading from the texture in the vertex shader</a> .  It is interesting to note that the calculation of the illumination as a result turned out to be comparable to the complexity with the generation of waves.  If necessary, you can raise fps by using other models of lighting or turning off some of the elements as the environment map, glare, etc. </p><br><div class="spoiler">  <b class="spoiler_title">The final image + animation</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/90d/f2c/30a/90df2c30a2d74061a09e6222e8be48a8.png"><br><p>  Animations with 7 phases of waves </p><br><img src="https://habrastorage.org/web/962/5cc/997/9625cc9976bc4dcd84b2eceea19224dc.gif"><br><p>  <a href="https://www.youtube.com/watch%3Fv%3D4zydgSCkh24">Youtube</a> </p><br><p>  4 Phase Animations </p><br><img src="https://habrastorage.org/web/74d/9be/de3/74d9bede3c8546d3b600762150cb5f58.gif"><br><p>  <a href="https://www.youtube.com/watch%3Fv%3DaIRhtn4om1w">Youtube</a> </p></div></div></div><p>Source: <a href="https://habr.com/ru/post/336998/">https://habr.com/ru/post/336998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336982/index.html">EWD: Substitution Processes</a></li>
<li><a href="../336984/index.html">Position selection procedure</a></li>
<li><a href="../336988/index.html">Programming Contest: JSDash (Results)</a></li>
<li><a href="../336992/index.html">Mobile Applications Testing Cheat Sheet</a></li>
<li><a href="../336994/index.html">Getting rid of fragment state saving libraries using pure kotlin</a></li>
<li><a href="../337000/index.html">History of predictions of transitions from 1 500 000 BC. till 1995</a></li>
<li><a href="../337002/index.html">Kotlin aftertaste, part 2</a></li>
<li><a href="../337004/index.html">Andrei Ershov about the evolution of Future in Java and Scala on jug.msk.ru</a></li>
<li><a href="../337006/index.html">Microsoft Excel add-in development using Excel-DNA library</a></li>
<li><a href="../337008/index.html">Ansible Dynamic Inventory from DNS or how to waste time searching for standards</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
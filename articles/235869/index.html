<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write under TSD. Connecting a barcode scanner as a form component</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is not a secret for anyone that industrial software for data collection terminals (TSD) is written to automate business processes, especially wareh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write under TSD. Connecting a barcode scanner as a form component</h1><div class="post__text post__text-html js-mediator-article">  It is not a secret for anyone that industrial software for data collection terminals (TSD) is written to automate business processes, especially warehouse ones.  Most of the tasks that need to be solved with the help of the TSD are related to barcoding, since the barcode scanner is built into the device. <br>  This article will discuss how to start writing programs for data collection terminals, and how to connect and use a barcode scanner. <br><br><img src="https://habrastorage.org/files/cd9/19c/f04/cd919cf04d17444c81ff3dc616f03d1b.jpg"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      My experimental model Motorola MC3190 has a laser barcode scanner.  (In the near future I plan to do a tight Datalogic c imager). <br><br>  For those interested, you can <a href="http://www.motorolasolutions.com/web/Business/Products/Mobile%2520Computers/Handheld%2520Computers/_Documents/MC3100-Spec-Sheet-1009.pdf">familiarize yourself with the specification</a> . <br><br>  The device has Windows CE installed, respectively, and it will be necessary to write for it.  And if you have never tried to write under the TSD, of course, you should start with Hello World.  To run an application written in C # on this device, you need to install .NET 3.5 Compact on it.  And also have Visual Studio 2008 on hand, since in all subsequent releases the Smart Device project version is missing (small-scale ones like to impose their new technologies, which, unfortunately, are not always compatible with earlier versions of their operating system). <br><br><img src="https://habrastorage.org/files/204/d8d/a9b/204d8da9bea94d08ad2ac9da55ab2489.PNG" width="600"><br><br>  So, having created a simple application, you can try to start it immediately.  If the device is connected to a computer, the studio will immediately offer to launch it directly on it, with the possibility of debugging, of course.  After waiting a few minutes, you can see the launch of the molds on the device. <br><br><img src="https://habrastorage.org/files/585/e00/764/585e007646d843928ea131a86f3c4f6a.PNG" width="600"><br><img src="https://habrastorage.org/files/065/7d4/e8d/0657d4e8d8f9499894c776a763ef99c0.jpg" width="400"><br><br>  Now you can get down to the most interesting. <br><br>  In order to use the object model already implemented in C #, Motorola has prepared a number of libraries.  In fact, with the help of them you can create whatever we want.  This miracle is called Symbol.  In our case, Symbol.Barcode will be used.  Unfortunately, at the moment, the official site of the symbol.com library redirects us to motorolasolutions.com, reporting that the technology is outdated.  But I once made copies of all Reference with examples: <br><br>  <a href="">cloud.mail.ru/public/6716403f96ac%2FSymbolReference.7z</a> <br>  <a href="">cloud.mail.ru/public/c48120476007%2FSymbolExample.7z</a> <br><br>  In the examples, those who are interested can, of course, rummage, but I can immediately warn you that there are articles <a href="http://kbss.ru/blog/dotnetcf/178.html">describing</a> everything much easier and more convenient, in my opinion, the best among them: <a href="http://kbss.ru/blog/dotnetcf/178.html">kbss.ru/blog/dotnetcf/178.html</a> .  But, nevertheless, I believe that connecting the barcode scanner is not very convenient every time, especially if the application is planned to be multi-windowed.  In addition, in some cases, there may be problems with reading when the focus returns to the parent window from the child. <br><br>  Of all that can be found on the Internet, the main thing to realize is that the most convenient way to handle bar codes is a model built on the events: <br>  1. The barcode scanner worked. <br>  2. Recognized the barcode correctly. <br>  3. We trigger the event of processing this barcode in our program, which has already been disassembled and convenient for perception. <br><br>  The form component is a pattern that allows you to add your control to the form designer of the studio.  We will use this.  And not only because it will simplify the development of forms, but also because in the future the component can be further developed so that it supports scanners not only from Motorol `s. <br><br><img src="https://habrastorage.org/files/de0/56b/d50/de056bd509ac4de996c91d6e9f30fd00.png" width="600"><br><br>  Then you need to describe the component class. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BarcodeReader</span></span> : <span class="hljs-title"><span class="hljs-title">Component</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Symbol.Barcode.BarcodeReader barcodeReader = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnReadBarcodeReaderEventHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Text</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> OnReadBarcodeReaderEventHandler OnRead; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BarcodeReader</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { InitializeComponent(); InitializeBarcodeReader(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BarcodeReader</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IContainer container</span></span></span><span class="hljs-function">)</span></span> { container.Add(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); InitializeComponent(); InitializeBarcodeReader(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeBarcodeReader</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.barcodeReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Symbol.Barcode.BarcodeReader(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.barcodeReader.ListChanged += <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.ComponentModel.ListChangedEventHandler(BarcodeReader_ListChanged); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.barcodeReader.Start(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.components.Add(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.barcodeReader); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BarcodeReader_ListChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, System.ComponentModel.ListChangedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.barcodeReader.ReaderData.Result == Symbol.Results.SUCCESS) { OnRead(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.barcodeReader.ReaderData.Text); } } }</code> </pre> <br><br>  What you should pay attention to here: <br>  1. Any event that is added to the component becomes available in the form designer. <br>  2. Based on IContainer container, the form designer implements a memory freeing mechanism, including unmanage objects.  Accordingly, it is a sin not to use it.  We add a barcode reader object to the container, and the memory is released recursively, when the form is closed, which contains the component described here. <br>  // <br>  How this happens can be understood by opening the designer with any of the forms created in the constructor, and looking at the overload: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> System.ComponentModel.IContainer components = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Clean up any resources being used. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="disposing"&gt;</span></span></span><span class="hljs-comment">true if managed resources should be disposed; otherwise, false.</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> protected override void Dispose(bool disposing) { if (disposing &amp;&amp; (components != null)) { components.Dispose(); } base.Dispose(disposing); }</span></span></code> </pre><br>  // <br>  3. We slightly redefine the read event, freeing ourselves from processing the data read with errors. <br><br>  Then it‚Äôs easy to do: drag the component onto the form: <br><br><img src="https://habrastorage.org/files/eec/48f/b10/eec48fb10a014c21850d8bcc1a35b5a8.png" width="600"><br><br>  And add a barcode processing event: <br><br><img src="https://habrastorage.org/files/b59/2f8/ae8/b592f8ae824340c385d3bb9c4f743da2.png" width="600"><br>  To make sure that the following code is more than enough: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">barcodeReader1_OnRead</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Text</span></span></span><span class="hljs-function">)</span></span> { MessageBox.Show(Text); }</code> </pre><br><br>  It turned out a bit messy, and a lot of screenshots.  Repeating the above steps, you will learn three things at once: <br><br>  1. Create and run in debug mode programs for data collection terminals. <br>  2. Understand how to work with a barcode scanner. <br>  3. Learn how to create form components. <br><br>  I hope this article will help those who have just begun to deal with programming under the TSD, and will somewhat simplify the lives of these people. <br><br>  <a href="https://github.com/zeegin/BarcodeReaderFormComponentExample">github example</a> </div><p>Source: <a href="https://habr.com/ru/post/235869/">https://habr.com/ru/post/235869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235855/index.html">Two beautiful tasks on algorithms</a></li>
<li><a href="../235857/index.html">Official announcement of MEGAsync client for Linux</a></li>
<li><a href="../235861/index.html">Preparing for the exam on computer science in 1C: Club programmers</a></li>
<li><a href="../235863/index.html">How we conducted the Summer School for High Performance Computing</a></li>
<li><a href="../235867/index.html">How we made a studio to record online courses</a></li>
<li><a href="../235873/index.html">Bold AngularJS for Team Development [1/2]</a></li>
<li><a href="../235875/index.html">WebMoney updated interfaces</a></li>
<li><a href="../235877/index.html">Physical and biological satellites of the series "Foton" and "Bion"</a></li>
<li><a href="../235879/index.html">Senseit L301 - when the smartphone takes care of you</a></li>
<li><a href="../235881/index.html">ESP8266: A Revolution in the Internet of Things</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HBrom control panel based on HMI from Advantech</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Your browser does not support HTML5 video. 
 Video: admin Habrom control panel. Allows you to adjust karma, rating, and ban users. 

 TL; DR: in the a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HBrom control panel based on HMI from Advantech</h1><div class="post__text post__text-html js-mediator-article"><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Your browser does not support HTML5 video. <source src="https://zhovner.com/forever/webop_habr_control_audio.mp4" type="video/mp4"></video></div></div></div><br>  <font color="999999">Video: admin Habrom control panel.</font>  <font color="999999">Allows you to adjust karma, rating, and ban users.</font> <br><br>  <b>TL; DR:</b> in the article I will try to create a comic Habrom control panel using the Webaccess / HMI Designer industrial interface development environment and the WebOP terminal. <br><br>  The human-machine interface (English Human-machine interface, HMI) is a set of systems for human interaction with controlled machines.  Usually this term is used for industrial systems in which there is an operator and control panel. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>WebOP</b> is a standalone industrial terminal for creating human-machine interfaces.  Used to create production control panels, monitoring systems, control rooms, smart home controllers, etc.  It supports direct connection to industrial equipment, can work as part of a SCADA system. <br><br><a name="habracut"></a><br><h2>  WebOP terminal - hardware </h2><br><br><img align="left" width="300" src="https://habrastorage.org/webt/lx/it/jb/lxitjb27xg6wlrwcfkrintlebdc.jpeg">  The WebOP terminal is a low-power computer based on an ARM processor, in a single package with a monitor and touchscreen, designed to launch a program with a graphical interface created in the HMI Designer.  Depending on the model, the terminals have on board various industrial interfaces: RS-232/422/485, CAN bus for connecting to car systems, USB Host port for connecting additional peripherals, USB Client port for connecting the terminal to a computer, audio input and audio output , microSD card reader for non-volatile memory and transfer settings. <br><br>  The devices are positioned as a budget replacement for all-in-one computers, for tasks that do not require powerful processors and resources of a full-fledged desktop computer.  WebOP can operate as a stand-alone terminal for control and data input / output, paired with other WebOPs, or as part of a SCADA system. <br><br><img src="https://habrastorage.org/webt/i7/sf/w9/i7sfw9jlwldmdj7laj0aepompxo.png"><br>  <font color="9999999">WebOP terminal can connect directly to industrial devices</font> <br><br><h2>  Passive cooling and IP66 protection </h2><br>  Due to the low heat generation, some WebOP models are made completely without active air cooling.  This allows devices to be mounted on objects that are critical to the noise level, and reduces the amount of dust that falls inside the case. <br><br>  The front panel is made without gaps and joints, has a level of protection IP66, and allows direct ingress of water under pressure. <br><br><img src="https://habrastorage.org/webt/ec/cf/re/eccfreahsjr_0x2cyz5vkjip6hq.jpeg"><br>  <font color="999999">The back of the terminal WOP-3100T</font> <br><br><h2>  Non-volatile memory </h2><br>  To prevent data loss, there is 128KB of non-volatile memory in WebOP, with which you can work the same way as with RAM.  It can store meter readings and other critical data.  In the event of a power failure, the data will be saved and restored after a reboot. <br><br><h2>  Remote update </h2><br>  The program running on the terminal can be updated remotely via an Ethernet network or via RS-232/485 serial interfaces.  This simplifies maintenance, as it eliminates the need to bypass all terminals for software updates. <br><br><h2>  Webop models </h2><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/kq/rb/z0/kqrbz0qzsc_uvyisefircw_pstc.png"></div><br>  <a href="https://www.advantech.ru/products/56---7-display/sub_c78fffcd-ed3e-431b-8d7e-e12efb1bc235%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D2000t">Series 2000T</a> - the most affordable devices built on the basis of the real-time operating system HMI RTOS.  The series is represented by WebOP- <a href="https://www.advantech.ru/products/c78fffcd-ed3e-431b-8d7e-e12efb1bc235/webop-2040t/mod_6283d40e-e445-41f8-a677-27f365f1d810%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D2040t">2040T</a> / <a href="https://www.advantech.ru/products/c78fffcd-ed3e-431b-8d7e-e12efb1bc235/webop-2070t/mod_ad10be68-6941-40da-94a4-48f2f7897cfa%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D2070t">2070T</a> / <a href="https://www.advantech.ru/products/c78fffcd-ed3e-431b-8d7e-e12efb1bc235/webop-2080t/mod_534d360c-75e0-44b3-8795-19815a4ed42c%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D2080t">2080T</a> / <a href="https://www.advantech.ru/products/c78fffcd-ed3e-431b-8d7e-e12efb1bc235/webop-2100t/mod_a21c14ac-e932-43b2-8821-c25a8e2996ba%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D2100t">2100T models</a> , with a screen diagonal of 4.3 inches, 7 inches, 8 inches and 10.1 inches, respectively. <br><br><img src="https://habrastorage.org/webt/ga/hd/-n/gahd-n3yvkdcyf_rdruge4nw4hu.png"><br>  <a href="https://www.advantech.ru/products/web-browser-terminal/sub_c694764c-8821-4d8b-96b0-c988dd76bc26%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D3000t">Series 3000T</a> - more advanced models based on the operating system Windows CE.  They differ from the 2000T series by a large number of hardware interfaces and have a CAN interface on board.  The devices operate in an extended temperature range (-20 ~ 60 ¬∞ C) and have antistatic protection (Air: 15KV / Contact: 8KV).  The line fully meets the requirements of the IEC-61000 standard, which allows the use of devices in semiconductor manufacturing, where static discharges are a problem.  The series is represented by WebOP- <a href="https://www.advantech.ru/products/c694764c-8821-4d8b-96b0-c988dd76bc26/webop-3070t/mod_f9317a68-1727-4c41-8b4a-eacaab57f759%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D3070t">3070T</a> / <a href="https://www.advantech.ru/products/c694764c-8821-4d8b-96b0-c988dd76bc26/webop-3100t/mod_fee9f8ef-7d9a-48da-b5f3-d62f1f99161e%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D3100t">3100T</a> / <a href="https://www.advantech.ru/products/c694764c-8821-4d8b-96b0-c988dd76bc26/webop-3120t/mod_46d0a793-ee9e-4ce6-b0fd-6dc13f019436%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D3120t">3120T</a> , with a screen diagonal of 7 inches, 10.1 inches and 12.1 inches, respectively. <br><br><h2>  WebAccess Development Environment / HMI Designer </h2><br>  Out of the box, the WebOP terminal is just a low-power ARM computer on which you can run any software, but the whole essence of this solution is in the proprietary development environment of industrial WebAcess / HMI interfaces.  The system consists of two components: <br><br><ul><li>  <b>HMI Designer</b> - an environment for developing interfaces and programming logic.  Works under Windows on a computer programmer.  The final program is compiled into one file and transmitted to the terminal for runtime.  The program is available in Russian. </li><li>  <b>HMI Runtime</b> - runtime to run the compiled program on the terminal.  It can work not only on WebOP terminals, but also on Advantech UNO, MIC computers, and common desktop computers.  There are versions of runtime under Linux, Windows, Windows CE. </li></ul><br><img src="https://habrastorage.org/webt/pc/5v/uq/pc5vuqpsp7hrddzwaou74jkfxpg.png"><br><br><h3>  Hello world - creating a project </h3><br>  Let's start creating a test interface for our Habrom control panel.  I will run the program on the <a href="https://www.advantech.ru/products/c694764c-8821-4d8b-96b0-c988dd76bc26/webop-3100t/mod_fee9f8ef-7d9a-48da-b5f3-d62f1f99161e%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3Dwebop%26utm_content%3D3100t">WebOP-3100T</a> terminal running WinCE.  First, create a new project in the HMI Designer.  To run the program on WebOP, it is important to choose the correct model, the format of the final file will depend on it.  In this step, you can also select the desktop architecture, then the final file will be compiled under the X86 runtime. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/getpro/habr/post_images/35d/742/6d0/35d7426d0e9c5ad8852d2972ab086fdd.png"></div><br>  <font color="99999">Creating a new project and choosing the architecture</font> <br><br>  The choice of the communication protocol by which the compiled program will be loaded into WebOP.  At this step, you can select a serial interface, or specify the terminal IP address. <br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/tw/nq/xg/twnqxgcq0jnle801dsknwpxwq1k.png"></div><br><br>  Interface to create a project.  In the left part there is a tree diagram of the components of the future program.  While we are only interested in the Screens item, these are directly screens with GUI elements that will be displayed on the terminal. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/md/ps/hr/mdpshrpqggd2uwjrojqpvvdzcl8.png"></div><br><br>  To begin with, we will create two screens with the text ‚ÄúHello World‚Äù and the ability to switch between them using buttons.  To do this, we will add a new Screen # 2 screen, and on each screen we will add a text element and two buttons to switch between screens (Screen Buttons).  Each button is set to switch to the next screen. <br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/cf/fi/sv/cffisvhro8epfo5ybycpdcdyxxu.png"></div><br>  <font color="99999">Interface settings button to switch between screens</font> <br><br>  The ‚ÄúHello World‚Äù program is ready; now you can compile and run it.  At the compilation stage there may be errors in case of incorrectly specified variables or addresses.  Any error is considered fatal, the program will be compiled only in the absence of errors. <br>  The environment provides the ability to simulate the terminal so that you can debug the program on the computer locally.  There are two types of simulation: <br><br><ul><li>  <b>Online simulation</b> - all external data sources specified in the program will be used.  These can be <abbr title="device communication with the object">CCO</abbr> or devices connected via serial interfaces or Modbus TCP. </li><li>  <b>Offline simulation</b> - simulation without the use of external devices. </li></ul><br>  While we have no external data, we use offline simulation, having previously compiled the program.  The final program will be located in the project folder, with the name <b>ProjectName_Program Name.px3</b> <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/se/cp/kr/secpkrlcsrrk9rsv8bcciynophy.png"></div><br>  The program launched in the simulation can be controlled by the mouse cursor just as it would happen on the touchscreen of the WebOP terminal.  We see that everything works as planned.  Fine. <br>  To download the program to the physical terminal, simply click the Download button.  But since I did not configure the terminal connection to the development environment, you can simply transfer the file using a USB flash drive or microSD memory card. <br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/de/8z/8n/de8z8nefdsiwaohista1h_m-5ww.gif"></div><br>  The program interface is intuitive, I will not begin to disassemble each graphic block.  Creating backgrounds, shapes, text will be clear to anyone who has used programs similar to Word.  Creating a graphical interface does not require programming skills, all elements are added by dragging the mouse onto the form. <br><br><h2>  Work with memory </h2><br>  Now, when we are able to create graphic elements, we will study the work with dynamic content and scripting language.  Create a bar chart with the display of data from the variable <b>U $ 100</b> .  In the chart settings, select the data type: 16-bit integer, and the range of values ‚Äã‚Äãof the chart: from 0 to 10. <br><br><img src="https://habrastorage.org/webt/s9/mk/md/s9mkmddeqv7vmsey6l2wvmtffuy.png"><br><br>  The program supports scripting in three languages: VBScript, JavaScript and its own language.  I will use the third option, because for it there are examples in the documentation and automatic syntax help right in the editor. <br><br>  Add a new macro: <br><br><img width="250" src="https://habrastorage.org/webt/87/bg/9b/87bg9bpo3zqjbcl6wq3rwpf2tau.png"><br><br>  We write simple code to gradually change the data in a variable that can be traced in the diagram.  We will add 10 to the variable, and reset it when it is greater than 100. <br><br><pre><code class="plaintext hljs">$U100=$U100+10 IF $U100&gt;100 $U100=0 ENDIF</code> </pre> <br>  To run the script in a loop, set it in the General Setup settings as Main Macro, with a run interval of 250ms. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/gm/cs/lu/gmcslupd_exzgpl5bjj6omaq6f4.png"></div><br>  Compile and run the program in the simulator: <br><br><img src="https://habrastorage.org/webt/i9/cv/d8/i9cvd8ew12qprxiate32jyydyew.gif"><br><br>  At this stage, we learned to manipulate the data in memory and display it in a visual form.  This is already enough to create a simple monitoring system, receiving data from external devices (sensors, controllers) and writing them into memory.  Different data display units are available in the HMI Designer: in the form of circular dials with arrows, various charts, graphs.  Using JavaScript scripts, you can implement the download of data from external sources via HTTP. <br><br><h2>  Habrom control panel </h2><br>  Using the acquired skills, let's make a comic interface of the Habrom control panel. <br><br><div style="text-align:center;"><img width="600" src="https://habrastorage.org/webt/jn/j2/d4/jnj2d46lsqgprhyrfbqoavk65my.jpeg"></div><br><br>  Our remote should be able to: <br><br><ul><li>  Switch user profiles </li><li>  Store data karma and rating </li><li>  Change karma and rating values ‚Äã‚Äãwith sliders </li><li>  When you click the ‚Äúbanned‚Äù button, the profile should be marked as banned, the avatar should be changed to strikethrough </li></ul><br>  Each profile will be displayed on a separate page, so we will create a page for each profile.  Karma and rating will be stored in local variables in memory, which will be initialized using Setup Macro when the program is started. <br><br> <a href=""><img src="https://habrastorage.org/webt/ek/rh/ic/ekrhicsqjotcanzgpq0og0svhxu.png"></a> <br>  <font color="999999">The picture is clickable</font> <br><br><h3>  Adjusting karma and rating </h3><br>  To adjust the karma we will use the slider (Slide Switch).  As a record address, specify the variable that is initialized in the Setup Macro.  We will limit the range of the slider values ‚Äã‚Äãfrom 0 to 1500. Now, as the slider moves, new data will be recorded in memory.  In this case, the initial state of the slider will correspond to the values ‚Äã‚Äãof the variable in memory. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/e2/cw/dc/e2cwdcmgzpygxrylqkcmjv1jpog.png"></div><br>  To display the numerical values ‚Äã‚Äãof karma and rating we will use the element Numeric display.  The principle of its operation is similar to the diagram from the example program ‚ÄúHello World‚Äù; we simply indicate the address of the variable in the Monitor Address. <br><br><h3>  Button "ban" </h3><br>  The "ban" button is implemented using the Toggle Switch element.  The principle of data storage is similar to the examples above.  In the settings you can choose a different text, color or image, depending on the state of the button. <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/i1/zs/5t/i1zs5toqcuyiqz_othub0ls0wk4.png"></div><br>  At the time of pressing the button, the avatar should be crossed out in red.  This is easily accomplished using the Picture Display block.  It allows you to set several images associated with the state of the Toggle Switch button.  For this, the block indicates the same address as the block with the button, and the number of states.  Similarly, the picture is configured with nameplates under the avatar. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/sw/6v/q8/sw6vq8bdfx1ucdntuquowja93-0.gif"></div><br><h2>  Conclusion </h2><br>  Overall, I liked the product.  Earlier, I had experience using a tablet on Android for similar tasks, but developing an interface for it is much more complicated, and browser APIs do not allow full access to the peripherals.  One WebOP terminal can replace a bundle of Android-tablet, computer and controller. <br><br>  HMI Designer, despite the archaic design, is content advanced.  Without much programming skills, you can quickly jot down a working interface.  The article does not cover all graphic blocks, which are very numerous there: animated pipes, cylinders, graphs, toggle switches.  It out of the box supports many popular industrial controllers, contains database connectors. <br><br><h2>  Links </h2><br>  WebAccess / HMI Designer and Runtime can be downloaded <a href="https://www2.advantech.com/webop/downloads.aspx">here.</a> <br><br>  ‚Üí <a href="">Sources of Habrom control panel project</a> </div><p>Source: <a href="https://habr.com/ru/post/449408/">https://habr.com/ru/post/449408/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449390/index.html">Benchmarking Emeli</a></li>
<li><a href="../449392/index.html">Getting statistics for all clients from the Yandex Direct API API in the context of days using Python</a></li>
<li><a href="../449398/index.html">Mikhail Larionov, Circles.is: about a Facebook career, entrepreneurship, community building and product thinking</a></li>
<li><a href="../4494/index.html">Nigma will receive 9 million rubles of financing</a></li>
<li><a href="../44940/index.html">Web 4.0 - Internet of Things</a></li>
<li><a href="../44941/index.html">Roman Cortez knows what he is doing</a></li>
<li><a href="../449410/index.html">Interview: Swift. Questions and answers</a></li>
<li><a href="../449412/index.html">What does the consumer community do to destroy open source software?</a></li>
<li><a href="../449414/index.html">Aboriginal microbes of the vagina</a></li>
<li><a href="../449416/index.html">Create from scratch your own neural network in Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
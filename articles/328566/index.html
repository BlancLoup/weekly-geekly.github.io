<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MIPS SIMD technology and Baikal-T1 processor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Colleagues from Baikal Electronics offered to work with the processor Baikal-T1 [ L1 ] and write about their impressions. For them, this is a way to t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MIPS SIMD technology and Baikal-T1 processor</h1><div class="post__text post__text-html js-mediator-article"><p>  Colleagues from Baikal Electronics offered to work with the processor Baikal-T1 [ <a href="http://www.baikalelectronics.ru/products/T1/">L1</a> ] and write about their impressions.  For them, this is a way to tell developers about the capabilities and features of their processor.  For me, a chance to get a closer look at the system on a modern processor core and in the future to invent fewer ‚Äúbicycles‚Äù, adding, for example, new functionality to the MIPSfpga-plus [ <a href="https://github.com/MIPSfpga/mipsfpga-plus">L2</a> ] project.  Well, the usual engineering curiosity, again ... </p><br><p>  Today we will discuss the vector expansion of the MIPS SIMD architecture, which is available in the MIPS Warrior P-class P5600 [ <a href="https://www.imgtec.com/mips/warrior/p-class-p5600-multiprocessor-core/">L3</a> ] cores, which means it is also present in the Baikal-T1 processor.  The article is aimed at novice developers. </p><br><p><img src="https://habrastorage.org/web/0e8/94d/2bc/0e894d2bc32d46f6afd5fa80ba3bee20.png"></p><a name="habracut"></a><br><h2 id="vvedenie">  Introduction </h2><br><p>  Practically always with the development of a device (device / hardware / software and hardware complex, etc.) is associated with the solution of the problem of processing digital and analog signals.  Input may include sensor readings, signals from I / O devices, information from a file on a disk, etc.  At the output: the image on the monitor, the sound from the speakers, the drive control signals, the indications of the indicators on the dashboard, etc. A "between" input and output - a set of certain mathematical operations. </p><br><p>  If we briefly list the ways to implement this "mathematics in hardware", we get the following list of tools available to the developer, which can be applied both together and separately: </p><br><ul><li>  implementation in the form of an analog circuit. </li><li>  software implementation on a microcontroller. </li><li>  FPGA implementation </li><li>  software and hardware implementation as a system on a chip </li><li>  use of digital signal processor </li><li>  software implementation on a general purpose processor </li><li>  using a graphics controller </li></ul><br><div class="spoiler">  <b class="spoiler_title">The same list, but in more detail</b> <div class="spoiler_text"><ul><li><p>  <strong>implementation as an analog circuit</strong> <br>  Despite the dominance of digital devices, the world and the human senses still remain analog.  Whether we like it or not, but even processing the information ‚Äúexclusively‚Äù in a figure, we still have to set up a filter before entering the ADC.  Similarly, integrators, differentiators, adders, etc. can be implemented on analog components.  Over the decades of the dominance of analog electronics, engineers have accumulated vast experience in solving various problems and a good developer (even if digital electronics) takes into account this legacy [ <a href="https://www.google.ru/search%3Fq%3D%25D1%2582%25D0%25B8%25D1%2582%25D1%2586%25D0%25B5%2B%25D1%2588%25D0%25B5%25D0%25BD%25D0%25BA%2B%25D0%25BF%25D0%25BE%25D0%25BB%25D1%2583%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B4%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F%2B%25D1%2581%25D1%2585%25D0%25B5%25D0%25BC%25D0%25BE%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0">D1</a> ]; </p><br></li><li><p>  <strong>software implementation on a microcontroller</strong> <br>  The processed signals are few, and the mathematics is not complicated or not demanding of resources?  In this case, a relatively inexpensive microcontroller with its ADC, low frequency of operation, energy saving capabilities is quite an option.  If necessary, bottlenecks can be written in assembler; </p><br></li><li><p>  <strong>FPGA implementation</strong> <br>  If we have high requirements for speed, parallelism, scaling solutions, then we describe mathematics in the form of a module on Verilog or VHDL, choose FPGA, which can work at the frequency necessary for processing.  If the solution turns out to be very successful and there will be a sense in its wide replication - welcome to the world of ASIC [ <a href="http://silicon-russia.com/public_materials/2016_11_04_one_day_mipsfpga_connected_mcu_materials_public_for_the_website/04_present_nanometer_asic_seminar/">L3</a> ]; </p><br></li><li><p>  <strong>software and hardware implementation as a system on a chip</strong> <br>  The system is too complicated to describe it entirely on Verilog, I want to program separate logic in a high-level language, and indeed, to manage everything from Linux?  In this case, a solution for us is SoC (System-on-a-Chip, SoC): we take a ready-made processor core (Nios II, MIPSfpga, etc.) and hang it with the necessary peripheral modules, among which will be our special, performing cunning mathematics.  Some operations can be made available in the form of processor commands [ <a href="https://habrahabr.ru/post/276205/">L4</a> ].  And yes, in perspective this can also be implemented in ASIC; </p><br></li><li><p>  <strong>use of a digital signal processor (DSP)</strong> <br>  Here we are, in fact, buying a ready-made chip with a processor core, its own set of peripherals and a set of commands specifically targeted at high-speed digital signal processing.  Around her, we are building our decision [ <a href="https://ru.wikipedia.org/wiki/%25D0%25A6%25D0%25B8%25D1%2584%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B9_%25D1%2581%25D0%25B8%25D0%25B3%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580">L10</a> , <a href="">L5</a> ]; </p><br></li><li><p>  <strong>software implementation on a general purpose processor</strong> <br>  Each processor manufacturer offers its own architectural solutions to optimize the performance of certain mathematical operations.  And the task of the software developer, if necessary, is to use the possibilities offered by the manufacturer to speed up the calculations.  This is exactly what will be discussed below for MIPS processors; </p><br></li><li>  <strong>using a graphics controller for computing</strong> <br>  In order to make the present list more complete, it is impossible not to mention the possibility of bringing the most complex and resource-intensive calculations to the video card [ <a href="https://habrahabr.ru/post/172969/">L6</a> , <a href="https://habrahabr.ru/post/72247/">L7</a> ]. </li></ul></div></div><br><p>  There are no perfect tools.  The best tool is the one that guarantees the solution of the problem in a reasonable time, for which the project team has the necessary competencies, and which is either available or can be acquired with minimal cost.  Budget decisions, customer requirements, and sometimes political reasons are imposed on such decisions. </p><br><p>  I hope that this article will be useful as an introduction for those readers who will face the need to optimize the performance of certain calculations on the Baikal-T1 processor or another friend based on the MIPS core (s) where MIPS SIMD technology is available. </p><br><h2 id="resursoemkost-vychisleniy">  Computation resource intensity </h2><br><p>  Before proceeding further, consider one of the most common problems of digital signal processing (DSP) - filtering.  As an example, take a filter with a finite impulse response (FIR, FIR, finite impulse response) [ <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580_%25D1%2581_%25D0%25BA%25D0%25BE%25D0%25BD%25D0%25B5%25D1%2587%25D0%25BD%25D0%25BE%25D0%25B9_%25D0%25B8%25D0%25BC%25D0%25BF%25D1%2583%25D0%25BB%25D1%258C%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2585%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B9">L8</a> ].  Without going into the theory of DSP and mathematical calculations, we note the main thing - the equation that describes this type of digital filters: </p><br><p><img src="https://habrastorage.org/web/edc/efb/96b/edcefb96b96942a09ee40d2aab8e3194.png"></p><br><p>  where <strong>x (n)</strong> is the input signal, <strong>y (n)</strong> is the output signal, <strong>P</strong> is the order of the filter, <strong>bi</strong> is the filter coefficients.  The same equation can be written as follows: </p><br><p><img src="https://habrastorage.org/web/72f/1a5/a25/72f1a5a25f6f4272ba19482374afb3e3.png"></p><br><p>  The nature of the input signal <strong>x (n)</strong> in this case is ignored.  Let it be the data obtained from the ADC, but with the same success they can be read from the file.  For us in this case it does not matter.  Since our current article is ‚Äúabout calculations‚Äù and not ‚Äúabout DSP‚Äù, then, accordingly, we will not dive into the Magic of filters, but simply use one of the online services to calculate the coefficients [ <a href="http://t-filter.engineerjs.com/">L9</a> ]: </p><br><p>  Set the desired filtering parameters (for example, one of the predefined options: band stop - notch filter [ <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25BE%25D1%2581%25D0%25BD%25D0%25BE-%25D0%25B7%25D0%25B0%25D0%25B3%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B4%25D0%25B0%25D1%258E%25D1%2589%25D0%25B8%25D0%25B9_%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580">L11</a> ]) and click the Design Filter button: </p><br><p><img src="https://habrastorage.org/web/2b0/e11/a8a/2b0e11a8af2b41d0a7a7717ac33155ff.png"></p><br><p>  The result of the calculation is the frequency response of the filter [ <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BC%25D0%25BF%25D0%25BB%25D0%25B8%25D1%2582%25D1%2583%25D0%25B4%25D0%25BD%25D0%25BE-%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BE%25D1%2582%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2585%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0">L12</a> ]: </p><br><div class="spoiler">  <b class="spoiler_title">AFC filter</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/web/846/102/71c/84610271c74d4900a64b039b69e1445e.png"></p></div></div><br><p>  Factor set and source code: </p><br><div class="spoiler">  <b class="spoiler_title">SampleFilter.h</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> SAMPLEFILTER_H_ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SAMPLEFILTER_H_ </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* FIR filter designed with http://t-filter.appspot.com sampling frequency: 2000 Hz * 0 Hz - 200 Hz gain = 1 desired ripple = 5 dB actual ripple = 3.1077303934211127 dB * 300 Hz - 500 Hz gain = 0 desired attenuation = -40 dB actual attenuation = -42.49314043914754 dB * 600 Hz - 1000 Hz gain = 1 desired ripple = 5 dB actual ripple = 3.1077303934211127 dB */</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SAMPLEFILTER_TAP_NUM 25 typedef struct { double history[SAMPLEFILTER_TAP_NUM]; unsigned int last_index; } SampleFilter; void SampleFilter_init(SampleFilter* f); void SampleFilter_put(SampleFilter* f, double input); double SampleFilter_get(SampleFilter* f); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">SampleFilter.s</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"SampleFilter.h"</span></span></span><span class="hljs-meta"> static double filter_taps[SAMPLEFILTER_TAP_NUM] = { 0.037391727827352596, -0.03299884552335979, 0.044230583967321345, 0.0023050970833628304, -0.06768087195950104, -0.046347105409124706, -0.011717387509232432, -0.0707342284185183, -0.049766517282999544, 0.16086413543836361, 0.21561058688743148, -0.10159456907827959, 0.6638637561392535, -0.10159456907827959, 0.21561058688743148, 0.16086413543836361, -0.049766517282999544, -0.0707342284185183, -0.011717387509232432, -0.046347105409124706, -0.06768087195950104, 0.0023050970833628304, 0.044230583967321345, -0.03299884552335979, 0.037391727827352596 }; void SampleFilter_init(SampleFilter* f) { int i; for(i = 0; i </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; SAMPLEFILTER_TAP_NUM; ++i) f-&gt;history[i] = 0; f-&gt;last_index = 0; } void SampleFilter_put(SampleFilter* f, double input) { f-&gt;history[f-&gt;last_index++] = input; if(f-&gt;last_index == SAMPLEFILTER_TAP_NUM) f-&gt;last_index = 0; } double SampleFilter_get(SampleFilter* f) { double acc = 0; int index = f-&gt;last_index, i; for(i = 0; i &lt; SAMPLEFILTER_TAP_NUM; ++i) { index = index != 0 ? index-1 : SAMPLEFILTER_TAP_NUM-1; acc += f-&gt;history[index] * filter_taps[i]; }; return acc; }</span></span></span></span></code> </pre> </div></div><br><p>  Let's look at the filtering parameters, the <em>SampleFilter_get</em> function, recall the FIR filter equation above and note the most important points for us: </p><br><ul><li>  in order to get one sample of <strong>y (n)</strong> , which in our case is equivalent to one call of the <em>SampleFilter_get</em> function <em>,</em> we need to cycle 25 input samples of <strong>x (n)</strong> in a loop (filter order, see macro <em>SAMPLEFILTER_TAP_NUM</em> and "taps" in the screenshot of the interface); </li><li>  if we want this processing to be done on the fly (for example, as <strong>x (n)</strong> arrives from the ADC), then we must have time to perform it taking into account the sampling frequency, which in our case is 2000Hz; </li><li>  for each of these 25 samples <strong>x (n),</strong> we perform a series of mathematical operations: multiplication by the corresponding coefficient, addition to the register-accumulator.  In addition, do not forget about the related operations to read / write from / to memory, which also takes time. </li></ul><br><p>  Now suppose that the conditions of the task were clarified due to some objective reasons: </p><br><p><img src="https://habrastorage.org/web/b68/54e/68b/b6854e68b20f40139d3ea5cd7c7c4a5a.png"></p><br><p>  As a result, we get the following frequency response: </p><br><div class="spoiler">  <b class="spoiler_title">AFC filter</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/web/47f/75f/875/47f75f875a954ac1b426b2a7db6d3e3a.png"></p></div></div><br><p>  What is important for us: </p><br><ul><li>  due to an increase in the sampling frequency to 4000Hz, the time we can spend on computation has decreased by 2 times if we want to get results on the fly; </li><li>  the number of iterations (taps, filter order) increased almost 3 times (from 25 to 67).  If you do not make changes to the non-uniformity of the frequency response (leave ripple / att. = 5 dB), then the number of iterations will still increase by 2 times; </li><li>  Thus, a slight change in the filtering parameters led to an increase in the computation-intensive resources by 6 times (or 4). </li></ul><br><p>  I would not like the reader to pay attention to the absolute values ‚Äã‚Äãof the filter parameters given in the example.  The main idea that I would like to convey is that at some point an increase in computation-intensive resources may go beyond the previously predicted limits.  And after a small change in the algorithm, its parameters, or input data, all of a sudden, it may turn out that your processor core only deals with what it "shoves" the data, and even then it does not have time to do it, not to mention the performance of the remaining tasks.  Or it successfully copes, but the load created at the same time or the duration of the calculations no longer meet the requirements for the system.  And at this moment you are faced with more than ever the task of optimization. </p><br><h2 id="skorost-vychisleniy">  Computation speed </h2><br><p>  After we have seen a problem with a simple example, we will look at its solution.  Processor manufacturers go to a number of tricks in order to increase the speed of calculations: increase the frequency, increase the number of processor cores, add new commands, experiment with the configuration of the conveyor, cache size, switch to using more and more high-speed buses and interfaces. </p><br><p>  Also, no one takes away from the developer the right to realize the most bottlenecks on the assembler, experiment with the compiler options, change the algorithm to a less resource-intensive one or behave more predictably on the same range of parameters. </p><br><p>  We will concentrate on two ways to increase processing speed, which cannot be used without support from the processor architecture: </p><br><ul><li>  combining several arithmetic operations in one team; </li><li>  implementation of the SIMD approach. </li></ul><br><h3 id="obedinenie-arifmeticheskih-operaciy">  Combining arithmetic operations </h3><br><p>  Let's return to our filter and carefully look at the code for the <em>SampleFilter_get</em> function: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleFilter_get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SampleFilter* f)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> acc = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> index = f-&gt;last_index, i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; SAMPLEFILTER_TAP_NUM; ++i) { index = index != <span class="hljs-number"><span class="hljs-number">0</span></span> ? index<span class="hljs-number"><span class="hljs-number">-1</span></span> : SAMPLEFILTER_TAP_NUM<span class="hljs-number"><span class="hljs-number">-1</span></span>; acc += f-&gt;history[index] * filter_taps[i]; }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> acc; }</code> </pre> <br><p>  And especially on the line: </p><br><pre> <code class="cpp hljs">acc += f-&gt;history[index] * filter_taps[i];</code> </pre> <br><p>  Here we see 2 consecutively performed operations: multiplication by a coefficient and accumulation of the results of this command in a battery variable.  This combination of multiplication and addition is very common in DSP algorithms.  But if these two operations are so often side by side with each other, then why not combine them into a single command that is executed during 1 clock cycle?  The idea of ‚Äã‚Äãsuch a union came to the heads of engineers for a long time.  Thus, the command ‚Äúmultiply with accumulation‚Äù (combined multiplication-addition, multiply ‚Äì accumulate operation, MAC) appeared, which is now present in all digital signal processors: </p><br><p><img src="https://habrastorage.org/web/7e5/32b/2d9/7e532b2d9e364c798d0eba5acf2f746d.png"></p><br><h3 id="simd-podhod">  SIMD approach </h3><br><p>  Let's approach the solution from the other side.  And why would we, instead of working with each <strong>x (n)</strong> , separately, not combine several samples into one vector (array) and apply the command to the whole vector at once, or more precisely, to each element of the vector at the same time?  In this case, in one cycle (apart from working with memory) several samples can be processed at once: </p><br><p><img src="https://habrastorage.org/web/b23/f7a/1cd/b23f7a1cdb174a5183368386eaaf9ff2.png"></p><br><p>  And the larger the maximum size of the vector, the higher the processing speed will be.  This principle of organization of calculations is called <strong>SIMD</strong> (single instruction, multiple data; single stream of commands, multiple data stream) [ <a href="https://ru.wikipedia.org/wiki/SIMD">L13</a> ].  This approach builds the work of vector processors [ <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580">L14</a> ] and vector extensions to scalar processors: SSE and AVX for x86 architecture, MIPS SIMD [ <a href="https://www.imgtec.com/mips/architectures/simd/">L15</a> ] for MIPS architecture. </p><br><h2 id="mips-simd">  MIPS SIMD </h2><br><p>  Now that we understand the basic principles on which the vector extensions of the architecture are built, we can go directly to MIPS SIMD.  An exhaustive description of this extension is given in the documentation [ <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D2_MD00866-2B-MSA32-AFP-01.12.pdf">D2</a> ], we note the main points: </p><br><ul><li>  Available in two versions: MIPS32 SIMD and MIPS64 SIMD.  Since Baikal-T1 is based on the cores of the MIPS 32 r5 architecture, in the following, when mentioning MIPS SIMD, we will mean MIPS32 SIMD.  On the website and in the documentation of Imagination Technologies, it is also referred to as MSA (MIPS SIMD Architecture); </li><li><p>  Work is done using 32x 128-bit registers for processing vector data.  Each of which can be represented as: 16x 8-bit vectors, 8x 16-bit, 4x 32-bit, or 2x 64-bit vectors: <br><img src="https://habrastorage.org/web/9f8/df1/80f/9f8df180fe0749ac93753d269199ab48.png"></p><br></li><li>  involves more than 150 instructions for processing data: integer, floating-point and fixed-point, including bit operations, comparisons, conversions: </li></ul><br><div class="spoiler">  <b class="spoiler_title">Integer operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  ADDV, ADDVI </td><td>  Add </td></tr><tr><td>  ADD_A, ADDS_A </td><td>  Add and Saturated Add Absolute Values </td></tr><tr><td>  ADDS_S, ADDS_U </td><td>  Signed and Unsigned Saturated Add </td></tr><tr><td>  HADD_S, HADD_U </td><td>  Signed and Unsigned Horizontal Add </td></tr><tr><td>  ASUB_S, ASUB_U </td><td>  Absolute Value of Signed and Unsigned Subtract </td></tr><tr><td>  AVE_S, AVE_U </td><td>  Signed and Unsigned Average </td></tr><tr><td>  AVER_S, AVER_U </td><td>  Signed and Unsigned Average with Rounding </td></tr><tr><td>  DOTP_S, DOTP_U </td><td>  Signed and Unsigned Dot Product </td></tr><tr><td>  DPADD_S, DPADD_U </td><td>  Signed and Unsigned Dot Product Add </td></tr><tr><td>  DPSUB_S, DPSUB_U </td><td>  Signed and Unsigned Dot Product Subtract </td></tr><tr><td>  Div_s div_u </td><td>  Divide </td></tr><tr><td>  MADDV </td><td>  Multiply-add </td></tr><tr><td>  MAX_A, MIN_A </td><td>  Maximum and Minimum of Absolute Values </td></tr><tr><td>  MAX_S, MAXI_S, MAX_U, MAXI_U </td><td>  Signed and Unsigned Maximum </td></tr><tr><td>  MIN_S, MINI_S, MIN_U, MINI_U </td><td>  Signed and Unsigned Maximum </td></tr><tr><td>  MSUBV </td><td>  Multiply-subtract </td></tr><tr><td>  MULV </td><td>  Multiply </td></tr><tr><td>  MOD_S, MOD_U </td><td>  Signed and Unsigned Remainder (Modulo) </td></tr><tr><td>  SAT_S, SAT_U </td><td>  Signed and Unsigned Saturate </td></tr><tr><td>  SUBS_S, SUBS_U </td><td>  Signed and Unsigned Saturated Subtract </td></tr><tr><td>  HSUB_S, HSUB_U </td><td>  Signed and Unsigned Horizontal Subtract </td></tr><tr><td>  SUBSUU_S </td><td>  Signed Saturated Unsigned Subtract </td></tr><tr><td>  SUBSUS_U </td><td>  Unsigned Saturated Signed Subtract from Unsigned </td></tr><tr><td>  SUBV, SUBVI </td><td>  Subtract </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Bit operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  AND, ANDI </td><td>  Logical and </td></tr><tr><td>  BCLR, BCLRI </td><td>  Bit clear </td></tr><tr><td>  BINSL, BINSLI, BINSR, BINSRI </td><td>  Bit Insert Left and Right </td></tr><tr><td>  BMNZ, BMNZI </td><td>  Bit Move If Not Zero </td></tr><tr><td>  BMZ, BMZI </td><td>  Bit Move If Zero </td></tr><tr><td>  BNEG, BNEGI </td><td>  Bit negate </td></tr><tr><td>  BSEL, BSELI </td><td>  Bit select </td></tr><tr><td>  BSET, BSETI </td><td>  Bit set </td></tr><tr><td>  NLOC Leading </td><td>  One beat count </td></tr><tr><td>  NLZC Leading </td><td>  Zero Bits Count </td></tr><tr><td>  NOR, NORI </td><td>  Logical negative or </td></tr><tr><td>  PCNT </td><td>  Population (Bits Set to 1) Count </td></tr><tr><td>  OR, ORI </td><td>  Logical or </td></tr><tr><td>  SLL, SLLI </td><td>  Shift left </td></tr><tr><td>  SRA, SRAI </td><td>  Shift Right Arithmetic </td></tr><tr><td>  SRAR, SRARI </td><td>  Rounding Shift Right Arithmetic </td></tr><tr><td>  SRL, SRLI </td><td>  Shift right logical </td></tr><tr><td>  SRLR, SRLRI </td><td>  Rounding Shift Right Logical </td></tr><tr><td>  XOR, XORI </td><td>  Logical Exclusive Or </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Floating point arithmetic</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  FADD </td><td>  Floating-point addition </td></tr><tr><td>  Fdiv </td><td>  Floating-point division </td></tr><tr><td>  FEXP2 </td><td>  Floating point base 2 exponentiation </td></tr><tr><td>  FLOG2 </td><td>  Floating point base 2 logarithm </td></tr><tr><td>  FMADD, FMSUB </td><td>  Floating-Point Fused Multiply-Add and Multiply-Subtract </td></tr><tr><td>  FMAX, FMIN </td><td>  Floating-Point Maximum and Minimum </td></tr><tr><td>  FMAX_A, FMIN_A </td><td>  Floating-Point Maximum and Minimum of Absolute Values </td></tr><tr><td>  FMUL </td><td>  Floating-point multiplication </td></tr><tr><td>  FRCP </td><td>  Approximate Floating-Point Reciprocal </td></tr><tr><td>  FRINT </td><td>  Floating point round to integer </td></tr><tr><td>  FRSQRT </td><td>  Approximate Floating-Point Reciprocal of Square Root </td></tr><tr><td>  FSQRT </td><td>  Floating point square root </td></tr><tr><td>  FSUB </td><td>  Floating point subtraction </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Non-floating point arithmetic</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  FCLASS </td><td>  Floating point class mask </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Floating point comparisons</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  FCAF </td><td>  Floating-Point Quiet Compare Always False </td></tr><tr><td>  FCUN </td><td>  Floating-Point Quiet Compare Unordered </td></tr><tr><td>  FCOR </td><td>  Floating-Point Quiet Compare Ordered </td></tr><tr><td>  FCEQ </td><td>  Floating-Point Quiet Compare Equal </td></tr><tr><td>  FCUNE </td><td>  Floating-Point Quiet Compare Unordered or Not Equal </td></tr><tr><td>  FCUEQ </td><td>  Floating-Point Quiet Compare Unordered or Equal </td></tr><tr><td>  FCNE </td><td>  Floating-Point Quiet Compare Not Equal </td></tr><tr><td>  FCLT </td><td>  Floating Point Quiet Compare Less Than </td></tr><tr><td>  FCULT </td><td>  Floating-Point Quiet Compare Unordered or Less Than </td></tr><tr><td>  FCLE </td><td>  Floating-Point Quiet </td></tr><tr><td>  FCULE </td><td>  Floating-Point Quiet Compare Unordered or Less Than or Equal </td></tr><tr><td>  FSAF </td><td>  Floating-Point Signaling Compare Always False </td></tr><tr><td>  FSUN </td><td>  Floating-Point Signaling Compare Unordered </td></tr><tr><td>  FSOR </td><td>  Floating-Point Signaling Compare Ordered </td></tr><tr><td>  FSEQ </td><td>  Floating-Point Signaling Compare Equal </td></tr><tr><td>  FSUNE </td><td>  Floating-Point Signaling Compare Unordered or Not Equal </td></tr><tr><td>  FSUEQ </td><td>  Floating-Point Signaling Compare Unordered or Equal </td></tr><tr><td>  FSNE </td><td>  Floating-Point Signaling Compare Not Equal </td></tr><tr><td>  Fslt </td><td>  Floating-Point Signaling Compare Less Than </td></tr><tr><td>  FSULT </td><td>  Floating-Point Signaling Compare Unordered or Less Than </td></tr><tr><td>  FSLE </td><td>  Floating-Point Signaling Compare Less Than or Equal </td></tr><tr><td>  FSULE </td><td>  Floating-Point Signaling Compare Unordered or Less Than or Equal </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Float operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  FEXDO </td><td>  Floating Point Down-Convert Interchange Format </td></tr><tr><td>  FEXUPL, FEXUPR </td><td>  Left-Half and Right-Half Floating-Point Up-Convert Interchange Format </td></tr><tr><td>  FFINT_S, FFINT_U </td><td>  Floating-Point Convert from Signed and Unsigned Integer </td></tr><tr><td>  FFQL, FFQR </td><td>  Left-Half and Right-Half Floating-Point Convert from Fixed-Point </td></tr><tr><td>  FTINT_S, FTINT_U </td><td>  Floating-Point Round and Convert to Signed and Unsigned Integer </td></tr><tr><td>  FTRUNC_S, FTRUNC_U </td><td>  Truncate and Convert to Signed and Unsigned Integer </td></tr><tr><td>  FTQ </td><td>  Floating Point Round and Convert to Fixed Point </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Fixed point operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  MADD_Q, MADDR_Q </td><td>  Fixed-Point Multiply and Add-on and Rounding </td></tr><tr><td>  MSUB_Q, MSUBR_Q </td><td>  Fixed-Point Multiply and Subtract without and with Rounding </td></tr><tr><td>  MUL_Q, MULR_Q </td><td>  Fixed-Point Multiply without and Rounding </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Branch operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  Bnz </td><td>  Branch If Not Zero </td></tr><tr><td>  Bz </td><td>  Branch if zero </td></tr><tr><td>  CEQ, CEQI </td><td>  Compare Equal </td></tr><tr><td>  CLE_S, CLEI_S, CLE_U, CLEI_U </td><td>  Compare Less-Than-or-Equal Signed and Unsigned </td></tr><tr><td>  CLT_S, CLTI_S, CLT_U, CLTI_U </td><td>  Compare Less-Than Signed and Unsigned </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Vector Loading and Unloading Operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  CFCMSA, CTCMSA </td><td>  Copy Register and MSA Control Register </td></tr><tr><td>  LD </td><td>  Load vector </td></tr><tr><td>  Ldi </td><td>  Load Immediate </td></tr><tr><td>  MOVE </td><td>  Vector to Vector Move </td></tr><tr><td>  SPLAT, SPLATI </td><td>  Replicate Vector Element </td></tr><tr><td>  FILL FILL </td><td>  Vector from GPR </td></tr><tr><td>  INSERT, INSVE </td><td>  Insert GPR and Vector element 0 to Vector Element </td></tr><tr><td>  COPY_S, COPY_U </td><td>  Copy element to GPR Signed and Unsigned </td></tr><tr><td>  ST </td><td>  Store Vector </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Vector element permutation operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  ILVEV, ILVOD </td><td>  Interleave Even, odd </td></tr><tr><td>  ILVL, ILVR </td><td>  Interleave the Left, Right </td></tr><tr><td>  PCKEV, PCKOD </td><td>  Pack Even and Odd Elements </td></tr><tr><td>  SHF </td><td>  Set shuffle </td></tr><tr><td>  SLD, SLDI </td><td>  Element slide </td></tr><tr><td>  VSHF </td><td>  Vector shuffle </td></tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Other operations</b> <div class="spoiler_text"><table><thead><tr><th>  Mnemonic </th><th>  Instruction Description </th></tr></thead><tbody><tr><td>  LSA </td><td>  Left-shift add or load / store address calculation </td></tr></tbody></table></div></div><br><ul><li>  Most commands are available in several versions, differing from each other in the size of the vector element and the type of data being processed.  So the multiplication with accumulation, already known to us, is implemented as: FMADD - for floating-point numbers, MADD_Q - for fixed-point numbers (with saturation), MADDR_Q - for fixed-point numbers (with saturation and rounding), MADDV - for integers .  At the same time, for example, MADDV is available in 4 versions: MADDV.B - when the elements for byte processing (x8), MADDV.H - when each element of the vector is a half-word (x16), MADDV.W - a word (x32) and MADDV. D - double word (x64) </li></ul><br><div class="spoiler">  <b class="spoiler_title">Formal command description</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/web/68f/20a/c03/68f20ac03b554be8bc7eaac121a65ced.png"></p></div></div><br><h2 id="podderzhka-na-urovne-kompilyatora">  Compiler support </h2><br><p>  MIPS SIMD is supported by the gcc compiler, however, this support has its own features: </p><br><ul><li>  for vector elements of various dimensions, separate data types have been introduced [ <a href="https://gcc.gnu.org/onlinedocs/gcc/MIPS-SIMD-Architecture-_0028MSA_0029-Support.html">L16</a> ]; </li><li>  we are spared from the need to work directly with registers (work is carried out at the level of variables of the appropriate type) </li><li>  for all of the above operations, high-level pseudonyms have been introduced [ <a href="https://gcc.gnu.org/onlinedocs/gcc/MIPS-SIMD-Architecture-Built-in-Functions.html">L17</a> ]; </li><li>  according to the gcc documentation, the compiler does not make independent decisions about the use of MIPS SIMD, the same is confirmed by a well-disassembled example of the use of MIPS SIMD, published on the website Imagination Technologies [ <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D3_MD00927-SIMD-programming-whitepaper.pdf">D3</a> ].  Thus, if we draw a rough analogy, then working with MIPS SIMD is closer to writing assembly inserts, rather than to high-level programming.  What should be considered when making decisions about optimization. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Code before optimization</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ROUND_POWER_OF_TWO(value, n) (((value) + (1 </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;&lt; ((n) - 1))) &gt;&gt; (n)) static inline unsigned char clip_pixel(int i32Val) { return ((i32Val) &gt; 255) ? 255u : ((i32Val) &lt; 0) ? 0u : (i32Val); } void vert_filter_8taps_16width_c(unsigned char *pSrc, // SOURCE POINTER int SrcStride, // SOURCE BUFFER PITCH unsigned char *pDst, // DEST POINTER int DstStride, // DEST BUFFER PITCH char *pFilter, // POINTER TO FILTER BANK int Height) // HEIGHT OF THE BLOCK { unsigned int Row, Col; int FiltSum; short Src0, Src1, Src2, Src3, Src4, Src5, Src6, Src7; pSrc -= (8 / 2 - 1) * SrcStride; // MOVE INPUT SRC POINTER TO APPROPRIATE POSITION // LOOP FOR NUMBER OF COLUMNS-16 for (Col = 0; Col &lt; 16; ++Col) { Src0 = pSrc[0 * SrcStride]; Src1 = pSrc[1 * SrcStride]; Src2 = pSrc[2 * SrcStride]; Src3 = pSrc[3 * SrcStride]; Src4 = pSrc[4 * SrcStride]; Src5 = pSrc[5 * SrcStride]; Src6 = pSrc[6 * SrcStride]; // LOOP FOR NUMBER OF ROWS for (Row = 0; Row &lt; Height; Row++) { Src7 = pSrc[(7 + Row) * SrcStride]; FiltSum = 0; // ACCUMULATED FILTER SUM += PIXEL * FILTER COEFF FiltSum += (Src0 * pi8Filter[0]); FiltSum += (Src1 * pi8Filter[1]); FiltSum += (Src2 * pi8Filter[2]); FiltSum += (Src3 * pi8Filter[3]); FiltSum += (Src4 * pi8Filter[4]); FiltSum += (Src5 * pi8Filter[5]); FiltSum += (Src6 * pi8Filter[6]); FiltSum += (Src7 * pi8Filter[7]); FiltSum = ROUND_POWER_OF_TWO(FiltSum, 7); // ROUNDING pDst[Row * DstStride] = clip_pixel(FiltSum);// CLIP RESULT IN 0-255(UNSIGNED CHAR) // PREPARING FOR NEXT CONVOLUTION- SLIDING WINDOW Src0 = Src1; Src1 = Src2; Src2 = Src3; Src3 = Src4; Src4 = Src5; Src5 = Src6; Src6 = Src7; } pSrc += 1; pDst += 1; } }</span></span></span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Code after optimization using MIPS SIMD</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* MSA VECTOR TYPES */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> WRLEN 128 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// VECTOR REGISTER LENGTH 128-BIT #define NUMWRELEM (WRLEN &gt;&gt; 3) typedef signed char IMG_VINT8 __attribute__ ((vector_size(NUMWRELEM))); //VEC SIGNED BYTES typedef unsigned char IMG_VUINT8 __attribute__ ((vector_size(NUMWRELEM))); //VEC UNSIGNED BYTES typedef short IMG_VINT16 __attribute__ ((vector_size(NUMWRELEM))); //VEC SIGNED HALF-WORD #define LOAD_UNPACK_VEC(pSrc, SrcStride, vi16VecRight, vi16VecLeft) \ { \ IMG_VUINT8 vu8Src; \ IMG_VINT16 vi16Vec0; \ IMG_VINT8 vi8Tmp0; \ /* LOAD INPUT VECTOR */ \ vu8Src = *((IMG_VINT8 *)(pSrc)); \ /* RANGE WARPING TO MAINTAIN 16 BIT PRECISION */ \ vi16Vec0 = __builtin_msa_xori_b(vu8Src, 128); \ /* CALCULATE SIGN EXTENSION */ \ vi8Tmp0 = __builtin_msa_clti_s_b(vi16Vec0, 0); \ /* INTERLEAVE RIGHT TO 16 BIT VEC */ \ vi16VecRight = __builtin_msa_ilvr_b(vi8Tmp0, vi16Vec0); \ /* INTERLEAVE LEFT TO 16 BIT VEC */ \ vi16VecLeft = __builtin_msa_ilvl_b(vi8Tmp0, vi16Vec0); \ pSrc += SrcStride; \ } void vert_filter_8taps_16width_msa(unsigned char *pSrc, // SOURCE POINTER int SrcStride, // SOURCE BUFFER PITCH unsigned char *pDst, // DEST POINTER int DstStride, // DEST BUFFER PITH char *pFilter, // POINTER TO FILTER BANK int Height) // HEIGHT OF THE BLOCK { int u32LoopCnt; VINT16 vi16Vec0Right, vi16Vec1Right, vi16Vec2Right, vi16Vec3Right; VINT16 vi16Vec4Right, vi16Vec5Right, vi16Vec6Right, vi16Vec7Right; VINT16 vi16Vec0Left, vi16Vec1Left, vi16Vec2Left, vi16Vec3Left; VINT16 vi16Vec4Left, vi16Vec5Left, vi16Vec6Left, vi16Vec7Left; VINT16 vi16Temp1Right, vi16Temp1Left; VINT16 vi16Filt0, vi16Filt1, vi16Filt2, vi16Filt3; VINT16 vi16Filt4, vi16Filt5, vi16Filt6, vi16Filt7; pSrc -= (3 * SrcStride); // PREPARE FILTER COEFF IN VEC REGISTERS vi16Filt0 = __builtin_msa_fill_h(*(pFilter)); vi16Filt1 = __builtin_msa_fill_h(*(pFilter + 1)); vi16Filt2 = __builtin_msa_fill_h(*(pFilter + 2)); vi16Filt3 = __builtin_msa_fill_h(*(pFilter + 3)); vi16Filt4 = __builtin_msa_fill_h(*(pFilter + 4)); vi16Filt5 = __builtin_msa_fill_h(*(pFilter + 5)); vi16Filt6 = __builtin_msa_fill_h(*(pFilter + 6)); vi16Filt7 = __builtin_msa_fill_h(*(pFilter + 7)); //LOAD 7 INPUT VECTORS LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec0Right, vi16Vec0Left) LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec1Right, vi16Vec1Left) LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec2Right, vi16Vec2Left) LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec3Right, vi16Vec3Left) LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec4Right, vi16Vec4Left) LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec5Right, vi16Vec5Left) LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec6Right, vi16Vec6Left) // START CONVOLUTION VERTICALLY for (u32LoopCnt = Height; u32LoopCnt--; ) { //LOAD 8TH INPUT VECTOR LOAD_UNPACK_VEC(pSrc, SrcStride, vi16Vec7Right, vi16Vec7Left) /* FILTER CALC */ IMG_VINT16 vi16Tmp1, vi16Tmp2; IMG_VINT8 vi8Tmp3; // 8 TAP VECTORIZED CONVOLUTION FOR RIGHT HALF vi16Tmp1 = (vi16Vec0Right * vi16Filt0); vi16Tmp1 += (vi16Vec1Right * vi16Filt1); vi16Tmp1 += (vi16Vec2Right * vi16Filt2); vi16Tmp1 += (vi16Vec3Right * vi16Filt3); vi16Tmp2 = (vi16Vec4Right * vi16Filt4); vi16Tmp2 += (vi16Vec5Right * vi16Filt5); vi16Tmp2 += (vi16Vec6Right * vi16Filt6); vi16Tmp2 += (vi16Vec7Right * vi16Filt7); vi16Temp1Right = __builtin_msa_adds_s_h(vi16Tmp1, vi16Tmp2); // 8 TAP VECTORIZED CONVOLUTION FOR LEFT HALF vi16Tmp1 = (vi16Vec0Left * vi16Filt0); vi16Tmp1 += (vi16Vec1Left * vi16Filt1); vi16Tmp1 += (vi16Vec2Left * vi16Filt2); vi16Tmp1 += (vi16Vec3Left * vi16Filt3); vi16Tmp2 = (vi16Vec4Left * vi16Filt4); vi16Tmp2 += (vi16Vec5Left * vi16Filt5); vi16Tmp2 += (vi16Vec6Left * vi16Filt6); vi16Tmp2 += (vi16Vec7Left * vi16Filt7); vi16Temp1Left = __builtin_msa_adds_s_h(vi16Tmp1, vi16Tmp2); // ROUNDING RIGHT SHIFT RANGE CLIPPING AND NARROWING vi16Temp1Right = __builtin_msa_srari_h(vi16Temp1Right, 7); vi16Temp1Right = __builtin_msa_sat_s_h(vi16Temp1Right, 7); vi16Temp1Left = __builtin_msa_srari_h(vi16Temp1Left, 7); vi16Temp1Left = __builtin_msa_sat_s_h(vi16Temp1Left, 7); vi8Tmp3 = __builtin_msa_pckev_b(vi16Temp1Left, vi16Temp1Right); vi8Tmp3 = __builtin_msa_xori_b(vi8Tmp3, 128); // STORE OUTPUT VEC *((IMG_VINT8 *)(pDst)) = (vi8Tmp3); pDst += DstStride; // PREPARING FOR NEXT CONVOLUTION- SLIDING WINDOW vi16Vec0Right = vi16Vec1Right; vi16Vec1Right = vi16Vec2Right; vi16Vec2Right = vi16Vec3Right; vi16Vec3Right = vi16Vec4Right; vi16Vec4Right = vi16Vec5Right; vi16Vec5Right = vi16Vec6Right; vi16Vec6Right = vi16Vec7Right; vi16Vec0Left = vi16Vec1Left; vi16Vec1Left = vi16Vec2Left; vi16Vec2Left = vi16Vec3Left; vi16Vec3Left = vi16Vec4Left; vi16Vec4Left = vi16Vec5Left; vi16Vec5Left = vi16Vec6Left; vi16Vec6Left = vi16Vec7Left; } }</span></span></span></span></code> </pre></div></div><br><h2 id="ocenka-proizvoditelnosti">  Performance evaluation </h2><br><p>  Initially, I had thoughts to write the simplest application (synthetic test) to assess the performance gain when using MIPS SIMD.  But despite its attractiveness, this option is not indicative, due to its isolation from the user's real tasks.  Fortunately, the employees of Imagination Technologies and MIPS have made a significant contribution to ffmpeg [ <a href="https://github.com/FFmpeg/FFmpeg/tree/master/libavcodec/mips">L18</a> ] - a widely used open source application designed to convert audio and video [ <a href="http://ffmpeg.org/">L19</a> ].  I believe that they, like no one else, know how to properly use the technology in question, which means this code should be as efficient as possible. </p><br><p>  Thus, if we compile ffmpeg in two versions: with and without MIPS SIMD support, we can compare the speed of work on the same input data and draw some conclusion about the effectiveness of vector calculations based on the results. </p><br><h3 id="sborka-ffmpeg">  Build ffmpeg </h3><br><p>  Runs on an x86 machine running Linux.  Development tools from Imagination Technologies [ <a href="https://community.imgtec.com/developers/mips/tools/codescape-mips-sdk/">L20</a> ] are used in cross-compilation mode.  Tests are performed on the latest stable release at the time of writing this article - ffmpeg 3.3 [ <a href="http://ffmpeg.org/">L19</a> ]. </p><br><p>  Configuration ffmpeg for the version with support for MIPS SIMD: </p><br><pre> <code class="hljs mel">./configure --enable-<span class="hljs-keyword"><span class="hljs-keyword">cross</span></span>-compile --prefix=../ffmpeg-msa --<span class="hljs-keyword"><span class="hljs-keyword">cross</span></span>-prefix=/home/stas/mipsfpga/toolchain/mips-mti-linux-gnu/<span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>/bin/mips-mti-linux-gnu- --arch=mips --cpu=p5600 --target-os=linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">"-EL -static"</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">"-EL -static"</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-iconv</code> </pre> <br><p>  And with disabled MIPS SIMD support: </p><br><pre> <code class="hljs mel">./configure --enable-<span class="hljs-keyword"><span class="hljs-keyword">cross</span></span>-compile --prefix=../ffmpeg-<span class="hljs-keyword"><span class="hljs-keyword">soft</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">cross</span></span>-prefix=/home/stas/mipsfpga/toolchain/mips-mti-linux-gnu/<span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>/bin/mips-mti-linux-gnu- --arch=mips --cpu=p5600 --target-os=linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">"-EL -static"</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">"-EL -static"</span></span> --<span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-iconv --<span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-msa</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Description of configuration settings</b> <div class="spoiler_text"><table><thead><tr><th>  Parameter </th><th>  Description </th></tr></thead><tbody><tr><td>  --enable-cross-compile </td><td>  assembly will be carried out on a machine with an excellent architecture </td></tr><tr><td>  --prefix = .. / ffmpeg-msa </td><td>  the directory in which files will be placed after the make install command </td></tr><tr><td>  --cross-prefix = .. / mips-mti-linux-gnu- </td><td>  toolchain path </td></tr><tr><td>  --arch = mips </td><td>  target architecture - MIPS </td></tr><tr><td>  --cpu = p5600 </td><td>  target processor core - p5600 </td></tr><tr><td>  --target-os = linux </td><td>  target OS - Linux </td></tr><tr><td>  - extra-cflags = "- EL -static" </td><td>  target system - little endian, use static binding </td></tr><tr><td>  - extra-ldflags = "- EL -static" </td><td>  similarly </td></tr><tr><td>  --disable-iconv </td><td>  disable text encoding functionality </td></tr><tr><td>  --disable-msa </td><td>  do not use MIPS SIMD </td></tr></tbody></table></div></div><br><p>  If you plan to repeat these steps, then note that the ffmpeg 3.3 build with MIPS SIMD support falls out with a minor error, which you need to add to the libavcodec \ mips \ hevcpred_msa.c file to add: </p><br><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"libavcodec/hevcdec.h"</span></span></span></span></code> </pre> <br><h3 id="testirovanie">  Testing </h3><br><p>  It is executed on the Baikal-T1 processor: </p><br><pre> <code class="hljs sql"><span class="hljs-comment"><span class="hljs-comment"># uname -a Linux baikal-BFK-18446744073709551615 4.4.41-bfk #0 SMP Tue Apr 25 15:54:24 MSK 2017 mips GNU/Linux</span></span></code> </pre> <br><p>  The input data are two videos encoded using x264 [ <a href="http://www.h264info.com/clips.html">L21</a> ] and x265 [ <a href="https://x265.com/hevc-video-files/">L22</a> ].  The test task is to decode the video with getting screenshots at regular intervals: </p><br><pre> <code class="hljs mel">./ffmpeg-mips/ffmpeg-msa/bin/ffmpeg -i ./The\ Simpsons\ Movie\ -\ Trailer_x264.mp4 -vf fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> ./out_img/ffmpeg-msa_x264_%d.jpg -report -benchmark ./ffmpeg-mips/ffmpeg-msa/bin/ffmpeg -i ./Tears_400_x265.mp4 -vf fps=<span class="hljs-number"><span class="hljs-number">1</span></span> ./out_img/ffmpeg-msa_x265_%d.jpg -report -benchmark ./ffmpeg-mips/ffmpeg-<span class="hljs-keyword"><span class="hljs-keyword">soft</span></span>/bin/ffmpeg -i ./The\ Simpsons\ Movie\ -\ Trailer_x264.mp4 -vf fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> ./out_img/ffmpeg-soft_x264_%d.jpg -report -benchmark ./ffmpeg-mips/ffmpeg-<span class="hljs-keyword"><span class="hljs-keyword">soft</span></span>/bin/ffmpeg -i ./Tears_400_x265.mp4 -vf fps=<span class="hljs-number"><span class="hljs-number">1</span></span> ./out_img/ffmpeg-soft_x265_%d.jpg -report -benchmark</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Description of launch options</b> <div class="spoiler_text"><table><thead><tr><th>  Parameter </th><th>  Description </th></tr></thead><tbody><tr><td>  -i ./Tears_400_x265.mp4 </td><td>  file to be processed </td></tr><tr><td>  -vf fps = 1 </td><td>  period (frequency) of taking screenshots (1 sec - for a short video, 10 sec - for a long one) </td></tr><tr><td>  ./out_img/ffmpeg-soft <em>x264</em> % d.jpg </td><td>  output file name pattern </td></tr><tr><td>  -report </td><td>  generate a report on the results of work </td></tr><tr><td>  -benchmark </td><td>  include performance data </td></tr></tbody></table></div></div><br><h4 id="rezultaty-raboty-ffmpeg">  Ffmpeg results </h4><br><table><thead><tr><th>  Scenario </th><th>  Duration (sec) </th></tr></thead><tbody><tr><td>  x264 decoding with MIPS SIMD support </td><td>  113 </td></tr><tr><td>  x265   MIPS SIMD </td><td>  22 </td></tr><tr><td>  x264  MIPS SIMD </td><td>  164 </td></tr><tr><td>  x265  MIPS SIMD </td><td>  52 </td></tr></tbody></table><br><p>  ,      MIPS SIMD   1.5 ‚Äî 2.4 . </p><br><p>    ffmpeg   github [ <a href="https://github.com/zhelnio/memos/tree/master/public/03_mips_simd/mips_ffmpeg_logs">L23</a> ]. </p><br><div class="spoiler"> <b class="spoiler_title"> x264   MIPS SIMD (,  )</b> <div class="spoiler_text"><pre> <code class="hljs go">ffmpeg started on <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-18</span></span> at <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>:<span class="hljs-number"><span class="hljs-number">26</span></span> Report written to <span class="hljs-string"><span class="hljs-string">"ffmpeg-20101018-003026.log"</span></span> Command line: ./ffmpeg-mips/ffmpeg-msa/bin/ffmpeg -i <span class="hljs-string"><span class="hljs-string">"./The Simpsons Movie - Trailer_x264.mp4"</span></span> -vf <span class="hljs-string"><span class="hljs-string">"fps=1/10"</span></span> <span class="hljs-string"><span class="hljs-string">"./out_img/ffmpeg-msa_x264_%d.jpg"</span></span> -report -benchmark ffmpeg version <span class="hljs-number"><span class="hljs-number">3.3</span></span> Copyright (c) <span class="hljs-number"><span class="hljs-number">2000</span></span><span class="hljs-number"><span class="hljs-number">-2017</span></span> the FFmpeg developers built with gcc <span class="hljs-number"><span class="hljs-number">4.9</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> (Codescape GNU Tools <span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MIPS MTI Linux) configuration: --enable-cross-compile --prefix=../ffmpeg-msa --cross-prefix=/home/stas/mipsfpga/toolchain/mips-mti-linux-gnu/<span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>/bin/mips-mti-linux-gnu- --arch=mips --cpu=p5600 --target-os=linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --disable-iconv libavutil <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> / <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> libavcodec <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> libavformat <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> libavdevice <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libavfilter <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> / <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> libswscale <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libswresample <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> / <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> Splitting the commandline. Reading option <span class="hljs-string"><span class="hljs-string">'-i'</span></span> ... matched as input url with argument <span class="hljs-string"><span class="hljs-string">'./The Simpsons Movie - Trailer_x264.mp4'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-vf'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'vf'</span></span> (set video filters) with argument <span class="hljs-string"><span class="hljs-string">'fps=1/10'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-msa_x264_%d.jpg'</span></span> ... matched as output url. Reading option <span class="hljs-string"><span class="hljs-string">'-report'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'report'</span></span> (generate a report) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-benchmark'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'benchmark'</span></span> (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Finished splitting the commandline. Parsing a group of options: global . Applying option report (generate a report) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Applying option benchmark (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Successfully parsed a group of options. Parsing a group of options: input url ./The Simpsons Movie - Trailer_x264.mp4. Successfully parsed a group of options. Opening an input file: ./The Simpsons Movie - Trailer_x264.mp4. [file @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ce0e0] Setting <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> whitelist <span class="hljs-string"><span class="hljs-string">'file,crypto'</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Format mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 probed with size=<span class="hljs-number"><span class="hljs-number">2048</span></span> and score=<span class="hljs-number"><span class="hljs-number">100</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] ISO: File Type Major Brand: isom [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Unknown dref <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">0x206c7275</span></span> size <span class="hljs-number"><span class="hljs-number">12</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Unknown dref <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">0x206c7275</span></span> size <span class="hljs-number"><span class="hljs-number">12</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Before avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">73516232</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">65587</span></span> seeks:<span class="hljs-number"><span class="hljs-number">1</span></span> nb_streams:<span class="hljs-number"><span class="hljs-number">2</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">7</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">8</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">6</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">5</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] user data:<span class="hljs-string"><span class="hljs-string">"x264 - core 54 svn-620M - H.264/MPEG-4 AVC codec - Copyleft 2005 - http://www.videolan.org/x264.html - options: cabac=1 ref=5 deblock=1:0:0 analyse=0x1:0x131 me=umh subme=6 brdo=1 mixed_ref=0 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 chroma_qp_offset=0 threads=1 nr=0 decimate=1 mbaff=0 bframes=1 b_pyramid=0 b_adapt=1 b_bias=0 direct=3 wpredb=0 bime=0 keyint=250 keyint_min=25 scenecut=40 rc=2pass bitrate=4214 ratetol=1.0 rceq='blurCplx^(1-qComp)' qcomp=0.60 qpmin=10 qpmax=51 qpstep=4 cplxblur=20.0 qblur=0.5 ip_ratio=1.40 pb_ratio=1.30"</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] Reinit context to <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, pix_fmt: yuv420p [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>cecb0] no picture [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] All info found [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] After avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">94845</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">141348</span></span> seeks:<span class="hljs-number"><span class="hljs-number">2</span></span> frames:<span class="hljs-number"><span class="hljs-number">13</span></span> Input #<span class="hljs-number"><span class="hljs-number">0</span></span>, mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2, from <span class="hljs-string"><span class="hljs-string">'./The Simpsons Movie - Trailer_x264.mp4'</span></span>: Metadata: major_brand : isom minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: isomavc1 creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">04.000000</span></span>Z Duration: <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">17.30</span></span>, start: <span class="hljs-number"><span class="hljs-number">0.000000</span></span>, bitrate: <span class="hljs-number"><span class="hljs-number">4283</span></span> kb/s Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span>: Video: h264 (Main) (avc1 / <span class="hljs-number"><span class="hljs-number">0x31637661</span></span>), yuv420p, <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, <span class="hljs-number"><span class="hljs-number">4221</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">23.98</span></span> fps, <span class="hljs-number"><span class="hljs-number">23.98</span></span> tbr, <span class="hljs-number"><span class="hljs-number">24</span></span>k tbn, <span class="hljs-number"><span class="hljs-number">47.95</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">04.000000</span></span>Z handler_name : GPAC ISO Video Handler Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>(und), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">48000</span></span>: Audio: aac (HE-AAC) (mp4a / <span class="hljs-number"><span class="hljs-number">0x6134706D</span></span>), <span class="hljs-number"><span class="hljs-number">48000</span></span> Hz, stereo, fltp, <span class="hljs-number"><span class="hljs-number">64</span></span> kb/s (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">08.000000</span></span>Z handler_name : GPAC ISO Audio Handler Successfully opened the file. Parsing a group of options: output url ./out_img/ffmpeg-msa_x264_%d.jpg. Applying option vf (set video filters) with argument fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">10.</span></span> Successfully parsed a group of options. Opening an output file: ./out_img/ffmpeg-msa_x264_%d.jpg. Successfully opened the file. detected <span class="hljs-number"><span class="hljs-number">2</span></span> logical cores [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] nal_unit_type: <span class="hljs-number"><span class="hljs-number">7</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] nal_unit_type: <span class="hljs-number"><span class="hljs-number">8</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> Stream mapping: Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (h264 (native) -&gt; mjpeg (native)) Press [q] to stop, [?] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] nal_unit_type: <span class="hljs-number"><span class="hljs-number">6</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] nal_unit_type: <span class="hljs-number"><span class="hljs-number">5</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] user data:<span class="hljs-string"><span class="hljs-string">"x264 - core 54 svn-620M - H.264/MPEG-4 AVC codec - Copyleft 2005 - http://www.videolan.org/x264.html - options: cabac=1 ref=5 deblock=1:0:0 analyse=0x1:0x131 me=umh subme=6 brdo=1 mixed_ref=0 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 chroma_qp_offset=0 threads=1 nr=0 decimate=1 mbaff=0 bframes=1 b_pyramid=0 b_adapt=1 b_bias=0 direct=3 wpredb=0 bime=0 keyint=250 keyint_min=25 scenecut=40 rc=2pass bitrate=4214 ratetol=1.0 rceq='blurCplx^(1-qComp)' qcomp=0.60 qpmin=10 qpmax=51 qpstep=4 cplxblur=20.0 qblur=0.5 ip_ratio=1.40 pb_ratio=1.30"</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] Reinit context to <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, pix_fmt: yuv420p [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] no picture cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [h264 @ <span class="hljs-number"><span class="hljs-number">0x2026050</span></span>] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">2</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x2060f</span></span>00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [h264 @ <span class="hljs-number"><span class="hljs-number">0x20191e0</span></span>] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">2</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] Setting <span class="hljs-string"><span class="hljs-string">'fps'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1/10'</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'video_size'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1280x544'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmt'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'time_base'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1/24000'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'pixel_aspect'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0/1'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'sws_param'</span></span> to value <span class="hljs-string"><span class="hljs-string">'flags=2'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'frame_rate'</span></span> to value <span class="hljs-string"><span class="hljs-string">'24000/1001'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x202c6f</span></span>0] w:<span class="hljs-number"><span class="hljs-number">1280</span></span> h:<span class="hljs-number"><span class="hljs-number">544</span></span> pixfmt:yuv420p tb:<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span> fr:<span class="hljs-number"><span class="hljs-number">24000</span></span>/<span class="hljs-number"><span class="hljs-number">1001</span></span> sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> sws_param:flags=<span class="hljs-number"><span class="hljs-number">2</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x202c030</span></span>] compat: called with args=[yuvj420p|yuvj422p|yuvj444p] [format @ <span class="hljs-number"><span class="hljs-number">0x202c030</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmts'</span></span> to value <span class="hljs-string"><span class="hljs-string">'yuvj420p|yuvj422p|yuvj444p'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x202c660</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'flags'</span></span> to value <span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x202c660</span></span>] w:iw h:ih flags:<span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> interl:<span class="hljs-number"><span class="hljs-number">0</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x202c030</span></span>] auto-inserting filter <span class="hljs-string"><span class="hljs-string">'auto_scaler_0'</span></span> between the filter <span class="hljs-string"><span class="hljs-string">'Parsed_fps_0'</span></span> and the filter <span class="hljs-string"><span class="hljs-string">'format'</span></span> [AVFilterGraph @ <span class="hljs-number"><span class="hljs-number">0x202bb80</span></span>] query_formats: <span class="hljs-number"><span class="hljs-number">4</span></span> queried, <span class="hljs-number"><span class="hljs-number">2</span></span> merged, <span class="hljs-number"><span class="hljs-number">1</span></span> already done, <span class="hljs-number"><span class="hljs-number">0</span></span> delayed [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x202c660</span></span>] picking yuvj420p out of <span class="hljs-number"><span class="hljs-number">3</span></span> ref:yuv420p alpha:<span class="hljs-number"><span class="hljs-number">0</span></span> [swscaler @ <span class="hljs-number"><span class="hljs-number">0x202cf</span></span>00] deprecated pixel format used, <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> sure you did set <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> correctly [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x202c660</span></span>] w:<span class="hljs-number"><span class="hljs-number">1280</span></span> h:<span class="hljs-number"><span class="hljs-number">544</span></span> fmt:yuv420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; w:<span class="hljs-number"><span class="hljs-number">1280</span></span> h:<span class="hljs-number"><span class="hljs-number">544</span></span> fmt:yuvj420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> flags:<span class="hljs-number"><span class="hljs-number">0x4</span></span> [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1ff5f</span></span>90] Forcing thread count to <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MJPEG encoding, use -thread_type slice or a constant quantizer <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you want to use multiple cpu cores [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1ff5f</span></span>90] intra_quant_bias = <span class="hljs-number"><span class="hljs-number">96</span></span> inter_quant_bias = <span class="hljs-number"><span class="hljs-number">0</span></span> Output #<span class="hljs-number"><span class="hljs-number">0</span></span>, image2, to <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-msa_x264_%d.jpg'</span></span>: Metadata: major_brand : isom minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: isomavc1 encoder : Lavf57<span class="hljs-number"><span class="hljs-number">.71</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>: Video: mjpeg, yuvj420p(pc), <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, q=<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">-31</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">0.10</span></span> fps, <span class="hljs-number"><span class="hljs-number">0.10</span></span> tbn, <span class="hljs-number"><span class="hljs-number">0.10</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">04.000000</span></span>Z handler_name : GPAC ISO Video Handler encoder : Lavc57<span class="hljs-number"><span class="hljs-number">.89</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> mjpeg Side data: cpb: bitrate max/min/avg: <span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">200000</span></span> buffer size: <span class="hljs-number"><span class="hljs-number">0</span></span> vbv_delay: <span class="hljs-number"><span class="hljs-number">-1</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) ... [h264 @ <span class="hljs-number"><span class="hljs-number">0x2060f</span></span>00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">2</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). [file @ <span class="hljs-number"><span class="hljs-number">0x209d</span></span>c40] Setting <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> whitelist <span class="hljs-string"><span class="hljs-string">'file,crypto'</span></span> [AVIOContext @ <span class="hljs-number"><span class="hljs-number">0x2189ab0</span></span>] Statistics: <span class="hljs-number"><span class="hljs-number">0</span></span> seeks, <span class="hljs-number"><span class="hljs-number">1</span></span> writeouts frame= <span class="hljs-number"><span class="hljs-number">15</span></span> fps=<span class="hljs-number"><span class="hljs-number">0.2</span></span> q=<span class="hljs-number"><span class="hljs-number">1.6</span></span> size=N/A time=<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">30.00</span></span> bitrate=N/A speed=<span class="hljs-number"><span class="hljs-number">2.03</span></span>x No more output streams to write to, finishing. frame= <span class="hljs-number"><span class="hljs-number">15</span></span> fps=<span class="hljs-number"><span class="hljs-number">0.2</span></span> q=<span class="hljs-number"><span class="hljs-number">1.6</span></span> Lsize=N/A time=<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">30.00</span></span> bitrate=N/A speed=<span class="hljs-number"><span class="hljs-number">2.03</span></span>x video:<span class="hljs-number"><span class="hljs-number">1382</span></span>kB audio:<span class="hljs-number"><span class="hljs-number">0</span></span>kB subtitle:<span class="hljs-number"><span class="hljs-number">0</span></span>kB other streams:<span class="hljs-number"><span class="hljs-number">0</span></span>kB global headers:<span class="hljs-number"><span class="hljs-number">0</span></span>kB muxing overhead: unknown Input file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./The Simpsons Movie - Trailer_x264.mp4): Input stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">3288</span></span> packets read (<span class="hljs-number"><span class="hljs-number">72364468</span></span> bytes); <span class="hljs-number"><span class="hljs-number">3288</span></span> frames decoded; Input stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> (audio): <span class="hljs-number"><span class="hljs-number">1</span></span> packets read (<span class="hljs-number"><span class="hljs-number">134</span></span> bytes); Total: <span class="hljs-number"><span class="hljs-number">3289</span></span> packets (<span class="hljs-number"><span class="hljs-number">72364602</span></span> bytes) demuxed Output file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./out_img/ffmpeg-msa_x264_%d.jpg): Output stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">15</span></span> frames encoded; <span class="hljs-number"><span class="hljs-number">15</span></span> packets muxed (<span class="hljs-number"><span class="hljs-number">1414925</span></span> bytes); Total: <span class="hljs-number"><span class="hljs-number">15</span></span> packets (<span class="hljs-number"><span class="hljs-number">1414925</span></span> bytes) muxed bench: utime=<span class="hljs-number"><span class="hljs-number">113.070s</span></span> <span class="hljs-number"><span class="hljs-number">3288</span></span> frames successfully decoded, <span class="hljs-number"><span class="hljs-number">0</span></span> decoding errors bench: maxrss=<span class="hljs-number"><span class="hljs-number">39264</span></span>kB [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x202bf</span></span>50] <span class="hljs-number"><span class="hljs-number">3288</span></span> frames in, <span class="hljs-number"><span class="hljs-number">15</span></span> frames out; <span class="hljs-number"><span class="hljs-number">3273</span></span> frames dropped, <span class="hljs-number"><span class="hljs-number">0</span></span> frames duplicated. [AVIOContext @ <span class="hljs-number"><span class="hljs-number">0x1fd</span></span>6230] Statistics: <span class="hljs-number"><span class="hljs-number">73517562</span></span> bytes read, <span class="hljs-number"><span class="hljs-number">5</span></span> seeks</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"> x265   MIPS SIMD (,  )</b> <div class="spoiler_text"><pre> <code class="hljs go">ffmpeg started on <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-18</span></span> at <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">58</span></span> Report written to <span class="hljs-string"><span class="hljs-string">"ffmpeg-20101018-002758.log"</span></span> Command line: ./ffmpeg-mips/ffmpeg-msa/bin/ffmpeg -i ./Tears_400_x265.mp4 -vf <span class="hljs-string"><span class="hljs-string">"fps=1"</span></span> <span class="hljs-string"><span class="hljs-string">"./out_img/ffmpeg-msa_x265_%d.jpg"</span></span> -report -benchmark ffmpeg version <span class="hljs-number"><span class="hljs-number">3.3</span></span> Copyright (c) <span class="hljs-number"><span class="hljs-number">2000</span></span><span class="hljs-number"><span class="hljs-number">-2017</span></span> the FFmpeg developers built with gcc <span class="hljs-number"><span class="hljs-number">4.9</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> (Codescape GNU Tools <span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MIPS MTI Linux) configuration: --enable-cross-compile --prefix=../ffmpeg-msa --cross-prefix=/home/stas/mipsfpga/toolchain/mips-mti-linux-gnu/<span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>/bin/mips-mti-linux-gnu- --arch=mips --cpu=p5600 --target-os=linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --disable-iconv libavutil <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> / <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> libavcodec <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> libavformat <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> libavdevice <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libavfilter <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> / <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> libswscale <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libswresample <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> / <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> Splitting the commandline. Reading option <span class="hljs-string"><span class="hljs-string">'-i'</span></span> ... matched as input url with argument <span class="hljs-string"><span class="hljs-string">'./Tears_400_x265.mp4'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-vf'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'vf'</span></span> (set video filters) with argument <span class="hljs-string"><span class="hljs-string">'fps=1'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-msa_x265_%d.jpg'</span></span> ... matched as output url. Reading option <span class="hljs-string"><span class="hljs-string">'-report'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'report'</span></span> (generate a report) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-benchmark'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'benchmark'</span></span> (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Finished splitting the commandline. Parsing a group of options: global . Applying option report (generate a report) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Applying option benchmark (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Successfully parsed a group of options. Parsing a group of options: input url ./Tears_400_x265.mp4. Successfully parsed a group of options. Opening an input file: ./Tears_400_x265.mp4. [file @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ce0e0] Setting <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> whitelist <span class="hljs-string"><span class="hljs-string">'file,crypto'</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Format mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 probed with size=<span class="hljs-number"><span class="hljs-number">2048</span></span> and score=<span class="hljs-number"><span class="hljs-number">100</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] ISO: File Type Major Brand: iso4 [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Unknown dref <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">0x206c7275</span></span> size <span class="hljs-number"><span class="hljs-number">12</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] Before avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">705972</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">32827</span></span> seeks:<span class="hljs-number"><span class="hljs-number">1</span></span> nb_streams:<span class="hljs-number"><span class="hljs-number">1</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">32</span></span>(VPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] Decoding VPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">33</span></span>(SPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] Decoding SPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] Decoding VUI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">34</span></span>(PPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>ceca0] Decoding PPS [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] All info found [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1fcd</span></span>980] After avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">20299</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">65595</span></span> seeks:<span class="hljs-number"><span class="hljs-number">2</span></span> frames:<span class="hljs-number"><span class="hljs-number">1</span></span> Input #<span class="hljs-number"><span class="hljs-number">0</span></span>, mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2, from <span class="hljs-string"><span class="hljs-string">'./Tears_400_x265.mp4'</span></span>: Metadata: major_brand : iso4 minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: iso4hvc1 creation_time : <span class="hljs-number"><span class="hljs-number">2014</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T18:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">46.000000</span></span>Z Duration: <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">13.96</span></span>, start: <span class="hljs-number"><span class="hljs-number">0.125000</span></span>, bitrate: <span class="hljs-number"><span class="hljs-number">404</span></span> kb/s Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span>: Video: hevc (Main) (hvc1 / <span class="hljs-number"><span class="hljs-number">0x31637668</span></span>), yuv420p(tv), <span class="hljs-number"><span class="hljs-number">1920</span></span>x800, <span class="hljs-number"><span class="hljs-number">402</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">24</span></span> fps, <span class="hljs-number"><span class="hljs-number">24</span></span> tbr, <span class="hljs-number"><span class="hljs-number">24</span></span>k tbn, <span class="hljs-number"><span class="hljs-number">24</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2014</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T18:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">46.000000</span></span>Z handler_name : hevc:fps=<span class="hljs-number"><span class="hljs-number">24</span></span>@GPAC0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>-DEV-rev4807 Successfully opened the file. Parsing a group of options: output url ./out_img/ffmpeg-msa_x265_%d.jpg. Applying option vf (set video filters) with argument fps=<span class="hljs-number"><span class="hljs-number">1.</span></span> Successfully parsed a group of options. Opening an output file: ./out_img/ffmpeg-msa_x265_%d.jpg. Successfully opened the file. detected <span class="hljs-number"><span class="hljs-number">2</span></span> logical cores [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">32</span></span>(VPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoding VPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">33</span></span>(SPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoding SPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoding VUI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">34</span></span>(PPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoding PPS Stream mapping: Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (hevc (native) -&gt; mjpeg (native)) Press [q] to stop, [?] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">39</span></span>(SEI_PREFIX), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">39</span></span>(SEI_PREFIX), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">19</span></span>(IDR_W_RADL), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoding SEI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Skipped PREFIX SEI <span class="hljs-number"><span class="hljs-number">5</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoding SEI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Skipped PREFIX SEI <span class="hljs-number"><span class="hljs-number">6</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1ff</span></span>eba0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>(TRAIL_R), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x200c4d</span></span>0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>(TRAIL_R), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x200c4d</span></span>0] Output frame with POC <span class="hljs-number"><span class="hljs-number">0.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">0.</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">0</span></span>(TRAIL_N), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e5a00] Output frame with POC <span class="hljs-number"><span class="hljs-number">1.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1ff</span></span>eba0] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">5.</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1ff</span></span>eba0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">0</span></span>(TRAIL_N), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1ff</span></span>eba0] Output frame with POC <span class="hljs-number"><span class="hljs-number">2.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x200c4d</span></span>0] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">3.</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x201a6c0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'fps'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1'</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x201a6c0</span></span>] fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'video_size'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1920x800'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmt'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'time_base'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1/24000'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'pixel_aspect'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0/1'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'sws_param'</span></span> to value <span class="hljs-string"><span class="hljs-string">'flags=2'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'frame_rate'</span></span> to value <span class="hljs-string"><span class="hljs-string">'24/1'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x201abb0</span></span>] w:<span class="hljs-number"><span class="hljs-number">1920</span></span> h:<span class="hljs-number"><span class="hljs-number">800</span></span> pixfmt:yuv420p tb:<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span> fr:<span class="hljs-number"><span class="hljs-number">24</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> sws_param:flags=<span class="hljs-number"><span class="hljs-number">2</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x201aad</span></span>0] compat: called with args=[yuvj420p|yuvj422p|yuvj444p] [format @ <span class="hljs-number"><span class="hljs-number">0x201aad</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmts'</span></span> to value <span class="hljs-string"><span class="hljs-string">'yuvj420p|yuvj422p|yuvj444p'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x201a350</span></span>] Setting <span class="hljs-string"><span class="hljs-string">'flags'</span></span> to value <span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x201a350</span></span>] w:iw h:ih flags:<span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> interl:<span class="hljs-number"><span class="hljs-number">0</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x201aad</span></span>0] auto-inserting filter <span class="hljs-string"><span class="hljs-string">'auto_scaler_0'</span></span> between the filter <span class="hljs-string"><span class="hljs-string">'Parsed_fps_0'</span></span> and the filter <span class="hljs-string"><span class="hljs-string">'format'</span></span> [AVFilterGraph @ <span class="hljs-number"><span class="hljs-number">0x201a2f</span></span>0] query_formats: <span class="hljs-number"><span class="hljs-number">4</span></span> queried, <span class="hljs-number"><span class="hljs-number">2</span></span> merged, <span class="hljs-number"><span class="hljs-number">1</span></span> already done, <span class="hljs-number"><span class="hljs-number">0</span></span> delayed [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x201a350</span></span>] picking yuvj420p out of <span class="hljs-number"><span class="hljs-number">3</span></span> ref:yuv420p alpha:<span class="hljs-number"><span class="hljs-number">0</span></span> [swscaler @ <span class="hljs-number"><span class="hljs-number">0x21d7d</span></span>a0] deprecated pixel format used, <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> sure you did set <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> correctly [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x201a350</span></span>] w:<span class="hljs-number"><span class="hljs-number">1920</span></span> h:<span class="hljs-number"><span class="hljs-number">800</span></span> fmt:yuv420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; w:<span class="hljs-number"><span class="hljs-number">1920</span></span> h:<span class="hljs-number"><span class="hljs-number">800</span></span> fmt:yuvj420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> flags:<span class="hljs-number"><span class="hljs-number">0x4</span></span> [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e2ba0] Forcing thread count to <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MJPEG encoding, use -thread_type slice or a constant quantizer <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you want to use multiple cpu cores [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>e2ba0] intra_quant_bias = <span class="hljs-number"><span class="hljs-number">96</span></span> inter_quant_bias = <span class="hljs-number"><span class="hljs-number">0</span></span> Output #<span class="hljs-number"><span class="hljs-number">0</span></span>, image2, to <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-msa_x265_%d.jpg'</span></span>: Metadata: major_brand : iso4 minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: iso4hvc1 encoder : Lavf57<span class="hljs-number"><span class="hljs-number">.71</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>: Video: mjpeg, yuvj420p(pc), <span class="hljs-number"><span class="hljs-number">1920</span></span>x800, q=<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">-31</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">1</span></span> fps, <span class="hljs-number"><span class="hljs-number">1</span></span> tbn, <span class="hljs-number"><span class="hljs-number">1</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2014</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T18:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">46.000000</span></span>Z handler_name : hevc:fps=<span class="hljs-number"><span class="hljs-number">24</span></span>@GPAC0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>-DEV-rev4807 encoder : Lavc57<span class="hljs-number"><span class="hljs-number">.89</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> mjpeg Side data: cpb: bitrate max/min/avg: <span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">200000</span></span> buffer size: <span class="hljs-number"><span class="hljs-number">0</span></span> vbv_delay: <span class="hljs-number"><span class="hljs-number">-1</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) ... No more output streams to write to, finishing. frame= <span class="hljs-number"><span class="hljs-number">15</span></span> fps=<span class="hljs-number"><span class="hljs-number">0.7</span></span> q=<span class="hljs-number"><span class="hljs-number">24.8</span></span> Lsize=N/A time=<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">15.00</span></span> bitrate=N/A speed=<span class="hljs-number"><span class="hljs-number">0.668</span></span>x video:<span class="hljs-number"><span class="hljs-number">1084</span></span>kB audio:<span class="hljs-number"><span class="hljs-number">0</span></span>kB subtitle:<span class="hljs-number"><span class="hljs-number">0</span></span>kB other streams:<span class="hljs-number"><span class="hljs-number">0</span></span>kB global headers:<span class="hljs-number"><span class="hljs-number">0</span></span>kB muxing overhead: unknown Input file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./Tears_400_x265.mp4): Input stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">335</span></span> packets read (<span class="hljs-number"><span class="hljs-number">701773</span></span> bytes); <span class="hljs-number"><span class="hljs-number">335</span></span> frames decoded; Total: <span class="hljs-number"><span class="hljs-number">335</span></span> packets (<span class="hljs-number"><span class="hljs-number">701773</span></span> bytes) demuxed Output file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./out_img/ffmpeg-msa_x265_%d.jpg): Output stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">15</span></span> frames encoded; <span class="hljs-number"><span class="hljs-number">15</span></span> packets muxed (<span class="hljs-number"><span class="hljs-number">1109604</span></span> bytes); Total: <span class="hljs-number"><span class="hljs-number">15</span></span> packets (<span class="hljs-number"><span class="hljs-number">1109604</span></span> bytes) muxed bench: utime=<span class="hljs-number"><span class="hljs-number">22.300s</span></span> <span class="hljs-number"><span class="hljs-number">335</span></span> frames successfully decoded, <span class="hljs-number"><span class="hljs-number">0</span></span> decoding errors bench: maxrss=<span class="hljs-number"><span class="hljs-number">72432</span></span>kB [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x201a6c0</span></span>] <span class="hljs-number"><span class="hljs-number">335</span></span> frames in, <span class="hljs-number"><span class="hljs-number">15</span></span> frames out; <span class="hljs-number"><span class="hljs-number">320</span></span> frames dropped, <span class="hljs-number"><span class="hljs-number">0</span></span> frames duplicated. [AVIOContext @ <span class="hljs-number"><span class="hljs-number">0x1fd</span></span>6220] Statistics: <span class="hljs-number"><span class="hljs-number">734659</span></span> bytes read, <span class="hljs-number"><span class="hljs-number">2</span></span> seeks</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"> x264  MIPS SIMD (,  )</b> <div class="spoiler_text"><pre> <code class="hljs go">ffmpeg started on <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-18</span></span> at <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">28</span></span>:<span class="hljs-number"><span class="hljs-number">31</span></span> Report written to <span class="hljs-string"><span class="hljs-string">"ffmpeg-20101018-002831.log"</span></span> Command line: ./ffmpeg-mips/ffmpeg-soft/bin/ffmpeg -i <span class="hljs-string"><span class="hljs-string">"./The Simpsons Movie - Trailer_x264.mp4"</span></span> -vf <span class="hljs-string"><span class="hljs-string">"fps=1/10"</span></span> <span class="hljs-string"><span class="hljs-string">"./out_img/ffmpeg-soft_x264_%d.jpg"</span></span> -report -benchmark ffmpeg version <span class="hljs-number"><span class="hljs-number">3.3</span></span> Copyright (c) <span class="hljs-number"><span class="hljs-number">2000</span></span><span class="hljs-number"><span class="hljs-number">-2017</span></span> the FFmpeg developers built with gcc <span class="hljs-number"><span class="hljs-number">4.9</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> (Codescape GNU Tools <span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MIPS MTI Linux) configuration: --enable-cross-compile --prefix=../ffmpeg-soft --cross-prefix=/home/stas/mipsfpga/toolchain/mips-mti-linux-gnu/<span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>/bin/mips-mti-linux-gnu- --arch=mips --cpu=p5600 --target-os=linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --disable-iconv --disable-msa libavutil <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> / <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> libavcodec <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> libavformat <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> libavdevice <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libavfilter <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> / <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> libswscale <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libswresample <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> / <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> Splitting the commandline. Reading option <span class="hljs-string"><span class="hljs-string">'-i'</span></span> ... matched as input url with argument <span class="hljs-string"><span class="hljs-string">'./The Simpsons Movie - Trailer_x264.mp4'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-vf'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'vf'</span></span> (set video filters) with argument <span class="hljs-string"><span class="hljs-string">'fps=1/10'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-soft_x264_%d.jpg'</span></span> ... matched as output url. Reading option <span class="hljs-string"><span class="hljs-string">'-report'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'report'</span></span> (generate a report) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-benchmark'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'benchmark'</span></span> (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Finished splitting the commandline. Parsing a group of options: global . Applying option report (generate a report) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Applying option benchmark (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Successfully parsed a group of options. Parsing a group of options: input url ./The Simpsons Movie - Trailer_x264.mp4. Successfully parsed a group of options. Opening an input file: ./The Simpsons Movie - Trailer_x264.mp4. [file @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4a0e0] Setting <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> whitelist <span class="hljs-string"><span class="hljs-string">'file,crypto'</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Format mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 probed with size=<span class="hljs-number"><span class="hljs-number">2048</span></span> and score=<span class="hljs-number"><span class="hljs-number">100</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] ISO: File Type Major Brand: isom [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Unknown dref <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">0x206c7275</span></span> size <span class="hljs-number"><span class="hljs-number">12</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Unknown dref <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">0x206c7275</span></span> size <span class="hljs-number"><span class="hljs-number">12</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Before avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">73516232</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">65587</span></span> seeks:<span class="hljs-number"><span class="hljs-number">1</span></span> nb_streams:<span class="hljs-number"><span class="hljs-number">2</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">7</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">8</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">6</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">5</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] user data:<span class="hljs-string"><span class="hljs-string">"x264 - core 54 svn-620M - H.264/MPEG-4 AVC codec - Copyleft 2005 - http://www.videolan.org/x264.html - options: cabac=1 ref=5 deblock=1:0:0 analyse=0x1:0x131 me=umh subme=6 brdo=1 mixed_ref=0 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 chroma_qp_offset=0 threads=1 nr=0 decimate=1 mbaff=0 bframes=1 b_pyramid=0 b_adapt=1 b_bias=0 direct=3 wpredb=0 bime=0 keyint=250 keyint_min=25 scenecut=40 rc=2pass bitrate=4214 ratetol=1.0 rceq='blurCplx^(1-qComp)' qcomp=0.60 qpmin=10 qpmax=51 qpstep=4 cplxblur=20.0 qblur=0.5 ip_ratio=1.40 pb_ratio=1.30"</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] Reinit context to <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, pix_fmt: yuv420p [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4acb0] no picture [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] All info found [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] After avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">94845</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">141348</span></span> seeks:<span class="hljs-number"><span class="hljs-number">2</span></span> frames:<span class="hljs-number"><span class="hljs-number">13</span></span> Input #<span class="hljs-number"><span class="hljs-number">0</span></span>, mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2, from <span class="hljs-string"><span class="hljs-string">'./The Simpsons Movie - Trailer_x264.mp4'</span></span>: Metadata: major_brand : isom minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: isomavc1 creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">04.000000</span></span>Z Duration: <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">17.30</span></span>, start: <span class="hljs-number"><span class="hljs-number">0.000000</span></span>, bitrate: <span class="hljs-number"><span class="hljs-number">4283</span></span> kb/s Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span>: Video: h264 (Main) (avc1 / <span class="hljs-number"><span class="hljs-number">0x31637661</span></span>), yuv420p, <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, <span class="hljs-number"><span class="hljs-number">4221</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">23.98</span></span> fps, <span class="hljs-number"><span class="hljs-number">23.98</span></span> tbr, <span class="hljs-number"><span class="hljs-number">24</span></span>k tbn, <span class="hljs-number"><span class="hljs-number">47.95</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">04.000000</span></span>Z handler_name : GPAC ISO Video Handler Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>(und), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">48000</span></span>: Audio: aac (HE-AAC) (mp4a / <span class="hljs-number"><span class="hljs-number">0x6134706D</span></span>), <span class="hljs-number"><span class="hljs-number">48000</span></span> Hz, stereo, fltp, <span class="hljs-number"><span class="hljs-number">64</span></span> kb/s (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">08.000000</span></span>Z handler_name : GPAC ISO Audio Handler Successfully opened the file. Parsing a group of options: output url ./out_img/ffmpeg-soft_x264_%d.jpg. Applying option vf (set video filters) with argument fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">10.</span></span> Successfully parsed a group of options. Opening an output file: ./out_img/ffmpeg-soft_x264_%d.jpg. Successfully opened the file. detected <span class="hljs-number"><span class="hljs-number">2</span></span> logical cores [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">7</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">8</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> Stream mapping: Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (h264 (native) -&gt; mjpeg (native)) Press [q] to stop, [?] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">6</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">5</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">3</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] user data:<span class="hljs-string"><span class="hljs-string">"x264 - core 54 svn-620M - H.264/MPEG-4 AVC codec - Copyleft 2005 - http://www.videolan.org/x264.html - options: cabac=1 ref=5 deblock=1:0:0 analyse=0x1:0x131 me=umh subme=6 brdo=1 mixed_ref=0 me_range=16 chroma_me=1 trellis=1 8x8dct=0 cqm=0 deadzone=21,11 chroma_qp_offset=0 threads=1 nr=0 decimate=1 mbaff=0 bframes=1 b_pyramid=0 b_adapt=1 b_bias=0 direct=3 wpredb=0 bime=0 keyint=250 keyint_min=25 scenecut=40 rc=2pass bitrate=4214 ratetol=1.0 rceq='blurCplx^(1-qComp)' qcomp=0.60 qpmin=10 qpmax=51 qpstep=4 cplxblur=20.0 qblur=0.5 ip_ratio=1.40 pb_ratio=1.30"</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] Reinit context to <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, pix_fmt: yuv420p [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] no picture cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a2050] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">2</span></span> [h264 @ <span class="hljs-number"><span class="hljs-number">0x1fdcf</span></span>00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>951e0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">2</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1fa7f</span></span>50] Setting <span class="hljs-string"><span class="hljs-string">'fps'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1/10'</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1fa7f</span></span>50] fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'video_size'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1280x544'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmt'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'time_base'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1/24000'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'pixel_aspect'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0/1'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'sws_param'</span></span> to value <span class="hljs-string"><span class="hljs-string">'flags=2'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'frame_rate'</span></span> to value <span class="hljs-string"><span class="hljs-string">'24000/1001'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1fa86f</span></span>0] w:<span class="hljs-number"><span class="hljs-number">1280</span></span> h:<span class="hljs-number"><span class="hljs-number">544</span></span> pixfmt:yuv420p tb:<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span> fr:<span class="hljs-number"><span class="hljs-number">24000</span></span>/<span class="hljs-number"><span class="hljs-number">1001</span></span> sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> sws_param:flags=<span class="hljs-number"><span class="hljs-number">2</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8030] compat: called with args=[yuvj420p|yuvj422p|yuvj444p] [format @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8030] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmts'</span></span> to value <span class="hljs-string"><span class="hljs-string">'yuvj420p|yuvj422p|yuvj444p'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8660] Setting <span class="hljs-string"><span class="hljs-string">'flags'</span></span> to value <span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8660] w:iw h:ih flags:<span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> interl:<span class="hljs-number"><span class="hljs-number">0</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8030] auto-inserting filter <span class="hljs-string"><span class="hljs-string">'auto_scaler_0'</span></span> between the filter <span class="hljs-string"><span class="hljs-string">'Parsed_fps_0'</span></span> and the filter <span class="hljs-string"><span class="hljs-string">'format'</span></span> [AVFilterGraph @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a7b80] query_formats: <span class="hljs-number"><span class="hljs-number">4</span></span> queried, <span class="hljs-number"><span class="hljs-number">2</span></span> merged, <span class="hljs-number"><span class="hljs-number">1</span></span> already done, <span class="hljs-number"><span class="hljs-number">0</span></span> delayed [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8660] picking yuvj420p out of <span class="hljs-number"><span class="hljs-number">3</span></span> ref:yuv420p alpha:<span class="hljs-number"><span class="hljs-number">0</span></span> [swscaler @ <span class="hljs-number"><span class="hljs-number">0x1fa8f</span></span>00] deprecated pixel format used, <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> sure you did set <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> correctly [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a8660] w:<span class="hljs-number"><span class="hljs-number">1280</span></span> h:<span class="hljs-number"><span class="hljs-number">544</span></span> fmt:yuv420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; w:<span class="hljs-number"><span class="hljs-number">1280</span></span> h:<span class="hljs-number"><span class="hljs-number">544</span></span> fmt:yuvj420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> flags:<span class="hljs-number"><span class="hljs-number">0x4</span></span> [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1f71f</span></span>90] Forcing thread count to <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MJPEG encoding, use -thread_type slice or a constant quantizer <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you want to use multiple cpu cores [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1f71f</span></span>90] intra_quant_bias = <span class="hljs-number"><span class="hljs-number">96</span></span> inter_quant_bias = <span class="hljs-number"><span class="hljs-number">0</span></span> Output #<span class="hljs-number"><span class="hljs-number">0</span></span>, image2, to <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-soft_x264_%d.jpg'</span></span>: Metadata: major_brand : isom minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: isomavc1 encoder : Lavf57<span class="hljs-number"><span class="hljs-number">.71</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>: Video: mjpeg, yuvj420p(pc), <span class="hljs-number"><span class="hljs-number">1280</span></span>x544, q=<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">-31</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">0.10</span></span> fps, <span class="hljs-number"><span class="hljs-number">0.10</span></span> tbn, <span class="hljs-number"><span class="hljs-number">0.10</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2007</span></span><span class="hljs-number"><span class="hljs-number">-02</span></span><span class="hljs-number"><span class="hljs-number">-19</span></span>T05:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">04.000000</span></span>Z handler_name : GPAC ISO Video Handler encoder : Lavc57<span class="hljs-number"><span class="hljs-number">.89</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> mjpeg Side data: cpb: bitrate max/min/avg: <span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">200000</span></span> buffer size: <span class="hljs-number"><span class="hljs-number">0</span></span> vbv_delay: <span class="hljs-number"><span class="hljs-number">-1</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1fa7f</span></span>50] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). [h264 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>a2050] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>, nal_ref_idc: <span class="hljs-number"><span class="hljs-number">0</span></span> ... [AVIOContext @ <span class="hljs-number"><span class="hljs-number">0x2229af</span></span>0] Statistics: <span class="hljs-number"><span class="hljs-number">0</span></span> seeks, <span class="hljs-number"><span class="hljs-number">1</span></span> writeouts No more output streams to write to, finishing. frame= <span class="hljs-number"><span class="hljs-number">15</span></span> fps=<span class="hljs-number"><span class="hljs-number">0.1</span></span> q=<span class="hljs-number"><span class="hljs-number">1.6</span></span> Lsize=N/A time=<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">30.00</span></span> bitrate=N/A speed=<span class="hljs-number"><span class="hljs-number">1.45</span></span>x video:<span class="hljs-number"><span class="hljs-number">1382</span></span>kB audio:<span class="hljs-number"><span class="hljs-number">0</span></span>kB subtitle:<span class="hljs-number"><span class="hljs-number">0</span></span>kB other streams:<span class="hljs-number"><span class="hljs-number">0</span></span>kB global headers:<span class="hljs-number"><span class="hljs-number">0</span></span>kB muxing overhead: unknown Input file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./The Simpsons Movie - Trailer_x264.mp4): Input stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">3288</span></span> packets read (<span class="hljs-number"><span class="hljs-number">72364468</span></span> bytes); <span class="hljs-number"><span class="hljs-number">3288</span></span> frames decoded; Input stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span> (audio): <span class="hljs-number"><span class="hljs-number">1</span></span> packets read (<span class="hljs-number"><span class="hljs-number">134</span></span> bytes); Total: <span class="hljs-number"><span class="hljs-number">3289</span></span> packets (<span class="hljs-number"><span class="hljs-number">72364602</span></span> bytes) demuxed Output file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./out_img/ffmpeg-soft_x264_%d.jpg): Output stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">15</span></span> frames encoded; <span class="hljs-number"><span class="hljs-number">15</span></span> packets muxed (<span class="hljs-number"><span class="hljs-number">1414925</span></span> bytes); Total: <span class="hljs-number"><span class="hljs-number">15</span></span> packets (<span class="hljs-number"><span class="hljs-number">1414925</span></span> bytes) muxed bench: utime=<span class="hljs-number"><span class="hljs-number">164.240s</span></span> <span class="hljs-number"><span class="hljs-number">3288</span></span> frames successfully decoded, <span class="hljs-number"><span class="hljs-number">0</span></span> decoding errors bench: maxrss=<span class="hljs-number"><span class="hljs-number">39936</span></span>kB [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1fa7f</span></span>50] <span class="hljs-number"><span class="hljs-number">3288</span></span> frames in, <span class="hljs-number"><span class="hljs-number">15</span></span> frames out; <span class="hljs-number"><span class="hljs-number">3273</span></span> frames dropped, <span class="hljs-number"><span class="hljs-number">0</span></span> frames duplicated. [AVIOContext @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>52230] Statistics: <span class="hljs-number"><span class="hljs-number">73517562</span></span> bytes read, <span class="hljs-number"><span class="hljs-number">5</span></span> seeks</code> </pre></div></div><br><div class="spoiler"> <b class="spoiler_title"> x265  MIPS SIMD (,  )</b> <div class="spoiler_text"><pre> <code class="hljs go">ffmpeg started on <span class="hljs-number"><span class="hljs-number">2010</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span><span class="hljs-number"><span class="hljs-number">-18</span></span> at <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> Report written to <span class="hljs-string"><span class="hljs-string">"ffmpeg-20101018-002714.log"</span></span> Command line: ./ffmpeg-mips/ffmpeg-soft/bin/ffmpeg -i ./Tears_400_x265.mp4 -vf <span class="hljs-string"><span class="hljs-string">"fps=1"</span></span> <span class="hljs-string"><span class="hljs-string">"./out_img/ffmpeg-soft_x265_%d.jpg"</span></span> -report -benchmark ffmpeg version <span class="hljs-number"><span class="hljs-number">3.3</span></span> Copyright (c) <span class="hljs-number"><span class="hljs-number">2000</span></span><span class="hljs-number"><span class="hljs-number">-2017</span></span> the FFmpeg developers built with gcc <span class="hljs-number"><span class="hljs-number">4.9</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> (Codescape GNU Tools <span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MIPS MTI Linux) configuration: --enable-cross-compile --prefix=../ffmpeg-soft --cross-prefix=/home/stas/mipsfpga/toolchain/mips-mti-linux-gnu/<span class="hljs-number"><span class="hljs-number">2016.05</span></span><span class="hljs-number"><span class="hljs-number">-03</span></span>/bin/mips-mti-linux-gnu- --arch=mips --cpu=p5600 --target-os=linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">'-EL -static'</span></span> --disable-iconv --disable-msa libavutil <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> / <span class="hljs-number"><span class="hljs-number">55.</span></span> <span class="hljs-number"><span class="hljs-number">58.100</span></span> libavcodec <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">89.100</span></span> libavformat <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">71.100</span></span> libavdevice <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">57.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libavfilter <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> / <span class="hljs-number"><span class="hljs-number">6.</span></span> <span class="hljs-number"><span class="hljs-number">82.100</span></span> libswscale <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> / <span class="hljs-number"><span class="hljs-number">4.</span></span> <span class="hljs-number"><span class="hljs-number">6.100</span></span> libswresample <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> / <span class="hljs-number"><span class="hljs-number">2.</span></span> <span class="hljs-number"><span class="hljs-number">7.100</span></span> Splitting the commandline. Reading option <span class="hljs-string"><span class="hljs-string">'-i'</span></span> ... matched as input url with argument <span class="hljs-string"><span class="hljs-string">'./Tears_400_x265.mp4'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-vf'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'vf'</span></span> (set video filters) with argument <span class="hljs-string"><span class="hljs-string">'fps=1'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-soft_x265_%d.jpg'</span></span> ... matched as output url. Reading option <span class="hljs-string"><span class="hljs-string">'-report'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'report'</span></span> (generate a report) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Reading option <span class="hljs-string"><span class="hljs-string">'-benchmark'</span></span> ... matched as option <span class="hljs-string"><span class="hljs-string">'benchmark'</span></span> (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-string"><span class="hljs-string">'1'</span></span>. Finished splitting the commandline. Parsing a group of options: global . Applying option report (generate a report) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Applying option benchmark (add timings <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> benchmarking) with argument <span class="hljs-number"><span class="hljs-number">1.</span></span> Successfully parsed a group of options. Parsing a group of options: input url ./Tears_400_x265.mp4. Successfully parsed a group of options. Opening an input file: ./Tears_400_x265.mp4. [file @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4a0e0] Setting <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> whitelist <span class="hljs-string"><span class="hljs-string">'file,crypto'</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Format mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 probed with size=<span class="hljs-number"><span class="hljs-number">2048</span></span> and score=<span class="hljs-number"><span class="hljs-number">100</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] ISO: File Type Major Brand: iso4 [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Unknown dref <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-number"><span class="hljs-number">0x206c7275</span></span> size <span class="hljs-number"><span class="hljs-number">12</span></span> [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] Before avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">705972</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">32827</span></span> seeks:<span class="hljs-number"><span class="hljs-number">1</span></span> nb_streams:<span class="hljs-number"><span class="hljs-number">1</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">32</span></span>(VPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] Decoding VPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">33</span></span>(SPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] Decoding SPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] Decoding VUI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">34</span></span>(PPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>4aca0] Decoding PPS [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] All info found [mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>49980] After avformat_find_stream_info() pos: <span class="hljs-number"><span class="hljs-number">20299</span></span> bytes read:<span class="hljs-number"><span class="hljs-number">65595</span></span> seeks:<span class="hljs-number"><span class="hljs-number">2</span></span> frames:<span class="hljs-number"><span class="hljs-number">1</span></span> Input #<span class="hljs-number"><span class="hljs-number">0</span></span>, mov,mp4,m4a,<span class="hljs-number"><span class="hljs-number">3</span></span>gp,<span class="hljs-number"><span class="hljs-number">3</span></span>g2,mj2, from <span class="hljs-string"><span class="hljs-string">'./Tears_400_x265.mp4'</span></span>: Metadata: major_brand : iso4 minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: iso4hvc1 creation_time : <span class="hljs-number"><span class="hljs-number">2014</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T18:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">46.000000</span></span>Z Duration: <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">13.96</span></span>, start: <span class="hljs-number"><span class="hljs-number">0.125000</span></span>, bitrate: <span class="hljs-number"><span class="hljs-number">404</span></span> kb/s Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span>: Video: hevc (Main) (hvc1 / <span class="hljs-number"><span class="hljs-number">0x31637668</span></span>), yuv420p(tv), <span class="hljs-number"><span class="hljs-number">1920</span></span>x800, <span class="hljs-number"><span class="hljs-number">402</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">24</span></span> fps, <span class="hljs-number"><span class="hljs-number">24</span></span> tbr, <span class="hljs-number"><span class="hljs-number">24</span></span>k tbn, <span class="hljs-number"><span class="hljs-number">24</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2014</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T18:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">46.000000</span></span>Z handler_name : hevc:fps=<span class="hljs-number"><span class="hljs-number">24</span></span>@GPAC0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>-DEV-rev4807 Successfully opened the file. Parsing a group of options: output url ./out_img/ffmpeg-soft_x265_%d.jpg. Applying option vf (set video filters) with argument fps=<span class="hljs-number"><span class="hljs-number">1.</span></span> Successfully parsed a group of options. Opening an output file: ./out_img/ffmpeg-soft_x265_%d.jpg. Successfully opened the file. detected <span class="hljs-number"><span class="hljs-number">2</span></span> logical cores [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">32</span></span>(VPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoding VPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">33</span></span>(SPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoding SPS [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Main profile bitstream [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoding VUI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">34</span></span>(PPS), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoding PPS Stream mapping: Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (hevc (native) -&gt; mjpeg (native)) Press [q] to stop, [?] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> help cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">39</span></span>(SEI_PREFIX), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">39</span></span>(SEI_PREFIX), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">19</span></span>(IDR_W_RADL), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoding SEI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Skipped PREFIX SEI <span class="hljs-number"><span class="hljs-number">5</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoding SEI [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Skipped PREFIX SEI <span class="hljs-number"><span class="hljs-number">6</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>7aba0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>(TRAIL_R), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f884d</span></span>0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>(TRAIL_R), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f884d</span></span>0] Output frame with POC <span class="hljs-number"><span class="hljs-number">0.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">0.</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">0</span></span>(TRAIL_N), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Output frame with POC <span class="hljs-number"><span class="hljs-number">1.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>7aba0] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">5.</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>7aba0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">0</span></span>(TRAIL_N), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>7aba0] Output frame with POC <span class="hljs-number"><span class="hljs-number">2.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f884d</span></span>0] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">3.</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>966c0] Setting <span class="hljs-string"><span class="hljs-string">'fps'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1'</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>966c0] fps=<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] Setting <span class="hljs-string"><span class="hljs-string">'video_size'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1920x800'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmt'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] Setting <span class="hljs-string"><span class="hljs-string">'time_base'</span></span> to value <span class="hljs-string"><span class="hljs-string">'1/24000'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] Setting <span class="hljs-string"><span class="hljs-string">'pixel_aspect'</span></span> to value <span class="hljs-string"><span class="hljs-string">'0/1'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] Setting <span class="hljs-string"><span class="hljs-string">'sws_param'</span></span> to value <span class="hljs-string"><span class="hljs-string">'flags=2'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] Setting <span class="hljs-string"><span class="hljs-string">'frame_rate'</span></span> to value <span class="hljs-string"><span class="hljs-string">'24/1'</span></span> [graph <span class="hljs-number"><span class="hljs-number">0</span></span> input from stream <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96bb0] w:<span class="hljs-number"><span class="hljs-number">1920</span></span> h:<span class="hljs-number"><span class="hljs-number">800</span></span> pixfmt:yuv420p tb:<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">24000</span></span> fr:<span class="hljs-number"><span class="hljs-number">24</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> sws_param:flags=<span class="hljs-number"><span class="hljs-number">2</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x1f96ad</span></span>0] compat: called with args=[yuvj420p|yuvj422p|yuvj444p] [format @ <span class="hljs-number"><span class="hljs-number">0x1f96ad</span></span>0] Setting <span class="hljs-string"><span class="hljs-string">'pix_fmts'</span></span> to value <span class="hljs-string"><span class="hljs-string">'yuvj420p|yuvj422p|yuvj444p'</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">1.</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>7aba0] Decoded frame with POC <span class="hljs-number"><span class="hljs-number">2.</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96350] Setting <span class="hljs-string"><span class="hljs-string">'flags'</span></span> to value <span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96350] w:iw h:ih flags:<span class="hljs-string"><span class="hljs-string">'bicubic'</span></span> interl:<span class="hljs-number"><span class="hljs-number">0</span></span> [format @ <span class="hljs-number"><span class="hljs-number">0x1f96ad</span></span>0] auto-inserting filter <span class="hljs-string"><span class="hljs-string">'auto_scaler_0'</span></span> between the filter <span class="hljs-string"><span class="hljs-string">'Parsed_fps_0'</span></span> and the filter <span class="hljs-string"><span class="hljs-string">'format'</span></span> [AVFilterGraph @ <span class="hljs-number"><span class="hljs-number">0x1f962f</span></span>0] query_formats: <span class="hljs-number"><span class="hljs-number">4</span></span> queried, <span class="hljs-number"><span class="hljs-number">2</span></span> merged, <span class="hljs-number"><span class="hljs-number">1</span></span> already done, <span class="hljs-number"><span class="hljs-number">0</span></span> delayed [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96350] picking yuvj420p out of <span class="hljs-number"><span class="hljs-number">3</span></span> ref:yuv420p alpha:<span class="hljs-number"><span class="hljs-number">0</span></span> [swscaler @ <span class="hljs-number"><span class="hljs-number">0x2153d</span></span>a0] deprecated pixel format used, <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> sure you did set <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> correctly [auto_scaler_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>96350] w:<span class="hljs-number"><span class="hljs-number">1920</span></span> h:<span class="hljs-number"><span class="hljs-number">800</span></span> fmt:yuv420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; w:<span class="hljs-number"><span class="hljs-number">1920</span></span> h:<span class="hljs-number"><span class="hljs-number">800</span></span> fmt:yuvj420p sar:<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span> flags:<span class="hljs-number"><span class="hljs-number">0x4</span></span> [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>5eba0] Forcing thread count to <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MJPEG encoding, use -thread_type slice or a constant quantizer <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you want to use multiple cpu cores [mjpeg @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>5eba0] intra_quant_bias = <span class="hljs-number"><span class="hljs-number">96</span></span> inter_quant_bias = <span class="hljs-number"><span class="hljs-number">0</span></span> Output #<span class="hljs-number"><span class="hljs-number">0</span></span>, image2, to <span class="hljs-string"><span class="hljs-string">'./out_img/ffmpeg-soft_x265_%d.jpg'</span></span>: Metadata: major_brand : iso4 minor_version : <span class="hljs-number"><span class="hljs-number">1</span></span> compatible_brands: iso4hvc1 encoder : Lavf57<span class="hljs-number"><span class="hljs-number">.71</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> Stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>(und), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span>: Video: mjpeg, yuvj420p(pc), <span class="hljs-number"><span class="hljs-number">1920</span></span>x800, q=<span class="hljs-number"><span class="hljs-number">2</span></span><span class="hljs-number"><span class="hljs-number">-31</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span> kb/s, <span class="hljs-number"><span class="hljs-number">1</span></span> fps, <span class="hljs-number"><span class="hljs-number">1</span></span> tbn, <span class="hljs-number"><span class="hljs-number">1</span></span> tbc (<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) Metadata: creation_time : <span class="hljs-number"><span class="hljs-number">2014</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span>T18:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">46.000000</span></span>Z handler_name : hevc:fps=<span class="hljs-number"><span class="hljs-number">24</span></span>@GPAC0<span class="hljs-number"><span class="hljs-number">.5</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>-DEV-rev4807 encoder : Lavc57<span class="hljs-number"><span class="hljs-number">.89</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> mjpeg Side data: cpb: bitrate max/min/avg: <span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">200000</span></span> buffer size: <span class="hljs-number"><span class="hljs-number">0</span></span> vbv_delay: <span class="hljs-number"><span class="hljs-number">-1</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f884d</span></span>0] nal_unit_type: <span class="hljs-number"><span class="hljs-number">0</span></span>(TRAIL_N), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f884d</span></span>0] Output frame with POC <span class="hljs-number"><span class="hljs-number">3.</span></span> [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>966c0] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). frame= <span class="hljs-number"><span class="hljs-number">0</span></span> fps=<span class="hljs-number"><span class="hljs-number">0.0</span></span> q=<span class="hljs-number"><span class="hljs-number">0.0</span></span> size=N/A time=<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00.00</span></span> bitrate=N/A speed= <span class="hljs-number"><span class="hljs-number">0</span></span>x cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>966c0] Dropping <span class="hljs-number"><span class="hljs-number">1</span></span> frame(s). [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] nal_unit_type: <span class="hljs-number"><span class="hljs-number">1</span></span>(TRAIL_R), nuh_layer_id: <span class="hljs-number"><span class="hljs-number">0</span></span>, temporal_id: <span class="hljs-number"><span class="hljs-number">0</span></span> cur_dts is invalid (this is harmless <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> it occurs once at the start per stream) [hevc @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>61a00] Output frame with POC <span class="hljs-number"><span class="hljs-number">4.</span></span> ... No more output streams to write to, finishing. frame= <span class="hljs-number"><span class="hljs-number">15</span></span> fps=<span class="hljs-number"><span class="hljs-number">0.5</span></span> q=<span class="hljs-number"><span class="hljs-number">24.8</span></span> Lsize=N/A time=<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">15.00</span></span> bitrate=N/A speed=<span class="hljs-number"><span class="hljs-number">0.451</span></span>x video:<span class="hljs-number"><span class="hljs-number">1084</span></span>kB audio:<span class="hljs-number"><span class="hljs-number">0</span></span>kB subtitle:<span class="hljs-number"><span class="hljs-number">0</span></span>kB other streams:<span class="hljs-number"><span class="hljs-number">0</span></span>kB global headers:<span class="hljs-number"><span class="hljs-number">0</span></span>kB muxing overhead: unknown Input file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./Tears_400_x265.mp4): Input stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">335</span></span> packets read (<span class="hljs-number"><span class="hljs-number">701773</span></span> bytes); <span class="hljs-number"><span class="hljs-number">335</span></span> frames decoded; Total: <span class="hljs-number"><span class="hljs-number">335</span></span> packets (<span class="hljs-number"><span class="hljs-number">701773</span></span> bytes) demuxed Output file #<span class="hljs-number"><span class="hljs-number">0</span></span> (./out_img/ffmpeg-soft_x265_%d.jpg): Output stream #<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span> (video): <span class="hljs-number"><span class="hljs-number">15</span></span> frames encoded; <span class="hljs-number"><span class="hljs-number">15</span></span> packets muxed (<span class="hljs-number"><span class="hljs-number">1109604</span></span> bytes); Total: <span class="hljs-number"><span class="hljs-number">15</span></span> packets (<span class="hljs-number"><span class="hljs-number">1109604</span></span> bytes) muxed bench: utime=<span class="hljs-number"><span class="hljs-number">52.330s</span></span> <span class="hljs-number"><span class="hljs-number">335</span></span> frames successfully decoded, <span class="hljs-number"><span class="hljs-number">0</span></span> decoding errors bench: maxrss=<span class="hljs-number"><span class="hljs-number">72480</span></span>kB [Parsed_fps_0 @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>966c0] <span class="hljs-number"><span class="hljs-number">335</span></span> frames in, <span class="hljs-number"><span class="hljs-number">15</span></span> frames out; <span class="hljs-number"><span class="hljs-number">320</span></span> frames dropped, <span class="hljs-number"><span class="hljs-number">0</span></span> frames duplicated. [AVIOContext @ <span class="hljs-number"><span class="hljs-number">0x1f</span></span>52220] Statistics: <span class="hljs-number"><span class="hljs-number">734659</span></span> bytes read, <span class="hljs-number"><span class="hljs-number">2</span></span> seeks</code> </pre> </div></div><br><h2 id="vyvody">  findings </h2><br><ul><li> MIPS SIMD                    ; </li><li>  ‚Äî      .  -    MIPS SIMD     ,    .          ; </li><li> -1 ‚Äî    ,  , ,                   . </li></ul><br><h3 id="ssylki">  Links </h3><br><p> [L1] ‚Äî <a href="http://www.baikalelectronics.ru/products/T1/"> -1</a> ; <br> [L2] ‚Äî <a href="https://github.com/MIPSfpga/mipsfpga-plus"> MIPSfpga-plus  github</a> ; <br> [L3] ‚Äî <a href="https://www.imgtec.com/mips/warrior/p-class-p5600-multiprocessor-core/">P-Class P5600 Multiprocessor Core</a> ; <br> [L4] ‚Äî <a href="https://habrahabr.ru/post/276205/">    MIPS,       </a> ; <br> [L5] ‚Äî <a href="">Texas Instruments. Digital Signal Processors</a> ; <br> [L6] ‚Äî <a href="https://habrahabr.ru/post/172969/">   GPU</a> ; <br> [L7] ‚Äî <a href="https://habrahabr.ru/post/72247/">OpenCL.       </a> ; <br> [L8] ‚Äî <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580_%25D1%2581_%25D0%25BA%25D0%25BE%25D0%25BD%25D0%25B5%25D1%2587%25D0%25BD%25D0%25BE%25D0%25B9_%25D0%25B8%25D0%25BC%25D0%25BF%25D1%2583%25D0%25BB%25D1%258C%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2585%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B9">Wikipedia:     </a> ; <br> [L9] ‚Äî <a href="http://t-filter.engineerjs.com/">TFilter. Free online FIR filter design tool</a> ; <br> [L10] ‚Äî <a href="https://ru.wikipedia.org/wiki/%25D0%25A6%25D0%25B8%25D1%2584%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B9_%25D1%2581%25D0%25B8%25D0%25B3%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580">Wikipedia:   </a> ; <br> [L11] ‚Äî <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25BE%25D1%2581%25D0%25BD%25D0%25BE-%25D0%25B7%25D0%25B0%25D0%25B3%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B4%25D0%25B0%25D1%258E%25D1%2589%25D0%25B8%25D0%25B9_%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580">Wikipedia: - </a> ; <br> [L12] ‚Äî <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BC%25D0%25BF%25D0%25BB%25D0%25B8%25D1%2582%25D1%2583%25D0%25B4%25D0%25BD%25D0%25BE-%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BE%25D1%2582%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2585%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0">Wikipedia: - </a> ; <br> [L13] ‚Äî <a href="https://ru.wikipedia.org/wiki/SIMD">Wikipedia: SIMD</a> ; <br> [L14] ‚Äî <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580">Wikipedia:  </a> ; <br> [L15] ‚Äî <a href="https://www.imgtec.com/mips/architectures/simd/">MIPS SIMD</a> ; <br> [L16] ‚Äî <a href="https://gcc.gnu.org/onlinedocs/gcc/MIPS-SIMD-Architecture-_0028MSA_0029-Support.html">GCC: MIPS SIMD Architecture (MSA) Support</a> ; <br> [L17] ‚Äî <a href="https://gcc.gnu.org/onlinedocs/gcc/MIPS-SIMD-Architecture-Built-in-Functions.html">GCC: MIPS SIMD Architecture Built-in Functions</a> ; <br> [L18] ‚Äî <a href="https://github.com/FFmpeg/FFmpeg/tree/master/libavcodec/mips"> ffmpeg  github ( libavcodec/mips/)</a> ; <br> [L19] ‚Äî <a href="http://ffmpeg.org/">FFmpeg multimedia framework</a> ; <br> [L20] ‚Äî <a href="https://community.imgtec.com/developers/mips/tools/codescape-mips-sdk/">Codescape MIPS SDK</a> ; <br> [L21] ‚Äî <a href="http://www.h264info.com/clips.html">H.264 Demo Clips</a> ; <br> [L22] ‚Äî <a href="https://x265.com/hevc-video-files/">x256. Sample HEVC Video Files</a> ; <br> [L23] ‚Äî <a href="https://github.com/zhelnio/memos/tree/master/public/03_mips_simd/mips_ffmpeg_logs">  ffmpeg</a> <br> [L24] ‚Äî <a href="http://silicon-russia.com/public_materials/2016_11_04_one_day_mipsfpga_connected_mcu_materials_public_for_the_website/04_present_nanometer_asic_seminar/">     </a> ; </p><br><h3 id="dokumentaciya">  Documentation </h3><br><p> [D1] ‚Äî <a href="https://www.google.ru/search%3Fq%3D%25D1%2582%25D0%25B8%25D1%2582%25D1%2586%25D0%25B5%2B%25D1%2588%25D0%25B5%25D0%25BD%25D0%25BA%2B%25D0%25BF%25D0%25BE%25D0%25BB%25D1%2583%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B4%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F%2B%25D1%2581%25D1%2585%25D0%25B5%25D0%25BC%25D0%25BE%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0"> .,  . ‚Äî  </a> ; <br> [D2] ‚Äî <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D2_MD00866-2B-MSA32-AFP-01.12.pdf">MIPS Architecture for Programmers Volume IV-j: The MIPS32 SIMD Architecture Module</a> ; <br> [D3] ‚Äî <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D3_MD00927-SIMD-programming-whitepaper.pdf">MIPS SIMD programming. Optimizing multimedia codecs</a> ; </p><br><h3 id="izobrazheniya-i-tablicy">    </h3><br><p> [P1] ‚Äî <a href="">- -1</a> . (: <a href="http://www.baikalelectronics.ru/products/T1/">L1</a> ); <br> [P2] ‚Äî <a href="">TFilter.     1</a> (); <br> [P3] ‚Äî <a href="">TFilter.    1</a> ; <br> [P4] ‚Äî <a href="">TFilter.     2</a> (); <br> [P5] ‚Äî <a href="">TFilter.    2</a> ; <br> [P6] ‚Äî <a href="">    SIMD- </a> (: <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D3_MD00927-SIMD-programming-whitepaper.pdf">D3</a> ); <br> [P7] ‚Äî <a href="">MSA Vector registers</a> (: <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D2_MD00866-2B-MSA32-AFP-01.12.pdf">D2</a> ); <br> [P8] ‚Äî <a href="">MADDV Operation description</a> (: <a href="https://github.com/zhelnio/memos/raw/master/public/03_mips_simd/doc/D2_MD00866-2B-MSA32-AFP-01.12.pdf">D2</a> ); </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/328566/">https://habr.com/ru/post/328566/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328556/index.html">Problems of Modern Data Science</a></li>
<li><a href="../328558/index.html">The best way to upload files to Ruby is with Shrine. Part 1</a></li>
<li><a href="../328560/index.html">Corporate telephone directory with a map</a></li>
<li><a href="../328562/index.html">How to design programs (HtDP)</a></li>
<li><a href="../328564/index.html">Unity3d We play with the mesh. Part 2 - Deformation of the mesh with a height map</a></li>
<li><a href="../328568/index.html">The evolution of fractal monsters</a></li>
<li><a href="../328570/index.html">2017: Hitchhiker's Guide to the Galaxy Javascript</a></li>
<li><a href="../328572/index.html">The growth of autonomous data processing platforms or again about Big Data</a></li>
<li><a href="../328576/index.html">Print server on RaspberryPI 1</a></li>
<li><a href="../328578/index.html">Organization of backups on different accounts of J.Disk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Checking the Cocos2d-x cross-platform framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cocos2d is an open source software framework. It can be used to build games, applications and graphical interfaces of interactive cross-platform appli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Checking the Cocos2d-x cross-platform framework</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b22/196/2ad/b221962ad8e8e121ff5115adea2051f7.png" align="left"><br><br>  Cocos2d is an open source software framework.  It can be used to build games, applications and graphical interfaces of interactive cross-platform applications.  Cocos2d contains many brunches, the famous ones are Cocos2d-iPhone, Cocos2d-x, Cocos2d-html5 and Cocos2d-XNA <br><br>  This article will examine the results of the <a href="http://www.viva64.com/go.php%3Furl%3D1430">Cocos2d-x</a> verification, a framework for C ++, obtained using <a href="http://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> 5.18.  The project is of sufficient quality, but still some places should be paid attention to.  Source code is from <a href="http://www.viva64.com/go.php%3Furl%3D1431">GitHub</a> . <br><a name="habracut"></a><br><h2>  From malloc to new, from C to C ++ </h2><br>  Working with graphic objects, as a rule, is associated with processing arrays and matrices, memory for which is allocated dynamically.  In this project, memory allocation uses both calls to the 'malloc' function and the 'new' operator.  These methods have significant differences in use that must be considered when replacing them in the code.  Next will be described the place, not quite correctly using 'malloc' and 'new'. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://www.viva64.com/ru/d/0247/">V630</a> The 'malloc' function is to allocate memory.  ccmotionstreak.cpp 122 <br><pre><code class="cpp hljs">Vec2::Vec2() : x(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>), y(<span class="hljs-number"><span class="hljs-number">0.0f</span></span>) { } Vec2::Vec2(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xx, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> yy) : x(xx), y(yy) { } <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> MotionStreak::initWithFade(...) { .... _pointVertexes = (Vec2*)<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Vec2) * _maxPoints); _vertices = (Vec2*)<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Vec2) * _maxPoints * <span class="hljs-number"><span class="hljs-number">2</span></span>); _texCoords = (Tex2F*)<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Tex2F) * _maxPoints * <span class="hljs-number"><span class="hljs-number">2</span></span>); .... }</code> </pre> <br>  Usually, memory is allocated as an array of objects that have a constructor or destructor.  With such a memory allocation for the class will not be called constructor.  When freeing memory using the free function, the destructor will not be called either.  This is extremely suspicious.  As a result, the variables 'x' and 'y' will not be initialized.  Of course, you can call the constructor for each object "manually" or explicitly initialize the fields, but it would be more appropriate to use the 'new' operator: <br><pre> <code class="cpp hljs">_pointVertexes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vec2[ _maxPoints]; _vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vec2[_maxPoints * <span class="hljs-number"><span class="hljs-number">2</span></span>];</code> </pre> <br>  Similar places: <ul><li>  V630 The 'malloc' function is to allocate memory.  ccmotionstreak.cpp 124 </li><li>  V630 The 'malloc' function is to allocate memory.  ccmotionstreak.cpp 125 </li></ul><br>  <a href="http://www.viva64.com/ru/d/0170/">V572</a> It is an odd one that has been created by the operator.  ccactiontiledgrid.cpp 322 <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tile</span></span></span><span class="hljs-class"> {</span></span> Vec2 position; Vec2 startPosition; Size delta; }; Tile* _tiles; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ShuffleTiles::startWithTarget(Node *target) { .... _tiles = (struct Tile *)<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tile[_tilesCount]; <span class="hljs-comment"><span class="hljs-comment">//&lt;== Tile *tileArray = (Tile*) _tiles; //&lt;== .... }</span></span></code> </pre> <br>  Here the operator 'new' already returns a typed pointer and bringing it to the same type is meaningless. <br><br>  Similar place: <ul><li>  V572 It is an odd one that has been created by the operator.  luabasicconversions.cpp 1301 </li></ul><br>  <a href="http://www.viva64.com/ru/d/0293/">V668 It has been</a> allocated using the 'new' operator.  The exception will be generated in the case of memory allocation error.  ccfloat.h 48 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> __<span class="hljs-function"><span class="hljs-function">Float* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span></span>{ __Float* pRet = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> __Float(v); <span class="hljs-comment"><span class="hljs-comment">//&lt;== if (pRet) //&lt;== { pRet-&gt;autorelease(); } return pRet; }</span></span></code> </pre> <br>  If the 'new' operator could not allocate memory, then, according to the C ++ standard of the language, the exception std :: bad_alloc () is generated.  Thus, checking the pointer to equality to zero does not make sense, unlike the return value of the function 'malloc'.  There are <b>475</b> such checks in the project! <br><br>  <a href="http://www.viva64.com/ru/d/0137/">V547</a> Expression '0 == commonInfo-&gt; eventName' is always false.  Pointer 'commonInfo-&gt; eventName'! = NULL.  ccluaengine.cpp 436 <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CommonScriptData</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-comment"><span class="hljs-comment">// Now this struct is only used in LuaBinding. int handler; char eventName[64]; //&lt;== .... }; int LuaEngine::handleCommonEvent(void* data) { .... CommonScriptData* commonInfo = static_cast&lt;....*&gt;(data); if (NULL == commonInfo-&gt;eventName || //&lt;== 0 == commonInfo-&gt;handler) return 0; .... }</span></span></code> </pre> <br>  The condition (NULL == commonInfo-&gt; eventName) will always be false, since the array 'eventName' is declared locally.  If you fail to allocate memory for an array of a fixed size, the problem will be revealed earlier - when allocating memory for the structure. <br><br>  More checks: <ul><li>  V547 Expression '0! = CommonInfo-&gt; eventSourceClassName' is always true.  Pointer 'commonInfo-&gt; eventSourceClassName'! = NULL.  ccluaengine.cpp 442 </li><li>  <a href="http://www.viva64.com/ru/d/0211/">V600</a> Consider inspecting the condition.  The 'commonInfo-&gt; eventName' pointer is not always equal to NULL.  ccluaengine.cpp 436 </li><li>  V600 Consider inspecting the condition.  The 'commonInfo-&gt; eventSourceClassName' pointer is not always equal to NULL.  ccluaengine.cpp 442 </li></ul><br><h2>  Nightmare structured programming </h2><br>  <a href="http://www.viva64.com/ru/d/0334/">V696</a> The 'continue' operator will terminate 'do {...} while (FALSE)' loop because the condition is always false.  Check lines: 125, 153. cccomaudio.cpp 125 <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ComAudio::serialize(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* r) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ret = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(file, <span class="hljs-string"><span class="hljs-string">""</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-comment"><span class="hljs-comment">//&lt;== } .... } }while(0); return ret; }</span></span></code> </pre> <br>  The analyzer detected a code that could mislead a programmer.  The continue statement in the ‚Äúdo {...} while (0)‚Äù loop will stop the loop, rather than resume it.  Thus, after calling the 'continue' operator, the condition (0) will be checked, and the loop will end as the condition is false.  If this is the way the error is conceived, then the code is still better to change.  You can use the operator 'break'. <br><br>  Similar cycles: <ul><li>  V696 The 'continue' operator will terminate 'do {...} while (FALSE)' loop because the condition is always false.  Check lines: 188, 341. cccomrender.cpp 188 </li><li>  V696 The 'continue' operator will terminate 'do {...} while (FALSE)' loop because the condition is always false.  Check lines: 276, 341. cccomrender.cpp 276 </li><li>  V696 The 'continue' operator will terminate 'do {...} while (FALSE)' loop because the condition is always false.  Check lines: 281, 341. cccomrender.cpp 281 </li><li>  V696 The 'continue' operator will terminate 'do {...} while (FALSE)' loop because the condition is always false.  Check lines: 323, 341. cccomrender.cpp 323 </li></ul><br><h2>  Formatted output </h2><br>  <a href="http://www.viva64.com/ru/d/0176/">V576</a> Incorrect format.  Consider checking the fourth argument of the fprintf function.  The type of symbols is expected.  ccconsole.cpp 341 <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> UNICODE #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> gai_strerror gai_strerrorW </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//&lt;== #else #define gai_strerror gai_strerrorA #endif /* UNICODE */ bool Console::listenOnTCP(int port) { .... fprintf(stderr,"net_listen error for %s: %s", //&lt;== serv, gai_strerror(n)); //&lt;== .... }</span></span></span></span></code> </pre> <br>  The gai_strerror function can be defined as gai_strerrorW and gai_strerrorA, depending on the definition of the UNICODE directive.  In Visual Studio 2012, where the project was checked, a Unicode function was defined that returns a wide string for printing of which you need to use the '% S' specifier (large S), otherwise only the first character of the string or meaningless text will be printed. <br><br><h2>  Same condition result </h2><br>  <a href="http://www.viva64.com/ru/d/0186/">V583</a> The '?:' Operator, regardless of its conditional expression, always returns one and the same value: ATLAS_REPEAT.  atlas.cpp 219 <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">spAtlas* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">spAtlas_readAtlas</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... page-&gt;uWrap = *str.begin == <span class="hljs-string"><span class="hljs-string">'x'</span></span> ? ATLAS_REPEAT : (*str.begin == <span class="hljs-string"><span class="hljs-string">'y'</span></span> ? ATLAS_CLAMPTOEDGE : ATLAS_REPEAT); page-&gt;vWrap = *str.begin == <span class="hljs-string"><span class="hljs-string">'x'</span></span> ? ATLAS_CLAMPTOEDGE : (*str.begin == <span class="hljs-string"><span class="hljs-string">'y'</span></span> ? ATLAS_REPEAT : ATLAS_REPEAT); <span class="hljs-comment"><span class="hljs-comment">//&lt;== .... }</span></span></code> </pre> <br>  Perhaps it was written for beauty, but, nevertheless, the return of one value in the condition looks very suspicious. <br><br><h2>  Pointer dereference </h2><br>  <a href="http://www.viva64.com/ru/d/0205/">V595</a> The values ‚Äã‚Äãof the pointer  Check lines: 188, 189. ccbundlereader.h 188 <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> BundleReader::readArray&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;( <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> *length, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; *values) { .... values-&gt;clear(); <span class="hljs-comment"><span class="hljs-comment">//&lt;== if (*length &gt; 0 &amp;&amp; values) //&lt;== { for (int i = 0; i &lt; (int)*length; ++i) { values-&gt;push_back(readString()); } } return true; }</span></span></code> </pre> <br>  In many places of the code, literally right after dereference, the pointer is checked for validity.  Here are some of these places: <ul><li>  V595 The '_openGLView' pointer was used before it was verified against nullptr.  Check lines: 410, 417. ccdirector.cpp 410 </li><li>  V595  Check lines: 365, 374. cctween.cpp 365 </li><li>  V595 The "rootEle" pointer was used before it was verified against nullptr.  Check lines: 378, 379. ccfileutils.cpp 378 </li><li>  V595 The 'tolua_ret' pointer was used before it was verified against nullptr.  Check lines: 429, 433. lua_cocos2dx_manual.cpp 429 </li><li>  V595 The 'tolua_ret' pointer was used before it was verified against nullptr.  Check lines: 1858, 1861. lua_cocos2dx_manual.cpp 1858 </li><li>  V595 The 'tolua_ret' pointer was used before it was verified against nullptr.  Check lines: 4779, 4781. lua_cocos2dx_manual.cpp 4779 </li><li>  V595 The '_fontAtlas' pointer was used before it was verified against nullptr.  Check lines: 384, 396. cclabel.cpp 384 </li><li>  V595 The '_glprogramstate' pointer was used before it was verified against nullptr.  Check lines: 216, 218. shadertest2.cpp 216 </li><li>  V595 The '_sprite' pointer was used before it was verified against nullptr.  Check lines: 530, 533. sprite3dtest.cpp 530 </li></ul><br><h2>  Non-random test </h2><br>  <a href="http://www.viva64.com/ru/d/0254/">V636</a> The 'rand () / 0x7fff' expression was implicitly casted from 'int' type to 'float' type.  Consider using a fractional part.  An example: double A = (double) (X) / Y ;.  cpp-tests physicstest.cpp 307 <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rand()/RAND_MAX; }</code> </pre> <br>  In the source files for testing was found such a function.  Most likely, it is planned to obtain real numbers in the range of 0.0f to 1.0f, but the result of the rand () function is an integer, therefore the real part after division is discarded.  The function returns only 0.0 or 1.0.  Moreover, since the rand () function returns a value from 0 to RAND_MAX, the probability of getting a result of 1.0 is negligible. <br><br>  Rather, tests using the frand () function do not actually test anything.  A good example of how static analysis complements testing with unit tests. <br><br><h2>  Conclusion </h2><br>  As I said at the beginning, Cocos2d-x contains quite a few suspicious places.  The project is relatively young and innovative, does not contain the code inherited from the old times.  Surely, developers use various methods of quality control and try to follow modern standards and programming methodologies. <br><br><h2>  This article is in English. </h2><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Svyatoslav Razmyslov.  <a href="http://www.viva64.com/en/b/0275/">Checking the Cross-Platform Framework Cocos2d-x</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Read the article and have a question?</b> <div class="spoiler_text">  Often our articles are asked the same questions.  We collected the answers to them here: <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio and CppCat, version 2014</a> .  Please review the list. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/234119/">https://habr.com/ru/post/234119/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234105/index.html">Restoring a deleted TrueCrypt partition</a></li>
<li><a href="../234107/index.html">50 shades of blue, or a tale about how we did the design True Image 2015</a></li>
<li><a href="../234109/index.html">A little about handwritten fonts</a></li>
<li><a href="../234111/index.html">Parallels Plesk 12 Review. VPS Trial Version Free</a></li>
<li><a href="../234117/index.html">5 WordPress Plugins to Strengthen Site Behavioral and Social Metrics</a></li>
<li><a href="../234121/index.html">About cosmic warmth and cold</a></li>
<li><a href="../234123/index.html">How does attracting money to a startup on Visistarte</a></li>
<li><a href="../234125/index.html">mysqlnd - explorer between PHP and MySQL</a></li>
<li><a href="../234127/index.html">Will 2014 be "the year of VoLTE"?</a></li>
<li><a href="../234131/index.html">Unity Android - now on x86!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create your own weather station, integrated with the Wolfram Cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, Stephen Wolfram announced Wolfram Data Drop , which is an excellent tool for downloading any type of data from any device. I will show you h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create your own weather station, integrated with the Wolfram Cloud</h1><div class="post__text post__text-html js-mediator-article">  Recently, <a href="http://habrahabr.ru/company/wolfram/blog/253873/">Stephen Wolfram announced Wolfram Data Drop</a> , which is an excellent tool for downloading any type of data from any device.  I will show you how to use Wolfram Data Drop with a homemade weather station, to create which we need only simple hardware and a few lines of code.  This meteorological station will take temperature measurements every second, and every minute will unload the average values ‚Äã‚Äãfor that minute into Wolfram Data Drop.  Thus, you will get 60 points on the graph of temperature - time every hour, 1440 points per day.  Using this data and the <a href="http://www.wolfram.com/programming-cloud/">Wolfram Programming Cloud</a> , you can study temperature changes over time.  For example, you can find out how many times a day the temperature reached certain minimum and maximum values ‚Äã‚Äãwhen the temperature changed most quickly.  With this data, you can even make predictions.  Maybe someone will even be able to make more accurate predictions than the local weather station! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/73b/f52/62f/73bf5262fd2bc262cfb4a2385c6de3e0.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_1.png" width="500" height="356"><br><a name="habracut"></a><br><h2>  How to build your own weather station </h2><br>  For this experiment you will need: <br><br>  1) <a href="https://www.sparkfun.com/products/12053">Arduino Y√∫n</a> (or equivalent, but always with Wi-Fi); 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2) temperature sensor <a href="https://www.sparkfun.com/products/10988">TMP36</a> ; <br><br>  3) breadboard and wires. <br><br>  Here is an assembly diagram.  Connect 5V to the left TMP36 lead, ground to the right TMP36 lead, and A0 to the middle TMP36 lead. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d98/88f/f8c/d9888ff8cac835030644188dca10ee63.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_2.png" width="633" height="88"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/29d/6a4/ef2/29d6a4ef2cc243977fe654819b875a7f.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_3.gif" width="585" height="426"><br><br>  Once everything is connected and turned on, the sensor begins to transmit voltage to the A0 pin.  If the temperature rises, so does the voltage, and if the temperature drops, so does the voltage, respectively.  Thus, we can take the voltage readings and interpret them as temperature.  Fortunately, in this experiment we need only three small wires, which allows us to avoid the situation as in the picture below with this unfortunate one: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d13/b6a/358/d13b6a358557bd90edfef2346de31772.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_4.gif" width="634" height="157"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/268/3c0/1ad/2683c01adb1b37dd6e7080ac10c467bc.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_5.gif" width="500" height="375"><br><br><h2>  Arduino Programming </h2><br>  Now we are ready to write the code for Arduino, which will upload the recorded temperature data to the Wolfram Cloud.  Make sure your Arduino Yun is configured to <a href="http://arduino.cc/en/Guide/ArduinoYun">connect to the Internet</a> .  Then, using the Arduino application, load the following code on the Arduino after replacing the text ‚ÄúYOUR_BIN_ID‚Äù with ‚ÄúShort ID‚Äù, which is displayed as a result of the CreateDatabin [] function. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d4e/aa6/a1f/d4eaa6a1f98fb7c59fc9135554b0a206.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_6.png" width="150" height="18"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/388/973/a76/388973a760346439b9a56abd0aee95b8.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_7.gif" width="263" height="58"><br><br>  A little explanation about what the code does: the p variable is used to invoke a tool called curl, which allows you to create HTTP requests with an Arduino. <br><br>  In our case, we set a specific URL for Wolfram Data Drop, which allows you to <a href="https://datadrop.wolframcloud.com/api/v1.0/Add">download temperature data</a> .  In the <i>loop loop ()</i> , which can be seen in the code, you can observe how the variable <i>val</i> is read from the analog input (A0), and how <i>val is</i> then converted from the initial values ‚Äã‚Äãto the temperature value <i>temperature</i> . <br><br>  This temperature is then added to the average value of <i>average</i> exactly 60 times, but on the 60th time the program will calculate the second block with If []. <br><br>  This code block initializes the data load code, which sends an average value of 60 measurements. <br><br>  It also resets all counters, so everything will start again. <br><br>  This is followed by a 1000-millisecond delay, which will arrange the data recorded in a second: <br><br><pre><code class="hljs swift">#include &lt; <span class="hljs-type"><span class="hljs-type">Bridge</span></span>.h &gt; <span class="hljs-type"><span class="hljs-type">Process</span></span> p; int val, <span class="hljs-built_in"><span class="hljs-built_in">count</span></span>; float voltage, temperature, average; void setup () { <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; average = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-type"><span class="hljs-type">Bridge</span></span>.begin (); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.begin (<span class="hljs-number"><span class="hljs-number">9600</span></span>); } void loop () { val = analogRead (<span class="hljs-number"><span class="hljs-number">0</span></span>); voltage = val * <span class="hljs-number"><span class="hljs-number">5.0</span></span>; voltage = voltage/<span class="hljs-number"><span class="hljs-number">1024.0</span></span>; temperature = (voltage - <span class="hljs-number"><span class="hljs-number">0.5</span></span>)*<span class="hljs-number"><span class="hljs-number">100</span></span>; average += temperature; <span class="hljs-built_in"><span class="hljs-built_in">count</span></span>++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> &gt; <span class="hljs-number"><span class="hljs-number">59</span></span> ) { p.begin (<span class="hljs-string"><span class="hljs-string">"/usr/bin/curl"</span></span>); p.addParameter (<span class="hljs-string"><span class="hljs-string">"--insecure"</span></span>); p.addParameter (<span class="hljs-string"><span class="hljs-string">"--location"</span></span>); p.addParameter (<span class="hljs-string"><span class="hljs-string">"https://datadrop.wolframcloud.com/api/v1.0/Add?bin=YOUR_BIN_ID&amp;temperature="</span></span> + <span class="hljs-type"><span class="hljs-type">String</span></span> (average/<span class="hljs-number"><span class="hljs-number">60</span></span>)); p.run (); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (p.available () &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { char <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> = p.read (); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>); } <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">println</span></span> (); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.flush (); <span class="hljs-built_in"><span class="hljs-built_in">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; average = <span class="hljs-number"><span class="hljs-number">0</span></span>; } delay (<span class="hljs-number"><span class="hljs-number">1000</span></span>); }</code> </pre> <br>  To make sure everything works, you can open the built-in monitor Arduino;  in case everything goes as it should, you will see messages like the one below, which will appear every minute (or so): <br><br><pre> <code class="hljs erlang-repl">&lt;|<span class="hljs-string"><span class="hljs-string">"Message"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"The data was successfully added."</span></span>, <span class="hljs-string"><span class="hljs-string">"Bin"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"DD7051e03ace9-a194-44c1-9864-8fcef8ea9af3"</span></span>, <span class="hljs-string"><span class="hljs-string">"Data"</span></span> -&gt; &lt;|<span class="hljs-string"><span class="hljs-string">"temperature"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"34"</span></span>|&gt;, <span class="hljs-string"><span class="hljs-string">"Timestamp"</span></span> -&gt; {<span class="hljs-number"><span class="hljs-number">2015</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">39.99526</span></span>`<span class="hljs-number"><span class="hljs-number">8.354583502904967</span></span>}, <span class="hljs-string"><span class="hljs-string">"Information"</span></span> -&gt; {<span class="hljs-string"><span class="hljs-string">"EntryCount"</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"LatestTimestamp"</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">3632487520</span></span>, <span class="hljs-string"><span class="hljs-string">"Size"</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">288</span></span>}|&gt;</code> </pre> <br>  Now it's time to put our device in something tight (in my case - Hefty bag), and put in a place that is in the shade all day (let's say, on the veranda): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f34/e4c/7b1/f34e4c7b19bb832d7771b9277e17ef43.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_8.gif" width="500" height="667"><br><br><h2>  Temperature data analysis </h2><br>  Now we are ready to do some interesting things with the obtained temperature data.  It would be best to collect data at least one day before starting the analysis, but the code allows you to work with less data.  First we need to get data from databin, which we used to load temperature data. <br><br>  The program on the Arduino transmits the temperature as a parameter URL, which we use in our program.  In my example, databin collected data in 20 days (for the experiment, you need to replace ‚ÄúYOUR_BIN_ID‚Äù with the bin ID that was obtained as a result of running <a href="http://reference.wolfram.com/language/ref/CreateDatabin.html">CreateDatabin</a> earlier: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/095/6e4/3d9/0956e43d905003e8a5d893354568e34e.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_9.gif" width="320" height="65"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/04a/d14/ae8/04ad14ae817ffb4421068526d0df3ea7.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_10.gif" width="379" height="57"><br><br>  Now we need to convert the temperature event series with a few more steps. <br><br>  First, through <a href="http://reference.wolfram.com/language/ref/TimeSeriesShift.html">TimeSeriesShift,</a> you need to enter data in a time zone. <br><br>  Next, you should calibrate the sensor, based on data from the nearest major weather stations.  Personally, I calibrated my two-dollar TMP36, based on data from one of the meteorological stations of the National Oceanic and Atmospheric Administration (NOAA KCMI), where incomparably more expensive and accurate equipment is located.  Calibration is a very important step;  as a result of calibration, I had to edit my data by about 5 degrees to match the official ones.  There is another good way to calibrate: put the sensor in ice water with a temperature of 0 degrees, and then into a glass of boiling water (100 degrees), and correct the data. <br><br>  Next, you need to select the time interval of interest.  In my case, the starting point is January 22, 9 am.  Accordingly, you should replace this date with the one that corresponds to the beginning of your measurements. <br><br>  Finally, you should repartition data at intervals of 15 minutes, that is, for the construction we will use 15 times fewer points.  The fact is that these data will be quite enough to work with intervals, which are measured in days. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/309/8fb/86f/3098fb86f0591b9a3ad1d6220cddbcbe.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_11.gif" width="471" height="272"><br><br>  Here you can make a quick check whether the data on temperature looks correct: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e26/4d6/c8e/e264d6c8e9b5af083e1c4a78d839d12f.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_12.png" width="469" height="18"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/aa3/a62/bb7/aa3a62bb744292d9858a919cdab233b0.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_13.gif" width="360" height="229"><br><br>  Data processing does not end there, and we can do very interesting and useful things using them.  You can write a function that will collect the minimum / maximum temperature values ‚Äã‚Äãfor each specific day, or any other remarkable values: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b1a/faa/701/b1afaa7013cb84a49b149a7d47098fd0.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_14.png" width="520" height="364"><br><br>  The function below creates a new series of events ( <a href="http://reference.wolfram.com/language/ref/EventSeries.html">EventSeries</a> ) from a given one and collects those points that satisfy a specific function for a given day. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bf2/94b/33e/bf294b33e3b2a2b8b3ce84f7824a1a87.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_15.png" width="448" height="18"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/553/35f/0d7/55335f0d79b702d5145a01979ec3ca69.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_16.gif" width="622" height="60"><br><br>  Now you can do the same for daily highs: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4bd/994/5b9/4bd9945b92ec38aa92e974c065298e08.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_17.png" width="448" height="18"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b8/637/814/7b8637814c4c0050920bb4587ae9fcc5.gif" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_18.gif" width="622" height="60"><br><br>  Now we can display temperature data (purple) on a chart with daily highs (red points) and minimums (blue points): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4e/dad/180/c4edad180658bde532d9a43c30180ab5.png" alt="Build-Your-Own-Weather-Station-in-a-Snap-with-the-Wolfram-Cloud_19.png" width="563" height="180"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6ff/2c4/8c1/6ff2c48c1767c0813e939372691148e1.gif" alt="Graphics: Temperature (&amp; amp; C) in Savoy, Illinois" width="576" height="399"><br><br><h2>  Conclusion </h2><br>  Now we have our own weather station and incoming data that can be easily analyzed.  By changing the presented code, you can visualize daily, weekly or monthly average values ‚Äã‚Äãof temperature.  You can also try to predict the temperature for tomorrow, based on previously observed dependencies and, possibly, combining temperature data with some additional ones: humidity, pressure, and the like. <br><br>  <i>Translation of the post Arnoud Buzing, " <a href="http://blog.wolfram.com/2015/03/17/build-your-own-weather-station-in-a-snap-with-the-wolfram-cloud/">Build Your Own Weather Station in a Snap with the Wolfram Cloud!"</a></i>  <i>".</i> <i><br></i>  <i>Download the translation in the form of a Mathematica document, which contains all the code used in the article <a href="http://goo.gl/ez9TUn">here</a> .</i> <i><br></i>  <i>I express my deep gratitude to <a href="http://vk.com/ld742">Kirill Guzenko</a> for his help in translating.</i> </div><p>Source: <a href="https://habr.com/ru/post/253925/">https://habr.com/ru/post/253925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253913/index.html">JavaScript internationalization API: implementation in Firefox</a></li>
<li><a href="../253917/index.html">Perl 6 and Markov sequences</a></li>
<li><a href="../253919/index.html">Gaming headphones. Sound for gamers. Sound illusions</a></li>
<li><a href="../253921/index.html">Conference ProfsoUX 2015: Review of applications for speeches</a></li>
<li><a href="../253923/index.html">DlangUI - Cross-platform GUI for D (Part 1)</a></li>
<li><a href="../253929/index.html">How to configure Android and RAD Studio XE7 (Delphi, C ++ Builder)</a></li>
<li><a href="../253935/index.html">Overview of the new version of EOS for SharePoint 2013</a></li>
<li><a href="../253937/index.html">Monitor AD users on your knee for free</a></li>
<li><a href="../253941/index.html">Gravatar: How to decrypt email addresses of all users?</a></li>
<li><a href="../253943/index.html">Critical security vulnerability on fl.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
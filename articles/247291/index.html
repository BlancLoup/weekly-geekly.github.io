<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Internet mapping</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sitting on the couch and once again coming up with a crazy idea, from the category of what is global, and I haven‚Äôt done it at the hobby level yet, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Internet mapping</h1><div class="post__text post__text-html js-mediator-article">  Sitting on the couch and once again coming up with a crazy idea, from the category of what is global, and I haven‚Äôt done it at the hobby level yet, this idea all the same came to me :). <br><br>  Having estimated that the person has the information, and the opportunity to work with the audience, I wondered why there are so few search engines on the Internet.  Well, Google, Yandex, Rambler, well, and there is something else that is easy to count on fingers.  But they accumulate almost overwhelming majority of Internet users.  A large number of users pass through them and it depends to a certain extent on where to send the user.  And firms, to a certain extent, are being promoted not by clever ways of influencing the bots of the same Google. <br><br>  Is there a result?  Does anyone have any idea how many Russian-speaking resources exist?  And is it possible to see their ranked lists both in terms of frequency of use and thematic division.  They are trying to talk about the semantic Internet, but there seems to be no such elementary order in structuring.  Having said to myself ‚Äúwho if not us,‚Äù I went to implement this idea and approaches to its solution.  But the main thing is to understand the main difficulty, which, like many places, simply rests on resources, in this case, CPU time.  Those who are interested in finding a novice in the designated area, but with a fresh look, please under the cat. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  IP as a basis for identification </h4><br><br>  Well, what is so difficult I said to myself, you just need to get a list of all sites, and then otranzhirovat them, but at least for the same PageRang  ªu from Google.  Well, I went and composed a tricky program on C # pinging 80 ports over IP, and in case of success, I got the name of the domain and its country (using the GeoIPService web service).  I started my uncomplicated bot of dialing and after an hour or two to see how many sites I had assembled, I discovered almost 1 unique ... And that was all.  I decided to calculate how IP variations can be known to be 256 * 256 * 256 * 256 = about 4 billion. Well, I did not think so much, but then I looked at how long it took one ping, it turned out something about 0.1 seconds.  By the same timeout, I limited the receipt of the answer, since  by default it is substantially larger.  Now it was possible to finish the counting 4971 days.  Well, 14 years on this, I do not, I said to myself.  At this point, I could marvel at the miracle of Google‚Äôs technology, understand that they are doing a lot of work and not alone to compete with them.  But perseverance got the better :) <br><br><h4>  Country Restriction </h4><br><br>  Well, I said to myself, Russian-language sites are enough for me, the rest can not be analyzed.  But how to understand the compliance of IP and country?  Does the Internet have at least some kind of structure?  These questions I had to attend to.  because  The brute force method did not suit me. <br><br>  After reading what people are doing for this, I found that there is a whole frame for this simple task - with a beautiful name geo-targeting, and was amazed at the articles on Habr√©: <a href="http://habrahabr.ru/post/26788/">Defining a city by IP address</a> , <a href="http://habrahabr.ru/post/108541/">GeoIP Base - countries and cities</a> and a whole bunch of similar ones.  In general, even paid bases, etc., a whole branch of business :) <br><br>  But most importantly, it was some sort of secondary information and there was no need or desire to use it.  Therefore, I wanted to understand where the wind is blowing from - where is the primary information?  Where does information come from in such geolocation bases? <br><br><h5>  Regions of the network </h5><br><br>  I had to take care to understand who controls the Internet, reading popular information <a href="https://en.wikipedia.org/wiki/Internet_governance">on Wikipedia,</a> you can understand that since the creation of the network until his death in 1998, John Postel was in charge of address allocation in accordance with the agreement of the US Department of Defense.  Now, a certain non-profit organization Internet Assigned Numbers Authority (IANA) controls the issue of IP addresses, which after Postel‚Äôs death was joined to ICANN, founded by the US government, which in turn received a contract from the US Department of Commerce.  In general, the scheme is confusing, and there is still disassembly at the UN, so that the United States would give control of the Internet to the UN, which naturally refused to do.  But all of this we are solely interested in only in terms of whether there is any order in the distribution of IP addresses and which subnets can not be scanned by search engines. <br><br>  And here is the most important document from the IANA organization with the hope of order: <a href="http://www.iana.org/assignments/ipv4-address-space/ipv4-address-space.xhtml">IANA IPv4 Address Space Registry</a> . <br><br>  It lists who is responsible (read "who owns") <i>regions of the</i> network.  From this, it is more convenient to introduce a more convenient terminology: the <i>regions of the</i> network are the IP addresses determined by the first number of the IP address, and the <i>sector by the</i> first two numbers. <br><br>  From the document above it follows that the regions: 0, 10, 127 are reserved by the IANA organization for themselves, and from 224 until the end of 255 is reserved for the so-called.  <a href="http://en.wikipedia.org/wiki/IP_multicast">Multicast</a> and future use.  Further, a substantial part belongs to large telecommunications and information companies of the USA, the military of the USA and Great Britain - I counted 35 regions. <br><br>  A total of 70 regions out of 256 are inaccessible to mere mortals, and there is no need to scan them.  The rest are divided into 5 regional zones: America North, America South, Africa, Indonesia with China, and Europe with Asia.  Already other regional offices are engaged in their distribution, and we are interested in the European <a href="http://www.ripe.net/">RIPE NCC</a> .  Actually whois services are provided by them and distributed to these regional organizations. <br><br>  35 organizations of IP addresses are assigned to the management of the European organization for distribution conditionally call them providers (although licensed according to the rules of the countries) and +4 regions as I understand it with special administration. <br><br>  Only at this level it is possible to say with certainty which territorial region the IP addresses belong to.  Further depends on the kind of public information provided by regional organizations.  But instead of 14 years, it‚Äôs better to scan 256 regions of the Internet, we will need to scan 39 regions of Europe / Asia with just a little more than 2 years of operation of a single processor. <br><br>  You can go below.  Unfortunately, there is no further order (and there are exceptions at the regional level).  Sectors may belong to different countries.  But you can download the actual Ripe whois database and find information about countries in it.  Cities are sometimes there, but they are hardly suitable for machining, since  as I understand, this is what negligent network administrators enter when they receive IP addresses for the subnet, and there are often confused fields (for example, instead of city addresses) or not specified at all.  But the country code is stable. <br><br>  Having processed their text file from 3 gigs, and selecting from there the ones belonging to Latvia and Russia, I singled out 2004 sectors for Russia and 307 for Latvia (selectivity for Latvia is determined by the motherland :)).  And the folding mathematics is different here 2004 + 307 = 2063 unique sectors.  Those.  As mentioned earlier, the sectors naturally overlap, and there may be other European countries, but we got a rough estimate. <br><br>  Namely, from 109 minutes to ping one sector.  And for 2063 sectors, it is about 156 days (the minimum estimate, since it is necessary to spend some time to search for a domain in the event of an open 80 port success). <br><br>  This is already lifting, even for me, if I cut in all of my 8 cores - in a month I will receive the Internet card of Russia. <br><br><h5>  <b>But what exactly is this kind of Internet mapping for?</b> </h5><br><br>  Well, in fantasy, I do not want to limit you.  And at first there were outlined ideas for what it might be necessary.  I want to emphasize that this time is required only on the first scan to identify all computers with an open 80 port (that is, potential candidates for the provision of web services), among which very few real domains (DNS names). <br><br>  But we really get all the domains for 2015, which can later be analyzed and you never know what else.  Those who want to help me and see this as a necessity, or just don‚Äôt feel sorry for the processor time - write me and I will give you a ready-made program that will perform the analysis of the sector, you will drop the result and create a public database - an <i>Internet map</i> . <br><br>  And maybe this is how a new Google is born :) <br><br>  PS In the case of a positive response, create the appropriate resource for this. </div><p>Source: <a href="https://habr.com/ru/post/247291/">https://habr.com/ru/post/247291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247275/index.html">Debugger for a penny: do ST-Link from Maple Mini</a></li>
<li><a href="../247277/index.html">SageMathCloud - a dream for fans of Python, math and Linux</a></li>
<li><a href="../247279/index.html">Large collection of hashing functions on Github</a></li>
<li><a href="../247283/index.html">Tutorial AngularJS: A Comprehensive Guide, Part 2</a></li>
<li><a href="../247285/index.html">When to use OOP, and when - OP?</a></li>
<li><a href="../247295/index.html">Results of the year. Analysis of what was on the market of payment systems and a forecast for the future</a></li>
<li><a href="../247297/index.html">We get the IP addresses of HTTPS clients from HAProxy (frontend) to Nginx (backend) in HTTP and TCP balancing modes</a></li>
<li><a href="../247299/index.html">Analyze text in Excel using Azure Machine Learning and Power Query</a></li>
<li><a href="../247307/index.html">The Art of Virtual Conducting OpenStack: Working with Heat</a></li>
<li><a href="../247309/index.html">‚ÄúPerfect‚Äù coin toss: The NIST Randomness Beacon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is relational mapping of collections an alternative to object-relational mapping?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This text briefly considers the features of object-relational mapping (Object-Relational Mapping - ORM) and introduces a new concept of relational map...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is relational mapping of collections an alternative to object-relational mapping?</h1><div class="post__text post__text-html js-mediator-article">  <i>This text briefly considers the features of <b>object-relational mapping</b> (Object-Relational Mapping - ORM) and introduces a new concept of <b>relational mapping of collections</b> (Collection-Relational Mapping - CoRM), proposing to discuss the prospects and possibilities of the technical implementation of a new concept of long-term storage of objects</i> <br><a name="habracut"></a><br><h4>  Object Relational Mapping (ORM) </h4><br><br>  Today, the use of <a href="http://ru.wikipedia.org/wiki/ORM">object-relational mapping</a> (ORM), which uses the commonality of some theoretical foundations of object-oriented and relational programming to combine these two, significantly different, ways of modeling reality has become a common place in the development of large and complex systems. <br><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">Object-oriented programming</a> relies on concepts that are poorly placed in the paradigm of <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25A1%25D0%25A3%25D0%2591%25D0%2594">relational DBMSs</a> , mainly represented as systems that execute <a href="http://ru.wikipedia.org/wiki/SQL">SQL</a> queries.  Such concepts are hierarchical data structures, polymorphism, encapsulation, and of course, inheritance.  And if inheritance has somehow been developed, for example, in <a href="http://www.postgresql.org/">PostgreSQL</a> , for example, encapsulation, which directly contradicts the openness and arbitrariness of combining values ‚Äã‚Äãin SQL tuples, actually creates significant (possibly out of theoretical contradictions) obstacles to the effective use of a relational database system as a long-term state object storage class. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, the prevalence of relational database management systems, their relative efficiency in executing requests for large and very large data arrays, the wide possibilities of combining a heterogeneous computing environment through a relational database management system, and other advantages associated with using such database management systems make it necessary to compromise the convenience of system design in object -oriented style and limitations imposed on the designed system using these DBMS. <br><br>  The main support for combining the object and relational paradigms within the framework of the ORM is the thesis that just as the relational table contains many elements (rows) of one structure, so the class combines many objects having a single structure and behavior.  Therefore, one of the most common patterns commonly used in ORM implementations is the mapping of a class into a table, with the fields of the table being the attributes (all or part, uniquely defining the state) of class objects. <br><br><img src="https://habrastorage.org/storage2/58b/184/9d6/58b1849d6eab0c54a12b3e6415965809.png"><br>  <i><b>Figure 1</b> The most common form of object-relational mapping.</i>  <i>Classes are mapped to tables, attributes are mapped to table fields</i> <br><br>  Any technical implementation has its limitations, and the technology of relational DBMS based on the SQL language, far from its theoretical predecessor - <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B4%25D0%25B4,_%25D0%25AD%25D0%25B4%25D0%25B3%25D0%25B0%25D1%2580">Codd</a> <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25B5%25D0%25B1%25D1%2580%25D0%25B0_%25D0%259A%25D0%25BE%25D0%25B4%25D0%25B4%25D0%25B0">algebra</a> , is not an exception.  In this case, all the technical limitations of SQL associated with the very existence of the table, as a physical carrier of tuples of values ‚Äã‚Äãthat are interconnected by a one-to-one relationship, naturally move to the class mapped to such a table using the ORM. <br><br><img src="https://habrastorage.org/storage2/a9f/aa8/ed5/a9faa8ed5e16e44301c74add24dd18d5.png"><br>  <i><b>Figure 2</b> One of the problems with direct mapping of classes to tables: the display of attributes that are multiple in character requires separate tables.</i> <br><br><h4>  Relational mapping of collections </h4><br><br>  The concept of relational mapping of collections (Collection-Relational Mapping, CoRM) is based on the fact that the table, as a long-term repository of object states, has a completely adequate image in any developed object-oriented environment, namely, the collection (Collection). <br><br>  Storing the state of a collection of objects as a SQL table is far from a new invention.  So, half of the packages dedicated to <a href="http://docs.python.org/2/library/persistence.html">storing data in the standard python library</a> are dedicated to this technology.  The novelty of the CoRM approach lies in the fact that <i>disparate</i> collections of objects <i>are combined by</i> well defined (well-defined) relational relationships between these collections. <br><br>  <i>(the following updated: 05-30-2013, as I was rightly pointed out, document-oriented DBMS and MongoDB in particular, can also be considered as a prototype of CoRM)</i> <br>  CoRM, as well as <a href="http://en.wikipedia.org/wiki/Document-oriented_database">document-oriented DBMS</a> and <a href="http://www.mongodb.org/">MongoDb</a> in particular, does not impose any restrictions on the ability of different objects of the <i>same</i> class to store their state in <i>different</i> collections, as well as on the ability of the collection to <i>simultaneously</i> contain objects belonging to <i>different</i> classes.  The main difference of CoRM from document-oriented DBMS and tools based on them, like ORM, is that CoRM retains the possibility of using SQL (in a slightly modified form) and using relational relations between objects.  CoRM differs from the traditional ORM approach in that the collection is not tied directly to the class and theoretically can contain <i>any</i> object, while meeting the minimum requirements for this object (namely, the ability to serialize in some special way).  At the same time, these requirements do not include any restrictions on the structure of the object, the use of special data types, and so on. <br><br>  The latter circumstance distinguishes the CoRM approach, including from the well-known <a href="http://www.sqlalchemy.org/">SQLAlchemy library</a> , which also manipulates collections and classes that are separately tied to collections. <br><br>  The relational relationship between the elements of collections is determined by the presence and content (return value) of the selected properties (properties), attributes, or deterministic ( <a href="http://www.dba-oracle.com/plsql/t_plsql_deterministic.htm">deterministic</a> ) methods of the objects in the collection.  Such selected properties will be called <b>indexes of the</b> collection.  Thus, the collection and its indexes are the link between the object-oriented programming paradigm that supplies index values ‚Äã‚Äãand the relational SQL repository paradigm, which uses the resulting index values ‚Äã‚Äãto establish relational relationships between stored objects. <br><br><img src="https://habrastorage.org/storage2/744/7ea/371/7447ea371581b5d921cba9351fab0748.png"><br>  <i><b>Figure 3 The</b> collection and its indexes are the link between the object and relational data models.</i> <br><br>  Delving into the relational paradigm, one can define the concept of <b>keys</b> (Key) of a collection, each of which will refer to some combination of indexes of this collection, defining additional optimization and restrictive properties for this combination, for example, the uniqueness of the key (composite in general) within the collection. <br><br>  The individual keys of a collection can serve as <b>foreign keys</b> for accessing objects stored in another collection, just like a foreign key in a table serves to establish <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585">relational relationships</a> with another table.  In exactly the same way as a foreign key in a relational DBMS, a foreign key in relational mapping of collections can be used to maintain the integrity of the data, prohibiting the storage of such a foreign key value that does not match any of the key values ‚Äã‚Äãin the target for the foreign key collections. <br><br>  The possibility of the practical use of relational relations between collections is determined by the placement of their associated tables in one database.  The reflection of this fact for the programmer is the presence of a special storage object (Storage), which determines the specificity of the connection to the database and the general structural and functional characteristics of the DBMS, and also contains access points to the collections, tables for which are contained in this database. <br><br>  Turning to collections for sampling data, in filtering, grouping, ordering expressions, the programmer manipulates not the properties of the objects stored in the collection, but the values ‚Äã‚Äãof the indexes, resulting in a list of objects, or a list of tuples composed of objects and additionally counted expressions (defined on collection index values).  The objects themselves remain completely encapsulated inside the collection until they are deserialized upon receiving the results of the query. <br><br>  Encapsulating an object inside a collection and isolating the stored state of the object from the indexes available (as opposed to the state of the object) from the relational repository make senseless attempts to display expressions (filtering, grouping, calculating additional return values ‚Äã‚Äãand ordering) for any similarity of expressions used by the object language (python in our case), as it happens for example in SQLAlchemy.  Instead, a query from a collection can be formulated in a language as close as possible to SQL, as is done for example using <a href="https://developers.google.com/appengine/docs/python/datastore/overview">Google App Engine Datastore</a> .  The <a href="https://developers.google.com/appengine/docs/python/datastore/gqlreference">GQL</a> language used when accessing Google Datastore collections is an almost optimal pattern (of course, with the exception of the strange restrictions imposed on this language by its implementation) of a language that could be used to get data from collections using CoRM.  Names appearing in language expressions should obviously refer to indexes and keys defined on collections, and not to attributes of a stored object hidden from the relational repository. <br><br>  Bringing the collection query syntax out of the object language syntax allows precompilation and caching of compiled target storage requests, leaving the possibility of deserializing an object from the received data, which can lead to significant optimization of access speed to objects whose state is stored in the relational storage (it should be noted that the issue of optimizing access to objects in the collection, generally speaking, is quite painful for existing ORMs). <br><br>  An interesting addition is that encapsulation and selection of indexes of a collection, as a separate entity, among other things, make it easy to implement dynamic indexes, the values ‚Äã‚Äãof which are not directly contained in the attributes of the object's stored state, but are uniquely calculated from them. <br><br><h4>  Instead of output </h4><br><br>  Relational mapping of collections, when implemented, can be an excellent alternative to existing ORM implementations, allowing you to remove the application's entity from the constraints of relational storage. <br><br>  <b>Attention, question:</b> </div><p>Source: <a href="https://habr.com/ru/post/181213/">https://habr.com/ru/post/181213/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181195/index.html">Unexpected results from a simple MySQL query</a></li>
<li><a href="../181197/index.html">WordPress turns 10 years old</a></li>
<li><a href="../181201/index.html">A computer algorithm is trying to connect 320,000 manuscript fragments.</a></li>
<li><a href="../181207/index.html">Mataerial: 3D printer that prints on weight</a></li>
<li><a href="../181209/index.html">(Video) Demonstration at the stand: Extremely productive Extreme Networks</a></li>
<li><a href="../181217/index.html">Win32 / Syndicasec.A backdoor used in cyber espionage operation</a></li>
<li><a href="../181223/index.html">Apple mobile devices in the corporate sector. Configuration profiles</a></li>
<li><a href="../181227/index.html">Pegman's Story in Google Street View</a></li>
<li><a href="../181231/index.html">Does the programmer need free * lyushki (version 2023)</a></li>
<li><a href="../181233/index.html">Using IAM Roles with Powershell AWS Utilities</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SLA to the cloud: how to read and what to look for</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I want to talk about how to read the Service Level Agreement in the contract for cloud services. SLA is the norm: customers demand it at the req...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SLA to the cloud: how to read and what to look for</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/ed6/070/0b6/ed60700b6fd74715ba666b1a1dafba4b.jpg"><br><p><br>  Today I want to talk about how to read the Service Level Agreement in the contract for cloud services.  SLA is the norm: customers demand it at the request stage, providers specify the cherished nines in all materials.  I will not deny it ‚Äî it is bad without an SLA, but it is not always clear what the areas of responsibility affect the agreement.  Let's try to figure out what it is and when to run to the provider, waving the contract, and when to look for the problem on the spot. </p><br><p>  <b>A simple example:</b> the client stops working VM, the client immediately thinks that the problem is in the infrastructure.  And looking, what is there in the SLA about the availability.  Or maybe, in fact, the OS is frozen, the client network lags - you can assume anything.  If the problem is inside the OS, the resource provider will not help here. </p><a name="habracut"></a><br><p>  If we do not administer client virtual machines, then the applications inside for us is a black box.  In this case, the most frequent failures are just on the side of the application.  Anything can happen: disks will overflow, accounts will be blocked, DNS will fail, application components will stop interacting due to incorrect settings.  And it may be that the system time is set incorrectly or an unnecessary update is installed.  Such problems are not a violation of the SLA and are solved on the client side.  So when does he act? </p><br><h2 id="sla--chto-eto-takoe-i-dlya-chego">  SLA - what is it and why? </h2><br><p>  SLA is a kind of warranty card for the service.  But this is not just a point with nines in the main contract.  This is a deployed application in which all parameters of the provided service are recorded.  Properly compiled application insures both the client and the service provider. </p><br><p>  The SLA contains the guaranteed values ‚Äã‚Äãof the basic parameters of the provision of services.  Important point: guaranteed means <b>no lower</b> .  So, in the SLA for the virtual infrastructure, indicators are taken into account before the operating system on the client VM.  The operating system and applications inside the VM are the concern of the client's administrator.  If something is broken, first check with yourself.  Believe me, if the infrastructure itself breaks, the provider will know about it before you through monitoring. </p><br><p>  <b>In a good SLA to the virtual infrastructure should be:</b> </p><br><ul><li>  Availability of virtual resources and Internet access. </li><li>  The parameters of the virtual infrastructure and Internet access with valid values. </li><li>  Methods for measuring and monitoring these parameters. </li><li>  Priorities for incidents, requests, a brief description of them and the time for reaction and elimination. </li><li>  Penalties for violation of guaranteed parameters. </li></ul><br><p>  Let's start in order. </p><br><h2 id="dostupnost">  Availability </h2><br><p>  Availability is the very same Nines, which are most often issued for SLA.  Availability percentages are converted to minutes and hours of service unavailability per month or year. </p><br><p>  For example: </p><br><table><thead><tr><th>  Availability </th><th>  Idle month </th><th>  Idle year </th></tr></thead><tbody><tr><td>  99% </td><td>  7 o'clock  18 min  17.5 seconds </td><td>  3 days 15 o'clock  39 min  29.5 seconds </td></tr><tr><td>  99.9% </td><td>  43 min.  49.7 seconds </td><td>  8 o'clock  45 min.  57 sec. </td></tr><tr><td>  99.95% </td><td>  21 min  54.9 seconds </td><td>  4 hours 22 minutes  58.5 seconds </td></tr><tr><td>  99.982% </td><td>  7 min  53.4 seconds </td><td>  1 hour 34 min.  40.3 seconds </td></tr></tbody></table><br><p>  All options can be found <a href="https://uptime.is/">here</a> . <br>  It would seem, everything is clear, what's the catch? </p><br><p>  <b>Month or year.</b>  Not for nothing, I chose two columns at the top - a month and a year.  When you see the treasured nines in SLA, pay attention to what period they belong to.  Most often, providers talk about the month.  <b>That is, with 99% availability, we get more than 7 hours of downtime per month, not per year.</b>  Refine this point so that later there will be no disappointment. </p><br><p>  <b>Nines and infrastructure.</b>  If you need a certain level of service fault tolerance, then the virtual infrastructure must be built in such a way that this availability is ensured.  So, to achieve an availability level of 99.95%, you at a minimum need an active-passive cluster.  If you want to step over 99.982% (level of accessibility in Tier III data centers), you need to build a system distributed across several data centers. </p><br><p>  Choosing a virtual infrastructure configuration, answer the question: do you need five nines?  Nines should not be an end in themselves.  First, the more nines, the more expensive the system will cost you.  Each following honest nine will add a zero to the right to the cost!  Secondly, not every service requires a geographically distributed cluster. </p><br><p>  If you choose cloud resources, decide what problem you are solving now: build a test environment or a cold reserve or place critical services - an online store, payment system or CRM. </p><br><p>  <b>Cumulative availability.</b>  If your application has availability of 99.5%, the cloud has availability of 99.95%, and the data center where it is deployed is 99.982%, then at the output you will have accessibility <b>not higher than 99.5%</b> .  Since the availability of the entire service can not be higher than the availability of its weakest link.  Keep this in mind when choosing a service and do not try to treat a fracture with plantain.  A secure geo-distributed cluster will not save the application falling through the day. </p><br><h2 id="ne-dostupnostyu-edinoy">  Not accessible single </h2><br><p>  Availability for IT services is a key parameter.  But even with 100% uptime, the virtual machine can be tough due to network latency, insufficient IOPS, high latency data storage and other problems.  Therefore, in the correct SLA there should be all the quality metrics for the infrastructure.  What to look for and what to strive for? </p><br><ul><li>  <b>Performance vCPU.</b>  Determined by the number of requests processed per second (MIPS - million instructions per second).  It should be specified how the provider measures these same MIPS.  At a specified value, you can compare the estimated performance of the VM kernel with your hardware. </li><li>  <b>The allowable percentage of the size of the paging file (RAM Swap) of the configured VM memory.</b>  When your VM gets a disk file instead of memory, this is very bad.  This item will protect your VM from a critical performance hit. </li><li>  <b>Storage performance / IOPS.</b>  Measured, as a rule, by the number of operations per second (IOPS - Input / Output Operations Per Second).  The block size for reading / writing is different for different types of disks.  The load pattern is also different: it is determined from the ratio of read / write operations during the test.  The test is performed as follows: a certain number of parallel write / read processes are sent to the disk with a certain queue depth.  Result: how many I / O operations with a block of a certain storage size can process at one time.  The block size, the number of processes and the load pattern should be fixed in the SLA for an unambiguous understanding of the IOPS parameter.  Also in the SLA, the allowable reduction in IOPS from the reference value is fixed - no more than 10%. </li><li>  <b>Storage performance / Average disk access time on a virtual machine (latency).</b>  This indicator is no less important than IOPS.  Moreover, IOPS without latency makes little sense.  Imagine that the storage system will send many data blocks to the VM.  But rarely.  Delays depend on the type of storage disks, but if they are higher than 50 ms, the speed of the VM will not make you happy, it's time to open the "Incidents" section. </li><li>  <b>Average network latency.</b>  Here a critical indicator will be 5 ms.  It is important that only network delay within the provider‚Äôs data network falls under the SLA.  As a rule, this is the site before the junction with your telecom provider. </li><li>  <b>The percentage of packet loss.</b>  Packet losses are errors in system settings or a problem in communication channels, they should not be.  However, in some cases, for example, when a VM is backed up, packet loss may occur within ~ a second.  Therefore, the rate for this parameter is in the range from 0 to 1%.  As in the case of network latency, check with the provider where his responsibility ends. </li></ul><br><p>  The SLA should also prescribe the methods of measurement and monitoring for each parameter.  For example: </p><br><img src="https://habrastorage.org/web/e33/4ca/594/e334ca594c1449b2af7ea5761e3244da.png"><br><p><br></p><br><h2>  Requests, incidents and technical work </h2><br><p>  At first we will dissolve concepts inquiry and incident.  The request is a request for regular work.  The incident - when something broke and does not work, for example: the car is very tupit or not pinged.  If something is broken by the provider, then the incident notification comes from the monitoring system.  All requests and incidents are prioritized.  This allows you to quickly respond to questions of life and death and repair everything in time.  It is important to determine the status of the application at the stage of its registration.  How it works with us, we told <a href="https://habrahabr.ru/company/dataline/blog/327962/">in the article about the support service.</a> <a href="https://habrahabr.ru/company/dataline/blog/327962/"><br></a> <br>  <b>Solving incidents.</b>  All possible failures do not predict.  But typical reasons for unavailability of the service should be recorded in the SLA.  Once again, the agreement affects only the problems on the provider side and does not apply to errors inside the VM.  All incidents are divided by priorities, depending on whether they lead to the complete unavailability of the service or to partial degradation.  For each priority is determined by the maximum period of elimination. </p><br><p>  If you use different types of disks, do not forget to register incidents for each of them: </p><br><img src="https://habrastorage.org/web/7a0/1f1/1d3/7a01f11d34c448c98e55b2b9adc261cc.png"><br><p>  <i>An example of first-priority incidents.</i> </p><br><p>  In our SLA on IaaS, we divide incidents into three priorities.  Each is processed around the clock, but the time for execution is different. </p><br><p>  Check with the provider how he considers the time for the execution of the incident, and check that it is spelled out in the application.  As a rule, the time of execution is considered to be the time from notifying the client of the registration of the incident until the moment of its resolution. </p><br><p>  In addition, SLA can limit the number of requests that you can open with your provider per month. </p><br><p>  <b>Query Processing.</b>  That's right: in a good SLA, there is a time for processing requests.  This is necessary in order to properly prioritize and not miss the service outage for routine tasks.  And protect the provider.  Since we are not talking about stopping the service, this section is often not read in, but in vain.  It is here that it is recorded that requests are accepted during the working hours of the provider and their decision is given at least 12 hours. </p><br><p>  We divide requests into three types, which differ in the nature of work and execution time: </p><br><ul><li> <b>Service Request</b>  These are works on servicing the customer‚Äôs current resources: restoring the VM from a backup, installing the OS, changing the network settings. </li><li>  <b>Request for change.</b>  Work on changing the composition of client services under the contract: adding or removing resources, expanding or adding new VMs.  This includes changing the parameters of the SLA. </li><li>  <b>Request for information.</b>  All reports on client infrastructure and applications for new services. </li></ul><br><p>  <b>Maintenance work and notification.</b>  Infrastructure is a living organism.  It needs to be maintained: upgrade, roll critical updates, carry out planned work (for example, update the firmware on the servers).  Not all work can be done without stopping the service.  Therefore, the SLA records the order of notification of such work, the time of work and the possible time of service interruption.  Check that the period for notification of planned work is sufficient and the maximum time for stopping the service is fixed. </p><br><p>  Here it looks like this: </p><br><img src="https://habrastorage.org/web/f34/f0d/44c/f34f0d44c1d748f4abad9db2f811641d.png"><br><p><br></p><br><p>  <b>Imposing penalties.</b>  Penalties are of two types: for exceeding the response time to the incident and for a simple service, in our case, a virtual infrastructure.  The more detailed the procedure for imposing sanctions, the safer both the client and the provider feel.  If the conditions are not clear, ask the provider questions before signing the agreement, so that there are no surprises and disappointments. </p><br><p>  If the SLA has all the points described above, then you get a service with transparent guarantees and a level of availability.  Lying in SLA is unprofitable, since it will not work out of fines.  But it will not be possible to adjust for SLA failures due to inert applications or incorrect VM settings. </p><br><p>  If you have questions, traditionally wait in the comments.  Healthy you clouds! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/336828/">https://habr.com/ru/post/336828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336816/index.html">Spring MVC - the basic principles</a></li>
<li><a href="../336818/index.html">XBRL: just about the complex - Chapter 6. Immersion in XBRL - Part 6. Multidimensionality</a></li>
<li><a href="../336822/index.html">Factory Testing: The Black Box and Short Testing Cycle</a></li>
<li><a href="../336824/index.html">How to step over legacy and start using static code analysis</a></li>
<li><a href="../336826/index.html">Chinese Application Localization Guide, Part 2</a></li>
<li><a href="../336830/index.html">Finnopolis-2017: we invite fintech talents to Sochi</a></li>
<li><a href="../336832/index.html">Promotion of games on Google Play</a></li>
<li><a href="../336834/index.html">Rethinking PID 1. Part 4</a></li>
<li><a href="../336838/index.html">You're not a compiler</a></li>
<li><a href="../336840/index.html">How (and why) we ported Shenzhen Solitaire under MS-DOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
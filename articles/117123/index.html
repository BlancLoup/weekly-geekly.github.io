<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moving Offline: Web Storage, Application Cache, and WebSQL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To make applications that can work in a completely autonomous mode, we need to get acquainted with the following technologies: HTML5 Application Cache...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moving Offline: Web Storage, Application Cache, and WebSQL</h1><div class="post__text post__text-html js-mediator-article">  To make applications that can work in a completely autonomous mode, we need to get acquainted with the following technologies: HTML5 Application Cache, Web Storage and WebSQL. <br>  I have already published introductory articles on <a href="http://dev.opera.com/articles/view/web-storage/">Web Storage</a> and <a href="http://dev.opera.com/articles/view/offline-applications-html5-appcache/">HTML5 Application Cache</a> .  I recommend them to read if you are not familiar with the basic concepts.  This article will revise these technologies, including WebSQL, and describe the options for sharing them effectively.  All these technologies are supported by the desktop version of Opera 11.10 browser, Opera Mobile 11, WebKit browsers (in iOS and Google Android). <br><a name="habracut"></a><br><table><tbody><tr><td>  <b>Note:</b> All the examples described below are available in <a href="">this archive</a> .  You can download the archive and watch examples while reading the article (naturally, being offline). </td></tr></tbody></table><br><h1>  Why do we need an ‚Äúoffline mode‚Äù? </h1><br>  Currently, web pages are not just text.  The Internet is becoming more widespread, and web applications, respectively, are also becoming more and more complex and sophisticated.  And our dependence on them only grows.  We can see more and more examples of web applications successfully replacing traditional desktop applications, whose main advantage has always been their ability to safely work offline.  To give the same opportunity to web applications did not allow the lack of the necessary technologies and tools. <br>  <s>But everything changes when they come ...</s> <br>  But now this is not a problem!  With the advent of technologies such as HTML5 Application Cache, Web Storage, and WebSQL, we finally got a way to make web applications work offline: <br><ul><li>  Application Cache allows you to keep a copy of HTML, CSS and other elements of our web application offline, which will be used when the network is unavailable. </li><li>  Web Storage is based on storage mechanisms like cookies, representing a more flexible and more powerful implementation. </li><li>  WebSQL implements a full-sized SQL database inside your browser that can store copies of web application data for offline use, allowing users to continue working with data even if they lose connection to the network.  Data is synchronized with the server when it is next connected to the network. </li></ul><br>  There are many reasons for the loss of connection to the network: power failure, problems with network equipment, the missing (or weak) signal in the case of work through a cell phone.  As developers, we want to be sure that even in such situations our web applications will work correctly (at least within reasonable limits). <br><br><h1>  Cache: loaded and in the absence of the network </h1><br>  In general, if we are not online, we will get an error when loading or reloading pages on the site.  The first thing to do is make sure that our users can see the pages and work with the web application even when there is no connection, i.e.  all images, CSS, JavaScript and the HTML page itself must be loaded correctly in this mode. <br>  This is achieved through the use of technology Application Cache (also called AppCache).  To use it, you first need to declare a manifest file in which to specify the names of the files that the application needs to work offline. <br>  Sample <i>demo.manifest</i> file: <br><pre><code class="html hljs xml">CACHE MANIFEST CACHE: logo.png style.css script.js jquery.js index.htm</code> </pre> <br>  Whatever links this manifest file contains, the corresponding content is placed in the cache, and subsequently this content will already be accessed.  Declaring a manifest file is very simple - you need to use the <i>manifest</i> attribute of the <i>&lt;html&gt;</i> element: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">manifest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"demo.manifest"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  All files declared in this file will be placed in the cache of your browser.  Even if a person is offline and tries to load the page, all the resources listed in this file will be loaded by the browser. <br>  More information about this can be found in the article about <a href="http://dev.opera.com/articles/view/offline-applications-html5-appcache">HTML5 Application Cache</a> . <br><br><h1>  What about the data? </h1><br>  AppCache solves the problem of the availability of some elements of the site offline, but we may want to store some amount of user data or, for example, its recent search queries.  In another case, you may want to store more structured data.  In any case, Web Storage and WebSQL will be the best solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  We use Web Storage </h3><br>  Web Storage is perfect for storing small amounts of information, rather than huge tables with data, which we will briefly discuss in this article, consider examples.  For more information, you can find in a separate <a href="http://dev.opera.com/articles/view/web-storage/">article on Web Storage</a> . <br>  There are many places where frequent power outages are common (‚ÄúChubais, hello! :)‚Äù, from a translator.  The user has to sit and wait for him to continue his work on the Internet until he turns on the electricity.  Imagine if someone was in a similar situation filling out a multi-page form on a website, typing a large article for a blog or an important email.  During a power outage (or batteries will sit down), the user will lose all this data.  Wouldn't it be better if, after logging in to the network, all unsaved records will be available to him, with which he will continue working? <br>  Let's see what can be done on the page containing the plain text field <i>&lt;textarea&gt;</i> ?  The page should save everything that we type into the local storage every few seconds, and in case of its reloading or closing, the page should load the last text stored in the field. <br>  Suppose our page contains a <i>&lt;textarea&gt;</i> field with the <i>id</i> ‚Äúdraft‚Äù: <br><pre> <code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"draft"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rows</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cols</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">textarea</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre><br>  Let's write a simple function that will save the contents of <i>&lt;textarea&gt;</i> to the local storage: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> message = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"draft"</span></span>); localStorage.setItem(<span class="hljs-string"><span class="hljs-string">"message"</span></span>, message.value) }</code> </pre><br>  Set the save interval to half a second: <br><pre> <code class="javascript hljs">setInterval(saveMessage, <span class="hljs-number"><span class="hljs-number">500</span></span>);</code> </pre><br><table><tbody><tr><td>  <b>Note:</b> here we used <i>setInterval ()</i> for simplicity to save a message to the local storage every half second.  (You could improve this procedure, for example, saving the contents of a text field only if the user entered something into it). </td></tr></tbody></table><br>  You also need to make sure that each time the page is opened or reloaded, the last saved content from the local storage ( <i>localStorage</i> ) is loaded into the text field: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, loadMessage, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadMessage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textbox = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"draft"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> message = localStorage.getItem(<span class="hljs-string"><span class="hljs-string">"message"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!message) { textbox.value = <span class="hljs-string"><span class="hljs-string">""</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { textbox.value = message; } }</code> </pre><br>  See an example of <a href="http://people.opera.com/shwetankd/webstorage/webstoragedemo.htm">working with Web Storage</a> .  It is generally chic <br>  If you need to save locally small pieces of information. <br><br><h3>  We work offline </h3><br>  To go offline, you need to activate it (in Opera browser: ‚ÄúMenu‚Äù ‚Üí ‚ÄúSettings‚Äù ‚Üí ‚ÄúWork offline‚Äù or ‚ÄúFile‚Äù ‚Üí ‚ÄúWork offline‚Äù).  The <i>navigator.onLine</i> property is <i>false</i> if the browser is offline, otherwise it is <i>true</i> .  However, in many cases it would be better to use events.  When the user switches to offline mode, an <i>offline</i> event is triggered; when it switches back, it is correspondingly <i>online</i> .  You can use this to display a small message about going offline. <br>  Something like this will turn out: <br><pre> <code class="javascript hljs">... window.addEventListener( <span class="hljs-string"><span class="hljs-string">"offline"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{showWarningDiv(<span class="hljs-string"><span class="hljs-string">"on"</span></span>)}, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener( <span class="hljs-string"><span class="hljs-string">"online"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{showWarningDiv(<span class="hljs-string"><span class="hljs-string">"off"</span></span>)}, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); ... function showWarningDiv(status){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> warningdiv = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"warning"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status == <span class="hljs-string"><span class="hljs-string">"on"</span></span>){ warningdiv.innerHTML = <span class="hljs-string"><span class="hljs-string">"&lt;p style=\"padding:3px;\"&gt;Right now you are in offline mode. This message is saved and will be sent to the server the next time you are online.&lt;/p&gt;"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { warningdiv.innerHTML = <span class="hljs-string"><span class="hljs-string">""</span></span>; } }</code> </pre><br><table><tbody><tr><td>  <b>Note:</b> currently, offline support is only available in Opera and Firefox. </td></tr></tbody></table><br>  It makes sense to ensure that forms do not attempt to send data while the user is offline.  To check this, we can do this: <br><pre> <code class="javascript hljs">... window.addEventListener( <span class="hljs-string"><span class="hljs-string">"submit"</span></span>, submitForm, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); ... function submitForm(){ saveMessage(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!navigator.onLine){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre><br>  When submitting form data, a <i>submit</i> event is triggered, which calls the <i>submitForm ()</i> function.  This function will first save the message to the local storage, then, if the user is offline, the data will not be sent anywhere. <br>  You can improve this example so that it saves a copy to the server every few seconds so that it is available there in case the user accidentally deletes the data from himself.  This is especially important in those cases of work, for example, with confidential information: you say, you want your credit card information to be stored only in your local storage. <br>  See also a <a href="">more advanced example</a> that uses <i>sessionStorage</i> to store information.  If you do not close the page (even if it is reloaded), the text entered in the text field will remain there.  The page will also send the contents of this field to the server every few seconds and, accordingly, update the last save time.  This approach can be used in blogging engines and email services to periodically save the ‚Äúdrafts‚Äù, which will allow you to continue working in case of problems with the connection. <br><br><h3>  WebSQL: another ‚Äúservice‚Äù offline </h3><br>  Web Storage is great for storing small amounts of information, but what if we want to store a whole database?  How about that the web application could do various inquiries to a database, search in it? <br>  Here, Web Storage will no longer allow to turn around - you need something more reliable.  Namely - WebSQL.  WebSQL is a local SQLite database in which you can store your data using a combination of Javascript and SQL. <br><br><h5>  Work with WebSQL-databases </h5><br>  First of all, you need to make sure that the browser supports WebSQL?  This can be done through the <i>window.openDatabase</i> property: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.openDatabase){ <span class="hljs-comment"><span class="hljs-comment">//rest of your code } else{ alert("It seems your browser does not have support for WebSQL. Please use a browser which does, otherwise parts of this application may not run as intended."); //or any other similar message }</span></span></code> </pre><br><h5>  Creating and opening a database </h5><br>  You can create and open a database using the <i>openDatabase</i> command, as follows: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = openDatabase(<span class="hljs-string"><span class="hljs-string">"food_db"</span></span>, <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Web SQL Storage Demo Database"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>); <span class="hljs-comment"><span class="hljs-comment">// creates a database called 'food_db' with version number 1.0, description as 'Web SQL Demo Database' and a size of 1MB.</span></span></code> </pre><br>  We have just created a <i>food_db</i> version 1.0 database, with a description of <i>‚ÄúWeb SQL Storage Demo Database‚Äù</i> , 1 MB in size.  The variable <i>db</i> is a pointer to a database object, which we will continue to use. <br><table><tbody><tr><td>  <b>Note:</b> database size is set in bytes.  Therefore, we determined the size in the format 1 * 1024 * 1024, which is 1 MB.  If you need to set the size, for example, 4 MB, you should specify the value 4 * 1024 * 1024, respectively. </td></tr></tbody></table><br><h5>  Work with database </h5><br>  We created and opened a database.  Now you can perform various operations on it using SQL commands.  We will perform operations by calling the <i>transaction ()</i> function of the database object (in our case, this is <i>db</i> ).  Its call returns an object as a pointer, over which we will execute various commands using <i>executeSQL ()</i> .  The syntax of this command is as follows: <br><pre> <code class="javascript hljs">executeSql(sqlStatement, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, callback, errorCallback);</code> </pre><br>  Of the parameters, only <i>sqlStatement</i> is required, the rest are optional. <br>  So, for example, if we want to create a table, we will need to write the following: <br><pre> <code class="javascript hljs">... db.transaction( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// This is the callback with "t" as the transaction object t.executeSql("CREATE TABLE IF NOT EXISTS cal_list (food_name TEXT PRIMARY KEY, calories REAL, servings TEXT)"); } ); ...</span></span></code> </pre><br>  This code will create a <i>cal_list</i> table (if it did not exist) with the fields <i>food_name</i> , <i>calories,</i> and <i>servings</i> . <br><br><h5>  Adding records to the table </h5><br>  Making requests to add records to a table is a simple task for WebSQL.  Consider an example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> food_name = <span class="hljs-string"><span class="hljs-string">"pizza"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> amount_of_calories = <span class="hljs-number"><span class="hljs-number">320</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serving_size = <span class="hljs-string"><span class="hljs-string">"one slice"</span></span>; db.transaction( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">)</span></span>{ t.executeSql(<span class="hljs-string"><span class="hljs-string">"INSERT INTO cal_list VALUES (?, ?, ?)"</span></span>, [food_name, amount_of_calories, serving_size]); } );</code> </pre><br>  The first question mark escapes the <i>food_name</i> parameter, the second, the <i>amount_of_calories parameter</i> , and the third, <i>serving_size</i> .  This code adds an entry to the <i>cal_list</i> table with the values: <i>pizza</i> , <i>320</i> and <i>one slice</i> corresponding columns. <br>  Perform another request - to receive data: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> min_cal_amount = <span class="hljs-number"><span class="hljs-number">300</span></span>; ... t.executeSql(<span class="hljs-string"><span class="hljs-string">"SELECT * FROM cal_list WHERE calories &gt; ?"</span></span>, [min_cal_amount]);</code> </pre><br>  This code will execute a query to fetch all rows with a <i>calories</i> greater than 300: the question mark escapes the <i>min_cal_amount</i> variable. <br><br><h5>  Processing query results </h5><br>  Well, we have created a database with tables in which we have written data, now we want to make a query and display the results.  Usually, we get a bunch of results for one SQL query and we need to somehow process these results in order to display them in a table or some other structured form on the page.  The third parameter of the executeSQL () function determines the success of the query execution.  Below is an example of processing the results: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"thelist"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> food; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> min_cal_amount = <span class="hljs-number"><span class="hljs-number">400</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serving_size; db.transaction( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">)</span></span>{ t.executeSql(<span class="hljs-string"><span class="hljs-string">"SELECT food_name AS food, calories AS amount_of_calories, servings as serving_size FROM cal_list where calories &gt; ?"</span></span> ,[min_cal_amount], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t,r</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; r.rows.length; i++){ food = r.rows.item(i).food; amount_of_calories = r.rows.item(i).amount_of_calories; serving_size = r.rows.item(i).serving_size; list.innerHTML +=<span class="hljs-string"><span class="hljs-string">"&lt;li&gt;"</span></span>+food+<span class="hljs-string"><span class="hljs-string">" has "</span></span>+amount_of_calories+<span class="hljs-string"><span class="hljs-string">" KCAL worth of calories.&lt;/li&gt;"</span></span>; } }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t,e</span></span></span><span class="hljs-function">) </span></span>{alert(e.message);}) } );</code> </pre><br>  First, we determine the number of elements in the query result through <i>r.rows.length</i> and run from 0 to this value.  Each item is available at <i>r.rows.item (i)</i> , where i is the line number.  Column names can be obtained in the same way.  To get the value of the <i>food</i> column, use <i>r.rows.item (i) .food</i> and so on for the other columns. <br><br><h1>  We use everything at once </h1><br>  It is possible that you will want to use Web Storage, Application Cache and WebSQL together.  It is possible, it all depends on the tasks that need to be solved.  For example, if you want to store only a few user preferences, it would be overkill to use WebSQL.  For such purposes, Web Storage is better suited. <br>  However, if you have a large amount of data, and you need to somehow handle it, it would be more logical to use WebSQL. <br>  Visit the calorie example page, which <a href="http://people.opera.com/shwetankd/websql/combineddemo.htm">uses all three technologies together</a> : the database is stored in Web Storage, so you can search even if you close or reload the page, AppCache and WebSQL are used to provide the ability to work offline. <br><table><tbody><tr><td>  <b>Note:</b> you can independently obtain information about which databases are used in Opera and manage them by clicking on the link <b>opera: webdatabases</b> .  And get information about the domains that store their data in the browser using Web Storage, and manage them by clicking on the link <b>opera: webstorage</b> . </td></tr></tbody></table><br><h1>  Wait ... is the WebSQL specification approved? </h1><br>  Not yet final.  But you can already use this technology on the list of browsers and devices.  What can not be said about IndexedDB, which has no such cross-platform support.  It remains only to wait for the approval of the specification, which will happen soon. <br>  It is also important to note that some desktop versions of browsers, such as Firefox and Internet Explorer, will not support WebSQL, they will work with IndexedDB.  In this case, the first place where WebSQL can be used is a standalone data store for smartphones: Opera Mobile 11 browsers are supported, as well as WebKit browsers for Android and iOS platforms. <br>  The good news about WebSQL is that it offers a handy tool for creating a standalone database in a browser.  It is easy to learn and use and allows you to quickly develop a stand-alone web application that will work immediately in multiple browsers. <br><br><h1>  Conclusion </h1><br>  Web applications are now able to work completely offline, using technologies such as Application Cache, Web Storage, and WebSQL databases.  We need Application Cache to cache files in order to use them offline;  Web Storage - for storing small amounts of information, well, WebSQL will be a convenient tool for working with large amounts of data.  Developers, depending on their needs, can use various combinations of these technologies to create stand-alone applications. <br><hr><br>  Technology promising.  And, as usual, there will be races ... WebSQL and IndexedDB, the mentions of which <a href="http://habrahabr.ru/tag/indexeddb/">were</a> already <a href="http://habrahabr.ru/tag/indexeddb/">on the habr</a> .  Let them make the world better :) <br><br><h6>  ps All comments on the translation, as usual, are taken in a personal. <br>  pps somewhere I, apparently, smoothly moved from ‚Äúweb storage‚Äù to ‚Äúlocal storage‚Äù.  What is better to leave something?  ;) </h6></div><p>Source: <a href="https://habr.com/ru/post/117123/">https://habr.com/ru/post/117123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117116/index.html">Using BitTorrent in Java: jBitTorrent API</a></li>
<li><a href="../117117/index.html">Dingoo A320 for $ 49.50</a></li>
<li><a href="../117118/index.html">QR coded Dubai</a></li>
<li><a href="../117120/index.html">13th issue of PROGRAMIST</a></li>
<li><a href="../117122/index.html">Very complex player</a></li>
<li><a href="../117124/index.html">IQ701. File thoroughly before use.</a></li>
<li><a href="../117125/index.html">The bonuses of all Google employees are tied to the success of social projects.</a></li>
<li><a href="../117127/index.html">France banned storing passwords in hashed form</a></li>
<li><a href="../117131/index.html">Official release of CentOS 5.6</a></li>
<li><a href="../117132/index.html">Google password strength assessment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
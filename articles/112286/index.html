<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FileSystem API & File API: we understand and use</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I want to review the FileSystem API and File API, deal with its methods and show a couple of useful pieces. This article is a compilat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FileSystem API & File API: we understand and use</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://www.w3.org/html/logo/"><img src="https://habrastorage.org/getpro/habr/post_images/587/14e/491/58714e491c12bb782a885d4782e102b7.png" width="165" height="64" alt="HTML5 Powered with Performance &amp;amp; Integration, and Offline &amp;amp; Storage" title="HTML5 Powered with Performance &amp; amp; Integration, and Offline &amp; amp; Storage" align="left"><br></a>  In this article I want to review the FileSystem API and File API, deal with its methods and show a couple of useful pieces.  This article is a compilation of materials with <a href="http://www.html5rocks.com/">html5rocks</a> ( <a href="http://www.html5rocks.com/features/file">1</a> , <a href="http://www.html5rocks.com/tutorials/file/dndfiles/">2</a> , <a href="http://www.html5rocks.com/tutorials/file/filesystem/">3</a> ).  All the demos below can be viewed at the first two links.  The third link also offers a number of interesting demos.  Well, now let's study the material. <br><a name="habracut"></a><br><h4>  As an introduction </h4><br>  Using the <b><a href="http://dev.w3.org/2009/dap/file-system/pub/FileSystem/">FileSystem API</a></b> and <b><a href="http://www.w3.org/TR/file-upload/">File API, a</a></b> web application can create, read, view and write files located in the user sandbox area. <br><br>  The API description is divided into the following sections: <br><ul><li>  Reading and file management: <b><a href="http://dev.w3.org/2006/webapi/FileAPI/">File</a></b> / <b><a href="http://dev.w3.org/2006/webapi/FileAPI/">Blob</a></b> , <b>FileList</b> , <b><a href="http://dev.w3.org/2006/webapi/FileAPI/">FileReader</a></b> </li><li>  Create and write: <b><a href="http://dev.w3.org/2009/dap/file-system/file-writer.html">BlobBuilder</a></b> , <b><a href="http://dev.w3.org/2009/dap/file-system/file-writer.html">FileWriter</a></b> </li><li>  Work with directories and permissions: <b>DirectoryReader</b> , <b>FileEntry</b> / <b>DirectoryEntry</b> , <b><a href="http://dev.w3.org/2009/dap/file-system/pub/FileSystem/">LocalFileSystem</a></b> </li></ul><br>  A few words about the objects with which to work: <br><ol><li>  File - the file itself;  allows you to get read-only information such as name, size, mimetype, and more. </li><li>  FileList is an ‚Äúarray‚Äù of File objects. </li><li>  Blob is an entity that allows to parse a file by bytes. </li></ol><br><h5>  Browser support and storage restrictions </h5><br>  At the time of this writing, only Google Chrome 9+ has a working implementation of the FileSystem API.  And at the moment there are no dialog boxes for managing files and quotas on storage, so you will need to use the - <b>unlimited-quota-for-files</b> flag (if you develop applications for the Chrome Web Store, a manifest with <i>unlimitedStorage</i> permission will be enough).  But everything changes and users will soon have the opportunity to manage the rights to work with the files that will be required by the application. <br><br>  You may need to use the <b>--allow-file-access-from-files</b> flag if you debug an application using <i>file: //</i> .  If this flag is not used, then exceptions of type <b>SECURITY_ERR</b> or <b>QUOTA_EXCEEDED_ERR</b> will be thrown. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Accessing the file system </h4><br>  Let's check the browser support for the functions we need. <br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   File API if (window.File &amp;&amp; window.FileReader &amp;&amp; window.FileList &amp;&amp; window.Blob) { //  } else { alert('File API    '); }</span></span></code> </pre> <br>  A web application can access the file system (of course in a restricted sandbox) by calling the following window.requestFileSystem () method: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(type, size, successCallback, opt_errorCallback)</code> </pre><br>  <i>type</i> <br><blockquote>  Retention rules, available <b>window.TEMPORARY</b> and <b>window.PERSISTENT values</b> .  data stored using the <b>TEMPORARY</b> key may be deleted at the discretion of the browser (for example, if there is not enough space).  If the <b>PERSISTENT</b> key is set, then the data can be cleared only after user or application actions. <br></blockquote><br>  <i>size</i> <br><blockquote>  The size (in bytes) of the storage that the application will need. <br></blockquote><br>  <i>successCallback</i> <br><blockquote>  Callback function performed in case of successful access to the file system.  Its argument is an object of type <b>FileSystem</b> . <br></blockquote><br>  <i>opt_errorCallback</i> <br><blockquote>  Optional callback function for error handling.  It is also called when a file system access error occurs.  The parameter is an object of type <b>FileError</b> . <br></blockquote><br>  If you call the <i>requestFileSystem ()</i> method within your application for the first time, then at that moment the storage will be created.  It is very important to remember that this storage is closed and another application will not have access to it.  It also means that the application cannot change other files and folders located on the hard disk. <br><br>  Usage example <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInitFs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Opened file system: '</span></span> + fs.name); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">5</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-comment"><span class="hljs-comment">/*5MB*/</span></span>, onInitFs, errorHandler);</code> </pre><br>  The FileSystem specification also describes an API for synchronous operation, namely the LocalFileSystemSync interface, which is supposed to be used together by Web Workers.  But in this article this API will not be considered. <br><br>  Returning to the <i>requestFileSystem ()</i> method, it is worth describing the possible errors that occur: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">errorHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msg = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (e.code) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FileError.QUOTA_EXCEEDED_ERR: msg = <span class="hljs-string"><span class="hljs-string">'QUOTA_EXCEEDED_ERR'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FileError.NOT_FOUND_ERR: msg = <span class="hljs-string"><span class="hljs-string">'NOT_FOUND_ERR'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FileError.SECURITY_ERR: msg = <span class="hljs-string"><span class="hljs-string">'SECURITY_ERR'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FileError.INVALID_MODIFICATION_ERR: msg = <span class="hljs-string"><span class="hljs-string">'INVALID_MODIFICATION_ERR'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> FileError.INVALID_STATE_ERR: msg = <span class="hljs-string"><span class="hljs-string">'INVALID_STATE_ERR'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: msg = <span class="hljs-string"><span class="hljs-string">'Unknown Error'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; }; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Error: '</span></span> + msg); }</code> </pre><br>  The described example is very simple, but in fact is a blank for further work with errors that occur. <br><br><h4>  Work with files </h4><br>  FileEntry interface is provided for working with files.  It has a number of methods and properties that we used to associate with regular files.  We give them below: <br><pre> <code class="javascript hljs">fileEntry.isFile === <span class="hljs-literal"><span class="hljs-literal">true</span></span> fileEntry.isDirectory === <span class="hljs-literal"><span class="hljs-literal">false</span></span> fileEntry.name fileEntry.fullPath ... fileEntry.getMetadata(successCallback, opt_errorCallback); fileEntry.remove(successCallback, opt_errorCallback); fileEntry.moveTo(dirEntry, opt_newName, opt_successCallback, opt_errorCallback); fileEntry.copyTo(dirEntry, opt_newName, opt_successCallback, opt_errorCallback); fileEntry.getParent(successCallback, opt_errorCallback); fileEntry.toURI(opt_mimeType); <span class="hljs-comment"><span class="hljs-comment">// Currently not implemented in Google Chrome 9. fileEntry.file(successCallback, opt_errorCallback); fileEntry.createWriter(successCallback, opt_errorCallback); ...</span></span></code> </pre><br>  Let's take as examples the basics of working with FileEntry. <br><br><h5>  File creation </h5><br>  You can get or create a file using the <i>getFile ()</i> method from the DirectoryEntry interface.  After accessing the repository, callback returns us a FileSystem object containing DirectoryEntry (fs.root), which refers to the repository root folder. <br><br>  The following code will create an empty log.txt file: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInitFs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(<span class="hljs-string"><span class="hljs-string">'log.txt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclusive</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// fileEntry     // fileEntry.isFile === true // fileEntry.name == 'log.txt' // fileEntry.fullPath == '/log.txt' }, errorHandler); } window.requestFileSystem(window.PERSISTENT, 1024*1024, onInitFs, errorHandler);</span></span></code> </pre><br>  So, after accessing the file storage, we have FileSystem in our hands.  Inside the callback function, we can refer to the fs.root.getFile () method, passing the name of the file to be created.  You can pass both relative and absolute path - the main thing is that it is correct.  For example, creating a file is erroneous if its parent folder does not exist.  The second argument of the getFile () method is an object that describes the parameters of the object that will be applied to it if it has not yet been created.  More information can be found in the documentation. <br><br><h5>  Reading a file by name </h5><br>  The following code accesses the ‚Äúlog.txt‚Äù file and reads its contents using the FileReader API, and then writes the entire contents to the &lt;textarea&gt; block.  If the file does not exist, an error will be thrown. <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInitFs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(<span class="hljs-string"><span class="hljs-string">'log.txt'</span></span>, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.file(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader(); reader.onloadend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> txtArea = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'textarea'</span></span>); txtArea.value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.result; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.appendChild(txtArea); }; reader.readAsText(file); }, errorHandler); }, errorHandler); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, onInitFs, errorHandler);</code> </pre><br>  FileReader, among other things, provides the following methods for reading: <br><ul><li>  FileReader.readAsBinaryString (Blob | File) - the result will contain a byte string. </li><li>  FileReader.readAsText (Blob | File, opt_encoding) - the result will contain a text string.  The default encoding is 'UTF-8'; you can change it by setting an optional parameter </li><li>  FileReader.readAsDataURL (Blob | File) - at the output we have the <a href="http://en.wikipedia.org/wiki/Data_URI_scheme">data URL</a> . </li><li>  FileReader.readAsArrayBuffer (Blob | File) - get the data in the form of <a href="https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/doc/spec/TypedArray-spec.html">ArrayBuffer</a> . </li></ul><br>  In the following example, we will read the image and display its thumbnail: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.thumb</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">75px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#000</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">5px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"files"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"files[]"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">multiple</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">output</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"list"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">output</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">handleFileSelect</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(evt)</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> files = evt.target.files; </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">// FileList object // Loop through the FileList and render image files as thumbnails. for (var i = 0, f; f = files[i]; i++) { // Only process image files. if (!f.type.match('image.*')) { continue; } var reader = new FileReader(); // Closure to capture the file information. reader.onload = (function(theFile) { return function(e) { // Render thumbnail. var span = document.createElement('span'); span.innerHTML = ['&lt;img class="thumb" src="', e.target.result, '" title="', theFile.name, '"/&gt;'].join(''); document.getElementById('list').insertBefore(span, null); }; })(f); // Read in the image file as a data URL. reader.readAsDataURL(f); } } document.getElementById('files').addEventListener('change', handleFileSelect, false); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Sometimes we may need not the whole file, but only a part of it, for this it is convenient to use <i>File.slice (start_byte, length)</i> . <br>  It looks like this: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blob = file.slice(startingByte, length); reader.readAsBinaryString(blob);</code> </pre><br>  In the following example, we can read either the necessary bytes, or the entire file.  Pay particular attention to <i>onloadend</i> and <i>evt.target.readyState</i> , which in this case will replace the <i>onload event</i> .  (About the events below). <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#byte_content</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">5px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">max-height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow-y</span></span></span><span class="css">: auto; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow-x</span></span></span><span class="css">: hidden; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#byte_range</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin-top</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">5px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> /&gt;</span></span> Read bytes: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"readBytesButtons"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-startbyte</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-endbyte</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag">&gt;</span></span>1-5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-startbyte</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-endbyte</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"14"</span></span></span><span class="hljs-tag">&gt;</span></span>6-15<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-startbyte</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"6"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-endbyte</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7"</span></span></span><span class="hljs-tag">&gt;</span></span>7-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span>entire file<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"byte_range"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"byte_content"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">readBlob</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">opt_startByte, opt_stopByte</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> files = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'files'</span></span></span><span class="javascript">).files; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (!files.length) { alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Please select a file!'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript">; } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> file = files[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> start = opt_startByte || </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> stop = opt_stopByte || file.size - </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> reader = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> FileReader(); </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// If we use onloadend, we need to check the readyState. reader.onloadend = function(evt) { if (evt.target.readyState == FileReader.DONE) { // DONE == 2 document.getElementById('byte_content').textContent = evt.target.result; document.getElementById('byte_range').textContent = ['Read bytes: ', start + 1, ' - ', stop + 1, ' of ', file.size, ' byte file'].join(''); } }; var length = (stop - start) + 1; var blob = file.slice(start, length); reader.readAsBinaryString(blob); } document.querySelector('.readBytesButtons').addEventListener('click', function(evt) { if (evt.target.tagName.toLowerCase() == 'button') { var startByte = evt.target.getAttribute('data-startbyte'); var endByte = evt.target.getAttribute('data-endbyte'); readBlob(startByte, endByte); } }, false); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Now about the events.  FileReader provides us with the following types of events: <ul><li>  onloadstart </li><li>  onprogress </li><li>  onload, </li><li>  onabort </li><li>  onerror </li><li>  onloadend </li></ul><br>  You can use them when you need to display the file upload process.  For example: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#progress_bar</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">3px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#000</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">14px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">clear</span></span></span><span class="css">: both; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">opacity</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-moz-transition</span></span></span><span class="css">: opacity </span><span class="hljs-number"><span class="css"><span class="hljs-number">1s</span></span></span><span class="css"> linear; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-transition</span></span></span><span class="css">: opacity </span><span class="hljs-number"><span class="css"><span class="hljs-number">1s</span></span></span><span class="css"> linear; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-webkit-transition</span></span></span><span class="css">: opacity </span><span class="hljs-number"><span class="css"><span class="hljs-number">1s</span></span></span><span class="css"> linear; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#progress_bar</span></span></span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.loading</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">opacity</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1.0</span></span></span><span class="css">; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#progress_bar</span></span></span><span class="css"> </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.percent</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#99ccff</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: auto; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"abortRead();"</span></span></span><span class="hljs-tag">&gt;</span></span>Cancel read<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"progress_bar"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"percent"</span></span></span><span class="hljs-tag">&gt;</span></span>0%<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> reader; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> progress = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.querySelector(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'.percent'</span></span></span><span class="javascript">); </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">abortRead</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ reader.abort(); } </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">errorHandler</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">evt</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">switch</span></span></span><span class="javascript">(evt.target.error.code) { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">case</span></span></span><span class="javascript"> evt.target.error.NOT_FOUND_ERR: alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'File Not Found!'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">break</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">case</span></span></span><span class="javascript"> evt.target.error.NOT_READABLE_ERR: alert(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'File is not readable'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">break</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">case</span></span></span><span class="javascript"> evt.target.error.ABORT_ERR: </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">break</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">// noop default: alert('An error occurred reading this file.'); }; } function updateProgress(evt) { // evt is an ProgressEvent. if (evt.lengthComputable) { var percentLoaded = Math.round((evt.loaded / evt.total) * 100); // Increase the progress bar length. if (percentLoaded &lt; 100) { progress.style.width = percentLoaded + '%'; progress.textContent = percentLoaded + '%'; } } } function handleFileSelect(evt) { // Reset progress indicator on new file selection. progress.style.width = '0%'; progress.textContent = '0%'; reader = new FileReader(); reader.onerror = errorHandler; reader.onprogress = updateProgress; reader.onabort = function(e) { alert('File read cancelled'); }; reader.onloadstart = function(e) { document.getElementById('progress_bar').className = 'loading'; }; reader.onload = function(e) { // Ensure that the progress bar displays 100% at the end. progress.style.width = '100%'; progress.textContent = '100%'; setTimeout("document.getElementById('progress_bar').className='';", 2000); } // Read in the image file as a binary string. reader.readAsBinaryString(evt.target.files[0]); } document.getElementById('files').addEventListener('change', handleFileSelect, false); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h5>  Write to file </h5><br>  Using the following code, we will create a file ‚Äúlog.txt‚Äù (if it does not exist) and write 'Ipsum Lorem' into it. <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInitFs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(<span class="hljs-string"><span class="hljs-string">'log.txt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.createWriter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileWriter</span></span></span><span class="hljs-function">) </span></span>{ fileWriter.onwriteend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Write completed.'</span></span>); }; fileWriter.onerror = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Write failed: '</span></span> + e.toString()); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BlobBuilder(); bb.append(<span class="hljs-string"><span class="hljs-string">'Ipsum Lorem'</span></span>); fileWriter.write(bb.getBlob(<span class="hljs-string"><span class="hljs-string">'text/plain'</span></span>)); }, errorHandler); }, errorHandler); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, onInitFs, errorHandler);</code> </pre><br>  As you can see, we call the <i>createWriter ()</i> method to get the object.  In addition, we handle the event of the end of writing to the file and possible creation of an error. <br><br><h5>  We add data to the file </h5><br>  The following code will add 'Hello World' to the end of the file.  If there is no file, then an error is thrown. <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInitFs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(<span class="hljs-string"><span class="hljs-string">'log.txt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.createWriter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileWriter</span></span></span><span class="hljs-function">) </span></span>{ fileWriter.seek(fileWriter.length); <span class="hljs-comment"><span class="hljs-comment">// Start write position at EOF. var bb = new BlobBuilder(); bb.append('Hello World'); fileWriter.write(bb.getBlob('text/plain')); }, errorHandler); }, errorHandler); } window.requestFileSystem(window.PERSISTENT, 1024*1024, onInitFs, errorHandler);</span></span></code> </pre><br><br><h5>  Create copies of selected files </h5><br>  The following code allows the user to select multiple files using <i>&lt;input type = "file"</i> multiple&gt; and creates copies of these files. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myfile"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">multiple</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#myfile'</span></span>).onchange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> files = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.files; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.TEMPORARY, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, file; file = files[i]; ++i) { (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(file.name, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">exclusive</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.createWriter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileWriter</span></span></span><span class="hljs-function">) </span></span>{ fileWriter.write(f); <span class="hljs-comment"><span class="hljs-comment">// Note: write() can take a File or Blob object. }, errorHandler); }, errorHandler); })(file); } }, errorHandler); };</span></span></code> </pre><br>  To simplify file selection, you can use HTML5 Drag and Drop. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"drop_zone"</span></span></span><span class="hljs-tag">&gt;</span></span>Drop files here<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">output</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"list"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">output</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">handleFileSelect</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(evt)</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ evt.stopPropagation(); evt.preventDefault(); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> files = evt.dataTransfer.files; </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">// FileList object. // files is a FileList of File objects. List some properties. var output = []; for (var i = 0, f; f = files[i]; i++) { output.push('&lt;li&gt;&lt;strong&gt;', f.name, '&lt;/strong&gt; (', f.type || 'n/a', ') - ', f.size, ' bytes, last modified: ', f.lastModifiedDate.toLocaleDateString(), '&lt;/li&gt;'); } document.getElementById('list').innerHTML = '&lt;ul&gt;' + output.join('') + '&lt;/ul&gt;'; } function handleDragOver(evt) { evt.stopPropagation(); evt.preventDefault(); } // Setup the dnd listeners. var dropZone = document.getElementById('drop_zone'); dropZone.addEventListener('dragover', handleDragOver, false); dropZone.addEventListener('drop', handleFileSelect, false); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h5>  Deleting files </h5><br>  The following code will remove 'log.txt'. <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(<span class="hljs-string"><span class="hljs-string">'log.txt'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.remove(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'File removed.'</span></span>); }, errorHandler); }, errorHandler); }, errorHandler);</code> </pre><br><br><h4>  Work with directories </h4><br>  Working with directories is accomplished through the use of DirectoryEntry, which has most of the FileEntry properties (they both inherit the Entry interface).  Listed below are the properties and methods of DirectoryEntry. <br><pre> <code class="javascript hljs">dirEntry.isDirectory === <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-comment"><span class="hljs-comment">//      FileEntry ... var dirReader = dirEntry.createReader(successCallback, opt_errorCallback); dirEntry.getFile(path, opt_flags, opt_successCallback, opt_errorCallback); dirEntry.getDirectory(path, opt_flags, opt_successCallback, opt_errorCallback); dirEntry.removeRecursively(successCallback, opt_errorCallback); ...</span></span></code> </pre><br><br><h5>  Creating directories </h5><br>  To create and access directories, <i>getDirectory () is used</i> for the DirectoryEntry interface.  You can send both the name and the path to the directory. <br><br>  Create the MyPictures directory at the root: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getDirectory(<span class="hljs-string"><span class="hljs-string">'MyPictures'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dirEntry</span></span></span><span class="hljs-function">) </span></span>{ ... }, errorHandler); }, errorHandler);</code> </pre><br><br><h5>  Subdirectories </h5><br>  Creating subdirectories is essentially the same as creating directories, but be aware that if the parent directory does not exist, an error will be thrown.  The following code shows how to get around this limitation: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> path = <span class="hljs-string"><span class="hljs-string">'music/genres/jazz/'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDir</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rootDirEntry, folders</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// './'  '/' if (folders[0] == '.' || folders[0] == '') { folders = folders.slice(1); } rootDirEntry.getDirectory(folders[0], {create: true}, function(dirEntry) { if (folders.length) { createDir(dirEntry, folders.slice(1)); } }, errorHandler); }; function onInitFs(fs) { createDir(fs.root, path.split('/')); // fs.root is a DirectoryEntry. } window.requestFileSystem(window.PERSISTENT, 1024*1024, onInitFs, errorHandler);</span></span></code> </pre><br>  Now we have created the ‚Äúmusic / genres / jazz‚Äù directory and we can access any of its levels and create new files in them.  For example: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(<span class="hljs-string"><span class="hljs-string">'/music/genres/jazz/song.mp3'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">create</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ ... }, errorHandler); }, errorHandler);</code> </pre><br><br><h5>  Parse the contents of the directory </h5><br>  To find out what is contained in the directory, you need to create a DirectoryReader and call its readEntries () method, but there is no guarantee that the entire contents of the selected directory will be returned (!!!).  This means that you need to access the DirectoryReader.readEntries () method until the result is empty.  Example: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filelist"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.slice.call(list || [], <span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listResults</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entries</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fragment = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createDocumentFragment(); entries.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">entry, i</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> img = entry.isDirectory ? <span class="hljs-string"><span class="hljs-string">'&lt;img src="folder-icon.gif"&gt;'</span></span> : <span class="hljs-string"><span class="hljs-string">'&lt;img src="file-icon.gif"&gt;'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> li = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'li'</span></span>); li.innerHTML = [img, <span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>, entry.name, <span class="hljs-string"><span class="hljs-string">'&lt;/span&gt;'</span></span>].join(<span class="hljs-string"><span class="hljs-string">''</span></span>); fragment.appendChild(li); }); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#filelist'</span></span>).appendChild(fragment); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onInitFs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dirReader = fs.root.createReader(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> entries = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> readEntries = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ dirReader.readEntries (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!results.length) { listResults(entries.sort()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { entries = entries.concat(toArray(results)); readEntries(); } }, errorHandler); }; readEntries(); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, onInitFs, errorHandler);</code> </pre><br><br><h5>  Delete the directory </h5><br>  To delete, call the DirectoryEntry.remove () method.  It is important to know that if you try to delete a non-empty directory, an error will be thrown. <br><br>  Delete the empty jazz directory from "/ music / genres /": <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getDirectory(<span class="hljs-string"><span class="hljs-string">'music/genres/jazz'</span></span>, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dirEntry</span></span></span><span class="hljs-function">) </span></span>{ dirEntry.remove(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Directory removed.'</span></span>); }, errorHandler); }, errorHandler); }, errorHandler);</code> </pre><br><br><h5>  Recursively delete directories </h5><br>  If you have a non-empty directory and you still want to remove it, then the <i>removeRecursively ()</i> method will help you, which will remove both the directory and all its contents. <br><br>  Perform this operation with the ‚Äúmusic‚Äù directory: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getDirectory(<span class="hljs-string"><span class="hljs-string">'/misc/../music'</span></span>, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dirEntry</span></span></span><span class="hljs-function">) </span></span>{ dirEntry.removeRecursively(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Directory removed.'</span></span>); }, errorHandler); }, errorHandler); }, errorHandler);</code> </pre><br><br><h4>  Copy, rename and move </h4><br>  FileEntry and DirectoryEntry are completely identical in this aspect. <br><br><h5>  We copy </h5><br>  Both FileEntry and DirectoryEntry have a <i>copyTo ()</i> method for copying.  In the case of directories, the method will recursively create all the content. <br><br>  Copy "me.png" from one directory to another: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cwd, src, dest</span></span></span><span class="hljs-function">) </span></span>{ cwd.getFile(src, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ cwd.getDirectory(dest, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dirEntry</span></span></span><span class="hljs-function">) </span></span>{ dirEntry.copyTo(dirEntry); }, errorHandler); }, errorHandler); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ copy(fs.root, <span class="hljs-string"><span class="hljs-string">'/folder1/me.png'</span></span>, <span class="hljs-string"><span class="hljs-string">'folder2/mypics/'</span></span>); }, errorHandler);</code> </pre><br><br><h5>  Move or rename </h5><br>  FileEntry and DirectoryEntry have a <i>moveTo ()</i> method that allows you to move and rename files and directories.  The first argument is the parent folder, the second (optional) parameter is the new name. <br><br>  Rename "me.png" to "you.png": <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rename</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cwd, src, newName</span></span></span><span class="hljs-function">) </span></span>{ cwd.getFile(src, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.moveTo(cwd, newName); }, errorHandler); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ rename(fs.root, <span class="hljs-string"><span class="hljs-string">'me.png'</span></span>, <span class="hljs-string"><span class="hljs-string">'you.png'</span></span>); }, errorHandler);</code> </pre><br><br>  Move ‚Äúme.png‚Äù from the root directory to ‚Äúnewfolder‚Äù. <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">src, dirName</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getFile(src, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileEntry</span></span></span><span class="hljs-function">) </span></span>{ fs.root.getDirectory(dirName, {}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dirEntry</span></span></span><span class="hljs-function">) </span></span>{ fileEntry.moveTo(dirEntry); }, errorHandler); }, errorHandler); } <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestFileSystem(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.PERSISTENT, <span class="hljs-number"><span class="hljs-number">1024</span></span>*<span class="hljs-number"><span class="hljs-number">1024</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fs</span></span></span><span class="hljs-function">) </span></span>{ move(<span class="hljs-string"><span class="hljs-string">'/me.png'</span></span>, <span class="hljs-string"><span class="hljs-string">'newfolder/'</span></span>); }, errorHandler);</code> </pre><br><br><h5>  Use Cases </h5><br>  HTML5 offers several options for local data storage, but FileSystem is different in that it allows you to satisfy those needs that do not satisfy the database.  Basically, these are application needs that store large amounts of binary data and / or provide file access to applications outside the browser. <br><br>  We give a list of possible applications: <br><ol><li>  Uploader files </li><li>  Games and application that work with media files </li><li>  Audio / photo editor, offline mode </li><li>  Offlane video player </li><li>  Offline email client </li></ol></div><p>Source: <a href="https://habr.com/ru/post/112286/">https://habr.com/ru/post/112286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112274/index.html">HTML5 Canvas - creating arcade scrolling step by step</a></li>
<li><a href="../112275/index.html">Spring is coming and CodeFest with her</a></li>
<li><a href="../112276/index.html">The consequences of using Copy-Paste technology when programming in C ++ and how to deal with it</a></li>
<li><a href="../112277/index.html">Test drive templates. Free for 30 days</a></li>
<li><a href="../112281/index.html">How to make a successful career at IBM headquarters?</a></li>
<li><a href="../112287/index.html">Unity3D for beginners - Tutorial 1</a></li>
<li><a href="../112289/index.html">Digital signatures in executable files and circumvention of this protection in malware</a></li>
<li><a href="../112290/index.html">NetUP CAS and Middleware certified by the Ministry of Communications of the Russian Federation</a></li>
<li><a href="../112291/index.html">jQuery plugin for Ajax video upload on YouTube</a></li>
<li><a href="../112292/index.html">Evolution of the Python programmer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I created the open source page scroll plugin One Page Scroll</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Scrolling effects have been used on the web for a long time, and although there are already many plug-ins from which to choose, only a small part of t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I created the open source page scroll plugin One Page Scroll</h1><div class="post__text post__text-html js-mediator-article">  Scrolling effects have been used on the web for a long time, and although there are already many plug-ins from which to choose, only a small part of them has such a small weight and simplicity that are required for many designers and developers.  Most of the plugins I've seen are trying to do too much, making them difficult to include in their projects. <br><br>  Not so long ago, Apple introduced the iPhone 5S, and the <a href="https://www.apple.com/iphone-5s/">site with the presentation</a> , where the page was divided into sections, and each section described one of the features of the product.  I thought it was a great way to present a product, eliminating the possibility of missing key information. <br><br>  I went in search of a suitable plug-in, and surprisingly, I did not find one.  The page scroll plugin was born. <br><a name="habracut"></a><br><h4>  Paginated scroll plugin. </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A jQuery-based plugin that allows you to create a layout for a page with several sections with minimal use of markup. <br><br>  I will tell you how it was created, from the idea to planning, testing and uploading free code. <br><br>  Note: before building a plugin, I was already aware of disputes as to whether scripts should change the natural behavior of browsers with regard to scrolling - this can confuse users.  Therefore, I tried to reduce the negative effect of changes in habitual behavior.  In the settings of the plugin, you can set the size of the screens in which the plugin returns to normal screen scrolling.  Thus, on low-power devices such as smartphones and tablets, you can save the speed of the site.  In addition, you can set the duration of the animation at the transition between sections. <br><br><h4>  Why all this? </h4><br><br>  As I have already mentioned, the majority of ready-made plugins included many optional functions, which made integration difficult.  This plugin should be: <br><br>  - easy to use <br>  - easy to integrate <br>  - require minimal markup <br>  - perform one function, but well <br><br><h5>  1. Drawings </h5><br><br>  I started planning a plugin from general to specific.  He should scroll through the sections.  To do this, disable the normal scrolling in the browser, while feeding sections one by one, and promoting the page if necessary. <br><br><img src="https://habrastorage.org/files/9a5/e68/508/9a5e68508748404db372a737acf69173.jpg"><br>  <i>You can imagine everything in your mind, and you can make sketches.</i> <br><br>  Divide the concept into small tasks, solving each in sequence. <br><br>  1. Prepare the layout sections <br>  Disable normal scrolling by applying overflow: hidden to the body.  Arrange the sections in the desired sequence, calculate and adjust the necessary information and classes. <br><br>  2. Install the manual scrolling trigger <br>  The trigger is caught through jQuery, we define the scrolling direction, we move the layout using CSS. <br><br>  3. Adding opportunities <br>  Add adaptability, loop, scrolling support on touchscreens, pagination, etc. <br><br>  4. Check in different browsers. <br>  Check the browsers Chrome, Safari, Firefox, Internet Explorer 10 and the most popular OSes Windows, Mac OS X, iOS and Android 4.0+. <br><br>  5. Make the plugin available in the repository <br>  Create a repository, write instructions for using the plugin <br><br>  6. Expand support. <br>  Let us explore other ways to increase support for the plugin. <br><br><h5>  2. Build the foundation </h5><br><br>  Having designed the plugin, I started building the basis on this template: <br><br><pre><code class="javascript hljs">!<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> defaults = { <span class="hljs-attr"><span class="hljs-attr">sectionContainer</span></span>: <span class="hljs-string"><span class="hljs-string">"section"</span></span>, ‚Ä¶ }; $.fn.onepage_scroll = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> settings = $.extend({}, defaults, options); ‚Ä¶ } }($)</code> </pre> <br><br>  We start the template with the! Function ($) {...} ($) module, which places the jQuery global variable in the local area - this will help reduce the load and prevent conflicts with other libraries. <br><br>  The defaults variable contains default settings. <br><br>  $ .fn.onepage_scroll is the main function that initializes everything.  If you make your plugin, do not forget to write another name instead of onepage_scroll. <br><br>  You can disable standard scrolling by assigning the overflow: hidden property to the body tag. <br>  through the class name specific to this plugin.  It is important to use unique style names to avoid conflict with existing ones.  I usually use the abbreviation of the name of the plug-in, and then through the dash - the name for the style, for example: .onepage-wrapper. <br><br>  The foundation is laid, let's proceed to the first function. <br><br><h5>  3. Prepare the layout and arrange the sections </h5><br><br>  At first I went the wrong way.  I thought I would arrange all the sections in order, passing them in a loop.  What I got first: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sections = $(settings.sectionContainer); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> topPos = <span class="hljs-number"><span class="hljs-number">0</span></span>; $.each(sections, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">) </span></span>{ $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).css({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">"absolute"</span></span>, <span class="hljs-attr"><span class="hljs-attr">top</span></span>: topPos + <span class="hljs-string"><span class="hljs-string">"%"</span></span> }).addClass(<span class="hljs-string"><span class="hljs-string">"ops-section"</span></span>).attr(<span class="hljs-string"><span class="hljs-string">"data-index"</span></span>, i+<span class="hljs-number"><span class="hljs-number">1</span></span>); topPos = topPos + <span class="hljs-number"><span class="hljs-number">100</span></span>; });</code> </pre> <br><br>  The loop goes through all the selectors (sectionContainer is defined in the variable section by default), assigns position: absolute and assigns the next top the correct top position so that they do not overlap each other. <br><br>  The position at the top (top) is stored in topPos.  We start from scratch and add with each cycle.  To make each section occupy the entire page, I set their height to 100% and add to topPos 100. <br><br>  The development and verification took me a couple of hours, but in the next step I realized that all this was not necessary. <br><br><h5>  4. Manual trigger and page conversion </h5><br><br>  One might think that the next step is to move each section to a new position, when the scroll trigger works ... But there is a better way.  Instead of shifting each of the sections in the loop, I just put them all in one container and use the translate3d function from CSS3 to shift it.  This function supports percentages, we can move sections so that they are precisely positioned in the window, without recounting everything anew.  In addition, it facilitates control over speed and other animation parameters. <br><br><img src="https://habrastorage.org/files/c29/6a7/c33/c296a7c330904f76a4557c5f0c4e9d1b.jpg"><br>  <i>The first solution is not always the most effective, so do not forget to leave time for experiments.</i> <br><br>  Now it remains only to determine the direction of scrolling and move the container in the desired direction. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_scroll</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event, delta</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> deltaOfInterest = delta, timeNow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTime(), quietPeriod = <span class="hljs-number"><span class="hljs-number">500</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Cancel scroll if currently animating or within quiet period if(timeNow - lastAnimation &lt; quietPeriod + settings.animationTime) { event.preventDefault(); return; } if (deltaOfInterest &lt; 0) { el.moveDown() } else { el.moveUp() } lastAnimation = timeNow; } $(document).bind('mousewheel DOMMouseScroll', function(event) { event.preventDefault(); var delta = event.originalEvent.wheelDelta || -event.originalEvent.detail; init_scroll(event, delta); });</span></span></code> </pre> <br><br>  At first we hook the function on the mousewheel event (DOMMouseScroll in Firefox), then we can intercept the data and determine the direction.  We build in handling init_scroll, which gets a wheelData for this. <br><br>  In an ideal world, it would be enough to count the change in wheelData.  However, when animating sequences, you need to embed a check so that the trigger event is not duplicated (otherwise the image will overlap during animation).  You can use setInterval to call each animation in turn, but this will not provide accuracy and reliability, since  every browser handles it differently.  For example, in Chrome and Firefox, setInterval slows down in inactive tabs, as a result, functions do not work in time.  As a result, I stopped using the function that returns the current time. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeNow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTime(), quietPeriod = <span class="hljs-number"><span class="hljs-number">500</span></span>; ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(timeNow - lastAnimation &lt; quietPeriod + settings.animationTime) { event.preventDefault(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } ‚Ä¶ lastAnimation = timeNow;</code> </pre> <br><br>  In this fragment, which I quoted from the previous code, I save the current time in timeNow, then to check if the animation took more than 500 ms.  If not occupied, then the transformation does not occur and the animation does not overlap.  Work with the current time is more reliable, because  it is the same for everyone. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deltaOfInterest &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { el.moveDown() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { el.moveUp() }</code> </pre> <br><br>  The moveUp and moveDown functions change the layout attributes to reflect the current state of the site.  Each of them at the end of the work invokes the final transformation method to move the next section into the viewport. <br><br><pre> <code class="javascript hljs">$.fn.transformPage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">settings, pos, index</span></span></span><span class="hljs-function">) </span></span>{ ‚Ä¶ $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).css({ <span class="hljs-string"><span class="hljs-string">"-webkit-transform"</span></span>: ( settings.direction == <span class="hljs-string"><span class="hljs-string">'horizontal'</span></span> ) ? <span class="hljs-string"><span class="hljs-string">"translate3d("</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0, 0)"</span></span> : <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"-webkit-transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"all "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing, <span class="hljs-string"><span class="hljs-string">"-moz-transform"</span></span>: ( settings.direction == <span class="hljs-string"><span class="hljs-string">'horizontal'</span></span> ) ? <span class="hljs-string"><span class="hljs-string">"translate3d("</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0, 0)"</span></span> : <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"-moz-transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"all "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing, <span class="hljs-string"><span class="hljs-string">"-ms-transform"</span></span>: ( settings.direction == <span class="hljs-string"><span class="hljs-string">'horizontal'</span></span> ) ? <span class="hljs-string"><span class="hljs-string">"translate3d("</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0, 0)"</span></span> : <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"-ms-transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"all "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing, <span class="hljs-string"><span class="hljs-string">"transform"</span></span>: ( settings.direction == <span class="hljs-string"><span class="hljs-string">'horizontal'</span></span> ) ? <span class="hljs-string"><span class="hljs-string">"translate3d("</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0, 0)"</span></span> : <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"all "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing }); ‚Ä¶ }</code> </pre> <br><br>  This is a transformation method that shifts sections.  I did them in javascript instead of specifying individual styles so that developers could change the settings in the plugin itself (basically, the speed and acceleration of the animation), and I didn‚Äôt have to search through the style file for settings.  In addition, the percentage of transformation still needs to be recalculated, so you can't do without javascript. <br><br><h5>  5. Additional features </h5><br><br>  At first I didn‚Äôt want to add anything, but I received so many reviews from the GitHub community that I decided to gradually improve the plugin.  I have released version 1.2.1, which adds a lot of callbacks and loops, and the most difficult part is adaptability. <br><br>  I did not do the plugin initially with the expectation of mobile platforms (which I regret).  Instead, we had to track and recalculate touchscreen events to the appropriate form for use in init_scroll.  This does not work well in all browsers, so I had to build in the ability to roll back - when the browser returns to normal scrolling when a certain window width is reached. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> defaults = { <span class="hljs-attr"><span class="hljs-attr">responsiveFallback</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> ‚Ä¶ }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">responsive</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>).width() &lt; settings.responsiveFallback) { $(<span class="hljs-string"><span class="hljs-string">"body"</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">"disabled-onepage-scroll"</span></span>); $(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).unbind(<span class="hljs-string"><span class="hljs-string">'mousewheel DOMMouseScroll'</span></span>); el.swipeEvents().unbind(<span class="hljs-string"><span class="hljs-string">"swipeDown swipeUp"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($(<span class="hljs-string"><span class="hljs-string">"body"</span></span>).hasClass(<span class="hljs-string"><span class="hljs-string">"disabled-onepage-scroll"</span></span>)) { $(<span class="hljs-string"><span class="hljs-string">"body"</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">"disabled-onepage-scroll"</span></span>); $(<span class="hljs-string"><span class="hljs-string">"html, body, .wrapper"</span></span>).animate({ <span class="hljs-attr"><span class="hljs-attr">scrollTop</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-string"><span class="hljs-string">"fast"</span></span>); } el.swipeEvents().bind(<span class="hljs-string"><span class="hljs-string">"swipeDown"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$(<span class="hljs-string"><span class="hljs-string">"body"</span></span>).hasClass(<span class="hljs-string"><span class="hljs-string">"disabled-onepage-scroll"</span></span>)) event.preventDefault(); el.moveUp(); }).bind(<span class="hljs-string"><span class="hljs-string">"swipeUp"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$(<span class="hljs-string"><span class="hljs-string">"body"</span></span>).hasClass(<span class="hljs-string"><span class="hljs-string">"disabled-onepage-scroll"</span></span>)) event.preventDefault(); el.moveDown(); }); $(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).bind(<span class="hljs-string"><span class="hljs-string">'mousewheel DOMMouseScroll'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ event.preventDefault(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delta = event.originalEvent.wheelDelta || -event.originalEvent.detail; init_scroll(event, delta); }); } }</code> </pre> <br><br>  Define the variable by default.  Use responsiveFallback to determine when the plugin should roll back.  This code defines the width of the browser.  If the width is less than the value from responsiveFallback, the function removes all events, brings the page to the beginning and allows you to scroll as usual.  If the width exceeds the value, the plugin checks for the presence of the class disabled-onepage-scroll to see if it is initialized.  If not, it is initialized again. <br><br>  The solution is not perfect, but it gives developers and designers the opportunity to choose how to display their website on a mobile platform, instead of completely rejecting these platforms. <br><br><h5>  6. Testing in different browsers. </h5><br><br>  Testing is an important part of development. Before releasing a plugin, you need to make sure that it works on most machines.  I always develop in Chrome - first, I like its developer tools, and second, I know that if the plugin works in Chrome, it will most likely work in Safari and Opera. <br><br>  Usually I use Macbook Air for development, and at home I have a PC for testing.  After the plugin works in Chrome, I check it manually in Safari, Opera, and at the end - in Firefox on Mac OS X, and then on Chrome, Firefox and Internet Explorer 10 on Windows. <br><br>  This is not all possible browsers, but open source is good because other developers will be able to test and correct the errors themselves - that is its meaning.  You can not immediately make the perfect product, and set the springboard for the start. <br><br><br>  <i>Do not forget to test your plugins on mobile devices.</i> <br><br>  To facilitate testing, after the end of the plug-in, I create a demo page to show all its features, and upload to my site.  There are errors that can not be caught locally, but which come out when working on a real site.  When the demo page works, I start testing on mobile devices. <br><br><h5>  7. We lay out the plugin in open source. </h5><br><br>  The last step is sharing the plugin on github.  To do this, you need to create an account there, configure Git and create a new repository.  Then clone it to the local machine - this will create a directory with the name of the plugin.  We copy there a plug-in and we configure structure. <br><br>  <b>Repository structure</b> <br><br>  Customize as you like.  I do this: <br><br>  - the demo directory contains working demos, with all the necessary resources <br>  - the usual and compressed version of the plug-in lies at the root <br>  - CSS and test resources, such as images (if necessary) are at the root <br>  - readme file in root <br><br>  <b>Readme structure</b> <br><br>  An important stage - writing clear instructions for the open-source community.  Usually I write them in the readme, but for complex cases you may need a wiki page.  As I write the readme: <br><br>  1. Introduction <br>  I explain the purpose of the plugin, give an image and a link to the demo. <br>  2. Requirements and compatibility. <br>  It is better to bring this section higher, so that it is immediately clear whether the person will be able to use the plugin. <br>  3. Basic principles of use <br>  Step-by-step instructions, starting from connecting jQuery, ending with HTML markup and calling a function.  Also describes the settings. <br>  4. Advanced use. <br>  More complex instructions - public methods, callbacks and other useful information. <br>  5. Other resources <br>  Links to tutorial, thank you, etc. <br><br><h5>  8 Expanding support </h5><br><br>  In general, one could do without jQuery, but I was in a hurry to put it in the open source, so I decided to reduce development time and rely on ready-made functions in jQuery. <br><br>  But to clear my conscience, I reworked the plugin in pure javascript (a version with Zepto support is also available).  On pure JS there is no need to include jQuery, everything works out of the box. <br><br>  To make a rule, and for Smashing Magazine's readers, I have to rebuilt one page scroll using pure javascript (a Zepto version is also available).  With the pure javascript version, you no longer need to include jQuery.  The plugin works right out of the box. <br><br>  <b>Pure JS and Zepto version</b> <br><br>  <a href="https://github.com/peachananr/purejs-onepage-scroll">Pure JavaScript Repository</a> <br>  <a href="https://github.com/peachananr/zepto-onepage-scroll">Zepto repository</a> <br><br>  <b>Recycle plugin in pure javascript</b> <br><br>  Such processing may seem like a hard task, but this is only from the beginning.  The most difficult thing is not to be mistaken with math.  Since  I already did it, the development of auxiliary functions to get rid of jQuery took me only a few hours. <br><br>  The plugin is based on CSS3, so you just had to replace the jQuery calls with similar ones.  At the same time I reorganized the structure of the script: <br><br>  - default variable values <br>  All the same as in the previous version. <br>  - initialization function <br>  Prepares and arranges the layout and initialization of what happens when the onePageScroll function is called.  Here are all the procedures that assign class names, attributes and positioning styles. <br>  - private methods <br>  All internal plug-in methods are scroll events, page transformation, adaptive rollback and scrolling tracking. <br>  - public methods <br>  All methods for developers: moveDown (), moveUp () and moveTo () <br>  - helper methods <br>  Everything that overrides jQuery calls. <br><br>  There are a couple of unpleasant moments - a separate function only to add or remove the name of the style, or use document.querySelector instead of $.  But in the end we got a better structured plugin. <br><br>  <b>Rebuilding plugin for Zepto</b> <br><br>  I decided to support Zepto, despite the fact that it is designed only for the most modern browsers (IE10 +), since  it works faster and more efficiently than jQuery 2.0+, while it has a more flexible API.  Zpeto is 4 times less jQuery, which affects the page loading speed.  Due to the fact that people more often use smartphones, Zepto becomes a better alternative. <br><br>  Modifying a plugin from jQuery to Zepto is easier because they have similar APIs.  Almost everything is the same, except for the animation part.  Since the Zepto $ .fn.animate () function has support for CSS3 animation and animationEnd callback support, the following part: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).css({ <span class="hljs-string"><span class="hljs-string">"-webkit-transform"</span></span>: <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"-webkit-transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"-webkit-transform "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing, <span class="hljs-string"><span class="hljs-string">"-moz-transform"</span></span>: <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"-moz-transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"-moz-transform "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing, <span class="hljs-string"><span class="hljs-string">"-ms-transform"</span></span>: <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"-ms-transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"-ms-transform "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing, <span class="hljs-string"><span class="hljs-string">"transform"</span></span>: <span class="hljs-string"><span class="hljs-string">"translate3d(0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0)"</span></span>, <span class="hljs-string"><span class="hljs-string">"transition"</span></span>: <span class="hljs-string"><span class="hljs-string">"transform "</span></span> + settings.animationTime + <span class="hljs-string"><span class="hljs-string">"ms "</span></span> + settings.easing }); $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).one(<span class="hljs-string"><span class="hljs-string">'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> settings.afterMove == <span class="hljs-string"><span class="hljs-string">'function'</span></span>) settings.afterMove(index, next_el); });</code> </pre> <br><br>  You can replace this code: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).animate({ <span class="hljs-attr"><span class="hljs-attr">translate3d</span></span>: <span class="hljs-string"><span class="hljs-string">"0, "</span></span> + pos + <span class="hljs-string"><span class="hljs-string">"%, 0"</span></span> }, settings.animationTime, settings.easing, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> settings.afterMove == <span class="hljs-string"><span class="hljs-string">'function'</span></span>) settings.afterMove(index, next_el); }); }</code> </pre> <br><br>  Zepto allows you to animate without defining all styles or setting up callbacks on your own. <br><br><h4>  And why bother with this? </h4><br><br>  As more people use jQuery, it becomes more complex and sometimes slow.  If you support other frameworks, your plugin will be more popular. <br>  Redesign from the start will also help you make better plugins in the future.  jQuery and other libraries forgive minor errors, such as missing commas - as a result, you don‚Äôt really care about the quality of your work.  Without these indulgences on pure JavaScript, I felt better how my plug-in worked ‚Äî how it works, what affects performance, and what can be improved. <br><br>  Although libraries like jQuery have made life easier for us, using them is not the most effective way to achieve a goal.  Some plugins can do without it. <br><br><h4>  Conclusion </h4><br><br>  Well, here's the whole process of creating the ‚ÄúOne Page Scroll‚Äù plugin.  There were mistakes, but I learned from them in the course of development.  If I developed it today, I would concentrate on mobile devices, and add more comments to the code. <br><br>  Without the support of communities such as GitHub, StackOverflow, and Smashing Magazine, I would not be able to make the plugin so quickly.  These communities greatly helped me in my work, that's why I make my plugins available for free to everyone.  This is my way to pay for great support. <br><br>  <b>Resources</b> <br><br>  <a href="http://www.thepetedesign.com/demos/onepage_scroll_demo.html">Demo</a> <br><br>  <a href="">download plugin</a> </div><p>Source: <a href="https://habr.com/ru/post/235943/">https://habr.com/ru/post/235943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235927/index.html">Internet in Belarus</a></li>
<li><a href="../235931/index.html">Top 10 Things We Understand When Working With Foundation for Apps</a></li>
<li><a href="../235937/index.html">Scrawl - a screenshot of websites and security of web interfaces of SIP devices</a></li>
<li><a href="../235939/index.html">The Sims 4 developers joked about "pirates"</a></li>
<li><a href="../235941/index.html">Do not be afraid of Core Data</a></li>
<li><a href="../235945/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ124 (September 1 - 7, 2014)</a></li>
<li><a href="../235947/index.html">Happy Tester Day</a></li>
<li><a href="../235951/index.html">Google Glass Explorer Edition now sold via Google Play</a></li>
<li><a href="../235953/index.html">What is marketing, and why these people try to deceive you in most cases - educational program</a></li>
<li><a href="../235957/index.html">Another library to work with 433 MHz devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
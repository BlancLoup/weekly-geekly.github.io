<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is Intel Optane? Part 1. Optane Memory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With this post, I would like to open a small series of articles on Intel Optane products based on 3D XPoint technology. My cursory review of Russian-s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is Intel Optane? Part 1. Optane Memory</h1><div class="post__text post__text-html js-mediator-article">  With this post, I would like to open a small series of articles on Intel Optane products based on 3D XPoint technology.  My cursory review of Russian-speaking sources showed that there is no good material on this issue;  In addition, from the comments to our announcements, I became convinced that there is a deep misunderstanding of why all this is needed at all and why it is implemented in this way. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/42d/584/00f/42d58400f08d4a2d986809b57aedddd7.jpg"></div><a name="habracut"></a><br><h2>  <font color="#0071c5">3D XPoint technology</font> </h2><br>  Let's start with a brief information on the 3D XPoint technology itself (read as a ‚Äútri-di cross-point‚Äù).  Immediately I apologize - we currently do not disclose detailed information about the technology.  In addition, the focus of the reviews will be on the final products, rather than on the technology itself. <br><br>  First, although the technology is a joint development of Intel and Micron, the implementation of technology in the form of products is under the separate jurisdiction of each of the vendors.  Thus, everything that I will talk about products based on 3D XPoint, is related only to Intel products. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Secondly, 3D XPoint is not NAND, it is not NOR, it is not DRAM, but a completely different beast.  Without revealing the details of the physical implementation of memory, I will describe the key characteristics, as well as the differences between 3D XPoint and NAND and DRAM. <br><br><ul><li>  Unlike NAND, there is no binding of write operations to pages and binding of erase operations to blocks.  With 3D XPoint, we can access data at the physical level at the level of a single cell.  In addition, we do not need to delete data before a write operation ‚Äî we can overwrite the data, which allows us to get rid of read-modify-write operations and greatly simplify garbage collection.  This leads to a reduction in access latency (latency) and an increase in the number of I / O operations per second (IOPS);  in addition, write operations are performed almost as fast as reads.  Finally, the endurance of XP XP 3D memory is much higher compared to NAND (an effect such as electron leakage from cells does not exist here).  To summarize, 3D XPoint is faster and more durable than NAND.  However, it would be unfair not to mention the lack of 3D XPoint - this is the cost of production, which is currently significantly higher compared to the cost of production of 3D NAND. <br><br></li><li>  Unlike DRAM, 3D XPoint allows you to create devices with greater data storage density, is a non-volatile type of memory and, at the same time, is cheaper.  One of the disadvantages of this comparison is that 3D XPoint as a memory implementation technology is somewhat slower than DRAM (note, we compare technologies, and not products based on these technologies). </li></ul><br>  All of the above concerns 3D XPoint as such - this, however, is less important for users than the characteristics of specific devices based on 3D XPoint.  Thus, our conversation goes into the mainstream of the description of Intel Optane products based on this technology.  Let's start with a description of what is "Intel Optane".  In short, this is the brand name for all Intel products based on 3D XPoint technology.  Explaining in more detail, Intel takes the 3D XPoint waffles, conducts its own testing and selection of memory chips, independently develops the design of the end device - creates an SSD controller, PCB layout, firmware;  tests and validates the end device, brings it to the market - this is all hidden under the words "Intel Optane". <br><br><h2>  <font color="#0071c5">Intel optane</font> </h2><br>  At the moment, 2 fundamentally different products have been officially announced and launched on the market: Intel Optane Memory - for client use models - and Intel¬Æ Optane SSD DC P4800X - for server use.  In this article we will take a closer look at the client product, while the server product will be the subject of the next review. <br><br>  So, Intel Optane Memory.  The first thing to understand about this product is that, despite the name, this is not DRAM, but NVMe SSD in the M.2 2280-S3-BM form factor. <br>  Top view - under the label 1 3D XPoint chip (this is the 16GB version, on the 32GB there are 2 3D XPoint chips - the platforms under the second chip are visible): <br><br><img src="https://habrastorage.org/web/c96/361/b19/c96361b199884facb0419a86a2b70f84.jpg" alt="image"><br><br>  The module is one-way, so the back side is empty: <br><br><img src="https://habrastorage.org/web/df6/289/918/df6289918cec47568cf2dfa45cadb5a2.jpg" alt="image"><br><br>  The device meets the specifications of NVM Express 1.1.  At the moment, 16GB capacities have been put on the market (one 3D XPoint memory chip is used with a capacity of 16GB) and 32GB (two 3D XPoint memory chips are used with a capacity of 16GB each).  From interesting design details: <br><br><ul><li>  the controller is internal to intel </li><li>  DRAM is not used in the design </li><li>  only 2 PCIe gen3 lines are used, and not 4 lines, as many might expect </li><li>  claimed durability - 100GB of recorded data every day for 5 years </li></ul><br><h2>  <font color="#0071c5">Performance test</font> </h2><br>  Now about performance <br><br><img src="https://habrastorage.org/web/956/c80/54a/956c8054aa474ae8a7ba3323f2eccdb6.jpg" alt="image"><br>  (The performance of the 32GB version is higher due to the fact that 2 xp xoint 3d memory chips are used versus a single 16gb chip) <br><br>  It would seem that the performance in terms of bandwidth and IOPS is not impressive - however, the dog is not completely buried here.  The whole thing is that these performance data were measured at a queue depth of 4, unlike other SSDs that are usually measured with a queue depth of 32 or more.  It is on shallow lines that the superiority of Optane is most noticeable.  For clarity, here is a graph of the performance of different types of devices at different depths of the queue *: <br><br><img src="https://habrastorage.org/web/f17/5a4/1de/f175a41de5094022ba75de8f731ccaef.jpg" alt="image"><br><br>  At the same time, as our internal tests show, the vast majority of tasks faced by an ordinary user at home or in the office have a queue depth of 1 to 4 (for more details see below), and SSD specifications are written using loads with a queue depth of 32 (for SATA) and more (for NVMe).  The difference is very clear. <br><br>  However, Intel is not positioning the use of Optane Memory as a normal SSD for obvious reasons - there will not be enough device capacity for user tasks (with the exception of some interesting options, such as a small but fast and reliable boot drive for Linux, or a scratch disk for Adobe Photoshop, or a small but fast cache with Intel Cache Acceleration Software, or an interesting solution, described <a href="http://www.tweaktown.com/reviews/8234/intel-optane-raid-worlds-fastest-system-disk/index.html">here</a> ).  All the power of the Intel marketing device is aimed at promoting a new acceleration technology (roughly speaking, caching, but this is not the exact definition) of a slow SATA drive (be it a hard disk, solid state drive or even some hybrid models) with the fast Optane Memory module. <br><br>  This usage model places restrictions on supported hardware and operating systems: <br><br><ul><li>  7th generation or newer Intel Core processor </li><li>  Intel 200 Series chipset or newer (full list <a href="https://www.intel.com/content/www/us/en/architecture-and-technology/optane-memory.html">here</a> ) </li><li>  BIOS, in which the UEFI-driver RST version 15.5 or later is integrated (15.7 for the X299 series of chipsets).  Yes, BIOS legacy mode is not supported - for Optane Memory, booting is required in UEFI mode </li><li>  Windows 10 64-bit </li><li>  Intel Rapid Storage Technology Driver 15.5 or later </li><li>  SATA boot drive (Optane Memory will speed it up).  Only GPT markup is supported. </li><li>  5MB of free space at the end of the SATA drive - this is needed for RST metadata </li></ul><br>  It is configured this way: <br><br><ol><li>  We are convinced that the motherboard's BIOS supports Optane (see above; now all the ‚ÄúOptane Memory Ready‚Äù motherboards on 200 series of chipsets are being shipped with a BIOS that supports Optane Memory, but you can still find motherboards on the market from the previous lots - they will need to be updated on BIOS ). <br><br>  And yes, Intel did a great deal of work with motherboard manufacturers - all the motherboards that support Optane Memory have this nameplate on the box: <br><br><img src="https://habrastorage.org/web/397/a8c/d27/397a8cd271034b75b3a6bf42438f6917.jpg" alt="image"><br></li><li>  A system with a SATA drive is installed on which Windows 10 64-bit is installed (the drive must be connected to the SATA port divorced from the Intel AHCI controller in the chipset, otherwise RST will not see it), the markup must be GPT. <br><br></li><li>  The Optane Memory module is connected (the drive must be inserted into M.2 slot with separated PCIe lines from the chipset, supporting ‚Äúremapping‚Äù PCIe lines to the Intel AHCI controller integrated into the chipset). <br><br></li><li>  The utility is downloaded <a href="https://downloadcenter.intel.com/download/26865/Intel-Rapid-Storage-Technology-Intel-RST">from here</a> (you can choose the standard RST utility, which allows you to manage both configurations with Optane Memory and conventional RST arrays, or a simplified version of the utility, which allows you only to turn on and off Optane Memory configurations and watch statistics). <br><br></li><li>  The utility is installed, it automatically changes SATA mode in BIOS to RST / Optane mode (this requires one system reboot), it also includes acceleration using Optane Memory (this requires a second system reboot).  As a result, instead of 2 disk devices, the system will see only one thing - the so-called.  Optane Volume. <br><br></li><li>  PROFIT!  Namely: <br><br><ul><li>  Faster loading of the operating system; </li><li>  Acceleration of the majority of I / O operations (in fact, caching, but rather smart algorithms). </li></ul></li></ol><br><h2>  <font color="#0071c5">Principle of operation</font> </h2><br>  Also talk a little about how it all works. <br><br>  First, at the time of activation of Optane Memory, the RST driver will transfer the files necessary for booting the OS, as well as the file table to the fast Optane Memory drive.  The key here is to transfer, not copy.  The mechanics of the RST driver is such that not all data stored in the cache on a fast device will be copied to a slow device without fail.  This increases the overall system performance and, in addition, solves the problem of data synchronization.  However, as can be understood, the physical failure of Optane Memory is likely to result in loss of access to data on the SATA disk.  Due to the fact that data transfer occurs immediately when Optane Memory is activated, the very first system load will be faster than before Optane Memory (this is especially noticeable if the hard disk was accelerated rather than SATA SSD - however, in the latter case it costs expect increased storage system performance). <br><br>  Secondly, the driver will continuously perform caching while the RST system is running.  And here there is one important difference between the Optane Memory modules of different capacities - on a 16GB device, only block-level caching is supported, on a 32GB device, block-level caching and file-level compression (both work simultaneously).  In the case of block caching, the decision to cache a block occurs instantaneously at the time of an I / O request.  In the case of file caching, the driver monitors the frequency of access to files and puts it all into a special table, which then (at the time of system idle or scheduled users) uses to determine which files remain in the cache, which are deleted, and which are added. <br><br>  Both types of caching are used by smart enough, in my opinion, caching decision making algorithms - I cannot describe them deeply, but for general understanding I‚Äôll note that, for example, video files are not cached (yes, the driver looks at the file extension), in the calculation the file size is taken, the type of load is determined - preference in caching is given to random access rather than sequential, which makes sense because of the extremely slow work of hard disks on random access operations, etc.  On the Internet, I met some negative comments on the fact that "the cache is immediately overwhelmed with data," "16GB capacity is not enough for anything," and the like - as a rule, these are reviews from people who have never tested Optane Memory.  I have not yet heard negative feedback on the performance of this solution from any of our partners with whom I work. <br><br>  Some very important moments. <br><br><ul><li>  If the system acceleration is enabled using the RST driver and Optane Memory, you need to connect the SATA drive to another system, then you need to either transfer the entire configuration (SATA device + Optane Memory, and make sure that the new system supports Optane Memory), or turn off acceleration (this is done by pressing a single button in the utility ‚Äî at the same time, the cache data will be transferred to the SATA device, the RST metadata will be deleted, the Optane Memory device will be cleared). <br><br></li><li>  Disk cloning does not work when acceleration is enabled with Optane Memory, since  no utility can work with RST metadata.  Direct cloning of the section with metadata will not be enough - the fact is that the metadata is tied to the serial numbers of Optane Memory and SATA devices.  There are no difficulties with file system level backups. </li></ul><br><h2>  <font color="#0071c5">Why do you need it</font> </h2><br>  Now it's time to talk in more detail about why all this is needed at all.  Let's start with a more detailed analysis of the loads experienced by the systems of ordinary PC users.  Even before the end of the Optane Memory product development, as part of the Intel Product Improvement Program, my colleagues conducted a study on what ordinary users are doing with the computer at home and at work.  Results - the number of actions of different types produced by users (averaged data for 1 day of using the PC): <br><br><img src="https://habrastorage.org/web/1c4/d4d/8ed/1c4d4d8edd8b490aae16cf76503a95f8.jpg" alt="image"><br><br>  All these events are closely related to the performance of the system disk, and, as a rule, they require random access to data, with which hard disks cope extremely badly.  Thus, the use of Optane Memory can significantly speed up the execution of each of the above actions. <br><br>  However, you ask why I need to buy Optane Memory to speed up the hard drive, if I can buy a 128GB SATA SSD for the same money, put an OS and key applications on it, and for other data just use a hard drive?  Here, on the one hand, is a matter of convenience - if you have at least some basic skills to be able to choose where to install OS / applications (I suspect that all GT readers fall into this category, however, I can assure you that, for example, my parents, like most PC users, are not capable of this), and at the same time you will not be lazy to do every application (especially problematic for games - with the current requirements for disk space, 128GB will be clogged under the OS and 1-2 games), From this point of view, the hybrid SSD + HDD configuration can be for  Al convenient. <br><br>  However, keep in mind that with Optane Memory no manual data transfer is required - as soon as you stop using one application and begin to actively use another, the necessary data will be quickly added to the cache.  On the other hand, let us recall the graph I cited above - performance depending on the queue depth.  On small queues, the latency of access to data on Optane Memory is much lower compared to SATA SSD.  Inside Intel, we measured the queue depth used by various applications - here are the results: <br><br>  Queue depth when using applications: <br><br><img src="https://habrastorage.org/web/dae/c3e/388/daec3e38890a48a79a6cfd10e021f5a7.jpg" alt="image"><br><br><img src="https://habrastorage.org/web/1fd/b10/657/1fdb10657f27459fabe0d2709a780f10.jpg" alt="image"><br><br>  Queue depth when launching applications: <br><br><img src="https://habrastorage.org/web/6d3/17f/71e/6d317f71e2724113b80efe8198f08462.jpg" alt="image"><br><br><img src="https://habrastorage.org/web/753/a0e/8d4/753a0e8d495043de87af3dfc3a81e79e.jpg" alt="image"><br><br>  The distribution of the queue depth during a typical corporate user working day (measured by Intel employees in various positions in the company): <br><br><img src="https://habrastorage.org/web/e89/f20/596/e89f2059697f4127927d0ee0723c4caf.jpg" alt="image"><br><br><img src="https://habrastorage.org/web/ab9/25b/1e6/ab925b1e63f84c20aa4ad37cb34327c6.jpg" alt="image"><br><br>  Thus, the distribution of the queue depth of different user loads: <br><br><img src="https://habrastorage.org/web/426/7cf/5b7/4267cf5b7f4b4b2b8b1d997cc69f1afd.jpg" alt="image"><br><br>  And we have already seen how much better Optane Memory does by working on shallow queues. <br><br>  Comparing system performance with HDD versus the same system with HDD + Optane Memory: <br><br><img src="https://habrastorage.org/web/fef/f3a/e7b/feff3ae7b65f48919fc38d339475cc15.jpg" alt="image"><br><br>  Another interesting comparison is the same test, but in a system without Optane Memory, 2 times more RAM is: <br><br><img src="https://habrastorage.org/web/d0b/115/17b/d0b11517b6744f4688ba5ead45d6dd1d.jpg" alt="image"><br><br>  And, in fact, this is a very valid comparison.  Although some types of loads require a large amount of RAM, the lion‚Äôs share of the requirements for large amounts of memory does not.  Thus, for many users, it may make sense to put 4 GB of memory instead of 8 GB, and invest the money saved in speeding up the storage system. <br><br><h2>  <font color="#0071c5">Conclusion</font> </h2><br>  Summing up, let me remind you that Optane Memory can be used as a standalone SSD, but this is not the main usage model.  All magic happens when it is used as an accelerator for a slow hard disk (or even SATA SSD) - a relatively small investment of money can speed up the system speed several times at most user loads.  This is achieved due to both the hardware (Optane Memory has noticeably lower access delays compared to other SSDs on the market, small queues have much faster performance than alternative solutions), and software ‚Äî the RST driver uses sufficiently advanced logic to perform caching operations (and This is the difference from the previous technology - Intel Smart Response Technology).  This makes the current implementation different from all those hard drive caching / acceleration solutions that have been released to the market earlier, including by us. <br><br>  I am very interested to learn about the product and the decision as a whole from the comments - however, I would like to avoid negative opinions due to a lack of understanding of the solution‚Äôs work or lack of experience in using it.  If there is any doubt, ask before submitting to criticism. <br><br>  <b>PS</b> in the next article we will analyze the server product based on 3D XPoint technology - Intel Optane SSD DC P4800X Series - together with the software solution of Intel Memory Drive Technology. <br><br>  <i>* All tests listed in this article were conducted inside Intel.</i>  <i>All tests with Optane Memory were carried out on 7th generation Intel Core processors, queue depth tests using the 6th generation Intel Core processor.</i>  <i>Configuration of the system used for tests:</i> <br><br><img src="https://habrastorage.org/web/b5b/8e0/2f1/b5b8e02f197348c8813fc447538dbdac.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/370729/">https://habr.com/ru/post/370729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../370713/index.html">Siemens has replaced managers with a computer program.</a></li>
<li><a href="../370715/index.html">StarCraft II game opened for machine learning agents</a></li>
<li><a href="../370717/index.html">New nanodevices from RNA can perceive and analyze many complex signals in living cells</a></li>
<li><a href="../370721/index.html">The origin of the saying "You are not a consumer, but a product"</a></li>
<li><a href="../370727/index.html">To VPN through trust</a></li>
<li><a href="../370731/index.html">Game AI champion from Ilona Musk killed people in video games? Not so easy</a></li>
<li><a href="../370733/index.html">Found a way to resist an attack on 3D printers</a></li>
<li><a href="../370735/index.html">Ask Ethan: Can the universe be infinite?</a></li>
<li><a href="../370739/index.html">40 years of flight "Voyagers". Soon they will be silent forever</a></li>
<li><a href="../370741/index.html">A man who has been making online games for 20 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
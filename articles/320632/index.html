<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúThe worst practices‚Äù of working with backup products on the example of Veeam Backup & Replication</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many have heard about the ‚Äúbest practices‚Äù - these are recommendations that should be followed when deploying a system for optimal performance. Howeve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúThe worst practices‚Äù of working with backup products on the example of Veeam Backup & Replication</h1><div class="post__text post__text-html js-mediator-article">  Many have heard about the ‚Äúbest practices‚Äù - these are recommendations that should be followed when deploying a system for optimal performance.  However, today I want to talk about the ‚Äúworst practices‚Äù or the common mistakes of administrators in the field of backup tasks.  Since the users of the products do not always have enough time to read many articles with ‚Äúbest practitioners‚Äù, as well as resources to implement them all, I decided to summarize information about what exactly should be avoided when working with backup products.  For ‚Äúbad advice‚Äù welcome under cat. <br><br><img src="https://habrastorage.org/files/673/a61/38d/673a6138d57d43cbb993cad6d215ed4b.jpg" alt="image"><br><a name="habracut"></a><br><h2>  Run backup tasks with settings that do not take into account a specific configuration </h2><br>  Lack of backup planning and evaluation of backup storage performance is the most common ‚Äúworst practice‚Äù.  Many users install a backup product with standard settings by simply pressing the Next button in the product wizards.  Moreover, many leave the default settings for backup jobs, not taking into account the infrastructure, the removal policies of old copies and other important aspects.  As a result, errors occur when starting and executing tasks, premature filling of the repository and, as a result, pleasant, but time-consuming communication with the technical support service. <br><br>  <b>What is the right way then?</b>  Using the example of Veeam products: in order to avoid such scenarios, it is recommended to use, for example, <a href="https://www.veeam.com/virtualization-management-one-solution.html">Veeam ONE</a> - a tool for monitoring and creating reports about infrastructure work before installing Veeam Backup &amp; Replication.  So, by opening the <b>VM Configuration Assessment</b> report, you will see if your virtual machines are ready for backup, and if not, for whatever reason.  The <b>VM Change Rate Estimation</b> report (estimate of VM change frequency) is based on statistics on changes in virtual machine blocks and allows you to correctly calculate the required repository size. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/e2f/dfd/95f/e2fdfd95f17e485a886ff8ec46666b6c.png" alt="image"><br><br>  More information about useful for planning reports can be read, for example, <a href="https://habrahabr.ru/company/veeam/blog/245287/">here</a> . <br><br>  Another tool from Veeam ‚Äî an <a href="https://habrahabr.ru/company/veeam/blog/267743/">online recovery point size calculator</a> ‚Äî will also help when planning your backup environment. <br><br><h2>  Combine all tasks in chains </h2><br>  Do you want to fill up all backup tasks due to an error in one of them?  Then, rather, combine them into chains of dependent tasks, so that when one task is completed, another begins at once.  In this case, you are guaranteed to get an increase in backup windows, delayed start of tasks and other unpleasant consequences. <br><br>  <b>What is the right way then?</b>  In fact, tasks should be merged only in certain cases.  For example, if you do not want to backup two applications at the same time, then you can configure the start of the backup of one of them only after the completion of the backup of another application.  In the case of Veeam, you better trust the product to plan the resources for you.  Veeam Backup &amp; Replication scheduler can run several tasks at the same time to optimize backup windows, using ‚Äúsmart algorithms‚Äù to distribute the load on infrastructure components, choosing the optimal data transfer mode and working within the established limits of the channel bandwidth to the repository. <br><br><h2>  Never verify backups </h2><br>  Life experience shows that companies often ‚Äúsave‚Äù on backup testing.  This may be due to both insufficient awareness of possible problems during the recovery phase, as well as economic factors, since a complete testing process of restoring a system from a backup, if done manually, is a very time-consuming operation.  This situation is fraught with negative consequences, because in the event of a failure, critical data may not be restored at a given time or, even worse, may be partially or completely lost. <br><br>  What happened in 1998 in the real Pixar studio case, when all the working materials of the cartoon ‚ÄúToy Story 2‚Äù were almost lost, you can read in our post ‚Äú <a href="https://habrahabr.ru/company/veeam/blog/193568/">Pixar Case or again about the importance of backup testing</a> ‚Äù. <br><br>  <b>What is the right way then?</b>  Backup recovery testing should be performed regularly.  It is necessary to distinguish between <b>testing the integrity of the backup itself</b> and <b>testing the restoration from the backup</b> .  In the first case, you only check the integrity of the copy of the checksums of the data blocks.  In the second, you are testing to reflect one or another simulated scenario of a single failure or a full-scale ‚Äúcatastrophe‚Äù of the productive network.  It is extremely important to do not only the first, but also the second, because ultimately you are interested in real data recovery in the event of a failure, and even if the integrity of the backup itself is not compromised, the recovery may fail. <br><br>  There can be a lot of probable reasons for the unsuccessful recovery, I will give only some of them: <br><br><ul><li>  restoring a system may require additional steps that the backup product does not automatically perform (for example, reconfiguring remote services that interact with the restored system), </li><li>  access to the repository of backups from the new laptop of the administrator may be denied (simply because it will be the first attempt of such access - and this will take extra valuable time), </li><li>  the low bandwidth of the channel will ‚Äúhang‚Äù the off-site recovery process (when a backup copy needs to be pulled from another office), </li><li>  suddenly it turns out that the daily backup for the last six months has constantly increased in size (almost all source systems are constantly growing in size) - and at some point did not fit on the tape, but the error went unnoticed (the above-mentioned Pixar example) </li><li>  the old backup may not be restored on the new hardware, </li><li>  during recovery, it may turn out that not all files or machines are in the backup job area. </li></ul><br>  How can these problems be solved?  For example, the Veeam <a href="https://www.veeam.com/verified-recoverability.html">SureBackup</a> technology allows <a href="https://www.veeam.com/verified-recoverability.html">you</a> to automatically test virtual machines from backups and ensure that they can be restored.  The SureBackup task (see the post <a href="https://habrahabr.ru/company/veeam/blog/162201/">‚ÄúSureBackup - automatically checking the possibility of restoring data from a backup‚Äù</a> ) automatically starts all machines, taking into account their dependencies (for example, first a domain controller and only then an Exchange server), in an isolated virtual laboratory, it checks their performance ( including using scripts written by the user) and sends the corresponding reports by email. <br><br><h2>  Do not complete the instant machine recovery process (Instant VM recovery) </h2><br>  And finally, the worst advice on today's topic is specifically on Veeam: start a virtual machine using <a href="https://www.veeam.com/ru/instant-vm-recovery.html">Instant VM recovery</a> and forget about it.  Forget it completely.  In this case, you are guaranteed a whole ton of problems.  Running the machine directly from the repository will result in locking the recovery point, so other tasks (for example, SureBackup or BackupCopy) simply won't start.  This happens due to the fact that the machine is started directly from the backup file in read mode, that is, without writing any changes to the file itself.  This creates a separate file on the C: drive of the Veeam backup server, which will grow to an incredible size, if you leave the machine running for at least a few days. <br><br><img src="https://habrastorage.org/files/f9c/50b/f33/f9c50bf3382449cf9363e166d9818ed0.png" alt="image"><br><br>  <b>What is the right way then?</b>  To avoid this, immediately after the completion of Instant VM recovery, be sure to transfer the machine to the production environment.  Learn more about this process in <a href="https://helpcenter.veeam.com/backup/vsphere/instant_recovery_review_vm.html">the</a> Veeam <a href="https://helpcenter.veeam.com/backup/vsphere/instant_recovery_review_vm.html">User Guide</a> . <br><br><h2>  Conclusion </h2><br>  I hope this article will help save time, money and get rid of the headaches from the problems described.  Have something to add to the list of "worst practices"?  Then share it in the comments! <br><br>  And in conclusion, I provide links to our best posts about best backup practices, whatever product you use: <br><br><ul><li>  <a href="https://habrahabr.ru/company/veeam/blog/176927/">Best Practices for Backup Policy</a> </li><li>  <a href="https://habrahabr.ru/company/veeam/blog/170653/">Features long-term backup storage</a> </li><li>  <a href="http://ashirmanov.blogspot.ru/2012/09/BackupTesting.html">Testing backup data recovery</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/320632/">https://habr.com/ru/post/320632/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320612/index.html">A little more about Xiaomi phones and fighting with them. Updated</a></li>
<li><a href="../320614/index.html">‚ÄúWe have come from the corner,‚Äù or who might be forced out of the market by a competitor. Part One, Pessimistic</a></li>
<li><a href="../320620/index.html">Looking for Performance: Monitoring JVM performance under Linux with BPF</a></li>
<li><a href="../320622/index.html">February 11: The Techleads meetup. How to create and maintain dynamic development</a></li>
<li><a href="../320624/index.html">Connecting ATOL KKM to AndroidStudio (update to FZ-54)</a></li>
<li><a href="../320634/index.html">Disassemble it: Kaspersky Lab announces the start of the CrackMe winter competition</a></li>
<li><a href="../320636/index.html">How is storage different from chicken?</a></li>
<li><a href="../320638/index.html">Choose a number from 1 to 99</a></li>
<li><a href="../320640/index.html">33 iOS open source libraries that will be popular in 2017</a></li>
<li><a href="../320644/index.html">Lead magnets that magnetise</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
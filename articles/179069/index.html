<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multiple Branches and Rules Template</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear habrachiteli. In this article, I would like to share knowledge about one small and simple, but useful template, about which usually is not...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multiple Branches and Rules Template</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear habrachiteli.  In this article, I would like to share knowledge about one small and simple, but useful template, about which usually is not written in books (perhaps because it is a special case of the ‚ÄúTeam‚Äù template).  This is the Rules Pattern.  Probably for many he will be very familiar, but it will be interesting to someone to meet him. <br><br><img src="https://habrastorage.org/storage2/ae9/fd4/2ca/ae9fd42caadf1cb138a60369e3444f62.jpg"><br><br><a name="habracut"></a><br><h5>  Essence of the question </h5><br>  Very often, when developing complex logic, a tree of nested ifs arises, which may look, for example, like this: <br><div class="spoiler">  <b class="spoiler_title">Horrible code</b> <div class="spoiler_text"><pre><code class="hljs dos">public double CalculateSomething(Condition condition) { //   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.First...) ... //   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.Second...) ... //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.AnotherFirst...) { //      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.First) ... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>... } //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.AnotherSecond...) { //      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.Second) ... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>... } //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.YetAnotherFirst) { //... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(condition.AnotherFirst &amp;&amp; condition.Second) ... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ... } } // O_o }</code> </pre> <br></div></div><br>  Familiar?  So what are the problems here? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Problem 1:</b> Growing cyclomatic complexity.  To put it simply, cyclomatic complexity is the depth of nesting of if-s and cycles taking into account logical operators.  Code analysis tools allow you to evaluate this parameter for all parts of the code.  <a href="http://www.mccabe.com/pdf/mccabe-nist235r.pdf">It is considered</a> that the parameter of cyclomatic complexity for a separate piece of code should not exceed 10. Of this problem, the following grows. <br><br>  <b>Problem 2:</b> Adding new logic.  With the passage of time and the addition of new conditions, it becomes difficult to understand exactly where to add new logic and how. <br><br>  <b>Problem 3:</b> Code duplication.  If the condition tree is ramified, then sometimes it is impossible to get rid of the situation when the same code is present in several branches. <br><br>  This is where the ‚ÄúRules‚Äù template comes to the rescue.  Its structure is very simple: <br><div class="spoiler">  <b class="spoiler_title">Structure uml diagram</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/11b/fe0/218/11bfe02186158a598eaa139a7716c18c.png"><br></div></div><br>  Here, the Evaluator class contains a collection of IRule interface implementations.  The valuator fulfills the rules and decides which rule to use to get the result.  To understand how this works and looks like in code, consider a small example in C #. <br><br><h5>  Example.  Dice (like Tali) </h5><br>  <b>Rules of the game:</b> <br><br>  The player rolls 5 dice at the same time, and depending on their combination gets a certain number of points. <br>  Combinations may be as follows: <br>  <code>1 XXXX</code> - 100 points <br>  <code>5 XXXX</code> - 50 points <br>  <code>1 1 1 XX</code> - 1000 points <br>  <code>2 2 2 XX</code> - 200 points <br>  <code>3 3 3 XX</code> - 300 points <br>  <code>4 4 4 XX</code> - 400 points <br>  <code>5 5 5 XX</code> - 500 points <br>  <code>6 6 6 XX</code> - 600 points <br><br>  Examples of combinations: <br>  <code>[1,1,1,5,1]</code> - 1150 points <br>  <code>[2,3,4,6,2]</code> - 0 points <br>  <code>[3,4,5,3,3]</code> - 350 points <br><br>  Of course, they can all be different, and there may be much more, but more on that later. <br><br><h6>  Do it once!  No templates. </h6><br>  Let's try to describe the logic of the game without using the ‚ÄúRules‚Äù template, as we would write in an informatics class in the 8th grade (naturally, without providing our bad code with comments - who needs them!) <br><div class="spoiler">  <b class="spoiler_title">Bad, Bad Game Class</b> <div class="spoiler_text"><pre> <code class="hljs axapta"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Score(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] roles) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">1</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">7</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> = CountDiceWithValue(roles, i); <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> = ScoreSetOfN(<span class="hljs-keyword"><span class="hljs-keyword">count</span></span>, GetSetSize(i), SetSetScore(i), ref score); score += <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> * GetSingleDieScore(i); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> score } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GetSingleDieScore(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> val) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(val==<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(val==<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GetSetScore(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> val) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(val==<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val*<span class="hljs-number"><span class="hljs-number">100</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> GetSetSize(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> val) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ScoreSetOfN(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> setSize, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> setScore, ref <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">count</span></span>&gt;=setSize) { score += setScore; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> - <span class="hljs-number"><span class="hljs-number">3</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> CountDiceWithValue(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] roles, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> val) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; foreach (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r in roles) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r == val) <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>++; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>; } }</code> </pre><br></div></div><br><h6>  Do two!  Adding rules?  Unit Tests. </h6><br>  It seems that 50 lines of code is very small.  But what will happen if the rules of the game are changed and added? <br>  For example, we add rules for different combinations of cubes: <br><br>  <code>1 1 1 1 X</code> - 2000 <br>  <code>1 1 1 1 1</code> - 4000 <br>  <code>1 2 3 4 5</code> - 8000 <br>  <code>2 3 4 5 6</code> - 8000 <br>  <code>AABBX</code> - 4000 <br>  and so on. <br><br>  In this case, the code runs the risk of becoming very confusing.  To avoid this, we will rewrite the code using the "Rules" template. <br>  <i>(Here, I would also have to say that before refactoring, it is necessary to cover all cases with modular tests, rumble about their importance and need for refactoring code)</i> <br><br><h6>  Do three!  Apply the template "Rules" </h6><br>  1. We define the <code>IRule</code> interface with the <code>Eval</code> method, which is needed to estimate the number of points for a certain set of cubes. <br><div class="spoiler">  <b class="spoiler_title">IRule.cs</b> <div class="spoiler_text"><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IRule</span></span> { <span class="hljs-function"><span class="hljs-function">ScoreResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Eval</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] dice</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre><br></div></div><br>  2. Create a <code>RuleSet</code> class that will define a set of rules, logic to add a rule, and logic to select the best rule to apply to this set of cubes: <br><div class="spoiler">  <b class="spoiler_title">RuleSet.cs</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> RuleSet { //  private List&lt;IRule&gt; _rules = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> List&lt;IRule&gt;(); //  <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(IRule <span class="hljs-keyword"><span class="hljs-keyword">rule</span></span>) { _rules.<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">rule</span></span>); } //   - ,      <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> IRule BestRule(<span class="hljs-type"><span class="hljs-type">int</span></span>[] dice) { ScoreResult bestResult = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ScoreResult(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(var <span class="hljs-keyword"><span class="hljs-keyword">rule</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> _rules) { var result = <span class="hljs-keyword"><span class="hljs-keyword">rule</span></span>.Eval(dice); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(result.Score &gt; bestResult.Score) { bestResult = result; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bestResult.RuleUsed; } } }</code> </pre><br></div></div><br>  3. Of course, a small class assistant <br><div class="spoiler">  <b class="spoiler_title">ScoreResult.cs</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> ScoreResult { //   <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span> Score {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} //    (       ) <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">int</span></span>[] DiceUsed {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} //   ,  ,     (  BestRule) <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> IRule RuleUsed {<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>;<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>;} }</code> </pre><br></div></div><br>  4. And define the rules themselves. <br><div class="spoiler">  <b class="spoiler_title">ConcreteRules.cs</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">//    <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SingleDieRule : IRule { private readonly <span class="hljs-type"><span class="hljs-type">int</span></span> _value; private readonly <span class="hljs-type"><span class="hljs-type">int</span></span> _score; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> SingleDieRule(<span class="hljs-type"><span class="hljs-type">int</span></span> dieValue, <span class="hljs-type"><span class="hljs-type">int</span></span> score) { _dieValue = dieValue, _score = score } //   -      <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ScoreResult Eval(<span class="hljs-type"><span class="hljs-type">int</span></span>[] dice) { //- var result = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ScoreResult(); //    (   ) -    result.DiceUsed = dice.<span class="hljs-keyword"><span class="hljs-keyword">Where</span></span>(d=&gt;d == dieValue).ToArray(); //   result.Score = result.DiceUsed.Count() * _score; //  -       result.RuleUsed = this; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } } //     </code> </pre><br></div></div><br>  5. In our case, the <code>Evaluator</code> class from the scheme will be the <code>Game</code> class, it will contain almost nothing but the logic of adding rules and the scoring logic. <br><div class="spoiler">  <b class="spoiler_title">Game.cs - Evaluator</b> <div class="spoiler_text"><pre> <code class="hljs perl">public class Game { private readonly RuleSet _ruleSet = new RuleSet(); public Game(bool useAllRules) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  _ruleSet.Add(new SingleDieRule(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>)); _ruleSet.Add(new SingleDieRule(<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">50</span></span>)); _ruleSet.Add(new TripleDieRule(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">2</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">7</span></span>; i++) { _ruleSet.Add(new TripleDieRule(i, i*<span class="hljs-number"><span class="hljs-number">100</span></span>)); } //  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(useAllRules) { _ruleSet.Add(new FourOfADieRule(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2000</span></span>)); _ruleSet.Add(new SetOfADieRule(<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">4000</span></span>)); _ruleSet.Add(new StraightRule(<span class="hljs-number"><span class="hljs-number">8000</span></span>)); _ruleSet.Add(new TwoPairsRule(<span class="hljs-number"><span class="hljs-number">6000</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">2</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">7</span></span>; i++) { _ruleSet.Add(new FourOfADieRule(i,i*<span class="hljs-number"><span class="hljs-number">200</span></span>)); _ruleSet.Add(new SetOfADieRule(i,i*<span class="hljs-number"><span class="hljs-number">400</span></span>)); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>... } } } //       public void AddScoringRule(IRule rule) { _ruleSet.Add(rule); } //  public <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Score(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] dice) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> score = <span class="hljs-number"><span class="hljs-number">0</span></span>; var remainingDice = new List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(dice); var bestRule = _ruleSet.BestRule(remainingDice.ToArray()); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>             <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(bestRule!=null) { var result = bestRule.Eval(remainingDice.ToArray()); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(var <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> in result.DiceUsed) { remainingDice.Remove(<span class="hljs-keyword"><span class="hljs-keyword">die</span></span>); } score+=result.Score; bestRule = _ruleSet.BestRule(remainingDice.ToArray()); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> score; } }</code> </pre><br></div></div><br>  Hooray!  Problem solved!  Now each class is doing what it is supposed to; the cyclomatic complexity does not grow, <br>  and new rules are added easily and simply.  Rule selection is now done using the <code>RuleSet</code> class, which contains a set of rules, and adding rules and scoring - the <code>Game</code> class. <br><br><h6>  What you need to remember? </h6><br>  When designing a program containing logic based on rules, it is useful to keep in mind the following questions: <br>  - Should the rules be read-only in relation to the system so as not to change its state? <br>  - Should there be dependencies between the rules?  Should I pay attention to the order of execution of the rules, in the case where one rule may require the result of the work of another rule for the work. <br>  - Should the order of execution of the rules be strictly defined? <br>  - Should there be priorities in the implementation of the rules? <br>  - Should end-users be allowed to edit rules? <br>  and many others. <br><br><h5>  A couple of words about Business Rules Engines systems </h5><br>  The concept of Business Rules Engines is very close to the idea of ‚Äã‚Äãthe ‚ÄúRules‚Äù template - these are systems that allow <br>  define rule systems for business logic.  Usually they have some kind of graphical interface and allow users to define rules and hierarchies of rules that can be stored in a database or file system.  In particular, this functionality has the Workflow Foundation from Microsoft. <br><br><h5>  Summary </h5><br>  1) Use the "rules" template when you need to get rid of the complexity of conditions and branching <br>  2) We place the logic of each rule and its effects in our classes. <br>  3) Separate the selection and processing of rules into a separate class - Evaluator <br>  4) We know that there are ready-made "engine" solutions for business logic <br><br>  Thank you very much for your attention, I hope my creative processing of this educational material will help someone. <br>  <i>* The source of inspiration for this article was the ‚ÄúPattern Pattern‚Äù lesson from the ‚ÄúDesign Patterns‚Äù course on pluralsight.com by <a href="http://pluralsight.com/training/Authors/Details/steve-smith">Steve Smith.</a></i> </div><p>Source: <a href="https://habr.com/ru/post/179069/">https://habr.com/ru/post/179069/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179057/index.html">ISS goes to Linux</a></li>
<li><a href="../179059/index.html">BitTorrent announced a new format of torrent files: Bundle, with a request for action before the jump</a></li>
<li><a href="../179063/index.html">YouTube introduced Trends Map: visualizing user preferences on a map.</a></li>
<li><a href="../179065/index.html">Second beta released elementary OS Luna</a></li>
<li><a href="../179067/index.html">We explore the game with an arcade machine Part 1</a></li>
<li><a href="../179071/index.html">Surprisingly, 3DS is now the best gaming platform.</a></li>
<li><a href="../179075/index.html">Processing pcntl signals in PHP</a></li>
<li><a href="../179077/index.html">Why the "Great Gatsby" is still not in the public domain</a></li>
<li><a href="../179081/index.html">Speed ‚Äã‚Äãup your code and find a needle in a haystack</a></li>
<li><a href="../179083/index.html">Unicorn is again ready to communicate with C ++ programmers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Blog a la Habr, the choice of platform</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous series ( How to slay Habr in a hurry ) launched a project based on the Create React App (CRA). But this is a SPA , which is not very s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Blog a la Habr, the choice of platform</h1><div class="post__text post__text-html js-mediator-article"><p>  In the previous series ( <a href="https://habrahabr.ru/post/322084/">How to slay Habr in a hurry</a> ) launched a project based on the <a href="https://facebook.github.io/react/blog/2016/07/22/create-apps-with-no-configuration.html">Create React App</a> (CRA).  But this is a <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B4%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2587%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">SPA</a> , which is not very suitable when indexing is required in search engines.  Need <a href="https://rajdee.gitbooks.io/redux-in-russian/content/docs/recipes/ServerRendering.html">Server Side Rendering</a> (SSR).  And preferably out of the box, and not on the knee.  It is extremely wasteful to spend resources on the independent development of basic technologies.  How to choose a platform with SSR support?  In practice, of course, the <a href="https://en.wikipedia.org/wiki/Proof_of_concept">POC</a> .  I will try to implement a <a href="https://ru.wikipedia.org/wiki/CRUD">CRUD</a> with an input form on the <a href="http://www.material-ui.com/">Material-UI</a> , considering the candidates: <a href="https://reactstarter.com/">React Starter Kit</a> (RSK), <a href="https://zeit.co/blog/next">NEXT.js</a> and <a href="https://habrahabr.ru/post/316818/">Electrode</a> (not to be confused with <a href="https://electron.atom.io/">Electron</a> ). </p><br><p>  <a href="https://github.com/comerc/yobr-rsk">Sources on github</a> . </p><a name="habracut"></a><br><h3 id="routing">  Routing </h3><br><p> RSK has its own bicycle - <code>universal-router</code> .  Uploading external data to Redux in server rendering is offered <a href="">via the express</a> (or koa, or hapi) configuration. </p><br><p>  NEXT.js approached the question of routing in an original way, suggesting the use of file names in the pages folder.  Inside the usual React-components with a static method <code>getInitialProps</code> , in which it is proposed to perform the loading of external data in server rendering.  If you need to customize the processing of requests, then this is done in the most natural way - <a href="">through the configuration of express</a> (or koa, or hapi). </p><br><p>  Electrode, unlike other platforms considered, does not force to refuse <code>redux-router</code> .  This means that at the time of the implementation of the frontend, you can return to the development of the CRA.  All the magic of server rendering inside the <code>electrode-redux-router-engine</code> . </p><br><h3 id="proizvoditelnost">  Performance </h3><br><p>  It is very interesting to see how the site <a href="https://zeit.co/">zeit.co is loaded</a> , which works on NEXT.js.  When you open the page of the list of posts, 15 MB of traffic comes, but further transitions to the pages of the posts occur instantly - everything is cached in the browser.  However, this disgrace can be disabled through the <code>prefetch</code> property of the <code>Link</code> component.  Offline-first is promised in NEXT.js ( <a href="https://github.com/zeit/next.js/issues/861">with reservations</a> ), but it has already been implemented in Electrode.  SSR caching: <a href="https://github.com/zeit/next.js/tree/master/examples/ssr-caching">there is an example</a> in NEXT.js, but in Electrode the <a href="https://github.com/electrode-io/electrode-react-ssr-caching">solution is in production</a> . </p><br><p>  In RSK not less interesting behavior is noticed.  When I switch the list items in the history of the URL entry line in Chrome, I observe the execution of the routes on the server, although I have not yet confirmed my choice.  As a result, the finished page is issued from the server faster. </p><br><h3 id="nastroyka-sborki">  Build Setup </h3><br><p>  NEXT.js and Electrode hide their implementation, but allow you to configure the assembly.  CRA prohibits configuring the assembly only through the eject (people fought half a year for the right to screw the SCSS), but <a href="https://www.npmjs.com/package/custom-react-scripts">there is a way out</a> .  In RSK, only fork, you need to keep track of the updates of the project and use their hands - the fee for full access to the source code of the platform. </p><br><h3 id="sborka-i-deploy">  Build and warm up </h3><br><p>  RSK (like CRA) kills by loading a new browser page during the initial build, NEXT.js and Electrode do not have this drawback. </p><br><p>  Electrode very slowly performs the initial assembly. </p><br><p>  NEXT.js offers a great service for deploying <a href="https://zeit.co/now">now</a> , and it is not tied to a specific platform. </p><br><h3 id="rabota-nad-oshibkami">  Bug work </h3><br><p>  In RSK, terrible error output, in addition, Source Maps debugging works incorrectly, the cursor moves a couple of lines below.  In Electrode, it is simply impossible to understand what went wrong if the error is on the server side.  In NEXT.js, the situation is much better, and they promise to finalize it in the near future.  CRA is the standard here, and I want to say a special thank you for displaying ESLint messages in the process of working on the project.  By the way, RSK turned the ESLint checks into a form of torture, I cut out the pre-commit. </p><br><h3 id="podderzhka">  Support </h3><br><p>  NEXT.js captivates with a variety of recipes, although some important questions are still unanswered, but the dynamics of the project‚Äôs development are encouraging.  RSK and Electrode complement the overall set well.  On the example of <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D0%25B6%25D1%2581%25D0%25B0%25D0%25B9%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25BA%25D0%25B0_%25D0%25B7%25D0%25B0%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D0%25B0">CSRF</a> : nothing at all in NEXT.js, a <a href="">holiday</a> in Electrode, in RSK found a reference to <a href="https://www.npmjs.com/package/csurf">csurf</a> . </p><br><p>  Yesterday, March 27, NEXT.js 2.0 was released, six months after the start.  Dvizhuha around NEXT.js much more compared to RSK and Electrode.  Judging by the stars on GitHub, NEXT.js is catching up with CRA, given the difference in age. </p><br><p>  Behind the technology are specific people.  This is also an important point of choice.  NEXT.js develops ZEIT - the founder of Guillermo Rauch was the technical director and co-founder of LearnBoost, remember TJ Holowaychuk? </p><br><h3 id="ps-po-puti-vyyasnil">  PS Along the way, I found out </h3><br><div class="spoiler">  <b class="spoiler_title">That the separation into components and containers is unnecessary.</b> <div class="spoiler_text"><p>  Many projects are guided by the recommendations of the <a href="https://medium.com/%40dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">Presentational and Container Components</a> , but the distinguished author admits in footnotes that the concept of separation is controversial, and the components can be mixed.  And if so, why drag a suitcase without a handle?  It is more convenient to store all project components in one shared folder.  What are the advantages: </p><br><ul><li>  Easy file system navigation. </li><li>  The unique names of the components of the project. </li><li>  Import without pain ('../../../../../ ..'). </li></ul><br><p>  When the project grows up, you should split it up into private npm-packages, encapsulating the implementation.  But not to grow a tree of subfolders inside the folder of components - to develop and maintain this significantly more difficult.  Verified </p><br><p>  Further more.  I tried CSS-Modules - I refused BEM, but after <a href="https://github.com/zeit/styled-jsx">styled-jsx</a> I can‚Äôt look at CSS-Modules anymore.  Why bind each root element of a component through className, for the sake of which, switching the attention context between files is not clear. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">What can combine actions and reducers</b> <div class="spoiler_text"><p>  Reaching enlightenment with the common folder of components, applied <a href="https://github.com/erikras/ducks-modular-redux">ducks-pattern</a> .  But this is not all, by calling right now, you will get the opportunity to completely abandon the constants for binding actions-reducers using the <a href="https://github.com/pauldijou/redux-act">redux-act</a> package: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Create an action creator (description is optional) const add = createAction('add some stuff'); const increment = createAction('increment the state'); const decrement = createAction('decrement the state'); // Create a reducer const counterReducer = createReducer({ [increment]: (state) =&gt; state + 1, [decrement]: (state) =&gt; state - 1, [add]: (state, payload) =&gt; state + payload, }, 0); // &lt;-- This is the default state</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">What is the easiest way to set up absolute paths for importing modules into Atom?</b> <div class="spoiler_text"><p>  Add <a href="https://atom.io/packages/js-hyperclick">js-hyperclick plugin</a> . </p><br><p>  Add a package to the project: </p><br><pre> <code class="bash hljs">$ yarn add babel-plugin-module-resolver -D</code> </pre> <br><p>  .babelrc </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"presets"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"next/babel"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"plugins"</span></span>: [ [<span class="hljs-string"><span class="hljs-string">"module-resolver"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">"root"</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>] }] ] }</code> </pre> <br><p>  package.json </p><br><pre> <code class="hljs objectivec">{ <span class="hljs-string"><span class="hljs-string">"moduleRoots"</span></span>: [ <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre> <br><p>  example: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MyComponent <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'components/MyComponent'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MyPage <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'pages/MyPage'</span></span></code> </pre> <br><p>  By the way, NEXT.js eliminates the pointless src folder in the project.  Just did not pay attention before, but how is it good without her! </p></div></div><br><div class="spoiler">  <b class="spoiler_title">That redux form is not needed</b> <div class="spoiler_text"><p>  And I just wanted to validate the form fields.  But 462 open issues are hinted at.  I could not make myself.  Service code is obtained more than without redux-form.  And you need to think not only about the behavior of the form, but how to make it work with the help of this beautiful wrapper.  In the morgue.  It is impossible to please everyone and everything.  It needs to offer a solution for each application.  I had a similar sad experience with the Meteor bike AutoForm.  At first glance - great.  You describe the config and it gives you the form itself!  For two fields it works.  But when the forms are large, yes with related fields.  Bozhechki.  Brakes terribly.  Buggy.  And again, forcing you to climb under the hood with a sledgehammer.  The author scored on pull requests.  There is a fork - you hang up on support a big heap of "universal" code.  Is it necessary? </p></div></div><br><div class="spoiler">  <b class="spoiler_title">About Material-UI</b> <div class="spoiler_text"><p>  This is a longstanding dispute with a technical but small but proud web studio, that no UI frameworks can replace manual work.  It is clear that the development of interfaces is bread and butter.  But I am a strong supporter of the use of ready-made solutions.  I can well imagine what could be the elaboration of details, having experience in implementing the project from scratch on an adult TK from the UI / UX design gurus.  The Material Design Guideline is the second cosmic speed.  But where is its implementation?  What I saw was slag.  In addition to the <a href="http://www.material-ui.com/">Material-UI</a> .  Turned, screwed, finished the file.  Well, yes, there are a few shortcomings.  More precisely 647 open issues.  But the patient is more alive than dead.  <a href="https://yobr-rsk.now.sh/post/add">Demo</a> - form add / edit blog post. </p></div></div><br><h3 id="update">  UPDATE </h3><br><p>  I ran in a circle, and now I can say with confidence that the proposed <a href="https://habrahabr.ru/post/323846/">method of optionally screwing SSR</a> to the SPA is the most correct ( <a href="https://github.com/facebookincubator/create-react-app/pull/172">Wishlist formulated a long time ago</a> ). </p><br><p>  I was happy when I sat on the CRA.  Until then, until I read " <a href="https://habrahabr.ru/post/323458/">What to base React applications</a> on."  And then continuous struggle with the complexity of the environment.  I read issues - the head swells. </p><br><p>  All researched solutions offer their bikes for routing, which can already be thrown away - the latest version of React-Router implements the <a href="https://reacttraining.com/react-router/web/guides/server-rendering">functionality for SSR</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/325088/">https://habr.com/ru/post/325088/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325076/index.html">We start the flow velocity sensor</a></li>
<li><a href="../325078/index.html">MEPhI organizes information security competition for students</a></li>
<li><a href="../325080/index.html">How to let cryptographers sink a company</a></li>
<li><a href="../325082/index.html">Terminal graphics</a></li>
<li><a href="../325084/index.html">Test items. Opinions and speculations</a></li>
<li><a href="../325090/index.html">We start VMWare ESXi 6.5 under QEMU hypervisor</a></li>
<li><a href="../325092/index.html">Several arguments against Dependency Injection and Inversion of Control</a></li>
<li><a href="../325094/index.html">‚ÄúPresent documents‚Äù or what will help to recognize a passport</a></li>
<li><a href="../325096/index.html">Kaggle: British satellite imagery. How we took the third place</a></li>
<li><a href="../325098/index.html">A new record in speech recognition: the error rate of the algorithm is reduced to 5.5%</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
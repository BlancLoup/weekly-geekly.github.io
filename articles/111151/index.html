<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Stacking JavaScript programming language in 34 lines</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Information for those who do not know what a stack language is: 
 The next line is despicably copied from Wikipedia 
 A stack programming language is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Stacking JavaScript programming language in 34 lines</h1><div class="post__text post__text-html js-mediator-article"><img src="http://art543484.narod.ru/img.svg"><br><h5>  Information for those who do not know what a stack language is: </h5><br>  The next line is despicably copied from <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B5%25D0%25BA%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B9_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA">Wikipedia</a> <br>  A stack programming language is a programming language in which a machine model of a stack is used to transfer parameters. <br><br><h5>  About language </h5><br>  The language will be very simple, for example, functions can take only one parameter, but nevertheless there will be a possibility of pattern matching.  There is only one type, namely a number. <br><br>  The mapping function will be defined as follows: <br> <code>value name = operations</code> <br>  Where value is a pattern to match, a operations is a function body. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If a function is defined without matching, it will be written as follows: <br> <code>name = operations</code> <br>  But in the function body, you can use the constant op whose value is the operand with which the function, that is, the top of the stack, was called. <br><br>  To put a value on the stack, simply enter a number. <br><br>  And in order to translate the top element of the stack into a variable, you need to write: <br> <code>-&gt; name</code> <br>  From standard operation will be only + - * / <br><br>  So for example, the function of increasing the element from the top of the stack to 1 will be written as: <br> <code>++ = op 1 +</code> <br> <br>  But for the implementation of the function factorial will require a comparison with the sample and the code will be: <br> <code>0 ! = 1 <br> ! = op 1 - ! op *</code> <br> <br><habracut text="&quot;--"><br><br><h5>  Implementation </h5><br>  Only the interpreter will be written, which will be implemented as a context. <br>  Work with this context will be carried out by a separate script.  The details of which we will not go.  I can only say that it displays the top of the stack or 'nil' in the "console" <br><br><h6>  The first steps </h6><br>  First of all, we, as it should be, describe the context as a constructor and denote it HContext <br><br> <code>HContext = function(){ <br> this.stack = []; // <br> this.vars = []; //  <br> this.funs = []; // <br> <br> }</code> <br> <br>  Then we will create the most important function 'run' whose argument will be the code, and the function itself will divide it into lexemes and then if it turns out that this function definition it will call the necessary function, otherwise it will call the function of code execution. <br><br> <code>this.run = function(code){ <br> lexems = code.split(' '); <br> if(lexems.oneOf('=')){ <br> this.define(lexems);}else{ <br> this.exec(lexems,'');}} <br></code> <br>  <b>Note:</b> those who carefully read the code may have noticed the oneOf method, this is a method from the so-called extend.js that I wrote after I read the phrase ‚ÄúIf you need something but you don‚Äôt have it, create it yourself.‚Äù further functions from this library will also be applied. <br><br>  Now we write the exec function that will execute the code.  At the very beginning, if the op argument is not defined, then we assign the value 3 to it. <br><br>  Then we will create a loop that will walk along an array of tokens and, depending on the token, perform various operations. <br>  If this is 'op', put the value of op on the stack. <br>  If this number - put it on the stack. <br>  If there is a variable with this name - put its value on the stack. <br>  If there is a function with that name, call it.  Call function <br>  If one of the mathematical operation - call it.  MathOp function <br>  And if it is -&gt; we will increase the counter by 1 and assign a variable whose name is the current token value from the top of the stack. <br><br> <code>this.exec = function(code,op){ <br> op = op || 0; <br> for(var cp=0;cp&lt;code.length;cp++){ <br> if(code[cp]=='op'){this.stack.push(op)} <br> else if(code[cp].isNum()){this.stack.push(parseFloat(code[cp]))} <br> else if(this.vars[code[cp]] != undefined){this.stack.push(this.vars[code[cp]])} <br> else if(this.funs[code[cp]] != undefined){this.call(code[cp])} <br> else if(this.mathOps.oneOf(code[cp])){this.mathOp(code[cp])} <br> else if(code[cp] == '-&gt;'){cp++;this.vars[code[cp]]=this.stack.pop();}}}// <br></code> <br><br><h5>  Mathematical operations </h5><br><br>  Create an array with possible mathematical operations. <br> <code>this.mathOps = ['+','-','*','/'];</code> <br> <br>  And now we define the function.  which will take the top two values ‚Äã‚Äãfrom the stack and put the result of the operation on top of the stack. <br><br> <code>this.mathOp = function(op){ <br> nums = [this.stack.pop(),this.stack.pop()]; <br> this.stack.push(eval(nums[1] + ' ' + op + ' ' + nums[0]));}</code> <br> <br><h5>  Functions </h5><br>  And now let's talk about functions, as has already been said, there will be comparisons, but its implementation will be very simple due to a simple function storage model. <br>  Functions will be stored in the list of funs, and at the same time each function will be a list in which the element with the key 'op' will be a function without a match, and all the others will be with a match and the key will be the pattern for matching. <br><br>  We write a method for determining the function: <br><br> <code>this.define = function(code){ <br> eq = code.pos('='); //    <br> op = code[eq-2] || 'op'; //      2   =      'op' <br> name = code[eq-1]; //      1 <br> cmds = code.slice(eq+1); //        1  <br> if(this.funs[name] == undefined){this.funs[name] = [];} //     ,   <br> this.funs[name][op] = cmds; //     }</code> <br> <br>  And now we will call functions, for this purpose we will select the call method (Most, and especially assembler programmers will not find the name exactly funny) <br><br> <code>this.call = function(fun){ <br> op = this.stack.pop(); //  <br> cd = this.funs[fun][op] || this.funs[fun]['op']; //       <br> this.exec(cd,op);} //   </code> <br> <br><h5>  Try: </h5><br>  The pseudo-console is <a href="http://art543484.narod.ru/h.html">here</a> .  Examples are also located there. </habracut></div><p>Source: <a href="https://habr.com/ru/post/111151/">https://habr.com/ru/post/111151/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111143/index.html">Polish reverse record in assembly language with syntax AT & T</a></li>
<li><a href="../111146/index.html">Amateur astronomer discovered four exoplanets using two home PCs</a></li>
<li><a href="../111147/index.html">Apple accused of passing user information to third parties</a></li>
<li><a href="../111148/index.html">Practical advice for those who want to build a web community Part 5</a></li>
<li><a href="../111149/index.html">Recover saved password pppoe session from router</a></li>
<li><a href="../111153/index.html">Android naming tips</a></li>
<li><a href="../111155/index.html">MODx - own ajax calendar of events / news without Ditto</a></li>
<li><a href="../111156/index.html">Fighting cheating in games where standard tools do not help</a></li>
<li><a href="../111157/index.html">CssUserAgent library</a></li>
<li><a href="../111158/index.html">Time Series Prediction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
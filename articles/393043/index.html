<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wiren Board 5: Now Outdated Automation Controller Version</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 We did not write for a long time on Habr (  which is not the same  ), but at the end of last year they released a new version of Wiren Board ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wiren Board 5: Now Outdated Automation Controller Version</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/538/c9f/b5a/538c9fb5a58894c97e57f69b168e8020.jpg" width="600"><br><p>  Hello! <br>  We did not write for a long time on Habr ( <del>  which is not the same </del>  ), but at the end of last year they released a new version of Wiren Board - a controller for automation with open software, and today we will tell about it <em>(there is a discount under the cut!)</em> <a name="habracut"></a></p><br><h3 id="zachem-my-vypustili-novuyu-versiyu">  Why we have released a new version </h3><br><p>  To correct what the users did not like, and we ourselves: </p><br><ul><li>  doubled the amount of RAM - from 64 to 128 MB DDR2, at the same time expanding the operating temperature range to -25 .. + 85 ¬∞ C </li><li>  replaced a potentially unreliable microSD memory card as a ROM with built-in eMMC 4 GB memory </li><li>  made the controller modular - you can add functions by installing expansion cards inside the case, and also increase the number of inputs and outputs by connecting side modules </li></ul><br><p>  We also added some fashionable chips: </p><br><ul><li>  Bluetooth 4.0 (including Low Energy) </li><li>  CAN port </li><li>  infrared port </li><li>  S / PDIF (digital sound) </li></ul><br><p>  About this (and about important changes in software) in more detail below. </p><br><h3 id="opisanie-ustroystva">  Device description </h3><br><p>  In short, Wiren Board 5 is a device that acts as a central controller in an automation or monitoring system. </p><br><p>  For example, in a "smart home" controller can control the lighting and climate control, take readings from climate sensors and security sensors.  For this, the controller can work with different external devices, it can execute different rules and scenarios, it is engaged in saving and visualizing data. <br>  In typical scheduling and monitoring tasks, the controller acts as an advanced data acquisition device: it collects data from various devices, such as metering devices, stores local history, shows a mnemonic for local control, and sends data up. </p><br><p>  The controller is built on a <abbr title="By the standards of embedded of course">powerful processor</abbr> , running Linux, has many built-in wired and wireless interfaces and ports for communication with external devices and the outside world. <br>  Naturally, all this is industrial-grade: a DIN rail housing, a large input power range, a wide temperature range, reliable memory, protection of all ports, etc. </p><br><p>  The pictures below show what is in the controller: </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/b66/208/383/b6620838396277435d513db4222c5f18.png" height="300"><img src="https://habrastorage.org/getpro/geektimes/post_images/eb0/2f5/885/eb02f5885763230612e443dc4f0799d9.jpg" align="right" height="300"></p><br><div class="spoiler">  <b class="spoiler_title">Full specifications</b> <div class="spoiler_text"><ul><li>  The operating system is Debian Linux 7.0.  Web interface and automation software included. </li><li>  Processor and memory: 454 MHz ARM9, 128 MB DDR2, 4 GB eMMC </li><li>  Wireless connection: <br><ul><li>  GSM / GPRS </li><li>  Wi-Fi </li><li>  Bluetooth 4 </li><li>  radio 315/433 MHz (optional) </li><li>  Z-wave (optional) </li><li>  IR port (external transceiver) </li></ul></li><li>  Ports: <br><ul><li>  Ethernet 10/100 </li><li>  USB 2.0 </li><li>  RS-485 <strong>x 2</strong> </li><li>  CAN </li><li>  1-wire </li></ul></li><li>  Audio output: Toslink S / PDIF or RCA. </li><li>  Inputs / outputs (multiplexed): <br><ul><li>  4 ADC inputs </li><li>  1 input for resistive sensors </li><li>  5 digital inputs </li><li>  4 outputs ‚Äúopen collector‚Äù </li></ul></li><li>  2 slots for expansion modules: <br><ul><li>  ADC, DAC, RS-232, etc. </li></ul></li><li>  up to 8 I / O modules: relays, "dry contacts", etc. </li><li>  Body: 103x87x20 mm, on DIN rail </li><li>  Operating conditions: -25..70 ¬∞ C, relative humidity up to 95% without moisture condensation </li><li>  Watchdog, speaker, real-time clock RTC </li><li>  Built-in Li-Ion battery (optional) </li></ul></div></div><br><h3 id="vnutrennie-moduli-rasshireniya">  Internal Expansion Modules </h3><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c0d/952/dc6/c0d952dc6e3d067e76219fe7eac25f81.jpg" height="200"><br><p>  Modular design always has both advantages (flexibility for a specific task) and disadvantages (cost increase).  But modularity greatly accelerates the release process with minor modifications.  Production of the controller, even with small changes in the PCB, is troublesome for several months.  It is quite another thing to install a small scarf inside the case. <br>  In the previous version of the controller there was one slot for the expansion module.  In Wiren Board 5, modules are installed vertically inside the case, therefore there is room for two modules.  The I2C, SPI, and UART interfaces are output to the module connector.  The pinout of the connector is close to the pinout of the Raspberry Pi, which allows you to install some shields.  In addition, three terminal blocks are allocated for each expansion module: if, for example, you decide to add an RS-485 port, you will not have to pull the bus wires to the module's shawl inside the case ‚Äî you can clamp them into ordinary terminal blocks.  Already have modules: </p><br><ul><li>  RS-232 </li><li>  CAN (Isolated) </li><li>  RS-485 (Isolated) </li><li>  ADC - voltage inputs, 0-20mA inputs, inputs for PT100 and PT1000 sensors </li><li>  DAC - Outputs 0-10V </li><li>  dry contact inputs </li><li>  GPS / GLONASS </li><li>  microSD connector </li></ul><br><h3 id="stykuyuschiesya-moduli-vvoda-vyvoda">  Coupled I / O modules </h3><br><img src="https://habrastorage.org/getpro/geektimes/post_images/cd9/7a9/7dc/cd97a97dc0217414ecb02e12647e284a.jpg" width="600"><br><p>  For any wired installation, the controller must have many inputs (inputs of switches, motion sensors, openings, alarms) and outputs (separate control of each lamp or actuator).  In this case, the desired set of contacts varies greatly. <br>  Previously, our only solution for this was RS-485 peripheral devices.  But there is a lot of trouble with them - a separate physical connection is required, a separate power supply, the device address must be set in the software. <br>  Therefore, we made the side I / O modules for Wiren Board 5, which are installed very simply - dock with the controller on the DIN-rail and immediately work.  In total, you can connect up to 8 modules: up to 4 input modules and up to 4 output modules.  If the assembly does not fit into the cabinet in width, you can use a special cable to transfer the modules to the next rail. <br>  Since the modules do not have built-in logic, they are noticeably cheaper than external RS-485 Modbus devices: for example, the additional 8 relay outputs now cost 2,200 rubles. </p><br><div class="spoiler">  <b class="spoiler_title">How it works inside</b> <div class="spoiler_text"><p>  The modules are connected to the processor via the I2C bus, and their signals are processed by the driver in the Linux kernel by interrupt.  Due to this, the delay between, for example, triggering an input on an expansion module and detecting a signal in the software does not exceed 1ms, which is two to three orders of magnitude faster than when working on Modbus. </p></div></div><br><p>  Now there are five modules available: </p><br><ul><li>  digital inputs for connecting "dry contacts" with group galvanic isolation </li><li>  220V digital inputs </li><li>  relay output module (10A ~ 230B) </li><li>  I / O module with TTL levels (5V, up to 20mA) - in fact, additional GPIO </li><li>  discrete output module.  It contains 8 outputs of the type "High Side Switch" - when the channel is turned on, the Vin voltage is applied to the terminal.  Designed to control relays, low voltage motors, etc. </li></ul><br><h3 id="infrakrasnyy-port">  Infrared port </h3><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/8ef/3f3/24f/8ef3f324f6de30e076211e977cd0632c.jpg" width="200" align="right">  Many household devices are controlled by remote controls (for example, for most household air conditioners, this is generally the only way to turn off the power).  We have added a port for external remote IR receiver / transmitter to Wiren Board 5. <br>  Unfortunately, the finished transceiver could not be found.  Separately available receivers and transmitters with a 3.5 mm jack connector, but fortunately they have a good pinout ‚Äî you can connect both to one connector. <br>  For convenience, we have developed our transceiver, with parasitic power supply of the receiver chip.  With it, you can receive signals from the consoles (and use them in your rules - read about them below), and you can also send signals to your home appliances. </p><br><h3 id="soft">  Soft </h3><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/b7f/f96/a2f/b7ff96a2f6b30cac758346eb27ed96d9.png" width="400" align="right">  The software component of the controller is also greatly improved.  Recall that the Wiren Board controllers have the Linux operating system Debian, and all the special software of our development is open and available in the Github repository for study. <br>  All configuration is now going through a web interface. <br>  We also added drivers for the most popular electricity meters with RS-485 interfaces - Mercury 230 and Milur 305, support for IVTM sensors and <a href="http://contactless.ru/wiki/index.php/%25D0%259F%25D0%25BE%25D0%25B4%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B6%25D0%25B8%25D0%25B2%25D0%25B0%25D0%25B5%25D0%25BC%25D1%258B%25D0%25B5_%25D1%2583%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B9%25D1%2581%25D1%2582%25D0%25B2%25D0%25B0">various other devices</a> .  When connecting them (as well as connecting our peripherals), you just need to select the device name in the list and enter its address: </p><br><h3 id="sistema-pravil">  Rule system </h3><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/47c/7a2/417/47c7a2417965e88bf3e7273a631d9bf9.png" width="400" align="right">  Many changes have been made to the rules engine (we call it <em>wb-rules</em> ).  It allows users to write scripts in JavaScript.  The fulfillment of the rules is tied either to the time (according to the schedule), or to the fulfillment of certain conditions (the temperature sensor showed above 25 ¬∞ C, the motion sensor was triggered, etc.).  From the rules, you can control all the outputs of the controller and expansion modules (for example, switch relays), as well as send commands via RS-485, send SMS or email notifications. <br>  Rules are created entirely through the controller web interface. <br>  To make it easier for you to understand the rules language, we constantly replenish the <a href="http://contactless.ru/wiki/index.php/%25D0%2594%25D0%25B2%25D0%25B8%25D0%25B6%25D0%25BE%25D0%25BA_%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D0%25BB_wb-rules">section with examples in the documentation</a> , and some users share their rules on <a href="http://forums.contactless.ru/t/dvizhok-pravil-primery-koda/483/8">our forum</a> . </p><br><h3 id="modul-opovescheniy">  Alert module </h3><br><p>  A separate very frequent type of rules - just sending a notification in some abnormal situation.  In order not to write a special rule for this, we made a separate Alarms module, which is very easy to configure: you select a parameter to monitor, a trigger condition (for example: the temperature sensor exits the specified limits, the motion sensor triggers), the action (sending SMS or email), alert text. </p><br><h3 id="kak-kupit-wiren-board-deshevle">  How to buy wiren board cheaper </h3><br><p>  The first buyers of the first versions of Wiren Board were enthusiasts from Habr.  Unfortunately, the price of hardware and software increased simultaneously, especially in rubles. </p><br><p>  It seems that we have figured out how to meet the community again and, at the same time, not to go bankrupt ourselves.  It turned out something like group purchases: in the near future, we are launching another batch into production, and if you join it (on pre-order conditions), then we will give you a discount.  For us it turns out as if a wholesale order, respectively, we give a wholesale discount and a little more on top, for a total of <strong>20%</strong> . </p><br><p>  To participate in pre-order, enter the code <strong>WB5-APR16-HABR</strong> when buying in our online store. <br>  We collect pre-orders before May 1, devices will be ready no later than June 15.  In this case, the stock of controllers is in stock right now, but they are sold from stock without discount. </p><br><h3 id="stay-tuned">  Stay tuned </h3><br><p>  In the near future, in our blog, we plan to tell you more about the hardware of Wiren Board 5, about new peripherals, show how to use our software, etc. </p><br><p>  References: <br>  <a href="http://contactless.ru/wiren-board-5/">Page Wiren Board 5 Online</a> <br>  <a href="http://contactless.ru/wiki/index.php/Wiren_Board_5">Documentation</a> <br>  <a href="http://forums.contactless.ru/">Community</a> </p><br><div class="spoiler">  <b class="spoiler_title">Our previous articles on Habr√©</b> <div class="spoiler_text"><p>  <a href="https://habrahabr.ru/company/contactless/blog/257977/">Wiren Board 4 - controller for automation</a> <br>  <a href="https://habrahabr.ru/company/contactless/blog/258677/">How to build a smart home</a> <br>  <a href="https://habrahabr.ru/company/contactless/blog/255657/">Our devices to control the lighting in the smart home</a> <br>  <a href="https://habrahabr.ru/company/contactless/blog/259493/">Monitoring Server with Wiren Board NetMon-1</a> <br>  <a href="https://habrahabr.ru/company/contactless/blog/213243/">Our controller for smart home</a> </p></div></div><br><p>  We welcome comments! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/393043/">https://habr.com/ru/post/393043/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../393029/index.html">Domestic electronic library "CyberLeninka" goes global</a></li>
<li><a href="../393031/index.html">Telegram began to accept complaints holders on bots</a></li>
<li><a href="../393033/index.html">Lytro announced the world's first 755 megapixel photo-video camera for film studios using light field technology</a></li>
<li><a href="../393035/index.html">Scientists are close to creating male medicinal contraceptives</a></li>
<li><a href="../393041/index.html">Astronomers explain where you can find intelligent life in our galaxy</a></li>
<li><a href="../393045/index.html">The conditions under which the financiers work: A tour of the offices of Goldman Sachs and Bloomberg</a></li>
<li><a href="../393047/index.html">Real virtuality yesterday, today and tomorrow</a></li>
<li><a href="../393049/index.html">A possible collision of a passenger liner with a drone investigates the police in the UK</a></li>
<li><a href="../393051/index.html">Criminal programming. Blackhole developers got 5.5 to 8 years in colonies</a></li>
<li><a href="../393053/index.html">Face the Earth and Uranus? Nothing is easier - use the Universe Sandbox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
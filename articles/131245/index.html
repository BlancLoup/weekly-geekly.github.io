<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Klocwork - two week test experience</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I did not have time to share my impressions of PVS-Studio, as the advertising charges immediately followed. Well, I will tell about my first experienc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Klocwork - two week test experience</h1><div class="post__text post__text-html js-mediator-article">  I did not have time to <a href="http://habrahabr.ru/blogs/code_review/135397/">share my impressions</a> of PVS-Studio, as the advertising charges immediately followed.  Well, I will tell about my first experience of using systems of static code analysis. <br><br>  It so happened that the first system I encountered was Klocwork.  It happened 8-9 years ago, when I worked in the Ukrainian branch of a Slovenian company.  Then the analyzer was launched at the head office, we only got the results exported to Excel.  But even in this form, I remember, I was pleasantly surprised by how well the potential (and sometimes real) problems were. <br><br>  And so (already back in 2010), having seen the stand of Klocwork itself on the Embedded World, I came up to ask them about the trial license for ‚Äútry‚Äù.  After some time I received from them an e-mail with the question: "Are you interested, still want?". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  And then I just got a ‚Äúlegacy‚Äù of a decent amount of code, which, to put it mildly, was ... a little crookedly written.  Yes, and the project was in the ‚ÄúFirst Release Released‚Äù stage, there was just time to look for possible problems. <br><br>  Therefore, willingly agreed.  I received a trial installation and integration instructions.  I will only note that if integration with VS went off with a bang, in one click, then the integration with FreeScale's CodeWarrior made me sweat both me and technical support (which, to their credit, tried their best to help me by e-mail, while that the product was a trial, without any guarantee that it will be bought!).  As a result, after two weeks of attempts, integration was still done (manually - too, CodeWarrior turned out to be a thing in itself).  And finally, a license was obtained for two weeks, allowing you to do something for which everything was started - static code analysis. <br><br>  In a nutshell about the system itself - there is a central server on which the so-called are started  ‚ÄúBuilds‚Äù, and there are web clients that can view the results of each ‚Äúbuild‚Äù analysis in the browser.  The license must be purchased both on the server and on each client.  And the license is limited in time.  When purchasing 20 client licenses, the server one is free of charge, such a package was obtained at a price of about 30 thousand euros per year. <br><br>  I was very pleasantly surprised by the results. <br><br>  In the ‚Äúfirst release released‚Äù stage, the analyzer found 73 potential problems in three projects! <br><br>  There were only 6 false positives. <br><br>  Here is a list of problems found (which were actually present in the code): <br><ul><li>  no explicit assignment statement or copy constructor for classes using dynamic memory; </li><li>  buffer overflow; </li><li>  memory leaks; </li><li>  dereferencing an uninitialized pointer; </li><li>  use of an uninitialized variable; </li><li>  null pointer dereference; </li><li>  memory use after release. </li></ul><br>  It is clear that we are not talking about the problems that really happen, in most cases we are talking only about potential problems. <br>  Here is an example of (almost real) code in which the analyzer shows the possibility of a buffer overflow: <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> len, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * buf)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> data[DATA_SIZE]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; len; ++i) { data[i] = buf[i]; } }</code> </pre> <br>  For the code above, the analyzer displays the message ‚ÄúBuffer overflow: array of data‚Äù.  Array 'data' of size 260 may use index values ‚Äã‚Äãfrom 260..65534 " <br><br>  Specifying a detailed path from the beginning of the problem function through all possible branches, along with what values ‚Äã‚Äãthe variables should have at each branch point, so that <br>  The specified problem happened. <br><br>  With convenient syntax highlighting and problem areas, with an adequate response to a click almost everywhere, it is very easy to find and understand exactly where the problem is and how exactly it can happen. <br><br>  Unfortunately, I can not post screenshots, because  they are all made on a real project and a real code, which cannot be shown in the public domain: (While doing the same report for the management two years ago, I did not take care to stock up on screenshots of the dummy code for a possible open publication. <br><br>  In the above example, no real buffer overflow occurred - in all function calls the correct value of the parameter len was passed.  The analyzer found in this case <br>  only a potential problem. <br><br>  But - if you are not the first year in IT, then you certainly know that with each new potential problem like this, the likelihood that one of them after another code change <br>  It turns from potential to real (having provided a couple of pleasant weeks of debugging of the project that suddenly fell on the final demonstration at the customer), very quickly reaches a value close to one. <br><br>  And from the "goodies" of this code analyzer: <br><br><ul><li>  Ability to track every problem found.  Those.  if the problem has been fixed, the analyzer will detect it in the next build and will not show it anymore.  And it will also reflect this on a beautiful graph of the number of problems that have appeared, remained-corrected from build to build. </li><li>  The ability to change the status of each problem.  Those.  if you find that this is a false positive, you can mark it as ‚Äúno problem‚Äù, and the analyzer will not show it to you anymore. </li><li>  The possibility of appointing a person responsible for each issue. </li><li>  Ability to build code metrics (and display trend graphs from build to build). </li><li>  The ability to export results to Excel.  In this case, very convenient interactivity disappears, but all the necessary information in order to find and fix problems remains.  Conveniently, if there is no ‚Äúextra‚Äù license. </li><li>  Customizable reports - you can choose what to show in the reports. </li></ul><br>  The analyzer supports C / C ++, C #, Java, although I only tested the C / C ++ part. <br><br>  Can I do without such a utility?  It is possible, if everyone who writes C / C ++ code has read and understood all Myers, while constantly keeping his recommendations in mind and are able to quickly identify violations of these recommendations in an already written code.  In reality, it seems to me, oh, this is unrealistic.  And the use of such a tool is very able to help identify errors and potential errors almost immediately after they occur. <br><br>  The price ... Yes, the price is definitely high.  But for a large company, simultaneously leading 20 or more projects, the price when buying the most profitable package, in terms of the project will not be so high.  Yes, and certainly the originally named price is far from final and can be lowered by negotiation if it comes to a real purchase.  If we also take into account that one such potential problem, which at one fine moment became real, can easily ‚Äúeat‚Äù two or three weeks of the work of the lead programmer (or even not one), and even worse (if it ‚Äúcrawls out‚Äù after release) can lead to a very, very tangible loss, far exceeding the cost of the analyzer ... <br><br>  In my case, the leadership failed to convince.  Well, at least on one of the projects there were few potential problems, and I got an interesting experience :) <br><br>  And yes, both this post and the post about PVS-Studio are written solely out of interest to the topic.  Neither in this, nor in that case did I receive any material compensation from the authors for writing the review, if someone suddenly doubts my impartiality. </div><p>Source: <a href="https://habr.com/ru/post/131245/">https://habr.com/ru/post/131245/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131239/index.html">Ubuntu, email client for MS Exchange 2007</a></li>
<li><a href="../131240/index.html">Using HSQLDB + DBUnit for Unit-testing Java code that works with databases</a></li>
<li><a href="../131241/index.html">Is it possible to filter spam sites in a search engine?</a></li>
<li><a href="../131243/index.html">Word vs bitcoin</a></li>
<li><a href="../131244/index.html">Hard drive market under threat of significant decline due to flooding in Thailand</a></li>
<li><a href="../131246/index.html">Features and benefits of free cooling technology in the EcoBreeze data center cooling system</a></li>
<li><a href="../131247/index.html">We share cases of participation in exhibitions. # 1 Game money changer</a></li>
<li><a href="../131248/index.html">Doppler effect in networks: GSM, 3G, 4G</a></li>
<li><a href="../131249/index.html">Examples of working with different map API</a></li>
<li><a href="../131251/index.html">The "bright" future of wireless technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
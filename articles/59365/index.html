<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Online Database, data structure service, dynamic object-relational projection (Dynamic ORM)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article will focus on creating a working prototype of an on-line database. And considered some of the services analogues from Google and Yahoo. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Online Database, data structure service, dynamic object-relational projection (Dynamic ORM)</h1><div class="post__text post__text-html js-mediator-article">  This article will focus on creating a working prototype of an on-line database.  And considered some of the services analogues from Google and Yahoo. <br><br>  In recent times, services for working with online databases have become more active.  Such services include such platforms as GData (Google Data API) and Yahoo!  Query Language (YQL). <br><br>  These online database access services allow you to better control and operate on data obtained from different platform services, and the most important thing is ready-made services for the use of which it suffices to study the documentation and examples. <br><a name="habracut"></a><br><h2>  Google Base API + Google Data Table API </h2><br>  Google‚Äôs online data access service allows 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - request, enter and manage data programmatically to create applications and mashups; <br>  - allows you to view and update the contents of spreadsheets in the form of Google data feeds (‚ÄúGData‚Äù); <br>  - the client can request a list of user tables, as well as present, edit or delete content in an existing table; <br>  - apply autofiltering and other functions of the tables in the application. <br><br>  For convenient work with the above services, Google has developed its own SQL-like query language Google Visualization API Query Language. <br><br><h2>  Yahoo!  Query Language </h2><br>  Query language to retrieve data from Yahoo! Data arrays .. An SQL-like query language for working with web services from Yahoo! .. Query results can be obtained in XML or JSON formats. <br>  Here is what Jonathan Trevor, head of development at YQL Execute, says: <br>  ‚ÄúDevelopers can now call multiple services at the same time and operate on multiple data sources, making their applications more powerful and diverse.  Received from Yahoo!  data can be real-time recoded from one format to another. ‚Äù <br><br>  YQL makes it easy to handle data using SQL with a similar syntax.  For example, you want to select photos in Paris, France that have a Creative Commons Attribution (4) license: <br><br>  select * from flickr.photos.info where photo_id in (select id from flickr.photos.search where woe_id in (select woeid from geo.places where text = 'paris, france') and license = 4) <br><br>  Data tables can be formed and stored using the ‚ÄúOpen Table‚Äù service.  The service is quite interesting, but the description is still very small. <br><br><img src="http://code.hivext.ru/resources/images/str1.png" alt="image"><br><br>  The above services will allow access and online manipulation of data tables, which is vital for many applications.  After analyzing the above services and a number of other similar services, we implemented a similar service for working with data tables.  However, it has a specific distinguishing feature.  Let's take a closer look at our development right from the inside. <br><br><h2>  Hivext structure service </h2><br>  API documentation <a href="http://www.hivext.ru/index.php/%25D0%25A1%25D1%2582%25D1%2580%25D1%2583%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D1%258B">www.hivext.ru/index.php/Structures</a> <br><br>  One of the extremely necessary for flexible and convenient development of applications based on the platform is service structures.  A distinctive feature of our development is the object approach in the implementation of such a service.  In order to provide all the advantages of an object-oriented approach to building applications that has been proven over the years, the service was designed with a maximum ‚Äútilt‚Äù in the direction of the OOP (Object Oriented Design).  Due to this, the structure service allows developers to create their own applications in the OOP style, allows you to manipulate and control the types and objects of the developed applications. <br><br><h3>  General characteristics of the service </h3><ul><li>  Service and data are available on any platform and device where HTTP requests are supported (directly to the database can also be accessed from Javascript, Actionscript and other client programming languages); </li><li>  Object relational projection (ORM) of the created objects in the database tables; </li><li>  Service and data are available on any platform and device where HTTP requests are supported; </li><li>  Unlimited database volumes for applications; </li><li>  Work with the database at the level of types and objects, flexible data management through service methods. </li></ul><br>  The structure service is intended for defining types and creating instances of types (objects).  The approach to creating your objects is quite simple and familiar.  To create a collection, a set of any objects, it is necessary to determine the type of future objects.  Defining a type means defining fields that future objects must contain.  In turn, the definition of a type field means specifying the name of the field and the simple base type of this field.  There are predefined simple types in the structure service, based on which developers can create their more complex types. <br>  List of simple types that are predefined in the structure service <br><ul><li>  string / String - length 255 characters (default type) </li><li>  string (N) / String (N) - N any integer (from 1 to 10240 characters) </li><li>  text / Text is a text data type, can contain a maximum of 65000 characters. </li><li>  mtext / Mtext is a text data type, can contain a maximum of 16000000 characters. </li><li>  short / short </li><li>  int / int / integer / integer </li><li>  long / Long </li><li>  bool / Bool / boolean / Boolean </li><li>  float / float </li><li>  double / Double </li><li>  char / char </li><li>  byte / byte </li></ul> The list of certain types may be further expanded with additional types. <br><br>  Based on the above types, developers can create their own more complex types.  Let's look at an example.  Suppose we need to create a book online store.  One of the required objects of our application will be a product-book, which we sell.  We define the type for our book objects.  To define a type, use the <b>DefineType</b> method <b>(appid, session, type, fields)</b> <br><br>  Regarding our books, we will call the method with the following parameters. <br><br>  <b>DefineType (appid, session, ‚Äúbook‚Äù, {price: ‚Äùfloat‚Äù, name: ‚Äùstring‚Äù, description: ‚Äùstring (500)‚Äù, author: ‚Äùstring (100)‚Äù})</b> <br><br>  Thus, we have defined the type <b>book</b> , which has <b>price</b> fields ‚Äî the price of the book, <b>name</b> ‚Äî the name of the book, <b>description</b> ‚Äî description of the book, <b>author</b> ‚Äî author of the book. <br>  Then we can safely create instances of this type, i.e.  objects are books.  To do this, use the method <br><br>  <b>CreateObject (appid, session, type, data)</b> <br><br>  Regarding our <b>book</b> type, call the method with the following parameters <br><br>  <b>CreateObject (appid, session, ‚Äúbook‚Äù, {price: 10.5, name: ‚ÄúWeb Application Development‚Äù, description: ‚Äùabout designing and developing complex one-page application sites‚Äù, author: ‚ÄúKnow-it-all I.‚Äù})</b> <br><br>  Upon successful creation of the object, in the response we get the identifier of the new object. <br>  Now we have the first object of type <b>book</b> .  Further, in a similar way, we create the set of objects necessary for our online store. <br><br>  <b>CreateObject (appid, session, ‚Äúbook‚Äù, {price: 8, name: "Desktop Development", description: "about designing and developing simple desktop applications", author: "EV News"})</b> <br><br>  <b>CreateObject (appid, session, ‚Äúbook‚Äù, {price: 12, name: "Mobile Application Development", description: "about designing and developing applications for mobile phones", author: "Know-it-all I.N.}}</b> <br><br>  And so on.  It's pretty simple! <br><br>  Further, it is necessary to display formatted lists of books available in our store to users.  This is made even easier.  To select a set of objects, two methods of structure service are used. <br><br>  <b>GetObjects (appid, session, type, from, count)</b> <b><br></b>  <b>GetObjectsByCriteria (appid, session, type, criteria, from, count)</b> <br><br>  The <b>GetObjects</b> method <b>is</b> intended for rectilinear sequential selection of objects.  It returns lists of objects that are selected according to their creation sequence.  In other words, select lists of objects sorted in ascending order of identifiers (id).  The parameters from and count indicate from which index to take and how much, these are not required parameters. <br>  Consider an example.  Call the method with the following parameters <b>GetObjects (appid, session, ‚Äúbook‚Äù)</b> <br>  As a result, we get the following answer. <br><br>  <b>{response: 0, book: [</b> <b><br></b>  <b>{id: 1, price: 10.5, name: ‚ÄùWeb Application Development‚Äù, description: ‚Äùabout designing and developing complex one-page application sites‚Äù, author: ‚ÄùI. Know-it-all‚Äù},</b> <b><br></b>  <b>{id: 2, price: 8, name: ‚ÄùDevelopment of desktop applications‚Äù, description: ‚Äùabout design and development of simple desktop applications‚Äù, author: ‚ÄùEVT News‚Äù},</b> <b><br></b>  <b>{id: 3, {price: 12, name: ‚ÄùDevelopment of mobile applications‚Äù, description: ‚Äùabout design and development of applications for mobile phones‚Äù, author: ‚ÄùKnow-it-all I.N‚Äù}</b> <b><br></b>  <b>]}</b> <br><br>  The operation of the <b>GetObjects</b> method <b>is</b> fairly simple and transparent. <br>  Consider the work of the <b>GetObjectsByCriteria</b> method.  A distinctive feature of this method relative to the previous method is the ability to set search criteria for objects.  This method allows you to flexibly form lists of displayed objects. <br>  You can create search criteria using two different syntaxes.  Either using SQL similar commands or using JSONQL syntax.  You do not need to explicitly specify which syntax to form a criterion you use.  The method automatically determines which syntax the developer uses.  Let's look at an example of the same query in SQL and JSONQL syntaxes.  For example, we get a list of books, the price of which is less than 11. <br>  SQL search criteria: price &lt;11 <br><br>  <b>GetObjectsByCriteria (appid, session, ‚Äúbook‚Äù, ‚Äúprice &lt;11‚Äù)</b> <br><br>  JSONQL search term: {price: {'&lt;': 11}} <br><br>  <b>GetObjectsByCriteria (appid, session, ‚Äúbook‚Äù, ‚Äú{price: {'&lt;': 11}}‚Äù)</b> <br><br>  Get a list of books whose authors are Nerdy or Dunno. <br>  SQL search criteria: author author like '% Nerdy%' or author like '% Dunno%' <br><br>  <b>GetObjectsByCriteria (appid, session, ‚Äúbook‚Äù, ‚Äúauthor like '% Nerdy%' or author like '% Dunno%'‚Äù)</b> <br><br>  JSONQL search term: {author: {like: ['% Nerdy%', '% Dunno%']}} <br><br>  <b>GetObjectsByCriteria (appid, session, ‚Äúbook‚Äù, {author: {like: ['% Nerdy%', '% Dunno%']}})</b> <br><br>  You can use both SQL and JSONQL syntax.  Choose what you prefer.  If everything is clear and familiar with SQL syntax, then JSONQL is a unique development that was invented when developing the Hivext platform.  Let's dwell a little more on JSONQL.  The syntax of forming criteria using JSONQL is very flexible and has several variations that are similar in their action.  For a more complete understanding of the syntax of such criteria, consider in detail the principles of the formation of these search criteria.  Since the structure service is implemented on the basis of the Hibernate library, the criteria for searching objects were based on the Hibertnate criteria.  Let's take a look at the implementation of the last example, namely, we will get a list of books whose authors are Nerdy or Dunno.  Hibertnate uses the following syntax to form a criterion. <br>  Criterion criterion = Restrictions.or (Restrictions.like (‚Äúauthor‚Äù, ‚Äù% Nerdy%‚Äù), Restrictions.like (‚Äúauthor‚Äù, "% Dunno%")); <br>  Transform the specified expression in JSONQL syntax.  The join operation according to the OR logic is defined by the array [..., ...].  In this way <br><br>  <b>[{like: {author: '% Nerdy%'}}, {like: {author: '% Dunno%'}}]</b> <br><br>  Everything is quite simple and transparent.  Record almost repeats Hibernate syntax.  Let's consider similar in action possible options for the formation of the criterion. <br><br>  <b>{like: [{author: '% Nerdy%'}, {author: '% Dunno%'}]}</b> <br><br>  Another option <br><br>  <b>{like: {author: ['% Nerdy%', '% Dunno%']}}</b> <br><br>  As you can see, the last option is simplified by the number of characters and readable.  However, there is another option that, according to the author, is even more readable.  Just swap the condition and field name <br><br>  <b>{author: [{like: '% Nerdy%'}, {like: '% Dunno%'}]}</b> <b><br></b>  <b>{author: [{like: '% Nerdy%'}, {like: '% Dunno%'}]}</b> <b><br></b>  <b>{author: {like: ['% Nerdy%', '% Dunno%']}}</b> <br><br>  The last option is the most readable, however, all 6 of the last options examined are working and perform the same action.  Such freedom in shaping the search criteria gives the formation of the criterion great flexibility.  Let's consider the variant with the AND operation. <br>  Get a list of books whose authors are Nerdy and Dunno.  Hibertnate syntax next <br>  Criterion criterion = Restrictions.and (Restrictions.like (‚Äúauthor‚Äù, ‚Äù% Nerdy%‚Äù), Restrictions.like (‚Äúauthor‚Äù, "% Dunno%")); <br>  In JSONQL, the AND join operation is defined by a sequence of single-level objects {...}, {...} <br>  Thus, we get JSONQL syntax: <br><br>  <b>{author: {like: '% Nerdy%'}}, {author: {like: '% Dunno%'}}</b> <b><br></b>  <b>{author: {{like: '% Nerdy%'}, {like: '% Dunno%'}}}</b> <br><br>  Having such an extensive set of possible JSONQL options, as well as the ability to query using standard SQL, we get a very flexible method for querying objects using criteria. <br>  Also in the service of structures there are other methods for managing types and objects. <br>  All methods of service structures can be found in the documentation: <a href="http://hivext.ru/index.php/%25D0%25A1%25D1%2582%25D1%2580%25D1%2583%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D1%258B">hivext.ru/index.php/Structures</a> <br><br><h3>  Console </h3><br>  For convenient development and testing of service methods, there is a developer console <a href="http://code.hivext.ru/development/APIConsole/">code.hivext.ru/development/APIConsole/#Data.Base</a> for testing query criteria <a href="http://code.hivext.ru/development/APIConsole/">.</a> <br><br><img src="http://code.hivext.ru/resources/images/str2.png" alt="image"><br><br>  The console has a list of all existing service methods.  The console can be tried in real work when creating its types and objects. <br><br>  One of the main points in the server implementation of the service structures is the dynamic mapping of the created objects into the database tables.  At definition of types, at change of structure of types on the server automatic generation of classes which describe types defined by the developer is made.  This allows for simple mapping of objects into tables, as well as for inter-linking objects.  All the principles of the implementation and construction of service structures cannot be described in one article.  I will add that the service also has caching, transactions, and ‚Äúlazy‚Äù (lazy) loading of objects, and much more ... <br><br>  Service structures will allow you to conveniently and flexibly determine the object-oriented structure of the developed application.  The specified service has a complete set of methods for creating, editing, deleting and selecting the necessary types and instances of these types (objects).  Also, the service of structures, thanks to the used ORM, allows to abstract from the DBMS and conveniently work with objects.  In combination with the service of access rights, it allows defining the OO application architecture and defining clear access rights for subjects of access to objects. <br><br>  In the next article it is planned to consider the service of access rights, which is also one of the main and critical services for developing full-fledged applications. <br><br>  We hope that the habrasoobshchestvo with understanding will approach to the analysis of the specified services.  Constructive criticism regarding the implementation of such services and the syntax of working with services is welcomed. <br><br>  Documentation for the service structures <a href="http://hivext.ru/index.php/%25D0%25A1%25D1%2582%25D1%2580%25D1%2583%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D1%258B">hivext.ru/index.php/Structures</a> </div><p>Source: <a href="https://habr.com/ru/post/59365/">https://habr.com/ru/post/59365/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../59353/index.html">Port monitoring with system administrator notification</a></li>
<li><a href="../59355/index.html">Zoomer</a></li>
<li><a href="../59357/index.html">Solar Hat Fan - and I Sharp</a></li>
<li><a href="../59362/index.html">Startups during the crisis</a></li>
<li><a href="../59363/index.html">Detailed review of the service: ‚ÄúRent an online store‚Äù</a></li>
<li><a href="../59367/index.html">Thief returns</a></li>
<li><a href="../59369/index.html">Disaster Friendly arcitecture</a></li>
<li><a href="../59371/index.html">Russia defended the champion title in the ‚ÄúBattle of Intelligences‚Äù, which is held with the support of IBM</a></li>
<li><a href="../59373/index.html">Advantages and cost of implementing an Interactive Voice Menu (IVR) system (introductory article)</a></li>
<li><a href="../59375/index.html">Kaspersky Lab neutralizes unique MBR rootkit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
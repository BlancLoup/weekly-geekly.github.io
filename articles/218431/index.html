<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Stock Market Technologies: Brokerage Trading System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Trading on the stock exchange in the 21st century is an extremely high-tech process. In order for an investor to make a deal, various trading terminal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Stock Market Technologies: Brokerage Trading System</h1><div class="post__text post__text-html js-mediator-article">  Trading on the stock exchange in the 21st century is an extremely high-tech process.  In order for an investor to make a deal, various trading terminals are being developed, brokerage systems are being created that can handle a large load, APIs are implemented for them, high-speed communication channels are laid, new technologies are put into operation, etc.  This is not surprising - after all, between success and failure, profit or loss in the stock market is often only a split second.  Therefore, everything should work like a clock and very quickly. <br><br> <a href="http://habrahabr.ru/company/itinvest/blog/218431/"><img src="https://habrastorage.org/getpro/habr/post_images/5ae/5fb/ed2/5ae5fbed27805dfa1517f628536c8e6b.jpg" alt="image"></a> <br><br>  We have already talked about direct connection technologies that are used to send trade orders directly to the exchange, bypassing broker systems.  However, direct access costs a lot of money and is not affordable for all traders who, however less, want to make transactions with maximum speed.  In this topic, we will describe how we implemented a full upgrade of our trading system, which allowed us to create an infrastructure product that meets international standards for stock market technology. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Welcome to the matrix </h4><br>  ITinvest has always been not just a broker that provides customers with the opportunity to trade on the exchange, but also a technological developer of products for trading.  Our founders are people who have had experience in programming and in general have always been associated with technology.  Therefore, part of the company's strategy has always been the development of its own software products. <br><br>  Both money and time have always been invested in this.  As a result, at the beginning of the two thousandths, its own trade system, it-trade, was created, which included modules for processing trade orders, the middle and back office, as well as a digital signature system for security.  In addition, we have created a line of our own trading terminals.  One of them, SmartTrade, has become very popular in the Russian market and, in principle, still remains a reliable and convenient means of bringing trading orders to the market and analyzing the market itself.  Clients could carry out trading operations using the web interface. <br><br>  The system has been operating for more than 13 years and the entire set of software products is objectively outdated.  They were harder to maintain, develop functionality (more than 1 million lines of code in one SmartTrade terminal), besides, the architecture itself also ceased to meet modern requirements - we had two sales desks with servers, and in order to develop the company's business, their the number had to be increased, which would have caused problems with manageability and synchronization. <br><br>  As a result, all efforts were spent on the maintenance and normal functioning of the shopping complex, but it was not a question of developing new products.  The requirements for the speed of work and its quality were constantly growing, and it became increasingly difficult to comply with them within the framework of the old architecture and paradigm.  In addition, in the ‚Äúold‚Äù trading system there was one weak link - its core, the risk management system (RMS), which could not be parallelized and duplicated in principle.  Accordingly, its failure could stop trading. <br><br>  All this has put us in front of the need to create a new trading system that would meet the best international standards.  Due to its matrix structure, as well as due to the fact that the matrix theory was applied in the calculation of risks, the new system was named <a href="http://www.itinvest.ru/promo/matrix/">MatriX</a> , that is, ‚ÄúThe Matrix‚Äù. <br><br><h4>  Architecture </h4><br>  If in the brokerage system of the previous generation, customers received all exchange data (orders, transactions, account status, etc.) connecting to a single access server, then in the Matrix project it was decided to divide these data streams into two main ‚Äúbanks‚Äù: receiving orders (Order Mamagemegent Servers - OMS), and servers providing market data and account information to customers. <br><br>  The complex hardware uses PowerEdge blade servers and PowerVault storage systems from Dell. <br><br><h4>  Technology and iron </h4><br>  In addition to architecture, the quality of the brokerage trading system depends on the quality of software that implements the main functions, as well as the reliability of the hardware on which it works.  In order to be sure that our product really meets international standards, tenders were held among suppliers of both iron solutions and software developers. <br><br>  As a result, the iron part of the new system was provided by Dell, and the software (and some hardware) was supplied by IBM. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd8/7b9/d44/fd87b9d44ed50e5ffaba148c88e3bbb0.jpg" alt="image"><br><br>  <i>Dell PowerEdge Servers</i> <br><br>  Under each of such balancers, there are several more servers that solve local problems.  Client connections are distributed between them so that each server receives the same load. <br><br>  Between themselves and with the exchange trading system, our servers are connected using a special high-speed bus built on IBM Data Power X75 servers and MQ Low Latency Messaging software. <br><br>  <b>An interesting fact:</b> the MatriX project is the first use of these servers in Russia.  By the way, even some problems were connected with this - the United States recognizes these technologies as having a dual purpose.  That is, there is a possibility that someone uses them for military purposes.  Due to the delays associated with all this, the delivery time of the equipment has shifted by as much as six months - and we are lucky that the famous Jackson-Vanik amendment was canceled, otherwise it is unknown how everything would turn out in the end. <br><br>  Behind this bus are already servers of exchange gateways.  Through which of them to send a specific application, or from which of them to take the data, the bus decides on its own.  In principle, this is sufficient for the normal functioning of the entire system, but we also added a risk management server to it, which, unlike the previous system, is no longer the central link, and any problems with it do not cause the entire system to stop. <br><br>  Another innovation is the so-called FIX servers, which allow you to connect to the MatriX TS applications written for the FIX protocol.  We will tell about this decision in more detail in a separate topic. <br><br>  The final system architecture looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/074/620/e46/074620e4699f5b90fe06cbc45086de4f.png" alt="image"><br><br><h4>  What did it do? </h4><br>  Such a ‚Äúmatrix‚Äù approach to building a system allowed reducing damage from possible failures (failure of a particular link does not lead to irreversible consequences), and also allows the system to be easily scaled in the future.  What is most important - dramatically increased the speed of work.  Now the application processing speed in the system ranges from 500 microseconds to 2 - this is a very good result.  The total time it takes for an application to pass from the moment it hits the Matrix to its entry into stock exchange systems is 2 to 5 milliseconds (not including losses on communication channels to the system) - this is about 40/50 times faster than in the system of the previous generation of it- trade | SmartTrade ... <br>  For traders who trade hands, this is certainly not so important, but for algorithmic traders who use robots connected via API is a significant advantage. <br><br>  Among other advantages of the new trading system: <br><br><ul><li>  Increased performance (up to 2000 orders per second in one stream, more than 10 million requests per trading day). </li><li>  Already mentioned access to external systems via OMS-FIX 4.4 Gates. </li><li>  Unified cash position (EDP) and its own risk accounting for customer portfolios. </li></ul><br>  You can use the new trading system when working through the <a href="http://habrahabr.ru/company/itinvest/blog/213825/">SmartX</a> terminal, the new version of the web interface of the trading system or <a href="http://habrahabr.ru/company/itinvest/blog/201702/">the SmartCOM API</a> (version not lower than 3.0). <br><br><h4>  Single cash position </h4><br>  The single cash position service for customers has become one of the main features of the entire new trading system.  Its essence is as follows: <br><br>  When working with the previous version of theit-trade / SmartTrade trading system, the client was provided with a separate personal account for each trading platform.  For example, the Moscow Exchange Stock Market is an MS account;  Derivatives Market of the Moscow Exchange - RF account;  The foreign exchange market of the Moscow Stock Exchange - FX account (non-deliverable) or CD account (deliverable) and others.  With such a division, securities and cash located on the same trading platform cannot serve as collateral for transactions on the other. <br><br>  When using a single cash position, the client is provided with a single account with the MO identifier, which includes several trading platforms at once: <br><br><ul><li>  Moscow Exchange Stock Market (all instruments traded in T + 2 mode). </li><li>  Derivatives Market of the Moscow Exchange (futures, options). </li><li>  Foreign exchange market of the Moscow Exchange (non-deliverable mode). </li><li>  London Stock Exchange section IOB (ADR of Russian issuers). </li></ul><br>  This account becomes the same for all trading platforms, and assets (money, securities) located on the same trading platform of the market can be used as collateral in other markets included in a single cash position.  (You can hear more about the single monetary position in <a href="https://www.youtube.com/watch%3Fv%3DhPvtUU9k4_o">the webinar recording of</a> Vladimir Tvardovsky, Chairman of the Board of ITinvest, starting at 17:01). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c69/cf9/acc/c69cf9acc7188b38149b3ff10293c43d.png" alt="image"><br><br>  The easiest way to understand the benefits of a single monetary position is a simple example.  If in the old trading system it-trade, it would have taken 43,800 rubles to purchase 100 shares of Lukoil (LKOH) as security (the value of the share as of 10/22/2013 was 2030 rubles, the value of the security for the T + 2 market is 438 rubles, <b>100 x 438 - 43500</b> ), and for the sale of 10 <a href="http://habrahabr.ru/company/itinvest/blog/209810/">futures contracts</a> for shares of the same issuer LKOH-12.13 (on the same date, 1 futures cost 20,650 rubles, security - 2,132 rubles) would require <b>10 x 2132 = 21,320</b> rubles.  In total, for the commission of two not very large transactions, the amount of funds required to secure the transaction would exceed 65,000 rubles. <br><br>  In the new trading system, it would be equal to 26,746 rubles.  The difference is quite significant - it turns out that you can manage your own funds more flexibly, they can work, rather than idle in a blocked state as a security. <br><br><h4>  Need for Speed </h4><br>  A single cash position, as you might guess, with all its advantages, may be of interest to traders and traders of any type - from investors who do not make very many deals, to scalpers who do not remove fingers from the keyboard. <br><br>  At the same time, it is obvious that the high-speed advantages of the Matrix trading system most attract high-speed traders (HFT-traders), who trade on the stock exchange using mechanical trading systems.  It is this type of merchants that "makes" most of the turnovers of all popular stock exchanges.  Such traders play a large role in the stock market ecosystem (for more details on trends and prospects for algorithmic trading, read our <a href="http://habrahabr.ru/company/itinvest/blog/207000/">special topic</a> ).  But no algorithmic trading strategy, even the most successful in theory, can work normally in practice unless proper rapid action is ensured. <br><br>  Therefore, both the exchanges and brokers are constantly engaged in the development of their own infrastructure - only in 2010, exchanges, telecommunications companies, algorithmic hedge funds, corporate and private algorithmic traders spent more than $ 2 billion on technical re-equipment to increase trading speed worldwide. <br><br>  Domestic stock exchanges (in particular, Moscow Exchange) also follow this trend.  If in 2010 the execution time of orders in the ASTS trading systems (MICEX stock market) and FORTS (RTS derivatives market) were 5-15 and 15-50 ms, respectively, in 2013 the figures were 0.700 ms and 3-5 ms.  Now the time of the execution of applications in the core of the exchange system does not exceed 50 microseconds. <br><br>  When looking at all these efforts, it is clear that brokers simply do not have the right to lag behind, so a further upgrade and improvement of this link of the chain, which the application passes along the path from the user to the exchange, is simply inevitable. </div><p>Source: <a href="https://habr.com/ru/post/218431/">https://habr.com/ru/post/218431/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218419/index.html">Qt is now on Windows Phone</a></li>
<li><a href="../218421/index.html">Epidemic of online consultants</a></li>
<li><a href="../218423/index.html">Work with ZeroMQ and PostgreSQL in asyncio</a></li>
<li><a href="../218425/index.html">Development of Chromecast Ready applications for the Android platform</a></li>
<li><a href="../218429/index.html">Functional image processing in D</a></li>
<li><a href="../218437/index.html">Terms of Service, Privacy Policy and License Agreement: an educational program for an indie mobile developer</a></li>
<li><a href="../218441/index.html">Universal applications for Windows and Windows Phone</a></li>
<li><a href="../218443/index.html">Epson on Droidcon Moscow</a></li>
<li><a href="../218445/index.html">Product Design Digest February-March 2014</a></li>
<li><a href="../218449/index.html">What do small iron companies need from the state?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
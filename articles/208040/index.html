<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As a programmer has come to the site about fashion</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am a girl programmer. Therefore, my business is to cook borsch and write articles on habr about own projects. Recently, we launched two sites with e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As a programmer has come to the site about fashion</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f91/886/239/f918862394a5121eab40dda7211b6fb8.jpg" alt="image" align="left">  I am a girl programmer.  Therefore, my business is to cook borsch and write articles on habr about own projects.  Recently, we launched two sites with <a href="http://habrahabr.ru/users/epic_noob/" class="user_link">epic_noob</a> .  One more or less interesting ( <a href="http://dress4weather.ru/">dress4weather.ru</a> ), and the second about fashion ( <a href="http://fashionhearts.ru/">fashionhearts.ru</a> ).  I'll tell you how we made them and how the flight goes. <br><a name="habracut"></a><br><h4>  How it all began </h4><br>  About a year ago, we decided after work to drank an uncomplicated website on our knees.  We had a lot of ideas - from games about zombies to culinary applications.  But there are two of us, a boy and a girl, so we chose neither fish nor meat - a site about the weather. <br>  The idea of ‚Äã‚Äãthe site was to show the weather and things that you should wear in this weather. <br>  Since we both worked full-time as interface developers in the same company and we didn‚Äôt intend to tie up with this business, we didn‚Äôt have any special plans for the future and monetized the project - we did just the fun for the fans. <br>  Serezha dug out free weather api ( <a href="http://wunderground.com/">wunderground.com</a> ) on your internet and it started. <br><br>  Server-side was written on Node.js + MongoDB + nginx.  As the saying goes, how many interface developers don't feed, everything looks at JavaScript. <br><br>  Design sketched on the knee in Photoshop and made the engine.  The most <s>obstinate</s> persistent (I) were engaged in content.  The first base with things was done right through - I just typed pictures of things from my favorite store, processed them in Photoshop, and for all weather conditions I made sets of clothes, registering them in a json-file. <br>  The first version of dress4weather.ru design: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56a/66d/ae2/56a66dae2db97626e43e9b5bfe5cbc79.png" alt="image"></div><br><br>  Unexpectedly, people began to come to the site.  I will tell you honestly - now the site has low attendance.  But it is, it is non-zero (150 unique per day), stable and most importantly ... we didn‚Äôt do anything to promote our website. <br>  The idea apparently seemed funny to the Internet community and about us, no, no, yes, and write some resource.  On one significant day, we even received the first Chinese warning from api weather about exceeding the traffic limit - as many as two thousand people from 500 different cities had already gone down.  It turned out that a fashion blogger wrote about us and everyone ran urgently to see if the sun is shining in Murmansk. <br>  Once we wrote to some funny friend from Israel and tried to buy a franchise on the site.  We came to such a stupor that the rest of the evening looked at the carpet and so he did not answer. <br><br><h4>  From weather to clothes </h4><br>  Time passed, people came, but the money did not come to us. <br>  At some point, Serezha, who had time to change several places of work, decided that he wanted creativity.  A young man without children and a mortgage can afford several months of creativity without human sacrifice, so he dug in the apartment with a laptop and sat down to work. <br>  The first thought was to upgrade the site about the weather.  Had: <br>  1. do admin panel for making sets <br>  2. figure out where to get the data for the site (not all the same to copy-paste) <br>  3. make some kind of socialization - the ability to like, can make combinations of clothes and you and you <br><br>  The second thought was: <br>  1. OMG.  This "additional functionality" is enough for a whole site! <br><br>  At first we looked at the competitors.  Found several popular sites with a similar idea at the base, but among them there was practically no one in which sets of clothes could be made up of real things.  Almost all Russian sites offer to make sets of pictures.  And they are monetized somehow along the road, through banners or their store, which participates little in the compilation of sets by users.  The only complete competitor for this idea is the website polyvore.com, but they, fortunately, are not localized, so that it seems you could safely go into battle. <br><br>  Particularly insidious part of the plan was the one in which popular kits, compiled by users of the site, were forwarded to the site about the weather.  That is, the manual labor of the programmer is excluded from the process and is replaced by the applied online creativity of users. <br><br>  We began to explore where you can get quickly and simply a large base of things.  We studied the options for a long time, looked towards the Yandex.Market API.  But at some point, they came across affiliate programs of sites admitad.ru and gdeslon.ru, which are able to upload data in xml-format and supply them with affiliate links (if a person buys something from our site, there will be a profit). <br>  Thirst for profit blanketed our eyes and we stopped at the second option. <br><br><h4>  Uninteresting facts about the process </h4><br>  The server part is the same, the actors are the same.  I needed a server with a large amount of RAM to give them to indices in Mong.  As a result, everything is spinning on a server somewhere in Germany.  For 2800r per month we get unlimited network traffic, 48 gigs of operatives and 4 TB of disk space. <br><br>  The editor of things was taken ready (Fabric.js) and slightly modified with a file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b5/945/75f/5b594575fe7a19d940ae8d5fff05b257.png"><br><br>  In the editor there was a cant with a resize of images - if the image was reduced, then the canvas filters gave too coarse antialiasing.  Therefore, before saving the collage, we ourselves do a smoothing of the pictures included in the collage (the algorithm has no scientific value - we took the first found variant). <br><br>  Also in the editor was a tool for trimming the white background from the image. <br>  This is a necessary tool, but it had to be completed. <br>  Firstly, it only works with a white background, and secondly, often the picture is often almost indistinguishable from the background (white shirts on a white background are our curse). <br>  Therefore, we wrote our own image search algorithm.  It is quite simple - we take the upper left pixel of the picture and consider it as the background color.  We make the pixels related to the background transparent.  Pixels, which lie on the threshold of good and evil, do proportionally translucent. <br>  To solve the problem of white on white, we honestly stole the idea from competitors.  We did this kind of circumcision thing with Raphael. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f5/a0b/7f8/5f5a0b7f8dfc6dc5ef93c9b8af3b4f27.png"></div><br><br>  I also had to work with pictures when we started to see what partnesny shops give us.  Often things are photographed along with the people on whom these things are worn.  We made autodetection of human faces using OpenCV to take only photos without people.  It was not possible to weed out all inappropriate photos, but still there was some profit. <br><br>  It took 2 days of continuous work of the computer to upload and process images (80,000 items, 4 pictures on average). <br><br>  The incoming XML files with the data about things were distilled into JSON using xml2js.  There was a small surprise with a very non-linear increase in the time of file parsing.  A 200 MB file could be parsed for several hours.  But otherwise, the export of data from partners was uneventful. <br><br>  We decided to authorize users via social networks and at the first approach to the projectile they used uLogin.  But they quickly realized that uLogin provides a very limited set of functions and will have to write their own wrappers over the social networks.  In the category of ‚Äúmost apy‚Äù won api facebook.  And the interfaces are nice, and the UX manuals are placed everywhere in the documentation.  In short, beauty.  The documentation for My World was pleasantly surprised (it would seem).  The most incomprehensible api turned out to be from classmates.  Some of the necessary things could be learned only from correspondence with technical support. <br><br>  You can endlessly talk about the process, so I will wrap up. <br><br>  The general list of technologies that we use (in general, everything is poppin): <br>  1. Node.js <br>  2. MongoDB <br>  3. nginx <br>  4. Jade <br>  5. RequireJS <br>  6. Data Storage in Memory - Redis <br>  7. Raphael for the editor <br>  8. Fabric.js - collage editor <br>  9. LESS for css <br>  10. ImageMagick for post-processing of server collages <br>  11. OpenCV for Face Detection <br>  12. xml2js for parsing data from partners <br><br>  + In the future we plan to upload images to CDN via rsync. <br><br><h4>  What we have now </h4><br>  Now we finally launched the site in public and made a redesign of dress4weather.ru. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/10d/e05/19b/10de0519b302413f9ace9a4aa7b2c0b7.png" alt="image"><br>  Freshly baked fashionhearts.ru <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f7/d14/ead/6f7d14eadf3403416953643fd393a277.png" alt="image"><br>  New maple dress4weather.ru <br><br>  According to the results of a social experiment on a human programmer, I will say - it is very hard to work at home.  Sometimes Serezha looked with a blissful smile out the window and repeated: "How good, how good, how good, that I am doing my project!".  Sometimes he painted his face on a baseball, called him Wilson and complained about a villain-fate.  In short, the life of a simple programmer is hard and unsightly. <br><br>  The main provider of custom content on our site is me now.  We threw a cry and asked friends to create.  But since our compassionate friends are mostly developers, we could only blast and delete over the results. <br>  Here's how programmers see fashion and style: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f3a/a78/b7b/f3aa78b7bece21da732e46f651b29986.jpg" alt="image"></div><br><br>  We are in the stage of promotion.  Automatically get some traffic from our site about the weather. <br>  Just recently, I decided to try advertising for VKontakte and classmates. <br>  We simultaneously submitted two different announcements to VKontakte.  One ad was accepted almost immediately, and the other was unlucky.  For two days I was humiliated with muddy answers, I could not stand it and wrote to tech support. <br>  They replied that ‚Äúsorry, made a mistake with the point of rejection,‚Äù and in the end banned to advertise our most wonderful sites, because the links pass through partner sites, and this is a redirect.  A site with a redirect contact does not advertise. <br>  It‚Äôs a shame that I foolishly deposited money on my bill of advertising, and now, to withdraw them, I need to send them a scan of the application, a copy of my passport, <s>fingerprints and a blood sample</s> .  And if I do all this, I will be banned forever in the advertising network of contact.  Here I wonder what to do, 30 bucks is not superfluous ... <br>  With advertising in classmates, everything turned out to be much simpler and now our superbanner is spinning, luring victims. <br>  We are slowly coming to the realization that we need to look in the direction of advertising in the thematic communities. <br><br>  We are finalizing the site, I am writing articles for it and content.  Serezha is engaged in small things like coding and design. <br>  We are fun and scary! <br>  PS And borscht I really know how to cook.  Proof: <br><img src="https://habrastorage.org/getpro/habr/post_images/d6e/0c2/101/d6e0c2101044176af5fbe560b2eb7f71.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/208040/">https://habr.com/ru/post/208040/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208030/index.html">Discoveries of the Outgoing Year - Another Useful Sleep Function</a></li>
<li><a href="../208032/index.html">The clash of two cultures: "I can" and "I can not"</a></li>
<li><a href="../208034/index.html">Machine learning. Yandex course for those who want to spend the New Year holidays with benefit</a></li>
<li><a href="../208036/index.html">OpenWorm - an international project to create a computer model of the worm</a></li>
<li><a href="../208038/index.html">NASA is testing a shape-changing robot wheel.</a></li>
<li><a href="../208042/index.html">3d printers. Review of achievements for 2013</a></li>
<li><a href="../208044/index.html">Computer game "Noosphere" - suggestions for the scenario for the first levels</a></li>
<li><a href="../208048/index.html">Imperceptible difficulties of rocket technology</a></li>
<li><a href="../208050/index.html">COOLRF: recent history. Part one</a></li>
<li><a href="../208052/index.html">We collect the Shark under iOS and OSX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
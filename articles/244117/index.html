<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multiple PHP Versions Under One Apache on Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago I needed to have different versions of PHP on one web server. All the manuals that I managed to find at a glance implied linux distribut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multiple PHP Versions Under One Apache on Windows</h1><div class="post__text post__text-html js-mediator-article">  Some time ago I needed to have different versions of PHP on one web server.  All the manuals that I managed to find at a glance implied linux distributions, to which I did not want to transfer the apache configuration, which was installed in the throes, installed on the virtual Windows Server 2012 R2 (x64).  I present the result of my successful experiment to your judgment. <br><a name="habracut"></a><br>  First of all, you need to decide what bitiness (x86 or x64) we want from our web server.  Recently, namely, versions of PHP5.5, the developer began to produce stable builds for x64, whereas earlier similar builds were released by enthusiasts.  For the greatest possible variation of PHP versions and for a good example, let‚Äôs focus on the x86 build.  Next, I will indicate the software versions that have earned in my particular case. <br><br>  1. Download Apache 2.4.10 Win32 VC11 at <a href="http://www.apachelounge.com/download/">www.apachelounge.com/download</a> <br>  ATTENTION!  You must have <a href="http://www.microsoft.com/ru-RU/download/details.aspx%3Fid%3D30679">Visual C ++ Redistributable for Visual Studio 2012</a> installed on your computer <br>  The choice of version is due to the fact that VC11 assemblies do not have (according to reviews) performance problems like VC9, VC10, and <b>can</b> run modules written for them.  Older versions of Apache have not been tested. <br><br>  Installation and basic configuration of the web server is chewed without me, so we omit it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. We take PHP binaries, <a href="http://windows.php.net/download/">windows.php.net/download</a> <br>  We are interested in the <b>x86 Thread Safe</b> version.  We take all the stable versions that interest you.  Personally, I earned from 5.3 to 5.6.  Archived versions also work. <br>  For convenience, we decompose everything in neighboring folders: <br><img src="https://habrastorage.org/getpro/habr/post_images/522/1a5/c0b/5221a5c0b14912a12f197f227eac6d1c.png" alt="image"><br><br>  3. We climb in apache configs. <br><br>  3.1.1 <b>httpd.conf</b> - Turn off PHP, if it is configured as a module for Apache: <br><pre><code class="apache hljs"><span class="hljs-comment"><span class="hljs-comment">#LoadModule php5_module "D:/php/php5.6/php5apache2_4.dll" #AddType application/x-httpd-php .php #PHPIniDir "D:/php/php5.6/"</span></span></code> </pre> <br><br>  3.1.2 <b>httpd.conf</b> - Enable FastCGI module <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">LoadModule</span></span></span></span> fcgid_module modules/mod_fcgid.so</code> </pre><br>  Enable the use of its configuration: <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">Include</span></span> conf/extra/httpd-fcgid.conf</code> </pre><br><br>  3.2 <b>conf / extra / httpd-fcgid.conf</b> - We leave the default settings, except for the first paragraph: <br><pre> <code class="apache hljs"><span class="hljs-comment"><span class="hljs-comment"># Fast CGI module Settings (PHP 5.3, 5.4) # FcgidInitialEnv PHPRC "C:\\php" # FcgidInitialEnv PATH "C:\\php;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;" FcgidInitialEnv SystemRoot "C:\\Windows" FcgidInitialEnv SystemDrive "C:" FcgidInitialEnv TEMP "C:\\WINDOWS\\TEMP" FcgidInitialEnv TMP "C:\\WINDOWS\\TEMP" FcgidInitialEnv windir "C:\\WINDOWS"</span></span></code> </pre><br><br>  3.3 <b>conf / extra / httpd-vhost.conf</b> - Register settings for <u>each</u> virtual host (highlighted with "||"): <br><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;VirtualHost *:80&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">DocumentRoot</span></span></span></span> <span class="hljs-string"><span class="hljs-string">"D:/http/web.local/"</span></span> ServerName web.local ErrorLog <span class="hljs-string"><span class="hljs-string">"logs/web.local-error.log"</span></span> CustomLog <span class="hljs-string"><span class="hljs-string">"logs/web.local-access.log"</span></span> common || FcgidInitialEnv PHPRC <span class="hljs-string"><span class="hljs-string">"D:\\php\php5.6"</span></span> || || FcgidInitialEnv PATH <span class="hljs-string"><span class="hljs-string">"D:\\php\php5.6;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;"</span></span> || &lt;Directory <span class="hljs-string"><span class="hljs-string">"D:/http/web.local/"</span></span>&gt; || AddHandler fcgid-script .php || Options -Indexes +FollowSymLinks || +ExecCGI || || FcgidWrapper <span class="hljs-string"><span class="hljs-string">"D:/php/php5.6/php-cgi.exe"</span></span> .php || || Require <span class="hljs-literal"><span class="hljs-literal">all</span></span> granted || &lt;/Directory&gt; &lt;/VirtualHost&gt;</code> </pre><br><br>  If everything is laid out in neighboring folders like mine, then in the virtual host config we change only the last digits in the PHP path. <br><br>  As a result: we get different versions of PHP on different virtual hosts on the same Apache service. </div><p>Source: <a href="https://habr.com/ru/post/244117/">https://habr.com/ru/post/244117/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244107/index.html">PIN code when paying by card - dots above i</a></li>
<li><a href="../244109/index.html">A few thoughts about analyzing other people's opinions</a></li>
<li><a href="../244111/index.html">Setting up a server with Chef (Quick and easy)</a></li>
<li><a href="../244113/index.html">PHPixie Amalgama - Internationalization in PHPixie</a></li>
<li><a href="../244115/index.html">Attackers use CVE-2014-6332</a></li>
<li><a href="../244119/index.html">eBay API: Step Two</a></li>
<li><a href="../244121/index.html">How-to: How the hosting provider infrastructure is built</a></li>
<li><a href="../244127/index.html">14 effective tips for content marketing for small businesses (part 2)</a></li>
<li><a href="../244129/index.html">Search for a site for hackathon. HackDay Experience</a></li>
<li><a href="../244131/index.html">How to easily and simply teach your Asterisk to call through the desired operator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
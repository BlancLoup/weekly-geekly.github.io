<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Positioning module based on u-blox NEO-7M</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to promote my project a little, and at the same time tell about the beautiful GPS module from the Swiss company u-blox . 

 So, the answer t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Positioning module based on u-blox NEO-7M</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/73c/17c/340/73c17c3406964959a688bc6533a24b11.png" align="left"><br>  I decided to promote my project a little, and at the same time tell about the beautiful GPS module from the Swiss company <a href="http://www.u-blox.com/">u-blox</a> . <br><a name="habracut"></a><br>  So, the answer to the question that arose after reading the title of people who are not familiar with u-blox: <blockquote>  Why u-blox? </blockquote><br>  Answer: <br><ul><li>  Having GLONASS on board </li><li>  Good documentation available </li><li>  Availability of own AGPS service </li></ul><br>  In addition, there is support, with which I even successfully managed to communicate. <br><br><h4>  A bit about the module: </h4><br>  <b>Dimensions:</b> 12.2x16.0x2.4mm. <br>  Of course, the module is too big for a mobile phone, but small enough for a car solution, or, for example, a quadcopter, and also comfortable for manual installation on the board. <br>  <b>GPS receiver specification:</b> 56-channel core of the 7th generation from u-blox. <br>  <b>Positioning systems supported:</b> GPS L1 C / A, GLONASS L1 FDMA, QZSS L1 C / A, SBAS: WAAS, EGNOS, MSAS, Galileo E1B / C. <br><br>  Galileo has not yet been launched, but in view of the fact that there is a possibility of updating the firmware, after a full launch of the system, I hope it will be possible to use it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Data refresh rate:</b> up to 10 Hz. <br>  The frequency can be changed programmatically during the work with the module.  The default is 1Hz. <br>  <b>Accuracy:</b> <br><ul><li>  GPS - up to 2.5m </li><li>  GLONASS - up to 4m </li></ul><br>  <b>Active and passive antenna support</b> <br>  Nothing out of the ordinary, just a fact.  True, 7M does not have the ability to programmatically turn off the power of the active antenna, so if you want to save energy, you need to do one of the hardware shutdown schemes from the outside suggested in the documentation. <br><br>  <b>Interfaces:</b> UART, SPI, I2C, USB <br>  UART and I2C work simultaneously, but SPI needs to be mucked using the D_SEL pin.  Accordingly, you can make a controlled switch, for example, by connecting the GPIO to the D_SEL pin.  I admit honestly I didn‚Äôt check SPI, since for my purposes the UART is much more convenient.  Yes, and in switching the exchange protocol "on the fly" I do not see much sense. <br>  <b>Price:</b> ~ $ 15 from the Chinese. <br><br>  Here is the module itself: <br><br><img src="https://habrastorage.org/files/3a2/18f/af4/3a218faf42ef4085a71c437662b4f9b9.jpg" width="600"><br><br><h4>  Summary of the previous 270 episodes, or how it all began </h4><br>  At the beginning of the year, I purchased a car, and in a car without a multimedia system in modern times there is no way.  By itself, you can say "Buy for $ 300 from the Chinese and do not bother!" But I am an engineer and it is interesting to me to do something myself, to understand the technologies.  I already have experience in developing car multimedia systems, although not with 0, the more interesting it was to try.  However, this is another story, I will tell about it next time.  Now the main thing is that the system cannot do without one navigation.  Hence the conclusion - you need to have a GPS module, map, routing, <s>blackjack and poetess</s> . <br><br><h4>  PCB or as it was the first time </h4><br>  As it turned out on closer examination, PCB design is not so complicated as it seems at first glance.  All that one has to use is accompanied by a copious amount of documentation with typical schemes and explanations.  In fairness, I did not look at the documentation of other vendors, because after studying the proposed u-blox, I was more than satisfied. <br><br>  As a result of my research, it turned out, in my inexperienced look, quite a normal PCB design.  Schemes can be downloaded <a href="https://git.semlanik.org/semlanik/openautomotive/src/master/schematic">from here</a> .  There are also ready to print .pdf files for further use in LUT'e. <br><br>  I am ready to listen to criticism, because I have never seriously dealt with radio engineering - hence, mistakes, even gross ones, are possible.  All the schemes I did in Eagle Cad Soft.  The tool turned out to be very convenient for me, "+" to all a huge number of ready-made libraries with a wide choice of various elements that the community makes. <br><br>  Below are screenshots of schematics and PCB: <br><br><img src="https://habrastorage.org/files/c1e/29c/6d4/c1e29c6d4a0e409897b4cbfbdc1b1555.png"><br><br>  The element base that I used is quite accessible in Russia.  With the exception of the RF inductance of 27nH, which is recommended by the manufacturer (however, hand made work is not bad). <br><br><img src="https://habrastorage.org/files/03d/722/f2e/03d722f2e15146bebc46b47684d309e8.png"><br><br>  The PCB may not satisfy some of the requirements for such schemes, and I will not mind receiving feedback on this occasion again. <br><br>  I didn‚Äôt have any desire to shoot the process of PCB manufacturing and soldering, so I can offer only the final version, if someone is interested by the abbreviation LUT, there is a huge amount of wonderful videos on youtube. <br><br>  After etching and soldering it turned out such a shawl: <br><br><img src="https://habrastorage.org/files/6ee/3b1/42a/6ee3b142acb34c128bc2e4941c3d6fd4.jpg" width="600"><br><br>  Upper side of PCB: <br><br><img src="https://habrastorage.org/files/779/cbc/503/779cbc503e8a4ec5805727191d134746.jpg" width="600"><br><br>  PS Yes, I shot on the calculator.  Yes, the collective farm.  Yes, a lot of solder. <br><br>  On the bottom side of the board there are 5 conclusions: <br><ul><li>  2 UART pins labeled ‚ÄúRx‚Äù ‚ÄúTx‚Äù </li><li>  2 I2C pins labeled ‚ÄúSDA‚Äù ‚ÄúSCL‚Äù </li><li>  1 pin for signal ground </li></ul><br>  There is also a SMA - female connector for connecting an active / passive antenna. <br><br>  On the upper side there is a single pin 3.3V.  It was not planned and was not divorced on the PCB initially, hence a capacitor hanging in the air. <br>  I will also note that this is the second revision of the board, and somewhere in the bowels of the getaway, the first one is hidden, without the power of the LNA.  Well, as the attentive reader could notice, the current board doesn‚Äôt correspond a bit to the schematics and PCB. <br><br>  A few words about the antenna.  I use an active antenna ordered from all the same Chinese for ~ $ 8.  There was an attempt to make its own, but theoretical base, on a par with the elemental one, so far not enough to make an active antenna of acceptable quality. <br><br><h4>  Why did I write all this </h4><br>  Now I will behave a little impetuously and move on to the self-breathing part.  In addition to the miraculous board, which I must say was not the most time-consuming part of the process, I wrote a ton or two of code (or to be precise, comments to it). <br><br>  U-blox has its own binary protocol, which along with NMEA can give location data, and much more.  In general, without hesitation, I made a <a href="https://git.semlanik.org/semlanik/ubxproto">C-library</a> for the UBX protocol <b><font color="#FF0000"><sup>*</sup></font></b> . <br><br>  Writing doxygen comments took a lot of time, but even so I <a href="http://semlanik.org/ubxproto/index.html">mastered it</a> . <br><br>  Perhaps in the following posts I will tell you more about the capabilities of this protocol.  In particular, using AGPS when working with the module. <br><br><h4>  Conclusion </h4><br>  In conclusion I want to add: everything about what is written above successfully works in conjunction with the PC and Cubieboard.  Naturally, not everything has been tested, but unfortunately I don‚Äôt have enough hands. <br>  The main disadvantage of this module is that GPS and GLONASS cannot work simultaneously.  It is necessary to switch between them.  Most likely the same thing is waiting for Galileo. <br><br>  Sources: <br>  <a href="http://www.u-blox.com/images/downloads/Product_Docs/NEO-7_ProductSummary_%2528GPS.G7-HW-11003%2529.pdf">General information about u-blox modules of the 7th generation</a> ; <br>  <a href="http://www.u-blox.com/images/downloads/Product_Docs/u-blox7-V14_ReceiverDescriptionProtocolSpec_Public_%2528GPS.G7-SW-12001%2529.pdf">The specification of the 14th revision of the UBX protocol.</a>  <a href="http://www.u-blox.com/images/downloads/Product_Docs/u-blox7-V14_ReceiverDescriptionProtocolSpec_Public_%2528GPS.G7-SW-12001%2529.pdf"><b><font color="#FF0000"><sup>*</sup></font></b></a> . <br><br>  <b><font color="#FF0000"><sup>*</sup></font></b> At the time of this writing, the latest is the 15th revision.  The author is going to implement new features of the protocol. <br><br>  <b>UPD:</b> DIY added </div><p>Source: <a href="https://habr.com/ru/post/233925/">https://habr.com/ru/post/233925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../233907/index.html">Why Bitcoin is Good</a></li>
<li><a href="../233911/index.html">A / B test is easy</a></li>
<li><a href="../233915/index.html">Description of the MMO component in the game engine "Tornado"</a></li>
<li><a href="../233917/index.html">7 basic usability principles for online stores (translation)</a></li>
<li><a href="../233921/index.html">MyKronoz ZeFit - pedometer bracelet with European roots</a></li>
<li><a href="../233927/index.html">Swift Speed ‚Äã‚ÄãSecrets</a></li>
<li><a href="../233929/index.html">Remote kill smartphones</a></li>
<li><a href="../233931/index.html">Unforgettable technologies: steam locomotives</a></li>
<li><a href="../233935/index.html">Survey on version control systems</a></li>
<li><a href="../233937/index.html">Future web browsers and user device ecosystem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The truth about the RNG poker rooms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In this article you will learn about one of the most important components of online poker - the random number generator (RNG). The ‚Äúhon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The truth about the RNG poker rooms</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  In this article you will learn about one of the most important components of online poker - the random number generator (RNG).  The ‚Äúhonesty‚Äù of the RNG of various poker rooms is regularly questioned and necessarily discussed at any resource dedicated to poker.  Users constantly complain about a ‚Äúspinning up‚Äù generator that allows a room to hold back stronger players so that the majority representing the category of ‚Äúweaker players‚Äù remains a loyal room.  Let's see if things are really that bad with randomness on poker sites. <a name="habracut"></a><br><br>  You are all aware of what a random number generator is and how it is implemented on a computer, but for completeness of the article I will describe the basic concepts.  If you wish, you can skip the next section. <br><br><h4>  Definitions </h4><br>  <i>A random number generator</i> (RNG) must generate an absolutely random sequence of numbers.  Such a sequence can be obtained by using some physical natural processes, for example: physical noise, cosmic radiation, radiation background, etc.  In computer systems, software and hardware RNGs are distinguished.  The former are in fact a generator of pseudo-random numbers (PRNG) and are an algorithm that generates a sequence of numbers, the elements of which are almost independent of each other and obey a given distribution.  Since the algorithm is predetermined, the sequence of the numbers obtained is also predetermined.  It turns out if you know the PRNG algorithm, then you can get a "random" sequence. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Hardware RNG is a device that uses any of the external sources of entropy to obtain sequences. <br><br>  Now RNG is usually implemented by combining PRNG and an external source of entropy.  In computers, a processor clock count, sound card noise, or original methods, for example, ‚Äú <a href="http://www.freewebs.com/pmutaf/iwrandom.html">RNG from WiFi noise,</a> ‚Äù are used as such a source. <br><br><h4>  RNG in online poker </h4><br>  The generation of random sequences of cards along with their transfer from the server to the client is one of the fundamentals of the security of the poker room, so much attention is paid to them.  For such an important system, it is unacceptable to use a pseudo-random number generator, because it can be hacked and get a sequence of numbers, and then decipher the cards of the players and the unopened table cards. <br><br>  All poker rooms receive various certificates to prove the viability of their RNG and software.  Cigital is one of the largest companies in this field, engaged in, among other things, certification of poker software and RNG.  The certificate of this company is at the largest poker rooms Full Tilt Poker and PokerStars.  The basis for testing any RNG is the NIST (National Institute of Standards and Technology) test suite, based on the FIPS 140-2 (Federal Information Processing Standard) USA.  It includes various tests from the test for the ratio of 0 and 1 in the generated sequence, to the compression test by the <a href="http://ru.wikipedia.org/wiki/LZO">LZO</a> algorithm (a random sequence cannot be significantly compressed because it should not have many repeated sequences). <br><br>  To generate random sequences, they use a system from one or more sources of entropy and the PRNG algorithm.  For example, the largest poker room PokerStars uses data from users (mouse movements, reaction time to certain actions, etc.) as an accident factor and the RNG Quantis hardware certified by the Swiss Federal Bureau of Metrology.  <a href="http://www.idquantique.com/true-random-number-generator/products-overview.html">Quantis</a> uses physical processes to generate number sequences.  He picks up the photons and passes them through a translucent mirror.  Two events: reflection and transmission of light are taken as 0 and 1. Quantis is available with different interfaces: USB, PCI, PCI-E with a random number stream of 4 Mbps.  There is also a 16 Mbps modification for PCI devices.  The price of such a device is ‚Ç¨ 890 - ‚Ç¨ 1165 for 4 Mbit / s stream and ‚Ç¨ 2000 for 16 Mbit / s.  Also in PokerStars there are criteria for determining a sufficient degree of randomness.  For example, if there is not enough data from users, then distribution will not start until sufficient random bits are generated by the RNG hardware.  The actual conversion of a stream of random bits into numbers occurs as follows: if you need a number from 0 to 25, then 5 bits are selected and converted to a number from 0 to 31;  if the number is greater than 25, the process is repeated.  For shuffling the deck, the original deck and the empty deck are selected, a random card is selected from the first one and transferred to the second one.  So, until all the cards are transferred to the initially empty deck. <br><br>  In general, poker rooms use two types of deck shuffling: single and permanent.  In a single deck is shuffled once before the distribution, and in constant shuffling the entire distribution continues.  The second option introduces additional protection against hacking, because the next table map is unknown until the last moment.  Permanent shuffling, for example, is used in the second largest poker room - FullTilt.  The FullTilt RNG itself is built on the same principle as PokerStars, using 3 independent generators: a hardware RNG with a physical source of entropy and two independent PRNGs (ISAAC and OpenSSL).  In general, this option of combining several random number generators is now used everywhere, but at the dawn of the development of online poker, things with RNG were much worse. <br><br><h4>  History of Planet Poker and ASF Software Inc. </h4><br>  Planet Poker is the first poker room in the world to offer its users to play for money on the Internet.  <a href="http://interesnoe.pokeroff.ru/blog/note/1138816/">It happened in January 1998.</a>  A little later, experts from Reliable Software Technologies (now Cigital) became interested in his security.  The Planet Poker website opened the sources of their RNG algorithm (the algorithm itself was owned by ASF Sowtware Inc.).  With this they wanted to show their honesty and reliability, but the source only helped the specialists to find gaps in it.  Here is the shuffle function of maps from the published algorithm: <br><blockquote> <font color="#000000">procedure</font> TDeck <font color="#000066">.</font>  <font color="#006600">Shuffle</font> <font color="#000066">;</font> <br>  <font color="#000000">var</font> <br>  ctr <font color="#000066">:</font> <font color="#000066">byte</font> <font color="#000066">;</font> <br>  tmp <font color="#000066">:</font> <font color="#000066">byte</font> <font color="#000066">;</font> <br><br>  random_number <font color="#000066">:</font> <font color="#000066">Byte</font> <font color="#000066">;</font> <br>  <font color="#000000">begin</font> <br>  <font color="#808080">{Fill the deck with unique cards}</font> <br>  <font color="#000000">for</font> ctr <font color="#000066">:</font> <font color="#000066">=</font> <font color="#0000ff">1</font> <font color="#000000">to</font> <font color="#0000ff">52</font> <font color="#000000">do</font> <br>  Card <font color="#000066">[</font> ctr <font color="#000066">]</font> <font color="#000066">:</font> <font color="#000066">=</font> ctr <font color="#000066">;</font> <br><br>  <font color="#808080">{Generate a new seed based on the system clock}</font> <br>  <font color="#000066">randomize</font> <font color="#000066">;</font> <br><br>  <font color="#808080">{Randomly rearrange each card}</font> <br>  <font color="#000000">for</font> ctr <font color="#000066">:</font> <font color="#000066">=</font> <font color="#0000ff">1</font> <font color="#000000">to</font> <font color="#0000ff">52</font> <font color="#000000">do</font> <font color="#000000">begin</font> <br>  random_number <font color="#000066">:</font> <font color="#000066">=</font> <font color="#000066">random</font> <font color="#000066">(</font> <font color="#0000ff">51</font> <font color="#000066">)</font> <font color="#000066">+</font> <font color="#0000ff">1</font> <font color="#000066">;</font> <br>  tmp <font color="#000066">:</font> <font color="#000066">=</font> card <font color="#000066">[</font> random_number <font color="#000066">]</font> <font color="#000066">;</font> <br>  card <font color="#000066">[</font> random_number <font color="#000066">]</font> <font color="#000066">:</font> <font color="#000066">=</font> card <font color="#000066">[</font> ctr <font color="#000066">]</font> <font color="#000066">;</font> <br>  card <font color="#000066">[</font> ctr <font color="#000066">]</font> <font color="#000066">:</font> <font color="#000066">=</font> tmp <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br><br>  CurrentCard <font color="#000066">:</font> <font color="#000066">=</font> <font color="#0000ff">1</font> <font color="#000066">;</font> <br>  JustShuffled <font color="#000066">:</font> <font color="#000066">=</font> <font color="#000000">True</font> <font color="#000066">;</font> <br>  <font color="#000000">end</font> <font color="#000066">;</font> <br></blockquote><br>  In short, an un-sorted deck of cards is taken and cards from 1 to 52 are swapped with any random card.  To generate random numbers, the Pascal functions random, randomize are used, which use the system timer and the PRNG algorithm to obtain random numbers. <br><br>  The first error of the algorithm lies in the random (n) function ‚Äî it, unlike most Pascal functions, returns a value from 0 to n-1.  Those.  ‚ÄúRandom (51) +1‚Äù gives us a number from 1 to 51 - the classic error off-by-one.  It turns out the current card will never change places with the last 52nd card, which already gives a deviation from the randomness of the resulting deck. <br><br>  Also, specialists of Reliable Software Tehnologies revealed the inconsistency of the algorithm itself, even if you correct the error off-by-one.  To demonstrate this, they used the algorithm described above: <br><blockquote>  <font color="#0000ff">for</font> <font color="#008000">(</font> i is <font color="#0000dd">1</font> to n <font color="#008000">)</font> <br>  Swap i with random position between <font color="#0000dd">1</font> and n </blockquote><br><br>  For ease of calculation, a deck of 3 cards was used.  As a result, decks 231, 213 and 132 were encountered more often than 312, 321 and 123. It is clear that for a deck of 52 cards, some variants of shuffling the deck should have been encountered more often than others. <br><br>  Another important omission was the number of possible decks in such a RNG.  With a real shuffle of cards 52! = 8.06 * 1067 deck options are possible.  Pascal functions generate random numbers based on the system clock.  The basis for calculating a random number is the number of milliseconds since midnight.  In a day, just 86,400,000 milliseconds, so we have only 86.4 million possible options for shuffling the deck, which is much less real possible. <br><br>  And this is not all, the flaws found do not give a particular advantage to the players, but the following vulnerability made it possible to fully recognize the sequence of cards in the deck.  All again because of the PRNG, or rather its predictability.  The researchers wrote an exploit that could accurately show all the cards of the players and the remaining cards of the table after 3 cards laid out on the table.  Thus, it was based on 5 well-known cards: 2 players and 3 on the table.  Using the RNGS algorithm similar to Pascal and selecting a different number of milliseconds with a deviation from the current time (the generation time of the maps should have been close to the local time), the exploit found an exact match of 5 known maps and issued all the rest. <br><img src="http://docs.google.com/File?id=dzt3z3m_46fksnrb2b_b" alt="image"><br>  After this, the exploit additionally synchronized the local time with the server time, and the following iterations took less than one second. <br><br>  For players, this story turned out well - the exploit was in good hands, and the specialists of Reliable Software Tehnologies immediately reported the vulnerabilities found in ASF Sowtware Inc. (their services besides Planet Poker also used purepoker.com, deltacasino.com) and later published their <a href="http://www.cigital.com/news/index.php%3Fpg%3Dart%26artid%3D20">report</a> .  They estimated the damage if the program fell into bad hands, at $ 100,000 per day.  Planet poker and in general online poker this story has caused serious damage, although it did not prevent the active development of this industry.  And ‚ÄúReliable Software Technologies‚Äù was renamed ‚ÄúCigital‚Äù and is now a very reputable company for audit and certification programs. <br><br><h4>  Real Deal and Cut'N Shuffle Technology </h4><br>  We should also mention the Real Deal poker room with their innovative approach to the distribution of cards.  The game for real money started on May 7, 2010. For shuffling, a real deck of cards and a special shuffle machine are used to mix them. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/FTsBlkg2GwE%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhiJEoZ4oxq-euRPaOwwHP9CGj780w" frameborder="0" allowfullscreen=""></iframe><br><br>  This patented machine is called Cut'N Shuffle.  With it, you get a real mixing of a real deck of cards.  In addition, the distributing player is invited to cut the deck (he may refuse), which introduces an additional element of randomness.  Video recordings of each shuffle of the deck are stored on the server and any player can receive them if desired.  This is a fairly young technology, let's see how it will be successful in the future. <br><br><h4>  Conclusion </h4><br>  In conclusion, I would like to speculate about possible fraud with RNG.  The profit of the poker room comes from the rake (the part of the bank that the casino picks up for itself), so for them it doesn't matter who wins, only the amount of played rake is important for them.  Hence the idea of ‚Äã‚Äãa profitable scam flows in: giving out more often good combinations to several players so that they try to play for all the money.  Quite realizable, but all the secret someday becomes apparent, and the leak of such information is quite possible.  And it is unlikely that a small increase in profits is worth huge losses, if such a deception is revealed.  Therefore, if you play poker and you are fatally unlucky, you shouldn‚Äôt blame the ‚Äútweaked‚Äù RNG for everything, just wait out the losing streak and keep playing. <br><br>  In practice, most often, the players try to shift their mistakes onto the strong shoulders of the RNG, blaming it for all their own failures.  Always analyze your own actions and look for errors, before you throw the blame on software developers. <br><br>  Article <a href="http://www.pokeroff.ru/">Pokeroff.ru</a> specifically for Habrahabr </div><p>Source: <a href="https://habr.com/ru/post/95090/">https://habr.com/ru/post/95090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95083/index.html">Raise your IRC-bouncer</a></li>
<li><a href="../95085/index.html">Change Top Manager</a></li>
<li><a href="../95086/index.html">A woman who has an accident is suing Google</a></li>
<li><a href="../95088/index.html">Bamboo Grove Notebook</a></li>
<li><a href="../95089/index.html">Google Chrome blocks Google.com</a></li>
<li><a href="../95092/index.html">Greeting</a></li>
<li><a href="../95093/index.html">Why do we love the original consumables. Forgot? HP will clarify</a></li>
<li><a href="../95094/index.html">The N8 will be able to connect flash drives and connect with other smartphones.</a></li>
<li><a href="../95101/index.html">Recommendations for the implementation of test tasks</a></li>
<li><a href="../95102/index.html">Do not use kill -9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
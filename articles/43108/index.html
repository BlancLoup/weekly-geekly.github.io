<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VLAN on FreeBSD</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It may be necessary to start up several logical networks isolated from each other by a single physical cable. For example, we have a need to bring a s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VLAN on FreeBSD</h1><div class="post__text post__text-html js-mediator-article"> It may be necessary to start up several logical networks isolated from each other by a single physical cable.  For example, we have a need to bring a separate wire to the server with access to the WAN, and a separate wire for connecting to the local network.  In this case, there may be more necessary wires (maybe we set up a router that connects the n-th number of subnets physically isolated from each other and sends them all to the Internet).  At the same time, it is often extremely difficult to install such a number of network cards in the server, or there may be an undesirable large number of wires in the route from switches to server.  In any case, it is advantageous to pack all these networks into one physical wire.  To do this, they invented a technology that allows you to do this - vlan.  There are several different implementations of this technology, one of the most popular being called ‚ÄúIEEE 802.1q‚Äù. <br><br><a name="habracut"></a><br><br>  In this OS, this is done quite elementarily using the example of a server that will work with us under FreeBSD 6.2-RELEASE-p3. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We have one Ethernet in which we need to push 2 different grids <br><br>  * Outside world (internet for example) <br>  * The local network <br><br>  To do this, we omit the ip settings on the Ethernet interface, in this case it will be em0.  We indicate for him only the speed of the port, the duplex and the fact that it is UP. <br><br>  What it looks like on the server in /etc/rc.conf: <br><br> <code>ifconfig_em0="up media 100baseTX mediaopt full-duplex" <br></code> <br>  We denote for the system vlans, these will be the vlan names specifically for FreeBSD, but not the vlan numbers through which we will work, that is, which are spelled out on the piece of iron into which we join, for example, in a certain tsiska. <br><br> <code>cloned_interfaces="vlan0 vlan1" <br></code> <br>  Customize our vlans <br><br> <code>ifconfig_vlan0="vlan 1 vlandev em0 <b>ip   </b> netmask <b>   </b> mtu 1500" <br> ifconfig_vlan1="vlan 2 vlandev em0 <b>ip   </b> netmask <b>   </b> mtu 1500" <br></code> <br><br>  Accordingly, on the network equipment in which the server is turned on, vlans must be configured: 2 ‚Äî the outside world, 1 ‚Äî the local network. <br><br>  Details: <br>  ifconfig_vlan0 is the name of the vlan on the FreeBSD system <br><br>  vlan 1 - specify the number of vlan in the network <br><br>  vlandev em0 - we send it to work via ethernet em0 <br><br>  mtu 1500 - set the MTU (Maximum packet size) to 1500 <br><br>  The final touch - we prescribe the default gateway <br><br>  default_router = "Default Gateway" <br><br>  There is no description of network equipment settings here, since the post refers specifically to FreeBSD.  How to configure a VLAN on CISCO I think <b>zepps</b> will tell <b>us</b> in its series of <a href="http://habrahabr.ru/blogs/cisconetworks/42896/">articles on CISCO</a> <br><br>  PS: This is my first topic, please do not kick with your legs =) </div><p>Source: <a href="https://habr.com/ru/post/43108/">https://habr.com/ru/post/43108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431068/index.html">Art of education: the ideology of slot machines</a></li>
<li><a href="../431070/index.html">Hare to eat? Talking about the food habits of a modern IT person</a></li>
<li><a href="../431072/index.html">JavaScript Guide, Part 7: strict mode, this keyword, events, modules, mathematical calculations</a></li>
<li><a href="../431074/index.html">JavaScript Guide, Part 8: ES6 Standard Feature Overview</a></li>
<li><a href="../431078/index.html">Javascript error handling guide</a></li>
<li><a href="../431080/index.html">How to organize remote offices and not lose a team in space</a></li>
<li><a href="../431082/index.html">Kotlin: Looking for Head of Marketing</a></li>
<li><a href="../431084/index.html">In any incomprehensible situation - write scripts</a></li>
<li><a href="../431086/index.html">Everything you wanted to know about PVS-Studio and did not hesitate to ask</a></li>
<li><a href="../431088/index.html">File management done wrong - Part 1: Hailing from the 90s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
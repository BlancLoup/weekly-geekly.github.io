<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NFC application development for Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="NFC (near field communication) is a standardized technology for exchanging data over short distances, allowing interaction between two electronic devi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NFC application development for Android</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage3/83a/46a/01f/83a46a01f44b0a707418bf87f59a367d.jpg"><br>  NFC (near field communication) is a standardized technology for exchanging data over short distances, allowing interaction between two electronic devices in an easy and intuitive way.  For example, with an NFC-equipped smartphone, you can make purchases, hand out business cards, download discount coupons, and so on.  Many new uses for NFC will be found soon. <br>  This article describes technologies using NFC and how they are used today.  It also shows how to use NFC in Android applications, and finally, two examples of NFC applications with source codes are given. <br><a name="habracut"></a><br><h4>  NFC technology architecture </h4>  NFC is based on RFID technology with a frequency of 13.56 MHz and a working distance of up to 10 cm. The data transfer rate is up to 424 kb / s.  Compared to other communication technologies, the main advantage of NFC is its speed and ease of use.  The figure below shows the location of NFC among other communication technologies. <br><br><img src="https://habrastorage.org/storage3/42f/344/c31/42f344c318feedfb648f2ce555614688.jpg"><br><br>  NFC technology has three modes: NFC card emulation, peer to peer mode, and read / write mode. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage3/454/e77/cd5/454e77cd535a1cc1f724db407ae6c7fb.jpg"><br><br>  In emulation mode, the NFC card is an analogue of a chip-based RFID card with its own security module, allowing you to protect the purchase process.  In peering mode, you can share information, such as a business card, with other NFC devices.  You can also set up a WiFi or Bluetooth connection via NFC to transfer large amounts of data.  The read / write mode is designed to read or modify NFC tags using NFC devices. <br>  Each mode is described in more detail below. <br><br><h4>  NFC card emulation mode </h4>  The NFC module usually consists of two parts: the NFC controller and the security element (EB).  The NFC controller is responsible for communications, the DL is for the encryption and decryption of information sensitive to hacking. <br><br><img src="https://habrastorage.org/storage3/04e/9e1/b77/04e9e1b77f71c120195a0097cdab4ac6.jpg"><br><br>  The EB is connected to the NFC controller via the SWP (Single Wire Protocol) bus or DCLB (Digital Contactless Bridge) bus.  NFC standards define a logical interface between a host and a controller, allowing them to communicate through an RF field.  DL is implemented using an embedded application or OS component. <br><br><img src="https://habrastorage.org/storage3/9fc/9fa/fd1/9fc9fafd1636611b74ae546bec5cc08e.jpg"><br><br>  There are three options for implementing an EB: you can embed it in a SIM card, SD card, or NFC chip. <br><br><img src="https://habrastorage.org/storage3/e7b/6d0/1d2/e7b6d01d2d3dccde13d3cbf9a8b819ce.jpg"><br><br>  Telecom operators such as CMCC (China Mobile Communication Corporation), Vodafone or AT &amp; T usually use a SIM-card solution, encouraging their subscribers to replace old SIM cards with new ones equipped with NFC for free. <br><br><h4>  Peering mode </h4>  Two NFC devices can easily communicate with each other directly, sharing small files.  To establish a Bluetooth / WiFi connection, you need to exchange a special format XML file.  In this mode, EB is not used. <br><br><h4>  Write / read mode </h4>  In this NFC mode, the device can read and write NFC tags.  A good example of application is reading information from NFC-equipped ‚Äúsmart‚Äù posters. <br><br><img src="https://habrastorage.org/storage3/65d/50b/2c4/65d50b2c4b786717d323e7ebda05b476.jpg"><br><br><h4>  Introduction to the development of NFC for Android </h4>  Android supports NFC using two packages: android.nfc and android.nfc.tech. <br>  The main classes in android.nfc are: <br>  NfcManager: Android devices can be used to manage any NFC adapters detected, but since most Android devices only support one NFC adapter, NfcManager is usually called with getDefaultAdapter to access a specific adapter. <br>  The NfcAdapter works as an NFC agent, like a network adapter on a PC.  With it, the phone accesses the NFC hardware to initialize the NFC connection. <br>  NDEF: NFC standards define a common data format called the NFC Data Exchange Format (NDEF), which can store and transmit various types of objects, starting with MIME and ending with ultra-short RTD documents such as URLs.  NdefMessage and NdefRecord are two types of NDEF for the NFC forum-defined data formats that will be used in the example code. <br>  Tag: When an Android device detects a passive object such as a label, card, etc., it creates an object of the ‚Äútag‚Äù type, placing it further on the target object and finally sending it to the corresponding process. <br>  The android.nfc.tech package also contains many important subclasses.  These subclasses provide access to label functions that include read and write operations.  Depending on the type of technology used, these classes are divided into different categories, such as NfcA, NfcB, NfcF, MifareClassic, and so on. <br>  When a phone with NFC enabled detects a tag, the delivery system automatically creates a package of targeted information.  If the phone has several applications that can work with this target information, the user will be shown a window with a suggestion to choose one from the list.  The label delivery system defines three types of target information, in order of decreasing priority: NDEF_DISCOVERED, TECH_DISCOVERED, TAG_DISCOVERED. <br>  Here we use a target filter to work with all types of information from TECH_DISCOVERED to ACTION_TECH_DISCOVERED.  The nfc_tech_filter.xml file is used for all types defined in the label.  Details can be found in the <a href="http://developer.android.com/reference/android/nfc/package-summary.html">Android documentation</a> .  The figure below shows the flow chart for detecting a tag. <br><br><img src="https://habrastorage.org/storage3/b98/b28/f5f/b98b28f5f6e0200eaa1555b416633d34.jpg"><br><br><h4>  Example 1. Developing NFC applications for reading / writing tags. </h4>  The following example shows the read / write functions of an NFC tag.  In order to access the NFC hardware and correctly process the NFC information, declare these positions in the AndroidManifest.xml file. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.NFC"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  The minimum SDK version your application should support is 10, declare it in the AndroidManifest.xml file <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-sdk</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:minSdkVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag">/&gt;</span></span> In the onCreate functionÔºåyou can apply the NfcAdapterÔºö public void onCreate(Bundle savedInstanceState) { ‚Ä¶‚Ä¶ adapter = NfcAdapter.getDefaultAdapter(this); ‚Ä¶‚Ä¶ }</code> </pre> <br>  The following target call demonstrates the read function.  If the system broadcast message is NfcAdapter.ACTION_TAG_DISCOVERED, then you can read the information and display it. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNewIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Intent intent)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())){ mytag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG); <span class="hljs-comment"><span class="hljs-comment">// get the detected tag Parcelable[] msgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES); NdefRecord firstRecord = ((NdefMessage)msgs[0]).getRecords()[0]; byte[] payload = firstRecord.getPayload(); int payloadLength = payload.length; int langLength = payload[0]; int textLength = payloadLength - langLength - 1; byte[] text = new byte[textLength]; System.arraycopy(payload, 1+langLength, text, 0, textLength); Toast.makeText(this, this.getString(R.string.ok_detection)+new String(text), Toast.LENGTH_LONG).show(); } }</span></span></code> </pre> <br>  The following code demonstrates the write function.  Before you can determine the value of mytag, you must make sure that the label is defined and only then enter your data in it. <br><br><pre> <code class="java hljs"> If (mytag==Null){ ‚Ä¶‚Ä¶ } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ ‚Ä¶‚Ä¶ write(message.getText().toString(),mytag); ‚Ä¶‚Ä¶ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text, Tag tag)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException, FormatException </span></span>{ NdefRecord[] records = { createRecord(text) }; NdefMessage message = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NdefMessage(records); <span class="hljs-comment"><span class="hljs-comment">// Get an instance of Ndef for the tag. Ndef ndef = Ndef.get(tag); // Enable I/O ndef.connect(); // Write the message ndef.writeNdefMessage(message); // Close the connection ndef.close(); }</span></span></code> </pre> <br>  Depending on the information you read, you can perform additional actions, such as starting a task, following a link, etc. <br><br><h4>  Example 2. Developing an NFC application using MifareClassic cards </h4>  In this example, we will use MifareClassic cards and the corresponding label type for reading.  MifareClassic cards are widely used for various needs, such as identification of a person, bus ticket, etc.  In the traditional MifareClassic map, the storage area is divided into 16 zones, there are 4 blocks in each zone, and each block can store 16 bytes of data. <br>  The last block in the zone is called a trailer and is usually used to store the local read / write key.  It contains two keys, A and B, 6 bytes each, the default is 00 or FF, depending on the value of MifareClassic.KEY_DEFAULT. <br>  To write to the Mifare card, you must first of all have the correct key value (which plays a protective role), as well as successfully pass authentication. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.reno"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:versionCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:versionName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.NFC"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-sdk</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:minSdkVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"14"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-feature</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.hardware.nfc"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:required</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/ic_launcher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.reno.Beam"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:launchMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"singleTop"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.nfc.action.TECH_DISCOVERED"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta-data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.nfc.action.TECH_DISCOVERED"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:resource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@xml/nfc_tech_filter"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  res / xml / nfc_tech_filter.xml Ôºö <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xliff</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"urn:oasis:names:tc:xliff:document:1.2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tech-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tech</span></span></span><span class="hljs-tag">&gt;</span></span>android.nfc.tech.MifareClassic<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tech</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tech-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  An example of how to read the MifareClassic map: <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Intent intent)</span></span></span><span class="hljs-function"> </span></span>{ Tag tagFromIntent = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String tech : tagFromIntent.getTechList()) { System.out.println(tech); } <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> auth = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; MifareClassic mfc = MifareClassic.get(tagFromIntent); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { String metaInfo = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-comment"><span class="hljs-comment">//Enable I/O operations to the tag from this TagTechnology object. mfc.connect(); int type = mfc.getType(); int sectorCount = mfc.getSectorCount(); String typeS = ""; switch (type) { case MifareClassic.TYPE_CLASSIC: typeS = "TYPE_CLASSIC"; break; case MifareClassic.TYPE_PLUS: typeS = "TYPE_PLUS"; break; case MifareClassic.TYPE_PRO: typeS = "TYPE_PRO"; break; case MifareClassic.TYPE_UNKNOWN: typeS = "TYPE_UNKNOWN"; break; } metaInfo += "Card typeÔºö" + typeS + "n with" + sectorCount + " Sectorsn, " + mfc.getBlockCount() + " BlocksnStorage Space: " + mfc.getSize() + "Bn"; for (int j = 0; j &lt; sectorCount; j++) { //Authenticate a sector with key A. auth = mfc.authenticateSectorWithKeyA(j, MifareClassic.KEY_DEFAULT); int bCount; int bIndex; if (auth) { metaInfo += "Sector " + j + ": Verified successfullyn"; bCount = mfc.getBlockCountInSector(j); bIndex = mfc.sectorToBlock(j); for (int i = 0; i &lt; bCount; i++) { byte[] data = mfc.readBlock(bIndex); metaInfo += "Block " + bIndex + " : " + bytesToHexString(data) + "n"; bIndex++; } } else { metaInfo += "Sector " + j + ": Verified failuren"; } } promt.setText(metaInfo); } catch (Exception e) { e.printStackTrace(); } }</span></span></code> </pre> <br><h4>  About the authors </h4>  Songyue Wang and Liang Zhang are engineers at Intel Software and Service Group, developing mobile applications, including those for Android, and optimizing them for the x86 platform. </div><p>Source: <a href="https://habr.com/ru/post/194344/">https://habr.com/ru/post/194344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../194332/index.html">TeamLab PM for iOS as the start of a series of mobile applications for business</a></li>
<li><a href="../194334/index.html">Sales of GTA 5 in the first 24 hours amounted to $ 800 million</a></li>
<li><a href="../194336/index.html">Microsoft buys almost all old mobile devices</a></li>
<li><a href="../194338/index.html">Neustar: the risk assessment of new gTLDs is greatly overestimated</a></li>
<li><a href="../194340/index.html">We leave to the finish line - two weeks before #FailOverConf Ukraine!</a></li>
<li><a href="../194346/index.html">Linux Malware Detect - antivirus for web servers</a></li>
<li><a href="../194352/index.html">Kiev ITSM meeting on September 26</a></li>
<li><a href="../194354/index.html">VoxImplant - a cloud platform for developers of communication services and applications</a></li>
<li><a href="../194356/index.html">Easy setup Asterisk + Fail2Ban</a></li>
<li><a href="../194358/index.html">Breaking stereotypes: Female voice of World of Tanks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
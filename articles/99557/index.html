<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Security Overview Silverlight 4 applications. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the continuation to the first part , in which we looked at how Silverlight protects the end user. In this part, we will look at how to create secur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Security Overview Silverlight 4 applications. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/85/50/855009e7e0d41dbdc5ab6df0a45092a8.jpg" alt="image" align="left">  In the continuation to the <a href="http://habrahabr.ru/blogs/silverlight/99079/">first part</a> , in which we looked at how Silverlight protects the end user.  In this part, we will look at how to create secure sites using Silverlight.  All links at the end of the topic. <br><a name="habracut"></a><br><h4>  Creating Secure Websites Using Silverlight </h4><br>  Sites using Silverlight have the same security issues as regular sites that do not use it. <br><br><h5>  Cross Site Scripting (XSS) </h5><br>  As with regular HTML sites, Silverlight developers need to be attentive to the XSS problem.  XSS allows an attacker to run program code on a client‚Äôs computer.  This gives the attacker access to cookies and other confidential information.  Having this information has a different impact on security.  For online stores, an attacker can order products in the user name.  Other bad things can be done in banks. <br><br>  XSS problems are possible in Silverlight, but they are less likely than in traditional HTML.  Problems arise when an attacker sends a dangerous string to an uncontrolled field.  Here are some examples when XSS vulnerability is possible: <br><ul><li>  Call <u>XamlReader.Load ()</u> on a string passed by the attacker.  You cannot call this method without first checking the string for XSS. </li><li>  Calling <u>Assembly.Load ()</u> for a harmful DLL </li><li>  <u>Creating XML</u> by concatenating strings, for example, in order to send a request for a REST service.  (System.Xml provides more efficient ways to create XML, including System.Xml.XmlWriter System.Xml.Linq.XElement) </li><li>  Using Silverlight to create HTML through System.Windows.Browser </li><li>  Use System.Windows.Controls.WebBrowser.NavigateToString () in the browser from within the application. </li><li>  .Xap files uploaded by users. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Silverlight Isolation with HTML / JavaScript </h5><br>  Silverlight runs as part of the HTML page, but what happens if the application does not trust HTML or vice versa?  Silverlight allows you to block communication in both directions.  Blocked by default when .XAP and HTML are loaded from different domains. <br><br>  The <b>EnableHtmlAccess</b> property <b>allows</b> .XAP to invoke JavaScript methods and modify HTML pages.  EnableHtmlAccess is specified in the &lt;object&gt; tag when inserting Silverlight.  If .XAP and HTML are from the same domain, then by default the property is enabled otherwise - no. <br><br>  The <b>ExternalCallersFromCrossDomain</b> property and the <b>[ScriptableTypeAttribute]</b> / <b>[ScriptableMemberAttribute] attributes</b> specify .XAP and allow you to control whether these methods can be called from JavaScript.  In order for JavaScript to call these methods, it must pass the ExternalCallersFromCrossDomain check and the class must be decorated with [ScriptableTypeAttribute] and this method must be [ScriptableMemberAttribute].  JavaScript can only call methods of classes specified in the application.  ExternalCallersFromCrossDomain has two settings, ScriptableOnly and NoAccess with NoAccess default. <br><br><h5>  Isolating Silverlight code from other Silverlight code </h5><br>  In order to isolate Silverlight code from other Silverlight code, you need to run them in separate applications hosted on separate domains. <br><br><h5>  Data transfer between Silverlight applications </h5><br>  Silverlight applications running in separate &lt;object&gt; tags can communicate either using JavaScript or using System.Windows.Messaging.LocalMessageReceiver / LocalMessageSender.  Messaging allows applications to send messages to other applications and receive them.  By default, senders are sent, and recipients only accept messages from applications that are located on the same domain.  You can add trusted domains for senders and recipients.  Clients can use Global reach.  They should be used carefully, as the sender and recipient can be from any domain.  There is no way to check for which domain the message is sent, however the recipient knows which domain sent it. <br><br><h5>  Prevent unauthorized file reuse.  Xap </h5><br>  To check that your .XAP is placed on the page, you need to include the following XAP code in startup: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">If (App.Current.Host.Settings.EnableHTMLAccess == <font color="#0000ff">false</font> ) <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Exception(); <br> <font color="#0000ff">string</font> htmlurl = System.Windows.Browser.HtmlPage.Document.DocumentUri.ToString(); <br> <font color="#0000ff">if</font> (htmlurl != ‚Äúhttp: <font color="#008000">//foo.com/mypage.html‚Äù)</font> <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Exception(); <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h5>  Validation on the server </h5><br>  Silverlight applications do not change the way server requests are authenticated. <br><br>  <b>Verification of incoming data</b> - like non-Silverlight sites, on the server you need to make sure that the input data does not contain SQL, HTML / JavaScript commands, which will subsequently be displayed on the page.  Keep in mind that an attacker may not use the Silverlight application, but send the HTTP request directly to the server bypassing the application. <br><br>  <b>Securing Services</b> - Silverlight applications often use services as a link between an application and a server.  These interfaces must be protected and verified. <br><br>  <b>Fake Cross Domain Requests (CSRF)</b> - Web servers should verify that requests come from the correct page.  For example, see the Microsoft security policy file <a href="">http://microsoft.com/clientaccesspolicy.xml.</a>  The site indicates which URLs can make cross-domain queries. <br><br><h5>  Protection of information inside.  Xap </h5><br>  Storing confidential information (such as passwords, keys, or proprietary algorithms) in the .XAP file is problematic.  In general, it is not possible to protect such information from an attacker.  Libraries can be encoded using .NET obfuscators.  However, while obfuscation can slow the attacker, but can not interfere.  The search also shows that there are <a href="http://www.google.com/search%3Fclient%3Dopera%26rls%3Dru%26q%3Dxaml%2Bobfuscation%26sourceid%3Dopera%26ie%3Dutf-8%26oe%3Dutf-8">XAML markup obfuscators</a> . <br><br><h5>  API for security </h5><br>  Silverlight offers a variety of security services and APIs to ensure the integrity and confidentiality of data transmitted over the network. <br><br>  <b>HTTPS is supported</b> for both .XAP and for any requests it sends.  Silverlight 4 Beta adds support for the <b>Referer</b> header, which allows the server to know where the user came from.  You need to be careful when using the Referer header and not use it for security checks.  An attacker can set any value to this header. <br><br>  System.Security.Cryptography contains interfaces for <b>AES private key encryption</b> , <b>SHA1</b> and <b>SHA256 hashing,</b> and <b>HMAC digital signatures</b> .  (Silverlight does not include public key encryption) <br><br>  Silverlight supports <b>PlayReady digital rights management (DRM)</b> to control access to media files.  Silverlight 4 Beta adds support for <b>H.264</b> protection and protection for offline scripts. <br><br><h4>  Conclusion </h4><br>  Silverlight was built from the ground up with safety as a top priority.  Silverlight isolates web applications to protect users from malicious websites.  Silverlight also helps keep your website safe from attack, providing default settings and making XSS errors difficult to implement.  Understanding the security model of Silverlight helps you create secure websites that use Silverlight. <br><br><h4>  Literature and links </h4><br><ul><li>  <a href="http://msdn.microsoft.com/en-us/library/cc197955(VS.95).aspx">Making a Service Available Across Domain Boundaries</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/cc645032(VS.95).aspx">Network Security Access Restrictions in Silverlight</a> </li><li>  <a href="http://www.microsoft.com/security/sdl/default.aspx">Microsoft Security Development Lifecycle</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/dd470128(VS.95).aspx">Silverlight Application Security Model</a> </li><li>  <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3D7cef15a8-8ae6-48eb-9621-ee35c2547773%26displaylang%3Den">Silverlight Applications.docx Security Guidance for Writing and Deploying</a> </li><li>  <a href="http://blogs.msdn.com/cfs-file.ashx/__key/CommunityServer-Components-PostAttachments/00-09-92-59-48/Silverlight-security-overview.doc">Silverlight 4 Security Overview.doc</a> </li><li>  <a href="http://wpl.codeplex.com/">Microsoft Web Protection Library</a> is an excellent library for working with XSS.  It can also be used in ASP.NET sites. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/99557/">https://habr.com/ru/post/99557/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99550/index.html">New version of Keenko - integration with VKontakte, support for Firefox4</a></li>
<li><a href="../99551/index.html">Livescribe upgraded your pen-computer</a></li>
<li><a href="../99553/index.html">HDD Spinpoint MT2 2.5-inch 1TB came out</a></li>
<li><a href="../99555/index.html">Full review of the prototype of Windows Phone 7</a></li>
<li><a href="../99556/index.html">Electronic accounting to the masses</a></li>
<li><a href="../99559/index.html">IGoogle theme moderation: naked grandmothers in the directory</a></li>
<li><a href="../99561/index.html">How Microsoft DevDiv uses TFS - part 2</a></li>
<li><a href="../99562/index.html">French and English fighters do not know what to do next</a></li>
<li><a href="../99563/index.html">Google account temporarily disabled</a></li>
<li><a href="../99565/index.html">Server grants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
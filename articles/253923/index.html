<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DlangUI - Cross-platform GUI for D (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I like the language D. I have been following its development for a long time. For D, there are several GUI libraries and binders, but I decided to rei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DlangUI - Cross-platform GUI for D (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  I like the language D. I have been following its development for a long time.  For D, there are several GUI libraries and binders, but I decided to reinvent my bike. <br>  I want to talk about your project <a href="https://github.com/buggins/dlangui">DlangUI</a> .  I hope that he will be useful to someone. <br><br><img src="https://habrastorage.org/files/54f/b63/b5a/54fb63b5a87749e18bfb6f0777fc2c08.png"><br><br>  On Cddv screenshot DlangIDE - an application written in DlangUI. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Features: </h2><ul><li>  Cross-platform - supported by Windows, Linux, Mac OSX;  ease of porting to other platforms </li><li>  Written in D - easily expanded </li><li>  Using Layouts for Positioning Interface Elements </li><li>  Scaling of fonts and icons in the application, depending on the screen resolution </li><li>  Unicode support </li><li>  Internationalization - support translate UI into multiple languages </li><li>  Hardware acceleration using OpenGL (optional) </li><li>  Ability to render widgets over the OpenGL scene (for example, for the in-game UI) </li><li>  Small size of executable file </li><li>  The appearance of the interface is configured using themes (two standard themes - light and dark) </li><li>  Embedding resources in an executable file </li><li>  Open source, licensed under Boost License 1.0 </li></ul><a name="habracut"></a><br><br><h2>  A couple more screenshots </h2><br><h3>  DlangUI demo - example1 </h3><img src="https://habrastorage.org/files/315/1b2/83b/3151b283b1974473b317495b389124a1.png"><br><br><h3>  Demo DlangUI - Tetris </h3><img src="https://habrastorage.org/files/683/1c0/e4e/6831c0e4ebe54f00a3f5dbef71be490d.png"><br><br><h1>  Why do we need another GUI library? </h1><br>  For D there are many GUI libraries.  A complete list can be found on <a href="http://wiki.dlang.org/Libraries_and_Frameworks">wiki.dlang.org</a> <br>  If binding to GTK, Qt, wxWidgets, FLTK, and even SWT port from Java to D (DWT). But they pull a lot of dependencies with them, it‚Äôs difficult to expand the set of widgets, change their appearance. <br>  Native, written in D, DFL and DGUI - work only under Windows. <br>  Therefore, writing your own bike GUI is not such a stupid idea. <br><br><h1>  Let's get acquainted with Hello, World </h1><br>  To build and run the application on DlangUI, we need a D compiler (for example, <a href="http://dlang.org/download.html">dmd</a> ) and DUB (build tool and dependency manager).  Download and install them if they are not already there. <br>  Create a directory for the project, in it create a project file for DUB - dub.json <br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"helloworld"</span></span>, <span class="hljs-string"><span class="hljs-string">"targetPath"</span></span>: <span class="hljs-string"><span class="hljs-string">"bin"</span></span>, <span class="hljs-string"><span class="hljs-string">"targetName"</span></span>: <span class="hljs-string"><span class="hljs-string">"helloworld"</span></span>, <span class="hljs-string"><span class="hljs-string">"targetType"</span></span>: <span class="hljs-string"><span class="hljs-string">"executable"</span></span>, <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"dlangui"</span></span>: <span class="hljs-string"><span class="hljs-string">"~master"</span></span>, } }</code> </pre> <br><br>  Also, in the src subdirectory, create a file src / helloworld.d with the following contents: <pre> <code class="hljs pgsql">module app; //   dlangui <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dlangui; //   main  WinMain    mixin APP_ENTRY_POINT; //     DlangUI -   main    extern (C) <span class="hljs-type"><span class="hljs-type">int</span></span> UIAppMain(string[] args) { //   <span class="hljs-keyword"><span class="hljs-keyword">Window</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> = Platform.instance.createWindow("DlangUI example - HelloWorld", <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); //          <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.mainWidget = (<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button()).text("Hello, world!"d).margins(Rect(<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>)); //   <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>(); //   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Platform.instance.enterMessageLoop(); }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">An easier way to create a new DUB project is with dub init</b> <div class="spoiler_text"><br>  There is a more convenient way to create a new project DUB.  Use the command <br><pre> <code class="bash hljs">dub init helloworld</code> </pre><br>  DUB will create a directory with the specified name, the file dub.json, .gitignore and source / app.d <br>  The initial content of dub.json: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"helloworld"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A minimal D application."</span></span>, <span class="hljs-string"><span class="hljs-string">"copyright"</span></span>: <span class="hljs-string"><span class="hljs-string">"Copyright ¬© 2015, username"</span></span>, <span class="hljs-string"><span class="hljs-string">"authors"</span></span>: [<span class="hljs-string"><span class="hljs-string">"username"</span></span>], <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { } }</code> </pre><br>  Just add the dlangui dependency here. <br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"dlangui"</span></span>: <span class="hljs-string"><span class="hljs-string">"~master"</span></span>, }</code> </pre><br>  Replace the contents of the app.d file with the helloworld code <br></div></div><br><br>  Now we can run the application.  In the command line, in the project directory with dub.json run the command: <pre> <code class="bash hljs">dub run</code> </pre><br>  Upon successful compilation, the application will start immediately.  Window with a single button: <br><img src="https://habrastorage.org/files/60b/863/627/60b863627c244ca79d28a868b4518638.png"><br><br>  You can also see examples from dlangui (demo of almost all example1 widgets and the tetris game): <pre> <code class="bash hljs">dub fetch dlangui dub run dlangui:example1 dub run dlangui:tetris</code> </pre><br><br>  Another application - DlangIDE: <pre> <code class="bash hljs">dub fetch dlangide dub run dlangide</code> </pre><br><br><h1>  Widgets &amp; layouts </h1><br>  Complicate our application.  Add some widgets. <br><br>  We will use simple widgets: <ul><li>  TextWidget - text </li><li>  Button - text button </li><li>  ImageButton - button with a picture </li><li>  ImageTextButton - a button with a picture and text </li><li>  CheckBox - clear from the title </li><li>  RadioButton - clear from the title </li><li>  ImageWidget - image </li><li>  EditLine - single line editor </li><li>  ComboBox - combo box - to select an item from the dropdown list </li></ul><br><br>  An example of creating a simple text button: <pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> btn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Button(<span class="hljs-string"><span class="hljs-string">"btn1"</span></span>, <span class="hljs-string"><span class="hljs-string">"Button 1"</span></span>d);</code> </pre><br><br>  Here ‚Äúbtn1‚Äù is the widget identifier, usually used to search for it in the parent widget or to distinguish one widget from another in the general event handler. <br><br>  ‚ÄúButton 1‚Äù d - button text.  Note the d suffix is ‚Äã‚Äãutf32 - dstring.  Usually, in DlangUI widget constructors, the text itself can be transferred as text - as utf32 dstring, or the identifier of a string resource as a normal string - to support translation of the interface into several languages. <br><br>  Widgets can have nested widgets. <br>  Layouts - container widgets for aligning other widgets.  Similar to those used in the Android UI: <ul><li>  VerticalLayout - arrange nested widgets vertically </li><li>  HorizontalLayout - arrange nested widgets vertically </li><li>  TableLayout - arrange nested widgets in several columns, as in the table </li></ul><br><br>  Creating a VerticalLayout and adding a pair of buttons to it: <pre> <code class="hljs pgsql"> auto vlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); //     vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio1", "Radio Button 1"d)); vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio2", "Radio Button 2"d));</code> </pre><br>  Let's correct our example - we will make a form with a complex structure. <br><pre> <code class="hljs pgsql">module app; //   dlangui <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dlangui; //   main  WinMain    mixin APP_ENTRY_POINT; //     DlangUI -   main    extern (C) <span class="hljs-type"><span class="hljs-type">int</span></span> UIAppMain(string[] args) { //   <span class="hljs-keyword"><span class="hljs-keyword">Window</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> = Platform.instance.createWindow("DlangUI example - HelloWorld", <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); //    -  ,      auto mainWidget = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " HorizontalLayout:"d)); //  auto hlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> HorizontalLayout(); //     hlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn1", " 1"d)); hlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn2", " 2"d)); hlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn3", " 3"d)); hlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> CheckBox("btn4", " CheckBox"d)); mainWidget.addChild(hlayout); mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " VerticalLayout:"d)); //  auto vlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); //     vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio1", "Radio Button 1"d)); vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio2", "Radio Button 2"d)); vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio3", "Radio Button 3"d)); mainWidget.addChild(vlayout); mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " TableLayout -   2 :"d)); //  auto tlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TableLayout(); //  /  tlayout.colCount = <span class="hljs-number"><span class="hljs-number">2</span></span>; tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " "d)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> EditLine("edit1", "-   "d)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "ComboBox"d)); tlayout.addChild((<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ComboBox("combo1", [" 1"d, " 2"d, " 3"d])).selectedItemIndex(<span class="hljs-number"><span class="hljs-number">0</span></span>)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " RadioButton"d)); //  Layout    Layout: auto radiogroup = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); radiogroup.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("rb1", " 1"d)); radiogroup.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("rb2", " 2"d)); radiogroup.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("rb3", " 3"d)); tlayout.addChild(radiogroup); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " ImageTextButton"d)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ImageTextButton("btn_ok", "dialog-ok-apply", " "d)); mainWidget.addChild(tlayout); //          <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.mainWidget = mainWidget; //   <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>(); //   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Platform.instance.enterMessageLoop(); }</code> </pre><br><br>  Here's what we got: <br><img src="https://habrastorage.org/files/f49/998/598/f499985982d8441eaab772d2c70b9cac.png"><br><br><h1>  Processing signals (events) from widgets </h1><br><br>  Consider the signal processing on the example of the onClick signal <br><br>  Add handlers for clicking on buttons - let them switch the interface theme. <br><br>  In our example, we are changing the piece of code from RadioButton to VerticalLayout. <br><br><pre> <code class="hljs pgsql"> mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "  :"d)); auto vlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); // addChild()   ,         , //       . vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio1", ""d)).checked(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>).onClickListener = delegate(Widget src) { platform.instance.uiTheme = "theme_default"; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }; vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio2", ""d)).onClickListener = delegate(Widget src) { platform.instance.uiTheme = "theme_dark"; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }; mainWidget.addChild(vlayout);</code> </pre><br><br>  Here's what happened: <br><img src="https://habrastorage.org/files/33f/f7d/af4/33ff7daf4782497595b84569bb81ca25.png"><br><br>  Explanations: <br><br>  onClickListener is a signal available in any widget. Here is how it is described: <pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> interface - slot <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> onClick interface OnClickHandler { bool onClick(Widget source); } /<span class="hljs-regexp"><span class="hljs-regexp">/..... class Widget { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/... Signal!OnClickHandler onClickListener; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/... }</span></span></code> </pre><br>  The handler can be a delegate of the appropriate type. <br><br>  You can connect an event handler in different ways. <br>  Sample onClick Handler - Regular Delegate <br><pre> <code class="hljs objectivec"> auto button1 = new Button(<span class="hljs-string"><span class="hljs-string">"btn1"</span></span>, <span class="hljs-string"><span class="hljs-string">" 1"</span></span>d); button1.onClickListener = delegate(Widget src) { window.showMessageBox(<span class="hljs-built_in"><span class="hljs-built_in">UIString</span></span>(<span class="hljs-string"><span class="hljs-string">" onClick"</span></span>d), <span class="hljs-built_in"><span class="hljs-built_in">UIString</span></span>(<span class="hljs-string"><span class="hljs-string">"\ndelegate"</span></span>d)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; };</code> </pre><br><br>  An example of an onClick processor - class method <br><pre> <code class="hljs cpp"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyOnClickHandler1</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onButtonClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Widget src)</span></span></span><span class="hljs-function"> </span></span>{ src.window.showMessageBox(UIString(<span class="hljs-string"><span class="hljs-string">" onClick"</span></span>d), UIString(<span class="hljs-string"><span class="hljs-string">" MyOnClickHandler1.onClick\n   id="</span></span>d ~ to!dstring(src.id))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> memberFunctionHandler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyOnClickHandler1(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> button2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Button(<span class="hljs-string"><span class="hljs-string">"btn2"</span></span>, <span class="hljs-string"><span class="hljs-string">" 2"</span></span>d); button2.onClickListener = &amp;memberFunctionHandler.onButtonClick; hlayout.addChild(button2);</code> </pre><br><br>  An example of the onClick processor - a class that defines the interface used in determining the signal <br><pre> <code class="hljs pgsql"> //   onClick - ,    <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MyOnClickHandler2 : OnClickHandler { override <span class="hljs-type"><span class="hljs-type">bool</span></span> onClick(Widget src) { src.<span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.showMessageBox(UIString(" onClick"d), UIString(" MyOnClickHandler2.onClick\n   id="d ~ <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>!dstring(src.id))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } auto interfaceHandler = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MyOnClickHandler2(); auto button4 = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn4", "  4"d); button2.onClickListener = interfaceHandler; //   onClick     OnClickHandler</code> </pre><br><br>  Other useful signals from the Widget class: <br><ul><li>  onCheckChangeListener - the checked state is changed (for example, for CheckBox, RadioButton) </li><li>  onFocusChangeListener - changed the focus state of this widget </li><li>  onKeyListener - intercepting keyboard events </li><li>  onMouseListener - capture mouse events </li></ul><br><br><br><h1>  Commonly used widget properties </h1><br><ul><li>  margins - indent from adjacent widgets or container borders (the widget's background is indented with margins) </li><li>  padding - indent from the borders of the widget to its internal elements </li><li>  backgroundColor - background color (32 bit uint, 0xAARRGGBB) </li><li>  backgroundImageId - background image - resource id </li><li>  textColor - text color (32 bit uint, 0xAARRGGBB) </li><li>  fontSize - font size </li></ul><br>  These and many other properties can be set both directly and as styles (defined in the file - theme). <br>  You can assign a style using the styleId property.  For example, we change the style of the header when selecting the interface theme. <br><pre> <code class="hljs cs"> mainWidget.addChild(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TextWidget(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"  :"</span></span>d)).styleId(<span class="hljs-string"><span class="hljs-string">"POPUP_MENU"</span></span>);</code> </pre><br><br>  Example: add padding to the main widget and make it a translucent yellow background. <br><pre> <code class="hljs objectivec"> <span class="hljs-comment"><span class="hljs-comment">//      10 ,       15  mainWidget.margins(Rect(10, 10, 10, 10)).padding(Rect(15, 15, 15, 15)); mainWidget.backgroundColor(0xC0FFFF00); //   </span></span></code> </pre><br><br>  In TableLayout, let's assign a background image ‚Äúbtn_default.png‚Äù.  Resource Id is the name of the file with no extension.  The .9.png extensions denote the nine-patch, a scalable version, as in <a href="http://habrahabr.ru/post/113623/">Android</a> . <br>  Also add padding - indent for nested widgets. <br><pre> <code class="hljs ruby"> tlayout.backgroundImageId(<span class="hljs-string"><span class="hljs-string">"btn_default"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    - btn_default.<span class="hljs-number"><span class="hljs-number">9</span></span>.png    tlayout.padding(Rect(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     - <span class="hljs-number"><span class="hljs-number">5</span></span> </code> </pre><br>  In the TextWidget header for TableLayout, we change the font size and color. <br><pre> <code class="hljs ruby"> tlayout.backgroundImageId(<span class="hljs-string"><span class="hljs-string">"btn_default"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    - btn_default.<span class="hljs-number"><span class="hljs-number">9</span></span>.png    tlayout.padding(Rect(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     - <span class="hljs-number"><span class="hljs-number">5</span></span> </code> </pre><br>  Here is what happened: <br><img src="https://habrastorage.org/files/d4c/a20/9b1/d4ca209b1c03498d8c38ba456e2e7307.png"><br><div class="spoiler">  <b class="spoiler_title">The current helloworld.d code is:</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">module app; //   dlangui <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> dlangui; //   main  WinMain    mixin APP_ENTRY_POINT; //     DlangUI -   main    extern (C) <span class="hljs-type"><span class="hljs-type">int</span></span> UIAppMain(string[] args) { //     ,   - <span class="hljs-number"><span class="hljs-number">800</span></span>x600 <span class="hljs-keyword"><span class="hljs-keyword">Window</span></span> <span class="hljs-keyword"><span class="hljs-keyword">window</span></span> = Platform.instance.createWindow("DlangUI example - HelloWorld", <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, WindowFlag.Resizable, <span class="hljs-number"><span class="hljs-number">600</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>); //    -  ,      auto mainWidget = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); //      <span class="hljs-number"><span class="hljs-number">10</span></span> ,       <span class="hljs-number"><span class="hljs-number">15</span></span>  mainWidget.margins(Rect(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)).padding(Rect(<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>)); mainWidget.backgroundColor(<span class="hljs-number"><span class="hljs-number">0xC0FFFF00</span></span>); //    mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " HorizontalLayout:"d)); //  auto hlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> HorizontalLayout(); //     //   onClick -  auto button1 = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn1", " 1"d); button1.onClickListener = delegate(Widget src) { <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.showMessageBox(UIString(" onClick"d), UIString("\ndelegate"d)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }; hlayout.addChild(button1); //   onClick -   <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MyOnClickHandler1 { <span class="hljs-type"><span class="hljs-type">bool</span></span> onButtonClick(Widget src) { src.<span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.showMessageBox(UIString(" onClick"d), UIString(" MyOnClickHandler1.onClick\n   id="d ~ <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>!dstring(src.id))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } auto memberFunctionHandler = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MyOnClickHandler1(); auto button2 = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn2", " 2"d); button2.onClickListener = &amp;memberFunctionHandler.onButtonClick; hlayout.addChild(button2); //            hlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn3", " 3"d)).onClickListener = &amp;memberFunctionHandler.onButtonClick; //   onClick - ,    <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MyOnClickHandler2 : OnClickHandler { override <span class="hljs-type"><span class="hljs-type">bool</span></span> onClick(Widget src) { src.<span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.showMessageBox(UIString(" onClick"d), UIString(" MyOnClickHandler2.onClick\n   id="d ~ <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>!dstring(src.id))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } auto interfaceHandler = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MyOnClickHandler2(); auto button4 = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Button("btn4", "  4"d); button2.onClickListener = interfaceHandler; //   onClick     OnClickHandler hlayout.addChild(button4); mainWidget.addChild(hlayout); mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "  :"d)).styleId("POPUP_MENU"); auto vlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio1", ""d)).checked(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>).onClickListener = delegate(Widget src) { platform.instance.uiTheme = "theme_default"; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }; vlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("radio2", ""d)).onClickListener = delegate(Widget src) { platform.instance.uiTheme = "theme_dark"; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }; mainWidget.addChild(vlayout); //        ,       mainWidget.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " TableLayout -   2 :"d)).textColor(<span class="hljs-number"><span class="hljs-number">0xC00000</span></span>).fontSize(<span class="hljs-number"><span class="hljs-number">26</span></span>).alignment(Align.Right); auto tlayout = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TableLayout(); //  /  tlayout.backgroundImageId("btn_default"); //    - btn_default<span class="hljs-number"><span class="hljs-number">.9</span></span>.png    tlayout.padding(Rect(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)); //     - <span class="hljs-number"><span class="hljs-number">5</span></span>  tlayout.colCount = <span class="hljs-number"><span class="hljs-number">2</span></span>; tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " "d)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> EditLine("edit1", "-   "d)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, "ComboBox"d)); tlayout.addChild((<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ComboBox("combo1", [" 1"d, " 2"d, " 3"d])).selectedItemIndex(<span class="hljs-number"><span class="hljs-number">0</span></span>)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " RadioButton"d)); //  Layout    Layout: auto radiogroup = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> VerticalLayout(); radiogroup.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("rb1", " 1"d)); radiogroup.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("rb2", " 2"d)); radiogroup.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> RadioButton("rb3", " 3"d)); tlayout.addChild(radiogroup); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> TextWidget(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, " ImageTextButton"d)); tlayout.addChild(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ImageTextButton("btn_ok", "dialog-ok-apply", " "d)); mainWidget.addChild(tlayout); //          <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.mainWidget = mainWidget; //   <span class="hljs-keyword"><span class="hljs-keyword">window</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>(); //   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Platform.instance.enterMessageLoop(); }</code> </pre></div></div><br>  The same program running on Ubuntu: only the window frame and fonts differ. <br><img src="https://habrastorage.org/files/cec/bc4/ce0/cecbc4ce03df4dfba26fad3eef886363.png"><br><br>  The size of helloworld.exe, built by dmd2 under windows (dub build - build = release) is 1.4Mb, 200K of which are resources. <br>  In the presence of libfreetype-6.dll (700K) and zlib1.dll (84K) - DUB is automatically copied to the bin directory - uses FreeType to render fonts, otherwise win32 API. <br><br>  Binary file built in Ubuntu x64 using dmd - 4Mb. <br><br><h1>  Other useful widgets </h1><br><ul><li>  EditBox - multiline editor </li><li>  TreeWidget - tree </li><li>  StringGrid - table, similar to Excel </li><li>  TabWidget - tabs - to select pages </li><li>  AppFrame is the base class of the main widget of the window with menus, toolbars and a status line, for the convenience of writing such applications. </li><li>  Scrollbar </li><li>  Toolbar </li><li>  StatusLine </li><li>  ScrollWidget - implements scrolling of the widget attached to it if the dimensions exceed the available space </li><li>  DockHost, DockWidget - for applications with dock widgets on the edges of the main window widget (as in the IDE) </li></ul><br><br><h1>  Links </h1><br><ul><li>  <a href="https://github.com/buggins/dlangui">Project page on GitHub</a> </li><li>  <a href="http://buggins.github.io/dlangui/ddox/">Online Documentation</a> </li><li>  <a href="https://github.com/buggins/dlangui/issues">Bugtracker</a> </li><li>  <a href="http://buggins.github.io/dlangui/screenshots.html">Screenshots</a> </li><li>  <a href="https://github.com/buggins/dlangide">DlangIDE project page on GitHub</a> </li><li>  <a href="https://gitter.im/buggins/dlangui">Chat in gitter</a> </li></ul><br><br><h1>  To be continued... </h1><br><br>  Do I need the next part?  What else to tell?  Write in the comments ... <br><br></div><p>Source: <a href="https://habr.com/ru/post/253923/">https://habr.com/ru/post/253923/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253909/index.html">(Archive) The first version of the Matreshka.js framework has been released</a></li>
<li><a href="../253913/index.html">JavaScript internationalization API: implementation in Firefox</a></li>
<li><a href="../253917/index.html">Perl 6 and Markov sequences</a></li>
<li><a href="../253919/index.html">Gaming headphones. Sound for gamers. Sound illusions</a></li>
<li><a href="../253921/index.html">Conference ProfsoUX 2015: Review of applications for speeches</a></li>
<li><a href="../253925/index.html">Create your own weather station, integrated with the Wolfram Cloud</a></li>
<li><a href="../253929/index.html">How to configure Android and RAD Studio XE7 (Delphi, C ++ Builder)</a></li>
<li><a href="../253935/index.html">Overview of the new version of EOS for SharePoint 2013</a></li>
<li><a href="../253937/index.html">Monitor AD users on your knee for free</a></li>
<li><a href="../253941/index.html">Gravatar: How to decrypt email addresses of all users?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
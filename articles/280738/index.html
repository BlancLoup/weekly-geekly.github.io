<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to make Parallax multi-layered illustration on CSS & JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Figure used for parallax effect. By Patryk Zabielski 

 Hi friends, I will show you how to create a simple layered illustration with the depth that go...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to make Parallax multi-layered illustration on CSS & JavaScript</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/4ad/bcb/bb4/4adbcbbb41bd4490ad80d28b89e67815.png" alt="image"><br>  Figure used for parallax effect.  By Patryk Zabielski <br><br>  Hi friends, I will show you how to create a simple layered illustration with the depth that goes to the content.  We will use a method that requires only css and pure JS (coffeescript) (No jQuery!). <br><br>  This lesson is for beginners, with basic knowledge of JS and CSS, so I will explain most of the things and refer to external sources. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      → <a href="http://codepen.io/zabielski/full/MyoBaY">Final Demo</a> <br><a name="habracut"></a><br><h4>  We will prepare an illustration </h4><br>  Let's start by cutting the illustration into layers.  The best course of events will be what you yourself painted or you have access to the source file with all the layers. <br>  If not, then do not worry, we will deal with this. <br>  I will work with the picture I painted last year.  If you do not have the opportunity to create your own, we can <a href="">download</a> my source before we begin. <br><br><img src="https://habrastorage.org/files/1f2/1a3/561/1f21a356103f4637ae709af69bae6945.png" alt="image"><br>  Visualized concept of layers in 3D space <br><br>  We need to divide the picture into several png files with a transparent background, which will give us the opportunity to create a sense of depth. <br><br>  The layers in the background will move slower than those in the front, which will give us the effect of depth. <br><br>  Another thing that will give us the best transition to the next section is to draw at the bottom of the picture a line of the same color as the background of the page.  I added an inconspicuous line in the foreground at the bottom of the picture. <br><br><img src="https://habrastorage.org/files/d15/82e/8bb/d1582e8bb96d482b8800e1ac8a8fe72f.png" alt="image"><br>  In the picture on the right there is an inconspicuous line that will give us the best transition to the next section. <br><br><h4>  Let's start the code </h4><br><h5>  Preparation </h5><br><h6>  What you need: </h6><br><ul><li>  Fresh project in <a href="http://codepen.io/">Codepen</a> (If you want to follow the code below, do not forget to change HTML to HAML, CSS to SCSS and JS to Coffeescript, in Codepen settings) </li><li>  Basic knowledge of HAML &amp; Sass (SCSS) </li><li>  Basic understanding of Javascript and <a href="http://coffeescript.org/">Coffeescript</a> (If you are still bad with this - I recommend <a href="http://www.javascriptbook.com/">“Javascript &amp; jQuery” by Jon Duckett</a> ) If you do not want to work with Coffeescript, then you can <a href="http://js2.coffee/">automatically convert</a> it to JS and paste the code snippets below to get clean Js </li><li>  Your illustration / photo divided into several png layers </li></ul><br>  Let's start with the HTML structure.  We will make the parent container and give it the ID 'hero'.  Then we add some divs, with the class 'layer' and a data-type attribute with the value 'parallax'. <br><pre><code class="xml hljs">#hero .layer{“data-type” =&gt; “parallax”} .layer{“data-type” =&gt; “parallax”} .layer{“data-type” =&gt; “parallax”} .layer{“data-type” =&gt; “parallax”} .layer{“data-type” =&gt; “parallax”}</code> </pre> <br>  Add basic styles.  Let's start with #hero.  I set the height of the illustration 800px <br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#hero</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">800px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: hidden; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: relative; }</code> </pre><br>  Now let's move on to styling a repeating layer class.  Each of them will have the same height, like #hero and positioning, and we will add <i>position: fixed</i> <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.layer</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-position</span></span>: bottom center; <span class="hljs-attribute"><span class="hljs-attribute">background-size</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">background-repeat</span></span>: no-repeat; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">800px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: fixed; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: -<span class="hljs-number"><span class="hljs-number">1</span></span>; }</code> </pre><br>  The next thing we want to do is add the pictures that we prepared before.  We will create some more classes, one for each layer.  Then add a link to the image inside the <i>background-image</i> property. <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.layer-01</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'  '</span></span>); } <span class="hljs-selector-class"><span class="hljs-selector-class">.layer-02</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">'  '</span></span>); } //  ..</code> </pre><br>  Do not forget to update the HTML and assign the classes to the desired div in our order, the first layer is the background, the following layers will overlay each other <br><pre> <code class="xml hljs">#hero .layer.layer-01{“data-type” =&gt; “parallax”} .layer.layer-02{“data-type” =&gt; “parallax”} .layer.layer-03{“data-type” =&gt; “parallax”} .layer.layer-04{“data-type” =&gt; “parallax”} .layer.layer-05{“data-type” =&gt; “parallax”}</code> </pre><br><h5>  Javascript time </h5><br>  Add a method that will check if the user has started scrolling down the page. <br><pre> <code class="coffeescript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener <span class="hljs-string"><span class="hljs-string">'scroll'</span></span>, (event)</code> </pre><br><blockquote>  The EventTarget.addEventListener () method registers a listener on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget">EventTarget</a> .  The event target can be <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element">an element</a> in the document, the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document">document</a> itself, a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window">Window</a> object, or any object that supports events (such as <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> ) </blockquote><br>  Let's save the number of pixels that are scrolled vertically from the beginning of the page into the variable <i>topDistance</i> .  To do this, we will use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY">pageYOffset</a> property <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY">.</a> <br><pre> <code class="coffeescript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener <span class="hljs-string"><span class="hljs-string">'scroll'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event)</span></span></span><span class="hljs-function"> -&gt;</span></span> topDistance = @pageYOffset</code> </pre><br>  After that, we will select all layers in our illustration and save them to the <i>layers</i> variable.  To do this, we will use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll">querySelectorAll</a> method and the data attribute inside the HTML elements that we set before. <br><pre> <code class="coffeescript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener <span class="hljs-string"><span class="hljs-string">'scroll'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event)</span></span></span><span class="hljs-function"> -&gt;</span></span> topDistance = @pageYOffset layers = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(<span class="hljs-string"><span class="hljs-string">"[data-type='parallax']"</span></span>)</code> </pre><br>  The next thing we do is loop through all the layers and apply the <i>transform</i> property to each of them.  But before this, we will specify one more thing inside our HTML file, the data-depth attribute.  It will give us the ability to control how fast the element will move, let's not go deep into the values, we will come back to this later. <br><pre> <code class="xml hljs">#hero .layer.layer-01{“data-type” =&gt; “parallax”, "data-depth" =&gt; "0.10"} .layer.layer-02{“data-type” =&gt; “parallax”, "data-depth" =&gt; "0.20"} .layer.layer-03{“data-type” =&gt; “parallax”, "data-depth" =&gt; "0.50"} .layer.layer-04{“data-type” =&gt; “parallax”, "data-depth" =&gt; "0.80"} .layer.layer-05{“data-type” =&gt; “parallax”, "data-depth" =&gt; "1.00"}</code> </pre><br>  To go through all the elements, we will use a for loop.  We begin our cycle by creating a variable where we will store our layers.  Then we take the value from the data-depth attribute that we specified inside our HTML.  Next, we calculate the movement of the layers by multiplying the scroll distance from the beginning of the page by the value of the data-depth attribute of the layer.  An element with a value of 1.0 will move normally with the rest of the page, you can perceive it as an element with parallax turned off. <br><br>  The last thing we do is update the final motion value for the <i>transform translate3d</i> parameter of the layer, to do this we will use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style">style</a> property along with all the vendor prefixes for the <i>transform</i> . <br><br>  To make the code more readable and <a href="https://en.wikipedia.org/wiki/Don%2527t_repeat_yourself">DRY</a> , we will save the <i>translate3d</i> parameter to the <i>translate3d</i> variable. <br><br><pre> <code class="coffeescript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> layer <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> layers depth = layer.getAttribute(<span class="hljs-string"><span class="hljs-string">'data-depth'</span></span>) movement = -(topDistance * depth) translate3d = <span class="hljs-string"><span class="hljs-string">'translate3d(0, '</span></span> + movement + <span class="hljs-string"><span class="hljs-string">'px, 0)'</span></span> layer.style[<span class="hljs-string"><span class="hljs-string">'-webkit-transform'</span></span>] = translate3d layer.style[<span class="hljs-string"><span class="hljs-string">'-moz-transform'</span></span>] = translate3d layer.style[<span class="hljs-string"><span class="hljs-string">'-ms-transform'</span></span>] = translate3d layer.style[<span class="hljs-string"><span class="hljs-string">'-o-transform'</span></span>] = translate3d layer.style.transform = translate3d</code> </pre><br>  Now when we have specified the data-depth = "1.00" the element will move along with the page as a normal element without the parallax effect. All values ​​less than 100 will have the parallax effect. <br><br><h5>  Telephones </h5><br>  For phones we will disable the parallax version and replace it with a static image in order to maintain performance.  To do this, create a new div below our div #hero, with id hero-mobile and apply display: none to it along with the background and height parameters. <br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#hero-mobile</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"https://s3-us-west-2.amazonaws.com/s.cdpn.io/272781/full_illustration.png"</span></span>) no-repeat center bottom / cover; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">320px</span></span>; }</code> </pre><br>  To show it instead of parallax, we will use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries">media query</a> and apply the display: none parameter to the desktop version, overriding our display: none on display: block for # hero-mobile. <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> all and (max-width: <span class="hljs-number"><span class="hljs-number">640px</span></span>) { <span class="hljs-selector-id"><span class="hljs-selector-id">#hero</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-id"><span class="hljs-selector-id">#hero-mobile</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: block; } }</code> </pre><br>  <a href="http://codepen.io/zabielski/pen/MyoBaY">Final code</a> </div><p>Source: <a href="https://habr.com/ru/post/280738/">https://habr.com/ru/post/280738/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280724/index.html">Databoom control panel. Database management</a></li>
<li><a href="../280726/index.html">Half an hour before the final - Vivaldi 1.0.435.26</a></li>
<li><a href="../280732/index.html">Hangfire - Task Scheduler for .NET</a></li>
<li><a href="../280734/index.html">Opinion: Why you should learn and use Clojure</a></li>
<li><a href="../280736/index.html">Atmel optimized parametric microcontroller search for mobile phones</a></li>
<li><a href="../280742/index.html">After a short break, the mobile section on the DUMP returns</a></li>
<li><a href="../280744/index.html">The Intoxicating Power of Composer Plugins</a></li>
<li><a href="../280746/index.html">German company discovered a new type of extortionist</a></li>
<li><a href="../280748/index.html">Client-oriented "cloud": Experience 1cloud</a></li>
<li><a href="../280750/index.html">IOS client upgrade, Mozilla Firefox webmeeting and roomMaster PMS integration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Server history</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This story happened to me during the previous week - from January 26 to January 31, 2009. Having lived this wonderfully tiny period of my life, I real...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Server history</h1><div class="post__text post__text-html js-mediator-article">  This story happened to me during the previous week - from January 26 to January 31, 2009. Having lived this wonderfully tiny period of my life, I realized the necessity of simple things, believed in the existence of an ‚Äúevent‚Äù and became increasingly disillusioned with people.  This week's tags were RAID, Infobox and backup.  Although it all started much earlier ... <br><a name="habracut"></a><br><h1>  Part one </h1><br>  In January 2008, I rented a server in the St. Petersburg company Infobox.  Mediocre in performance, relatively cheap, he, as well as possible, satisfied my current needs.  The rental service included the initial installation of the operating system, which of course became freebsd and the desired partitioning.  Also, the kind technical support workers combined a pair of 120 gigovy screws into software RAID 1 (mirror).  To take care of the server, I asked my friend, working as a system administrator at once in many places.  He installed a web server, set up all services, including full backup of data to the archives twice a day.  On my home computer, I picked up a script that regularly took these backups and stored them in daddy.  I periodically cleaned my daddy. <br><br>  The reader should agree that, in general, everything turned out quite well: RAID 1 + archives on the server + archives on my home computer, which is turned on around the clock. <br><br>  Immediately, I transferred the <a href="http://cake-php.ru/">CakePHP</a> website from the hosting to the newly created server, and later other sites appeared, known to habra audiences, such as <a href="http://mynotifier.ru/">MyNotifier</a> , <a href="http://code-igniter.ru/">CodeIgniter</a> , my <a href="http://isaykin.ru/">homepage</a> , as well as many other projects that are very distant to my story. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Part two </h1><br>  So I lived myself happily ever after, until in January of this year I decided to update my outdated ubuntu.  From the number 8.04 to the number 8.10, and at the same time the life of the desktop, first start - format the screws and put the OS on a "clean" one.  This noble thing happened on January 23.  There was no big sense to save the accumulated backups: ‚ÄúI will reinstall the system - I will set up the script again and collect the archives,‚Äù I thought.  But life is fast and unpredictable and in the next couple of days I didn‚Äôt manage to devote a lot of time to setting up my new one 8.10. <br><br>  Returning home in the evening of the 26th, I found a contact list of jabber and ICQ that was filled with messages.  All as one wrote that something yes on my sites does not work.  It was not difficult to make sure of this - it is enough to open any of the projects and wait half a minute to load the page with a database error.  Having decided that the matter is simple, I rebooted the prank mysql, but this did not bring the desired effect.  Moreover, the server responded by ssh with the speed of a turtle or slightly slower than that.  The situation was aggravated by the fact that at that time my friend-administrator was traveling peacefully on the St. Petersburg-Moscow train and my worldly problems were not subject to his desire to solve them. <br><br>  With a request to restart the server, I contacted Infobox's technical support.  So began my correspondence with them, consisting at this moment of 53 letters. <br><br>  The server was restarted, but nothing has changed, then I suggested that something had burned, it could have been a cooler or a screw.  It turned out that it was the hard drive, which technical support staff, after an hour and a little, was kindly replaced by running a background copy from the old screw.  It was overnight, and after several fruitless attempts to reach the server, I went to bed, having decided that the background copying that the server had taken so should end by morning.  But in the morning nothing has changed. <br><br>  In the meantime, my administrator arrived in Moscow and after a while he threw me a log of unsuccessful attempts to write to a new hard drive.  It looks like this. <br><blockquote>  ... <br>  Jan 27 10:44:44 oowl kernel: ad6: TIMEOUT - WRITE_DMA retrying (1 retry left) LBA = 74274048 <br>  Jan 27 10:46:14 oowl kernel: ad6: TIMEOUT - WRITE_DMA retrying (1 retry left) LBA = 74344960 <br>  Jan 27 10:47:05 oowl kernel: ad6: TIMEOUT - WRITE_DMA retrying (1 retry left) LBA = 50792319 </blockquote><br>  The next half-day went to the fact that the Infobox engineers themselves were convinced of the impossibility of recording and of the malfunction of the new hard drive.  The hard drive was again changed and now this background copying has started.  By that time, I had already received the 50th letter from users with questions about what had happened. <br><br>  When the server began to respond to requests with an acceptable speed, and I already thought that this was the end of an unpleasant story, but as it turned out, the adventures are just beginning, because I was in the past!  The latest posts on the forums were dated May 24, 2008.  Jobs in MyNotifier confirmed my teleportation.  To make sure that I was not crazy, I had to look at the calendar.  It was winter, and the server is already spring, however, last year. <br><br>  After negotiations with the support, I received the following from them. <br><blockquote>  Now the server is working hard which was in the raid before the second hard drive crashed.  The second hard drive failed at the physical level, data recovery is impossible, since May the hard ones had to be synchronized, apparently because of some kind of error of the same hard failing that did not happen. </blockquote><br><br><h1>  Part three </h1><br>  That's how I stayed at the broken trough: May blooms on the first hard drive, the second ‚Äúfailed at the physical level data recovery is impossible,‚Äù and the script for collecting backups has not been configured on the local computer (remember my transition to 8.10?).  Thus, I lost the information accumulated for almost a year, including the full source code of some projects, which were not duplicated. <br><br>  Having dug up all the correspondence for May with my administrator, I came to the conclusion that nothing was installed in May, was not erased, and was not overloaded at all.  In any logs, the hard drive failure did not pass. <br><br>  We had to do something and as soon as possible.  Having phoned the serious companies that are engaged in data recovery, I arranged a visit to the data center and that I was given the dead screw on receipt.  You can get into DC only from 10 in the morning.  At 9:30 I already knocked the thresholds.  Grabbing the warming corpse of the hard drive, rushed into the intensive care unit for people like him. <br><br><h1>  Part four </h1><br>  At 10:15 I already described the situation to the master.  ‚ÄúWe'll see,‚Äù he grunted, and plunged into the dark room behind the counter, leaving me to fill out a questionnaire with questions about the volume of sections, the location of information, and what needs to be restored first.  I didn‚Äôt spend five minutes as a master ran out with the words: ‚ÄúYou are kidding, right ?!  Are you bored or what?  Why did you bring me a whole hard drive ?! ‚Äù. <br><br>  There was an awkward pause.  The technician looked at me reproachfully, and I looked at him, not trusting his professional abilities, had already mentally buried the screw.  "It can not be, check again," - I did not believe my ears.  The wizard connected the screw to the wind machine behind the client counter and, through the UFS Explorer, showed me the contents of the screw, my documents, databases, pictures and all that I did not ask, hoping to get rid of the abnormal client. <br><br>  With the hard drive, I came home and, oh, the horror, I realized that I simply have nowhere to connect it - I do not have stationary PCs.  Calling all my friends, I made sure that if people were not owners of leptopes, then they had nowhere to insert a hard drive with a SATA connector.  Of course, this was not a problem for my administrator, but he was in Moscow. <br><br>  In the meantime, angry correspondence with infobox support continued.  As an excuse, they chose the phrase: <br><blockquote>  We couldn‚Äôt work with this disk, it‚Äôs probably a matter of the configuration of the server. </blockquote>  And also wrote: <br><blockquote>  ... you can bring a hard back to us, we will try to copy the information, or connect it to your server. </blockquote><br>  I had no options, and the next morning I brought the hard drive back to the data center.  Meanwhile, the number of letters with requests to clarify the situation exceeded 80, and the new hard, delivered to the leased server, began to slowly refuse. <br><br><h1>  Part five </h1><br><blockquote>  2009-01-29 11:03:32 &lt;...&gt; Well, let's skip the data throughout the day. </blockquote><blockquote>  2009-01-29 19:18:28 No copying has yet been done, there were problems with the ‚Äúold hard‚Äù only the 500Mb root file system was mounted, now we managed to lure the / var / usr / home partitions but still there are errors.  &lt;...&gt; </blockquote><br>  and about the updated server, which was constantly hanging: <br><blockquote>  The server hung, the signal was not output to the console, rebooted now to ping &lt;...&gt; </blockquote><br><br>  The next day, in the late afternoon, my administrator appeared in touch, who explained where the necessary data lay.  I immediately sent this information to technical support. <blockquote>  2009-01-30 17:36:59 Thanks for the information, we will keep you informed. </blockquote><br><blockquote>  2009-01-30 21:53:53 <i>I</i> : What is the state of the process now? <br>  2009-01-30 21:55:57 <i>Engineer</i> : We are trying to copy the data. </blockquote><br><br><h1>  Part Six </h1><br>  My patience broke, as you understand, two days of the phrase ‚Äúwe are trying to copy‚Äù passed, and on Saturday morning the next day I was allowed to pick up the hard drive again.  Having hit the gas, I went to the administrator who had just returned to St. Petersburg. <br><br>  What was my surprise when he said that he just copied all the data.  Errors caused only reading one innodb'shnoy base, which strongly collapsed in case of failure.  The rest of the files were extracted without any problems.  A reasonable question arises: what was the support for two days, writing off reports about the recovery process?  But we will leave it on the conscience of engineers, who, by the way, in ‚Äúattempts‚Äù to read data from the hard drive, wrote it down to him! <br><br><h1>  Conclusion </h1><br>  My story with a happy ending.  All data is returned, projects are working.  I refused to rent the server, putting my own on colocation.  The money for the remainder of the lease term was returned to me in three stages: first they refused tightly, then credited 800 rubles to their side, then, after the next letter, they fixed it. <br><br>  I don‚Äôt know if the story that happened to someone helped me make sure I needed reliable backups, choose a data center or just think about the value of information, but she taught me a lot, pretty nerves and gave invaluable life experience.  As a result of weekly correspondence with support, 119 letters from users of sites and endless running around, I still found more than lost. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/51122/">https://habr.com/ru/post/51122/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51116/index.html">5 seconds to select a dark color for a graph</a></li>
<li><a href="../51117/index.html">Google Earth 5.0. KML Virtual Travel Management. Introduction</a></li>
<li><a href="../51119/index.html">Bill Gates released mosquitoes to TED members</a></li>
<li><a href="../51120/index.html">VKontakte 2.0</a></li>
<li><a href="../51121/index.html">Why is it time to leave ICQ, where and how easy it is to do</a></li>
<li><a href="../51123/index.html">More than just an encyclopedia. Using Wikipedia as a dictionary</a></li>
<li><a href="../51125/index.html">Import this - Zen of Python</a></li>
<li><a href="../51129/index.html">Formant group travel along the vocal tract</a></li>
<li><a href="../51130/index.html">Two tools for creating fonts.</a></li>
<li><a href="../51131/index.html">How can I check the values ‚Äã‚Äãentered by the user</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
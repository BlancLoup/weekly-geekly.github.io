<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Our player, our records are not suitable</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I should note that my entire career as a developer, I tried to stay away from platform dependent development. This was helped by ready-made open libra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Our player, our records are not suitable</h1><div class="post__text post__text-html js-mediator-article">  I should note that my entire career as a developer, I tried to stay away from platform dependent development.  This was helped by ready-made open libraries that allow me to abstract from the platform, such as Qt, WxWidgets, SDL, ACE, and.  etc.  I did not have to write drivers, but for quite complex applications and systems of this approach, coupled with C ++ and one, the other dynamic language was more than enough. <a name="habracut"></a><br><br>  But fate sent a client, thanks to which, I encountered the following problem - the move from <a href="http://ru.wikipedia.org/wiki/DirectShow">DirectShow</a> to the <a href="http://ru.wikipedia.org/wiki/Media_Foundation">Media Foundation</a> .  Both frameworks are designed to work with various audio / video, media formats, codecs, streams, etc.  Media Foundation should gradually replace DirectShow and remain the main and only.  In the new Windows 8, metro applications with DirectShow do not work.  Actually this was the reason for the move.  I came across DirectShow 10 years ago, for stuffing video into textures on the go, I didn't like it, but somehow we coped with it.  And, as far as I know, this is a well-established, well-studied framework that is supported as a backend by many projects, such as VideoLAN, ffmpeg, phonon, etc. <br><br>  And now the actual crying Yaroslavna.  Why, pray tell, are the developers getting into this Media Foundation?  And why did you eliminate compatibility with DirectShow in Metro applications?  To understand this, Media Foundation has to spend a lot of time, because there are simply no sane examples and documentation!  <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ee663604(v%3Dvs.85).aspx">Here is an example that captures video in a file</a> that still needs to be found as a download.  In the example, more than a thousand lines of code written in a terrible inhuman format.  How to take out from there the skills to work with the Media Foundation?  And here is a piece of code from the example that shows the stream captured from the camera: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs">HRESULT CaptureManager::SetDevice(HWND hwndPreview, IUnknown *pUnkVideo) { DestroyCaptureEngine(); m_pCallback = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::nothrow) CaptureEngineCB(m_hwndEvent); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_pCallback == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> E_OUTOFMEMORY; } m_hwndPreview = hwndPreview; <span class="hljs-comment"><span class="hljs-comment">//Create a D3D Manager HRESULT hr = CreateD3DManager(); IMFAttributes *pAttributes = NULL; if(SUCCEEDED(hr)) { hr = MFCreateAttributes(&amp;pAttributes, 1); } if(SUCCEEDED(hr)) { hr = pAttributes-&gt;SetUnknown(MF_CAPTURE_ENGINE_D3D_MANAGER, g_pDXGIMan); } // Create the factory object for the capture engine. IMFCaptureEngineClassFactory *pFactory = NULL; if(SUCCEEDED(hr)) { hr = CoCreateInstance(CLSID_MFCaptureEngineClassFactory, NULL, CLSCTX_INPROC_SERVER, IID_PPV_ARGS(&amp;pFactory)); } if (SUCCEEDED(hr)) { // Create and initialize the capture engine. hr = pFactory-&gt;CreateInstance(CLSID_MFCaptureEngine, IID_PPV_ARGS(&amp;m_pEngine)); if (SUCCEEDED(hr)) { hr = m_pEngine-&gt;Initialize(m_pCallback, pAttributes, NULL, pUnkVideo); } pFactory-&gt;Release(); pAttributes-&gt;Release(); } return hr; }</span></span></code> </pre> <br>  This is only a small piece, "which is not clear how" designates the device. <br>  21st century in the yard, how to live with such a monster? <br><br>  Or <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh802710(v%3Dvs.85).aspx">here's an example of documentation.</a>  What can be understood from it about the IAdvancedMediaCaptureInitializationSettings interface?  What is he "Provides initialization settings for advanced media capture"?  Cool, and what else?  The interface name is very promising.  Does he have any method?  People are in a hurry and rush to release applications under the new axis, how many ridges will break on such development tools?  And it became possible to simulate a webcam only by writing a driver, while you could do with a filter in DirectShow.  When I saw similar frameworks in the 90s, Windows had no alternative, but now I‚Äôm overdoing it.  Developers, developers, developers? <br><br>  And actually, in conclusion, if there is anyone experienced in this matter, tell me, is it that I lost my mind on the free breads of open libraries, where everything is more convenient and quicker to understand, or is it just a big mistake of a large corporation? </div><p>Source: <a href="https://habr.com/ru/post/150423/">https://habr.com/ru/post/150423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150415/index.html">How many unique domains are in each zone?</a></li>
<li><a href="../150417/index.html">The Great Chinese Firewall will come to us in the fall</a></li>
<li><a href="../150418/index.html">Quick start of the first project in Windows Azure. Web sites. Website Migration to Cloud Services</a></li>
<li><a href="../150420/index.html">Soviet rovers</a></li>
<li><a href="../150421/index.html">Inflation of values ‚Äã‚Äãon the TV screen: how to protect the child?</a></li>
<li><a href="../150424/index.html">IT Compote # 20 Programming and Technology Podcast</a></li>
<li><a href="../150425/index.html">Runetology (162): Ainur Abdulnasyrov, founder of LinguaLeo</a></li>
<li><a href="../150430/index.html">IBM zEC12 mainframe with 5.5 GHz processors and transactional memory</a></li>
<li><a href="../150431/index.html">Thunderbird 15</a></li>
<li><a href="../150432/index.html">Demo Day at SumIT - look at the results</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
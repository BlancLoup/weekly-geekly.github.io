<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Beego is no longer Go</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Any HYIP is very funny when you look at it from the side. Less fun when you get involved in it directly. 

 HYIP Go came somewhere in 2014, when the a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Beego is no longer Go</h1><div class="post__text post__text-html js-mediator-article">  Any HYIP is very funny when you look at it from the side.  Less fun when you get involved in it directly. <br><br>  HYIP Go came somewhere in 2014, when the authors of the applications who had 1000RPM (requests per minute) on the force suddenly decided that they urgently needed concurrency, because their 1000RPM was about to become 1000RPS (which is also not so much in fact). <br><br>  The result of HYIP was that many people accustomed to the application's MVC architecture, Go to Spring, Django or Ruby on Rails, joined Go.  And this architecture, like an owl on a globe, they began to pull on Go.  So there were cadavres like Beego and <a href="https://github.com/revel/revel">Revel</a> .  Revel died safely, although he is still trying to pump out.  But I want to talk about Beego separately. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Richard Eng has contributed a lot to the Beego promotion among the masses with his series of articles <a href="https://medium.com/%40richardeng/a-word-from-the-beegoist-d562ff8589d7">‚ÄúA word the Beegoist‚Äù</a> .  Virtually the "Gospel of Richard."  Ironically, despite the fact that Richard is frantically promoting Go, he himself does not write on it. <br><br>  In my turn, with Go, and even worse, with Beego, I worked quite a bit.  And I can say that this is clearly not the way the development on Go should go. <br><a name="habracut"></a><br>  Let's take a look at a few basic aspects of Beego, and why they contradict the various best practices in Go, and indeed in the industry as a whole. <br><br><h4>  Folder structure </h4><br>  Robert C. Martin, better known as <a href="http://blog.cleancoder.com/">Uncle Bob</a> , has repeatedly voiced the idea that the structure of an application should convey its essence.  He is extremely fond of giving an example from the cathedral, which can be viewed from above, and immediately understand that this is a cathedral. <br><br>  Robert has repeatedly criticized Ruby on Rails for its folder structure - controllers, models, views, that's all.  The problem with this approach is that the socks ‚Äútop‚Äù app will look just like a food ordering app.  And in order to understand the essence of the application, you will need to climb into some models folder, and see which entities we end up with. <br><br>  This is exactly the Beego's sick behavior.  While the same Spring has gone in the direction of Domain Driven Design and the structure of the folder transmitting the essence, Beego imposes the use of a structure that has already become an antipattern. <br><br>  But the problem is even more serious.  For Go there is no separation between the folder structure and the package structure (package).  Therefore, in Beego and UsersController and OrdersController will be under the same package of controllers.  And if you have two types of controllers, those that serve UI and those that are used for the API, with the latter in a decent society, it is customary to version?  Then get ready for freaks like apiv1. <br><br><h4>  ORM </h4><br>  Oddly enough, Beego, being an unlucky clone of Ruby on Rails, does not use the ActiveRecord pattern.  Its ORM is an extremely strange sight.  If for quite basic operations, like reading a line / writing a line, it is still suitable, then, for example, what a simple sample looks like (here and further examples are taken directly from the documentation): <br><br><pre><code class="go hljs">qs.Filter(<span class="hljs-string"><span class="hljs-string">"profile__age__gte"</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>) <span class="hljs-comment"><span class="hljs-comment">// WHERE profile.age &gt;= 18</span></span></code> </pre> <br>  But the main problem with Beego ORM is not even that you need to fight with proprietary language, but that it uses all of Go‚Äôs worst practices, be it import side effects: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( _ <span class="hljs-string"><span class="hljs-string">"github.com/go-sql-driver/mysql"</span></span> _ <span class="hljs-string"><span class="hljs-string">"github.com/lib/pq"</span></span> _ <span class="hljs-string"><span class="hljs-string">"github.com/mattn/go-sqlite3"</span></span> )</code> </pre> <br>  Or registration of models in init (): <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ orm.RegisterModel(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span>(User)) }</code> </pre> <br>  Do yourself a favor, even if you still decide for some inexplicable reason to work with Beego, do not use Beego ORM.  If you don‚Äôt live without ORM (what are you doing in the world of Go, my dear?), Use <a href="https://github.com/jinzhu/gorm">GORM</a> .  He even supported.  Otherwise, <a href="https://golang.org/pkg/database/sql/">‚Äúdatabase / sql‚Äù</a> will help you. <br><br><h4>  Bee tool </h4><br>  From Ruby on Rails copied the same command line tool, which is called simply <a href="https://github.com/beego/bee">Bee</a> .  If only in the RoR world there were rails and rake, then bee is such a trashcan for everything.  He and MVC application for 'boostrap', and migration will run, and file watcher will launch.  In the latter lies another problem.  After all, what is one of the main advantages of Go?  What runs locally is as close as possible to what runs in production.  If you do not use bee, of course. <br><br><h4>  Automatic routing </h4><br>  Go is a strongly typed language that does not support either generics or annotations.  How to make a MVC framework like this?  By reading the comments and generating files, of course. <br><br>  It looks like this: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// @Param body body models.Object true "The object content" // @Success 200 {string} models.Object.Id // @Failure 403 body is empty // @router / [post] func (this *ObjectController) Post() { var ob models.Object json.Unmarshal(this.Ctx.Input.RequestBody, &amp;ob) objectid := models.AddOne(ob) this.Data["json"] = map[string]string{"ObjectId": objectid} this.ServeJson() }</span></span></code> </pre> <br>  Evidence, as can be seen, is zero.  The Post () function receives nothing at all and does not return.  http.Request?  No, not heard. <br><br>  Well, how does all routing work?  When you run the notorious bee, another file is generated, commentsRouter_controllers.go, which contains an example of such wonderful code: <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { beego.GlobalControllerRouter[<span class="hljs-string"><span class="hljs-string">"github.com/../../controllers:ObjectController"</span></span>] = <span class="hljs-built_in"><span class="hljs-built_in">append</span></span>(beego.GlobalControllerRouter[<span class="hljs-string"><span class="hljs-string">"github.com/../../controllers:ObjectController"</span></span>], beego.ControllerComments{ Method: <span class="hljs-string"><span class="hljs-string">"Post"</span></span>, Router: <span class="hljs-string"><span class="hljs-string">`/`</span></span>, AllowHTTPMethods: []<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>{<span class="hljs-string"><span class="hljs-string">"post"</span></span>}, MethodParams: param.Make(), Filters: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, Params: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>}) ... }</code> </pre> <br>  See, do not forget to regenerate and ‚Äúcombine‚Äù this file after each change.  Until recently, the situation was even sadder, and during the tests this file was generated automatically, so you found out about the problems already in production.  It seems in recent versions this strange behavior has been fixed. <br><br><h4>  Component testing </h4><br>  And so we approach the topic of testing.  Go, unlike most other programming languages, comes with a test framework out of the box.  In general, the Go philosophy is that the test should sit next to the test file.  But we are in the world of MVC, spit on the Go philosophy, right?  So please put all your tests in the daddy / test, as <a href="https://twitter.com/dhh">DHH has</a> bequeathed to us. <br><br>  And this is not such a trifle, because, I remind you, in Go package == folder.  And if a test located in the same package can call a private method, then a test located in another package will no longer exist. <br><br>  But okay, everything would be limited to the folder structure.  Beego code is in principle very difficult to test, since everything in it is a side effect. <br><br>  This is how Beego requests routers: <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( _ <span class="hljs-string"><span class="hljs-string">"github.com/../../routers"</span></span> )</code> </pre><br>  The same story with middlewares, and with controllers, which I mentioned earlier. <br><br><h4>  Documentation </h4><br>  This is for me, as a software architect, a cherry on a cake.  The documentation in BeeGo is as good as your Chinese.  No, two comments have already gotten rid of comments in Chinese inside the code over the past year. <br><br>  Now only some pull requests remain in Chinese: <br><br><img src="https://habrastorage.org/webt/23/uf/l4/23ufl4-q1pnjjsqggix8oqq1aca.png" alt="image"><br><br>  And especially in issues: <br><br><img src="https://habrastorage.org/webt/8p/c2/wc/8pc2wc1bpzxzayejtnjzo9bnwce.png"><br><br><h3>  Instead of conclusion </h3><br>  If you have a team of Ruby / PHP / Python code writers, and you urgently want to translate them to Go, the worst thing you can do for them is to get them to go to the MVC framework for Go.  MVC as a whole is so-so an architectural pattern, and in Go it is completely out of place.  Or, if you are absolutely sure that nothing but Go will not save you, let them retrain and write as Go is accepted - as flat and explicit as possible.  Or, perhaps, they know best, with the help of a tool to solve the tasks assigned to them? </div><p>Source: <a href="https://habr.com/ru/post/444022/">https://habr.com/ru/post/444022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444004/index.html">CLRium # 5: Everything is all about GC and not only. Peter and Moscow</a></li>
<li><a href="../444006/index.html">Retro game console do it yourself</a></li>
<li><a href="../444008/index.html">Google Play Store moves to standardize application icons</a></li>
<li><a href="../444018/index.html">As one configuration change, PostgreSQL improved the performance of slow queries 50 times.</a></li>
<li><a href="../444020/index.html">Karting in the USSR: how the passion of American pilots became a massive DIY hobby in the Soviet Union</a></li>
<li><a href="../444024/index.html">How to implement a programming language in JavaScript. Part 3: CPS Interpreter</a></li>
<li><a href="../444026/index.html">MODX Digest # 1 (February 25 - March 11, 2019)</a></li>
<li><a href="../444030/index.html">Chinese online retailer Gearbest has made public a database of millions of customers' personal data.</a></li>
<li><a href="../444032/index.html">Why a 3D printer is not a printer</a></li>
<li><a href="../444034/index.html">7 deadly sins manager</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
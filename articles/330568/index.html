<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Enjoy billions of colors with 10-bit HEVC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The human eye is able to see much more colors than modern video displays show it. No matter how sophisticated the computer is, it can still reproduce ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Enjoy billions of colors with 10-bit HEVC</h1><div class="post__text post__text-html js-mediator-article">  The human eye is able to see much more colors than modern video displays show it.  No matter how sophisticated the computer is, it can still reproduce only a finite number of colors.  In this article we will talk about the use of 10-bit color depth in comparison with 8-bit, based on the functionality of the seventh-generation Intel Core processors and the optimizing capabilities of Intel Software Tools.  In the article you will also find a link to a sample program that implements 10-bit HEVC coding. <br><br><img src="https://habrastorage.org/web/339/c94/b21/339c94b21ef04ce8ab53332165921e67.jpg"><br><a name="habracut"></a><br><h2>  <font color="#0071c5">Color depth</font> </h2><br>  The color depth, also known as bit depth, is the number of bits used to display the color of an individual pixel.  The same image or frame with different color depths look different, because the number of colors in a pixel depends on the color depth. <br><br>  The number of bits in the image includes a set of bits per channel for each type of color in a pixel.  The number of color channels in a pixel depends on the color space used.  For example, the color channels in the RGBA color space are red (R), green (G), blue (B), and alpha (A).  Each extra bit doubles the amount of information we can store for each color.  In an 8-bit image, the total number of available pixel colors is 256. Table 1 shows the possible number of available colors for each respective color depth. <br><table><tbody><tr><th>  Channel depth </th><th>  Hues per channel per pixel </th><th>  Total number of possible shades </th></tr><tr><td>  8-bit </td><td>  256 </td><td>  16.78 million </td></tr><tr><td>  10-bit </td><td>  1024 </td><td>  1.07 billion </td></tr><tr><td>  12-bit </td><td>  4096 </td><td>  68.68 billion </td></tr></tbody></table>  Most monitors and televisions are capable of displaying only 8-bit content, 10-bit images are converted to 8-bit in them.  However, the advantages of 10-bit depth are already there: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  when processing images or video after shooting </li><li>  when using High Dynamic Range (HDR) monitors or cameras. </li></ul><br>  If the content is removed with a depth of 10 bits, it is important not to lose it during further processing, since this can lead to a decrease in sharpness, contrast and other important characteristics.  In that case, if 8-bit content is being edited, this can also lead to a decrease in depth and cause the effect of color bars. <br><br><h2>  <font color="#0071c5">The effect of color bars</font> </h2><br>  When capturing an image, it sometimes happens that the sensor cannot recognize the minimal difference between two adjacent colors, and the problem of incorrect display of colors arises.  As a result, the area of ‚Äã‚Äãthe picture is painted with one color in the absence of a more suitable other.  Thus, color bands appear in the figure instead of a smooth transition from one color to another. <br><br>  Possible solutions to the problem of color bars: <br><br><ul><li>  increase color depth per channel </li><li>  apply color sampling (not covered in this article). </li></ul><br>  An uncalibrated display can also cause stripes.  To avoid this, use the <a href="http://www.intel.com/content/www/us/en/support/graphics-drivers/000005596.html">Intel Graphics Control Panel</a> utility. <br><br><img src="https://habrastorage.org/web/826/254/96b/82625496be1a41fea3ad183da993b4a2.jpg"><br>  <i>Figure 1. Comparison of 8-bit (left) and 10-bit (right) images.</i>  <i>On the left you can see the effect of bands.</i> <br><br>  Figure 1 shows the difference between 8-bit and 10-bit images in relation to the effect of color bars.  In the left image, the required color detail was not transmitted by the sensor, which resulted in a smaller than necessary quantity of colors and color bands.  On the right photo color information is sufficient and the transition between the colors turned out to be smooth.  To ensure smooth color transitions, a wider color range is required, as described in BT2020. <br><br><h2>  <font color="#0071c5">Standard BT.</font>  <font color="#0071c5">2020</font> </h2><br>  The seventh generation of Intel Xeon and Core processors supports the BT standard.  2020 (also known as Rec. 2020) in such cases as the creation / playback of 4K Ultra-high definition (UHD) content, the use of HDR with support for 10 bits, etc.  UHD monitors have a resolution of 3840 * 2160 with a different diagonal.  Support for the standard BT.2020 improves picture quality at such a high resolution. <br><br><img src="https://habrastorage.org/web/463/172/66f/46317266f38f46ac8480d3613eac07ee.jpg"><br>  <i>Figure 2. Comparison of the color spaces BT.2020 and BT.709</i> <br><br>  The recommendations of The International Telecommunications Union (ITU) BT.2020 represent a significantly larger range of colors than those previously used by BT.709.  A comparison of the respective color spaces is shown in Figure 2, representing the CIE 1931 chromaticity diagram. The X and Y axes show the relative chromaticity coordinates with the wavelengths of the corresponding color spaces (blue font).  The yellow triangle covers the BT color space.  709. The black triangle shows the color space BT.  2020, significantly larger in size and, therefore, containing more colors for smooth transitions.  Bt.  2020 also defines various aspects of UHD TV, such as display resolution, frame rate, color subsampling, and color depth in addition to color space. <br><br>  Intel 7th generation processors support HEVC Main 10 profile, VP9 Profile 2 and High Dynamic Range (HDR) video rendering using the standard BT.2020. <br><br><h2>  <font color="#0071c5">HEVC Main 10 profile</font> </h2><br>  High Efficiency Video Coding (HEVC), also known as H.265, a video compression standard, is the successor of the well-known H.264 / AVC standard.  Compared to its predecessors, HEVC uses more complex compression algorithms.  More information about the standard can be found <a href="https://software.intel.com/en-us/blogs/2015/12/11/codecs-are-they-slowing-you-down">here</a> .  Main 10 allows you to use an 8-bit or 10-bit color with 4: 2: 0 color sub-sampling. <br><br>  HEVC 10b decoding support has appeared since the 6th generation of Intel processors.  The command below shows how the test utility <i>sample_decode</i> from <a href="https://github.com/Intel-Media-SDK/samples">the Intel Media SDK sample code set</a> can be used to get raw frames from the simplest HEVC stream. <br><br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">sample_decode</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h265</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-p010</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-i</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.h265</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-o</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">raw_farmes</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.yuv</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-hw</span></span></code> </pre> <br>  The input stream used above (input.h265) can be taken <a href="https://ngcodec.com/hevc-bitstreams/">here</a> .  The output stream (raw_frames.yuv) must be in the P010 format used as the source material for the <i>sample_encode</i> utility. <br><br>  Hardware support for encoding / decoding HEVC 10b introduced since the 7th generation of Intel processors.  The coding of 10-bit HEVC is implemented using the additional code <i>modified_sample_encode</i> , specially modified for this particular functionality.  This example works with the Intel Media SDK 2016 R2.  Assembly instructions are provided in <a href="https://github.com/Intel-Media-SDK/samples/blob/master/samples/Media_Samples_Guide_Windows.pdf">the Media</a> <a href="https://github.com/Intel-Media-SDK/samples">Example</a> <a href="https://github.com/Intel-Media-SDK/samples/blob/master/samples/Media_Samples_Guide_Windows.pdf">Guide in the</a> <a href="https://github.com/Intel-Media-SDK/samples">Intel Media SDK code samples</a> . <br><br>  Below is an example of a 10-bit encoding using <i>sample_encode</i> from the added <i>modified_sample_encode</i> . <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">sample_encode</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.exe</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h265</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-i</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">raw_frames</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.yuv</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-o</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">output</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.265</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-w</span></span> 3840 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-h</span></span> 2160 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-p010</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-hw</span></span></code> </pre> <br><img src="https://habrastorage.org/web/c01/3ef/223/c013ef2236d84e49b1f1f1dd2cbec25a.png"><br>  <i>Figure 3. Screenshot of the Video Quality Caliper utility showing that the encoded stream has 10 bits per pixel.</i> <br><br><h2>  <font color="#0071c5">VP9 profile 2</font> </h2><br>  VP9 is a video encoding format developed by Google as a successor to VP8.  The seventh-generation Intel platforms support VP9 10-bit decoding hardware acceleration, while the coding is still combined, software-hardware. <br><br><h2>  <font color="#0071c5">High Dynamic Range (High Dynamic Range, HDR)</font> </h2><br>  Dynamic range is the ratio of the lightest value to the darkest point in the image.  High dynamic range (HDR) video allows you to get a better dynamic range than ordinary (SDR) video, using nonlinear operations to encode and decode light levels. <br><br>  HDR video content is supported using the HEVC Main 10 or VP9.2 codec, hardware accelerated since the 7th generation of Intel processors.  To transmit HDR content, the system must be equipped with a DisplayPort 1.4 or HDMI 2.0a port.  This functionality is still at the testing stage and is not included in public releases. <br><br><h2>  <font color="#0071c5">Conclusion</font> </h2><br>  As we found out, developers now have the opportunity to create beautiful, realistic video in the most modern formats, colored with bright colors of 10-bit color, ideal for HD / UHD displays.  Using the seventh generation Intel processors for creating content of the BT.2020 standard, as well as the optimization capabilities of the Intel Media SDK, we can already look beyond the 4K UHD resolution and the standard personnel speed for today.  In the future, the area of ‚Äã‚Äãapplication of modern hardware-accelerated video codecs will be expanded. <br><br>  The following software was mentioned in this article (with download links): <br><br><ul><li>  <b>Software</b> - <a href="https://software.intel.com/en-us/media-sdk">Intel Media SDK 2016 R2</a> </li><li>  <b>Video input stream</b> - MHD_2013_2160p_ShowReel_R_9000f_24fps_RMN_QP23_10b.hevc from <a href="https://ngcodec.com/hevc-bitstreams/">Free H.265 / HEVC streams</a> </li><li>  <b>Codec</b> - H.265 / HEVC </li><li>  <b>Analysis Tool</b> - Video Quality Caliper (VQC), <a href="https://software.intel.com/en-us/intel-media-server-studio">Intel Media Server Studio</a> Professional Edition component and Intel Video Pro Analyzer </li><li>  <b>Test bench</b> : <ul><li>  <b>CPU</b> : Intel Core i7-7500U CPU @ 2.70GHz </li><li>  <b>OS</b> : Microsoft Windows 10 Professional 64-bit </li><li>  <b>Graphics</b> : Intel HD Graphics 620 </li></ul></li></ul><br><h2>  <font color="#0071c5">useful links</font> </h2><br><ul><li>  <a href="http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/deep-color-support-graphics-paper.pdf">Deep color support in Intel Graphics</a> </li><li>  <a href="https://www.webmproject.org/vp9/">VP9 video codec</a> </li><li>  <a href="https://www.itu.int/rec/R-REC-BT.2020-2-201510-I/en">Recommendation ITU-R BT.2020-2</a> </li><li>  <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb970578(v%3Dvs.85).aspx">10-bit and 16-bit YUV video formats</a> </li><li>  <a href="https://software.intel.com/sites/default/files/managed/b8/d0/intel-hevc-whitepaper.pdf">Achieving high quality and performance HEVC with Intel Media Server Studio</a> </li><li>  <a href="https://ngcodec.com/hevc-bitstreams/">H.265 / HEVC free streams</a> </li><li>  <a href="https://software.intel.com/protected-download/267270/721547"><b>An example of a program that implements 10-bit HEVC encoding</b></a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/330568/">https://habr.com/ru/post/330568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330556/index.html">Self-education and Hello, world: the problem of introductory courses and not only</a></li>
<li><a href="../330558/index.html">How to get an offer in Badoo on the day of the interview. Part Two, for PHP developer</a></li>
<li><a href="../330560/index.html">From ‚Äúnew number format‚Äù to ‚Äúcode as UI‚Äù: how did HolyJS 2017 Piter go</a></li>
<li><a href="../330564/index.html">DevConf :: Frontend - June 17 in Moscow: Angular 4, React Native, choosing a JS-framework for a large project + Lua Meetup</a></li>
<li><a href="../330566/index.html">Patch Android firmware in 5 minutes</a></li>
<li><a href="../330572/index.html">Hackers used the Intel Serial-over-LAN CPU function to bypass the firewall</a></li>
<li><a href="../330574/index.html">MIT developed a photon chip for deep learning</a></li>
<li><a href="../330576/index.html">Firefox 54 is released, which finally got support for multiprocess mode</a></li>
<li><a href="../330578/index.html">PCI DSS Cloud Hosting: Service Details</a></li>
<li><a href="../330580/index.html">Intel Skylake and Kaby Lake chips - a problem was detected with active Hyper-Threading</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
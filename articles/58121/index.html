<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to convert ext3 to ext4 file system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now everyone has a new Ubuntu with ext4 support, and in my last post about its release there were a few comments with questions about how to remake th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to convert ext3 to ext4 file system</h1><div class="post__text post__text-html js-mediator-article">  Now everyone has a new Ubuntu with ext4 support, and in my <a href="http://habrahabr.ru/blogs/ubuntu/58060/">last post</a> about its release there were a few comments with questions about how to remake the file system into this very ext4.  On this great occasion, I decided to translate the topic from wiki.kernel.org, where it is written about it.  The translation is completely free, diluted with my own thoughts.  By the way, you can read about all the new ext4 buns <s>in English</s> now in Russian <a href="http://xgu.ru/wiki/Ext4">here</a> , and also in the new article <a href="https://habrahabr.ru/users/yktoo/" class="user_link">yktoo</a> <a href="http://habrahabr.ru/blogs/linux/58183/">here</a> ! <br><a name="habracut"></a><br><h4>  Mount ext3 as ext4 without conversion </h4><br>  First, starting from the 2.6.28 kernel, you can mount ext2, ext3 and ext4 file systems as ext4.  This will make it possible to use the new optimized gizmos of the new driver (for example, delayed allocation, multi-block allocation and large inodes if you formatted your ext3 with this option), while physically changing nothing on the disk, allowing you to go back to the ext3 driver , eg.  This is done very simply - in your <i>/ etc / fstab</i> change ext3 to ext4 and that's it.  True. <br><br><h4>  Convert to ext4 </h4><br>  It‚Äôs quite another thing if you want to use the new ext4 features, such as extents, which change the physical format of the data storage, but also give a big performance gain.  If you convert from ext2, you first need to turn on journaling (in other words, convert to ext3): <br><br> <code>sudo tune2fs -j /dev/{ }</code> <br> <br>  Then, to enable new features on your ext3 file system, you need to do this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>sudo tune2fs -O extents,uninit_bg,dir_index /dev/{ }</code> <br> <br>  <b>Attention!</b>  After this command, you will <b>never</b> be able to mount the file system as ext3. <br>  After that, it is <b>necessary</b> ( <a href="https://habrahabr.ru/users/mastyf/" class="user_link">Mastyf</a> says that it is not necessary, because when you first reboot, everything will be checked by itself, but I would still be reinsured) to check the file system using fsck to tidy up what tune2fs did not finish.  We do it like this: <br><br> <code>sudo e2fsck -pDf /dev/{ }</code> <br> <br>  After that, edit <i>/ etc / fstab</i> and reboot. <br><br>  <b>Note</b> : There are some new features that can be obtained only by reformatting the partition, for example, flex_bg and support for partitions larger than 16 terabytes. <br><br>  <b>Another note</b> : it is not recommended to change the size of the inode using e2fsprogs version 1.41.0 or later, because this leads to corrupted data and sad people. <br><br>  <b>Last note</b> : after extents are included, new files will be created using them, but nothing will happen to the old ones and they will continue to lie on the disk in the old format.  I read somewhere about the magic utility <i>defrag2fs</i> , which also translates all old files into a new format, but, as I understand it, it is still very raw, it does not work well, it is life threatening and it is better to wait. <br><br><h4>  How to boot if / boot is ext4 too </h4><br>  In general, converting / boot to ext4 is pointless.  But if you really want, then you must first do everything as written above.  Then, you need to tweak a little / boot / <i>grub/menu.lst</i> .  We find this line: <br><br> <code>title Ubuntu 9.04 &lt;...&gt; <br> root (hdX,Y) <br> kernel /boot/vmlinuz-2.6.28-... root=... ro quiet splash <br></code> <br>  And add to the last at the end <code>rootfstype=ext4</code> </div><p>Source: <a href="https://habr.com/ru/post/58121/">https://habr.com/ru/post/58121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../58115/index.html">How to create your opensource project</a></li>
<li><a href="../58117/index.html">Interview with Sergey Belousov</a></li>
<li><a href="../58118/index.html">Installing Google Desktop on 64-bit Vista</a></li>
<li><a href="../58119/index.html">Linq-to-Sql: Recognize nullable fields from metadata (or a story about a small bug)</a></li>
<li><a href="../58120/index.html">Explay CMS 3.0 alpha</a></li>
<li><a href="../58122/index.html">Video from the main gaming office of Belarus - Game Stream</a></li>
<li><a href="../58123/index.html">Billion downloads in the AppStore</a></li>
<li><a href="../58124/index.html">Muris nonpenis arcus *</a></li>
<li><a href="../58126/index.html">Not all patents are equally useful: Apple has published a patent for sound management in the browser.</a></li>
<li><a href="../58127/index.html">Fedora 11: Preview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
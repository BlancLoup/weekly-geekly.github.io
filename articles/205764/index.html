<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to deal with memory leaks in a virtual machine, correctly closing the browser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the most common questions that Parallels Desktop users ask us (and probably all other virtual machines) is how to make virtual machines consume...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to deal with memory leaks in a virtual machine, correctly closing the browser</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f8c/fb4/ccc/f8cfb4cccd93facaeb96397fbce0b498.jpg" alt="image" align="left"><br>  One of the most common questions that Parallels Desktop users ask us (and probably all other virtual machines) is how to make virtual machines consume less memory.  This is asked a huge number of people on the forums and social networks. <br>  Therefore, we always look at which programs and technologies require more memory when a virtual machine is running in PD.  And that's what they found. <br><a name="habracut"></a><br>  The ‚Äútorn‚Äù work of the virtual machine, its frequent and tight freeze starts from the moment when too many applications are running on the host that require more memory than the host can physically provide.  In addition, the guest OS can start to slow down, if it runs a lot of heavy applications or even just one or two, but very memory-hungry. <br><br>  Unfortunately, there is no universal advice on maintaining an optimal balance between guest and host memory.  Just because people have too different usage scenarios and combinations of programs currently running.  For example, someone in a virtual machine wants to run a 3D game, the minimum requirements for which are 2 GB of RAM, while on the host at that moment he doesn‚Äôt need anything other than the Parallels Desktop solution itself.  And someone, on the contrary, works simultaneously with a browser and several different types of documents on the host OS, and it needs a virtual machine with Windows only for a small application, the analog of which does not exist for Mac.  Obviously, in the first case, a person needs to allow the virtual machine to use more host memory (without going beyond the recommended maximum, of course), and in the second case, on the contrary, it would be better to limit the guest OS memory to a minimum.  (In Parallels Desktop, you can do this in the top menu of <b>Virtual Machine</b> , then <b>Configure</b> , then <b>General</b> . But first, you need to turn off the virtual machine). <br><br>  The main thing to remember is that physical memory is not infinite.  If a person has the need to constantly use heavy host and guest applications at the same time, and he constantly encounters brakes, he should think about adding a couple of gigabytes of RAM to his Mac.  But the main reason for the lack of memory for some users still is that they forget (or do not see the need) to close applications that they no longer need, but minimize or leave their windows hanging in the background.  This is especially true of laptop users, the presence of a battery in which allows not to turn off the host between uses.  Such applications continue to occupy memory.  And if so-called memory leaks also occur in them, this affects the overall speed of the system even worse. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Leaks, in addition to demanding applications, also provoke some antiviruses and extensions of various third-party software for browsers.  But as it turned out, most of all complaints are caused by Adobe Flash.  It is this technology that is uncontrollably and chaotically devouring memory and thus does not free it back.  We even calculated: in 99% of cases, when Parallels Desktop users complained of a hang, it was the flash that was to blame, and not a virtual machine at all. <br><br>  Why it happens?  Everybody loves surfing the Internet; many people devote to this case several hours a day.  And on the Internet there are a lot of websites with banners that run on a flash (or even there are web resources entirely on a flash, for example, flash games or business card sites of very creative companies).  A person launches on his Mac browser (Safari) and starts surfing, opening one site after another in different tabs (and many people like to bring this number to almost fifty). <br><br><blockquote>  <i>By the way, this summer, an experiment was run in the Gizmodo tech blog to check how much each open tab consumes (both in Safari and in other browsers), and found out that it is 0.19 Watt.</i>  <i>And the opening of 100 tabs, even without any flash, generally reduces the battery life by more than an hour.</i> <img src="https://habrastorage.org/getpro/habr/post_images/ac7/022/cf3/ac7022cf3496367be6c94045768b976a.jpg" alt="image"></blockquote><br><br>  A certain amount of operating system memory is allocated for the browser.  If you surf for a long time, the cache naturally overflows, and the data is flushed to the hard disk into a swap file (paging file).  And now the surprise: if the browser is only minimized (and not closed completely) and left to hang there for quite a long time (for example, the entire working week), then a huge amount of data will accumulate in it. <br><br>  In the case of Flash, such memory leaks are very slow and almost invisible to the user.  As a result, an average of 3-4 gigabytes accumulates in a few days.  Some of the Mac OS data has already been sent to its swap file at this point.  The problems begin just at the start of the virtual machine: MacOS is forced to look for a lot of memory for the new process.  This leads to the fact that it dumps a huge array of data from the cache into a swap - trying to free up memory for running the virtualization tool and the guest OS.  At this point, the virtual machine is trying to read the data needed to start it.  Together, this leads to an increase in the number of random disk accesses, and the system begins to slow down. <br><br>  So look at the Swap used parameter in the Activity Monitor.  If the amount of data there is gradually increasing and it is clearly more than 1 GB, then it is likely that some application does not release its memory. <br><img src="https://habrastorage.org/getpro/habr/post_images/2e2/46b/41a/2e246b41a6d259fc378d13a125f97929.jpg" alt="image"><br><br>  And what to do?  But the prevention of this particular problem is very simple - periodically you need to close the browser entirely using Cmd + Q (and not just close the window by clicking on the red stop signal in the upper left corner). <br><br>  You can also use a few more hints to prevent leaks.  For example, to put an ad blocker that eliminates flash banners - there are quite a few of them on the market - from the popular Adblock (which blocks ads before loading it) to PithHelmet and GlimmerBlocker, or something like the ClickToFlash plugin, which Safari blocks Flash by replacing it with static images. <br><br>  Secondly, it would be good to remove various browser extensions that also cause leaks (for example, antivirus or Skype).  In Safari, this is done in the settings window (Safari - Preferences - Extensions), where you can either uninstall the extensions or even block the installation of any add-ons.  Just delete a little - you also need to check in the folder ~ / Library / Safari / Extensions, if there is any excess left behind them. <br><br>  If you have any other tips on how to combat memory leaks, we were waiting for you in the comments. </div><p>Source: <a href="https://habr.com/ru/post/205764/">https://habr.com/ru/post/205764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205746/index.html">How Mosfilm Milks Soviet Copyright Cows</a></li>
<li><a href="../205754/index.html">The best resources to get started with Drupal 8</a></li>
<li><a href="../205756/index.html">Russian AI Cup: technical details</a></li>
<li><a href="../205758/index.html">Dell VRTX is coming to us!</a></li>
<li><a href="../205762/index.html">Launch Ubuntu and watch Torrent and Torrent-TV straight on Samsung SmartTV</a></li>
<li><a href="../205766/index.html">SkyDrive in Windows 8.1: a stumbling block. Disable the SkyDrive service</a></li>
<li><a href="../205768/index.html">Video recording of Microsoft product training seminars (Office365, System Center 2012 and Windows Server 2012)</a></li>
<li><a href="../205772/index.html">SFINAE is just</a></li>
<li><a href="../205774/index.html">BioPen's surgical 3D printer allows you to ‚Äúprint‚Äù tissue right during the operation.</a></li>
<li><a href="../205778/index.html">Share unprecedented generosity. 6 months subscription COLT for free. There are 2 days left</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Azure cache</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today it is difficult to imagine any high-load system in which it would be possible to do without data caching. Therefore, these or other caching mech...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Azure cache</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/631/3ab/f70/6313abf7060c45f5892719425a3725ad" width="200" align="right"><br><br>  Today it is difficult to imagine any high-load system in which it would be possible to do without data caching.  Therefore, these or other caching mechanisms are almost always used.  In the context of cloud solutions, this provides the following benefits: <br><ul><li>  an increase in the speed of reading / writing data, which reduces the response time of the system; </li><li>  providing ‚Äúshared memory‚Äù for different instances, which is one of the necessary conditions for <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2581%25D1%2588%25D1%2582%25D0%25B0%25D0%25B1%25D0%25B8%25D1%2580%25D1%2583%25D0%25B5%25D0%25BC%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">horizontal scaling</a> </li><li>  cost reduction due to more rare access to the database (reading from the database is a more expensive operation, compared to reading the value from the cache) </li></ul><br>  In this publication, I would like to consider what is available today for developers of the Azure platform as data caching mechanisms.  For those who have been working with cache services for a long time, there will be little interesting here, since everything will be considered superficially, but for those who are just starting to work with this, I will try to give a good starting point for further deeper acquaintance with the topic. <a name="habracut"></a><br><br>  Azure offers several caching organization models: <br><ul><li>  Cache in the role ( <a href="https://msdn.microsoft.com/en-us/library/dn386103.aspx">In-Role Cache</a> ) </li><li>  <a href="https://msdn.microsoft.com/en-us/library/dn386094.aspx">Managed Cache Service</a> </li><li>  <a href="https://msdn.microsoft.com/en-us/library/dn690523.aspx">Azure Redis Cache</a> ( <a href="https://msdn.microsoft.com/en-us/library/dn690523.aspx">Azure Redis Cache</a> ) </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Cache in the role (In-Role Cache) </h4><br>  In this model, the cache is part of the cloud service, within which the role is selected to house the cache.  All instances of the selected role combine memory resources and form <i>a cache cluster</i> (*). <br><div class="spoiler">  <b class="spoiler_title">(*) cache cluster</b> <div class="spoiler_text">  Since Azure roles can be represented by multiple instances (virtual machines), in the case of more than one instance, a distributed cache service will be formed that will use the combined memory of all machines serving the role. </div></div><br>  Two deployment topologies are supported: <br><ul><li>  Co-location (co-located) - the role serves not only the cache, but also the code of other applications;  in the settings of the role, you must specify% of the total memory of the role, which will be given for the needs of caching </li><li>  Dedicated location (dedicated) - a separate Worker role is allocated, all of which resources will be used to service the cache </li></ul><br>  Also, this model supports the concept of <i>named caches</i> , which allows you to set individual cache policies for each named cache.  A cache named <i>Default</i> is created by default and cannot be deleted.  The following is an example of parameter settings on the Caching tab in role settings in Visual Studio: <br><img src="https://habrastorage.org/files/cc4/254/81a/cc425481a39a4d63a4306c750850dcd7"><br>  In order to take advantage of the cache service created, customers must perform the following steps: <br><ol><li>  Add a nuget package to the project that will use the cache.  This will add all the necessary libraries and will also update the web.config file, adding new sections &lt;dataCacheClients /&gt; and &lt;cacheDiagnostics /&gt;. <br><img src="https://habrastorage.org/files/243/77c/187/24377c18768e4ae888d38e45bc134649"><br></li><li>  Specify the name of the role ( <i>identifier</i> ) serving the cache cluster in the corresponding section of the web.config file: <br><img src="https://habrastorage.org/files/014/005/dae/014005dae0a5482aaedacf5231c2bab9"><br></li><li>  Create a DataCache instance in code <br><img src="https://habrastorage.org/files/96b/7f1/161/96b7f11619e940b99afe95aed095dde4"><br>  or <br><img src="https://habrastorage.org/files/630/9fd/ccc/6309fdccc6cd417abc895e8af8858886"><br></li><li>  Use the methods of the created instance <br><img src="https://habrastorage.org/files/aa1/1ec/a8b/aa11eca8bea646c588330cdaff6ea1e4"><br><img src="https://habrastorage.org/files/013/fc8/62e/013fc862e6d84578b416b39e2ec1e641"><br></li></ol><br>  The advantages of this approach include the simplicity and flexibility of setting up when deploying an application (application deployment), as well as lower cost compared to others.  The disadvantages are the need for self-managed service management (in the case of a Managed Cache Service or Azure Radis Cache, Microsoft takes over management). <br>  For a more detailed introduction, you can refer to the <a href="http://azure.microsoft.com/en-us/documentation/articles/cache-dotnet-how-to-use-in-role/">next page</a> on the Azure documentation site. <br><br><h4>  Managed Cached Service </h4><br>  Despite the fact that at the end of 2013 this model was in preview mode (preview), today its use has ceased to be recommended.  Instead, Microsoft suggests using Azure Redis Cache.  At the time of this writing (April 2015), you cannot create a managed cache service through the <a href="https://manage.windowsazure.com/">Azure Management Portal</a> , but if necessary, you can use the <a href="https://msdn.microsoft.com/en-us/library/dn448831.aspx">Azure Powershell SDK</a> and create a service from the Powershell console. <br>  Since  This model has ceased to be recommended, I will not dwell on it in detail.  If necessary, you can refer to the <a href="http://azure.microsoft.com/en-us/documentation/articles/cache-dotnet-how-to-use-service/">next page</a> on the Azure documentation site.  If you need to update your existing managed cache service to a newer type of cache (Azure Redis Cache), you can refer to the <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn690524.aspx">following instruction</a> . <br><br><h4>  Azure Redis Cache (Azure Redis Cache) </h4><br><h5>  What is Redis </h5><br>  <a href="http://redis.io/">Redis</a> (REmote DIctionary Server) is a network logged data repository.  In fact, this is an ultra-fast database, which by default is stored in RAM, but can also be configured to store additional data on the hard disk.  All data is presented in the form of a dictionary in which keys are associated with their typed values.  The following data types are supported: strings, lists (lists), sets (sets), hash tables (hashsets) and ordered sets (sorted sets). <br><br><h5>  Installing Redis </h5><br>  Installing Redis server is possible on all major operating systems (Linux, OSX, BSD family, Windows).  This can be done according to the <a href="http://redis.io/download">instructions</a> on the official website.  It is worth noting that officially there is no support for Windows, but the ‚ÄúMicrosoft Open Tech group‚Äù has created a port that is practically the same as the original and is great for review.  It is not recommended for use in production and as a rule there are no latest innovations in official releases. <br><br><h5>  Redis quick start </h5><br>  If you have never tried Redis before and do not want to mess around with the installation, then there is a great <a href="http://try.redis.io/">tutorial</a> that is a web emulation of the console client - where you can print commands below and see the results of their execution in the window itself.  By typing the word TUTORIAL on the command line, you will see a series of hints that will guide you through the basics of using Redis.  Below is a screenshot of this site, where the string value ‚ÄúHellow World!‚Äù Is created, which can be accessed by the key MyKey. <br><img src="https://habrastorage.org/files/a65/54e/d1d/a6554ed1d5a943d6803e0a8fcc07d279"><br><br><h5>  Redis customers </h5><br>  The basis of communication with the server is a very simple mechanism: the client establishes a TCP connection to port 6379 (by default) and sends commands according to the special protocol <a href="http://redis.io/topics/protocol">RESP</a> (REdis Serialization Protocol), and the server sends the results of command execution in response.  By implementing this not complicated protocol, you will have your own client implementation.  But for starters, I would recommend referring to the list of existing implementations that exist for almost all modern languages ‚Äã‚Äã- a full list of clients can be found <a href="http://redis.io/clients">here</a> . <br><br><h5>  Redis in the context of Azure </h5><br>  If you have already figured out what Redis is and how to work with it, then there are literally a couple of things that you should pay attention to when working in the Azure Redis Cache. <br><ol><li>  When creating an instance of Azure Redis Cache, various price offers will be offered: Basic and Standart.  For development, testing and non-critical system nodes, a cheaper version should be used - Basic, which differs from similar Standard versions by the absence of a second mirror node (replica), and therefore is not subject to the SLA service level agreement.  More details about the prices can be found <a href="http://azure.microsoft.com/en-us/pricing/details/cache/">here</a> . <br><img src="https://habrastorage.org/files/53a/311/03b/53a31103bce04517a0b7be926b3a96fa"><br></li><li>  Azure Redis Cache is not supported by Azure Emulator.  For local work, you must run your Redis server (local or remote). </li><li>  By default, cache monitoring is turned off and for its activation it is necessary to perform a number of steps (details <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn763945.aspx">here</a> ). </li><li>  After creating an instance of the cache, look in the settings section, there you will find a lot of useful things, including: enabling SSL, behavior policies when reaching the maximum amount of memory, setting access rights and more. </li></ol><br><br><h5>  Usage example </h5><br>  In order not to reinvent the wheel and compete with Microsoft's tech-riders, in this section I will cite a number of links to the Russian-language sections of the MSDN site, which remarkably describe the main steps needed to become familiar with Redis in .Net applications. <br>  So, before using Azure Redis Cache, we need <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn690516.aspx">to create</a> and <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn793612.aspx">configure an</a> instance through the Azure management portal. <br>  Next, you need to add the necessary implementation of the Redis client.  The recommended implementation in .Net applications is the implementation from StackExchange, which is available to us in the form of a Nuget package (details <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn690471.aspx">here</a> ). <br><img src="https://habrastorage.org/files/1ed/bc7/b1a/1edbc7b1a7dd46a6917d47ce055b1ec8"><br>  Now, to access the cache, we create a connection and, based on it, get a link to the database.  Thanks to it, we have a convenient API for communicating with Azure Redis Cache.  For details of these steps, I refer you again to the <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn690521.aspx">corresponding page</a> on MSDN. <br><br><h5>  Unusual use of Azure Radis Cache </h5><br>  In addition to the classic use of the cache (for storing long-calculated values ‚Äã‚Äãor values ‚Äã‚Äãobtained from slow storage), Azure Redis Cache can be used to store an ASP.NET session ( <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn690522.aspx">documentation</a> ) or to cache an ASP.NET output ( <a href="https://msdn.microsoft.com/ru-ru/library/azure/dn798898.aspx">documentation</a> ). <br><br><h4>  Conclusion </h4><br>  I hope this material has given you the opportunity to form a general idea of ‚Äã‚Äãthe caching mechanisms in Azure.  For a more detailed introduction to the topic I recommend using the following resources: <br><ul><li>  <a href="http://azure.microsoft.com/blog/%3Fs%3Dcache">Azure blog</a> </li><li>  <a href="http://azure.microsoft.com/ru-ru/documentation/">Azure Documentation</a> </li><li>  <a href="https://msdn.microsoft.com/ru-ru/library/azure/gg278356.aspx">MSDN</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/257695/">https://habr.com/ru/post/257695/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257685/index.html">Product design digest, April 2015</a></li>
<li><a href="../257687/index.html">Write on Rust - run everywhere. Rust and C interaction</a></li>
<li><a href="../257689/index.html">Practical experience with little-known European cloud hosting</a></li>
<li><a href="../257691/index.html">PHP Digest number 62 - interesting news, materials and tools (April 26 - May 11, 2015)</a></li>
<li><a href="../257693/index.html">Interview with hidnplayr</a></li>
<li><a href="../257697/index.html">Start options and other improvements in the new assembly</a></li>
<li><a href="../257699/index.html">How Facebook saved 75% of the energy required to store photos of cats and user selfie</a></li>
<li><a href="../257701/index.html">Release of the new mobile 2GIS</a></li>
<li><a href="../257703/index.html">Treacherous Wolfhound. Transformation distribution Ubuntu</a></li>
<li><a href="../257707/index.html">Rating of sites by the number of referring IP addresses</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
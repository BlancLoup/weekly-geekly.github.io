<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OTRS 4.0.10. We put on Ubuntu + AD + Kerberos + SSO (Part Three)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The third part of the article on installing and configuring OTRS on UbuntuServer in MS AD. Now let's talk about the corrections of various jambs and s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OTRS 4.0.10. We put on Ubuntu + AD + Kerberos + SSO (Part Three)</h1><div class="post__text post__text-html js-mediator-article">  The third part of the article on installing and configuring OTRS on UbuntuServer in MS AD.  Now let's talk about the corrections of various jambs and screwing useful buns.  The first two articles will not change more, and all the rest of my work will be added to this article, you get such a good wayto. <br><br>  <a href="http://habrahabr.ru/post/264617/">Part One: System Preparation</a> <br>  <a href="http://habrahabr.ru/post/265537/">Part Two: Installing and Configuring OTRS</a> <br>  <a href="http://habrahabr.ru/post/265541/">Part three: fix the shoals fasten buns</a> <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  We fix localization jambs </h4><br>  In the interface of the bush meter there is a kosyachek, on the exit button instead of the user name there is% c% c, that means something like ‚ÄúExit% s% c‚Äù.  It is fixed very easily.  Open the file <i>/opt/otrs/Kernel/Language/en.pm</i> : <br> <code>mcedit /opt/otrs/Kernel/Language/ru.pm <br></code> <br>  We find the string ‚Äú% c% c‚Äù (note the Russian symbol), if it doesn't work out, then the line number is 3070, and change ‚Äú% c% c‚Äù to ‚Äú% s% s‚Äù.  Save and everything is ok. <br><br><h4>  Nice bun ‚Ññ1.  FAQ module. </h4><br>  I think it is not necessary to explain how useful this module is in such a system. <br>  For bush-growers here you can make all sorts of instructions and answers to frequently asked questions, and for agents some kind of knowledge base with reminders.  In short, anything at your choice.  This bun is put nowhere. <br>  Go to the OTRS website in the <a href="https://portal.otrs.com/otrs/public.pl%3FAction%3DPublicDownloads">public download</a> section. <br>  Choose Public Extensions -&gt; OTRS 4 -&gt; FAQ and download the package with our module. <br>  Go to the admin area of ‚Äã‚ÄãOTRS -&gt; System Administration -&gt; Package Management. <br>  Click the "Browse" button and select the file of the newly downloaded package, click install. <br><br>  Error may pop up: <br><img src="https://habrastorage.org/files/d68/ed4/bc5/d68ed4bc540c4bcbaf09aebbb646877f.png"><br><br>  This is corrected by editing the /etc/otrs/Kernel/Config.pm file. <br>  find the SecureMode parameter in it and change its value to 1, if there isn‚Äôt, then manually append it as in the picture <br><img src="https://habrastorage.org/files/760/a9d/cbe/760a9dcbecfb4fc2930ab9dc418db0da.png"><br><br>  That's all, how to add articles and distribute access to them will not tell, there are no options and everything is done the only way to information on which the network shaft. <br><br><h4>  Nice bun ‚Ññ2.  IPhoneHandle module. </h4><br>  What kind of animal is this, and this animal allows you to fasten mobile agents' agents to OTRS and work with the system directly from them, receive applications, answer them and close right on the phone, an invaluable bun for a sanatorium with 100% waffle coating and a huge tent of sanitary ware; electricians and other engineers. <br>  The OTRS documentation says (and it‚Äôs also clear from the name) that this module is written for iPhone and the official client is only for iPhone. <br>  But as it turned out, third-party craftsmen had long ago parted the protocol and signed clients for other platforms.  Yes, and you will agree it would be strange if the plumber carried an iPhone with him in his pocket.  Under the Android, there are even two, to choose from, this is <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.dacherSystems.dsHelpdesk">DSHelpdesk</a> (there is a <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.dacherSystems.dsHelpdesk.plus">paid version of</a> this application) and just the <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.androidvietnam.helpdesk">Help desk</a> . <br>  And so, we put the module. <br>  We download it all from the same place as the previous one (I will not give the link again). <br>  We select at the last stage the corresponding module, we put it in the same way as the previous module.  The installation field in the / opt / otrs / bin / cgi-bin / folder should appear json.pl file, if it appears, it means everything is OK, the module got up successfully. <br><br>  Next, we put the application you like and the ones listed above and try to hook onto the OTRS iiiii server (if you did the setup according to my instructions) it wasn‚Äôt there, it wouldn‚Äôt work right away.  And all because the json.pl module is not friends with any authorization other than authorization from the OTRS DB itself.  Therefore, we stamp into /opt/otrs/Kernel/Config.pm and immediately after the authorization block AD we add another back-end authorization block to the DB. <br>  It should look like this: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#       LDAP# $Self-&gt;{'AuthModule::LDAP::AlwaysFilter'} = ''; $Self-&gt;{'AuthModule::LDAP::Params'} = { port =&gt; 389, timeout =&gt; 120, async =&gt; 0, version =&gt; 3, sscope =&gt; 'sub' }; #   LDAP    # #   -     # $Self-&gt;{'AuthModule1'}='Kernel::System::Auth::DB'; #      LDAP # #     LDAP # $Self-&gt;{'AuthSyncModule'} = 'Kernel::System::Auth::Sync::LDAP';</span></span></code> </pre><br><br>  To make it clearer, we inserted these lines: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   -     # $Self-&gt;{'AuthModule1'}='Kernel::System::Auth::DB';</span></span></code> </pre><br><br>  We'll try to catch the iiii, no way again, and if you choose the DSHelpdesk device for your mobile device, the program will also crash with an error. <br>  The problem is that the mobile client does not understand what Kerberos authentication is, and Apache2 valiantly requires authorization when trying to access the / opt / otrs / bin / cgi-bin directory and the json.pl file as well.  Therefore, it is necessary to explain to the Apache that in order to access this file, authorization is not necessary, and for this you have to edit the virtual host settings file /etc/apache2/sites-enabled/otrs.conf and add one more small block to it <br><br><pre> <code class="bash hljs"> &lt;Location /otrs/json.pl&gt; ErrorDocument 403 /otrs/json.pl SetHandler perl-script PerlResponseHandler ModPerl::Registry Options +ExecCGI PerlOptions +ParseHeaders PerlOptions +SetupEnv Require all granted Satisfy Any &lt;/Location&gt;</code> </pre><br><br>  I added immediately after the first Location block immediately after the tag <br><pre> <code class="bash hljs">&lt;/Location&gt;</code> </pre><br><br>  Now familiar already <br><br><pre> <code class="bash hljs">service apache2 reload service apache2 restart</code> </pre><br><br>  And we try to log in from the mobile client again, and if you did everything correctly, then the authorization will succeed and we will see the requests sorted by folders according to statuses. <br><br><h5>  Fix shoals </h5><br>  The module works fine, the application clings, the application is visible, but here's the problem, when you try to open the application details, the application either throws out an error and does not open anything or collapse at all.  And the content of the error like this: <br>  ‚ÄúNo access method 'TicketFlagSet ()' from 'TicketObject'‚Äù <br>  I searched for an answer for a long time until I read the description of one of the applications right in the Play-Market. <br>  It turned out to be solved simply.  Go to the admin panel of OTRS: System Administration -&gt; System Configuration -&gt; in the drop-down menu, select iPhoneHandle -&gt; API <br>  Find the parameter <br>  iPhone :: API :: Object ### TicketObject <br>  And erase everything that is there, click "Send" at the bottom of the page and voila, everything works the way it should and the application in the mobile application opens with details and no errors. </div><p>Source: <a href="https://habr.com/ru/post/265541/">https://habr.com/ru/post/265541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265527/index.html">Single-threaded Android WebView</a></li>
<li><a href="../265529/index.html">Basic principles of virtualization on the fingers</a></li>
<li><a href="../265531/index.html">Emacs: we train the cursor</a></li>
<li><a href="../265533/index.html">Dell ASM vs. Cisco UCS: How We Tested Infrastructure Automation</a></li>
<li><a href="../265537/index.html">OTRS 4.0.10. We put on Ubuntu + AD + Kerberos + SSO (Part Two)</a></li>
<li><a href="../265543/index.html">Free mono-vendor seminar: ‚ÄúKerio Connect is the solution for safe and comfortable work with e-mail‚Äù</a></li>
<li><a href="../265545/index.html">Atmospheric scattering in the video The Blacksmith</a></li>
<li><a href="../265547/index.html">220,000 iCloud accounts compromised using a backdoor for jailbreaked iOS devices</a></li>
<li><a href="../265549/index.html">Datathon at Data Science Week</a></li>
<li><a href="../265551/index.html">IBM assembled a new brain-like system from neuromorphic chips</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Turn the Arduino into a full-fledged AVRISP programmer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I welcome all users of Habr , in particular those who suffer from the Arduino theme, as I do. 

 I have long been asked - is it possible to flash hex ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Turn the Arduino into a full-fledged AVRISP programmer</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/599/9da/073/5999da0732874aa6bdb0dcb8b100eecf.png" alt="image"><br><br>  I welcome all users of <a href="http://habrahabr.ru/">Habr</a> , in particular those who suffer from the <a href="http://habrahabr.ru/hub/arduino/">Arduino</a> theme, as I do. <br><br>  I have long been asked - is it possible to flash hex files with Arduino?  Change fyuzy?  Read firmware?  And all that ... The answer is - it is possible, and today I will tell you how I do it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/cVogb2HtLO4%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253&amp;usg=ALkJrhgaRk5KZMiMx9KTfBsa8RR2HV_2Tw" frameborder="0" allowfullscreen=""></iframe><br>  (This video duplicates the information below) <br><a name="habracut"></a><br>  Arduino is like a great start for a beginner, but you need to grow further, the world of microcontrollers is great and gives great opportunities, but, alas, the Arduino is a fairly narrow profile. <br><br>  <b>A little background:</b> <br>  One fine day, I came across a great project on ATtiny13, but alas, the author uploaded only a hex file and a scheme to the network, and of course, I could not try it in hardware.  I was tormented by this question more and more, and then I accidentally stumbled upon one video on the network, where the author claimed that he, with the help of Arduino, flashed another microcontroller, having only a hex-file, and the scheme itself.  It was he who suggested to me - use SinaProg, but with Arduino files ... <br><br>  Going on SinaProg, I downloaded <a href="https://www.google.com.ua/search%3Fq%3DSinaProg%2B2.1.1.RUS%26oq%3DSinaProg%2B2.1.1.RUS%26aqs%3Dchrome..69i57.478j0j4%26sourceid%3Dchrome%26es_sm%3D93%26ie%3DUTF-8">SinaProg 2.1.1.RUS</a> , but he refused to work with Arduino, because I threw a couple of files from the Arduino IDE into the SinaProg 2.1.1 \ data \ folder and it all worked. <br><br>  Let's go briefly on the possibilities of the software: <br><br><img src="https://habrastorage.org/files/81c/107/424/81c107424cad4df18b303c93335d7aee.png" alt="image"><br><br>  In the <b>Hex-file</b> block, select hex or eep (the first is the firmware, the second is the contents of the non-volatile memory). <br><br>  And the part where the "&gt;" button, we can see all sorts of messages, like "OK", or "ERROR", the button "&gt;" itself opens the <a href="https://www.google.com.ua/search%3Fq%3DAVR%2BDude%26oq%3DAVR%2BDude%26aqs%3Dchrome..69i57%26sourceid%3Dchrome%26es_sm%3D93%26ie%3DUTF-8">Avrdude</a> logs. <br><br>  In the <b>flash</b> block there are buttons: <br><br>  Program - write the hex file to the microcontroller (possible when Hex-file is selected); <br>  Verify - check the firmware, which is in the microcontroller, and the hex-file (in other words, their comparison), if everything is normal - the program says OK; <br>  Read - read the hex file. <br><br>  With the <b>EEPROM</b> block, everything is analogous. <br><br>  Next, the <b>Device</b> block, here you can select the desired microcontroller, here is the entire list of supported (list ripped from the Device.txt file, which lies in the SinaProg 2.1.1 \ data \ folder): <br><br><div class="spoiler">  <b class="spoiler_title">Here they are a pair of three</b> <div class="spoiler_text">  Joke, how many of them: <br><br>  AT90CAN128 <br>  AT90CAN32 <br>  AT90CAN64 <br>  AT90PWM2 <br>  AT90PWM2B <br>  AT90PWM3 <br>  AT90PWM3B <br>  AT90USB1286 <br>  AT90USB1287 <br>  AT90USB162 <br>  AT90USB646 <br>  AT90USB647 <br>  AT90USB82 <br>  AT90s1200 <br>  AT90s2313 <br>  AT90s2323 <br>  AT90s2333 <br>  AT90s2343 <br>  AT90s4414 <br>  AT90s4433 <br>  AT90s4434 <br>  AT90s8515 <br>  AT90s8535 <br>  ATmega103 <br>  ATmega128 <br>  ATmega1280 <br>  ATmega1281 <br>  ATmega1284P <br>  ATmega128RFA1 <br>  ATmega16 <br>  ATmega161 <br>  ATmega162 <br>  ATmega163 <br>  ATmega164P <br>  ATmega168 <br>  ATmega169 <br>  ATmega2560 <br>  ATmega2561 <br>  ATmega32 <br>  ATmega324P <br>  ATmega325 <br>  ATmega3250 <br>  ATmega328P <br>  ATmega329 <br>  ATmega3290 <br>  ATmega3290P <br>  ATmega329P <br>  ATmega48 <br>  ATmega64 <br>  ATmega640 <br>  ATmega644 <br>  ATmega644P <br>  ATmega645 <br>  ATmega6450 <br>  ATmega649 <br>  ATmega6490 <br>  ATmega8 <br>  ATmega8515 <br>  ATmega8535 <br>  ATmega88 <br>  ATtiny11 <br>  ATtiny12 <br>  ATtiny13 <br>  ATtiny15 <br>  ATtiny22 2343 <br>  ATtiny2313 <br>  ATtiny24 <br>  ATtiny25 <br>  ATtiny26 <br>  ATtiny261 <br>  ATtiny44 <br>  ATtiny45 <br>  ATtiny461 <br>  ATtiny84 <br>  ATtiny85 <br>  ATtiny861 <br>  ATtiny88 <br>  ATxmega64A1 <br>  ATxmega128A1 <br>  ATxmega128A1D <br>  ATxmega192A1 <br>  ATxmega256A1 <br>  ATxmega64A3 <br>  ATxmega128A3 <br>  ATxmega192A3 <br>  ATxmega256A3 <br>  ATxmega256A3B <br>  ATxmega16A4 <br>  ATxmega32A4 <br>  ATxmega64A4 <br>  ATxmega128A4 <br><br></div></div><br><br>  As you can see, there are all popular ATmel microcontrollers, in particular ATmega328P, ATmega8, ATtiny13, ATtiny2313 and all other ... <br><br>  Next - the <b>Search</b> button, if you press it, the program will try to read the signatures of the microcontroller that is connected to the programmer, in other words, it will look for the microcontroller.  Then he can answer ‚ÄúOK‚Äù or ‚ÄúERROR‚Äù in the information block, if everything is normal or not, respectively. <br><br>  In the <b>Fuses</b> block, <b>there</b> are presets for ATmega8 to work at different frequencies, but, alas, only for ATmega8 and ATmega32, <a href="http://easyelectronics.ru/sinaprog-graficheskaya-obolochka-dlya-avrdude.html">you can add in the Fuse.txt file</a> (which lies in the SinaProg 2.1.1 \ data \ folder). <br><br>  There is a <b>Program</b> button - to record presets, we look at the paragraph above. <br><br>  As well as <b>Advanced</b> - a dashing button, after pressing it you can see the following window: <br><br><img src="https://habrastorage.org/files/aa1/993/460/aa19934600174e45b80d9bd7313320b7.png" alt="image"><br><br>  <b>Device signature</b> - some tsiferki, I understand this is the identifier of the microcontroller, according to them the program identifies what kind of microcontroller we are suing. <br><br>  Information part, all as above. <br><br>  Just below are the fyuzy ... if you already combed, do not forget to first read them with the <b>Read</b> button (so as not to change important fusions on purpose, for example, <a href="http://easyelectronics.ru/avr-uchebnyj-kurs-konfiguraciya-fuse-bit.html">"SPIEN" or "RSTDSBL"</a> ), write the fyus - <b>Write</b> button, <b>Chip Erase</b> button erases the microcontroller, something about reminds - formatting a flash drive on a computer (but fuses are not installed by default, so don't forget about it). <br><br>  A few words about fusion bits are such as fine adjustments of the microcontroller, then the frequency is raised, then reduced, then on / off clocking from the internal RC chain, something else ... well, you can climb there only as a last resort, otherwise you can block a microcontroller (to cheat so that it stops working, seriously), and without the <a href="http://www.getchip.net/posts/059-ispravlyaem-avr-fyuzy-pri-pomoshhi-atmega-fusebit-doctor/">Atmega fusebit doctor anyway</a> . <br><br>  Here is the <a href="http://payalo.at.ua/c_fuse/calc.html">first link</a> from Google for the query "fyuzov calculator", but I warn you, poking something there, not knowing why, and then writing it into the microcontroller will not lead to anything good, I know. <br><br>  Further, some kind of information block, did not delve too much.  Well, the exit button, I think you already guessed it, even if you do not know English. <br><br>  So, the last block of the main window of the program - <b>Programmer</b> , then the type of programmer is selected, if you use Arduino as a programmer - put everything, as I have on the screen, just not COM19, I have it, you will probably have another one In any case, not exactly COM1, the first is the system one, relevant only for programmers that connect to the real COM port, for example, <a href="https://www.google.com.ua/search%3Fq%3D%25D0%259F%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580%2B%25D0%2593%25D1%2580%25D0%25BE%25D0%25BC%25D0%25BE%25D0%25B2%25D0%25B0%26oq%3D%25D0%259F%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580%2B%25D0%2593%25D1%2580%25D0%25BE%25D0%25BC%25D0%25BE%25D0%25B2%25D0%25B0%26aqs%3Dchrome..69i57%26sourceid%3Dchrome%26es_sm%3D93%26ie%3DUTF-8">the Gromov Programmer</a> .  There may not be a COM port on the laptop, but on computers, as a rule, there is still a COM port, especially those that are older.  You can use another programmer, for example, <a href="http://www.fischl.de/usbasp/">USBASP</a> , just don‚Äôt forget to select it in the list, I set the speed for it to be the same as in the case of AVRISP. <br><br>  List of supported programmers: <br><br><div class="spoiler">  <b class="spoiler_title">Not enough to be</b> <div class="spoiler_text">  Gromov <br>  USBtiny <br>  Alf <br>  Arduino <br>  AT ISP <br>  AVR109 <br>  AVR910 <br>  AVR911 <br>  AVRISP <br>  AVRISP 2 <br>  AVRISP mkII <br>  AVRISP v2 <br>  Bascom <br>  Blaster <br>  BSD <br>  Butterfly <br>  C2N232I <br>  DAPA <br>  DASA <br>  DASA 3 <br>  Dragon_dw <br>  Dragon_HVSP <br>  Dragon_isp <br>  Dragon_JTAG <br>  Dragon_PP <br>  DT006 <br>  ERE-ISP-AVR <br>  Frank-STK200 <br>  Futurlec <br>  JTAG 1 <br>  JTAG 1Slow <br>  JTAG 2Slow <br>  JTAG 2 <br>  JTAG 2Fast <br>  JTAG 2ISP <br>  JTAG 2dW <br>  JTAG mkI <br>  JTAG mkII <br>  MIB510 <br>  pAVR <br>  Picoweb <br>  Pony-STK200 <br>  ponyser <br>  SI Prog <br>  SP12 <br>  STK200 <br>  STK500 <br>  STK500 HVSP <br>  STK500 PP <br>  STK500 v1 <br>  STK500 v2 <br>  STK600 <br>  STK600 HVSP <br>  STK600 PP <br>  USBasp <br>  Xil <br><br></div></div><br><br>  Personally, I tested only on AVRISP programmers (Arduino with ArduinoISP stitched sketch) and USBasp, on two microcontrollers - ATmega8 and ATtiny13. <br><br>  In order to be able to sew / read / change fyyuz / <b>kill the microcontroller</b> with the help of Arduino, you first need to sew up the sketch ArduinoISP, connecting everything, as I wrote, for example here: <br><br>  <a href="http://habrahabr.ru/post/234477/">ATtiny13 firmware and programming with Arduino</a> . <br><br>  In a nutshell, we connect the pins Reset, MOSI, MISO, SCK of the microcontroller, which we will flash / read the firmware / change the fyuza as indicated in the sketch in the comments, namely: <br><br><pre><code class="hljs ruby">... /<span class="hljs-regexp"><span class="hljs-regexp">/ pin name: not-mega: mega(1280 and 2560) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ slave reset: 10: 53 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ MOSI: 11: 51 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ MISO: 12: 50 /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ SCK: 13: 52 ...</span></span></code> </pre> <br><br>  Here is an example of connecting to the ATmega8 arduine: <br><br><img src="https://habrastorage.org/files/ff3/4ac/00e/ff34ac00e4db4b9da41b04297b151bff.png" alt="image"><br><br>  Well, by analogy ... We are looking for a map of pins, for example, in the datasheet (technical documentation on the MK) of the microcontroller we are interested in, here, for example, the first link from Google for the request ‚ÄúATmega8 pdf‚Äù. <br><br>  Well, I will not torment more, <a href="https://vk.com/doc256435878_344306532">here is a link to the program with files from the Arduino IDE</a> . <br><br>  <a href="http://arduino.ru/forum/programmirovanie/proshivka-hex-failov-pri-pomoshchi-arduino-i-sinaprog">Link to the thread on the Russian-language forum Arduino</a> ; <br><br>  <a href="http://payalo.at.ua/c_fuse/calc.html">Fyuzov calculator</a> ; <br><br>  <a href="http://habrahabr.ru/post/234477/">ATtiny13 firmware and programming with Arduino</a> ; <br><br>  <a href="http://geektimes.ru/users/hwman/topics/">All my publications</a> . <br><br>  PS I had such that ATtiny13 stopped flashing, trying to program it, after I tried to run it at a frequency of 128 kHz, I dug out somewhere, such a <a href="http://pastebin.com/Aw5BD0zy">slightly modified ArduinoISP code</a> that causes the firmware / change of fuses to go slower once and maybe even some kind of magic, did not understand, honestly. </div><p>Source: <a href="https://habr.com/ru/post/247329/">https://habr.com/ru/post/247329/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247317/index.html">Eleven content marketing articles that you might have missed in 2014</a></li>
<li><a href="../247319/index.html">Flexible Scrum development methodology</a></li>
<li><a href="../247321/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ29 (December 29, 2014 - January 4, 2015)</a></li>
<li><a href="../247323/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ141 (December 29, 2014 - January 4, 2015)</a></li>
<li><a href="../247325/index.html">A quick note about inheritance in Node.js</a></li>
<li><a href="../247331/index.html">Asynchronous component initialization</a></li>
<li><a href="../247333/index.html">"Pixel gallop - part one" - basic concepts, stages of maturation, applied exercises</a></li>
<li><a href="../247337/index.html">ODROID-C1 - review and comparison with RPi</a></li>
<li><a href="../247339/index.html">Synchronization and storage of home photos / videos in the cloud</a></li>
<li><a href="../247341/index.html">Sculpt Startup. Start</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
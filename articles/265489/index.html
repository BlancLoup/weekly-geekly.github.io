<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Co-clustering: Segmentation of data along and across</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Usually clustering involves the allocation of several groups of objects with similar characteristics within the group, and between groups - different....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Co-clustering: Segmentation of data along and across</h1><div class="post__text post__text-html js-mediator-article">  Usually clustering involves the allocation of several groups of objects with similar characteristics within the group, and between groups - different.  A special feature of co-clustering is the grouping of not only the objects, but also the characteristics of these objects themselves.  That is, if the data is represented as a matrix, then clustering is the rearrangement of rows or columns of the matrix, and co-clustering is the rearrangement of rows and columns of the data matrix. <br>  As in my previous publications, examples of the use of methods and the visualization of solutions are shown on the data of the survey results.  A typical area of ‚Äã‚Äãapplication for co-clustering algorithms is bioinformatics, image segmentation, text analysis. <br><br><img src="https://habrastorage.org/files/176/d5d/42a/176d5d42a7434176bd6346a605fab6fd.jpg"><br><br><a name="habracut"></a><br>  For co-clustering data, as in the case of clustering, there are many algorithms.  Wikipedia <a href="https://en.wikipedia.org/wiki/Biclustering">reports</a> at least 22 methods of co-clustering.  This article will demonstrate the capabilities of only one of them.  This method is called block clustering.  Its essence is best expressed by a picture taken from the article by the authors of this approach [1]. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/983/c9f/ab5/983c9fab5d674269bfabcd82daa7a569.png"></div><br><br>  In other words, the task is to assemble a block image from a data mosaic.  Mathematically, this method can be formalized using the three-factorization procedure for non-negative matrices.  Let <i>V</i> be the input matrix of size <i>nxm</i> .  It is required to present it in the form <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a4/7ea/872/3a47ea8728d1f488b85589be70d05eeb.png" alt="image"></div><br>  Each row of matrices <i>R</i> and <i>C</i> contains exactly one unit, the other elements are zeros.  The unit element ( <i>ij</i> ) of the matrix <i>R</i> indicates that the row <i>i of the</i> matrix <i>V</i> belongs to the <i>jth</i> horizontal cluster.  The unit element ( <i>kl</i> ) of the matrix <i>C</i> indicates that the column <i>k of the</i> matrix <i>V</i> belongs to the lth vertical cluster. <br><br>  The matrices <i>R</i> and <i>C</i> are chosen in such a way as to minimize the loss function: <img src="https://habrastorage.org/getpro/habr/post_images/8f1/0e0/26c/8f10e026c1ba5a8a529fc87a5137920d.png" alt="image">  In this case, <i>D</i> is determined by the Frobenius norm. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b30/813/6b7/b308136b768e9c19165acbc0ae8a67ab.png" alt="image"></div><br>  This formalization goes back to [2], in which the orthogonal tri-factorization of non-negative matrices was proposed.  This formulation of the problem allows the use of iterative methods for finding the specified decomposition of the input matrix, similar to the factorization methods of non-negative matrices. <br><br>  But this publication will consider examples of block clustering obtained using the maximum likelihood method.  Details of the algorithm can be found in [1].  Such an approach, as a rule, requires large computational costs for finding a solution.  But there are advantages.  First, using such a method, it is possible to automatically determine the optimal, from the point of view of the algorithm, the number of horizontal and vertical clusters for categorical data [3].  Secondly, the algorithm allows to take into account the type of input data - categorical (in particular, binary) or continuous (in this case, no restriction is required that the input data is non-negative).  For the calculations, the blockcluster [4] package of the R environment will be used. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3eb/180/e0a/3eb180e0a2674e8b989ab0a131a03915.jpg"></div><br><br>  The main purpose of this publication is to demonstrate the capabilities of visualization of the clustering solution.  A distinctive feature of block clustering, in addition to data segmentation in both directions, is that the type of clustering does not translate input data values.  Only a permutation of the rows and columns of the input matrix is ‚Äã‚Äãperformed.  This makes it possible to visualize as is the result of clustering, which is easy to interpret.  I will make a reservation that if the number of columns in a matrix is ‚Äã‚Äãmeasured in hundreds or thousands, you will probably need to pre-process the result.  But in the tasks of analyzing the results of surveys, which will be discussed below, clustering is usually not required for a very large number of variables. <br><br>  What to do if your task does not need to select groups of variables, but you want to get an idea of ‚Äã‚Äãthe block form of your data?  Co-clustering does not necessarily require grouping of variables.  Just with this example we begin. <br><br>  <b>Example 1: Freedom in the World (Freedom House 2015 data)</b> <br>  The Freedom in the World (FIW) data is a comparative assessment of political rights and civil liberties in 195 countries of the world based on interviews with experts conducted by Freedom House.  Data for 2015, aggregated to 7 sub-categories, are available <a href="https://freedomhouse.org/report/freedom-world-aggregate-and-subcategory-scores">here</a> . <br>  According to the results of these 7 variables, each of the 195 countries is assigned two ratings - political rights and civil liberties, and the final status of the country is free, partially free and unfree (only 3 groups) based on the results of these ratings. <br><div class="spoiler">  <b class="spoiler_title">Code on R with (4.1) co-clustering FIW data</b> <div class="spoiler_text"><pre><code class="lisp hljs">library(<span class="hljs-name"><span class="hljs-name">data</span></span>.table) library(<span class="hljs-name"><span class="hljs-name">blockcluster</span></span>) fiw.<span class="hljs-number"><span class="hljs-number">2015</span></span> &lt;- fread(<span class="hljs-string"><span class="hljs-string">"FIW 2015.csv"</span></span>) fiw.<span class="hljs-number"><span class="hljs-number">2015</span></span>.clusters &lt;- cocluster(<span class="hljs-name"><span class="hljs-name">as</span></span>.matrix(<span class="hljs-name"><span class="hljs-name">fiw</span></span>.<span class="hljs-number"><span class="hljs-number">2015</span></span>[,LETTERS[<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">7</span></span>],with=FALSE]), datatype = <span class="hljs-string"><span class="hljs-string">"categorical"</span></span>,model = <span class="hljs-string"><span class="hljs-string">"pik_rhol_multi"</span></span>, nbcocluster = c(<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>), strategy = cocluststrategy(<span class="hljs-name"><span class="hljs-name">nbinititerations=100</span></span>, nbxem = <span class="hljs-number"><span class="hljs-number">20</span></span>, nbtry = <span class="hljs-number"><span class="hljs-number">20</span></span> ))</code> </pre> <br></div></div><br>  For the objects of the blockcluster class, the function plot () is supported, but I use my own variant of displaying the clustering solution. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4e1/e01/4bc/4e1e014bcfc24ba8886c33e82a89f5fa.png"></div><br><br>  The result of the clustering of all countries, with the exception of a few cases, corresponds to the status proposed by Freedom House, taking into account that the 2 top clusters in their report have the same status, Free.  Nevertheless, it is easy to see that the second cluster is clearly different from the first, especially in the variables ‚ÄúF‚Äù and ‚ÄúG‚Äù.  Also, this result shows that, in general, each cluster is ‚Äúdarker‚Äù than the previous one in all variables at once.  The result of cluster clustering presented on a geographical map in tableau public ( <a href="https://public.tableau.com/profile/eugeny">link</a> ) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/eca/110/7da/eca1107da8b84d019020a74928a0e947.png"></div><br><br>  In my view, the clustering task is more intended for marketing research than sociological research.  Segmentation and selection of features of audiences is a very important element of the analysis of such data.  But in open access marketing base nobody puts.  Therefore, we consider an illustration of block clustering on the example of sociological data; of course, the type of research has no effect on the essence of the method. <br><br>  <b>Example 2: Democracy module (European social survey 2012 data)</b> <br>  The research of the ESS project is mentioned in all my previous publications.  <a href="http://habrahabr.ru/post/262005/">It</a> tells you where to get the data and how to load it into R. We will group the target audience and variables by block of research with questions about democracy. <br>  Respondents were asked to rate (from 0 to 10) the degree of importance for democracy of some 16 basic values ‚Äã‚Äãand evaluate (from 0 to 10) the degree to which the respondent‚Äôs country applies 14 statements about civil institutions and rights at present.  Polar values: <br>  0 - ‚Äúit doesn‚Äôt matter‚Äù / ‚Äúnot entirely true‚Äù; <br>  10 - ‚Äúextremely important‚Äù / ‚Äúfully corresponds to reality‚Äù. <br>  Detailed information about the module and the questions themselves are available <a href="http://www.europeansocialsurvey.org/data/themes.html%3Ft%3Dudemocracy">here</a> . <br>  This is a <a href="http://www.europeansocialsurvey.org/docs/round6/fieldwork/estonia/russian/ESS6_questionnaires_EE_rus.pdf">link</a> to a pdf file with a questionnaire in Russian for respondents from Estonia. <br><br>  We set the target audience: men aged 15 years from France or Russia. <br><div class="spoiler">  <b class="spoiler_title">Code on R with (5.3) co-clustering ESS data</b> <div class="spoiler_text"><pre> <code class="lisp hljs"># block.e.names are names of Democracy module variables that were taken from questionnaire. data &lt;- subset(<span class="hljs-name"><span class="hljs-name">srv</span></span>.data, cntry %in% c(<span class="hljs-string"><span class="hljs-string">"FR"</span></span>, <span class="hljs-string"><span class="hljs-string">"RU"</span></span>) &amp; gndr =='Male', select = c('cntry', block.e.names[<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>])) command &lt;- paste(<span class="hljs-string"><span class="hljs-string">"data.m &lt;- data[,as.numeric(c("</span></span>, paste(<span class="hljs-name"><span class="hljs-name">block</span></span>.e.names[<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>], collapse = <span class="hljs-string"><span class="hljs-string">","</span></span>), <span class="hljs-string"><span class="hljs-string">")) - 1]"</span></span>) eval(<span class="hljs-name"><span class="hljs-name">parse</span></span>(<span class="hljs-name"><span class="hljs-name">text=command</span></span>)) dim(<span class="hljs-name"><span class="hljs-name">data</span></span>.m) &lt;- c(<span class="hljs-name"><span class="hljs-name">length</span></span>(<span class="hljs-name"><span class="hljs-name">data</span></span>.m)/30, <span class="hljs-number"><span class="hljs-number">30</span></span>) data.m[is.na(<span class="hljs-name"><span class="hljs-name">data</span></span>.m)] &lt;- <span class="hljs-number"><span class="hljs-number">-1</span></span> data.clusters &lt;- cocluster(<span class="hljs-name"><span class="hljs-name">data</span></span>.m, datatype = <span class="hljs-string"><span class="hljs-string">"categorical"</span></span>,model = <span class="hljs-string"><span class="hljs-string">"pik_rhol_multi"</span></span>, nbcocluster =c(<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), strategy = cocluststrategy(<span class="hljs-name"><span class="hljs-name">nbinititerations=100</span></span>, nbxem = <span class="hljs-number"><span class="hljs-number">40</span></span>, nbtry = <span class="hljs-number"><span class="hljs-number">40</span></span> ))</code> </pre><br></div></div><br>  When outputting results to a block map, we replace the missing values ‚Äã‚Äã(NA) by -5, so that they differ more from 0. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fdb/57b/be5/fdb57bbe54cc49798edcdc5ef8adfa14.png"></div><br><br>  Clusters are numbered from left to right and from top to bottom. <br>  First about vertical clusters.  The first (light) cluster got the first 15 questions about common (hypothetical) values ‚Äã‚Äãfor democracy.  The only out of 16 questions about basic values ‚Äã‚Äãfor democracy that did not fall into the first cluster is the question of consolidation (‚ÄúIs it important that before adopting policy decisions take into account the opinions of other European governments‚Äù), it falls into the second cluster.  The third vertical cluster is darker than the second, primarily for the first and third horizontal clusters.  This third cluster consists of the following judgments. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/96a/ae8/811/96aae881139d47b8b0cccca84114321f.png"></div><br><br>  Those respondents who emphasize the importance of basic civil and political values ‚Äã‚Äãfor democracy - 1 and 3 horizontal clusters are more critical of reality - 2 and 3 vertical clusters.  The third horizontal cluster is more pessimistic than the first. <br>  Horizontal clusters 2 and 4 are more uniform in vertical components, but the fourth is darker than the second, especially in the first vertical component.  The fourth cluster respondents do not consider it important to have any values ‚Äã‚Äãfor the democratic life of the country. <br>  In the fifth horizontal cluster there are many respondents who did not give answers to a number of questions, mostly from the second and first vertical clusters.  The lower left corner is very contrasted - either there is no answer to the question, or a high degree of importance of a certain value is stated. <br><br>  More about examples.  <a href="https://cran.r-project.org/web/packages/blockcluster/vignettes/blockcluster_tutorial_V3.0.pdf">In this pdf</a> , at the very end of the article, examples of the results of block clustering of images and abstracts of scientific articles are presented. <br><br>  Literature: <br>  [1] G. Govaert, M. Nadif, Block clustering, Computational Statistics &amp; Data Analysis, Volume 52, Issue 6, February 20, 2008, Pages 3233-3245. <br>  [2] C. Ding et al.  Orthogonal nonnegative matrix t-factorizations for clustering / / Proceedings of the 12th ACM SIGKDD international conference on Knowledge Discovery and Data Mining.  - ACM, 2006. - p. 126-135. <br>  [3] C. Keribin et al.  Estimation and selection for the latent block model on categorical data // Statistics and Computing.  - 2014. - p. 1-16. <br>  [4] PS Bhatia et al.  blockcluster: Coclustering package for binary, contingency, continuous and categorical data-sets.  R package version 3.0.2 <br><br>  <b>Update:</b> In the R code for (5.3) co-clustering, a line was skipped replacing the NA values ‚Äã‚Äãof the input matrix. </div><p>Source: <a href="https://habr.com/ru/post/265489/">https://habr.com/ru/post/265489/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265477/index.html">Tab module on es6 / es2015 without jQuery and other dependencies</a></li>
<li><a href="../265481/index.html">How company executives understand what is happening in the data center</a></li>
<li><a href="../265483/index.html">Using Microsoft Azure for scalability and resiliency of the CloudStats.me project</a></li>
<li><a href="../265485/index.html">Features of the xPDOObject :: save () + Transaction Method</a></li>
<li><a href="../265487/index.html">Why gaming performance is not just average FPS</a></li>
<li><a href="../265491/index.html">We do our iterator</a></li>
<li><a href="../265495/index.html">Corporate immunity: we create a system of centralized management of network security in the company and its branches</a></li>
<li><a href="../265497/index.html">Telegram-like animated placeholder for HTML inputs</a></li>
<li><a href="../265499/index.html">Unstructured data analysis and storage optimization</a></li>
<li><a href="../265501/index.html">Creating a test DB context in tests using xUnit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
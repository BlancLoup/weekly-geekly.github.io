<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to organize long-term archival storage of electronic documents</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, in the journal " Inside " we talked about the long-term archival storage of electronic documents (ED), certified by electronic signature (ED...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to organize long-term archival storage of electronic documents</h1><div class="post__text post__text-html js-mediator-article">  Recently, in the journal " <a href="https://www.gaz-is.ru/files/DAH_ED_Inside_GIS.pdf">Inside</a> " we talked about the long-term archival storage of electronic documents (ED), certified by electronic signature (ED).  The article was devoted to the review of various points of view on the organization of this process and approaches to the prolongation of the properties of the legal significance of ED.  In it, we focused on the approach, which provides for the formation of receipts of the document.  They are metadata containing the results of the checks performed, as well as all the necessary attributes confirming the legal significance of the document at the time of the check. <br><br>  This article describes in more detail another approach to long-term archival storage (DAH) - the formation of an improved electronic signature (CEC), namely, electronic signature in CAdES-A and XAdES-A archive formats. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gt/av/t5/gtavt5ym6v6ovu5nexepgv_fya4.png"></div><br><a name="habracut"></a>  Let us try to understand in more detail how and why archival ES can extend the life cycle of electronic documents with ES.  Let's start with a small theoretical educational program on the types and formats of electronic signature, and then consider in practice the procedure for the formation of archive electronic signature products developed by Gazinformservice. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Some theory </h3><br>  <b>CAdES type electronic signature</b> <br><br>  CMS Advanced Electronic Signatures (CAdES) is an EP standard that is an enhanced version of the Cryptographic Message Syntax (CMS) standard.  The main document describing this standard is ETSI TS 101 733 ‚ÄúElectronic Signature and Infrastructure (ESI);  CMS Advanced Electronic Signature (CAdES) ". <br><br>  CAdES became the development of CMS, in which the main shortcomings of the predecessor were corrected, such as the absence of a stamp of the trusted time of creating an EP, the absence of an EP content type, and the absence of the possibility of long-term preservation of the legal significance of an EP. <br><br>  The standard defines several CAdES formats, each of which includes the previous one (in accordance with the sequence presented below) and extends it: <br><br><div class="spoiler">  <b class="spoiler_title">Formats standard CAdES</b> <div class="spoiler_text">  1. CAdES-BES (Basic Electronic Signature) - the basic and simplest format of the standard, provides basic authentication of data and protection of its integrity.  It contains the following attributes: <br><br><ul><li>  Subscribed user data (sender's ED); </li><li>  a set of required signed attributes (attributes are called signed, if the generation of ES occurs from a combination of these attributes and user data); </li><li>  ES value calculated for user data and signed attributes; </li><li>  set of additional attributes; </li><li>  set of optional signed attributes. </li></ul><br>  2. CAdES-EPES (Explicit Policy-based Electronic Signature) is a format that contains an explicit indication of the selected EP policy.  A signature-policy-identifier attribute is added to CAdES-EPES, which identifies the identifier of the selected ES policy.  By signing this identifier, the sender explicitly indicates that he applied a specific policy when creating it.  Accordingly, the recipient must verify the ES under the same regulations. <br><br>  3. CAdES-T (Timestamp) is an electronic format of CAdES type, in which a field for fixing the trusted time is added. <br><br>  4. CAdES-C (Complete) contains a complete set of verification data.  It differs from CAdES-T by adding unsigned attributes to complete-certificate-references and complete-revocation-references. <br><br>  The first attribute contains the identifiers of all certificates used to verify the ES.  The second attribute contains identifiers of certificates from the list of revoked certificates (Certificate Revocation Lists, CRL, SOS) and / or responses received via the protocol for checking the current status of certificates (Online Certificate Status Protocol, OCSP). <br><br>  The inclusion of these attributes makes it easier to obtain information about the certificates of the ES verification keys, which are necessary for the recipient to verify the ES, since the data on valid and invalid certificates will already be contained in the ES itself. <br><br>  5. CAdES-X (Extended) is an CA format of the CAdES type, including the following sub-formats included in the CadES-C type: <br><br><ul><li>  CAdES-X Long is a long-term extended EA format, which adds the certificate-values ‚Äã‚Äãand revocation-values ‚Äã‚Äãattributes.  They represent the complete certificate and COC data required to verify the CAdES-C signature, even if their original source is not available and eliminates the possibility of losing this information. </li><li>  CAdES-X Type 1 - adds a time-stamp attribute that contains a time stamp on the entire CAdES-C signature.  This ensures the integrity and availability of trusted time in all elements of the EA.  Thus, this attribute allows you to protect certificates, SOS and responses received via the OCSP protocol, information about which is recorded in the ES (relevant when the certification authority key, SOS publisher key or OCSP service key is compromised). </li><li>  CAdES-X Type 2 - adds a time stamp to CAdES-C, but not to the entire ES, but only to full references to certificates and SOS. </li></ul><br>  6. CAdES-X Long Type 1 ‚Äî This EP format is a combination of the CAdES-X Long and CAdES-X Type 1 formats. <br><br>  7. CAdES-X Long Type 2 ‚Äî This EP format is a combination of the CAdES-X Long and CAdES-X Type 2 formats. <br><br>  8. CAdES-A (Archival) is a CAdES type EP format, formed on the basis of CAdES-X Long Type 1 or Type 2 by adding one or more archive-time-stamp attributes representing archive time stamps (Figure 1).  It is this ES format that is used for archiving long-term ES and ensuring DAH, subject to possible verification of the legal significance of the stored ED on a long time period (the so-called ‚Äútime interoperability‚Äù). </div></div><br>  <b>The CAdES-A archive archive form consists of the following elements:</b> <br><br><ul><li>  full set of verification data (CAdES-); </li><li>  certificate and COC values ‚Äã‚Äã(CAdES-X Type 1 or CAdES-X Type 2), if used; </li><li>  signed user data and an additional archived time stamp applied to all data. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/ef/ig/yxefig_fxyp8hcjrgywishxbspy.png"></div><br>  <i>Figure 1 - Scheme of formation of electronic signature in the format CAdES-A</i> <br><br>  The organization of the DAH is associated not only with the limited validity of the user certificate established by Russian legislation at 1 year 3 months, but also with modifications of cryptographic algorithms, which in turn is caused by the deterioration of their robustness properties due to the development of cryptanalysis methods and computing industry. <br><br>  An additional time stamp may be imposed on top of the EA in the CAdES-A format, which will protect its contents when identifying vulnerabilities of the cryptographic hash functions used, when hacking the cryptographic algorithms used and when the keys are compromised.  It should not be forgotten that the sequence of time stamps can provide protection against ES falsification, provided that these stamps were applied before the time stamp service key was compromised.  Thus, the EA in the CAdES-A format allows to preserve its authenticity for very long periods of time, and the periodic installation of archive stamps will provide the possibility of checking the EA when updating cryptographic standards. <br><br>  It is also important to note that the additional data needed to create the above-described forms of an archived EP are transmitted as unsigned attributes associated with a separate EP by placing the SignerInfo structure in the unsignedeAttrs field.  Thus, all attributes of the archived EDS are unsigned due to which its mathematical correctness is not impaired. <br><br>  Imagine all that was described above, in a more visual table: <br><br>  <i>Comparative analysis of formats for CA type CAdES</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/al/uw/vf/aluwvflgtifg-jdfm20vx6t7img.jpeg"></div><br>  <b>XAdES Electronic Signature</b> <br><br>  XML Advanced Electronic Signatures (XAdES) is an EP standard that is an enhanced version of the XML Digital Signature Standard (XMLDSig).  The main document describing this standard is ETSI EN 319 132-1 ‚ÄúElectronic Signature and Infrastructure (ESI);  XAdES digital signatures. <br><br>  Similar to the CAdES type EP, several formats are defined for the XAdES type EP, each of which includes the previous one (according to the sequence below) and expands it: <br><br><div class="spoiler">  <b class="spoiler_title">XAdES Formats</b> <div class="spoiler_text"><ul><li>  XAdES-BES (Basic Electronic Signature) </li><li>  XAdES-EPES (Explicit policy electronic signatures) </li><li>  XAdES-T (Timestamp) </li><li>  XAdES-C (Complete) </li><li>  XAdES-X (Extended Validation Data) </li><li>  XAdES-XL (Extended Long Term) </li><li>  XAdES-A (Archival) </li></ul><br></div></div><br>  We will not describe in detail the differences of each subsequent format in the list from the previous one, since it exactly repeats the description for CAdES, assuming that the signed structure is ‚Äúenriched‚Äù with similar fields and attributes.  The main differences are summarized immediately in tabular form: <br><br>  <i>Comparative analysis of formats of electronic signature type XAdES</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3m/44/mg/3m44mgdiziy4znz_w-ziyicwga8.jpeg"></div><br><h3>  New features of Litoria products to ensure DAH </h3><br>  The ‚ÄúLitoria Desktop 2‚Äù software package (PC) is a development by Gazinformservice, which provides the user with the option of completely abandoning paper workflow and switching to electronic legally significant and confidential interaction.  Formation and verification of CEC in CAdES-A format are already available to users of the software package, starting with release 2.2.3.  The same format ES verifies receipts, and also performs their verification of the PC of the Trusted Third Party Service "Litoria DVCS" in release 5.2.2. <br><br>  Consider the process of forming archived CEC based on product data. <br><br>  1. With the help of ‚ÄúLitoria Desktop 2‚Äù we will form the UEP on an electronic document, which we will transmit to ‚ÄúSDTS‚Äú Litoria DVCS ‚Äùto generate a receipt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9o/p-/az/9op-azf0f3v9en19p5rapxkrrae.png"></div><br>  <i>Figure 1 - Formation of CEC with the help of the PC "Litoria Desktop 2"</i> <i><br></i> <br>  Detailed information on the formed UEP can be viewed through the tab ‚ÄúCheck and extraction‚Äù.  We see that the signer‚Äôs certificate is valid until October 20, 2018 (Figure 2), and the certificate of the TSP server, which actually added a time stamp to the signature and made it improved (Figure 3), until December 22, 2032. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/44/xw/fl/44xwfl0_kf_ni0euy062ha_1hsk.png"></div><br>  <i>Figure 2 - Display of information about ES in the interface of the PC "Litoria Desktop 2" (user certificate)</i> <i><br></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eg/7q/ck/eg7qckbni00jw5glulwjel5axm8.png"></div><br>  <i>Figure 3 - Display of information about ES in the interface of the PC ‚ÄúLitoria Desktop 2‚Äù (TSP server certificate)</i> <i><br></i> <br>  In turn, the validity of UEP, which is certified by ED, is determined by the validity of the time stamp server certificate.  But here you should pay your attention that for the article we used test non-accredited CA and test TSP, for which unqualified certificates were issued.  In the Russian reality, the validity period of a qualified time stamp server certificate should not exceed 15 years. <br><br>  And what should we do when the document should be stored for more than 15 years?  Just here the archive format of the electronic signature entered on the receipt comes into play (with the help of the SDTS ‚ÄúLitoria DVCS‚Äù PC). <br><br>  2. Go to the personal account of the user of the PC ‚ÄúSDTS‚Äú Litoria DVCS ‚Äùand send the signed ED to form a receipt for the check (Figures 4, 5). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gp/os/yz/gposyzblcos7bynrvuf29igkowa.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yc/r6/bf/ycr6bfebap0g2fd2qtauliakhay.png"></div><br>  <i>Figure 4 - Formation of a receipt for ED in PC "SDTS" Litoria DVCS "</i> <i><br></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/vo/vc/icvovcbaaztsnsaciwazziy5td0.png"></div><br>  <i>Figure 5 - Detailed information on the receipt in the PC "SDTS" Litoria DVCS "</i> <i><br></i> <br>  Checking the ED is completed, the receipt is generated.  Now the complex in an automated mode will perform an analysis of the validity of each of the stored receipts, which is determined by the validity of the time stamp service certificate, and upon the occurrence of the event of its expiration, the receipts will be reissued, i.e.  a chain of legally relevant documents is formed ‚Äúsource ED - receipt 1 - receipt 2 -‚Ä¶.  - n receipt <br><br><h3>  Signed in CAdES-A format using the Litoria Desktop 2 PC </h3><br>  Let us consider the second, so far mechanized, method of forming an electronic signature in the CAdES-A format using the Litoria Desktop 2 software package. <br><br>  1. Start the PC "Litoria Desktop 2", form the UEP in a known way <br><br>  2. Go to the ‚ÄúArchival storage‚Äù directory, copy the signed ED to the ‚ÄúedsArch‚Äù folder and run the Gis.ArchUpgrade utility (the installation takes place during the installation of the complex in the appropriate directory specified by the user, Figure 6) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8s/tb/mo/8stbmodrrrrtlowkmocwm0bxpok.png"></div><br>  <i>Figure 6 - Preparation of ED for the formation of electronic signature in the CAdES format</i> <i><br></i> <br>  3. Upon completion of the procedure on the screen, the user in the console will receive a corresponding notification (Figure 7). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hc/o3/_c/hco3_cp91z5oewww0ldgcpz3ulm.png"></div><br>  <i>Figure 7 - Successful formation of CEC in the format CAdES-A</i> <br><br>  We emphasize once again that the CAdES-A signature format assumes the addition of unsigned attributes to the source DG, which does not violate the mathematical correctness of the source DG. <br><br>  4. Now go to the ‚ÄúedsArch‚Äù folder and the file generated by the utility‚Äôs work is checked in the Litoria Desktop 2 PC (Figures 8, 9, 10). <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/in/ft/rw/inftrwszof9eae74unophhqqozm.png"></div><br>  <i>Figure 8 - Archive-signed file generated by the Gis.ArchUpgrade utility</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5n/vi/da/5nvidah1enrnzd6zun43scl9j0g.png"></div><br>  <i>Figure 9 - Results of checking the archived electronic signature in the PC ‚ÄúLitoria Desktop 2‚Äù (user certificate)</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-w/0d/ut/-w0duty_n80ssumltsb6mwfpzku.png"></div><br>  <i>Figure 10 - Results of checking the archived electronic signature in the PC ‚ÄúLitoria Desktop 2‚Äù (TSP service certificate)</i> <br><br>  And finally - a fragment of the ASN.1 code of the archival time stamp: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nr/ae/vo/nraevopqpwigpabopna_qelpnme.png"></div><br><br>  Thus, today there are already viable options for ensuring the full life cycle of electronic legally significant documents requiring long-term storage.  For more information about the products designed to solve the designated task, you can find on the website of the developer or by contacting the sales department by phone 8 (812) 677-20-53, email: salespo@gaz-is.ru. </div><p>Source: <a href="https://habr.com/ru/post/426081/">https://habr.com/ru/post/426081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426067/index.html">Moving like two fires? Once again about the relocation of staff</a></li>
<li><a href="../426071/index.html">What promotions are clothes shops luring customers to?</a></li>
<li><a href="../426073/index.html">Import substitution, fairy tales continue (continued)</a></li>
<li><a href="../426077/index.html">New backdoor of the TeleBots cyber group: the first proof of the link between Industroyer and NotPetya</a></li>
<li><a href="../426079/index.html">Authorization without authorization: do not collect personal data</a></li>
<li><a href="../426083/index.html">What skills does an iOS developer need to get well settled?</a></li>
<li><a href="../426085/index.html">How to order the development of the site without unpleasant surprises: 3 expert advice</a></li>
<li><a href="../426087/index.html">Signing a PDF on JS and inserting a signature on C # using Krypto PRO</a></li>
<li><a href="../426089/index.html">American startup developed glasses-adblock</a></li>
<li><a href="../426091/index.html">8 cloud log analyzers for evaluating the working environment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
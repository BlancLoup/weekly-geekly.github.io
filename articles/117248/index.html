<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Eat me" ... no, not so ... "Fulfill me"!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I periodically have different needs to solve small urgent tasks in Mac OS X. For these purposes, I usually do small programs that "close" the need in ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Eat me" ... no, not so ... "Fulfill me"!</h1><div class="post__text post__text-html js-mediator-article"> I periodically have different needs to solve small urgent tasks in Mac OS X. For these purposes, I usually do small programs that "close" the need in private.  But sometimes you want the program to be universal, and other people could use it if necessary (for example, <i>‚ÄúPellator‚Äù</i> ).  It happened this time too ... <br><br>  I love it when the Dock is always displayed on the screen.  But when launching the iOS Simulator, it was constantly necessary to turn on automatic hiding so that the simulator fully fit on the screen.  There was a task - to automate this process.  For a couple of days, I sketched a universal program with which you can set AppleScript for a specific action of any program: ‚ÄúThe program is running‚Äù, ‚ÄúThe program is completed‚Äù, ‚ÄúThe program is activated‚Äù, ‚ÄúThe program is deactivated‚Äù, etc. <br><br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/67/9e/679e04b2d63bfbe361bafd48ebb3e73c.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  I will divide this topic into two parts.  One for users who just want to use the program (or get acquainted).  The second for novice developers - I will describe the scheme of the program and provide the source code.  Despite the seeming simplicity of the program itself, the source code covers many nuances from various topics that can save a significant amount of time in the future. <br><br>  <b>You can download the program via the <a href="">link</a> (only for 10.6+)</b> <i>(at 18.51 I updated the program and source codes thanks to a bug report. I fixed a small bug that prevented the assistant from receiving messages after removing the program from the list. Handicraft testing costs ...)</i> . <br><br>  The program is very easy to use (if you have the skills to work with AppleScript).  This is not a separate application, but a panel for System Settings.  Double-click on it with the mouse and get a new "Run me" panel in the "System Settings".  On the left is a list of programs.  And in the right scripts specified for the selected program. <br><br>  When you click on the <b>"+"</b> button <b>,</b> a list of running programs (with an identifier - Bundle identifier) ‚Äã‚Äãwill open, from which we can select the desired program to add (if the required program is not running, then it must first be started). <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/58/02/5802b4c322ba97fa02aeb603b8e4a941.png"></a> <br><br>  All that remains is to set the scripts for the actions that are required.  For example, to enable the Dock auto-hide mode: <br> <font color="#800080"><code>tell application "System Events" to set the autohide of the dock preferences to true</code></font> <br> <br>  Or run some program: <br> <font color="#800080"><code>tell application "iTunes" to activate</code></font> <br> <br>  Or execute some console script: <br> <font color="#800080"><code>do shell script "‚Ä¶"</code></font> <br> <br>  The possibilities are virtually unlimited - AppleScript allows you to do a lot. <br><br>  In fact, the program consists of two parts.  Panel system settings.  And a special hidden assistant program - ‚ÄúRun me (assistant)‚Äù, which is automatically registered in autoload.  It is so miserable that it actually does not consume system resources, but it is she who is responsible for the execution of scripts written in the settings panel. <br><br>  To remove a program, simply right-click (or Ctrl + click / touch) the name of the ‚ÄúFollow me‚Äù panel and select ‚ÄúDelete panel‚Äù. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/c4/4e/c44e2cb3d429c89e055e4a50b82bbad9.png"></a> <br><br><h5>  FOR BEGINNING DEVELOPERS </h5><br>  Here is a <a href="">link</a> to the source code of the project. <br>  Here is an option on <a href="https://github.com/Kyrie1965/OnAppBehaviour/">github</a> . <br><br>  The program consists of two parts - the settings panel and the assistant program.  For each of them I made a separate project (in this case it was more convenient for me).  If necessary, two projects can be combined into one with two targets. <br><br>  Creating a panel for "System Settings" is not much different from creating a regular program.  Xcode already has a template for this System Plug-in&gt; Preference Pane.  In which a class based on an NSPreferencePane and an interface (xib) file have already been added.  Everyone decides for himself how to test this module.  For example, you can do everything in the form of a normal program and only at the final stage to transfer everything to the Preference Pane. <br><br>  It is important to understand that this is not an independent program, but a module for "System Settings".  This means that all methods that are tied to the main bundle will not be correctly executed (since the main bundle is the ‚ÄúSystem Settings‚Äù). <br><br>  We cannot use the following macro: <br><blockquote> <code>NSLocalizedString <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> key, <font color="#400080">NSString</font> <font color="#002200">*</font> comment <font color="#002200">)</font></code> </blockquote> <br>  Need to use: <br><blockquote> <code>NSLocalizedStringFromTableInBundle <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> key, <font color="#400080">NSString</font> <font color="#002200">*</font> tableName, <font color="#400080">NSBundle</font> <font color="#002200">*</font> bundle, <font color="#400080">NSString</font> <font color="#002200">*</font> comment <font color="#002200">)</font></code> </blockquote> <br>  Or we cannot use the NSImage method: <br><blockquote> <code><font color="#002200">+</font> <font color="#002200">(</font> <font color="#a61390">id</font> <font color="#002200">)</font> imageNamed <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> name</code> </blockquote> <br>  You need to use, for example: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">id</font> <font color="#002200">)</font> initWithContentsOfFile <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> filename</code> </blockquote> <br>  Etc. <br><br>  An object of class NSPreferencePane has a method: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSBundle</font> <font color="#002200">*</font> <font color="#002200">)</font> bundle</code> </blockquote> <br>  His and need to be used. <br><br>  The project uses two buttons "+" and "-" to edit the list of programs. <br><br>  Initialization of the delete button is trivial and simple: <br><blockquote> <code>removeButton <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSButton</font> alloc <font color="#002200">]</font> initWithFrame <font color="#002200">:</font> NSMakeRect <font color="#002200">(</font> <font color="#2400d9">43</font> , <font color="#2400d9">19</font> , <font color="#2400d9">22</font> , <font color="#2400d9">22</font> <font color="#002200">)</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> removeButton setButtonType <font color="#002200">:</font> NSMomentaryChangeButton <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> removeButton setImage <font color="#002200">:</font> buttonImage <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> removeButton setImagePosition <font color="#002200">:</font> NSImageOnly <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> removeButton setBordered <font color="#002200">:</font> <font color="#a61390">NO</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> removeButton setTarget <font color="#002200">:</font> self <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> removeButton setAction <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> removeButtonAction <font color="#002200">:</font> <font color="#002200">)</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> <font color="#002200">[</font> self mainView <font color="#002200">]</font> addSubview <font color="#002200">:</font> removeButton <font color="#002200">]</font> ;</code> </blockquote> <br>  But the add button is more complicated.  For it, you must enter two subclasses of NSPopUpButton and NSPopUpButtonCell.  Formally, the NSPopUpButton class serves as a drop-down button.  But in the nude, it does not suit us.  Firstly, it does not allow to set a static image for the button (more precisely, it allows, but the actual size of the button does not correspond to the actual size of the static image, which is unacceptable in our case, since we have two buttons next to each other) - we are going around with the help of the subclass NSPopUpButtonCell.  Secondly, NSPopUpButton does not allow to dynamically change the contents of the menu at the moment of its pressing (our menu should be formed exactly at the moment of pressing the button) - we are going around it using the subclass NSPopUpButton. <br><br>  In order for the button to have the size of one to one with a given picture, create the class PopUpCell: <br><blockquote> <code><font color="#a61390">@interface</font> PopUpCell <font color="#002200">:</font> <font color="#400080">NSPopUpButtonCell</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#400080">NSButtonCell</font> <font color="#002200">*</font> buttonCell;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">id</font> <font color="#002200">)</font> initWithimage <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSImage</font> <font color="#002200">*</font> <font color="#002200">)</font> image;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@end</font> &lt;br/&gt; <br> &lt;br/&gt; <br> ‚Ä¶&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@implementation</font> PopUpCell&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">id</font> <font color="#002200">)</font> initWithimage <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSImage</font> <font color="#002200">*</font> <font color="#002200">)</font> image&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> self <font color="#002200">=</font> <font color="#002200">[</font> super initTextCell <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">""</font> pullsDown <font color="#002200">:</font> <font color="#a61390">YES</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> buttonCell <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSButtonCell</font> alloc <font color="#002200">]</font> initImageCell <font color="#002200">:</font> image <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> buttonCell setButtonType <font color="#002200">:</font> NSPushOnPushOffButton <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> buttonCell setImagePosition <font color="#002200">:</font> NSImageOnly <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> buttonCell setImageDimsWhenDisabled <font color="#002200">:</font> <font color="#a61390">YES</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> buttonCell setBordered <font color="#002200">:</font> <font color="#a61390">NO</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">return</font> self;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> ...&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> drawWithFrame <font color="#002200">:</font> <font color="#002200">(</font> <font color="#a61390">NSRect</font> <font color="#002200">)</font> cellFrame inView <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSView</font> <font color="#002200">*</font> <font color="#002200">)</font> controlView&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#002200">[</font> buttonCell drawWithFrame <font color="#002200">:</font> cellFrame inView <font color="#002200">:</font> controlView <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> highlight <font color="#002200">:</font> <font color="#002200">(</font> <font color="#a61390">BOOL</font> <font color="#002200">)</font> flag withFrame <font color="#002200">:</font> <font color="#002200">(</font> <font color="#a61390">NSRect</font> <font color="#002200">)</font> cellFrame inView <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSView</font> <font color="#002200">*</font> <font color="#002200">)</font> controlView&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#002200">[</font> buttonCell highlight <font color="#002200">:</font> flag withFrame <font color="#002200">:</font> cellFrame inView <font color="#002200">:</font> controlView <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@end</font></code> </blockquote> <br>  What does all this code mean?  It's simple - we create an object of class NSButtonCell and draw it instead of NSPopUpButtonCell.  Those.  the program draws an NSButtonCell (the size of which can correspond one-on-one with a given picture) instead of NSPopUpButtonCell, but functionally it is NSPopUpButton. <br><br>  Now the menu ... With the dynamic menu, we proceed as follows - add a delegate to the NSPopUpButton, which will give us the menu at the moment when the left mouse button on the button is pressed. <br><br>  Create a subclass of NSPopUpButton: <br><blockquote> <code><font color="#a61390">@protocol</font> PopUpDelegate &lt;NSObject&gt;&lt;br/&gt; <br> @optional&lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSMenu</font> <font color="#002200">*</font> <font color="#002200">)</font> menuForPopUp;&lt;br/&gt; <br> <font color="#a61390">@end</font> &lt;br/&gt; <br> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@interface</font> PopUpButton <font color="#002200">:</font> <font color="#400080">NSPopUpButton</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> id&lt;PopUpDelegate&gt; delegate;    &lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@property</font> <font color="#002200">(</font> assign <font color="#002200">)</font> <font color="#a61390">id</font> delegate;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@end</font> &lt;br/&gt; <br></code> </blockquote><br>  So we declared the delegate protocol, which has only one method: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSMenu</font> <font color="#002200">*</font> <font color="#002200">)</font> menuForPopUp&lt;br/&gt; <br></code> </blockquote><br>  Implementation: <br><blockquote> <code><font color="#a61390">@implementation</font> PopUpButton&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@synthesize</font> delegate;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> mouseDown <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSEvent</font> <font color="#002200">*</font> <font color="#002200">)</font> event&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#a61390">if</font> <font color="#002200">(</font> <font color="#002200">[</font> delegate respondsToSelector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> menuForPopUp <font color="#002200">)</font> <font color="#002200">]</font> <font color="#002200">)</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#002200">[</font> self setMenu <font color="#002200">:</font> <font color="#002200">[</font> delegate menuForPopUp <font color="#002200">]</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">[</font> super mouseDown <font color="#002200">:</font> event <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@end</font> &lt;br/&gt; <br></code> </blockquote><br><br>  When you click the mouse, before the event starts being processed by an object of the NSPopUpButton class, we set the delegate menu for this object. <br><br>  Now you can add our "+" button to our panel: <br><blockquote> <code>addButton <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> PopUpButton alloc <font color="#002200">]</font> initWithFrame <font color="#002200">:</font> NSMakeRect <font color="#002200">(</font> <font color="#2400d9">20</font> , <font color="#2400d9">19</font> , <font color="#2400d9">23</font> , <font color="#2400d9">22</font> <font color="#002200">)</font> pullsDown <font color="#002200">:</font> <font color="#a61390">YES</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> addButton.delegate <font color="#002200">=</font> self;&lt;br/&gt; <br> <font color="#002200">[</font> addButton setCell <font color="#002200">:</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#002200">[</font> PopUpCell alloc <font color="#002200">]</font> initWithimage <font color="#002200">:</font> buttonImage <font color="#002200">]</font> autorelease <font color="#002200">]</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> addButton setMenu <font color="#002200">:</font> <font color="#002200">[</font> self menuForPopUp <font color="#002200">]</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> <font color="#002200">[</font> self mainView <font color="#002200">]</font> addSubview <font color="#002200">:</font> addButton <font color="#002200">]</font> ;</code> </blockquote> <br>  Note the ‚ÄúaddButton.delegate = self‚Äù.  We have designated our main class as a delegate to addButton.  To do this, we additionally implement the method: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSMenu</font> <font color="#002200">*</font> <font color="#002200">)</font> menuForPopUp&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> ...&lt;br/&gt; <br> <font color="#002200">}</font></code> </blockquote> <br>  in our main class. <br><br>  How to get a list of running programs for the menu? <br><br>  An object of class NSWorkspace has a method: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSArray</font> <font color="#002200">*</font> <font color="#002200">)</font> runningApplications</code> </blockquote> <br>  which will give us an array of all running programs (with full information on them: name, identifier, icon, etc.). <br><blockquote> <code><font color="#400080">NSArray</font> <font color="#002200">*</font> apps <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSWorkspace</font> sharedWorkspace <font color="#002200">]</font> runningApplications <font color="#002200">]</font> ;</code> </blockquote> <br>  From this apps object, the menu for the add button will be formed (see the source code). <br><br>  Our NSTableView object displays cells with a picture, a caption, and a subtitle.  There is no standard cell of this type, it needs to be done independently. <br><br>  We declare the class AppCell: <br><blockquote> <code><font color="#a61390">@interface</font> AppCell <font color="#002200">:</font> <font color="#400080">NSTextFieldCell</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#400080">NSImage</font> <font color="#002200">*</font> image;&lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> title;&lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> subtitle;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> ...&lt;br/&gt; <br> <font color="#a61390">@end</font> &lt;br/&gt; <br></code> </blockquote><br>  The most important thing is to reassign the cell's drawing method: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> drawInteriorWithFrame <font color="#002200">:</font> <font color="#002200">(</font> <font color="#a61390">NSRect</font> <font color="#002200">)</font> inCellFrame inView <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSView</font> <font color="#002200">*</font> <font color="#002200">)</font> inView&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#11740a">// image</font> &lt;br/&gt; <br> <font color="#11740a">// title</font> &lt;br/&gt; <br> <font color="#11740a">// subtitle</font> &lt;br/&gt; <br> ‚Ä¶&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br></code> </blockquote><br>  The cell class is ready, it only remains to add it to our NSTableView object.  There are two ways. <br><br>  one).  If the number of objects in the table is small, then you can use the delagate method (which is our main class NSPreferencePane) to the NSTableView: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSCell</font> <font color="#002200">*</font> <font color="#002200">)</font> tableView <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSTableView</font> <font color="#002200">*</font> <font color="#002200">)</font> tableView dataCellForTableColumn <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSTableColumn</font> <font color="#002200">*</font> <font color="#002200">)</font> tableColumn row <font color="#002200">:</font> <font color="#002200">(</font> NSInteger <font color="#002200">)</font> row&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> AppCell <font color="#002200">*</font> cell <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#002200">[</font> AppCell alloc <font color="#002200">]</font> init <font color="#002200">]</font> autorelease <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> cell setEditable <font color="#002200">:</font> <font color="#a61390">NO</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> cell.title <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> tableDataSource objectAtIndex <font color="#002200">:</font> row <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"name"</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> cell.subtitle <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> tableDataSource objectAtIndex <font color="#002200">:</font> row <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"ID"</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> cell.image <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> tableDataSource objectAtIndex <font color="#002200">:</font> row <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"icon"</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">return</font> cell;&lt;br/&gt; <br> <font color="#002200">}</font></code> </blockquote> <br>  2).  If there are many objects, then you can define a universal cell for the entire column: <br><blockquote>  <font color="#400080">NSTableColumn</font> <font color="#002200">*</font> column <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> appTable tableColumns <font color="#002200">]</font> objectAtIndex <font color="#002200">:</font> <font color="#2400d9">0</font> <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> column setDataCell <font color="#002200">:</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#002200">[</font> AppCell alloc <font color="#002200">]</font> init <font color="#002200">]</font> autorelease <font color="#002200">]</font> <font color="#002200">]</font> ; </blockquote><br>  and set the required values ‚Äã‚Äãin the delegate method to the NSTableView: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> tableView <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSTableView</font> <font color="#002200">*</font> <font color="#002200">)</font> aTableView willDisplayCell <font color="#002200">:</font> <font color="#002200">(</font> <font color="#a61390">id</font> <font color="#002200">)</font> aCell forTableColumn <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSTableColumn</font> <font color="#002200">*</font> <font color="#002200">)</font> aTableColumn row <font color="#002200">:</font> <font color="#002200">(</font> NSInteger <font color="#002200">)</font> rowIndex&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> AppCell <font color="#002200">*</font> cell <font color="#002200">=</font> <font color="#002200">(</font> AppCell <font color="#002200">*</font> <font color="#002200">)</font> aCell;&lt;br/&gt; <br> <font color="#002200">[</font> cell setEditable <font color="#002200">:</font> <font color="#a61390">NO</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> cell.title <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> tableDataSource objectAtIndex <font color="#002200">:</font> row <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"name"</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> cell.subtitle <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> tableDataSource objectAtIndex <font color="#002200">:</font> row <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"ID"</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> cell.image <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> tableDataSource objectAtIndex <font color="#002200">:</font> row <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"icon"</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">}</font></code> </blockquote> <br><br>  The data (file with a list of programs and scripts and icons) are saved in the appropriate folder Application Support (user library).  You can (and should) get the path to this folder as follows: <br><blockquote> <code><font color="#400080">NSArray</font> <font color="#002200">*</font> paths <font color="#002200">=</font> NSSearchPathForDirectoriesInDomains <font color="#002200">(</font> NSApplicationSupportDirectory, NSUserDomainMask, <font color="#a61390">YES</font> <font color="#002200">)</font> ; &lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> appSupportPath <font color="#002200">=</font> <font color="#002200">[</font> paths objectAtIndex <font color="#002200">:</font> <font color="#2400d9">0</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> prefDir <font color="#002200">=</font> <font color="#002200">[</font> appSupportPath stringByAppendingPathComponent <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"info.yuriev.OnAppBehaviour"</font> <font color="#002200">]</font> ;</code> </blockquote> <br>  Icons we will store in PNG format.  There are several ways to get PNG data from NSImage, I will give one of them (the most universal), which is used in the program.  For the NSImage class, we will introduce a new method.  Here is what its implementation looks like: <br><blockquote> <code><font color="#a61390">@implementation</font> <font color="#400080">NSImage</font> <font color="#002200">(</font> PNGExport <font color="#002200">)</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">-</font> <font color="#002200">(</font> <font color="#400080">NSData</font> <font color="#002200">*</font> <font color="#002200">)</font> PNGData&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#002200">[</font> self lockFocus <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#400080">NSBitmapImageRep</font> <font color="#002200">*</font> rep <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSBitmapImageRep</font> alloc <font color="#002200">]</font> initWithFocusedViewRect <font color="#002200">:</font> NSMakeRect <font color="#002200">(</font> <font color="#2400d9">0</font> , <font color="#2400d9">0</font> , <font color="#002200">[</font> self size <font color="#002200">]</font> .width, <font color="#002200">[</font> self size <font color="#002200">]</font> .height <font color="#002200">)</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> self unlockFocus <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#400080">NSData</font> <font color="#002200">*</font> PNGData <font color="#002200">=</font> <font color="#002200">[</font> rep representationUsingType <font color="#002200">:</font> NSPNGFileType properties <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> rep release <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">return</font> PNGData;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@end</font></code> </blockquote> <br>  Saving data occurs automatically when a cell changes to a table.  Or 3 seconds after the user has changed a script.  To do this, we will use the delegate method to NSTextView and deferred execution: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> textDidChange <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSNotification</font> <font color="#002200">*</font> <font color="#002200">)</font> aNotification&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#002200">[</font> <font color="#400080">NSObject</font> cancelPreviousPerformRequestsWithTarget <font color="#002200">:</font> self <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> self performSelector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> saveCurrentData <font color="#002200">)</font> withObject <font color="#002200">:</font> <font color="#a61390">nil</font> afterDelay <font color="#002200">:</font> <font color="#2400d9">3.0</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> saved <font color="#002200">=</font> <font color="#a61390">NO</font> ;&lt;br/&gt; <br> <font color="#002200">}</font></code> </blockquote> <br>  If the user has changed any data, then after 3 seconds automatic saving will occur.  If the user continues to edit data during this period, the previous save request is canceled and a new one is created.  Such a mechanism is convenient to use, for example, when searching (so that the search will work only some time after the end of editing). <br><br>  After saving, we notify the helper that the data has been changed: <br><blockquote> <code><font color="#400080">NSString</font> <font color="#002200">*</font> observedObject <font color="#002200">=</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"info.yuriev.OnAppBehaviourHelper"</font> ;&lt;br/&gt; <br> <font color="#400080">NSDistributedNotificationCenter</font> <font color="#002200">*</font> center <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSDistributedNotificationCenter</font> defaultCenter <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> center postNotificationName <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"OABReloadScripts"</font> object <font color="#002200">:</font> observedObject userInfo <font color="#002200">:</font> <font color="#a61390">nil</font> deliverImmediately <font color="#002200">:</font> <font color="#a61390">YES</font> <font color="#002200">]</font> ;</code> </blockquote> <br>  Our program can launch an assistant on its own (if it is not running) and is able to add it to autoload.  Launching is very simple (our assistant is inside the bundle): <br><blockquote> <code><font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSWorkspace</font> sharedWorkspace <font color="#002200">]</font> launchApplicationAtURL <font color="#002200">:</font> <font color="#002200">[</font> <font color="#400080">NSURL</font> fileURLWithPath <font color="#002200">:</font> helperPath <font color="#002200">]</font> options <font color="#002200">:</font> NSWorkspaceLaunchDefault configuration <font color="#002200">:</font> <font color="#a61390">nil</font> error <font color="#002200">:</font> <font color="#a61390">NULL</font> <font color="#002200">]</font> ;</code> </blockquote> <br>  The management of startup items (Login Items) is the responsibility of the LaunchServices framework.  It is written in C.  We will make a convenient Objective-C wrapper for our tasks.  Let's declare the LoginItems class: <br><blockquote> <code><font color="#a61390">@interface</font> LoginItems <font color="#002200">:</font> <font color="#400080">NSObject</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">+</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> addApplication <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> path;&lt;br/&gt; <br> <font color="#002200">+</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> removeApplication <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> path;&lt;br/&gt; <br> <font color="#002200">+</font> <font color="#002200">(</font> <font color="#a61390">BOOL</font> <font color="#002200">)</font> findApplication <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> path;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">@end</font></code> </blockquote> <br>  These are class methods.  They are not bound to any object, they can be simply called [LoginItems addApplication: path]. <br><br>  Full implementation of these methods can be viewed in source codes.  Here's how, for example, the method of adding is implemented: <br><blockquote> <code><font color="#002200">+</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> addApplication <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> path&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> LSSharedFileListRef loginItemsRef <font color="#002200">=</font> LSSharedFileListCreate <font color="#002200">(</font> <font color="#a61390">NULL</font> , kLSSharedFileListSessionLoginItems, <font color="#a61390">NULL</font> <font color="#002200">)</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">if</font> <font color="#002200">(</font> loginItemsRef <font color="#002200">)</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> LSSharedFileListItemRef itemRef <font color="#002200">=</font> LSSharedFileListInsertItemURL <font color="#002200">(</font> loginItemsRef, kLSSharedFileListItemLast, <font color="#a61390">NULL</font> , <font color="#a61390">NULL</font> , <font color="#002200">(</font> CFURLRef <font color="#002200">)</font> <font color="#002200">[</font> <font color="#400080">NSURL</font> fileURLWithPath <font color="#002200">:</font> path <font color="#002200">]</font> , <font color="#a61390">NULL</font> , <font color="#a61390">NULL</font> <font color="#002200">)</font> ;&lt;br/&gt; <br> <font color="#a61390">if</font> <font color="#002200">(</font> itemRef <font color="#002200">)</font> CFRelease <font color="#002200">(</font> itemRef <font color="#002200">)</font> ;&lt;br/&gt; <br> CFRelease <font color="#002200">(</font> loginItemsRef <font color="#002200">)</font> ; &lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> <font color="#002200">}</font></code> </blockquote> <br>  That's basically our entire panel. <br><br>  Now the assistant ... he is very simple.  Because  the helper should not be visible to the user; in the program description file, set the LSBackOnly key to YES.  This means that the program will not be displayed in the dock, in the Force Quit window, it will not display the menu, etc. <br><br>  The most important part of initializing the helper is receiving messages from the panel that the settings are changed (to reload them), and receiving NSWorkspace messages about the state of the programs: <br><blockquote> <code><font color="#400080">NSNotificationCenter</font> <font color="#002200">*</font> notificationCenter <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSWorkspace</font> sharedWorkspace <font color="#002200">]</font> notificationCenter <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">[</font> notificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> didLaunchApplication <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> NSWorkspaceDidLaunchApplicationNotification object <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> notificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> didTerminateApplication <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> NSWorkspaceDidTerminateApplicationNotification object <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> notificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> didHideApplication <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> NSWorkspaceDidHideApplicationNotification object <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> notificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> didUnhideApplication <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> NSWorkspaceDidUnhideApplicationNotification object <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> notificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> didActivateApplication <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> NSWorkspaceDidActivateApplicationNotification object <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> notificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> didDeactivateApplication <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> NSWorkspaceDidDeactivateApplicationNotification object <font color="#002200">:</font> <font color="#a61390">nil</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> observedObject <font color="#002200">=</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"info.yuriev.OnAppBehaviourHelper"</font> ;&lt;br/&gt; <br> <font color="#400080">NSDistributedNotificationCenter</font> <font color="#002200">*</font> dNotificationCenter <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSDistributedNotificationCenter</font> defaultCenter <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">[</font> dNotificationCenter addObserver <font color="#002200">:</font> self selector <font color="#002200">:</font> <font color="#a61390">@selector</font> <font color="#002200">(</font> loadPreferences <font color="#002200">:</font> <font color="#002200">)</font> name <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"OABReloadScripts"</font> object <font color="#002200">:</font> observedObject <font color="#002200">]</font> ;</code> </blockquote> <br>  And the main method that AppleScript performs, if the program and its action matches the settings: <br><blockquote> <code><font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> preformScriptOnApp <font color="#002200">:</font> <font color="#002200">(</font> NSRunningApplication <font color="#002200">*</font> <font color="#002200">)</font> app forKey <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> key&lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#a61390">if</font> <font color="#002200">(</font> <font color="#002200">(</font> <font color="#002200">!</font> app <font color="#002200">)</font> || <font color="#002200">(</font> <font color="#002200">!</font> <font color="#002200">[</font> app bundleIdentifier <font color="#002200">]</font> <font color="#002200">)</font> <font color="#002200">)</font> <font color="#a61390">return</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> bundleID <font color="#002200">=</font> <font color="#002200">[</font> app bundleIdentifier <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">for</font> <font color="#002200">(</font> <font color="#a61390">int</font> i <font color="#002200">=</font> <font color="#2400d9">0</font> ; i &lt; <font color="#002200">[</font> preferences count <font color="#002200">]</font> ; i <font color="#002200">++</font> <font color="#002200">)</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#a61390">if</font> <font color="#002200">(</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#002200">[</font> preferences objectAtIndex <font color="#002200">:</font> i <font color="#002200">]</font> objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"ID"</font> <font color="#002200">]</font> isEqualToString <font color="#002200">:</font> bundleID <font color="#002200">]</font> <font color="#002200">)</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#400080">NSString</font> <font color="#002200">*</font> script <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> preferences objectAtIndex <font color="#002200">:</font> i <font color="#002200">]</font> objectForKey <font color="#002200">:</font> key <font color="#002200">]</font> ;&lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">if</font> <font color="#002200">(</font> script <font color="#002200">&amp;&amp;</font> <font color="#002200">(</font> <font color="#002200">[</font> script length <font color="#002200">]</font> &gt; <font color="#2400d9">0</font> <font color="#002200">)</font> <font color="#002200">)</font> &lt;br/&gt; <br> <font color="#002200">{</font> &lt;br/&gt; <br> <font color="#400080">NSAppleScript</font> <font color="#002200">*</font> AScript <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSAppleScript</font> alloc <font color="#002200">]</font> initWithSource <font color="#002200">:</font> script <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> AScript executeAndReturnError <font color="#002200">:</font> <font color="#a61390">NULL</font> <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">[</font> AScript release <font color="#002200">]</font> ;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#a61390">break</font> ;&lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> <font color="#002200">}</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#002200">}</font></code> </blockquote> <br>  Here is such a small project, and there is a lot of interesting inside.  I hope that this material will be useful to someone.  I have already received my favor - the Dock automatically disappears when I activate the iOS Simulator :). </div><p>Source: <a href="https://habr.com/ru/post/117248/">https://habr.com/ru/post/117248/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117243/index.html">Kaspersky Crystal - domestic security combine</a></li>
<li><a href="../117244/index.html">Registration and publication in the BlackBerry App World</a></li>
<li><a href="../117245/index.html">Dell Streak 7 tablet video review</a></li>
<li><a href="../117246/index.html">let's get acquainted</a></li>
<li><a href="../117247/index.html">Cord - 2 months after launch</a></li>
<li><a href="../11725/index.html">Who lacks functionality in the iPhone?</a></li>
<li><a href="../117250/index.html">Why do subscribers leave provider?</a></li>
<li><a href="../117252/index.html">Copini Integration with Twitter and Facebook</a></li>
<li><a href="../117255/index.html">Go!</a></li>
<li><a href="../117256/index.html">New components for Proliant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Trading strategy for trading co-integrated stock pairs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is to share the simplest strategy of statistical arbitrage based on trading in cointegrated pairs of stocks that were iden...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Trading strategy for trading co-integrated stock pairs</h1><div class="post__text post__text-html js-mediator-article">  The purpose of this article is to share the simplest strategy of statistical arbitrage based on trading in <a href="https://habrahabr.ru/post/332558/">cointegrated pairs of stocks</a> that were identified on the Moscow and New York stock exchanges. <br><br>  If we take a pair of cointegrated shares, then we have the opportunity to hedge and build a market neutral strategy, when losses on one paper will be offset by profits on another.  How does it look in practice? <br><a name="habracut"></a><br><h2>  Trading strategy </h2><br>  Suppose we have a cointegrated pair of shares, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> X </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> Y </script>  , as well as the prices of these shares for a certain period of time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mn" id="MJXp-Span-6">0</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-9" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">T</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.968ex" height="2.419ex" viewBox="0 -780.1 3430.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="1390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="1836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="2281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-54" x="2726" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> 0, ..., T </script>  .  For example, let's take a couple of stocks with tickers (VSYDP, NKHP) from my previous <a href="https://habrahabr.ru/post/332558/">article on cointegration</a> .  For her, we have price data for 215 trading days. <br><br>  We will use the first half of the observations to determine the parameters of a trading strategy.  Then, based on the parameters found, we take the second half of the observations and conduct backtests, that is, we will test whether such a strategy will bring us money. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For further discussion, I will need a spread of two stocks, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-18"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-20" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-22">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">a</span><span class="MJXp-msubsup" id="MJXp-Span-27"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-29" style="vertical-align: -0.4em;">t</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.707ex" height="2.419ex" viewBox="0 -780.1 7193.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="663" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="1102" y="0"></use><g transform="translate(2159,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2212" x="3227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-62" x="4478" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="4907" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="5374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="5735" y="0"></use><g transform="translate(6265,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="809" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-4"> s_t = y_t - \ beta x_t </script>  .  In our example with a pair (VSYDP, NKHP) we already found a spread in the previous article on cointegration, so here I just duplicate the picture: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/18b/23c/a85/18b23ca85f2e4cb4b427e54aa427e3e9.jpg"></div><br>  So, we all want to buy cheap and sell high.  If the spread goes below zero, the stock <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> Y </script>  (VSYDP) is cheaper than stock <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-32"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> X </script>  (NKHP).  Conversely, if the spread rises above zero, the stock <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-34"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> Y </script>  more than share <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-36"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> X </script>  (so or <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> X </script>  cheaper compared to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-40"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> Y </script>  ). <br><br>  So, in essence, the trading strategy is to buy stock. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-42"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> Y </script>  and sell stock <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-44"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> X </script>  in relation to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-46"><span class="MJXp-mn" id="MJXp-Span-47">1</span><span class="MJXp-mo" id="MJXp-Span-48" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mtext" id="MJXp-Span-49">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.831ex" height="2.057ex" viewBox="0 -780.1 3371.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3A" x="778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-62" x="1584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="2014" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="2480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="2842" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> 1: \ beta </script>  if the spread is slightly below zero (below the line <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-54"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> G </script>  on the picture).  When the spread returns to zero, we need to close the position by selling <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-56"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> Y </script>  and buying <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-58"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> X </script>  in the same ratio.  In this case, we get profit size <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-60"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> G </script>  : <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/tf/l5/sstfl5n_26zzdu7rxbwcokn1ptw.jpeg"></div><br>  Here it is important to understand that we must be able to sell stocks that we do not own ‚Äî this is called short selling (short).  It should also be noted that not all brokers include the possibility of a short sale in the standard package of services, so you may have to contact him in order to expand your investment opportunities. <br><br>  In general, we make a portfolio that contains one long position (long) and one short position (short) if the spread crosses a certain line. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-62"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> G </script>  or goes for it in the opposite direction from zero.  And we close all positions when the spread returns to zero. <br><br>  The next question that arises is ‚Äúhow to find the meaning <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-64"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> G </script>  "? <br><br><h2>  How to find the value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-66"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="1.937ex" viewBox="0 -762.8 786.5 834" role="img" focusable="false" style="vertical-align: -0.165ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> G </script></h2><br>  In addition to mathematics, I will immediately give here the implementation in the lab.  The code below is a natural continuation of the code from the <a href="https://habrahabr.ru/post/332558/">previous article on cointegration</a> .  We will need the first half of the observations <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-68"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">t</span><span class="MJXp-mo" id="MJXp-Span-70" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-71">0</span><span class="MJXp-mo" id="MJXp-Span-72" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-73" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-74" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-75" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">T</span><span class="MJXp-mrow" id="MJXp-Span-78"><span class="MJXp-mo" id="MJXp-Span-79" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-80">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.231ex" height="2.66ex" viewBox="0 -832 6127.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-30" x="1695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="2196" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="2641" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="3086" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="3531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="3976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-54" x="4421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2F" x="5126" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="5626" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> t = 0, ..., T / 2 </script>  which we will consider as "history". <br><br><pre><code class="matlab hljs">T = <span class="hljs-built_in"><span class="hljs-built_in">length</span></span>(testPrices); half = <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(T/<span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre> <br>  First, find the average ratio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-81"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> Y </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.98ex" height="2.057ex" viewBox="0 -780.1 852.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-23"> X </script>  for the first half of the observations. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-85"><span class="MJXp-mtext" id="MJXp-Span-86">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">r</span><span class="MJXp-mrow" id="MJXp-Span-90"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">r</span></span><span class="MJXp-mo" id="MJXp-Span-92" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-93">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">c</span><span class="MJXp-mrow" id="MJXp-Span-98"><span class="MJXp-mn" id="MJXp-Span-99">1</span></span><span class="MJXp-mrow" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">T</span><span class="MJXp-mrow" id="MJXp-Span-102"><span class="MJXp-mo" id="MJXp-Span-103" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-104">2</span><span class="MJXp-mo" id="MJXp-Span-105" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-106">1</span></span><span class="MJXp-mtext" id="MJXp-Span-107">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">u</span><span class="MJXp-msubsup" id="MJXp-Span-110"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">T</span><span class="MJXp-mrow" id="MJXp-Span-118"><span class="MJXp-mo" id="MJXp-Span-119">/</span></span><span class="MJXp-mn" id="MJXp-Span-120">2</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">t</span><span class="MJXp-mo" id="MJXp-Span-114">=</span><span class="MJXp-mn" id="MJXp-Span-115">0</span></span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-121">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">c</span><span class="MJXp-mrow" id="MJXp-Span-126"><span class="MJXp-msubsup" id="MJXp-Span-127"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-129" style="vertical-align: -0.4em;">t</span></span></span><span class="MJXp-mrow" id="MJXp-Span-130"><span class="MJXp-msubsup" id="MJXp-Span-131"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-133" style="vertical-align: -0.4em;">t</span></span></span><span class="MJXp-mo" id="MJXp-Span-134" style="margin-left: 0em; margin-right: 0.222em;">.</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="40.261ex" height="3.624ex" viewBox="0 -1143.2 17334.7 1560.2" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="1209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="1660" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="2389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-66" x="3696" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="4246" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="4698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-63" x="5227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="5661" y="0"></use><g transform="translate(6161,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-54" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2F" x="704" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="1205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="2928" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="9840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-75" x="10310" y="0"></use><g transform="translate(10882,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,521)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-54" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2F" x="704" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="1205" y="0"></use></g><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-30" x="1140" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-66" x="13316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="13867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="14318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-63" x="14848" y="0"></use><g transform="translate(15281,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="693" y="-213"></use></g><g transform="translate(16128,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="17056" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-24"> \ bar {r} = \ frac {1} {T / 2 + 1} \ sum_ {t = 0} ^ {T / 2} \ frac {y_t} {x_t}. </script></p><br><pre> <code class="matlab hljs">sumRatio = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> : half sumRatio = sumRatio + testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) / testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> r = sumRatio / half;</code> </pre><br>  For a pair of stocks with tickers (VSYDP, NKHP), the calculated value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-135"><span class="MJXp-mtext" id="MJXp-Span-136">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">r</span><span class="MJXp-mrow" id="MJXp-Span-140"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">r</span></span><span class="MJXp-mo" id="MJXp-Span-142" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-143"><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-145">34.392</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.625ex" height="2.298ex" viewBox="0 -832 6727.6 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="1209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="1660" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="2389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-24" x="3446" y="0"></use><g transform="translate(3946,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-34" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-33" x="1279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-39" x="1780" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="2280" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-25"> \ bar {r} = $ 34.392</script>  .  Then we calculate the maximum absolute value of the spread for the first half of the observations: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-146"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">m</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-149">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">a</span><span class="MJXp-msubsup" id="MJXp-Span-152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-154" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mrow" id="MJXp-Span-155"><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-msubsup" id="MJXp-Span-157"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-159" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-161">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">r</span><span class="MJXp-mrow" id="MJXp-Span-165"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">r</span></span><span class="MJXp-msubsup" id="MJXp-Span-167"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-169" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mrow" id="MJXp-Span-170"><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mo" id="MJXp-Span-172" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">t</span><span class="MJXp-mo" id="MJXp-Span-174" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-175">0</span><span class="MJXp-mo" id="MJXp-Span-176" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-177" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-178" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-179" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mo" id="MJXp-Span-180" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">T</span><span class="MJXp-mrow" id="MJXp-Span-182"><span class="MJXp-mo" id="MJXp-Span-183" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-184">2.</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="40.218ex" height="2.66ex" viewBox="0 -832 17315.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="1156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="2462" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="3341" y="0"></use><g transform="translate(3870,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-7C" x="4798" y="0"></use><g transform="translate(5077,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2212" x="6145" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-62" x="7396" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="7825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="8355" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-72" x="8806" y="0"></use><g transform="translate(9258,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-7C" x="10186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="10464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="10910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="11549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-30" x="12605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="13106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="13551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="13996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="14441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="14886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-54" x="15331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2F" x="16036" y="0"></use><g transform="translate(16536,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="500" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> m = \ max_t | y_t - \ bar {r} x_t |, t = 0, ..., T / 2. </script></p><br><pre> <code class="matlab hljs">clear absspread <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> : half absspread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) - r * testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> m = <span class="hljs-built_in"><span class="hljs-built_in">max</span></span>(absspread);</code> </pre><br>  For a pair of stocks with tickers (VSYDP, NKHP), the calculated value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-185"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">m</span><span class="MJXp-mo" id="MJXp-Span-187" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-188">3204.4</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.598ex" height="2.057ex" viewBox="0 -780.1 4993.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="1156" y="0"></use><g transform="translate(2212,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-34" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2E" x="2002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-34" x="2280" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-27"> m = 3204.4 </script>  .  Now we can determine the value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-28"> G </script>  by iteration: take a certain percentage of <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-191"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.04ex" height="1.455ex" viewBox="0 -520.7 878.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-29"> m </script>  and try to trade on the "history" at different values ‚Äã‚Äãof this percentage, and then choose the value that will give the greatest profit.  This will be the desired value for the line. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-193"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-30"> G </script>  . <br><br><h2>  Enumerate different values <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-195"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="1.937ex" viewBox="0 -762.8 786.5 834" role="img" focusable="false" style="vertical-align: -0.165ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-31"> G </script>  to find the best </h2><br>  First we need to count the number of trades.  First trade, let's label it <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-197"><span class="MJXp-msubsup" id="MJXp-Span-198"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-200" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.894ex" height="2.178ex" viewBox="0 -728.2 815.4 937.7" role="img" focusable="false" style="vertical-align: -0.487ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="511" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-32"> t_1 </script>  we do when we first stand in the position.  In this case, we still do not make a profit: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-201"><span class="MJXp-msubsup" id="MJXp-Span-202"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203" style="margin-right: 0.05em;">t</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-204" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-205" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-206">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">t</span><span class="MJXp-mo" id="MJXp-Span-211" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mrow" id="MJXp-Span-212"><span class="MJXp-mo" id="MJXp-Span-213" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-msubsup" id="MJXp-Span-214"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-216" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mrow" id="MJXp-Span-217"><span class="MJXp-mo" id="MJXp-Span-218" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-219">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">g</span><span class="MJXp-mo" id="MJXp-Span-224" style="margin-left: 0em; margin-right: 0.222em;">,</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.41ex" height="2.66ex" viewBox="0 -832 9218.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="511" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="1093" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="2399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-69" x="3277" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="3623" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="4223" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3A" x="4863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-7C" x="5419" y="0"></use><g transform="translate(5698,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-7C" x="6523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="7051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="7532" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-71" x="7998" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="8459" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="8939" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-33"> t_1 = \ min t: | s_t | \ geq g, </script></p><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-225"><span class="MJXp-msubsup" id="MJXp-Span-226"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-228" style="vertical-align: -0.4em;">t</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.916ex" height="1.817ex" viewBox="0 -520.7 825.1 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="663" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-34"> s_t </script>  - spread.  Further successful moments of the trades will be: <br><ol><li>  if a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-229"><span class="MJXp-msubsup" id="MJXp-Span-230"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-232" style="vertical-align: -0.4em;"><span class="MJXp-msubsup" id="MJXp-Span-233"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-235" style="vertical-align: -0.4em;">n</span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-236">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.744ex" height="2.057ex" viewBox="0 -520.7 3334.1 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="1446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="1926" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-71" x="2393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="2853" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-35"> s_ {t_n} \ geq g </script>  : <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-241"><span class="MJXp-msubsup" id="MJXp-Span-242"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-244" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">n</span><span class="MJXp-mo" id="MJXp-Span-246">+</span><span class="MJXp-mn" id="MJXp-Span-247">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-248" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-249">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-253">t</span><span class="MJXp-mo" id="MJXp-Span-254" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">t</span><span class="MJXp-mo" id="MJXp-Span-256" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-msubsup" id="MJXp-Span-257"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-259" style="vertical-align: -0.4em;">n</span></span><span class="MJXp-mo" id="MJXp-Span-260" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-263" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mtext" id="MJXp-Span-264">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">q</span><span class="MJXp-mo" id="MJXp-Span-268" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.182ex" height="2.539ex" viewBox="0 -780.1 13425.5 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2B" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="1379" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="2068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="3374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-69" x="4253" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="4598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="5199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3A" x="5838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="6394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3E" x="7033" y="0"></use><g transform="translate(8090,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="8976" y="0"></use><g transform="translate(9421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6C" x="10496" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="10795" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-71" x="11261" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2212" x="11944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="12945" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-36"> t_ {n + 1} = \ min t: t> t_n, s_t \ leq - g </script>  ; </li><li>  if a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-msubsup" id="MJXp-Span-271"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-273" style="vertical-align: -0.4em;"><span class="MJXp-msubsup" id="MJXp-Span-274"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-276" style="vertical-align: -0.4em;">n</span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-277">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">q</span><span class="MJXp-mo" id="MJXp-Span-281" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.161ex" height="2.66ex" viewBox="0 -780.1 4375 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.5)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6C" x="1446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="1744" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-71" x="2211" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2212" x="2893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="3894" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-37"> s_ {t_n} \ leq -g </script>  : <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-283"><span class="MJXp-msubsup" id="MJXp-Span-284"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-286" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287">n</span><span class="MJXp-mo" id="MJXp-Span-288">+</span><span class="MJXp-mn" id="MJXp-Span-289">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-291">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">t</span><span class="MJXp-mo" id="MJXp-Span-296" style="margin-left: 0.111em; margin-right: 0.167em;">:</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">t</span><span class="MJXp-mo" id="MJXp-Span-298" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-msubsup" id="MJXp-Span-299"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-301" style="vertical-align: -0.4em;">n</span></span><span class="MJXp-mo" id="MJXp-Span-302" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-305" style="vertical-align: -0.4em;">t</span></span><span class="MJXp-mtext" id="MJXp-Span-306">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="28.764ex" height="2.419ex" viewBox="0 -728.2 12384.6 1041.5" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2B" x="600" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="1379" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3D" x="2068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="3374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-69" x="4253" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="4598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="5199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3A" x="5838" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="6394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-3E" x="7033" y="0"></use><g transform="translate(8090,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6E" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2C" x="8976" y="0"></use><g transform="translate(9421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="10496" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="10977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-71" x="11443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="11904" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-38"> t_ {n + 1} = \ min t: t> t_n, s_t \ geq g </script>  . </li></ol><br>  Then the profit will be calculated as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-311"><span class="MJXp-mo" id="MJXp-Span-312" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">d</span><span class="MJXp-mo" id="MJXp-Span-314" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-315">1</span><span class="MJXp-mo" id="MJXp-Span-316" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-317">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">t</span><span class="MJXp-mn" id="MJXp-Span-322">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.077ex" height="2.66ex" viewBox="0 -832 6060.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-64" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2212" x="1135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="2135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-29" x="2636" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-63" x="3275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-64" x="3709" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6F" x="4232" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="4718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="5079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="5580" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-39"> (d-1) \ cdot 2g </script>  where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-324"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">d</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.216ex" height="2.057ex" viewBox="0 -780.1 523.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-64" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-40"> d </script>  - number of trades, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-326"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.116ex" height="1.817ex" viewBox="0 -520.7 480.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-41"> g </script>  - some percent of <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-328"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.04ex" height="1.455ex" viewBox="0 -520.7 878.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6D" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-42"> m </script>  .  If there were no trades, then the profit is zero. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-330"><span class="MJXp-mo" id="MJXp-Span-331" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">d</span><span class="MJXp-mo" id="MJXp-Span-333" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-334">1</span><span class="MJXp-mo" id="MJXp-Span-335" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-336">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">t</span><span class="MJXp-mn" id="MJXp-Span-341">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">g</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.077ex" height="2.66ex" viewBox="0 -832 6060.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-64" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-2212" x="1135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-31" x="2135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-29" x="2636" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-63" x="3275" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-64" x="3709" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-6F" x="4232" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="4718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMAIN-32" x="5079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-67" x="5580" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-43"> (d-1) \ cdot 2g </script>  - this is the minimum profit, if you always trade one ratio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-343"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.773ex" height="1.937ex" viewBox="0 -780.1 763.5 834" role="img" focusable="false" style="vertical-align: -0.125ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-59" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-44"> Y </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-345"><span class="MJXp-mtext" id="MJXp-Span-346">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.711ex" height="2.057ex" viewBox="0 -780.1 2889.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-65" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-74" x="1146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-61" x="1507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-58" x="2037" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-45"> \ beta X </script>  . <br><br><pre> <code class="matlab hljs">clear profit <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> h = <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span> g = <span class="hljs-number"><span class="hljs-number">0.05</span></span> * h * m; profit(h,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-number"><span class="hljs-number">0.05</span></span> * h * <span class="hljs-number"><span class="hljs-number">100</span></span>; profit(h,<span class="hljs-number"><span class="hljs-number">2</span></span>) = g; clear trade k = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>:half - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>)) &gt;= g trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>); trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">-1</span></span>; trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); trade(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; startIndex = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; k = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> k == <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = startIndex:half - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (trade(k<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) &lt;= -g) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &lt;= g) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;= g) trade(k,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; trade(k,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); trade(k,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">-1</span></span>; trade(k,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; trade(k,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); trade(k,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); trade(k,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; k = k + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (trade(k<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) &gt;= g) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &gt; -g) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;= -g) trade(k,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; trade(k,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); trade(k,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span>; trade(k,<span class="hljs-number"><span class="hljs-number">4</span></span>) = -<span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; trade(k,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); trade(k,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); trade(k,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; k = k + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exist(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, <span class="hljs-string"><span class="hljs-string">'var'</span></span>) tradesNumber = <span class="hljs-built_in"><span class="hljs-built_in">size</span></span>(trade,<span class="hljs-number"><span class="hljs-number">1</span></span>); profit(h,<span class="hljs-number"><span class="hljs-number">3</span></span>) = tradesNumber; profit(h,<span class="hljs-number"><span class="hljs-number">4</span></span>) = (tradesNumber - <span class="hljs-number"><span class="hljs-number">1</span></span>) * <span class="hljs-number"><span class="hljs-number">2</span></span> * g; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> profit(h,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; profit(h,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  The table below shows the percentages and outcomes for a pair of stocks with tickers (VSYDP, NKHP). <br><table><tbody><tr><th>  Percent </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-352"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/344674/&amp;xid=17259,15700019,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU4p4oVJWGWFz0y6B-vh3yanWSVQ#MJMATHI-47" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-46"> G </script></th><th>  Trades </th><th>  Profit </th></tr><tr><td>  five </td><td>  160,2224 </td><td>  7 </td><td>  1922.7 </td></tr><tr><td>  ten </td><td>  320,4449 </td><td>  five </td><td>  2563.6 </td></tr><tr><td>  15 </td><td>  480,6673 </td><td>  five </td><td>  3845.3 </td></tr><tr><td>  20 </td><td>  640,8898 </td><td>  five </td><td>  5127.1 </td></tr><tr><td>  25 </td><td>  801,1122 </td><td>  five </td><td>  6408.9 </td></tr><tr><td>  thirty </td><td>  961,3347 </td><td>  five </td><td>  7690.7 </td></tr><tr><td>  35 </td><td>  1121.6 </td><td>  five </td><td>  8972,5 </td></tr><tr><td>  40 </td><td>  1281.8 </td><td>  3 </td><td>  5127.1 </td></tr><tr><td>  45 </td><td>  1442 </td><td>  3 </td><td>  5768 </td></tr><tr><td>  50 </td><td>  1602.2 </td><td>  3 </td><td>  6408.9 </td></tr><tr><td>  55 </td><td>  1762.4 </td><td>  3 </td><td>  7049,8 </td></tr><tr><td>  60 </td><td>  1922.7 </td><td>  3 </td><td>  7690.7 </td></tr><tr><td>  65 </td><td>  2082.9 </td><td>  3 </td><td>  8331,6 </td></tr><tr><td>  70 </td><td>  2243.1 </td><td>  3 </td><td>  8972,5 </td></tr><tr><td>  75 </td><td>  2403.3 </td><td>  3 </td><td>  9613.3 </td></tr><tr><td>  80 </td><td>  2563.6 </td><td>  3 </td><td>  10254 </td></tr><tr><td>  85 </td><td>  2723.8 </td><td>  one </td><td>  0 </td></tr><tr><td>  90 </td><td>  2884 </td><td>  0 </td><td>  0 </td></tr></tbody></table><br>  To determine the value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-354"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> G </script>  , we simply choose the value that gives the greatest profit, based on the "history". <br><br><pre> <code class="matlab hljs">[M, I] = <span class="hljs-built_in"><span class="hljs-built_in">max</span></span>(profit(:,<span class="hljs-number"><span class="hljs-number">4</span></span>)); bestG = profit(I,<span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre><br>  However, although <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-356"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">G</span><span class="MJXp-mo" id="MJXp-Span-358" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-359"><span class="MJXp-mo" id="MJXp-Span-360" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-361">2563.</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> G = $ 2563.</script>  (at 80% of <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-362"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> m </script>  ) gives the greatest profit, in practice we do not choose <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-364"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> G </script>  more than <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-366"><span class="MJXp-mn" id="MJXp-Span-367">0</span><span class="MJXp-mo" id="MJXp-Span-368" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-369">5</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> 0,5m </script>  , due to the difficulties associated with further profit, so we take <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-371"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">G</span><span class="MJXp-mo" id="MJXp-Span-373" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-374"><span class="MJXp-mo" id="MJXp-Span-375" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-376">1121.</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> G = $ 1121.</script>  (at 35% of <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-377"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> m </script>  ). <br><br><h2>  Strategy testing </h2><br>  After determining <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-379"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-54"> G </script>  trading strategy is applied to the second half of the observations. <br><br><pre> <code class="matlab hljs">clear strategy <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = half + <span class="hljs-number"><span class="hljs-number">1</span></span>:T <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>)) &gt;= bestG strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">-1</span></span>; strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span>; strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>) = -<span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategy(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; startIndex = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exist(<span class="hljs-string"><span class="hljs-string">'strategy'</span></span>, <span class="hljs-string"><span class="hljs-string">'var'</span></span>) k = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = startIndex:T<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strategy(k<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) ~= <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) strategy(k,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">7</span></span>) = strategy(k<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) - spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); k = k + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) strategy(k,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">7</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) - strategy(k<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); k = k + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &lt;= bestG) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;= bestG) strategy(k,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">-1</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; k = k + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &gt;= -bestG) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;= -bestG) strategy(k,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">4</span></span>) = -<span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; strategy(k,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategy(k,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; k = k + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exist(<span class="hljs-string"><span class="hljs-string">'strategy'</span></span>, <span class="hljs-string"><span class="hljs-string">'var'</span></span>) totalProfit = sum(strategy(:,<span class="hljs-number"><span class="hljs-number">7</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> totalProfit = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  With <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-381"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">G</span><span class="MJXp-mo" id="MJXp-Span-383" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-384"><span class="MJXp-mo" id="MJXp-Span-385" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-386">1121.</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> G = $ 1121.</script>  profit is extracted 3 times.  In other words, the difference moves 3 times from 0 to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-387"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56"> G </script>  and back.  Please note that the implementation of such a strategy involves 6 trades, since in order to take a position and exit it, you need to make two trades. <br><br>  The figure and the table below show all 6 trading points. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wr/oa/zq/wroazqck32bgpzbicb5u9we0nyc.jpeg"></div><br><table><tbody><tr><th>  Trade </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> t </script></th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-391"><span class="MJXp-msubsup" id="MJXp-Span-392"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-394" style="vertical-align: -0.4em;">t</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> s_t </script></th><th>  Position <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-395"><span class="MJXp-mo" id="MJXp-Span-396" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">Y</span><span class="MJXp-mo" id="MJXp-Span-398" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">X</span><span class="MJXp-mo" id="MJXp-Span-400" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> (Y, X) </script></th><th>  Price <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-401"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60"> Y </script></th><th>  Price <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61"> X </script></th><th>  Profit </th></tr><tr><td>  one </td><td>  108 </td><td>  3145.9 </td><td>  (-1; +35.6527) </td><td>  13200 </td><td>  282 </td><td>  - </td></tr><tr><td>  2 </td><td>  128 </td><td>  -211,447 </td><td>  Liquidation </td><td>  9700 </td><td>  278 </td><td>  3357.4 </td></tr><tr><td>  3 </td><td>  134 </td><td>  -1161.9 </td><td>  (+1; -35.6527) </td><td>  8500 </td><td>  271 </td><td>  - </td></tr><tr><td>  four </td><td>  171 </td><td>  14,6605 </td><td>  Liquidation </td><td>  8500 </td><td>  238 </td><td>  1176.5 </td></tr><tr><td>  five </td><td>  205 </td><td>  -1184,5 </td><td>  (+1; -35.6527) </td><td>  7800 </td><td>  252 </td><td>  - </td></tr><tr><td>  6 </td><td>  212 </td><td>  185,1035 </td><td>  Liquidation </td><td>  8100 </td><td>  222 </td><td>  1369.6 </td></tr><tr><td colspan="4"></td><td colspan="2">  Total </td><td>  5903,5 </td></tr></tbody></table><br>  Profit earned here is at least <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-405"><span class="MJXp-mn" id="MJXp-Span-406">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">G</span><span class="MJXp-mo" id="MJXp-Span-408" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-409">3</span><span class="MJXp-mtext" id="MJXp-Span-410">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">t</span><span class="MJXp-mrow" id="MJXp-Span-415"><span class="MJXp-mo" id="MJXp-Span-416" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-417">1121.6</span><span class="MJXp-mo" id="MJXp-Span-418" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-421">3364.</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> 3G = 3 \ cdot $ 1121.6 = $ 3364.</script>  .  It uses closing prices instead of intraday data, so we do not trade in points <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-422"><span class="MJXp-mo" id="MJXp-Span-423" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63"> -G </script>  , 0 and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-425"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64"> G </script>  .  As can be seen from the table, the yield for 107 trading days was 25.39%, excluding commissions, volume, etc. That is, this is approximately 60.74% per annum, according to very rough estimates. <br><br>  Tests were also conducted for 58 pairs on the NYSE.  There, except for zero profit, the approximate annual yield for this strategy ranged from 23.34% to 208% excluding commissions, volume, etc. <br><br><h2>  Testing an alternative strategy </h2><br>  Instead of closing the position when the spread approaches zero, you can turn the position when the spread reaches <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-427"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65"> G </script>  on the opposite side of zero.  Suppose we sold <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-429"><span class="MJXp-mn" id="MJXp-Span-430">1</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-66"> 1Y </script>  and bought <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mn" id="MJXp-Span-433">35</span><span class="MJXp-mo" id="MJXp-Span-434" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-435">6527</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67"> 35,6527X </script>  since the difference was greater <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-437"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-68-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-68"> G </script>  . <br><br>  Now you can wait for the moment when the difference reaches <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-439"><span class="MJXp-mo" id="MJXp-Span-440" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-69-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-69"> -G </script>  to buy <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-442"><span class="MJXp-mn" id="MJXp-Span-443">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-70-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-70"> 2Y </script>  and sell <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-445"><span class="MJXp-mn" id="MJXp-Span-446">2</span><span class="MJXp-mtext" id="MJXp-Span-447">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">t</span><span class="MJXp-mn" id="MJXp-Span-452">35</span><span class="MJXp-mo" id="MJXp-Span-453" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-454">6527</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-71-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-71"> 2 \ cdot 35,6527X </script>  .  As a result, we will stay with a portfolio from a long size position. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-456"><span class="MJXp-mn" id="MJXp-Span-457">1</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-72-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-72"> 1Y </script>  and short size positions <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-459"><span class="MJXp-mn" id="MJXp-Span-460">35</span><span class="MJXp-mo" id="MJXp-Span-461" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-462">6527</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-73-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-73"> 35,6527X </script>  . <br><br><pre> <code class="matlab hljs">clear strategyAlt <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = half + <span class="hljs-number"><span class="hljs-number">1</span></span>:T <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>)) &gt;= bestG strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">-1</span></span>; strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span>; strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>) = -<span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategyAlt(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>) = <span class="hljs-number"><span class="hljs-number">0</span></span>; startIndex = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exist(<span class="hljs-string"><span class="hljs-string">'strategyAlt'</span></span>, <span class="hljs-string"><span class="hljs-string">'var'</span></span>) d = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = startIndex:T<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strategyAlt(d<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) &gt;= bestG) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &gt;= -bestG) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt;= -bestG) strategyAlt(d,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; strategyAlt(d,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); strategyAlt(d,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span>; strategyAlt(d,<span class="hljs-number"><span class="hljs-number">4</span></span>) = -<span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; strategyAlt(d,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategyAlt(d,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategyAlt(d,<span class="hljs-number"><span class="hljs-number">7</span></span>) = strategyAlt(d<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) - spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); d = d + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strategyAlt(d<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) &lt;= -bestG) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>) &lt;= bestG) &amp;&amp; (spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) &gt;= bestG) strategyAlt(d,<span class="hljs-number"><span class="hljs-number">1</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>; strategyAlt(d,<span class="hljs-number"><span class="hljs-number">2</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>); strategyAlt(d,<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">-1</span></span>; strategyAlt(d,<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-built_in"><span class="hljs-built_in">beta</span></span>; strategyAlt(d,<span class="hljs-number"><span class="hljs-number">5</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); strategyAlt(d,<span class="hljs-number"><span class="hljs-number">6</span></span>) = testPrices(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); strategyAlt(d,<span class="hljs-number"><span class="hljs-number">7</span></span>) = spread(<span class="hljs-built_in"><span class="hljs-built_in">i</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) - strategyAlt(d<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); d = d + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> exist(<span class="hljs-string"><span class="hljs-string">'strategyAlt'</span></span>, <span class="hljs-string"><span class="hljs-string">'var'</span></span>) totalAltProfit = sum(strategyAlt(:,<span class="hljs-number"><span class="hljs-number">7</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> totalAltProfit = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  This strategy leads to one initial trade and one trade, which reverses the position.  These trades are shown in the figure and in the table below. <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qs/ee/3v/qsee3v9rqiiy_svr3q7ggx1lyay.jpeg"></div><br><table><tbody><tr><th>  Trade </th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-464"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-74-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-74"> t </script></th><th><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-466"><span class="MJXp-msubsup" id="MJXp-Span-467"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-469" style="vertical-align: -0.4em;">t</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-75-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-75"> s_t </script></th><th>  Position <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-470"><span class="MJXp-mo" id="MJXp-Span-471" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">Y</span><span class="MJXp-mo" id="MJXp-Span-473" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">X</span><span class="MJXp-mo" id="MJXp-Span-475" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-76-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-76"> (Y, X) </script></th><th>  Price <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-476"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">Y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-77-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-77"> Y </script></th><th>  Price <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-478"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">X</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-78-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-78"> X </script></th><th>  Profit </th></tr><tr><td>  one </td><td>  108 </td><td>  3145.9 </td><td>  (-1; +35.6527) </td><td>  13200 </td><td>  282 </td><td>  - </td></tr><tr><td>  2 </td><td>  134 </td><td>  -1161.9 </td><td>  (+1; -35.6527) </td><td>  8500 </td><td>  271 </td><td>  4307.8 </td></tr><tr><td colspan="4"></td><td colspan="2">  Total </td><td>  4307.8 </td></tr></tbody></table><br>  Please note that the profit from position reversal is <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-480"><span class="MJXp-mn" id="MJXp-Span-481">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">G</span><span class="MJXp-mo" id="MJXp-Span-483" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-484">2</span><span class="MJXp-mtext" id="MJXp-Span-485">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">t</span><span class="MJXp-mrow" id="MJXp-Span-490"><span class="MJXp-mo" id="MJXp-Span-491" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-492">1121.6</span><span class="MJXp-mo" id="MJXp-Span-493" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-494"><span class="MJXp-mo" id="MJXp-Span-495" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-496">2</span><span class="MJXp-mo" id="MJXp-Span-497" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-498">243.</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-79-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-79"> 2G = 2 \ cdot $ 1121.6 = $ 2,243.</script>  therefore the total profit in this case is not less than <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-499"><span class="MJXp-mn" id="MJXp-Span-500">1</span><span class="MJXp-mtext" id="MJXp-Span-501">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">t</span><span class="MJXp-mn" id="MJXp-Span-506">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">G</span><span class="MJXp-mo" id="MJXp-Span-508" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-509"><span class="MJXp-mo" id="MJXp-Span-510" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-511">2243.</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-80-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-80"> 1 \ cdot 2G = $ 2243.</script>  .  As can be seen from the table, the yield for 107 trading days was 18.53% excluding commissions, volume, etc. That is, this is approximately 44.32% per annum, according to very rough estimates. <br><br>  Tests were also conducted for 58 pairs on the NYSE.  There, except for zero profit, the approximate annual yield for this strategy ranged from 17.63% to 201.53%, excluding commissions, volume, etc. <br><br>  This change in the trading strategy reduces the number of trades by an average of 2 times.  At the same time, trade costs are reduced.  If the difference were moving up and down around 0, an alternative strategy would be more profitable.  However, in the considered case, when the pair has a tendency to move between 0 and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-512"><span class="MJXp-mo" id="MJXp-Span-513" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">G</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-81-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-81"> -G </script>  , the position in general never turns over, whereas the main strategy creates and eliminates the position again and again ... and makes money. <br><br><h2>  findings </h2><br>  When trading co-integrated pairs, theoretically, it is possible to extract stable profits, in particular, using the methods described above in the form of two trading strategies.  In the case of the considered pair of stocks (VSYDP, NKHP), the first method turned out to be more effective because of the tendency in their difference to fluctuate below zero. <br><br>  The possibility of extracting stable profits when trading in cointegrated pairs looks optimistic, but it requires further analysis on demo accounts, which we will discuss next time. <br><br><h2>  What to read on the topic </h2><br>  Terry J. Wattsham, Kate Parramow.  Quantitative methods in finance / Trans.  from English  by ed.  Mr  Efimova.  - M .: Finance, UNITI, 1999. - 527 p. <br><br>  This textbook was once taught for masters quantitative analysis at HSE.  There is a section on cointegration. <br><br>  UPD.  <a href="https://smart-lab.ru/blog/455331.php">Backtest results for 2017 on the Moscow Exchange</a> </div><p>Source: <a href="https://habr.com/ru/post/344674/">https://habr.com/ru/post/344674/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344664/index.html">Artificial intelligence transforms information security, but do not wait for instant change.</a></li>
<li><a href="../344666/index.html">Russian peasant cryptography</a></li>
<li><a href="../344668/index.html">How to be a team leader if you work with people from different food teams</a></li>
<li><a href="../344670/index.html">The story of how P and X game "shared"</a></li>
<li><a href="../344672/index.html">Search for application performance issues with NodeJs (with examples)</a></li>
<li><a href="../344676/index.html">One + One - Blockchain Charity Marketplace</a></li>
<li><a href="../344678/index.html">Japanese poetry in the service of learning English: an application for memorizing the pronunciation of words</a></li>
<li><a href="../344680/index.html">5-minute guide to esoteric programming languages: try to classify them</a></li>
<li><a href="../344682/index.html">Error on the site ... What to do?</a></li>
<li><a href="../344684/index.html">We learn the car to understand languages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
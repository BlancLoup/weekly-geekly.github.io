<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moscow Air Quality Monitoring System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post describes the Moscow air quality monitoring system created in the form of a kickstarter project vozduh.msk.ru . First there will be a few wo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moscow Air Quality Monitoring System</h1><div class="post__text post__text-html js-mediator-article">  This post describes the Moscow air quality monitoring system created in the form of a kickstarter project <a href="http://vozduh.msk.ru/">vozduh.msk.ru</a> .  First there will be a few words about why the air is interesting to monitor and why there are not enough existing systems for this.  Then there will be a story about raising funds for the project (with numbers).  Then there will be a story about the architecture of the system, its characteristics, strengths and limitations. <br><br><h2>  From birch to arduino </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e69/6e5/93d/e696e593d7d071215060504736b2378b.jpg" width="480" height="640"><br><br>  On April 26, 2012, Moscow was covered with a dense yellow-green cloud.  Along with the cloud, rumors of some supposedly exploding fertilizer plant began to spread.  But it soon became clear that there was no room for conspiracy: this spring a uniquely stormy birch bloom happened.  The green cloud consisted of pollen.  Allergy friends were sitting at home, tightly closing the windows. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But even without the ill-fated birch, the Moscow air is usually not mountainous purity.  Many people returning from vacation complain of a characteristic condition resembling a mild degree of poisoning. <br><br>  We knew two sources of data on air pollution in the city. <br><ol><li>  <a href="http://www.mosecom.ru/air/">Mosomomonitoring</a> .  Measures the content of sulfur dioxide, nitrogen dioxide and other gases.  This system does not monitor (or does not publish) accurate data on air pollution from solid particles (dust, smoke, pollen). </li><li>  <a href="http://www.kestine.ru/monitoring.aspx">Site of the</a> manufacturer of antiallergenic drug.  These data do not take into account dust and smoke, and also are not operational, the delay reaches several days. </li></ol><br>  Judging by the data of mosomic monitoring, the concentration of pollutant gas impurities in the Moscow air is usually at the acceptable level.  Those.  anything can happen (especially in the Avtozavodskaya region), but in general, judging by these data, our air is about the same as in other megalopolises.  So there are other factors that have a significant impact on people's health. <br><br><div class="spoiler">  <b class="spoiler_title">How is air monitored in the west</b> <div class="spoiler_text">  The integrated air quality indicator called <a href="http://airnow.gov/index.cfm%3Faction%3Daqibasics.aqi">AQI</a> (Air Quality Index) is widely used in the world.  It takes into account air pollution with ozone, carbon monoxide, sulfur dioxide, nitrogen dioxide and particulate matter.  Our AQI is not published, and as far as I understand, there is no complete data for its calculation. <br><br>  In addition to the network of state stations for monitoring air quality in the west, private, civil monitoring is widely developed.  Probably the most famous project in this activity is ‚Äú <a href="http://www.kickstarter.com/projects/edborden/air-quality-egg">Air Quality</a> Egg,‚Äù <a href="http://www.kickstarter.com/projects/edborden/air-quality-egg">Air quality egg</a> . <br></div></div><br>  There was a hypothesis: an important contribution to the air quality is made by the ‚Äúinvisible‚Äù dust monitoring. <br><a name="habracut"></a><br><h2>  Kickstart project. </h2><br>  In the price range of "up to $ 1000", in which I decided to look for solutions, there are two popular dust sensors: Sharp firms with the easily remembered <a href="https://www.sparkfun.com/products/9689">GP2Y1010AU0F</a> name for $ 12 and the <a href="http://www.dylosproducts.com/dcproairqumo.html">DC1100 pro</a> meter from Dylos for $ 290.  The advantages of the first is its low price.  Otherwise, it is inferior to Dylos, since this latter can measure individual indicators for fine (&lt;2.5 um) and coarse dust.  This gave hope that the readings of the device could lead to a universal indicator PM2.5, which is used in the calculation of AQI.  Looking ahead to say that this hope was not destined to come true. <br><br>  On June 21, 2012, in my LiveJournal, Friends and Facebook, I announced the start of fundraising for the purchase of a DC1100 dust meter.  Thanks to the help of friends in six days, we managed to collect even a little more than was required, about $ 420.  A wonderful <a href="http://www.rainsensors.com/">optical rain sensor</a> was purchased for this excess, because it seemed likely that rain had a strong effect on dust.  Once again, running ahead, I will say that the strong connection between rain and dust levels was confirmed. <br><br>  For me, the success of domestic online financing was a pleasant surprise.  It is customary to see collections of funds to help people who are in difficult circumstances, need money.  Therefore, I was not at all sure that a private air monitoring project, which is essentially a research (and declared in that capacity) project, will be able to receive funding.  The more pleasant was the result.  He says that the problem is relevant and worries many people. <br>  On July 20, the sensors reached Moscow; in the twentieth of August, the project was launched in a semi-industrial mode.  Now on the project site published relevant data, but the site is actively being finalized. <br><br><h2>  Gears </h2><br><h3>  Architecture </h3><br>  The system consists of three modules: meter, intermediate server and data publishing servers. <br>  The data from the sensors of dust, rain, temperature and humidity are read by an arduino-based meter and are sent in json-format via a Xbee link to the home server.  There they are logged and sent for publication on cosm.com and vozduh.msk.ru. <br><br><h3>  Meter </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/ffd/2a9/3a2/ffd2a93a2e3ef5d192c7eb4364d32da5.jpg" width="640" height="508"><br>  The air driven by the fan (8) from the street through the pipe (2) passes through the heating element (3) in order, if necessary, to reduce the relative humidity of the air and prevent the influence of water vapor on the measurement results.  The course of air is shown by arrows.  The control circuit (5) based on the arduino uno platform, using data from the humidity sensor (6), controls the heater (3) using a power relay (7). <br><br>  Data from the DC1100 (4) and the rain sensor (not shown in the diagram) is read by the control circuit (5) and transmitted via the XBee card to the home server, where it is processed and sent for publication on a publicly accessible website. <br><br><table><tbody><tr><td> <a href="http://i.imgur.com/oAK5p"><img src="https://habrastorage.org/getpro/habr/post_images/33d/812/977/33d81297784394d2eb9489389fa5ae91.jpg"></a> <a href="http://i.imgur.com/12YMD"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/7a9/1e3/9a57a91e3e82d60d04cbdbb5d7d7be2d.jpg"></a> <a href="http://i.imgur.com/43A9D"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/80f/c30/dbb80fc30cdd3a9309b1ebf148294d7f.jpg"></a> </td></tr><tr><td>  From left to right: the appearance of the meter unit, the housing with the cover removed and the DC1100, the rain sensor during testing.  (pictures are clickable) </td></tr></tbody></table><br><h3>  Home server </h3><br>  FreeBSD 9.0 on an old laptop with a broken screen.  Himself, without dancing with a tambourine, I saw ftdi-shnuyu card with the Xbee module, rubevy data import script is spinning in the screenshot. <br><br><h3>  Publishing server </h3><br> <a href="http://imgur.com/Yuem5"><img src="https://habrastorage.org/getpro/habr/post_images/982/9bf/0b3/9829bf0b37665e06f46846aee33536e0.jpg"></a> <br>  Now the data are published in two places: on cosm.com and vozduh.msk.ru.  Vozduh is a ruby-sinatra script, graphics are drawn using the <a href="http://dygraphs.com/">dygraphs</a> library.  Charts are displayed smoothed at 10-minute intervals;  Those who are curious "raw" data can see them <a href="http://vozduh.msk.ru/data/dc1100">on the appropriate page</a> . <br>  On vozduh-e minimum statistics are bolted: quantiles for dust measurements and trends are calculated in accordance with the linear model.  Statistics are computed using a small R script that directly reads and writes data from a database (SQLite). <br><br><br><h2>  Conclusion, conclusions and directions of the project development </h2><br>  In my opinion, the project can be considered successful.  First of all, this is the first popular-funded project of air monitoring in our country known to me.  Secondly, accurate data on two atmospheric pollutants: coarse and fine dust are published every minute.  This information was not available until project implementation. <br><br>  Data on air pollution by dust is very curious.  It is known, for example, that dust storms from central Africa reach the shores of North America, traveling thousands of kilometers.  Our measurements suggest that the amount of fine dust varies little when moving over distances of hundreds of kilometers.  On one of the days, I took testimony consistently in the south-west of Moscow, on the Moscow Ring Road and in the city of Dubna.  The readings were very close.  In this case, over time, contamination levels can change rapidly, several times over several hours.  This makes the values ‚Äã‚Äãof this parameter promising for interpretation. <br>  Unfortunately, it was not possible to turn the measurement of dust into the PM2.5 indicator generally accepted in this matter.  The fact is that DC1100 shows the <em>amount of</em> dust particles per unit volume of air, and PM2.5 shows the <em>mass of</em> dust per unit volume.  Despite the fact that attempts have been made to convert one into another, my best understanding at the current moment is that it is impossible to do this correctly.  I can address those interested in the work [5]. <br><br>  Further development plans for the project include: <br><br><ul><li>  Sensor network.  It would be very curious to see dust moving at significant distances.  If there is funding for the manufacture of several measurement points, it will be possible to study the movement of dust and rain over Moscow and other cities. </li><li>  API.  This is one of the priority things that will soon appear on the site. </li><li>  Twitter.  Planned feed informing about what is happening in the air of the city.  May be useful to athletes and allergies.  Or maybe anyone who is curious about whether it was raining at night, for example. </li><li>  Mobile client.  One more stage from the list of the nearest. </li></ul><br><br>  I will be glad to other ideas on the development of the project and wishing to take part in it. <br><br><h2>  Links </h2><br><ol><li>  Project website: <a href="http://vozduh.msk.ru/">vozduh.msk.ru</a> </li><li>  Sources of all software: <a href="https://github.com/ati/air-quality">github.com/ati/air-quality</a> </li><li>  Indicators of air quality: <a href="http://sir35.ru/Pokazateli-kachestva-vozduxa.html">sir35.ru/Pokazateli-kachestva-vozduxa.html</a> </li><li>  Air quality egg, civilian air quality monitoring system - <a href="http://www.kickstarter.com/projects/edborden/air-quality-egg">www.kickstarter.com/projects/edborden/air-quality-egg</a> </li><li>  CN Davies.  Size distribution of atmospheric particles - <a href="http://www.sciencedirect.com/science/article/pii/0021850274900639">www.sciencedirect.com/science/article/pii/0021850274900639</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/150807/">https://habr.com/ru/post/150807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150802/index.html">7 lessons learned from creating Reddit</a></li>
<li><a href="../150803/index.html">JSON-RPC 2.0 and PHP</a></li>
<li><a href="../150804/index.html">Researchers uncover the location of the Pirate Bay uploaders</a></li>
<li><a href="../150805/index.html">LISP interpreter on pure C</a></li>
<li><a href="../150806/index.html">Yii in phar</a></li>
<li><a href="../150808/index.html">About sorting content based on user ratings: Part 2</a></li>
<li><a href="../150809/index.html">Base station 4G LTE on a regular PC</a></li>
<li><a href="../150810/index.html">Note to translators: speeding up ABBYY Lingvo and other tools</a></li>
<li><a href="../150812/index.html">New look at brand promotion through social networks: Intel and Toshiba shoot a film with the participation of "mere mortals"</a></li>
<li><a href="../150813/index.html">How to copy files and folders in linux console excluding some of them by regular expression</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lists from lambda functions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translator's note: The original is here . All the examples in the original are written in JavaScript, but I decided to translate them into Scheme. I a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lists from lambda functions</h1><div class="post__text post__text-html js-mediator-article">  <i>Translator's note: The original is <a href="http://stevelosh.com/blog/2013/03/list-out-of-lambda/">here</a> .</i>  <i>All the examples in the original are written in JavaScript, but I decided to translate them into Scheme.</i>  <i>I am sure that it has not become less clear, but all the beauty of this language is visible.</i> <i><br></i>  <i><b>UPD:</b> added to all the examples on the right are also original JavaScript examples.</i> <i><br></i> <br><br>  If you close your eyes to the practical side of computers - size, weight, price, heat, etc., what does a programming language really need?  Let's explore this question. <br><br>  To understand the examples in this article, basic concepts of functions in LISP (Scheme) are needed.  If you understand what this code will type, feel free to read further: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <table><tbody><tr><td><pre><code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> x <span class="hljs-number"><span class="hljs-number">10</span></span>) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">fy</span></span>) (<span class="hljs-name"><span class="hljs-name">display</span></span> x) (<span class="hljs-name"><span class="hljs-name">newline</span></span>) (<span class="hljs-name"><span class="hljs-name">display</span></span> y) (<span class="hljs-name"><span class="hljs-name">newline</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> gf) (<span class="hljs-name"><span class="hljs-name">f</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-name"><span class="hljs-name">g</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">y</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(y); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> g = f; f(<span class="hljs-number"><span class="hljs-number">1</span></span>); g(<span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre><br></td></tr></tbody></table><br>  This article is just a warm-up for the brain, and not something that could be used in real code.  But as a guitarist plays scales that he never uses in a real song, so programmers should warm up their brains from time to time. <br><a name="habracut"></a><br>  I will use Scheme for demonstration, but any other language that supports functions as first-class functions, and lexical scope (closures, mostly) will do. <br><br>  If you have already seen such things (maybe in <a href="http://www.amazon.com/dp/0070004846/%3Ftag%3Dstelos-20">SICP</a> or <a href="http://www.amazon.com/dp/0262560992/%3Ftag%3Dstelos-20">The Little Schemer</a> ), you should just run through the code in search of something new for yourself. <br><br>  If you have <i>n't</i> seen anything like this before, there is something tasty for you.  For the first time, everything will look extremely strange.  Move slowly.  Go to the next part, only by understanding the previous one.  The concepts outlined here may not seem intuitive, but they are built from very simple parts. <br><br>  And finally: if you are stuck in a place, do not despair.  Tracking a function on paper can be a very good way to understand how it works (I recommend buying a good portable table for a comfortable letter).  If that doesn't help, just close the article and go back to reading tomorrow.  Sometimes new concepts have to wander around a bit in your head before they find their place. <br><br><ul><li>  <a href="https://habr.com/ru/post/176233/">Lists</a> <br><ul><li>  <a href="https://habr.com/ru/post/176233/">Lists of <code>if</code></a> </li><li>  <a href="https://habr.com/ru/post/176233/">But where did the data go?</a> </li><li>  <a href="https://habr.com/ru/post/176233/">Building on these foundations</a> <br><ul><li>  <a href="https://habr.com/ru/post/176233/">map</a> </li><li>  <a href="https://habr.com/ru/post/176233/">filter</a> </li><li>  <a href="https://habr.com/ru/post/176233/">and, or, not</a> </li></ul><br></li><li>  <a href="https://habr.com/ru/post/176233/">Lists from lambda functions</a> </li></ul><br></li><li>  <a href="https://habr.com/ru/post/176233/">Numbers</a> <br><ul><li>  <a href="https://habr.com/ru/post/176233/">What is a Number?</a> </li><li>  <a href="https://habr.com/ru/post/176233/">inc, dec</a> </li><li>  <a href="https://habr.com/ru/post/176233/">is_zero</a> </li><li>  <a href="https://habr.com/ru/post/176233/">add</a> </li><li>  <a href="https://habr.com/ru/post/176233/">sub</a> </li><li>  <a href="https://habr.com/ru/post/176233/">sub, pow</a> </li><li>  <a href="https://habr.com/ru/post/176233/">is_equal</a> </li><li>  <a href="https://habr.com/ru/post/176233/">less_than, greater_than</a> </li></ul><br></li><li>  <a href="https://habr.com/ru/post/176233/">Closing the circle</a> <br><ul><li>  <a href="https://habr.com/ru/post/176233/">nth</a> </li><li>  <a href="https://habr.com/ru/post/176233/">drop take</a> </li><li>  <a href="https://habr.com/ru/post/176233/">length</a> </li></ul><br></li><li>  <a href="https://habr.com/ru/post/176233/">Conclusion</a> </li></ul><br><br><h4>  1 Lists </h4><br><a name="a0000000002"></a><br>  Well, let's start!  One of the most frequently executed processes by a programmer is data grouping.  Scheme has built-in lists for this (otherwise it would not be LISP;): <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> names (<span class="hljs-name"><span class="hljs-name">list</span></span> <span class="hljs-string"><span class="hljs-string">"Alice"</span></span> <span class="hljs-string"><span class="hljs-string">"Bob"</span></span> <span class="hljs-string"><span class="hljs-string">"Candice"</span></span>))</code> </pre><br></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> names = [<span class="hljs-string"><span class="hljs-string">"Alice"</span></span>, <span class="hljs-string"><span class="hljs-string">"Bob"</span></span>, <span class="hljs-string"><span class="hljs-string">"Candice"</span></span>];</code> </pre><br></td></tr></tbody></table><br>  But what if there were no lists in Scheme?  Could we make them, or something similar to them, on our own? <br><br>  To answer this question, let's think about what minimal set of things we need to create something like a list.  There are many ways to do this, but we will consider only one of them. <br><br>  We need four things to work with the list: <br><br><ul><li>  The concept of "empty list" <br></li><li>  A way to add an item to the top of the list <br></li><li>  A way to get the first item in a list <br></li><li>  A way to get everything <i>except the</i> first list item <br></li></ul><br><br>  If there are these four things, we can build on their basis whatever we wish.  For example, to create a list from one item, you can add this item to the beginning of an empty list. <br><br>  There are many ways to implement these four parts - I will use functions.  Here is their sketch: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> empty_list '()) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> el lst) ...) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> lst) ...) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> lst) ...) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> lst) ...)</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> empty_list = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prepend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el, list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... }; var head = function(list) { // ... }; var tail = function(list) { // ... }; var is_empty = function(list) { // ... };</span></span></code> </pre></td></tr></tbody></table><br>  Here are descriptions of each of these definitions. <br><br>  <code>empty_list</code> is a special value representing a list of zero items.  It can do anything, so I will use the standard <code>'()</code> from Scheme.  We will come back to this later. <br><br>  <code>(prepend 1 some_list)</code> returns a new list that looks like an old one with <code>1</code> inserted at its beginning.  So, if we want to create a list of numbers <code>1</code> and <code>2</code> , we can write <code>(prepend 1 (prepend 2 empty_list))</code> , or ‚Äúadd <code>2</code> to the result of adding <code>1</code> to the empty list‚Äù <br><br>  <code>(head some_list)</code> returns the first item in the list.  The result of the <code>head</code> from the empty list is not defined, so you need to be careful and do not do it! <br><br>  <code>(tail some_list)</code> returns a new list that looks like the old one without the first element.  And again, calling <code>tail</code> from an empty list will ruin everything. <br><br>  <code>(is_empty some_list)</code> will return <code>#t</code> if the given list is empty and <code>#f</code> otherwise. <br><br>  Once we have these four functions (plus a special value for the empty list), we can start building things based on them, so let's find out how to implement them! <br><br><h5>  1.1 Lists from <code>If</code> </h5><br><a name="a0000000003"></a><br>  You might think that you can use <code>cons</code> , <code>car</code> and <code>cdr</code> , but this article is an experiment to find what we <i>really</i> need, let's not use the built-in language features if this can be avoided. <br><br>  So, if we do not want to use the possibilities of the language, what do we have left?  Well, for now, we only have functions (and <code>'()</code> ), so let's try them! <br><br>  Here is the first working version of the implementation of lists: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> empty_list '()) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> el lst) (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">command</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">equal</span></span>? command <span class="hljs-string"><span class="hljs-string">"head"</span></span>) el (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">equal</span></span>? command <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) lst ) ) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> <span class="hljs-string"><span class="hljs-string">"head"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> lst) (<span class="hljs-name"><span class="hljs-name">equal</span></span>? lst empty_list) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> empty_list = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prepend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el, list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">command</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command === <span class="hljs-string"><span class="hljs-string">"head"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> el; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command === <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list; } } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> head = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-string"><span class="hljs-string">"head"</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tail = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-string"><span class="hljs-string">"tail"</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_empty = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list === <span class="hljs-literal"><span class="hljs-literal">null</span></span>; };</code> </pre></td></tr></tbody></table><br>  Paste it into your favorite Scheme interpreter and play around: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> e empty_list) (<span class="hljs-name"><span class="hljs-name">display</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> e)) <span class="hljs-comment"><span class="hljs-comment">; #t (define names (prepend "Alice" (prepend "Bob" (prepend "Candice" empty_list ) ) ) ) (display (is_empty names)) ; #f (display (head names)) ; Alice (display (tail names)) ; Some function representing the list of ("Bob", "Candice") (display (head (tail names))) ; Bob</span></span></code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> e = empty_list; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(is_empty(e)); <span class="hljs-comment"><span class="hljs-comment">// true var names = prepend("Alice", prepend("Bob", prepend("Candice", empty_list))); console.log(is_empty(names)); // False console.log(head(names)); // Alice console.log(tail(names)); // Some function representing the list of ("Bob", "Candice") console.log(head(tail(names))); // Bob</span></span></code> </pre></td></tr></tbody></table><br><br><h5>  1.2 But where did the data go? </h5><br><a name="a0000000004"></a><br>  Have the definitions of these features surprised you?  Lists seem to be such an important, object-oriented concept, but there are only functions! <br><br>  Let's see how they actually work.  For a start, the concept of an ‚Äúempty list‚Äù is pretty straightforward: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> empty_list '()) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> lst) (<span class="hljs-name"><span class="hljs-name">equal</span></span>? lst empty_list) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> empty_list = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_empty = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list === <span class="hljs-literal"><span class="hljs-literal">null</span></span>; };</code> </pre><br></td></tr></tbody></table><br>  You could choose any value.  <code>'()</code> fits, so I used it. <br><br>  Now to the most important <code>prepend</code> : <code>prepend</code> . <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> el lst) (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">command</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">equal</span></span>? command <span class="hljs-string"><span class="hljs-string">"head"</span></span>) el (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">equal</span></span>? command <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) lst ) ) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prepend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el, list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">command</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command === <span class="hljs-string"><span class="hljs-string">"head"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> el; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command === <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list; } } };</code> </pre><br></td></tr></tbody></table><br>  This is where all the magic happens.  Let's think it over. <br><br>  First of all, we know that by adding something to the top of the list we get the (new) list back.  Thus, the return value of <code>prepend</code> must be a list. <br><br>  One glance at the code is enough to understand that the <code>prepend</code> function returns.  So in our little thought experiment, the list is simply the (lambda) Scheme function! <br><br>  So, what do we need to do with the lists (aside from checking for emptiness, which we have already covered)?  Well, we need to get the head and tail.  When we call <code>(prepend ht)</code> , we just pass the head and tail as arguments!  So, in <code>prepend</code> we return a function that knows how to get its head or tail back on demand. <br><br>  This means that the ‚Äúlist‚Äù is a function ‚Äúthat knows how to get your head or tail back on demand.‚Äù  It turns out that our functions <code>head</code> and <code>tail</code> should only ask well! <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> <span class="hljs-string"><span class="hljs-string">"head"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> head = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-string"><span class="hljs-string">"head"</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tail = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-string"><span class="hljs-string">"tail"</span></span>); };</code> </pre><br></td></tr></tbody></table><br>  That's all!  We made the list in 24 lines of code, using nothing but functions.  Before you go any further, make sure you understand why this works.  You can practice on a piece of paper. <br><br><h5>  1.3 Building on this foundation </h5><br><a name="a0000000005"></a><br>  Now that we have lists, let's practice and implement some common things based on them. <br><br><h6>  map </h6><br><a name="a0000000006"></a><br>  One of the frequent tasks on the lists is to create a new passage in the cycle of the old and apply some function to each element.  This is called a " <code>map</code> ". <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">map</span></span> fn l) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> l) empty_list (<span class="hljs-name"><span class="hljs-name">prepend</span></span> (<span class="hljs-name"><span class="hljs-name">fn</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> l)) (<span class="hljs-name"><span class="hljs-name">map</span></span> fn (<span class="hljs-name"><span class="hljs-name">tail</span></span> l))) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fn, l</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_empty(l)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> empty_list; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prepend(fn(head(l)), map(fn, tail(l))); } };</code> </pre><br></td></tr></tbody></table><br>  If you are not used to recursive definitions of the type of such, you might want to spend a few minutes and write how it works.  For example, like this: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">square</span></span> x) (<span class="hljs-name"><span class="hljs-name">*</span></span> xx)) (<span class="hljs-name"><span class="hljs-name">define</span></span> numbers (<span class="hljs-name"><span class="hljs-name">prepend</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> empty_list)))) (<span class="hljs-name"><span class="hljs-name">define</span></span> squared_numbers (<span class="hljs-name"><span class="hljs-name">map</span></span> square numbers)) <span class="hljs-comment"><span class="hljs-comment">; (map square (1 2 3)) ; (prepend (square 1) (map square (2 3)) ; (prepend (square 1) (prepend (square 2) (map square (3)))) ; (prepend (square 1) (prepend (square 2) (prepend (square 3) (map square '())))) ; (prepend (square 1) (prepend (square 2) (prepend (square 3) '()))) ; (prepend (square 1) (prepend (square 2) (prepend 9 '()))) ; (prepend (square 1) (prepend (square 2) (9))) ; (prepend (square 1) (prepend 4 (9))) ; (prepend (square 1) (4 9)) ; (prepend 1 (4 9)) ; (1 4 9)</span></span></code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> square = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x * x; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numbers = prepend(<span class="hljs-number"><span class="hljs-number">1</span></span>, prepend(<span class="hljs-number"><span class="hljs-number">2</span></span>, prepend(<span class="hljs-number"><span class="hljs-number">3</span></span>, empty_list))); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> squared_numbers = map(square, numbers); <span class="hljs-comment"><span class="hljs-comment">// map(square, [1, 2, 3]) // prepend(square(1), map(square, [1, 2, 3])) // prepend(square(1), prepend(square(2), map(square, [3]))) // prepend(square(1), prepend(square(2), prepend(square(3), map(square, [])))) // prepend(square(1), prepend(square(2), prepend(square(3), []))) // prepend(square(1), prepend(square(2), prepend(9, []))) // prepend(square(1), prepend(square(2), [9])) // prepend(square(1), prepend(4, [9])) // prepend(square(1), [4, 9]) // prepend(1, [4, 9]) // [1, 4, 9]</span></span></code> </pre><br></td></tr></tbody></table><br>  I write Scheme-style lists ( <code>(1 2 3)</code> ), but in fact there are functions returned from <code>prepend</code> . <br><br>  If you still haven't completely figured it out, track the execution <code>(map square empty_list)</code> , and then the execution <code>(map square (prepend 10 empty_list))</code> . <br><br>  Recursive thinking in this style requires some practice.  I have a bunch of notebooks written <a href="">here</a> .  Experienced guitarists are learning new material slowly and methodically, and there is no reason for programmers not to do the same.  Observing the proliferation and destruction of function calls can help you understand how these things actually work, while looking at the code for a long time will give nothing. <br><br><h6>  filter </h6><br><a name="a0000000007"></a><br>  Now we will start moving a little faster, but you still need to make sure that you understand absolutely everything before moving on.  Spend a lot of time, write on paper, run the code, feel it. <br><br>  The next function we build on the lists is <code>filter</code> .  It takes a function and a list and returns a new list containing those elements of the source for which this function returns <code>#t</code> .  Here is an example: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> numbers (<span class="hljs-name"><span class="hljs-name">prepend</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> empty_list)))) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_odd</span></span> x) (<span class="hljs-name"><span class="hljs-name">equal</span></span>? (<span class="hljs-name"><span class="hljs-name">modulo</span></span> x <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-number"><span class="hljs-number">1</span></span>)) (<span class="hljs-name"><span class="hljs-name">filter</span></span> is_odd numbers) <span class="hljs-comment"><span class="hljs-comment">; (1 3)</span></span></code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> numbers = prepend(<span class="hljs-number"><span class="hljs-number">1</span></span>, prepend(<span class="hljs-number"><span class="hljs-number">2</span></span>, prepend(<span class="hljs-number"><span class="hljs-number">3</span></span>, empty_list))); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_odd = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x % <span class="hljs-number"><span class="hljs-number">2</span></span> === <span class="hljs-number"><span class="hljs-number">1</span></span>; } filter(is_odd, numbers); <span class="hljs-comment"><span class="hljs-comment">// [1, 3]</span></span></code> </pre><br></td></tr></tbody></table><br><br>  Now we implement the <code>filter</code> : <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">filter</span></span> fn l) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> l) empty_list (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">fn</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> l)) (<span class="hljs-name"><span class="hljs-name">prepend</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> l) (<span class="hljs-name"><span class="hljs-name">filter</span></span> fn (<span class="hljs-name"><span class="hljs-name">tail</span></span> l))) (<span class="hljs-name"><span class="hljs-name">filter</span></span> fn (<span class="hljs-name"><span class="hljs-name">tail</span></span> l)) ) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filter = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fn, l</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_empty(l)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> empty_list; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fn(head(l))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prepend(head(l), filter(fn, tail(l))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> filter(fn, tail(l)); } };</code> </pre><br></td></tr></tbody></table><br>  Take a break, check for some examples.  Move on just by understanding this completely. <br><br><h6>  and, or, not </h6><br><a name="a0000000008"></a><br>  Deviate from the course and implement the "support" functions.  They are not related to the lists, but we still need them. <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">not</span></span> x) (<span class="hljs-name"><span class="hljs-name">if</span></span> x #f #t ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> a (<span class="hljs-name"><span class="hljs-name">if</span></span> b #t #f ) #f ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> a #t (<span class="hljs-name"><span class="hljs-name">if</span></span> b #t #f ) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> not = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> and = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> or = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } };</code> </pre><br></td></tr></tbody></table><br>  Naturally, Scheme already has all of this, but we are trying to avoid using all the possibilities of the language if we can do without them.  How far can we go only with functions and <code>if</code> ? <br><br>  A small note: these are just the usual Scheme functions, so <code>(and ab)</code> does not use abbreviated computations, like an embedded macro.  It does not hurt our goals, but do not forget about it. <br><br><h5>  1.4 Lists of lambda functions </h5><br><a name="a0000000009"></a><br>  Now, after a little practice, let us return again to the definitions of our functions: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> empty_list '()) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> el lst) (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">command</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">equal</span></span>? command <span class="hljs-string"><span class="hljs-string">"head"</span></span>) el (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">equal</span></span>? command <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) lst ) ) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> <span class="hljs-string"><span class="hljs-string">"head"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> lst) (<span class="hljs-name"><span class="hljs-name">equal</span></span>? lst empty_list) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> empty_list = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prepend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el, list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">command</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command === <span class="hljs-string"><span class="hljs-string">"head"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> el; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (command === <span class="hljs-string"><span class="hljs-string">"tail"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list; } } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> head = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-string"><span class="hljs-string">"head"</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tail = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-string"><span class="hljs-string">"tail"</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_empty = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list === <span class="hljs-literal"><span class="hljs-literal">null</span></span>; };</code> </pre><br></td></tr></tbody></table><br>  In this implementation, I care about a few things.  Our goal is to use as few features of the language as possible, but we have already used enough!  I can count at least five: <br><br><ul><li>  Functions <br></li><li>  <code>if</code> condition <br></li><li>  Strings <br></li><li>  Boolean values ‚Äã‚Äã( <code>#f</code> and <code>#t</code> , <code>is_empty</code> result) <br></li><li>  Test for equality ( <code>equal?</code> ) <br></li></ul>  It turns out that we can get rid of almost all of this, but only at the cost of readability (and mental strain). <br><br>  Let's first get rid of strings, equality tests, and even <code>if</code> : <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> el lst) (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">selector</span></span>) (<span class="hljs-name"><span class="hljs-name">selector</span></span> el lst) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">ht</span></span>) h)) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">ht</span></span>) <span class="hljs-literal"><span class="hljs-literal">t</span></span>)) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prepend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el, list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> selector(el, list); }; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> head = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, t</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h; }); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tail = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, t</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> t; }); };</code> </pre><br></td></tr></tbody></table><br>  You should have a snack before trying to figure it out!  There are no lines, no equality checks, no <code>if</code> , but you still have lists! <br><br>  The <code>prepend</code> function returns a function, just as in the previous version the ‚Äúlist‚Äù was actually a function that knows how to get its head and tail back on demand. <br><br>  This time, we turned the "request" inside out.  In this version, the ‚Äúlist‚Äù is ‚Äúa function that will give another function <i>both</i> head <i>and</i> tail upon request.‚Äù  Now the calling function receives <i>both</i> parts and decides which one to use. <br><br>  Let's look at the <code>head</code> function: <br><br><ul><li>  <code>head</code> accepts a list and calls <code>(list ...)</code> , which means "Hey, list, please give all your data to this little function that I give." <br></li><li>  The list calls <code>(... el lst)</code> , which means ‚ÄúOkay, little function, here's my head and tail‚Äù. <br></li><li>  The auxiliary function is actually <code>(lambda (ht) h)</code> , so when called with the head and tail, it returns the head as arguments. <br></li><li>  <code>head</code> takes the result and passes it directly to the calling function. <br></li></ul>  <code>tail</code> works in exactly the same way, only its helper function returns the second argument (tail), not the first. <br><br>  That's all!  Checks for equality and <code>if</code> disappeared.  Can you tell where they are?  What now instead of them? <br><br>  Before proceeding further, let's clean up the implementation of the empty list.  She still uses <code>'()</code> and equality tests.  Remove them and make everything more or less similar. <br><br>  In order to do this, you will need to change a little the other functions, but if you understand everything to this point, then this change will not be difficult. <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">empty_list</span></span> selector) (<span class="hljs-name"><span class="hljs-name">selector</span></span> '() '() #t) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">prepend</span></span> el lst) (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">selector</span></span>) (<span class="hljs-name"><span class="hljs-name">selector</span></span> el lst #f) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">hte</span></span>) h)) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">hte</span></span>) <span class="hljs-literal"><span class="hljs-literal">t</span></span>)) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> lst) (<span class="hljs-name"><span class="hljs-name">lst</span></span> (<span class="hljs-name"><span class="hljs-name">lambda</span></span> (<span class="hljs-name"><span class="hljs-name">hte</span></span>) e)) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> empty_list = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> selector(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prepend = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el, list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> selector(el, list, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> head = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, t, e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h; }); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tail = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, t, e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> t; }); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_empty = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">h, t, e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e; }); };</code> </pre><br></td></tr></tbody></table><br>  We made the lists a little smarter.  In addition to the ability to transfer the auxiliary function of the head and tail, they can now tell whether they are empty.  We made the <code>head</code> and <code>tail</code> functions take into account (and ignore) the third argument, and also made the <code>is_empty</code> function the same as the others. <br><br>  Finally, we redefined <code>empty_list</code> in the same way as everyone else, instead of a special magic value.  The empty list is now the same as the usual one - this is a function that takes another one and tells it: "My head and tail are <code>'()</code> and I am an empty list." <br><br>  I used <code>'()</code> , because I didn‚Äôt find anything better in Scheme, but you can use any other value at your discretion.  Since we will be careful not to call <code>head</code> or <code>tail</code> from an empty list, these values ‚Äã‚Äãwill never come up anyway. <br><br>  In the end, we implemented the basic elements of lists with only two things: <br><br><ul><li>  Functions <br></li><li>  <code>#t</code> and <code>#f</code> for empty lists. <br></li></ul>  If you want, think how you can get rid of the second (and in this case, do you <i>really get</i> rid of, or just use implicitly some Scheme feature?). <br><br><h4>  2 Numbers </h4><br><a name="a0000000010"></a><br>  The definitions of <code>prepend</code> , <code>head</code> and <code>tail</code> look pretty brainwashing.  However, the definitions of <code>map</code> and <code>filter</code> are more straightforward. <br><br>  The reason for this is that we have hidden the implementation details of the lists in those first four functions.  We did all the dirty work of creating lists of almost nothing, and then hid it behind a simple <code>prepend</code> , <code>head</code> and <code>tail</code> interface. <br><br>  The idea of ‚Äã‚Äãcreating some things from simple components and abstracting them into ‚Äúblack boxes‚Äù is one of the most important ideas of computer science and programming, so let's go a little further and implement the numbers. <br><br><h5>  2.1 What is a Number? </h5><br><a name="a0000000011"></a><br>  In this article, we will consider only non-negative numbers.  You can try to add support for negative numbers yourself. <br><br>  How can we imagine a number?  Well, obviously, you can use Scheme numbers, but this is not so cool, since we are trying to minimize the number of language features used. <br><br>  One way of representing a number is a list whose length is equal to that number.  We can say that <code>(1 1 1)</code> means "three", <code>("cats" #f)</code> means "two", and <code>'()</code> means "zero". <br><br>  The elements of this list do not in themselves have any meaning, so take something that already exists: an empty list!  Feel it: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> zero empty_list) <span class="hljs-comment"><span class="hljs-comment">; '() (define one (prepend empty_list empty_list)) ; ( '() ) (define two (prepend empty_list (prepend empty_list empty_list))) ; ( '() '() )</span></span></code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> zero = empty_list; <span class="hljs-comment"><span class="hljs-comment">// [] var one = prepend(empty_list, empty_list); // [ [] ] var two = prepend(empty_list, prepend(empty_list, empty_list)); // [ [], [] ]</span></span></code> </pre><br></td></tr></tbody></table><br><br><h5>  2.2 inc, dec </h5><br><a name="a0000000012"></a><br><br>  We would like to <i>do</i> something with our numbers, so let's write functions that work with the list representation of numbers. <br><br>  Our main building material is <code>inc</code> and <code>dec</code> (increment and decrement). <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">inc</span></span> n) (<span class="hljs-name"><span class="hljs-name">prepend</span></span> empty_list n) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">dec</span></span> n) (<span class="hljs-name"><span class="hljs-name">tail</span></span> n) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> inc = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prepend(empty_list, n); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dec = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tail(n); };</code> </pre><br></td></tr></tbody></table><br>  To add one to the number, we simply insert another item into the list.  So, <code>(inc (inc zero))</code> means "two." <br><br>  To subtract one, we simply remove one of the elements: <code>(dec two)</code> means ‚Äúone‚Äù (do not forget that we ignore negative numbers). <br><br><h5>  2.3 is_zero </h5><br><a name="a0000000013"></a><br><br>  At the beginning of working with lists, we often used <code>is_empty</code> , so it is worth doing the <code>is_zero</code> function: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> n) (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> n) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_zero = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> is_empty(n); };</code> </pre><br></td></tr></tbody></table><br>  Zero is just an empty list! <br><br><h5>  2.4 add </h5><br><a name="a0000000014"></a><br>  Adding a unit is easy, but we probably want to be able to add arbitrary numbers.  Now with <code>inc</code> and <code>dec</code> , it's pretty easy to do this: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">add</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> b) a (<span class="hljs-name"><span class="hljs-name">add</span></span> (<span class="hljs-name"><span class="hljs-name">inc</span></span> a) (<span class="hljs-name"><span class="hljs-name">dec</span></span> b)) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> add = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> add(inc(a), dec(b)); } };</code> </pre><br></td></tr></tbody></table><br>  This is another recursive definition.  When adding numbers, there are two possibilities: <br><br><ul><li>  If <code>b</code> is zero, the result is just <code>a</code> <br></li><li>  Otherwise, the addition of <code>a</code> and <code>b</code> is the same as the addition of <code>a+1</code> and <code>b-1</code> <br></li></ul>  In the end, <code>b</code> ‚Äúends‚Äù and the answer becomes <code>a</code> (which increases as <code>b</code> decreases). <br><br>  Please note that there is not a word about the lists!  The information that ‚Äúnumbers are lists‚Äù turned out to be hidden behind <code>is_zero</code> , <code>inc</code> and <code>dec</code> , so that we can ignore it and work at the ‚Äúnumber‚Äù abstraction level. <br><br><h5>  2.5 sub </h5><br><a name="a0000000015"></a><br>  Subtraction is similar to addition, but instead of <i>increasing</i> <code>a</code> as <code>b</code> decreases, we will <i>reduce</i> them both together: <br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">sub</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> b) a (<span class="hljs-name"><span class="hljs-name">sub</span></span> (<span class="hljs-name"><span class="hljs-name">dec</span></span> a) (<span class="hljs-name"><span class="hljs-name">dec</span></span> b)) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sub = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sub(dec(a), dec(b)); } };</code> </pre><br></td></tr></tbody></table><br>  Now we can write something like <code>(add two (sub three two))</code> and the result will be the representation of the number "three" in our system (which, of course, is a list of three elements). <br><br>  Stop for a minute and remember that inside numbers are actually lists, and inside lists there is nothing but functions.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can add and subtract numbers and, within all of this, just functions moving back and forth, expanding into other functions and contracting as you call, and this wriggling handful of lambdas somehow represents </font></font><code>1+1=2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font> Cool! <br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2.6 mul, pow </font></font></h5><br><a name="a0000000016"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> For training we realize the multiplication of numbers: </font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">mul</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> b) zero (<span class="hljs-name"><span class="hljs-name">add</span></span> a (<span class="hljs-name"><span class="hljs-name">mul</span></span> a (<span class="hljs-name"><span class="hljs-name">dec</span></span> b))) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mul = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> zero; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> add(a, mul(a, dec(b))); } };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Availability </font></font><code>add</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">makes the task quite simple. </font><font style="vertical-align: inherit;">3 * 4 is the same as 3 + 3 + 3 + 3 + 0. </font><font style="vertical-align: inherit;">Trace the function on a piece of paper, if the meaning of what is happening begins to elude you, and come back when you feel you are ready. </font></font><br><br> <code>pow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(exponentiation) is similar </font></font><code>mul</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but instead of adding copies of a number, we will multiply them, and the ‚Äúbasis‚Äù of the recursion will be one, not zero.</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">pow</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> b) one (<span class="hljs-name"><span class="hljs-name">mul</span></span> a (<span class="hljs-name"><span class="hljs-name">pow</span></span> a (<span class="hljs-name"><span class="hljs-name">dec</span></span> b))) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pow = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> one; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mul(a, pow(a, dec(b))); } };</code> </pre><br></td></tr></tbody></table><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2.7 is_equal </font></font></h5><br><a name="a0000000017"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Another problem about numbers is a test for equality, so let's write it: </font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">is_equal</span></span> nm) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> n) (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> m)) #t (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">or</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> n) (<span class="hljs-name"><span class="hljs-name">is</span></span> zero m)) #f (<span class="hljs-name"><span class="hljs-name">is_equal</span></span> (<span class="hljs-name"><span class="hljs-name">dec</span></span> n) (<span class="hljs-name"><span class="hljs-name">dec</span></span> m)) ) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> is_equal = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">n, m</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (and(is_zero(n), is_zero(m))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (or(is_zero(n), is_zero(m))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> is_equal(dec(n), dec(m)); } };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> There are three cases: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If both numbers are zero, they are </font></font><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If one and only one of the numbers is zero, they are not equal </font></font><br><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Otherwise, subtract one from each and try again. </font></font><br><br></li></ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When this function is called with two non-zero arguments, both of them will decrease until one of them ‚Äúends‚Äù first, or they ‚Äúend‚Äù at the same time. </font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2.8 less_than, greater_than </font></font></h5><br><a name="a0000000018"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Similarly, you can implement and </font></font><code>less_than</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">less_than</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">and</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> a) (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> b)) #f (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> a) #t (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> b) #f (<span class="hljs-name"><span class="hljs-name">less_than</span></span> (<span class="hljs-name"><span class="hljs-name">dec</span></span> a) (<span class="hljs-name"><span class="hljs-name">dec</span></span> b)) ) ) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> less_than = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (and(is_zero(a), is_zero(b))) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(a)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> less_than(dec(a), dec(b)); } };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In contrast </font></font><code>is_equal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, there are four cases:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If both numbers are zero, then </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no less than</font></font><code>b</code> <br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otherwise, if </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(and only </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) is zero, then it is less than</font></font><code>b</code> <br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otherwise, if </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(and only </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) is zero, then </font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it cannot be less than </font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(negative numbers are not considered)</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Otherwise, reduce both and try again. </font></font><br></li></ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And again, both numbers are decreasing, until at least one of them "ends", and the result of the comparison is determined by which of them "ended" first. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One could do something the same for </font></font><code>greater_than</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but there is a simpler way:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">greater_than</span></span> ab) (<span class="hljs-name"><span class="hljs-name">less_than</span></span> ba) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> greater_than = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> less_than(b, a); };</code> </pre><br></td></tr></tbody></table><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 2.9 div, mod </font></font></h5><br><a name="a0000000019"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now that we have </font></font><code>less_than</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we can implement the division and remainder:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">div</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">less_than</span></span> ab) zero (<span class="hljs-name"><span class="hljs-name">inc</span></span> (<span class="hljs-name"><span class="hljs-name">div</span></span> (<span class="hljs-name"><span class="hljs-name">sub</span></span> ab) b)) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">rem</span></span> ab) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">less_than</span></span> ab) a (<span class="hljs-name"><span class="hljs-name">rem</span></span> (<span class="hljs-name"><span class="hljs-name">sub</span></span> ab) b) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> div = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (less_than(a, b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> zero; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inc(div(sub(a, b), b)); } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rem = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (less_than(a, b)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rem(sub(a, b), b); } };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These two are a bit more complicated than the first three basic operations, because we cannot use negative numbers. </font><font style="vertical-align: inherit;">Be sure to understand how it works.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 Closing the circle </font></font></h4><br><a name="a0000000020"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By now, we already have a (very basic) working system of numbers, built on lists. </font><font style="vertical-align: inherit;">Let's go back to the beginning and implement more list functions that use numbers.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3.1 nth </font></font></h5><br><a name="a0000000021"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To get the </font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-th element of the list, we will simply delete the elements from it and decrease the number </font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">until we reach zero:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">nth</span></span> ln) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> n) (<span class="hljs-name"><span class="hljs-name">head</span></span> l) (<span class="hljs-name"><span class="hljs-name">nth</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> l) (<span class="hljs-name"><span class="hljs-name">dec</span></span> n)) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l, n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(n)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> head(l); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nth(tail(l), dec(n)); } };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, we now have </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">two</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lists, the elements of which we delete as we iterate, since </font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this is the number that is the list, and </font></font><code>dec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">removes the element from it. </font><font style="vertical-align: inherit;">But this is much more pleasant to read when the implementation of lists is abstracted, is it not?</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3.2 drop, take </font></font></h5><br><a name="a0000000022"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's make two useful functions for working with lists - </font></font><code>drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>take</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <code>(drop l three)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">will return the list without the first three items. </font></font><br><br> <code>(take l three)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">returns the first three items in the list.</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">drop</span></span> ln) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> n) l (<span class="hljs-name"><span class="hljs-name">drop</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> l) (<span class="hljs-name"><span class="hljs-name">dec</span></span> n)) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">take</span></span> ln) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_zero</span></span> n) empty_list (<span class="hljs-name"><span class="hljs-name">prepend</span></span> (<span class="hljs-name"><span class="hljs-name">head</span></span> l) (<span class="hljs-name"><span class="hljs-name">take</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> l) (<span class="hljs-name"><span class="hljs-name">dec</span></span> n))) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> drop = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l, n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(n)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> drop(tail(l), dec(n)); } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> take = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l, n</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_zero(n)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> empty_list; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prepend(head(l), take(tail(l), dec(n))); } };</code> </pre><br></td></tr></tbody></table><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3.3 slice </font></font></h5><br><a name="a0000000023"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The ‚Äúslice‚Äù of the list becomes a very simple task, once implemented </font></font><code>drop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>take</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and the subtraction of numbers:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">slice</span></span> l start end) (<span class="hljs-name"><span class="hljs-name">take</span></span> (<span class="hljs-name"><span class="hljs-name">drop</span></span> l start) (<span class="hljs-name"><span class="hljs-name">sub</span></span> end start)) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> slice = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l, start, end</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> take(drop(l, start), sub(end, start)); };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, we drop everything before </font></font><code>start</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and then select the desired number of elements.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3.4 length </font></font></h5><br><a name="a0000000024"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We can define </font></font><code>length</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the length of the list - recursively, like everything else:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">length</span></span> l) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">is_empty</span></span> l) zero (<span class="hljs-name"><span class="hljs-name">inc</span></span> (<span class="hljs-name"><span class="hljs-name">length</span></span> (<span class="hljs-name"><span class="hljs-name">tail</span></span> l))) ) )</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> length = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">l</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_empty(l)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> zero; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inc(length(tail(l))); } };</code> </pre><br></td></tr></tbody></table><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The length of the empty list is 0, and the length of a non-empty list is one plus the length of its tail. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If your thoughts have not yet become entangled in a strong knot, think about this:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lists are made of functions. </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Numbers are made from lists whose length represents a number </font></font><br></li><li> <code>length</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> it is a function that takes a list and returns its length as a number (a list whose length is equal to this number) </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And only now we have determined </font></font><code>length</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, although we use numbers (which use the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">length of the</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> list to represent a number) for a long time!</font></font><br></li></ul><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Are you already dizzy? </font><font style="vertical-align: inherit;">If not, look at this:</font></font><br><br><table><tbody><tr><td><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> mylist (<span class="hljs-name"><span class="hljs-name">prepend</span></span> empty_list (<span class="hljs-name"><span class="hljs-name">prepend</span></span> empty_list empty_list ) ) ) (<span class="hljs-name"><span class="hljs-name">define</span></span> mylistlength (<span class="hljs-name"><span class="hljs-name">length</span></span> mylist))</code> </pre></td><td><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mylist = prepend(empty_list, prepend(empty_list, empty_list)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mylistlength = length(mylist);</code> </pre><br></td></tr></tbody></table><br><br> <code>mylist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is a list of two empty lists. </font></font><br><br> <code>mylistlength</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this is the length </font></font><code>mylist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">what is the "two" ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">which is represented by a list of two empty lists ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and this is it </font></font><code>mylist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">!</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 4 Conclusion </font></font></h4><br><a name="a0000000025"></a><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you like this little tangled story, I highly recommend you read </font></font><a href="http://www.amazon.com/dp/0262560992/%3Ftag%3Dstelos-20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Little Schemer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">This is one of the first books that actually changed my understanding of programming. </font><font style="vertical-align: inherit;">Do not be afraid that Scheme is used there - the language doesn‚Äôt really matter. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I also created </font></font><a href="https://gist.github.com/maksbotan/5348293"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (original JavaScript examples </font></font><a href="https://gist.github.com/sjl/5277681"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) with all the code from the article. </font><font style="vertical-align: inherit;">Feel free to fork it and use it for experiments. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Just to practice recursive functions, you can implement the following:</font></font><br><br><ul><li> <code>append</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - add item to end of list </font></font><br></li><li> <code>concat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - union of two lists </font></font><br></li><li> <code>min</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>max</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- finding the smaller (larger) of the two numbers</font></font><br></li><li> <code>remove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the same as </font></font><code>filter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, only returns a list of those elements on which the testing function (predicate) returns</font></font><code>#f</code> <br></li><li> <code>contains_number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - verification of the number belonging to the list </font></font><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Or, if you want something more serious, implement large concepts based on those already created: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Negative numbers </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Non-negative rational numbers </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Negative rational numbers </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Associative Lists </font></font><br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remember, the point is not to create something that works well on a real computer. </font><font style="vertical-align: inherit;">Instead of thinking about how to make a particular combination of transistors and circuits accept the right voltages, think of ‚Äúcalculations‚Äù in a beautiful, perfect, abstract sense.</font></font></div><p>Source: <a href="https://habr.com/ru/post/176233/">https://habr.com/ru/post/176233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176215/index.html">2D scrolling week</a></li>
<li><a href="../176219/index.html">EB 112.3. Preparing for the delivery of the second group of electrical safety</a></li>
<li><a href="../176223/index.html">Job seeker vs employer: a fresh look at HR approaches</a></li>
<li><a href="../176227/index.html">NASA builds thermonuclear space engine</a></li>
<li><a href="../176229/index.html">D59 - the first Perm conference of software developers</a></li>
<li><a href="../176235/index.html">Nokia Lumia 920 - Reverse</a></li>
<li><a href="../176237/index.html">Autonomous cross-platform monolithic Java program</a></li>
<li><a href="../176239/index.html">Hyperlapse: Google Street View Review Service</a></li>
<li><a href="../176243/index.html">"National" programming languages</a></li>
<li><a href="../176245/index.html">COMAN: a very steady humanoid robot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
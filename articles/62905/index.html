<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Remote Desktop Setup (VNC, x11vnc)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With Linux, life becomes more interesting, I would even say more experimental! 
 I was drawn to experiments with ssh, and what I got in the end - acce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Remote Desktop Setup (VNC, x11vnc)</h1><div class="post__text post__text-html js-mediator-article"> With Linux, life becomes more interesting, I would even say more experimental! <br>  I was drawn to experiments with ssh, and what I got in the end - access from work to my home computer - I really liked it!  It would be nice to manage your home computer, update it, etc.  I even talked to the girl with the help of festival))) <br>  However, I wanted to go further, I wonder if it is possible to set up remote desktop access, as RAdmin allows in Windows?  Of course it is possible!  You just need to configure)) <br><a name="habracut"></a><br>  I rummaged through the Internet, found several articles about <a href="http://ru.wikipedia.org/wiki/VNC">VNC - Virtual Network Computing</a> , decided to make such happiness at home! <br>  To do this, first it was necessary to put several utilities: <br><br> <code>sudo aptitude install vnc4-common vnc4server xvnc4viewer</code> <br> <br>  These utilities are needed directly in order to start a remote server (vnc4server) and connect to it from a remote client (xvnc4viewer). <br>  Installed!  Now it remains for the small: you first need to start the vnc server, and then connect to it. <br>  To start a remote server, you need to type in the console <br><br> <code>vncserver</code> <br> <br>  If this is the first launch of vncserver on the system with this user account, then you must enter the password that clients will use when connecting, after which the server will be started, which will be available on port 5901. By the way, when you start the server, the display number (virtual ), on which it will be available, the countdown is from 1 (since 0 is the current display).  Startup example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>igor@Voyageur:~$ vncserver <br> New 'Voyageur:1 (igor)' desktop is Voyageur:1 <br> Starting applications specified in /home/igor/.vnc/xstartup <br> Log file is /home/igor/.vnc/Voyageur:1.log</code> <br> <br>  Here, the line <b>New 'Voyageur: 1 (igor)' desktop is Voyageur: 1</b> just says that my computer has started the server on display 1, it is available on port 5901. <br>  If vncserver is launched again, the new terminal server will be loaded: 2 on port 5902, etc. <br>  Now we will try to access this server from a remote machine.  To do this, enter the following command in the remote client console: <br><br> <code>vncviewer __hostname__:1</code> <br> <br>  In this command, __hostname__ is the domain name or ip of the machine on which the remote server is running.  Next, you will need to enter a password and as a result approximately this window will appear: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b4f/968/394/b4f968394badd0835df3da923db2c394.jpg"><br><br>  I expected to see a little something to be honest.) I started to understand, and it turned out that vncserver starts only a new session, but does not connect to the current one, this is what virtual displays are for.  And in this session, twm (Tab Window Manager for the X Window System) and xterm are running. <br>  By the way, this is all good started from the ~ / .vnc / xtartup script, which can be edited, removing unnecessary and adding your own lines of launching the necessary applications.  At the very top of the script there is a small comment: <br><br> <code># Uncomment the following two lines for normal desktop: <br> # unset SESSION_MANAGER <br> # exec /etc/X11/xinit/xinitrc</code> <br> <br>  That is, to get a normal desktop, you need to uncomment 2 lines.  I uncommented them, but nothing good came of it. <br>  I looked at this twm, and decided that it was impossible to work with this misery.  I installed fluxbox (it takes only 6 MB) and in the xstartup script I replaced the line <br><br> <code>twm &amp;</code> <br> <br>  on <br><br> <code>fluxbox &amp;</code> <br> <br>  In the end, I did this: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7e6/02a/8e8/7e602a8e86b2982fbbc440fa2f5d48fa.jpg"><br><br>  Normal for work.  But not ice!  The opera can be launched, some more applications, but not all (kde applications break out)!  I tried to run kde instead of fluxbox, but it didn‚Äôt go ... A welcome sign was playing, but a window crashes with the collapse of the plasma and everything, a black screen, a curtain ... <br><br>  As a result, I received remote access, but not the way I wanted!  I wanted to have access to the current desktop, and not to the mythical display 1, where fluxbox is loaded, but not kde. <br><br>  What to do?  Need to dig more !!! <br>  I searched the repositories for packages that have ‚Äúvnc‚Äù in their names, the list was not very big, I started reading the comments to utilities and libraries ... At the very end of the list I saw the following line: <br><br> <code>p xvnc4viewer - Virtual network computing client software for X</code> <br> <br>  Very similar to what I need! <br>  I installed x11vnc ... man at this utility notable, several thousand lines)) After learning a little of it, I more or less understood the startup procedure and the purpose of the utility. <br>  So, x11vnc is actually a remote server (like vncserver), but allows access to an existing X session! <br>  On the machine you want to connect to: <br><br> <code>x11vnc -storepasswd</code> <br> <br>  This command will allow you to borrow the password to connect to the server from the ~ / .vnc / passwd file (here lies the password that was set when you first started vncserver).  Next, let's run x11vnc directly: <br><br> <code>x11vnc -usepw -display :0</code> <br> <br>  The <b>-usepw</b> option <b>enables</b> the use of a password when connecting to the server, <b>-display: 0</b> - starts the server on a zero display (as where the current X session is open). <br>  Now we can connect to the current X-session from the remote machine by running <br><br> <code>vncviewer __hostaname__:0</code> <br> <br>  and entering a password. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7b3/889/108/7b388910853384d53d76e0a79d12bcad.jpg"><br><br>  When you close the remote desktop window, x11vnc (on the server) also terminates <br>  So I got what I wanted)))) <br>  Finally, here are a few options for the vncserver, x11vnc and vncviewer utilities that facilitate traffic and life)) <br><br>  <b>vncserver:</b> <ul><li>  -kill: n - terminates the terminal server on the display n (port 590n), if it was previously started </li><li>  -geometry 800x600 - sets the size of the desktop to be created (1024x768 by default) </li><li>  -depth <u>depth</u> - sets the color depth in bits, the default is 16 bits, can be changed to 8, 15, 24 </li><li>  To start the VNC server with a specific number (display), use the vncserver command: n </li></ul><br>  <b>x11vnc:</b> <ul><li>  -q - reduces debug output to stderr </li><li>  -forever - this option does not shut down the x11vnc server when the first client disconnects and waits for the next connections </li></ul><br>  <b>vncviewer:</b> <ul><li>  -geometry 800x600 - sets the size of the window in which the remote desktop will be displayed.  If the specified size is less than the size of the remote table, scroll bars will appear. </li><li>  -compressionlevel n - sets the level of data compression.  The value of n varies from 0 to 9, 9 - the best compression (quality, respectively, worse) </li><li>  -quality m - affects the quality of the picture.  m ranges from 0 to 9, 0 - the worst image quality (less traffic) </li><li>  -depth <u>depth</u> - if the X-server supports different values ‚Äã‚Äãof the color depth, then you can try to find the optimal value (in bits) </li><li>  -viewonly - an option that allows the connecting user to <em>only</em> observe what is happening on the remote machine; controls (mouse, keyboard) are not available </li></ul><br>  <b>PS</b> By the way, if you want x11vnc to start automatically, then for this you need to add it to autoload: in the System Preferences, select the Autorun item (on the second tab), add the script there <br><br> <code>x11vnc -usepw -display :0 -q -forever &amp;</code> <br> <br>  and indicate that it should run before KDE starts! <br></div><p>Source: <a href="https://habr.com/ru/post/62905/">https://habr.com/ru/post/62905/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62897/index.html">Web OS for programmers: implementation</a></li>
<li><a href="../62901/index.html">Pitfalls of the comparison operator</a></li>
<li><a href="../62902/index.html">Perfect NAS? Another point of view, eBox-2300SX</a></li>
<li><a href="../62903/index.html">Planarium. General mobilization</a></li>
<li><a href="../62904/index.html">The European Parliament will increase the level of privacy in social networks</a></li>
<li><a href="../62906/index.html">EGE through the eyes of another admin</a></li>
<li><a href="../62909/index.html">Opera mobile report: May 2009</a></li>
<li><a href="../62913/index.html">Video about new features in Mozilla Firefox 3.5</a></li>
<li><a href="../62914/index.html">Windows - over 1000 free legal songs!</a></li>
<li><a href="../62915/index.html">CMS TYPO3 developers, meeting TUG2009</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Treasury: Diamond Idol - postmortem project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article is published at the request of Sergion habrappo , which, alas, does not have enough karma, so he will respond to comments, and, accordingl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Treasury: Diamond Idol - postmortem project</h1><div class="post__text post__text-html js-mediator-article">  <i>The article is published at the request of Sergion <a href="http://sergion.habrahabr.ru/">habrappo</a> , which, alas, does not have enough karma, so he will respond to comments, and, accordingly, the plus / minus signs should be addressed to him.</i> <br><br>  All summer, we (Artefact Network) have been working hard on our indie project for social networks on Unity3D technology - <a href="http://vkontakte.ru/app1894446">‚ÄúTreasury: Diamond Idol‚Äù</a> in the genre of <a href="http://en.wikipedia.org/wiki/Category:Match_3_games">match2</a> .  And literally this weekend, finally zarelizilis. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/OnOfXmRH4-0%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhg7MMFweXOMPGRt-abGlehCVvWA5w" frameborder="0" allowfullscreen=""></iframe><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Game process </h5><br>  Since this is primarily about social (and not a kazualka) - in the game there is one dynamically changeable level, designed for multiple game on points.  Players compete with friends for the maximum number of points, as well as in the weekly and general ratings.  Initially, the game is literally a minute, but in the process an hourglass may fall out, allowing you to recover time.  As you score points, the level structure changes, new bonuses fall out, as well as frozen items (they must be broken using combinations). <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/82c/7bc/bb7/82c7bcbb74e797fa256acdd49b37cbfe.jpg"><br><br>  During the game, bottles with energy fall out.  When a player collects 3 pieces (there is a collection progress on top) - the idol is activated and it can be used with the left mouse button.  After that, lightning erupts from the idol and the playing field is partially reset. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/47b/a8e/aa2/47ba8eaa2ee7119c811050539f8ce21e.jpg"><br><br>  For various achievements - players receive gold coins as a reward.  For the last level of each achievement, the player gets the opportunity to use instead of his avatar - a special mask that embodies the type of achievement. <br><br><img src="http://a.imageshack.us/img408/6559/questsn.jpg"><br><br>  In addition, players must collect 5 types of runes.  For every 100 such runes, a story opens in the book and the inventory expands (the maximum number of artifacts used).  In order to open all the stories - you need to play a lot of games, and thus the book is a kind of bonus for fans of the game. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d47/07b/eb3/d4707beb3fd8ff8ea4e7cf5fbb300b9f.jpg"><br><br><h5>  Customer </h5><br>  We ventured to use a full-fledged 3D engine, going to override the established practice of creating such games exclusively in 2D (where it is easier to draw understandable to the user and beautiful graphics).  As a result, the majority of users first of all speak positively about the graphics. <br><br>  The development of the client was carried out on the <a href="http://unity3d.com/">Unity</a> platform, so for the game it is necessary to install a plugin, which is no more difficult than installing the Flash player (although alas, some users are frightened off).  The current weight of the client (the file that loads the plug-in unit) is about 2.7 MB, it is downloaded once at the entrance to the game and then loaded from the cache before the new version is released.  True, due to the features of unit 2.6.1, 300kb, they occupy only fonts (the unit creates bitmap fonts for each unique font size and type), in the 3rd version the problem will be solved. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/80d/43d/e5b/80d43de5b5bc971699fb85d2f758dd8c.jpg"><br><br>  By default, the game starts at medium graphics settings (without shadows and other bells and whistles), so that when you first log in on weak computers there are no brakes.  By the way - tested on laptops with Intel's video - on average quality is played.  But of course the high quality game looks much better. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/1d0/ef4/f8a/1d0ef4f8a1859e89cdc1bef28669936d.jpg"><br><br>  The client is compatible with all major browsers, as well as with Windows and Mac operating systems (we would be happy to make a version for Linux, but unfortunately our support is only in Unity plans). <br><br><h5>  Server </h5><br>  The server is based on LAMP.  For optimization, memcached and eaccelerator are used.  Iron - a virtual server on CentOS.  Data exchange with the server occurs via the www protocol, the benefit of Unity is the ability to work with http requests.  Thus, it is not necessary to open any non-standard ports for the game.  Data is transmitted as strings serialized by standard php tools. <br><br><h5>  Content </h5><br>  Virtually all graphic content was created by our multi-armed artist.  Special effects I created, as there is some experience in this.  All sound effects were taken from <a href="http://www.freesound.org/">www.freesound.org</a> with some modifications.  The music was also used with the free distribution of <a href="http://ahuraster.com/">Alexander Ahura</a> , with his permission. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2b2/406/05e/2b240605e79dbf7fdbb375a8ba714d26.jpg"><br><br><h5>  Monetization </h5><br>  In addition to the earned coins - daily users receive a gift of one gold.  If a player does not have enough money, he can buy them for real.  Coins are spent on items during the game (defrosting, idol activation), as well as on artifacts.  Artifacts are sold in the store and allow you to expand your gaming experience - basically the player is wasting money on them, for example, increasing the time for the game by buying silver and gold watches. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/6b7/396/bf9/6b7396bf946cc8e71af2222cf9eddd0a.jpg"><br><br><h5>  Virality </h5><br>  In principle, everything is standard here - write on your wall or a wall of a friend during important events.  The purchase of most artifacts is limited by the need for a certain number of friends.  Friends can give gifts at preferential prices.  It is also profitable to attract friends for duels (alternate game for points), which can be spent on money and used as a way of earning.  To participate in duels, the player challenging to a duel must have a special artifact - the ‚ÄúSword of the Duelist‚Äù. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/98e/ef4/264/98eef42647f109d2ffa4161f16cac557.jpg"><br><br><h5>  Platform </h5><br>  As the first platform for the game, vkontakte was chosen - for various reasons (for example, there are no problems with accepting payments - everything is paid for with votes).  There were no problems with the integration of Unity - iframe and the JavaScript API are used to interact with the social network.  The verification procedure took no more than a day and there were no issues in the process.  Not only pleased with the statistics tool, it‚Äôs certainly not Google Analytic‚Äôs, but it‚Äôs still better than none. <br><br><h5>  Development </h5><br>  In general, despite the fact that our team does not consist of beginners, the project arose spontaneously, due to the fact that it was necessary to put our creative energy in (as part of the office work, it unfortunately did not fit).  No design and even concept documents - like a maximum of a wiki page with a vision of certain planned functions.  For order in the work, we used the project management service <a href="http://www.teamworkpm.net/">www.teamworkpm.net</a> (task sheets, wikis, plans, etc.).  Satisfied with the service and in principle it was enough to create such a relatively small project.  A weighty plus was the fact that each of us knew our business well and performed several roles at once (however, as in any indie company).  Since the team is small, decisions were usually made very quickly and there were no situations when someone slowed down the rest. <br><br><h5>  Total: </h5><br>  Minimum financial investments, 3-4 months of work, a team of 3 people (programmer, artist, game designer).  ~ 400 unique users and ~ 200 installations for the first day of work, of which ~ 170 entered the game (that is, they managed to install the plugin).  Nevertheless, in addition to the fact of the release, so far there is nothing more to boast about, and the success or failure of the project can be judged only after a while and releases on other platforms. <br><br>  The application is available at <a href="http://vkontakte.ru/app1894446">vkontakte.ru/app1894446</a> </div><p>Source: <a href="https://habr.com/ru/post/103014/">https://habr.com/ru/post/103014/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103005/index.html">Two small problems when upgrading phpmyadmin to 3.3.5.1</a></li>
<li><a href="../103008/index.html">Foursquare continues to gain momentum</a></li>
<li><a href="../103009/index.html">Problems of the .local zone in modern Linux distributions</a></li>
<li><a href="../103010/index.html">Audio processing via Audio Data API</a></li>
<li><a href="../103013/index.html">Google will launch the movie pay-per-view service again.</a></li>
<li><a href="../103016/index.html">High-performance sorting (radix) on CUDA</a></li>
<li><a href="../103021/index.html">Are relational databases doomed?</a></li>
<li><a href="../103022/index.html">Some statistics on e-books</a></li>
<li><a href="../103023/index.html">Brazil conducted a population census using 150,000 smartphones</a></li>
<li><a href="../103026/index.html">Report on the second eBukovka - meeting of electronic reading lovers in Kharkov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Principles of operation and application features of atomic swap</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article highlights issues related to the relevance of the atomic exchange of different coins among themselves without the participation of interm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Principles of operation and application features of atomic swap</h1><div class="post__text post__text-html js-mediator-article">  This article highlights issues related to the relevance of the atomic exchange of different coins among themselves without the participation of intermediaries.  We have tried to describe the features of the work of this exchange and the requirements for digital currencies to maintain this functionality.  In addition, we analyzed the current issues of designing and launching decentralized exchanges based on atomic swap, as well as disadvantages and risks of their use. <br><a name="habracut"></a><br>  By definition, a cryptocurrency owner works with his coins without the participation of a trusted third party, that is, trustless.  It is quite natural that users want to exchange these currencies on the same principle.  Existing centralized exchanges cannot meet these requirements.  This is evidenced by the numerous restrictions on the part of the exchanges themselves and the frequent incidents of their hacking. <br><br>  How is the exchange on the centralized site?  Alice registers at the stock exchange and places an order to buy a certain amount of coins of a certain cryptocurrency.  Bob, who is already registered on this exchange, sees the order and, if he is satisfied with the price, agrees to it.  The balances of the accounts on this exchange at Bob and Alice are changing.  After that, they can withdraw this money to their wallets. <br><br>  In this situation, both Alice and Bob trust the exchange.  More precisely, they trust the owners of the exchange that they will not take the money and not disappear with them.  In a sense, users must trust the engineers who designed and developed the stock exchange, and other professionals who provide reliable protection against hackers and scammers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Currency idea and requirements </h2><br>  The idea of ‚Äã‚Äãatomic metabolism was proposed as an alternative.  Atomic swap is an exchange that is either inseparable or not at all.  This approach allows you to make an exchange, even if users do not trust each other.  In addition, the participant will not lose a coin, even if the opponent purposefully wants to deceive him. <br><br>  Atomic swap is an idea with great potential and can be implemented in different ways and for completely different digital currencies.  Therefore, in this article we will limit ourselves to the specifics of the atomic swap operation for such cryptocurrencies such as Bitcoin and Ether. <br><br>  In order for a digital currency to successfully support an atomic swap, it must satisfy some fundamental requirements. <br><br>  The main one is the ability to create a smart contract with the possibility of a time delay.  In addition, to make a transaction between two different accounting systems, it is necessary that both of them can use the same cryptographic hash function in specifying the conditions of coin spending (for example, SHA-256).  This is necessary so that the contract is executed correctly when the user provides the result of the hash function.  Moreover, for the successful implementation of the atomic swap, a communication channel is required, since users must off-chain discuss the terms of exchange. <br><br><h2>  Principle of operation </h2><br>  Atomic swap uses so-called time-limited locks (HTLC).  In fact, these are contracts that are supported by the digital currency accounting system itself.  A pair of special contracts ensures that if the coins of one currency change their owner, then the coins of the second currency also.  And if one of the parties to the contract does not confirm the transfer on time, the coins will be returned back to the original owners.  Thus, coins of both currencies are blocked until all conditions are fulfilled and confirmed.  Either the exchange of coins will be executed atomically, or will be rejected completely. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a4a/e15/8d9/a4ae158d9f88bf62af72d3a746ddc60c.png" alt="image"><br><br>  Consider this process in a more detailed scheme.  Imagine two digital currencies for which blockchain technology is applied: Œ± and Œ≤.  There are two participants: Alice (A) and Bob (B).  First, Alice creates a new address on the Œ± blockchain and transfers it to Bob.  Bob also creates a new address, but on the blockchain of currency Œ≤, and sends it to Alice. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5cf/094/0db/5cf0940db53dd6f8ed8c30a7260ede96.png" alt="image"><br><br>  Alice initiates a transaction with a smart contract, in which she blocks her coins, which she wants to exchange with Bob.  Bob verifies this smart contract (conducts a manual or automated audit), creates his smart contract based on Alice‚Äôs contract and transfers it to her.  In turn, Alice verifies Bob‚Äôs smart contract on the Œ≤ blockchain and, if everything is correct, publishes her secret hash value on the Œ≤ blockchain when unlocking coins that were blocked by Bob.  Using this hash value, Bob can unlock the coins that Alice blocked Œ± in the blockchain.  Thus, the exchange is made.  Until the first publication of the hash value, all participants remain with their coins, and after the participants can freely access the opponent's coins.  That is why the exchange can be considered trustless. <br><br><h2>  Confirmation time </h2><br>  To accomplish a trustless atomic swap exchange, only 4 transactions are needed, 2 in each blockchain, as well as off-chain communication between subjects to transfer the text of the smart contract.  Therefore, the time of the exchange using an atomic swap can take from 1 hour to the time specified in the smart contract of the subjects in time delay. <br><br><h2>  Currencies that support atomic swap </h2><br>  Currencies that currently support atomic swap include: <br><br><ol><li>  Bitcoin and its fork: Litecoin, Monacoin, Zcoin, Viacoin, etc. </li><li>  Ethereum and similar projects whose smart contracts are written in programming languages ‚Äã‚Äãand executed in virtual machines. </li></ol><br>  It should be noted that there is still no single standard for atomic swap.  All who currently use atomic swap use cryptography and smart contracts without a single standard. <br><br><h2>  Decentralized Exchange </h2><br>  Based on atomic swap, you can build decentralized exchanges that allow you to work with several accounting systems, with your own blockchain for each.  But when designing such decentralized exchanges, it must be remembered that anyone should be able to leave their offer to buy or sell.  Therefore, you must first have a protocol that allows you to create an orderbook in a decentralized manner. <br><br>  As for the guarantees of orders, there are features.  In the case of centralized exchanges, the entire balance is at the exchange.  Therefore, despite the fact that the user can cancel his order at any time, until such time as it is not canceled, the exchange will fulfill this order anyway.  For decentralized exchanges, fines are required for breach of obligations.  So far, this approach to solving this problem is the best of those available at the time of 2018. <br><br><h2>  <b>disadvantages</b> </h2><br>  In the decentralized exchanges it is not yet possible to implement the so-called dark pools - a special orderbook in which no one sees orders.  This approach is used in centralized exchanges to hide proposals for the exchange of large sums, since they can manipulate the market.  To implement dark pools in a decentralized exchange, it is necessary to use sophisticated cryptography. <br><br>  In addition, transactions with fiat currencies will not be available at decentralized exchanges.  Fiat currencies do not have an accounting system where they could register a smart contract.  Therefore, it is not possible to make an atomic swap between fiat and digital currencies. <br><br><h2>  Panic Sell problem </h2><br>  With the massive use of atomic swap, there is a problem that is difficult to solve.  Assume that there is an accounting system, within which a very high transaction fee is charged, and the transactions themselves are confirmed for a very long time.  Users start selling this currency because it has low bandwidth and create orders on a decentralized exchange, but these orders create smart contracts in the same blockchain as the currency they are trying to sell.  Thus, the network loads even more, the pending transactions form an even greater queue, and users want to sell this currency even more, placing more orders and increasing the transaction queue. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c00/063/1c4/c000631c40125df68da47e52188a8524.png" alt="image"><br><br>  As an analogy, we can give an example from nuclear physics.  With the decay of one nucleus of the uranium isotope 235, it usually emits from 1 to 8 free neutrons.  Each neutron formed during the decay can cause the decay of the neighboring uranium nucleus, this phenomenon is called the chain fission reaction of the nucleus.  Actually, this is the principle of the atomic bomb explosion.  Moreover, the problem of extinguishing nuclear explosions has not yet been resolved properly.  Of course, the problem of Panic Sell in atomic swap based decentralized exchanges is not so significant compared to the problem of atomic bombs, but this analogy very clearly reflects the essence of the avalanche-like spread of the panic process in the market. <br><br><h2>  The risks of using atomic swap </h2><br>  Due to the lack of a third party, there are risks with using atomic swap.  If the user has not audited the contract that the opponent sent to him, there is a chance that the opponent can steal the money of the first user.  In addition, if after the execution of the smart contract the first user took the money, and the opponent did not execute the redeem script in time, the opponent may lose his money. <br><br><h2>  findings </h2><br>  Assessing the work of the atomic swap, it can be concluded that the idea is promising for creating a technology for the exchange of digital assets on a trustless basis.  It takes more time and practical experience before it becomes possible to unequivocally state exactly how the atomic swap idea should be implemented.  However, today there are decentralized exchanges that use atomic swap: BarterDEX on the platform of Komodo, Altcoin, as well as the project 0x.  The fact that there is a demand for such an exchange technology points to the needs of the modern digital economy. </div><p>Source: <a href="https://habr.com/ru/post/417337/">https://habr.com/ru/post/417337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417325/index.html">Open Day at Netology, Data Science theme</a></li>
<li><a href="../417327/index.html">Budget monitoring of temperature in the server room (MP707 + nettop with Linux + PRTG)</a></li>
<li><a href="../417329/index.html">You and Brad Pitt look like 99%</a></li>
<li><a href="../417331/index.html">Security Week 26: Specter updated, now tastefully written</a></li>
<li><a href="../417333/index.html">Social rating</a></li>
<li><a href="../417339/index.html">3DTouch - Scales on the iPhone: Completion</a></li>
<li><a href="../417345/index.html">Threat Hunting with the new Cisco Visibility solution</a></li>
<li><a href="../417353/index.html">Germany approved the use of hydrogen fuel cell trains</a></li>
<li><a href="../417355/index.html">Baldness: Theory and practice of treatment, part 2 "Even the prostate has tonsils, prostaglandins"</a></li>
<li><a href="../417357/index.html">"About IT" nastolki. The history of games with a computer setting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Such an elementary C / C ++: can-> is</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Question for five: what this simple program will print: 


#include <stdio.h> typedef int a; ab = 5; int main() { a(b); printf("%d\n", b); return 0; }...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Such an elementary C / C ++: can-> is</h1><div class="post__text post__text-html js-mediator-article">  Question for five: what this simple program will print: <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt; typedef int a; ab = 5; int main() { a(b); printf("%d\n", b); return 0; }</span></span></span></span></code> </pre>  Having already suffered from their favorite language, but have not yet gone through all the <code>gcc</code> bison, they will feel the catch - and rightly so.  <strong>Hint number zero:</strong> it eats C ++, but simple C does not choke. <br><a name="habracut"></a><br>  <strong>Tip one.</strong>  Here is what it prints: <br><table><tbody><tr><td>  <strong>Axis</strong> </td><td>  <strong>Compilers</strong> </td><td>  <strong>Result</strong> </td></tr><tr><td>  ArchLinux 64 </td><td>  clang 2.9, gcc 4.5.2 </td><td> <code>0</code> </td> </tr><tr><td>  Win7 32 </td><td>  Visual C ++ 2005, 2008, 2010 </td><td> <code>1</code> </td> </tr></tbody></table>  but now the question is different: what is <code>a(b)</code> ?  After all, I turned the keys: both C ++ and C are all the same.  More precisely: clang and gcc print one (0), and visuals another (1). <br><br>  It should already doperet.  Not?  <b>Tip two:</b> remove the noise, and expand the type: <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(b);</code> </pre>  <strong>Hint two ++</strong> .  The introduction of a cast can easily stand to the left of the equal, but now Microsoft will also give zero: <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(b) = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre>  People with brains sharpened under 45 <sup>o</sup> didn‚Äôt even begin to think about it - they stored the code in <a href="http://ideone.com/">http://ideone.com</a> or compiled it directly from the buffer - do we know xsel on <code>xsel</code> ?  The result of this mechanical work with the included <code>-Wall</code> is a <strong>hint three</strong> : <br><pre>    [aviaconstructor @ arch64 tmp] # xsel |  gcc -xc ++ -Wall -
    &lt;stdin&gt;: In function 'int main ()':
    &lt;stdin&gt;: 9:25: warning: 'b' is used uninitialized in this function
</pre>  The program is simple, what a C ++ 11!  But if you started right away from the books of Alexandrescu and shy away from the holy simplicity of C, I fill the gap.  More precisely, I put a single space between the type and the bracket.  For the most unsightly, <b>hint four</b> (five, if in a row): <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> (b);</code> </pre>  At this point in our narrative to the stump, it is clear that <code>a(b)</code> or <code>int(b)</code> is the declaration of a local variable, the same as <code>int b</code> .  With her breast, she closes a global variable with the same name.  Already in the comments to this post, we can gossip and debunk on the topic: <ul><li>  Why the value of a stack ( <code>auto</code> ) variable will usually be deterministic even on systems without zeroing free memory? </li><li>  Can any correct implementation on systems with memory reset to each time produce different values? </li><li>  And anyway, what do other compilers and environments give out? </li></ul>  By the way, move the variable on the stack, if interested.  Of course, there are not only zeros and ones.  And here and now we will go further. <br><br>  In general, if it lit up to the offensive late, then faith in humanity can be restored with a good word, because about C and C ++ constructions it is said that everything that can be a definition, a definition is.  Once again: <code>a(b)</code> looks like a type conversion in C ++, but it looks more like a variable declaration.  So the solution is not only the problem, but also the title of our post: the arrow there is a sign of following. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All this would be an unclean water curiosity, when we, the smart, crawled along the code well, only very smart bugs.  Here are the classics: <br><pre> <code class="cpp hljs"> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"my string"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre>  Two lines and one empty?  Fi-ha!  The second is the definition of the parameterless function <code>b</code> , which returns a string.  Swears when used, thank God!  Much worse when they wanted as always: <br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-function">QMutexLocker </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;globalLock)</span></span></span></span>;</code> </pre>  but it happened: <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyClass::MyFunc() { <span class="hljs-function"><span class="hljs-function">QMutexLocker </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// ? ThisFuncShallBeProtectedByGlobalLock(); ++objectVarCounter; }</span></span></code> </pre>  Even warnings do not wait - just think, the declaration of an unused function!  And it will work, that's just without loka (Shishkov, forgive me for continuous anglicisms).  In the extreme example, the variable declaration was confused with the function declaration, but a completely different joint: <br><pre> <code class="cpp hljs"> { QMutexLocker(&amp;globalLock); <span class="hljs-comment"><span class="hljs-comment">//  ? ...</span></span></code> </pre>  Do I need to explain why this locker will only work for itself?  And I also have a fairy tale: the mouse ran, the tail twisted - Bdams - and instead of equal, I trampled a semicolon in the wrong place: <br><pre> <code class="cpp hljs"> MyEnum myEnumMask ; MyEnum(i);</code> </pre>  No, this example is far-fetched!  Curved tails and not something written out - still works!  Yes Yes.  I agree.  I agree with everything.  But my favorite language is my enemy.  Be careful! </div><p>Source: <a href="https://habr.com/ru/post/117596/">https://habr.com/ru/post/117596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117586/index.html">Anonymous networks and timing attacks: Tarzan and MorphMix</a></li>
<li><a href="../117587/index.html">GitHub Reflog v1.4.12</a></li>
<li><a href="../117588/index.html">Invert page only by CSS</a></li>
<li><a href="../117589/index.html">How to maintain health while working at the computer?</a></li>
<li><a href="../117593/index.html">Packaging .NET applications for N900 on the example of Bless</a></li>
<li><a href="../117599/index.html">Intel plans to release netbooks with a price of up to $ 199 in the second half of 2011</a></li>
<li><a href="../117600/index.html">Google or Facebook: What is more effective advertising?</a></li>
<li><a href="../117602/index.html">The FBI has taken over the domains PokerStars.com, Fulltiltpoker.com and UB.com</a></li>
<li><a href="../117603/index.html">Asus Eee PC 701 4G + TouchScreen, SD, Bluetooth, 3G, Battery Switch</a></li>
<li><a href="../117606/index.html">Do you play poker online?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
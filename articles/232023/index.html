<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Directive Controllers in AngularJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A little bit about directive controllers. Why they are needed and how they differ from the link function. 


 Controller directive vs view controller ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Directive Controllers in AngularJS</h1><div class="post__text post__text-html js-mediator-article"> A little bit about directive controllers.  Why they are needed and how they differ from the <code>link</code> function. <br><a name="habracut"></a><br><br><h5>  Controller directive vs view controller </h5><br>  Controller declaration in directive: <br><br><pre> <code class="javascript hljs">app.controller(<span class="hljs-string"><span class="hljs-string">'myCtrl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope, $element, $attrs</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = <span class="hljs-string"><span class="hljs-string">'myCtrl'</span></span> ) app.directive(<span class="hljs-string"><span class="hljs-string">'myDirective'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'myCtrl'</span></span>, <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">scope, element, attrs, ctrl</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(ctrl.name) <span class="hljs-comment"><span class="hljs-comment">//'myCtrl' } } });</span></span></code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Tricky question.  What is the difference between the directive controller and the view controller that we specify via the <code>ng-controller</code> (or in another way)? <br><br>  Yes, nothing.  It is the same.  If we use it in a directive, then the scope and element of the directive come in the <code>$scope, $element, $attrs</code> parameters <code>$scope, $element, $attrs</code> and if the template contains the scope and parameters of the element on which the <code>ng-controller</code> is hanging. <br><br>  Hence the conclusion.  If you have a bunch of similar logic in the controllers of the router or templates with <code>ng-controller</code> , then simply create a directive and transfer all the logic to its controller, thereby simplifying the application code. <br><br><h5>  Vs link directive controller </h5><br>  We understand further.  In the directive definition object there is a well-known <code>link</code> function, which, at first glance, is no different from the controller.  But the differences are still there. <br><br>  <i>First</i> , it is called after the controller.  The sequence of calls is: <code>controller, preLink, postLink</code> ( <code>postLink</code> is the <code>link</code> . For more information <code>controller, preLink, postLink</code> <a href="https://docs.angularjs.org/api/ng/service/%24compile">documentation</a> ).  The controller works even earlier than the directives of nested elements are initialized.  Therefore, in <code>$scope</code> , for example, you can write settings for child directives. <br><br>  <i>Secondly</i> , the link to the controller is passed to the link. <br><br>  <i>Third</i> , the <code>link</code> always bound to a directive, while the controller may be shared.  I think this is the key difference. <br><br>  An example of using third-party controllers in a directive, so as not to break away from the code: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">children</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">baby</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">baby</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">children</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parent</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><pre> <code class="javascript hljs">app.directive(<span class="hljs-string"><span class="hljs-string">'parent'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">controller</span></span>: <span class="hljs-string"><span class="hljs-string">'parentCtrl'</span></span>, <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">scope, element, attrs, ctrl</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(ctrl); <span class="hljs-comment"><span class="hljs-comment">//parentCtrl.      } } }); app.directive('children', function() { return { require: '^parent', controller: 'childrenCtrl', link: function(scope, element, attrs, ctrl) { console.log(ctrl); //parentCtrl.        ,   require. //    ,      . // ,         , //     . //PS       require,     (require: ['^parent', 'children']) } } }) app.directive('baby', function() { return { restrict: 'E', require: ['^parent', '^children'], link: function(scope, element, attrs, ctrls) { console.log(ctrls); //[parentCtrl, childrenCtrl].      children      } } })</span></span></code> </pre><br>  <a href="http://plnkr.co/edit/XWYSj08khYmKrJOrVNgp">Living example in planker</a> <br><br>  In the <code>controller</code> we create an instance of the controller, in <code>require</code> we refer to the created instances, which makes it possible to store common data in the controller. <br><br>  We can distinguish two cases of using controllers: the separation of common methods between different directives, how <code>ngModelController</code> in Angulyar, for example, and the use of nested directives of the parent directive, how tabs, carousels, etc. work, where there is a parent container and nested elements .  If in the first case the controller works as a set of abstract methods, in the second it can store a link to the list of elements, the number of the active element, the total number of elements and other general information.  Of course, the use of <code>$scope</code> permissible for this purpose, but, obviously, it will not be as intended, since  the scope is needed primarily to bind the controller to the view, and not to share common data. <br><br>  The <code>link</code> also contains the individual logic of the directive, so put all the code not intended for general use there. </div><p>Source: <a href="https://habr.com/ru/post/232023/">https://habr.com/ru/post/232023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../232013/index.html">Cocos2d-x: Writing on Lua</a></li>
<li><a href="../232015/index.html">Javascript to typeScript - translation difficulties</a></li>
<li><a href="../232017/index.html">Useful materials for mobile developer # 64 (June 28-August 3)</a></li>
<li><a href="../232019/index.html">Krita: Four-Point Perspective Transformations</a></li>
<li><a href="../232021/index.html">T-shirt printer: from home crafts to serial models of textile printer</a></li>
<li><a href="../232025/index.html">How I created a magic piano</a></li>
<li><a href="../232029/index.html">Video experiments in physics and augmented reality for schools</a></li>
<li><a href="../232033/index.html">Control access to electronic documents. From DefView to Vivaldi</a></li>
<li><a href="../232037/index.html">As we wrote the iOS library to work with the Wargaming API</a></li>
<li><a href="../232039/index.html">Overview of the most interesting materials on data analysis and machine learning ‚Ññ7 (July 28 - August 4, 2014)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Arduino as a component of Wolfram SystemModeler</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the Leonardo Laguna Ruiz and Johan Rhodin post " Using Arduinos as SystemModeler Components ". 
 Download the file with the models disc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Arduino as a component of Wolfram SystemModeler</h1><div class="post__text post__text-html js-mediator-article">  <i>Translation of the Leonardo Laguna Ruiz and Johan Rhodin post " <a href="http://blog.wolfram.com/2014/11/07/using-arduinos-as-systemmodeler-components/">Using Arduinos as SystemModeler Components</a> ".</i> <i><br></i>  <i>Download the file with the models discussed in the post <a href="">here</a> .</i> <i><br></i>  <i>I express my deep gratitude to <a href="http://vk.com/ld742">Kirill Guzenko</a> for his help in translating.</i> <hr>  With the new free <a href="http://www.wolfram.com/system-modeler/libraries/model-plug/">ModelPlug library</a> for <a href="http://www.wolfram.com/system-modeler/">Wolfram SystemModeler,</a> you can connect Arduino for modeling in <i>SystemModeler</i> .  Arduino easily mates with input and output components, so you can safely turn them on in SystemModeler models to control, say, light bulbs, sensors, switches, start servos, and the like.  Using the ModelPlug library, you can freely combine software and hardware components in modeling and use the Arduino as a fee for data collection. <br><br><img title="Set of icons" src="https://habrastorage.org/getpro/habr/post_images/693/946/650/6939466503b9832ba2ca1ca3048e63f4.png" alt="Set of icons" width="526" height="239"><br><a name="habracut"></a><br>  After downloading the <a href="http://www.wolfram.com/system-modeler/libraries/model-plug/">library</a> from the <i>SystemModeler</i> Library Store, you should install it;  all you need is to double click on the package and accept the license agreement.  With this library you can connect any Firmata-compatible cards to the <i>SystemModeler</i> .  That is any Arduino boards. <br><br>  In this post I used Arduino Uno.  The simplest example I could come up with is the blinking of the LED that is on the board. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img title="Arduino board" src="https://habrastorage.org/getpro/habr/post_images/7bd/a04/9cb/7bda049cb9313114de371c3b567001c6.png" alt="Arduino board" width="322" height="212"><br>  <i>Integrated Arduino Uno LED highlighted in red</i> <br><br>  To do this, I created a simple model in which the logical signal is transmitted to the 13th pin, which corresponds to the LED.  The flashing frequency of the LED corresponds to the frequency of the signal. <br><br><img title="Blinking an LED" src="https://habrastorage.org/getpro/habr/post_images/04c/a19/784/04ca19784f926907c6c122664a1669a1.png" alt="Blinking an LED" width="360" height="248"><br>  <i>Model in <i>SystemModeler</i> that uses ModelPlug components ‚Äî digital contact and Arduino</i> <br><br>  Then you can place the LED on the prototype board and connect it to the ninth Arduino contact: <br><br><img title="Placing LED on breadboard" src="https://habrastorage.org/getpro/habr/post_images/d73/8ee/346/d738ee3468be3655552aaafee1166659.png" alt="Placing LED on breadboard" width="303" height="407"><br>  <i>Connection diagram of the external LED to the ninth contact Arduino Uno</i> <br><br>  If you connect a sine wave to the analog output of the board, the signal from the actual values ‚Äã‚Äãis converted into voltage, which must be applied to the contact of the LED. <br><br><img title="Dimming LED" src="https://habrastorage.org/getpro/habr/post_images/39e/418/56b/39e41856b33dc985ff1eaba510d5966a.png" alt="Dimming LED" width="360" height="274"><br>  <em>Sine wave as LED input</em> <br><br>  You can see how the LED shines at full brightness, then does not shine at all, changing the brightness of the sine wave.  And all this does not require any "coding under the Arduino." <br><br>  The image below shows four different options: in the first we connect the simulated input to the simulated output, in the second the signal from the model is connected to the hardware (as shown in the two previous examples), in the third the signal from the hardware is connected to the model, in the fourth - all components are hardware. <br><br><img title="Simulated vs. real" src="https://habrastorage.org/getpro/habr/post_images/1b5/eb7/169/1b5eb716913a0c4527bf788e33de8237.png" alt="Simulated vs. real" width="489" height="239"><br><br>  Below in the table I gave four options. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/195/d73/945/195d739450a9f2234550e6eaeac8b4e0.png" alt="Grid" title="Grid" width="526" height="181"><br>  <em>For each option, the ModelPlug library will be very useful.</em> <br><br>  The first option, when the input and output are models, is applied immediately after installing <i>SystemModeler</i> , and in most cases is all that is needed.  That is why I did not select it in the table.  If the input and output are hardware components, then they can be controlled and the signals processed / filtered through <i>SystemModeler</i> .  In my opinion, the most interesting option is when some components are simulated, while others are represented in physical embodiment.  Consider a few examples where components are simulated, and data comes from physical devices. <br><br><img title="Input devices and simulated model" src="https://habrastorage.org/getpro/habr/post_images/844/ae1/d3e/844ae1d3e612e0991cc3a17bc79cbb79.png" alt="Input devices and simulated model" width="458" height="244"><br><br>  Then I set up my Uno board to read data from the 14th contact.  I connected a photosensitive resistor, which will determine the illumination. <br><br><img title="Light-dependent resistor" src="https://habrastorage.org/getpro/habr/post_images/863/679/750/86367975021df9e41697239bda793139.png" alt="Light-dependent resistor" width="291" height="417"><br>  <em>Uno board with photoresistor connected to analog input</em> <br><br>  In my model in <i>SystemModeler,</i> I connect this analog signal from the 14th pin to another component. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b0/7ea/e4b/5b07eae4b05d11f281552c6af88740df.png" alt="Connect analog signal to another component" width="360" height="120"><br><br>  This component will receive values ‚Äã‚Äãfrom the photosensitive resistor and compare them with the threshold value.  If the value is greater than 0.02 and the simulation time exceeds 5 seconds, the simulation will end. <br><br><img title="terminateSimulation" src="https://habrastorage.org/getpro/habr/post_images/8db/d78/e0c/8dbd78e0c0c460402fa5c9afd29be816.png" alt="terminateSimulation" width="360" height="218"><br>  <em>Comparison of the light value with the threshold, the result is the answer to the question - will the simulation be completed?</em> <br><br>  If I briefly close the photosensitive resistor with my hand, it will stop receiving light, the value will be less than 0.02 and the simulation will end. <br><br>  Here is an example when physical devices are presented at the input and output: instead of using a signal from a photosensitive resistor to complete the simulation, I can use a low-pass filter from <i>SystemModeler</i> .  Then it should be scaled so that the servo can rotate between -90 ¬∞ and 90 ¬∞.  When I close the photosensitive resistor with my hand, it turns in one direction, and if not, in the other. <br><br><img title="Inputs and outputs are hardware" src="https://habrastorage.org/getpro/habr/post_images/dea/0b4/93b/dea0b493bad6d911065cf6c6a438088b.png" alt="Inputs and outputs are hardware" width="360" height="392"><br>  <em>Analog signal that is fed to the servo through software components</em> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/xZyzPjgeqMQ%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhibNIXvjjgVh9yV7np7GShXrCxGEg" frameborder="0" allowfullscreen=""></iframe><br><br>  The previous example shows that communication through ModelPlug can be implemented not only between some hardware systems - you can use components that are specified as models.  Instead of connecting resistors and capacitors to filter the low frequencies, or instead of writing a program that filters the signal, I use the filter model.  This greatly accelerates prototyping. <br><br>  Consider a more illustrative example.  Take a larger software model and connect it with an analog input.  We will use an inverted pendulum model that rolls on a cart.  The system consists of the engine, mechanisms, three-dimensional components of the pendulum and carts, and all of them are software components.  Connect to this model the signal from the accelerometer, which is connected to the Arduino.  In the model below, the analog signal is from the left.  The first high-pass filter will filter the stationary values ‚Äã‚Äãof the signal, and the low-pass filter will smooth the signal. <br><br><img title="Inverted pendulum system with filters" src="https://habrastorage.org/getpro/habr/post_images/cac/0fd/5bc/cac0fd5bcda2b2bad6e4821751ea98c5.png" alt="Inverted pendulum system with filters" width="526" height="270"><br><br>  At the top of the pendulum we place a power component that converts an analog signal to a force that is applied to the top of the pendulum. <br><br><img title="Mechanical system with force attached" src="https://habrastorage.org/getpro/habr/post_images/f66/174/fbe/f66174fbe8f5d010f6427f881a1d1af7.png" alt="Mechanical system with force attached" width="526" height="283"><br>  <i>Mechanical system with force applied</i> <br><br>  And finally, let's connect the accelerometer to the analog contact. <br><br><img title="Accelerometer connected to inverted pendulum" src="https://habrastorage.org/getpro/habr/post_images/c48/df0/e6a/c48df0e6a293fe7bd2557e3a681d04b5.png" alt="Accelerometer connected to inverted pendulum" width="360" height="107"><br>  <i>Accelerometer connected to an inverted pendulum</i> <br><br>  Now, if you quickly move the accelerometer back and forth, then interference will occur, and the pendulum control system will have to try to adapt.  I wonder if it will be possible so quickly to move the pendulum back and forth to turn it over? <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/phJ8v6JpbTE%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhinzlxdDhVi4AKmcx1LZrchdtjn5w" frameborder="0" allowfullscreen=""></iframe><br><br>  The ModelPlug library is free and can be downloaded from the <a href="http://www.wolfram.com/system-modeler/libraries/"><i>SystemModeler</i> Library Store</a> .  It works on Mac, Windows and Linux. <br><br>  You can try a <a href="http://www.wolfram.com/system-modeler/trial/">trial version of</a> <i>SystemModeler</i> .  There are also options with a license for <a href="http://www.wolfram.com/system-modeler/how-to-buy/education/students.html">students</a> or for <a href="http://www.wolfram.com/system-modeler/how-to-buy/industry-individuals.html">home use</a> .  All the equipment presented in this article fits into a budget of $ 50. </div><p>Source: <a href="https://habr.com/ru/post/258599/">https://habr.com/ru/post/258599/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258585/index.html">Smart quest in reality: demons and wiring</a></li>
<li><a href="../258587/index.html">Animation of characters in Blender 3D is just</a></li>
<li><a href="../258593/index.html">On the issue of programming style</a></li>
<li><a href="../258595/index.html">The sad state of the sysadmin in the era of containers</a></li>
<li><a href="../258597/index.html">The application that I need</a></li>
<li><a href="../258601/index.html">Unique TechTalk with Michael Monti Widenius</a></li>
<li><a href="../258603/index.html">We select the correct Microsoft Azure services</a></li>
<li><a href="../258605/index.html">Bash state machine</a></li>
<li><a href="../258607/index.html">Krovi: Big Data - as dream. 9th series: Why IBM was forced to buy "Alchemists" for $ 100 million</a></li>
<li><a href="../258611/index.html">An example of a vector implementation of a neural network using Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
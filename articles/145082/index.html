<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Initial configuration of the Cisco Wi-Fi controller</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, it happened. You were brought to the table by a freshly purchased Cisco wi-fi controller, and a dozen new access points. What is it, why should I,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Initial configuration of the Cisco Wi-Fi controller</h1><div class="post__text post__text-html js-mediator-article"> So, it happened.  You were brought to the table by a freshly purchased Cisco wi-fi controller, and a dozen new access points.  What is it, why should I, how does it work?  How can I install this controller in the network, and finally ‚Äúdistribute the file file correctly‚Äù?  This will be discussed today. <a name="habracut"></a><br><br>  Why do I need a controller?  Without going into much detail, the access points and the controller together provide wireless clients access to the rest of the (wired) part of the network.  Half of the tasks associated with access to the radio environment, generation of beacon frames, encryption, are performed by the access point itself.  The other half, mainly association and authorization, is served by the controller.  This is called Split-MAC architecture. <br><br><img src="https://habrastorage.org/storage2/1bd/f07/217/1bdf072175995ae5f68fe1c713699230.gif">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Access points are connected to the controller via the local switched network (of course, made by Cisco, although the <a href="http://en.wikipedia.org/wiki/CAPWAP">CAPWAP</a> interaction <a href="http://en.wikipedia.org/wiki/CAPWAP">protocol is</a> open).  There may be up to hundreds of them per controller, depending on its performance.  Several controllers can be combined into groups, while ensuring coordinated work of the controllers, and the points themselves, according to the general settings.  The advantages of this approach are obvious: centralized management, flexibility of settings, fault tolerance, load balancing, intelligent functions like seamless roaming, frequency resource management, power, quality of service, authorization. <br><br>  On access points connected to the controller, the so-called.  "Lightweight" (lightweighted) works almost the same way IOS (AIR-LAP-xxx), as on conventional (standalone, AIR-AP-xxx).  The difference is in the absence of the mode ‚Äúconf t‚Äù, since the points are configured by the controller centrally.  Firmware between standalone lightweighted can be manually changed "back and forth." <br><br>  At the start, the access point searches for the best available controller according to a rather complicated scheme, authorizes, downloads the firmware (if required), settings, and starts serving clients.  A control channel (UDP port 5246) and a data channel (UDP port 5247) are organized between the point and the controller.  User data is encapsulated into UDP packets regardless of the client WLAN / VLAN number, which allows you to place access points anywhere on the network (on the access ports of the switches), and centrally manage security at the VLAN level on the controller side.  For the case of ‚Äúremote office‚Äù, where there is no controller, a mode with local switching of client traffic is provided. <br><br><img src="https://habrastorage.org/storage2/5cc/39b/27b/5cc39b27b9175c60174699a46c797cf4.gif"><br><br>  Architecturally, the controller is a specialized computer (different hardware architecture and capacity, depending on the model) with a fairly old version of MontaVista Linux inside.  Several modules have been added to the kernel, sometimes a hardware driver for hardware acceleration of encryption or packet forwarding.  All actions associated with the life of the controller, executes a large monolithic process, designed as a user-application. <br><br>  Having connected the controller to the power supply, COM-port (9600/8 / N / 1) and local network, the initial configuration is required.  It's easy, if you understand what is being asked and why.  Below is the procedure for initial configuration of the NME-AIR-WLC (module for the ISR router), in my case successfully virtualized and then running in a virtual machine: <br><br> <code>Cryptographic library self-test....passed! <br> XML config selected <br> Validating XML configuration <br> Cisco is a trademark of Cisco Systems, Inc. <br> Software Copyright Cisco Systems, Inc. All rights reserved. <br> <br> Cisco AireOS Version 7.0.220.0 <br> Initializing OS Services: ok <br> Initializing Serial Services: ok <br> Initializing Network Services: ok <br> Starting ARP Services: ok <br> Starting Trap Manager: ok <br> Starting Network Interface Management Services: ok <br> Starting System Services: ok <br> Starting Fastpath Hardware Acceleration: ok <br> Starting Switching Services: ok <br> Starting QoS Services: ok <br> Starting Policy Manager: ok <br> Starting Data Transport Link Layer: ok <br> Starting Access Control List Services: ok <br> Starting System Interfaces: ok <br> Starting Client Troubleshooting Service: ok <br> Starting Management Frame Protection: ok <br> Starting Certificate Database: ok <br> Starting VPN Services: ok <br> Starting LWAPP: ok <br> Starting CAPWAP: ok <br> Starting LOCP: ok <br> Starting Security Services: ok <br> Starting Policy Manager: ok <br> Starting Authentication Engine: ok <br> Starting Mobility Management: ok <br> Starting Virtual AP Services: ok <br> Starting AireWave Director: ok <br> Starting Network Time Services: ok <br> Starting Cisco Discovery Protocol: ok <br> Starting Broadcast Services: ok <br> Starting Logging Services: ok <br> Starting DHCP Server: ok <br> Starting IDS Signature Manager: ok <br> Starting RFID Tag Tracking: ok <br> Starting RBCP: ok <br> Starting Mesh Services: ok <br> Starting TSM: ok <br> Starting CIDS Services: ok <br> Starting Ethernet-over-IP: ok <br> Starting DTLS server: enabled in CAPWAP <br> Starting CleanAir: ok <br> Starting WIPS: ok <br> Starting SSHPM LSC PROV LIST: ok <br> Starting RRC Services: ok <br> Starting FMC HS: ok <br> Starting Management Services: <br> Web Server: ok <br> CLI: ok <br> Secure Web: Web Authentication Certificate not found (error). If you cannot access management interface via HTTPS please reconfig <br> Secure Web: Web Authentication Certificate not found (error). If you cannot access management interface via HTTPS please reconfigure Virtual Interface. <br> <br> (Cisco Controller) <br> <br> Welcome to the Cisco Wizard Configuration Tool <br> Use the '-' character to backup <br></code> <br><br>  Suspend the autoinstall feature.  It allows the controller to automatically download a pre-configured config file via TFTP.  Thus, you can deploy a lot of controllers in the network without having to manually configure each.  Useful if you have a WCS control system. <br> <code>Would you like to terminate autoinstall? [yes]: <b>yes</b> <br> AUTO-INSTALL: process terminated -- no configuration loaded <br></code> <br><br>  Set the name of the controller (the one that is generated from the MAC address), the administrator's login and password: <br> <code>System Name [Cisco_bb:bb:40] (31 characters max): <b>wlc4...net</b> <br> Enter Administrative User Name (24 characters max): <b>anton</b> <br> Enter Administrative Password (3 to 24 characters): <b>*********</b> <br> Re-enter Administrative Password : <b>*********</b> <br></code> <br><br>  Configure addressing management interface.  This is a logical interface through which the controller ‚Äúcommunicates‚Äù with the outside world (except for access points).  The usual practice is that all the physical interfaces of the controller are combined into an EtherChannel group (you can do this later), and in such a common channel you configure how many logical interfaces are required, each in its own VLAN.  In this example, a trunk port is created between the switch and the controller, and the service is carried out through VLAN 310. For the access port, or if you have a native VLAN, specify the number 0. The DHCP server address is needed to send client DHCP requests to the client if such will be configured.  The controller will be a DHCP relay (although it can also act as a DHCP server). <br><br> <code>Management Interface IP Address: <b>xx.xx.145.10</b> <br> Management Interface Netmask: <b>255.255.255.128</b> <br> Management Interface Default Router: <b>xx.xx.145.1</b> <br> Management Interface VLAN Identifier (0 = untagged): <b>310</b> <br> Management Interface Port Num [1]: <br> Management Interface DHCP Server IP Address: <b>xx.xx.145.9</b> <br></code> <br><br>  All controllers, except the 5508 model, use a separate ap-manager logical interface to communicate with access points.  You must configure its address, usually from the same network: <br> <code>AP Manager Interface IP Address: <b>xx.xx.145.14</b> <br> AP-Manager is on Management subnet, using same values <br> AP Manager Interface DHCP Server (xx.xx.145.9): <br></code> <br><br>  The last logical interface is virtual.  It is used to send DHCP requests to clients, web authorization, roaming.  It is assigned an address that is not used anywhere on the network and is not routable, usually 1.1.1.1.  Attention: it must be the same for several controllers between which roaming clients are supposed. <br> <code>Virtual Gateway IP Address: <b>1.1.1.1</b> <br></code> <br><br>  For client roaming purposes, controllers are combined into mobility groups, the name of which is proposed to be set.  It is also proposed to set the name of the group of controllers that collectively provide the control of the radio echo (frequency plan and power, rf group).  Although it may be different groups by device set and name, here is the common name (you can change it later): <br> <code>Mobility/RF Group Name: <b>WLAB</b> <br></code> <br><br>  Wizard offers to create one wireless network (WLAN).  I usually specify something here, anyway, then I delete this network, and create the correct one from the web interface. <br> <code>Network Name (SSID): <b>test</b> <br></code> <br><br>  The bridging mode of DHCP packets is exotic and is hardly applicable in practice. <br> <code>Configure DHCP Bridging Mode [yes][NO]: <br></code> <br><br>  You can enable wireless clients that have an IP address statically assigned.  Actually, this option enables ARP caching on the controller, which is useful. <br> <code>Allow Static IP Addresses [YES][no]: <br></code> <br><br>  For the purposes of client authorization (as well as access to the controller, and some specific others), an external RADIUS server can be used, which is more convenient to configure later via the web interface. <br> <code>Configure a RADIUS Server now? [YES][no]: <b>no</b> <br> Warning! The default WLAN security policy requires a RADIUS server. <br> Please see documentation for more details. <br></code> <br><br>  Each access point, and controller, have valid country codes in which they operate.  In fact, the country code determines the allowed set of frequencies (channels) and limiting powers, which affects the operation of automatic frequency selection algorithms, etc.  It is highly recommended that the list of country codes be uniformly configured throughout your network. <br> <code>Enter Country Code list (enter 'help' for a list of countries) [US]: <b>RU</b> <br></code> <br><br>  The controller suggests enabling 2.4 and 5 GHz networks (11b / g / n and 11a / n, respectively).  In fact, this parameter is transmitted to the access points associated with the controller, on which the radio itself is installed.  I advise you to turn on the radio via the web interface after all the other parameters are configured. <br> <code>Enable 802.11b Network [YES][no]: <b>no</b> <br> Enable 802.11a Network [YES][no]: <b>no</b> <br></code> <br><br>  Request for the inclusion of useful algorithms for dynamic control of the frequency resource and power, as we said earlier. <br> <code>Enable Auto-RF [YES][no]: <br></code> <br><br>  The time settings (time server and static time / time zone) are important not only for the correctness of the tags in the log files, but also for the authorization of access points using certificates (they use CAPWAP based on DTLS based on certificates validity). <br> <code>Configure a NTP server now? [YES][no]: <b>no</b> <br> Configure the system time now? [YES][no]: <b>no</b> <br> <br> Warning! No AP will come up unless the time is set. <br> Please see documentation for more details. <br></code> <br><br>  Finally, if you are ready, the controller saves the configuration, and restarts: <br> <code>Configuration correct? If yes, system will save it and reset. [yes][NO]: <b>yes</b> <br> <br> Configuration saved! <br> Resetting system with new configuration... <br></code> <br><br>  Everything, now the device can be configured through the web-based management interface, accessible in a couple of minutes at: <b>https: //xx.xx.145.10</b> .  To avoid unnecessary questions about the validity of the site, the controller can later be issued a certificate for SSL. <br><br><img src="https://habrastorage.org/storage2/daf/ec1/59a/dafec159a6ac4c61d3604453b9d01b72.jpg"><br><br>  Controllers can also be configured via the command line (console, telnet, ssh).  From syntax, IOS CLI supporters will spit, and JunOS fans will be shocked.  The command line, however, is very useful for debugs, without which you simply do not step on Cisco wireless systems. <br><br>  Now is the time to read the <a href="http://www.cisco.com/en/US/docs/wireless/controller/7.0MR1/configuration/guide/wlc_cg70MR1.html">comprehensive</a> controller setup <a href="http://www.cisco.com/en/US/docs/wireless/controller/7.0MR1/configuration/guide/wlc_cg70MR1.html">guide</a> , and rush into battle.  If you have <s>hands and a file of</s> sufficient funds, you can think about the implementation of an extremely convenient centralized management tool for the NCS / WCS wireless network, a screenshot of which is shown below: <br><br><img src="https://habrastorage.org/storage2/1b5/aeb/66d/1b5aeb66dd72cc576d3874f0ce09be77.jpg"><br><br>  The next step is to <a href="http://habrahabr.ru/post/145677/">install and connect access points</a> . <br><br>  PS The author is in no way affiliated with Cisco Systems, does not sell or buy anything. </div><p>Source: <a href="https://habr.com/ru/post/145082/">https://habr.com/ru/post/145082/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145073/index.html">* nix-way: Even if you have been eaten, you have at least two ways out.</a></li>
<li><a href="../145075/index.html">Risk calculation by Value at Risk</a></li>
<li><a href="../145076/index.html">Visualization of sound without a computer</a></li>
<li><a href="../145078/index.html">Obama ordered all government agencies to have a web API</a></li>
<li><a href="../145081/index.html">United Russia stands for enhanced government regulation of the Internet space</a></li>
<li><a href="../145084/index.html">Unusual keyboards for programmers and not only</a></li>
<li><a href="../145085/index.html">Ice Cream Sandwich is already working on 7.1% of all Android devices.</a></li>
<li><a href="../145086/index.html">How to accept payments offline?</a></li>
<li><a href="../145087/index.html">Motorola launches 3 SIM card in Brazil</a></li>
<li><a href="../145088/index.html">ETSI approved nano-SIM standard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
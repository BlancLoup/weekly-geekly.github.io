<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We deploy a local server on Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few days ago I was once again visited by the Thought. The thought was not new and quite intrusive: ‚Äúlet's move on to Windows8. Well pozhaaaluysta. A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We deploy a local server on Windows</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/36a/c8d/2ea/36ac8d2eab0cc25978987e429aad0851.jpg"><br>  A few days ago I was once again visited by the Thought.  The thought was not new and quite intrusive: ‚Äúlet's move on to Windows8.  Well pozhaaaluysta.  And since it was impossible to drive it away, I stocked up with tea and cookies and proceeded. <br><br>  The installation of the system and all the necessary programs took no more than two hours, but then the most interesting moment came: I needed to deploy the working environment, namely, GIT + local server (Apache, MySQL, PHP, nginx, memcached, mongodb).  Remembering the experience of previous installations, this time I decided to document the whole process and save it for posterity. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <b>Disclaimer number one time:</b> ‚ÄúI am not a programmer‚Äù (c), but an interface designer and a frontend technologist (but in some cases I can help my colleagues and add some sort of something, and even then they won‚Äôt beat me for it) </blockquote><br><blockquote>  <b>Disclaimer number two:</b> yes, I perfectly imagine that in Ubuntu all this is done many times faster.  But I work on Windows, historically. <br></blockquote><br><br>  <b>So let's get started.</b> <br><br><h2>  Our work plan includes the installation of the following products: </h2><br><ol><li>  PuTTY </li><li>  Git </li><li>  Denwer (Apache, MySQL, PHP) </li><li>  Nginx </li><li>  Memcached </li><li>  MongoDB </li></ol><br><br><h2>  1. PuTTY </h2><br>  <b>PuTTY</b> is a free client for various remote access protocols, including SSH, Telnet, rlogin. <br><img src="https://habrastorage.org/storage2/c7f/3c6/b78/c7f3c6b784843907db7c679ca2981e41.png"><br><br>  There are several utilities in PuTTY, but I only need Pegeant and myself (an SSH authentication agent that stores the keys to git repositories). <br>  <b>Offsite:</b> <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">go to</a> <br>  If you do not need any SSH, forget about this item and go on. <br><br><h2>  2. GIT </h2><br>  For the first year I have been using <b>TortoiseGit</b> , which is stable for working with <b>git</b> , and it covers all my needs by 146%.  In general, I recommend. <br><img src="https://habrastorage.org/storage2/43e/8cc/dde/43e8ccdde7069b7bc3aa61d70be105ef.png"><br>  <b>Offsite:</b> <a href="http://code.google.com/p/tortoisegit/">go to</a> <br><br>  <b>2.1</b> TortoiseGit requires <b>git for Windows</b> , which can be <a href="http://code.google.com/p/msysgit/downloads/list%3Fq%3Dfull%2Binstaller%2Bofficial%2Bgit">picked up on google</a> ; <br>  <b>2.2</b> install <b>TortoiseGit</b> <a href="http://code.google.com/p/tortoisegit/wiki/Download%3Ftm%3D2">from here</a> <br><br><h2>  3. Denwer </h2><br>  <b>Denver</b> - The Gentleman Web Development Kit (‚ÄúD.W.r.‚Äù, read Denver) is a project by Dmitry Koterov, a set of distributions (Apache, PHP, MySQL, Perl, etc.) and a software shell used by the Web - developers to develop sites on the "home" (local) Windows-machine. <br>  <b>Offsite:</b> <a href="http://www.denwer.ru/">go to</a> <br><br><h3>  3.1 Installation </h3><br>  We will need to download the <b>basic bundle</b> and <a href="http://www.denwer.ru/packages/php5.html">additional PHP5 modules</a> . <br><br>  <b>Lyrical digression:</b> <br><blockquote>  <i>No, not just download, but get download links by email!</i>  <i>That is, you will have to drive in your mail, as well as the name and surname twice in the form under the large heading "Registration".</i>  <i>‚ÄúRegistration is required in connection with the future release of Denver-4.‚Äù For several years now, the form has apologized, but I no longer believe it (.</i> </blockquote><br><br>  Usually the installation of Denver is quick and painless, but on Windows8 I was attacked by an error that swore at the missing <b>msvcr71.dll</b> library.  The library can be <a href="http://www.dll-files.com/dllindex/dll-files.shtml%3Fmsvcr71">picked up here</a> and put into the folder <b>"\ Windows \ System32 \"</b> (x32) or <b>"\ Windows \ SysWOW64 \"</b> (x64).  After the file has gone to the folder, open its properties and click the "Unblock" button. <br><br><h3>  3.2 Verification </h3><br>  After installing Denver, we will create a test script on which we will check the performance of all that we install later. <br>  Let's go to <b>Z: \ home</b> and add a new site: create a folder <b>test.local</b> , in it a folder <b>‚Äúwww‚Äù</b> , to which we add the <b>index.php</b> file with incredibly creative text: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'Test me &lt;br&gt;'</span></span>;</code> </pre> <br><br>  Restart Denver, open it in the <b><a href="http://www.test.local/">www.test.local</a></b> browser, type in and go further. <br><br><h2>  4. Memcached </h2><br>  <b>Memcached</b> is middleware that implements in-memory data caching service based on a hash table paradigm. <br><img src="https://habrastorage.org/storage2/b5a/6a5/bb2/b5a6a5bb200e121403ff3ceba8e0e8ac.png"><br><br>  <b>Offsite:</b> <a href="http://memcached.org/">go to</a> <br><br>  <b>Memcache</b> is an extension for php that provides a convenient procedural and object-oriented interface to memcached, a high-performance caching daemon that was specifically designed to reduce database load in dynamic web applications. <br><br><h3>  4.1 Installing memcached </h3><br>  <b>A.</b> Download the binary archive: <b>Memcached 1.4.5 for Windows</b> <a href="http://blog.elijaa.org/index.php%3Fpost/2010/08/25/Memcached-1.4.5-for-Windows">from here</a> <br>  <b>V.</b> unpack the contents of the archive in <b>\ usr \ local \ memcached</b> <br><br><h3>  4.2 Installing memcache </h3><br>  <b>A.</b> Download the archive from the library <a href="">from here.</a> <br>  <b>V.</b> unpack the contents of the archive in <b>\ usr \ local \ php5 \ ext \</b> <br>  <b>C.</b> open the file <b>php.ini</b> ( <b>\ usr \ local \ php5 \ php.ini</b> ) and include the extension: <br> <code>extension=php_memcache.dll</code> <br> <br><h3>  4.3 Configuring the launch of Memcached with the launch of Denwer </h3><br>  <b>To run the script with Denver we need:</b> <br><ol><li>  write a script containing the command to start and stop the application / service and put it in the <b><i>\ denwer \ scripts \ init.d folder</i></b> </li><li>  create a link to this script in the start / stop configuration folder <b><i>\ denwer \ scripts \ main \</i></b> </li></ol><br><br>  <b>A.</b> create a file named ‚Äúmemcached.pl‚Äù in the <b><i>\ denwer \ scripts \ init.d \ directory</i></b> <br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!perl -w package Starters::Memcached; BEGIN { unshift @INC, "../lib"; } use StartManager; my $basedir = '/usr/local/memcached/'; chdir($basedir); StartManager::action $ARGV[0], start =&gt; sub { ### ### START. ### print "Starting memcached\n"; system("memcached.exe -d"); print " Started!\n"; }, stop =&gt; sub { ### ### STOP. ### print "Stopping memcached\n"; system("TASKKILL /F /IM memcached.exe"); print " Stopped!\n"; }; return 1 if caller;</span></span></code> </pre><br><br>  <b>B.</b> Now we will create a link to the script - a plain text file containing an indication that when starting, restarting and stopping Denver, you need to execute <b>init.d / memcached.pl</b> <br>  In the text editor we write <br> <code>init.d/memcached</code> <br>  and save the file under the name <b>"40_memcached"</b> in the following folders: <br><ul><li>  \ denwer \ scripts \ main \ start </li><li>  \ denwer \ scripts \ main \ stop </li><li>  \ denwer \ scripts \ main \ restart </li></ul><br><br><h3>  4.4 Checking the result </h3><br>  <b>In our test script (index.php) we add:</b> <br><pre> <code class="php hljs">$memcache = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Memcache; $memcache-&gt;connect(<span class="hljs-string"><span class="hljs-string">'127.0.0.1'</span></span>, <span class="hljs-number"><span class="hljs-number">11211</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'Memcache ver: '</span></span> . $memcache-&gt;getVersion();</code> </pre><br><br>  <b>Restart Denver and see what happens.</b> <br><img src="https://habrastorage.org/storage2/bf5/5b7/ccc/bf55b7ccce43f2aa43404fe46d8b091c.png"><br><br><h2>  5. Nginx </h2><br>  <b>Nginx</b> is a simple, fast and reliable server, not overloaded with functions. <br><img src="https://habrastorage.org/storage2/623/f05/30b/623f0530b5e4d3e625900fb0264b3bdb.png"><br>  Offsite: <a href="http://nginx.org/">go to</a> <br><br><h3>  5.1 Configuring Nginx </h3><br>  <b>A.</b> Download the <a href="http://nginx.org/ru/download.html">Windows version</a> from offsite and unpack it in <b><i>\ usr \ local \ nginx</i></b> <br>  <b>B.</b> Set up a virtual host for our test site.  To do this, open <b>\ usr \ local \ nginx \ conf \ nginx.conf</b> and add there <br><br><pre> <code class="nginx hljs"> <span class="hljs-section"><span class="hljs-section">server</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">listen</span></span> <span class="hljs-number"><span class="hljs-number">127.0.0.1:80</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">server_name</span></span> www.test.local test.local; <span class="hljs-attribute"><span class="hljs-attribute">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$host</span></span> = <span class="hljs-string"><span class="hljs-string">'test.local'</span></span>){ <span class="hljs-attribute"><span class="hljs-attribute">rewrite</span></span><span class="hljs-regexp"><span class="hljs-regexp"> ^/(.*)$</span></span> http://www.test.local<span class="hljs-variable"><span class="hljs-variable">$1</span></span> <span class="hljs-literal"><span class="hljs-literal">permanent</span></span>; } <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~* \.(jpeg|jpg|gif|png|css|js|pdf|txt|tar)$</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> Z:\home\/test.local\www; } <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> / { <span class="hljs-attribute"><span class="hljs-attribute">ssi</span></span> <span class="hljs-literal"><span class="hljs-literal">on</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://127.0.0.1:8080/; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-REQUEST_URI <span class="hljs-variable"><span class="hljs-variable">$request_uri</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-Real-IP <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> X-Forwarded-for <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Host <span class="hljs-variable"><span class="hljs-variable">$host</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_connect_timeout</span></span> <span class="hljs-number"><span class="hljs-number">60</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_send_timeout</span></span> <span class="hljs-number"><span class="hljs-number">90</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_read_timeout</span></span> <span class="hljs-number"><span class="hljs-number">90</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_redirect</span></span> <span class="hljs-literal"><span class="hljs-literal">off</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Connection close; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass_header</span></span> Content-Type; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass_header</span></span> Content-Disposition; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass_header</span></span> Content-Length; <span class="hljs-attribute"><span class="hljs-attribute">root</span></span> Z:\home\/test.local\www; } }</code> </pre><br>  This is an example of settings from a real project, your settings obviously may differ. <br><br><h3>  5.2 Configuring Apache </h3><br>  By default, Apache works on port 80, but we just gave this port to Nginx, so now you need to change the template for the virtual host in Apache settings and assign it a port other than 80th (for example, 8080). <br>  Open <b>\ usr \ local \ apache \ conf \ httpd.conf</b> and change the port number <br><br><pre> <code class="apache hljs"><span class="hljs-comment"><span class="hljs-comment">## ##    . ## ##       Apache  ,   80, ##       . ## #Listen $&amp;{ip:-127.0.0.1}:$&amp;{port:-8080} #NameVirtualHost $&amp;{ip:-127.0.0.1}:$&amp;{port:-8080} #&lt;VirtualHost $&amp;{ip:-127.0.0.1}:$&amp;{port:-8080}&gt; # DocumentRootMatch "/home/(?!cgi-)(.*)^1/(?!cgi$|cgi-)(.*)" # DocumentRootMatch "/home/(?!cgi-)(.*)/public_html^1" # DocumentRootMatch "/home/(?!cgi-)(.*)/public^1" # DocumentRootMatch "/home/(?!cgi-)(.*)^1/html/(.*)" # DocumentRootMatch "/home/(?!cgi-)(.*)^1/domains/(?!cgi$|cgi-)(.*)" # DocumentRootMatch "/var/www/html/(?!cgi-)~(.*)^1/(?!cgi$|cgi-)(.*)" # DocumentRoot "$&amp;" # ServerName "%&amp;/-www" # ServerAlias "%&amp;/-www" "%&amp;/-www/www" $&amp;{host:-} # # $&amp;{directives:-} # # ScriptAlias /cgi/ "$^1/cgi/" # ScriptAlias /cgi-bin/ "$^1/cgi-bin/" # AllowEncodedSlashes on #&lt;/VirtualHost&gt;</span></span></code> </pre><br><br><h3>  5.3 Configuring the launch of Nginx with the launch of Denwer </h3><br>  <b>A.</b> Create a file named ‚Äúnginx.pl‚Äù in the <b><i>\ denwer \ scripts \ init.d \ directory</i></b> <br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!perl -w package Starters::Nginx; BEGIN { unshift @INC, "../lib"; } use StartManager; my $basedir = '/usr/local/nginx/'; chdir($basedir); StartManager::action $ARGV[0], start =&gt; sub { ### ### START. ### print "Starting Nginx\n"; system("start nginx.exe"); print " Started!\n"; }, stop =&gt; sub { ### ### STOP. ### print "Stopping Nginx\n"; system("nginx.exe -s stop"); print " Stopped!\n"; }; return 1 if caller;</span></span></code> </pre><br><br>  <b>B.</b> in a text editor write <br> <code>init.d/nginx</code> <br>  and save the file under the name <b>"50_memcached"</b> in the following folders: <br><ul><li>  \ denwer \ scripts \ main \ start </li><li>  \ denwer \ scripts \ main \ stop </li><li>  \ denwer \ scripts \ main \ restart </li></ul><br><br><h3>  5.4 Checking the result </h3><br>  Put next to the script file <b>style.css</b> content <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">h2</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: green; }</code> </pre><br><br>  And improve our <b>index.php</b> : <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Test me<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content-type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Test me<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Memcached<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> $memcache = </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">new</span></span></span><span class="php"> Memcache; $memcache-&gt;connect(</span><span class="hljs-string"><span class="php"><span class="hljs-string">'127.0.0.1'</span></span></span><span class="php">, </span><span class="hljs-number"><span class="php"><span class="hljs-number">11211</span></span></span><span class="php">); </span><span class="hljs-keyword"><span class="php"><span class="hljs-keyword">echo</span></span></span><span class="php"> </span><span class="hljs-string"><span class="php"><span class="hljs-string">'Memcached ver: '</span></span></span><span class="php"> . $memcache-&gt;getVersion(); </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>Now restart Denver and admire the result.</b>  <b>If the CSS file is connected, Nginx works fine.</b> <br><img src="https://habrastorage.org/storage2/1a7/971/fb7/1a7971fb71a8354591d6c5162f8946b3.png"><br><br><h2>  6. MongoDB </h2><br>  <b>MongoDB</b> is an open source document-oriented database management system (DBMS) that does not require a description of the table schema. <br><img src="https://habrastorage.org/storage2/5f1/117/663/5f1117663dccd36760afafa631533de7.png"><br>  <b>Offsite:</b> <a href="http://www.mongodb.org/">go to</a> <br><br><h3>  6.1 PHP-driver </h3><br>  <b>A.</b> Download the <b>php_mongo.dll</b> library from <a href="https://github.com/mongodb/mongo-php-driver/downloads">this site</a> : and <b>drop</b> <a href="https://github.com/mongodb/mongo-php-driver/downloads">it</a> into the <b><i>\ usr \ local \ php5 \ ext \</i></b> folder <br>  By trial and error, it was found that the appropriate driver is contained in the archive <b>mongo-1.2.5.zip/mongo-1.2.5-php5.3vc9ts.zip</b> .  If you for some reason do not start, try other versions. <br><br>  <b>B.</b> connect the extension to <b>php.ini</b> <br> <code>extension=php_mongo.dll</code> <br> <br><h3>  6.2 Installing Mongo </h3><br>  A. Download the <a href="http://www.mongodb.org/downloads">archive from Mongo</a> and unpack it into the <b><i>\ usr \ local \ mongodb folder</i></b> .  In the same folder we create two more folders: <br><ol><li>  db </li><li>  logs </li></ol><br><br>  <b>B.</b> install the service <br> <code>&gt; cd C:\WebServers\usr\local\mongodb\bin\</code> <br> <code>&gt; mongod.exe --install --dbpath=C:\WebServers\usr\local\mongodb\db\ --logpath=C:\WebServers\usr\local\mongodb\logs\</code> <br> <br><h3>  6.3 Configuring MongoDB launch together with Denver </h3><br>  <b>A.</b> create a file named <b>‚Äúmongod.pl‚Äù</b> in the <b><i>\ denwer \ scripts \ init.d \ directory</i></b> <br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!perl -w package Starters::mongoDB; BEGIN { unshift @INC, "../lib"; } use StartManager; StartManager::action $ARGV[0], start =&gt; sub { ### ### START. ### print "Starting mongoDB\n"; system("net start mongoDB"); print " Started!\n"; }, stop =&gt; sub { ### ### STOP. ### print "Stopping mongoDB\n"; system("net stop mongoDB"); print " Stopped!\n"; }; return 1 if caller;</span></span></code> </pre><br><br>  <b>B.</b> in a text editor write <br> <code>init.d/mongod</code> <br>  and save the file under the name <b>"60_mongod"</b> in folders already familiar to us: <br><ul><li>  \ denwer \ scripts \ main \ start </li><li>  \ denwer \ scripts \ main \ stop </li><li>  \ denwer \ scripts \ main \ restart </li></ul><br><br><h3>  6.4 Checking the result </h3><br>  Run the mongo console interface <br> <code>&gt; Z:\usr\local\mongodb\bin\mongo.exe</code> <br> <br>  and perform the insertion and output of the test value in the database ‚Äútest‚Äù <br> <code>&gt; db.test.save( { name: ‚ÄúHabr!‚Äù } )</code> <br> <code>&gt; db.test.find()</code> <br> <br>  <b>The result should be the following:</b> <br><img src="https://habrastorage.org/storage2/c81/5fc/671/c815fc671de06f9b0e389e721d787f6c.png"><br><br><h3>  6.5.  Installing the Mongo database management interface </h3><br>  Offline MongoDB has a <a href="http://www.mongodb.org/display/DOCS/Admin%2BUIs">list and short overviews of admins</a> , so you can choose to your taste. <br>  I chose <a href="http://www.mongodb.org/display/DOCS/Admin%2BUIs">RockMongo</a> for myself, so it is with its help that we will finally make sure that everything works and does not fall anywhere. <br><br>  <b>A.</b> download the archive with admin panel from <a href="http://rockmongo.com/%3Faction%3Ddownloads">this page</a> .  We choose, of course, the <b>version for Windows</b> .  At the time of this writing, this is <b>RockMongo-on-Windows v0.0.4</b> <br><br>  <b>B.</b> From the archive, take the folder <b><i>\ rockmongo-on-windows \ web \ rockmongo</i></b> and copy it to the directory of our test site <br>  Open <b>config.php</b> and change the value of the parameter <br><pre> <code class="php hljs">$MONGO[<span class="hljs-string"><span class="hljs-string">"servers"</span></span>][$i][<span class="hljs-string"><span class="hljs-string">"control_auth"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;</code> </pre><br>  on <br><pre> <code class="php hljs">$MONGO[<span class="hljs-string"><span class="hljs-string">"servers"</span></span>][$i][<span class="hljs-string"><span class="hljs-string">"control_auth"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;</code> </pre><br><br>  <b>C.</b> Check the result at the link <a href="http://www.test.local/rockmongo/index.php">www.test.local / rockmongo / index.php</a> <br><img src="https://habrastorage.org/storage2/188/8df/275/1888df275acb642446b15770e2efd29e.png"><br><br>  <b>Congratulations!</b>  <b>Now we are the final and irrevocable good fellows.</b> <br><br><h2>  Bonus number 1.  Working with php from the Windows console </h2><br>  Perhaps someone will come in handy.  It came in handy for me when our evil technical leader decided that ‚ÄúSQL files are a great time, let's use migrations‚Äù.  Of course, for the sake of decency, I tried to portray a complete misunderstanding and even let a tear, but was exposed and sent to figure out how it works on Windows. <br>  It turned out that all that is needed for happiness is to <b>set the PHP directory in the PATH</b> . <br><img src="https://habrastorage.org/storage2/6e5/c0f/989/6e5c0f9898eaa03e4d96c00441f9e9a5.png"><br>  Click on "Change" and add to the end of the line <br> <code>;Z:\usr\local\php5</code> <br> <br>  <b>Now check that it worked.</b> <br>  Create a <b>console.php</b> file in the test site directory <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($argv[<span class="hljs-number"><span class="hljs-number">0</span></span>] == basename(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>($argv[<span class="hljs-number"><span class="hljs-number">0</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">'Hello '</span></span> . $argv[<span class="hljs-number"><span class="hljs-number">1</span></span>] . <span class="hljs-string"><span class="hljs-string">'!'</span></span>;</code> </pre><br><br>  <b>Open the console</b> (you can directly from the same folder - right-click with the SHIFT jammed on an empty place and select the "Open command window" item). <br>  <b>Enter:</b> <br> <code>&gt; php console.php ‚ÄúUserName‚Äù</code> <br> <br>  <b>The console responds:</b> <br> <code>&gt; ‚ÄúHello, UserName!‚Äù</code> <br> <img src="http://habrastorage.org/storage2/0f0/25a/b6f/0f025ab6ffd7d4d815096f5ebc6315d0.png"><br><br>  <b>PHP is defeated, universal jubilation, applause, curtain.</b> <br><br><h2>  Bonus number 2. </h2><br>  All files and examples mentioned in the article in one archive <s>for free</s> <s>without SMS</s> : <a href="https://github.com/ZaiSL/local_env_windows/downloads">on github</a> <br><br>  <b><i>I hope that this material will be useful.</i></b> <b><i><br></i></b>  <b><i>I would be grateful for comments and suggestions.</i></b> </div><p>Source: <a href="https://habr.com/ru/post/150972/">https://habr.com/ru/post/150972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150966/index.html">Generating Design Ideas with a Genetic Algorithm</a></li>
<li><a href="../150967/index.html">"All day phone" - Motorola has updated the line of RAZR</a></li>
<li><a href="../150968/index.html">Russian "autopilot" for cars</a></li>
<li><a href="../150969/index.html">Using BGP when there are two channels on the Internet for selective announcement</a></li>
<li><a href="../150970/index.html">The compiler is to blame</a></li>
<li><a href="../150973/index.html">Now even the Olympic champion won't run away from the cheetah robot</a></li>
<li><a href="../150975/index.html">Yandex.Disk: admission is free</a></li>
<li><a href="../150976/index.html">Hacking the Zend Framework site from symfony fans?</a></li>
<li><a href="../150977/index.html">IBM PureSystems. New era of computing</a></li>
<li><a href="../150978/index.html">The tenth meeting of the Apple Developers Community</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
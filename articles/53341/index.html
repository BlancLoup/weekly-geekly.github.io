<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Photographing text with Gimp</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here I will offer several options for solving this problem. The main problem of photographs is the unevenness of the page illumination, when the brigh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Photographing text with Gimp</h1><div class="post__text post__text-html js-mediator-article">  Here I will offer several options for solving this problem.  The main problem of photographs is the unevenness of the page illumination, when the brightness in the center is greater and less at the edges or something like that.  It is also often necessary to increase the contrast of the text in comparison with the page.  With the usual correction of Levels, some parts of the image are illuminated, and some, on the contrary, are too dark.  All methods more or less solve these problems. <br><br>  As a material for processing, I took this page (After cutting off all unnecessary): <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/439/9e1/d01/4399e1d0110eafa3ea8d6d4d2cc57652.jpg"></a> <a name="habracut"></a><br>  The English names of the instruments are given in brackets, as well as the settings used in this case. <br><h3>  The method of dividing layers </h3><ol><li>  Create a new layer with a copy of the image. </li><li>  Blur a new Gaussian layer to a relative uniformity, when the text leaves almost no traces, but the brightness difference in the corners and center is noticeable. <br>  (Filters -&gt; Blur -&gt; Gaussian blur: Blur radius - 100) </li><li>  Set the mode of this layer to division (Layers window: Mode - Divide) </li><li>  Layer down (Layers -&gt; merge) </li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/49b/929/d98/49b929d98c809e489aac60e549eb9bfe.jpg"></a> <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/2c3/4b4/fe1/2c34b4fe106882b996bebf27c1a3cec4.jpg"></a> <br><h3>  Edge Detection Method </h3><ol><li>  Blur the background in gauss.  Pick up the delta so that the text does not erode, I think you should not set the Blur radius for more than 10. (Filters -&gt; Blur -&gt; Selective Gaussian blur: Delta - 19; Radius - 15) </li><li>  Select edges with a custom Laplace method (Filters -&gt; Edge-detect -&gt; Edge ...: Algorithm: Laplace; Amount: 2) </li><li>  Invert the color of the picture if you want. </li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/7c6/62b/b88/7c662bb885959b877439cb4e35b5e576.jpg"></a> <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/863/23d/a91/86323da915e59f8151b7c0fe17841f0f.jpg"></a> <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/a14/0a9/e0a/a140a9e0a45f258803dbb513cdf92cd9.jpg"></a> <br><h3>  Long method with separate brightness correction </h3><ol><li>  Blur the background according to Gauss.  Pick up the delta so that the text does not erode, I think you should not set the Blur radius for more than 10. (Filters -&gt; Blur -&gt; Selective Gaussian blur: Delta - 19; Radius - 15) </li><li>  Create a new layer with a copy of the image. </li><li>  Blur a new Gaussian layer to relative uniformity, when the text leaves almost no traces, but the brightness difference in the corners and center is noticeable (Filters -&gt; Blur -&gt; Gaussian blur: Blur radius - 100) (Filters -&gt; Blur -&gt; Gaussian blur: Blur radius - 100) </li><li>  Assign the mode of this layer to Brightness and set the density to 50% (Layers window: Mode - Value; Opacity: 50) </li><li>  Layer down (Layers -&gt; merge) </li><li>  Process the picture: Color -&gt; Auto -&gt; Stretch HSV </li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/c97/d05/1ed/c97d051edbce0c6efdb9cf5333e92544.jpg"></a> <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/377/bf1/2f3/377bf12f3bd20f075cb3ff3faf160b0f.jpg"></a> <br><h3>  Relative readability can be achieved with the help of the package ImageMagic </h3>  (Nothing to do with GIMP, just an alternative) <br>  convert ./1_original.jpg -colorspace gray \ (+ clone -blur 10x65535 \) -compose subtract -composite -threshold 50% ./im4.jpg <br><br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/9b4/a0a/d80/9b4a0ad80728cb9912d16c702f2a9db6.jpg"></a> <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/3e3/4d5/ef7/3e34d5ef7b746ca4d4655e270fa3e43f.jpg"></a> <br><h3>  Automation </h3>  <a href="http://murkt.org.ua/blog/">Murkt</a> figured out Python-Fu and wrote a script that can automate all this.  We write the following to the console (Filters -&gt; Python-Fu -&gt; Console): <pre> from gimpfu import *

 def textify_divide (img):
    ly2 = img.active_layer.copy ()
    img.add_layer (ly2)
    pdb.plug_in_gauss_rle (img, ly2, 100, 1, 1)
    ly2.mode = DIVIDE_MODE
    img.flatten ()

 def textify_edges (img, radius = 10, max_delta = 25, amount = 2):
    ly = pdb.gimp_image_get_active_layer (img)
    pdb.plug_in_sel_gauss (img, ly, radius, max_delta)
    pdb.plug_in_edge (img, ly, amount, 1, 5)
    pdb.gimp_invert (ly)

</pre>  Now it is possible to process all open images from the same console using the command: <pre> [textify_edges (x) for x in gimp.image_list ()]

</pre>  You can also try to use other features of Python-Fu, such as opening files, etc.: <pre> image = pdb.file_jpeg_load (filename, raw_filename)
 image = pdb.file_png_load (filename, raw_filename)
</pre></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/53341/">https://habr.com/ru/post/53341/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../53327/index.html">Warning to Webmoney users: phishers began to send a fake client program</a></li>
<li><a href="../53328/index.html">Answers on questions</a></li>
<li><a href="../53332/index.html">rWin 0.5 beta - client for rTorrent on Qt</a></li>
<li><a href="../53333/index.html">Offline Google services</a></li>
<li><a href="../53340/index.html">Run away from twitter</a></li>
<li><a href="../53345/index.html">The symbol of Ã∂achÃ∂eÃ∂rÃ∂kiÃ∂vÃ∂aÃ∂nÃ∂iÃ∂ya</a></li>
<li><a href="../53346/index.html">ARSights - Augmented Reality</a></li>
<li><a href="../53347/index.html">ASP.NET: CssClass as an alternative to client ID</a></li>
<li><a href="../53348/index.html">Change the theme for Mac OS X Leopard</a></li>
<li><a href="../53349/index.html">Why can't I upgrade to Kubuntu / Ubuntu etc</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
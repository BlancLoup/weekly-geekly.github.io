<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Translation: One year with Go</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Under the cut - the translation of the article by an experienced developer about his experience of practical use of Go. Important - the opinion of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Translation: One year with Go</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/a18/7de/a26/a187dea263874a3c8f07166c844c209e.png" align="left">  Under the cut - the translation of the article by an experienced developer about his experience of practical use of Go.  <b><font color="red">Important</font></b> - the opinion of the translator may not coincide with the opinion of the author of the article. <br><br><br><br><a name="habracut"></a><br>  So, a year has passed since I started using Go.  A week ago I deleted it from production. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I‚Äôm writing this post because over the past year, many have asked me about my impressions of working with Go, and I would like to talk about it a little more than is possible on Twitter and IRC - until the memories fade from my mind. <br><br>  So, let's talk about why I don't think Go is a useful tool: <br><br><h1>  <font color="#8e44ad">Tools</font> </h1><br>  The tools that come with Go are weird.  At first glance, many of them are not bad, but after long work, most of them begin to demonstrate their limitations.  Compared with tools for <b>C</b> or <b>Erlang,</b> they look like a not very good joke. <br><br><h4>  <font color="#e74c3c">coverage analysis</font> </h4><br>  Strictly speaking, the Go code analysis utility is a hack.  It only works with one file at a time and does this by pasting code like this: <br><br><pre><code class="go">GoCover.Count[n] = 1
</code></pre><br>
 n ‚Äî      .            :<br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="go">var GoCover = struct {
        Count     [7]uint32
        Pos       [3 * 7]uint32
        NumStmt   [7]uint16
} {
        Pos: [3 * 7]uint32{
                3, 4, 0xc0019, // [0]
                16, 16, 0x160005, // [1]
                5, 6, 0x1a0005, // [2]
                7, 8, 0x160005, // [3]
                9, 10, 0x170005, // [4]
                11, 12, 0x150005, // [5]
                13, 14, 0x160005, // [6]
        },
        NumStmt: [7]uint16{
                1, // 0
                1, // 1
                1, // 2
                1, // 3
                1, // 4
                1, // 5
                1, // 6
        },
}
</code></pre><br>
</div></div><br>
           ,            ‚Äî     .        ,             .              ,      .<br>
<br>
<h4><font color="#e74c3c"> </font></h4><br>
        ‚Äî  ,      .            .         ¬´ ¬ª (  1 ),         .          ,    .    <b>benchmark.go</b>:<br>
<br>
<pre><code class="go">func (b *B) nsPerOp() int64 {
    if b.N &lt;= 0 {
        return 0
    }
    return b.duration.Nanoseconds() / int64(b.N)
}
</code></pre><br>
     ,          ,      .<br>
<br>
<h4><font color="#e74c3c">  go vet</font></h4><br>
     Go ‚Äî   .    ,      ,   ,       ‚Äî    <b>go vet</b>.                 <b>printf</b>,      <b>go vet</b>.  ,      :   <b>1.3</b>   ,    <b>1.2</b>.<br>
<br>
<h4><font color="#e74c3c">go get</font></h4><br>
 go     get,      ,          .<br>
<br>
<h4><font color="#e74c3c">$GOPATH</font></h4><br>
  ,      .               ,     .     <b>$GOPATH</b>   ,    ,    .<br>
<br>
<h4><font color="#e74c3c">Go race detector</font></h4><br>
  ‚Äî  .     .    ,        (FreeBSD, -?)    goroutine  8192.  ,     race condition ‚Äî   ,   race detector  .<br>
<br>
<h1><font color="#8e44ad"></font></h1><br>
<h4><font color="#e74c3c">Channels/mutexes</font></h4><br>
   .      production    ,        daemontools      .<br>
<br>
<h4><font color="#e74c3c"> </font></h4><br>
 go ,    goroutine      stdout.        .  ,      ,   ‚Äòevacuation not done in time‚Äô  ‚Äòfreelist empty‚Äô.              google,           .<br>
<br>
<h4><font color="#e74c3c"> runtime</font></h4><br>
<br>
 ,   Go     ¬´ ¬ª.   <b>gdb</b>,        .<br>
<br>
<h1><font color="#8e44ad"></font></h1><br>
        Go.            <b>interface{}</b>              .  ,                    .     <b>C</b>   ,       ?<br>
<br>
  ,         Go ( <b>C</b>   ).            ,   ,       .      ,     ?<br>
<br>
   <b>byte[]</b>  <b>string</b>    /. ,        ,            .<br>
<br>
   <b>[:],...</b>  <b>append</b>.   :<br>
<br>
<pre><code class="go">iv = append(iv, truncatedIv[:]...)
</code></pre><br>
    ,   <b>append</b>        ,        . ,   <b>realloc</b>.<br>
<br>
<h1><font color="#8e44ad"> </font></h1><br>
   ,  ,          OpenSSL,     .        ‚Ä¶        ,       ¬´  X¬ª.<br>
<br>
    'net'.      ,        .    <b>IP_RECVPKTINFO</b>?   'syscall',       POSIX  ,   .       ,     'syscall':<br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><pre><code class="go">fd, err := syscall.Socket(syscall.AF_INET6, syscall.SOCK_DGRAM, 0)
if err != nil {
    rlog.Fatal("failed to create socket", err.Error())
}
rlog.Debug("socket fd is %d\n", fd)

err = syscall.SetsockoptInt(fd, syscall.IPPROTO_IPV6, syscall.IPV6_RECVPKTINFO, 1)
if err != nil {
    rlog.Fatal("unable to set IPV6_RECVPKTINFO", err.Error())
}

err = syscall.SetsockoptInt(fd, syscall.IPPROTO_IPV6, syscall.IPV6_V6ONLY, 1)
if err != nil {
    rlog.Fatal("unable to set IPV6_V6ONLY", err.Error())
}

addr := new(syscall.SockaddrInet6)
addr.Port = UDPPort

rlog.Notice("UDP listen port is %d", addr.Port)

err = syscall.Bind(fd, addr)
if err != nil {
    rlog.Fatal("bind error ", err.Error())
}
</code></pre><br>
</div></div><br>
     ,    <b>byte[]</b>   'syscall' .    <b>C</b>   Go ‚Äî   -  .<br>
<br>
,        polling ?   ,              .<br>
<br>
<h1><font color="#8e44ad"></font></h1><br>
     Go.     ,   C/D/Rust.        ,    Erlang  Haskell.   Go,    ‚Äî    ,          .   ,      ¬´¬ª  . ,     Ruby/Python/Java , ,   ,      Go.    ,  Go  ¬´ Java¬ª,      .       Ruby/Python/Java, , Go   ‚Äî           .        . LISP   ¬´  ¬ª, ¬´C¬ª       , Ruby       , Erlang     , Haskell         , Rust         .     ,   -,  Go.</div><p>Source: <a href="https://habr.com/ru/post/268411/">https://habr.com/ru/post/268411/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268399/index.html">4 reasons to risk moving to software-defined data center ‚Äì y</a></li>
<li><a href="../268401/index.html">Natural Language Programming Instructions or Intentional Programming</a></li>
<li><a href="../268403/index.html">HackerSIM: small explanation (comment)</a></li>
<li><a href="../268405/index.html">Fractal bush from beginner for beginners</a></li>
<li><a href="../268409/index.html">Add system call. Part 4 and last</a></li>
<li><a href="../268413/index.html">Three days that shook us in 2013</a></li>
<li><a href="../268417/index.html">ANVE.ru - best friend of suppliers and dealers</a></li>
<li><a href="../268419/index.html">We received GOLD for the operation of the data center TIER III - the final progress after T-III for the project and T-III for the finished object</a></li>
<li><a href="../268421/index.html">USB killer v2.0</a></li>
<li><a href="../268423/index.html">About UEFI security, part final</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Beetle modeling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As I listened to the podcast , which casually said about writing a shader for a beetle (25 minutes, 35 seconds) imitating a rainbow surface (I don‚Äôt k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Beetle modeling</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/079/904/213/07990421384643e483379460c6ae22d8.png"><br><br>  As I listened to the <a href="http://galyonkin.com/2014/03/02/68-maksim-aristov-iz-valve-o-3d-modelirovanii/">podcast</a> , which casually said about writing a shader for a beetle (25 minutes, 35 seconds) imitating a rainbow surface (I don‚Äôt know how to say it in Russian, but in English there is a term - iridescence).  I looked at <a href="http://dota2.ru/heroes/nyx-assassin/">this</a> character and I wanted to write my shader, but imitating a more real surface of chitin, I will tell about it in the next article. <br>  However, there was a problem - I did not have a suitable beetle model. <br><a name="habracut"></a><br>  At first, I looked for models on the Internet, but the free ones didn‚Äôt like the quality, and the paid ones had a too high price (~ $ 50), all the more, the required model did not exist at all.  In general, I decided to make my beetle, so I will describe the pipeline that I compiled for myself. <br><br><ol><li>  Reference Search </li><li>  High poly styling </li><li>  Low poly retopology </li><li>  Creating texture coordinates (sweep) </li><li>  Baking normals </li><li>  Baking ambient occlusion </li><li>  Adding an offset map to determine the color in the shader (more on that later) </li></ol><br>  Of course, the pipelines may be different, for example, such items as ‚Äúconcept creation‚Äù or ‚Äúcharacter rigging‚Äù could be present in this.  They are not there, because in the role of the concept I had refs of real beetles and the model was not planned to be animated.  In more serious models, there is also an intermediate retopology of high poly models.  For different tasks in different companies use your pipeline. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  References </h4><br>  Of all the beetles, I liked the color of chrysolina most of all, or rather the subspecies <a href="http://en.wikipedia.org/wiki/Chrysolina_herbacea">chrysolina herbacea</a> .  This beetle has a beautiful, bright rainbow color, see for yourself: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/17e/353/7fb/17e3537fba6348d7af31a4a428c46de3.jpg"></div><br><br>  Therefore, I googled up as many pictures as possible and merged them all into one.  Also, models of other beetles can be useful for a better understanding of the structure.  The result was a picture that loomed on the second monitor almost the entire time the bug was created (clickable): <br> <a href=""><img src="https://habrastorage.org/files/91f/b8f/be2/91fb8fbe2896492c84c842ea7bea62e6.png"></a> <br><br><h4>  High poly styling </h4><br>  Basically, I made sculpting in ZBrush, I started with the shells, each object sculpted from the sphere: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2c1/c5c/e47/2c1c5ce47bc0419b9c11b8a8960efaaf.png"></div><br><br>  In the process of sculpturing, you may encounter one problem - pressing a part on the surface - it is squeezed out on the other hand, which is sometimes inconvenient or not necessary at all. <br><br>  The Lazy Mouse option in the Stroke menu can also be useful - if you turn it on, the brush tracking will be averaged, thus avoiding unnecessary jitter and drawing smoother lines.  The LazyRadius parameter changes the degree of smoothing. <br><br>  In ZBrush there is one cool option that helps to avoid some problems with the grid - DynaMesh.  In fact, it rebuilds the modified section of the grid, adapting it to the geometry.  Some people dislike it, because after applying this modifier, the grid turns ugly, sometimes it breaks the geometry slightly, but for my needs it came up to me very opportunely.  An alternative variant of this option is to gradually increase the subdivision of the model and occasionally produce a retopology. <br><br><img src="https://habrastorage.org/files/d4c/b8a/d7a/d4cb8ad7a9f54a3587af9f0a978c56f4.png"><br>  <i>BackfaceMask, Lazy Mouse and DynaMesh</i> <br><br>  Gradually added new parts and increased detail: <br><br><img src="https://habrastorage.org/files/62c/777/79a/62c77779ac444b3790dc5b2780b1565d.png"><br><br>  We should also tell about the eyes.  Beetles have faceted eyes, they consist of many hemispheres, you can see that they are arranged, as it were, on a hexagonal grid: <br><br><img src="https://habrastorage.org/files/8a4/5d3/947/8a45d3947a9a4ad3bf873a219b847e49.png"><br><br>  It seemed to me that the easiest way would be to model them in 3D Max, I did them like this: <br>  you first need to create a GeoSphere, set the desired number of segments and convert to an editable polygonal mesh: <br><br><img src="https://habrastorage.org/files/e5e/dff/3e7/e5edff3e759c4f7b891ea8865b791519.png"><br><br>  then select all the edges and click on the Chamfer button, or rather the button next to it - the fields with settings will open.  We select the parameters to make it approximately as in the screenshot below: <br><br><img src="https://habrastorage.org/files/c74/104/cb6/c74104cb6b1e47bb9a03705d053932bc.png"><br><br>  Now select all the vertices and select Weld, set up so that all the vertices at the nodes merge into one: <br><br><img src="https://habrastorage.org/files/b10/c08/47e/b10c0847e453476b9cb2ac45921b5140.png"><br><br>  select all the polygons and apply Bevel, squeeze them to about the height equal to the size of the cell, and slightly expand: <br><br><img src="https://habrastorage.org/files/f0b/490/fd9/f0b490fd9ecb4caca8548ce8da72ac7e.png"><br><br>  click once on the Tesselate button to add polygons: <br><br><img src="https://habrastorage.org/files/001/a02/b12/001a02b1243045b18ab4923303a6c136.png"><br><br>  and finally, we use the TurboSmooth modifier, two iterations were enough for me to get a more or less smoothed version: <br><br><img src="https://habrastorage.org/files/c49/2eb/95a/c492eb95a51f409fbdc65128d60dba6d.png"><br><br>  In fact, the grid turned out to be not quite hexagonal, there are segments consisting of five edges, not six.  This is due to the specifics of the construction of this type of sphere.  But for the beetle will do. <br><br><h4>  Low poly retopology </h4><br>  Despite the fact that ZBrush has its own tools for retopology, I spent it in TopoGun, since for me there it is more convenient to carry out it by an order of magnitude.  There is a very convenient tool for smoothing - you can make a rather large mesh, then apply it.  This grid will be divided into a given number of subdivs, with the new vertices located on the high-poly model: <br><br><img src="https://habrastorage.org/files/89b/144/a40/89b144a408424a01b236323cab98b85d.png"><br><br>  Again, separate eyes - since these are essentially spheres, then as a low poly mesh I took ordinary spheres and cut off the invisible part from them. <br>  As a result of retopology, a model of 60k polygons was obtained.  This, of course, is not quite low poly, but for a scene consisting of only one object it is normal. <br><br><img src="https://habrastorage.org/files/d46/bf6/f31/d46bf6f316a147178b5124331878a16e.png"><br>  <i>low poly model</i> <br><br><h4>  Creating texture coordinates </h4><br>  I did the scan in UVLayout - a fairly convenient program based on hot keys, works quickly and clearly, especially like the way it shows the stretching / compression of polygons in color. <br><br><img src="https://habrastorage.org/files/396/725/fda/396725fda4e941398b45c66e8180e01b.png"><br><br>  When cutting a model, make as few seams as possible, but at the same time try not to stretch the polygons too much.  Since I will not have a diffuse texture, the seams can appear only in relief (with normal mapping), they will not be visible on the displacement map and occluded.  I was more concerned about the absence of distortions of polygons, so there were quite a few seams. <br><br>  When a sweep was ready for all models, I imported them into 3D Max to adjust the relative sweep size.  This is quite an important step, as it allows you to increase the detail of critical areas without increasing the texture.  So, for example, I deliberately reduced the sweep of the belly of a beetle, but on the contrary I increased the heads.  In the end, I used the standard Unwrap UVW modifier packer, and I got this scan of the entire model: <br><br><img src="https://habrastorage.org/files/f05/fd4/45a/f05fd445a09348349977cd179b8dfe9e.png"><br><br>  The packer does not pack very optimally, and besides, I left a rather large padding so that the neighboring segments did not interfere with each other on small mips. <br><br><h4>  Baking normals </h4><br>  The normal map was in xNormal - a rather peculiar program with an ‚Äúinteresting‚Äù interface.  Offtopic, in general, to be honestly surprised by the fact that all programs related to graphics have their own unique interface, which is sometimes difficult to figure out even with instructions that you can still find.  Although if you use it for some time, then you get used to it and it seems even convenient.  But this is just my opinion. <br><br><img src="https://habrastorage.org/files/cdf/dd5/466/cdfdd54661b140738034dfe7b9e9510e.png"><br><br>  Since the model consists of several parts - it was necessary to bake each separately, if you try to calculate them all at once - artifacts may arise.  The size of the texture chose 4096x4096, for a close-up model just right, if problems arise, you can always reduce it two or more times. <br><br><img src="https://habrastorage.org/files/67e/a72/554/67ea725545cc42379eb1db7849e136d3.png"><br><br><h4>  Baking ambient occlusion </h4><br>  AO calculated in Maya with the render engine of Mental Ray (in 3D Max there were some problems with it, and xNormal with a complete list of models was mowing a bit, counted for a rather long time and in itself has few settings): <br><br><img src="https://habrastorage.org/files/6e4/1f9/abc/6e41f9abcecf488ba42dcb21b42242a5.png"><br><br><h4>  Add displacement map </h4><br>  If you look closely, it is noticeable that the real beetle has places that differ in color, something like stains on the head and shell: <br><br><img src="https://habrastorage.org/files/927/766/9d4/9277669d4b4a4852b47f4549fac9e78b.png"><br><br>  To designate these places, I manually painted black and white spots on a separate layer in the MudBox.  Afterwards, I will use them in the shader to shift one of the color components: <br><br><img src="https://habrastorage.org/files/03f/841/996/03f84199621c4d47817f62f75dcc52c0.png"><br><br>  The result was three cards, all of them can be packaged in one texture as follows: <br><ul><li>  Red and Green Channels - Normal Map </li><li>  Blue channel - ambient occlusion </li><li>  Alpha Channel - Offset Map </li></ul><br>  The final map began to look like this: <br><br><img src="https://habrastorage.org/files/fcc/4f2/7bb/fcc4f27bb22147c8b795f9202e5d8321.png"><br><br>  In the next article I will explain how to apply this card to the model.  By the way, <a href="http://habrahabr.ru/post/239085/">here is the</a> previous one. <br>  The model turned out to be rather clumsy, the grid is not very beautiful, but on the other hand I am not a modeler and not an artist, I'm just learning, the following models will hopefully be better.  I hope to hear criticism in the comments from real modelers.  But in general, the essence of the article is not to show how to model, and what tools exist for this, what the process of creating a static model might look like and prepare for use in the game engine, I think it is useful for a programmer to know in game dev. <br><br><img src="https://habrastorage.org/files/274/377/bdb/274377bdbb7747c8b27d64f2b513bc92.png"><br><br><h4>  Links </h4><br><ul><li>  <a href="http://www.turbosquid.com/3d-models/c4d-scarabaeus-included/349707">www.turbosquid.com/3d-models/c4d-scarabaeus-included/349707</a> - here you can find many different paid and free models. </li><li>  <a href="http://art-assorty.ru/202-samye-krasivye-zhuki.html">art-assorty.ru/202-samye-krasivye-zhuki.html</a> - just beautiful beetles </li><li>  <a href="http://www.uvlayout.com/doc/User_Guide:_Hotkeys">http://www.uvlayout.com/doc/User_Guide:_Hotkeys</a> - hotkeys for UVLayout </li></ul></div><p>Source: <a href="https://habr.com/ru/post/239557/">https://habr.com/ru/post/239557/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239543/index.html">The use of neural networks in robotics: prospects and advantages</a></li>
<li><a href="../239545/index.html">Making an HTML5 quest: creating a character and basic animation</a></li>
<li><a href="../239549/index.html">Demonstration of vulnerabilities in Liqpay</a></li>
<li><a href="../239553/index.html">SAP security. Do you regularly install updates?</a></li>
<li><a href="../239555/index.html">Intel¬Æ Parallel Studio XE 2015 - Talk About New Names and "Chips"</a></li>
<li><a href="../239559/index.html">IBM invites to the conference "Infrastructure 2014"</a></li>
<li><a href="../239563/index.html">As 3 people without investment "magic button" for the stores did</a></li>
<li><a href="../239567/index.html">Hacking using search, inattention and my accomplice GitHub</a></li>
<li><a href="../239571/index.html">Microservices - MIF on C ++</a></li>
<li><a href="../239573/index.html">Automated template for front-end projects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
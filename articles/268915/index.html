<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Accordion about architecture and localization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the past six months, there have been a lot of articles on how to write a cool framework with a volume of ~ 100 lines. A tackle is a story about h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Accordion about architecture and localization</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bcc/dd4/c6b/bccdd4c6bbff745dbf368a9d575b839e.png" align="left" alt="JavaScript Localization" title="Javascript localization">  Over the past six months, there have been a lot of articles on how to write a cool framework with a volume of ~ 100 lines.  A tackle is a story about how to write ~ 2000 lines and no framework. <br><a name="habracut"></a><br><h2>  Background </h2><br>  Before turning to the technical part, I would like to get acquainted with the history of the issue.  To the question ‚Äúwhy?‚Äù, <a href="http://habrahabr.ru/company/alconost/blog/203070/">This</a> article gives a good answer.  Anton Nemtsev spoke on DUMP in Yekaterinburg on what <a href="https://vimeo.com/90835630">localization and internalization are</a> .  Alexander Gerasimov gave a <a href="https://www.youtube.com/watch%3Fv%3DojOgFC3r0jE">talk</a> on typography in Minsk at Frontend Dev Conf.  Alexander Tevosyan from Badoo spoke about the <a href="http://www.youtube.com/watch%3Fv%3DZev8zw24HKU">layout of</a> multilingual sites on MoscowJS, and his colleague, Gleb Deikalo, wrote about <a href="http://habrahabr.ru/company/badoo/blog/223767/">multi-step translation</a> .  How to write the texts themselves so that they were easy to translate was already discussed in the report of <a href="https://events.yandex.ru/lib/talks/2497/">Christina Yaroshevich</a> on Hyperbaton at the conference of the Translation Forum Russia, moreover, <a href="http://habrahabr.ru/post/165705/">Pavel Doronin</a> wrote on a similar topic. <br><br><div class="spoiler">  <b class="spoiler_title">What is Hyperbaton</b> <div class="spoiler_text">  Hyperbaton is a <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B8%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B1%25D0%25B0%25D1%2582%25D0%25BE%25D0%25BD">figure of speech</a> .  At first, I wondered for a long time why the conference was called a <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B0%25D1%2582%25D0%25BE%25D0%25BD">loaf</a> .  In general, I recommend watching the reports that were published.  Many interesting and for non-linguists.  For example, <a href="https://events.yandex.ru/lib/talks/2844/">Maxim Ilyakhov</a> <br></div></div><br>  On Habr√© you can find a lot of articles on various topics related to localization.  Large companies like Alconost or ABBYY write them in batches. <br><br><div class="spoiler">  <b class="spoiler_title">Here are some particularly helpful.</b> <div class="spoiler_text"><ul><li>  Various TOP10 languages: <br><ul><li>  <a href="http://habrahabr.ru/company/alconost/blog/231511/">for all</a> ; </li><li>  <a href="http://habrahabr.ru/company/alconost/blog/244325/">for Google Play</a> ; </li></ul><br></li><li>  <a href="http://habrahabr.ru/company/alconost/blog/255373/">Screenshots for users and translators</a> </li><li>  <a href="http://habrahabr.ru/company/alconost/blog/214567/">Pain and difficulty locating</a> </li><li>  <a href="http://habrahabr.ru/company/abbyy/blog/256159/">Arabic</a> <a href="http://habrahabr.ru/company/abbyy/blog/251579/">localization</a> </li><li>  <a href="http://habrahabr.ru/company/abbyy/blog/168653/">Resource Preparation</a> </li><li>  <a href="http://habrahabr.ru/company/alconost/blog/232991/">About layout and sites</a> </li><li>  <a href="http://habrahabr.ru/company/alconost/blog/250061/">About RTL</a> </li><li>  <a href="http://habrahabr.ru/post/229031/">Overview of online localization services</a> </li></ul><br></div></div><br>  The articles and reports described above answer many questions.  But the question on the organization of the code is described only partially.  And yet, yes, in my book Surrealism on JavaScript, I partially described the localization logic and its work with the DOM.  But it is time to write a few more words about the code and its general structure. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Introduction </h2><br>  <b>Why on the client?</b> <br><br>  It all depends on the task that we solve.  If we are talking about a site, then the server is better.  If this application, it is better to deploy the infrastructure on the client.  On the one hand, the client can work offline.  On the other hand, we will reduce server requests if clients use local files.  In addition, sometimes we do not have a server, or the operating time of a server developer is so expensive that it does not make sense to spend it for this task. <br><br>  <b>Why on javascript?</b> <br><br>  As frontend developers, we can still choose HTML or CSS.  How to use HTML, I personally can not imagine.  How to make CSS work as part of the localization task was written by Anton Lunev ( <a href="http://habrahabr.ru/post/121075/">http://habrahabr.ru/post/121075/</a> ).  But both in the first and in the second case, we lose the flexibility and opportunities that JavaScript provides us. <br><br>  <b>What to eat from the finished?</b> <br><br>  Apart from the various functions in 30 lines with stackoverflow, and the internal tools of the guys from Badoo, Yandex, Alconost, etc., at the moment there are several quite tolerable solutions: <br><br><ul><li>  angular-translate </li><li>  i18next ( <a href="http://i18next.com/">http://i18next.com/</a> ) </li><li>  l20n ( <a href="http://l20n.org/">http://l20n.org/</a> ) </li><li>  jquery.localize.js ( <a href="https://github.com/coderifous/jquery-localize">https://github.com/code /</a> code / jquery-localize) </li></ul><br><h2>  Accordion about storing translations </h2><br>  We have variables in which translation of phrases for a specific language is recorded.  Further, throughout the application, instead of using the phrases themselves, the corresponding variables are substituted.  Thus, by changing the value of variables, we can change the language of the entire application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/324/b14/9b1/324b149b19392afe8902cdd10eb96e3f.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  For example, in the game ‚ÄúJuices‚Äù guys took and recorded translations of all phrases into separate variables ( <s>VARIABLES KARL! It's good that at least not global!</s> ).  Working with variables can justify itself well in two cases: <br><br><ul><li>  we have tight hardware restrictions (for example, we program some cheap video set-top boxes); </li><li>  we have a strict certification system (for example, we are writing software for gaming machines); </li></ul><br>  In the first case, our resources are cut, and we have to save on everything in order to meet the memory limitations.  It is not always possible to develop a good logical architecture in such conditions. <br><br>  In the second case, we are trying to eliminate even the possibility of accidentally switching the parameters.  If you look at the same slot machines, then all the probabilities of losing are strictly regulated by the legislation of a particular country.  Therefore, the case when in Russia there are automata for the United States, and in Bulgaria - automata for Hungary, is excluded. <br><br>  The game "Squishy" works in VKontakte and does not fall under any of the restrictions specified above.  By her example, she clearly shows that the quality of the code and architecture of the localization system plays no role whatsoever.  Yes, perhaps, it will be inconvenient for someone to refactor code or add new features.  Yes, perhaps this approach will lead to more bugs.  But the fact is a fact, a product: in production, it brings money, it suits everyone. <br><br>  It‚Äôs not very convenient to store each phrase in a new variable, and the translations themselves are usually transferred to a separate configuration file.  Therefore, the developers of most localization systems prefer to use popular storage formats for information, such as JSON and XML.  Most Java and Python developers usually prefer to work with XML, and front-end vendors with JSON.  Here, who is used to anything.  Standard formats make it easy to use the same translations for completely different localization systems, both in the context of a single programming language and in the context of completely different languages. <br><br>  There are quite a large number of people who went the other way.  So Ruby`ists like to use YML, Flashers prefer XLIFF, C  ªishniki - PO format, for example, guys from l20n.org have come up with their own format, with tags and attributes.  Let's take a quick look at them. <br><br>  <b>YML</b> <br><br>  YML is like XML, only human-readable.  You can also store RegExp in it explicitly. <br><br>  It was: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">translation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hello</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hello</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">translation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  It became: <br><br><pre> <code class="hljs objectivec">translation: hello: <span class="hljs-string"><span class="hljs-string">", !"</span></span></code> </pre><br>  <b>PO</b> <br><br>  It is used mainly for the localization of free software, since  it's simple.  The developer wraps all the lines in some function, for example gettext (), and then these lines are the key for translation.  If there is no translation, the source string is substituted. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msgid</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, World!"</span></span> msgstr <span class="hljs-string"><span class="hljs-string">", !"</span></span></code> </pre><br>  Since  None of the above formats is native and convenient for front-tenders, we go further.  An example of a file with translations in the game "Valley of sweets": <br><br><img src="https://habrastorage.org/getpro/habr/post_images/483/3eb/0e6/4833eb0e695a947b42d4eea2a70ec950.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  When using JSON in JavaScript, some localization systems do not support nested properties.  An example of such a file you can see above.  This entails an unobvious translation structure.  Most localization systems do not have such problems, and the above code can be easily converted. <br><br>  It was: <br><br><pre> <code class="hljs objectivec">{ ... <span class="hljs-string"><span class="hljs-string">"inviteFriend"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"inviteFriend2Lines"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;br&gt; "</span></span>, <span class="hljs-string"><span class="hljs-string">"InviteFriend2Lines"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;br&gt; "</span></span>, ... }</code> </pre> <br>  It became: <br><br><pre> <code class="hljs objectivec">{ ... <span class="hljs-string"><span class="hljs-string">"invite"</span></span>: { <span class="hljs-string"><span class="hljs-string">"friends"</span></span>: { <span class="hljs-string"><span class="hljs-string">"line1"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"line2"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;br&gt; "</span></span> }, <span class="hljs-string"><span class="hljs-string">"friend"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;br&gt; "</span></span>, ... }</code> </pre> <br>  With this approach, the structure of the translation becomes more apparent.  Phrase identifiers take the form of ‚Äúinvite.friends‚Äù and are pulled out of the JSON object by a function like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProperty</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">json, key</span></span></span><span class="hljs-function">) </span></span>{ key = key.split(<span class="hljs-regexp"><span class="hljs-regexp">/[\.]+/gim</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, l = key.length; i &lt; l; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> propertyName = key[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!json[propertyName]) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } json = json[propertyName]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> json; }</code> </pre> <br>  The next step is to try to reflect cases in this structure, since  sometimes there is a need to withdraw the numerals.  The classic example is ‚Äú2 apples <i>ka</i> ‚Äù, ‚Äú1 apple <i>ko</i> ‚Äù, ‚Äúno apple <i>k</i> ‚Äù.  The l20n guys already mentioned above solved the problem like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">brandShortName</span></span></span><span class="hljs-tag"> { *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">nominative:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Aurora</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">genitive:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Aurore</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dative:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Aurori</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">accusative:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Auroro</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">locative:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Aurori</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">instrumental:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Auroro</span></span></span><span class="hljs-tag">" }&gt;</span></span></code> </pre> <br>  And those who use Angular, write this: <br><br><pre> <code class="hljs django"><span class="xml"></span><span class="hljs-template-variable"><span class="xml"></span><span class="hljs-template-variable">{{numMessages, plural, one {   } two {   } other {   } }}</span></span><span class="xml"></span><span class="xml"></span></code> </pre> <br>  I, for example, refused at all from the idea of ‚Äã‚Äãnumerals and cases, because  this: <br><br><ul><li>  I have never come across personally in practice; </li><li>  It will greatly complicate the system and badly affect the automation; </li><li>  Sharply increase the probability of error; </li><li>  Increase the quality requirements and the number of required translations; </li><li>  Contradicts the rules of "easy localization" (see reports Yaroshevich and Ilyakhov); </li><li>  As a rule, it does not play a decisive role in the interface and is easily managed by changing the UI; </li></ul><br>  The classic problem with apples can be solved by pictograms.  Here are some examples: <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/example_6.png" alt="JavaScript Localization" title="Javascript localization"><br>  <i>Creating units in Red Alert</i> <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/example_5.png" alt="JavaScript Localization" title="Javascript localization"><br>  <i>MineCraft inventory</i> <br><br>  Perhaps this is the specifics of the game, but in conventional SPA applications (admin panels, utilities, etc.), it was also always possible to display such counters correctly and without cases. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/example_3.png" alt="JavaScript Localization" title="Javascript localization"><br>  <i>Fast display of statistics in the banner system</i> <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/example_2.png" alt="JavaScript Localization" title="Javascript localization"><br>  <i>In the game "CosmoSim" parameters are shown by numbers and pictograms.</i> <br><br>  Of course, there are many cases where, whether we like it or not, the problem must be solved.  If you have just such a case, then perhaps an article by <a href="http://habrahabr.ru/post/165705/">Pavel Doronin</a> or a crutch from "...". Replace (/.../ gim, "...") will help you; <br><br>  <b>What is the problem with the templates?</b> <br><br>  The problem is that any option in which we come up with a template immediately becomes not universal, because  there are no universal templates.  If we automate this option, then we have all the lines, regardless of the content, will be processed by regular search for variables.  This is a lot of extra work.  If we bypass this and initially mark lines with a pattern in the data, then we will increase the amount of data that we need to store.  Thus, working with templates is always a mystery with two chairs: ‚Äúcorrectness of the translation‚Äù vs.  "Simplicity and versatility of the system." <br><br><h2>  Accordion about HTML </h2><br>  We have already discussed the storage of translations, it's time to go to HTML.  Almost everything that is written below was already in the book ‚ÄúSurrealism on JavaScript‚Äù, and what was not there, was in Nemtsv and Tevosyan. <br><br>  If we talk about the layout of the HTML-page, then we need to somehow mark the DOM-elements, the text within which needs translation.  As a rule, developers assign various attributes to elements, and write the translation id in this attribute.  For example: <br><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- angular-translate --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">translate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hello"</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- i18next (http://i18next.com/) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-i18n</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hello"</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- l20n (http://l20n.org/) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-l10n-id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hello"</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- jquery.localize.js (https://github.com/coderifous/jquery-localize) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-localize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hello"</span></span></span><span class="hljs-tag">&gt;</span></span>, !<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  But!  Few people analyze the translation object received by the identifier and the tag to which it will be applied.  If this is not done, then tasks like: <br><br><ul><li>  change the value and placeholder of the input field; </li><li>  change picture; </li><li>  change plugin font; </li></ul><br>  etc.  they will be solved with crutches, or they will not be solved at all.  An example of a situation in which you may feel discomfort by choosing an ill-conceived system may be the following code: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scheme_ru.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"    2114"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">translate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"id__"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">translate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"id__"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"css/ru.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">translate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"id__"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  In our localization system, we distinguish between the type of translation received and the type of HTML element.  Thus, having received the translation of the type string ‚Äúscheme_en.png‚Äù and having the HTML IMG element, we can assume that, most likely, the src attribute needs to be changed.  If we work with the INPUT element, then, most likely, we need to translate the placeholder attribute, and the LINK type, respectively, does the href attribute change, if no other parameters are specified.  In addition, in situations where the rules for working with an element are not specified or ambiguous, we use translations of the type ‚Äúobject‚Äù and, by iterating through its properties, assign a value to the same-name attribute of the tag we work with.  Consider a translation for the examples given above: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"id__"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"scheme_uk.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alt"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"  —ñ  2114"</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">"id__"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"placeholder"</span></span>: <span class="hljs-string"><span class="hljs-string">"—ñ  "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"id__"</span></span>: <span class="hljs-string"><span class="hljs-string">"css/ua.css"</span></span> }</code> </pre> <br>  Having the opportunity to change the attributes of tags, we smoothly proceed to solving the problem of changing the interface for different national groups.  As has already been said more than once: ‚Äú- Localization is not only the translation of texts, but also the adaptation of the product, to the cultural characteristics of a particular country‚Äù.  Therefore, we need the ability to automatically switch styles and change images. <br><br>  <b>A little pain</b> <br><br>  Repeatedly in the comments, and articles, I heard the opinion that the flags of countries should not be displayed, and icons.  If a person does not know something, he will always turn on the English and figure it out.  Strongly disagree with this point of view.  The fact is that I know the bad English.  A bad translation is much better for me than its absence.  And like me very much. <br><br>  Suppose there is exactly the same guy in Georgia or Israel.  This is the usual average guy of this country.  He will look at the English language in the same way as you speak Georgian or Yiddish.  Below is a screenshot of a small HTML game.  If it were not for the icons on the buttons, from what attempt would you get into the menu of switching languages?  If languages ‚Äã‚Äãwere not accompanied by flags, how long and painful would you be wandering around a skisk of 50 languages? <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_g_1.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  <b>Mirror do not forget</b> <br><br>  This has already been said a lot, so nothing to add.  Have you made an element?  Do not forget to attach rtl.css to it (this will help <a href="https://github.com/badoo/rtl-css">rtl-css</a> ).  List all rtl in the localization system.  She needs to know in which case you need to connect them. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/local_2.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  For example: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">LanguageApplication</span></span>({ <span class="hljs-attribute"><span class="hljs-attribute">rightRules</span></span>: [ <span class="hljs-string"><span class="hljs-string">"module/button/button__right.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"module/popup_text/popup_text__right.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"module/progress_bar/progress_bar_right.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"module/popup_window/popup_window__right.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"module/popup_window/popup_window__animation_elements_right.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"js/applications/language/language__right.css"</span></span>, <span class="hljs-string"><span class="hljs-string">"css/right.css"</span></span> ] });</code> </pre><br><h2>  Accordion Pro Architecture </h2><br>  Now that we have briefly described the possible formats for storing translations and poked a bit in HTML, we can add a little pain :) Why write your localization system when there are at least five ready-made and widely used solutions on the market?  Good question, let's see how localization works in general. <br><br>  We have two files: Russian and English.  By User-Agent, we determine the user's language and connect either the first or the second. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/6.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  Simple task, everything is beautiful and clear.  Any localization system shows you a demo that works on this principle.  But we had another.  Several mobile portals were assembled from the same modules.  The portals were similar, but some sections were different.  We sold games on one, books on the other, and you could buy a tune on both.  There were various online tournaments and championships.  Some were held only in Russia, others throughout the CIS.  In order not to produce resources, the translation was divided into several files.  For each specific mobile portal, the combination of these translations was different.  Since  the number of sections in the Russian and English versions could not coincide (and in half of the cases did not coincide), the number of translations in one combination also varied from language to language within even one portal. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/7.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  What do we see in the diagram?  A bundle of files.  And for each pack of files there should be a configuration file that describes the number, order and version of the necessary translations in the assembly. <br><br><img src="http://1450830847298292422667" alt="JavaScript Localization" title="Javascript localization"><br><br>  "Fine!  Now everything is as it should be! ‚Äù- I thought at that moment.  But, as you may have guessed, this was only the beginning of the journey.  After half a year, I began work on the application of psychological tests.  Everything is pretty trite: choose a test, answer questions, publish your psychological breast size on the wall.  All is good, but in Russia such tests are already complete.  But in some Czech Republic or Croatia is not.  They have less population and they also have less programmers.  Small market is not attractive for large players.  Therefore, you can write ‚Äúthe best test‚Äù for Russia and try to win ~ 146 million people, or the same for Croatia, where ~ 4 million people live.  Looking ahead to say that the project failed, but at the development stage, it was not yet obvious. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/example_4.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  What do we have?  Approximately 30 tests at the time of publication of the application.  Each test is an introduction, then about 10 questions and at least three conclusions.  All this is multiplied into three languages.  Total: 30 * (1 + 10 + 3) * 3 = 90 translations with a complex structure, no less than 2000 characters.  If the application ‚Äúshoots‚Äù, then the number of tests will increase by two, three times, and the number of translations will be multiplied by at least five.  Even if the user will not pass all the tests in all languages, we must remember that we have a one-page application.  And this application slowly and consistently eats memory, and with each new test it disappears. <br><br>  What flies with the dough?  A lot of different files arrive with the dough.  One of them is the translation configuration.  It describes all the languages ‚Äã‚Äãin which this test is available.  In the same place, addresses are written from where the relevant translations should be shipped. <br><br>  Since  our application consists of modules, it is quite obvious that the interface translation is separate, and the translation of each test is separate.  As mentioned above, this gives us the opportunity to reuse resources. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/9.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  Look, in the picture you can see how the ‚Äútest translation‚Äù package arrived to the ‚Äúinterface translation‚Äù package.  What does the localization system do?  That's right, it combines two configurations, and gets a third.  And then, taking into account the final config, begins to think about what transfers she now needs.  When she thinks out everything and loads it, she will again combine the result, receiving a single JSON at the output.  That is why JSON ªu will form the final translation of phrases. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/10.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  It's time to smoke and ‚Äúsay hello‚Äù to Gleb Deikalo, who, as mentioned above, wrote about ‚Äúmulti-level translation‚Äù.  By combining configurations and translations, we can get the same multistage described in his article.  Only for this we need to merge translations within the framework of different languages ‚Äã‚Äãin a predetermined order. <br><br>  Let's return to our memory.  Now that we have smeared configuration files up and down and know the order of their merging, we can try to clear the memory after the test is completed.  To do this, we need to remove the downloaded package and the translations it added.  Next, combine the balance in the final translation. <br><br><img src="http://1450830847298292422667" alt="JavaScript Localization" title="Javascript localization"><br><br>  Good thing turned out.  Now we can load and unload whole blocks of translations from memory.  But my colleague from the neighboring department offered a better and easier solution - to write translations of tests in one variable.  Thus, the translation of each of the next test would overwrite the previous translations.  It is a pity that by that moment, everything that was described above was already implemented with that two times. <br><br>  Why two?  Because I was wrong when I described the structure of the configuration file.  Above, I already wrote that the system should be universal for online and offline work.  If we work offline, we can upload translations only by directly connecting the JS file.  This file will give us an object with the data during initialization.  Since  in the future we are going to delete it, we need to sign the object with some id, moreover, we need to keep the same id in the configuration file.  When we will delete the configuration, having received the list of translations id, we will also delete all the translations that were loaded at her request.  I described the structure of the configuration file as follows: <br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">id</span></span>: <span class="hljs-string"><span class="hljs-string">"id "</span></span>, translations: { ru: { b: <span class="hljs-string"><span class="hljs-string">"/lang/b.js"</span></span>, a: <span class="hljs-string"><span class="hljs-string">"/lang/a.js"</span></span> } } }</code> </pre><br>  Who will roll updates on whom: ‚Äútransfer A to B‚Äù or ‚ÄúB to A‚Äù?  If you are lucky, then ‚ÄúA to B‚Äù, but he is not obliged to do this, because  the structure is not an array, hence the order should not matter.  In addition, another error was that the order of loading files affected the order of assembly.  Therefore, I had to redo it: <br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">id</span></span>: <span class="hljs-string"><span class="hljs-string">"id "</span></span>, translations: { ru: [ { id: <span class="hljs-string"><span class="hljs-string">"b"</span></span>, url: <span class="hljs-string"><span class="hljs-string">"/lang/b.js"</span></span> }, { <span class="hljs-attribute"><span class="hljs-attribute">id</span></span>: <span class="hljs-string"><span class="hljs-string">"a"</span></span>, url: <span class="hljs-string"><span class="hljs-string">"/lang/a.js"</span></span> } ] } }</code> </pre><br>  Is this a localization system?  No, this is a system load configuration.  Another mistake I made was that in the first version I did not allocate it to the hotel class.  In general, there are quite a few separate classes and modules: <br><br><ul><li>  Any file uploader.  JS files will not load themselves; </li><li>  Anything that draws us the icon of the current language and displays a list of others, with a choice; </li><li>  Stuck for combining several objects and configs into one (it was described above); </li><li>  At a minimum, the simplest library for memory (we need to remember the language chosen by the user); </li></ul><br><br>  In most ‚Äúready-made‚Äù localization modules, this is not the case.  Why?  Perhaps because those who write them rarely use them. <br><br>  <b>Interesting fact:</b> <br><blockquote>  None of the sites of localization systems on JS is localized. </blockquote><br>  <s>Charles!</s>  <s>When we wrote localization, at least we ourselves used it!</s>  <s>Carl himself used!</s> <br><br>  <b>We update the DOM only on demand</b> <br><br>  Not every localization system methods "switch language" and "update DOM tree" are separated.  This can create difficulties if you need to complete the transaction immediately after all translations are ready.  Also, in many implementations, the DOM tree is updated after the download of each translation file is completed.  For example, we switched the language to "Armenian".  The system begins to load three translation files: the main interface, settings, translation of a plugin.  In such a situation, it is logical to update the DOM only once - after the end of loading the last file in the list. <br><br><h2>  English, motherf ** ker!  Do you speak it? </h2><br>  Now, are we ready for localization?  Not!  Now we are ready to decide on the infrastructure that will be around this system.  The format and structure of the translation file are determined by the programmer, and its content is the translator or project manager.  These people may not only be unfamiliar with the chosen structure of information storage, but also refuse to attempt to accept and understand it.  They can easily remove quotes in a JSON object or accidentally erase any tag in XML, and moreover, many of them generally prefer to work with files in Microsoft Word (DOCX) format. <br><br>  The task of the infrastructure is not only to provide managers with a tool for localization, but also to ensure the stability and ease of assembling and updating translations.  Localization systems often suffer from infrastructure errors and underdevelopment.  The greater complexity of updating files with translations and keeping them up to date is often the cause of disabling one or more languages. <br><br>  The managers of the Mushroom War game use the Excel spreadsheet to work with translations, which is then processed by the parser and turned into an XML document that is used by the localization system when building the project. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/mw.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  The guys from ‚ÄúEvilibrium‚Äù decided not to work with the files directly and made the exact same sign in Google Docs.  The logic is simple - sending a link to translators is easier than sending them a file.  Therefore, everyone works with translation online, and when assembling, the tablet is downloaded in the same way and parsed into the necessary XML. <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/ev.png" alt="JavaScript Localization" title="Javascript localization"><br><br>  At the moment there are many online services for working with translations.  Someone is better, someone is worse, but almost everyone copes with the task of interacting with a translator or a group of translators.  Also, most services provide the ability to automatically translate your application.  On the Internet there are many articles on this topic, but because  This article is about bayans, it‚Äôs a sin not to write your own program for translations. <br><br>  Before continuing, I want to say a few words about why, in my opinion, auto translation is normal.  First, if you write a text observing a number of rules (simply, briefly, with direct word order, etc.), then an auto translation can reach an accuracy of 90% (see the report of Kristina Yaroshevich).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secondly, in most applications a fairly standard and poor set of phrases are used: open, close, save, load, new game, exit, further, cancel, etc. They are very difficult to translate wrong. Thirdly, we, as carriers of Russian, are happy bolsh-Mensh rozumiti bagato movi slov'yanskoi Movno group. Therefore, we can check their translation for gross errors and without a translator. But this is my personal opinion, for example, </font></font><a href="http://habrahabr.ru/post/165705/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pavel Doronin,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in his article, held the opposite opinion: ‚ÄúA poorly localized product is much worse than non-localized in general.‚Äù</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To localize the next application, I needed to cut the files with the translation. </font><font style="vertical-align: inherit;">The freelancers who sent the translation constantly broke JSON. </font><font style="vertical-align: inherit;">Soon, instead of JSON, I began sending them plain text. </font><font style="vertical-align: inherit;">In the first approximation, there was a problem from the text of freelancers to get valid objects. </font><font style="vertical-align: inherit;">For this task, an application was made on the knee in two windows (text on input, JSON on output). </font><font style="vertical-align: inherit;">How to break the text into phrases? </font><font style="vertical-align: inherit;">Let's look at an example: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Text in TEXTAREA:</font></font><br><br><pre> <code class="html hljs xml"> 1  2</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As an ordinary person sees him: </font></font><br><br><pre> <code class="html hljs xml"> 1  2</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As the programmer sees it: </font></font><br><br><pre> <code class="html hljs xml"> 1\n  2</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fine! We have a symbol by which we can break the text. In addition, because this is a hidden symbol, the translator will not be able to accidentally break or wipe it (at least in most cases). We convert the text into an array through split (), and then we substitute it into an object that we drive into JSON.stringify () and get the necessary valid file.</font></font><br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_1.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br>  Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON`s template can be different, it is better to put it in a separate file. And since we brought it to a separate file, can teach him to generate not only JSON `s? With these thoughts, I added another window to the program in which you can edit the ‚Äútemplate generation‚Äù function. At the input, it receives an array of translated phrases, and at the output it returns JSON, XML, or something else. </font></font><br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_2.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When it was necessary to translate the next application, I thought that you can save a lot and increase the volume of translations by screwing in some auto translator. No sooner said than done. Now the program could take the text, translate it into a bunch of languages, and give the final valid JSON `s.</font></font><br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_4.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After that, I began to write a script that would cut the wrapper of JSON in the JavaScript files. Then I thought, and instead wrote a small local server on NodeJS. Now, after receiving the next translation from Yandex.Translate, the program began to send data to the node that cut the necessary files on the fly. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The result is very pleased. Now small games began to go with a standard translation of about 45-50 languages. So several small products were released, for which localization was not a critical place, but was a nice addition. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Testing showed that the auto translation was wrong in the same places. For example, the word "Back" translated as "Ago" or "Tom" (in the sense of "20 years ago").</font></font> Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">phrases were the same crutches began to appear. </font><font style="vertical-align: inherit;">At some point I decided to remove them and add a dictionary. </font><font style="vertical-align: inherit;">So the program has a third window. </font></font><br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_3.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now the dictionary contained type fields:</font></font><br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">ru</span></span>: { en: { <span class="hljs-string"><span class="hljs-string">""</span></span>: <span class="hljs-string"><span class="hljs-string">"Back"</span></span> ...</code> </pre><br>  Since<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">during the addition of the dictionary, I decided to refactor the application a bit, I made many additional edits. </font><font style="vertical-align: inherit;">At the same time I decided to read more about localization. </font><font style="vertical-align: inherit;">At that moment I came across an article by Denis Lukianov ‚Äú </font></font><a href="http://habrahabr.ru/post/229031/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A review of 7 online services for software localization</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚Äù and realized that all this time I was writing a bicycle ...</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So what to do, bike so bike. From the principle decided to finish and made the final touch. Now, the node began to cut the translation immediately into a bunch of formats: JS, JSON, XML, PO, YML, CSV and save these files in two folders: ‚Äúclean‚Äù and ‚Äúdirty‚Äù. If we change the files in the ‚Äúdirty‚Äù folder, then in the dictionary we can click ‚Äúsynchronization‚Äù and the node will automatically generate a dictionary based on the differences found. At the moment, synchronization works only in half of the formats, since It is not clear whether to continue to mess with the program or not. </font></font><br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_6.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can go to the </font></font><a href="http://bakhirev.biz/demo/language/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and see how it all looks or even download (link to the file in the settings). If at least 10 people sign off on the need to continue, I will bring it to mind, because I want a few more features:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">saving settings </font><font style="vertical-align: inherit;">at work you have to switch between multiple projects;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> choosing the path to save translations so that the files immediately get into the build of the desired project without manual carrying; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">selection of storage formats, because </font><font style="vertical-align: inherit;">I don‚Äôt use PO, YML, XML, JSON in practice, it makes no sense to generate them every time;</font></font></li></ul><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ideally does not happen</font></font></b> <div class="spoiler_text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I wrote this article a week ago, but I can not stop with the refactoring of the above-described bicycle. </font><font style="vertical-align: inherit;">I rewrote one, rewrote another, and now it seems that you can‚Äôt show it to anyone until the third is fixed. </font><font style="vertical-align: inherit;">In general, we will consider this a working prototype.</font></font></div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Localization without localization </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The localization system is, first of all, the control system of the value of a certain set of constants. </font><font style="vertical-align: inherit;">The selected language in it is just a key by which you can switch these sets. </font><font style="vertical-align: inherit;">By changing the key in one place, you change the constants in the entire application. </font><font style="vertical-align: inherit;">And if you are aware of this thought, then perhaps look at the capabilities of localization systems from a different angle. </font><font style="vertical-align: inherit;">Let's consider together several cases of non-standard use of the system. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change the appearance of the application</font></font></b> <br><br><img src="http://bakhirev.biz/StalinGrad/habr/localization/screen_7.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In our work we use the same set of modules to create typical mobile sites selling content. For each partner, we change some of the styles, which also include a set of icons. In addition, on holidays or promotions, we change the look of certain websites to create a suitable mood for the target audience (for example, a New Year's style or a theme in honor of "Valentine's Day"). To use the same layout templates, we had to remove the addresses of pictures from them. We marked each such picture with some identifier, and all the addresses were recorded in a JSON object with the corresponding keys. In order for the system to work, we needed a kind of mechanism that would automatically assign all the actual addresses to all the pictures, based on the current configuration and theme. Consequently,on the one hand, this mechanism must receive configs, and on the other hand, it must return a value by a given identifier. I would also like it to be able to walk through the DOM tree and update all the marked images on its own, if the DOM is already formed. Does the functionality of the described system remind you anything?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Example of a JSON object with image addresses: </font></font><br><br><pre> <code class="hljs mel">{ header: { <span class="hljs-keyword"><span class="hljs-keyword">menu</span></span>: { normal: <span class="hljs-string"><span class="hljs-string">"/images/201409/menu__normal.png"</span></span>, hover: <span class="hljs-string"><span class="hljs-string">"/images/201409/menu__hover.png"</span></span> }, search: <span class="hljs-string"><span class="hljs-string">"/images/201407/search__blue.png"</span></span> }, ... footer: { icon: <span class="hljs-string"><span class="hljs-string">"/images/201408/question.png"</span></span>, up: <span class="hljs-string"><span class="hljs-string">"/images/201407/up.png"</span></span> } }</code> </pre> <br><img src="http://bakhirev.biz/StalinGrad/habr/localization/example_1.png" alt="JavaScript Localization" title="JavaScript Localization"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This one-to-one mechanism repeats the logic of the localization system. </font><font style="vertical-align: inherit;">And if so, why create it? </font><font style="vertical-align: inherit;">We can force the localization module to do this work, only as the value of the language to use the name of the desired topic. </font><font style="vertical-align: inherit;">In addition, as mentioned above, our localization system can also change the addresses of the plug-in styles, which means that we will gain control over the plug-in CSS code as well. </font><font style="vertical-align: inherit;">If you do not want to mix translations and languages ‚Äã‚Äãwithin a single configuration file, then you can not do without OOP. </font><font style="vertical-align: inherit;">OOP answers the question of how to create two localization instances for different purposes (one rolls up translations, the other - styles). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changing coefficients in mathematical formulas</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmers from the company Unicum, which develops software for gaming machines, laid in the localization files also mathematical coefficients for calculating the winnings. This was due to the fact that gaming legislation may have significant differences depending on the country in which it is supposed to use their software. For example, the average percentage of cash winnings of gaming machines could range from 60% to 95%. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition, when developing a game with different levels of difficulty, you can also use a localization system for storing and quickly changing coefficients that affect the game balance. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Change of storyline</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the plot of your game is described as a graph and saved as a JSON object, then by transferring it to a localization system that can perform object fusion operations, you can create patches and additions to the main storyline. However, you can also create several storylines themselves and select them randomly when you start the game (here the key will not be the ‚Äúchosen language‚Äù, but the ‚Äúselected plot‚Äù). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Changing the rules of the game</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is the difference between blackjack and point game? </font><font style="vertical-align: inherit;">Not much. </font><font style="vertical-align: inherit;">The main difference is the number of cards in the deck 54, not 36. If you ever write online blackjack (as I did half a year ago), then you will have the option of cramming the deck into JSON, and putting it into a copy of the localization system and add to the settings option "switching rules". </font><font style="vertical-align: inherit;">Now our localization system with a slight movement of the hand turns into a system for choosing the rules of the game.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Results and conclusions </font></font></h2><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Javascript:</font></font></b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Store translations in JSON or XML format; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we break transfer into modules; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> updating the DOM only on demand; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> clear memory; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we give you the opportunity to choose a language; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remember the choice made; </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We think over the assembly system:</font></font></b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> source data from the translator to the format for programmers; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> groups of translations of individual modules into one final; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We choose the finished article from </font></font><a href="http://habrahabr.ru/post/229031/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denis Lukyanov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When layout:</font></font></b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> think about RTL; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> limit the length of the text; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pointer to transfer must be in attributes; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We are not trying to write translations in CSS through pseudo-elements; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use </font></font><a href="https://github.com/badoo/rtl-css"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rtl-css</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , look </font></font><a href="http://www.youtube.com/watch%3Fv%3DZev8zw24HKU"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alexander Tevosyan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  <b>Text:</b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> stored in UTF-8; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fonts must support all languages; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we test by pseudolocalization; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avoid over-optimization; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We read </font></font><a href="http://habrahabr.ru/post/165705/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pavel Doronin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the text to remove:</font></font></b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> synonyms; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cuts; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sacrament turns; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> verbal nouns; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> passive voice; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> meaningless verbs; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> impersonal structures; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> preposition by, with; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> many cases without prepositions; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> word skip; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">See </font></font><a href="https://events.yandex.ru/lib/talks/2497/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kristina Yaroshevich</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add:</font></font></b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> simple sentences; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> direct word order; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> information style; </font></font></li></ul><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For information style:</font></font></b> <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> remove stop words; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> highlight the structure; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> duplicate information with pictures; </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We use </font></font><a href="http://glvrd.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chapters.</font></font></a>  <a href="http://glvrd.ru/">ed.</a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, we look at </font></font><a href="https://events.yandex.ru/lib/talks/2844/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maxim Ilyakhov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , we prepare </font></font><a href="http://habrahabr.ru/company/alconost/blog/255373/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">screenshots</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some goodies:</font></font></b> <br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Languages ‚Äã‚Äãand their name</font></font></b> <div class="spoiler_text"><pre> <code class="hljs ruby">{ <span class="hljs-symbol"><span class="hljs-symbol">ar:</span></span> <span class="hljs-string"><span class="hljs-string">"ÿπÿ±ÿ®Ÿä"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">az:</span></span> <span class="hljs-string"><span class="hljs-string">"Az…ôrbaycan"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">be:</span></span> <span class="hljs-string"><span class="hljs-string">"—ñ"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">bg:</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">bs:</span></span> <span class="hljs-string"><span class="hljs-string">"Bosanski"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ca:</span></span> <span class="hljs-string"><span class="hljs-string">"Catal√†"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">cs:</span></span> <span class="hljs-string"><span class="hljs-string">"ƒåe≈°tina"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">da:</span></span> <span class="hljs-string"><span class="hljs-string">"Dansk"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">de:</span></span> <span class="hljs-string"><span class="hljs-string">"Deutsch"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">el:</span></span> <span class="hljs-string"><span class="hljs-string">"ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">en:</span></span> <span class="hljs-string"><span class="hljs-string">"English"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">es:</span></span> <span class="hljs-string"><span class="hljs-string">"Espa√±ol"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">et:</span></span> <span class="hljs-string"><span class="hljs-string">"Eesti"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">fa:</span></span> <span class="hljs-string"><span class="hljs-string">"ŸÅÿßÿ±ÿ≥€å"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">fi:</span></span> <span class="hljs-string"><span class="hljs-string">"Suomi"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">fr:</span></span> <span class="hljs-string"><span class="hljs-string">"Fran√ßais"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">he:</span></span> <span class="hljs-string"><span class="hljs-string">"◊¢◊ë◊®◊ô◊™"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">hr:</span></span> <span class="hljs-string"><span class="hljs-string">"Hrvatski"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">hu:</span></span> <span class="hljs-string"><span class="hljs-string">"Magyar"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">hy:</span></span> <span class="hljs-string"><span class="hljs-string">"’Ä’°’µ"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ja:</span></span> <span class="hljs-string"><span class="hljs-string">"Êó•Êú¨Ë™û"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">id:</span></span> <span class="hljs-string"><span class="hljs-string">"Indonesian"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">is:</span></span> <span class="hljs-string"><span class="hljs-string">"Lj√≥√∞m√¶li"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">it:</span></span> <span class="hljs-string"><span class="hljs-string">"Italiano"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ka:</span></span> <span class="hljs-string"><span class="hljs-string">"·É•·Éê·É†·Éó·É£·Éö·Éò"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">kk:</span></span> <span class="hljs-string"><span class="hljs-string">"“ö“õ"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ko:</span></span> <span class="hljs-string"><span class="hljs-string">"ÌïúÍµ≠Ïñ¥"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ky:</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">lt:</span></span> <span class="hljs-string"><span class="hljs-string">"Lietuvi≈≥"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">lv:</span></span> <span class="hljs-string"><span class="hljs-string">"Latvie≈°u"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">mk:</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ms:</span></span> <span class="hljs-string"><span class="hljs-string">"Melayu"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">mt:</span></span> <span class="hljs-string"><span class="hljs-string">"Malti"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">nl:</span></span> <span class="hljs-string"><span class="hljs-string">"Nederlandse"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">no:</span></span> <span class="hljs-string"><span class="hljs-string">"Norsk"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">pl:</span></span> <span class="hljs-string"><span class="hljs-string">"Polski"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">pt:</span></span> <span class="hljs-string"><span class="hljs-string">"Portuguesa"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ro:</span></span> <span class="hljs-string"><span class="hljs-string">"Rom√¢nƒÉ"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">ru:</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">sk:</span></span> <span class="hljs-string"><span class="hljs-string">"Slovenskej"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">sl:</span></span> <span class="hljs-string"><span class="hljs-string">"Slovenski"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">sq:</span></span> <span class="hljs-string"><span class="hljs-string">"Shqiptare"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">sr:</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">sv:</span></span> <span class="hljs-string"><span class="hljs-string">"Svenska"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">tg:</span></span> <span class="hljs-string"><span class="hljs-string">"“∑”£"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">th:</span></span> <span class="hljs-string"><span class="hljs-string">"‡πÑ‡∏ó‡∏¢"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">tr:</span></span> <span class="hljs-string"><span class="hljs-string">"T√ºrk"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">tt:</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">uk:</span></span> <span class="hljs-string"><span class="hljs-string">"—ó"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">vi:</span></span> <span class="hljs-string"><span class="hljs-string">"Vi·ªát nam"</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  <span class="hljs-symbol"><span class="hljs-symbol">zh:</span></span> <span class="hljs-string"><span class="hljs-string">"‰∏≠ÂõΩ"</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">/  }</span></span></code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/268915/">https://habr.com/ru/post/268915/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268903/index.html">Hibernate Developer Documentation - Chapter V. Locks</a></li>
<li><a href="../268905/index.html">Do-it-yourself audio codec</a></li>
<li><a href="../268907/index.html">Security Week 42: SHA-1 collisions, practical hacking of routers, Android / Security / Sadness</a></li>
<li><a href="../268909/index.html">CRM is a mockingbird. We integrate amoCRM, telephony and cellular communication</a></li>
<li><a href="../268911/index.html">Interview with Audrey Tan, Part 1</a></li>
<li><a href="../268917/index.html">Visualization of static and dynamic networks on R, part 6</a></li>
<li><a href="../268921/index.html">Steam Files. Part 2 - BLOB, CDR, VDF, PAK, VPK</a></li>
<li><a href="../268923/index.html">Modifying the Vanilla Music Player for Android</a></li>
<li><a href="../268925/index.html">From participating in the hackathon to winning the Imagine Cup</a></li>
<li><a href="../268929/index.html">Event-oriented Python backtesting step by step. Part 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unusual range operator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I must warn you that this is another article that does not contain any revelations. For those super-geeks who know the whole perldoc by heart, it will...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unusual range operator</h1><div class="post__text post__text-html js-mediator-article"> I must warn you that this is another article that does not contain any revelations.  For those super-geeks who know the whole perldoc by heart, it will be absolutely useless, so, dear super-geeks, you can pass by and not inform you that all this is in the docks.  I already know that.  :-) My article is for everyone else, for those who have not mastered the whole perldoc, or mastered, but did not understand, or understood, but did not remember. <br><br>  I think many people know about the so-called range operator, written as <code><b><font color="#0080ff">..</font></b></code> (two points), with which you can quickly create arrays from a set of consecutive elements.  For example, the following code creates an array of 35 numbers: 3, 4, 5, ..., 37: <br><blockquote> <code><font color="blue">my</font> @arr = <font color="#800000">3</font> .. <font color="#800000">37</font> ;</code> </blockquote>  In addition to numbers, you can use strings: in this case, the so-called magic increment will be executed to generate array elements (for example, you can specify a range of letters: <code><b>'a' .. 'z'</b></code> ). <br><br>  However, the range operator can also be used in a scalar context, taking boolean expressions as operands and returning a boolean result.  And here the most interesting begins, because it is an <b>operator with a state</b> : the result of the operation will depend not only on the values ‚Äã‚Äãof the left and right operands, but also on the call history of the given expression! <br><a name="habracut"></a><br>  You can, of course, give a formal definition here describing the method of calculating the result for a range operator, but I personally needed to re-read this formal definition five or six times before I finally could understand the essence.  Therefore, it is better to go the other way.  Imagine that we are processing a file line by line, and we need to perform a certain action for some blocks in this file (for example, skip a multi-line comment).  What is a block?  This is almost an arbitrary set of lines, enclosed between two markers, marking the beginning and end of a block.  For definiteness, we take comments in the C / C ++ style (and for simplicity, we assume that a comment and a useful command cannot be adjacent to one line).  Here is an example of the code that we will process: <br><blockquote> <code><font color="gray">01:</font> <font color="blue">int</font> i = <font color="#800000">10</font> , j, k; <br> <font color="gray">02:</font> <font color="blue">for</font> (j = i; j &lt; <font color="#800000">2</font> * i; ++j) { <br> <font color="gray">03:</font> <font color="green">/* <br> <font color="gray">04:</font>     <br> <font color="gray">05:</font> -   <br> <font color="gray">06:</font>   . */</font> <br> <font color="gray">07:</font> k = j * j; <br> <font color="gray">08:</font> <font color="red">printf</font> ( <font color="#800000">"Result[%d]: %d\n"</font> , j, k); <br> <font color="gray">09:</font> <font color="green">/*  . */</font> <br> <font color="gray">10:</font> } <br></code> </blockquote>  We will write code that will display all the uncommented lines of the above text.  What will a C programmer do with line-by-line processing?  Well, for example, it will create a variable where it will store the current state: are we inside the comment (i.e., we have read the ‚Äú <code><b><font color="green">/*</font></b></code> ‚Äù marker, but have not yet met the ‚Äú <code><b><font color="green">*/</font></b></code> ‚Äù), and depending on the value of this variable, output or do not display the next line on the screen, and also do not forget to change the value in a timely manner when a marker of the desired type is detected.  And what will the Pearl programmer do?  And he will use the range operator and write something like the following: <br><blockquote> <code><font color="blue">while</font> ( <font color="blue">my</font> $line = &lt;FILE&gt;) { <br> <font color="blue">if</font> (($line =~ m/^\s*\/\*/) .. ($line =~ m/\*\/\s*$/)) { <br> <font color="green"># $line -  , .</font> <br> } <br> <font color="blue">else</font> { <br> <font color="green"># $line -  , .</font> <br> <font color="red">print</font> $line; <br> } <br> } <br></code> </blockquote>  What does this code do?  In short, exactly what we need.  The left operand of the range operator here corresponds to the beginning of the comment, the right - to the end.  And the range operator itself returns true if and only if, during the execution of the code, we are in the ‚Äúgap‚Äù from the operation of the left operand to the operation of the right operand.  Thus, the operator fully justifies his name: he sets the logical range. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now we can give a formal definition (free translation of an extract from the official documentation <a href="http://perldoc.perl.org/perlop.html">perlop</a> ): <br><blockquote>  Each operator <code><b><font color="#0080ff">..</font></b></code> contains its own boolean state.  It contains the value ‚Äúfalse‚Äù as long as the left operand is false.  As soon as the left operand becomes true, the range operator takes the true value and remains so until the right operand accepts the true value.  AFTER this, the range operator again takes a false value. </blockquote>  Let us now try to sort through all the magic that turns this somewhat vague definition into the correspondence of the usual range.  To do this, let us introduce ourselves as a debugger and execute the program sequentially, step by step, reading the input file line by line.  For brevity, I here denote the left and right operands (Boolean expressions of correspondence to the beginning and end of a comment) as <b>MB</b> and <b>ME</b> (short for marker begin / marker end). <br><ol><li> <code><font color="blue">int</font> i = <font color="#800000">10</font> , j, k;</code> <br>  On this line, both <b>MB</b> and <b>ME</b> give false, therefore, the operator <code><b><font color="#0080ff">..</font></b></code> also returns false.  Thus, this line is not a comment. </li><li> <code><font color="blue">for</font> (j = i; j &lt; <font color="#800000">2</font> * i; ++j) {</code> <br>  Similarly, <b>MB</b> and <b>ME</b> give false, so the whole expression will also be false. </li><li> <code><font color="green">/*</font></code> <br>  And here, finally, <b>MB</b> works;  <b>ME</b> remains a lie.  According to the definition, at this moment the range operator takes the true value, and we get the result that the read string is a comment. </li><li> <code><font color="green">   </font></code> <br>  On this line, the expressions <b>MB</b> and <b>ME</b> again find nothing and return false.  But since the operator has already switched to the true state, he will now remain in it until <b>ME</b> takes the true value.  Thus we get the truth again, i.e. this line is a comment. </li><li> <code><font color="green">-  </font></code> <br>  Here <b>ME</b> is still not true, so that the operator <code><b><font color="#0080ff">..</font></b></code> continues to give the truth, that is, we have not reached the end of the comment. </li><li> <code><font color="green">  . */</font></code> <br>  And here, finally, it works <b>ME</b> .  The range operator sighs and gives the last true truth, then switches back to its original state.  But for this line, we still get the truth, which perfectly correlates with our ideas about the structure of multi-line comments: this line is the final, but still part of the comment, and should not be displayed according to the above TK. </li><li> <code>k = j * j;</code> <br>  The freebie is over, sir.  <b>MB</b> and <b>ME are</b> both false, the operator is in its initial state and returns false, so this string is not a comment. </li><li> <code><font color="red">printf</font> ( <font color="#800000">"Result[%d]: %d\n"</font> , j, k);</code> <br>  ... just like this one.  For the same reasons. </li><li> <code><font color="green">/*  . */</font></code> <br>  But this piece is very curious: both <b>MB</b> and <b>ME</b> work simultaneously.  What does it change?  Yes, in general, nothing.  The operator <code><b><font color="#0080ff">..</font></b></code> , according to the definition, will return the truth, having remembered it for the future, but since the second operand is also true, the switch back to the initial state occurs immediately: the comment has begun and immediately ended. </li><li> <code>}</code> <br>  This line is not caught by either <b>MB</b> or <b>ME</b> , and, since the operator has managed to switch back, he will return false here, marking this line as uncommented. </li></ol>  I hope that this simple example helped you figure out what was happening.  In fact, inside the operator there is the very local state variable that the fictitious C-programmer we have had to enter explicitly, as well as fiddle with the management of its values. <br><br>  Of course, the scope of the range operator is not at all limited to word-by-line or word-by-word processing, everything is determined only by your imagination.  For example, it can be used to define some ranges in data arrays, when the boundaries are set by more complex conditions than an elementary check for more or less. <br><br>  It is also worth saying here that besides the two-point operator <code><b><font color="#0080ff">..</font></b></code> there is also a three-point ( <code><b><font color="#0080ff">...</font></b></code> ).  It behaves exactly the same as two-point, but with one difference: when the first operand in the initial state of the operator takes the true value, the second operand is ignored.  Thus, if for our example we tried to use the operator <code><b><font color="#0080ff">...</font></b></code> , then the comment in the ninth line of the file would be considered not complete, but continuing to the end of the file (more precisely, to the line where the next comment end marker will fall, but in our file An example of such a line is simply no).  As an example of use we can cite the situation when the beginning and end of the block being processed are set with the same special line.  A two-point operator here would be powerless, and a three-point operator would fit perfectly. <br><br>  Finally, I would like to read a little notation: please do not forget about the readability and self-comments of the code.  You do not need to use the possibility of the language just because it is in it.  If you really have a certain block in the sequential processing of some data, then this operator makes it possible to describe this block briefly, clearly and gracefully.  But if you start shoving a range operator where neither, just because he is so original, unusual, and nobody else has it, believe me, it will not lead to anything good. </div><p>Source: <a href="https://habr.com/ru/post/87272/">https://habr.com/ru/post/87272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87260/index.html">Rich Snippets vs Inbound Links</a></li>
<li><a href="../87265/index.html">JetScreenshot.com - show what you see in three clicks</a></li>
<li><a href="../87267/index.html">Tracking number. err404 on the russianpost</a></li>
<li><a href="../87269/index.html">Amateur video report from CeBIT-2010: SKB Kontur top manager shares his impressions</a></li>
<li><a href="../87270/index.html">Canobuvosti, 30th Edition (HD)</a></li>
<li><a href="../87274/index.html">Javascript distributed computing</a></li>
<li><a href="../87276/index.html">Catch the rabbit</a></li>
<li><a href="../87278/index.html">Firmware new Nokia s60 or Hacking new Nokia firmware</a></li>
<li><a href="../87281/index.html">New Samsung NX10 and Olympus E-PL1 mirrorless: test shots and video</a></li>
<li><a href="../87287/index.html">Build and configure Transmission in Debian or anything you wanted to know about Transmission but were afraid to ask</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross-Cloud Programming with Go Cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Today (approx. Translator 24-07-2018), the Go team at Google released the new Open Source project Go Cloud , a library and tools for de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross-Cloud Programming with Go Cloud</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  Today (approx. Translator 24-07-2018), the Go team at Google released the new Open Source project <a href="https://github.com/google/go-cloud">Go Cloud</a> , a library and tools for developing in <a href="https://cloud.google.com/open-cloud/">an open cloud</a> .  With this project, we aim to ensure that developers choose the Go language to create cross-cloud applications. <br><br>  This post explains why we started this project, the details of how Go Cloud works, and how to get involved and start using it. <br><a name="habracut"></a><br><h2>  Why cross-cloud programming?  Why now? </h2><br>  According to our estimates, there are <a href="https://research.swtch.com/gophercount">more than one million</a> developers in the world using Go.  Go serves many of the most critical cloud-oriented projects, including Kubernetes, Istio and Docker.  Companies such as Lyft, Capital One, Netflix and <a href="https://github.com/golang/go/wiki/GoUsers">many others</a> depend on Go in production.  Over the years, we found that developers love using Go for cloud development because of its efficiency, performance, built-in concurrency and low latency. <br><br>  As part of our work to support the rapid development of Go, we interviewed teams who work with Go and understand how they use the language and how the Go ecosystem can be improved in the future.  One of the main voiced themes among many of the organizations surveyed is the need for cross-cloud development.  These teams (respondents) want to be able to deploy their applications in <a href="https://en.wikipedia.org/wiki/Cloud_computing">multi-cloud</a> and <a href="https://en.wikipedia.org/wiki/Cloud_computing">hybrid cloud</a> environments, and distribute the load between cloud providers without significant changes in the application code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To achieve this goal, some teams are trying to untie their applications from a provider-specific API in order to write simpler and more portable (cross-cloud) code.  However, short-term functional delivery requirements mean that teams have to sacrifice long-term cross-cloud requirements.  As a result, most Go applications running in the cloud are tightly tied to the cloud provider that was originally selected. <br><br>  Alternatively, teams can use Go Cloud, a set of open public cloud APIs, to program simpler and more portable cloud applications.  Go Cloud is also a foundation for the portable cloud library ecosystem.  Go Cloud allows teams to focus on the functionality during application development, while still retaining long-term flexibility to deploy the application in multi-cloud and hybrid-cloud architectures.  Go Cloud applications can also be migrated to the cloud provider that best meets the needs of the application. <br><br><h2>  What is Go Cloud? </h2><br>  We identified common services used by cloud applications and created a common API to work between cloud providers.  Today, Go Cloud can work with blob storage, MySQL databases, runtime settings (configuration), and an HTTP server configured with query logging, monitoring and health checking.  Go Cloud works with the Google Cloud Platform (GCP) and Amazon Web Services (AWS).  We will continue to work with partners in the cloud industry and the Go community to add support for other cloud providers in the near future. <br><br>  Go Cloud aims to develop a vendor-neutral general API for most of the services used, for example, a simple and easy deployment of Go applications to another cloud.  Go Cloud can also be used as the basis for developing other open source libraries for work between cloud providers.  Feedback from all types of developers and at all levels of development will influence the priority of implementing / adding this or that functionality in future versions of the Go Cloud API. <br><br><h2>  How it works? </h2><br>  Go Cloud is based on a set of common APIs for cross-cloud programming.  Let's look at an example of using blob storage.  You can use the generic <a href="https://godoc.org/github.com/google/go-cloud/blob">* blob.Storage</a> type to copy a file from a local disk to the cloud.  Let's start by opening S3 storage using the bundled <a href="https://godoc.org/github.com/google/go-cloud/blob/s3blob">s3blob package</a> : <br><br><pre><code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// setupBucket opens an AWS bucket. func setupBucket(ctx context.Context) (*blob.Bucket, error) { // Obtain AWS credentials. sess, err := session.NewSession(&amp;aws.Config{ Region: aws.String("us-east-2"), }) if err != nil { return nil, err } // Open a handle to s3://go-cloud-bucket. return s3blob.OpenBucket(ctx, sess, "go-cloud-bucket") }</span></span></code> </pre> <br>  From the moment <i>* blob.Bucket</i> appears in the application, you get the opportunity to create <i>* blob.Writer</i> , which in turn implements the <i>io.Writer</i> interface.  From this point on, the application (program) can use <i>* blob.Writer</i> to write data to the cloud storage, checking that <i>Close</i> does not return an error. <br><br><pre> <code class="go hljs">ctx := context.Background() b, err := setupBucket(ctx) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatalf(<span class="hljs-string"><span class="hljs-string">"Failed to open bucket: %v"</span></span>, err) } data, err := ioutil.ReadFile(<span class="hljs-string"><span class="hljs-string">"gopher.png"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatalf(<span class="hljs-string"><span class="hljs-string">"Failed to read file: %v"</span></span>, err) } w, err := b.NewWriter(ctx, <span class="hljs-string"><span class="hljs-string">"gopher.png"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatalf(<span class="hljs-string"><span class="hljs-string">"Failed to obtain writer: %v"</span></span>, err) } _, err = w.Write(data) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatalf(<span class="hljs-string"><span class="hljs-string">"Failed to write to bucket: %v"</span></span>, err) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err := w.Close(); err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatalf(<span class="hljs-string"><span class="hljs-string">"Failed to close: %v"</span></span>, err) }</code> </pre><br>  Notice that the logic of working with the storage (bucket) does not refer to the specifics of AWS S3 operation.  Go Cloud turns the replacement of cloud storage, essentially a replacement for the function used to open <i>* blob.Bucket</i> .  An application can easily switch to using Google Cloud Storage by creating a <i>blob.Bucket instance</i> using <a href="https://godoc.org/github.com/google/go-cloud/blob/gcsblob">gcsblob.OpenBucket</a> without changing the code that copies the file: <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// setupBucket opens a GCS bucket. func setupBucket(ctx context.Context) (*blob.Bucket, error) { // Open GCS bucket. creds, err := gcp.DefaultCredentials(ctx) if err != nil { return nil, err } c, err := gcp.NewHTTPClient(gcp.DefaultTransport(), gcp.CredentialsTokenSource(creds)) if err != nil { return nil, err } // Open a handle to gs://go-cloud-bucket. return gcsblob.OpenBucket(ctx, "go-cloud-bucket", c) }</span></span></code> </pre><br>  So far, however, different steps are required to access the storage for different cloud providers, the final type used by the application remains the same <i>* blob.Bucket</i> .  Thus, the application code remains isolated from the cloud-specific code.  To increase compatibility with existing Go libraries, Go Cloud uses existing interfaces supplied in the standard Go library, such as <i>io.Writer</i> , <i>io.Reader,</i> and <i>* sql.DB.</i> <br><br>  The code required to access cloud services (the <i>setupBucket ()</i> function from the example above) follows the following pattern: higher abstractions are constructed using more basic (lower) abstractions.  While you can write such code with pens, Go Cloud automates this with <b>Wire</b> , a tool that generates cloud-specific code for you.  <a href="https://github.com/google/go-cloud/tree/master/wire">The Wire documentation</a> explains how to install and use it, and <a href="https://github.com/google/go-cloud/tree/master/samples/guestbook">examples</a> show Wire in action. <br><br><h2>  How to get involved in the project and learn more? </h2><br>  To begin with, we recommend the following <a href="https://github.com/google/go-cloud/tree/master/samples/tutorial">guide</a> , and then we recommend to try building the application using Go Cloud yourself.  If you are already using AWS or GCP, you can try migrating parts of existing applications to use Go Cloud.  If you use other cloud providers or an on-premise subscription service, you can expand Go Cloud to support this by implementing driver interfaces (for example, <a href="https://godoc.org/github.com/google/go-cloud/blob/driver">driver.Bucket</a> ). <br><br>  We will appreciate any and all sorts of experiences with Go Cloud.  <a href="https://github.com/google/go-cloud">Go Cloud</a> development is managed on GitHub.  We will be glad to make any contribution to the project, including the pool rekuest.  Create an <a href="https://github.com/google/go-cloud/issues/new">issue</a> to tell us what you think should be improved or which APIs the library should support first.  To follow updates and news, join the project <a href="https://groups.google.com/forum/">mailing list</a> . <br><br>  The project requires contributors to sign the same Contributor License Agreement adopted in the Go project.  Read <a href="">the contributor's manual</a> for more details. <br><br>  Thank you for your time spent exploring Go Cloud, we are happy to work with you to make the Go language the choice of developers for building cross-cloud (portable) applications. </div><p>Source: <a href="https://habr.com/ru/post/418131/">https://habr.com/ru/post/418131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418119/index.html">Epic fail of the month: rsync as a "vector" to pull data</a></li>
<li><a href="../418121/index.html">Piu-bang-vzhuh: a satellite to detect lightning also notices meteors</a></li>
<li><a href="../418123/index.html">Atomic memory: 8-bit alphabet and 192-bit tune from the game Mario</a></li>
<li><a href="../418125/index.html">Adventure operator pipeline in babel @ 7</a></li>
<li><a href="../418127/index.html">True and False Face Recognition Systems</a></li>
<li><a href="../418133/index.html">In defense of OOP. 7 untenable arguments of his opponents</a></li>
<li><a href="../418135/index.html">How to organize your own repository of Node.js modules with blackjack and versioning</a></li>
<li><a href="../418137/index.html">Bloodlust: an interview with the founder of DonorSearch</a></li>
<li><a href="../418139/index.html">Numerical solution of mathematical models of objects given by systems of differential equations</a></li>
<li><a href="../418141/index.html">RE: Gata / AFR Beginner Skipper Race</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Brain system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, various kinds of intellectual games are gaining popularity: ‚ÄúWhat? Where? When? ‚Äù,‚Äú Melotrek ‚Äù,‚Äú Brain-ring ‚Äù. But for some types of games, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Brain system</h1><div class="post__text post__text-html js-mediator-article">  Recently, various kinds of intellectual games are gaining popularity: ‚ÄúWhat?  Where?  When? ‚Äù,‚Äú Melotrek ‚Äù,‚Äú Brain-ring ‚Äù.  But for some types of games, one cannot do without a special system that will control the course of the game.  Within the course project, we decided to try to make our own brain system. <br><a name="habracut"></a><br>  Before that, we never encountered Arduino or something hardware, but looking at how friends and acquaintances at the university easily assembled devices, we wanted to try and we could do something of our own.  Since we were far enough away from this topic, our manager put the offer to assemble the brain system, saying that this would be a good start for us.  Surprisingly, this is what happened. <br><br>  To begin with, we determined the goal: the brain system should give a sound signal indicating the beginning of the time of the question round and a signal indicating the end of the time of the question round, and should also signal to the leader that the player is ready to give an answer.  If one player has pressed a button, then the other buttons are blocked.  It should also be possible to select the game mode. <br><br><img src="https://habrastorage.org/files/1f7/cc4/cc1/1f7cc4cc14a04c46989196e5f331b688.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Required components </h3><br><ul><li>  Arduino nano </li><li>  Speaker </li><li>  LEDs 8 pcs. </li><li>  Buttons 4 pcs.  for players and 2 for lead </li><li>  Idle router </li><li>  Dip switch </li><li>  Resistors: </li><li>  8 pieces  - 100 Ohm (for diodes) </li><li>  6 pieces  - 10 kŒ© (pull-down resistors) </li><li>  6 pieces  - 1 kOhm for bounce </li><li>  4 things.  - 470 ohms for DIP (optional) </li><li>  5 pieces.  - Schmitt trigger (but you can do with one) </li><li>  Capacitors - 6 pcs.  1 microfarad </li><li>  Ethernet cable 4 pcs. </li><li>  RJ-45 connectors - 4pcs. </li><li>  Button case </li></ul><br><h3>  System structure </h3><br>  It is worth saying that the system can be divided into 3 blocks: the main module, the buttons of the players (4 pieces) and connecting cables.  The system contains 4 player buttons.  If the player managed to press before the others, then the LED on the button lights up. <br><br>  The console lead.  If a player has pressed a button on his console, then on the main unit the diode corresponding to the player‚Äôs button lights up.  This module selects the game mode.  The facilitator has two Start and Reset buttons.  Depending on the game using these buttons turns on and resets the timer. <br><br>  Signals come to Arduino from buttons.  If the button is pressed, the diode on the button and on the master console lights up and the buzzer sounds.  This is the main concept. <br><br>  The buttons and the master console are connected via an Ethernet cable.  A button goes to the ground, a logical unit and a signal that turns the LED on and off, and a signal comes from the button to the main module by pressing the button. <br><br><h3>  Start of development </h3><br>  We started with the simplest.  On the breadboard board assembled circuit, which includes a diode.  It all worked!  Moving on.  Connected Arduino and buttons, when clicked on which the diodes light up.  And here we are faced with the problem of bounce buttons. <br><br><img src="https://habrastorage.org/files/d22/348/1cb/d223481cb1be4a3285568df3cd652c7e.jpg"><br><br>  In the buttons you need to remove the signal bounce, otherwise the system will think that the button is pressed many times.  For the players' buttons, this is not very scary, we still catch the first press, but on the presenter‚Äôs start button we have to get rid of the bounce, because in the brain-ring you need to know how many times Start is pressed.  For this purpose, the Schmitt trigger, a capacitor and a resistor are included in the button circuit.  About bounce can be read <a href="https://uscr.ru/drebezg-kontaktov-i-sposoby-podavleniya-drebezga/">here</a> . <br><br><img src="https://habrastorage.org/files/061/5b4/923/0615b49238a443c5ad80be5e2d2dce68.jpg"><br><br>  Both the buttons and the main module use LEDs.  But 5V is too much voltage for them.  Therefore, resistors are connected in series to prevent the diodes from burning.  Calculate the resistance of resistors <a href="http://www.casemods.ru/services/raschet_rezistora.html">here</a> .  Due to the fact that all the LEDs are the same, we needed 8 resistors of 100 Ohms. <br><br><img src="https://habrastorage.org/files/c1b/e5d/d04/c1be5dd0485a445db576115b7309adb4.jpg"><br><br>  Game mode is selected using DIP-SWITCH: <br><br><ol><li>  Brain Ring </li><li>  What?  Where?  When? </li><li>  Erudite quartet, Troika, Own game (the system in these games is the same) </li></ol><br><h3>  Software part </h3><br>  Laziness is the key to success. <br><br>  In parallel with the development of the scheme was written code.  It was obvious that button presses should be handled through interrupts.  After reading about the 2 external interrupts INT0 and INT1, we were upset because for as many as 6 buttons of two interrupts is not enough and we will have to increase the bit width through the register.  Since we faced hardware things live for the first time, it was all difficult and incomprehensible for us.  In general, we are not very happy about this fact.  Not believing that our problem could not be solved in any other way, we came across Pin Change Interrupt Requests, which were ideally suited for our project.  No registers! <br><br>  You can get acquainted with interruptions <a href="http://playground.arduino.cc/Main/PinChangeInterrupt">here</a> . <br><br>  In our brain system, the SET and RESET buttons correspond to the D8 and D9 pins, and the user buttons to A0-A3.  Therefore, we have defined only two interrupt handlers for each of the used interrupt groups. <br><br><ul><li>  ISR (PCINT0_vect) - for the master buttons. </li><li>  ISR (PCINT1_vect) - for custom buttons. </li></ul><br>  Interrupts can be defined for each group and each pin separately.  This is done by the control and mask registers, in which the corresponding values ‚Äã‚Äãmust be set.  Read more about configuring and resolving interrupts <a href="https://sites.google.com/site/qeewiki/books/avr-guide/external-interrupts-on-the-atmega328">here</a> . <br><br>  Interrupt handlers interrogate the pins in turn to determine which button was pressed.  This situation is one of the limitations of these interrupts.  The brain system must respond to button presses, so the pin value is compared to the HIGH level (that is, the button was pressed) in the interrupt handler. <br><br><div class="spoiler">  <b class="spoiler_title">Interrupt Setup</b> <div class="spoiler_text"><pre><code class="cpp hljs">ISR(PCINT0_vect) { noInterrupts(); isPushed = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digitalRead(ADMIN_BUTTON_SET) == HIGH ) { gameMode-&gt;Set(); Timer1.attachInterrupt(TimerInterrupt); gameMode-&gt;SetFalseStart(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digitalRead(ADMIN_BUTTON_RESET) == HIGH) { Timer1.stop(); gameMode-&gt;Reset(); gameMode-&gt;SetFalseStart(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } interrupts(); } ISR(PCINT1_vect){ noInterrupts(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isPushed == <span class="hljs-literal"><span class="hljs-literal">false</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; ARRAY_SIZE(ARRAY_USER_BUTTON); i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (digitalRead(ARRAY_USER_BUTTON[i]) == HIGH){ isPushed = gameMode-&gt;UserButtonPushed(ARRAY_LED[i]); } } } interrupts(); }</code> </pre> <br></div></div><br>  All code is <a href="https://github.com/OxanaKozlova/brain_system">here</a> . <br><br><h3>  Installation </h3><br>  We saw the soldering iron for the first time, so we started with a traditional diode.  Soldered - the diode caught fire!  Then they soldered the buttons.  Checking whether everything was done correctly was difficult enough, because the main module was still on the breadboard. <br><br><img src="https://habrastorage.org/files/3c3/c8e/f3e/3c3c8ef3e79d4b72821a7f5e2f656a9f.jpg"><br><br>  Solder buttons lead, diodes, game mode switch.  In the process, we realized that it was possible to get by with one Schmitt trigger.  Then it should be transferred to the main module, bring the button outputs to it via a network cable, and send signals from its output to the Arduino. <br><br><img src="https://habrastorage.org/files/01c/55f/168/01c55f168f7f4458bc8016cd030a6e49.jpg"><br><br><img src="https://habrastorage.org/files/0ac/0f3/b3d/0ac0f3b3d57c4b459c23fa8639e19258.jpg"><br><br>  In general, the main unit was ready.  But still he was not connected with the buttons of the players.  The basis of the main unit, we took the native board from the router, in which it was advantageous to use RJ-45 connectors.  Although we regretted this a little, for cutting the board and soldering the contacts in the second circle is not the most pleasant thing.  But everything went quite well. <br><br>  We used for transmission logical 1 white-orange conductor, for logical 0 - orange, the signal to the diode - white-green and the signal from the button - green.  Although you can use any, the main thing is to check which cable is used, because there are various options for crimping. <br><br>  Now the main module and buttons were connected and the system was almost ready, but there was one bug that was not on the breadboard.  If the button was not connected to the main module, the system thought that this button was pressed.  On the Internet, we found a solution - a tightening resistor. <br><br>  In order not to receive ‚Äúno‚Äù signals to Arduino (when the button is not connected at all) in the main module you need to put a clamping resistor (from 10 kOhm) to each button output.  When the open circuit unwanted current will go through the resistor to the ground, and when closed due to the large resistance of the resistor, the signal will go to the input contact. <br><br>  After solving this problem, everything worked. <br><br><img src="https://habrastorage.org/files/f25/c90/5ff/f25c905ffcb242b69314d4ea50295fb0.jpg"><br><br><h3>  Features of game modes </h3><br>  Features of the brain ring.  If the start was not pressed, the system determines the pressing of the buttons as a false start.  If the start is pressed for the first time, the system will wait 20 seconds for pressing the buttons, after the time has elapsed, the system will beep.  If during this time the team still knows the correct answer and presses the button, then the corresponding signal sounds, and the timer in turn stops.  In accordance with the rules, in the event of an incorrect response, other teams should be able to respond.  To do this, after a second press on the start, the timer will start for 10 seconds.  The reset button resets the system, it is pressed before reading the next question. <br><br><h4>  Features What?  Where?  When? </h4><br>  After pressing Start, a beep sounds.  A beep sounds after 50 and 60 seconds.  In the rest of the games, only button presses are trapped.  Thanks to the convenience of working with Arduino, you can implement other games: change the timer, allow false start, etc.  This can be done by adding the appropriate code. <br><br><img src="https://habrastorage.org/files/32e/1e3/b77/32e1e3b775e54fffbf496efe4871b8d8.jpg"><br><br><img src="https://habrastorage.org/files/8f1/554/8d3/8f15548d31f74f61b2cac5ff0e3ad3c2.jpg"><br><h3>  Conclusion </h3><br>  It works and thank God.  Since this was our first hardware experience, we are pleased with the results.  And not only by the fact that everything worked connected on the breadboard, but also as a fully assembled device.  A full-fledged brain-system with modes, players and moderators has been released.  As an enhancement to the system, you can add an outlet for the speakers so that you can play in big tournaments. <br>  As for the Arduino board, it was easy and pleasant to work.  On the Internet, there is enough information and simple tutorials on assembling useful and interesting things that are not the easiest for an unknowing person.  This may well turn into a hobby. <br><br>  Oksana Kozlova and Marina Bardiyan took part in the project. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/5YBi-Ui1LPY%3Ffeature%3Doembed&amp;xid=17259,15700002,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiLpjhzuBLFeFefhExc1P1jQeMVhA" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/394359/">https://habr.com/ru/post/394359/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../394349/index.html">Collecting RNA from non-living building blocks without the help of enzymes is real</a></li>
<li><a href="../394351/index.html">Chicago police predict who can shoot and be shot</a></li>
<li><a href="../394353/index.html">Andy Grove about the computer market and its players</a></li>
<li><a href="../394355/index.html">Free Wi-Fi will appear on all ground transportation in Moscow until the end of the year.</a></li>
<li><a href="../394357/index.html">Linking the Digital Lab NR05 to the Internet of Things</a></li>
<li><a href="../394361/index.html">Iron based solar panels</a></li>
<li><a href="../394365/index.html">Tesla is preparing a new Roadster</a></li>
<li><a href="../394367/index.html">Online fraud research</a></li>
<li><a href="../394371/index.html">Review Skolkovo Robotics International Conference 2016</a></li>
<li><a href="../394373/index.html">Prospective nano motors can accumulate and use light energy for movement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
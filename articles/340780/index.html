<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programming for 3CX in C #: use the 3CX Call Control API in the Call Flow Designer development environment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Writing programs for the 3CX system in C # can be a somewhat unusual exercise for an aspiring IT professional or someone who has not pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programming for 3CX in C #: use the 3CX Call Control API in the Call Flow Designer development environment</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  Writing programs for the 3CX system in C # can be a somewhat unusual exercise for an aspiring IT professional or someone who has not previously experienced writing code.  However, this skill will be very useful and in demand, if you are faced with the task of creating truly complex, functional or custom voice applications. <br><br>  There are a number of powerful rapid development environments, but they all require professional pre-tune-ups and occupy a fair amount of disk space.  Therefore, I tried to limit myself to a compact solution, but with support for the IntelliSense function.  Microsoft IntelliSense well highlights errors in the code and automatically complements expressions.  Of course, if you are already a C # guru, this article may not be so interesting.  A notebook is enough for a professional! <a name="habracut"></a><br><br><h2>  Preparing a C # Development Environment Based on Visual Studio Code </h2><br>  1. Install .NET via the Turn Windows features on or off Applet or Windows Update. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. Install <a href="">3CX Call Flow Designer</a> . <br><br>  3. Download the <a href="">3CX API Documentation Package</a> .  You will need the 3CXObjectModel.2.0.0.0_v15.chm file from the archive, which contains the description of the classes, methods and properties of 3CX objects. <br><br>  4. Download <a href="https://code.visualstudio.com/">Visual Studio Code</a> .  This is a small, intelligent code editor.  During installation, you can set checked options to simplify further work. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/540/229/fed/540229fed340d6dcdfb994012eab06a5.png"><br><br>  5. Install <a href="https://go.microsoft.com/fwlink/%3Flinkid%3D848827">.NET Core SDK</a> and <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D49978">.NET 4.6.1 SDK</a> <br><br>  6. Download ZIP archive with C # demo script via <a href="https://www.3cx.com/community/attachments/project1-zip.5860/">this link</a> .  The archive contains the project file Project1.csproj, which is basically similar to the OMSamples.csproj file from the previously downloaded 3CX API documentation archive.  Unzip and click on the file Project1.csproj, which opens in the VS Code application. <br><br>  7. In the VS Code environment, install the extension for C #.  To do this, click Show Recommendation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c51/9ab/5ec/c519ab5ec63907a57f8a0c6bc7214e02.png"><br><br>  Then install all the recommended extensions.  After installation, do not forget to click the blue Reload button. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccf/d4b/0c0/ccfd4b0c0e3e2d8bf738796b5a12da16.png"><br><br>  8. In the last step, you need to install some C # dependencies.  Go to Explorer&gt; Libraries&gt; Project1.cs, and they will install automatically. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be3/063/b7c/be3063b7c3f2af15e9984c64dcd999af.png"><br><br>  And now you can start programming.  During the creation of the application, the development environment will automatically correct your mistakes, supplement operators, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/317/cc7/6c3/317cc76c314ea2be35973e37aed42b27.png"><br><br>  If you have never done programming, and, in particular, in C #, I can recommend <a href="https://www.microsoftpressstore.com/store/begin-to-code-with-c-sharp-9781509301157">this tutorial</a> . <br><br>  The demo application Project1 performs custom settings for the Call Queue parameters.  Function <br><br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetQueueParams</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> strQueueNumber, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bPosAnnounce, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ushort</span></span></span></span><span class="hljs-function"><span class="hljs-params"> usTimeout</span></span></span><span class="hljs-function">)</span></span></code> </pre> <br>  uses three parameters <br><br>  <b>strQueueNumber</b> is the extension number of the Call Queue, with the parameters of which we work. <br>  <b>bPosAnnounce</b> - enable or disable the message to subscribers about their place in the Queue. <br>  <b>usTimeout</b> - waiting timeout in the queue. <br><br>  Classes are described in the 3CX Call Control API documentation that we downloaded earlier.  The program performs the following actions with the parameters of the Queue (extension 801): <br><br><ul><li>  From 00:00 to 11:59 the number of the subscriber in the queue is pronounced, and the subscriber waits for 5 minutes. <br></li><li>  From 12:00 to 23:59 the number of the subscriber is not pronounced, and the waiting timeout is 2 minutes. <br></li></ul><br>  If nothing is highlighted in red in the VS Code editor, there are no formal errors, and the program can be used in the 3CX Call Flow Designer. <br><br><h2>  Using C # Script in 3CX Call Flow Designer </h2><br>  General information about using 3CX Call Flow Designed is contained in <a href="https://www.3cx.com/docs/manual/">the user manual</a> and <a href="https://habrahabr.ru/company/3cx/blog/339694/">article on this blog</a> . <br><br>  1. Make a copy of the DateTimeRouting CFD demo project folder, which is located in the Documents \ 3CX Call Flow Designer Demos folder, to experiment on a copy of the original application that comes with the distribution. <br><br>  2. Copy the C # script (in our case Project1.cs) into the project's Libraries CFD folder and give it a recognizable name, for example, QueueAdjust.cs. <br><br>  3. Modify the original project, leaving two branches and adding the LaunchExternalScript component to each of them. <br><br>  4. In the first component of LaunchExternalScript1, set the properties according to our task and the semantics of the C # script. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ea8/0b7/db5/ea80b7db5412db51472027a59c50e001.png"><br><br>  5. In the second component, LaunchExternalScript2, also set the properties for the second branch (time range). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7bb/894/0ca/7bb8940cafae04b5b0a48a2bcd00bedb.png"><br><br>  6. Compile and place the application in the service Call Queue, as described in the last section of the <a href="https://habrahabr.ru/company/3cx/blog/339694/">previous article</a> . <br><br><h2>  Conclusion </h2><br>  3CX Call Control API, which is being developed for, is a powerful tool for managing calls in the PBX, and the PBX itself.  For example, the API allows you to programmatically manage current calls (make, disconnect, transfer, record, etc.), create and modify users (extensions), manage forwarding rules and user statuses, create conferences, administer IP phones and much more.  Read more about it <a href="https://www.3cx.com/docs/call-control-api/">here</a> .  However, please note that a separate server REST API is currently used to integrate 3CX V15.5 with the CRM system.  For example, <a href="https://www.3cx.com/docs/bitrix24-crm-integration/">here</a> is an example of server CRM integration with Bitrix24. </div><p>Source: <a href="https://habr.com/ru/post/340780/">https://habr.com/ru/post/340780/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340770/index.html">Introduction to Beautiful Capi, C ++ wrapper creation tool for C ++ libraries</a></li>
<li><a href="../340772/index.html">Evolutionary Computing: Learning to Walk a Stool</a></li>
<li><a href="../340774/index.html">My rules are a good design system. Components and interface architecture in Figma</a></li>
<li><a href="../340776/index.html">Isomorphic React JS + Spring Boot application</a></li>
<li><a href="../340778/index.html">Method of formalized models as an alternative to neural networks</a></li>
<li><a href="../340782/index.html">Fake cryptocurrency trading applications from Google Play were stolen by data</a></li>
<li><a href="../340784/index.html">Yandex. Blitz. 12 algorithmic problems of the qualifying round and their analysis</a></li>
<li><a href="../340786/index.html">EdHack 2017 results - AR and VR in education</a></li>
<li><a href="../340788/index.html">How to integrate with Cisco security solutions? Overview of two dozen APIs available to all</a></li>
<li><a href="../340792/index.html">A short course of machine learning or how to create a neural network to solve the scoring problem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
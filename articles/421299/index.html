<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mask R-CNN: Modern Neural Network Architecture for the Segmentation of Objects in Images</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The times when one of the most urgent tasks of computer vision was the ability to distinguish pictures of dogs from pictures of cats, are already in t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mask R-CNN: Modern Neural Network Architecture for the Segmentation of Objects in Images</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/3a/to/yo/3atoyoxuibmk5vtohjur9hsag-s.jpeg"><br><br>  The times when one of the most urgent tasks of computer vision was the ability to distinguish pictures of dogs from pictures of cats, are already in the past.  At the moment, neural networks are able to perform much more complex and interesting tasks on image processing.  In particular, the network with the Mask R-CNN architecture makes it possible to select the outlines (‚Äúmasks‚Äù) of different objects in photographs, even if there are several such instances, they have different sizes and partially overlap.  The network is also capable of recognizing the poses of people in an image. <br><a name="habracut"></a><br>  Earlier this year I had the opportunity to participate in the Data Science Bowl 2018 competition at Kaggle for educational purposes.  For educational purposes, I used one of those models that generously lay out some participants in high positions.  It was a neural network with the Mask R-CNN architecture, recently developed by Facebook Research.  (It is worth noting that the winning team still used a different architecture - U-Net. Apparently, it is more suitable for biomedical tasks, to which Data Science Bowl 2018 belonged). <br>  Since the goal was to familiarize ourselves with the tasks of Deep Learning, and not to occupy a high place, after the end of the competition, there was a strong desire to understand how the used neural network was ‚Äúunder the hood‚Äù.  This article presents a summary of information obtained from the original documents from arXiv.org and several articles on Medium.  The material is purely theoretical in nature (although at the end there are references about practical application), and it does not contain more than it has in the indicated sources.  But there is little information on the topic in Russian, so perhaps the article will be useful to someone. <br><br>  All illustrations are from foreign sources and belong to their rightful owners. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Computer vision task types </h4><br>  Usually, modern computer vision tasks are divided into four types (there were no translations of their names even in Russian sources, so in English, so as not to create confusion): <br><br><ul><li>  <strong>Classification</strong> - image classification by the type of object that it contains; </li><li>  <strong>Semantic segmentation</strong> - the definition of all pixels of objects of a particular class or background in the image.  If several objects of the same class overlap, their pixels are not separated from each other; </li><li>  <strong>Object detection</strong> - detection of all objects of the specified classes and definition of the covering frame for each of them; </li><li>  <strong>Instance segmentation</strong> - the definition of the pixels belonging to each object of each class separately; </li></ul><br>  On the example of the image with balloons from <a href="https://habr.com/ru/post/421299/">[9],</a> this can be illustrated as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vl/lb/ls/vllblshuihjex9jlk7_qdfu2lem.jpeg"></div><br><br><h4>  Evolutionary Development Mask R-CNN </h4><br>  The concepts underlying the Mask R-CNN have undergone a phased development through the architecture of several intermediate neural networks that solved different tasks from the list above.  Probably the easiest way to understand the principles of operation of this network is to consistently consider all these stages. <br><br>  Without dwelling on basic things like backpropagation, non-linear activation functions, and what the multilayer neural network in general is like, briefly explain how the layers of Convolution Neural Networks work are probably worth it (R-CNN). <br><br><h4>  Convolution and MaxPooling </h4><br>  The convolutional layer allows you to combine the values ‚Äã‚Äãof adjacent pixels and highlight the more generalized features of the image.  To do this, in the picture consistently slide a square window of a small size (3x3, 5x5, 7x7 pixels, etc.) called the kernel.  Each element of the core has its own weight multiplied by the value of the image pixel on which the core element is currently superimposed.  Then the numbers obtained for the whole window are added together, and this weighted sum gives the value of the next attribute. <br><br>  To obtain the matrix ("maps") of the features of the entire image, the core is sequentially shifted horizontally and vertically.  In the next layers, the convolution operation is applied already to feature maps obtained from the previous layers.  Graphically, the process can be illustrated as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sm/sr/uh/smsruhxov2f8y-utzusqaserm0i.png"></div><br><br>  An image or feature maps within a single layer can be scanned not by one, but by several independent filters, thus giving not only one map to output, but several (they are also called ‚Äúchannels‚Äù).  The adjustment of the weights of each filter is done using the same backpropagation procedure. <br><br>  Obviously, if the filter core does not go beyond the image when scanning, the dimension of the feature map will be less than the original image.  If you want to keep the same size, apply the so-called paddings - the values ‚Äã‚Äãthat complement the image along the edges and which are then captured by the filter along with the actual pixels of the image. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z_/po/ss/z_possqrsfzjlt_ecjdvqhniyoa.jpeg"></div><br>  In addition to paddings, strides also affect the change in dimension - the values ‚Äã‚Äãof the step with which the window moves through the image / map. <br><br>  Convolution is not the only way to obtain a generalized characteristic of a group of pixels.  The easiest way to do this is to select one pixel by a given rule, for example, the maximum one.  This is exactly what the MaxPooling layer does. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b6/0r/al/b60ralzomgx7ij3gkn6zmz4ajfo.jpeg"></div><br>  Unlike convolution, maxpooling is usually applied to non-intersecting groups of pixels. <br><br><h4>  R-CNN </h4><br>  The R-CNN (Regions With CNNs) network architecture was developed by a team from UC Berkley to apply Convolution Neural Networks to the object detection task.  The approaches to solving such problems that existed at that time approached the maximum of their capabilities and did not significantly improve their performance. <br><br>  CNN did well in classifying images, and on this network they were essentially applied to the same.  For this purpose, not all of the entire image was submitted to the CNN input, but regions previously pre-allocated in another way, which presumably contain some objects.  At that time there were several such approaches, the authors chose <a href="https://www.koen.me/research/selectivesearch/">Selective Search</a> , although they indicate that there are no particular reasons for choosing it. <br><br>  As a CNN network, a ready-made architecture was also used - <a href="http://caffe.berkeleyvision.org/">CaffeNet</a> (AlexNet).  Such neural networks, like others for the ImageNet image set, are classified into 1000 classes.  R-CNN was developed to detect objects of a smaller number of classes (N = 20 or 200), so the last CaffeNet classification layer was replaced with a layer with N + 1 outputs (with an additional class for the background). <br><br>  Selective Search yielded about 2000 regions of different sizes and aspect ratios, but CaffeNet takes as input the images of a fixed size of 227x227 pixels, so before submitting the regions to the network input they had to be modified.  For this, the image from the region was enclosed in the smallest covering square.  Along the (smaller) side, on which the fields were formed, several ‚Äúcontextual‚Äù (surrounding the region) image pixels were added, the rest of the field was not filled with anything.  The resulting square was scaled to size 227x227 and fed to the input of CaffeNet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/wq/4r/iwwq4rzk515ia1og2-nybxcs5ws.jpeg"></div><br>  Despite the fact that CNN trained to recognize the N + 1 classes, in the end it was used only to extract a fixed 4096-dimensional feature vector.  N linear SVMs were engaged in the direct determination of the object in the image, each of which carried out a binary classification according to its type of objects, determining whether there is one in the transferred region or not.  In the original document, the whole procedure is illustrated by the following scheme: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6i/zz/rh/6izzrhggbprdgbpbqz-qa7lfreu.jpeg"></div><br>  The authors argue that the classification process in SVM is very productive, representing in essence just matrix operations.  Characteristic vectors obtained from CNN are combined across all regions into a 2000x4096 matrix, which is then multiplied by a 4096xN matrix with SVM weights. <br><br>  It should be noted that regions obtained with the help of Selective Search <em>can</em> only contain some objects, and it is not a fact that they contain all of them.  Whether a region is considered to contain an object or not is determined by the <strong>Intersection over Union (IoU) metric</strong> .  This metric is the ratio of the area of ‚Äã‚Äãintersection of a rectangular candidate region with a rectangle, actually encircling the object, to the area of ‚Äã‚Äãthe union of these rectangles.  If the ratio exceeds a predetermined threshold, the candidate region is considered to contain the desired object. <br><br>  IoU was also used to screen out an excessive amount of regions containing a specific object (non-maximum suppression).  If the IoU of a certain region with a region that received the maximum result for the same object was above a certain threshold, the first region was simply discarded. <br><br>  In the course of the error analysis procedure, the authors also developed a method to reduce the error in highlighting the enclosing frame of the object - the bounding-box regression.  After classifying the content of the candidate region, using the linear regression, four parameters were determined on the basis of the characteristics from CNN - (dx, dy, dw, dh).  They described how much it is necessary to shift the center of the region's frame in x and y, as well as how much to change its width and height in order to more accurately cover the recognized object. <br><br>  Thus, the procedure for detecting objects by the R-CNN network can be divided into the following steps: <br><br><ol><li>  Selection of candidate regions with the help of selective search. </li><li>  Conversion of the region to the size taken by CNN CaffeNet. </li><li>  Receiving using CNN 4096-dimensional feature vector. </li><li>  Conduct N binary classifications of each feature vector using N linear SVMs. </li><li>  Linear regression of region frame parameters for more accurate coverage of the object </li></ol><br>  The authors noted that the architecture developed by them also showed itself well in the semantic segmentation task. <br><br><h4>  Fast R-CNN </h4><br>  Despite good results, the performance of R-CNN was still low, especially for deeper than CaffeNet networks (such as VGG16).  In addition, training for the bounding box regressor and SVM required that a large number of features be stored on disk, so it was expensive in terms of storage size. <br><br>  The authors of Fast R-CNN proposed to speed up the process at the expense of a couple of modifications: <br><br><ul><li>  Pass through CNN, not each of the 2,000 candidate regions individually, but the entire image.  The proposed regions are then superimposed on the resulting common feature map; </li><li>  Instead of independent training of three models (CNN, SVM, bbox regressor), combine all the training procedures into one. </li></ul><br>  Conversion of signs that fell into different regions to a fixed size was performed using the <strong>RoIPooling</strong> procedure.  A region window of width w and height h was divided into a grid having H √ó W cells of size h / H √ó w / W.  (The authors of the document used W = H = 7).  Max Pooling was performed for each such cell to select only one value, thus giving the resulting H √ó W trait matrix. <br><br>  Binary SVMs were not used, instead, the selected features were transferred to a fully connected layer, and then to two parallel layers: softmax with K + 1 outputs (one for each class + 1 for the background) and a bounding box regressor. <br><br>  The overall network architecture looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yt/e-/9u/yte-9u2kp27hykwg9m1n98w6upg.png"></div><br>  For joint learning of the softmax classifier and bbox regressor, a combined loss function was used: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>L</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mi>u</mi><mo>,</mo><msup><mi>t</mi><mi>u</mi></msup><mo>,</mo><mi>v</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>l</mi><mi>s</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>d</mi><mi>a</mi><mo stretchy=&quot;false&quot;>[</mo><mi>u</mi><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>e</mi><mn>1</mn><mo stretchy=&quot;false&quot;>]</mo><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>o</mi><mi>c</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><msup><mi>t</mi><mi>u</mi></msup><mo>,</mo><mi>v</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="51.553ex" height="2.66ex" viewBox="0 -832 22196.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-70" x="1071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="1574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="2019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="2592" y="0"></use><g transform="translate(3037,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="3903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="4348" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="4834" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="5501" y="0"></use><g transform="translate(6557,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="433" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-73" x="732" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="8188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-70" x="8578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="9081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="10099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2B" x="10711" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="11962" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="12260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6D" x="12790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-62" x="13668" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-64" x="14098" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="14621" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-5B" x="15151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="15429" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-67" x="16252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-65" x="16732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="17199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-5D" x="17699" y="0"></use><g transform="translate(17978,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6F" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="784" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="19620" y="0"></use><g transform="translate(20009,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="20876" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="21321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="21806" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>L</mi><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mi>u</mi><mo>,</mo><msup><mi>t</mi><mi>u</mi></msup><mo>,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>l</mi><mi>s</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mi>u</mi><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>d</mi><mi>a</mi><mo stretchy="false">[</mo><mi>u</mi><mtext>&nbsp;</mtext><mi>g</mi><mi>e</mi><mn>1</mn><mo stretchy="false">]</mo><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>o</mi><mi>c</mi></mrow></msub><mo stretchy="false">(</mo><msup><mi>t</mi><mi>u</mi></msup><mo>,</mo><mi>v</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L (p, u, t ^ u, v) = L_ {cls} (p, u) + \ lambda [u \ ge1] L_ {loc} (t ^ u, v) </script></p><br>  Here: <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> u </script>  - class of the object actually depicted in the candidate region; <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>l</mi><mi>s</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>p</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>u</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.706ex" height="2.66ex" viewBox="0 -832 9345.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="433" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-73" x="732" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="1631" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-70" x="2020" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="2524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="2969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="4209" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="5265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="6293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6F" x="6592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-67" x="7077" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="7558" y="0"></use><g transform="translate(7947,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="8956" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>l</mi><mi>s</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mi>u</mi><mo stretchy="false">)</mo><mo>=</mo><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>u</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-3"> L_ {cls} (p, u) = - \ log (p_ {u}) </script>  - log loss for class u; <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>v</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>v</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>v</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>v</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>w</mi></mrow></msub><mo>,</mo><msub><mi>v</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.457ex" height="2.78ex" viewBox="0 -832 7946.9 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="763" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="1819" y="0"></use><g transform="translate(2209,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="686" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="3199" y="0"></use><g transform="translate(3644,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="686" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="4581" y="0"></use><g transform="translate(5026,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-77" x="686" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="6119" y="0"></use><g transform="translate(6564,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-76" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-68" x="686" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="7557" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>v</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>v</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi></mrow></msub><mo>,</mo><msub><mi>v</mi><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow></msub><mo>,</mo><msub><mi>v</mi><mrow class="MJX-TeXAtom-ORD"><mi>w</mi></mrow></msub><mo>,</mo><msub><mi>v</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-4"> v = (v_ {x}, v_ {y}, v_ {w}, v_ {h}) </script>  - real changes in the scope of the region for more accurate coverage of the object; <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>t</mi><mi>u</mi></msup><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msubsup><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>x</mi></mrow><mi>u</mi></msubsup><mo>,</mo><msubsup><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>y</mi></mrow><mi>u</mi></msubsup><mo>,</mo><msubsup><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>w</mi></mrow><mi>u</mi></msubsup><mo>,</mo><msubsup><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>h</mi></mrow><mi>u</mi></msubsup><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.313ex" height="2.901ex" viewBox="0 -832 7884.8 1249" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="513"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="1144" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="2200" y="0"></use><g transform="translate(2589,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="499"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="511" y="-211"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="3456" y="0"></use><g transform="translate(3901,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="499"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="511" y="-212"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="4767" y="0"></use><g transform="translate(5212,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="499"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-77" x="511" y="-212"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="6180" y="0"></use><g transform="translate(6626,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="511" y="499"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-68" x="511" y="-463"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="7495" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>t</mi><mi>u</mi></msup><mo>=</mo><mo stretchy="false">(</mo><msubsup><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>x</mi></mrow><mi>u</mi></msubsup><mo>,</mo><msubsup><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>y</mi></mrow><mi>u</mi></msubsup><mo>,</mo><msubsup><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>w</mi></mrow><mi>u</mi></msubsup><mo>,</mo><msubsup><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>h</mi></mrow><mi>u</mi></msubsup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-5"> t ^ u = (t_ {x} ^ u, t_ {y} ^ u, t_ {w} ^ u, t_ {h} ^ u) </script>  - predicted changes in the scope of the region; <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>o</mi><mi>c</mi></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.815ex" height="2.419ex" viewBox="0 -780.1 1642.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6F" x="298" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="784" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>o</mi><mi>c</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-6"> L_ {loc} </script>  - loss-function between the predicted and real changes in the frame; <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><mi>u</mi><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>e</mi><mn>1</mn><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.566ex" height="2.66ex" viewBox="0 -832 2827 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-5B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="278" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-67" x="1101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-65" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="2048" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-5D" x="2548" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>u</mi><mtext>&nbsp;</mtext><mi>g</mi><mi>e</mi><mn>1</mn><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-7"> [u \ ge1] </script>  - indicator function equal to 1 when <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>e</mi><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.272ex" height="2.298ex" viewBox="0 -728.2 2270 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-67" x="822" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-65" x="1303" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="1769" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi><mtext>&nbsp;</mtext><mi>g</mi><mi>e</mi><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-8"> u \ ge1 </script>  , and 0, when vice versa.  By class <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>u</mi><mo>=</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.591ex" height="1.937ex" viewBox="0 -728.2 2407.1 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-75" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-30" x="1906" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>u</mi><mo>=</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-9"> u = 0 </script>  indicated by the background (ie, the absence of objects in the region). <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>d</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.987ex" height="2.057ex" viewBox="0 -780.1 3439 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-64" x="2386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="2909" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>l</mi><mi>a</mi><mi>m</mi><mi>b</mi><mi>d</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> \ lambda </script>  - coefficient intended to balance the contribution of both loss-functions to the overall result.  In all experiments of the authors of the document, however, it was equal to 1. <br><br>  The authors also mention that in order to speed up the calculations in the fully connected layer, they used the decomposition of the weights matrix according to Truncated SVD. <br><br><h4>  Faster R-CNN </h4><br>  After the improvements made in Fast R-CNN, the mechanism for generating candidate regions turned out to be the bottleneck of the neural network.  In 2015, a team from Microsoft Research was able to make this stage much faster.  They offered to calculate the regions not by the original image, but again by the map of the signs obtained from CNN.  For this, a module has been added called Region Proposal Network (RPN).  The new architecture is entirely as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jf/-3/22/jf-3224hkrudwxi1_7oogb1avg0.png"></div><br>  As part of the RPN, according to the extracted CNN features, they slide along a ‚Äúmini-neural network‚Äù with a small (3x3) window.  The values ‚Äã‚Äãobtained with its help are transmitted in two parallel fully connected layers: the box-regression layer (reg) and the box-classification layer (cls).  The outputs of these layers are based on the so-called anchor-ah: k framework for each position of the sliding window, having different sizes and aspect ratios.  The reg-layer for each such anchor produces 4 coordinates each, correcting the position of the enclosing frame;  The cls-layer produces two numbers each - the probability that the frame contains at least some object or that does not contain.  The document illustrates this pattern: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kj/kj/oz/kjkjozq2gq70fuvf77dbml8-_nw.png"></div><br>  The learning process of reg and cls layers is combined;  loss function they have a common, representing the sum of the loss functions of each of them, with a balancing coefficient. <br><br>  Both RPN layers provide only offers for candidate regions.  Those of them that have a high probability of containing any object are transmitted further to the object detection module and refinement of the covering frame, which is still implemented as Fast R-CNN. <br><br>  In order to share the characteristics obtained in CNN between the RPN and the detection module, the learning process of the entire network is built iteratively, using several steps: <br><br><ol><li>  Initialized and trained to identify candidate regions RPN-part. </li><li>  Using the proposed RPN regions, the Fast R-CNN part is re-trained. </li><li>  A trained detection network is used to initialize the weights for the RPN.  Common convolution layers, however, are captured and only RPN-specific layers are configured. </li><li>  With fixed convolution layers, Fast R-CNN is finally tuned up. </li></ol><br>  The proposed scheme is not unique, and even in its current form, it can be continued with further iterative steps, but the authors of the original research conducted experiments just after such training. <br><br><h4>  Mask R-CNN </h4><br>  Mask R-CNN develops the Faster R-CNN architecture by adding another branch that predicts the position of the mask covering the found object, and thus solves the problem of instance segmentation.  A mask is simply a rectangular matrix, in which 1 at some position means that the corresponding pixel belongs to an object of a given class, 0 means that the pixel does not belong to the object. <br><br><img src="https://habrastorage.org/webt/n3/cs/tp/n3cstpty6ktfwhw6vklswah1rxk.png"><br><br>  Visualization of colorful masks on the original images can give colorful pictures: <br><br><img src="https://habrastorage.org/webt/rd/bp/b9/rdbpb90zk7f9x4vc1sxn_lbr5ju.jpeg"><br><br>  The authors of the document conventionally divide the developed architecture into a CNN-network for computing image features, called the backbone, and head ‚Äî combining the parts responsible for predicting the enclosing frame, classifying the object and determining its mask.  Loss function for them is common and includes three components: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>L</mi><mo>=</mo><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi><mi>l</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>b</mi><mi>o</mi><mi>x</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.164ex" height="2.419ex" viewBox="0 -780.1 10403.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="959" y="0"></use><g transform="translate(2015,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6C" x="433" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-73" x="732" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2B" x="3868" y="0"></use><g transform="translate(4869,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6F" x="429" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="915" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2B" x="6925" y="0"></use><g transform="translate(7925,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-4C" x="0" y="0"></use><g transform="translate(681,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="878" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-73" x="1408" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-6B" x="1877" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>L</mi><mo>=</mo><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi><mi>l</mi><mi>s</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>b</mi><mi>o</mi><mi>x</mi></mrow></msub><mo>+</mo><msub><mi>L</mi><mrow class="MJX-TeXAtom-ORD"><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> L = L_ {cls} + L_ {box} + L_ {mask} </script></p><br>  The selection of the mask occurs in the class-agnostic style: the masks are predicted separately for each class, without prior knowledge of what is depicted in the region, and then the mask of the class that won the independent classifier is simply selected.  It is argued that this approach is more effective than relying on a priori knowledge of the class. <br><br>  One of the main modifications that arose because of the need to predict a mask is a change in the <strong>RoIPool</strong> procedure (calculating a matrix of attributes for a candidate region) to a so-called <strong>RoIAlign</strong> .  The fact is that the feature map obtained from CNN is smaller than the original image, and the region covering the integer number of pixels in the image cannot be displayed in the proportional region of the map with an integer number of features: <br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sr/9i/4c/sr9i4cfa_6eqfiy6urkbezaxtja.png"></div><br><br>  In RoIPool, the problem was solved simply by rounding the fractional values ‚Äã‚Äãto integers.  This approach works fine when highlighting a spanning frame, but the mask calculated on the basis of such data is too inaccurate. <br><br>  In contrast, RoIAlign does not use rounding, all numbers remain valid, and bilinear interpolation at the four nearest integer points is used to calculate feature values. <br><br>  In the original document, the difference is explained as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ml/27/mq/ml27mqsszmzpo4-j0iv-yobw1os.png"></div><br>  Here, the feature map is marked with a dashed grid, and a continuous map displays the signs of the candidate region from the source photo.  4 groups for max pooling with 4 signs indicated by dots in the figure should fall into this region.  Unlike the RoIPool procedure, which, due to rounding, would simply align the region with integer coordinates, RoIAlign leaves points in their current locations, but calculates the values ‚Äã‚Äãof each of them using bilinear interpolation using the four nearest features. <br><br><div class="spoiler">  <b class="spoiler_title">Bilinear interpolation</b> <div class="spoiler_text">  Bilinear interpolation of a function of two variables is performed by applying linear interpolation, first in the direction of one of the coordinates, then in the other. <br>  Suppose you need to interpolate the value of the function <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.607ex" height="2.762ex" viewBox="0 -831.5 2844.7 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="1512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="1957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="2455" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-12"> f (x, y) </script>  at point P with known values ‚Äã‚Äãof the function at surrounding points <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>12</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>21</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>22</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="60.036ex" height="2.762ex" viewBox="0 -831.5 25848.9 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="1877" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="2933" y="0"></use><g transform="translate(3322,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="4349" y="0"></use><g transform="translate(4794,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="5738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="6128" y="0"></use><g transform="translate(6573,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="8450" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="9506" y="0"></use><g transform="translate(9896,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="10922" y="0"></use><g transform="translate(11367,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="12312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="12701" y="0"></use><g transform="translate(13147,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="15024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="16080" y="0"></use><g transform="translate(16469,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="17496" y="0"></use><g transform="translate(17941,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="18885" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="19275" y="0"></use><g transform="translate(19720,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="21597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="22653" y="0"></use><g transform="translate(23043,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="24069" y="0"></use><g transform="translate(24514,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="25459" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>,</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>12</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo stretchy="false">)</mo><mo>,</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>21</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>,</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>22</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-13"> Q_ {11} = (x_ {1}, y_ {1}), Q_ {12} = (x_ {1}, y_ {2}), Q_ {21} = (x_ {2}, y_ {1} ), Q_ {22} = (x_ {2}, y_ {2}) </script>  (see picture below).  To do this, first, the values ‚Äã‚Äãof auxiliary points R1 and R2 are interpolated, and then the value at point P is interpolated based on them. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vh/zx/jz/vhzxjzntxuoypuzl3azusnank4q.png"></div><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.283ex" height="2.762ex" viewBox="0 -831.5 5288.5 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="1491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="2547" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="2936" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="3509" y="0"></use><g transform="translate(3954,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="4899" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> R_ {1} = (x, y_ {1}) </script></p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.283ex" height="2.762ex" viewBox="0 -831.5 5288.5 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="1074" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-3D" x="1491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="2547" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="2936" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2C" x="3509" y="0"></use><g transform="translate(3954,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="4899" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> R_ {2} = (x, y_ {2}) </script></p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2248;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>11</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>21</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="71.301ex" height="2.762ex" viewBox="0 -831.5 30698.8 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="550" y="0"></use><g transform="translate(940,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2248" x="2820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="4126" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-72" x="4677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="5128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="5658" y="0"></use><g transform="translate(6091,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="2638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3211" y="0"></use></g><g transform="translate(9692,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1638" y="0"></use><g transform="translate(2638,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3665" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="13747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="14298" y="0"></use><g transform="translate(14687,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="16286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2B" x="16898" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="18149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-72" x="18699" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="19151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="19680" y="0"></use><g transform="translate(20114,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1184" y="0"></use><g transform="translate(2184,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3211" y="0"></use></g><g transform="translate(23715,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1638" y="0"></use><g transform="translate(2638,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3665" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="27769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="28320" y="0"></use><g transform="translate(28709,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="30309" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><msub><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>‚âà</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>11</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>x</mi><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>21</mn></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-16"> f (R_ {1}) ‚âà \ frac {(x_ {2} -x)} {(x_ {2} -x_ {1})} f (Q_ {11}) + \ frac {(x-x_ { 1})} {(x_ {2} -x_ {1})} f (Q_ {21}) </script></p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2248;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>12</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>22</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="71.301ex" height="2.762ex" viewBox="0 -831.5 30698.8 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="550" y="0"></use><g transform="translate(940,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="2153" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2248" x="2820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="4126" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-72" x="4677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="5128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="5658" y="0"></use><g transform="translate(6091,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="2638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3211" y="0"></use></g><g transform="translate(9692,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1638" y="0"></use><g transform="translate(2638,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3665" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="13747" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="14298" y="0"></use><g transform="translate(14687,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="16286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2B" x="16898" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="18149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-72" x="18699" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="19151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="19680" y="0"></use><g transform="translate(20114,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1184" y="0"></use><g transform="translate(2184,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3211" y="0"></use></g><g transform="translate(23715,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1638" y="0"></use><g transform="translate(2638,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3665" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="27769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="28320" y="0"></use><g transform="translate(28709,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-51" x="0" y="0"></use><g transform="translate(791,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="30309" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><msub><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo stretchy="false">)</mo><mo>‚âà</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>12</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>x</mi><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>Q</mi><mrow class="MJX-TeXAtom-ORD"><mn>22</mn></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-17"> f (R_ {2}) ‚âà \ frac {(x_ {2} -x)} {(x_ {2} -x_ {1})} f (Q_ {12}) + \ frac {(x-x_ { 1})} {(x_ {2} -x_ {1})} f (Q_ {22}) </script></p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><mi>P</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2248;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>y</mi><mo>&amp;#x2212;</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>&amp;#x2212;</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>R</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="66.944ex" height="2.762ex" viewBox="0 -831.5 28823 1189" role="img" focusable="false" aria-hidden="true" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-50" x="940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="1691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2248" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="3665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-72" x="4215" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="4667" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="5196" y="0"></use><g transform="translate(5630,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="2556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3054" y="0"></use></g><g transform="translate(9073,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1556" y="0"></use><g transform="translate(2556,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3501" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="12964" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="13515" y="0"></use><g transform="translate(13904,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="15118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2B" x="15729" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="16980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-72" x="17531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-61" x="17982" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-63" x="18512" y="0"></use><g transform="translate(18945,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1109" y="0"></use><g transform="translate(2109,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3054" y="0"></use></g><g transform="translate(22389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-2212" x="1556" y="0"></use><g transform="translate(2556,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-31" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="3501" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-66" x="26280" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-28" x="26830" y="0"></use><g transform="translate(27220,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-32" x="1074" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/421299/&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiU2G3PYdIKxflG3HEgZLv67Mf9ww#MJMAIN-29" x="28433" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo><mo>‚âà</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>+</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>y</mi><mo>‚àí</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>‚àí</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>R</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-18"> f (P) ‚âà \ frac {(y_ {2} -y)} {(y_ {2} -y_ {1})} f (R_ {1}) + \ frac {(y-y_ {1}) } {(y_ {2} -y_ {1})} f (R_ {2}) </script></p><br>  (more - for example, on <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D1%258F">Wikipedia</a> ) <br></div></div><br>  In addition to the high results in the tasks of instance segmentation and object detection, the Mask R-CNN turned out to be suitable for determining the poses of people in a photograph (human pose estimation).  The key point here is the selection of anchor points (keypoints), such as the left shoulder, right elbow, right knee, etc., which can be used to draw the frame of the human position: <br><br><img src="https://habrastorage.org/webt/o0/jp/uo/o0jpuowfdwhpy2sagmyzt9rm1og.jpeg"><br><br>  To determine the control points, the neural network is trained in such a way that it produces masks in which only one pixel (that same point) has the value 1, and the rest - 0 (one-hot mask).  At the same time, the network is trained to issue K such single-pixel masks, one for each type of reference point. <br><br><h4>  Feature Pyramid Networks </h4><br>  In the experiments on the Mask R-CNN, along with the usual CNN ResNet-50/101 as a backbone, the expediency of using the Feature Pyramid Network (FPN) was also conducted.  They showed that the use of FPN in the backbone gives the Mask R-CNN a gain in both accuracy and performance.  This makes a useful description of this improvement as well, despite the fact that a separate document is dedicated to it and it is not connected with the series of articles under consideration. <br>  The purpose of the Feature Pyramids, as well as image pyramids, is to improve the quality of detection of objects, taking into account the large range of their possible sizes. <br><br>  Feature Pyramid Network feature maps, extracted by successive layers of CNN with decreasing dimension, are considered as a kind of hierarchical ‚Äúpyramid‚Äù called the bottom-up pathway.  At the same time, the feature maps of the lower and upper levels of the pyramid have their own advantages and disadvantages: the former have high resolution, but low semantic, generalizing ability;  the second - on the contrary: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pt/er/ua/pteruatde8ublz1hvl-wdbfg8io.jpeg"></div><br>  The FPN architecture allows you to combine the advantages of upper and lower layers by adding top-down pathway and lateral connections.  To do this, the map of each overlying layer is enlarged to the size of the underlying layer and their contents are elementwise added.  In the final predictions, the resulting maps of all levels are used. <br><br>  Schematically, this can be represented as: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/wv/xt/rgwvxteax0h37vx7um0fqpqhfqo.png"></div><br>  Increasing the size of the top-level map (upsampling) is done by the simplest method - the nearest neighbor, i.e., something like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v4/1d/0i/v41d0ids_x5xqyo2akkpgh5_suo.png"></div><br><h4>  useful links </h4><br>  Original research papers on arXiv.org: <br><br>  1. R-CNN: <a href="">https://arxiv.org/abs/1311.2524</a> <br><br>  2. Fast R-CNN: <a href="https://arxiv.org/abs/1504.08083">https://arxiv.org/abs/1504.08083</a> <br><br>  3. Faster R-CNN: <a href="https://arxiv.org/abs/1506.01497">https://arxiv.org/abs/1506.01497</a> <br><br>  4. Mask R-CNN: <a href="https://arxiv.org/abs/1703.06870">https://arxiv.org/abs/1703.06870</a> <br><br>  5. Feature Pyramid Network: <a href="https://arxiv.org/abs/1612.03144">https://arxiv.org/abs/1612.03144</a> <br><br>  There are a lot of articles on Mask R-CNN on medium.com, they are easy to find.  As references I cite only those that have been read: <br><br>  6. <a href="https://medium.com/%40alittlepain833/simple-understanding-of-mask-rcnn-134b5b330e95">Simple Understanding of Mask RCNN</a> - a summary of the principles of the resulting architecture. <br><br>  7. <a href="https://blog.athelas.com/a-brief-history-of-cnns-in-image-segmentation-from-r-cnn-to-mask-r-cnn-34ea83205de4">A Brief History of CNNs in Image Segmentation: From R-CNN to Mask R-CNN</a> - The history of network development in the same chronological order as in this article. <br><br>  8. <a href="https://medium.com/%40umerfarooq_26378/from-r-cnn-to-mask-r-cnn-d6367b196cfd">From R-CNN to Mask R-CNN</a> is another consideration of the stages of development. <br><br>  9. <a name="Ref9"></a>  <a href="https://engineering.matterport.com/splash-of-color-instance-segmentation-with-mask-r-cnn-and-tensorflow-7c761e238b46">R-CNN and TensorFlow Splash of Color: Instance Segmentation with Mask</a> - implementation of a neural network in the Matterport Opensource library. <br><br>  The last article, in addition to describing the principles of Mask R-CNN, offers the opportunity to try the network in practice: for coloring balloons with different colors on black and white images. <br><br>  In addition, you can practice with the neural network on the model that I used in the kaggle Data Science Bowl 2018 competition (but not only with this model, of course; you can find a lot of interesting things in the Kernels and Discussions sections): <br><br>  10. <a href="https://www.kaggle.com/c/data-science-bowl-2018/discussion/49692">Mask R-CNN in PyTorch by Heng CherKeng</a> .  The implementation involves a number of steps for deployment, the author provides instructions.  The model requires PyTorch 0.4.0, support for GPU computing, NVIDIA CUDA.  If my own system does not meet the requirements, I can recommend images of <a href="https://aws.amazon.com/ru/machine-learning/amis/">Deep Learning AMI</a> for Amazon Virtuals (paid instances with hourly billing, the minimum suitable size, apparently, is p2.xlarge). <br><br>  I also came across here, in Habr√©, an article about using the network from Matterport in processing images with dishes (but without source codes).  Hopefully, the author will only be happy for an additional mention: <br><br>  11. <a href="https://habr.com/company/newprolab/blog/412523/">ConvNets.</a>  <a href="https://habr.com/company/newprolab/blog/412523/">Project prototyping with Mask R-CNN</a> </div><p>Source: <a href="https://habr.com/ru/post/421299/">https://habr.com/ru/post/421299/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421289/index.html">The number of electric cars in Russia increased from 920 to 2500 in a year and a half</a></li>
<li><a href="../421291/index.html">Budget debugger for ESP-32 and its configuration</a></li>
<li><a href="../421293/index.html">Richard Hamming: Chapter 22. Computer-Aided Learning (CAI)</a></li>
<li><a href="../421295/index.html">Attackers can get full remote access to an Android device through a public USB charging port.</a></li>
<li><a href="../421297/index.html">GUI Psychology. Our perception of information and images</a></li>
<li><a href="../421301/index.html">YouTube introduces non-switchable ads for all</a></li>
<li><a href="../421305/index.html">Instant Messengers with Walkie-Talkie (Push-To-Talk, Walkie-Talkie)</a></li>
<li><a href="../421311/index.html">The digest of interesting materials for the mobile developer # 267 (August 20 - August 26)</a></li>
<li><a href="../421317/index.html">When expenses are not expenses, how to correctly understand the company's financial data</a></li>
<li><a href="../421319/index.html">Alibaba, Mail.ru and RDIF plan to develop a joint project in online trading</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
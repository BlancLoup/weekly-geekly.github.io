<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Type-Safe Enumerations in Action Script 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am preparing an article about this pattern in Java. I found the necessary material and understood that the article was quite voluminous and I could ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Type-Safe Enumerations in Action Script 3</h1><div class="post__text post__text-html js-mediator-article">  <i>I am preparing an article about this pattern in Java.</i>  <i>I found the necessary material and understood that the article was quite voluminous and I could not write it right away.</i>  <i>Therefore, I decided to write about this pattern in Flash and look at the reaction of the community.</i> <br><br>  Enumerations is a set of values ‚Äã‚Äã(elements) that are close in meaning.  For example: <br><ul><li>  Light directions - north (north), south (south), east (east), west (west) </li><li>  Type of novel - mystery, classic, fantasy, romance, science-fiction </li><li>  flavors of ice cream - chocolate, vanilla, raspberry, maple </li></ul><br><a name="habracut"></a><br>  Previously, the standard solution for representing enumerated types was the int Enum pattern: <br><br><pre> <code class="hljs pgsql">// <span class="hljs-type"><span class="hljs-type">int</span></span> Enum Pattern - has severe problems! <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const SEASON_WINTER : Number = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const SEASON_SPRING : Number = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const SEASON_SUMMER : Number = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const SEASON_AUTUMN : Number = <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre><br>  This pattern has many flaws.  We will try to list some: <br><ul><li>  <b>Not typesafe</b> - In those places where the season is expected, you can insert any other int value, or, for example, add two seasons, which does not make sense. </li><li>  <b>No namespace</b> ‚Äî It is necessary to use a prefix for constants (in our example, SEASON_) in order to avoid collisions with other sets of constants. </li><li>  <b>Printed values ‚Äã‚Äãare uninformative</b> - Due to the fact that the values ‚Äã‚Äãof constants are just integer values, when they are output to the console (screen, file, etc.), just the value will be displayed, which does not tell anything about the purpose of this constant and about her type. </li></ul><br>  The essence of this pattern is as follows: <br><ul><li>  static constants of a certain type are created (Enum type) </li><li>  The constructor of this type takes the value that it will wrap. </li><li>  This type must have a method that returns a wrapped value. </li></ul><br>  An example for our seasons might look like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs pgsql">package { <span class="hljs-comment"><span class="hljs-comment">/** *    TypeSave Enumeration   ActionScript 3. * * @author Aleh Krutsikau * @version 0.1 */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Season { //     . <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const WINTER : Season = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Season("winter"); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const SPRING : Season = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Season("spring"); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const SUMMER : Season = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Season("summer"); <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static const AUTUMN : Season = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Season("autumn"); private static var _enumCreated:<span class="hljs-type"><span class="hljs-type">Boolean</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; // magic happens here, the static code block { _enumCreated = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } private var _seasonName : String; <span class="hljs-comment"><span class="hljs-comment">/** * . */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> Season(seasonName : String) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_enumCreated) throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Error("The enum is already created."); _seasonName = seasonName; } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> seasonName() : String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _seasonName; } } }</code> </pre><br><br>  Usage example <br><br><pre> <code class="hljs lua">//      public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traceSeason</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(season : Season)</span></span></span></span> { trace(season.seasonName); } traceSeason(Season.WINTER);</code> </pre><br><br>  Using this pattern, we can not be afraid that an unpredictable value will be passed to our method.  For nothing else but Season can be transferred to the method. <br><br>  It is worth noting that in the classical implementation of this pattern, the construct must be private.  But alas, ActionScript 3.0 does not support this. Of course, you could use the nested class.  But, in my opinion, this method is not very beautiful (more details can be found in the article <a href="http://yarovoy.com/2007/10/24/singleton_in_actionscript_3/">Options for implementing the Singleton pattern in ActionScript 3</a> ). <br><br>  There is a more "elegant" solution (by the way, it is given in the example).  AS3 introduces the concept of a static initialization block.  The code that is located in this block is executed when the class is loaded into memory.  This happens before the constructor is called, but, at the same time, after all the static variables of the class are initialized.  Thus, by setting the class instance creation permission flag, we can restrict access to the constructor.  We describe the order of actions performed during this: <br><ol><li>  Our class is loaded into memory. </li><li>  Static variables are initialized. </li><li>  _enumCreate becomes false (default value) </li><li>  The first static constant WINTER is created.  Because  _enumCreate is false, then an instance of this class is beautifully created. </li><li>  The second is being created .... </li><li>  A static initialization block is executed, in which the _enumCreated variable <br>  set to true.  This eliminates the possibility of "manually" creating an instance of the Season class. </li><li>  TA-dah.  Class loaded :) </li></ol><br>  And also, if you want to show something meaningful at trace (Season), then simply overload the toString () method. <br><br>  Sources: <br><ul><li>  <a href="http://yarovoy.com/2007/10/24/singleton_in_actionscript_3/">Options for the implementation of the pattern Singleton in ActionScript 3</a> </li><li>  <a href="http://www.herrodius.com/blog/87">Typesafe Enum Pattern in AS3</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/38978/">https://habr.com/ru/post/38978/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../38969/index.html">Self-organization in web development</a></li>
<li><a href="../38972/index.html">Spammers use photohosting to disguise links</a></li>
<li><a href="../38974/index.html">Project for 7 days. Arguments in favor of a quick start.</a></li>
<li><a href="../38976/index.html">Thursday, September 4</a></li>
<li><a href="../38977/index.html">Report from the Vendexpo exhibition - Krasnodar</a></li>
<li><a href="../38980/index.html">Microsoft, Adobe, Google Chrome and evil banners</a></li>
<li><a href="../38981/index.html">iPhone.MegaFon</a></li>
<li><a href="../38983/index.html">Accelerate with Gears</a></li>
<li><a href="../38984/index.html">Clock Delay - a watch for real geeks for $ 1885</a></li>
<li><a href="../38986/index.html">Augmented reality in your home</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
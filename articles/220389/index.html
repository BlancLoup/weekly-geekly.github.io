<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deploy the application to Heroku using Gradle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of the previous article about the deployment of Ratpack applications on Heroku, today I will tell you about using the Gradle plugin. I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deploy the application to Heroku using Gradle</h1><div class="post__text post__text-html js-mediator-article">  In continuation of the <a href="http://habrahabr.ru/post/220341/">previous article</a> about the deployment of Ratpack applications on Heroku, today I will tell you about using the Gradle plugin.  It was a difficult experience to deploy a simple Ratpack application on Heroku PaaS.  We rummaged through the buildpack's intricacies for deployment on Heroku. The good news is that this is not necessarily bigger. <br>  In this article, I will show an easier way to deploy.  This method does not need to explicitly use the <a href="https://toolbelt.heroku.com/">Heroku Toolbelt</a> and custom <a href="https://devcenter.heroku.com/articles/buildpacks">buildpacks</a> .  Also, you no longer need to have Ruby, RVM, or many other Ruby-related technologies that are not needed by Java / Groovy developers, they don‚Äôt even need to know about this. <br><a name="habracut"></a><br>  All this thanks to the excellent Java API that Heroku has made available for use by us.  This is a simple Java library that allows us to interact directly with Heroku.  Added the ability to work with Git repositories through the <a href="http://www.eclipse.org/jgit/">JGit</a> library provided by the Eclipse Foundation, and we have everything we need to deploy our application from the directory with our project.  The advantage is that all this is wrapped in a Gradle plugin that manages everything on your behalf. <br>  In fact, all we need is the installed JDK, with environment variables in PATH, the installed Gradle, and a good text editor.  Well, let's get started: <br><br><h5>  Configuration </h5><br>  First of all, we need to configure our project <b>build.gradle file</b> as follows: <br><br><pre><code class="bash hljs">buildscript { repositories { ... mavenCentral() maven { url <span class="hljs-string"><span class="hljs-string">'http://dl.bintray.com/vermeulen-mp/gradle-plugins'</span></span> } } dependencies { classpath <span class="hljs-string"><span class="hljs-string">"org.gradle.api.plugins:gradle-heroku:0.9.6"</span></span> } } apply plugin: <span class="hljs-string"><span class="hljs-string">'heroku'</span></span> ... heroku { //get this from heroku apiKey = <span class="hljs-string"><span class="hljs-string">'my-api-key'</span></span> //<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> this on first run <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you don<span class="hljs-string"><span class="hljs-string">'t want a generated name //appName = '</span></span>some-unique-app-name<span class="hljs-string"><span class="hljs-string">' //set this if you are not happy with the default gradlew buildpack //buildpack = '</span></span>http://somebuildpack }</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is setting up our build to use the heroku plugin.  Pay attention to the block of code heroku, there is described the configuration of the plugin.  The only required field here is apiKey.  The appName field is optional for the first run, but must be specified for subsequent launches.  If this field is not specified, Heroku will generate the application name on your behalf and will associate your local git repository with the application instance on Heroku.  If you don‚Äôt like the generated names, you can call your application explicitly when you first start it. <br>  It is also worth noting that <b>apiKey</b> can be extracted from the properties file to resolve security issues. <br>  Next, we need to add the <b>Procfile</b> to the root folder of our project.  This is a small file responsible for booting the application when it is deployed.  The essential feature here is that commands begin with <b>web :</b> .  This will depend on which application you are trying to deploy. <br><br><h5>  Fat Jar apps (Spring Boot and DropWizard) </h5><br>  Create a <b>Procfile</b> in the root folder of our project, add the following content: <br><pre> <code class="bash hljs">--- default_process_types: web: java -jar -Dport=<span class="hljs-variable"><span class="hljs-variable">$PORT</span></span> build/libs/my-springboot-fat.jar</code> </pre><br><br>  Running this command for a Spring Boot or Dropwizard application using <a href="http://fjep.sourceforge.net/">fat.jar</a> is sufficient to start the application. <br><br><h5>  Ratpack </h5><br>  Deploying the Ratpack application is almost as simple, but it requires a bit more tweaking.  First, you need root rights to the root directory of the project, which Gradle uses for naming in the startup script.  This can be done by adding the <b>settings.gradle</b> file to the root folder of your project. <br><br>  Contents of <b>settings.gradle</b> file: <br><pre> <code class="bash hljs">rootProject.name = <span class="hljs-string"><span class="hljs-string">'ratpack'</span></span></code> </pre><br><br>  Next we add our <b>Procfile</b> : <br><pre> <code class="bash hljs">--- default_process_types: web: <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> RATPACK_OPTS=<span class="hljs-string"><span class="hljs-string">"-Dratpack.port=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PORT</span></span></span><span class="hljs-string">"</span></span> &amp;&amp; build/install/ratpack/bin/ratpack build/install/ratpack/ratpack.groovy</code> </pre><br><br><h5>  Buildpacks </h5><br>  If you did not specify the buildpack in the heroku code block in your <b>build.gradle</b> file, the plugin will select the <a href="https://github.com/marcoVermeulen/heroku-buildpack-gradlew">default buildpack</a> .  This buildpack will be used by the gradle wrapper in your project to prepare your application for deployment.  He does the bare minimum, just runs the gradlew command in the project directory.  It also requires that defaultTasks be installed within your build file. <br><br><h5>  Default Tasks </h5><br>  In order for the default buildpack to know which tasks to run, we must specify the task list in the <b>build.gradle</b> file.  For example, to prepare an Ratpack application for deployment, you must add the following tasks: <br><pre> <code class="bash hljs">defaultTasks <span class="hljs-string"><span class="hljs-string">"clean"</span></span>, <span class="hljs-string"><span class="hljs-string">"build"</span></span>, <span class="hljs-string"><span class="hljs-string">"installApp"</span></span></code> </pre><br><br><h5>  Take JDK! </h5><br>  Default buildpack allows us to even choose which JDK to use at runtime.  Simply place the <b>system.properties</b> file in the base project folder with the following content: <br><pre> <code class="bash hljs">java.runtime.version=1.7</code> </pre><br><br>  If the <b>system.properties</b> file <b>is</b> not present in your project, then the buildpack assumes JDK 1.8 on your behalf. <br><br><h5>  Proceed to launch! </h5><br>  Until now, everything was for configuration, now we will launch our application.  Open the terminal and enter the following commands: <br><pre> <code class="bash hljs">$ gradle tasks ... herokuAppCreate - Creates a new application on Heroku. herokuAppDeploy - Deploy the application to Heroku. herokuAppDestroy - Destroy the application on Heroku. herokuAppInfo - Displays comprehensive information about the named application. herokuAppList - Lists all Apps available <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the current user on Heroku. herokuBuildpack - Downloads and explodes the specified buildpack to this project. ...</code> </pre><br><br>  Now we know that we can proceed with the deployment.  Let's start by adding a wrapper to our git: <br><pre> <code class="bash hljs">$ ./gradlew wrapper $ git add gradlew gradle $ git commit -m <span class="hljs-string"><span class="hljs-string">'Add wrapper.'</span></span></code> </pre><br><br>  Next, create an application on Heroku and deploy it: <br><pre> <code class="bash hljs">$ ./gradlew herokuCreateApp $ ./gradlew herokuDeployApp</code> </pre><br><br>  If all is well, now you should have a deployed application on Heroku. <br>  The <a href="https://github.com/marcoVermeulen/gradle-heroku">source</a> code for the <a href="https://github.com/marcoVermeulen/gradle-heroku">gradle plugin</a> and the <a href="https://github.com/marcoVermeulen/heroku-buildpack-gradlew">default builpack</a> can be found on GitHub. <br>  That's all! <br>  We saw how easy it is to get the application deployed on Heroku using the Gradle project.  All we need is an apiKey and some very simple settings to get our app singing sweetly in the clouds.  Deploying the application on Heroku has never been this easy!  The original article is <a href="http://www.wiredforcode.com/blog/2014/02/11/deploy-to-heroku-with-gradle/">here</a> .  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/220389/">https://habr.com/ru/post/220389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../220373/index.html">Personal Finance - Save and Grow</a></li>
<li><a href="../220377/index.html">A new online course on sales in the studio / agency and a little humor about the life of the agency in verse</a></li>
<li><a href="../220379/index.html">Zabbix + Pushbullet: a simple way to push alerts</a></li>
<li><a href="../220381/index.html">Handling touch input in Windows 8 applications</a></li>
<li><a href="../220387/index.html">Self-Documented JAX-WS with XSD Restrictions Support</a></li>
<li><a href="../220391/index.html">New monitors Samsung SD390 and SD590 already in Russia</a></li>
<li><a href="../220393/index.html">Accelerate PHP (with ReactPHP)</a></li>
<li><a href="../220395/index.html">Calvin Klein was unable to select an abusive domain</a></li>
<li><a href="../220397/index.html">Overview of Startup Founder Conferences</a></li>
<li><a href="../220399/index.html">‚ÄúFlappy Bird‚Äù up to 1KB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
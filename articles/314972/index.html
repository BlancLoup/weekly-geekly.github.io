<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is there a future for InfiniBand on Hadoop?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hadoop was created to run on widely used computer chips with a low-speed network connection. But Hadoop clusters have become larger and organizations ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is there a future for InfiniBand on Hadoop?</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/simnetworks/blog/314972/"><img src="https://habrastorage.org/files/21a/65d/abd/21a65dabd1854b32a1acd463cf25255a.png"></a> <br><br>  Hadoop was created to run on widely used computer chips with a low-speed network connection.  But Hadoop clusters have become larger and organizations have exceeded the power limit.  To solve the problem, specialized solutions were found, such as solid state drives and InfiniBand networks, which have a growth margin. <br><br>  InfiniBand was introduced to the world in 2000 as a network protocol that was faster than TCP / IP ‚Äî the original network protocol on Ethernet networks.  Through the use of Remote Direct Memory Access (RDMA), InfiniBand allows you to directly write / copy data from the memory of a remote computer, bypassing the operating system and possible delays. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can get 40 gigabit / sec of bandwidth at the InfiniBand QDR port (Quad Data Rate), which is now the most widely used.  This is 4 times the standard channel width of 10Gigabit Ethernet (10GbE).  You get an increase in speed during port aggregation (including Ethernet). <br><br>  The Ethernet protocol initially occupied a dominant position when choosing for the vast majority of enterprise networks.  At this time, InfiniBand gradually took root in the market of high-performance computer systems, the super speed of InfiniBand and the absence of delays gave an advantage to this protocol in large arrays of parallel clusters.  More than 50% of supercomputers from the TOP 500 last year use InfiniBand.  This protocol is loved by high-speed exchanges, various financial services, and other large users of InfiniBand ports; the most commonly used equipment is InfiniBand made by <a href="http://www.mellanox.com/">Mellanox</a> and <a href="http://www.intel.com/">Intel</a> . <br><br>  But when the InfiniBand protocol was implemented on Hadoop, it showed lower performance compared to InfiniBand performance among supercomputers.  There are several reasons for this.  Many solutions have been positioned towards Ethernet in most enterprise markets.  The perception of InfiniBand as something exotic and very expensive also played a role (which is not always true). <br><br>  This is not news that Hadoop's InfiniBand is far from mainstream.  All distributors of the Hadoop platform have support from Hewlett-Packard, IBM and Dell.  These vendors also support InfiniBand in their respective deployments.  If you look at what implementations are built that use about 20% of Hadoop integrators, you will find out that both Oracle and Teradata support InfiniBand <br><br><h1>  Why choose InfiniBand </h1><br>  A few interesting points that you should pay attention to when using InfiniBand through 10GbE.  There is one person who can see from the inside many points of using InfiniBand-on-Hadoop.  This is Panda Dabalesvor, a professor at the Ohio University School of Computer Science and Engineering and the head of the <a href="http://nowlab.cse.ohio-state.edu/">Network-Based Computing Research Group</a> research group. <br><br><img src="https://habrastorage.org/files/2cc/52c/3b3/2cc52c3b367d4dc6b50f0011106ea83e.png"><br><br>  <i>High-Performance Data Processing Systems (HiBD) Architecture for InfiniBand Libraries for Distributed Hadoop File Structure (HDFS)</i> <br><br>  Panda manages the HiBD project at Ohio University, where he develops, develops and supports the library project for Hadoop versions 1 and 2 (HDFS and MapReduce).  They support native RDMA, which is used to exchange data in InfiniBand.  Apache Hadoop and Hortonworks are now supported in a plugin for Cloudera.  The researchers also wrote code to support InfiniBand in a database that supports memory caching.  This code also works in libraries that support Apache Spark and HBase. <br><br>  Panda, who has been researching in the environment of switched supercomputers for 25 years and who has worked with InfiniBand since it appeared, confirms that InfiniBand is not very common in the Hadoop platform environment, but he expects this to change in the near future. <br>  ‚ÄúThere was a technological breakthrough among supercomputers.  But in the enterprise environment, they have some drawbacks, ‚ÄùPanda told Datanami portal.  "From tz.  Enterprise they caught up with him.  So we need to wait 1-2 years to see a wider use of InfiniBand so to say ‚Äúamong the people‚Äù. <br><br>  Since the HiBD architecture integrated the first InfiniBand library several years ago, the package has been downloaded more than 11,000 times.  According to the <a href="http://hibd.cse.ohio-state.edu/users/">website of the</a> group, it is used by more than 120 organizations around the world. <br><br>  He also noted that the general trend in all implementations of InfiniBand is the desire to achieve maximum scalability and performance while avoiding tight necks in the input-output.  ‚ÄúTraditionally, [Hadoop] was developed on Ethernet, but even if you have 10GbE, especially in large data sets, you will be shocked.  This is exactly the infrastructure where the benefits of our design are obvious, so you can really scale your applications as flexibly as possible and get maximum performance and scalability from them, ‚Äùsaid the researcher. <br><br>  ‚ÄúA common misconception in the Hadoop community regarding InfiniBand is that it is too expensive and too‚Äú good ‚Äùfor clusters in low-cost, most common devices.  This is true if you have small assemblies.  But for larger clusters, InfiniBand is more cost effective than Ethernet. <br><br>  ‚ÄúIf you go to very large cluster systems, InfiniBand FDR is much more efficient and more profitable than 10GbE,‚Äù said the professor.  - "If you have a cluster of 4 or 16 nodes, you will not see the difference, but if you have 1000 nodes, 2000 or 4000 nodes, you will see a significant difference in cost." <br><br>  ‚ÄúAs in the race cars, where the slowest speeds are slowed down by the slowest machines, in Hadoop, clusters may not work fast due to the slower parts of the structures,‚Äù said Panda.  ‚ÄúYou can have very good equipment, but if you have weak tires, you will not get all the benefits of technology.  We see that I / O and the network need to be balanced for the best possible performance. ‚Äù <br><br><h1>  Hadoop caution </h1><br>  Until now, the variable speed on the network has played a major role in the performance of Hadoop, there are other, not quite obvious factors.  As usual, the devil is in the details. <br><br>  In July of this year, Microsoft and the <a href="https://www.bscmsrc.eu/">Barcelona Supercomputing Center</a> launched the Aloja project in order to establish a specification for the performance of the Hadoop platform.  This project has <a href="http://www.enterprisetech.com/2014/11/20/unravelling-hadoop-performance-mysteries/">identified</a> more than 80 customizable Hadoop options that affect performance.  This includes factors related to physical hardware, such as memory size, storage type, and network speed, as well as software factors: number of memory managers and data converters, HDFS block size, and virtual machine size. <br><br>  Project researchers saw that simply adding InfiniBand to a structure does not affect the performance of Apache Hadoop, which is measured in benchmark tests.  However, adding InfiniBand to SSDs on the same network shows a performance increase of 3.5 times compared with SATA and Gigabit Ethernet.  At the same time, simply adding SSDs on a gigabit Ethernet network increases productivity only 2 times. <br><br>  This echoes the opinion of Professor Panda: - ‚ÄúWhat happens if you use SSDs?  Your I / O speed will increase, but it also means that you must have a high-performance network.  When using Ethernet from 1 to 10 gigabits, the benefits are obvious, but with InfiniBand you get more advantages, because at the very foundation of this technology there is an opportunity to load your network more.  This means that you will get better solutions, such as, for example, RDMA, which will work better on networks of this type. ‚Äù <br>  Not everyone lends itself to the ‚Äúcharm‚Äù of InfiniBand.  Eric Samer, the current CTO and co-founder of <a href="http://www.rocana.com/">Rocana</a> , in his <a href="http://www.quora.com/Is-it-worth-using-Infiniband-in-a-Hadoop-cluster-Why-What-is-the-bang4-payoff">post</a> on the Quora website, argues in favor of 10GbE. <br><br>  Erik believes that InfiniBand greatly exceeds the requirements of ordinary users - ‚ÄúThe fact is that as soon as we move to most of all compatible levels of IT infrastructure, there is an overrun of power.  For a number of many reasons, I give not comforting predictions, the actual bandwidth will end at around 25Gb per IP address, through the 4X QDR 40Gb port. ‚Äù  (Honestly, those libraries that Panda develops in the HiBD environment already support InfiniBand from the start, which eliminates the service data flow). <br><br><img src="https://habrastorage.org/files/5f2/daa/02b/5f2daa02bfc04ad3978963ed7f6f2ec4.png"><br><br>  <i>Comparison of Hadoop performance on 10GbE, and InfiniBand over IP and HiBD library for native InfiniBand QDR.</i> <br><br>  Summer talks about his deployed Hadoop 10GbE (possibly through a twisted pair).  ‚ÄúThe ubiquity of Ethernet is a fact that cannot be dismissed, and with platforms such as Hadoop, I tend to say that it is better to rely on technologies that develop network technologies and simplify data transfer (Cloudera Impala, Tez changes in Apache) Hive, etc.).  I also firmly believe that the same data from the cache can be used when transferring in more packets, and this optimizes the transfer of my data from the data center to the recipient on that side. ‚Äù <br><br><h1>  RoCE Application </h1><br>  InfiniBand also competes with new technology, which claims to give the same benefits as InfiniBand, but via Ethernet.  This is called RDMA over a converged Ethernet network (RDMA over Converged Ethernet - RoCE) and shows faster throughput and lower latency than traditional Ethernet. <br><br>  Professor Panda‚Äôs research team also develops RoCE libraries for switches and Hadoop network devices and software solutions that support memory caching.  Mellanox supports both the RoCE protocol and the InfiniBand protocol in its devices. <br><br>  Whatever technology users choose for the connection, Professor Panda advises to think carefully and weigh the pros and cons of the various options - ‚ÄúThe question is what quality of routing and control is necessary.  If an organization feels comfortable with a good sysadmin who understands Ethernet, the RoCE option is preferable for them.  But if some organizations have good competence in InfiniBand, then there can be no agony of choice between InfiniBand or RoCE. ‚Äù <br><br>  The volume of data is growing, and companies need to more quickly analyze this data.  This forces them to build new clusters ‚Äî large and fast ‚Äî with SSDs and multi-core processors.  It becomes obvious that the RDMA approach ‚Äî or InfiniBand or RoCE ‚Äî needs to be adapted by large data-intensive organizations. <br><br>  Related Links: <br><br>  ¬ª <a href="http://www.enterprisetech.com/2014/11/20/unravelling-hadoop-performance-mysteries/">Unravelling Hadoop Performance Mysteries (EnterpriseTech)</a> <br>  ¬ª <a href="http://www.datanami.com/2013/04/08/why_big_data_needs_infiniband_to_continue_evolving/">Why Big Data Needs InfiniBand to Continue Evolving</a> <br>  ¬ª <a href="https://habrahabr.ru/post/240405/">Hadoop: what, where and why</a> <br>  ¬ª <a href="https://habrahabr.ru/company/simnetworks/blog/313750/">The most popular network for supercomputers or Why did we choose InfiniBand?</a> <br><br> <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink"><img src="https://habrastorage.org/files/c2e/22e/3bd/c2e22e3bd22c4a0985f83c601d0394f4.png"></a> <br><br><hr><br>  <a href="https://www.sim-networks.com/protected-cloud%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">SIM-CLOUD - Fail-safe cloud in Germany</a> <br><br>  <a href="https://www.sim-networks.com/dedicated-custom%3Fpid%3D2449%26utm_source%3Dhabrahabr%26utm_campaign%3Dcontent%26utm_medium%3Dpostlink">Dedicated servers in reliable data centers in Germany!</a> <br>  Any configuration, quick build and free installation </div><p>Source: <a href="https://habr.com/ru/post/314972/">https://habr.com/ru/post/314972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../314962/index.html">Canon Laser Shot LBP-1120 printer and Raspberry Pi-based print server</a></li>
<li><a href="../314964/index.html">Why and how to transfer corporate email security to the cloud. Part 1</a></li>
<li><a href="../314966/index.html">Symfony - combine GridFS files with ORM entities</a></li>
<li><a href="../314968/index.html">Problems that we encountered when updating the PVS-Studio interface</a></li>
<li><a href="../314970/index.html">Taking PHP seriously</a></li>
<li><a href="../314974/index.html">How IT professionals work. Andrey Domas - the leading system administrator in the social network "Odnoklassniki"</a></li>
<li><a href="../314976/index.html">Competition for ZeroNights 2016 from Mail.Ru Group</a></li>
<li><a href="../314978/index.html">Jasmine vs. Mocha, Chai and Sinon</a></li>
<li><a href="../314980/index.html">Friday format: ‚ÄúYou can‚Äôt just take it and explain it to a non-programmer ...‚Äù</a></li>
<li><a href="../314984/index.html">Qt / QML REST Client</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Server in your pocket: deploy ONLYOFFICE on Intel NUCs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="New year began for us with the return to Habr. So daddy's home. We decided to bring our blog back to life in order to share company news, technologica...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Server in your pocket: deploy ONLYOFFICE on Intel NUCs</h1><div class="post__text post__text-html js-mediator-article">  New year began for us with the return to Habr.  So daddy's home.  We decided to bring our blog back to life in order to share company news, technological secrets, life experience and communicate with you, all the more and tell us something about it. <br><br>  A new page of our blog, we begin, perhaps, with a small experiment.  We decided to deploy our ONLYOFFICE office suite on mini-servers.  As an unusual test environment for our software, we used three different (at a cost and, accordingly, processor power) Intel NUC machines. <br><br>  What came of it all - read on. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/36a/91c/799/36a91c7990fb4318878fd0b7b2d81abf.jpg"><br><a name="habracut"></a><br>  <b>Why do we need it?</b> <br><br>  We like the idea of ‚Äã‚Äãmini servers for small teams and home offices.  We recently released ONLYOFFICE Enterprise Edition, a corporate server solution and decided to dispel the myth that in order for it to work, we need some kind of massive hardware support.  A large server and a separate room as his residence are, of course, good, but not necessarily, especially in the case of small companies. <br><br>  In general, we are for compactness and minimalism.  With such thoughts, we set out in search of a suitable iron to put the concept into practice.  Of course, we have already argued our final choice at the beginning of the article, but now we will also justify it. <br><br>  <b>Our experimental</b> <br><br>  In general, our requirements for the gland are quite obvious: something clear, reliable, placed within a reasonable in terms of size and preferably inexpensive.  And we stopped at Intel NUC'ah.  Perhaps it was a somewhat emotional decision based on the attractive appearance of their glands, but in the end, our shopping list looked like this: <br><br><ul><li>  <u>Intel NUC5PPYH</u> based on the Intel Pentium N3700 with a frequency of 1.6 GHz, with DDR3L memory and support for 2.5 inch drives or SSD.  Purchase price: 14 550 rubles. </li><li>  <u>Intel NUC NUC5i3RYH</u> based on the Intel Core i3-5010U processor, with DDR3L memory and space for a 2.5-inch hard disk or solid-state drive M.2.  The purchase cost us 21 thousand rubles (at the time of writing this article - 24 360 rubles). </li><li>  <u>Intel NUC NUC5i5RYH</u> (Intel Core i5-5250U processor, DDR3L memory, space for 2.5 ‚ÄùHDD or SSD M2).  This box cost about 31 thousand rubles (at the time of writing this article - 31 720 rubles). </li></ul><br><br>  With such acquisitions, we are almost ready to embark on planned experiments. <br><br>  <b>Customization</b> <br><br>  But first you need to prepare our "patients".  This is a simple and not too burdensome procedure in just four steps: <br><br>  <u>Step 1.</u> Install Ubuntu 15.04. <br><br>  <u>Step 2.</u> Update the kernel to the last (Mono has problems with some kernels, but everything works fine on the latter). <br><br>  <u>Step 3.</u> We put <a href="https://docs.docker.com/engine/installation/ubuntulinux/">Docker</a> (we put the latest version of their turnips, that is, Docker version 1.9.1, build a34a1d5, but, in fact, 1.4 or higher will do). <br><br>  <u>Step 4.</u> Using the script, we deploy docker-containers with ONLYOFFIC, and even more precisely with the latest server solution <a href="http://www.onlyoffice.com/download.aspx">ONLYOFFICE Enterprise Edition</a> . <br><br>  Having done these manipulations with all three NUCs, we proceed to the most interesting, namely, we are testing the performance of our solution on different hardware. <br><br><img src="https://habrastorage.org/files/2dc/4fe/a60/2dc4fea603334f39955a175446b7442d.png"><br><br>  <b>The most interesting</b> <br><br>  To see how our software feels in the new environment, we decided to use JMeter. <br><br>  Immediately make a reservation that in no case do we perform load testing, but performance testing.  We are not looking for bottlenecks in the load in the application, but we look at how good our hardware is for such software. <br><br>  So, we write a small script that jerks all the important parts of the system and creates a certain load.  Since our experimental NUCs are not real servers anyway, we take 10,20,30,40 and 50 threads.  With such a load, we do not rest on the width of the channel, and, accordingly, we do not need to raise several distributed clients. <br><br>  In parallel with the way the load is created on the server, we open the browser and see how long the page loads. <br><br>  The ramp up period for all runs was 1 second.  For each result 10 measurements were made.  In the table with the results we included only the average values.  And here, actually, she is :) <br><table><tbody><tr><td>  Number of thread group <br></td><td>  Errors% <br></td><td>  Samples <br></td><td>  Page load (sec) <br></td><td>  Speed ‚Äã‚Äã(kB / s) <br></td><td>  RPS <br></td></tr><tr><td>  ten <br></td><td>  0.65 <br></td><td>  1394 <br></td><td>  9.94 <br></td><td>  106.53 <br></td><td>  10.56 <br></td></tr><tr><td>  20 <br></td><td>  0.65 <br></td><td>  3095 <br></td><td>  19.38 <br></td><td>  85.4 <br></td><td>  8.48 <br></td></tr><tr><td>  thirty <br></td><td>  0.51 <br></td><td>  5845 <br></td><td>  20.01 <br></td><td>  97.65 <br></td><td>  9.66 <br></td></tr><tr><td>  40 <br></td><td>  0.75 <br></td><td>  5311 <br></td><td>  22.46 <br></td><td>  101.6 <br></td><td>  10.19 <br></td></tr><tr><td>  50 <br></td><td>  0.61 <br></td><td>  8143 <br></td><td>  27.70 <br></td><td>  101.26 <br></td><td>  10.05 <br></td></tr><tr><td><br></td><td><br></td><td><br></td><td><br></td><td><br></td><td><br></td></tr><tr><td>  Number of thread group <br></td><td>  Errors% <br></td><td>  Samples <br></td><td>  Page load (sec) <br></td><td>  Speed ‚Äã‚Äã(kB / s) <br></td><td>  RPS <br></td></tr><tr><td>  ten <br></td><td>  0.37 <br></td><td>  2441 <br></td><td>  7.41 <br></td><td>  208.36 <br></td><td>  20.69 <br></td></tr><tr><td>  20 <br></td><td>  1.11 <br></td><td>  3516 <br></td><td>  19.52 <br></td><td>  131.31 <br></td><td>  19.12 <br></td></tr><tr><td>  thirty <br></td><td>  0.65 <br></td><td>  4602 <br></td><td>  20.19 <br></td><td>  209 <br></td><td>  18.82 <br></td></tr><tr><td>  40 <br></td><td>  0.78 <br></td><td>  5251 <br></td><td>  30.69 <br></td><td>  168.23 <br></td><td>  16.83 <br></td></tr><tr><td>  50 <br></td><td>  0.89 <br></td><td>  10689 <br></td><td>  50.41 <br></td><td>  166.42 <br></td><td>  16.6 <br></td></tr><tr><td><br></td><td><br></td><td><br></td><td><br></td><td><br></td><td><br></td></tr><tr><td>  Number of thread group <br></td><td>  Errors% <br></td><td>  Samples <br></td><td>  Page load (sec) <br></td><td>  Speed ‚Äã‚Äã(kB / s) <br></td><td>  RPS <br></td></tr><tr><td>  ten <br></td><td>  0.23 <br></td><td>  3536 <br></td><td>  3.96 <br></td><td>  325 <br></td><td>  29.22 <br></td></tr><tr><td>  20 <br></td><td>  0.55 <br></td><td>  3605 <br></td><td>  6.98 <br></td><td>  320.06 <br></td><td>  29.31 <br></td></tr><tr><td>  thirty <br></td><td>  0.95 <br></td><td>  6625 <br></td><td>  18.98 <br></td><td>  208 <br></td><td>  28.77 <br></td></tr><tr><td>  40 <br></td><td>  0.55 <br></td><td>  6671 <br></td><td>  21.68 <br></td><td>  310 <br></td><td>  28.03 <br></td></tr><tr><td>  50 <br></td><td>  0.67 <br></td><td>  7358 <br></td><td>  24.18 <br></td><td>  309.5 <br></td><td>  28.08 <br></td></tr></tbody></table><br>  <b>results</b> <br><br>  We got pretty good and, in principle, predictable results. <br><br>  True, the NUC (N3700) proved to be somewhat better than we expected.  Because of a weak processor, we did not pin great hopes on it, but tests showed that, theoretically, this hardware would be suitable for a small team of up to 15 people.  However, if we talk about the fate of our "patient", then she will most likely still spend the rest of her days in the conference room. <br><br>  The results of the NUC5i3RYH were also quite expected to be slightly better than the predecessor.  On 10 threads, this piece of hardware issued 20 RPS, and therefore it is quite suitable for a small office of 15 people. <br><br>  The third with the most powerful processor expectedly showed the best results and issued almost 30 requests per second.  According to our observations, this is enough for the normal operation of an office of 50 people, unless of course all these 50 people rush to simultaneously convert PDF files to 800 megabytes. <br><br>  <b>Dry residue</b> <br><br>  Of course, this option can not be compared with a full-fledged server version in terms of power and reliability.  But this is a great option for those who, for security reasons, do not want to store their data ‚Äúsomewhere there‚Äù in a public cloud service and at the same time have no opportunity or desire to acquire their own server.  Such a box works pretty well with our software and can stand in the center of a small office next to the printer, without annoying anyone. <br><br>  A small life hack: we also used this solution as an ‚Äúexhibition‚Äù option.  "Patient" number three (NUC5i5RYH) accompanied us to the international forum "Open Innovation".  With it, we successfully presented our new server version at the event - good looks and quite good performance did their job. </div><p>Source: <a href="https://habr.com/ru/post/275009/">https://habr.com/ru/post/275009/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274995/index.html">My approach to Class Based Views</a></li>
<li><a href="../274997/index.html">We write a simple RESTful service on kotlin and spring boot</a></li>
<li><a href="../274999/index.html">Photo Encryption on Google Drive</a></li>
<li><a href="../275001/index.html">How to design for people with color blindness</a></li>
<li><a href="../275005/index.html">Initialization of flight data in the AIRCOM Server system</a></li>
<li><a href="../275011/index.html">Module loader for node js with support for local modules and load modules on demand</a></li>
<li><a href="../275013/index.html">Who are you writing on Gherkin? Or gherkin in search of the target audience</a></li>
<li><a href="../275015/index.html">350+ useful Docker resources, books and tools</a></li>
<li><a href="../275019/index.html">Routes on Google Maps in the Android application - some clarifications</a></li>
<li><a href="../275021/index.html">Automating the output of the Yandex.Maps widget on the 1C Bitrix platform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
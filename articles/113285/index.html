<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Splash! - development of the game for Windows Phone 7. Part II</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous part of our article ( Part I ) we covered the basic issues of creating games for Windows Phone 7, the choice of tools and technologies...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Splash! - development of the game for Windows Phone 7. Part II</h1><div class="post__text post__text-html js-mediator-article">  In the previous part of our article ( <a href="http://habrahabr.ru/company/enterra/blog/113009/">Part I</a> ) we covered the basic issues of creating games for Windows Phone 7, the choice of tools and technologies.  Now we will examine in detail the issues of programming and interaction with the phone. <br><a name="habracut"></a><br><h4>  Game logic </h4><br>  The entire game logic will be put into a separate class GameController.  Now the Update function in the game class looks like this: <br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime gameTime</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Allows the game to exit if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed) this.Exit(); GameController.Update(gameTime); base.Update(gameTime); }</span></span></code> </pre> <br>  Please note that we are passing a GameTime class object to GameController.Update.  It has an ElapsedGameTime property that indicates how much time has passed since the previous call to the Update function.  As a rule, this time is fixed and on the phone is 33 milliseconds, but it‚Äôs better not to count on this, but to use the transmitted value in all calculations. <br><br>  We will use ElapsedGameTime wherever it is necessary to calculate the movements of objects of the game world.  For example, if we need to calculate the new position of the white ball (under the influence of the tilt of the phone), then the code will look like this: <br><pre> <code class="cs hljs">position += (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(acceleration * gameTime.ElapsedGameTime.TotalSeconds);</code> </pre> <br>  The radius of the balls and blots (at the moment of their appearance) will be calculated as follows: <br><pre> <code class="cs hljs">radius += (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(GrowSpeed * gameTime.ElapsedGameTime.TotalSeconds);</code> </pre> <br>  Naturally, we will do all these calculations in separate classes - each of them will have its own similar Update function (gameTime).  And GameController.Update will only call them. <br><br><h4>  Draw graphics </h4><br>  Drawing is also transferred to the GameController class.  The Draw function in the game class now looks like this: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Draw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime gameTime</span></span></span><span class="hljs-function">)</span></span> { GraphicsDevice.Clear(Color.Black); spriteBatch.Begin(); GameController.Draw(spriteBatch); spriteBatch.End(); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Draw(gameTime); }</code> </pre><br>  Please note that we are passing to the GameController.Draw only an object of the class SpriteBatch - it is intended solely for drawing.  We do not need GameTime here, since all the necessary calculations have already been done in the Update function. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, GameController.Draw will call similar Draw (spriteBatch) functions on classes that implement the logic of the game world. <br><br>  Drawing itself looks pretty simple: <br><pre> <code class="cs hljs">spriteBatch.Draw(texture, position, color);</code> </pre>  That is, we can display only ready-made textures - drawing 2D primitives (lines, rectangles, ellipses, etc.) in XNA is not provided. <br><br>  The texture can be obtained by downloading it from the content: <br><pre> <code class="cs hljs">Texture2D texture = Content.Load&lt;Texture2D&gt;(assetName);</code> </pre>  Textures are already loaded, all positions are calculated.  But with the color you can do something interesting.  If we need the original color of the texture, then we must pass Color.White. <br><br>  But if you pass a different color, the texture will be drawn with the imposition of this color.  If you specify a color with an alpha channel, the texture will be drawn translucent.  Thus, we can control the smooth appearance and disappearance of objects and the change in their color (all this is required in our game). <br><br>  For mixing two colors, use the Color.Lerp function.  And to add an alpha channel, use the Color.FromNonPremultiplied function. <br><br>  There are other variations of the spriteBatch.Draw function that allow you to rotate a texture and scale it.  They are useful to us too. <br><br><h4>  Display text </h4><br>  Displaying text is as easy as displaying graphics: <br><pre> <code class="cs hljs">spriteBatch.DrawString(spriteFont, text, position, color);</code> </pre> <br>  The object of the SpriteFont class can be obtained by downloading it from the content: <br><pre> <code class="cs hljs">SpriteFont spriteFont = Content.Load&lt;SpriteFont&gt;(assetName);</code> </pre> <br>  Here you can also specify the color of the text.  And if you set the color with the alpha channel, the text will be drawn translucent. <br><br>  If you specify coordinates for displaying text with a float position, the text may appear slightly distorted.  Therefore, we will round coordinates to integers wherever smooth text movement is not required. <br><br>  There are other variations of the spriteBatch.DrawString function that allow you to rotate text and scale it.  But it must be remembered that any such manipulations cause distortion of the text.  This is because XNA does not work with the original vector font, but with its raster representation, which is created at the time of compiling the project and added to the content. <br><br><h4>  Touchscreen </h4><br>  To determine where the user clicked on the screen, you must obtain data from the class Microsoft.Xna.Framework.Input.Touch.TouchPanel: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> TouchPanel.GetState()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (item.State == TouchLocationState.Pressed || item.State == TouchLocationState.Moved) { <span class="hljs-comment"><span class="hljs-comment">// Get item.Position } }</span></span></code> </pre><br>  Thus, we get all the points on the screen that the user just touched with his fingers. <br><br>  However, we will also need data on where the user made a single tap on the screen (clicked and released).  This is necessary to keep track of the on-screen button presses, such as Pause.  To obtain this data, we will use gesture support. <br><br>  At the beginning, at the start of the game, let us point out that we need the support of precisely such gestures (tap): <br><pre> <code class="cs hljs">TouchPanel.EnabledGestures = GestureType.Tap;</code> </pre> <br>  Then we can receive gestures in each iteration of the game cycle: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (TouchPanel.IsGestureAvailable) { GestureSample gesture = TouchPanel.ReadGesture(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gesture.GestureType == GestureType.Tap) { <span class="hljs-comment"><span class="hljs-comment">// Get guesture.Position } }</span></span></code> </pre><br><h4>  Accelerometer </h4><br>  To obtain data on the tilt of the phone, we will use the Microsoft.Devices.Sensors.Accelerometer class.  Unfortunately, the accelerometer cannot receive data directly (as we did with the TouchPanel) - it only supports the event model.  Therefore it is necessary to make an auxiliary class that creates an object and subscribes to its event: <br><pre> <code class="cs hljs">accelerometer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Microsoft.Devices.Sensors.Accelerometer(); accelerometer.ReadingChanged += AccelerometerChanged; accelerometer.Start();</code> </pre><br>  In the event handler, we will memorize the value of the acceleration and save it for future use: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AccelerometerChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, AccelerometerReadingEventArgs e</span></span></span><span class="hljs-function">)</span></span> { vector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)eX, (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)eY, (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)eZ); }</code> </pre><br>  The acceleration vector contains information about all three axes (X, Y and Z), but we need only the first two - and with respect to the portrait orientation of the phone.  Therefore, the property that returns the acceleration in our coordinate system will look like this: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector2 Acceleration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(vector.X, -vector.Y); } }</code> </pre><br>  It is this acceleration that we will attach to our white ball. <br><br>  A more visual representation of the axes of the accelerometer can be obtained <a href="http://windowsteamblog.com/windows_phone/b/wpdev/archive/2010/09/08/using-the-accelerometer-on-windows-phone-7.aspx">here</a> . <br><br><h4>  Losing sound </h4><br>  Playing sounds in XNA is done using the Play function on an object of the SoundEffect class.  An object of this class can be downloaded from the content: <br><pre> <code class="cs hljs">SoundEffect sound = Content.Load&lt;SoundEffect&gt;(assetName);</code> </pre><br>  Actually, that‚Äôs all - we don‚Äôt have to do anything else with the sounds. <br><br><h4>  Window </h4><br>  Finally the game is done: the white ball is controlled by the accelerometer, the others chase after it and turn into blots when you press them with your finger, the glasses count, there are sounds.  It seems everything is ready?  Not here it was! <br><br>  Now you need to make the windows: the start window (main menu), the pause dialog and the window for completing the game (with the display of points and a record). <br><br>  Windows in XNA for Windows Phone is not at all, so you have to do them yourself.  It is not as difficult as it may seem at first glance. <br><br>  It is enough to make a basic control with basic properties: Parent, Children, Bounds, Visible, Enabled and the Update and Draw functions.  Then we make several heirs: Window, Button, Label, etc. <br><br>  After that, you can already easily place the elements inside the windows. <br><br><h4>  State saving </h4><br>  The game on the phone can be interrupted at any time - by pressing the hardware Home button or by another external event.  Therefore, it is necessary to attend to the preservation of the state of the game at any time and the subsequent restoration of this state when loading the game. <br><br>  To store the state (and at the same time the settings), use the System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings class.  This class implements the IDictionary &lt;string object&gt;, so working with it is very simple.  Add the current state of all objects in the game world (fortunately, we have a few of them) in this dictionary and call the IsolatedStorageSettings.ApplicationSettings.Save () function. <br><br>  Saving will be done at the time of exit from the application, for this we will block the OnExiting function in the game class: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnExiting</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs args</span></span></span><span class="hljs-function">)</span></span> { GameController.SaveState(); <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnExiting(sender, args); }</code> </pre><br>  The restoration of the state is done in a similar way - when the application is loaded, we obtain data from IsolatedStorageSettings.ApplicationSettings and restore all the objects in the game world. <br><br><h4>  Application Activation and Deactivation </h4><br>  Our application will not always be in the active state - sometimes it can be deactivated (by incoming call, for example), and then activated again. <br><br>  To track these events, block the OnActivated and OnDeactivated functions in the game class. <br><br>  When you deactivate the application, we will transfer the game to pause mode - in order to return to the game, the user finds a dialogue with a proposal to continue the game. <br><br>  In addition, in order not to waste the computing resources of the phone in an inactive state, we will add the following code to the beginning of the Update function in the game class: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsActive) { SuppressDraw(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre><br><h4>  Splash screen </h4><br>  Our game (or rather, the game content) is loaded for a few seconds, and at the same time it shows no signs of life - only a black screen is visible.  It would be necessary to somehow show the user that the application is running.  To do this, draw a beautiful splash-screen to show it when you start the game: <br><img src="https://habrastorage.org/storage/habraeffect/3b/7c/3b7c3a74d387a022c783ee65e03cfaec.png"><br><br>  In Silverlight, the application for Windows Phone is enough to add the SplashScreenImage.jpg file to the project - and it will automatically appear when it is loaded.  However, this does not work for XNA projects. <br><br>  We'll have to redo the loading of content - first load the texture for the splash-screen and draw it when you first call the Draw function.  And then load the rest of the content and launch the game.  And while the rest of the content will be loaded, the user will be able to watch our splash-screen on the screen. <br><br>  Now the start of the application looks much nicer. <br><br><h4>  The location of the game on the phone </h4><br>  In order for our game to appear on the phone in the Games section (you can get there by clicking the button that says XBOX LIVE on the phone‚Äôs start screen), you need to edit the WMAppManifest.xml file in the project.  In this file, instead of the line Genre = "Apps.Normal", you should write Genre = "Apps.Games". <br><br>  At the same time, we will indicate the name and description of the game in the same file (in the Title and Description attributes).  And remove the extra requirements (section).  In this section, leave only /&gt; - to support the accelerometer.  All the rest in this version of the game we do not need. <br><br>  There should be two pictures in the project: GameThumbnail.png and Background.png. <br><br>  The first picture is needed to display the game in the Games section, and the second is on the start screen of the phone.  Both images must be the same size: 173x173 pixels. <br><br><h4>  Trial mode </h4><br>  Since our game will be paid, we need to add support for the trial mode.  Trial verification is already built into the platform and is performed using the Microsoft.Phone.Marketplace.LicenseInformation class: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> license = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Microsoft.Phone.Marketplace.LicenseInformation(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> license.IsTrial();</code> </pre><br>  Since this function works rather slowly, we will not call it at each iteration of the game cycle.  Instead, we will call it only when the application is activated - in the OnActivated function of the game class, and save the result in a variable. <br><br>  If the application is running in trial mode, then after a few minutes of the game, we will show the user a dialog with a proposal to buy the application or start a new game. <br><br>  When you click on the Buy button, we call the display of our application in the Windows Phone Marketplace: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> market = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Microsoft.Phone.Tasks.MarketplaceDetailTask(); market.Show();</code> </pre><br>  After the purchase, the user can return to the application and continue the game. <br><br><h4>  Back button </h4><br>  Finally, everything is ready and we send the application to the Windows Phone Marketplace.  Before publication, it is thoroughly tested by Microsoft and a verdict is issued a few days later: it has not passed.  What is the matter? <br><br>  The problem was in the very code that we left in the Update function: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">GameTime gameTime</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Allows the game to exit if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed) this.Exit(); ... }</span></span></code> </pre><br>  The hardware Back button should work in a certain way everywhere - to return the user to the previous screen.  And exit from the application on it should be made only if the user is on the start screen of the application (in the main game menu).  If we are in the pause dialog, then the Back button should return us to the game. <br><br>  In our case, the Back button always caused an exit from the application.  We remove this code, do the correct processing of the Back button and give it back for review.  Reconsideration takes much less time. <br><br><h4>  Result </h4><br>  And here, at last, have accepted!  Now the game is in the Windows Phone Marketplace. <br><br>  In total, about two weeks were spent on development (and two more weeks were spent on placing the game in the store).  The result was a very nice and exciting game: <br><br><img src="https://habrastorage.org/storage/habraeffect/66/b0/66b0ee33db85fa3e4bc6a2acc8a24aba.png"><img src="https://habrastorage.org/storage/habraeffect/c5/ac/c5ac16995baa5d2e762aed8d06394178.png"><br><br>  The editorial site of the Best WP7 Games reviewed this game: <a href="http://www.bestwp7games.com/splash-fun-accelerometer-game-for-wp7-review.html">www.bestwp7games.com/splash-fun-accelerometer-game-for-wp7-review.html</a> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/AmcQWZfdny0%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhi-u6EUgS8Zi98km9nvhu_W2FyobQ" frameborder="0" allowfullscreen=""></iframe><br><br>  And a week after the appearance, the game hit the Top 100 paid games in the Windows Phone Marketplace. <br><br>  Download the game <a href="http://redirect.zune.net/External/LaunchZuneProtocol.aspx%3Fpathuri%3Dnavigate%3FphoneAppID%3D52a3ca10-db18-e011-9264-00237de2db9e">here</a> <br><br>  What conclusion can be drawn from the experience of developing this game?  Creating games for Windows Phone 7 is really very simple! </div><p>Source: <a href="https://habr.com/ru/post/113285/">https://habr.com/ru/post/113285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113274/index.html">The second normal form (in SQL terminology)</a></li>
<li><a href="../113275/index.html">Capture an iPhone character from the screen</a></li>
<li><a href="../113278/index.html">IBM's supercomputer beat people on the Jeopardy quiz!</a></li>
<li><a href="../113279/index.html">Motorola smashes Apple in an ad for Xoom</a></li>
<li><a href="../113282/index.html">Oh flat!</a></li>
<li><a href="../113286/index.html">Clip from the Supercup Sony Ericsson Xperia Play</a></li>
<li><a href="../113289/index.html">Office equipment inventory</a></li>
<li><a href="../113290/index.html">From IT person to CIO ... through the Cloud</a></li>
<li><a href="../113291/index.html">Spanish authorities are suing Google</a></li>
<li><a href="../113295/index.html">Canadians have created an automated mini-laboratory for blood analysis.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I write a search engine (virtual project). Part 1.1. The interior of the brick</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are two ways to design - ‚Äútop down‚Äù and ‚Äúbottom up‚Äù. Looks like I'm trying to reinvent the wheel again, go the third way - from the middle. 
 Si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I write a search engine (virtual project). Part 1.1. The interior of the brick</h1><div class="post__text post__text-html js-mediator-article">  There are two ways to design - ‚Äútop down‚Äù and ‚Äúbottom up‚Äù.  Looks like I'm trying to reinvent the wheel again, go the third way - from the middle. <br>  Since for me personally, at the moment, the ‚Äúprivate derivative‚Äù of the search is more interesting, namely, the search on a separate site (a group of sites grouped into a single unit) - I will go in this direction. <br><a name="habracut"></a><br>  In addition to the actual search, there is also the problem of updating the index.  For example, colleagues set themselves the search engine &lt;a hrefive <a href="http://www.sphinxsearch.com/">www.sphinxsearch.com</a> ¬ª&gt; Sphinx.  One of the problems they faced is the inability to quickly update the main index, which is unacceptable for the media site. <br>  They got out by means of search in several indexes (the Sphinx allows it).  During the day, when posting a new article, the current day index was rebuilt.  During the week of such indexes 7 pieces accumulated and on weekends, when the load on the server fell, the main index was reassembled taking into account the accumulated one.  And so in a circle.  Such index rigidity was made to speed up the search process.  You have to pay for everything. <br>  I heard that the developer of the Sphinx is already solving (or even solved) this problem.  Indexes can be combined, avoiding the regeneration of the original data.  Thus he showed (for which many thanks) a rake, which can be stepped on (some of).  Such information about the technological rakes that await during development is no less valuable than all manuscripts on search theory.  After all, the greatest difficulties begin when you try to shift theory to practice. <br>  Phew!  A lot of words.  But if not here, then in the comments I would still have to explain the reasons for my decision. <br>  I want to divide the base index into three parallel ones: <ul><li>  main index; </li><li>  yesterday index </li><li>  index "today" </li></ul><br>  The main index - it is the main one. <br>  The index of this day - all updates of the current day. <br>  After midnight, ‚Äútoday‚Äù becomes ‚Äúyesterday‚Äù and makes room for a new day. <br>  During the day, the main index and the ‚Äúyesterday's‚Äù are merged, after which the yesterday's one is deleted, and the main one is replaced by the result of the merge. <br>  This minimizes the cost of keeping the index current. <br>  When working in the usual search engine mode (when the data is updated as the site turns to scan), the ‚Äúyesterday's‚Äù index is not needed, but the ‚Äútoday's‚Äù index is formed on the basis of fresh receipts, then we believe that it is midnight and act on the same algorithm. <br><br>  Ps.  Google is already working on instant indexing technology for updating site content - <a href="http://cnews.ru/news/top/index.shtml%3F2010/03/04/381597">PubSubHubbub</a> .  I do not think that when receiving the next portion of updates, the entire index will be rebuilt, most likely the news will be accumulated in a kind of buffer index, which is available in parallel with the main index.  Such technologies search engines have long been able to run in search for news.  Now it's time to distribute them to all the content. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/89543/">https://habr.com/ru/post/89543/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89532/index.html">are there iphone developers in rf</a></li>
<li><a href="../89533/index.html">"Acoustics for 10,000 euros" at home - the results of KM2009, "Acoustics"</a></li>
<li><a href="../89537/index.html">Changes regarding selector: visited in Firefox</a></li>
<li><a href="../89541/index.html">Mnogubuff for GMail</a></li>
<li><a href="../89542/index.html">Eco-friendly server box made of cardboard</a></li>
<li><a href="../89544/index.html">Teamwork on the website of the armed forces of Sweden</a></li>
<li><a href="../89552/index.html">LiveJournal may become an object of intangible cultural heritage</a></li>
<li><a href="../89558/index.html">Glitch? Virus? Or a sign from above?</a></li>
<li><a href="../89559/index.html">IPhone Killer. New Nokia 2110i</a></li>
<li><a href="../89562/index.html">qutIM 0.3 alpha - The Phoenix</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
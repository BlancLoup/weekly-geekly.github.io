<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scenarios for recovering deleted objects in Active Directory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It's great when the system administrator has time to master and try all Active Directory recovery scripts using the tools of the operating system itse...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scenarios for recovering deleted objects in Active Directory</h1><div class="post__text post__text-html js-mediator-article">  It's great when the system administrator has time to master and try all Active Directory recovery scripts using the tools of the operating system itself.  However, in most cases there is no unnecessary time and a solution is needed, and not a set of articles in msdn and invigorated scripts. <br><br>  Which software product to choose to restore Active Directory? <br><br>  To answer this question, you must first decide on a list of recovery scenarios. <br><a name="habracut"></a><br>  Recovering deleted objects in Active Directory is a problem that users have encountered very often since the advent of Active Directory.  A lot of time passed before Microsoft finally heard the users.  First, in Windows 2008, it was possible to protect objects from accidental deletion, then a basket appeared in Windows 2008 R2, and in Windows 2012 it received a graphical interface.  Now a remote object can be brought back to life in just a couple of clicks, and no special product is needed for this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/441/595/02d/44159502d939aebdbcf5e475746538fc.jpg" alt="image"><br><br>  If the old versions of Windows are still used or, for some reason, you cannot turn on the recycle bin, then we need to restore the backup made before deleting the object.  And if we want to restore everything from the graphical interface, we need a specialized product.  There are plenty of free utilities and paid products that allow you to recover deleted objects, however, to recover the account password, a schema extension was required, which is not always suitable for the administrator.  Recovering the password for a couple of users and notifying them by phone is not a problem, but when there are a couple of such users, it can paralyze the company's work.  I know only one product that can recover passwords without a schema extension - <a href="http://software.dell.com/products/recovery-manager-for-active-directory-forest-edition/">Recovery Manager for AD</a> .  Now this product is sold under the Dell label, but its roots are Russian - the product appeared in the domestic company Aelita.  Recovery Manager enjoys well-deserved people's love and its old versions can even be found on torrents. <br><br>  Another much more rare scenario is the restoration of changed objects.  That is, they wanted to change the attribute of one user, and changed in the whole of AD.  Or there was a mistake in the settings of the solution for synchronizing data from the HR system, and unwanted changes were synchronized in Active Directory. <br><br>  Here, Microsoft has not yet offered a convenient solution.  In order to search for modified objects and subsequent recovery in such a scenario, Microsoft suggests using the <a href="http://technet.microsoft.com/en-us/library/cc772168.aspx">dsamain</a> command line <a href="http://technet.microsoft.com/en-us/library/cc772168.aspx">utility</a> .  We are raising an LDAP server with an early copy of Active Directory and comparing the states of objects in live AD and backup using ADUC or Powershell script. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/62d/43a/3f1/62d43a3f191d3e9c0a5ffb0782d6eb7f.jpg" alt="image"><br><br>  As they say, a holy place is never empty.  There is a lot of specialized software on the market for restoring changed objects.  I recommend looking at the <a href="http://www.beyondtrust.com/Products/PowerBrokerRecoveryAD/">Blackbird Recovery for Active Directory</a> , the aforementioned <a href="http://software.dell.com/products/recovery-manager-for-active-directory-forest-edition/">Recovery Manager</a> and the <a href="http://www.netwrix.com/ru/active_directory_auditing.html">NetWrix Active Directory Object Restore Wizard</a> .  The latter, in my opinion, is only suitable for restoring a small number of objects.  Still, ‚Äúclicking on‚Äù a couple of hundred objects is not very convenient. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0bc/534/e22/0bc534e2250f6f0d75e15adaddc4feb0.jpg" alt="image"><br><br>  The product from Blackbird makes continuous backup, which allows you to not lose the "useful" changes, unlike most products, where recovery restores changes since the last backup. <br><br>  Also, almost every self-respecting backup software vendor made a simple wizard for restoring objects. <br><br>  In addition to the granular recovery scenarios about which we spoke above, there is a recovery scenario of a whole forest, which many vendors bypass.  Like, the probability of falling forest is very small and you do not need to worry about it. <br><br>  Microsoft offers a forty-page document with a general description of recommendations for creating a forest restoration plan.  However, in a large geographically distributed company with dozens of domain controllers, the creation of a forest restoration plan and its regular testing on an environment close to production results in person-months of the IT department.  However, making a recovery plan and testing it, you can face the fact that during the time spent on recovery, the company will go to the bottom, this is especially true for banks and cellular operators. <br><br>  I managed to find only one product, the decisive scenario of fully automatic forest recovery, and also allowing to significantly reduce recovery time - <a href="http://software.dell.com/products/recovery-manager-for-active-directory-forest-edition/">Dell Recovery Manager for AD Forest Edition</a> . <br><br>  The product consists of 2 parts - ‚Äúnormal‚Äù Recovery Manager for AD, where we set a backup schedule and can granularly restore directory objects and the Forest Recovery Console, where we create a forest recovery plan. <br><br>  After we launch the product for the first time, he suggests we create a project - an electronic version of the recovery plan. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e57/47d/d94/e5747dd94fc5439ddc0e8e8a618731dd.jpg" alt="image"><br><br>  Then we specify the settings for connecting to AD or backups and the product displays us a list of all domain controllers.  We only need to choose how to restore each domain controller, set passwords, configure DNS settings, and the recovery plan is ready. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/db3/dce/f28/db3dcef28c5ee549f793ec968412c0f0.jpg" alt="image"><br><br>  Recovery itself is even easier - click Start recovery and go.  No need to connect remotely to domain controllers - everything happens completely automatically. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f12/312/bfb/f12312bfb37632bb8ee1aed5d20062c1.jpg" alt="image"><br><br>  How to test the product in conditions close to combat? <br><br>  Here, too, there is an answer - for this, the product has a special wizard Active Directory Virtual Lab, which allows you to select the necessary servers and transfer them to an isolated virtual environment and thus get a smaller copy of the working environment. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/100/a94/48f/100a9448f9bde8349c5a0cb4e2db95f8.jpg" alt="image"><br><br>  Conclusion <br><br>  If you are looking for a comprehensive solution to protect Active Directory - I recommend looking at Dell Recovery Manager for Active Directory Forest Edition.  Only this product solves all Active Directory recovery scenarios, starting with attributes and ending with the whole forest. <br>  Dell offers a <a href="http://software.dell.com/products/recovery-manager-for-active-directory-forest-edition/">trial version of the product</a> that can be used for 30 days, as well as a virtual laboratory where you can ‚Äútouch the product‚Äù and a series of several <a href="http://aflex.ru/about/events/webinars/%3Fvendor%3DDellSoftware%26utm_source%3DHabr%26utm_medium%3Dweb%26utm_term%3DRecovery%26utm_campaign%3DIT">free webinars</a> on functionality and installation. </div><p>Source: <a href="https://habr.com/ru/post/240601/">https://habr.com/ru/post/240601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../240589/index.html">Testing team in Scrum project</a></li>
<li><a href="../240591/index.html">About budget sites, people and automation</a></li>
<li><a href="../240595/index.html">Windows Server "10" Technical Preview - Failover Clustering and Storage Replica (registration for the webinar)</a></li>
<li><a href="../240597/index.html">Maximum realistic animation</a></li>
<li><a href="../240599/index.html">The main radio channel is even cheaper</a></li>
<li><a href="../240603/index.html">Voting on projects for VoCore microcomputer (wi-fi, openwrt)</a></li>
<li><a href="../240607/index.html">Automatic search combinations in mechanical safe locks</a></li>
<li><a href="../240609/index.html">Comprehensive Registry Tweak for Windows 7 + Bonus: Migrate User Data</a></li>
<li><a href="../240611/index.html">Why do we need start-up accelerators: experience of Russian projects in the IIDF program</a></li>
<li><a href="../240615/index.html">Eight Lessons from Steve Ballmer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
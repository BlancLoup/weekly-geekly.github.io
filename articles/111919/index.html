<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fast autocomplete using libscgi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article " libscgi - an effective solution for simple and fast scripts " was recently published. I would like to continue the previously presented ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fast autocomplete using libscgi</h1><div class="post__text post__text-html js-mediator-article">  The article " <a href="http://habrahabr.ru/blogs/hi/111587/">libscgi - an effective solution for simple and fast scripts</a> " was recently published.  I would like to continue the previously presented topic from a more practical side.  As you already guessed from the name - it will be about the autocompet script. <br><br>  Users, and me in particular, have always been smashed by these slow autocomplexes.  It happens you type up almost the entire word, as a drop-down menu appears.  It's clear that javascript itself is slow.  But if the autocomplete still slows down on the server side, then in general it somehow turns sour.  There is a way out, if you use something faster on the server side, as an option you can use a binary script using libscgi.  <a href="http://github.com/akalend/libscgi">Sources here</a> .  Just below the details. <br><a name="habracut"></a><br><br><h6>  Data Description </h6><br>  In this example, the script performs autocompet on cities.  Data for all cities is recorded in a csv file.  This file (I have 26 thousand lines) reads into memory and is stored in the form of a hash array.  the key is the lower case name of the city or its nickname.  In connection with the renaming to Soviet and post Soviet times, some cities have several names, for example: Leningrad, St. Petersburg, St. Petersburg.  Therefore, the first column is the given name or the given alias of the city.  The second column is the official name of the city (the first letter is big).  The third column is the rank of the city.  If we print all the cities in M ‚Äã‚Äãletters, then it is preferable for the User that Moscow be earlier (first in the list) than Makeevka or Robin.  The fourth column is the city id by database.  It is possible to implement the load from the database directly, when loading the autocomplete daemon.  Rank descending - the highest priority is 1. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sample input file data: <br> <code>"","",2188,2188 <br> "","",9711,9711 <br> "","",21156,21156 <br> "","",1424,1424 <br></code> <br>  For a search request, the POST method is used, whose body is one-two-three or more search characters.  The request is sent to the predefined url http: // hostname / cityes This url can be changed by specifying a new one in the source code. <br><br>  Since autocomplex is implemented using AJAX technology, json was chosen as the output data format.  Output format: <br> <code>{ <br> "cityes" : [ <br> { "name": "New York", "id":90}, <br> { "name": "New Vasyki", "id":808}, <br> { "name": "Nazareth", "id":1505}, <br> { "name": "Neaple", "id":1965}], <br> "time":304 <br> } <br></code> <br>  The output limit is 10 menu items.  Oktika showed that no longer needed.  But if you want, then you can change the DEFINE definition in the source: autocomplete.cpp <br><br>  optional parameter ‚Äútime‚Äù, implemented for control - search time in microseconds.  Real time is slightly longer, due to processing by the scgi server itself and nginx.  Actually it is somewhere between 0.5-0.7 ms (milliseconds). <br><br>  The daemon's memory capacity for 25 thousand data lines is 600 K. The CPY consumed is almost 0%.  It unloads the database very well, if we have previously had autocomplete on the database (I used redis, but with the introduction of libscgi - I refuse it on the sly).  While everything is in the testing mode, but it works beautifully and quickly. <br><br><h6>  Compilation: </h6><br>  make lib - compile library <br>  make ac compile autocomplete file <br><br><h6>  Launch </h6><br>  ./server / path / to / cityes_file <br><br>  We offer ideas where else you can use libscgi. <br>  Let's make together the world a kinder and better! </div><p>Source: <a href="https://habr.com/ru/post/111919/">https://habr.com/ru/post/111919/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111912/index.html">Anonymous browser do it yourself or Hide your ass yourself</a></li>
<li><a href="../111915/index.html">New design version</a></li>
<li><a href="../111916/index.html">NetApp AutoSupport - Call Your Parents!</a></li>
<li><a href="../111917/index.html">With a decade, Wikipedia!</a></li>
<li><a href="../111918/index.html">Making requests with difficult conditions</a></li>
<li><a href="../111925/index.html">10 billion downloads on the AppStore</a></li>
<li><a href="../111927/index.html">Cold fusion earned?</a></li>
<li><a href="../111928/index.html">Cryptographic puzzle: import of a key of WebMoney in Crypto Service Provider</a></li>
<li><a href="../111929/index.html">Running Return to Castle Wolfenstein on Linux</a></li>
<li><a href="../111930/index.html">The latest release of Firefox 4 Beta 9 is ready for download.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a minimal ASP.NET Core web application with support for npm, Webpack and TypeScript in Visual Studio 2017</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 I‚Äôm writing this tutorial primarily for myself, in order to be able to quickly create a minimal application with support for npm, Web...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a minimal ASP.NET Core web application with support for npm, Webpack and TypeScript in Visual Studio 2017</h1><div class="post__text post__text-html js-mediator-article"><h2 id="vvedenie">  Introduction </h2><br><p>  I‚Äôm writing this tutorial primarily for myself, in order to be able to quickly create a minimal application with support for npm, Webpack and TypeScript based on the initial template of an ASP.NET Core application (which will have debugging from Visual Studio). </p><a name="habracut"></a><br><h2 id="motivaciya">  Motivation </h2><br><p>  I am rather new to web and in particular javascript.  However, I work with .Net constantly.  I also believe that knowing JavaScript and all sorts of different frameworks on it, which is now like dirt, is stylish, fashionable and youthful.  But in order to feel the next libu, you usually need to install a lot of things to make it work in principle. </p><br><p>  Usually, a server (via node.js), npm, and something like a Webpack is required (for Less to work or for some template / minifier).  I picked ASP.NET for a bit (Not Core, but normal) and roughly imagine how to deal with the server part, but for me the frontend is a dark forest. </p><br><p>  The problem is that technologies on the web usually do not focus on ASP.NET, but more on node.js, php and other mainstream.  And the examples in the documentation are also always based on this all, and for the person of the uninitiated, it‚Äôs not so fast that it all works out from scratch to be configured for ASP.NET. </p><br><p>  In this tutorial, I show how, step by step, from a template new project on ASP.NET Core make a minimal working application in which </p><br><ul><li>  <a href="https://www.npmjs.com/"><strong>npm</strong></a> - Need to install various libraries in JavaScript, required everywhere. </li><li>  <a href="https://webpack.js.org/"><strong>Webpack</strong></a> - Needed if JavaScript and other content need to be packaged, minified, use Less instead of vanilla CSS, HTML templating, use JavaScript transpilers and the like. </li><li>  <a href="https://www.typescriptlang.org/"><strong>TypeScript</strong></a> - It can be used as a transpiler from newer versions of JavaScript to old ones.  You can also use the TypeScript language itself.  Two in one it turns out, plus a sin not to use as in the Visual Studio its quite good support is made. </li></ul><br><p>  Knowing how to quickly create such an application, you can then safely study any web technologies (including npm, Webpack and TypeScript itself), and the server will be in its native dotnet. </p><br><p>  Currently ASP.NET already has mechanisms built in similar to those in the Webpack, and the studio out of the box (at least 2017) works with TypeScript and compiles it automatically if you create a config file for the TypeScript compiler but. <br>  But all these things are supported by the ASP.NET developers, not the web community. </p><br><p>  The standard TypeScript compiler in this tutorial is disabled, and one that is a module for npm is used. </p><br><h2 id="podgotovka">  Training </h2><br><p>  What you need to download and install to get started </p><br><ul><li>  <a href="https://www.visualstudio.com/"><strong>Visual Studio 2017 Community</strong></a> - When installing components, select everything related to ASP.NET and Core </li><li>  <a href="https://nodejs.org/"><strong>Node.js and npm</strong></a> - Node.js is required to run npm and to run the Webpack script when building a project in Visual Studio.  Download and install the latest version of node.js, npm is installed with it. </li></ul><br><h2 id="sozdanie-proekta">  Project creation </h2><br><p>  Open Visual Studio, create a new project using the standard <em>ASP.NET Core Web Application</em> template <em>(.NET Core)</em> .  The template is in <em>Templates - Visual C # - Web</em> .  If there is no such template, some components may not be installed (You need to run the Visual Studio installer again and install them). </p><br><p>  Now we have a start project, it should be compiled and run. </p><br><p>  If git is used, then immediately add the <strong>.gitignore</strong> file to the folder with the solution ( <strong>Initially,</strong> we initialize the git repository).  The <strong>.gitignore</strong> file for solutions in Visual Studio can be <strong>obtained</strong> <a href="https://github.com/github/gitignore/blob/master/VisualStudio.gitignore">from here</a> . </p><br><p>  <a href="https://github.com/UltimaBeaR/AspNetWebpackTutorial/tree/5aa44e5a5454b5727a9f6fcead333eb73bc524f6">View full code</a> </p><br><h2 id="uproschaem-tipovoy-proekt">  Simplify the typical project </h2><br><p>  Next, change the project so that it turned out as simple as possible. <br>  Let's make Hello World out of it. </p><br><p>  Delete the following files </p><br><ul><li>  <strong>bower.json</strong> (and <strong>.bowerrc</strong> embedded in it), <strong>bundleconfig.json</strong> </li><li>  All contents of the <strong>wwwroot</strong> folder.  You can leave <strong>favicon.ico</strong> . </li><li>  <strong>Views</strong> folder - delete all interiors, except <strong>Views / Home / Index.cshtml</strong> </li></ul><br><p> In the <strong>Controllers / HomeController.cs</strong> file in the <code>HomeController</code> class <br>  replace the insides with the following code </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; View(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Error</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"Error"</span></span>;</code> </pre> <br><p>  In fact, everything except the <code>Index()</code> and <code>Error()</code> methods is removed here, while <code>Error()</code> now returns the string "Error" instead of the view (as we previously deleted the file with this view). </p><br><p>  The final touch - we replace the contents of the <strong>Views / Home / Index.cshtml file</strong> with the following </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Index<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Hello world<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  That's it, now we have a basic, maximally simplified project.  It can be compiled and run, the page will display the text "Hello world" </p><br><p>  <a href="https://github.com/UltimaBeaR/AspNetWebpackTutorial/tree/923cfcb049fa09f7e955b3bb8ede238f03c444e9">View full code</a> </p><br><h2 id="dobavlyaem-npm">  Add npm </h2><br><p>  Add <strong>package.json</strong> file to the project </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"yourappname"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"private"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  Instead of "yourappname" enter the name of the project in <strong>small</strong> letters. </p><br><p>  npm with its work can write to the log with the name <strong>npm-debug.log</strong> .  It is necessary to exclude him from the project, so as not to interfere.  This can be done either by calling the context menu on the studio and selecting <em>Exclude From Project</em> .  Or, if it has not been created yet (most likely, it is so), you can edit the project file <strong>.csproj</strong> , by adding the following to the <code>&lt;Project&gt;</code> tag </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">None</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Remove</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"npm-debug.log"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Everything, now we have support for npm, in the project dependencies the studio now shows the node "npm". </p><br><p>  If you build a project (As well as when you open the project, change the <strong>package.json</strong> file, etc.), the process of restoring the npm dependencies will start if they are specified (They are not available now).  Dependencies are downloaded to the <strong>node_modules</strong> folder in the project folder (Studio does not perceive this folder as part of the project). </p><br><p>  <a href="https://github.com/UltimaBeaR/AspNetWebpackTutorial/tree/0d63c6310b4459ed45d3bf6d5deb8f1efad3a34d">View full code</a> </p><br><h2 id="dobavlyaem-webpack">  Add Webpack </h2><br><p>  Webpack is a npm dependency, so you need to add it to <strong>package.json</strong> as a dependency.  Since it will not be used in client-side JavaScript code, it is declared as <em>dev dependency</em> .  For us, this means that it will work as an additional compilation tool for Visual Studio, neither on the server nor on the client, on the client there will be that content (including JavaScript code) that Webpack will generate. </p><br><p>  In addition to the Webpack itself, two things that will facilitate the work will also be needed (However, they are not required) </p><br><ul><li>  A webpack plugin that will clear the folder in which the webpack will create files (This folder in this tutorial will be named <strong>wwwroot / bundle</strong> ). </li><li>  Visual Studio extension that allows you to perform Webpack work every time you build an ASP.NET application from the studio automatically. </li></ul><br><p>  First, download and install the extension for Visual Studio, you can find it by the name "NPM Task Runner", or download this <a href="https://marketplace.visualstudio.com/items%3FitemName%3DMadsKristensen.NPMTaskRunner">link</a> . </p><br><p>  Now add the following lines to <strong>package.json</strong> (add inside the bracelets) </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"devDependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.5.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"clean-webpack-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.1.16"</span></span> }, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"webpack-script"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack"</span></span> }, <span class="hljs-string"><span class="hljs-string">"-vs-binding"</span></span>: { <span class="hljs-string"><span class="hljs-string">"BeforeBuild"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"webpack-script"</span></span> ] }</code> </pre> <br><p>  In <code>"devDependencies"</code> we specified the Webpack itself and the plugin to clean up what it generates. </p><br><p>  In the <code>"scripts"</code> we specified a script called <code>"webpack-script"</code> , which will launch the Webpack (At this point it will generate content, translate the code, etc.).  The Visual Studio extension that we installed earlier makes it possible for the studio to see this script as a task that can be performed, so we can schedule this task to be executed when building the application. </p><br><p>  In <code>"-vs-binding"</code> we indicated that Visual Studio should invoke the <code>"webpack-script"</code> task (which the studio now sees thanks to the installed extension) every time before building the project. </p><br><p>  Now you need to configure the Webpack itself.  It is configured using the <strong>webpack.config.js</strong> javascript script, which will be executed via node.js at the time of the <code>webpack-script</code> task call.  Add the <strong>webpack.config.js</strong> file to the project and fill its contents with the following code </p><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">"use strict"</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     output  let path = require('path'); //      (bundle)    const CleanWebpackPlugin = require('clean-webpack-plugin'); //     const bundleFolder = "wwwroot/bundle/"; module.exports = { //     entry: "./Scripts/main.js", //   output: { filename: 'script.js', path: path.resolve(__dirname, bundleFolder) }, plugins: [ new CleanWebpackPlugin([bundleFolder]) ] }; }</span></span></code> </pre> <br><p>  Here we set up the input and output paths to the JavaScript files, as well as prescribed a previously added plugin to clear the output folder. </p><br><p>  The output file webpack generates based on the input.  We do not have an input file yet, so we need to create it.  Create a <strong>Scripts / main.js file</strong> with the following contents. </p><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"helloworld"</span></span>).innerText = <span class="hljs-string"><span class="hljs-string">"Hello world from script"</span></span>;</code> </pre> <br><p>  The input file will not be available to the user, as it is located in the <strong>Scripts</strong> folder, not <strong>wwwroot</strong> , the output file generated by the Webpack will go to the <strong>wwwroot / bundle /</strong> folder and will be available to the client. </p><br><p>  On the client side, the output file will be located at <strong>~ / bundle / script.js</strong> , where <strong>~</strong> is the address of the site where the web application is running. <br>  <strong>Modify the Views / Home / Index.cshtml file</strong> so that it includes the output file, and so that the script can change the text on the page (by the id of the "helloworld" element). <br>  To do this, replace the insides of the <code>&lt;body&gt;</code> with the following </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"helloworld"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"~/bundle/script.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  In case git is used, the files generated by the Webpack should also be excluded.  To do this, create another <strong>.gitignore</strong> file, but now in the project folder (Not to be confused with the solution folder) </p><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#  webpack-  wwwroot/bundle/</span></span></code> </pre> <br><p>  The studio will show the <strong>.gitignore</strong> file in the project so that this does not happen, in the project file <strong>.csproj</strong> you need to add the following lines inside the root <code>&lt;Project&gt;</code> (Well, or via the context menu on the file -&gt; <em>Exclude From Project</em> ) </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">None</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Remove</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".gitignore"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Everything, now the project is completely configured under use of npm and Webpack.  If you compile and run the application, the page should display the text "Hello world from script" </p><br><p>  At this stage, you can already install JavaScript libraries by declaring them in the <code>"dependencies"</code> section of <strong>package.json</strong> and using them in <strong>Scripts / main.js</strong> , connecting these libraries as modules through the <code>require(" ")</code> function <code>require(" ")</code> .  For example, if you install the jquery library in this way, the <strong>Scripts / main.js file</strong> can be rewritten as follows (Note: this is just an example, to continue, it is not necessary either to install jquery or change <strong>main.js</strong> ) </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jquery'</span></span>); $(<span class="hljs-string"><span class="hljs-string">"#helloworld"</span></span>).text(<span class="hljs-string"><span class="hljs-string">"Hello world"</span></span>);</code> </pre> <br><p>  The only thing that debugging by input files in Visual Studio will not work.  However, this can be fixed by adding TypeScript support. </p><br><p>  <a href="https://github.com/UltimaBeaR/AspNetWebpackTutorial/tree/1f6994533dd1e541897bea369eb606b8be0b33ea">View full code</a> </p><br><h2 id="dobavlyaem-typescript">  Add TypeScript </h2><br><p>  First of all, you need to disable the standard TypeScript transfiguration.  To do this, add the following lines in the <code>&lt;Project&gt;</code> root tag in the project file <strong>.csproj</strong> </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TypeScriptCompileBlocked</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TypeScriptCompileBlocked</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Next, you need to add TypeScript as dev dependency for npm.  To do this <code>"devDependencies"</code> add the following to the <strong>package.json</strong> file in the <code>"devDependencies"</code> section </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"typescript"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.3.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"ts-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.0.3"</span></span></code> </pre> <br><p>  Now you need to create a configuration file for the TypeScript compiler.  Create a <strong>tsconfig.json</strong> file <strong>with the</strong> following content </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"compilerOptions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"noImplicitAny"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"noEmitOnError"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"removeComments"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alwaysStrict"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"allowSyntheticDefaultImports"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lib"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"dom"</span></span>, <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-string"><span class="hljs-string">"es2015.promise"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"allowJs"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"module"</span></span>: <span class="hljs-string"><span class="hljs-string">"es2015"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"moduleResolution"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sourceMap"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"include"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"./Scripts/*"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"compileOnSave"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><p>  Description of some of the values ‚Äã‚Äãspecified in this file </p><br><ul><li>  <code>"allowJs": true</code> - we allow the transfiguration from JavaScript to JavaScript (From the new version of the language to the old. Extension of the .js files) </li><li>  <code>"target": "es5"</code> is the output version of JavaScript, into which TypeScript and the input JavaScrpt will be transported </li><li>  <code>"module": "es2015"</code> - syntax for working with modules </li><li>  <code>"moduleResolution": "node"</code> - the module resolution strategy is the same as in node.js </li><li>  <code>"sourceMap": true</code> - <code>"sourceMap": true</code> data generation for TypeScript debugging </li><li>  <code>"include": [ "./Scripts/*" ]</code> - specify where to get the source code .ts and .js, which should be transported to the output JavaScript </li></ul><br><p>  Next you need to make TypeScript friends with Webpack.  To do this, replace the script file to configure the Webpack configuration and <strong>webpack.config.js</strong> with the following (In fact, we change some places, but in order not to write all the changes, I post the full file) </p><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">"use strict"</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     output  let path = require('path'); //      (bundle)    const CleanWebpackPlugin = require('clean-webpack-plugin'); //     const bundleFolder = "wwwroot/bundle/"; module.exports = { //     entry: "./Scripts/main.ts", //   output: { filename: 'script.js', path: path.resolve(__dirname, bundleFolder) }, module: { rules: [ { test: /\.tsx?$/, loader: "ts-loader", exclude: /node_modules/, }, ] }, resolve: { extensions: [".tsx", ".ts", ".js"] }, plugins: [ new CleanWebpackPlugin([bundleFolder]) ], //        // (     ) devtool: "inline-source-map" }; }</span></span></code> </pre> <br><p>  Here we changed the extension of the input script from <strong>.js</strong> to <strong>.ts</strong> , indicated that the input script needs to be passed through the TypeScript <code>loader: "ts-loader"</code> ( <code>loader: "ts-loader"</code> ) and did some other things. </p><br><p>  And the last step is to rename the input script file from <strong>Scripts / main.js</strong> to <strong>Scripts / main.ts</strong> , the insides can be left <strong>unchanged</strong> . </p><br><p>  <a href="https://github.com/UltimaBeaR/AspNetWebpackTutorial/tree/19cd8cade1df10e6bdc5cdeed949abec2c3e0673">View full code</a> </p><br><h2 id="itog">  Total </h2><br><p>  Everything!  Now we have a working project on ASP.NET Core, which has npm, Webpack and TypeScript and it all works in one bundle. </p><br><p>  Also, the TypeScript debugging from Visual Studio is now available, you can set a breakpoint in the input <strong>.ts</strong> file, run the project in debug mode (You need to start it in browsers chrome or internet explorer, otherwise debugging will not work, also in chrome it works for me only when I, after loading the page, clearly press the refresh of the page, apparently the debugger does not connect to the chrome immediately.  At the same time, please note that breakpoints are set in the input files, but the actual code works output (In the output code, in the form of a comment webpack records the information needed for mapping from the output to the input files). </p><br><p>  You can create other input files in the <strong>Scripts</strong> folder, in the form of <strong>.ts</strong> or <strong>.js,</strong> and both of them will fully support the new EcmaScript standard (The output file will be the es5 standard).  To connect additional input files, you need to arrange them in the form of modules and connect them to <strong>main.ts</strong> via the <code>import</code> statement or the <code>require()</code> function. </p><br><p>  Another small note is that the output files (those in the <strong>wwwroot / bundle /</strong> folder) should not be excluded from the project via the <strong>.csproj</strong> file, since if the studio does not see them, debugging of the input files stops working. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/328638/">https://habr.com/ru/post/328638/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328628/index.html">How to make it happen</a></li>
<li><a href="../328630/index.html">Product design digest, April 2017</a></li>
<li><a href="../328632/index.html">PHP Digest number 108 - the latest news, materials and tools (April 24 - May 14, 2017)</a></li>
<li><a href="../328634/index.html">Kooboo CMS Licensing FAQ</a></li>
<li><a href="../328636/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ262 (May 8 - 14, 2017)</a></li>
<li><a href="../328642/index.html">Unobvious things at the start of development for Android under Windows 7</a></li>
<li><a href="../328644/index.html">Startup is dead, long live the startup</a></li>
<li><a href="../328646/index.html">Offline promotion of the personnel monitoring system: personal experience</a></li>
<li><a href="../328648/index.html">Automating SSH access to Kubernetes nodes using Fabric and CoreOS integration</a></li>
<li><a href="../328652/index.html">Create jpeg from nowhere</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
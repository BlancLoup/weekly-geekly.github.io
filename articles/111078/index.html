<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TAU-Darwinism: Implementation in Ruby</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 Listen, a crow, and maybe a dog, 
 Maybe a cow, but also good! 
 You have such feathers, you have horns such 
 The hooves are very slender ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TAU-Darwinism: Implementation in Ruby</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br><blockquote><table><tbody><tr><td>  <i>Listen, a crow, and maybe a dog,</i> <i><br></i>  <i>Maybe a cow, but also good!</i> <i><br></i>  <i>You have such feathers, you have horns such</i> <i><br></i>  <i>The hooves are very slender and kind soul.</i> </td><td><img src="https://habrastorage.org/storage/040ade38/d0b6a145/74b696e6/0cbace52.jpg"></td></tr></tbody></table></blockquote><br>  <i>Cartoon "Plasticine Crow".</i> <br><br>  In this article I present to your attention the implementation of an evolutionary approach to the identification of a dynamic system.  The program is written in Ruby version 1.9.2 (gems: NArray, GNUPlot).  Looking under the cat you will find an example of real coding of gene information and a suitable cross-crossing algorithm ("flat crossover"). <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  I‚Äôll start by describing the black box task.  Suppose we have some object whose transfer function we would like to know (simplified, close or equivalent to real).  All we can do is to apply some impact to the input of the object and measure some output parameter (for example, the output voltage).  How do we see what is inside the box?  In other words: how to determine the approximate mathematical model of the object under study? <br>  In automatic control theory (TAU), this task is called identification.  There are various methods of identification, based on serious mathematics and difficult to implement.  However, it is possible to obtain an approximate mathematical model in a relatively simple way, namely using a stochastic approach using evolutionary algorithms. <br>  Details you can read in the first article devoted to this issue: <a href="http://habrahabr.ru/blogs/algorithm/111075/">TAU-Darwinism</a> , and here I will focus on the software implementation. <br><br><h4>  Implementation </h4><br>  When writing algorithms, the gga4r library (rubygems.org) is used.  This library was rewritten <s>to be operational</s> for compatibility with ruby ‚Äã‚Äã1.9.  The author of this library (thanks to him very much!) Implemented an evolutionary wrapper approach over entities that implement representations of evolving individuals of different content but identical in form.  It is proposed to implement your own class implementing genetic operators.  I did it like this: <br><pre><code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TFIndivid</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_reader</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filter</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fitness</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num_len</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom_len</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initialize</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">=1.0,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ts</span></span></span><span class="hljs-class">=@@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ts</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num_len</span></span></span><span class="hljs-class">,@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom_len</span></span></span><span class="hljs-class">,@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filter</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">length</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">length</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SSF::tf2ssd</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ts</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fitness</span></span></span><span class="hljs-class"> = 1/(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">step_response_deviation</span></span></span><span class="hljs-class">(@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filter</span></span></span><span class="hljs-class">)+@@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">eps</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fitness</span></span></span><span class="hljs-class"> = 0.0 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fitness</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">infinite?</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num</span></span></span><span class="hljs-class"> + </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom</span></span></span><span class="hljs-class"> + [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">] + [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ts</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">integrity_ok?</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">length</span></span></span><span class="hljs-class"> == @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num_len</span></span></span><span class="hljs-class"> + @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">denom_len</span></span></span><span class="hljs-class"> + 2 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TFIndivid</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">flat_crossover</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par2</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">r</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Random</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> = [] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par1</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">times</span></span></span><span class="hljs-class"> { |</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">| </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par1</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">]&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par2</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> &lt;&lt; r.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rand</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par2</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">]..</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par1</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">]) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">else</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> &lt;&lt; r.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rand</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par1</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">]..</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">par2</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class">]) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recombine</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">other</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TFIndivid::flat_crossover</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">other</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">res</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">integrity_ok?</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class">) ? </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TFIndivid</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class">[0..@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num_len</span></span></span><span class="hljs-class">-1], </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class">[@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num_len</span></span></span><span class="hljs-class">..-3], </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class">[-2], </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class">[-1]) : [] [</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">res</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mutate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rnd</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Random</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">new</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mutate_point</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rnd</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rand</span></span></span><span class="hljs-class">(@</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class">-1) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dna</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mutate_point</span></span></span><span class="hljs-class">] *= </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rnd</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rand</span></span></span><span class="hljs-class">(1.0) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br>  In the example on the site ‚Äúgga4r‚Äù the class of the individual is inherited from Array.  I decided to change a little logic and started the additional property "@dna".  This was done for the convenience and use of the constructor, in which a digital filter is created for the gain data, the numerator and denominator of the transfer function (in continuous time), as well as the time period of quantization.  Also in the constructor, the passed parameters are merged into one one-dimensional array for working with them by means of genetic algorithms.  Individual fitness is calculated immediately in the constructor and stored in the corresponding property. <br>  The ‚Äúflat_crossover‚Äù function is implemented by the real crossing mentioned at the very beginning of the article.  This is probably the easiest to implement.  There are a few more in which several children are implemented (one descendant is generated here) and which I probably have to realize.  In this case, the generated child is formed by choosing for each gene a random number in the interval between the values ‚Äã‚Äãof the genes of the parents. <br>  The mutation operator is implemented as a multiplication of the gene value by a random number in the range [0.0..1.0].  Thus, some of the genes "are attracted" to zero.  The selected crossing operator forms mainly individuals with gene values ‚Äã‚Äãin the middle part of the allowable range of values.  The chosen method of mutation plays the role of a counterweight. <br>  The evolutionary algorithm wrapper itself works as described in the previous article <a href="http://habrahabr.ru/blogs/algorithm/111075/">TAU-Darwinism</a> : a population is formed, selection is carried out, recombination (crossing), mutation takes place.  You can see the insides in the source code of the program (link at the end of the article).  It had to be slightly rewritten, as written above, to be used with ruby ‚Äã‚Äã1.9.  But in fact, the library refused to work with me and with version 1.8 on kubuntu 10.10 (I did not figure out why).  Anyway, you can compare with the original "gga4r" - a little change.  Something has yet to change. <br>  The fitness function is implemented as the standard deviation between the output signal of the test filter and the individual generated by the genes: <br><pre> <code class="ruby hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step_response_deviation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter)</span></span></span></span> x, test_y,y = step_response(filter) av_err = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span>.times {<span class="hljs-params"><span class="hljs-params">|i|</span></span> err = test_y[i] - y[i] av_err += err*err } Math.sqrt(av_err / <span class="hljs-number"><span class="hljs-number">99</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step_response</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter)</span></span></span></span> @@test_filter.reset filter.reset x = []; <span class="hljs-number"><span class="hljs-number">100</span></span>.times { <span class="hljs-params"><span class="hljs-params">|i|</span></span> x &lt;&lt; i*@@ts } test_y,y = [],[] <span class="hljs-number"><span class="hljs-number">100</span></span>.times { test_y &lt;&lt; @@test_filter.step(@@test_input) y &lt;&lt; filter.step(@@test_input) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x,test_y,y <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  This is slightly different from the problem statement ("a record of the output and entrance of the black box is given; required ..."), but it is more convenient, but the essence is the same. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  results </h4><br>  <s>Playing with a new pendant</s> In the course of preliminary studies, it was found out that it is most advantageous to set a large population size with a smaller number of iterations.  A suitable solution is found rather quickly with a sufficient number of individuals in the population.  The task set as follows: <br><ul><li>  There is a reference (test) transfer function - numerator: [1.5, 1.0], denominator: [0.75, 0.35, 1.1] </li><li>  The gain of the test filter is chosen equal to one (the coefficient of the transfer function when building a discrete filter to it is given in the function SSF :: tf2ssd - the ‚Äússf.rb‚Äù module in the source) </li><li>  The quantization period is 0.1 sec., For a selected test filter, a quite sufficiently small period </li><li>  Population size - 350 at the beginning and 500 maximum </li><li>  Number of iterations - 50 </li></ul><br>  It turned out that despite the specified maximum population size exceeded the specified value.  After launching, I got the following result: <br> <code>$ ruby1.9.1 main.rb <br> Iteration: 1 <br> Population size: 387 <br> best Individ: [ 1.552605923140199 1.8418549861379885 4.4154048910142265 5.556332886121151 5.320061971918478 1.6334223860651258 0.1 ] <br> best fitness: 2.6508867715774027 <br> mean fitness: 1.1722382322077871 <br> mean fitness recalc 1.1722382322077871 <br> ****************************** <br> Iteration: 2 <br> Population size: 421 <br> best Individ: [ 0.37594352736713244 0.41988779230454 6.092873656120998 3.575618643442387 8.786369744495486 1.3186424599689655 0.1 ] <br> best fitness: 2.9780762386062767 <br> mean fitness: 1.381001802845182 <br> mean fitness recalc 1.381001802845182 <br> ****************************** <br> Iteration: 3 <br> Population size: 456 <br> best Individ: [ 5.355702236617921 2.9021864520499134 3.979973441887163 1.1587534831116912 5.818934614234973 0.6934218845420625 0.1 ] <br> best fitness: 4.008150118088937 <br> mean fitness: 1.6192001539010286 <br> mean fitness recalc 1.6192001539010286 <br> ****************************** <br> Iteration: 4 <br> Population size: 501 <br> best Individ: [ 6.981596537433821 7.0034200556235495 6.592795290155172 3.1179936580946577 7.236199584387684 1.4664747534746492 0.1 ] <br> best fitness: 4.629268673426835 <br> mean fitness: 1.8244067682429481 <br> mean fitness recalc 1.8244067682429481 <br> ****************************** <br> Iteration: 5 <br> Population size: 537 <br> best Individ: [ 5.917012124258587 6.182284010197045 5.214809836688884 3.9333556599339055 8.349166334410114 1.544147649767568 0.1 ] <br> best fitness: 4.900537478511452 <br> mean fitness: 2.024810983956715 <br> mean fitness recalc 2.024810983956715 <br> ****************************** <br> Iteration: 6 <br> Population size: 551 <br> best Individ: [ 5.917012124258587 6.182284010197045 5.214809836688884 3.9333556599339055 8.349166334410114 1.544147649767568 0.1 ] <br> best fitness: 4.900537478511452 <br> mean fitness: 2.3489882909253152 <br> mean fitness recalc 2.3489882909253152 <br> ****************************** <br> Iteration: 7 <br> Population size: 540 <br> best Individ: [ 7.667944581517669 7.685145812466274 3.6039889820553768 2.4390348703480536 5.087422184655714 1.4689450977845646 0.1 ] <br> best fitness: 8.166839319133336 <br> mean fitness: 2.652950357867813 <br> mean fitness recalc 2.652950357867813 <br> ****************************** <br> Iteration: 8 <br> Population size: 552 <br> best Individ: [ 7.667944581517669 7.685145812466274 3.6039889820553768 2.4390348703480536 5.087422184655714 1.4689450977845646 0.1 ] <br> best fitness: 8.166839319133336 <br> mean fitness: 2.9467084852969725 <br> mean fitness recalc 2.9467084852969725 <br> ****************************** <br> Iteration: 9 <br> Population size: 553 <br> best Individ: [ 5.7806312313223485 4.681216450534634 5.384196754050039 3.0234885021495357 7.238140602489246 1.1815749271908358 0.1 ] <br> best fitness: 9.966075154360498 <br> mean fitness: 3.335389533280396 <br> mean fitness recalc 3.335389533280396 <br> ****************************** <br> Iteration: 10 <br> Population size: 543 <br> best Individ: [ 5.7806312313223485 4.681216450534634 5.384196754050039 3.0234885021495357 7.238140602489246 1.1815749271908358 0.1 ] <br> best fitness: 9.966075154360498 <br> mean fitness: 3.818330258524996 <br> mean fitness recalc 3.818330258524996 <br> ****************************** <br> Iteration: 11 <br> Population size: 555 <br> best Individ: [ 5.7806312313223485 4.681216450534634 5.384196754050039 3.0234885021495357 7.238140602489246 1.1815749271908358 0.1 ] <br> best fitness: 9.966075154360498 <br> mean fitness: 4.241020711174743 <br> mean fitness recalc 4.241020711174743 <br> ****************************** <br> Iteration: 12 <br> Population size: 563 <br> best Individ: [ 7.114438733870453 5.7051128886012386 3.8495059720675098 1.8164317233081309 5.543227442940334 1.1352374472380862 0.1 ] <br> best fitness: 11.644557896655645 <br> mean fitness: 4.980294253355436 <br> mean fitness recalc 4.980294253355436 <br> ****************************** <br> ....... <br> ****************************** <br> Iteration: 23 <br> Population size: 542 <br> best Individ: [ 5.949029964618817 4.681516090696933 4.8007731550065325 2.562344672524173 6.969591955243219 1.1684490266387202 0.1 ] <br> best fitness: 20.468430876331446 <br> mean fitness: 11.25191007878279 <br> mean fitness recalc 11.25191007878279 <br> ****************************** <br> ...... <br> ****************************** <br> Iteration: 36 <br> Population size: 550 <br> best Individ: [ 6.304563716617802 4.937028188768713 5.01636959411469 2.5019167234335344 7.143946485486306 1.1690443373254094 0.1 ] <br> best fitness: 30.361894930102864 <br> mean fitness: 22.65217005076974 <br> mean fitness recalc 22.65217005076974 <br> ****************************** <br> ........ <br> ****************************** <br> Iteration: 46 <br> Population size: 542 <br> best Individ: [ 6.548169493382168 5.060607979367818 4.739775170940725 2.3444848651883947 6.741642980854007 1.1564890916088506 0.1 ] <br> best fitness: 32.826565607333514 <br> mean fitness: 25.606090666108418 <br> mean fitness recalc 25.606090666108418 <br> ****************************** <br> Iteration: 47 <br> Population size: 550 <br> best Individ: [ 6.548169493382168 5.060607979367818 4.739775170940725 2.3444848651883947 6.741642980854007 1.1564890916088506 0.1 ] <br> best fitness: 32.826565607333514 <br> mean fitness: 25.489911664932283 <br> mean fitness recalc 25.489911664932283 <br> ****************************** <br> Iteration: 48 <br> Population size: 561 <br> best Individ: [ 6.548169493382168 5.060607979367818 4.739775170940725 2.3444848651883947 6.741642980854007 1.1564890916088506 0.1 ] <br> best fitness: 32.826565607333514 <br> mean fitness: 25.44926190395142 <br> mean fitness recalc 25.44926190395142 <br> ****************************** <br> Iteration: 49 <br> Population size: 550 <br> best Individ: [ 3.1439340250602816 5.060607979367818 4.739775170940725 2.3444848651883947 6.741642980854007 1.1564890916088506 0.1 ] <br> best fitness: 32.826565607333514 <br> mean fitness: 26.108921277427932 <br> mean fitness recalc 26.108921277427932 <br> ****************************** <br> Iteration: 50 <br> Population size: 559 <br> best Individ: [ 3.1439340250602816 5.060607979367818 4.739775170940725 2.3444848651883947 6.741642980854007 1.1564890916088506 0.1 ] <br> best fitness: 32.826565607333514 <br> mean fitness: 26.23635084771665 <br> mean fitness recalc 26.23635084771665 <br> ******************************</code> <br>  The first two numbers in the ‚Äúbest Individ‚Äù are the numerator of the transfer function, the next three are the denominator, then the scale factor and the quantization period.  The best fitness, equal to 32 "parrots" - a fairly good result.  In confirmation of the following figure: <br><img src="http://habrastorage.org/storage/e6007b07/6e8ac326/89b9446c/311cbb9b.png"><br>  It depicts graphs of transient processes of the test and obtained during the evolution of filters when a single step action is applied to the input.  ‚ÄúWho‚Äù from the ‚ÄúWho‚Äù graphs for the time being I can‚Äôt say - the functionality for working with gnuplot was not finished, but it doesn‚Äôt matter in this case, because  to the naked eye, you can see that the results are very close. <br><h4>  Conclusion </h4><br>  The program was implemented in the course of research work on the ‚ÄúU.M.NI.K‚Äù program.  The code is raw but working (at least for me).  Plans to equip the program with some simple GUI for convenience.  Below is a link to the code. <br>  <b>UPD1:</b> source is hosted on GitHub. <br>  <a href="https://github.com/homoluden/tau-ga">GitHub Repository</a> </div><p>Source: <a href="https://habr.com/ru/post/111078/">https://habr.com/ru/post/111078/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111071/index.html">Briefly and quickly deal with C ++ CLI</a></li>
<li><a href="../111072/index.html">"Procons" - choose electronics</a></li>
<li><a href="../111073/index.html">Hotmail users celebrated New Year with an empty box</a></li>
<li><a href="../111075/index.html">TAU-Darwinism</a></li>
<li><a href="../111076/index.html">Secrets of sites</a></li>
<li><a href="../111079/index.html">Using multiple proxies in Opera</a></li>
<li><a href="../111080/index.html">Step-by-step description of creating a simple application for Samsung Bada</a></li>
<li><a href="../111081/index.html">Instructions (!) For Android firmware in NAND HD2</a></li>
<li><a href="../111088/index.html">Imaginary friends</a></li>
<li><a href="../111089/index.html">Another way to manage event listeners</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
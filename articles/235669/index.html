<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Oracle Siebel CRM Event Model (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is intended for those who are familiar with the Oracle Siebel CRM system and who are well aware of its three-tier architecture. 

 When d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Oracle Siebel CRM Event Model (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  This article is intended for those who are familiar with the Oracle Siebel CRM system and who are well aware of its three-tier architecture. <br><br>  When designing a system, it is important to understand how it will react to various user actions: creating or deleting a business component record, clicking a button on an applet, editing a field, saving data, etc.  To create an architecture that, on the one hand, implements customer requirements, and, on the other hand, will not increase costs for further support and scaling, you need to know how Oracle Siebel CRM processes each event that the user or procedure initiates. <br><br>  In general, event processing within each object goes through several stages: <br><ol><li>  Pre-Branch </li><li>  Standard handler </li><li>  Post-branch </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><img src="https://habrastorage.org/files/5e9/454/673/5e945467373f4611b0d1e56fca6f2358.jpg" alt="Event model"><br><br>  In fact, Pre-Branch and Post-Branch are stubs, within which developers have the opportunity to write their own handlers, that is, to set up their own event-handling algorithm.  The choice of the branch in which this algorithm is written depends on what the standard handler does.  This article examines in detail the two most frequently used events at the business component level: <b>SetFieldValue</b> (updating the field value) and <b>WriteRecord</b> (saving changes to the database). <br><habracut><br><h2>  SetFieldValue - script </h2><br>  Consider the business component <i><b>Contact</b></i> and its field [Work Phone #].  This is a common base field that the user can edit.  Currently the <i>Immediate Post Change</i> property is set to this field to 'Y': <br><br><img src="https://habrastorage.org/files/3b9/b51/ded/3b9b51ded38f4e64851a53c5d39e4656.jpg" alt="Immediate Post Change"><br><br>  <i>What exactly does this property, we will see later.</i> <br><br>  Next, we will consider such a script at the level of the <b>Contact</b> business component: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BusComp_PreSetFieldValue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">FieldName, FieldValue</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FieldName == <span class="hljs-string"><span class="hljs-string">"Work Phone #"</span></span>) { TheApplication().RaiseErrorText(<span class="hljs-string"><span class="hljs-string">": "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetFieldValue(<span class="hljs-string"><span class="hljs-string">"Work Phone #"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (ContinueOperation); }</code> </pre> <br>  In essence, a handler is written on the Pre-Branch for the SetFieldValue event, which will be called before the standard handler.  What happens when a user wants to update the [Work Phone #] field?  In this case, the system should display an error and, in fact, it will not come to calling the standard handler. <br><br>  It was before entering a new value: <br><br><img src="https://habrastorage.org/files/a5c/02a/bb2/a5c02abb2dfb43f0a79bac3abb4df12a.jpg"><br><br>  Enter new value: <br><br><img src="https://habrastorage.org/files/c58/ccc/006/c58ccc0068044090bce4da6e1d3a5262.jpg"><br><br>  After switching to another field: <br><br><img src="https://habrastorage.org/files/ab7/2ae/734/ab72ae734e81486eaf5dec314a9d2465.jpg"><br><br>  It turned out the following: <br><table><tbody><tr><td><img src="https://habrastorage.org/files/3d5/e7e/4d9/3d5e7e4d9a224fe99e208c853d031709.jpg"><br></td><td>  At the initial stage, the value was the same on all three levels (adjusted for formatting, which is determined by the type of the DTYPE_PHONE field). <br></td></tr><tr><td><img src="https://habrastorage.org/files/63e/104/3dd/63e1043dd0e945648ca00b88d0300804.jpg"><br></td><td>  Then the user entered a new value in the ‚ÄúWork #‚Äù text field at the applet level.  At this moment, at the level of business components and at the level of the table, the value has not changed. <br></td></tr><tr><td><img src="https://habrastorage.org/files/4d3/daa/511/4d3daa51117041cabd87ca32a15c55c8.jpg"><br></td><td>  After the user shifted the focus from the Work # text field, the applet triggered the SetFieldValue event at the business component level.  At this point, the system saw that there is a script within the BusComp_PreSetFieldValue function, and began its execution.  Within the framework of this script, the current value of the [Work Phone #] field was read, and through the TheApplication (). RaiseErrorText () function, this value was displayed.  This function ends the event processing, respectively, the system did not reach the standard handler and the Post-Branch branch did not reach.  As a result, the old error value is displayed in the error text, and at the applet level the new value is also not preserved. <br><br></td></tr></tbody></table><br>  Now consider the same situation, just transfer this script to the Post-Branch SetFieldValue events: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BusComp_SetFieldValue</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">FieldName</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FieldName == <span class="hljs-string"><span class="hljs-string">"Work Phone #"</span></span>) { TheApplication().RaiseErrorText(<span class="hljs-string"><span class="hljs-string">": "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GetFieldValue(<span class="hljs-string"><span class="hljs-string">"Work Phone #"</span></span>)); } }</code> </pre><br>  We repeat all the same actions and see a slightly different result: <br><br><img src="https://habrastorage.org/files/802/e6b/588/802e6b588a2a491db2257d5d33fe0867.jpg"><br><br>  First, the new value is displayed in the error text.  Secondly, despite the error that the user sees, the entered value remains in place. <br><table><tbody><tr><td><img src="https://habrastorage.org/files/2c5/ed0/240/2c5ed02406534765be84d4917b595cff.jpg"><br></td><td>  If the system reached Post Branch, then it can be argued that the standard handler completed its execution without errors.  So, from the above example, we can conclude that the standard SetFieldValue handler updates the field value at the business component level.  It is important to note here that at the table level nothing has changed at this moment.  You can verify this by running a simple database query. <br></td></tr></tbody></table><br><br>  From the above example, we can conclude: if you refer to the field of business components on the Pre-Branch of the SetFieldValue events, the system returns the current value of the field that was there before entering the new value.  On the other hand, if you refer to the business component field at the Post-Branch SetFieldValue events, the system will return the value entered by the user. <br><br><h2>  SetFieldValue - Run-Time Event </h2><br>  All the above principles work in the event that the handlers for Post-Branch and for Pre-Branch will be run through the mechanism of Run-Time Events, and not through scripts. <br><br>  To demonstrate this, consider the following simple validation rule (Administration - Data Validation): <br><br><img src="https://habrastorage.org/files/11d/1de/35d/11d1de35d16140cba86a681233c60536.jpg"><br><br>  Since 1 is never 0, each time the system calls on this rule, the user receives an error message, and the system stops processing the event, which at that moment was triggered.  <i>Data Validation Manager is a separate large topic worthy of a separate article.</i>  <i>Here I will not dwell on the features of its settings.</i> <br><br>  To run this rule, you need to create an Action Set (Administration - Runtime Events) with one action.  The parameters for this action are shown in the table: <br><table><tbody><tr><td>  Action type </td><td>  Busservice </td></tr><tr><td>  Business Service Name </td><td>  Data validation manager </td></tr><tr><td>  Business Service Method </td><td>  Validate </td></tr><tr><td>  Business Service Context </td><td>  Rule Set Name, SBL Contact Dummy Validation </td></tr></tbody></table><br>  As a result, the handler is ready and should be attached to the corresponding event.  To do this, you need to create an Event: <br><br><img src="https://habrastorage.org/files/08a/a9c/4d6/08aa9c4d6b0741e3b568590d1aeac83a.jpg"><br><br>  In this case, the handler will be launched on the Pre-Branch of the SetFieldValue event of the Contact business components if the [Email Address] field is updated.  It is important to pay attention to Conditional Expression.  In its framework, the system must read the value from the [Email Address] field and make sure that the length of this value is less than 3 characters.  Only if the condition is met, the handler will be launched. <br><br>  Now you can check how the system will react to changes in the postal address of an individual. <br><br>  Email is initially filled with siebel@oracle.com: <br><br><img src="https://habrastorage.org/files/e0c/949/aa7/e0c949aa76c343c0ae32e92a4169fb86.jpg"><br><br>  Enter a new value whose length is less than 3 characters: <br><br><img src="https://habrastorage.org/files/2be/85f/025/2be85f0252ad41eaa853b7d2bd1ebf19.jpg"><br><br>  After switching to another field: <br><br><img src="https://habrastorage.org/files/9c3/ecf/58e/9c3ecf58eef04a72850385e37413d10e.jpg"><br><br>  The system did not display any error.  The value remains the same.  Hence, the condition <i>Len ([Email Address]) &lt;3</i> did not pass.  That is, the system at that moment considered the old value in the [Email Address] field, which was equal to siebel@oracle.com, saw that the length of this value is more than 3, and did not start the handler.  No error occurred, and the business component field was updated successfully. <br><br>  If you now enter the old value in this field: <br><br><img src="https://habrastorage.org/files/a67/02d/b0c/a6702db0c0e64884bd178175c1644079.jpg"><br><br>  and go to another field: <br><br><img src="https://habrastorage.org/files/6b4/89d/0e2/6b489d0e294f43559bd02c55e5e4e5b4.jpg"><br><br>  then, firstly, the user will see an error, and secondly, the value in the field will not change.  <i>In fact, we received two errors at once: the first is a system error, the second is an error from Data Validation.</i>  <i>If someone knows how to get rid of the first in this case, write in the comments.</i>  If we understand the principle of operation of the standard handler for the SetFieldValue event, then the result will be quite logical. <br><br>  Now you can make a small change in the considered Event: <br><br><img src="https://habrastorage.org/files/df3/696/4f6/df36964f61ae4a729bca2f9bd99929ea.jpg"><br><br>  In this case, the handler is bound to the Post-Branch SetFieldValue events.  Everything else remains as it was, but the behavior of the system will be significantly different. <br><br>  After these changes, the system will not ‚Äúswear‚Äù at entering the value siebel@oracle.com in the ‚ÄúEmail‚Äù text field: <br><br><img src="https://habrastorage.org/files/f53/0eb/bf2/f530ebbf267f45b4b86da0e3a4078c99.jpg"><br><br>  But if you try to enter a value less than 3 characters, the following will occur: <br><br><img src="https://habrastorage.org/files/dcc/289/f8e/dcc289f8e77944b3b727900693962083.jpg"><br><br>  The user will see an error message, but the value will remain in the business component field.  The error message was displayed because the length of the newly entered value was checked in Conditional Expression.  But, since the error occurred at the time of Post-Branch, that is, after the operation of the standard handler, the entered value remained in place. <br><br><h2>  Writerecord </h2><br>  If the standard SetFieldValue event handler actually descends values ‚Äã‚Äãfrom the applet level to the business component level, then the standard WriteRecord handler drops data from the business component level to the table level.  That is, the data is updated in the corresponding tables, which other users of the system can then see. <br><br><img src="https://habrastorage.org/files/84f/613/b59/84f613b5915f4103ab6715540093d190.jpg"><br><br>  The difference between SetFieldValue and WriteRecord lies in the fact that in the first case the fields are updated separately, and in the second case, changes to all the fields go down to the database at once. <br><br>  If the developer writes his handler and binds it to the Pre-Branch WriteRecord events, the system will perform all actions before writing the data to the database, otherwise writing to the database will already be done.  Accordingly, if an error occurs on the Pre-Branch branch, the data in the database will not change, and vice versa, if an error occurs on the Post-Branch branch, this will not affect the standard handler and the data in the database will be updated. <br><br>  Knowing this fact, you can more correctly implement the business logic.  For example, Pre-Branch needs to hang up various data validation procedures to ensure that the ‚Äúcurve‚Äù information does not fall into the base.  Notification procedures can be attached to Post-Branch.  For example, set up sending Emails when an application goes to a particular stage. <br><br><h2>  Immediate Post Change </h2><br>  The Immediate Post Change field property, in case it is equal to ‚ÄúY‚Äù, tells the system that the SetFieldValue event for the corresponding field needs to be launched at the moment when the user has made changes and is trying to move the cursor to another location.  If it is not set, and for most fields this is so, then the SetFieldValue event occurs as part of the handling of the WriteRecord event.  That is, the system looks at what data from the applet level has not been transferred to the business component level, and for each field it starts SetFieldValue, and then WriteRecord is launched. <br><br><h2>  findings </h2><br>  Considering how Oracle Siebel CRM handles events, I recommend running data validation on the Pre-Branch branch of the WriteRecord event.  In this case, when a user tries to save a record created by him, the system says in which fields the data does not correspond to a specific business logic.  The user makes the appropriate adjustments and again tries to save everything. <br><br>  Validation of the values ‚Äã‚Äãof each field will require writing a script, since the Run-Time Event does not have access to the new value when it is on the Pre-Branch branch of the SetFieldValue event. <br><br>  All the described principles are valid not only when the user makes changes through the interface, but also when the EAI integration works or just the script runs the SetFieldValue method directly.  For example: bcContact.SetFieldValue (‚ÄúEmail Address‚Äù, ‚Äúrrr@kk.ru‚Äù). </habracut></div><p>Source: <a href="https://habr.com/ru/post/235669/">https://habr.com/ru/post/235669/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235649/index.html">Mobile Trio: Gmini mPlay</a></li>
<li><a href="../235657/index.html">Tesla's Gigafabrika for 5 billion to be built in Nevada</a></li>
<li><a href="../235661/index.html">Gear VR - Samsung's Unusual Virtual Reality Helmet</a></li>
<li><a href="../235665/index.html">Lumia 830, Lumia 730 and Lumia 735 announced in Berlin</a></li>
<li><a href="../235667/index.html">Health IT-Schnick and Relax Eye's</a></li>
<li><a href="../235671/index.html">Leaked private photos of celebrities: a detailed investigation of the Australian developer</a></li>
<li><a href="../235675/index.html">Ractive.js - the diamond age of web development</a></li>
<li><a href="../235679/index.html">Twitpic closes</a></li>
<li><a href="../235681/index.html">Entertaining web quest. Get the whole URL</a></li>
<li><a href="../235685/index.html">ASUS MEMO Pad 7 Tablet Review (ME176CX)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Easy and easy: mail and jabber for users of your site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let's say you develop a website on the Internet. You have regular users, someone comes to you from time to time. And of course you are looking for way...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Easy and easy: mail and jabber for users of your site</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/21f84584/05cf70b8/2e4be6e7/b41f35e3.png" align="right">  Let's say you develop a website on the Internet.  You have regular users, someone comes to you from time to time.  And of course you are looking for ways to keep the audience on your site, inventing all sorts of original features and perfecting the interface.  Why not use your site name as an export coin?  After all, you can provide your users with an additional bonus <i>mailing address</i> and the corresponding <i>Jabber address</i> in your domain. <br><br>  Of course, I do not suggest becoming the next mail provider.  It's stupid when there are players like <a href="https://gmail.com/">gmail.com</a> and <a href="http://www.yandex.ru/">yandex.ru</a> .  In addition, you can naturally use the services of the aforementioned Google and Yandex to connect your domain to their services.  But then you will not get any integration with your user base and no control over the available functionality. <br><br>  But there is a simple and elegant way to transparently combine mail and Jabber in your domain with user profiles on the site.  A user will have a single login and a single password everywhere, and there will be no need to perform any additional actions to connect mail and a Jabber account.  Just an extra bonus, complete with registration on your portal. <br> <a href=""><img src="https://habrastorage.org/storage/15d99bea/74da9b7e/c6a0ca3b/ad80903c.png" align="right"></a> <br><a name="habracut"></a>  Let's start with a description of how this will work.  If you have a website on which you can register, then you certainly have a database of users with a login, email address and password for each (if you value your users just a little, then instead of passwords you will have irreversible hashes, but for this article it does not matter).  In addition, the logins for all users are of course different.  Then you can configure the <i>mail server</i> , which will redirect mail for <b>user@yourdomain.com</b> to the main mailbox of the user from the profile, as well as the <i>Jabber server</i> , which will be authorized by JID <b>user@yourdomain.com</b> through your database.  Thus, users of your site will receive a postal and Jabber address in your domain, combined with their profile.  In this case, you will not provide the mailbox, only the address.  This is very convenient for the end user, since he always has a box somewhere and usually doesn‚Äôt make sense to start another one.  But the beautiful address, which can boast, never hurts.  The only thing that is necessary is to provide for the possibility of disabling this functionality through the user profile.  Otherwise, such a system can be very effectively used to send spam. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  The practical side of the issue </h4><br>  Let's move from theory to practice.  To raise mail and Jabber services, you will need any Linux server, but this article describes <b>Ubuntu Server 10.04</b> .  In addition, all instructions will be similar for older versions of <b>Ubuntu</b> , as well as for <b>Debain</b> . <br><br>  As a mail server, it makes sense to use <b>Postfix</b> , as one of the most reliable and undemanding to resources.  As XMPP (aka Jabber), the server is <b>ejabberd</b> .  These two servers will be virtually unrelated to each other, so let's start by setting up mail. <br><br><h4>  Mail system setup </h4><br>  To install <b>Postfix</b> in <b>Ubuntu,</b> just run <br><br><pre><code class="bash hljs">sudo apt-get install postfix</code> </pre> <br>  When you are asked what type of settings to use - select the website and enter any data in response to further questions from the bald, just below there will be a ready config with all the necessary settings. <br><br>  After installation, you need to configure Postfix so that when you request delivery of a letter to <b>someuser@yourdomain.com</b> , Postfix would look in your database, find out if the user you are looking for is there and if the mailing address is activated for it, - to what address to redirect the letter.  After that, Postifx must accept the letter and redirect it to the primary email address of the specified user. <br><br>  This problem can be solved using Postfix built-in tools, but forcing a mail server for each new letter to send a request to the main database is not a good idea, since it will put an extra load on your user database, since spam is now a lot of spamming on the Internet.  It is much better to upload the necessary information a couple of times a day from your main database to Postfix, since all this information is a table of two fields: the name of the user and his main email address. <br><br>  To redirect mail to Postfix, use different <b>alias_maps</b> .  Since the described system is not tied to the system users of the server, we will use the virtual domains mechanism and the <a href="http://www.postfix.org/postconf.5.html">virtual_alias_maps</a> parameter to redirect mail to the main addresses of users.  In this parameter, you just need to specify the table of correspondence of the user's address to the address to which the correspondence should be redirected.  This table will be created based on the contents of your main user database with a special script, about which just below. <br><br>  In the meantime, let's finally deal with the necessary Postfix options.  All Postfix configuration is done by editing the <i>/etc/postfix/main.cf</i> configuration file.  So, to solve the task, as I said, the virtual domains mechanism will be used, since real mail users on the server are not from where to come from.  Therefore, you must completely disable local delivery.  In addition, users should not have any access to your SMTP server, so you should disable authentication and SSL encryption. <br><br>  Here is the contents of the configuration file that is used on one of my servers: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># See /usr/share/postfix/main.cf.dist for a commented, more complete version ######################################################## ##   smtpd_banner = $myhostname ESMTP server biff = no #   .    10Mb message_size_limit = 204800000 #    myhostname = mail.yourdomain.com myorigin = $mydomain mynetworks = 127.0.0.0/8 mailbox_size_limit = 0 virtual_mailbox_limit = 0 recipient_delimiter = + inet_interfaces = all inet_protocols = ipv4 append_dot_mydomain = no readme_directory = no ########################################################## ##     #    ,     mydestination = local_recipient_maps = relay_domains = relay_recipient_maps = transport_maps = #    virtual_mailbox_domains = $mydomain #    (  -   Dovecot) #      (  ) virtual_mailbox_maps = hash:/etc/postfix/mailboxes/local-mailboxes #    virtual_alias_maps = hash:/etc/postfix/mailboxes/db-aliases hash:/etc/postfix/mailboxes/local-aliases #   .   ,    Dovecot virtual_mailbox_base = /var/mail virtual_uid_maps = static:900 virtual_gid_maps = static:900 ########################################################### ##    -  # SASL   smtpd_sasl_auth_enable = no # TLS  smtpd_use_tls = no ########################################################### ##    #  ETRN  smtpd_etrn_restrictions = reject #  VRFY  disable_vrfy_command = yes #   EHLO (HELO)  smtpd_helo_required = yes #        smtpd_reject_unlisted_recipient = yes #    -     PTR (  ) smtpd_client_restrictions = permit_mynetworks reject_unknown_reverse_client_hostname permit #   HELO.     ,      smtpd_helo_restrictions = permit_mynetworks reject_invalid_helo_hostname reject_non_fqdn_helo_hostname reject_unknown_helo_hostname permit #   MAIL FROM.   ,      smtpd_sender_restrictions = reject_non_fqdn_sender reject_unknown_sender_domain permit #   RCPT TO.       smtpd_recipient_restrictions = reject_non_fqdn_recipient reject_unlisted_recipient permit_mynetworks reject_unauth_destination permit #   .       smtpd_data_restrictions = reject_unauth_pipelining</span></span></code> </pre> <br>  You can read more about the configuration and various Postfix options on the Internet, for our task there are three important points: <br><ol><li>  Do not put too hard restrictions to filter spam.  Leave this prerogative to the mail servers your users use.  Your task is to simply send mail and weed out only that spam is 100%.  You can read more about correctly configuring Postfix to minimize spam flow in one of my <a href="http://help.ubuntu.ru/wiki/%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F_%25D1%2581%25D0%25BF%25D0%25B0%25D0%25BC%25D0%25B0_%25D0%25BD%25D0%25B0_%25D1%2583%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BD%25D0%25B5_smtp_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25BB%25D0%25B0">previous articles</a> .  Please note, for normal forwarding, you need to remember to properly configure the DNS records for your server, you can also read about this in the article at the link. </li><li>  Be sure to specify an empty local user map in the <b>virtual_mailbox_maps</b> parameter, otherwise Postfix will accept mail for all addresses in your domain and give a bunch of errors about undeliverable.  In my case, the map file is <i>/ etc / postfix / mailboxes / local-mailboxes</i> .  This is a plain empty text file.  After creating it, you must run the command <br><br><pre> <code class="bash hljs">sudo postmap /etc/postfix/mailboxes/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>-mailboxes</code> </pre> <br>  otherwise, Postfix will not work with your file. </li><li>  Finally, all redirection rules will be defined in two files specified in the <b>virtual_alias_maps</b> parameter.  One will be created automatically by the script based on the contents of your user database, and the second is needed to manually create additional auxiliary addresses.  After editing the file of additional addresses, do not forget to issue the <b>postmap</b> command for it.  More information about the use of aliases to redirect mail to Postfix can be found in the <a href="http://www.postfix.org/ADDRESS_REWRITING_README.html">official documentation</a> . </li></ol>  Now, in fact, the script itself, which creates a map of aliases based on the contents of the user database.  The following script is designed to work with the database engine <a href="http://www.simplemachines.org/">SMF</a> , you will need to modify it for your database: <br><br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl #    SMF    , #        postfix.    # cron.   /etc/cron.d/postfix-smf-sync use 5.010; use DBI; ############################################################# #    (MySQL) $MYSQL_host = 'bd.yourdomain.com'; $MYSQL_port = '3306'; $MYSQL_user = 'postfix'; $MYSQL_pass = 'PASSW0RD'; $MYSQL_db = 'my_smf'; #  SMF -          $SMF_GID = '15'; $SMF_prefix = 'smf_'; #   $domain = "yourdomain.com"; #   $postfix_file = "/etc/postfix/mailboxes/db-aliases"; ############################################################# $dbh = DBI-&gt;connect("DBI:mysql:$MYSQL_db:$MYSQL_host:$MYSQL_port",$MYSQL_user,$MYSQL_pass) or die "Hey guys! We've got a big error here...\n"; #   my $sth = $dbh-&gt;prepare("SELECT memberName, realName, emailAddress FROM ${SMF_prefix}members WHERE (ID_GROUP = $SMF_GID OR FIND_IN_SET($SMF_GID, additionalGroups))") or die "Hey guys! We've got big error here!\n"; $sth-&gt;execute() or die "Hey guys! We've got a big error here...\n"; #     Postfix open ALIASES, "&gt;$postfix_file" or die "Can't open $postfix_file\n"; say ALIASES &lt;&lt;INTRO; ################################################# #    yourdomain.com  # #  . # # # #      # # /etc/postfix/scripts/postfix-sync.pl # #      SMF.  # #    . # ################################################# INTRO #     : #   $w = '[a-zA-Z0-9]'; #  -: $s = '[._\-]'; #   while (my $row = $sth-&gt;fetchrow_hashref()) { #  lower case,       my $user = lc $row-&gt;{realName}; #       -   #   ,    ".", "-"  "_" next unless $user =~ /^($w+$s)*$w+$/; # ,     my $email = lc $row-&gt;{emailAddress}; next if "$user\@$domain" eq $email; #     say ALIASES "$user\@$domain\t$row-&gt;{emailAddress}"; } #        postfix' close ALIASES; `/usr/sbin/postmap hash:$postfix_file`;</span></span></code> </pre><br>  As a result of the script operation, the alias file <i>/ etc / postfix / mailboxes / db-aliases</i> will be created, in which there will be lines like <br><br><pre> <code class="bash hljs">someuser@yourdomain.com usermail@anotherdomain.com</code> </pre> <br>  One line for each user in the mail user group.  The script contains a fool check: first, no users with special characters in the name will be skipped in the Postfix alias file.  Well, secondly, the user will not be able to specify the address on your website as the main address in his profile, so that the postal system does not turn out to be a cycle. <br><br>  All that is left to do is to add the launch of the script to the scheduler, for example, create a <b>cron</b> job.  To do this, create a file <i>/etc/cron.d/postfix-sync</i> with something like the following: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Synchronize Postfix with BD 18 04 * * * root /etc/postfix/scripts/postfix-sync.pl</span></span></code> </pre><br>  As you can see, my script runs every day at 04:18. <br><br>  This completes the postal system configuration. <br><br><h4>  Setup XMPP server </h4><br>  We will use <b>ejabberd</b> as XMPP server.  First you need to put it: <br><br><pre> <code class="bash hljs">sudo apt-get install ejabberd</code> </pre> <br>  The Internet is full of <i>ejabberd</i> configuration materials, all we need to do to integrate with the existing user database is to tell <i>ejabberd to</i> use an external authorization mechanism and write a module that implements authorization through our database.  To use external authorization, you need to write only two lines in the <i>ejabberd</i> configuration file <i>/etc/ejabberd/ejabberd.conf</i> : <br><br><pre> <code class="bash hljs">{auth_method, external}. {extauth_program, <span class="hljs-string"><span class="hljs-string">"/etc/ejabberd/auth.pl"</span></span>}.</code> </pre> <br>  Well, actually the authorization module itself for the same SMF database, which you will need to change for your database: <br><br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl use 5.010; use Digest::SHA1 qw(sha1_hex); use DBI; ############################################################# #    (MySQL) $MYSQL_host = 'bd.yourdomain.com'; $MYSQL_port = '3306'; $MYSQL_user = 'postfix'; $MYSQL_pass = 'PASSW0RD'; $MYSQL_db = 'my_smf'; #  SMF -          $SMF_GID = '15'; $SMF_prefix = 'smf_'; #   $valid_domain = "yourdomain.com"; ############################################################# #     sub db_connect { my $dbh = DBI-&gt;connect("DBI:mysql:$MYSQL_db:$MYSQL_host:$MYSQL_port",$MYSQL_user,$MYSQL_pass); return $dbh; } $dbh = db_connect; #   ,   .  , . while(1) { #    ejabberd my $nread = sysread STDIN, my $buf, 2; unless ($nread == 2) { exit } my $len = unpack "n", $buf; $nread = sysread STDIN, $buf, $len; my ($op,$user,$domain,$passwd) = split /:/, $buf; #   ,    $passwd =~ s/[\n\r]//g; #   ejabberd,     die "_" if $valid_domain ne $domain; my $result = 0; ##      : #       -   #   ,    ".", "-"  "_" if ($user =~ /^\w+[\w.\-_]*\w+$/) { #   ,    unless ($dbh) { $dbh = db_connect } #     .   -   my $sth = $dbh-&gt;prepare("SELECT memberName, realName, passwd FROM ${SMF_prefix}members WHERE (ID_GROUP = $SMF_GID OR FIND_IN_SET($SMF_GID, additionalGroups)) AND realName = '$user'") or $dbh = undef if $dbh; #     .   -   $sth-&gt;execute() or $dbh = undef if $dbh; #     if ($dbh) { #     my $num = $sth-&gt;rows(); #          my $row = $sth-&gt;fetchrow_hashref() if $num == 1; #     if ($op =~ /auth/i and $num == 1) { my $epass = sha1_hex(lc($row-&gt;{memberName}) . $passwd); $result = $epass eq $row-&gt;{passwd} ? 1 : 0; } elsif ($op =~ /isuser/i and $num == 1) { $result = exists $row-&gt;{memberName} ? 1 : 0; } } } else { $result = 0; } #    ejabberd my $out = pack "nn", 2, $result; syswrite STDOUT, $out; }</span></span></code> </pre><br>  In addition, you should remove the <b>mod_register</b> module from the <b>modules</b> section of the <i>ejabberd</i> configuration file, since it is impossible to register on your Jabber server. <br><br>  The rest of the Jabber server setting is not tied to authorization.  Accordingly, you can freely configure conferences, logging, and other features that are abundantly available in <i>ejabberd</i> , in order to get the XMPP server that best suits your needs. <br><br><h4>  As a summary </h4><br>  The proposed technical solution makes it easy to provide your users with email and XMPP addresses in your domain, while the user is not required to register and remember any additional passwords and logins.  The address is turned on and off in the user profile with one tick (or something else, depending on the implementation). <br><br>  In this case, the user receives a full-featured XMPP account with all the additional services that you only want to provide him.  And a mailing address that is not tied to any particular physical mailbox.  By the way, I pay attention: the user can send mail from the issued address without any problems, though not through your SMTP server.  For example, sending on behalf of a third-party mailbox is implemented in Gmail, or you can use the provider‚Äôs SMTP server. <br><br>  On the technical side, uploading addresses for Postfix from your main database negates the danger of the main site crashing due to mail problems.  Problems with XMPP should also not arise, since in fact the XMPP server is practically not connected with other services.  The authorization module simply checks the password sent via an encrypted connection (an XMPP feature) through the base, without changing or adding anything.  So through him something bad to do too will not work. <br><br>  The only problem with the proposed scheme is the theoretical possibility of compromising the user's main mailbox by sending a special letter that your server accepts, but rejects the user's mail server.  In this case, the sender will receive a breakdown in which the main address of the user will be written.  And although it is usually easy to find out the mailing address using more simple methods, you only need to enable mail for your domain only at the user's request, so as not to paranoid paranoids. <br><br>  <i>So, easily and naturally, you can try to catch up and overtake Vkontakte and Facebook.</i>  <i>The described scheme actually works on several sites for quite a long time.</i>  <i>Any comments, questions and suggestions are greatly appreciated!</i> <br><br><h4>  Current version of the article </h4><br>  <font color="#5E2750"><strong><i>The latest and most current version of this article, divided into two parts - for <a href="http://help.ubuntu.ru/wiki/%25D0%25BF%25D0%25BE%25D1%2587%25D1%2582%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B5_%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581%25D0%25B0_%25D0%25B4%25D0%25BB%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25B9_%25D1%2581%25D0%25B0%25D0%25B9%25D1%2582%25D0%25B0">mail</a> and <a href="http://help.ubuntu.ru/wiki/jid_%25D0%25B4%25D0%25BB%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25B9_%25D1%2581%25D0%25B0%25D0%25B9%25D1%2582%25D0%25B0">Jabber</a> , is on the official Russian-language Wiki-resource documentation on Ubuntu.</i></strong></font>  <font color="#5E2750"><strong><i>There you can freely improve and supplement the laid out reference and training materials, as well as add your own.</i></strong></font>  <font color="#5E2750"><strong><i>If you have something to tell other Ubuntu users, then a huge request - write or edit the relevant article on <a href="http://help.ubuntu.ru/wiki">help.ubuntu.ru</a> .</i></strong></font>  <font color="#5E2750"><strong><i>Even with small improvements and additions you will help thousands of people, and some of them, in turn, will describe something useful and interesting for you.</i></strong></font> </div><p>Source: <a href="https://habr.com/ru/post/104741/">https://habr.com/ru/post/104741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../104734/index.html">Registration is now open for Google Developer Day 2010</a></li>
<li><a href="../104735/index.html">Competition Imagine Cup for IT-administrators - today, September 22!</a></li>
<li><a href="../104736/index.html">Google launches Russian voice search</a></li>
<li><a href="../104738/index.html">Broken deadlines of ministries</a></li>
<li><a href="../104739/index.html">As our company received a CMMI level 3. Experience of implementation and obtaining a certificate</a></li>
<li><a href="../104742/index.html">18 class projects over the weekend: September 17-19, HackDay # 7</a></li>
<li><a href="../104743/index.html">Presentation video and first voice search test</a></li>
<li><a href="../104744/index.html">Nokia CEO expressed the company's attitude to the Android platform</a></li>
<li><a href="../104745/index.html">Video review smartphone Samsung Wave S7320</a></li>
<li><a href="../104747/index.html">A book with algorithms in C ++ (archive site e-maxx.ru)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
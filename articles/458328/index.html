<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to duplicate goals from Yandex. Metrics to Google Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What to do if you set up a large number of goals in Yandex.Metrica through Google Tag Manager (GTM), and you need to urgently transfer these goals as ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to duplicate goals from Yandex. Metrics to Google Analytics</h1><div class="post__text post__text-html js-mediator-article">  What to do if you set up a large number of goals in Yandex.Metrica through Google Tag Manager (GTM), and you need to urgently transfer these goals as events in Google Analytics (GA)?  Of course, you can reconfigure each tag to send events to the GA and to the Metric in parallel, but if there are a lot of goals in the Metric, this will take time. <br><br>  The reverse situation is possible, when the targets were not configured by you, but by the developers in the site code itself.  And you, as a company analyst, need to set up sending the same events to GA, and you have only GTM at your fingertips.  In this case, even with a small number of goals, difficulties may arise.  Triggers of events in GTM will need to be customized as much as possible, so that goals in Metric and events in GA will follow the same logic, and there are no significant differences in different analytics systems. <br><br>  In both cases, more than one hour will need to spend, setting up everything manually.  But you can find a more practical option.  There is a function that allows you to intercept the sending of goals to the Metric and simultaneously send the push to the dataLayer.  Thus, you will not need to remember or understand how the sending of goals to Yandex.Metrica was set up - all you have to do is to use the necessary function.  The working version of the function will depend on which version of the Yandex.Metrica counter you have installed. <br><a name="habracut"></a><br><h3>  How to distinguish the new counter Metrics from the old </h3><br>  To determine the working version of the function, you need to understand which version of the counter is installed on your site. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If your meter was installed earlier than 10.12.2018 and was not updated later, then you have the old version: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="javascript"><span class="javascript"> (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">d, w, c</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ (w[c] = w[c] || []).push(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">try</span></span></span><span class="javascript"> { w.yaCounterXXXXXXXX = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> Ya.Metrika({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: XXXXXXXX, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">clickmap</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">trackLinks</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">accurateTrackBounce</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">webvisor</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> }); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">catch</span></span></span><span class="javascript"> (e) {} }); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> n = d.getElementsByTagName(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">], s = d.createElement(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">), f = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ n.parentNode.insertBefore(s, n); }; s.type = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"text/javascript"</span></span></span><span class="javascript">; s.async = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">; s.src = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"https://mc.yandex.ru/metrika/watch.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (w.opera == </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"[object Opera]"</span></span></span><span class="javascript">) { d.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">, f, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript"> { f(); })(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"yandex_metrika_callbacks"</span></span></span><span class="javascript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - the number of your counter. <br><blockquote>  w.yaCounterXXXXXXXX in the code makes it clear that this is the old version of the counter. <br></blockquote>  An example of sending a target in the old counter: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> yaCounterXXXXXXXX.reachGoal(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'TARGET_NAME'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - your counter number; <br>  <b>TARGET_NAME</b> is the target ID. <br><br>  The new version of the counter appeared 10/12/2018. <br><br>  It looks like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="javascript"><span class="javascript"> (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">m, e, t, r, i, k, a</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ m[i] = m[i] || </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ (m[i].a = m[i].a || []).push(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">) }; m[i].l = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript"> * </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Date</span></span></span><span class="javascript">(); k = e.createElement(t), a = e.getElementsByTagName(t)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">], k.async = </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">, k.src = r, a.parentNode.insertBefore(k, a) })(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"script"</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"https://mc.yandex.ru/metrika/tag.js"</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"ym"</span></span></span><span class="javascript">); ym(XXXXXXXX, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"init"</span></span></span><span class="javascript">, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">clickmap</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">trackLinks</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">accurateTrackBounce</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">webvisor</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript"> }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - the number of your counter. <br><blockquote>  ym (XXXXXXXX in the code makes it clear that this is the new version of the counter. </blockquote>  An example of sending a target in a new counter: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> ym(XXXXXX, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'reachGoal'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'TARGET_NAME'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - your counter number; <br>  <b>TARGET_NAME</b> is the target ID. <br><br><h3>  The function for the old version of Yandex. Metric </h3><br>  If you have an old version of the Yandex.Metrica counter installed (see above), then the function of intercepting sending targets will look like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">mainTagFunction</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">reachGoal</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ yaCounterXXXXXXXX.reachGoal = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> param = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]; reachGoal.apply(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">); </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//     dataLayer.push({ 'event': 'metrika', 'event_param': param }); }; } var yCounter = 0; function ySearch() { if (window.yaCounterXXXXXXXX) mainTagFunction(yaCounterXXXXXXXX.reachGoal); else { if (yCounter &lt; 100) { setTimeout(ySearch, 100); yCounter++; } else console.log(' .  '); } } ySearch(); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - your counter number; <br><br>  The code is triggered by each call to the yaCounterXXXXXXXX function with the reachGoal method.  The function produces a push in the dataLayer, when pushing, the event name is passed (metrika) and the parameter, the target identifier is passed in the parameter. <br><br><h3>  The function for the new version of Yandex. Metric </h3><br>  If you have installed a new version of the Yandex.Metrica counter, then the function of intercepting sending targets looks like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">mainTagFunction</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">reachGoal</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ ym = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> param = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">]; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> method = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]; reachGoal.apply(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">, </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">); </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//     if (method == 'reachGoal') dataLayer.push({ 'event': 'metrika', 'event_param': param }); }; } var yCounter = 0; function ySearch() { if (window.ym) mainTagFunction(ym); else { if (yCounter &lt; 100) { setTimeout(ySearch, 100); yCounter++; } else console.log(' .  '); } } ySearch(); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  It is triggered each time the ym () function is called and, if the <b>reachgoal</b> method was called, sends a push to the dataLayer.  The name of the event (metrika) and the parameter are passed to the dataLayer, and the target identifier is passed in the event_param parameter. <br><br><h3>  Setting up to send events to GA via GTM </h3><br>  In order for GTM to set up sending events with Metric goals in GA, you must: <br><br>  1. Create a trigger " <b>View page - DOM is ready</b> ", in addition, you can specify on which pages you need to duplicate goals from Metrics to GA <br><br><img src="https://habrastorage.org/webt/e3/kg/-j/e3kg-jcklhzz5wpnltwhxjxqzdg.png"><br><br>  2. Create the ‚Äú <b>Custom HTML</b> ‚Äù tag and insert the necessary function code into it.  On this tag the trigger created earlier is installed. <br><br><img src="https://habrastorage.org/webt/hw/e4/rq/hwe4rqvxcd6jhqhl7kdx4vx3ppw.png"><br><br>  3. Create a trigger " <b>Custom event</b> " with the name of the event metrika. <br><br><img src="https://habrastorage.org/webt/nt/-_/mm/nt-_mmswakvog6y4dhrwgjz13ag.png"><br><br>  4. Create a variable " <b>Data level variable</b> " with the name as shown in the example: <br><br><img src="https://habrastorage.org/webt/pi/y2/ft/piy2ftold0soogxxppce_tuwxgg.png"><br><br>  5. Create a <b>Google Analytics - Universal Analytics</b> tag with a trigger and a variable that were created earlier. <br><br><img src="https://habrastorage.org/webt/33/o7/fa/33o7fayg2zrj4eb8es6m69qbs1m.png"><br><br>  Where: <br><br>  <b>UA-XXXXXXXX-XX</b> - your Analytics counter number <br><br>  6. Publish a GTM container. <br><br><img src="https://habrastorage.org/webt/my/xa/kg/myxakg2xydyr0tleuancksvnoqm.png"><br><br>  With these settings, Google Analytics will receive events with an event category - Metrika, and the actions for these events will be goal identifiers from Yandex.Metrica. <br><br><img src="https://habrastorage.org/webt/pf/ne/ee/pfneeebnbknnxjuascxwchfvtbc.png"><br><br><h3>  Check settings </h3><br>  To check the correctness of the settings for sending events to GA, enter the following code in the console of your browser: <br><br>  a) For the new Metrics counter <br><br><pre> <code class="javascript hljs">ym(XXXXXX, <span class="hljs-string"><span class="hljs-string">'reachGoal'</span></span>, <span class="hljs-string"><span class="hljs-string">'TARGET_NAME'</span></span>)</code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - the number of your counter in Yandex.Metrica. <br><br>  b) For the old Metrics counter <br><br><pre> <code class="javascript hljs">yaCounterXXXXXXXX.reachGoal(<span class="hljs-string"><span class="hljs-string">'TARGET_NAME'</span></span>);</code> </pre> <br>  Where: <br><br>  <b>XXXXXXXX</b> - the number of your counter in Yandex.Metrica. <br><br>  The console in each browser opens in its own way, for example, for Chrome, the console opens with the key combination <b>Ctrl + Shift + j</b> : <br><br><img src="https://habrastorage.org/webt/d8/-u/b1/d8-ub114bjwr5ca7pccnzkpwl-y.png"><br><br>  After pressing Enter, your event should go not only to Metric, but also to GA. <br><br>  To make sure of this, one should open the ‚ÄúEvents‚Äù report in the ‚Äú <b>Real-time</b> ‚Äù section: <br><br><img src="https://habrastorage.org/webt/el/tf/7c/eltf7c1lb7geeb4okpr0oxn9r88.png"><br><br>  If everything was configured correctly, then you will see a line with the values ‚Äã‚ÄãMetrika and TARGET_NAME. <br><br>  Congratulations, you've set up goal transfer from Metrics to Google Analytics! <br><br>  <i>The material was prepared for the portal Cossa.</i> </div><p>Source: <a href="https://habr.com/ru/post/458328/">https://habr.com/ru/post/458328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458312/index.html">Android Academy in Moscow: Advanced Course</a></li>
<li><a href="../458316/index.html">Yandex Retro Games Battle 2019 - develop games for ZX Spectrum</a></li>
<li><a href="../45832/index.html">Search site</a></li>
<li><a href="../458324/index.html">Everything you need to get started with Vue.js</a></li>
<li><a href="../458326/index.html">Yandex opens datasets Toloki for researchers</a></li>
<li><a href="../45833/index.html">Page-view pattern in javascript</a></li>
<li><a href="../458332/index.html">Asynchronous programming - async performance: understand the costs of async and await</a></li>
<li><a href="../458334/index.html">Continuous replication from old to new PostgreSQL using Slony</a></li>
<li><a href="../45834/index.html">SimpleModal - simple modal windows</a></li>
<li><a href="../458342/index.html">Texturing, or what you need to know to become an artist on surfaces. Part 1. Pixel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
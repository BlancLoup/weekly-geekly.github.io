<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Implementing underscore styles in LESS via png generation in data-URI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided once to implement a flexible way to style the underlining of links ‚Äî to simply make translucent underscores, adjust the pattern in dashed / ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Implementing underscore styles in LESS via png generation in data-URI</h1><div class="post__text post__text-html js-mediator-article">  I decided once to implement a flexible way to style the underlining of links ‚Äî to simply make translucent underscores, adjust the pattern in dashed / dotted-border, make wavy underscores and generally have <a href="http://dev.w3.org/csswg/css-text-decor-3/">CSS3 text-decoration</a> settings that no browser has yet. <br><br><img src="https://habrastorage.org/storage2/cdd/5f7/884/cdd5f788419966496948cce1d6ab6093.png"><br><br>  The result is a PNG generator in the data-URI on LESS. <br><h3>  <strong><a href="http://dfcreative.github.io/projects/data-uri-painter/underlines.html">Demo</a></strong> . </h3>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h2>  Implementation options </h2><br><img src="https://habrastorage.org/storage2/fbf/8cd/e85/fbf8cde850a38a2bdedcb79f3e79ef70.png" align="right">  Translucent, dotted and dotted underscores are quite simply done through <code>border-bottom</code> . <br><br>  The interesting begins when you want to shift the line closer to the text. <br>  You can build a view <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"link"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>Some link text here<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  and adjust the <code>line-height</code> of the <code>span</code> (or <code>a</code> ) element by setting it to <code>display:inline-block</code> , but then there is a problem on the multi-line text: the <code>inline-block</code> becomes a real block in terms of the border display (illustration on the right). <br><br>  After thinking and experimenting, I came to the conclusion that the most ‚Äúclean‚Äù and convenient solution would be to put an underline pattern in the <code>background</code> with a height equal to <code>line-height</code> .  It remains only to understand where to get this pattern. <br><ul><li>  Generating a picture somewhere on the side and connecting it as a file is inflexible and inconvenient for development, each change will kill nerves. </li><li>  To use the PNG generator via canvas ( <a href="http://dfcreative.github.io/projects/data-uri-painter/font-based.html">such as, for example</a> ), but it is also inconvenient to develop: generate a data-URI on the side each time. </li><li>  Generating <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/repeating-linear-gradient">Repeating-gradient</a> , but this is a very unreliable way, since there is a risk that the pixel underline will not fall into the pixel line, and dotted underlines will not be implemented. </li></ul><br>  The most logical thing was to generate PNG dynamically and insert it into the data-URI.  From a <a href="http://stackoverflow.com/questions/16076713/less-data-uri-painter-mixin">question on stackoverflow,</a> it turned out that one person had already managed to generate a GIF image in one pixel ( <a href="http://micheljansen.org/blog/entry/1238">here</a> ), but I must say, very straightforward and inflexible: resizing this image would be a task equivalent to rewriting the entire code. <br><br>  The weekend was breaking, and I finally decided to stop frustrating with the dirty implementation of underscore links and deal with the generation of PNGs. <br><br><h2>  PNG.js </h2><br>  After several hours of studying the specifications of <a href="http://www.w3.org/TR/2003/REC-PNG-20031110/">PNG</a> , <a href="http://tools.ietf.org/html/rfc1950">ZLIB Data Format</a> and <a href="https://tools.ietf.org/html/rfc1951">DEFLATE Data Format</a> , as well as an <a href="https://code.google.com/p/todataurl-png-js/">example of png serialization</a> and a small reverse engineering ( <a href="http://dfcreative.github.io/projects/data-uri-painter/raw-png-based.html">here is an example of raw png generation</a> ), a <a href="">js-class</a> was created <a href="">for working with PNG</a> suitable for cutting into pieces in LESS . <br><br>  The PNG class can generate an uncompressed PNG with an indexed color (indexed-color) or a bitmap (truecolor with alpha).  Used as follows: <br><div class="spoiler">  <b class="spoiler_title">PNG.js usecase</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"png.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> png = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> PNG(); png.set({ width: w, height: h, chunks: { PLTE: plte, </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//palette string (sequence of colors, 3 bytes per color), eg "000000ffffff" ‚áí black, white tRNS: trns //transparency string (alpha-values according to the palette colors, 1 byte per value), eg "00ff" ‚áí 0, 1 }, data: data //string of color indexes (or bitmap), 1 byte per color index, eg "00010100" ‚áí black, white, white, black }) result = png.toDataURL() //‚áí data:image/png;base64,iV... </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br><h2>  Running JS in LESS </h2><br>  As it turned out, LESS is very flexible for running JS.  For example, functions can be run as follows: <br><pre> <code class="hljs bash"> @<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>: `<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(a){ <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> a }`; <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>: `(@{<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>})(3)`; //<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>: 3</code> </pre><br><br>  By moving png.js to the mix and writing the interface to it, the result is the following code: <br><div class="spoiler">  <b class="spoiler_title">painter.less</b> <div class="spoiler_text"><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span>Painting functions @text: black; @red: red; @green: green; .underline(@height: <span class="hljs-number"><span class="hljs-number">20</span></span>, @color: @text, @thickness: <span class="hljs-number"><span class="hljs-number">1</span></span>){ @patternGen: `<span class="javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">h, thick</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> space = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, line = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//make line for (var i = 0; i &lt; thick; i++){ line += "01" } //make space for (var i = 0; i &lt; h - thick; i++){ space += "00" } return space + line; }</span></span></span></span>`; @pattern: `<span class="javascript"><span class="javascript">(@{patternGen})(@{height}, @{thickness})</span></span>`; .png(@stream: @pattern, @w: <span class="hljs-number"><span class="hljs-number">1</span></span>, @h: unit(@height), @color: @color); } .underline{ .underline(); } .underline.thick{ .underline(@thickness: <span class="hljs-number"><span class="hljs-number">2</span></span>); } .underline.offset{ } .underline.transparent{ .underline(@color: fade(@text, <span class="hljs-number"><span class="hljs-number">30</span></span>%), @thickness: <span class="hljs-number"><span class="hljs-number">1</span></span>); } .waved(@height: <span class="hljs-number"><span class="hljs-number">20</span></span>, @color: @red, @thickness: <span class="hljs-number"><span class="hljs-number">2</span></span>, @width: <span class="hljs-number"><span class="hljs-number">4</span></span>){ @patternGen: `<span class="javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">h, w, thick</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> space = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, wave = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//make wave for (var y = 0; y &lt; thick; y++){ for (var x = 0; x &lt; w; x++){ if (x &lt; w/2){ if (y &lt; thick/2) { wave += "00" } else{ wave += "01" } } else { if (y &lt; thick/2) { wave += "01" } else{ wave += "00" } } } } //make space for (var i = 0; i &lt; (h - thick)*w; i++){ space += "00" } return space + wave; }</span></span></span></span>`; @pattern: `<span class="javascript"><span class="javascript">(@{patternGen})(@{height}, @{width}, @{thickness})</span></span>`; ptrn: @pattern; .png(@stream: @pattern, @w: unit(@width), @h: unit(@height), @color: @color); } .waved{ .waved(); } .waved.alt{ .waved(@color: @green, @thickness: <span class="hljs-number"><span class="hljs-number">2</span></span>, @width: <span class="hljs-number"><span class="hljs-number">6</span></span>); } .dotted(@height: <span class="hljs-number"><span class="hljs-number">20</span></span>, @color: @text, @width: <span class="hljs-number"><span class="hljs-number">3</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">1</span></span>){ @patternGen: `<span class="javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">h, thick, w</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> space = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, line = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//make line for (var i = 0; i &lt; thick; i++){ for(var x = 0; x &lt; thick; x++){ line += "01"; } for(var x = thick; x &lt; w; x++){ line += "00"; } } //make space for (var i = 0; i &lt; (h - thick)*w; i++){ space += "00" } return space + line; }</span></span></span></span>`; @pattern: `<span class="javascript"><span class="javascript">(@{patternGen})(@{height}, @{thickness}, @{width})</span></span>`; .png(@stream: @pattern, @w: unit(@width), @h: unit(@height), @color: @color); } .dotted{ .dotted; } .dotted.rare{ .dotted(@width: <span class="hljs-number"><span class="hljs-number">6</span></span>); } .dotted.thick{ .dotted(@width: <span class="hljs-number"><span class="hljs-number">6</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">2</span></span>); } .dashed(@height: <span class="hljs-number"><span class="hljs-number">20</span></span>, @color: @text, @width: <span class="hljs-number"><span class="hljs-number">8</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">1</span></span>, @length: <span class="hljs-number"><span class="hljs-number">4</span></span>){ @patternGen: `<span class="javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">h, thick, w, l</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> space = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, line = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//make line for (var i = 0; i &lt; thick; i++){ for(var x = 0; x &lt; l; x++){ line += "01"; } for(var x = l; x &lt; w; x++){ line += "00"; } } //make space for (var i = 0; i &lt; (h - thick)*w; i++){ space += "00" } return space + line; }</span></span></span></span>`; @pattern: `<span class="javascript"><span class="javascript">(@{patternGen})(@{height}, @{thickness}, @{width}, @{length})</span></span>`; .png(@stream: @pattern, @w: unit(@width), @h: unit(@height), @color: @color); } .dashed{ .dashed; } .dashed.rare{ .dashed(@width: <span class="hljs-number"><span class="hljs-number">6</span></span>); } .dashed.thick{ .dashed(@width: <span class="hljs-number"><span class="hljs-number">10</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">2</span></span>, @length: <span class="hljs-number"><span class="hljs-number">6</span></span>); } .dot-dashed(@height: <span class="hljs-number"><span class="hljs-number">20</span></span>, @color: @text, @width: <span class="hljs-number"><span class="hljs-number">10</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">1</span></span>){ @patternGen: `<span class="javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">h, thick, w</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> space = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">, line = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//make line for (var i = 0; i &lt; thick; i++){ for(var x = 0; x &lt; w; x++){ switch (true){ case (x &gt; w*.75): line += "00"; break; case (x &gt; w*.375): line += "01"; break; case (x &gt; w*.125): line += "00"; break; default: line += "01"; } } } //make space for (var i = 0; i &lt; (h - thick)*w; i++){ space += "00" } return space + line; }</span></span></span></span>`; @pattern: `<span class="javascript"><span class="javascript">(@{patternGen})(@{height}, @{thickness}, @{width})</span></span>`; .png(@stream: @pattern, @w: unit(@width), @h: unit(@height), @color: @color); } .dot-dashed{ .dot-dashed; } .dot-dashed.thick{ .dot-dashed(@width: <span class="hljs-number"><span class="hljs-number">10</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">2</span></span>); } .pattern(@height: <span class="hljs-number"><span class="hljs-number">20</span></span>, @color: @text, @width: <span class="hljs-number"><span class="hljs-number">8</span></span>, @thickness: <span class="hljs-number"><span class="hljs-number">1</span></span>, @length: <span class="hljs-number"><span class="hljs-number">4</span></span>, @pattern: <span class="hljs-string"><span class="hljs-string">". -"</span></span>){ } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>Mixin that generates PNG to background .png(@stream: <span class="hljs-string"><span class="hljs-string">"0001"</span></span>, @w: <span class="hljs-number"><span class="hljs-number">2</span></span>, @h: <span class="hljs-number"><span class="hljs-number">2</span></span>, @color: black){ @r: red(@color); @g: green(@color); @b: blue(@color); @hexColor: rgb(red(@color),green(@color),blue(@color)); @PLTE: `<span class="javascript"><span class="hljs-string"><span class="javascript"><span class="hljs-string">"ffffff"</span></span></span><span class="javascript"> + (</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"@{hexColor}"</span></span></span><span class="javascript">).substr(</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">)</span></span>`; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>Make bytes palette: first-white, rest-passed color; @a: alpha(@color); @tRNS: `<span class="javascript"><span class="hljs-string"><span class="javascript"><span class="hljs-string">"ff"</span></span></span><span class="javascript"> + (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> a = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">Math</span></span></span><span class="javascript">.round(@{a} * </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">255</span></span></span><span class="javascript">).toString(</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">16</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> (a.length == </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript"> ? </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"0"</span></span></span><span class="javascript"> + a : a) })()</span></span>`; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>png.js: https:<span class="hljs-regexp"><span class="hljs-regexp">//gi</span></span>thub.com<span class="hljs-regexp"><span class="hljs-regexp">/dfcreative/graphics/blob/master/src/PNG.js @initPNG: `(function(){ /</span></span>*...copy-pasted png.js: https:<span class="hljs-regexp"><span class="hljs-regexp">//gi</span></span>thub.com<span class="hljs-regexp"><span class="hljs-regexp">/dfcreative/graphics/blob/master/src/PNG.js */</span></span>)()`<span class="javascript"><span class="javascript">; @background: </span></span>`(function(){ var png = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PNG(); png.set({ width: @{w}, height: @{h}, chunks:{ PLTE: @{PLTE}, tRNS: @{tRNS} }, data: @{stream} }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"url("</span></span> + png.toDataURL() + <span class="hljs-string"><span class="hljs-string">")"</span></span>; })()`<span class="javascript"><span class="javascript">; background-image: ~</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"@{background}"</span></span></span><span class="javascript">; } .png{ .png(); }</span></span></code> </pre><br></div></div><br><br><h2>  How to use? </h2><br><h5>  1. Connect <code>painter.less</code> and <code>less.js</code> , as in the <a href="https://github.com/dfcreative/dfcreative.github.com/blob/master/projects/data-uri-painter/underlines.html">demo</a> </h5><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet/less"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"painter.less"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"less.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h5>  2. Use classes for span elements: </h5><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"underline"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"underline thick"</span></span></span><span class="hljs-tag">&gt;</span></span>c <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"underline offset"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"underline transparent"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"waved"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"waved alt"</span></span></span><span class="hljs-tag">&gt;</span></span>  2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dotted"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dotted rare"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dotted thick"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dashed"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dashed thick"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dot-dashed"</span></span></span><span class="hljs-tag">&gt;</span></span>- <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h5>  3. Available mixins: </h5><br><ul><li> <code>.underline(@height: 20, @color: @text, @thickness: 1)</code> </li> <li> <code>.waved(@height: 20, @color: @red, @thickness: 2, @width: 4)</code> </li> <li> <code>.dotted(@height: 20, @color: @text, @width: 3, @thickness: 1)</code> </li> <li> <code>.dashed(@height: 20, @color: @text, @width: 8, @thickness: 1, @length: 4)</code> </li> <li> <code>.dot-dashed(@height: 20, @color: @text, @width: 10, @thickness: 1)</code> </li> </ul><br><br>  You can also use the <code>.png(@stream: "0001", @w: 2, @h: 2, @color: black)</code> by sending directly a stream of bits of indexed colors. <br><br>  The result: a <a href="http://dfcreative.github.io/projects/data-uri-painter/underlines.html">demo</a> <a href="https://github.com/dfcreative/data-uri-generator">repository on github</a> . </div><p>Source: <a href="https://habr.com/ru/post/181746/">https://habr.com/ru/post/181746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181728/index.html">Distributed audio player on Odroid U2</a></li>
<li><a href="../181732/index.html">Google will have to disclose user data at the request of the FBI</a></li>
<li><a href="../181734/index.html">Five file managers for Android</a></li>
<li><a href="../181740/index.html">Super simple iOS JSON mapper</a></li>
<li><a href="../181744/index.html">What is a FlexPod?</a></li>
<li><a href="../181748/index.html">Petersburg game development evenings with Unity Technologies</a></li>
<li><a href="../181750/index.html">Died co-founder of the project Oculus Rift</a></li>
<li><a href="../181752/index.html">"Burroughs Adding Machine Co." at the time of its power</a></li>
<li><a href="../181754/index.html">Understanding Html code generated by unobtrusive validation in ASP.Net MVC</a></li>
<li><a href="../181756/index.html">Energy Management (Energy Management)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
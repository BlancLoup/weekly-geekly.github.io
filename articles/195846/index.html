<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience of construction of a kopter: WLtoys V949 + MultiWii 2.0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! I want to present to the attention of the community my small project of a mini quadrocopter based on MultiWii 2.0. 



 Lyrical digression o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience of construction of a kopter: WLtoys V949 + MultiWii 2.0</h1><div class="post__text post__text-html js-mediator-article">  Good day!  I want to present to the attention of the community my small project of a mini quadrocopter based on MultiWii 2.0. <br><br><img src="https://habrastorage.org/storage3/254/e8e/6e0/254e8e6e0c2c9f6d6f8716b1663e9b57.jpg" alt="image"><a name="habracut"></a><br><br><h1>  Lyrical digression or project history </h1><br>  Let's start with the prehistory, otherwise it will be very difficult to understand why the kopter turned out just the way it is. <br>  In 2011, at the 5th year of university, I wanted to assemble my little robot just for fun, but the wheeled platform somehow did not attract, and it was decided to collect something flying.  The easiest option then seemed to me a helicopter.  But just to build a flying robot was not interesting, I decided to add it to my graduation project ‚Äúthe development of a remote control system for a moving object‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Helicopter spec-list:</b> <table><tbody><tr><th>  detail </th><th>  title </th><th>  link </th><th>  qty </th></tr><tr><td>  platform </td><td>  Fire Fox EP200 </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D8938">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=8938</a> </td><td>  one </td></tr><tr><td>  engine (BLDC) </td><td>  V2623-4500kv Heli Brushless Outrunner </td><td>  N / A </td><td>  one </td></tr><tr><td>  regulator (ESC) </td><td>  HobbyKing Red Brick 25A ESC </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D18003">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=18003</a> </td><td>  one </td></tr><tr><td>  servo drive (servo) </td><td>  NoName 3.7g </td><td>  N / A </td><td>  four </td></tr><tr><td>  battery (LiPo, battery) </td><td>  Rhino 1050mah 2S 7.4V 20C </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D7307">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=7307</a> </td><td>  2 </td></tr><tr><td>  Charger (memory) </td><td>  IMAX RC B3 </td><td>  <a href="http://rctimer.com/">rctimer.com</a> </td><td>  one </td></tr><tr><td>  Transmitter (Tx) &amp; <br>  Receiver (Rx) </td><td>  MSP-EXP430G2 <br>  430BOOST-CC110L </td><td>  <a href="http://www.ti.com/tool/msp-exp430g2">www.ti.com/tool/msp-exp430g2</a> <br>  <a href="http://www.ti.com/tool/430boost-cc110l">www.ti.com/tool/430boost-cc110l</a> </td><td>  1 + 1 </td></tr><tr><td>  Gyro (Gyro) </td><td>  HobbyKing GA250 AVCS Gyro </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D15318">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=15318</a> </td><td>  one </td></tr></tbody></table><br>  I was (yes, in other matters, and remain) a novice in the construction of such devices and therefore faced a number of problems, in particular, IMAX B3 turned out to be burning, and I had to solder my memory in an emergency mode (about it some other time).  As a result, at the time of protection, oddly enough, I managed to assemble my own Rx / Tx system, but the helicopter itself turned into a long-term construction. <br><br>  The graduation project was presented in the form of a stand: <img src="https://habrastorage.org/storage3/0e2/842/327/0e2842327e0d7d890c1df9503f6bbc13.jpg" alt="image"><br><br>  Here are marked: current shunt (1), ESC (2), Rx (3), power supply toggle switch (4), BLDC + tachometer (5), battery (6) and tachometer display (7).  All this good was controlled by a nondescript type of program, which I planned to fly a helicopter.  After a series of experiments with my improvised radio control equipment, I decided to temporarily put it on the shelf and buy specialized for my RC projects. <br><br><img src="https://habrastorage.org/storage3/563/235/76a/56323576af90173884b93551de68cfcd.jpg" alt="image"><br><br><div class="spoiler">  <b class="spoiler_title">Hate!</b> <div class="spoiler_text">  Let's return to our charger.  It went to me for 2 months, and it was too late to contact PayPal.  However, due to my childish naivety, I wrote a request to RCtimer to return the money to me.  They solved this problem fundamentally by removing IMAX B3 from its range, and with it, obviously, my comments. </div></div><br><br>  Some time passed, the defense went off with a bang, everything went according to plan.  It is time and honor to know!  The following components were purchased / manufactured: <br><table><tbody><tr><th>  detail </th><th>  title </th><th>  link </th><th>  qty </th></tr><tr><td>  Rx / Tx </td><td>  Turnigy 6XS FHSS </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D24903">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=24903</a> </td><td>  one </td></tr><tr><td>  pinion </td><td>  Custom </td><td>  manufactured at the factory </td><td>  one </td></tr></tbody></table><br>  So, I collected, set up, the key to the start ... Then everything is in a daze: <br><ul><li>  broken tail screw mechanics; </li><li>  landing gears are broken; </li><li>  the engine no longer starts; </li><li>  much hurt pride. </li></ul><br>  After analyzing the situation, I found out that the radio equipment was to blame, which after a couple of minutes after switching on, heats up a lot and stops working normally. <div class="spoiler">  <b class="spoiler_title">Hate!</b> <div class="spoiler_text">  I swore with HobbyKing for 2 months, I contacted PayPal, who replied that the seller would return the money to me as soon as I send them the package back.  I sent it, it was another month, I received an answer from PayPal, saying that the package was gone and no one would return anything to me.  It takes another 3 months, the package is returned to me (in the end, I paid 750 rub for everything about everything), to my reasonable question ‚Äúwho the hell is it?‚Äù The lady from my beloved Russian Post replied that ‚Äúthe recipient refused to take the package‚Äù.  God decided to judge them, and I stomped on my way ... </div></div><br><br><h1>  Construction of the copter </h1><br>  One year has passed since recent events.  I stopped to consider myself the most unlucky ‚Äúpilot‚Äù in the world and bought the missing parts for my helicopter (including the new Turnigy RX7000S receiver).  But I was not particularly interested in helicopters.  At this time, I came across a very interesting material with <a href="http://hackaday.com/2013/03/19/diy-arduino-pro-mini-quadcopter/">Hackaday</a> .  Eyes lit up, and a new project was born! <br><br>  <b>Copter spec-list:</b> <br><table><tbody><tr><th>  detail </th><th>  title </th><th>  link </th><th>  qty </th></tr><tr><td>  platform </td><td>  WLtoys V949 BNF </td><td>  <a href="http://www.banggood.com/Wholesale-WLtoys-V949-Beetle-RC-Quadcopter-Mini-UFO-BNF-p-57271.html">www.banggood.com/Wholesale-WLtoys-V949-Beetle-RC-Quadcopter-Mini-UFO-BNF-p-57271.html</a> </td><td>  one </td></tr><tr><td>  Microcontroller (MCU) </td><td>  Arduino Pro Mini 8MHz 3.3v </td><td>  <a href="http://www.ebay.com/itm/Redesign-Pro-Mini-atmega328-3-3V-8M-Replace-ATmega128-Arduino-Compatible-Nano-/200914924969%3Fpt%3DLH_DefaultDomain_0%26hash%3Ditem2ec77675a9">www.ebay.com/itm/Redesign-Pro-Mini-atmega328-3-3V-8M-Replace-ATmega128-Arduino-Compatible-Nano-/200914924969?pt=LH_DefaultDomain_0&amp;hash=item2ec77675a9</a> </td><td>  one </td></tr><tr><td>  Transmitter (Tx) </td><td>  Turnigy 6XS </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D24903">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=24903</a> </td><td>  one </td></tr><tr><td>  Receiver (Rx) </td><td>  Turnigy RX7000S </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D28472">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=28472</a> </td><td>  five* </td></tr><tr><td>  battery (LiPo, battery) </td><td>  Turnigy Nano-Tech 600mAh 1S </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D20385">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=20385</a> </td><td>  3 </td></tr><tr><td>  Avionics (Gyro, Acc) </td><td>  MPU-3050 <br>  MPU-6050 </td><td>  Brutally torn from WLtoys V949 <br>  see  Hate!  - spoiler below </td><td>  one <br>  2 ** </td></tr><tr><td>  Charger (memory) </td><td>  Custom </td><td>  Homemade (two varieties) </td><td>  2 </td></tr><tr><td>  Additionally </td><td>  Turnigy Voltage Booster for Servo </td><td>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D11784">www.hobbyking.com/hobbyking/store/uh_viewItem.asp?idProduct=11784</a> </td><td>  one </td></tr></tbody></table>  <sup>* - how the first receiver broke - as described earlier, the second one broke from a short circuit (I am guilty), I bought 3 more, just in case, total - 5pcs.</sup> <sup><br></sup>  <sup>** - two modules were ordered in different stores, at different times, read about the first one further, the second one is still on the way.</sup> <br><br>  The advantages of this configuration, I think: <br><ul><li>  the ability to use the gyro from WLtoys V949; </li><li>  the ability to use LEDs, capacitors, various connectors, MOSFETs and schottky diodes from WLtoys V949; </li><li>  the presence of a battery (and even a charger) in the WLtoys V949 kit; </li><li>  the ability to power the gyroscope directly from the Arduino (Arduino at 3.3v was not chosen randomly). </li></ul><br>  As a software platform, I decided to use MultiWii 2.0.  In the end, the scheme of the apparatus has the following form: <br><br><img src="https://habrastorage.org/storage3/1b7/860/dff/1b7860dff611569f409c92d59f13838e.png" alt="image"><br><br>  The scheme is made in DipTrace 2.7. <br><br>  In my humble opinion, everything must be understood here.  This scheme almost completely copies the original ‚ÄúConnecting Diagrams‚Äù from the MultiWii website: <a href="http://www.multiwii.com/connecting-elements">www.multiwii.com/connecting-elements</a> . <br>  Interest, perhaps, will cause the layout of the board, here is its 3D model: <br><br><img src="https://habrastorage.org/storage3/412/3d4/34d/4123d434de14908d76be39a307fc7295.jpg" alt="image"><br><br>  Although the fee (and the project as a whole), probably, is nothing extraordinary, I decided to share it with everyone: <a href="https://github.com/geovas/DCwii">github.com/geovas/DCwii</a> .  The board is made using LUT technology: <br><br><img src="https://habrastorage.org/storage3/055/53e/0b4/05553e0b4c446c075bf75bc4cb7f9e71.gif" alt="image"><br><br>  But something bad was going to happen, right?  One of the elements, namely the GY-521, was already broken after assembly! <div class="spoiler">  <b class="spoiler_title">Hate!</b> <div class="spoiler_text">  I asked the seller to send me a new headscarf in return for a defective one (after leaving him bad feedback).  We agreed that I would correct the feedback, and at the same time I would order something else from him, and he would drop a new GY-521 into my package.  The parcel arrived, but what was my surprise when I did not find the cherished detail in it!  Well, another bad feedback (this time really angry).  He offered to return the money and "was surprised" that I never received the item.  I agreed, but he demanded that I <b>first</b> change my review.  I, of course, did not agree.  Surprisingly, this citizen of China, quickly disappeared from my horizon and never wrote to me again.  Well, and the Lord is his judge! <br></div></div><br>  And we continue, at the time of the gyroscope breakdown, the device looked like this: <br><br><img src="https://habrastorage.org/storage3/09e/d80/b3f/09ed80b3fc5e662a392f5b97a979c1bf.png" alt="image"><br><br>  The only idea that came to me at that time was to use the MPU-3050 from the WLtoys V949 control board.  No sooner said than done: <br><ul><li>  Scissors for metal was cut part of the board with a gyroscope. </li><li>  The old MPU-6050 has been disabled. </li><li>  The new "module" was glued on top of the old and soldered. </li></ul><br>  It looks disgusting, but it works the same!  In the photo below, the Frankenstein module is highlighted in red: <br><br><img src="https://habrastorage.org/storage3/c64/361/034/c64361034fe9ad24d17cfc64dcf0f4cd.jpg" alt="image"><br><br>  To date, I have ordered a new MPU-6050, however, it is still somewhere along the way. <br><br><h1>  Copter firmware </h1><br>  The last stronghold of resistance was MultiWii.  Of course, I immediately found <a href="">Fork for the 8MHz version of the Arduino Pro Mini</a> , but I was surprised when I realized that it would not work with my configuration.  In the end, I had to tinker.  Here is a link to your Fork MultiWii 2.0: <a href="https://github.com/geovas/multiwii-firmware/tree/master">github.com/geovas/multiwii-firmware/tree/master</a> . <br><br>  <b>The main features of my firmware are as follows:</b> <br><ul><li>  work with Arduino Pro Mini 8MHz 3.3v; </li><li>  support of work with direct current motors (DC motor); </li><li>  DPT can be completely stopped; </li><li>  the ability to work with the gyro MPU-3050. </li></ul><br>  After an uncountable amount of crashes (the benefit of the small copter turned out to be quite durable), I managed to set up the device.  I tuned through MultiWii WinGui, which, like MultiWii itself, had to be doped under a 8MHz controller, but this is a completely different story. <br><br>  I offer a small video of the first flight of the copter, how the good weather will get better (well, or snow will fall out) and try to launch it in nature. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/wVgiFEIkSXU%3Ffeature%3Doembed&amp;xid=25657,15700023,15700043,15700186,15700190,15700253&amp;usg=ALkJrhiGHGiDsatoKLy_5QBOEw3PmXAARw" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>PS</b> <br><ol><li>  Projects on GitHub will gradually develop, if you also build a rotor based on WLtoys V949 or a similar device, I will be glad to hear your suggestions and comments, as well as share your experience! </li><li>  Friends!  If you find any errors or inaccuracies in my article, let me know immediately. </li><li>  If you do not like the "evil bet", do not hesitate - say.  Their goal is to show the ‚Äúhonest process of building the apparatus‚Äù with all the difficulties with which I had to face and the important commandment of such projects - humility, because without it there would be no article.  If such a frame is not a place in Habr√©, then so be it!  Thank you for understanding. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/195846/">https://habr.com/ru/post/195846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../195836/index.html">Methods for solving color perception problems</a></li>
<li><a href="../195838/index.html">Methods of forming a measurement with attributes type 1 and 2</a></li>
<li><a href="../195840/index.html">Conceptual model of an individual approach to teachers and students in the organization and planning of the educational process at the university</a></li>
<li><a href="../195842/index.html">Preparation of schedules in MatLab</a></li>
<li><a href="../195844/index.html">What can we expect from Ruby 2.1?</a></li>
<li><a href="../195848/index.html">RailsClub'Moscow 2013. Photos</a></li>
<li><a href="../195850/index.html">Cancel Anti-Piracy Law - Crowd Funding Project from the Association of Internet Users</a></li>
<li><a href="../195852/index.html">New Olympiad in a new language: open registration</a></li>
<li><a href="../195854/index.html">Acceptance of bank card payments in applications - PayOnline Payment SDK</a></li>
<li><a href="../195856/index.html">Team Meat Co-Founder on Steam Controller</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
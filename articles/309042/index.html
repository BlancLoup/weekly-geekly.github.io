<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CSS Containment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: Paul Lewis has a very peculiar syllable, so the translation of the original article in some places may look strange. Comments are...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CSS Containment</h1><div class="post__text post__text-html js-mediator-article">  <i>From the translator: Paul Lewis has a very peculiar syllable, so the translation of the <a href="https://developers.google.com/web/updates/2016/06/css-containment">original article in</a> some places may look strange.</i>  <i>Comments are welcome.</i> <br><br>  <b>Containment</b> (deterrence) - a new CSS property that allows developers to limit the scope of styles, layouts and rendering for the browser. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe6/86a/709/fe686a709ad7bf6c54c9e2015379e50f.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The property supports multiple values, and its syntax is as follows: <br><br><pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">contain</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">none</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">strict</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">content</span></span> | <span class="hljs-selector-attr"><span class="hljs-selector-attr">[ size || layout || style || paint ]</span></span></code> </pre> <br>  The property is already in Chrome 52+ and Opera40 + browsers, as well as it is publicly supported by Firefox, so give it a chance and tell us what you did. <br><a name="habracut"></a><br><h3>  Contain property </h3><br>  When creating a web application or a complex website, the key task of achieving high performance is reducing the cost of applying styles (styles), reducing the number of layouts (layout) and drawing (paint).  Frequently, the DOM tree is completely in the scope of recalculation (scope), which can occur when a sly attempt to create an autonomous object (block) in a web application: in this case, changes in one part of the DOM tree can also affect other elements, the developer will not be able to indicate to the browser what should be inside the conversion area and what is outside it. <br><br>  Consider an example, let's say a part of your DOM tree looks like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"view"</span></span></span><span class="hljs-tag">&gt;</span></span> Home <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"view"</span></span></span><span class="hljs-tag">&gt;</span></span> About <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"view"</span></span></span><span class="hljs-tag">&gt;</span></span> Contact <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  And then you add a new element to one of the blocks, followed by a change in styles, layout and drawing: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"view"</span></span></span><span class="hljs-tag">&gt;</span></span> Home <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"view"</span></span></span><span class="hljs-tag">&gt;</span></span> About <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newly-added-element"</span></span></span><span class="hljs-tag">&gt;</span></span>Check me out!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"view"</span></span></span><span class="hljs-tag">&gt;</span></span> Contact <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  However, in this case, the DOM tree will be entirely in the area that needs to be changed, rebuilt and redrawn, regardless of whether its elements were involved.  And the more the DOM tree, the more calculations you have to perform, and as a result, your web application may stop responding to the user over time. <br><br>  In fact, everything is not so bad, there is good news: modern browsers are getting smarter and try to limit the scope of styles, layouts and rendering automatically, and you don‚Äôt have to do anything to speed up these processes.  But there is a better news: a new CSS property has appeared, which gives developers full control over the area - Containment. <br><br>  <b>CSS Containment</b> is a new property, taking its value from one of 4 keywords: <br><br><ul><li>  layout </li><li>  paint </li><li>  size </li><li>  style </li></ul><br>  Each of them will allow you to choose exactly how to restrict the browser during rendering.  Let's take a closer look at these values. <br><br><h3>  Layout (contain: layout) </h3><br><blockquote>  This value turns on item containment mode.  In this case, the layout of the document is guaranteed not to interact with the containing block: nothing outside the block can affect its internal arrangement and vice versa. </blockquote><br>  Containment of the layout may be considered the most advantageous along with <code>contain: paint.</code> <br><br>  As a rule, the layout affects the whole document, i.e.  it is proportional to the size of your DOM tree, so if you want to change the <code>left</code> property of one of the elements, the changes can touch every element of the DOM.  Therefore, potentially with the inclusion of restraint, we can increase productivity by allowing the browser not to do unnecessary work by recomposing a small number of elements instead of the entire document. <br><br><h3>  Paint (contain: paint) </h3><br>  This property enables the hold mode for the item.  It guarantees that the descendants of the element will not be displayed outside of it, so if the element is out of sight, then its contents will also be invisible. <br><br>  Drawing a single area is another extremely useful benefit to containment.  The rendering control actually cuts the element (i.e., the content is invisible beyond the boundaries), which entails several side effects: <br><br><ul><li>  For absolutely and fixed positioned elements, this block acts as a retaining block.  This means that any child blocks are positioned based on an element with the contain: paint property, and not any other elements or the entire document. <br><br></li><li>  The element has an overlay context.  The <code>z-index</code> property will affect the element, and all descendants of the element will be superimposed according to the new context. <br><br></li><li>  A new formatting context also appears.  For example, if you have a block element that has the <code>contain: paint</code> property set, then it will be considered as a new and independent layout environment.  This means that the layout from the outside will not affect the contents of the retaining element. </li></ul><br><h3>  Size (contain: size) </h3><br>  This value includes the mode of controlling the size of the element, which will ensure that this element overlay without taking into account its descendants. <br><br>  <code>contain: size</code> prohibits child element blocks from affecting its specified size.  Therefore, if you set the <code>containt</code> property with a <code>size</code> value to some element, without specifying its dimensions (directly or using flex-properties), then this element will be displayed with dimensions <code>0px</code> at <code>0px</code> . <br><br>  In fact, size management (containment of size) is a reliable way to ensure the independence of the size of an element from its descendants, but in itself it does not provide any particular advantages. <br><br><h3>  Style (contain: style) </h3><br>  This value turns on the style control mode (style restraint) of the element.  In this mode, those properties that can affect several elements and their descendants at once will not be used outside of the restraining element. <br><br>  It is difficult to predict in advance what effects of changing styles will go up the DOM-tree.  One example of this behavior is something like CSS counters, where a change in the counter of a child block may affect the values ‚Äã‚Äãof the counter with the same name, used elsewhere in the document.  With the specified <code>contain: style</code> styles of the specified element will not be distributed higher in the DOM tree. <br><br>  Speaking very clearly, what <code>contain: style</code> does not give you, unlike the Shadow DOM, is scoped styling (styles with a limited scope).  Containment in this case implies only a restriction of the tree elements that will be considered when the styles change, but not when they were declared. <br><br><h3>  Strict and content restraint </h3><br>  If necessary, you can combine property values, for example, with <code>contain: layout paint</code> , you can only achieve these types of behavior for an element. <br><br>  But the property considered in the article also supports 2 additional values: <br><br><ul><li>  <code>contain: strict</code> the same as <code>contain: layout style paint size</code> </li><li>  <code>contain: content</code> the same as <code>contain: layout style paint</code> </li></ul><br>  Using strict containment can be great if you know the size of an element beforehand (or you want to keep it in advance), but keep in mind that if you choose strict containment without specifying dimensions due to the intended size of the content, the element can be displayed with dimensions of <code>0px</code> per <code>0px</code> . <br><br>  Content containment, on the other hand, offers significant improvements to the recalculation area, but does not require you to know the specific dimensions of the elements in advance.  By the way, <code>contain: content</code> can be used by default. <br><br>  To use more stringent restrictions as an emergency hatch, only when the effects of using <code>contain: content</code> not enough in your particular case. <br><br>  Containment is a great way to tell the browser that you intend to isolate within your page.  Try using this property in Chrome 52+ and tell us what you think about it. </div><p>Source: <a href="https://habr.com/ru/post/309042/">https://habr.com/ru/post/309042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309030/index.html">‚ÄúThe Evolution of Music‚Äù: A couple of words about recommender algorithms for streaming services</a></li>
<li><a href="../309032/index.html">Interview with the designer: Mikhail Ozornin</a></li>
<li><a href="../309036/index.html">Model of the interaction of ships with water in video games: part 2</a></li>
<li><a href="../309038/index.html">Hurricane Electric: why we entrusted our equipment to this company</a></li>
<li><a href="../309040/index.html">World is not perfect</a></li>
<li><a href="../309044/index.html">How to get an internship</a></li>
<li><a href="../309046/index.html">Dash is a blockchain that cannot be stopped.</a></li>
<li><a href="../309048/index.html">We invite you to the second hakaton Neurohack</a></li>
<li><a href="../309052/index.html">Running R functions on multiple machines</a></li>
<li><a href="../309054/index.html">Security Week 35: intercepting keyboard via WiFi, attacking ATMs with an EMV chip, new IoT botnet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
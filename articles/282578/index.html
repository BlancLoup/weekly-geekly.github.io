<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobx - managing the status of your application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MobX is a simple, battle-tested solution for managing the state of your application. This tutorial will teach you the basic concepts of MobX. MobX is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobx - managing the status of your application</h1><div class="post__text post__text-html js-mediator-article"><p>  MobX is a simple, battle-tested solution for managing the state of your application.  This tutorial will teach you the basic concepts of MobX.  MobX is a standalone library, but most use it in conjunction with React and this tutorial will focus on this combination. </p><br><h4>  main idea </h4><br><p>  The state <em>(state orig.)</em> Is the heart of each application and there is no faster way to create a messy, unmanaged application, like the lack of state consistency.  Or a condition that is inconsistent with local variables around.  Therefore, many state management solutions are trying to limit the ways in which it can be changed, for example, to make the state immutable.  But this creates new problems, the data needs to be normalized, there is no guarantee of referential integrity and it becomes almost impossible to use such powerful concepts as prototypes <em>(prototypes orig.)</em> . </p><br><p>  MobX allows you to make state management simple again by returning to the root of the problem: it makes it impossible for the state to be inconsistent.  The strategy to achieve this is quite simple: make sure that everything that can be removed from the state will be removed.  Automatically. </p><a name="habracut"></a><br><p>  Conceptually, MobX treats your application as a spreadsheet <em>(referring to an office program for working with spreadsheets)</em> . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/c18/8c8/4fd/c188c84fddfc6139cf4aa603ef10e927.png" alt="Mobx cycle"><br><ul><li><p>  First, there is the state of the application.  Graphs of objects, arrays, primitives, links that form the model of your application. </p><br></li><li><p>  Secondly there are <strong>Derivations</strong> produced.  Usually, this is any value that can be automatically calculated from the state data of your application. </p><br></li><li><p>  Reactions reactions are very similar to <strong>Derivations</strong> derivatives.  The main difference is that they do not return a value, but start automatically to do some work.  This is usually associated with I / O.  They verify that the DOM has been updated or network requests have been completed on time. </p><br></li><li>  Finally, there are Actions <strong>Actions</strong> .  Actions are all those things that change state.  MobX will ensure that all changes in the state of the application caused by the actions are automatically processed by all derivatives and reactions.  Synchronously and without interference. </li></ul><br><h4>  Simple todo store ... </h4><br><p>  Enough theory, consider it in action, will be much clearer than carefully read the above.  For originality, let's start with a very simple Todo repository.  Below is a very simple TodoStore that manages the todo collection.  MobX is not yet involved. </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> shortid <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'shortid'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoStore</span></span></span><span class="hljs-class"> </span></span>{ todos = []; get completedTodosCount() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.todos.filter( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> todo.completed === <span class="hljs-literal"><span class="hljs-literal">true</span></span> ).length; } report() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.todos.length === <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;none&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Next todo: "</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.todos[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">].task}</span></span></span><span class="hljs-string">". `</span></span> + <span class="hljs-string"><span class="hljs-string">`Progress: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.completedTodosCount}</span></span></span><span class="hljs-string">/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.todos.length}</span></span></span><span class="hljs-string">`</span></span>; } addTodo(task) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.todos.push({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: shortid.generate(), <span class="hljs-attr"><span class="hljs-attr">task</span></span>: task, <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">assignee</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todoStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TodoStore();</code> </pre> <br><p>  We have just created a <code>todoStore</code> instance with a todos collection.  Now you need to fill the <code>todoStore</code> some objects.  To ensure that our changes have an effect, we call <code>todoStore.report</code> after each change: </p><br><pre> <code class="javascript hljs">todoStore.addTodo(<span class="hljs-string"><span class="hljs-string">"read MobX tutorial"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todoStore.report()); todoStore.addTodo(<span class="hljs-string"><span class="hljs-string">"try MobX"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todoStore.report()); todoStore.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].completed = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todoStore.report()); todoStore.todos[<span class="hljs-number"><span class="hljs-number">1</span></span>].task = <span class="hljs-string"><span class="hljs-string">"try MobX in own project"</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todoStore.report()); todoStore.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].task = <span class="hljs-string"><span class="hljs-string">"grok MobX tutorial"</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(todoStore.report());</code> </pre> <br><h4>  Becoming Reactive </h4><br><p>  Until now, our code was not unusual.  But what if we don‚Äôt want to call <code>report</code> explicitly, but declare that we need to call this method for every state change?  This will free us from the obligation to call this method in our code.  We must be sure that the last result of the call to <code>report</code> will be displayed.  But we do not want to worry about how this will be done. </p><br><p>  Fortunately, MobX can do it for us.  Automatically call code that depends on state.  So our <code>report</code> function will be called automatically.  To achieve this, the <code>TodoStore</code> needs to be tracked <em>(observable orig.)</em> So that MobX can monitor all changes.  Let's change our class a bit. </p><br><p>  Also, the <code>completedTodosCount</code> property will be calculated automatically from the <code>todos</code> property.  We can achieve this using <code>@observable</code> and <code>@computed</code> decorators. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> shortid <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'shortid'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObservableTodoStore</span></span></span><span class="hljs-class"> </span></span>{ @observable todos = []; @observable pendingRequests = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { mobx.autorun(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.report)); } @computed get completedTodosCount() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.todos.filter( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function"> =&gt;</span></span> todo.completed === <span class="hljs-literal"><span class="hljs-literal">true</span></span> ).length; } @computed get report() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.todos.length === <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;none&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`Next todo: "</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.todos[</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">0</span></span></span></span><span class="hljs-string"><span class="hljs-subst">].task}</span></span></span><span class="hljs-string">". `</span></span> + <span class="hljs-string"><span class="hljs-string">`Progress: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.completedTodosCount}</span></span></span><span class="hljs-string">/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.todos.length}</span></span></span><span class="hljs-string">`</span></span>; } addTodo(task) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.todos.push({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: shortid.generate(), <span class="hljs-attr"><span class="hljs-attr">task</span></span>: task, <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">assignee</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> observableTodoStore = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObservableTodoStore();</code> </pre> <br><p>  That's all!  We marked some properties as <code>@observable</code> so that MobX knew that they could change over time.  The calculations are labeled with <code>@computed</code> decorators to know that they can be calculated based on the state. </p><br><p>  The <code>pendingRequests</code> and <code>assignee</code> are not yet used, but we will see them in action just below.  For brevity, all examples use ES6, JSX and decorators.  But don't worry, all MobX decorators have <a href="https://mobxjs.github.io/mobx/best/syntax.html">ES5</a> counterparts. </p><br><p>  In the class constructor, we created a small function that displays the report and wrapped it in <code>autorun</code> .  It will create a reaction that runs once, and after that it will automatically restart whenever the monitored data within the function changes.  Since <code>report</code> uses the <code>todos</code> monitored property, it will output the result of the <code>report</code> as needed. </p><br><pre> <code class="javascript hljs">observableTodoStore.addTodo(<span class="hljs-string"><span class="hljs-string">"read MobX tutorial"</span></span>); observableTodoStore.addTodo(<span class="hljs-string"><span class="hljs-string">"try MobX"</span></span>); observableTodoStore.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].completed = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; observableTodoStore.todos[<span class="hljs-number"><span class="hljs-number">1</span></span>].task = <span class="hljs-string"><span class="hljs-string">"try MobX in own project"</span></span>; observableTodoStore.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].task = <span class="hljs-string"><span class="hljs-string">"grok MobX tutorial"</span></span>;</code> </pre> <br><p>  Cool, is not it?  <code>report</code> is called automatically, synchronously, without leakage of intermediate values.  If you carefully examine the output in the log, you will see that the fourth line in the code will not lead to a new entry in the log.  Because the <code>report</code> has not actually changed as a result of renaming the task, but the data inside has changed.  On the other hand, the change in the <code>name</code> attribute of the first <code>todo</code> updated the output of the <code>report</code> , since <code>name</code> actively used in the output of the <code>report</code> .  This demonstrates that not only the <code>todos</code> array is monitored, but also individual values ‚Äã‚Äãin it. </p><br><h4>  Making React Reactive </h4><br><p>  Well, so far we have been doing ‚Äúsilly‚Äù reports reactive.  Now it is time to make a reactive interface around the same storage.  Components from React <em>(despite its name)</em> , not reactive out of the box.  <code>@observer</code> decorator <code>@observer</code> decorator fixes this by wrapping the <code>render</code> method in <code>autorun</code> , automatically making your components synchronized with state.  This is conceptually no different from what we did with the <code>report</code> before. </p><br><p>  The following listing defines several React components.  From MobX, only <code>@observer</code> decorator is here.  This is enough to make sure that each component is redrawn when its relevant data changes.  You no longer need to call <code>setState</code> , and you do not need to figure out how to subscribe to parts of your application using selectors or high order components <em>(hello Redux)</em> that need to be configured.  Basically, all components become smart.  If they are not defined in a "stupid" declarative manner. </p><br><pre> <code class="javascript hljs">@observer <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoList</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.store; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div&gt; { store.report } &lt;ul&gt; { store.todos.map( (todo, idx</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;TodoView todo={ todo } key={ todo.id } /&gt; ) } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/ul&gt; { store.pendingRequests &gt; 0 ? &lt;marquee&gt;Loading...&lt;/m</span></span>arquee&gt; : <span class="hljs-literal"><span class="hljs-literal">null</span></span> } &lt;button onClick={ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onNewTodo }&gt;New Todo&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt; &lt;small&gt; (double-click a todo to edit)&lt;/</span></span>small&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">RenderCounter</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } onNewTodo = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.store.addTodo(prompt(<span class="hljs-string"><span class="hljs-string">'Enter a new todo:'</span></span>,<span class="hljs-string"><span class="hljs-string">'coffee plz'</span></span>)); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TodoView</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todo = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.todo; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;li onDoubleClick={ </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.onRename }&gt; &lt;input type=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'checkbox'</span></span></span></span><span class="hljs-function"><span class="hljs-params"> checked={ todo.completed } onChange={ </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params">.onToggleCompleted } </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; { todo.task } { todo.assignee ? &lt;small&gt;{ todo.assignee.name }&lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">small&gt; : </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span><span class="hljs-function"><span class="hljs-params"> } &lt;RenderCounter </span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/&gt; &lt;/</span></span></span></span><span class="hljs-function"><span class="hljs-params">li&gt; </span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onToggleCompleted</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todo = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.todo; todo.completed = !todo.completed; } onRename = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todo = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.todo; todo.task = prompt(<span class="hljs-string"><span class="hljs-string">'Task name'</span></span>, todo.task) || <span class="hljs-string"><span class="hljs-string">""</span></span>; } } ReactDOM.render( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">TodoList</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">store</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">observableTodoStore</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml">, document.getElementById('reactjs-app') );</span></span></code> </pre> <br><p>  The following listing shows that we just need to change our data.  MobX will automatically compute and update the relevant parts of your user interface from the state in your repository. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = observableTodoStore; store.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].completed = !store.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].completed; store.todos[<span class="hljs-number"><span class="hljs-number">1</span></span>].task = <span class="hljs-string"><span class="hljs-string">"Random todo "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random(); store.todos.push({ <span class="hljs-attr"><span class="hljs-attr">task</span></span>: <span class="hljs-string"><span class="hljs-string">"Find a fine cheese"</span></span>, <span class="hljs-attr"><span class="hljs-attr">completed</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }); <span class="hljs-comment"><span class="hljs-comment">// etc etc.. add your own statements here...</span></span></code> </pre> <br><h4>  Work with links </h4><br><p>  So far, we have created traceable objects (with and without a prototype), arrays and primitives.  But it may seem interesting to you how links are processed in MobX?  In previous listings, you might have noticed the <code>assignee</code> property of <code>todos</code> .  Let's give it some other value by creating another repository <em>(well, it's just an array)</em> containing people, and assign them to the tasks. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> peopleStore = mobx.observable([ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Michel"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Me"</span></span> } ]); observableTodoStore.todos[<span class="hljs-number"><span class="hljs-number">0</span></span>].assignee = peopleStore[<span class="hljs-number"><span class="hljs-number">0</span></span>]; observableTodoStore.todos[<span class="hljs-number"><span class="hljs-number">1</span></span>].assignee = peopleStore[<span class="hljs-number"><span class="hljs-number">1</span></span>]; peopleStore[<span class="hljs-number"><span class="hljs-number">0</span></span>].name = <span class="hljs-string"><span class="hljs-string">"Michel Weststrate"</span></span>;</code> </pre> <br><p>  Now we have two independent repositories.  One with people, another with tasks.  To assign the <code>assignee</code> property <code>assignee</code> person from the person storage, we just need to assign a value via a link.  These values ‚Äã‚Äãwill <code>TodoView</code> up <code>TodoView</code> automatically.  With MobX, there is no need to normalize data and write selectors so that our components are updated.  In fact, it doesn't matter where the data is stored.  While objects are ‚Äúobservable,‚Äù MobX will track them.  Real JavaScript links work too.  MobX tracks them automatically if they are relevant to derived values. </p><br><h4>  Asynchronous actions </h4><br><p>  Since everything in our small <code>todo</code> application is derived from the state, it does not matter where this state will be changed.  This allows you to simply create asynchronous actions. </p><br><p>  We start by updating the <code>pendingRequests</code> property <code>pendingRequests</code> that the interface displays the current download status.  After the download is complete, we will update the <code>todo</code> list and reduce the <code>pendingRequests</code> counter.  Just compare this piece of code with what we saw above to see how the <code>pendingRequests</code> property is <code>pendingRequests</code> . </p><br><pre> <code class="javascript hljs">observableTodoStore.pendingRequests++; setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ observableTodoStore.addTodo(<span class="hljs-string"><span class="hljs-string">'Random Todo '</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()); observableTodoStore.pendingRequests--; }, <span class="hljs-number"><span class="hljs-number">2000</span></span>);</code> </pre> <br><h4>  Devtools </h4><br><p>  The <code>mobx-react-devtools</code> provides developer tools that can be used in any MobX + React application. <br><img src="https://raw.githubusercontent.com/mobxjs/mobx-react-devtools/master/devtools.gif" alt="image"></p><br><h4>  Conclusion </h4><br><p>  That's all!  No boilerplate.  Simple and declarative components that form the UI is easy and simple.  Fully updated from state.  You are now ready to start using <code>mobx</code> and <code>mobx-react</code> in your application. <br>  A brief summary of the things you learned today: </p><br><ul><li>  Use the <code>@observable</code> decorator or <code>observable(  )</code> function to make your objects traceable to MobX </li><li>  The <code>@computed</code> decorator can be used to create functions that calculate their value from the state </li><li>  Use <code>autorun</code> to automatically launch your functions based on the monitored state.  This is applicable for logging or network requests. </li><li>  Use the <code>mobx-react</code> decorator <code>@observer</code> to give your React components reactive power.  They will automatically be updated most effectively.  Even in large and complex applications with large amounts of data. </li></ul><br><h4>  MobX is not a state container </h4><br><p>  People often use MobX as an alternative to Redux.  But please note that this is just a library for solving a specific problem and not an architecture or state container.  In this sense, the examples given above are far-fetched and it is recommended to use the correct architectural solutions, like encapsulating logic in methods, organizing them in repositories or controllers, etc.  Or as someone wrote on Hacker News: </p><br><blockquote>  "Using MobX means using controllers, dispatchers, actions, supervisors, or any other form of data flow control, this leads us to design your application yourself, rather than using what is used by default for something more than the Todo application " <br></blockquote><br><h4>  Still </h4><br><p>  Intrigued?  Here are some helpful links <em>.</em> </p><br><ul><li>  <a href="https://github.com/mobxjs/mobx">Mobx on github</a> </li><li>  <a href="https://mobxjs.github.io/mobx">Api documentation</a> </li><li>  (Blog) <a href="https://www.mendix.com/tech-blog/making-react-reactive-pursuit-high-performing-easily-maintainable-react-apps/">React reactive</a> life <a href="https://www.mendix.com/tech-blog/making-react-reactive-pursuit-high-performing-easily-maintainable-react-apps/">, easily maintainedable React apps</a> </li><li>  (Blog) <a href="https://medium.com/%40mweststrate/becoming-fully-reactive-an-in-depth-explanation-of-mobservable-55995262a254">Becoming fully responsive: an in-depth explanation of Mobservable</a> </li><li>  <a href="https://jsfiddle.net/mweststrate/wv3yopo0/">JSFiddle</a> with a simple todo application </li><li>  <a href="https://github.com/mobxjs/mobx-react-typescript-boilerplate">MobX, React, TypeScript boilerplate</a> </li><li>  <a href="https://github.com/mobxjs/mobx-react-boilerplate">MobX, React, Babel boilerplate</a> </li><li>  <a href="https://github.com/mobxjs/mobx-reactive2015-demo">MobX demo from Reactive2015 conference</a> </li><li>  <a href="https://github.com/mobxjs/mobx-react-todomvc">MobX + React TodoMVC</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/282578/">https://habr.com/ru/post/282578/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282568/index.html">Scenarios of application of free tools Veeam for development and testing in Microsoft Azure</a></li>
<li><a href="../282570/index.html">Intel Xeon processors equip FPGA Altera</a></li>
<li><a href="../282572/index.html">Cryptodisk synchronization between PC and Android</a></li>
<li><a href="../282574/index.html">Paul Graham: The Other Road Ahead, Part 1</a></li>
<li><a href="../282576/index.html">The book "Font and Design. Modern typography</a></li>
<li><a href="../282580/index.html">Installing CrashPlan in the Docker container on Synology NAS</a></li>
<li><a href="../282584/index.html">Use Webpack instead of Sprockets in Ruby on Rails</a></li>
<li><a href="../282586/index.html">Non-visual methods to protect the site from spam. Part 1. Statistics</a></li>
<li><a href="../282588/index.html">What are they scolding Golang for and how to fight it?</a></li>
<li><a href="../282590/index.html">Rendering drops with transparency and reflections on OpenGL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
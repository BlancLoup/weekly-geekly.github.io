<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bug fixes - phppgadmin</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of our clients set the task - do not fill the database dump via phpPgAdmin. Errors are displayed in the error log: ERROR: relation ‚Äúpublic.‚Äù ‚ÄúComp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bug fixes - phppgadmin</h1><div class="post__text post__text-html js-mediator-article">  One of our clients set the task - do not fill the database dump via phpPgAdmin.  Errors are displayed in the error log: ERROR: relation ‚Äúpublic.‚Äù ‚ÄúCompany‚Äù does not exist. <br><br>  The public scheme is available, there is no company table.  During the search, it turns out that the same dump is poured through the console without any problems.  If you upload to a web form in phpPgAdmin, it also works out everything.  But if you upload this dump to the same phpPgAdmin file, there are errors. <br><a name="habracut"></a><br>  Here is the abbreviated contents of the database dump: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">"public"</span></span>.<span class="hljs-string"><span class="hljs-string">"company"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">"public"</span></span>.<span class="hljs-string"><span class="hljs-string">"company"</span></span> ( <span class="hljs-string"><span class="hljs-string">"id"</span></span> int4 <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">COLLATE</span></span> <span class="hljs-string"><span class="hljs-string">"default"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">COLLATE</span></span> <span class="hljs-string"><span class="hljs-string">"default"</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> (OIDS=<span class="hljs-literal"><span class="hljs-literal">FALSE</span></span>) ; <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">"public"</span></span>.<span class="hljs-string"><span class="hljs-string">"company"</span></span>.<span class="hljs-string"><span class="hljs-string">"name"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">COMMENT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> <span class="hljs-keyword"><span class="hljs-keyword">COLUMN</span></span> <span class="hljs-string"><span class="hljs-string">"public"</span></span>.<span class="hljs-string"><span class="hljs-string">"company"</span></span>.<span class="hljs-string"><span class="hljs-string">"address"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IS</span></span> <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-comment"><span class="hljs-comment">-- ---------------------------- -- Records of company -- ---------------------------- INSERT INTO "public"."company" VALUES ('1', ' " "', ' ,  , . ');</span></span></code> </pre> <br>  The unusual semicolon after the command to create a table - on a separate line is striking the eye. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you move it from a separate line to a line with the end of the CREATE TABLE command, then the processing of the file with the database dump passes without problems. <br><br>  A search by phpPgAdmin code leads us to the file /classes/database/Postgres.php function executeScript <br><br>  This function is called to parse the loaded file with the SQL script.  It has a bug with the arrangement of curly braces in if.  As a result, pg_query was not executed if the line began with a semicolon.  Corrected the code, tested it - everything works. <br><br>  Now you need to report the found bug to the author of phpPgAdmin.  phppgadmin is on a githaba, so it's very easy to do this: <br><br>  Go / register at github.com. <br>  Project <a href="https://github.com/phppgadmin/phppgadmin">github.com/phppgadmin/phppgadmin</a> <br>  We look at the open pull request and see that we are not alone. <br>  There are other people who are faced with this bug, but, in my opinion, wrong approach to correcting it. <br>  Therefore, we offer our solution <br><br>  Click on the right Fork button and wait a bit while the github copies the project to you. <br>  We clone the project from now <br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/LuckySB/phppgadmin</code> </pre><br>  We fix the bug, commit, push (we enter our login details for the github) and admire our own phppgadmin fork with a fixed bug. <br><br>  After they have admired - click on the green button ‚ÄúCompare, review, create a pull request‚Äù.  Github creates a request for changes to the main project, and here comes the most difficult thing - to write a detailed commentary to your patch. <br><br>  I did something like this: <a href="https://github.com/phppgadmin/phppgadmin/pull/30">github.com/phppgadmin/phppgadmin/pull/30</a> </div><p>Source: <a href="https://habr.com/ru/post/257967/">https://habr.com/ru/post/257967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257953/index.html">About household misconceptions</a></li>
<li><a href="../257955/index.html">Personal data: dura lex, sed lex</a></li>
<li><a href="../257957/index.html">About alternative education in general and about C # in particular</a></li>
<li><a href="../257959/index.html">Conference YAPC :: Russia :: MayPerl 2015 in Moscow on May 16-17, do not miss</a></li>
<li><a href="../257965/index.html">Adobe has released a set of updates for its products.</a></li>
<li><a href="../257969/index.html">No need to host static sites on Heroku</a></li>
<li><a href="../257971/index.html">Books and educational resources on algorithmic trading</a></li>
<li><a href="../257975/index.html">Messaging in Microsoft Azure, or How to communicate in the clouds</a></li>
<li><a href="../257977/index.html">Wiren Board 4 - controller for automation</a></li>
<li><a href="../257979/index.html">How I started working with nRF24LE or another way to program this chip</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
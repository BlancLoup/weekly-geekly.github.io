<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android application architecture. Part IV - integration level</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article we will talk about the different mechanisms through which parts of Android applications interact. We agree to call all these mechanism...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android application architecture. Part IV - integration level</h1><div class="post__text post__text-html js-mediator-article">  In this article we will talk about the different mechanisms through which parts of Android applications interact.  We agree to call all these mechanisms "interaction level" (as far as I know, there is no special term in the Android documentation for this). <a name="habracut"></a><br><br>  As shown earlier, the Android framework implements several interaction patterns: <br><br><ul><li>  <a href="http://en.wikipedia.org/wiki/Message_passing">Messaging</a> with the <a href="http://developer.android.com/reference/android/content/Intent.html">Intent</a> class </li><li>  <a href="http://en.wikipedia.org/wiki/Publish_subscribe">Observer</a> using the Intent and <a href="http://developer.android.com/reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a> classes </li><li>  <a href="http://en.wikipedia.org/wiki/Late_binding">Later binding</a> with a subsequent method call is used to access content providers ( <a href="http://developer.android.com/reference/android/content/ContentProvider.html">ContentProviders</a> ) and local (intra-process) services ( <a href="http://developer.android.com/reference/android/app/Service.html">Services</a> ) </li><li>  <a href="http://en.wikipedia.org/wiki/Late_binding">Late binding</a> and interprocess communication ( <a href="http://en.wikipedia.org/wiki/Inter-process_communication">Inter-process Procedure Communication</a> , IPC) for <a href="http://developer.android.com/reference/android/app/Service.html">service</a> call (AIDL) </li></ul><br><h5>  Message exchange </h5><br>  Obviously, this is the first interaction mechanism that a developer encounters when starting programming under Android.  It is used to start the <a href="http://developer.android.com/reference/android/app/Activity.html">activation</a> or <a href="http://developer.android.com/reference/android/app/Service.html">service</a> .  Mechanism is implemented using three methods of the <a href="http://developer.android.com/reference/android/content/Context.html">Context</a> class (which was discussed in one of the previous <a href="http://wp.me/p1gzYo-3P">articles</a> ) and one method of the Activity class: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  startActivity () of class Context launches activity </li><li>  startActivityForResult () of class Activity launches activit </li><li>  startService () or bindService () of the Context class starts the service, if necessary, and communicates with it (there is some difference between these two methods) </li></ul><br>  In both cases, the Intent class serves as the message being transmitted. <br><br>  How does Android know which activation or service the message is addressed to?  There are two ways to do this: <br><br><ul><li>  Intent can explicitly indicate the name of the component.  Such intents are called explicit (‚ÄúexplicitIntents‚Äù).  The target component is defined by the setComponent () and setClass () methods.  This type of intent-oriented interaction mechanism does not implement the late binding pattern, unlike all others. </li><li>  The target component is determined by a very unusual decision-making mechanism based on <a href="http://developer.android.com/guide/topics/intents/intents-filters.html">intent filters</a> . </li></ul><br>  Keep in mind that in the case of sending a message (an instance of the Intent class), the interaction mechanism will deliver it to only one component, or not deliver it at all. <br><br><h5>  Publisher / Subscriber </h5><br>  The publisher / subscriber interaction mechanism uses the same Intent class as the message and the same filters as the target component detection mechanism, but it works a little differently.  The intents used in this case are called ‚Äúbroadcasting‚Äù.  These intents can only be delivered by BroadcastReceiver. <br><br>  Unlike the intents used for sending messages, one broadcast intent can be delivered to several components. <br><br>  In fact, Android implements two different publisher / subscriber mechanisms, each of which has two versions (regular and sticky, sticky): <br><br><ul><li>  Normal broadcasting is implemented by the sendBroadcast () and sendStickyBroadcast () methods of the Context class. </li><li>  Ordered broadcasting is implemented by the sendOrderedBroadcast () and sendStickyOrderedBroadcast () methods. </li></ul><br>  I haven't confused you yet, right? <br><br>  The normal broadcasting mechanism delivers the intent to all suitable broadcast receivers asynchronously, and they respond to them independently.  That is, some Broadcast receiver cannot influence how the other Broadcast receiver reacts to the intensity, or how the intensity is delivered to another Broadcast receiver.  This is a regular publisher / subscriber template. <br><br>  An ordered broadcasting mechanism delivers intents to all suitable Broadcast receivers consistently, that is, only one at a time.  Therefore, each Broadcast receiver can potentially: <br><br><ul><li>  Use the results of the previous Broadcast receiver, which worked on the same intent. </li><li>  If necessary, interrupt further processing. </li></ul><br>  Components that have initialized streamlined broadcasting are able to receive the result of processing the intensity from the entire chain of broadcasters. <br><br>  Orderly broadcasting is the implementation of <a href="http://en.wikipedia.org/wiki/Chain_of_responsibility_pattern">the chain of duty pattern</a> . <br><br>  Sticky broadcasting is a form of regular broadcasting.  The difference is that the intent is available until it is explicitly removed by the context class removeStickyBroadcast () method.  Remember that this type of broadcasting should be used with caution, as not removed ‚Äústicky‚Äù intents result in a memory leak. <br><br><h5>  Conclusions on the orientation-oriented interaction mechanism </h5><br>  All the interaction mechanisms described use the Intent class as the message.  Note that most of the methods presented are implemented by the Context class, which means that theoretically they can be used by all its subclasses. <br><br>  From this we can conclude that all Android interaction mechanisms use the Intent class.  But it is not so. <br><br><h5>  Late binding of ContentProviders </h5><br>  In most cases, the <a href="http://developer.android.com/reference/android/content/ContentProvider.html">ContentProvider</a> class <a href="http://developer.android.com/reference/android/content/ContentProvider.html">is</a> used as a wrapper around a SQLite database.  Although, theoretically, it can be used for other data storage / retrieval mechanisms.  You can read about using this class <a href="http://developer.android.com/guide/topics/providers/content-providers.html">here</a> . <br><br>  There are many ways to use content-sharing.  Some include getting objects that work as a proxy on a content porter (usually an instance or a subclass of <a href="http://developer.android.com/reference/android/content/ContentProviderClient.html">ContentProviderClient</a> that implements <a href="http://en.wikipedia.org/wiki/Proxy_pattern">the proxy pattern</a> ).  Others return an instance of the <a href="http://developer.android.com/reference/android/database/Cursor.html">Cursor</a> class, which allows you to iterate over the set of data returned by the provider.  In any case, a specific ContentProvider must be identified by a URI (for more details, see <a href="http://developer.android.com/guide/topics/providers/content-providers.html">here</a> ). <br><br>  In any case, this is a typical <a href="http://en.wikipedia.org/wiki/Late_binding">late binding</a> pattern. <br><br><h5>  Late binding and interprocess communication (IPC) </h5><br>  If you think that the interaction mechanisms are over, then you are mistaken. <br><br>  Apart from the ContentProvider class, there is the Service class, which serves as a model in the MVVM architecture.  In the <a href="http://habrahabr.ru/post/141201/">previous article,</a> we discussed the hypothetical reasons why Android has two different classes that perform the same role. <br><br><ul><li>  The local service is started in the same process where it is called.  Architecturally, it is similar to a content provider, except that the former has its own life cycle and there is no obligatory looking at the database.  A kind of late binding is used to access the local service. </li><li>  Remote service works in a different process, and not in the one from which it was called.  Communication with this service occurs through a type of IPC called <a href="http://developer.android.com/guide/developing/tools/aidl.html">AIDL</a> (Android Interface Definition Language). </li></ul><br>  It is a bit confusing that the same service can be used both as local and remote;  the difference is in where the components that invoke the service are located (in the same process or in another). <br><br>  <a href="http://developer.android.com/guide/topics/fundamentals/services.html">Here</a> and <a href="http://developer.android.com/reference/android/app/Service.html">here</a> you can read more about the use of services. <br><br>  Previous articles: <br><ul><li>  <a href="http://habrahabr.ru/post/140459/">Android application architecture.</a>  <a href="http://habrahabr.ru/post/140459/">Part I - the origins</a> </li><li>  <a href="http://habrahabr.ru/post/140655/">Android application architecture.</a>  <a href="http://habrahabr.ru/post/140655/">Part II - architectural styles and patterns</a> </li><li>  <a href="http://habrahabr.ru/post/141201/">Android application architecture.</a>  <a href="http://habrahabr.ru/post/141201/">Part III - the main parts of the application</a> </li></ul><br>  <b>From the translator.</b>  This is the last of <a href="http://vladnevzorov.com/">Vlad Nevzorov</a> ‚Äôs four articles on the architecture of Android applications.  I would like to express my gratitude to my beloved wife Gale for help and for not distracting me from the computer for several evenings, as well as for habrayusers <a href="http://habrahabr.ru/users/monnoroch/" class="user_link">Monnoroch</a> , <a href="http://habrahabr.ru/users/semp/" class="user_link">Semp</a> , <a href="http://habrahabr.ru/users/pomanob/" class="user_link">PomanoB</a> , <a href="http://habrahabr.ru/users/ssidelnikov/" class="user_link">ssidelnikov</a> , <a href="http://habrahabr.ru/users/manul/" class="user_link">So1</a> , <a href="http://habrahabr.ru/users/pravic/" class="user_link">Manul</a> , <a href="http://habrahabr.ru/users/pravic/" class="user_link">pravic</a> and <a href="http://habrahabr.ru/users/szkarlen/" class="user_link">szKarlen</a> for their useful comments and observations. </div><p>Source: <a href="https://habr.com/ru/post/141504/">https://habr.com/ru/post/141504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141498/index.html">A new version of the package manager NuGet 1.7 has been released.</a></li>
<li><a href="../141499/index.html">Electronics MK-85 and information security - the continuation of the story</a></li>
<li><a href="../141500/index.html">Let's Talk About Control</a></li>
<li><a href="../141501/index.html">Understand the decorators in Python'e, step by step. Step 2</a></li>
<li><a href="../141503/index.html">State machines. We write DKA</a></li>
<li><a href="../141505/index.html">The program for cutting bread</a></li>
<li><a href="../141506/index.html">Freedom is worse than non-freedom</a></li>
<li><a href="../141507/index.html">Implementing exceptions on plain C</a></li>
<li><a href="../141509/index.html">Workflow organization: synchronization channel</a></li>
<li><a href="../141510/index.html">Console screencasting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
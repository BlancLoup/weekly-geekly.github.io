<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What I love is Mithril (aka MithrilJS)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello dear readers. If you opened this post, it means that spider web development (that is, the web front-end development, I wanted to say) is touchin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What I love is Mithril (aka MithrilJS)</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello dear readers.  If you opened this post, it means that spider web development (that is, the web front-end development, I wanted to say) is touching you.  And before you start <del>  throw tomatoes </del>  thank the narrator, please read ... at least to the middle. </p><br><p>  For writing the article I was pushed by simple reasons: there is a war for the hearts and minds of developers, and many respected software giants consider it their duty to alleviate the developer's fate (which is good, by the way).  At the same time, do not hesitate to break his brain and nervous system (and this is not very).  So to say, in the name of the happiness of future generations.  Maybe I‚Äôm wrong, but I want to share with you information about a tool that I discovered long ago and haven‚Äôt been eating cacti like those mice: <strong>Mithril (MithrilJS)</strong> . </p><a name="habracut"></a><br><p>  In principle, Mithril is not a silver bullet or a life-giving cross, but it is worth trying and using. </p><br><p>  In a nutshell, this is a React-like framework without problems associated with managing a state, with routing and convenient methods of server requests out of the box.  The API is very compact and fits on one page.  The framework promotes the Piton principle "there must be one single and obvious way of acting."  It is compact (6kb gzip) and fast. </p><br><p>  ‚ÄúPff‚Äù, the React-developer will think, ‚Äúeverything is like a React, why then is it necessary?‚Äù </p><br><p>  I give the answer: when you program on React, you think not so much about the logic of the application, but about how to curb the furious control of the state of the application.  Throw a tomato at me if it is not.  Flux, Redux, MobX, state in components, higher order components, stateless components, component functions, etc.  etc.  Do not forget that we still need to choose a router (or make the simplest one) and a library for server interaction. </p><br><p>  "Hey, use redux-saga, redux-thunk, react-easy-redux-saga-inegrator-with-router-and-holy-shit! And don't forget to create-react-app from the FB itself so that the project settings are easier" . <br>  "Hey, you take Angular, it's a framework, not some kind of templating engine. But don't forget to compile the templates right away so that the bundle size is less than 2MB. wow, we even have one pepper in the team who understood how to make pipes on it. " </p><br><p>  Hmm ... </p><br><p>  And I just want to make a SPA.  Maybe even on ES5.  Maybe even without Webpack / Grunt / Gulp / Browserify / TypeScript / Flow.  To connect the script on the page and drove. <br>  "Yes you are a heretic! Burn him!"  - many will exclaim. </p><br><p>  Stop. </p><br><p>  To be honest, I do not write SPA on ES5, but I write small scripts.  And if this is not part of a large project, I would like to someday just be able to open the script and modify it, and not look with tears at the bundle and think where to look for the sources of the three-line script (which I didn‚Äôt even write). </p><br><h2 id="o-mithril-podrobnee">  About Mithril more </h2><br><p>  This is really React-like.  Here we can say retrained.  JS-first, everything is a javascript ... Yes, an option.  We will work out this version. </p><br><p>  Here is what the code on Mithril looks like.  I will write on ES5.  You can easily add imports, replace var with let and const, omit unnecessary functions, and use arrow functions if necessary. </p><br><p>  I just want this post to be read by everyone, not just you, respected ninjas. </p><br><pre><code class="hljs pgsql">// store.js var store = { todosOrdered: [<span class="hljs-number"><span class="hljs-number">1</span></span>], todoDetails: { // <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> example <span class="hljs-number"><span class="hljs-number">1</span></span>: { title: <span class="hljs-string"><span class="hljs-string">'  '</span></span>, isActive: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> } } }; // components/Todo.js //        //     //    //     <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> handleTodoCheck(id) { store.todoDetails[id].isActive = !store.todoDetails[id].isActive } <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> handleTodoTitleChange(id, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { //       console.log(<span class="hljs-string"><span class="hljs-string">'id='</span></span> + id + ";value=" + <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); store.todoDetails[id].title = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> } //    var Todo = { //   <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (vnode) { var id = vnode.attrs.id; //    var todo = store.todoDetails[id]; //          <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( //  - //    CSS-,     <span class="hljs-string"><span class="hljs-string">'div.todo'</span></span> m(<span class="hljs-string"><span class="hljs-string">'.todo'</span></span>, { //   //    <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>: todo.isActive ? "active" : "no-active" }, [ m(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, { <span class="hljs-string"><span class="hljs-string">'type'</span></span>: <span class="hljs-string"><span class="hljs-string">'checkbox'</span></span>, onchange: handleTodoCheck.bind(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, id) //      }), m(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: todo.title, //       onchange: m.withAttr(<span class="hljs-string"><span class="hljs-string">'value'</span></span>, handleTodoTitleChange.bind(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, id)) }) ]) ) } } // components/Todos.js var Todos = { <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> (vnode) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( m(<span class="hljs-string"><span class="hljs-string">'.todos'</span></span>, //    store.todosOrdered.map(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(todoId) { //      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m(Todo, {id: todoId}) }), ) ) } }</code> </pre> <br><p>  Here, as it were, everything about drawing and state management.  Add salt and pepper to taste. <br>  We have a hierarchy of components (one component - one task), they interact with the user and update our view. </p><br><p>  In this example, there is a parent-child relationship, but it could have been without it.  There are no pure functions and a time machine. </p><br><p>  But everything is very simple, there is logging and it is clear what is happening.  If desired, everything can be provided with additional debugging information. </p><br><p>  If I want to do type checking, then I use TypeScript and perform argument type checking using interfaces.  Like this: </p><br><pre> <code class="hljs bash">interface TodoAttrs { id: number } //   <span class="hljs-string"><span class="hljs-string">";"</span></span>,       // const    ,  const Todo = { view(vnode) { <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> attrs: TodoAttrs = vnode.attrs //   1 <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> id = attrs.id .... const Todos = { view(vnode) { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span>( //  ,   store.todosOrdered.map(todoId =&gt; m(Todo, &lt;TodoAttrs&gt;{id: todoId})) //   2 ) } }</code> </pre> <br><p>  I ask the snobs not to rush at me and not scold for a contrived example.  It is clear that he is far-fetched.  But in Mithril, everything is really easy - he is very close to authentic JS: </p><br><ol><li>  A component is an object with a view function that returns a VirtualDOM tree.  There are life cycle hooks, if necessary (oninit, etc.) </li><li>  When the arguments are changed, the component is redrawn. </li><li>  When you change the external objects referenced by the view () method of the component from other components, the component is redrawn. </li><li>  If you have done some magic outside the components and want to update them, call m.redraw ().  The necessary components will be redrawn. </li><li>  Profit. </li></ol><br><p>  In the end, what do we see here?  (I mean, including the listing above) A few correct, in my opinion things: </p><br><ol><li>  We are not mad about how to exchange information between components.  React + Redux?  React + MobX?  Or is it enough to Higher Order Componens?  Maybe better Vue + Vuex? .. Why ?!  (I already cry and cry).  Take an external object (or several) and use it as a state storage. </li><li>  Adherents html-first (hi Vue and Riot, and Angular) as an answer to a possible question on the syntax: <br>  and what does DSL eventually turn into to implement loops, conditions, variable bindings, event listeners, etc.?  What will it become in a couple of years and a couple of major updates of the framework?  In my opinion, in not very obvious syntax with "variables inside text".  And this is critical.  And the application (and templates) on Mithril is easy to debug. </li></ol><br><h2 id="otdelno-pro-jsx">  Separately about JSX </h2><br><p>  You can easily use JSX (as well as Babel, Webpack and everything else), the manual is in the official documentation. </p><br><p>  On JSX it will look like this: </p><br><pre> <code class="hljs xml">// components/Todos.jsx const Todos = { view(vnode) { return( <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todos"</span></span></span><span class="hljs-tag">&gt;</span></span> {store.todosOrdered.map(todoId =&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{todoId}</span></span></span><span class="hljs-tag"> /&gt;</span></span>)} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ) } }</code> </pre> <br><p>  In general, compared with hyperscript type <code>m('span.cool', "I'm cool")</code> , the taste and color of all markers are different.  I use hyperscript (such a title, yes), and the author of the framework recommends. </p><br><h2 id="i-esche">  And further </h2><br><p>  Generally, Mithril has 8k stars on the githaba at the time of publication - maybe not so much, but more than in some highly discussed programming languages.  The framework is mature: the current repository on the githaba from 2014, more than two hundred contributors and the latest update a few days ago. </p><br><p>  I urge you to read the documentation and use the convenient functional tool in work, especially since there is nothing special to read compared to the folio "Angular for Professionals" (here I can not help but stop and rejoice that the creators of this wonderful tool made it so that later you can earn on training. Take an example, as they say). </p><br><p>  I want to remind you that Mihtril has a routing </p><br><pre> <code class="hljs cs">m.route(<span class="hljs-string"><span class="hljs-string">'/man'</span></span>, ManPage)</code> </pre> <br><p>  And a convenient method for server requests </p><br><pre> <code class="hljs pgsql">m.request({ <span class="hljs-keyword"><span class="hljs-keyword">method</span></span>: "POST", url: "/todo", data: {id: id, title: title}, //    withCredentials: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, //   }) .<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(data) { // data -   <span class="hljs-type"><span class="hljs-type">JSON</span></span> console.log(data) })</code> </pre> <br><p>  How to connect?  Just 6kb gzip: </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://unpkg.com/mithril"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Everything described above will work. </p><br><p>  Well, or npm with all the whistles, of course. <br>  There is a very lively community in <a href="">gitter</a> </p><br><p>  If there is interest, I can (try) to translate the documentation.  Indeed, I believe that Mithril is worth it. </p><br><p>  I ask you not to scold me for using anglicisms, because, at the end of it, we have been working on computers for a long time, and not on computers. </p><br><p>  That's all I wanted to say.  Thank. </p><br><p>  If where I made a mistake / did not make out / did not understand / did not appreciate, I am ready for constructive criticism. </p><br><p>  Yes, I forgot, here are the links to the available benchmarks: <br><a href="https://lhorie.github.io/todomvc-perf-comparison/todomvc-benchmark/"></a>  <a href="https://lhorie.github.io/todomvc-perf-comparison/todomvc-benchmark/">https://lhorie.github.io/todomvc-perf-comparison/todomvc-benchmark/</a> <br><a href="https://developit.github.io/preact-perf/"></a>  <a href="https://developit.github.io/preact-perf/">https://developit.github.io/preact-perf/</a> </p><br><p>  <a href="https://github.com/MithrilJS">GitHub Repository</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/341708/">https://habr.com/ru/post/341708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341690/index.html">Why visual programming and D3NE may be useful to you</a></li>
<li><a href="../341692/index.html">Hello from the Mesozoic</a></li>
<li><a href="../341694/index.html">UB-2017. Part 1</a></li>
<li><a href="../341696/index.html">ICO in search of jurisdiction</a></li>
<li><a href="../341704/index.html">How to quickly set up email authentication in Django</a></li>
<li><a href="../341710/index.html">Inversion of dependencies in the world frontend. Yandex lecture</a></li>
<li><a href="../341712/index.html">The digest of interesting materials for the mobile developer # 228 (October 30 - November 5)</a></li>
<li><a href="../341714/index.html">Resource planning. Parts 2 and 3. What depends on the resource plan. What determines the resource plan</a></li>
<li><a href="../341716/index.html">People monitoring ESP8266 MQTT Micropython</a></li>
<li><a href="../341718/index.html">Prediction of connections in social networks: use transition points</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
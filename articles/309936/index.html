<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of Node.js packages for parsing command line options</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Node.js, like other development environments, provides basic tools for working with command line options. In our case, this is the process.argv array....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of Node.js packages for parsing command line options</h1><div class="post__text post__text-html js-mediator-article"><p> Node.js, like other development environments, provides basic tools for working with command line options.  In our case, this is the <code>process.argv</code> array.  But usually, except for the simplest cases of type A + B, it is very inconvenient to process command line options manually.  There are several popular packages for this.  The author wrote a small program that built a pivot table for these packages, chose three of the most popular ones and looked at them closer. </p><br><p>  <em>(The article‚Äôs material as of February 8, 2019 is still relevant, the summary table has been updated and supplemented.)</em> </p><a name="habracut"></a><br><h2 id="svodnaya-tablica">  Summary table </h2><br><p>  (Because of the narrow page format, one table had to be split into two: one with information from NPM, the other with GitHub.) </p><br><table><thead><tr><th>  # </th><th>  NPM Package </th><th>  NPM Stars </th><th>  Deprecated </th><th>  Last version </th><th>  Last Update </th><th>  Created </th><th>  Depencies </th></tr></thead><tbody><tr><td>  one </td><td>  <a href="https://www.npmjs.org/package/commander">commander</a> </td><td>  1008 </td><td></td><td>  2.19.0 </td><td>  2019-01-01 </td><td>  2011-08-15 </td><td>  0 </td></tr><tr><td>  2 </td><td>  <a href="https://www.npmjs.org/package/yargs">yargs</a> </td><td>  508 </td><td></td><td>  12.0.5 </td><td>  2019-02-03 </td><td>  2013-11-23 </td><td>  12 </td></tr><tr><td>  3 </td><td>  <a href="https://www.npmjs.org/package/minimist">minimist</a> </td><td>  430 </td><td></td><td>  1.2.0 </td><td>  2019-01-04 </td><td>  2013-06-25 </td><td>  0 </td></tr><tr><td>  four </td><td>  <a href="https://www.npmjs.org/package/optimist">optimist</a> </td><td>  143 </td><td>  V </td><td>  0.6.1 </td><td>  2018-03-21 </td><td>  2010-12-21 </td><td>  2 </td></tr><tr><td>  five </td><td>  <a href="https://www.npmjs.org/package/meow">meow</a> </td><td>  78 </td><td></td><td>  5.0.0 </td><td>  2019-02-04 </td><td>  2013-01-24 </td><td>  9 </td></tr><tr><td>  6 </td><td>  <a href="https://www.npmjs.org/package/cli">cli</a> </td><td>  69 </td><td></td><td>  1.0.1 </td><td>  2018-03-15 </td><td>  2011-01-01 </td><td>  2 </td></tr><tr><td>  7 </td><td>  <a href="https://www.npmjs.org/package/nopt">nopt</a> </td><td>  47 </td><td></td><td>  4.0.1 </td><td>  2017-10-18 </td><td>  2011-03-30 </td><td>  2 </td></tr><tr><td>  eight </td><td>  <a href="https://www.npmjs.org/package/command-line-args">command-line-args</a> </td><td>  49 </td><td></td><td>  5.0.2 </td><td>  2018-06-25 </td><td>  2014-05-27 </td><td>  five </td></tr><tr><td>  9 </td><td>  <a href="https://www.npmjs.org/package/nomnom">nomnom</a> </td><td>  32 </td><td>  V </td><td>  1.8.1 </td><td>  2018-03-17 </td><td>  2011-04-08 </td><td>  2 </td></tr><tr><td>  ten </td><td>  <a href="https://www.npmjs.org/package/argparse">argparse</a> </td><td>  21 </td><td></td><td>  1.0.10 </td><td>  2018-02-27 </td><td>  2012-05-17 </td><td>  one </td></tr><tr><td>  eleven </td><td>  <a href="https://www.npmjs.org/package/stdio">stdio</a> </td><td>  9 </td><td></td><td>  0.2.7 </td><td>  2017-12-01 </td><td>  2013-03-16 </td><td>  0 </td></tr><tr><td>  12 </td><td>  <a href="https://www.npmjs.org/package/dashdash">dashdash</a> </td><td>  9 </td><td></td><td>  1.14.1 </td><td>  2017-12-28 </td><td>  2013-02-28 </td><td>  one </td></tr><tr><td>  13 </td><td>  <a href="https://www.npmjs.org/package/has-flag">has-flag</a> </td><td>  five </td><td></td><td>  3.0.0 </td><td>  2018-03-20 </td><td>  2015-07-08 </td><td>  0 </td></tr><tr><td>  14 </td><td>  <a href="https://www.npmjs.org/package/clp">clp</a> </td><td>  2 </td><td></td><td>  4.0.11 </td><td>  2019-01-03 </td><td>  2015-04-17 </td><td>  3 </td></tr><tr><td>  15 </td><td>  <a href="https://www.npmjs.org/package/clap">clap</a> </td><td>  one </td><td></td><td>  1.2.3 </td><td>  2017-09-20 </td><td>  2014-02-10 </td><td>  one </td></tr><tr><td>  sixteen </td><td>  <a href="https://www.npmjs.org/package/argentum">argentum</a> </td><td>  0 </td><td></td><td>  0.6.0 </td><td>  2016-07-29 </td><td>  2015-11-26 </td><td>  0 </td></tr><tr><td>  17 </td><td>  <a href="https://www.npmjs.org/package/getoptie">getoptie</a> </td><td>  0 </td><td></td><td>  1.0.2 </td><td>  2015-03-09 </td><td>  2015-03-09 </td><td>  0 </td></tr></tbody></table><br><table><thead><tr><th>  # </th><th>  NPM Package </th><th>  Github repository </th><th>  Github stars </th><th>  Last commit </th></tr></thead><tbody><tr><td>  one </td><td>  <a href="https://www.npmjs.org/package/commander">commander</a> </td><td>  <a href="">tj / commander.js</a> </td><td>  14111 </td><td>  2018-12-28 </td></tr><tr><td>  2 </td><td>  <a href="https://www.npmjs.org/package/yargs">yargs</a> </td><td>  <a href="https://github.com/yargs/yargs">yargs / yargs</a> </td><td>  5760 </td><td>  2019-02-08 </td></tr><tr><td>  3 </td><td>  <a href="https://www.npmjs.org/package/minimist">minimist</a> </td><td>  <a href="https://github.com/substack/minimist">substack / minimist</a> </td><td>  3443 </td><td>  2015-08-29 </td></tr><tr><td>  four </td><td>  <a href="https://www.npmjs.org/package/optimist">optimist</a> </td><td>  <a href="https://github.com/substack/node-optimist">substack / node-optimist</a> </td><td>  2559 </td><td>  2014-02-05 </td></tr><tr><td>  five </td><td>  <a href="https://www.npmjs.org/package/meow">meow</a> </td><td>  <a href="https://github.com/sindresorhus/meow">sindresorhus / meow</a> </td><td>  1651 </td><td>  2018-11-05 </td></tr><tr><td>  6 </td><td>  <a href="https://www.npmjs.org/package/cli">cli</a> </td><td>  <a href="https://github.com/node-js-libs/cli">node-js-libs / cli</a> </td><td>  765 </td><td>  2016-10-23 </td></tr><tr><td>  7 </td><td>  <a href="https://www.npmjs.org/package/nopt">nopt</a> </td><td>  <a href="https://github.com/npm/nopt">npm / nopt</a> </td><td>  468 </td><td>  2019-01-26 </td></tr><tr><td>  eight </td><td>  <a href="https://www.npmjs.org/package/command-line-args">command-line-args</a> </td><td>  <a href="https://github.com/75lb/command-line-args">75lb / command-line-args</a> </td><td>  359 </td><td>  2019-01-21 </td></tr><tr><td>  9 </td><td>  <a href="https://www.npmjs.org/package/nomnom">nomnom</a> </td><td>  <a href="https://github.com/harthur/nomnom">harthur / nomnom</a> </td><td>  468 </td><td>  2015-09-09 </td></tr><tr><td>  ten </td><td>  <a href="https://www.npmjs.org/package/argparse">argparse</a> </td><td>  <a href="https://github.com/nodeca/argparse">nodeca / argparse</a> </td><td>  291 </td><td>  2018-12-01 </td></tr><tr><td>  eleven </td><td>  <a href="https://www.npmjs.org/package/stdio">stdio</a> </td><td>  <a href="https://github.com/sgmonda/stdio">sgmonda / stdio</a> </td><td>  139 </td><td>  2017-01-24 </td></tr><tr><td>  12 </td><td>  <a href="https://www.npmjs.org/package/dashdash">dashdash</a> </td><td>  <a href="https://github.com/trentm/node-dashdash">trentm / node-dashdash</a> </td><td>  123 </td><td>  2017-04-18 </td></tr><tr><td>  13 </td><td>  <a href="https://www.npmjs.org/package/has-flag">has-flag</a> </td><td>  <a href="https://github.com/sindresorhus/has-flag">sindresorhus / has-flag</a> </td><td>  42 </td><td>  2018-12-25 </td></tr><tr><td>  14 </td><td>  <a href="https://www.npmjs.org/package/clp">clp</a> </td><td>  <a href="https://github.com/IonicaBizau/clp">Ionicabizau / clp</a> </td><td>  12 </td><td>  2019-01-03 </td></tr><tr><td>  15 </td><td>  <a href="https://www.npmjs.org/package/clap">clap</a> </td><td>  <a href="https://github.com/lahmatiy/clap">lahmatiy / clap</a> </td><td>  15 </td><td>  2017-09-20 </td></tr><tr><td>  sixteen </td><td>  <a href="https://www.npmjs.org/package/argentum">argentum</a> </td><td>  <a href="https://github.com/rumkin/argentum">rumkin / argentum</a> </td><td>  0 </td><td>  2016-07-29 </td></tr><tr><td>  17 </td><td>  <a href="https://www.npmjs.org/package/getoptie">getoptie</a> </td><td>  <a href="https://github.com/avz/node-getoptie">avz / node-getoptie</a> </td><td>  0 </td><td>  2015-03-09 </td></tr></tbody></table><br><p>  This table was generated by a small JavaScript program.  The source code for this review, including this program, is located in the repository on <a href="https://github.com/easimonenko/node-cli-options-parsing-review">GitHub</a> .  Since after some time this data is likely to become outdated, you can download these sources to yourself, regenerate this table, and also fill it with new data simply by adding the appropriate lines to the file with the list of packages. </p><br><p>  Packages in the table are ordered by rating, which is calculated based on the number of stars on NPM and GitHub according to the formula: </p><br><pre> <code class="plaintext hljs">npmStars * k + githubStars</code> </pre> <br><p>  The coefficient <code>k</code> needed, since the stars on NPM look "heavier" than the stars on GitHub.  The coefficient itself is considered very simple: we add the number of stars to NPM and GitHub, then we divide the number of stars by GitHub by the number of stars by NPM, round the resulting number, this is our coefficient <code>k</code> : </p><br><pre> <code class="plaintext hljs">k = floor( Sgithub / Snpm)</code> </pre> <br><p>  From the resulting table it is clearly seen that the main favorite is the <em>commander</em> package.  Next come the <em>minimist</em> and <em>yargs</em> packages with a close rating.  The <em>optimist</em> package also has a good rating, but it‚Äôs declared obsolete by the author, and in his place he recommends the <em>minimist</em> package written by <em>him</em> , and also advises to see <em>yargs</em> and <em>nomnom</em> .  The <em>yargs</em> package is also positioned as a successor to <em>optimist</em> .  Authors of an obsolete <em>nomnom</em> recommend <em>commander</em> . </p><br><p>  Thus, the first <em>thing</em> to consider is the <em>commander</em> , <em>minimist,</em> and <em>yargs packages</em> .  It probably makes sense to also pay attention to the <em>meow</em> and <em>nopt packages</em> , but not this time. </p><br><h2 id="commander">  commander </h2><br><p>  Learning to use the <code>commander</code> package is easy.  The author provided, though not always clear, but still good documentation.  To figure out how to use this package, you had to experiment.  Below I will describe the highlights of this package. </p><br><p>  So, after we downloaded the package: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> commander = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'commander'</span></span>)</code> </pre> <br><p>  We can, by calling its functions sequentially or separately, configure it to process command line options.  In this package provides: </p><br><ul><li>  short options, for example, <code>-s</code> ; </li><li>  long options, for example, <code>--source</code> ; </li><li>  alternative option names, for example, <code>--source</code> and <code>-s</code> ; </li><li>  Extra options; </li><li>  default values ‚Äã‚Äãfor additional parameters; </li><li>  handlers for additional parameters; </li><li>  subcommands, for example, <code>install package</code> ; </li><li>  automatic generation of hints; </li><li>  setting of the sub-story. </li></ul><br><p>  Short options are declared like this: </p><br><pre> <code class="javascript hljs">commander .option(<span class="hljs-string"><span class="hljs-string">'-a'</span></span>, <span class="hljs-string"><span class="hljs-string">'option a'</span></span>)</code> </pre> <br><p>  The first argument of the <code>option</code> function sets the format of the option, and the second gives it a verbal description.  Access to the <code>-a</code> option in the program code is done through the corresponding <code>commander</code> property: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (commander.a) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(commander.a) }</code> </pre> <br><p>  An example for a long option: </p><br><pre> <code class="javascript hljs">commander .option(<span class="hljs-string"><span class="hljs-string">'--camel-case-option'</span></span>, <span class="hljs-string"><span class="hljs-string">'camel case option'</span></span>)</code> </pre> <br><p>  In this case, the code will access the option by the name <code>camelCaseOption</code> . </p><br><p>  It is possible to set options for parameters both mandatory and optional: </p><br><pre> <code class="javascript hljs">commander .option(<span class="hljs-string"><span class="hljs-string">'-s, --source &lt;path&gt;'</span></span>, <span class="hljs-string"><span class="hljs-string">'source file'</span></span>) .option(<span class="hljs-string"><span class="hljs-string">'-l, --list [items]'</span></span>, <span class="hljs-string"><span class="hljs-string">'value list'</span></span>, toArray, [])</code> </pre> <br><p>  In the second case, the parameter of the list option is optional, it is assigned a handler function and a default value. </p><br><p>  Options parameters can also be processed using regular expressions, for example: </p><br><pre> <code class="javascript hljs">commander .option(<span class="hljs-string"><span class="hljs-string">'--size [size]'</span></span>, <span class="hljs-string"><span class="hljs-string">'size'</span></span>, /^(large|medium|small)$/i)</code> </pre> <br><p>  Subcommand implies that a separate module is written for it.  In this case, if the main program is called <code>program</code> , and the subcommand is <code>command</code> , then the module of the subcommand should be called <code>program-command</code> .  Options passed after the subcommand is passed to the command module. </p><br><pre> <code class="javascript hljs">commander .command(<span class="hljs-string"><span class="hljs-string">'search &lt;first&gt; [other...]'</span></span>, <span class="hljs-string"><span class="hljs-string">'search with query'</span></span>) .alias(<span class="hljs-string"><span class="hljs-string">'s'</span></span>)</code> </pre> <br><p>  For automatic prompts, you can specify the version of the program: </p><br><pre> <code class="javascript hljs">commander.version(<span class="hljs-string"><span class="hljs-string">'0.2.0'</span></span>)</code> </pre> <br><p>  The hint may be accompanied by additional actions, for example, supplemented by non-standard text.  To do this, you need to handle the event <code>--help</code> . </p><br><pre> <code class="javascript hljs">commander.on(<span class="hljs-string"><span class="hljs-string">'--help'</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">' Examples:'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">' node commander.js'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">' node commander.js --help'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">' node commander.js -h'</span></span>) ... console.log(<span class="hljs-string"><span class="hljs-string">' node commander.js --size large'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">' node commander.js search ab c'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">' node commander.js -abc'</span></span>) })</code> </pre> <br><p>  The configuration is completed by calling the <code>parse</code> function with the <code>process.argv</code> parameter: </p><br><pre> <code class="javascript hljs">commander.parse(process.argv)</code> </pre> <br><h2 id="minimist">  minimist </h2><br><p>  The author of the <em>minimist</em> package provided very minimal documentation.  But still try to figure it out. </p><br><p>  After we have loaded the package, we will connect and use it: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> minimist = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'minimist'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> args = minimist(process.argv.slice(<span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(args)</code> </pre> <br><p>  This uncomplicated code will allow us to start working with this package.  Let's experiment: </p><br><pre> <code class="plaintext hljs">node minimist.js</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [] }</code> </pre> <br><p>  What do we see here?  A set of parsed options is organized into an object.  The property named <code>_</code> contains a list of parameters not related to options.  For example: </p><br><pre> <code class="plaintext hljs">node minimist.js abc</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [ <span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'c'</span></span> ] }</code> </pre> <br><p>  Let's continue the experiment: </p><br><pre> <code class="plaintext hljs">node minimist.js --help</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  As you can see, minimist does not provide automatic display of hints, but simply determines the presence of this option. </p><br><p>  Let's experiment more: </p><br><pre> <code class="plaintext hljs">node minimist.js -abc</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  That's right.  Let's see more: </p><br><pre> <code class="plaintext hljs">node minimist.js --camel-case-option</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-string"><span class="hljs-string">'camel-case-option'</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  In contrast, minimist no transformations. </p><br><p>  Option with parameter: </p><br><pre> <code class="plaintext hljs">node minimist.js --source path</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">source</span></span>: <span class="hljs-string"><span class="hljs-string">'path'</span></span> }</code> </pre> <br><p>  Signing the same works too: </p><br><pre> <code class="plaintext hljs">node minimist.js --source=path</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">source</span></span>: <span class="hljs-string"><span class="hljs-string">'path'</span></span> }</code> </pre> <br><p>  The special mode of transfer of options with use <code>--</code> supported: </p><br><pre> <code class="plaintext hljs">node minimist.js -h -- --size=large</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [ <span class="hljs-string"><span class="hljs-string">'--size=large'</span></span> ], <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  The arguments that follow <code>--</code> not processed and are simply placed in the <code>_</code> property. </p><br><p>  Here, in general, and all that is in the database.  Let's see what options the minimist offers us to customize the handling of options. </p><br><p>  To configure the processing of command line arguments, we must pass the second parameter to the parser with our settings.  Consider the examples: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> minimist = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'minimist'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> args = minimist(process.argv.slice(<span class="hljs-number"><span class="hljs-number">2</span></span>), { <span class="hljs-attr"><span class="hljs-attr">string</span></span>: [<span class="hljs-string"><span class="hljs-string">'size'</span></span>], <span class="hljs-attr"><span class="hljs-attr">boolean</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">alias</span></span>: {<span class="hljs-string"><span class="hljs-string">'help'</span></span>: <span class="hljs-string"><span class="hljs-string">'h'</span></span>}, <span class="hljs-attr"><span class="hljs-attr">default</span></span>: {<span class="hljs-string"><span class="hljs-string">'help'</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}, <span class="hljs-attr"><span class="hljs-attr">unknown</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(<span class="hljs-string"><span class="hljs-string">'Unknown option: '</span></span>, arg) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } }) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(args)</code> </pre> <br><pre> <code class="plaintext hljs">node minimist-with-settings.js --help</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><pre> <code class="plaintext hljs">node minimist-with-settings.js -h</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  We set the <code>--help</code> option with a synonym <code>-h</code> .  The result, as we see, is identical. </p><br><p>  The <code>boolean</code> option set to <code>true</code> means that all options without parameters after the equal sign will have a boolean value.  For example: </p><br><pre> <code class="plaintext hljs">node minimist-with-settings.js --no-help</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><p>  Here we saw how boolean options are handled: the prefix <code>no</code> sets the value of the option to <code>false</code> . </p><br><p>  But this example doesn't work anymore, you need the equal sign: </p><br><pre> <code class="plaintext hljs">node minimist-with-settings.js --size large</code> </pre> <br><pre> <code class="plaintext hljs">Unknown option: large { _: [], size: '', help: true, h: true }</code> </pre> <br><p>  Here we saw the processing of an unknown option and the default option. </p><br><p>  The general conclusion: compared to the <code>commander</code> quite minimalist, but quite convenient. </p><br><h2 id="yargs">  yargs </h2><br><p>  Unlike minimist and commander, <em>yargs</em> offers quite extensive documentation, available by <a href="http://yargs.js.org/docs/">reference</a> . </p><br><p>  As usual, let's start with a minimal example: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> yargs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'yargs'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(yargs.argv)</code> </pre> <br><pre> <code class="plaintext hljs">node yargs.js</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-string"><span class="hljs-string">'$0'</span></span>: <span class="hljs-string"><span class="hljs-string">'yargs.js'</span></span> }</code> </pre> <br><p>  Here we see an empty list of unprocessed options, as well as the file name of our program. </p><br><p>  Consider a more complicated example: </p><br><pre> <code class="plaintext hljs">node yargs.js -abc --help --size=large 1 2 3</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> ], <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-string"><span class="hljs-string">'large'</span></span>, <span class="hljs-string"><span class="hljs-string">'$0'</span></span>: <span class="hljs-string"><span class="hljs-string">'yargs.js'</span></span> }</code> </pre> <br><p>  Here it will be more interesting: firstly, the transferred options are perceived correctly;  secondly, we have not written a single line of code to process them. </p><br><p>  But here you can see that the option <code>--help</code> is not processed without prior configuration as intended. </p><br><p>  Now consider how to use yargs in more complex cases using the following example: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> yargs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'yargs'</span></span>) yargs .usage(<span class="hljs-string"><span class="hljs-string">'Usage: $0 -abc [--list 1,2,3] --size large|meduim|small [--help]'</span></span>) .version(<span class="hljs-string"><span class="hljs-string">'1.0.0'</span></span>) .demand([<span class="hljs-string"><span class="hljs-string">'size'</span></span>]) .choices(<span class="hljs-string"><span class="hljs-string">'size'</span></span>, [<span class="hljs-string"><span class="hljs-string">'large'</span></span>, <span class="hljs-string"><span class="hljs-string">'medium'</span></span>, <span class="hljs-string"><span class="hljs-string">'small'</span></span>]) .default(<span class="hljs-string"><span class="hljs-string">'list'</span></span>, [], <span class="hljs-string"><span class="hljs-string">'List of values'</span></span>) .describe(<span class="hljs-string"><span class="hljs-string">'list'</span></span>, <span class="hljs-string"><span class="hljs-string">'value list'</span></span>) .array(<span class="hljs-string"><span class="hljs-string">'list'</span></span>) .help(<span class="hljs-string"><span class="hljs-string">'help'</span></span>) .alias(<span class="hljs-string"><span class="hljs-string">'help'</span></span>, <span class="hljs-string"><span class="hljs-string">'h'</span></span>) .example(<span class="hljs-string"><span class="hljs-string">'$0 --size=medium'</span></span>) .epilog(<span class="hljs-string"><span class="hljs-string">'(c) 2016 My Name'</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(yargs.argv)</code> </pre> <br><pre> <code class="plaintext hljs">node yargs.js -h</code> </pre> <br><p>  We get: </p><br><pre> <code class="plaintext hljs">Usage: yargs.js -abc [--list 1,2,3] --size large|meduim|small [--help] Options: --version Show version number [boolean] --list value list [array] [default: List of values] --help, -h Show help [boolean] --size [required] [choices: "large", "medium", "small"] Examples: yargs.js --size=medium (c) 2016 My Name</code> </pre> <br><p>  In this example, we set the text to be displayed with the <code>help</code> option.  <code>help</code> options we also specified the synonym <code>h</code> .  They also indicated the version of the program that will be displayed with the <code>version</code> option. </p><br><p>  The <code>size</code> option is required, moreover, it is given a list of valid values. </p><br><pre> <code class="plaintext hljs">node yargs.js --size large</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">version</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-string"><span class="hljs-string">'large'</span></span>, <span class="hljs-attr"><span class="hljs-attr">list</span></span>: [], <span class="hljs-string"><span class="hljs-string">'$0'</span></span>: <span class="hljs-string"><span class="hljs-string">'yargs.js'</span></span> }</code> </pre> <br><p>  If <code>size</code> passes a value that does not correspond to any of the list, then we get an error message: </p><br><pre> <code class="plaintext hljs">node yargs.js --size=middle</code> </pre> <br><pre> <code class="plaintext hljs">... Invalid values: Argument: size, Given: "middle", Choices: "large", "medium", "small"</code> </pre> <br><p>  The <code>list</code> option has a default value.  This option is also treated as an array of values: </p><br><pre> <code class="plaintext hljs">node yargs.js --list 1 2 3 --size=large</code> </pre> <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">_</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">version</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">help</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">list</span></span>: [ <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> ], <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-string"><span class="hljs-string">'large'</span></span>, <span class="hljs-string"><span class="hljs-string">'$0'</span></span>: <span class="hljs-string"><span class="hljs-string">'yargs.js'</span></span> }</code> </pre> <br><h2 id="rezyume">  Summary </h2><br><p>  The <em>commander</em> and <em>minimist packages</em> are distinguished by the minimum number of dependencies, while <em>yargs</em> affects not only the number of their dependencies, but also the number of their capabilities. </p><br><p>  Which package is better, obviously, can not be said.  According to the author, the <em>minimist</em> is quite sufficient for the simplest cases, but in difficult situations when using it, you will have to write a lot of code for handling options manually.  In this case, it is better to use <em>commander</em> or <em>yargs</em> , to your taste. </p><br><p>  All three packages considered here have type definitions on TypeScript, which allows you to have IntelliSense running in <a href="https://code.visualstudio.com/">Code</a> . </p><br><h2 id="arhiv">  Archive </h2><br><p>  In the original edition of September 13, 2016, the summary table at the beginning of the article was as follows: </p><br><p><img src="https://habrastorage.org/files/32e/eaa/6a4/32eeaa6a4fed4b9d9a55a25e1ca13ee9.png" alt="Summary table"></p><br><h2 id="obnovlenie">  Update </h2><br><p>  Three more packages were added to the table, which were reported in the comments by the readers: </p><br><ul><li>  NPM: <a href="https://www.npmjs.org/package/argparse">argparse</a> |  GitHub: <a href="https://github.com/nodeca/argparse">nodeca / argparse</a> </li><li>  NPM: <a href="https://www.npmjs.org/package/argentum">argentum</a> |  GitHub: <a href="https://github.com/rumkin/argentum">rumkin / argentum</a> </li><li>  NPM: <a href="https://www.npmjs.org/package/getoptie">getoptie</a> |  GitHub: <a href="https://github.com/avz/node-getoptie">avz / node-getoptie</a> </li></ul><br><p>  And two packages that were discovered through the <a href="https://npms.io/">npms.io</a> service: </p><br><ul><li>  NPM: <a href="https://www.npmjs.com/package/cli">cli</a> |  GitHub: <a href="https://github.com/node-js-libs/cli">node-js-libs / cli</a> </li><li>  NPM: <a href="https://www.npmjs.com/package/dashdash">dashdash</a> |  GitHub: <a href="https://github.com/trentm/node-dashdash">trentm / node-dashdash</a> </li></ul><br><p>  Accordingly, the updated table below: </p><br><p><img src="https://habrastorage.org/files/f46/297/d62/f46297d62f0b4764836b6795d2680707.png" alt="Updated pivot table"></p><br><h2 id="nemnogo-analitiki">  Some analytics </h2><br><p>  Three months after writing and publishing this article on Habrahabr in <br>  the period from September to December 2016 there have been some interesting changes in <br>  pivot table. </p><br><p><img src="https://habrastorage.org/files/354/8a8/9b9/3548a89b9a6141a6bc81be7884b41820.png" alt="December 2016 table"></p><br><ul><li>  The rating of almost all modules has grown with the exception of low-popular <br>  <em>stdio</em> , <em>getoptie</em> , <em>argentum</em> . </li><li>  Forward, "yanked" <em>yargs</em> and came in second place, shifting to the third <em>minimist</em> . <br>  This is understandable: the minimist has not been developing for more than a year, while <br>  for yargs new versions are released regularly. </li><li>  The <em>command-line-args</em> package bypassed <em>stdio</em> . </li><li>  Of the 14 packages, only two have improved their positions.  But the rate of rating growth <br>  different, so after a few months you can expect to identify new favorites. </li><li>  The following modules were not improved: minimist, optimist (deprecated), <br>  nomnom (deprecated), stdio, getoptie and argentum.  Probably these modules will soon be possible. <br>  will declare deprecated. <br>  <em>The most important conclusion that I would like to draw is something that is worth considering, but</em> <em><br></em>  <em>do you need to use the popular <strong>minimist</strong> in your new projects, because</em> <em><br></em>  <em>long time is not developed?</em> </li></ul><br><p>  The balance of the vote on December 30, 2016 is as follows.  72 readers voted, abstained 65. <br>  Of them cast their votes as follows: </p><br><ol><li>  yargs 31% (22) </li><li>  commander 29% (21) </li><li>  minimist 21% (15) </li><li>  process.argv 8% (6) </li><li>  another package of 7% (5) </li><li>  optimist 4% (3) </li></ol><br><p>  The most popular among <em>yargs</em> and <em>commander</em> , with a <em>minimist</em> <br>  also quite popular. </p><br><h2 id="obnovlenie-ot-8-fevralya-2019">  February 8, 2019 update </h2><br><p>  The pivot table has been updated, converted to the Markdown format and updated with the <code>has-flag</code> , <code>clp</code> and <code>clap</code> packages.  The voting results remained about the same as the last update of December 30, 2016. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/309936/">https://habr.com/ru/post/309936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309920/index.html">Fax in the City (T.38)</a></li>
<li><a href="../309922/index.html">Writing Hello World on FASM</a></li>
<li><a href="../309928/index.html">Customize Windows Store for Business</a></li>
<li><a href="../309930/index.html">Arguments for function tree</a></li>
<li><a href="../309934/index.html">How to get a lot of server for little money: options for the earth and the cloud</a></li>
<li><a href="../309938/index.html">We get rid of binary dependencies with composite assembly in Gradle 3.1</a></li>
<li><a href="../309940/index.html">Azure Active Directory now in the new ARM portal</a></li>
<li><a href="../309942/index.html">Presenter Template in Laravel</a></li>
<li><a href="../309944/index.html">Useful properties of jitter</a></li>
<li><a href="../309948/index.html">IOS 10 security settings you should pay attention to</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
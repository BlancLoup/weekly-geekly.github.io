<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Basics of IP telephony, basic principles, terms and protocols</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear habrazhiteli. In this article I will try to consider the basic principles of IP-telephony, describe the most frequently used prot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Basics of IP telephony, basic principles, terms and protocols</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/190/1f6/7de/1901f67dec4f4556eca10a490bbde69d.jpg"><br>  Good afternoon, dear habrazhiteli.  In this article I will try to consider the basic principles of IP-telephony, describe the most frequently used protocols, indicate the methods of encoding and decoding voice, and analyze some typical problems. <br><a name="habracut"></a><br>  Under IP-telephony refers to voice communication, which is carried out over data networks, in particular over IP networks (IP - Internet Protocol).  Today, IP-telephony is increasingly replacing traditional telephone networks due to ease of deployment, low cost of a call, ease of configuration, high quality of communication and comparative security of the connection.  In this presentation, we will adhere to the principles of the OSI reference model (Open Systems Interconnection basic reference model) and talk about the subject ‚Äúbottom-up‚Äù, starting with the physical and channel levels and ending with the data levels. <br><br><img src="https://habrastorage.org/storage2/a19/65d/8a1/a1965d8a19e139024907c1be31a69525.png">  " <br>  <i>OSI Model and Data Encapsulation</i> <br><br><h3>  Principles of IP telephony </h3><br>  When making a call, the voice signal is converted into a compressed data packet (this process will be discussed in more detail in the chapters ‚ÄúPulse Code Modulation‚Äù and ‚ÄúCodecs‚Äù).  Next, data packets are sent over packet-switched networks, in particular, IP networks.  When the packets reach the receiver, they are decoded into the original voice signals.  These processes are possible due to the large number of auxiliary protocols, some of which will be discussed further. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this context, the data transfer protocol is a kind of language that allows two subscribers to understand each other and to ensure high-quality data transfer between two points. <br><br><h4>  Difference from traditional telephony </h4><br>  In traditional telephony, the connection is established using a telephone station and pursues only the purpose of the conversation.  Here, voice signals are transmitted via telephone lines through a dedicated connection.  In the case of IP telephony, the compressed data packets arrive in the global or local network with a specific address and are transmitted based on this address.  It already uses IP addressing, with all its inherent features (such as routing). <br><br>  At the same time, IP telephony is a cheaper solution for both the operator and the subscriber.  This is due to the fact that: <br><br><ul><li>  Traditional telephone networks have excessive performance, while IP telephony uses voice packet compression technology and makes full use of the capacity of the telephone line. </li><li>  As a rule, at the moment everyone has access to the global network, which allows to reduce connection costs or completely eliminate them. </li><li>  Calls in the local network can use the internal server and occur without the participation of an external PBX. </li></ul><br>  Together with the above, IP-telephony can improve the quality of communication.  This is achieved, again, due to three main factors: <br><br><ul><li>  Telephone servers are constantly being improved and the algorithms of their work become more resistant to delays or other problems of IP networks. </li><li>  In private networks, their owners have complete control over the situation and can change such parameters as bandwidth, the number of subscribers on one line, and, as a result, the amount of delay. </li><li>  Packet-switched networks are evolving, and new protocols and technologies are introduced annually to improve the quality of communication (for example, the RSVP bandwidth reservation protocol). </li></ul><br>  Thanks to IP-telephony, the problem of a busy line is very elegantly solved, since the redirection or transfer to the standby mode can be carried out by several commands in the configuration file on the PBX. <br><br><h3>  Physical Layer </h3><br>  At the physical level, a stream of bits is transmitted over the physical medium through an appropriate interface.  IP telephony relies almost entirely on the already existing network infrastructure.  As a transmission medium, categories 5 (UTP5), single-mode or multimode optical fiber, or coaxial cable are usually used.  Thus, the principle of convergence of telecommunication networks is fully realized. <br><br><h4>  Poe </h4><br>  It is interesting to consider the technology of PoE (Power Over Ethernet) - IEEE 802.3 af-2003 and IEEE 802.3at-2009 standards.  Its essence lies in the ability to provide power to devices using a standard twisted pair.  Most modern IP phones, in particular, the Cisco Unified IP Phones 7900 Series, come with PoE support.  According to the 2009 standard, devices can receive a current of up to 25.5 watts. <br><br>  When powering up, only two twisted pairs of 100BASE-TX cable are used, however, some manufacturers use all four, reaching power up to 51 Watts.  It should be noted that the technology does not require modification of existing cable systems, including Cat 5 cables. <br><br>  To determine whether the connected device is a PD-powered device, a voltage of 2.8 - 10 V is applied to the cable. This calculates the resistance of the connected device.  If this resistance is in the range of 19 - 26.5 kŒ©, then the process proceeds to the next stage.  If not, the check is repeated at intervals of ‚â•2 ms. <br><br>  Next, the power range of the powered device is searched by applying a higher voltage and measuring the current in the line.  Following this, the line is supplied with 48 V - supply voltage.  Constant overload control is also carried out. <br><br><h3>  Link Layer (Data Link Layer) </h3><br>  According to the IEEE 802 specification, the data link layer is divided into two sublevels: <br><br><ol><li>  MAC (Media Access Control) - provides interaction with the physical layer; </li><li>  LLC (Logical Link Control) - serves the network layer. </li></ol><br>  At the data link layer, there are switches - devices that provide the connection of several nodes of a computer network and the distribution of frames between hosts based on physical (MAC) addressing. <br><br>  It is necessary to mention the mechanism of virtual local networks (Virtual Local Area Network).  This technology allows you to create a logical network topology without regard to its physical properties.  This is achieved by tagging traffic, which is described in detail in the IEEE 802.1Q standard. <br><br><img src="https://habrastorage.org/storage2/b4a/053/ebd/b4a053ebdb9ccf885ba6fbaacf37ccc5.png"><br>  <i>Frame format</i> <br><br>  In the context of IP telephony, we note Voice VLAN, which is widely used to isolate voice traffic generated by IP phones from other data.  Its use is advisable for two reasons: <br><br><ol><li>  Security.  Creating a separate voice VLAN reduces the likelihood of interception and analysis of voice packets. </li><li>  Improving the quality of transmission.  The VLAN mechanism allows you to set an increased priority for voice packets, and, as a result, improve the quality of communication. </li></ol><br><h3>  Network Layer </h3><br>  At the network level, routing occurs, respectively, the main network-level devices are routers (Router).  It is here that it is determined by which way the data reaches the recipient with a specific IP address. <br><br>  The main routable protocol is IP (Internet Protocol), on the basis of which IP telephony is built, as well as the worldwide Internet.  There are also many dynamic routing protocols, the most popular among which is OSPF (Open Shortest Path First) - an internal protocol based on the current state of communication channels; <br><br>  To date, there are special VoIP-gateways (Voice Over IP Gateway) that provide connection of ordinary analog phones to the IP-network.  As a rule, they also have a built-in router that allows you to keep track of traffic, authorize users, automatically distribute IP addresses, and manage bandwidth. <br><br>  Among the standard features of VoIP gateways: <br><br><ul><li>  Security features (creation of access lists, authorization); </li><li>  Facsimile support; </li><li>  Voice mail support; </li><li>  Supports H.323, SIP (Session Initiation Protocol) protocols. </li></ul><br>  To combat possible delays in IP transmission, it is necessary to supplement with additional means, such as queuing protocols (so that voice data does not compete with normal ones). <br>  As a rule, for this purpose, routers use low-latency queuing (LLQ - Low-Latency queuing) or weighted queuing based on classes (CBWFQ - Class-Based Weighted Fair Queuing). <br>  In addition, prioritized labeling schemes are needed to consider voice data as the most important for transmission. <br><br><h3>  Transport Layer </h3><br>  For the transport level are characteristic: <br><br><ul><li>  Segmentation of top-level application data </li><li>  Provide end-to-end connection; </li><li>  Guaranteed data reliability. </li></ul><br>  The main transport layer protocols are TCP (Transmission Control Protocol), UDP (User Datagram Protocol), RTP (Real-time Transport Protocol).  Directly in IP-telephony, UDP and RTP protocols are used, and their main difference from TCP is that they do not ensure reliable data delivery.  This is a more acceptable option than controlling delivery control (TCP), since telephony is highly dependent on transmission delays, but less sensitive to packet loss. <br><br><h4>  UDP </h4><br>  UDP is based on IP network protocol and provides transport services to application processes.  Its main difference from TCP is to ensure non-guaranteed delivery, that is, no confirmation is requested when sending and receiving data.  Also, when sending information, it is not necessary to establish a logical connection between the UDP modules (source and receiver). <br><br><h4>  Rtp </h4><br>  Despite the fact that RTP is considered to be a transport layer protocol, as a rule, it works over UDP.  With the help of RTP, traffic type recognition, time tagging, transmission control and packet sequence numbering are implemented. <br><br>  The basic purpose of RTP is that it assigns time stamps to each outgoing packet that are processed at the receiving side.  This allows you to receive data in the proper order, reduces the impact of the uneven transit time of packets over the network, restores synchronization between audio and video data. <br><br><h3>  Data Layers </h3><br>  The last three levels of the OSI model will be considered together.  Such an association is permissible, since the processes occurring at these levels are closely related to each other, and it would be more logical to describe them without any distinction between the sublevels. <br><br><h4>  H.323 </h4><br>  The first step is to describe the H.323 protocol stack, developed in 1996.  This standard contains a description of equipment, network services and terminal devices intended for audio and video communication in packet-switched networks (Internet).  For any H.323 device, voice information sharing is required. <br><br>  H.323 recommendations suggest: <br><br><ul><li>  Platform independence. </li><li>  Analog data encoding standards. </li><li>  Bandwidth management. </li><li>  Flexibility and compatibility. </li></ul><br>  We note a very important fact: the recommendations do not define the physical transmission medium, the transport protocol and the network interface.  This means that devices that support the H.323 standard can work in any existing packet-switched networks. <br><br>  According to H.323, the four main components of a VoIP connection are: <br><br><ul><li>  terminal; </li><li>  Gateway; </li><li>  zone controller; </li><li>  Multipoint Control Unit (MCU) Controller. </li></ul><br><img src="https://habrastorage.org/storage2/3b5/f37/0b8/3b5f370b87e88e19eed57622d71f2ff4.png"><br>  <i>An example of a block diagram of a network in IP telephony</i> <br><br><div class="spoiler">  <b class="spoiler_title">Excerpt from the document describing the H.323 protocol stack.</b> <div class="spoiler_text"><blockquote>  1. Connection control and alarm: <br>  1.a.  H.225.0: multimedia stream signaling and packet protocols (uses a subset of the Q.931 signaling protocol). <br>  1.b.  H.225.0 / RAS: registration, admission and status procedures. <br>  1.in.  H.245: control protocol for multimedia. <br>  2. Processing audio signals: <br>  2.a.  G.711: pulse code modulation of tone frequencies. <br>  2.b.  G.722: 7 kHz audio coding at 64 kbps. <br>  2.in.  G.723.1: two-rate speech coders for multimedia communication with 5.3 and 6.3 kbit / s. <br>  2.g.  G.728: 16 kbps speech coding using linear prediction with low latency coding of the excitation signal. <br>  2.d.  G.729: 8 kbps speech coding using linear prediction with algebraic coding of the excitation signal of a conjugate structure. <br>  3. Video signal processing: <br>  3.a.  H.261: video codecs for audiovisual services at 64 kbps. <br>  3.b.  H.263: Video coding for low bit rate transmission. <br>  4. Conferencing for data transfer: <br>  4.a.  T.120: protocol stack (includes T.123, T.124, T.125) for data transfer between end points. <br>  5. Multimedia transmission: <br>  5.a.  RTP: Real-Time Transport Protocol. <br>  5 B.  RTCP: real-time transmission control protocol. <br>  6. Security: <br>  6.a.  H.235: Security and Encryption for H.323 Multimedia Terminals. <br>  7. Additional services: <br>  7.a.  H.450.1: generic functions for managing supplementary services in H.323. <br>  7.b.  H.450.2: transfer the connection to the phone number of the third party. <br>  7.in.  H.450.3: call forwarding. <br>  7.d.  H.450.4: call hold. <br>  7.d.  H.450.5: parking a call (park) and answering a call (pick up). <br>  7.e.  H.450.6: notification of an incoming call in a call state. <br>  7.zh.  H.450.7: message waiting indication. <br>  7.h.  H.450.8: name identification service. <br>  7.i.  H.450.9: call termination service for H.323 networks. </blockquote></div></div><br><br><img src="https://habrastorage.org/storage2/c56/8f6/72a/c568f672aa38e0f675731d3f674d5a99.jpg"><br>  <i>Connection setup script based on H.323 protocol</i> <br><br><h3>  SIP (Session Initiation Protocol) </h3><br>  SIP is a signaling protocol designed to organize, modify and terminate communication sessions.  SIP is independent of transport technologies, however, it is preferable to use UDP when establishing a connection.  It is recommended to use RTP for voice and video transmission itself, but the possibility of using other protocols is not excluded. <br><br>  In SIP, two types of signaling messages are defined ‚Äî request and response.  There are also six procedures: <br><br><ul><li>  INVITE (invitation) - invites the user to take part in a communication session (serves to establish a new connection; may contain parameters for approval); </li><li>  BYE (disconnect) - terminates the connection between two users; </li><li>  OPTIONS (options) - used to transfer information about the supported characteristics (this transfer can be done directly between two user agents or through a SIP server); </li><li>  ACK (confirmation) - used to confirm receipt of a message or to respond positively to an INVITE command; </li><li>  CANCEL (cancel) - stops searching for a user; </li><li>  REGISTER (registration) - transmits information about the location of the user to the SIP server, which can transmit it to the address server (Location Server). </li></ul><br><img src="https://habrastorage.org/storage2/32b/db3/4d4/32bdb34d45dca17be1d08112a6a50c30.png"><br>  <i>SIP Session Scenario</i> <br><br><h4>  Codecs </h4><br>  An audio codec is a program or algorithm that compresses or decompresses digital audio data, making it possible to reduce the bandwidth requirements of a data transmission channel.  In IP telephony today, the most common transformation is through the G.729 codec, as well as G.711 compression according to the A-law (alaw) and Œº-law (ulaw). <br><br><h5>  G.729 </h5><br>  G.729 is a codec that compresses the original signal with data loss.  The main idea embodied in G.729 is the transfer not of the digitized signal itself, but of its parameters (spectral characteristics, the number of zero crossings), sufficient for subsequent synthesizing on the receiving side.  In this case, all the main characteristics of the voice, such as amplitude and timbre are preserved. <br><br>  The bandwidth of the channel for which this codec is designed is 8 kbps.  The frame length of the processed G.729 is 10 ms, the sampling frequency is 8 kHz.  For each of these frames, the parameters of the mathematical model are determined, which are subsequently transmitted to the channel in the form of codes. <br><br>  When using G.729 coding, the delay is 15 ms, of which 5 ms is spent on filling the pre-buffer.  Note also that the G.729 codec makes quite high demands on the processor resources. <br><br><h5>  G.711 </h5><br>  G.711 - voice codec, which does not involve any compression, in addition to companding - a method of reducing the effects of channels with a limited dynamic range.  This method is based on the principle of reducing the number of levels of quantization of a signal in a high-volume region, while maintaining the sound quality.  Two companding schemes widely used in telephony are alaw and ulaw. <br><br>  The signal in this codec is provided by a 64 kbit / s stream.  The sampling rate is 8000 frames at 8 bits per second.  Voice quality is subjectively better than using the G.729 codec. <br><br><h6>  alaw </h6><br>  alaw or A-law is an audio data compression algorithm with loss of information.  Mainly used in Europe and Russia. <br><br>  For the x signal, the alaw transform is as follows: <br><img src="https://habrastorage.org/storage2/6f0/94f/065/6f094f065171d639bb72f3df5030b873.png"><br>  Where A is the compression parameter (usually taken to be 87.7). <br><br><h6>  ulaw </h6><br>  ulaw or Œº-law is an audio data compression algorithm with loss of information.  Mainly used in Japan and North America. <br><br>  For the x signal, the ulaw conversion is as follows: <br><img src="https://habrastorage.org/storage2/563/621/59c/56362159c9f1c517b7c04aadc4a8dc70.png"><br>  where Œº is assumed to be 255 (8 bits) in the standards of North America and Japan. <br><br><h4>  Pulse Code Modulation (PCM - Pulse Code Modulation) </h4><br>  Pulse code modulation - the transfer of a continuous function in the form of a series of consecutive pulses. <br><br>  To obtain the modulated signal at the input of the communication channel, the instantaneous value of the carrier signal is measured by an ADC with a specific period.  The number of digitized values ‚Äã‚Äãper second (otherwise, the sampling frequency) must be greater than or equal to twice the maximum frequency in the spectrum of the analog signal. <br><br>  Further, the obtained values ‚Äã‚Äãare rounded to one of the previously accepted levels.  Note that the number of levels must be taken in multiples of the power of two.  Depending on how many levels were defined, the signal is encoded by a certain number of bits. <br><br><img src="https://habrastorage.org/storage2/2f1/eaa/3a5/2f1eaa3a5bd1797e0c25caaa2ac52eef.png"><br>  <i>Signal quantization</i> <br><br>  This figure shows the coding using four bits (that is, all intermediate values ‚Äã‚Äãof the analog signal will be rounded to one of the 16 preset levels).  For example, when the time is zero, the signal will be represented in a similar way: 0111. <br><br>  During demodulation, a sequence of zeros and ones is converted into pulses by a demodulator, the quantization level of which is equal to the quantization level of the modulator.  After that, the DAC, on the basis of these pulses, restores the signal, and the smoothing filter finally removes inaccuracies. <br><br>  In modern telephony, the number of quantization levels must be greater than or equal to 100, that is, the minimum number of bits with which the signal can be encoded is 7. <br><br><h3>  Issues of quality of service in IP-telephony (Quality of Service - QoS) </h3><br>  In networks based on the TCP / IP stack, high quality service for traffic sensitive to transmission delays is not provided by default.  When using the TCP protocol there is a guarantee of reliable delivery of information, but its transfer can be carried out with unpredictable delays.  UDP is characterized by minimizing delays, but there is no guarantee of correct packet delivery. <br><br>  At the same time, the quality of voice traffic is highly dependent on the quality of the transmission, and in a network where mechanisms are not implemented to guarantee consistent quality, the implementation of IP telephony may not be satisfying the requirements of users. <br><br>  The main indicators of quality of service are network bandwidth and transmission delay.  The delay in this case is defined as the time elapsed from the moment of sending the packet to the moment of its reception. <br><br>  There are also characteristics such as network availability and reliability (assessed by the results of monitoring the level of service for a long time, or by utilization). <br><br>  To improve the quality of communication, the following mechanisms are used: <br><br><ol><li>  Rerouting.  If one of the communication channels is overloaded, it allows delivery via backup routes. </li><li>  Reservation of communication channel resources at the time of connection. </li><li>  Prioritization of traffic.  Provides the ability to tag packages according to their level of importance and perform maintenance based on tags. </li></ol><br>  As mentioned earlier, voice traffic is extremely sensitive to transmission delays.  The maximum delay time should not exceed 400 ms (this includes the duration of information processing at the end stations).  There are two main types of delays: <br><br>  - Delay in coding information in voice gateways or terminal equipment.  Reduced by improved voice processing and conversion algorithms. <br>  - The delay introduced by the transmission network.  Decreases by improving the network infrastructure, in particular, by reducing the number of routers and using high-speed links. <br><br><img src="https://habrastorage.org/storage2/2db/309/8f8/2db3098f8deec592715c8c7abb44fbbe.png"><br>  <i>Sources of Delay in IP Telephony</i> <br><br><h4>  Jitter </h4><br>  Another phenomenon characteristic of IP telephony is jitter, or, otherwise, the random delay in packet propagation. <br><br>  Jitter is caused by three factors: <br><br><ul><li>  Limited bandwidth or incorrect operation of active network devices; </li><li>  High signal propagation delay; </li><li>  Thermal noise. </li></ul><br>  The most commonly used method of dealing with jitter is jitter buffer, which stores a certain number of packets. <br><br>  Usually, a dynamic adjustment of the buffer length is provided for the duration of the connection.  Heuristic algorithms are used to select the best length. <br><br><h5>  Jitter buffer </h5><br>  To compensate for the uneven packet arrival rate at the receiving side, a temporary packet storage, or so-called jitter buffer, is created.  Its task is to collect incoming packets in the correct order in accordance with the timestamps and give them to the codec at the correct intervals and in the correct order. <br><br><img src="https://habrastorage.org/storage2/5c8/4ca/806/5c84ca806f0a3ff28531eda8563dc6f1.png"><br>  <i>Jitter buffer</i> <br><br>  Buffer size receiving VOIP device counts in the process of work, or forced to set in the settings.  On the one hand, it cannot be too large so as not to increase the transport delay.  On the other hand, a small buffer size causes packet loss due to changes in the delay time in the IP network. <br><br>  From here comes one of the main contradictions, between Internet providers and IP telephony users.  From the point of view of the provider, all packages are delivered to the subscriber, that is, there are no losses.  And from the point of view of a VoIP device, the time difference between the arrival of packets significantly exceeds the jitter buffer.  Therefore, in fact there are losses.  In practice, a loss of more than 1% causes certain discomfort.  At 2% of the conversation is difficult.  With values ‚Äã‚Äãgreater than 4% conversation is almost impossible. <br><br><h5>  Jitter buffer size </h5><br>  The random propagation delay Ji for the i-th packet can be determined by the formula: <br><img src="https://habrastorage.org/storage2/9e7/438/7f3/9e74387f3910712d51b13e62cf29ef06.png"><br>  Where: <br>  Di is the deviation from the expected arrival time of the i-th packet. <br>  The deviation from the expected arrival time of the i-th packet Di is determined by the formula: <br><img src="https://habrastorage.org/storage2/75a/754/0df/75a7540dff9c12c19e5b82ab3d079ec2.png"><br>  Where: <br>  R is the arrival time of the packet in the RTP timestamps, <br>  S is the RTP timestamp taken from the packet. <br><br>  We give an example of calculating the expected size of the random propagation delay of the 5th packet, based on the previous two. <br><br>  Let J4 = 10 ms;  R4 = 10, R3 = 11, S4 = 6, S3 = 5, then D5 will be equal (10-11) - (6-5) = - 2. <br><img src="https://habrastorage.org/storage2/53a/908/260/53a908260d82a0f809818017041fa04f.png"><br>  On average, the random delay of the propagation time for one packet in the current example is 10 ms (more precisely, it can be calculated using the formula given above).  Then, in order for no packet to be dropped, the jitter buffer size must be equal to 10 ms. <br><br>  To determine the required jitter buffer size in megabytes, multiply the resulting value by 100 Mb / s - the average network bandwidth: 10 ‚Ä¢ 10 ^ -3 ‚Ä¢ 100 = 128 kb. <br><br>  The size of the jitter buffer must be greater than the fluctuation of transit time in the network.  For example, if for 10 packets the transit time ranges from 5 to 10 ms, then the buffer must be at least 8 ms, so that no packet is lost.  It is better if the buffer is even larger, for example 12 ms, then the mechanism for re-querying lost packets will work. <br><br><h3>  Telephony Deployment Solutions </h3><br><h4>  Asterisk </h4><br><img src="https://habrastorage.org/storage2/d1c/dbb/c9b/d1cdbbc9b8129f707684be6883b4349c.jpg"><br><br>  Asterisk is a software PBX that can switch both VoIP calls and calls made between IP phones and a traditional public telephone network. <br><br>  Supported protocols: IAX, SIP, H.323, Skinny, UNIStim. <br>  Supported codecs: G.711 (ulaw and alaw), G.722, G.723, G.729, GSM, iLBC, LPC-10, Speex. <br><br>  Asterisk is a dynamically developing open source software that can be installed without regard to licensing.  This makes this software PBX attractive for small and medium businesses.  The number of subscribers in the network can reach 2000 and is limited only by server capacity. <br><br>  Another advantage of Asterisk is the possibility of flexible settings.  All the necessary functionality is either already implemented, or can be written independently without significant time and money costs.  This is facilitated by the principle: one task - one software module. <br><br>  Compared to solutions from vendors such as Cisco or Avaya, Asterisk is also attractive for deployment costs.  In fact, all costs are reduced only to the purchase of telephone sets and a server capable of providing the required load on the network.  The program itself is absolutely free. <br><br><h4>  Cisco Unified Communication Manager (CallManager) </h4><br><img src="https://habrastorage.org/storage2/4c1/ff8/e23/4c1ff8e2392c0c263270f1592b54bf26.jpg"><br><br>  CallManager is designed more for large networks of up to 30,000 subscribers.  This hardware and software system ensures reliability of operation and allows you to configure many parameters, such as call forwarding or voice menu.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is also a ‚Äúlightweight‚Äù express version, intended rather for small offices. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of the benefits of Cisco CallManager, first of all, we should mention the famous Cisco technical support. </font><font style="vertical-align: inherit;">With an appropriate level of a service contract, any problem, starting with tuning questions and ending with equipment that has failed, will be solved almost instantly. </font><font style="vertical-align: inherit;">Therefore, Cisco CallManager is suitable for companies willing to pay a lot of money, but at the same time receive the highest quality of service.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Avaya IP Office </font></font></h4><br><img src="https://habrastorage.org/storage2/8f0/bba/9ad/8f0bba9adb78c40f901d8e834a9c60da.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An IP Office system can be a good choice for a medium-sized telephone network. The number of subscribers here is limited not only by server capacity, but also by the number of licenses purchased. Almost everything needs to be licensed - expansion cards, used applications, etc., which can cause certain inconveniences. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration can be done through a number of programs, but the most popular and easy to use is Avaya IP Office Manager. It is also possible to control via the console using the Avaya Terminal Emulator. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, Avaya products are not limited to IP Office alone. Avaya, merged in 2009 with another well-known manufacturer Nortel, is a recognized leader in the market for equipment for IP-telephony. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What can be read on the topic:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wendell Odom - all his books are good. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúIP-telephony in computer networks‚Äù. </font><font style="vertical-align: inherit;">I.V. </font><font style="vertical-align: inherit;">Baskakov, A.V. </font><font style="vertical-align: inherit;">Proletarsky, S.A. </font><font style="vertical-align: inherit;">Melnikov, R.A. </font><font style="vertical-align: inherit;">Fedotov.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúIP-telephony‚Äù. </font><font style="vertical-align: inherit;">B. S. Goldstein, A. V. Pinchuk, A. L. Sukhovitsky.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúAsterisk. </font><font style="vertical-align: inherit;">The future of telephony. ‚Äù </font><font style="vertical-align: inherit;">Jim Van Meggelen, Leif Madsen, Jared Smith.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúSIP protocol. </font><font style="vertical-align: inherit;">Directory". </font><font style="vertical-align: inherit;">B. S. Goldstein, A. A. Zarubin, V. V. Samorezov.</font></font></li></ul></div><p>Source: <a href="https://habr.com/ru/post/183152/">https://habr.com/ru/post/183152/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../183122/index.html">Lens for iPhone 4 / 4S, 3 in one</a></li>
<li><a href="../183130/index.html">What I learned in 8 months at Microsoft</a></li>
<li><a href="../183144/index.html">Demonstration of WebRTC, WebGL and Go from Google</a></li>
<li><a href="../183146/index.html">Minnowboard - Intel Atom mini-computer</a></li>
<li><a href="../183150/index.html">Functors, applicative functors and monads in pictures</a></li>
<li><a href="../183154/index.html">Infrastructure of fail-safe data center class TIER-III</a></li>
<li><a href="../183158/index.html">IBM promotes Linux in the corporate segment</a></li>
<li><a href="../183164/index.html">My job is to wait for IT disasters</a></li>
<li><a href="../183166/index.html">Acoustic Surveillance Systems</a></li>
<li><a href="../183168/index.html">Cloud computing threats and methods to protect them</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
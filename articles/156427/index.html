<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Giga-photo of the Milky Way in resolution 108199x81503 or another story ‚Äúxyz enough for everyone‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of days ago there was news that Astronomers of the European Southern Observatory made a mosaic of the center of our galaxy (the Milky Way) wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Giga-photo of the Milky Way in resolution 108199x81503 or another story ‚Äúxyz enough for everyone‚Äù</h1><div class="post__text post__text-html js-mediator-article">  A couple of days ago there <a href="http://lenta.ru/news/2012/10/26/esovista/">was news</a> that Astronomers of the European Southern Observatory made a mosaic of the center of our galaxy (the Milky Way) with a resolution of 108199x81503 in the IR range (in IR less scattering of light by interstellar gas and dust - there are much more stars). <br><br>  Unfortunately, they posted the result only in the form of an <a href="http://www.eso.org/public/images/eso1242a/zoomable/">online viewer</a> and a <a href="">.psb file</a> , 24GB in size, which can only be opened by Photoshop, while Photoshop itself refused to export it to any other format except, again, psb, tiff (by itself, there is no File can not exceed 2 / 4GB) and RAW.  And I wanted something from which it would be convenient to cut an interesting piece on the wallpaper ... <br><br>  Looking ahead, immediately show the results: <br><img src="https://habrastorage.org/getpro/habr/post_images/080/1bb/fb3/0801bbfb3a1f9b7676441cdaa2094e05.jpg"><br>  <a href="">1920x1200</a> <a href="">2560x1600</a> <a href="">2880x1800</a> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/2c5/705/61b/2c570561bec23c9e8883529f29591734.jpg"><br>  <a href="">1920x1200</a> <a href="">2560x1600</a> <a href="">2880x1800</a> <br><br>  Full-size images (total 33.4GB): <a href="http://rutracker.org/forum/viewtopic.php%3Ft%3D4230925">rutracker.org</a> <a href="http://thepiratebay.se/torrent/7766280/Milky_way_photos_-_1920x1080_-_108199x81503__-_ESO_VVV_Consortiu">thepiratebay</a> <br>  Both the raw file and several versions of jpegs, from wallpaper and 10% (10820x8150) to the maximum (65500x65500 with the center in the center of the galaxy, 5.8GB, 100% scale, not getting cut off parts) + 65500x65500 compressed up to 170MB for stress tests software <img src="http://habr.habrastorage.org/comment_images/589/4ca/0c9/5894ca0c9e7ef627bfd7178b08017a4b.gif">  . <br><br><h1>  Dramatic details omitted only the facts about JPEG and ImageMagick </h1>  Such large images can be processed only with the x64 version of ImageMagick, and it is highly desirable to use the Q8 version, and not Q16 (with increased internal representation accuracy): Q8 wiped out about 45GB of memory while working, and Q16 - ~ 72GB, which had a very bad effect on speed. <br><br>  JPEG historically can not be larger than 65535x65535, but in many libraries the limit is 65500x65500 (once it really seemed like an unattainable size ...). <br><br>  In order not to save saving to JPEG, you need to disable the optimization of the Huffman-tables (the code rate counters are probably overflowing): -define jpeg: optimize-coding = false <br><br>  We also managed to save a full-size image in a PNG, but nothing at all could open it + the size was 22GB, so I had to stop at JPEG. <br><br><div class="spoiler">  <b class="spoiler_title">The final commands are obtained such</b> <div class="spoiler_text"><pre><code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">convert</span></span> -size <span class="hljs-number"><span class="hljs-number">108199</span></span>x81503 -depth <span class="hljs-number"><span class="hljs-number">8</span></span> RGB:eso1242a.data -scale <span class="hljs-number"><span class="hljs-number">50</span></span>% -quality <span class="hljs-number"><span class="hljs-number">95</span></span> -define jpeg:optimize-coding=false eso1242a.jpg <span class="hljs-built_in"><span class="hljs-built_in">convert</span></span> -size <span class="hljs-number"><span class="hljs-number">108199</span></span>x81503 -depth <span class="hljs-number"><span class="hljs-number">8</span></span> RGB:eso1242a.data -crop "<span class="hljs-number"><span class="hljs-number">65500</span></span>x65500+<span class="hljs-number"><span class="hljs-number">22500</span></span>-<span class="hljs-number"><span class="hljs-number">0</span></span>!" -gravity North -quality <span class="hljs-number"><span class="hljs-number">95</span></span> -define jpeg:optimize-coding=false eso1242a_sq.jpg</code> </pre> <br>  Operating time is about 30 minutes for 1 operation. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">That's when I realized that 32GB of memory is not enough for everyone :-)</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/6d6/f0c/9d0/6d6f0c9d000ba94485f891cd50b3d1bb.png"></div></div><br><h2>  Links &amp; credits </h2><br>  Credit: ESO / VVV Consortium <br>  <a href="http://www.eso.org/public/outreach/copyright.html">Released under the Creative Commons Attribution 3.0 Unported license</a> <br>  Acknowledgment: Ignacio Toledo, Martin Kornmesser <br><br>  <a href="http://www.vista.ac.uk/">www.vista.ac.uk</a> <br>  <a href="http://www.stfc.ac.uk/News%2520and%2520Events/42932.aspx">www.stfc.ac.uk/News%20and%20Events/42932.aspx</a> <br>  <a href="http://www.eso.org/public/images/eso1242a/zoomable/">www.eso.org/public/images/eso1242a/zoomable</a> </div><p>Source: <a href="https://habr.com/ru/post/156427/">https://habr.com/ru/post/156427/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../156415/index.html">Android x86 with ARM emulator on the big screen</a></li>
<li><a href="../156417/index.html">Bulk recording from cameras on elections</a></li>
<li><a href="../156421/index.html">Mozilla gave the cake to Microsoft</a></li>
<li><a href="../156423/index.html">Checked electronic voting</a></li>
<li><a href="../156425/index.html">Comparison of responsive CSS frameworks: Bootstrap, Foundation and Skeleton</a></li>
<li><a href="../156429/index.html">A Practical Guide to Collective Action</a></li>
<li><a href="../156433/index.html">Google Nexus 4 prototype forgotten in bar</a></li>
<li><a href="../156435/index.html">Evo, part 2 - about crossing</a></li>
<li><a href="../156437/index.html">IPhone 5 disassembly and some design differences from previous iPhone models</a></li>
<li><a href="../156441/index.html">Windows Azure PowerShell to work with IaaS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
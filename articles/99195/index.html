<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Checking account balance on the example of MTS on Mac OS X</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You are already faced with checking the balance in Linux ( 1 and 2 ). In order not to stand aside and conform to the mode, we will check the balance o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Checking account balance on the example of MTS on Mac OS X</h1><div class="post__text post__text-html js-mediator-article"> You are already faced with checking the balance in Linux ( <a href="http://habrahabr.ru/blogs/php/98837/">1</a> and <a href="http://habrahabr.ru/blogs/telecom/98846/">2</a> ).  In order not to stand aside and conform to the mode, we will check the balance of the 3G modem under Mac OS. <br><img src="https://habrastorage.org/storage/habraeffect/2e/e9/2ee99a2a995f64d04222c3fb717bbdd6.png" alt="image"><br><a name="habracut"></a><br>  Mac OS X 10.6.4 has Python version 2.6 installed by default, but the COM interface‚Äôs serial module is not included.  Therefore, download the <a href="http://sourceforge.net/projects/pyserial/">Python Serial Port Extension</a> , unpack (double click on the archive in the Finder), install: <br> <code>bash-3.2# cd /Users/memtew/Downloads/pyserial-2.5-rc2 <br> bash-3.2# python setup.py install <br></code> <br>  The script itself for checking the balance and remaining traffic on the example of MTS (I took the script found in this <a href="http://forum.ubuntu.ru/index.php%3Ftopic%3D58408.15">topic</a> as a basis, I modified it a bit to check the remaining traffic): <br><blockquote>  <font color="#808080">#! / usr / bin / env python</font> <br>  <font color="#808080"># - * - coding: utf-8 - * -</font> <br><br>  <font color="#ff7700">import</font> serial <br>  <font color="#ff7700">import</font> <font color="#dc143c">string</font> <br>  <font color="#ff7700">import</font> <font color="#dc143c">os</font> <br><br>  USBPORT = <font color="#483d8b">'/dev/tty.sierra05'</font> <br>  USBSPEED = <font color="#ff4500">9600</font> <br>  MAXSTRINGLENGTH = <font color="#ff4500">300</font> <br>  <font color="#808080">#USSD balance check number</font> <br>  balcode = <font color="#483d8b">'* 100 #'</font> <br>  <font color="#808080">#USSD check number remainder MB</font> <br>  mbcode = <font color="#483d8b">'* 100 * 1 #'</font> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <font color="#ff7700">print</font> <font color="#483d8b">"USSD request in progress ..."</font> <br>  s = serial.  <font>Serial</font> <font>(</font> USBPORT, USBSPEED, timeout = <font color="#ff4500">5</font> <font>)</font> <br><br>  s.  <font>write</font> <font>(</font> <font color="#483d8b">'ATZ <font color="#000099">\ 0</font> 15'</font> <font>)</font> <br>  s.  <font>write</font> <font>(</font> <font color="#483d8b">'AT + CUSD = 1,'</font> + balcode + <font color="#483d8b">', 15 <font color="#000099">\ 0</font> 15'</font> <font>)</font> <br>  balans = <font color="#483d8b">""</font> <br>  <font color="#ff7700">while</font> balans <font>[</font> <font color="#ff4500">0</font> : <font color="#ff4500">6</font> <font>]</font> <font color="#66cc66">!</font>  = <font color="#483d8b">'+ CUSD:'</font> : <br>  balans = s.  <font color="#dc143c">readline</font> <font>(</font> MAXSTRINGLENGTH <font>)</font> <br><br>  s.  <font>write</font> <font>(</font> <font color="#483d8b">'AT + CUSD = 1,'</font> + mbcode + <font color="#483d8b">', 15 <font color="#000099">\ 0</font> 15'</font> <font>)</font> <br>  mb = <font color="#483d8b">""</font> <br>  <font color="#ff7700">while</font> mb <font>[</font> <font color="#ff4500">0</font> : <font color="#ff4500">6</font> <font>]</font> <font color="#66cc66">!</font>  = <font color="#483d8b">'+ CUSD:'</font> : <br>  mb = s.  <font color="#dc143c">readline</font> <font>(</font> MAXSTRINGLENGTH <font>)</font> <br><br>  s.  <font>close</font> <font>(</font> <font>)</font> <br><br>  <font color="#808080"># Select from the response line + CUSD: 0, "Balans: 134.77r", 15 totaling 134.77</font> <br>  balans = balans <font>[</font> <font color="#ff4500">17</font> : - <font color="#ff4500">8</font> <font>]</font> <br>  <font color="#808080"># Select from the response line + CUSD: 0, "Ostatok: 2070Mb.", 15 MB - 2070</font> <br>  mb = mb <font>[</font> <font color="#ff4500">19</font> : - <font color="#ff4500">9</font> <font>]</font> <br><br>  result = <font color="#483d8b">'Account balance:'</font> + balans + <font color="#483d8b">'p, Traffic balance:'</font> + mb + <font color="#483d8b">'mb'</font> <br><br>  <font color="#ff7700">print</font> result </blockquote><br>  Save this code in the file <i>balance.py</i> (UTF-8 encoding).  The code is not very beautiful and concise, but it does its job.  For other operators, the values ‚Äã‚Äãof the balcode and mbcode variables (USSD request numbers) and the line in which we extract the numbers from the USSD response will change: <br><blockquote>  <font color="#808080"># Select from the response line + CUSD: 0, "Balans: 134.77r", 15 totaling 134.77</font> <br>  balans = balans <font>[</font> <font color="#ff4500">17</font> : - <font color="#ff4500">8</font> <font>]</font> <br>  <font color="#808080"># Select from the response line + CUSD: 0, "Ostatok: 2070Mb.", 15 MB - 2070</font> <br>  mb = mb <font>[</font> <font color="#ff4500">19</font> : - <font color="#ff4500">9</font> <font>]</font> </blockquote><br>  How to use the "slices" is very simply explained <a href="">here</a> .  The result of the script is visible on the first screenshot.  My modem does not understand USSD requests in Russian, so you have to translate translit into Russian on your own. <br><br>  The test modem was used by Sierra Wireless, model MC8780.  With the modem drivers, 6 COM ports were installed: <br> <code>/dev/cu.sierra02 <br> /dev/cu.sierra04 <br> /dev/cu.sierra05 <br> /dev/tty.sierra02 <br> /dev/tty.sierra04 <br> /dev/tty.sierra05 <br></code> <br>  We need a port AT commands - cu.sierra05 / tty.sierra05 (any of them).  You can determine which of the six you need by connecting to the port using the command <b>screen / dev/tty.sierra05 115200</b> , then enter ATI5 - as a result, we should see information about our modem. </div><p>Source: <a href="https://habr.com/ru/post/99195/">https://habr.com/ru/post/99195/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../99186/index.html">We are writing a technical book</a></li>
<li><a href="../99188/index.html">RIAA has spent $ 58 million on claims with P2P users</a></li>
<li><a href="../99189/index.html">Process implementation - step by step instructions</a></li>
<li><a href="../99193/index.html">Project idea</a></li>
<li><a href="../99194/index.html">Opera Mobile 10.1 beta for Symbian</a></li>
<li><a href="../99196/index.html">Apple is preparing for "life after Google"</a></li>
<li><a href="../99198/index.html">Browse Active Directory Users with PivotViewer</a></li>
<li><a href="../99199/index.html">How and why the ease of communication will positively affect your profits.</a></li>
<li><a href="../99204/index.html">Does Chrome OS threaten systems like Ubuntu or Windows?</a></li>
<li><a href="../99206/index.html">Firefox Home Button</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
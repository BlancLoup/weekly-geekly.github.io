<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a 1k / 4k intro for Linux, part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Less than six months! As you can, podnapryavshis, remember, last time we stopped at the gloom and promise to dive into the assembler. 
 Well, the boy ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a 1k / 4k intro for Linux, part 2</h1><div class="post__text post__text-html js-mediator-article">  Less than six months!  As you can, podnapryavshis, remember, <a href="http://habrahabr.ru/post/134551/">last time</a> we stopped at the gloom and promise to dive into the assembler. <br>  Well, the boy said - the boy did.  From this lurid pile of letters, you will learn how to initialize the OpenGL context in GNU / Linux into some 450 bytes, freeing up even more space for talent to unfold. <br><br>  Under the cut, you will learn how to draw something like this in one kilobyte: <br><img src="https://habrastorage.org/storage2/49c/76c/ad0/49c76cad0a66a793303b6d06de5ddab0.png"><br><br>  Those interested fasten and press the pedal to the floor, and the eye to the screen. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First, let's talk about this.  Why are we so bad and worthless?  What exactly adds to our weight and pulls down into the depths of degradation? <br>  To answer these questions, we need tools for real men - readelf and objdump. <br><br>  We uncover the first one and set the intro file for the rest from the last time - the same one that remains after processing with the sstrip file: <br><br><pre><code class="hljs sql">$ readelf -a intro ELF Header: Magic: 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 Class: ELF32 Data: 2's complement, little endian Version: 1 (current) OS/ABI: UNIX - System V ABI Version: 0 Type: EXEC (Executable file) Machine: Intel 80386 Version: 0x1 Entry point address: 0x8048250 <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program headers: <span class="hljs-number"><span class="hljs-number">52</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> headers: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>) Flags: <span class="hljs-number"><span class="hljs-number">0x0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Size</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> this header: <span class="hljs-number"><span class="hljs-number">52</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Size</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program headers: <span class="hljs-number"><span class="hljs-number">32</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program headers: <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Size</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> headers: <span class="hljs-number"><span class="hljs-number">40</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> headers: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Section</span></span> header <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> sections <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> sections <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. Program Headers: <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Offset</span></span> VirtAddr PhysAddr FileSiz MemSiz Flg Align PHDR <span class="hljs-number"><span class="hljs-number">0x000034</span></span> <span class="hljs-number"><span class="hljs-number">0x08048034</span></span> <span class="hljs-number"><span class="hljs-number">0x08048034</span></span> <span class="hljs-number"><span class="hljs-number">0x00100</span></span> <span class="hljs-number"><span class="hljs-number">0x00100</span></span> RE <span class="hljs-number"><span class="hljs-number">0x4</span></span> INTERP <span class="hljs-number"><span class="hljs-number">0x000134</span></span> <span class="hljs-number"><span class="hljs-number">0x08048134</span></span> <span class="hljs-number"><span class="hljs-number">0x08048134</span></span> <span class="hljs-number"><span class="hljs-number">0x00015</span></span> <span class="hljs-number"><span class="hljs-number">0x00015</span></span> R <span class="hljs-number"><span class="hljs-number">0x1</span></span> [Requesting program interpreter: /lib32/ld-linux.so<span class="hljs-number"><span class="hljs-number">.2</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">LOAD</span></span> <span class="hljs-number"><span class="hljs-number">0x000000</span></span> <span class="hljs-number"><span class="hljs-number">0x08048000</span></span> <span class="hljs-number"><span class="hljs-number">0x08048000</span></span> <span class="hljs-number"><span class="hljs-number">0x005ac</span></span> <span class="hljs-number"><span class="hljs-number">0x005ac</span></span> RE <span class="hljs-number"><span class="hljs-number">0x1000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LOAD</span></span> <span class="hljs-number"><span class="hljs-number">0x000f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x08049f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x08049f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x000c4</span></span> <span class="hljs-number"><span class="hljs-number">0x00100</span></span> RW <span class="hljs-number"><span class="hljs-number">0x1000</span></span> DYNAMIC <span class="hljs-number"><span class="hljs-number">0x000f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x08049f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x08049f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x000a8</span></span> <span class="hljs-number"><span class="hljs-number">0x000a8</span></span> RW <span class="hljs-number"><span class="hljs-number">0x4</span></span> GNU_STACK <span class="hljs-number"><span class="hljs-number">0x000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> RW <span class="hljs-number"><span class="hljs-number">0x4</span></span> GNU_RELRO <span class="hljs-number"><span class="hljs-number">0x000f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x08049f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x08049f4c</span></span> <span class="hljs-number"><span class="hljs-number">0x000b4</span></span> <span class="hljs-number"><span class="hljs-number">0x000b4</span></span> R <span class="hljs-number"><span class="hljs-number">0x1</span></span> PAX_FLAGS <span class="hljs-number"><span class="hljs-number">0x000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> <span class="hljs-number"><span class="hljs-number">0x4</span></span> Dynamic <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> <span class="hljs-keyword"><span class="hljs-keyword">at</span></span> <span class="hljs-keyword"><span class="hljs-keyword">offset</span></span> <span class="hljs-number"><span class="hljs-number">0xf4c</span></span> contains <span class="hljs-number"><span class="hljs-number">16</span></span> entries: Tag <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">Value</span></span> <span class="hljs-number"><span class="hljs-number">0x00000001</span></span> (NEEDED) <span class="hljs-keyword"><span class="hljs-keyword">Shared</span></span> <span class="hljs-keyword"><span class="hljs-keyword">library</span></span>: [libdl.so<span class="hljs-number"><span class="hljs-number">.2</span></span>] <span class="hljs-number"><span class="hljs-number">0x00000004</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">HASH</span></span>) <span class="hljs-number"><span class="hljs-number">0x804814c</span></span> <span class="hljs-number"><span class="hljs-number">0x6ffffef5</span></span> (GNU_HASH) <span class="hljs-number"><span class="hljs-number">0x8048164</span></span> <span class="hljs-number"><span class="hljs-number">0x00000005</span></span> (STRTAB) <span class="hljs-number"><span class="hljs-number">0x80481ac</span></span> <span class="hljs-number"><span class="hljs-number">0x00000006</span></span> (SYMTAB) <span class="hljs-number"><span class="hljs-number">0x804817c</span></span> <span class="hljs-number"><span class="hljs-number">0x0000000a</span></span> (STRSZ) <span class="hljs-number"><span class="hljs-number">45</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-number"><span class="hljs-number">0x0000000b</span></span> (SYMENT) <span class="hljs-number"><span class="hljs-number">16</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000015</span></span> (DEBUG) <span class="hljs-number"><span class="hljs-number">0x0</span></span> <span class="hljs-number"><span class="hljs-number">0x00000003</span></span> (PLTGOT) <span class="hljs-number"><span class="hljs-number">0x8049ff4</span></span> <span class="hljs-number"><span class="hljs-number">0x00000002</span></span> (PLTRELSZ) <span class="hljs-number"><span class="hljs-number">16</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-number"><span class="hljs-number">0x00000014</span></span> (PLTREL) REL <span class="hljs-number"><span class="hljs-number">0x00000017</span></span> (JMPREL) <span class="hljs-number"><span class="hljs-number">0x8048210</span></span> <span class="hljs-number"><span class="hljs-number">0x6ffffffe</span></span> (VERNEED) <span class="hljs-number"><span class="hljs-number">0x80481e0</span></span> <span class="hljs-number"><span class="hljs-number">0x6fffffff</span></span> (VERNEEDNUM) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0x6ffffff0</span></span> (VERSYM) <span class="hljs-number"><span class="hljs-number">0x80481da</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> (<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-number"><span class="hljs-number">0x0</span></span> There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> relocations <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> unwind sections <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. Histogram <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> bucket <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> <span class="hljs-keyword"><span class="hljs-keyword">length</span></span> (total <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> buckets): <span class="hljs-keyword"><span class="hljs-keyword">Length</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> % <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> total Coverage <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> ( <span class="hljs-number"><span class="hljs-number">0.0</span></span>%) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> ( <span class="hljs-number"><span class="hljs-number">0.0</span></span>%) <span class="hljs-number"><span class="hljs-number">0.0</span></span>% <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-number"><span class="hljs-number">100.0</span></span>%) <span class="hljs-number"><span class="hljs-number">100.0</span></span>% <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> information <span class="hljs-keyword"><span class="hljs-keyword">found</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file.</code> </pre> <br>  (specific figures, sizes and displacements depend on the entire tulchain and the age of your miles, May Varvara) <br>  What do we see here?  At the very beginning, of course, the standard ELF Header, you cannot throw a word out of it.  Next, we see that sstrip has picked all the section headers (exercise: compare the output with readelf -a intro-orig, which is before sstrip), which is good.  But then we see some holiday program headers and the dynamic section (at offset).  Do they really need us so beautiful in a dress? <br><br>  Spoiler: no! * <br>  (* - amendment: yes, but not such) <br><br><h5>  We split up elves </h5><br>  Let's see what is the minimum size you can build the correct executable elf file.  We take as a basis what we have now, but just throw out all our useful intestines. <br><br>  simple.c: <br><pre> <code class="hljs perl">void _start(void) { asm( <span class="hljs-string"><span class="hljs-string">"xor %eax,%eax\n"</span></span> <span class="hljs-string"><span class="hljs-string">"inc %eax\n"</span></span> <span class="hljs-string"><span class="hljs-string">"int $0x80\n"</span></span> ); }</code> </pre><br>  We will collect it (the script is taken from the Past): <br><pre> <code class="hljs swift">cc -<span class="hljs-type"><span class="hljs-type">Wall</span></span> -m32 -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> simple.<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> -<span class="hljs-type"><span class="hljs-type">Os</span></span> -nostartfiles -o simple-co &amp;&amp; \ ld -melf_i386 -<span class="hljs-keyword"><span class="hljs-keyword">dynamic</span></span>-linker /lib32/ld-linux.so.<span class="hljs-number"><span class="hljs-number">2</span></span> simple-co -o simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-orig &amp;&amp; \ cp simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>-orig simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> &amp;&amp; \ sstrip simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> &amp;&amp; \ cat simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> | 7z a dummy -tGZip -mx=<span class="hljs-number"><span class="hljs-number">9</span></span> -si -so &gt; simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.gz &amp;&amp; \ cat unpack_header simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.gz &gt; simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.sh &amp;&amp; \ wc -<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.sh &amp;&amp; chmod +x simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.sh &amp;&amp; \ ./simple-<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.sh</code> </pre><br>  We look at the sizes of the resulting and intermediate files and notice the following: <br><ol><li>  sstrip decides - the size of the stripped simple-c (almost) is three times smaller than the size of simple-c-orig </li><li>  Compression almost does not matter - a compressed decompression file takes almost as much as an uncompressed one </li><li>  (if you add the -s parameter to ld, you can win about a third in the size of the unstitched file, without losing or adding in the amount of the intermediate striped binary, and _play_ 4 bytes in the size of the final compressed) </li></ol><br>  Looking into the future, it can be noted that these comments will be useless a little less than completely, but we are not in the future yet! <br><br>  Now you can set readelf on the binary and see what remains of it, what it has become, what it has become: <br><pre> <code class="hljs sql">$ readelf -a simple-c ELF Header: Magic: 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 Class: ELF32 Data: 2's complement, little endian Version: 1 (current) OS/ABI: UNIX - System V ABI Version: 0 Type: EXEC (Executable file) Machine: Intel 80386 Version: 0x1 Entry point address: 0x8048094 <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program headers: <span class="hljs-number"><span class="hljs-number">52</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> headers: <span class="hljs-number"><span class="hljs-number">0</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span> <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>) Flags: <span class="hljs-number"><span class="hljs-number">0x0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Size</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> this header: <span class="hljs-number"><span class="hljs-number">52</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">Size</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program headers: <span class="hljs-number"><span class="hljs-number">32</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> program headers: <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Size</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> headers: <span class="hljs-number"><span class="hljs-number">40</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bytes</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> headers: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Section</span></span> header <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> sections <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> sections <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. Program Headers: <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Offset</span></span> VirtAddr PhysAddr FileSiz MemSiz Flg Align <span class="hljs-keyword"><span class="hljs-keyword">LOAD</span></span> <span class="hljs-number"><span class="hljs-number">0x000000</span></span> <span class="hljs-number"><span class="hljs-number">0x08048000</span></span> <span class="hljs-number"><span class="hljs-number">0x08048000</span></span> <span class="hljs-number"><span class="hljs-number">0x0009e</span></span> <span class="hljs-number"><span class="hljs-number">0x0009e</span></span> RE <span class="hljs-number"><span class="hljs-number">0x1000</span></span> GNU_STACK <span class="hljs-number"><span class="hljs-number">0x000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> RW <span class="hljs-number"><span class="hljs-number">0x4</span></span> PAX_FLAGS <span class="hljs-number"><span class="hljs-number">0x000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> <span class="hljs-number"><span class="hljs-number">0x00000</span></span> <span class="hljs-number"><span class="hljs-number">0x4</span></span> There <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> dynamic <span class="hljs-keyword"><span class="hljs-keyword">section</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> relocations <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. There <span class="hljs-keyword"><span class="hljs-keyword">are</span></span> <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> unwind sections <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file. <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> information <span class="hljs-keyword"><span class="hljs-keyword">found</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> this file.</code> </pre><br>  So, sstrip seems to be a good fellow, the section of our elf-maiden, removed all these unnecessary section headings.  But at the same time, our lady is not ready yet - she still has a bra (headings GNU_STACK and PAX_FLAGS) and pants that can be found if you pay attention to the fact that the FileSiz header for some reason is smaller than the size of the file itself, which means that it is not cowards at all, but simply rubbish at the end of the file, which must be moaning to derail. <br>  In addition, if you are very picky and decompile (objdump -D, will only work on unstitched file, since objdump reads section headers, not program) that what we have gained here is extremely not to be noticed for the first freshness Socks from a little more than completely harmful prologue and epilogue functions: <br><pre> <code class="hljs perl"><span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebp <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">89</span></span>e5 mov ebp, esp <span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span>c<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> eax, eax <span class="hljs-number"><span class="hljs-number">05</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span> inc eax <span class="hljs-number"><span class="hljs-number">06</span></span> cd8<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> 08 <span class="hljs-number"><span class="hljs-number">5</span></span>d <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> ebp 09 c3 ret</code> </pre><br>  The ratio of 5 bytes of the "useful" code to 5 - the useless cannot warm our young hearts.  And what will warm our young hearts?  Burning pressed remains of dinosaurs and swamps.  In these most compacted swamps and I suggest, together with you, my inquisitive reader, to dive. <br><br><h5>  Making an elf with your finger </h5><br>  As it turns out, it‚Äôs pretty easy to assemble an elf from nothing, you just have to turn off starcraft, open the /usr/include/elf.h file, don‚Äôt understand anything, google elf.pdf, read it diagonally and rip it off from your fingertips following: <br><pre> <code class="hljs ruby">bits <span class="hljs-number"><span class="hljs-number">32</span></span> ;   <span class="hljs-number"><span class="hljs-number">32</span></span>-  org <span class="hljs-number"><span class="hljs-number">0x00040000</span></span> ;        , ,       - $$ ;      ?    . ( ) ;  elf- db <span class="hljs-number"><span class="hljs-number">0x7f</span></span>, <span class="hljs-string"><span class="hljs-string">'ELF'</span></span> ; magic   ,    ,   ELF db <span class="hljs-number"><span class="hljs-number">1</span></span> ; EI_CLASS = ELFCLASS32 db <span class="hljs-number"><span class="hljs-number">1</span></span> ; EI_DATA ELFDATA2LSB db <span class="hljs-number"><span class="hljs-number">1</span></span> ; EI_VERSION = EV_CURRENT times <span class="hljs-number"><span class="hljs-number">9</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-number"><span class="hljs-number">9</span></span>  ,          dw <span class="hljs-number"><span class="hljs-number">2</span></span> ; e_type = ET_EXEC --   dw <span class="hljs-number"><span class="hljs-number">3</span></span> ; e_machine = EM_386 dd <span class="hljs-number"><span class="hljs-number">1</span></span> ; e_version = EV_CURRENT dd _start ; e_entry --   ,       dd phdrs - $$ ; e_phoff --    ,    program headers dd <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shoff -- --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- section headers,   ,  , ,  <span class="hljs-number"><span class="hljs-number">0</span></span> dd <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_flags --      dw ehsize ; e_ehsize --  ELF- (<span class="hljs-number"><span class="hljs-number">52</span></span> ) dw phsize ; e_phentsize --   program header (<span class="hljs-number"><span class="hljs-number">32</span></span> ) dw <span class="hljs-number"><span class="hljs-number">1</span></span> ; e_phnum --   dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shentsize --  section header dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shnum --   () dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shstrndx -- -    ,    ehsize equ ($-$$) ; $       (+ org),   ehsize    elf- <span class="hljs-symbol"><span class="hljs-symbol">phdrs:</span></span> ;  program header dd <span class="hljs-number"><span class="hljs-number">1</span></span> ; p_type = PT_LOAD --   <span class="hljs-string"><span class="hljs-string">"     , "</span></span> dd <span class="hljs-number"><span class="hljs-number">0</span></span> ; p_offset --    ,   dd $$ ; p_vaddr --   ,   dd $$ ; p_paddr --  , - - ,    ,           dd file_size ; p_filesz --   ,      dd file_size ; p_memsz --     .  ,  e_filesz,    .   --      <span class="hljs-number"><span class="hljs-number">6</span></span> . . !!<span class="hljs-number"><span class="hljs-number">11</span></span>   ,  ,     .             . dd <span class="hljs-number"><span class="hljs-number">7</span></span> ; p_flags (=PF_RWX) --     ,   . dd <span class="hljs-number"><span class="hljs-number">0x1000</span></span> ; p_align -- ,    ,     . <span class="hljs-number"><span class="hljs-number">0x1000</span></span>     phsize equ ($-phdrs) ;    program header <span class="hljs-symbol"><span class="hljs-symbol">_start:</span></span> ;  xor eax, eax ; eax = <span class="hljs-number"><span class="hljs-number">0</span></span> inc eax ; eax = <span class="hljs-number"><span class="hljs-number">1</span></span> (exit syscall) int <span class="hljs-number"><span class="hljs-number">0x80</span></span> ;  syscall file_size equ ($-$$) ;       </code> </pre><br>  (Actually, instead of giving this rough, but slegonetsa commented asm file, I wanted you, my darlings are darling, hug, draw a large ELF format scheme, but then I realized that it would postpone the article for another couple years old) <br><br>  You need to compile this file with nasm with a compilation directive into a ‚Äúflat‚Äù binary, without any extra dummy headers: <br><pre> <code class="hljs cpp">$ nasm -f bin simple.<span class="hljs-keyword"><span class="hljs-keyword">asm</span></span> -o simple-<span class="hljs-keyword"><span class="hljs-keyword">asm</span></span></code> </pre><br>  This line will create us a simple-asm file of 89 bytes in size, which will be a complete functional analog of the 206-byte monster that we created earlier.  Not to mention the fact that those 206 bytes are, in fact, 657 bytes of the original uncompressed unstripped madness. <br>  Can <pre> <code class="hljs objectivec">chmod +x simple-<span class="hljs-keyword"><span class="hljs-keyword">asm</span></span></code> </pre>  and see that it is actually valid and even starts.  I can say that 89 bytes is far from the limit, and it is possible to strangle this file about two times - to put an elf header on a single program header, and get not that a super-valid elf, but quite starting and smaller in size, than the elf header itself (the last 6 bytes from it will be automatically finished with zeros, as they should be) <a href="http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html">[1]</a> .  Involuntarily it comes to mind that under Linux there are wonderful files / dev / fb0 and / dev / dsp, which means you can do intros in 128-256-512 bytes of DOS-style.  We, however, will not deal with this here - this is a topic for a separate pile of signs. <br>  And we will do what we figure out how to connect OpenGL here. <br><br><h5>  Demonic linking </h5><br>  As we, probably, vaguely remember from the previous part, to create an OpenGL context, we used the SDL library, which was connected dynamically, as libSDL.so.  Besides it, of course, we also need OpenGL itself, which comes in the form of the library libGL.so. <br>  It is not difficult, as they say, to see that we need to learn how to make our self-made binary able to link dynamically to anything else. <br>  The mechanism of dynamic linking under Linux at a low level is very funny.  When the binary is loaded, the system detects a program header with a PT_INTERP type that indicates the name of the interpreter file.  ‚ÄúYes, you went to hell with this dynamic linking, sort it out yourself, once so smart,‚Äù the system says, and instead of continuing to load our binary, it loads the interpreter and transfers control to it. <br>  The interpreter is already loading the application - it, as if nothing had happened, independently loads the PT_LOAD sections into the process and, most importantly, reads PT_DYNAMIC, which contains a link to the description of everything needed for dynamic linking ‚Äî the names of the necessary libraries, functions, where , and, importantly, how to load them.  The data format referenced by PT_DYNAMIC itself is quite simple: a table of double word pairs d_tag ‚Äã‚Äãand d_val, where d_tag ‚Äã‚Äãis the parameter code and d_val is its value, which for many parameters is an address in the process already loaded into memory (or so about that). <br>  What parameters and values ‚Äã‚Äãneed to be specified?  Let's go back up to the readelf dump of our original file and look at all THAT FOR POKEMON THAT ?!  after the line "Dynamic section at offset ...". <br><br>  Fearfully! <br><br>  Calm yourself with the thought that we will not need a third of them at all.  Excitement, however, does not recede - the remaining fields are still terrible.  However, I will not explain in detail their meaning - partly because I myself don‚Äôt remember (pick it up a long time ago), and I would prefer to forget what I remember. <br>  Therefore, to you, dear reader, I give you a ready-made recipe, neatly sprinkled with a thin layer of comments to your taste.  Use on health. <br><br>  This piece is added to phdrs immediately after calculating phsize: <br><pre> <code class="hljs ruby">dd <span class="hljs-number"><span class="hljs-number">2</span></span> ; p_type = PT_DYNAMIC dd dynamic - $$ ; p_offset dd dynamic ; p_vaddr dd dynamic ; p_paddr dd dynamic_size ; p_filesz dd dynamic_size ; p_memsz dd <span class="hljs-number"><span class="hljs-number">6</span></span> ; p_flags = PF_RW dd <span class="hljs-number"><span class="hljs-number">4</span></span> ; p_align dd <span class="hljs-number"><span class="hljs-number">3</span></span> ; p_type = PT_INTERP dd interp - $$ ; p_offset dd interp ; p_vaddr dd interp ; p_paddr dd interp_size ; p_filesz dd interp_size ; p_memsz dd <span class="hljs-number"><span class="hljs-number">4</span></span> ; p_flags = PF_R dd <span class="hljs-number"><span class="hljs-number">1</span></span> ; p_align ;   PT_DYNAMIC ;     <span class="hljs-symbol"><span class="hljs-symbol">dynamic:</span></span> dd <span class="hljs-number"><span class="hljs-number">1</span></span>, st_libdl_name ; DT_NEEDED --     ,   st_libdl_name (   ) ;  ,    ,       ;dd <span class="hljs-number"><span class="hljs-number">1</span></span>, st_libSDL_name ;dd <span class="hljs-number"><span class="hljs-number">1</span></span>, st_libGL_name dd <span class="hljs-number"><span class="hljs-number">4</span></span>, dt_hash ; DT_HASH --     dd <span class="hljs-number"><span class="hljs-number">5</span></span>, dt_strtab ; DT_STRTAB --    .            dd <span class="hljs-number"><span class="hljs-number">6</span></span>, dt_symtab ; DT_SYMTAB --     dd <span class="hljs-number"><span class="hljs-number">10</span></span>, dt_strtab_size ; DT_STRSZ --    dd <span class="hljs-number"><span class="hljs-number">11</span></span>, dt_symtab_size ; DT_SYMENT --    dd <span class="hljs-number"><span class="hljs-number">17</span></span>, dt_rel ; DT_REL --     dd <span class="hljs-number"><span class="hljs-number">18</span></span>, dt_rel_size; DT_RELSZ --    dd <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span> ; DT_RELENT --       dd <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ; DT_NULL --    DT_DYNAMIC dynamic_size equ $ - dynamic ;   DT_HASH ;     -      ;    ,         ;     <span class="hljs-symbol"><span class="hljs-symbol">dt_hash:</span></span> dd <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;   DT_SYMTAB ;      ,       <span class="hljs-symbol"><span class="hljs-symbol">dt_symtab:</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span> --    (?!) dd <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dw <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ; SHN_UNDEF ; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">'dlopen'</span></span> dd st_dlopen_name, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dw <span class="hljs-number"><span class="hljs-number">0x12</span></span> ; = ELF32_ST_INFO(STB_GLOBAL, STT_FUNC), ..,  ,   --   dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; SHN_UNDEF ,      ,      ; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">'dlsym'</span></span> dd st_dlsym_name, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dw <span class="hljs-number"><span class="hljs-number">0x12</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ; --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- dt_symtab_size equ $ - dt_symtab ;   DT_REL ;  . ,          <span class="hljs-symbol"><span class="hljs-symbol">dt_rel:</span></span> dd rel_dlopen ; ,   dd <span class="hljs-number"><span class="hljs-number">0x0101</span></span> ; ELF32_R_INFO(<span class="hljs-number"><span class="hljs-number">1</span></span>,R_386_32) : dt_symtab[<span class="hljs-number"><span class="hljs-number">1</span></span>] (<span class="hljs-string"><span class="hljs-string">'dlopen'</span></span>),  =    + r_addend(=<span class="hljs-number"><span class="hljs-number">0</span></span>  ) dd rel_dlsym ; --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- dd <span class="hljs-number"><span class="hljs-number">0x0201</span></span> ; ELF32_R_INFO(<span class="hljs-number"><span class="hljs-number">2</span></span>,R_386_32) : dt_symtab[<span class="hljs-number"><span class="hljs-number">2</span></span>] (<span class="hljs-string"><span class="hljs-string">'dlsym'</span></span>), --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- dt_rel_size equ $ - dt_rel ;    -- ,       ;   DT_STRTAB ;  .    ,   PT_DYNAMIC --      <span class="hljs-symbol"><span class="hljs-symbol">dt_strtab:</span></span> st_libdl_name equ $ - dt_strtab ;       db <span class="hljs-string"><span class="hljs-string">'libdl.so.2'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;   -- - st_dlopen_name equ $ - dt_strtab db <span class="hljs-string"><span class="hljs-string">'dlopen'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> st_dlsym_name equ $ - dt_strtab db <span class="hljs-string"><span class="hljs-string">'dlsym'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dt_strtab_size equ $ - dt_strtab ;       <span class="hljs-symbol"><span class="hljs-symbol">interp:</span></span> db <span class="hljs-string"><span class="hljs-string">'/lib/ld-linux.so.2'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> interp_size equ $ - interp</code> </pre><br>  In addition, it is necessary to correct the following: <br><ol><li>  obviously change e_phnum to 3 </li><li>  add to the very end of the file <br><pre> <code class="hljs ruby">; BSS-,      absolute $ <span class="hljs-symbol"><span class="hljs-symbol">bss:</span></span> ;      <span class="hljs-symbol"><span class="hljs-symbol">rel_dlopen:</span></span> resd <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-symbol"><span class="hljs-symbol">rel_dlsym:</span></span> resd <span class="hljs-number"><span class="hljs-number">1</span></span> mem_size equ ($-$$)</code> </pre></li><li>  in the PT_LOAD header p_memsz set to mem_size </li></ol><br><br>  Everything, now our man-made elf can link dynamically.  Check it out. <br>  Since this is no longer just a test, but a potential intra, we will rename the file to intro.asm.  We will collect it: <br><pre> <code class="hljs perl">$ nasm -f bin intro.asm -o intro &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span> intro</code> </pre> <br>  And run through strace to check that he is really trying to read all sorts of things: <br><pre> <code class="hljs vhdl">$ strace ./intro execve(<span class="hljs-string"><span class="hljs-string">"./intro"</span></span>, [<span class="hljs-string"><span class="hljs-string">"./intro"</span></span>], [<span class="hljs-comment"><span class="hljs-comment">/* 67 vars */</span></span>]) = <span class="hljs-number"><span class="hljs-number">0</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">Process</span></span> PID=<span class="hljs-number"><span class="hljs-number">24135</span></span> runs <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-built_in"><span class="hljs-built_in">bit</span></span> mode. ] ... <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-string"><span class="hljs-string">"/lib32/libdl.so.2"</span></span>, O_RDONLY) = <span class="hljs-number"><span class="hljs-number">3</span></span> ...</code> </pre><br>  Now you can look at the file size - 368 uncompressed bytes.  You can independently verify that in the usual way (cc + ld), a similar uncompressed file will immediately swell to 4 kilobytes. <br>  How much will the compressed file weigh? <br><pre> <code class="hljs tex">nasm -f bin intro.asm -o intro &amp;&amp; chmod +x intro &amp;&amp; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>cat intro | 7z a dummy -tGZip -mx=9 -si -so &gt; intro.gz &amp;&amp; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>cat unpack_header intro.gz &gt; intro.sh &amp;&amp; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>wc -c intro.sh &amp;&amp; chmod +x intro.sh &amp;&amp; <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>./intro.sh</code> </pre><br>  254 bytes. <br>  But he is not doing anything. <br><br><h5>  Let him do it! </h5><br>  Now, as soon as we have got the dlopen and dlsym at our disposal, we can finally load some functions from libSDL and libGL and try to tinker with something. <br>  We do not particularly show off and just port to the assembler everything that we did on these lines: <br><pre> <code class="hljs 1c">;    ,     libs_to_dl: st_libSDL_name equ $ - dt_strtab db 'libSDL-1.2.so.0', <span class="hljs-number"><span class="hljs-number">0</span></span> ;  -  ,      db 'SDL_Init', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'SDL_SetVideoMode', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'SDL_PollEvent', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'SDL_GetTicks', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'SDL_ShowCursor', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'SDL_GL_SwapBuffers', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'SDL_Quit', <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> ;    =   st_libGL_name equ $ - dt_strtab db 'libGL.so.1', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glViewport', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glCreateShader', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glShaderSource', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glCompileShader', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glCreateProgram', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glAttachShader', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glLinkProgram', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glUseProgram', <span class="hljs-number"><span class="hljs-number">0</span></span> db 'glRectf', <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;    =   _start: ;  mov ebp, bss ;  ebp     bss --  , ! ; - ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> %define BSSADDR(a) ebp + ((a) - bss) %define F(f) [ebp + ((f) - bss)] ;    mov esi, libs_to_dl+<span class="hljs-number"><span class="hljs-number">1</span></span> ; +<span class="hljs-number"><span class="hljs-number">1</span></span>, .. ld_load ,       <span class="hljs-built_in"><span class="hljs-built_in"></span></span>   lea edi, [BSSADDR(libs_syms)] ; edi =  ,       ld_load: dec esi ;          <span class="hljs-number"><span class="hljs-number">1</span></span>,    ;    dlopen,     push <span class="hljs-number"><span class="hljs-number">1</span></span> ; RTLD_LAZY push esi ;    call F(rel_dlopen) ; eax = dlopen([esi], <span class="hljs-number"><span class="hljs-number">1</span></span>) ;  ,    &lt;s&gt;<span class="hljs-keyword"><span class="hljs-keyword"></span></span>   &lt;/s&gt;     mov ebx, eax ;  ,  dlopen  ,  ebx ;    <span class="hljs-number"><span class="hljs-number">0</span></span> ld_skip_to_zero: lodsb test al, al jnz ld_skip_to_zero ; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   \<span class="hljs-number"><span class="hljs-number">0</span></span>     lodsb test al, al jz ld_second_zero dec esi ;    <span class="hljs-number"><span class="hljs-number">1</span></span>  push esi ;      push ebx ;  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> dlopen     call F(rel_dlsym) ; eax = dlsym([ebx], [esi]) stosd ;  eax (   )  [edi], edi += <span class="hljs-number"><span class="hljs-number">4</span></span> jmp ld_skip_to_zero ;     ld_second_zero: ; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   - ! lodsb test al, al jnz ld_load ;     ! ;  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ! xor eax, eax ; eax = <span class="hljs-number"><span class="hljs-number">0</span></span> inc eax ; ex = <span class="hljs-number"><span class="hljs-number">1</span></span> (exit syscall) int <span class="hljs-number"><span class="hljs-number">0</span></span>x80 ;  syscall file_size equ ($-$$) ;        ; BSS-,      absolute $ bss: ;      libdl_syms: rel_dlopen: resd <span class="hljs-number"><span class="hljs-number">1</span></span> rel_dlsym: resd <span class="hljs-number"><span class="hljs-number">1</span></span> libs_syms: SDL_Init: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_SetVideoMode: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_PollEvent: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_GetTicks: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_ShowCursor: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_GL_SwapBuffers: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_Quit: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glViewport: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glCreateShader: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glShaderSource: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glCompileShader: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glCreateProgram: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glAttachShader: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glLinkProgram: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glUseProgram: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glRectf: resd <span class="hljs-number"><span class="hljs-number">1</span></span> mem_size equ ($-$$)</code> </pre><br>  This piece should be inserted instead of all that we have immediately after _start, including the _start itself. <br>  We compile, we get a file of 455 bytes in size, we start, we check that it does not fall.  If it falls, we try to uncomment the DT_NEEDED lines for libSDL and libGL, and watch what happens, we suffer and stop reading further. <br><br>  If everything is good, you can move on and finally finally initialize OpenGL with shaders.  There is nothing particularly tricky here (except for what is written in the comments), we just repeat in an assembler what we did earlier on this. <br><pre> <code class="hljs perl">; nasm -f bin intro.asm -o intro &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span> intro &amp;&amp; \ ; cat intro | <span class="hljs-number"><span class="hljs-number">7</span></span>z a dummy -tGZip -mx=<span class="hljs-number"><span class="hljs-number">9</span></span> -si -so &gt; intro.gz &amp;&amp; \ ; cat unpack_header intro.gz &gt; intro.sh &amp;&amp; \ ; wc -c intro.sh &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">chmod</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">x</span></span> intro.sh &amp;&amp; \ ; ./intro.sh %define WIDTH <span class="hljs-number"><span class="hljs-number">640</span></span> %define HEIGHT <span class="hljs-number"><span class="hljs-number">360</span></span> %define FULLSCREEN <span class="hljs-number"><span class="hljs-number">0</span></span> ;%define FULLSCREEN <span class="hljs-number"><span class="hljs-number">0x80000000</span></span> bits <span class="hljs-number"><span class="hljs-number">32</span></span> ;   <span class="hljs-number"><span class="hljs-number">32</span></span>-  org <span class="hljs-number"><span class="hljs-number">0x00040000</span></span> ;        , ,       - $$ ;      ?    . ( ) ;  elf- db <span class="hljs-number"><span class="hljs-number">0x7f</span></span>, <span class="hljs-string"><span class="hljs-string">'ELF'</span></span> ; magic   ,    ,   ELF db <span class="hljs-number"><span class="hljs-number">1</span></span> ; EI_CLASS = ELFCLASS32 db <span class="hljs-number"><span class="hljs-number">1</span></span> ; EI_DATA ELFDATA2LSB db <span class="hljs-number"><span class="hljs-number">1</span></span> ; EI_VERSION = EV_CURRENT <span class="hljs-keyword"><span class="hljs-keyword">times</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> ; <span class="hljs-number"><span class="hljs-number">9</span></span>  ,          dw <span class="hljs-number"><span class="hljs-number">2</span></span> ; e_type = ET_EXEC --   dw <span class="hljs-number"><span class="hljs-number">3</span></span> ; e_machine = EM_386 dd <span class="hljs-number"><span class="hljs-number">1</span></span> ; e_version = EV_CURRENT dd _start ; e_entry --   ,       dd phdrs - $$ ; e_phoff --    ,    program headers dd <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shoff -- --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- section headers,   ,  , ,  <span class="hljs-number"><span class="hljs-number">0</span></span> dd <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_flags --      dw ehsize ; e_ehsize --  ELF- (<span class="hljs-number"><span class="hljs-number">52</span></span> ) dw phsize ; e_phentsize --   program header (<span class="hljs-number"><span class="hljs-number">32</span></span> ) dw <span class="hljs-number"><span class="hljs-number">3</span></span> ; e_phnum --   dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shentsize --  section header dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shnum --   () dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; e_shstrndx -- -    ,    ehsize equ ($-$$) ; $       (+ org),   ehsize    elf- phdrs: ;  program header dd <span class="hljs-number"><span class="hljs-number">1</span></span> ; p_type = PT_LOAD --   <span class="hljs-string"><span class="hljs-string">"     , "</span></span> dd <span class="hljs-number"><span class="hljs-number">0</span></span> ; p_offset --    ,   dd $$ ; p_vaddr --   ,   dd $$ ; p_paddr --  , - - ,    ,           dd file_size ; p_filesz --   ,      dd mem_size ; p_memsz --     .  ,  e_filesz,    .   --      <span class="hljs-number"><span class="hljs-number">6</span></span> . . !!<span class="hljs-number"><span class="hljs-number">11</span></span>   ,  ,     .             . dd <span class="hljs-number"><span class="hljs-number">7</span></span> ; p_flags (=PF_RWX) --     ,   . dd <span class="hljs-number"><span class="hljs-number">0x1000</span></span> ; p_align -- ,    ,     . <span class="hljs-number"><span class="hljs-number">0x1000</span></span>     phsize equ ($-phdrs) ;    program header dd <span class="hljs-number"><span class="hljs-number">2</span></span> ; p_type = PT_DYNAMIC dd dynamic - $$ ; p_offset dd dynamic ; p_vaddr dd dynamic ; p_paddr dd dynamic_size ; p_filesz dd dynamic_size ; p_memsz dd <span class="hljs-number"><span class="hljs-number">6</span></span> ; p_flags = PF_RW dd <span class="hljs-number"><span class="hljs-number">4</span></span> ; p_align dd <span class="hljs-number"><span class="hljs-number">3</span></span> ; p_type = PT_INTERP dd interp - $$ ; p_offset dd interp ; p_vaddr dd interp ; p_paddr dd interp_size ; p_filesz dd interp_size ; p_memsz dd <span class="hljs-number"><span class="hljs-number">4</span></span> ; p_flags = PF_R dd <span class="hljs-number"><span class="hljs-number">1</span></span> ; p_align ;   PT_DYNAMIC ;     dynamic: dd <span class="hljs-number"><span class="hljs-number">1</span></span>, st_libdl_name ; DT_NEEDED --     ,   st_libdl_name (   ) ;  ,    ,       ;dd <span class="hljs-number"><span class="hljs-number">1</span></span>, st_libSDL_name ;dd <span class="hljs-number"><span class="hljs-number">1</span></span>, st_libGL_name dd <span class="hljs-number"><span class="hljs-number">4</span></span>, dt_hash ; DT_HASH --     dd <span class="hljs-number"><span class="hljs-number">5</span></span>, dt_strtab ; DT_STRTAB --    .            dd <span class="hljs-number"><span class="hljs-number">6</span></span>, dt_symtab ; DT_SYMTAB --     dd <span class="hljs-number"><span class="hljs-number">10</span></span>, dt_strtab_size ; DT_STRSZ --    dd <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span> ; DT_SYMENT --       dd <span class="hljs-number"><span class="hljs-number">17</span></span>, dt_rel ; DT_REL --     dd <span class="hljs-number"><span class="hljs-number">18</span></span>, dt_rel_size; DT_RELSZ --    dd <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span> ; DT_RELENT --       dd <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ; DT_NULL --    DT_DYNAMIC dynamic_size equ $ - dynamic ;   DT_HASH ;     -      ;    ,         ;     dt_hash: dd <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;   DT_SYMTAB ;      ,       dt_symtab: ; <span class="hljs-number"><span class="hljs-number">1</span></span> --    (?!) dd <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dw <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ; SHN_UNDEF ; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">'dlopen'</span></span> dd st_dlopen_name, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dw <span class="hljs-number"><span class="hljs-number">0x12</span></span> ; = ELF32_ST_INFO(STB_GLOBAL, STT_FUNC), ..,  ,   --   dw <span class="hljs-number"><span class="hljs-number">0</span></span> ; SHN_UNDEF ,      ,      ; <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">'dlsym'</span></span> dd st_dlsym_name, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dw <span class="hljs-number"><span class="hljs-number">0x12</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ; --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- ;   DT_REL ;  . ,          dt_rel: dd rel_dlopen ; ,   dd <span class="hljs-number"><span class="hljs-number">0x0101</span></span> ; ELF32_R_INFO(<span class="hljs-number"><span class="hljs-number">1</span></span>,R_386_32) : dt_symtab[<span class="hljs-number"><span class="hljs-number">1</span></span>] (<span class="hljs-string"><span class="hljs-string">'dlopen'</span></span>),  =    + r_addend(=<span class="hljs-number"><span class="hljs-number">0</span></span>  ) dd rel_dlsym ; --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- dd <span class="hljs-number"><span class="hljs-number">0x0201</span></span> ; ELF32_R_INFO(<span class="hljs-number"><span class="hljs-number">2</span></span>,R_386_32) : dt_symtab[<span class="hljs-number"><span class="hljs-number">2</span></span>] (<span class="hljs-string"><span class="hljs-string">'dlsym'</span></span>), --<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>-- dt_rel_size equ $ - dt_rel ;    -- ,       ;       interp: db <span class="hljs-string"><span class="hljs-string">'/lib/ld-linux.so.2'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> interp_size equ $ - interp ;   DT_STRTAB ;  .    ,   PT_DYNAMIC --      dt_strtab: st_libdl_name equ $ - dt_strtab ;       db <span class="hljs-string"><span class="hljs-string">'libdl.so.2'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;   -- - st_dlopen_name equ $ - dt_strtab db <span class="hljs-string"><span class="hljs-string">'dlopen'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> st_dlsym_name equ $ - dt_strtab db <span class="hljs-string"><span class="hljs-string">'dlsym'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> dt_strtab_size equ $ - dt_strtab ;    ,     libs_to_dl: st_libSDL_name equ $ - dt_strtab db <span class="hljs-string"><span class="hljs-string">'libSDL-1.2.so.0'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;  -  ,      db <span class="hljs-string"><span class="hljs-string">'SDL_Init'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'SDL_SetVideoMode'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'SDL_PollEvent'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'SDL_GetTicks'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'SDL_ShowCursor'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'SDL_GL_SwapBuffers'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'SDL_Quit'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> ;    =   st_libGL_name equ $ - dt_strtab db <span class="hljs-string"><span class="hljs-string">'libGL.so.1'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glViewport'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glCreateShader'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glShaderSource'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glCompileShader'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glCreateProgram'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glAttachShader'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glLinkProgram'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glUseProgram'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-string"><span class="hljs-string">'glRectf'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ;    =   shader_vtx: db <span class="hljs-string"><span class="hljs-string">'varying vec4 p;'</span></span> db <span class="hljs-string"><span class="hljs-string">'void main(){gl_Position=p=gl_Vertex;pz=length(p.xy);}'</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> shader_frg: db <span class="hljs-string"><span class="hljs-string">'varying vec4 p;'</span></span> db <span class="hljs-string"><span class="hljs-string">'void main(){'</span></span> db <span class="hljs-string"><span class="hljs-string">'float '</span></span> db <span class="hljs-string"><span class="hljs-string">'z=1./length(p.xy),'</span></span> db <span class="hljs-string"><span class="hljs-string">'a=atan(px,py)+sin(p.z+z);'</span></span> db <span class="hljs-string"><span class="hljs-string">'gl_FragColor='</span></span> db <span class="hljs-string"><span class="hljs-string">'2.*abs(.2*sin(pz*3.+z*3.)+sin(p.z+a*4.)*p.xyxx*sin(vec4(z,a,a,a)))+(z-1.)*.1;'</span></span> db <span class="hljs-string"><span class="hljs-string">'}'</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> _start: ;  mov ebp, bss ;  ebp     bss --  , ! ; - ,   %define BSSADDR(a) ebp + ((a) - bss) %define F(f) [ebp + ((f) - bss)] ;    mov esi, libs_to_dl+<span class="hljs-number"><span class="hljs-number">1</span></span> ; +<span class="hljs-number"><span class="hljs-number">1</span></span>, .. ld_load ,          lea edi, [BSSADDR(libs_syms)] ; edi =  ,       ld_load: dec esi ;          <span class="hljs-number"><span class="hljs-number">1</span></span>,    ;    dlopen,     <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ; RTLD_LAZY <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> esi ;    call F(rel_dlopen) ; eax = dlopen([esi], <span class="hljs-number"><span class="hljs-number">1</span></span>) ;  ,    &lt;<span class="hljs-keyword"><span class="hljs-keyword">s</span></span>&gt;   &lt;<span class="hljs-regexp"><span class="hljs-regexp">/s&gt;     mov ebx, eax ;  ,  dlopen  ,  ebx ;    0 ld_skip_to_zero: lodsb test al, al jnz ld_skip_to_zero ;    \0     lodsb test al, al jz ld_second_zero dec esi ;    1  push esi ;      push ebx ;   dlopen     call F(rel_dlsym) ; eax = dlsym([ebx], [esi]) stosd ;  eax (   )  [edi], edi += 4 jmp ld_skip_to_zero ;     ld_second_zero: ;    ,   - ! lodsb test al, al jnz ld_load ;    ! push 0x21 ; SDL_INIT_ TIMER | VIDEO call F(SDL_Init) ; SDL_Init(SDL_INIT_TIMER | SDL_INIT_VIDEO); push 2 | FULLSCREEN ; SDL_OPENGL push 32 ; 32    push HEIGHT push WIDTH call F(SDL_SetVideoMode) ; SDL_SetVideoMode(WIDTH, HEIGHT, 32, SDL_OPENGL|FULLSCREEN); ; WxH    ! cdecl ftw! push 0 push 0 call F(glViewport) ; glViewport(0, 0, WIDTH, HEIGHT); call F(SDL_ShowCursor) ; SDL_ShowCursor(0); ;   call F(glCreateProgram) ; eax = glCreateProgram(); mov edi, eax ; edi = program_id push 0x8b31 pop esi ; esi = GL_VERTEX_SHADER ;     4    ebp  temp  --       dlopen,   mov dword [ebp], shader_vtx push esi call F(glCreateShader) ; eax = glCreateShader(GL_VERTEX_SHADER); mov ebx, eax push 0 push ebp push 1 push eax call F(glShaderSource) ; glShaderSource(shader_id, 1, &amp;shader_vtx, 0); push ebx ;  nVidia  ,     call F(glCompileShader) ; glCompileShader(shader_id); push ebx ;     ! push edi call F(glAttachShader) ; glAttachShader(program_id, shader_id); dec esi ; esi = GL_FRAGMENT_SHADER mov dword [ebp], shader_frg ;   ,   =  ! push esi call F(glCreateShader) mov ebx, eax push 0 push ebp push 1 push eax call F(glShaderSource) push ebx call F(glCompileShader) push ebx push edi call F(glAttachShader) push edi call F(glLinkProgram) ; glLinkProgram(program_id); call F(glUseProgram) ; glUseProgram(program_id); mainloop: call F(SDL_GetTicks) ; eax == SDL_GetTicks(); --    mov [ebp], eax fninit ;    FPU,        fild dword [ebp] ; st(0) = eax == time  , st(1) = 1000 push 400 ;    ,   ,    fild dword [esp] ; st(0) = 1000 fdiv ; st(0) /</span></span>= <span class="hljs-number"><span class="hljs-number">1000</span></span> =    fld1 ; st(<span class="hljs-number"><span class="hljs-number">0</span></span>) = <span class="hljs-number"><span class="hljs-number">1</span></span>, st(<span class="hljs-number"><span class="hljs-number">1</span></span>) =    faddp st1 ; st(<span class="hljs-number"><span class="hljs-number">0</span></span>) =    + <span class="hljs-number"><span class="hljs-number">1</span></span> fst dword [ebp] mov eax, [ebp] ; eax = (float-ieee)t   fchs ; st(<span class="hljs-number"><span class="hljs-number">0</span></span>) = -st(<span class="hljs-number"><span class="hljs-number">0</span></span>) fstp dword [ebp] mov ebx, [ebp] ; ebx = -(float-ieee)t   <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ebx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> eax call F(glRectf) ; glRectf(-t,-t,t,t) <span class="hljs-keyword"><span class="hljs-keyword">times</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> eax ; ,  ,    , ..          call F(SDL_GL_SwapBuffers) lea edx, [BSSADDR(SDL_Event)] ;     SDL_Event <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> edx call F(SDL_PollEvent) ; SDL_PollEvent(&amp;SDL_Event); <span class="hljs-keyword"><span class="hljs-keyword">pop</span></span> edx ;  edx cmp byte [edx], <span class="hljs-number"><span class="hljs-number">2</span></span> ; SDL_Event.type != SDL_KEYDOWN jnz mainloop call F(SDL_Quit) ;      ;   ! <span class="hljs-keyword"><span class="hljs-keyword">xor</span></span> eax, eax ; eax = <span class="hljs-number"><span class="hljs-number">0</span></span> inc eax ; ex = <span class="hljs-number"><span class="hljs-number">1</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">syscall</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">0x80</span></span> ;  <span class="hljs-keyword"><span class="hljs-keyword">syscall</span></span> file_size equ ($-$$) ;        ; BSS-,      absolute $ bss: ;      libdl_syms: rel_dlopen: resd <span class="hljs-number"><span class="hljs-number">1</span></span> rel_dlsym: resd <span class="hljs-number"><span class="hljs-number">1</span></span> libs_syms: SDL_Init: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_SetVideoMode: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_PollEvent: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_GetTicks: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_ShowCursor: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_GL_SwapBuffers: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_Quit: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glViewport: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glCreateShader: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glShaderSource: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glCompileShader: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glCreateProgram: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glAttachShader: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glLinkProgram: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glUseProgram: resd <span class="hljs-number"><span class="hljs-number">1</span></span> glRectf: resd <span class="hljs-number"><span class="hljs-number">1</span></span> SDL_Event: resb <span class="hljs-number"><span class="hljs-number">24</span></span> mem_size equ ($-$$)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Look, kittens, we laid in 750 bytes what last time barely climbed in 1024. Is it possible to improve this result? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sure you may:</font></font><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> many structures begin on the same thing as other structures </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> it is useful to place similar data side by side (loose headings together, strings - together, x86 instructions - not to interleave in any way) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> change org </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> throw out the traversal - for example, comment out everything with SDL_ShowCursor </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It should be remembered that the size of a compressed file is far from monotonous depending on the size of uncompressed: for example, times 5 pop eax noticeably wins in size before add esp, 20. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thus, moving all the lines to the end of the file gives a gain of 16 bytes; , if you comment out the last unnecessary three fields of the elf header (e_shentsize and the next two geese), delete zeroes and other similar data between phdrs and dynamic, dt_hash and dt_symtab. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Total: 718 bytes for the same. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I do not know about you, but my hands are already itching - finally, you can do what we all have gathered here today - with creativity! And we have as many as 306 bytes for it (even more, considering the fact that it is possible to completely replace the shaders with the nastily tunnel)!</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What can be done with such an unimaginably huge canvas? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, something like that</font></font><br><br><img src="https://habrastorage.org/storage2/754/a1d/ef9/754a1def902e9d60cbd631184106d883.jpg"><br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/m2TOK8dAotI%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhhgoBv3m8o93FtK1bda4w2EskQ_vg" frameborder="0" allowfullscreen=""></iframe><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (carefully, you need a powerful video card): </font></font><br><pre> <code class="hljs rust">shader_vtx: db <span class="hljs-symbol"><span class="hljs-symbol">'varying</span></span> vec4 p,v;' db <span class="hljs-symbol"><span class="hljs-symbol">'void</span></span> main()' db <span class="hljs-string"><span class="hljs-string">'{'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'gl_Position</span></span>=gl_Vertex;' db <span class="hljs-symbol"><span class="hljs-symbol">'p</span></span>=vec4(mat3(cos(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,<span class="hljs-number"><span class="hljs-number">1</span></span>.,<span class="hljs-number"><span class="hljs-number">0</span></span>.,-sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,cos(length(gl_Vertex.xy)))*vec3(gl_Vertex.xy*.<span class="hljs-number"><span class="hljs-number">1</span></span>,-.<span class="hljs-number"><span class="hljs-number">9</span></span>),length(gl_Vertex.xy));' db <span class="hljs-symbol"><span class="hljs-symbol">'v</span></span>=vec4(mat3(cos(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,<span class="hljs-number"><span class="hljs-number">1</span></span>.,<span class="hljs-number"><span class="hljs-number">0</span></span>.,-sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,cos(length(gl_Vertex.xy)))*vec3(gl_Vertex.xy*.<span class="hljs-number"><span class="hljs-number">1</span></span>,.<span class="hljs-number"><span class="hljs-number">1</span></span>),length(gl_Vertex.xy));' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> shader_frg: db <span class="hljs-symbol"><span class="hljs-symbol">'varying</span></span> vec4 p,v;' ;db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> mx(vec3 a){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> max(ax,max(ay,az));}' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> mn(vec3 a){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min(ax,min(ay,az));}' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> F(vec3 a){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min(mn(vec3(<span class="hljs-number"><span class="hljs-number">1</span></span>.)-abs(a)),-mn(abs(<span class="hljs-keyword"><span class="hljs-keyword">mod</span></span>(a+vec3(.<span class="hljs-number"><span class="hljs-number">1</span></span>),vec3(.<span class="hljs-number"><span class="hljs-number">4</span></span>))-vec3(.<span class="hljs-number"><span class="hljs-number">2</span></span>))-.<span class="hljs-number"><span class="hljs-number">15</span></span>));}' ;db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> F(vec3 a){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min(mn(vec3(<span class="hljs-number"><span class="hljs-number">1</span></span>.)-abs(a)),length(<span class="hljs-keyword"><span class="hljs-keyword">mod</span></span>(a,vec3(.<span class="hljs-number"><span class="hljs-number">4</span></span>))-vec3(.<span class="hljs-number"><span class="hljs-number">2</span></span>))-.<span class="hljs-number"><span class="hljs-number">06</span></span>);}' db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> n(vec3 a){' db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> e=vec3(.<span class="hljs-number"><span class="hljs-number">0001</span></span>,.<span class="hljs-number"><span class="hljs-number">0</span></span>,.<span class="hljs-number"><span class="hljs-number">0</span></span>);' db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> normalize(vec3(F(a)-F(a+e.xyy),F(a)-F(a+e.yxy),F(a)-F(a+e.yyx)));' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'vec4</span></span> tr(vec3 E,vec3 D){' db <span class="hljs-symbol"><span class="hljs-symbol">'D</span></span>=normalize(D);' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> L=.<span class="hljs-number"><span class="hljs-number">01</span></span>;' db <span class="hljs-symbol"><span class="hljs-symbol">'int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;' db <span class="hljs-symbol"><span class="hljs-symbol">'for</span></span>(i;i&lt;<span class="hljs-number"><span class="hljs-number">512</span></span>;++i){' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> d=F(E+D*L);' db <span class="hljs-symbol"><span class="hljs-symbol">'if</span></span>(d&lt;.<span class="hljs-number"><span class="hljs-number">0001</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;' db <span class="hljs-symbol"><span class="hljs-symbol">'L</span></span>+=d;' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> ;db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> vec2(L,float(i)/<span class="hljs-number"><span class="hljs-number">512</span></span>.);' db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> vec4(E+D*L,float(i)/<span class="hljs-number"><span class="hljs-number">512</span></span>.);' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> I(vec3 a){' db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> l=vec3(sin(pw*<span class="hljs-number"><span class="hljs-number">1.3</span></span>),cos(pw*<span class="hljs-number"><span class="hljs-number">4.2</span></span>),sin(pw*<span class="hljs-number"><span class="hljs-number">3.2</span></span>))*.<span class="hljs-number"><span class="hljs-number">9</span></span>,la=la;' db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> length(tr(a,la).xyz-a)*dot(n(a),-normalize(la))/dot(la,la)+.<span class="hljs-number"><span class="hljs-number">01</span></span>;' ;db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> tr(a,-lv).x*F(a+lv)/dot(lv,lv)+.<span class="hljs-number"><span class="hljs-number">01</span></span>;' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'void</span></span> main(){' db <span class="hljs-symbol"><span class="hljs-symbol">'vec4</span></span> t=tr(p.xyz,v.xyz);' db <span class="hljs-symbol"><span class="hljs-symbol">'gl_FragColor</span></span>=I(t.xyz)*(abs(t)+vec4(tw*<span class="hljs-number"><span class="hljs-number">5</span></span>.));' ;db <span class="hljs-symbol"><span class="hljs-symbol">'vec2</span></span> t=tr(p.xyz,v.xyz);' ;db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> q=p.xyz+normalize(v.xyz)*tx;' ;db <span class="hljs-symbol"><span class="hljs-symbol">'gl_FragColor</span></span>=I(q)+vec4(ty);' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Or this: </font></font><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/wbr3UMAGXQ0%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhiRWGrDN8jIVEf5O_Q7Ca79bEv7Aw" frameborder="0" allowfullscreen=""></iframe><br><br><pre> <code class="hljs rust">shader_vtx: db <span class="hljs-symbol"><span class="hljs-symbol">'varying</span></span> vec4 p,v;' db <span class="hljs-symbol"><span class="hljs-symbol">'void</span></span> main()' db <span class="hljs-string"><span class="hljs-string">'{'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'gl_Position</span></span>=gl_Vertex;' db <span class="hljs-symbol"><span class="hljs-symbol">'p</span></span>=vec4(mat3(cos(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,<span class="hljs-number"><span class="hljs-number">1</span></span>.,<span class="hljs-number"><span class="hljs-number">0</span></span>.,-sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,cos(length(gl_Vertex.xy)))*vec3(gl_Vertex.xy*.<span class="hljs-number"><span class="hljs-number">1</span></span>,-.<span class="hljs-number"><span class="hljs-number">9</span></span>),length(gl_Vertex.xy));' db <span class="hljs-symbol"><span class="hljs-symbol">'v</span></span>=vec4(mat3(cos(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,<span class="hljs-number"><span class="hljs-number">1</span></span>.,<span class="hljs-number"><span class="hljs-number">0</span></span>.,-sin(length(gl_Vertex.xy)),<span class="hljs-number"><span class="hljs-number">0</span></span>.,cos(length(gl_Vertex.xy)))*vec3(gl_Vertex.xy*.<span class="hljs-number"><span class="hljs-number">1</span></span>,.<span class="hljs-number"><span class="hljs-number">1</span></span>),length(gl_Vertex.xy));' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span> shader_frg: db <span class="hljs-symbol"><span class="hljs-symbol">'varying</span></span> vec4 p,v;' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> mn(vec3 a){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min(ax,min(ay,az));}' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> F(vec3 a){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> min(mn(vec3(<span class="hljs-number"><span class="hljs-number">1</span></span>.)-abs(a)),length(<span class="hljs-keyword"><span class="hljs-keyword">mod</span></span>(a,vec3(.<span class="hljs-number"><span class="hljs-number">4</span></span>))-vec3(.<span class="hljs-number"><span class="hljs-number">2</span></span>))-.<span class="hljs-number"><span class="hljs-number">06</span></span>);}' db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> n(vec3 a){' db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> e=vec3(.<span class="hljs-number"><span class="hljs-number">0001</span></span>,.<span class="hljs-number"><span class="hljs-number">0</span></span>,.<span class="hljs-number"><span class="hljs-number">0</span></span>);' db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> normalize(vec3(F(a)-F(a+e.xyy),F(a)-F(a+e.yxy),F(a)-F(a+e.yyx)));' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> tr(vec3 E,vec3 D){' db <span class="hljs-symbol"><span class="hljs-symbol">'D</span></span>=normalize(D);' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> L=.<span class="hljs-number"><span class="hljs-number">01</span></span>;' db <span class="hljs-symbol"><span class="hljs-symbol">'int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;' db <span class="hljs-symbol"><span class="hljs-symbol">'for</span></span>(i;i&lt;<span class="hljs-number"><span class="hljs-number">512</span></span>;++i){' db <span class="hljs-symbol"><span class="hljs-symbol">'float</span></span> d=F(E+D*L);' db <span class="hljs-symbol"><span class="hljs-symbol">'if</span></span>(d&lt;.<span class="hljs-number"><span class="hljs-number">001</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;' db <span class="hljs-symbol"><span class="hljs-symbol">'L</span></span>+=d;' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> E+D*L;' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> I(vec3 a,vec3 l,vec3 c){' db <span class="hljs-symbol"><span class="hljs-symbol">'return</span></span> c*(clamp(length(tr(a,la)-a),<span class="hljs-number"><span class="hljs-number">0</span></span>.,length(la))*dot(n(a),normalize(al))/dot(la,la));' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-symbol"><span class="hljs-symbol">'void</span></span> main(){' db <span class="hljs-symbol"><span class="hljs-symbol">'vec3</span></span> t=tr(p.xyz,v.xyz);' db <span class="hljs-symbol"><span class="hljs-symbol">'gl_FragColor</span></span>=vec4(' db <span class="hljs-symbol"><span class="hljs-symbol">'I</span></span>(t,vec3(sin(pw*<span class="hljs-number"><span class="hljs-number">1.3</span></span>),cos(pw*<span class="hljs-number"><span class="hljs-number">4.2</span></span>),sin(pw*<span class="hljs-number"><span class="hljs-number">3.2</span></span>))*.<span class="hljs-number"><span class="hljs-number">7</span></span>,vec3(.<span class="hljs-number"><span class="hljs-number">9</span></span>,.<span class="hljs-number"><span class="hljs-number">6</span></span>,.<span class="hljs-number"><span class="hljs-number">2</span></span>))+' db <span class="hljs-symbol"><span class="hljs-symbol">'I</span></span>(t,vec3(sin(pw*<span class="hljs-number"><span class="hljs-number">3.2</span></span>),sin(pw*<span class="hljs-number"><span class="hljs-number">4.2</span></span>),sin(pw*<span class="hljs-number"><span class="hljs-number">1.3</span></span>))*.<span class="hljs-number"><span class="hljs-number">7</span></span>,vec3(.<span class="hljs-number"><span class="hljs-number">0</span></span>,.<span class="hljs-number"><span class="hljs-number">3</span></span>,.<span class="hljs-number"><span class="hljs-number">5</span></span>)),<span class="hljs-number"><span class="hljs-number">1</span></span>.);' db <span class="hljs-string"><span class="hljs-string">'}'</span></span> db <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why do these shaders give such a picture? </font><font style="vertical-align: inherit;">Following this good tradition of posting frequency, I will tell you about it in March next year! </font><font style="vertical-align: inherit;">Keywords for impatient and independent: raymarching distance fields ( </font></font><a href="http://www.iquilezles.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this guy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> has a lot of information </font><font style="vertical-align: inherit;">).</font></font><br><br><h5>  Epilogue </h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despite the fact that this text is full of mistakes, non-optimalities and just blatant lies (count how many times I have abused trust), I hope that it turned out to be useful, and that at least someone now will not make another startup, but instead will create something truly complex, interesting and worthwhile. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despite the fact that with such pictures we should no longer be ashamed in front of classmates, and in general we should already hear the growing roar of heels and other squeals of female fans, there is still much to develop, and this is not the end, where it is going, this is not the end ! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The next time you are waiting for the story of how in the programming language "C" to get the swinging bass out of nothing and blow up the dance floor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">See you in October!</font></font></div><p>Source: <a href="https://habr.com/ru/post/143766/">https://habr.com/ru/post/143766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143761/index.html">Working with multiple databases in Ruby on Rails 3</a></li>
<li><a href="../143762/index.html">Details of the kitchen development Diablo II (from 2000)</a></li>
<li><a href="../143763/index.html">Interactive Universe Scale</a></li>
<li><a href="../143764/index.html">Ponobalize: Meat grinder</a></li>
<li><a href="../143765/index.html">Customize your google</a></li>
<li><a href="../143767/index.html">The whole truth about Chrome (and not only) Web Inspector. Part 1</a></li>
<li><a href="../143768/index.html">Networks for the smallest. Part Four STP</a></li>
<li><a href="../143769/index.html">Droider Show # 40. Ay yes box! Apple iTV</a></li>
<li><a href="../143770/index.html">This is what Android development looks like.</a></li>
<li><a href="../143771/index.html">HTC One S - powerful thin-case stuffing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smooth text scaling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Scaling text is not as trivial a task as it may seem at first glance. With a simple change in the font size, we cannot get a smooth and proportional c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smooth text scaling</h1><div class="post__text post__text-html js-mediator-article">  Scaling text is not as trivial a task as it may seem at first glance.  With a simple change in the font size, we cannot get a smooth and proportional change in the width of the text.  Changes occur "abruptly", which greatly hinders the development of various editors, graphs, diagrams, wherever scaling is used. <br><br><img src="https://habrastorage.org/webt/lv/ki/jf/lvkijfmxc-ayx14cz7-dy2djwek.png" alt="image"><br><a name="habracut"></a><br>  As an example.  Developed a stamp editor.  Due to the specifics of the subject area, work is being done with ‚Äúmicroscopic‚Äù fonts, the size of which is both fractional and extremely small.  Without scale is not enough.  However, if at the maximum scale they put all the texts as they should, made the alignment, and everything is beautiful, then when returning to the ‚Äúnormal‚Äù scale, all the formatting can ‚Äúfly‚Äù. <br><br><img src="https://habrastorage.org/webt/li/ix/sj/liixsjptssdvl8oelerlwl1gusq.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With a large scale, the logo on the right looks good.  In the process of decreasing the scale, the situation appears from time to time, as shown in the figure on the left - the inscriptions ‚Äúcrawl away‚Äù. <br><br><img src="https://habrastorage.org/webt/6p/34/83/6p3483ffm-o50gb7cnh6zvrxh6s.png" alt="image"><br><br>  The inscription consists of two parts.  On the left, we see something like a merged text that looks like a single whole.  But when reducing the scale between the inscriptions, a gap appears noticeably. <br>  The scale function in such projects is an extremely important thing.  And what was done with a large scale, should look also at any scale.  No "small" shifts and errors are unacceptable. <br><br><h2>  Test application </h2><br>  To test the scale methods, we will make a small application.  The source is presented in the archive. <br><br><img src="https://habrastorage.org/webt/t2/mi/yd/t2miydwjfza1lkotfyuh40nmjwc.png" alt="image"><br><br><ul><li>  Top panel with controls.  Including a slider with a scale and a choice of scaling method in the drop-down list; </li><li>  All scale functions are of the following type: </li></ul><br><pre><code class="delphi hljs">TxDrawZoomFunc = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ACanvas : TCanvas; </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">//    ARect : TRect; //   AZoom, ASize : double;// ,   AText : string //    ) : boolean; //  </span></span></span></span></span></span></code> </pre> <br><ul><li>  Functions are registered with the name in the list of strings.  That it is presented in the drop-down list: GDrawZoomFuncList: Tstrings = nil; </li><li>  To see whether the text is pulled, and how much it is pulled, draw a scale-dependent grid; </li><li>  Together with the text, a ‚Äúcalculated‚Äù rectangle is drawn, which is calculated as a text area with a normal font size multiplied by the scale: </li></ul><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //        //****************************************************************************** function DrawZoomCalcRect (ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : TRect; var siz : TSize; begin //--    ,   --------------------------------- ACanvas.Font.Height := -trunc(ASize * ACanvas.Font.PixelsPerInch/72); //--         ----------- GetTextExtentPoint32(ACanvas.Handle,PWideChar(AText),Length(AText), siz); //---------------------------------------------------------------------------- //  ,     , //       //---------------------------------------------------------------------------- result := ARect; result.Right := result.Left + round (AZoom * siz.Width); result.Bottom := result.Top + round (AZoom * siz.Height); end;</span></span></code> </pre> <br><ul><li>  In all scale methods, the global variable GDiffWidth: extended is calculated.  This is the ratio of the calculated width to the resulting.  It is necessary for the analysis of test results. </li></ul><br><div class="spoiler">  <b class="spoiler_title">A number of auxiliary functions are used:</b> <div class="spoiler_text"><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //     //****************************************************************************** function WidthRect (ARect : TRect) : Integer; begin result := ARect.Right - ARect.Left; end; function HeightRect (ARect : TRect) : Integer; begin result := ARect.Bottom - ARect.Top; end; //****************************************************************************** //      //****************************************************************************** function CheckParamsValid (ACanvas : TCanvas; ARect : TRect; AObject : TObject; AObjChecked : boolean = true) : boolean; begin result := (ACanvas &lt;&gt; nil) and ((not AObjChecked) or (AObject &lt;&gt; nil)) and (WidthRect (ARect) &gt; 0) and (HeightRect (ARect)&gt;0); end; //****************************************************************************** //     ARect //****************************************************************************** function CreateBmpRect (ARect : TRect) : TBitmap; begin result := TBitmap.Create; result.Width := abs (WidthRect (ARect)); result.Height := abs (HeightRect (ARect)); end;</span></span></code> </pre> <br></div></div><br><h2>  Method 1 "In the forehead."  Fractional Font Size </h2><br>  If you solve the problem "in the forehead", then this method suggests itself: to change the font height depending on the scale.  For this, a parameter such as Font.Height will do.  This is the font height in pixels, and according to the logic of things, this should lead to a smooth zoom. <br><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>F</mi><mi>o</mi><mi>n</mi><mi>t</mi><mo>.</mo><mi>H</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>=</mo><mo>&amp;#x2212;</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>n</mi><mi>c</mi><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mi>Z</mi><mi>o</mi><mi>o</mi><mi>m</mi><mo>&amp;#x2217;</mo><mi>A</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo>&amp;#x2217;</mo><mi>F</mi><mi>o</mi><mi>n</mi><mi>t</mi><mo>.</mo><mi>P</mi><mi>i</mi><mi>x</mi><mi>e</mi><mi>l</mi><mi>s</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>I</mi><mi>n</mi><mi>c</mi><mi>h</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>72</mn><mo stretchy=&quot;false&quot;>)</mo><mo>;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="69.847ex" height="2.66ex" viewBox="0 -832 30072.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-46" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6F" x="749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6E" x="1235" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-74" x="1835" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2E" x="2197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-48" x="2642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="3530" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-69" x="3997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-67" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-68" x="4823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-74" x="5399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-3D" x="6038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2212" x="7095" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-74" x="7873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-72" x="8235" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-75" x="8686" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6E" x="9259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-63" x="9859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-28" x="10293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-41" x="10682" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-5A" x="11433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6F" x="12156" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6F" x="12642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6D" x="13127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2217" x="14228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-41" x="14951" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-53" x="15701" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-69" x="16347" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-7A" x="16692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="17161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2217" x="17849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-46" x="18572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6F" x="19322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6E" x="19807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-74" x="20408" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2E" x="20769" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-50" x="21214" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-69" x="21966" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-78" x="22311" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="22884" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6C" x="23350" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-73" x="23649" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-50" x="24118" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="24870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-72" x="25336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-49" x="25788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-6E" x="26292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-63" x="26893" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-68" x="27326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2F" x="27903" y="0"></use><g transform="translate(28403,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-37"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-29" x="29404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-3B" x="29794" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>F</mi><mi>o</mi><mi>n</mi><mi>t</mi><mo>.</mo><mi>H</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo>=</mo><mo>‚àí</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>n</mi><mi>c</mi><mo stretchy="false">(</mo><mi>A</mi><mi>Z</mi><mi>o</mi><mi>o</mi><mi>m</mi><mo>‚àó</mo><mi>A</mi><mi>S</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo>‚àó</mo><mi>F</mi><mi>o</mi><mi>n</mi><mi>t</mi><mo>.</mo><mi>P</mi><mi>i</mi><mi>x</mi><mi>e</mi><mi>l</mi><mi>s</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>I</mi><mi>n</mi><mi>c</mi><mi>h</mi><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>72</mn><mo stretchy="false">)</mo><mo>;</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> Font.Height = -trunc (AZoom * ASize * Font.PixelsPerInch / 72); </script><br><br>  Where: <br><br><ul><li>  ASize - the size of the font, which can be fractional </li><li>  AZoom - scale. </li></ul><br>  Where did the formula come from?  The height of the font in Windows is expressed in paragraphs, which came, in turn, from typography. <br><br>  1 inch = 25.4 mm = 72 points <br><br>  Thus, the first scaling function is as follows. <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //  " " // 1  = 25.4  = 72  //****************************************************************************** function DrawZoomTextSimple (ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var rct : TRect; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText&lt;&gt;''); if not result then exit; rct := DrawZoomCalcRect(ACanvas, ARect, AZoom, ASize, AText); with Acanvas do begin Pen.Color := clGreen; Pen.Width := 1; Rectangle(rct); Font.Height := -trunc(AZoom * ASize * Font.PixelsPerInch / 72); TextOut (ARect.Left, ARect.Top, AText); GDiffWidth := WidthRect(rct) / TextWidth(AText); end; end;</span></span></code> </pre> <br>  The result is visible in the figure. <br><br><img src="https://habrastorage.org/webt/l-/ia/vr/l-iavrxmzb90uf8vvxzrubgp5ek.png" alt="image"><br><br>  If the left side of the two is clearly located on the gray line, then with a slight change in the scale in the right figure, the gray line crosses the two in the center. <br><br>  The result is unsatisfactory. <br><br><h2>  Method 2 ‚ÄúWorld Coordinates‚Äù SetGraphicsMode </h2><br>  It is clear that the ax does not shoe a flea.  You must use the tools that Windows provides. <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetGraphicsMode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hdc: HDC; iMode: Integer)</span></span></span><span class="hljs-function">:</span></span> Integer;</code> </pre> <br><br><ul><li>  DC Handle to a device context. </li><li>  iMode Defines the graphics mode.  This parameter can be one of the following values: <br>  GM_COMPATIBLE: Sets the graphics mode that is compatible with 16-bit Windows.  This is the default mode. <br>  GM_ADVANCED: Sets an improved graphics mode that enables the transformation of world space.  Including, in this mode scale transformation is available.  Here it is, and use. <br></li></ul><br>  The algorithm works as follows: <br><br><ol><li>  Switch DC to GM_ADVANCED; </li><li>  Initialize the fields of the TXForm structure (which is actually a matrix).  The conversion will be carried out according to the following formulas: <br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>x</mi><mo>&amp;#x2032;</mo></msup><mo>=</mo><mi>x</mi><mo>&amp;#x2217;</mo><mi>e</mi><mi>M</mi><mn>11</mn><mo>+</mo><mi>y</mi><mo>&amp;#x2217;</mo><mi>e</mi><mi>M</mi><mn>21</mn><mo>+</mo><mi>e</mi><mi>D</mi><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.707ex" height="2.539ex" viewBox="0 -832 14512.6 1093.4" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2032" x="809" y="513"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-3D" x="1145" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-78" x="2201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2217" x="2996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="3718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-4D" x="4185" y="0"></use><g transform="translate(5236,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-31" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2B" x="6460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-79" x="7460" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2217" x="8180" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="8903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-4D" x="9369" y="0"></use><g transform="translate(10421,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-31" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2B" x="11644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="12645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-44" x="13111" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-78" x="13940" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x</mi><mo>‚Ä≤</mo></msup><mo>=</mo><mi>x</mi><mo>‚àó</mo><mi>e</mi><mi>M</mi><mn>11</mn><mo>+</mo><mi>y</mi><mo>‚àó</mo><mi>e</mi><mi>M</mi><mn>21</mn><mo>+</mo><mi>e</mi><mi>D</mi><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> x '= x * eM11 + y * eM21 + eDx </script><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>y</mi><mo>&amp;#x2032;</mo></msup><mo>=</mo><mi>x</mi><mo>&amp;#x2217;</mo><mi>e</mi><mi>M</mi><mn>12</mn><mo>+</mo><mi>y</mi><mo>&amp;#x2217;</mo><mi>e</mi><mi>M</mi><mn>22</mn><mo>+</mo><mi>e</mi><mi>D</mi><mi>y</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.364ex" height="2.539ex" viewBox="0 -832 14364.8 1093.4" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2032" x="706" y="513"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-3D" x="1072" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-78" x="2128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2217" x="2923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="3645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-4D" x="4112" y="0"></use><g transform="translate(5163,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2B" x="6387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-79" x="7387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2217" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="8830" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-4D" x="9296" y="0"></use><g transform="translate(10348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMAIN-2B" x="11571" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-65" x="12572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-44" x="13038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/352392/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjiDFsjXQtKasm14YvYjbk3C2NR6Q#MJMATHI-79" x="13867" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>y</mi><mo>‚Ä≤</mo></msup><mo>=</mo><mi>x</mi><mo>‚àó</mo><mi>e</mi><mi>M</mi><mn>12</mn><mo>+</mo><mi>y</mi><mo>‚àó</mo><mi>e</mi><mi>M</mi><mn>22</mn><mo>+</mo><mi>e</mi><mi>D</mi><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> y '= x * eM12 + y * eM22 + eDy </script><br>  As you can see, to realize the scale, we are interested in the eM11 and eM22 fields; </li><li>  Assign the transformation matrix: SetWorldTransform (DC, xFrm); </li><li>  To draw the text in ‚Äúusual‚Äù coordinates, without taking into account the scale, in its ‚Äúusual‚Äù size; </li><li>  Return the transformation to its original state. </li><li>  Revert the previous mode. </li></ol><br>  The second scaling function is as follows: <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //  SetGraphicsMode (GM_ADVANCED) //    //****************************************************************************** function DrawZoomTextWorldMode(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var rct : TRect; oldM : integer; xFrm : TXForm; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText &lt;&gt; ''); if not result then exit; //--      , =1 ------------- rct := DrawZoomCalcRect(ACanvas,ARect,1,ASize,AText); //--  ""    ---------------------- oldM := SetGraphicsMode(ACanvas.Handle, GM_ADVANCED); try //--   ------------------------------------------------------ FillChar(xFrm,SizeOf(xFrm),0); //--    ------------------------------------- // x' = x * eM11 + y * eM21 + eDx // y' = x * eM12 + y * eM22 + eDy xFrm.eM11 := AZoom; xFrm.eM22 := AZoom; //--    -------------------------------------- SetWorldTransform(ACanvas.Handle, xFrm); //--  ,        --------------------- with Acanvas do begin Pen.Color := clRed; Pen.Width := 1; Rectangle (rct); TextOut (rct.Left, rct.Top, AText); //--    /   -------- GDiffWidth := WidthRect(rct)/TextWidth(AText); end; finally //--      -------------------------------- xFrm.eM11 := 1; xFrm.eM22 := 1; SetWorldTransform(ACanvas.Handle, xFrm); //--     --------------------------------------------- SetGraphicsMode(ACanvas.Handle, oldM); end; end;</span></span></code> </pre> <br>  The result is: <br><br><img src="https://habrastorage.org/webt/51/ff/xz/51ffxzwyf_y4fmjaqy0lfjvqgsu.png" alt="image"><br><br>  The situation is similar to the previous one.  On the left, the deuce is comfortably located between the gray borders of the cells, on the right, the cell line crosses it.  Those.  they didn‚Äôt get rid of ‚Äútwitching‚Äù at scale. <br><br>  However, there are positive moments: you can draw without worrying about the scale.  That is, we have some very large function that draws something very disproportionately steep, but without taking into account the scale.  Before the call, we can assign a transformation matrix, thereby obtaining the possibility of scaling.  Involving, in this case, the parameters eDx and eDy, we also get the displacement. <br><br>  It should be noted that the thickness of the lines also varies with the scale.  Additional goodies and transformations are off topic. <br><br>  Meanwhile, the desired result is not achieved. <br><br><h2>  Method 3 "Scale" SetMapMode / MM_ISOTROPIC </h2><br>  Coordinate conversion by Windows using Method 2 of SetGraphicsMode (GM_ADVANCED) does not end.  Consider a bunch of the following functions: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetMapMode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DC: HDC; p2: Integer)</span></span></span><span class="hljs-function">:</span></span> Integer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetWindowExtEx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DC: HDC; XExt, YExt: Integer; Size: PSize)</span></span></span><span class="hljs-function">:</span></span> BOOL; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetViewportExtEx</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DC: HDC; XExt, YExt: Integer; Size: PSize)</span></span></span><span class="hljs-function">:</span></span> BOOL;</code> </pre><br>  The SetMapMode function causes the selected device context to consider a pixel to be something else.  Suppose a pixel can actually be 0.001 inches.  It depends on the parameter p2, which can take the following values: <br><br><ul><li>  MM_ISOTROPIC - arbitrary scaling with the same scale in both axes.  The scale factor is set by the pair SetWindowExt and SetViewportExt, which is discussed below. </li><li>  MM_ANISOTROPIC - arbitrary scaling on each of the axes.  The scale factor is set by the pair SetWindowExt and SetViewportExt, which is discussed below. </li><li>  MM_HIENGLISH - 0.001 inch.  X from the left - to the right, Y from the bottom - up. </li><li>  MM_LOENGLISH - 0.01 inch.  X from the left - to the right, Y from the bottom - up. </li><li>  MM_HIMETRIC - 0.01 millimeters.  X from the left - to the right, Y from the bottom - up. </li><li>  MM_LOMETRIC - 0.1 millimeters.  X from the left - to the right, Y from the bottom - up. </li><li>  MM_TEXT - Pixel to pixel.  X from the left - to the right, Y from the bottom - up. </li><li>  MM_TWIPS - 1/20 point.  (Point = 1 inch / 72, therefore, twip = 1 inch / 1440).  X from the left - to the right, Y from the bottom - up. </li></ul><br>  What does the phrase "X from the left - to the right, Y from below - up" mean?  This means that the coordinates on X are quite ordinary, but on Y they are negative.  That is, if you need to draw an ellipse in a rectangle (10,10,1000,1000), then to see it without additional transformations, you need to write Ellipse (10, -10,1000, -1000). <br><br>  But we are interested in scale.  And the most common, the same on all axes.  Therefore, we use p2 = MM_ISOTROPIC. <br><br>  After setting the mode we need to set the scale factor.  This is done by a couple of functions SetWindowExtEx / SetViewportExtEx <br><br><ol><li>  Setting the logical output window <br>  SetWindowExtEx (DC, logical width, logical height, nil); </li><li>  Installing the real output window <br>  SetViewportExtEx (DC, real width, real height, nil); </li></ol><br>  Now our scale is such that the actual width (height) of the screen, shape, paintbox, arbitrary rectangle, etc.  corresponds to some logical width (height), for example, paper in the printer, or the width of a large image that needs to be displayed to scale, etc. <br><br>  The scale factor is: F = (real value) / (logical value). <br>  Since  the scale should be the same on both axes, Windows chooses the smallest factor. <br><br>  What is a logical quantity.  If you want to reflect a certain image, then it will be its width and height, and the real value will be the area in pixels where you want to reflect. <br><br>  The conversion functions are: <br>  x '= x * F <br>  y '= y * F <br><br>  Thus, the actual value for the width: Zoom * Width and height: Zoom * Height. <br>  The third scaling function looks like this: <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** // :    SetMapMode/SetWindowExtEx/SetViewportExtEx //****************************************************************************** function DrawZoomTextMapMode (ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var DC : HDC; rct : TRect; Old : integer; w,h : Integer; begin result := CheckParamsValid(ACanvas,ARect,nil,false); if not result then exit; //--   ,       ---- rct := DrawZoomCalcRect(ACanvas,ARect,1,ASize,AText) and (AText &lt;&gt; ''); //--       ----------------------------- DC := ACanvas.Handle; w := WidthRect(ARect); h := heightRect(ARect); //--     MM_ISOTROPIC    X  Y //--   (..       ) Old := SetMapMode(DC, MM_ISOTROPIC); //--     ---------------------- SetWindowExtEx(DC, w, h, nil); //--     ------------------------ SetViewportExtEx(DC, round(AZoom*W), round(AZoom*H), nil); //--  ------------------------------------------------- try with ACanvas do begin Pen.Color := clPurple; Pen.Width := 1; Rectangle(rct); TextOut (ARect.Left, ARect.Top, AText); GDiffWidth := WidthRect(rct)/TextWidth(AText); end; finally SetMapMode(DC, Old); end; end;</span></span></code> </pre> <br>  However, the result is still not happy: <br><br><img src="https://habrastorage.org/webt/e1/l_/yo/e1l_yozmxmgy1dxsuoowljcijgc.png" alt="image"><br><br>  The situation is absolutely identical to the two previous ones. <br><br>  The advantages of the method are similar to method 2 - you can not worry about the scale while writing the ‚Äúdrawing‚Äù function, but there is no possibility of moving.  Transformation of movement - especially manual work. <br><br>  In general, this function is not sharpened by transformation.  It is more suitable for displaying something in units of this something.  It is a kind of ‚Äútranslator‚Äù from one language of measurement to a display language. <br><br><h2>  Method 4 "Inches" SetMapMode / MM_HIENGLISH </h2><br>  But try another option.  In method 3, the SetMapMode function is described in detail.  Including flags of translation from metric systems to screen.  Let's try to work in the inch coordinate system.  Why not in millimeters - to avoid additional conversions.  After all, we still initially had some inch indicators.  Why do they additionally do at 25.4 (see method 1). <br><br>  What inspired.  All the same, the value of 0.001 inch is very small discrete.  But what if? <br>  The fourth scaling function is: <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //     SetMapMode/SetWindowExtEx/SetViewportExtEx // MM_HIENGLISH -      0.001 . //****************************************************************************** function DrawZoomTextMapModeHIENGLISH(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var DC : HDC; Old: integer; pnt : TPoint; rct : TRect; siz : TSize; tmp : Integer; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText &lt;&gt; ''); if not result then exit; //--    ,     --------- ACanvas.Font.Height := -trunc(ASize * ACanvas.Font.PixelsPerInch / 72); tmp := ACanvas.Font.Height; DC := ACanvas.Handle; //--       ------------------------ pnt.X := GetDeviceCaps(DC,LogPixelsX); //--       -------------------------- pnt.Y := GetDeviceCaps(DC,LogPixelsY); //--     (0.001 )----------------------------------- GetTextExtentPoint32(DC,PWideChar(AText),Length(AText), siz); rct.Top := -round(1000* AZoom * ARect.Top / pnt.Y); rct.Left := round(1000* AZoom * ARect.Left / pnt.X); rct.Right := rct.Left + round(1000* AZoom * siz.Width / pnt.X); rct.Bottom := rct.Top - round(1000* AZoom * siz.Height / pnt.Y); ACanvas.Font.Height := -round(rct.Bottom-rct.Top) ; Old := SetMapMode(DC, MM_HIENGLISH); try with Acanvas do begin Pen.Color := clTeal; Pen.Width := 1; Rectangle (rct); TextOut (rct.Left, rct.Top, AText); GDiffWidth := WidthRect(rct) / TextWidth(AText); end; finally SetMapMode(DC, Old); ACanvas.Font.Height := tmp; end; end;</span></span></code> </pre> <br>  Unfortunately, the result is no better than the previous ones: <br><br><img src="https://habrastorage.org/webt/vq/c_/fu/vqc_fuvb2q6vaug_cpegn2c2jla.png" alt="image"><br><br><h2>  Method 5 "Character Rendering" </h2><br>  In all previous methods there is a feeling that the integer part is TLogFont.  lfHeight perceptibly spoils life and does not allow for fine-tuning for a certain scale.  Eh ... it would be fractional ... Well, let's try to solve the problem differently. <br><br>  The basic idea is this: a walk through all the characters of the text, counting the beginning on the X axis, where the symbol should be displayed.  The conversion factor is calculated initially, as the ratio of the calculated width and real. <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //    //****************************************************************************** function DrawZoomTextChar(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var rct : TRect; fct : double; i : Integer; w : Integer; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText &lt;&gt; ''); if not result then exit; //-- ,        ---------- rct := DrawZoomCalcRect(ACanvas,ARect,AZoom,ASize,AText); try with ACanvas do begin Pen.Color := clMaroon; Pen.Width := 1; Rectangle(rct); GDiffWidth := WidthRect (rct); //--   ---------------------------------------------- Font.Height := -trunc(AZoom * ASize * Font.PixelsPerInch/72); //--  ""    ---------------------------- fct := WidthRect (rct)/TextWidth(AText); //--     ,   ,  w := 0; for i := 1 to Length(AText) do begin TextOut (rct.Left, rct.Top, AText[i]); w := w + TextWidth(AText[i]); //--        ----- rct.Left := round (ARect.Left + w * fct); end; GDiffWidth := GDiffWidth / (rct.Left-ARect.Left); end; except result := false; end; end;</span></span></code> </pre> <br>  Amazingly, it works: <br><br><img src="https://habrastorage.org/webt/b5/2v/u5/b52vu5qtclob9tbqexxwajokl3m.png" alt="image"><br><br>  Deuce tightly stuck to the line and does not leave it at any scale. <br><br>  The first successful scaling method.  The goal has been achieved, but I would like a better solution. <br><br><h2>  Method 6 ‚ÄúBitmap Buffer‚Äù </h2><br>  The previous method consisted in the fact that a character-by-character ‚Äúfit‚Äù occurred to the required size calculated in advance by shifting the start of the drawing of each character.  And what if all the same to do on the basis of bitmap? <br><br>  The idea is that the text is first drawn on some intermediate bitmap at a given scale.  Let's call it a "combat" matrix.  Then there is a stretch copying to another bitmap matrix, which is set to size, according to the counted values.  After this, there is a ‚Äútransparent‚Äù copying to the ‚Äúworking‚Äù canvas. <br><br>  Function text: <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //    TBitmap  StretchDraw //****************************************************************************** function DrawZoomTextBitmap(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var rct: TRect; val: TRect; siz: TSize; bmp: TBitmap; // - ""  dst: TBitmap; // -stretch  begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText &lt;&gt; ''); if not result then exit; //-- ,        ---------- rct := DrawZoomCalcRect(Acanvas,Arect,AZoom,ASize,AText); //--      ----------------------------- ACanvas.Font.Height := -trunc(AZoom * ASize * ACanvas.Font.PixelsPerInch / 72); GetTextExtentPoint32(ACanvas.Handle,PWideChar(AText),Length(AText), siz); val := ARect; val.Right := val.Left + siz.Width; val.Bottom := val.Top + siz.Height; //-- -,     ----------------------------------- bmp := CreateBMPRect (val);//  ,  ""  try with bmp.Canvas do begin Font.Assign(ACanvas.Font); Brush.Color := clWhite; TextOut(0,0,AText); end; //--      ---------------------------------- dst := CreateBmpRect(rct); //-- / ""   ,    dst.Canvas.StretchDraw(dst.Canvas.ClipRect,bmp); //--      --------------------------------------- dst.TransparentColor := clWhite; dst.Transparent := true; with ACanvas do begin Pen.Color := clBlue; Pen.Width := 1; Rectangle(rct); ACanvas.Draw(rct.Left,rct.Top,dst); end; GDiffWidth := WidthRect(rct) / dst.Width; finally if dst &lt;&gt; nil then dst.Free; bmp.Free; end; end;</span></span></code> </pre> <br>  And this method also works perfectly: <br><br><img src="https://habrastorage.org/webt/fn/sj/sw/fnsjswrpwkdkj9a2h4yqglofejq.png" alt="image"><br><br>  The text seemed to stick to its cells.  Extremely smooth scaling. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second successful scaling method. </font><font style="vertical-align: inherit;">The goal has been achieved, but I would like an even better solution. </font><font style="vertical-align: inherit;">The last two methods are too resource intensive. </font><font style="vertical-align: inherit;">This is now directly felt.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method 7 "GDI +" Scale Font Size </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So we came to an unambiguously correct and excellent tool, such as scaling and text output by GDI +. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is nothing special to comment here. </font><font style="vertical-align: inherit;">The main thing is the change in font size, according to the scale. </font><font style="vertical-align: inherit;">And the text output using GDI + using antialiasing (TextRenderingHintAntiAlias). </font><font style="vertical-align: inherit;">Everything else is quite understandable from the source:</font></font><br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //  GDI+     //****************************************************************************** function DrawZoomTextGDIPlus(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var clr : TColor; grp : TGPGraphics; brh : TGPSolidBrush; nam : TGPFontFamily; fsl : FontStyle; src : TGPRectF; fnt : TGPFont; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText&lt;&gt;''); if not result then exit; ACanvas.Font.Height := -trunc(AZoom * ASize * ACanvas.Font.PixelsPerInch / 72); grp := TGPGraphics.Create(ACanvas.Handle); try with ACanvas do begin clr := Font.Color; //--    --------------------------------------------- nam := TGPFontFamily.Create(Font.Name); //--    --------------------------------------------- fsl := FontStyleRegular; if fsBold in Font.Style then fsl := fsl + FontStyleBold; if fsItalic in Font.Style then fsl := fsl + FontStyleItalic; if fsUnderline in Font.Style then fsl := fsl + FontStyleUnderline; if fsStrikeOut in Font.Style then fsl := fsl + FontStyleStrikeout; //--    ""    ---- grp.SetTextRenderingHint(TextRenderingHintAntiAlias); //--    ,   ------------------------------- brh := TGPSolidBrush.Create(MakeColor(GetRValue(clr), GetGValue(clr), GetBValue(clr))); //--    ,  ""  ---------------------- Fnt := TGPFont.Create(nam, ASize * Font.PixelsPerInch / 72, fsl, UnitPixel); //--  ""  ------------------------------- grp.MeasureString(AText,-1,fnt,MakePoint(ARect.Left*1.0, ARect.Top*1.0),src); //--  ""  ------------------------------- Pen.Color := clNavy; pen.Width := 1; Rectangle (round(src.X),round(src.Y), round(src.X + AZoom*src.Width), round(src.Y + AZoom*src.Height)); //--    ,     ------------------- GDiffWidth := AZoom*src.Width; Fnt.Free; //--      ------------------------------------- Fnt := TGPFont.Create(nam, AZoom * ASize * Font.PixelsPerInch / 72, fsl, UnitPixel); grp.SetTextRenderingHint(TextRenderingHintAntiAlias); grp.DrawString(AText, -1, Fnt, MakePoint(ARect.Left*1.0, ARect.Top*1.0), brh); //--        ------------------ grp.MeasureString(AText,-1,fnt,MakePoint(ARect.Left*1.0, ARect.Top*1.0),src); GDiffWidth := GDiffWidth / src.Width; end; except result := false; end; Fnt.free; brh.free; nam.free; grp.free; end;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The result naturally exceeded all expectations. </font><font style="vertical-align: inherit;">I will not give screens, because </font><font style="vertical-align: inherit;">they are similar to the above in the last two methods. </font><font style="vertical-align: inherit;">Feel the power of GDI + better by running the executable file.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Method 8 "GDI +" Scale Transformation </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And again GDI +. </font><font style="vertical-align: inherit;">But this time we will use the scale transformation.</font></font> Those.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We draw the text in its ‚Äúnormal‚Äù size, and the GDI + engine will be engaged in its scaling. </font><font style="vertical-align: inherit;">Transformation is performed by calling the ScaleTransform (AZoom, AZoom).</font></font><br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //  GDI+     //****************************************************************************** function DrawZoomTextGDIPlusScale(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var clr : TColor; grp : TGPGraphics; brh : TGPSolidBrush; nam : TGPFontFamily; fsl : FontStyle; src : TGPRectF; fnt : TGPFont; pnt : TGPPointF; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText&lt;&gt;''); if not result then exit; grp := TGPGraphics.Create(ACanvas.Handle); try with ACanvas do begin clr := Font.Color; pnt := MakePoint(ARect.Left*1.0, ARect.Top*1.0); //--    --------------------------------------------- nam := TGPFontFamily.Create(Font.Name); //--    --------------------------------------------- fsl := FontStyleRegular; if fsBold in Font.Style then fsl := fsl + FontStyleBold; if fsItalic in Font.Style then fsl := fsl + FontStyleItalic; if fsUnderline in Font.Style then fsl := fsl + FontStyleUnderline; if fsStrikeOut in Font.Style then fsl := fsl + FontStyleStrikeout; //--    ""    ---- grp.SetTextRenderingHint(TextRenderingHintAntiAlias); //--    ,   ------------------------------- brh := TGPSolidBrush.Create(MakeColor(GetRValue(clr), GetGValue(clr), GetBValue(clr))); //--    ,  ""  ---------------------- Fnt := TGPFont.Create(nam, ASize * Font.PixelsPerInch / 72, fsl, UnitPixel); //--  ""  ------------------------------- grp.MeasureString(AText,-1,fnt,pnt,src); //--  ""  ------------------------------- Pen.Color := $00BC6C01; pen.Width := 1; Rectangle (round(AZoom*src.X),round(AZoom*src.Y), round(AZoom*(src.X + src.Width)), round(AZoom*(src.Y + src.Height))); //--    ---------------------------------- grp.ScaleTransform(AZoom,AZoom); grp.DrawString(AText, -1, Fnt, pnt, brh); GDiffWidth := 1; end; except result := false; end; Fnt.free; brh.free; nam.free; grp.free; end;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The best result of all of the above. </font></font><br><br><h2>  Test results </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the test program, you can start collecting statistics by clicking the "Start" button. </font><font style="vertical-align: inherit;">A sequential enumeration of all the presented methods at all possible scales in the program will be carried out. </font><font style="vertical-align: inherit;">At the end of the work, the following diagram will be displayed: </font></font><br><br><img src="https://habrastorage.org/webt/sw/61/vl/sw61vlzi7z22ua63jnxr7kli2i0.png" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first column is the average drawing time in milliseconds. </font><font style="vertical-align: inherit;">The second is the relative deviation of the calculated values ‚Äã‚Äãfrom the actual ones. </font><font style="vertical-align: inherit;">Simply put, the first column - how little time the operation takes, the second - how high the result of scaling. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, the methods are divided into 2 groups - the first 4 with an unsatisfactory result of the scale, the second 4 - scaling is successful, what was wanted.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Strange, but the most clumsy first method for speed showed better results than its clever counterparts in a group of losers. </font><font style="vertical-align: inherit;">True, his deviations from the calculated values ‚Äã‚Äãare the biggest. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The clear winner is method 8 ‚ÄúGDI +‚Äù with scale transformation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Therefore, we will draw the text in GDI + as a separate function.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Function of smooth scaling of the text with rotation on the set corner and anti-aliasing </font></font></h2><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //   GDI+ //****************************************************************************** function DrawGDIPlusText (ACanvas : TCanvas; ARect : TRect; Angle, ASize : double; AText : string; AZoom : double = 1) : boolean; var clr : TColor; grp : TGPGraphics; brh : TGPSolidBrush; nam : TGPFontFamily; fsl : FontStyle; fnt : TGPFont; pnt : TGPPointF; begin result := CheckParamsValid(ACanvas,ARect,nil,false) and (AText&lt;&gt;''); if not result then exit; grp := TGPGraphics.Create(ACanvas.Handle); try with ACanvas do begin clr := Font.Color; //--    --------------------------------------------- nam := TGPFontFamily.Create(Font.Name); //--    --------------------------------------------- fsl := FontStyleRegular; if fsBold in Font.Style then fsl := fsl + FontStyleBold; if fsItalic in Font.Style then fsl := fsl + FontStyleItalic; if fsUnderline in Font.Style then fsl := fsl + FontStyleUnderline; if fsStrikeOut in Font.Style then fsl := fsl + FontStyleStrikeout; //--    ,   ------------------------------- brh := TGPSolidBrush.Create(MakeColor(GetRValue(clr),GetGValue(clr),GetBValue(clr))); //--    ,  ""  ---------------------- Fnt := TGPFont.Create(nam, ASize * Font.PixelsPerInch / 72, fsl, UnitPixel); //--    ""    ---- grp.SetTextRenderingHint(TextRenderingHintAntiAlias); //--     -------------------------------------- pnt := MakePoint(ARect.Left*1.0, ARect.Top*1.0); //--  ,  ,       grp.TranslateTransform(pnt.X,pnt.y); //--   ,    ------------------ if Angle &lt;&gt; 0 then begin //--    ---------------------------------- grp.RotateTransform(Angle); end; //--      ""  ------------------- pnt := MakePoint(0.0,0.0); //--   ,    ------------------ if AZoom &lt;&gt; 1 then begin grp.ScaleTransform(AZoom,AZoom); end; //--      ------------------------------------- grp.DrawString(AText, -1, Fnt, pnt, brh); end; except result := false; end; Fnt.free; brh.free; nam.free; grp.free; end;</span></span></code> </pre> <br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Small conclusions and comments </font></font></h2><br><ul><li>           :  SetMapMode    <br> SetWindowOrgEx ‚Äì      . <br> SetViewportOrgEx ‚Äì      . <br>  ,  SetViewportOrgEx (DC,100,100,nil),    (100,100)      TextOut(0,0,'Center here')      (100,100); </li><li>  GDI+        TranslateTransform (.   DrawGDIPlusText). <br><br> ,    ¬´¬ª   .    -     ,        .      ,   ‚Äì   . </li><li> ,     SetGraphicsMode. ,    .  ,  ,      ,      ,   .    . </li><li>        SetGraphicsMode        TXForm. </li><li>      //,        , , ,    GDI+,       GDI+?     ‚Äì , , , .  ,  . </li><li> GDI+    VCL .    TCanvas      TCanvas,  Windows API GDI,   GDI+. </li><li>  GDI    GDI+.  GDI+     GDI+.  Those. , , ,  SetGraphicsMode,       GDI+. </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As a demonstration of the latest statements, the statistics output function is written using SetGraphicsMode, which is responsible for scale and offset, and text output, including at an angle, using the DrawGDIPlusText function. </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the shape of:</font></font></b> <div class="spoiler_text"><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-title"><span class="hljs-title">TFmMain</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>(TForm) ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> FList : TxZoomStatList; <span class="hljs-comment"><span class="hljs-comment">//   (utlZoomStat) FListPoint : TPoint; FMouseDown : boolean; FMousePoint: TPoint; FProcessing : boolean; ‚Ä¶ End; procedure TFmMain.pbMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer); begin FMouseDown := (Button = mbLeft) and //--  -    ----------------- (ComboBox1.ItemIndex=ComboBox1.Items.Count-1); if FMouseDown then begin //--  ,    ---------------- FMousePoint := Point(X,Y); //--    --------------------------------- FListPoint := Point(FList.OffX, FList.OffY); end; end; procedure TFmMain.pbMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Integer); begin if FMouseDown then begin //--    ------------------------------------------ FList.OffX := FListPoint.X + X-FMousePoint.X; FList.OffY := FListPoint.Y + Y-FMousePoint.Y; //--   ----------------------------------------------- pbPaint(Sender); end; end; procedure TFmMain.pbMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer); begin //--   --------------------- FMouseDown := false; end;</span></span></code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description of class statistics</font></font></b> <div class="spoiler_text"><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //    //****************************************************************************** PxZoomStat = ^TxZoomStat; TxZoomStat = packed record FIndex : Integer; FColor : TColor; FName : string; FCount : Integer; FTime : extended; FDiff : extended; FTimeC : extended; FDiffC : extended; FTimeR : TRect; FDiffR : TRect; end; TxZoomStatList = class private FOffX : Integer; FOffY : Integer; FList : TList; FGDIPlus : boolean; function GetCount : Integer; function GetItem (Index : Integer) : PxZoomStat; public Constructor Create; virtual; Destructor Destroy; override; function Add (AIndex : Integer; AName : string; ATime, ADiff : Extended) : Integer; overload; function Add (AIndex : Integer; ATime, ADiff : Extended) : PxZoomStat; overload; procedure Delete (Index : Integer); procedure Clear; property Count : Integer read GetCount; property Items[Index : Integer] : PxZoomStat read GetItem; default; //-------------------------------------------------------------------------- property GDIPlus : boolean read FGDIPlus write FGDIPlus; property OffX : Integer read FOffX write FOffX; property OffY : Integer read FOffY write FOffY; end;</span></span></code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We draw statistics. </font><font style="vertical-align: inherit;">DrawZoomStatList:</font></font></b> <div class="spoiler_text"><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//****************************************************************************** //   //   .    ,      //  .  ,      . //        // SetGraphicsMode(DC, GM_ADVANCED); //****************************************************************************** function DrawZoomStatList(ACanvas : TCanvas; ARect : TRect; AZoom, ASize : double; AText : string) : boolean; var lst : TxZoomStatList; //     (  utlZoomStat) rct : TRect; val : TRect; str : string; i : Integer; p : PxZoomStat; wBar : Integer; //------------------------------------------------------------------------------ maxTime : Extended; maxDiff : Extended; minTime : Extended; minDiff : Extended; wTime : Extended; wDiff : Extended; //--  ------------------------------------------------------------------- DC : HDC; fnt : hFont; tmp : hFont; //-------------------------------------- oldM : integer; xFrm : TXForm; begin lst := xGZoomList(false); result := CheckParamsValid(ACanvas,ARect,lst,true); if not result then exit; DC := ACanvas.Handle; maxTime :=-1; maxDiff :=-1; minTime := MaxInt; minDiff := MaxInt; for i := 0 to lst.Count-1 do begin p := lst[i]; if (p = nil) or (p^.FCount = 0) then continue; p^.FTimeC := p^.FTime / p^.FCount; p^.FDiffC := p^.FDiff / p^.FCount; if p^.FTimeC &gt; maxTime then maxTime := p^.FTimeC; if p^.FTimeC &lt; minTime then minTime := p^.FTimeC; if p^.FDiffC &gt; maxDiff then maxDiff := p^.FDiffC; if p^.FDiffC &lt; minDiff then minDiff := p^.FDiffC; end; wTime := (maxTime - minTime) * 0.1; minTime := minTime - wTime; maxTime := maxTime + wTime; wDiff := (maxDiff - minDiff) * 0.1; minDiff := minDiff - wDiff; maxDiff := maxDiff + wDiff; with ACanvas do begin Font.Height := -trunc(ASize * Font.PixelsPerInch/72); wBar := TextWidth('F=0000.00000') div 2; //      end; //--       ----------------------------- oldM := SetGraphicsMode(DC, GM_ADVANCED); //--   ------------------------------------------------------ FillChar(xFrm,SizeOf(xFrm),0); //--    ------------------------------------- xFrm.eM11 := AZoom; //     ,  =1 xFrm.eM22 := AZoom; //     ,  =1 xFrm.eDx := lst.FOffX; //   X,      xFrm.eDy := lst.FOffY; //   Y,      //--    -------------------------------------- SetWorldTransform(DC, xFrm); rct := ARect; rct.Top := rct.Top + 10; rct.Bottom := rct.Top + round ( ASize * 190/6.5); //      if wTime &lt;&gt; 0 then wTime := (rct.Bottom - rct.Top) / (minTime - maxTime); if wDiff &lt;&gt; 0 then wDiff := (rct.Bottom - rct.Top) / (minDiff - maxDiff); try with ACanvas do begin val := rct; val.Left := val.Left + wBar; val.Right := val.Left + wBar; Pen.Width := 1; for i := 0 to lst.Count-1 do begin p := lst[i]; if (p = nil) or (p^.FCount = 0) then continue; Pen.Color := Darker(p^.FColor,10); //--    ------------------------------- OffsetRect (val,wBar,0); Brush.Color := Lighter(p^.FColor,50); val.Top := val.Bottom-round (wTime*(minTime-p^.FTimeC)); Rectangle(val); p^.FTimeR := val; //--    -------------------------- OffsetRect (val,wBar,0); Brush.Color := Lighter(p^.FColor,10); val.Top := val.Bottom-round (wDiff*(minDiff-p^.FDiffC)); Rectangle(val); p^.FDiffR := val; OffsetRect (val,wBar,0); end; for i := 0 to lst.Count-1 do begin p := lst[i]; if (p = nil) or (p^.FCount = 0) then continue; Brush.Style := bsClear; Font.Color := Darker(p^.FColor,10); val := p^.FTimeR; str := 't='+FormatFLoat('#0.000#',p^.FTimeC); OffsetRect(val,-1,HeightRect(val)+2); if lst.GDIPlus then DrawGDIPlusText (ACanvas, val, 0, ASize, str) else TextOut (val.Left,val.Top,str); Font.Color := Darker(p^.FColor,30); val := p^.FDiffR; str := 'f='+FormatFLoat('#0.000#',p^.FDiffC); OffsetRect(val,1,-TextHeight(str)-2); if lst.GDIPlus then DrawGDIPlusText (ACanvas, val, 0, ASize, str) else TextOut (val.Left, val.Top,str); val := p^.FDiffR; str := p^.FName; val.Top := val.Bottom+TextHeight(str)+2; val.Bottom := ARect.Bottom; if lst.GDIPlus then DrawGDIPlusText (ACanvas, val, 30, ASize, str) else begin fnt := CreateRotatedFont(Font, -30); tmp := SelectObject(DC,fnt); try TextOut (val.Left,val.Top, str); finally SelectObject(DC, tmp); DeleteObject(fnt); end; end; end; end; finally xFrm.eM11 := 1; xFrm.eM22 := 1; xFrm.eDx := 0; xFrm.eDy := 0; SetWorldTransform(DC, xFrm); //--     --------------------------------------------- SetGraphicsMode(DC, oldM); end; end;</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download: </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delphi XE 7 Source (70 Kb)</font></font></a> </div><p>Source: <a href="https://habr.com/ru/post/352392/">https://habr.com/ru/post/352392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352382/index.html">Network physics in virtual reality</a></li>
<li><a href="../352384/index.html">Customize Mozilla Thunderbird in a corporate Windows environment</a></li>
<li><a href="../352386/index.html">Donald Knut: this is a turnaround</a></li>
<li><a href="../352388/index.html">The release of CLion 2018.1: new features from C ++ 17, support for WSL, CMake Install, a plugin for Rust and much more</a></li>
<li><a href="../352390/index.html">Full translation of the book about building communities: "Social Architecture"</a></li>
<li><a href="../352394/index.html">General cleaning in the company: how we turned shops</a></li>
<li><a href="../352396/index.html">How to recover a lost password to the archive using a video card</a></li>
<li><a href="../352398/index.html">Why does retail and goods delivery business move to IaaS: case review</a></li>
<li><a href="../352400/index.html">Transferring a running Linux system to XFS from HDD to a smaller SSD</a></li>
<li><a href="../352402/index.html">CLOUD At: a new US bill provides access to personal data abroad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
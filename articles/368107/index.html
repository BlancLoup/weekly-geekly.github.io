<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic home heating control with their own hands. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let me remind you that we are talking about the home heating control system using the timer thermostat NM8036 ( start here ). 



 Analog (ADC) contro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic home heating control with their own hands. Part 2</h1><div class="post__text post__text-html js-mediator-article"> Let me remind you that we are talking about the home heating control system using the <a href="http://masterkit.ru/shop/smarthome/control/1319311">timer thermostat NM8036</a> ( <a href="http://geektimes.ru/company/dadget/blog/260868/">start here</a> ). <br><br><img src="https://habrastorage.org/files/5b3/7b5/34c/5b37b534c1454736865ab3b0b75bd9d1.jpg"><br><br>  Analog (ADC) controller inputs and temperature sensor connections. <br><a name="habracut"></a><br>  So, ADC.  Not everyone and not immediately clear what it is and what it is eaten with.  Therefore I will try to explain in my own words. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, what is an "analog" input?  The controller has two types of inputs: digital and analog.  Digital can take only two values: zero and one.  Zero - no voltage, unit - there is voltage.  Information is transmitted to the digital input pulses in time.  But the analog input is able to accept not only these two values, but in general any voltage. <br><br>  The NM8036 controller has two analog inputs (see about the assembly of the NM8036 unit in the first part).  Each of these inputs can be supplied with any voltage ranging from 0 to the supply voltage (5 V).  For example, 1.8 volts, or 3.2 volts ... In short, any, but not more than 5 volts. <br><br>  What does the controller do with this voltage?  Very simple: measures and digitizes it.  Moreover, it does this in the range from 0 to 1023. This is binary data (bin-data), in which the upper limit (1023) equals to a voltage of 5 volts.  This is the Analog to Digital Conversion (ADC). <br><br>  But the actual tension - it is the actual.  5 volts - they are 5 volts.  This value is considered here as "Volts".  That's right, there are volts. <br><br>  But here you can imagine this voltage in other physical quantities (Physics).  For example, we connected a pressure or humidity sensor to the input, or also a temperature sensor, but not a digital one, like the DS1820, but a thermistor.  This thermistor sensor will give us a voltage of 0 to 5 volts (electronic engineers, do not get excited! This is just for example.), But it‚Äôs important for us to know the temperature, not the voltage! <br><br><img src="https://habrastorage.org/files/b4f/545/28c/b4f54528c38c4a7abf7dfec16cdcac43.jpg"><br><br>  So we calibrate these values.  Set the lower limit in the settings, for example, to 16 degrees, and the upper limit to 30 degrees.  Here we have such a sensor, you see, it is connected.  And the number of decimal places will be 2. And we indicate the prefix: C (I mean, degrees Celsius). <br><br>  And what do we get?  And we get that when the sensor sends a voltage to the input, for example, 2.5 volts, the controller quickly recounts everything and gives us three options for the results: 512 (bin-data), 2.5V (Volts) and 23.00  (degrees Celsius ).  In this way, you can configure work with almost any sensor that produces an analog voltage value at its output. <br><br>  The existence of two analog inputs at the controller is not only the ability to connect the above sensors.  You can come up with a lot of schemes that can be very useful for different purposes in a private house. <br><br>  I will list offhand possible of them: <br>  Simple switch on 2 positions.  May have at the output Data either 0 volts or 5 volts.  It is connected by three wires: Vcc (+ 5v), Data (data) and Gnd (common wire).  This switch can set two different modes of operation of the loads when programming the system. <br><br><img src="https://habrastorage.org/files/675/184/42c/67518442c7b947fab715fcd251059a11.jpg"><br><br>  A switch to more positions may allow programming and more modes.  Here, for example, in 3 positions.  Each position has its own output voltage.  The lowest position is at the output of 1.25 v, average 2.5 v and the upper 3.75 v.  By increasing the number of resistors in the chain, you can increase the number of switch positions. <br><br><img src="https://habrastorage.org/files/fd6/a21/c4f/fd6a21c4f21e4c54b6789bda6cb8a481.jpg"><br><br>  These were options for step adjustment, but there is also a version of stepless regulation.  Here, the output voltage depends on the position of the variable resistor motor. <br><br><img src="https://habrastorage.org/files/75f/f56/96e/75ff5696e56b463cbc5186020e532e6a.jpg"><br><br>  Can be used, for example, to manually adjust the temperature.  Make the program so that it maintains the temperature in the room as set by the controller.  Automatic adjustment is one thing, but often you want to turn something somewhere, click to make it warmer, or, conversely, cooler.  A man is a fastidious creature. <br><br>  Or use such a scheme to control, say, the water level in the tank, in the well ... It is simple: a float on a string wound on the variable resistor knob.  Spring loaded, naturally.  But this is so, offhand, without a detailed study. <br><br>  If you continue to fantasize, you can still measure the level of illumination and turn on / off the lamp at the right time ... In short, there are plenty of possibilities for these analog inputs, the NM8036 can well master many tasks not only in managing the heating of a private house, but also for solving many other tasks .  On the possibilities of customization and programming we will talk in the following articles. <br><br>  By the way, about adjusting the temperature in the room is a very good decision, taken by me from the <a href="http://www.masterkit.ru/forum/viewtopic.php%3Ft%3D906">forum MasterKit</a> .  In response to someone's question, the author of the message Brokly (he is also the author of the Advanced Manager program, I will also talk about it later) gave an example of the use of an analog input.  I quote literally: <br>  You would be even harder to come up with a thread.  Put the contact wall thermostat, connect to the analog input, and let the drunks themselves twist it.  And free the cleaner, and drunk fun.  And the controller has less work, the thermostat has tripped - you can not warm it. <br><br>  How do you like this, Master?  And you know, I liked it. <br><br>  Now about connecting temperature sensors.  In the manual, of course, there is a wiring diagram, but I would additionally emphasize your attention to the fact that the sensors must be connected in series, without the formation of a ‚Äústar‚Äù. <br><br>  To make it clearer, here's a picture: each sensor has its own cable for connecting to the controller, and somewhere at the controller itself, these cables are connected into one.  This is the star connection. <br><br><img src="https://habrastorage.org/files/41f/032/0b8/41f0320b8ea5441bb828f285b1ebc8d3.jpg"><br><br>  No doubt, of course, it is more convenient to scatter sensors.  Only then there may be problems with their definition, and in the work the device will have unexplained glitches. <br><br>  This circuit is an example of the serial connection of DS18B20 temperature sensors.  That is, the sensor behind the sensor is connected in series to one continuous cable connected to the NM8036 along the cable. <br><br><img src="https://habrastorage.org/files/08c/ed4/68a/08ced468aaa245e29b7b6f4bae358c78.jpg"><br><br>  Generally, if strictly judged from the point of view of electrical connections, this connection is parallel, but I called it in my own way for a better understanding.  After all, the star connection is also parallel ... <br><br>  In general, this type of connection, as shown in the figure, is the most correct, but it is not always convenient in real conditions, when sensors must be located in different rooms, scattered not at all in accordance with the logic of the series connection of sensors.  And what to do? <br><br>  The exit in such a situation is the connection with the returns, it was along this path that I went.  Where it was impossible to stretch the cable sequentially from the sensor to the sensor, I returned from the next sensor to the starting point and then went back to the next sensor. <br><br><img src="https://habrastorage.org/files/510/3b3/f88/5103b3f88a0647bfb64cf13b0ab0d149.jpg"><br><br>  This scheme is just an abstract example, giving an idea of ‚Äã‚Äãthe method of connecting sensors in real conditions.  As you can see, the principle of serial connection is fully observed here. <br><br>  When installing temperature sensors, I used the cable "twisted pair", which lay computer networks.  This cable has 8 multi-colored cores twisted in pairs.  Firstly, it turned out to be very convenient for making connections with a return, and secondly, the ‚Äútwisted pair‚Äù cable is just very good for such purposes, reducing the number of induced interferences. <br><br>  You can buy such cable in any computer workshop, service, in electronics stores.  Not so expensive, rupe thing, three rubles a handful. <br><br>  The cable has four pairs: blue and white blue, brown and light brown, pink and white pink, green and white green.  I use all white wires for a common wire.  Brown wire - Data at the entrance, blue - power at the entrance.  At the exit: Data - green, food - pink. <br><br>  At the other end of the cable ‚Äúwith return‚Äù I connect the sensor according to the indicated scheme, i.e., all white - common, green and brown - Data, blue and pink - power. <br><br><img src="https://habrastorage.org/files/cd7/047/c09/cd7047c09c2648e39a64c90ff3ae876f.jpg"><br><br><img src="https://habrastorage.org/files/64d/131/41e/64d13141e3e346888f80848bec5cfd8a.jpg"><br><br><img src="https://habrastorage.org/files/cd7/753/c71/cd7753c71367406f9f93c7dd43ab63c5.jpg"><br><br>  Now the pinout of the sensor, the appointment of its findings.  Of course, they should not be confused.  We take the sensor by the legs and look at its front side, where the inscriptions are located.  At the same time, there will be a power output on the right, a common one on the left, and a data output in the middle. <br><br><img src="https://habrastorage.org/files/17d/2bd/384/17d2bd3846d84a6b9e902a46747a9904.jpg"><br><br>  But here the cables are spread, the sensors are soldered.  How to fix them?  The question is ambiguous, if we ask ourselves to measure the temperature with an accuracy of tenths of degrees.  Actually, the sensor measures it, but it measures its temperature.  And measuring the temperature of the sensor and the temperature of the water in the pipe is far from the same. <br><br>  It would seem, what is so difficult?  I stuck the sensor to the pipe - and it will measure the temperature of the water in the pipe.  Is not it logical?  Is logical.  But wrong.  Firstly, the surface of the pipe itself already gives an error, because it is washed by air, the temperature of which is not always equal to the temperature of the water.  Secondly, and most importantly, the sensor is pressed against the pipe with only one surface.  The rest are washed by air again and the temperature of the sensor itself is not at all equal to the temperature of the pipe surface. <br><br>  The exit suggests itself: to insulate the sensor and the pipe section and make a kind of casing over the sensor mounting point, protecting it from the effects of outside air. <br><br>  But I, again, followed the path of simplification and attached the sensors to the pipes with the help of an ordinary fabric patch.  Yes, the readings of the sensors are not true.  The difference is from one to one and a half degrees.  So what? <br><br>  I do not collect the thermostat for scientific experiments, I just have a control system for the heating of a private house.  And while programming the system, nothing prevents me from taking into account this difference, which I actually did.  For example, in the hallway, I have a difference in the readings of the sensor and the thermometer (one from the other in 2 millimeters) - 1.3 degrees.  Thermometer shows 24, and the sensor - 22.7.  Which of them is lying - is it important?  Although, I still trust the digital sensor. <br><br>  What else about the sensors?  Look like that's it.  Yeah, here's another: do not rush the sensors at once everything in place screw / primativat.  Identify them later will not be easy.  Let them hang in the air so that later, when you launch the ‚ÄúSearch for sensors‚Äù settings and all of them are determined, you can change their temperature with your palms and give names in the system. <br><br>  After all, the system will detect the sensors by their serial numbers and dump you a list of these serials.  How does she know that this serial belongs to the sensor near the toilet, but this one belongs to the sensor under the bed?  Then you crawl under the bed, warm the sensor with your palms, breathe on it, and ask your spouse to look at the list of sensors.  And you will find out among all whose temperature has risen.  And you will find out what serial number he has, and you will assign him the name: Bed! <br><br>  To be continued‚Ä¶ </div><p>Source: <a href="https://habr.com/ru/post/368107/">https://habr.com/ru/post/368107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../368097/index.html">In English Wikipedia found 272 mystifications, which existed for more than a year. Record - 10 years and 1 month</a></li>
<li><a href="../368099/index.html">Project "Eye" p.11</a></li>
<li><a href="../368101/index.html">Arduino DIY Watch - homemade clock on the Arduino</a></li>
<li><a href="../368103/index.html">Buzz Aldrin is developing a 25-year plan for the colonization of Mars</a></li>
<li><a href="../368105/index.html">In Europe, only a third of discarded electronics is recycled.</a></li>
<li><a href="../368109/index.html">The first rocket "Soyuz-2.1a" will be sent to the Vostochny cosmodrome on September 6</a></li>
<li><a href="../368113/index.html">Autowatering systems from drip to autolevel</a></li>
<li><a href="../368115/index.html">In the United States, they are starting a project to create a 3.2 GP digital camera ‚Äî the Large Viewing Telescope</a></li>
<li><a href="../368117/index.html">Computer user corner: melatonin and screens</a></li>
<li><a href="../368119/index.html">Another review of GSM sockets Senseit GS2 M</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
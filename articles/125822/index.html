<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to DRY model</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In most rail projects, the main concentration of the code is on the model. Everyone probably read about the Slim controllers & fat models and try to c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to DRY model</h1><div class="post__text post__text-html js-mediator-article">  In most rail projects, the main concentration of the code is on the model.  Everyone probably read about the Slim controllers &amp; fat models and try to cram as much into the model as possible, and as little as possible into the controllers.  Well, this is commendable, but in an effort to thicken the model, many often forget about the principle of DRY - don't <em>(fucking)</em> repeat yourself. <br><br>  I'll try to briefly describe how to eat fish in the area of ‚Äã‚Äãmodels and not forget about DRY. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, we have a model - cut class.  Like any Ruby class, the model consists of three things: <br><br><h6>  1) Instance Method Definitions </h6><br><pre><code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> [ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">first_name</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">last_name</span></span></span><span class="hljs-class"> ].</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">filter</span></span></span><span class="hljs-class">(&amp;:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">presence</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">compact</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">map</span></span></span><span class="hljs-class">(&amp;:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strip</span></span></span><span class="hljs-class">) * ' ' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><br><h6>  2) class method definitions </h6><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">find_old</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">created_at</span></span></span><span class="hljs-class"> &lt; ?', 1.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">year</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ago</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">all</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br><h6>  3) "class" code </h6><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class"> &lt; ActiveRecord::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">has_many</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentications</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dependent</span></span></span><span class="hljs-class"> =&gt; :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">destroy</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">has_many</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invitees</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class_name</span></span></span><span class="hljs-class"> =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-class">', :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> =&gt; :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invited_by</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">delegate</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">city</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">country</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">to</span></span></span><span class="hljs-class"> =&gt; :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">location</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessible</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">admin</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">banned</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> =&gt; :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">admin</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mount_uploader</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">userpic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserPicUploader</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">scope</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">admin</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class">(:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">admin</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">validates</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">username</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uniqueness</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">format</span></span></span><span class="hljs-class"> =&gt; /^[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">az</span></span></span><span class="hljs-class">][</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">az</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">d_</span></span></span><span class="hljs-class">-]+$/, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">length</span></span></span><span class="hljs-class"> =&gt; { :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">within</span></span></span><span class="hljs-class"> =&gt; 3..20 }, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">exclusion</span></span></span><span class="hljs-class"> =&gt; { :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">USERNAME_EXCLUSION</span></span></span><span class="hljs-class"> } </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br><br>  The easiest way to implement a model, like, in fact, any other class in Ruby, is to make the repeating parts in separate modules.  In fact, modules are not only useful for this.  Sometimes it is not a bad thing to simply take out a huge footballer of a code in a separate file so that the model looks cleaner and tons of irrelevant garbage do not get tangled. <br><br><h2>  Methods </h2><br>  So, with the definitions of instance methods everything is as simple and clear as possible: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># user_stuff.rb module UserStuff def name [ first_name, last_name ].filter(&amp;:presence).compact.map(&amp;:strip) * ' ' end end # user.rb class User &lt; ActiveRecord::Base include UserStuff end</span></span></code> </pre><br><br>  With class methods, slightly more interesting.  That's not how it will work: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># user_stuff.rb module UserStuff def self.find_old where('created_at &lt; ?', 1.year.ago).all end end # user.rb class User &lt; ActiveRecord::Base include UserStuff end</span></span></code> </pre><br>  Here we define the <code>find_old</code> method for the <code>find_old</code> module <code>UserStuff</code> , and it will not end up in the model. <br>  Therefore, we must do something like this: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># user_stuff.rb module UserStuff def find_old where('created_at &lt; ?', 1.year.ago).all end end # user.rb class User &lt; ActiveRecord::Base extend UserStuff # ,  include,  extend end</span></span></code> </pre><br><br>  Together, intans and class methods can be put into a module, for example, like this: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># user_stuff.rb module UserStuff module InstanceMethods def name [ first_name, last_name ].filter(&amp;:presence).compact.map(&amp;:strip) * ' ' end end module ClassMethods def find_old where('created_at &lt; ?', 1.year.ago).all end end end # user.rb class User &lt; ActiveRecord::Base include UserStuff::InstanceMethods extend UserStuff::ClassMethods end</span></span></code> </pre><br><br><h2>  Class code </h2><br>  The unresolved question is what to do with the ‚Äúclass‚Äù code.  Usually it is just the most and he most often needs DRYing. <br><br>  The problem is that it must be executed in the context of the class being declared (the model in our case).  It is impossible to simply write it inside the module - it will try to execute immediately and most likely will break, because the simple module does not know anything about validation, or about numerous plugins, or about <code>has_many</code> etc.  Therefore, it is necessary to shove the code into the module in such a way that it is executed only when this module is connected to the model.  Fortunately, it‚Äôs very easy to cut. <br><br>  The Module object has a defined method called included, which is called every time we include a module somewhere.  Thus, we can get this code to execute the code we need.  Like this: <br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserValidations</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">included</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">base</span></span></span><span class="hljs-class">) </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment"># base    ‚Äî ,   . base.instance_eval do #     base #      validates :username, :uniqueness =&gt; true, :format =&gt; /^[az][az\d_-]+$/, :length =&gt; { :within =&gt; 3..20 }, :exclusion =&gt; { :in =&gt; USERNAME_EXCLUSION } validates :gender, :allow_blank =&gt; true, :inclusion =&gt; { :in =&gt; %w(mf) } end end end</span></span></span></span></code> </pre><br><br>  Now the whole code of validations will not be executed at the moment of defining the module, but it will lie quietly and wait until we module this module somewhere. <br><br><h2>  All in a bunch </h2><br>  Now, how would this be combined with the definitions of the methods that were higher?  That's how: <br><br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># user_stuff.rb module UserStuff def self.included(base) #     base.extend ClassMethods #    # Module#include ‚Äî  .          #      base.include(InstanceMethods),    : base.send :include, InstanceMethods #       base.instance_eval do validates :gender, :presence =&gt; true end end #   module ClassMethods def find_old where('created_at &lt; ?', 1.year.ago).all end end # - module InstanceMethods def name [ first_name, last_name ].filter(&amp;:presence).compact.map(&amp;:strip) * ' ' end end end # user.rb class User &lt; ActiveRecord::Base include UserStuff end</span></span></code> </pre><br><br>  So, we have a module in which we can safely take out any complex piece of the model, and then how many times to use this piece.  It's almost awesome.  Not only is the fact that the code is ugly and you can easily get confused in these endless included / send: include / extend. <br><br><h2>  You can prettier! </h2><br>  In Ruby community, the readability and beauty of the code, as well as the principle of hiding complexity, are highly valued - hide complex things behind some simple and beautiful API / DSL.  If you look at the RoR code, it becomes immediately obvious that the above approach is used there almost everywhere.  Therefore, naturally, the guys decided to make their lives easier and came up with <code>ActiveSupport::Concern</code> . <br><br>  With this <code>ActiveSupport::Concern</code> our code can be rewritten as follows: <br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">module</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserStuff</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">extend</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveSupport::Concern</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">included</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">validates</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gender</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">presence</span></span></span><span class="hljs-class"> =&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#   module ClassMethods def find_old where('created_at &lt; ?', 1.year.ago).all end end # - module InstanceMethods def name [ first_name, last_name ].filter(&amp;:presence).compact.map(&amp;:strip) * ' ' end end end</span></span></span></span></code> </pre><br><br>  In fact, a more beautiful code is not the only feature of this helper.  He has more useful features, but I may sometime write about them separately.  Who can not wait, he let go to read raw active_support in the area of <code>lib/active_support/concern.rb</code> , there are very cool and spreading comments with code examples and all that. <br><br><h2>  Where to put? </h2><br>  Another important point that the programmer will immediately encounter, who for the first time will decide to razderbanit their models on separate modules - where to put the code and how to name the modules? <br><br>  There is probably no single opinion, but I came up with the following scheme for myself: <br><pre> <code class="ruby hljs"><span class="hljs-comment"><span class="hljs-comment"># lib/models/validations.rb module Models module Validations #   c     end end # lib/models/user/validation.rb module Models module User module Validations #    User end end end # app/models/user.rb class User &lt; ActiveRecord::Base include Models::Validations include Models::User::Validations end</span></span></code> </pre><br><br>  The file names matter because they allow you not to load all the code at once, but using autoload rail is a mechanism that when it encounters an undefined constant, such as <code>Models::User::Validations</code> , first tries to search for the file <code>models/user/validations.rb</code> and try to load it , and only then, in case of failure, panic and throw a <code>NameError</code> exception. <br><br><h2>  Conclusion </h2><br>  I hope someone will make something useful for themselves from the article and the world will be a little less fucking-readable code and models for a half thousand times. <br><br>  <b>Update:</b> <br>  Here, <a href="https://habrahabr.ru/users/privaloff/" class="user_link">privaloff</a> noticed that I was stupid in the code, which without Soncern, namely, I forgot about <code>instance_eval</code> .  Code corrected.  Comrade plus karma for attentiveness. </div><p>Source: <a href="https://habr.com/ru/post/125822/">https://habr.com/ru/post/125822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125814/index.html">The global financial crisis or what to do IT?</a></li>
<li><a href="../125815/index.html">Running PhpStorm from Unity Luncher / Dasha is not that easy</a></li>
<li><a href="../125818/index.html">An article on the order: to offer a topic of the article and who gave karma or an invite</a></li>
<li><a href="../125819/index.html">Comdi.Com: security holes in the service and carelessness of developers</a></li>
<li><a href="../125821/index.html">Bit-squatting - laugh and forget</a></li>
<li><a href="../125823/index.html">Overview of the CloudFlare CDN service</a></li>
<li><a href="../125824/index.html">The best storage system for VMware (as well as Hyper-V, Xen, KVM, etc)</a></li>
<li><a href="../125825/index.html">AntiSec Group has successfully hacked US law enforcement networks</a></li>
<li><a href="../125826/index.html">Several major US Internet service providers made money on customer search queries.</a></li>
<li><a href="../125828/index.html">Introduction to Storage Systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
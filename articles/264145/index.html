<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clouds in the media service, or How Amazon helps process large volumes of video content</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our customer, one of the world's largest publishers, needed to increase the application's performance in order to publish news videos due to the incre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clouds in the media service, or How Amazon helps process large volumes of video content</h1><div class="post__text post__text-html js-mediator-article">  Our customer, one of the world's largest publishers, needed to increase the application's performance in order to publish news videos due to the increased traffic volume.  Application users are editors of media resources.  About 200 news clips pass through it every day, the average size of each of them is ~ 500 mb, totally about 100 Gb of fresh news per day. <br><br>  Today we will share our experiences on how CloudFront and S3 helped us build a highly loaded and stable content processing system. <br><br><img src="https://habrastorage.org/files/65a/752/27e/65a75227e3824f14b80680156e1b73d2.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We hope our experience will interest developers / designers of systems for the storage and processing of media content (video, audio, images) and technicians who actively use AWS services. <br><br><a name="habracut"></a><br><h4>  Determine the tools and terminology </h4><br>  Amazon Web Services offers a set of services for storing and delivering content, and their use is becoming an integral part of modern IT platforms. <br><br><img src="https://habrastorage.org/files/ce8/b3b/82d/ce8b3b82dd5a49578029de2d884c42a4.PNG"><br><br><h4>  Prehistory - what did we find out? </h4><br>  To create a video news editors, using the web interface, download the original video file and fill out the form with metadata (description, keywords, tags, categories, etc.).  After that, the downloaded information is sent for processing (video conversion into different formats, generation of subtitles, etc.), including using third-party services. <br><br><img src="https://habrastorage.org/files/33c/107/4b7/33c1074b72b2469bac15e57c6b8ed7a5.jpg"><br><br><h5>  After analyzing the system architecture, we identified the following bottlenecks: </h5><br><br>  <b># 1 The problem of downloading large amounts of data from different parts of the globe</b> <br>  The system is used by editors from different parts of the world, and the original video content is usually quite large (hundreds of Mb for a 10 minute video).  The process of data transfer, and therefore the time of their processing and publication, depends on the editor‚Äôs distance from the application server. <br><br>  <b># 2 Server load problem</b> <br>  The video uploaded by the editors in the first step goes to the server where the application is deployed.  Next, we need to transcode this video into various formats, add subtitles for it.  For this we use third-party video processing services.  Work with each service is as follows: <br><br><img src="https://habrastorage.org/files/756/571/710/7565717101d24d64ab7ff3431cbf8b38.jpg"><br><br>  Accordingly, for the passage of the full video processing cycle (and therefore the creation of video news), several iterations of video transmission are required.  In total, this translates into gigabytes of traffic and reduces the ability of the server to quickly process several such requests due to limitations on the amount of data transferred per unit time. <br><br><h4>  What have we done? </h4><br>  First of all, we went to find a solution to the server load problem.  To reduce the amount of information transmitted, it was decided to transfer the storage and distribution of content on the shoulders of third-party file storages or services. <br>  We considered services that would satisfy the following basic criteria: <br>  the ability of third-party systems to take content for processing; <br>  the ability to restrict access to content both by time and by reference; <br>  The first major candidate for us was AWS S3, which allows us to use signed URLs (details -&gt; <a href="http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-post-example.html">docs.aws.amazon.com/AmazonS3/latest/API/sigv4-post-example.html</a> ). <br><br>  With S3, the processing of content by third-party services is changing.  The application now sends only a link to the content, a third-party system picks it up independently from S3 via a signed link. <br><br><img src="https://habrastorage.org/files/876/979/8ab/8769798ab2fe416d859ac253f37bef1f.jpg"><br><br>  But in our case, this option was not suitable, since the task of accelerating the loading of data into the storage was not solved. <br><br><img src="https://habrastorage.org/files/c01/ab6/d4c/c01ab6d4c3fa400db6a8b0848bd8802d.jpg"><br><br>  The next alternative was CDN CloudFront.  Unlike other popular CDNs, it allows, using http-methods POST, PUT, DELETE, to manage content on S3, i.e.  in fact, CDN becomes a complete wrapper for its source repository.  CloudFront sends data on optimized routes, uses TCP / IP persistent connections and speeds up content delivery ( <a href="http-methods">aws.amazon.com/ru/about-aws/whats-new/2013/10/15/amazon-cloudfront-now-supports-put- post-and-other-http-methods</a> ). <br><br>  As you can see, the scheme of work with content processing services remains almost the same as in the case of S3. <br><br><img src="https://habrastorage.org/files/356/24a/5fd/35624a5fdcec4c269ab9a5d7095eca17.jpg"><br><br>  But for users of the system, everything has become much better: the content is downloaded to the nearest CloudFront server faster than directly to the S3 storage. <br><br><img src="https://habrastorage.org/files/6ac/38a/09f/6ac38a09fa7e431085ba2d2b11db6546.jpg"><br><br>  Thus, we kill two birds with one stone: fast data loading and saving them directly to AWS S3, bypassing the application server and the file system. <br><br>  As a result of the restructuring, we obtain the following system: <br><ul><li>  the video manager application works directly with metadata only; </li><li>  the original video files are saved directly from the S3 user interface via CloudFront; </li><li>  third-party services that need video content get it via <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-signed-urls.html">signed links</a> </li></ul>  via CloudFront. <br><br><img src="https://habrastorage.org/files/a54/a23/686/a54a236866d54ed2a8838b76fa6dc9a6.jpg"><br><br><h4>  Technical details </h4><br><br>  A few key points on S3 and CloudFront configuration <br><h5>  S3 configuration </h5><br><br>  CORS Setup <br><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CORSConfiguration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://s3.amazonaws.com/doc/2006-03-01/"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CORSRule</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedOrigin</span></span></span><span class="hljs-tag">&gt;</span></span>*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedOrigin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedMethod</span></span></span><span class="hljs-tag">&gt;</span></span>GET<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedMethod</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedMethod</span></span></span><span class="hljs-tag">&gt;</span></span>POST<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedMethod</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedMethod</span></span></span><span class="hljs-tag">&gt;</span></span>PUT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedMethod</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedHeader</span></span></span><span class="hljs-tag">&gt;</span></span>*<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AllowedHeader</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CORSRule</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CORSConfiguration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  CloudFront setup <br><br>  We set up two CloudFront distribution for our target S3-bakt.  The first is needed only to download content. <br>  Key configurations: <br><br><pre> <code class="bash hljs">Origin Settings Restrict Bucket Access - Yes; Allowed Http Methods - GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE; Default Cache Behavior Settings Restrict Viewer Access (Use Signed URLs) - Yes; Trusted Signer - Self</code> </pre><br>  The second is set up for feedback: <br><pre> <code class="bash hljs">Origin Settings Restrict Bucket Access - Yes; Allowed Http Methods - GET, HEAD; Default Cache Behavior Settings Restrict Viewer Access (Use Signed URLs) - Yes; Trusted Signer - Self</code> </pre><br><br><h4>  Application Integration </h4><br><h5>  Work on the user side <br></h5><br><br>  In order for the new interaction scheme to work, we had to solve several integration tasks. <br><br>  Popular content uploaders use multipart / form-data, which won't work with CloudFront, since  it does not parse the request body, but saves it as is.  I had to modify the angular-file-upload plugin a bit (AngularJS is mainly used on the project): to upload the file using the PUT method, xhr.send (Blob) was used (details here -&gt; <a href="https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html">dvcs.w3.org/hg/xhr/raw-file/tip /Overview.html#the-send%28%29-method</a> ). <br><br>  As it turned out, the default files uploaded in this way are accessible by the AWS system only for the pseudo-user cloudfront-identity and are not accessible by signed URLs.  We began to look for a way to configure permissions for downloadable files on AWS.  I had to study the documentation and experiment, because  In the network of such information is extremely small.  As a result, it was established that the rights when downloading files via CloudFront are configured by the S3 http-headers <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html">docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html</a> . <br><br><h5>  Code example </h5><br>  We used angular-file-upload to upload files. <br><br>  Define a FileUploader: <br><pre> <code class="javascript hljs">$scope.videoUploader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileUploader({ <span class="hljs-attr"><span class="hljs-attr">autoUpload</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">method</span></span>: <span class="hljs-string"><span class="hljs-string">"PUT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">useDirectUpload</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-comment"><span class="hljs-comment">//      FileUploader -  html5 XmlHttpRequest   FormData headers: { 'x-amz-acl': 'authenticated-read' //   magic header (http://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html) } });</span></span></code> </pre><br><br>  Define the handler to generate the final download link to the cloudfront: <br><pre> <code class="javascript hljs">$scope.videoUploader.onBeforeUploadItem = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ $.ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">"base-url.com/file/generateUploadUrl"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//       CloudFront type: 'GET', data: {fileName: item.file.name, fileSize:item.file.size}, async: false, success: function(data) { item.url = data.uploadUrl; //     } }); };</span></span></code> </pre><br><br>  Determine the handler successful end of loading <br><pre> <code class="javascript hljs">$scope.videoUploader.onSuccessItem = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item, response, status, headers</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">200</span></span> &lt;= status &amp;&amp; status &lt; <span class="hljs-number"><span class="hljs-number">300</span></span>) { ‚Ä¶ <span class="hljs-comment"><span class="hljs-comment">//  , ,     . }}</span></span></code> </pre><br><br>  On server <br><br>  To get a signed link to download the file, use the standard class from the AWS SDK <a href="http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/cloudfront/CloudFrontUrlSigner.html">com.amazonaws.services.cloudfront.CloudFrontUrlSigner</a> . <br><br>  We give the generated links to users for uploading files to s3 or services for downloading them. <br><br>  Code example <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CloudFrontConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * for example http://get.example.cf.com/ or http://put.example.cf.com/ */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String cloudFrontDomainNameForGet; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String cloudFrontDomainNameForPut; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String cloudFrontPrivateKey; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String cloudFrontKeyPairId; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDownloadUrlForUser</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s3key)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getSignedURL(cloudFrontDomainNameForGet, s3key); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPutUrlForService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s3key)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getSignedURL(cloudFrontDomainNameForPut, s3key); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSignedURL</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String domain, String s3Key)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ PrivateKey privateKey = loadPrivateKey(cloudFrontPrivateKey); Date dateLessThan = getDateLessThan(); String url = CloudFrontUrlSigner.getSignedURLWithCannedPolicy(domain + s3Key, cloudFrontKeyPairId, privateKey, dateLessThan); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> url; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Date </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDateLessThan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ LocalDateTime dateNow = LocalDateTime.now(); ZonedDateTime zdt = dateNow.plusDays(<span class="hljs-number"><span class="hljs-number">1</span></span>).atZone(ZoneId.systemDefault()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Date.from(zdt.toInstant()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> PrivateKey </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadPrivateKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String cloudFrontPrivateKey)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   PrivateKey     } }</span></span></code> </pre><br><br><h4>  What did we get as a result? </h4><br><br>  Editors of the publishing house were satisfied with the updated system: according to them, it began to work much faster, which made it possible to speed up the release of news. <br><br>  According to statistics from AWS, we received: <br><ul><li>  reducing incoming traffic to the server from 3Tb to 1 Gb per month; </li><li>  reduction of outgoing traffic from the server from 12Tb to 1 Gb per month; </li><li>  The size of the file system used is reduced from 500GB to 2GB. </li></ul><br><br>  Eventually: <br><ul><li>  We optimized download and content access control using S3 and CloudFront; </li><li>  Reduced network and file load on the server; </li><li>  Wrote an article :) </li></ul></div><p>Source: <a href="https://habr.com/ru/post/264145/">https://habr.com/ru/post/264145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264133/index.html">My first experience with HoloLens</a></li>
<li><a href="../264135/index.html">Interaction of Java and Shell-scripts in Android</a></li>
<li><a href="../264137/index.html">SAP Hana Based IT Analytics Tool</a></li>
<li><a href="../264139/index.html">Introduction to machine learning: where to start learning and how to apply</a></li>
<li><a href="../264141/index.html">Event-oriented Python backtesting step by step. Part 2</a></li>
<li><a href="../264149/index.html">Tabs on top? Development of the new interface Yandex. Browser</a></li>
<li><a href="../264151/index.html">Targeted attacks: China has attacked more than 600 objects in the USA in the last 5 years</a></li>
<li><a href="../264153/index.html">Open Data Analysis in R, Part 1</a></li>
<li><a href="../264155/index.html">Exchange 2013 transport queue is no longer a single mailing point</a></li>
<li><a href="../264157/index.html">Ignore extra function arguments in C ++.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Several alternative options for integrating the site with 1C</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Habr√© there were several articles about the integration of the Site with 1C. I offer two new options. 

 1. Integration with the Site based on the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Several alternative options for integrating the site with 1C</h1><div class="post__text post__text-html js-mediator-article">  On Habr√© there were several articles about the integration of the Site with 1C.  I offer two new options. <br><br><h4>  1. Integration with the Site based on the standard exchange between the two 1C. </h4><br><br>  In the 1C: Enterprise 8.x platform, a data exchange mechanism with any other 1C is implemented.  The 1C: Enterprise database objects are exported to the xml-format by the platform.  To register changes in exchange objects, use the configuration object ‚ÄúExchange Plan‚Äù.  The Exchange Plan contains information about the nodes between which the exchange takes place.  For each node exchange is the numbering of messages exchange. <br>  To ensure delivery of messages to the Site, 1C repeats sending data until it receives confirmation from the Site in the form of a received message number.  Only after this exchange is considered successfully completed. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the exchange always participate 2 files.  Conditionally call: <br>  1) Message_Site_1C.xml - file sent from the Site to 1C. <br>  2) Message_1C_Site.xml - file sent from 1C to the Site. <br>  Their structures are similar.  Let's see an example of these files.  Commenting only interesting tags to us. <br><br><img src="https://habrastorage.org/storage2/c7e/6a1/338/c7e6a1338f75f0ae1b72ea87244275da.png" alt="1c integration with the site"><br><br>  As soon as any exchanging object is created or changed on the Website, we fix it in a certain registration table with the corresponding number of the current sent message (file Message_Site_1C.xml).  In our example, 73086. After receiving the Message_1C_Site.xml file from 1C, we extract the number of the last message received from the Site from there.  In our example, 73082. Next, we check.  If the number of our current sent message (73086) is greater than the number of the last received message registered in 1C (73082), then all objects in messages with numbers up to 73082 have already been received.  Remove them from the queue to send.  And objects with message numbers greater than 72083 will be re-sent in the following messages until we receive a response from 1C. <br>  On the part of 1C, a similar process occurs. <br><br>  <b>Disadvantages of this approach:</b> <br>  The standard 1C exchange does not notify the Site of errors during file processing, which does not allow the Site to send raw objects to 1C again. <br>  For example, they sent in 1C 15 orders in message No. 200. The message was registered in 1C as successfully received.  Of the 15 orders, only 12 were successfully processed, and 3 unsuccessful ones just disappear.  There is also no exchange history, you have to save a huge archive of XML files.  In the case of error analysis it is very difficult to find the necessary information. <br>  Inflexible codes.  Every time when a PHP programmer or a 1C programmer makes the slightest change (for example, adds a new tag), you have to manually write a new tag handler, then write queries to the database.  This is extremely difficult and boring work, as well as a strong link to the cron on the side of the Site.  You have to constantly check the FTP server for the presence of exchange files. <br><br><h4>  2. Development of exchange in 1C customizable without programming. </h4><br>  The exchange is based on the use of the XDTO package.  XDTO-package is a template that describes the structure of the objects of exchange.  In order to add a new 1C configuration object to the exchange, it is enough to create an object with the same name in the XDTO scheme and add properties to it that are identical to the details of the 1C object.  Registration of changes in objects is made using the register information.  This allows exchanging not at the level of messages, as in the standard exchange, but at the level of individual objects of exchange.  During the export process, 1C objects are converted to XDTO objects, uploaded to xml-format and sent to the Site. <br><br>  <b>The scheme of interaction between the Site and 1C</b> <br><br><img src="https://habrastorage.org/storage2/6ca/131/e20/6ca131e20d74e5795fdb43db828e9f12.png" alt="The scheme of interaction between the Site and 1C"><br><br>  <b>For convenience, an XML-Mapper was created on the Site:</b> <br><br>  XML-Mapper provides developers with the opportunity to describe the gateway and minimally program it.  We implemented it using the ini file.  Ini file plays the role of data mapper.  It establishes a correspondence between logical objects on the Site with their XML templates for exchange with 1C.  The ini file also describes the data import / export actions for each tag. <br>  A simple example ini mapper. <br><br>  [Counterparties: mapper] <br>  ;  General description of the object <br>  object.name = Counterparties;  Object name in XML template <br>  object.class = buyerDomain;  The corresponding class on the site <br>  object.id = Link;  Tag where ID field (GUID) <br>  object.domain = 1;  Flag whether an object is a logical entity on the Site <br><br>  ;  Detail Mapper <br>  object.tag [] = ID;  XML tag name <br>  object.imp [] = setTransactionStatusId;  Import action <br>  object.exp [] = getTransactionStatusId;  Export action <br>  object.guid [] = 0;  Is this tag a GUID <br><br>  object.tag [] = Change Time <br>  object.imp [] = <br>  object.exp [] = getCurrentTime <br>  object.guid [] = 0 <br><br>  object.tag [] = Link <br>  object.imp [] = setGuid <br>  object.exp [] = getGuid <br>  object.guid [] = 1 <br><br>  object.tag [] = Mark Deletion <br>  object.imp [] = disable <br>  object.exp [] = getEnable <br>  object.guid [] = 0 <br><br>  object.tag [] = Name <br>  object.imp [] = setName <br>  object.exp [] = getName <br>  object.guid [] = 0 <br><br>  object.tag [] = TIN <br>  object.imp [] = setINN <br>  object.exp [] = getINN <br>  object.guid [] = 0 <br><br>  object.tag [] = PPC <br>  object.imp [] = setKPP <br>  object.exp [] = getKPP <br>  object.guid [] = 0 <br><br>  object.tag [] = Head Counterparty <br>  object.imp [] = setHolding <br>  object.exp [] = getHolding <br>  object.guid [] = 1 <br><br><img src="https://habrastorage.org/storage2/0fc/db7/8b8/0fcdb78b8fb06bcc47fe9706813ec387.png" alt="XML-Mapper for the integration of the site and 1C"><br><br>  PS <br>  The handwritten exchange has already shown its effectiveness on 5 projects.  It is convenient to configure, it is not necessary to program a lot and tedious in 1C. </div><p>Source: <a href="https://habr.com/ru/post/140901/">https://habr.com/ru/post/140901/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140896/index.html">GamaK - competition for game developers</a></li>
<li><a href="../140897/index.html">Report from the conference BlackHat EU 2012</a></li>
<li><a href="../140898/index.html">Apache POI 3.8 has been released.</a></li>
<li><a href="../140899/index.html">C ++ objects and QML, all by shelves</a></li>
<li><a href="../140900/index.html">BB-Mobile MicrON-1 headset</a></li>
<li><a href="../140902/index.html">Microsoft crossed SPDY and WebSockets</a></li>
<li><a href="../140903/index.html">Knowledge management, knowledge base creation. And what in practice?</a></li>
<li><a href="../140904/index.html">DEVCONF 2012 - June 9-10 in Moscow. Authors come to PHP, MySQL, MariaDB, MongoDB</a></li>
<li><a href="../140905/index.html">Dynamic tariffs have become available for individuals!</a></li>
<li><a href="../140907/index.html">NetApp Data ONTAP 8 - Storage Hypervisor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>backup rsync</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If your computer doesn‚Äôt store your favorite photos or 
 documents, this note will not interest you. If you already make backups and you are completel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>backup rsync</h1><div class="post__text post__text-html js-mediator-article">  If your computer doesn‚Äôt store your favorite photos or <br>  documents, this note will not interest you.  If you already make backups and you are completely satisfied with the mechanism of working with them, you should also skip this note.  If you think you are good at linux, you are unlikely to get anything new in it.  For the rest - share <a name="habracut"></a>  . <br><br><h4>  Why do I need to back up important data? </h4><br>  As Woland said in The Master and Margarita, it is not terrible that man is mortal, but that he is suddenly mortal.  The same is true of hard drives.  In my life, it seems, only 2 HDDs died, one died suddenly (very valuable data was lost), the other almost suddenly (it was possible to recover some data), the situation among my friends is not much different on average.  Screw death statistics is much less subjective, from Google - on average, the screw lives for several years, and in 60% of cases the screws die suddenly, even for SMART <br><br>  In addition to hardware, there are also software reasons for data loss - once the WIN95.CIH virus took down the first few megabytes of a disk, including FAT, which resulted in complete data unavailability.  The month of fierce programming and lasagna with DiskEdit is gone, so that in the absence of the Internet you can deal with FAT structs and restore them.  One day Patrition Magic hung on transferring a section.  Once at work <br>  Partition Magic turned off the electricity in the panel on the landing.  In the last two cases, important data is not lost - but this is just luck.  If you are connected to the network, then there is the likelihood of hacking and destruction of important data by an attacker.  From this kind of damage RAID-array will not save. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How to evaluate the feasibility of backup? </h4><br>  There is such a thing as risk stiffness - this is the probability of risk occurring multiplied by the cost of risk in money.  The cost of risk in this case is how much you would be willing to pay money to recover all the lost information.  We estimate the probability of risk from below.  I can only evaluate hardware failures, because I don‚Äôt have the rest of the statistics, and this reason for me already <br>  was enough.  The probability of a hard drive dying in 3 years is at least 24% in any case, regardless of whether it is new or not.  The probability that death will be sudden, as I already wrote, is 60%.  Total probability of sudden death in 3 years is 14%.  If two HDDs are used without mirroring, the probability of death of at least one of them during this period is 26%. <br>  Of course, you need to take into account the value of the data on these disks - I have 2 HDDs with valuable data (loss of any fatal) and one with music and movies - I will be upset about losing my favorite music collection, but I will survive. <br><br>  Once I was a student and sometimes lived on 600 rubles a month, but now I can afford some investments in data security.  Today I bought an external (USB) hard disk of 320 gigabytes, and this pleasure cost me 3,000 rubles.  Why hard drive?  Because I have a lot of data - only the pictures that are dear to my heart occupy 40 gigabytes of etac. And I don‚Äôt want to spend much time on it and I would like, without sorting everything that has accumulated over many years into ‚Äúimportant - unimportant‚Äù except music and movies.  Why external?  Ability to store separately from the computer in case of theft (although this is more important for laptops), not connected to the computer (in case of errors, fatal to the data). <br><br><h4>  Security. </h4><br>  I am not paranoid, but the hard disk contains data, the security of which is needed not only by me - for example, it is not at all necessary to fall into the hands of extraneous photographs of familiar girls in the ‚Äúnude‚Äù style.  Accordingly, we encrypt the disk - I encrypted everything.  In debian, everything is done out of the box in a few minutes and therefore I have no doubt that I can then easily recover this data, the main thing is to remember to write down the cascade of algorithms and password hint on paper and store it in a box with a screw.  I would not recommend using third-party commercially grunty tools. <br><br><h4>  Getting started. </h4><br>  I, without hesitation, decided to backup all the unused (but those that are just in case it is better not to lose) the entire sections, for the test I took the section with the once installed WIN98: <br><br> <code># cp /dev/hda1 /mnt/backup/images/</code> <br>  we test: <br> <code># mkdir /mnt/hda1-backup-test <br> # mount /mnt/backup/images/hda1 /mnt/hda1-backup-test -o loop <br> # ls /mnt/hda1-backup-test/ <br> boot.ini io.sys ntdetect.com (  )</code> <br> <br>  Hooray!  Works! <br><br>  Since I have working data in ext2 and ext3 file systems, I would like to use the fact that the attributes of files in ext2 / ext3 can contain information about its backup.  However, dumping is extremely discouraged on mounted file systems - <a href="http://www.rhd.ru/docs/manuals/enterprise/RHEL-4-Manual/admin-guide/s1-disaster-rhlspec.html">www.rhd.ru/docs/manuals/enterprise/RHEL-4-Manual/admin-guide/s1-disaster-rhlspec.html</a> , <a href="http://dump.sourceforge.net/isdumpdeprecated.html">dump.sourceforge.net/isdumpdeprecated. html</a> .  There is a huge choice between common backup technologies - tar, cpio, backup-manager, bacula and so on, but for now I‚Äôve settled on rsync + cp - because the result can be read transparently anywhere, without unpacking and reading all incremental archives. <br><br> <code>$ sudo rsync --archive --one-file-system /etc /home /root --delete /mnt/backup/rsync/`date +%F--%H-%M`</code> <br> <br>  Need to save some recent backups?  Please use the fact that the --link parameter of cp creates a hard link to the file instead of copying it. <br><br> <code>$ sudo rsync --archive --one-file-system /etc /home /root --delete /mnt/backup/rsync/latest/ <br> $ sudo cp --archive --link /mnt/backup/rsync/latest/ <br> /mnt/backup/rsync/`date +%F--%H-%M`</code> <br> <br>  Checking: <br><br> <code>$ ls /mnt/backup/rsync/ <br> 2008-04-03--04-29 2008-04-03--04-34 latest</code> <br> <br>  Want to see differences with backup?  "Emulate" copying the current state to the backup state. <br><br> <code>$ sudo rsync --archive --dry-run --verbose --one-file-system /etc /home /root --delete /mnt/backup/rsync/latest/</code> <br> <br>  Want to see the differences between backups?  Similarly. <br><br> <code>$ sudo rsync --archive --dry-run --verbose --delete <br> /mnt/backup/rsync/2008-04-03--04-41/ <br> /mnt/backup/rsync/2008-04-03--04-29/</code> <br> <br>  That's all. <br><br>  Sources: <br>  About encryption: <a href="http://aiz-linux.blogspot.com/2007/11/gnulinux.html">aiz-linux.blogspot.com/2007/11/gnulinux.html</a> <br>  About screws: <a href="http://habrahabr.ru/blog/hardware/24009.html">habrahabr.ru/blog/hardware/24009.html</a> , <br>  <a href="http://mydebianblog.blogspot.com/2007/11/blog-post.html">mydebianblog.blogspot.com/2007/11/blog-post.html</a> <br>  About rsync and more: <a href="http://www.mikerubel.org/computers/rsync_snapshots/">www.mikerubel.org/computers/rsync_snapshots</a> <br><br>  You can also see: <br>  rsnapshot - also uses rsync and hard links, better suited for backing up to non-removable media or to a network: <a href="http://habrahabr.ru/blogs/linux/45912/">habrahabr.ru/blogs/linux/45912</a> </div><p>Source: <a href="https://habr.com/ru/post/51419/">https://habr.com/ru/post/51419/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51406/index.html">"Favorite Internet"</a></li>
<li><a href="../51410/index.html">ReactOS - Open Source Windows?</a></li>
<li><a href="../51412/index.html">Functional programming :: recursive functions</a></li>
<li><a href="../51417/index.html">Music widgets 9 months later</a></li>
<li><a href="../51418/index.html">Carakan wallpaper</a></li>
<li><a href="../51421/index.html">Jimm jabber</a></li>
<li><a href="../51422/index.html">usa.kaspersky.com hacked</a></li>
<li><a href="../51423/index.html">FireUnit: Javascript Unit Testing Extension</a></li>
<li><a href="../51425/index.html">Great words</a></li>
<li><a href="../51427/index.html">Become a manager. Part four</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
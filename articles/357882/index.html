<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Laser link between two Arduino Morse code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why a laser beam, and not radio? For fun. In order to ensure secrecy, radio broadcasts intercept everyone who feels like it, and they do not realize t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Laser link between two Arduino Morse code</h1><div class="post__text post__text-html js-mediator-article">  Why a laser beam, and not radio?  For fun.  In order to ensure secrecy, radio broadcasts intercept everyone who feels like it, and they do not realize the interception of flashes of light, moreover, you need to stand in the direction of transmission of the beam.  It can be used where radio communication is not possible due to strong interference. <br><br>  For the experiment, we need: <br><ul><li>  2 Arduino; </li><li>  1 Photoresistor (or LDR) VT90N - a component that changes the resistance depending on the amount of light incident on it.  In total darkness, it has a maximum resistance of hundreds of kilo-ohm, and as illumination grows, the resistance decreases to dozens of kilo-ohm: <br><br><img src="https://habrastorage.org/files/05b/026/e1a/05b026e1a35945969cf62c199a5fce75.jpg"></li><li>  1 laser module KY-008: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/6eb/538/558/6eb538558e264c02b3d92fa6dc866fc2.jpg"></li><li>  2 resistances: 220 Ohms for the transmitter, 10 kOhms for the receiver. </li></ul><br><h4>  Transmitter </h4><br>  The transmitter is connected as the simplest scheme in Arduin (Blink), you can blink the Morse code and the usual LED, but for a short distance, you will need to use a laser to transmit to meter distances.  The laser can be taken either from a laser pointer or to buy in the store a special module for Arduino with 3 contacts: <br><img src="https://habrastorage.org/files/3df/e66/8ab/3dfe668abd054b41b8432255a7f31300.png"><br><a name="habracut"></a><br>  Arduino laser connection scheme: <br><br><img src="https://habrastorage.org/files/33c/854/e7e/33c854e7eb8c46f2b5a5ef37630cb3af.png"><br><br>  Since the KY-008 part was not found in the fritzing on the scheme, we had to use the RGB LED, signing the legs S and ‚Äú-‚Äú, S pin is connected to the 13th leg, minus to GND (ground). <br><br>  To transmit data, we use the Morse code - a way of representing the letters of the alphabet by a sequence of long (‚Äúdash‚Äù) and short (‚Äúdot‚Äù) signals.  Of course, when transmitting by Morse code, there is no error correction, but for a test transmission, you can do without it.  Since we still know the sequence of transmitted characters. <br><br>  In the sketch code, we indicate on which contact the Morse code will be fed, 13 foot (as for most blink.ino blinking sketches by the LED), the second parameter is responsible for the transfer speed (24 words per minute), 3 parameter 1 for the beep sound signal and 0 for PTT ( pin switching to HIGH and LOW).  If you look at the Morse.cpp code, you will see that for the third parameter 1 - beep is used as an analog output to write to the pin: <br><br>  analogWrite (_pin, 128); <br>  delay (_dashlen); <br>  analogWrite (_pin, 0); <br>  delay (_dotlen); <br>  and for 0, it is used as a digital output. <br>  digitalWrite (_pin, HIGH); <br>  delay (_dashlen); <br>  digitalWrite (_pin, LOW); <br>  delay (_dotlen); <br><br>  In our case, use the code: Morse morse (13, 24, 0); <br><br>  For the sketch is necessary library <a href="">morze.zip</a> author Erik Linder.  Sketch transmitter is simple: <br><br><div class="spoiler">  <b class="spoiler_title">sketch transmitter</b> <div class="spoiler_text"><pre><code class="hljs pgsql">// Author Erik Linder // Released <span class="hljs-number"><span class="hljs-number">2011</span></span> under GNU GPLv3 // // <span class="hljs-keyword"><span class="hljs-keyword">Usage</span></span>: morse( &lt;pin number&gt;, &lt;speed WPM&gt;, &lt;<span class="hljs-number"><span class="hljs-number">1</span></span>=beep, <span class="hljs-number"><span class="hljs-number">0</span></span>=PTT&gt; ) // sendmsg( "&lt;text-to-send&gt;" ) // #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;Morse.h&gt; // Use pin <span class="hljs-number"><span class="hljs-number">13</span></span> (built-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> LED <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Arduino <span class="hljs-number"><span class="hljs-number">2009</span></span>) Morse morse(<span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-type"><span class="hljs-type">void</span></span> setup() { } <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>() { morse.sendmsg("HELLO WORLD!"); delay (<span class="hljs-number"><span class="hljs-number">2000</span></span>); }</code> </pre> <br></div></div><br>  Fill the sketch, the system is ready for data transfer. <br><br><h4>  Receiver </h4><br>  We assemble the receiver circuit, nothing complicated, the photoresistor is one leg with 5V second leg analog port A0, 10 kŒ© resistor - one leg GND (‚Äúground‚Äù), second leg A0: <br><br><img src="https://habrastorage.org/files/6b2/2cb/e73/6b22cbe733bc41e9821bfaaa24405180.png"><br><br><div class="spoiler">  <b class="spoiler_title">receiver sketch</b> <div class="spoiler_text"><pre> <code class="hljs lua">int LDR_Pin = A0; //analog pin <span class="hljs-number"><span class="hljs-number">0</span></span> int led = <span class="hljs-number"><span class="hljs-number">13</span></span>; // <span class="hljs-number"><span class="hljs-number">10</span></span>k between GND <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> A0 // LDR between <span class="hljs-number"><span class="hljs-number">5</span></span>V <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> A0 #define MORSE_EMPTY <span class="hljs-number"><span class="hljs-number">0</span></span> //        . #define MORSE_DOT <span class="hljs-string"><span class="hljs-string">'*'</span></span> #define MORSE_DOT2 <span class="hljs-string"><span class="hljs-string">'+'</span></span> #define MORSE_TIRE <span class="hljs-string"><span class="hljs-string">'-'</span></span> //      (   ) #define MAX_MORSE_SYMBOL_LENGTH <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* morseSymbol[MAX_MORSE_SYMBOL_LENGTH]; unsigned int morseSymbolLen; <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* newMorseSignal; //    -   . //   . N-    n-  . <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* code[] = { <span class="hljs-string"><span class="hljs-string">"*-"</span></span>,<span class="hljs-string"><span class="hljs-string">"-***"</span></span>,<span class="hljs-string"><span class="hljs-string">"*--"</span></span>,<span class="hljs-string"><span class="hljs-string">"--*"</span></span>,<span class="hljs-string"><span class="hljs-string">"-**"</span></span>,<span class="hljs-string"><span class="hljs-string">"*"</span></span>,<span class="hljs-string"><span class="hljs-string">"***-"</span></span>,<span class="hljs-string"><span class="hljs-string">"--**"</span></span>,<span class="hljs-string"><span class="hljs-string">"**"</span></span>,<span class="hljs-string"><span class="hljs-string">"*---"</span></span>, <span class="hljs-string"><span class="hljs-string">"-*-"</span></span>,<span class="hljs-string"><span class="hljs-string">"*-**"</span></span>,<span class="hljs-string"><span class="hljs-string">"--"</span></span>,<span class="hljs-string"><span class="hljs-string">"-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"---"</span></span>,<span class="hljs-string"><span class="hljs-string">"*--*"</span></span>,<span class="hljs-string"><span class="hljs-string">"*-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"***"</span></span>,<span class="hljs-string"><span class="hljs-string">"-"</span></span>,<span class="hljs-string"><span class="hljs-string">"**-"</span></span>, <span class="hljs-string"><span class="hljs-string">"**-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"****"</span></span>,<span class="hljs-string"><span class="hljs-string">"-*-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"---*"</span></span>,<span class="hljs-string"><span class="hljs-string">"----"</span></span>,<span class="hljs-string"><span class="hljs-string">"--*-"</span></span>,<span class="hljs-string"><span class="hljs-string">"-*--"</span></span>,<span class="hljs-string"><span class="hljs-string">"-**-"</span></span>,<span class="hljs-string"><span class="hljs-string">"**-**"</span></span>,<span class="hljs-string"><span class="hljs-string">"**--"</span></span>, <span class="hljs-string"><span class="hljs-string">"*-*-"</span></span>, <span class="hljs-string"><span class="hljs-string">"*----"</span></span>,<span class="hljs-string"><span class="hljs-string">"**---"</span></span>,<span class="hljs-string"><span class="hljs-string">"***--"</span></span>,<span class="hljs-string"><span class="hljs-string">"****-"</span></span>,<span class="hljs-string"><span class="hljs-string">"*****"</span></span>,<span class="hljs-string"><span class="hljs-string">"-****"</span></span>,<span class="hljs-string"><span class="hljs-string">"--***"</span></span>,<span class="hljs-string"><span class="hljs-string">"---**"</span></span>,<span class="hljs-string"><span class="hljs-string">"----*"</span></span>,<span class="hljs-string"><span class="hljs-string">"-----"</span></span>, <span class="hljs-string"><span class="hljs-string">"......"</span></span>,<span class="hljs-string"><span class="hljs-string">"*-*-*-"</span></span>,<span class="hljs-string"><span class="hljs-string">"---***"</span></span>,<span class="hljs-string"><span class="hljs-string">"-*-*-"</span></span>,<span class="hljs-string"><span class="hljs-string">"-*--*-"</span></span>,<span class="hljs-string"><span class="hljs-string">"*----*"</span></span>,<span class="hljs-string"><span class="hljs-string">"*-**-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"-****-"</span></span>,<span class="hljs-string"><span class="hljs-string">"-**-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"**--**"</span></span>,<span class="hljs-string"><span class="hljs-string">"--**--"</span></span>, <span class="hljs-string"><span class="hljs-string">"-***-"</span></span>,<span class="hljs-string"><span class="hljs-string">"********"</span></span>,<span class="hljs-string"><span class="hljs-string">"*--*-*"</span></span>,<span class="hljs-string"><span class="hljs-string">"**-*-"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span> }; //  . <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* layoutCyrillic[] = { <span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"1"</span></span>,<span class="hljs-string"><span class="hljs-string">"2"</span></span>,<span class="hljs-string"><span class="hljs-string">"3"</span></span>,<span class="hljs-string"><span class="hljs-string">"4"</span></span>,<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-string"><span class="hljs-string">"6"</span></span>,<span class="hljs-string"><span class="hljs-string">"7"</span></span>,<span class="hljs-string"><span class="hljs-string">"8"</span></span>,<span class="hljs-string"><span class="hljs-string">"9"</span></span>,<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>,<span class="hljs-string"><span class="hljs-string">","</span></span>,<span class="hljs-string"><span class="hljs-string">":"</span></span>,<span class="hljs-string"><span class="hljs-string">";"</span></span>,<span class="hljs-string"><span class="hljs-string">"("</span></span>,<span class="hljs-string"><span class="hljs-string">"\'"</span></span>,<span class="hljs-string"><span class="hljs-string">"\""</span></span>,<span class="hljs-string"><span class="hljs-string">"-"</span></span>,<span class="hljs-string"><span class="hljs-string">"/"</span></span>,<span class="hljs-string"><span class="hljs-string">"?"</span></span>,<span class="hljs-string"><span class="hljs-string">"!"</span></span>, <span class="hljs-string"><span class="hljs-string">" *DELIMITER* "</span></span>,<span class="hljs-string"><span class="hljs-string">" *ERR* "</span></span>,<span class="hljs-string"><span class="hljs-string">"@"</span></span>,<span class="hljs-string"><span class="hljs-string">" *END* "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span> }; //  . <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>* layoutLatin[] = { <span class="hljs-string"><span class="hljs-string">"a"</span></span>,<span class="hljs-string"><span class="hljs-string">"b"</span></span>,<span class="hljs-string"><span class="hljs-string">"w"</span></span>,<span class="hljs-string"><span class="hljs-string">"g"</span></span>,<span class="hljs-string"><span class="hljs-string">"d"</span></span>,<span class="hljs-string"><span class="hljs-string">"e"</span></span>,<span class="hljs-string"><span class="hljs-string">"v"</span></span>,<span class="hljs-string"><span class="hljs-string">"z"</span></span>,<span class="hljs-string"><span class="hljs-string">"i"</span></span>,<span class="hljs-string"><span class="hljs-string">"j"</span></span>, <span class="hljs-string"><span class="hljs-string">"k"</span></span>,<span class="hljs-string"><span class="hljs-string">"l"</span></span>,<span class="hljs-string"><span class="hljs-string">"m"</span></span>,<span class="hljs-string"><span class="hljs-string">"n"</span></span>,<span class="hljs-string"><span class="hljs-string">"o"</span></span>,<span class="hljs-string"><span class="hljs-string">"p"</span></span>,<span class="hljs-string"><span class="hljs-string">"r"</span></span>,<span class="hljs-string"><span class="hljs-string">"s"</span></span>,<span class="hljs-string"><span class="hljs-string">"t"</span></span>,<span class="hljs-string"><span class="hljs-string">"u"</span></span>, <span class="hljs-string"><span class="hljs-string">"f"</span></span>,<span class="hljs-string"><span class="hljs-string">"h"</span></span>,<span class="hljs-string"><span class="hljs-string">"c"</span></span>,<span class="hljs-string"><span class="hljs-string">"√∂"</span></span>,<span class="hljs-string"><span class="hljs-string">"ch"</span></span>,<span class="hljs-string"><span class="hljs-string">"q"</span></span>,<span class="hljs-string"><span class="hljs-string">"y"</span></span>,<span class="hljs-string"><span class="hljs-string">"x"</span></span>,<span class="hljs-string"><span class="hljs-string">"√©"</span></span>,<span class="hljs-string"><span class="hljs-string">"√º"</span></span>, <span class="hljs-string"><span class="hljs-string">"√§"</span></span>, <span class="hljs-string"><span class="hljs-string">"1"</span></span>,<span class="hljs-string"><span class="hljs-string">"2"</span></span>,<span class="hljs-string"><span class="hljs-string">"3"</span></span>,<span class="hljs-string"><span class="hljs-string">"4"</span></span>,<span class="hljs-string"><span class="hljs-string">"5"</span></span>,<span class="hljs-string"><span class="hljs-string">"6"</span></span>,<span class="hljs-string"><span class="hljs-string">"7"</span></span>,<span class="hljs-string"><span class="hljs-string">"8"</span></span>,<span class="hljs-string"><span class="hljs-string">"9"</span></span>,<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"."</span></span>,<span class="hljs-string"><span class="hljs-string">","</span></span>,<span class="hljs-string"><span class="hljs-string">":"</span></span>,<span class="hljs-string"><span class="hljs-string">";"</span></span>,<span class="hljs-string"><span class="hljs-string">"("</span></span>,<span class="hljs-string"><span class="hljs-string">"\'"</span></span>,<span class="hljs-string"><span class="hljs-string">"\""</span></span>,<span class="hljs-string"><span class="hljs-string">"-"</span></span>,<span class="hljs-string"><span class="hljs-string">"/"</span></span>,<span class="hljs-string"><span class="hljs-string">"?"</span></span>,<span class="hljs-string"><span class="hljs-string">"!"</span></span>, <span class="hljs-string"><span class="hljs-string">" *DELIMITER* "</span></span>,<span class="hljs-string"><span class="hljs-string">" *ERR* "</span></span>,<span class="hljs-string"><span class="hljs-string">"@"</span></span>,<span class="hljs-string"><span class="hljs-string">" *END* "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span> }; <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>** currentLayout; <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>** newLayout; void setup(){ Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>); pinMode(led, OUTPUT); morseSymbolLen = <span class="hljs-number"><span class="hljs-number">0</span></span>; newMorseSignal = MORSE_EMPTY; } int counter_high = <span class="hljs-number"><span class="hljs-number">0</span></span>; int counter_low = <span class="hljs-number"><span class="hljs-number">0</span></span>; int i; void loop(){ int LDRReading = analogRead(LDR_Pin); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LDRReading &gt;= <span class="hljs-number"><span class="hljs-number">800</span></span>){ counter_high++ ; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( counter_low &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ){ // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"Low\t"</span></span>); // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(counter_low); // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( counter_low &gt; <span class="hljs-number"><span class="hljs-number">1200</span></span>) { // <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt; morseSymbolLen; i++) { // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>( currentLayout[i]); // } sendMorseSymbol(); morseSymbolLen=<span class="hljs-number"><span class="hljs-number">0</span></span>; Serial.println(); //currentLayout[<span class="hljs-number"><span class="hljs-number">0</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">1</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">2</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">3</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">4</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">5</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">6</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">7</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //currentLayout[<span class="hljs-number"><span class="hljs-number">8</span></span>]=<span class="hljs-string"><span class="hljs-string">" "</span></span>; //morseSymbolLen=<span class="hljs-number"><span class="hljs-number">0</span></span>; } counter_low=<span class="hljs-number"><span class="hljs-number">0</span></span>; digitalWrite(led, HIGH); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"."</span></span>); counter_low++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( counter_high &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ){ // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"High\t"</span></span>); // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(counter_high); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (counter_high &lt; <span class="hljs-number"><span class="hljs-number">1200</span></span> ) &amp;&amp;( counter_high &gt;<span class="hljs-number"><span class="hljs-number">350</span></span>)){ // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(counter_high); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"."</span></span>); newMorseSignal=<span class="hljs-string"><span class="hljs-string">"*"</span></span>; morseSymbol[morseSymbolLen++] = newMorseSignal; // currentLayout[morseSymbolLen]=<span class="hljs-string"><span class="hljs-string">"."</span></span>; // morseSymbolLen=morseSymbolLen+<span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( counter_high &gt; <span class="hljs-number"><span class="hljs-number">1200</span></span> ){ // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(counter_high); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"-"</span></span>); newMorseSignal=<span class="hljs-string"><span class="hljs-string">"-"</span></span>; morseSymbol[morseSymbolLen++] = newMorseSignal; // currentLayout[morseSymbolLen]=<span class="hljs-string"><span class="hljs-string">"-"</span></span>; // morseSymbolLen=morseSymbolLen+<span class="hljs-number"><span class="hljs-number">1</span></span>; } counter_high=<span class="hljs-number"><span class="hljs-number">0</span></span>; digitalWrite(led, LOW); } } void sendMorseSymbol() { boolean est; int i, j; est=<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (morseSymbolLen &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(morseSymbolLen); //        . //    . String str1; String strm; str1=<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;morseSymbolLen;i++){ str1=str1+morseSymbol[i]; } // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(code[<span class="hljs-number"><span class="hljs-number">6</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">56</span></span>;i++){ String str2(code[i]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str1.compareTo(str2)==<span class="hljs-number"><span class="hljs-number">0</span></span>){ //Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(str1); // Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"est"</span></span>); Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(str2); est=<span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (est!=<span class="hljs-number"><span class="hljs-number">-1</span></span>){ Serial.<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(layoutLatin[i]); } morseSymbolLen = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre><br></div></div><br><br><h4>  LCD screen receiver </h4><br>  The received data is output to the COM port, which is of course great, but not visual and requires the presence of a computer.  Therefore, we connect a 2 line screen with an I2C connection: <br><br><img src="https://habrastorage.org/files/8e5/3dd/4c7/8e53dd4c7059440abee90955dbd20ae0.png"><br><br>  For the SDA screen, connect the leg of the arduino UNO A5, SCL - A4, screen VCC to 5V, GND to GND: <br><br><img src="https://habrastorage.org/files/7e8/5ab/bf9/7e85abbf931d4cfcb14cfef89ac948f4.jpg"><br><br>  Add in the receiver.ino receiver sketch the lines responsible for the output on the 2 line LCD screen.  You can now go to the field with a compact receiver and read the message directly from the LCD screen. <br><div class="spoiler">  <b class="spoiler_title">sketch receiver with LCD screen</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LCD.h&gt; #include &lt;LiquidCrystal_I2C.h&gt; #include &lt;Wire.h&gt; // Define I2C Address where the PCF8574* is #define I2C_ADDR 0x27 // Define LCD Pins #define BACKLIGHT_PIN 3 #define En_pin 2 #define Rw_pin 1 #define Rs_pin 0 #define D4_pin 4 #define D5_pin 5 #define D6_pin 6 #define D7_pin 7 // Initialize LiquadCrystal with pin setup LiquidCrystal_I2C lcd(I2C_ADDR,En_pin,Rw_pin,Rs_pin,D4_pin,D5_pin,D6_pin,D7_pin); int pos_lcd,pos_lcd2; int LDR_Pin = A0; //analog pin 0 int led = 13; // 10k between GND and A0 // LDR between 5V and A0 //    #define LEVEL_LDR 800 #define MORSE_EMPTY 0 //        . #define MORSE_DOT '*' #define MORSE_DASH '-' //     24    (wpm) = 150   700 , //  12 wpm = 700  1200 #define MORSE_TIME_DOT 150 #define MORSE_TIME_DASH 700 //      (   ) #define MAX_MORSE_SYMBOL_LENGTH 8 char* morseSymbol[MAX_MORSE_SYMBOL_LENGTH]; unsigned int morseSymbolLen; char* newMorseSignal; //    -   . //   . N-    n-  . char* code[] = { "*-","-***","*--","--*","-**","*","***-","--**","**","*---", "-*-","*-**","--","-*","---","*--*","*-*","***","-","**-", "**-*","****","-*-*","---*","----","--*-","-*--","-**-","**-**","**--", "*-*-", "*----","**---","***--","****-","*****","-****","--***","---**","----*","-----", "......","*-*-*-","---***","-*-*-","-*--*-","*----*","*-**-*","-****-","-**-*","**--**","--**--", "-***-","********","*--*-*","**-*-", "" }; //  . char* layoutCyrillic[] = { "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "", "1","2","3","4","5","6","7","8","9","0", ".",",",":",";","(","\'","\"","-","/","?","!", " *DELIMITER* "," *ERR* ","@"," *END* ", "" }; //  . char* layoutLatin[] = { "a","b","w","g","d","e","v","z","i","j", "k","l","m","n","o","p","r","s","t","u", "f","h","c","√∂","ch","q","y","x","√©","√º", "√§", "1","2","3","4","5","6","7","8","9","0", ".",",",":",";","(","\'","\"","-","/","?","!", " *DELIMITER* "," *ERR* ","@"," *END* ", "" }; void setup(){ Serial.begin(9600); pos_lcd=0; lcd.begin (16,2); // Switch on the backlight lcd.setBacklightPin(BACKLIGHT_PIN,POSITIVE); lcd.setBacklight(HIGH); // Reset cursor to home lcd.home (); // Print Hello World // lcd.print("GOTOV priem"); pinMode(led, OUTPUT); morseSymbolLen = 0; newMorseSignal = MORSE_EMPTY; } int counter_high = 0; int counter_low = 0; int i; void loop(){ int LDRReading = analogRead(LDR_Pin); if (LDRReading &gt;= LEVEL_LDR){ counter_high++ ; if ( counter_low &gt; MORSE_TIME_DASH) { sendMorseSymbol(); morseSymbolLen=0; } counter_low=0; digitalWrite(led, HIGH); } else { counter_low++; if ( (counter_high &lt; MORSE_TIME_DASH ) &amp;&amp;( counter_high &gt;MORSE_TIME_DOT)){ Serial.print("."); newMorseSignal="*"; morseSymbol[morseSymbolLen++] = newMorseSignal; } if ( counter_high &gt; MORSE_TIME_DASH ){ Serial.print("-"); newMorseSignal="-"; morseSymbol[morseSymbolLen++] = newMorseSignal; } counter_high=0; digitalWrite(led, LOW); } } void sendMorseSymbol() { boolean est; int i, j; est=-1; if (morseSymbolLen &lt; 1) { return; } //        . //    . String str1; str1=""; for (i=0;i&lt;morseSymbolLen;i++) { str1=str1+morseSymbol[i]; } for (i=0;i&lt;56;i++) { String str2(code[i]); if (str1.compareTo(str2)==0) { Serial.print(str2); est=true; break; } } if (est!=-1) { Serial.print(layoutLatin[i]); //    LCD  if (pos_lcd&gt;16 ) { Serial.print("vtorayStroka"); pos_lcd2=pos_lcd-17; Serial.print(pos_lcd); lcd.setCursor(pos_lcd2,1 ); //  LCD  2  } pos_lcd=pos_lcd+1; if (pos_lcd&gt;32) { lcd.clear(); pos_lcd=0; } lcd.print(layoutLatin[i]); lcd.setBacklight(HIGH); // Backlight on } morseSymbolLen = 0; return; }</span></span></span></span></code> </pre><br></div></div><br><br><h4>  Results </h4><br>  This transmission method worked successfully for me as in the room in the evening at a distance of 0.5‚Äì3 meters, and in the evening on the street at a distance of 7‚Äì14 m. Large distances have not yet been tested.  Transmission during the day will require a light-proof tube so that sunlight and daylight do not fall on the photocell, but only the light from the laser or you need to play around with the LEVEL_LDR parameter responsible for light sensitivity in the receiver's sketch. <br><br><h4>  Sources </h4><br><ul><li>  <a href="http://reversemidastouch.blogspot.ru/2013/09/arduino-morse-code-senderreceiver-pair.html">Arduino Morse Code Sender / Receiver pair using lasers</a> </li><li>  <a href="http://habrahabr.ru/post/83588/">Introducing the Arduino, part 2. Morse keyboard: alpha version</a> </li><li>  <a href="http://habrahabr.ru/post/85530/">Introducing the Arduino, part 3. Morse keyboard: beta version</a> </li><li>  <a href="http://habrahabr.ru/special/microsoft/appoftheyear/app/7688/">Flashlight morse</a> </li><li>  <a href="https://cmsarduino.wordpress.com/">Morse Code Laser Transceiver</a> </li><li>  <a href="http://mad-science.wonderhowto.com/how-to/send-your-secret-spy-messages-wirelessly-through-light-with-diy-laser-audio-transmitter-0138974/">Spiral Laser Transmitter Transmitter</a> </li><li>  <a href="http://www.instructables.com/id/Laser-Transceiver/%3FALLSTEPS">Laser Transceiver (laser data link)</a> </li><li>  <a href="http://blog.christianperone.com/%3Fp%3D2383">Raspberry Pi &amp; Arduino: LDR voltage sigmoid</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/357882/">https://habr.com/ru/post/357882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357860/index.html">Yandex.Catalog stops accepting applications and closes soon</a></li>
<li><a href="../357862/index.html">How to make Push notifications in Safari browser on macOS</a></li>
<li><a href="../357864/index.html">Roskomnadzor will conduct an "experiment" on blocking Zello Internet radio in Russia</a></li>
<li><a href="../357866/index.html">Roskomnadzor continues to destroy the Internet: it's Google's turn</a></li>
<li><a href="../357880/index.html">Arduino programmable relay</a></li>
<li><a href="../357884/index.html">Forecaster Class for Weather Station or Weather Predictor</a></li>
<li><a href="../357886/index.html">Arduino: TV viewing time limit using RFID RC522 and</a></li>
<li><a href="../357888/index.html">DMX-512 Channel Level Transmission Visualization</a></li>
<li><a href="../357890/index.html">We process lines on Arduino</a></li>
<li><a href="../357892/index.html">Based on "Processing lines on Arduino"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
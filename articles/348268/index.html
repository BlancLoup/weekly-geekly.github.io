<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lightning Network: Solution for the last kilometer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the basis of the Bitcoin blockchain, the Lightning Network is launched. There are already several hundred knots in it. Anyone can become a member a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lightning Network: Solution for the last kilometer</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/ii/kf/nd/iikfndybjgrqvsaej6e6hcvd28q.png" alt="Lightning network"></p><br><p>  On the basis of the Bitcoin blockchain, the Lightning Network is launched.  There are already several hundred knots in it.  Anyone can become a member and take advantage of lightning fast and almost free translations. </p><br><p>  Imagine that you are in a cafe and want to drink coffee.  Will the Lightning Network help? </p><a name="habracut"></a><br><h2 id="pryamye-platyozhnye-kanaly">  Direct payment channels </h2><br><p>  You can build a direct payment channel between your own node and a cafe node.  If both Bitcoin nodes are already synchronized with the main blockchain, then you will only need to send a request to create a payment channel to the blockchain, and reserve a certain amount of BTC for this channel.  To pay for coffee, you will need to wait until the confirmation of the channel creation transaction on the blockchain is complete, and then you can make a payment. </p><br><h3 id="sravnenie-pryamyh-platezhey">  Direct Payment Comparison </h3><br><p>  Let's compare direct payment through a Bitcoin transaction and payment through a Lightning Network. </p><br><h4 id="podgotovka">  Training </h4><br><p>  To make a direct payment on the Bitcoin network, you only need to have access to your Bitcoin wallet and know the address of the seller‚Äôs Bitcoin wallet. </p><br><p>  To create a Lightning Network channel, you need access to the active Bitcoin blockchain site.  Moreover, a direct connection between the Lightning Network nodes is also required.  Creating a payment channel Lightning Network must be confirmed by a transaction in the Bitcoin-blockchain. </p><br><h4 id="platyozhnaya-tranzakciya">  Payment transaction </h4><br><p>  Direct Bitcoin payment is a normal transaction, so you need to have access to a Bitcoin wallet and wait an hour to confirm the transaction. </p><br><p>  Payment through the Lightning Network payment channel will be fast, but you must provide a connection between the Lightning Network nodes with access to the active Bitcoin blockchain node.  And it must be remembered that in advance it is required to reserve the necessary amount for this channel. </p><br><h4 id="zakrytie-kanala-i-vyvod-sredstv">  Channel closure and withdrawal </h4><br><p>  In the case of direct Bitcoin payments, no additional operations are required.  After the transaction is committed, the payment "turns out" in the seller‚Äôs wallet. </p><br><p>  The payment channel Lightning Network must be closed using a transaction in the Bitcoin blockchain, which requires confirmation. </p><br><h2 id="cepochka-platyozhnyh-kanalov">  Chain of payment channels </h2><br><p>  One of the advantages of the Lightning Network is the ability to make a payment through a chain of payment channels without creating a direct payment channel between the buyer and the seller.  The only limitation is the presence of a path in the Lightning Network between the buyer and seller nodes, the availability of these nodes at the time of the transaction, and sufficient funds reservation in each of the payment channels of the path. </p><br><p>  In this case, it will be possible to spend the reserved funds not only in the cafe, but also in any other node of the Lightning Network.  For a cafe, everything is not so great.  Now, some other Lightning Network node must create a payment channel in advance from the cafe and reserve a certain amount, without knowing who will buy something and when.  In addition, both the buyer and the seller still need to support Lightning Network nodes with access to the active Bitcoin blockchain node. </p><br><h2 id="posledniy-kilometr">  Last kilometer </h2><br><p>  So, we come to the problem of the last kilometer.  How can you take full advantage of the Lightning Network and make it easily accessible to end users and organizations? </p><br><p>  The simplest answer is not to create Lightning Network payment channels at the end sections (last kilometer).  Let's look at the following scheme: </p><br><p><img src="https://habrastorage.org/webt/ui/5h/f8/ui5hf857388-5jemwwmqaewi6mg.png" alt="Last kilometer"></p><br><p>  Next, we assume that the node B can create an order, and the node A can instantly pay for it in the Lightning Network.  That is, the path between the nodes exists and sufficient funds are reserved in the payment channels. </p><br><p>  In this case, you must perform the following steps: </p><br><ol><li>  The client tells the seller what products he wants to buy. </li><li>  The seller asks node B to form a payment order for the required amount. </li><li>  The seller gives the order number to the customer. </li><li>  The client sends the received order number to node A and asks for payment. </li><li>  Host A pays for the order at the Lightning Network. </li><li>  Node B informs the seller that the order is paid. </li><li>  The seller sends the order to the customer. </li></ol><br><p>  Consider these steps on the example of the situation in the cafe.  So, you chose coffee and reported it to the seller.  He calculated the total amount of the order and sent it to node B. To do this, on the side of node B, a fairly simple service (or a web page), where a unique order number will be issued to the Lightning Network for the entered amount. </p><br><p>  In the next step, minor difficulties might arise, since the order number in the Lightning Network is very long.  As a solution, one could use a QR code, or simply generate a link on an internal or external abbreviation service.  The received order number in Lightning Network is transmitted to node A, for example, through a mobile application or website. </p><br><p>  After receiving payment, node B can send a push notification to the seller, or the seller periodically requests the status of the order.  When confirmation is received, you start to make coffee. </p><br><h3 id="pos-oplata">  POS payment </h3><br><p>  The scheme is similar to the usual payment by credit card.  The key difference is that the seller‚Äôs acquiring bank requests the possibility of a transaction from the client‚Äôs bank.  This is possible because all the protocols are described and the banks trust the equipment that is pre-installed in the cafe (POS-terminal) and issued to you (bank card). </p><br><p>  It is possible that suitable protocols and equipment will appear and be distributed in the future in the blockchain.  Then node A will ask you for authorization through node B. But this will require that your equipment be compatible with the equipment in the cafe.  It is much easier to request online access to node A, keeping the previous scheme.  But the transfer of the account number to the Lightning Network is still to be simplified. </p><br><h3 id="v-chyom-podvoh">  What's the catch? </h3><br><p>  What prevents you and the nearby cafe to start using the proposed scheme right now?  First, the legal status of Bitcoin, Lightning Network, etc. is still not defined.  Are everyone willing to take risks in this regard? </p><br><p>  Secondly, node A and node B play an important role in the approach, and interaction with them occurs outside the Lightning Network.  The question is how to find these nodes and negotiate with them? </p><br><p>  Here I note that the distribution will depend on the availability of software and hardware solutions for establishing interaction between the client and the node A, as well as the seller and the node B. But this issue can be resolved quite quickly. </p><br><p>  On the basis of what will the interaction between the client and node A be built?  Or between node B and seller?  The answer is simple - on trust. </p><br><h3 id="doverie">  The trust </h3><br><p>  I want to immediately emphasize that we are talking about trust only in the final sections.  In the case of a client, either he must trust node A and make a deposit in advance, which he will then spend, or, conversely, node A trusts the client and is ready to provide a loan.  But this is already happening, for example, when a bank issues a debit or credit card.  That is, there is nothing new here. </p><br><p>  In contrast to the situation with the Lightning Network payment channels, in this case, trust from the seller is sufficient for node B. Thus, node B will not have to reserve funds for each cafe in advance, that is, the threshold of entry for any seller will be minimal if he trusts a certain node B. </p><br><p>  I will add that the purchase of coffee in any case will be based on trust, since there is no guarantee that after payment you will receive what you ordered, even if you are dealing with an automatic machine.  That is, after the payment you have to trust the seller until you get the coffee. </p><br><p>  There is still a question about the receipt of money by node A from the buyer and by the seller from node B. But there are no restrictions if the chosen method will suit both parties. </p><br><h2 id="epilog">  Epilogue </h2><br><p>  Solutions for the last kilometer may be different.  A new technology will spread faster if mass application of known approaches is possible.  The simple solution is often better than the rest. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/348268/">https://habr.com/ru/post/348268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348254/index.html">Dart Summit 2018: basic thoughts</a></li>
<li><a href="../348258/index.html">W3View - Javascript library for which HTML was created.</a></li>
<li><a href="../348260/index.html">The combination of R and Python: why, when and how?</a></li>
<li><a href="../348262/index.html">Its a snake, or write the first draft. Part 0</a></li>
<li><a href="../348264/index.html">Richard Hamming: Chapter 9. N-Dimensional Space</a></li>
<li><a href="../348270/index.html">Another reality of the financial market</a></li>
<li><a href="../348272/index.html">The sum of the sums of arithmetic progressions</a></li>
<li><a href="../348276/index.html">Richard Hamming: Chapter 14. Digital Filters - 1</a></li>
<li><a href="../348278/index.html">The digest of fresh materials from the world of the frontend for the last week No. 300 (January 29 - February 4, 2018)</a></li>
<li><a href="../348280/index.html">Writing DNS proxy on Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
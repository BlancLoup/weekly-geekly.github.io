<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How MTS ‚Äúgrinds‚Äù its geolocation services for corporate clients</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How geolocation services from MTS help large companies manage 1000+ field staff, and Dmitry Korovin, an expert in M2M from MTS, will tell you about un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How MTS ‚Äúgrinds‚Äù its geolocation services for corporate clients</h1><div class="post__text post__text-html js-mediator-article">  <i>How geolocation services from MTS help large companies manage 1000+ field staff, and Dmitry Korovin, an expert in M2M from MTS, will tell you about unique geolocation cases for oilmen and railway workers.</i> <br><br>  Hello!  I'll start with a brief introduction to the topic.  We have a large portal MTS Search, which presents geolocation services from MTS.  Portal functionality is divided into three large blocks. <br><br>  1. Monitoring the location of employees at the base stations of operators. <br>  The company's dispatcher can determine the location of his visiting employees using the SIM cards of smartphones. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. "MTS Tracker" and "MTS Coordinator". <br>  The company's dispatcher can determine the location of his field staff by using SIM-cards, GPS / GLONASS or Wi-Fi smartphones (in the case of MTS Coordinator). <br><br>  3. "MTS Transport" <br>  The company's dispatcher determines the location of the mobile vehicle by signals from GPS / GLONASS terminals installed in vehicles.  Accuracy is 3-5 meters. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d79/870/fab/d79870fab7685e37bcdfd453c17d1921.png" alt="image"><br><a name="habracut"></a><br>  I will briefly tell the history of the development of MTS geolocation services, just below show how they are arranged from the inside.  First, we provided the ability to determine the location of the employee at the base stations of cellular communication.  However, over time, the tasks of the customers demanded greater accuracy of the location.  Geoposition determination in large agglomerations with an accuracy of 300 meters is not always sufficient for solving business problems.  For example, in one house there are two points.  Which of them the courier visited was not always clear.  It was necessary to give certain tolerances when calculating KPI.  For example, if the courier spent in the building not 15, but 30 minutes, then, most likely, he visited both points. <br><br>  We analyzed all the applications for iOS and Android that were present at that moment, in search of the application that most accurately determines the location.  As a result, we launched the MTS Tracker application to the market in 2011, which, using the built-in GPS / GLONASS chip or Wi-Fi module, writes the track itself and sends the coordinates to our server. <br>  With the development of smartphones, we realized that the phone can become a full-fledged tool for setting tasks and monitoring their implementation - no need to purchase any additional equipment.  So our application "MTS Coordinator" appeared.  It absorbed all the functionality of the MTS Tracker, as well as the possibility of setting tasks online, receiving reports on them and communicating with the employee. <br><br>  Also, our service has grown a functional API.  This allowed us to integrate customer information systems directly into our service (for example, the Sberbank-service system, which handles 3.5 thousand tasks per day).  Thus, the client does not have to set tasks in two systems (in his and ours), which makes it possible to work effectively with the staff of traveling 1000+ employees. <br><br>  The MTS Coordinator service is connected as an additional service to the corporate communication contract.  In order to use the service, the client needs to have in addition to the contract several smartphones and SIM-cards connected to the Mobile Employees service.  The application is downloaded from the App Store and Play Market, installed on telephony and logs in.  And that's it, the work begins. <br><br><h2>  How things are arranged </h2><br>  Some statistics.  Today, our service processes more than 1.5 million requests per day.  About 7 thousand companies are connected to the service.  This is more than 1.5 million subscribers.  We have customers who use this service 5+ thousand employees.  In order for the service to cope with such a load, we did a great job of developing our data center. <br><br>  The platform includes 100+ servers, 400 software components and services, 100+ databases with a total volume of more than 100+ terabytes.  During the day, the platform processes 60 million GPS locations from 1.5 million subscribers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb8/a4b/3d0/cb8a4b3d0a9bf6720fc9bf464edb6270.png" alt="image"><br><br>  We develop components using a template that provides for a certain ‚Äúgentleman's set‚Äù: an application is a host with infrastructure libraries, a set of basic configurations and plug-in interfaces that need to be implemented for your case.  Thus, we have seriously simplified the process of debugging and optimization. <br><br>  Our equipment for monitoring the location of transport removes data from an accelerometer with a frequency of 100 times per second and data on location and speed ‚Äî once a second over several hundreds of thousands of terminals.  So the amount of data is decent. <br><br>  In the early days of the project, we used the database as a tool for interprocess communication, creating tables for message queues and tracking record statuses.  Very soon, the database became hard to cope with their direct responsibilities, so we removed from it some of the tasks.  So in the project appeared: <br><br>  - RabbitMQ routed queues: to replace polling of the database with pipelining of data and event generation; <br><br>  - Redis state storage: for static data that rarely changes, but is frequently requested, or for operational data required for the operation of several components; <br><br>  - DBMS Cassandra: as a tool for storing a growing amount of data in NO SQL format with the ability to quickly scale. <br><br><h2>  How does the work of "MTS Coordinator" </h2><br>  The dispatcher, being in his back office, starts a task.  The task can be multi-component and consist of a different number of fields - depending on the needs of the client.  For example, someone needs to, as the task is completed, simply tick the required fields, and someone needs the contractor to enter, for example, the serial number of the ATM that he has just serviced.  All this can be done thanks to a wide tuning functionality. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b19/363/829/b193638298214531b6b29bedabc62ad1.png" alt="image"><br><br>  The dispatcher on the MTS Search portal sees the online location of all employees (at which metro station, etc.).  An employee is assigned to a task who either is located closest to the place where the task will be performed or has greater competence to resolve this issue.  The task is displayed in the form of push-notifications in the application from the field employee.  On-line, he can watch it, accept / reject, comment on it, discuss with the dispatcher in the chat and proceed to its execution.  The dispatcher sees the process of acceptance by the employee of the application, the status of its execution, the report, the trajectory of the employee. <br><br>  Also on the portal generated statistics on the implementation of tasks.  It is worth noting that there are several types of reports: by task status, by statistical calculations, by the number of tasks completed by this or that department, by the amount of time spent, meters, and so on. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/042/107/b80/042107b80e8cbef502cb31df307c2de5.png" alt="image"><br><br><h2>  power usage </h2><br>  Since 2011, we are constantly working to ensure that the application consumes as little as possible of the resources of the smartphone and tablet - both memory and battery.  Now we are giving the client quite rich settings in order to save energy.  If he does not need a detailed track, then you can change the settings so that the track is rough - the location will be sent every 5 minutes.  In addition, you can configure the application so that in the presence of external power it automatically turns on the exact track recording, and in the absence it turns off.  As a result, the power consumption of the application version of 2012 and the latest version has decreased significantly.  By myself I know: charging my iPhone5 today is enough for a day.  Previously, of course, not enough. <br><br><h2>  Photo report </h2><br>  At the request of customers, we added the ability for employees to upload a photo report.  Any number of photos can be attached to the task.  If you are a menhairizer, you can copy the shelf with the display, report and leave.  If you are a courier, you can immediately scan the signed documents and send them to the office.  It is noteworthy that the application makes geo-targeted photograph.  This ensures that the photo was taken at the specified place, at the specified time. <br><br><h2>  Geolocation </h2><br>  As already mentioned, we have a unique opportunity to determine the location of off-site staff by three parameters: GPS / GLONASS chip, Wi-Fi module and base stations.  Competitors either do not have such a possibility of definition, or do not have such a service. <br>  If an employee is in a building where satellites do not ‚Äúfinish off‚Äù, then his search goes through base stations.  We have learned to measure the signal level and determine how far a person is from a particular base station.  Thanks to this, we have improved the accuracy of determining the BS from 2 km to hundreds of meters, and in the city within 100 meters. <br><br>  In addition, the location of the employee in the building is on the Wi-Fi-networks.  It's no secret that Google collects data from all smartphones via Wi-Fi-points and their location.  Accuracy at Wi-Fi-locations - 10-20 meters.  By the way, if a smartphone sees 3-5 satellites, then the determination accuracy is 3-5 meters. <br><br>  There are customers who are interested in: is it possible to find out not only in which building the employee is located, but also on which floor.  Frankly, there is no such option.  Technically, there are several options for solving this problem.  The first option is quite complicated: the smartphone has a device that measures the magnetic field.  With the help of this sensor the number of floors can be set.  The second option: the creation of artificial markers for orientation in the room, for example, Bluetooth-markers.  A smartphone, passing through the markers, determines its location.  As soon as there is not just interest, but an order, we will be able to implement this solution. <br><br>  Some time ago we proposed to implement the technology to railway workers.  They wanted to see online how trains move in a huge depot.  Equipping cars with GPS modules would be too expensive and energy-consuming.  Therefore, we proposed to attach a passive tag to the car as a solution, and put a ‚Äúreader‚Äù on the arrows.  The car rolls past the tags, and we understand where it is.  While the project is not implemented. <br><br>  I'll tell you more about one case, when we ‚Äúfinished the‚Äù application for a client.  So, one of the companies that owns a network of gas stations, it was necessary to monitor the work of service engineers, checking the work of gas stations.  Engineers went around all the gas stations and checked whether the prices were set correctly, if all the lights were on, if the goods were laid out correctly, etc.  The client required to fix not just the engineers on the highway past the gas station, but also the fact that the employee had stopped at the gas station, went into it and stayed there for a while.  The difficulty was that service engineers were equipped with tablets from Apple.  And the iPad has very strict software writing requirements, plus they do not provide the ability to manage power consumption.  This was a huge problem, because if the engineer did not use the tablet for some time, then our application would be unloaded and could not ‚Äúcapture‚Äù the fact of visiting the object.  As a result, we have significantly improved the application for iOS in terms of power consumption and GPS / GLONASS control.  The application was two times less consume battery power and allowed to establish a balance between accuracy and power consumption.  The revision took about two months.  In addition, we developed a unique report for this client, which reflected not only the fact of visiting the gas station, but also the time spent at the facility.  Based on this, the company is now evaluating the work of service engineers. <br><br><h2>  Can employees cheat the system? </h2><br>  Theoretically, yes.  You can edit the report photo, changing its geolocation and time, and load it into the application as a file.  But it will be clear that the photograph is not from the camera, but from the file.  In principle, we can connect an additional module and detect the facts of photo editing.  But so far none of the clients have expressed a desire to introduce such a module. <br><br>  Theoretically, it is also possible to forge an employee's geo-position, but expensive.  Need a special system of substitution of coordinates.  Recently, social networks have been discussing how a supposedly similar system works near the Kremlin.  The drivers noticed that, approaching the Kremlin, they suddenly, according to the navigator, found themselves in Vnukovo.  Our service has protection against erroneous coordinates.  If suddenly a person, according to GPS-coordinates, moves too far with some extreme speed, then these coordinates will be eliminated as incorrect. <br><br><h2>  All under the hood? </h2><br>  It is obvious that someone in your organization may negatively relate to the introduction of such services.  Say, over employees establish total control.  But in my experience I can say that the staff takes a positive view of the implementation of the MTS Coordinator.  Since in addition to the ‚Äústick‚Äù in the form of determining the exact geo-location of each employee, there is a ‚Äúcarrot‚Äù among the functional.  Now the field employee does not need to call in to the office for orders, write a report with his hands or score figures in Excel - the application does it for you.  That is, we give people a tool that makes their work more efficient and convenient, and allows us to complete more applications.  Conventionally, in one day it is possible to fulfill not one application, but five. <br><br><h2>  Our plans for the future </h2><br>  In the future, we plan to implement a full-fledged API.  A more extensive messenger, machine analysis, and forecasting will appear.  We will also make for the clients a report designer and tasks for any tastes and production requests.  Now report templates are created by focus request.  We want to make our platform as flexible as possible. <br><br>  Also in the future we will introduce artificial intelligence, which will be recommended to the dispatcher of certain employees for the performance of each task.  For example, it is necessary to repair the fiber optic line near the Domodedovo airport.  The dispatcher needs to quickly find an employee who has competencies and will be able to arrive there as soon as possible.  The system will make recommendations on which employees have the minimum drive time, necessary experience and ‚Äúzips‚Äù. <cut></cut></div><p>Source: <a href="https://habr.com/ru/post/321574/">https://habr.com/ru/post/321574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321564/index.html">It is finished! Procedural macros in Rust 1.15</a></li>
<li><a href="../321566/index.html">From zero experience to 6-digit salary: a play in 8 acts</a></li>
<li><a href="../321568/index.html">Difficulty Choosing a Hoster</a></li>
<li><a href="../321570/index.html">Evening Activity: Explode Effect on pure JS</a></li>
<li><a href="../321572/index.html">Installing Zabbix Agent on VCSA 6.5</a></li>
<li><a href="../321576/index.html">Ten world CRM trends to talk about</a></li>
<li><a href="../321578/index.html">ChairInput. We write the game in Unity, managed using the Android virtual keyboard. Problem with camera angle</a></li>
<li><a href="../321580/index.html">Trigger mailings: how to increase conversion</a></li>
<li><a href="../321582/index.html">PVS-Studio and GitHub-community: the beginning of friendship</a></li>
<li><a href="../321584/index.html">Angular 1.x: creeping webpack, hidden grunt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
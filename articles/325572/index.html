<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Users convinced GitLab not to leave the cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Image source 


 At the end of 2016, Gitlab announced that it was going to leave the cloud (we did a translation of this article to Medium). A very de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Users convinced GitLab not to leave the cloud</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/0e9/b26/253/0e9b262531b043608769bb9c1f537915.jpg"><br><p>  <em><a href="http://www.eurobs.co.uk/news/2015/04/23/should-you-move-to-the-cloud-or-replace-your-old-server/">Image source</a></em> </p><br><p>  At the end of 2016, Gitlab announced that it was <a href="https://about.gitlab.com/2016/11/10/why-choose-bare-metal/">going to leave the cloud</a> (we did a <a href="https://medium.com/southbridge/gitlab-how-we-knew-it-was-time-to-leave-the-cloud-cb96aae8121f">translation of this article</a> to Medium).  A very detailed <a href="https://about.gitlab.com/2016/12/11/proposed-server-purchase-for-gitlab-com/">hardware purchase plan</a> was also presented.  Users followed the events with interest, actively commented on the published articles and eventually convinced GitLab to abandon this idea. </p><br><p>  This story has an additional intrigue.  GitLab, which itself is essentially a cloud service provider (although providing an application to users, rather than computing resources), suddenly decided that, as a consumer, such a scheme of work no longer suits, but still <a href="https://about.gitlab.com/2017/03/02/why-we-are-not-leaving-the-cloud/">changed its mind</a> . </p><a name="habracut"></a><br><p>  GitLab experts seriously thought about leaving the cloud in November 2015, when task <a href="https://gitlab.com/gitlab-com/infrastructure/issues/727"># 727</a> was created to switch to its own hardware. </p><br><p>  The main disadvantage the company saw was the insufficient disk subsystem capacity for GitLab in Azure, as well as the need to share the cloud infrastructure with other users.  This problem was planned to be solved by switching to our own server hardware, which also had to give substantial savings. </p><br><p>  Describing the financial side of the issue, the company reported that hosting GitLab.com in Azure (not including GitLab CI) at that time cost about $ 200k per month.  At the same time, the purchase of own equipment was equal in value to three months of cloud hosting.  The colocation of their servers was estimated at $ 10k per month.  That is, two and a half years would have been achieved tenfold savings.  A detailed description of the costs can be found here in this publicly available <a href="https://docs.google.com/spreadsheets/d/1XG9VXdDxNd8ipgPlEr7Nb7Eg22twXPuzgDwsOhtdYKQ/edit">spreadsheet</a> . </p><br><p>  However, users rightly pointed out that GitLab‚Äôs core competency is software development, and the company greatly underestimates the level and number of specialists, as well as the costs required for self-maintenance of infrastructure of this scale, especially in the event of emergency situations. </p><br><p>  The company‚Äôs proposals for specific components of the server equipment that were planned for purchase were also analyzed in detail.  As a result, much has been criticized: the architecture, the number of servers, hard drives, etc., as well as the presence of many spaces and undisclosed topics. </p><br><p>  With regard to performance, the general conclusion was as follows: the additional costs of virtualization do not exceed 3%, so leaving the cloud is unlikely to solve the problems of lack of bandwidth I / O system.  In addition, the lack of bandwidth could be more related to the lack of efficiency of NFS, CephFS and, in particular, the git version control system, which is not optimized for the parallel operation of a large number of users.  As a result, it was decided to abandon CephFS and develop a solution to optimize access to git-repositories, which was called <a href="https://gitlab.com/gitlab-org/gitaly">Gitaly</a> . </p><br><p>  Well, in this round of struggle ‚Äúcloud vs own computer‚Äù white and fluffy won again.  The process of increasing the complexity of the infrastructure and the narrowing of areas of specialization in the field of IT continues - to be a master of all trades every year is more difficult. </p><br><p>  We should also note the openness of GitLab, which, thanks to this <a href="https://about.gitlab.com/handbook/values/">value,</a> during the <a href="https://habrahabr.ru/company/centosadmin/blog/321074/">incident with the accidental deletion of the database,</a> managed to turn defeat into a victory, but this time, in the matter of leaving the cloud, it gained from its weakness - lack of competence.  Thanks to a broad public discussion, the company, on the one hand, was able to get an abundance of qualified community help and make a better decision, and on the other hand, to share experiences with people who may have similar choices or are simply interested in these issues.  It is always curious to see how important tasks are solved in other organizations, how they think and what tools they use to facilitate their work. </p><br><p>  References: </p><br><ol><li>  Issue # 727 in the GitLab.com bugtracker, where the problem was originally announced: <a href="https://gitlab.com/gitlab-com/infrastructure/issues/727">https://gitlab.com/gitlab-com/infrastructure/issues/727</a> . </li><li>  GitLab Infrastructure Update, which discusses performance issues (there is a link to the entertaining video of a working call): <a href="https://about.gitlab.com/2016/09/26/infrastructure-update/">https://about.gitlab.com/2016/09/26/infrastructure-update/</a> . </li><li>  The article about leaving the cloud: <a href="https://about.gitlab.com/2016/11/10/why-choose-bare-metal/">How</a> it <a href="https://medium.com/southbridge/gitlab-how-we-knew-it-was-time-to-leave-the-cloud-cb96aae8121f">knit</a> it and the <a href="https://medium.com/southbridge/gitlab-how-we-knew-it-was-time-to-leave-the-cloud-cb96aae8121f">cloud: Gitlab: we understood that it was time to leave the cloud</a> . </li><li>  Article about the planned server equipment purchase: <a href="https://about.gitlab.com/2016/12/11/proposed-server-purchase-for-gitlab-com/">Proposed server purchase for GitLab.com</a> . </li><li>  Electronic plate with calculations on equipment and hosting: <a href="https://docs.google.com/spreadsheets/d/1XG9VXdDxNd8ipgPlEr7Nb7Eg22twXPuzgDwsOhtdYKQ/edit">https://docs.google.com/spreadsheets/d/1XG9VXdDxNd8ipgPlEr7Nb7Eg22twXPuzgDwsOhtdYKQ/edit#gid=894825456</a> . </li><li>  Discussion of the proposal to purchase equipment on Hacker news: <a href="https://news.ycombinator.com/item%3Fid%3D13153031">https://news.ycombinator.com/item?id=13153031</a> . </li><li>  Post in issue # 727, explaining why the company changed its mind to leave the cloud: <a href="https://gitlab.com/gitlab-com/infrastructure/issues/727">https://gitlab.com/gitlab-com/infrastructure/issues/727#note_20044060</a> . </li><li>  Gitlab's blog post, where a point is put on the issue of switching to your hardware and the user comments that seemed most helpful to the staff of GitLab are given: <a href="https://about.gitlab.com/2017/03/02/why-we-are-not-leaving-the-cloud/">https://about.gitlab.com/2017/03/02/why-we-are-not-leaving- the-cloud /</a> . </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/325572/">https://habr.com/ru/post/325572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325560/index.html">About configuring Open vSwitch a difficult language</a></li>
<li><a href="../325564/index.html">R, GIS and fuzzyjoin: restore statistics for the NUTS regions</a></li>
<li><a href="../325566/index.html">Why the cloud does not take off: how loyalty systems work in stores</a></li>
<li><a href="../325568/index.html">Full development environment automation with docker-compose</a></li>
<li><a href="../325570/index.html">How to test docker image for half a second</a></li>
<li><a href="../325574/index.html">Announcement of mitc.ap Sync.NET # 4 in Kharkov</a></li>
<li><a href="../325576/index.html">Freedom of choice: freelance or large corporation</a></li>
<li><a href="../325580/index.html">UFOCTF 2017: we decompile Python in the King Arthur assignment (PPC600)</a></li>
<li><a href="../325582/index.html">Fail-safe processing of 10M OAuth tokens on Tarantool</a></li>
<li><a href="../325586/index.html">Automation of printing in corporate systems or how to make friends with your ‚Äúbike‚Äù with a printer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
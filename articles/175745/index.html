<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Firefox: file size by reference, or through thorns to fork</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A short history of the appearance of the Link Properties Plus extension and a description of how its main part works is presented to your attention. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Firefox: file size by reference, or through thorns to fork</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/167/6e5/38e/1676e538efcb0aaea8603bfe3e2148b6.png" alt="Screenshot of the Link Properties Plus extension"><br>  A short history of the appearance of the <a href="https://addons.mozilla.org/addon/link-properties-plus/">Link Properties Plus</a> extension and a description of how its main part works is presented to your attention. <br>  The extension allows you to find out the size, the date of the last change, and some other properties of the file by reference (including a direct link after all redirections) without downloading the entire file.  Unless, of course, all this is reported by the server. <br><a name="habracut"></a><br><br><h1>  How it was </h1>  Once upon a time there was an extension of <a href="https://addons.mozilla.org/addon/extended-link-properties/">Extended Link Properties</a> , and it worked. <br>  Then there was an updated version of the already closed <a href="http://forum.addonsmirror.net/index.php%3Fshowtopic%3D6594">forum.addonsmirror.net</a> ( <a href="http://forum.addonsmirror.net/index.php%3Fshowtopic%3D6594">copy on web.archive.org</a> ). <br><br><h2>  1.3.x </h2>  But in <a href="https://forum.mozilla-russia.org/viewtopic.php%3Fpid%3D333576">June of 2009,</a> I wanted a strange one.  So it turns out that it‚Äôs good (in terms of results) or bad (I wish I had slept), and sometimes I want something strange. <br>  As a result, the extension learned to work with the file selection window.  Well, minor improvements as a bonus. <br>  Unfortunately, it was not without its difficulties: the built-in file downloader starts downloading the file, without waiting for the user to choose what to do with this file.  This, of course, is a separate ‚Äúproblem‚Äù (fortunately, the extra traffic is no longer so critical), but it gave rise to a much more serious one: while the file was being downloaded, it was impossible to make a request using the same link - that is, the request seemed to be , was sent, but the answer comes after the download.  And without a request, of course, I don‚Äôt know anything - only the remote server knows what file it has. <br>  So the idea was to add to the link "?  <em>random_number</em> .  Yes, there is a possibility that the server will return other information to the modified request, but this is still much better than nothing. <br>  Hack, by the way, turned out to be no longer needed in new versions, although one user <a href="https://addons.mozilla.org/addon/link-properties-plus/reviews/user:6909804">either fell or Thunderbird hung up</a> trying to open PDF files from attachments ‚Äî it helped to enable hidden settings to force the hack to turn on. <br>  But it was somehow lazy to lay out on the <a href="https://addons.mozilla.org/">AMO</a> - and the hack for the download window was still, and it was more interesting to continue the improvements.  In addition, it was necessary to change <a href="https://developer.mozilla.org/en-US/docs/Install_Manifests">the</a> extension <a href="https://developer.mozilla.org/en-US/docs/Install_Manifests">identifier</a> and somehow notify users who have already installed the version with the original identifier. <br>  Then, in Firefox 3.7a1pre, the Properties item was removed from the context menu, and the original extension stopped working, now forever.  I had to <a href="https://forum.mozilla-russia.org/viewtopic.php%3Fpid%3D376740">add</a> support for <a href="https://addons.mozilla.org/addon/element-properties/">Element Properties</a> , the replacement extensions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  1.4.x </h2>  Anyway, in <a href="https://forum.mozilla-russia.org/viewtopic.php%3Fpid%3D425319">May of 2010</a> a new version appeared, for the time being a test version.  Already with its window and not dependent on the remote properties dialog.  Well, and without various useful cosmetic trifles not done. <br>  At the same time, a shortfall was discovered: <a href="https://addons.mozilla.org/addon/extended-link-propertie-124503/">Extended Link Properties +</a> , the code of which fully corresponded to my version 1.3.5 ‚Äî there were changes, but they affected only the localization. <br>  Of course, I was offended - they didn‚Äôt ask me (and didn‚Äôt try to persuade to put it on AMO), but I really didn‚Äôt want to waste time and nerves on disassembling.  :) I had an unfinished new version with a bunch of untested changes - much more interesting (and more useful - yes, this is a kind of selfishness) was to deal with it.  So instead of fights there is support for FTP links. <br>  In the meantime, <a href="https://bugzilla.mozilla.org/show_bug.cgi%3Fid%3D455913">Bug 455913 - nsIHelperAppLauncher should provide info about content length</a> , so that the size in the download dialog could be recognized right away. <br><br><h2>  1.5.x </h2>  It was leisurely and with breaks for several months: 1.4.1pre1 in April of 2011, release - after almost two years, in January of 2013. <br>  But a full-fledged fork was made with a new identifier, support was added for new versions of Firefox with a red button instead of the default hidden menu and the ability to manually set an arbitrary <a href="https://ru.wikipedia.org/wiki/HTTP_referer">HTTP referer</a> , open and save links directly from the properties window.  And support Thunderbird, processing almost all protocols and displaying a direct link to the file.  And even once long ago promised automatic closing of the window. <br><br>  It was, so to speak, a historical reference. <br>  And now we will make the simplest implementation of getting the file properties by reference. <br>  For the leisurely <a href="https://habr.com/ru/post/175745/">at the very end, there</a> is a link to the received code. <br><br><h1>  How is it now, implementation </h1>  For starters, the easiest way to test code. <br>  You must enable <em>devtools.chrome.enabled</em> = true in about: config and run <br>  Web Development - Simple JavaScript editor aka Scratchpad (Shift + F4) <br>  Next, select <br>  Surroundings - Browser <br>  Everything, you can test the code that will run with permissions like extensions (so you shouldn‚Äôt run anything). <br><br><h2>  The minimum option for obtaining reference properties </h2>  For sending arbitrary requests, there is <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannel">nsIChannel</a> , in the same place you can read that we need either <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIIOService">nsIIOService.newChannel ()</a> or <a href="http://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIIOService">nsIIOService.newChannelFromURI ()</a> . <br>  And we have a text link.  That is, it is logical to use newChannel (), but only practice shows that you still need the URI - you can stumble upon a <a href="https://addons.mozilla.org/addon/custom-buttons/">custom</a> protocol ( <a href="https://addons.mozilla.org/addon/custom-buttons/">Custom Buttons</a> ) that does not return anything, but it is possible for the about: ( <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIAboutModule">nsIAboutModule</a> ) protocol - in general, entertainment, but also about such links you can learn something, so why not. <br>  Thus, the details are not yet clear, but it is clear that you need to create an instance of nsIChannel and call it <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannel">asyncOpen ()</a> .  And this asyncOpen () takes as its first argument the implementation of <a href="http://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIStreamListener">nsIStreamListener</a> 'a, which will let us know the result of the sent query. <br>  Perhaps it's time to show an example: <br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     : var uriString = "https://addons.mozilla.org/firefox/downloads/latest/413716/addon-413716-latest.xpi"; var referer = "https://addons.mozilla.org/"; var ios = Components.classes["@mozilla.org/network/io-service;1"] .getService(Components.interfaces.nsIIOService); var uri = ios.newURI(uriString, null, null); var scheme = uri.scheme &amp;&amp; uri.scheme.toLowerCase(); var channel = scheme == "about" &amp;&amp; "nsIAboutModule" in Components.interfaces //    about:  ? Components.classes["@mozilla.org/network/protocol/about;1?what=" + uri.path.replace(/[?&amp;#].*$/, "")] .getService(Components.interfaces.nsIAboutModule) .newChannel(uri) : ios.newChannelFromURI(uri);</span></span></code> </pre> <br>  Now we have an instance of nsIChannel, and we need to do something about it.  :) <br>  First, you should implement nsIStreamListener.  And secondly, <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel">nsIHttpChannel.visitRequestHeaders ()</a> / <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel">nsIHttpChannel.visitResponseHeaders () is</a> useful (in case the resulting nsIChannel is also an <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel">nsI <em>Http</em> Channel</a> ).  Well, the <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFTPChannel">nsI <em>FTP</em> Channel</a> has a <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFTPChannel">lastModifiedTime</a> property. <br>  So we get the following continuation: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observer = { ... }; <span class="hljs-comment"><span class="hljs-comment">//     nsIStreamListener  nsIHttpHeaderVisitor var data = []; //         var headers = []; //   ,   if(channel instanceof Components.interfaces.nsIHttpChannel) { //   instanceof   // channel.QueryInterface(Components.interfaces.nsIHttpChannel), //           channel.requestMethod = "HEAD"; // HEAD- channel.setRequestHeader("Referer", referer, false); channel.visitRequestHeaders(observer); headers.push(""); //       } //    ,  nsIFTPChannel    channel instanceof Components.interfaces.nsIFTPChannel; channel.asyncOpen(observer, null);</span></span></code> </pre><br>  In general, of course, to propagate global variables unnecessarily is not good, but it is more obvious.  And if there are any difficulties with cutting examples into modules and other encapsulation, I have bad news for you.  :) <br><br>  Now let's try to make an observer object that implements the necessary interfaces: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observer = { <span class="hljs-comment"><span class="hljs-comment">// nsIRequestObserver (nsIStreamListener   ) onStartRequest: function(aRequest, aContext) { if(aRequest instanceof Components.interfaces.nsIHttpChannel) aRequest.visitResponseHeaders(this); else { if("contentType" in channel) data.push(" : " + channel.contentType); if("contentLength" in channel) data.push(" : " + channel.contentLength); if("responseStatus" in channel &amp;&amp; "responseStatusText" in channel) data.push(": " + channel.responseStatus + " " + channel.responseStatusText); if("lastModifiedTime" in aRequest &amp;&amp; aRequest.lastModifiedTime) { // Firefox 4 var t = aRequest.lastModifiedTime; data.push(" : " + new Date(t &gt; 1e14 ? t/1000 : t).toLocaleString()); } } }, onStopRequest: function(aRequest, aContext, aStatusCode) { if(aRequest instanceof Components.interfaces.nsIChannel &amp;&amp; aRequest.URI) data.push(" : " + aRequest.URI.spec); this.done(); }, // nsIStreamListener onDataAvailable: function(aRequest, aContext, aInputStream, aOffset, aCount) { // , -   ,     ,  aRequest.cancel(Components.results.NS_BINDING_ABORTED); }, // nsIHttpHeaderVisitor visitHeader: function(aHeader, aValue) { headers.push(aHeader + ": " + aValue); switch(aHeader) { //   -    case "Content-Length": data.push(" : " + aValue); break; case "Content-Type": data.push(" : " + aValue); break; case "Last-Modified": data.push(" : " + new Date(aValue).toLocaleString()); } }, done: function() { alert( data.join("\n") + "\n\n:\n" + headers.join("\n") ); } };</span></span></code> </pre><br><br>  As a result, we get the message: <br><pre> <code class="hljs pgsql"> : application/x-xpinstall  : <span class="hljs-number"><span class="hljs-number">26</span></span>  <span class="hljs-number"><span class="hljs-number">2013</span></span> . <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span>  : <span class="hljs-number"><span class="hljs-number">46897</span></span>  : https://addons.cdn.mozilla.net/<span class="hljs-keyword"><span class="hljs-keyword">storage</span></span>/<span class="hljs-built_in"><span class="hljs-built_in">public</span></span>-staging/<span class="hljs-number"><span class="hljs-number">413716</span></span>/link_properties_plus<span class="hljs-number"><span class="hljs-number">-1.5</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>-fx+sm+tb.xpi : Host: addons.mozilla.org <span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent: Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows NT <span class="hljs-number"><span class="hljs-number">6.1</span></span>; rv:<span class="hljs-number"><span class="hljs-number">20.0</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">20100101</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">20.0</span></span> Accept: <span class="hljs-type"><span class="hljs-type">text</span></span>/html,application/xhtml+<span class="hljs-type"><span class="hljs-type">xml</span></span>,application/<span class="hljs-type"><span class="hljs-type">xml</span></span>;q=<span class="hljs-number"><span class="hljs-number">0.9</span></span>,*<span class="hljs-comment"><span class="hljs-comment">/*;q=0.8 Accept-Language: ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3 Accept-Encoding: gzip, deflate Referer: https://addons.mozilla.org/ Server: nginx X-Backend-Server: web13.addons.phx1.mozilla.com Content-Type: application/x-xpinstall Accept-Ranges: bytes Last-Modified: Tue, 26 Feb 2013 00:46:30 GMT X-Cache-Info: caching Content-Length: 46897 Cache-Control: max-age=79492 Expires: Sun, 07 Apr 2013 17:32:01 GMT Date: Sat, 06 Apr 2013 19:27:09 GMT</span></span></code> </pre><br><br><h2>  Track redirects </h2>  For tracking redirects there is <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannel">nsIChannel.notificationCallbacks</a> .  That is, you need to add <br><pre> <code class="javascript hljs">channel.notificationCallbacks = observer;</code> </pre><br>  after creating the channel and observer object, and in the observer object itself add the implementation <a href="http://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIInterfaceRequestor">nsIInterfaceRequestor</a> .  At the same time, <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIInterfaceRequestor">nsIInterfaceRequestor.getInterface ()</a> should be able to return an implementation of <a href="http://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannelEventSink">nsIChannelEventSink</a> to handle redirects. <br>  So add a ‚Äúreceiver‚Äù of information about redirections next to two already existing ones: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> redirects = []; <span class="hljs-comment"><span class="hljs-comment">//     </span></span></code> </pre><br>  And update the output function <br><pre> <code class="javascript hljs"> done: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert( data.join(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>) + <span class="hljs-string"><span class="hljs-string">"\n\n:\n"</span></span> + redirects.join(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>) + <span class="hljs-string"><span class="hljs-string">"\n\n:\n"</span></span> + headers.join(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>) ); }</code> </pre><br>  And in our observer you need to add <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> observer = { ... <span class="hljs-comment"><span class="hljs-comment">// nsIInterfaceRequestor getInterface: function(iid) { if(iid.equals(Components.interfaces.nsIChannelEventSink)) return this; throw Components.results.NS_ERROR_NO_INTERFACE; }, // nsIChannelEventSink onChannelRedirect: function(oldChannel, newChannel, flags) { // Gecko &lt; 2 this.onRedirect.apply(this, arguments); }, asyncOnChannelRedirect: function(oldChannel, newChannel, flags, callback) { //    ,    ! callback.onRedirectVerifyCallback(Components.results.NS_OK); this.onRedirect.apply(this, arguments); }, onRedirect: function(oldChannel, newChannel, flags) { if(!redirects.length) //     redirects.push(oldChannel.URI.spec); // https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannelEventSink#Constants var ces = Components.interfaces.nsIChannelEventSink; var types = []; if(flags &amp; ces.REDIRECT_TEMPORARY) types.push(""); if(flags &amp; ces.REDIRECT_PERMANENT) types.push(""); if(flags &amp; ces.REDIRECT_INTERNAL) types.push(""); redirects.push("=&gt; (" + types.join(", ") + ") " + newChannel.URI.spec); }, ...</span></span></code> </pre><br><br>  As a result, the output will be added. <br><pre> <code class="hljs ruby">: <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/addons.mozilla.org/firefox</span></span><span class="hljs-regexp"><span class="hljs-regexp">/downloads/latest</span></span><span class="hljs-regexp"><span class="hljs-regexp">/413716/addon</span></span>-<span class="hljs-number"><span class="hljs-number">413716</span></span>-latest.xpi =&gt; () <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/addons.mozilla.org/firefox</span></span><span class="hljs-regexp"><span class="hljs-regexp">/downloads/latest</span></span><span class="hljs-regexp"><span class="hljs-regexp">/link-properties-plus/addon</span></span>-link-properties-plus-latest.xpi =&gt; () <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/addons.mozilla.org/firefox</span></span><span class="hljs-regexp"><span class="hljs-regexp">/downloads/file</span></span><span class="hljs-regexp"><span class="hljs-regexp">/185918/link</span></span>_properties_plus-<span class="hljs-number"><span class="hljs-number">1.5</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-fx+sm+tb.xpi =&gt; () <span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/addons.cdn.mozilla.net/storage</span></span><span class="hljs-regexp"><span class="hljs-regexp">/public-staging/</span></span><span class="hljs-number"><span class="hljs-number">413716</span></span>/link_properties_plus-<span class="hljs-number"><span class="hljs-number">1.5</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-fx+sm+tb.xpi</code> </pre><br><br><h2>  Private mode </h2>  Now you can add support for private mode.  The <a href="https://developer.mozilla.org/en-US/docs/Supporting_per-window_private_browsing">Supporting per-window</a> article <a href="https://developer.mozilla.org/en-US/docs/Supporting_per-window_private_browsing">private browsing</a> just has a suitable <a href="https://developer.mozilla.org/en-US/docs/Supporting_per-window_private_browsing">example</a> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> channel = Services.io.newChannel(<span class="hljs-string"><span class="hljs-string">"http://example.org"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); channel.QueryInterface(Components.interfaces.nsIPrivateBrowsingChannel); channel.setPrivate(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">// force the channel to be loaded in private mode</span></span></code> </pre><br>  And we can additionally make sure that the private mode is already supported: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( private <span class="hljs-comment"><span class="hljs-comment">// - &amp;&amp; "nsIPrivateBrowsingChannel" in Components.interfaces &amp;&amp; channel instanceof Components.interfaces.nsIPrivateBrowsingChannel &amp;&amp; "setPrivate" in channel ) channel.setPrivate(true);</span></span></code> </pre><br>  In real code, of course, it is necessary to determine the privacy of the source of the link.  But I already <a href="http://habrahabr.ru/post/175469/">wrote</a> about this - using <a href="">resource: //gre/modules/PrivateBrowsingUtils.jsm,</a> you can find out the privacy of any <a href="https://developer.mozilla.org/en-US/docs/DOM/window">window</a> object. <br><br><a name="result"></a><h2>  Total </h2>  Result in one file: <br>  <a href="https://gist.github.com/Infocatcher/5327631">https://gist.github.com/Infocatcher/5327631</a> <br>  In the same <a href="https://gist.github.com/Infocatcher/5327631/revisions">revision,</a> you can track the build-up functionality: adding processing redirects and support for private mode. <br><br>  That's all.  It remains only to add error handling, convert to a convenient form for use, replace alert () with something more convenient, and attach a function call to get the properties of the link to the interface. <br><br>  PS The <a href="">new version of the</a> extension with tracking redirects and support for private mode is still awaiting verification. </div><p>Source: <a href="https://habr.com/ru/post/175745/">https://habr.com/ru/post/175745/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../175735/index.html">Finch is a console client for instant messaging.</a></li>
<li><a href="../175737/index.html">The new skype-trojan turns a computer into a slave who mines Bitcoin</a></li>
<li><a href="../175739/index.html">French intelligence forced Wikipedia sysop to delete article</a></li>
<li><a href="../175741/index.html">How I received a universal electronic card after 3 months of waiting. Part 2</a></li>
<li><a href="../175743/index.html">Native solution to the problem with WD disks in Linux</a></li>
<li><a href="../175747/index.html">Goodbye Zen Coding. Hi, Emmet!</a></li>
<li><a href="../175749/index.html">I write toy OS (about interruptions)</a></li>
<li><a href="../175751/index.html">GPS Updater - we accelerate the speed of fixing GPS for Android without mobile Internet</a></li>
<li><a href="../175755/index.html">EWICON: wind turbine without blades</a></li>
<li><a href="../175757/index.html">Apple or pear?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
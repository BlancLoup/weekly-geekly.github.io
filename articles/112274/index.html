<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HTML5 Canvas - creating arcade scrolling step by step</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 This is an instruction for creating a game that I spent on a couple of evenings. The goal was not so much the creation of a worthy represen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HTML5 Canvas - creating arcade scrolling step by step</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/27/01/2701d42ad86c8571f246fda1b32236b5.jpg" alt="image"><br><br><h5>  Foreword </h5><br>  This is an instruction for creating a game that I spent on a couple of evenings.  The goal was not so much the creation of a worthy representative of the genre, as the verification of the capabilities of the Canvas and OOP in JavaScript.  To make it more interesting, I set a condition - no external files with sprites, all graphics are drawn with built-in methods.  Also, no frameworks or libraries are used.  Just because in such a small game their use IMHO is not justified. <br><br>  In general, the Canvas is a young platform, and may be of interest in transferring classical game concepts to it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Task </h5><br>  Creating a classic arcade scroller, with an infinite number of enemies of different types that appear in waves.  For the downed enemies give points, the best result is recorded. <br><br><h5>  Execution </h5><br>  Immediately I warn you, the article is quite long, because  tried to describe every aspect of the game.  Reference to the working example at the end. <br><a name="habracut"></a><br>  First, let's declare the variables: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'canv'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ctx = c.getContext(<span class="hljs-string"><span class="hljs-string">'2d'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> width = c.width; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> height = c.height; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shipx = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> shipy = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ship_w = <span class="hljs-number"><span class="hljs-number">70</span></span>;<span class="hljs-comment"><span class="hljs-comment">//  var ship_h = 15;// var r_border = width - ship_w;//  ,    var l_border = 0; var t_border = ship_h; var b_border = height; var bgr = new Array;//    var bullets = new Array; var enemies = new Array; var k_down = 0; var k_up = 0; var k_left = 0; var k_right = 0; var fires = 0;//   //   var vx = 0; var vy = 0; var cyclestep = 0; var game_over = 0; var score = 0; var cset = 0;//  </span></span></code> </pre> <br><br>  I think it‚Äôs pretty clear what the above-created variables are used for.  If not, it will be obvious further from the code.  Create your classes: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">enemy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hp,dx,dy,type,x,y,width</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  this.hp = hp; this.type = type; this.x = x; this.y = y; this.width = width; this.hwidth = width/2; this.dx = dx; this.dy = dy; } function bgObj(x,y,speed){ //   this.x = x; this.y = y; this.speed = speed; } function bullet(x,y){ //  this.x = x; this.y = y; this.dx = 12; this.dy = 0; }</span></span></code> </pre> <br><br>  Note the hwidth parameter, which is nothing more than half the width of the object.  It will be used in checking bullets in an enemy object.  Well, dx and dy is the speed of the object along the corresponding axes. <br><br>  Data about the player‚Äôs points will be stored, of course, in cookies (cookies).  For convenience, let's declare the function that writes them: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCookie</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name,value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); d.setDate(d.getDate()+<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.cookie = name + <span class="hljs-string"><span class="hljs-string">"="</span></span>+ <span class="hljs-built_in"><span class="hljs-built_in">escape</span></span>(value)+<span class="hljs-string"><span class="hljs-string">";expires="</span></span>+d.toGMTString(); }</code> </pre> <br><br>  As you can see, they are stored one day.  Why one day ... I do not know.  They are only needed until the php script (or what your page is on) compares them with the previously recorded record. <br>  So, the main function of the game is draw (): <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   if (k_left) vx -= 2; else if (k_right) vx +=2; if (k_up) vy -=4; else if (k_down) vy +=4; //  if(vx &gt; 7) vx = 7; if(vy &gt; 5) vy = 5; if (vy &lt; -5) vy = -5; if (vx &lt; -5) vx = -5; // if (fires == 1 &amp;&amp; cyclestep % 8 == 0 &amp;&amp; game_over != 1){ var b = new bullet(shipx+74,shipy-14); bullets.push(b); } draw_bg(); shoot(); if (game_over != 1) draw_ship(); move_ship(); draw_enemies(); enemy_ai(); if(game_over == 1){ ctx.fillStyle = "rgb(72,118,255)"; ctx.font = "bold 30px Arial"; ctx.textBaseline = "top"; ctx.fillText("GAME OVER",130,150); if(cset != 1){ var uname = prompt('Enter your name:','player'); if (uname == null || uname == "") uname = 'player'; setCookie('username',uname); setCookie('score',score); cset = 1; } } cyclestep++; if (cyclestep == 128) make_wave(1,4,30); if (cyclestep == 256){ cyclestep = 0; make_wave(2,4,20); } }</span></span></code> </pre> <br><br>  The variable cyclestep stores the current iteration of the image drawing function.  As you can see, this variable is used, for example, when processing a pressed fire key, when bullets fly out only if the current iteration is divided by 8 without a remainder.  This is done so that the bullets do not fly out one by one, forming a line.  Of course, it would be more correct to make a buffer so that the bullets would not disappear, but in order not to make an extra array, this implementation is quite acceptable.  In addition, I appoint as you, and I almost never release the fire key in such games. <br><br>  Now the background rendering function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_bg</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> distance; <span class="hljs-comment"><span class="hljs-comment">//""    ctx.fillStyle = "rgb(0,0,0)"; ctx.fillRect(0,0,width,height); for (var i = 0; i &lt; bgr.length; i++){ distance = bgr[i].speed*40; if (distance &lt; 100) distance = 100; //   ctx.fillStyle = "rgb("+distance+","+distance+","+distance+")"; //,    -   ctx.fillRect(bgr[i].x, bgr[i].y,1,1); bgr[i].x -=bgr[i].speed; if (bgr[i].x &lt; 0){ //     ,   (  ) bgr[i].x += width; bgr[i].y = Math.floor(Math.random() * height); bgr[i].speed = Math.floor (Math.random() * 4) + 1; } } }</span></span></code> </pre> <br><br>  Add stars to the array and set the frequency of starting the main drawing function every 40 milliseconds: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">50</span></span>; i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> bgObj(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*height),<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*width),<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()*<span class="hljs-number"><span class="hljs-number">4</span></span>)+<span class="hljs-number"><span class="hljs-number">1</span></span>); bgr.push(b); } setInterval(<span class="hljs-string"><span class="hljs-string">"draw();"</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>);</code> </pre> <br><br>  You can now comment out the undefined functions in draw (), and start the application.  A background with moving stars should appear.  Now drawing the ship and points: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_ship</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// var sbpaint = ctx.createLinearGradient(shipx,shipy,shipx,shipy-15);// sbpaint.addColorStop(0,'rgb(220,220,230)'); sbpaint.addColorStop(1,'rgb(170,170,180)'); ctx.fillStyle = sbpaint; ctx.beginPath(); ctx.moveTo(shipx,shipy); ctx.lineTo(shipx+60,shipy); ctx.lineTo(shipx+50,shipy-15); ctx.lineTo(shipx+10,shipy-15); ctx.lineTo(shipx,shipy); ctx.fill(); // var gpaint = ctx.createLinearGradient(shipx+50,shipy-12,shipx+70,shipy-12); gpaint.addColorStop(0,'rgb(190,190,200)'); gpaint.addColorStop(1,'rgb(120,120,130)'); ctx.fillStyle = gpaint; ctx.beginPath(); ctx.moveTo(shipx+50,shipy-13); ctx.lineTo(shipx+70,shipy-13); ctx.lineTo(shipx+70,shipy-8); ctx.lineTo(shipx+50,shipy-8); ctx.lineTo(shipx+50,shipy-13); ctx.fill(); //  ctx.fillStyle = "rgb(58,95,205)"; ctx.font = "14px Arial"; ctx.textBaseline = "top"; ctx.fillText("Score:"+score,3,3); }</span></span></code> </pre> <br><br>  Of course, everything was painted first on paper.  Here, for example, is a schematic representation of a ship (dimensions in pickels): <br><br><img src="http://habrastorage.org/storage/habraeffect/d7/16/d71681f729170de5f9bd39286015b63d.jpg" alt="image"><br><br>  Since I promised not to use external files, I can only draw primitives.  But so that the game does not look like a guest from the early 80s, I impose gradients on them. <br><br>  To save space, I‚Äôll give the following several features in a row: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">move_ship</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">//  -   shipx += vx; shipy +=vy; if (shipx&gt;r_border){ shipx = r_border; vx = 0; } if (shipx&lt;l_border){ shipx = l_border; vx = 0; } if (shipy&gt;b_border){ shipy = b_border; vy = 0; } if (shipy&lt;t_border){ shipy = t_border; vy = 0; } } function shoot(){ var dead_bullets = new Array; for (var i = 0; i &lt; bullets.length; i++) { ctx.fillStyle = "rgb(173,216,230)"; ctx.fillRect(bullets[i].x,bullets[i].y,12,2);// , 122 //     if (bullets[i].x &gt; width) dead_bullets.push(i); //    for (var j = 0;j &lt; enemies.length;j++){ if (enemies[j].type &gt; 0){ if (bullets[i].x &gt;= enemies[j].x-enemies[j].hwidth &amp;&amp; bullets[i].x &lt; enemies[j].x+enemies[j].hwidth &amp;&amp; bullets[i].y &gt;= enemies[j].y-enemies[j].hwidth &amp;&amp; bullets[i].y &lt; enemies[j].y+enemies[j].hwidth){ enemies[j].hp--; } if(enemies[j].hp &lt; 0){ enemies[j].type = -1; } } } bullets[i].x += bullets[i].dx; bullets[i].y += bullets[i].dy; } // ""  for (var i = dead_bullets.length-1; i &gt;= 0; i--){ bullets.splice(dead_bullets[i],1); } } function make_wave(type,count,ewidth){ var h = Math.floor(Math.random()*(height-40))+40; for (var i = 0;i &lt; count;i++){ var n = new enemy(2,Math.floor(Math.random()* -4)-1,0,type,width+i*20,h+i*21,ewidth); enemies.push(n); } }</span></span></code> </pre> <br><br>  The function of checking the collision of an enemy with a bullet looks at first glance a bit ridiculous - it uses the parameter <b>half the</b> width of the enemy.  But note that the function was sharpened under the enemies of a circular shape, in which the x, y coordinates are in the center of the circle, and the notorious half of the width is the radius.  The negative type of enemy is an explosion.  It is described with the rest of the vrazhin drawing: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_enemies</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dead_bad = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>;i &lt; enemies.length; i++){ <span class="hljs-comment"><span class="hljs-comment">// 1 -    if(enemies[i].type == 1){ var rg = ctx.createRadialGradient(enemies[i].x,enemies[i].y,0,enemies[i].x,enemies[i].y,enemies[i].hwidth); rg.addColorStop(0,"rgba(130,130,130,0.4)"); rg.addColorStop(0.5,"rgba(125,125,125,0.5)"); rg.addColorStop(1,"rgba(120,120,120,"+enemies[i].hp*0.4+")"); ctx.fillStyle = rg; ctx.beginPath(); ctx.arc(enemies[i].x,enemies[i].y,15,0,Math.PI*2,true); ctx.fill(); } // 2 -  if(enemies[i].type == 2){ var rg = ctx.createRadialGradient(enemies[i].x+10,enemies[i].y-10,0,enemies[i].x+10,enemies[i].y-10,enemies[i].width); rg.addColorStop(0,"rgba(240,240,0,"+enemies[i].hp*0.4+")"); rg.addColorStop(1,"rgba(240,240,0,0.6"); ctx.fillStyle = rg; ctx.beginPath(); ctx.moveTo(enemies[i].x,enemies[i].y); ctx.lineTo(enemies[i].x+10,enemies[i].y-20); ctx.lineTo(enemies[i].x+20,enemies[i].y); ctx.lineTo(enemies[i].x,enemies[i].y); ctx.fill(); } //!  if(enemies[i].type &lt; 0){ ctx.fillStyle="rgb(250,250,250)"; ctx.beginPath(); ctx.arc(enemies[i].x,enemies[i].y,enemies[i].type * -4,0,Math.PI*2,true); ctx.fill(); } if(enemies[i].type &lt; 0) enemies[i].type--; if(enemies[i].type &lt; -4){ dead_bad.push(i); score+=2; } if(enemies[i].x + enemies[i].width &lt; 0) dead_bad.push(i); if(enemies[i].y + 5 &lt; 0) dead_bad.push(i); if(enemies[i].y &gt; height+enemies[i].width) dead_bad.push(i); if(enemies[i].x &lt; shipx+60 &amp;&amp; enemies[i].x &gt; shipx &amp;&amp; enemies[i].y &lt; shipy+15 &amp;&amp; enemies[i].y &gt; shipy) game_over = 1; enemies[i].x += enemies[i].dx; enemies[i].y += enemies[i].dy; } for (var i = 0;i &lt; dead_bad.length;i++){ enemies.splice(dead_bad[i],1); } } function enemy_ai(){ for (var i = 0;i &lt; enemies.length;i++){ if(enemies[i].type == 2){ if(cyclestep % 4 == 0){ if(shipy &gt; enemies[i].y &amp;&amp; enemies[i].y+20 &lt; height &amp;&amp; enemies[i].dy &lt; 4 &amp;&amp; enemies[i].x &lt; width-100) enemies[i].dy++; if(shipy &lt; enemies[i].y &amp;&amp; enemies[i].y-20 &gt; 0 &amp;&amp; enemies[i].dy &gt; -4 &amp;&amp; enemies[i].x &lt; width-100) enemies[i].dy--; } } } }</span></span></code> </pre> <br><br>  The explosion, as you see, goes on as early as 4 iterations, increasing in diameter, and then disappears.  I do not describe the collision check with the player and the AI ‚Äã‚Äãof the triangles, I think everything is obvious (the triangle chases the player, along the y coordinate).  Well, finally, the processing of keystrokes: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_key_down</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">37</span></span>) k_left = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">38</span></span>) k_up = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">39</span></span>) k_right = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">40</span></span>) k_down = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(e.keyCode == <span class="hljs-number"><span class="hljs-number">32</span></span>) fires = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_key_up</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">37</span></span>) k_left = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">38</span></span>) k_up = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">39</span></span>) k_right = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.keyCode == <span class="hljs-number"><span class="hljs-number">40</span></span>) k_down = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(e.keyCode == <span class="hljs-number"><span class="hljs-number">32</span></span>) fires = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><br>  Everything!  The working example is <a href="http://recon-by-fire.eu/p-html/scroller.php">right here</a> .  The process of extracting cookies and writing them to a file on the server / reading the file on the screen will be omitted so that the article does not bloat at all. <br><br><h5>  Afterword </h5><br><br>  Of course, this example can be significantly improved.  You can add difficulty levels, enemies, bosses, redraw the ship (to draw a semicircle on top - and you‚Äôll have a full flying saucer). <br><br>  Thanks for attention. <br><br>  <b>Outcome - conclusions</b> <br>  Chrome has chronic problems with gradients, so it‚Äôs not displayed as intended.  The error is now caught and a simple fill is displayed if there is a problem with the gradient.  It remains to fix a small problem with the cookies, but that's not the point.  The main thing - Canvas is still very raw and seems to handle sprites better than some internal rendering methods.  The experiment can be considered finished. <br>  Thanks to all testers. </div><p>Source: <a href="https://habr.com/ru/post/112274/">https://habr.com/ru/post/112274/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112269/index.html">What is behind the number of "credit card"</a></li>
<li><a href="../112270/index.html">Android OS in the car</a></li>
<li><a href="../112271/index.html">Tools for Designers and Developers</a></li>
<li><a href="../112272/index.html">Working with the camera in Android</a></li>
<li><a href="../112273/index.html">Concept of a Trojan that recognizes voice and tones from a smartphone</a></li>
<li><a href="../112275/index.html">Spring is coming and CodeFest with her</a></li>
<li><a href="../112276/index.html">The consequences of using Copy-Paste technology when programming in C ++ and how to deal with it</a></li>
<li><a href="../112277/index.html">Test drive templates. Free for 30 days</a></li>
<li><a href="../112281/index.html">How to make a successful career at IBM headquarters?</a></li>
<li><a href="../112286/index.html">FileSystem API & File API: we understand and use</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
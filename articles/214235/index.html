<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Autospeed Cisco SPA504g and Asterisk. Part 2. Setting up a DHCP server and Apache</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part, we installed MySQL and compiled Asterisk from source with the support of res_config_mysql (Asterisk Realtime Architecture) 

 Setti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Autospeed Cisco SPA504g and Asterisk. Part 2. Setting up a DHCP server and Apache</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/post/214181/">first part,</a> we installed MySQL and compiled Asterisk from source with the support of res_config_mysql (Asterisk Realtime Architecture) <br><br><h4>  Setting up a DHCP server </h4><br><br>  I have different DHCP servers deployed in two working environments. <br><a name="habracut"></a><br><h5>  Windows Server 2012R2 DHCP Server </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/4ca/e62/f75/4cae62f75502d6cae1f82e83bd8904e2.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the DHCP manager, we add a new option to our DHCP range, number 66 (Boot Server Host Name) and the following contents <br><pre> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code></code> <h5> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> </h5> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> <h5> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> </h5> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> <h4> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> </h4> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <pre> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <h4> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> </h4> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <pre> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <pre> <code class="hljs cs"><code><code class="bash"><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk html]# nano cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <pre> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <pre> <code class="hljs cs"><code><code class="bash"><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> nano directory.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <pre> <code class="hljs cs"><code><code><code class="bash">http:<span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php?mac=$MA&amp;sn=$SN </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code><span class="hljs-comment"><span class="hljs-comment"> Mikrotik RouterOS v6.x </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server option </span></span><br><span class="hljs-comment"><span class="hljs-comment"> add code=66 name=tftp value="'http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=\$MA&amp;sn=\$SN'" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> /ip dhcp-server network </span></span><br><span class="hljs-comment"><span class="hljs-comment"> set dhcp-option=tftp 0 </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> DNSMasq </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  dnsmasq.conf </span></span><br><span class="hljs-comment"><span class="hljs-comment"> dhcp-option=66,"http:</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">cisco.php\?mac=$MA&amp;sn=$SN" </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    Apache + PHP </span></span><br><span class="hljs-comment"><span class="hljs-comment">     thttpd,  lighttpd,   nginx',       . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    </span></span><code><span class="hljs-comment"><span class="hljs-comment">Date</span></span></code><span class="hljs-comment"><span class="hljs-comment">  </span></span><code><span class="hljs-comment"><span class="hljs-comment">date.timezone = Europe/Moscow</span></span></code><span class="hljs-comment"><span class="hljs-comment"> (   ,      ),    . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php phpinfo(); ?&gt;</span></span></span><span class="hljs-comment">"&gt;/var/www/html/index.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     </span></span><code><span class="hljs-comment"><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;ip &gt;</span></span></span><span class="hljs-comment">/</span></span></code><span class="hljs-comment"><span class="hljs-comment">      PHP. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    XML  SPA504G </span></span><br><span class="hljs-comment"><span class="hljs-comment">     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  cisco.php </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">[root@asterisk html]# nano cisco.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $use_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_VLAN&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;VLAN_ID ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $voice_vlan?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_PC_Port_VLAN_Tagging&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_CDP ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_CDP&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_LLDP-MED ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_LLDP-MED&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;PC_Port_VLAN_ID ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pc_vlan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/PC_Port_VLAN_ID&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_On_Reset&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_On_Reset&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Resync_Periodic&gt;</span></span></span><span class="hljs-comment">60</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Resync_Periodic&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Admin_Passwd ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $adminpass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Admin_Passwd&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SPCP_Auto-detect ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/SPCP_Auto-detect&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Domain ua="rw"&gt;</span></span></span><span class="hljs-comment">aton.local</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Domain&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_DNS ua="rw"&gt;</span></span></span><span class="hljs-comment">$dns</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_DNS&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Debug_Level ua="na"&gt;</span></span></span><span class="hljs-comment">0</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Debug_Level&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Primary_NTP_Server ua="na"&gt;</span></span></span><span class="hljs-comment">ru.pool.ntp.org</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Primary_NTP_Server&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Profile_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/cisco.php?mac=$MA&amp;sn=$SN</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Profile_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Key_System_Auto_Discovery ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Key_System_Auto_Discovery&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G722_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G722_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;L16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/L16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-16_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-16_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-24_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-24_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-32_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-32_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;G726-40_Enable_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/G726-40_Enable_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Enable_IP_Dialing_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">No</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Enable_IP_Dialing_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Use_Remote_Pref_Codec_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Text_Logo ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $textlogo ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Text_Logo&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Zone ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $tz ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Zone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Upgrade_Rule ua="na"&gt;</span></span></span><span class="hljs-comment">( $SWVER lt 7.5.2b )? http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-2b.bin | http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/spa50x-30x-7-5-5.bin </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Upgrade_Rule&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;HostName ua="rw"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $host ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/HostName&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-readonly ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-readonly&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Phone-UI-user-mode ua="na"&gt;</span></span></span><span class="hljs-comment">Yes</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Phone-UI-user-mode&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Proxy_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Proxy_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Display_Name_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Display_Name_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;User_ID_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/User_ID_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Password_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $pass ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Password_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dial_Plan_1_ ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $dialplan ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dial_Plan_1_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $phone ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Date_Format&gt;</span></span></span><span class="hljs-comment">day/month</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Date_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Time_Format ua="rw"&gt;</span></span></span><span class="hljs-comment">24hr</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Time_Format&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Station_Display_Name ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $name ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Station_Display_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Server_Type ua="na"&gt;</span></span></span><span class="hljs-comment">Asterisk</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Server_Type&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Language_Selection ua="na"&gt;</span></span></span><span class="hljs-comment">Russian</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Language_Selection&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Dictionary_Server_Script ua="na"&gt;</span></span></span><span class="hljs-comment">serv=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server?&gt;</span></span></span><span class="hljs-comment">/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Dictionary_Server_Script&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Default_Character_Encoding ua="na"&gt;</span></span></span><span class="hljs-comment">UTF-8</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Default_Character_Encoding&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Locale ua="na"&gt;</span></span></span><span class="hljs-comment">ru-RU</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Locale&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;!--</span></span></span><span class="hljs-comment"> Vertical Service Activation Codes </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">--&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Return_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Return_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Blind_Transfer_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Blind_Transfer_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Back_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Back_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_All_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_All_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_Busy_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_Busy_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Cfwd_No_Ans_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CW_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CW_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_CID_Per_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Block_ANC_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Block_ANC_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DND_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DND_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_All_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_All_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_No_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_No_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Act_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Act_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Secure_One_Call_Deact_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Secure_One_Call_Deact_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Paging_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Paging_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Park_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Park_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Call_UnPark_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Call_UnPark_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Group_Call_Pickup_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Group_Call_Pickup_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Media_Loopback_Code ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Media_Loopback_Code&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Referral_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Referral_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Feature_Dial_Services_Codes ua="na"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Feature_Dial_Services_Codes&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_Name ua="na"&gt;</span></span></span><span class="hljs-comment">Address Book</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;XML_Directory_Service_URL ua="na"&gt;</span></span></span><span class="hljs-comment">http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/XML_Directory_Service_URL&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php if ($use4line==1){ ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extension_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">Disabled</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extension_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $label ?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Short_Name_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">private</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Share_Call_Appearance_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;</span></span></span><span class="hljs-comment">fnc=xml;url=http://</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $server ?&gt;</span></span></span><span class="hljs-comment">/directory.php</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Extended_Function_4_&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/flat-profile&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    PHP-   : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="bash"><span class="hljs-comment"><span class="hljs-comment">nano directory.php</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code class="php"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;</span></span></span><span class="hljs-comment">connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;CiscoIPPhoneDirectory&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Title&gt;</span></span></span><span class="hljs-comment"></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Title&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Prompt&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php foreach($phones as $k=&gt;</span></span></span><span class="hljs-comment">$v){?&gt; </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Name&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $names[$k]." - ".$v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Name&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Telephone&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php echo $v;?&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/Telephone&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/DirectoryEntry&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;?php } ?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/CiscoIPPhoneDirectory&gt;</span></span></span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). </span></span><br><span class="hljs-comment"><span class="hljs-comment">         -  . </span></span><br><span class="hljs-comment"><span class="hljs-comment">        MAC-   -   "Unidentified phone #xxxx',          . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">          XML-   ,           . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   -  //     ( )   Asterisk       AD </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">    - ,  !</span></span></code></code> </pre> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <h4> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> </h4> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> <ul><li> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> </li> <li> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> </li> <li> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> </li> </ul> <code><code><code><code class="bash">http:///cisco.php?mac=$MA&amp;sn=$SN <br> <br></code> Mikrotik RouterOS v6.x <br> /ip dhcp-server option <br> add code=66 name=tftp value="'http:///cisco.php\?mac=\$MA&amp;sn=\$SN'" <br> /ip dhcp-server network <br> set dhcp-option=tftp 0 <br> <br> <br> DNSMasq <br> <br>  dnsmasq.conf <br> dhcp-option=66,"http:///cisco.php\?mac=$MA&amp;sn=$SN" <br> <br>    Apache + PHP <br>     thttpd,  lighttpd,   nginx',       . <br> <br> [root@asterisk ~]# yum install httpd php php-mysql -y [root@asterisk ~]# chkconfig httpd on [root@asterisk ~]# vi /etc/php.ini</code> <br>    <code>Date</code>  <code>date.timezone = Europe/Moscow</code> (   ,      ),    . <br> <code class="bash">Esc -&gt; :wq -&gt; Enter [root@asterisk ~]# echo "&lt;?php phpinfo(); ?&gt;"&gt;/var/www/html/index.php</code> <br> <br>     <code>http://&lt;ip &gt;/</code>      PHP. <br> <br>    XML  SPA504G <br>     /var/www/html  7.5.2b  7.5.5  SPA504G,    XML'   : <br> <code class="bash">[root@asterisk ~]# cd /var/www/html/ [root@asterisk html]# wget http://zztopper.ru/cisco.tar.gz [root@asterisk html]# tar fzx cisco.tar.gz [root@asterisk html]# rm cisco.tar.gz</code> <br> <br>  cisco.php <br> <code class="bash">[root@asterisk html]# nano cisco.php</code> <br> <code class="php">&lt;?php //---------------------------------   //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $server = 'SERVERIP'; //IP      $dns = 'DNSIP'; // IP DNS- $enable_vlan = 'No'; //  VLAN' $voice_vlan = 1; // VLAN   $pc_vlan = 1; // Access VLAN   PC- $adminpass = '7654321'; //  Web-  $textlogo = 'LOGO'; //  $tz = 'GMT+04:00'; //  $dialplan = '(1xxS0|911S0|1xxxS0|2xxxxxxS0|8xxxxxxxxxx|7xxxxxxxxxx)'; //  $label = 'Yellow Pages'; //   Line 4    $use4line = 1; //    Line 4    //---------------------------------  ,     function randomPassword() { $alphabet = "abcdefghijklmnopqrstuwxyzABCDEFGHIJKLMNOPQRSTUWXYZ0123456789"; $pass = array(); //remember to declare $pass as an array $alphaLength = strlen($alphabet) - 1; //put the length -1 in cache for ($i = 0; $i &lt; 10; $i++) { $n = rand(0, $alphaLength); $pass[] = $alphabet[$n]; } return implode($pass); //turn the array into a string } $mac = isset($_GET['mac'])?$_GET['mac']:"000000000000"; $sn = isset($_GET['sn'])?$_GET['sn']:"0000000"; $link = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($link-&gt;connect_error) { die('Connect Error (' . $link-&gt;connect_errno . ') ' . $link-&gt;connect_error); } $query = 'set names utf8;'; $link-&gt;query($query); $query = 'SELECT * FROM `'.$table.'` WHERE `macaddress`="'.$mac.'"'; $result = $link-&gt;query($query); if (!$result). die(": ".$link-&gt;error); if ($result-&gt;num_rows == 1). { while ($myrow = $result-&gt;fetch_array(MYSQLI_ASSOC)) { $phone=$myrow["name"]; $pass=$myrow["secret"]; $name=$myrow["defaultuser"]; }. $result-&gt;close();. }else { $query="SELECT MAX(name) FROM `".$table."`"; $result = $link-&gt;query($query); while ($myrow = $result-&gt;fetch_array(MYSQLI_NUM)) { $phone=$myrow[0]; } $phone++; $result-&gt;close(); $pass=randomPassword(); $name="Unidentified Phone #".$phone; $query="INSERT INTO `".$table."` (`defaultuser`,`macaddress`,`secret`,`name`, `serial`) VALUES ('".$name."', '".$mac."', '".$pass."', '".$phone."', '".$sn."');"; $result=$link-&gt;query($query); } $host="SPA".strtoupper($mac); ?&gt; &lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt; &lt;flat-profile xmlns="http://www.sipura.net/xsd/SPA50x-30x-SIP" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sipura.net/xsd/SPA5 &lt;Enable_VLAN ua="rw"&gt;&lt;?php echo $use_vlan ?&gt;&lt;/Enable_VLAN&gt; &lt;VLAN_ID ua="rw"&gt;&lt;?php echo $voice_vlan?&gt;&lt;/VLAN_ID&gt; &lt;Enable_PC_Port_VLAN_Tagging ua="na"&gt;No&lt;/Enable_PC_Port_VLAN_Tagging&gt; &lt;Enable_CDP ua="na"&gt;Yes&lt;/Enable_CDP&gt; &lt;Enable_LLDP-MED ua="na"&gt;Yes&lt;/Enable_LLDP-MED&gt; &lt;PC_Port_VLAN_ID ua="na"&gt;&lt;?php echo $pc_vlan ?&gt;&lt;/PC_Port_VLAN_ID&gt; &lt;Resync_On_Reset&gt;Yes&lt;/Resync_On_Reset&gt; &lt;Resync_Periodic&gt;60&lt;/Resync_Periodic&gt; &lt;Admin_Passwd ua="na"&gt;&lt;?php echo $adminpass ?&gt;&lt;/Admin_Passwd&gt; &lt;SPCP_Auto-detect ua="na"&gt;No&lt;/SPCP_Auto-detect&gt; &lt;Domain ua="rw"&gt;aton.local&lt;/Domain&gt; &lt;Primary_DNS ua="rw"&gt;$dns&lt;/Primary_DNS&gt; &lt;Debug_Level ua="na"&gt;0&lt;/Debug_Level&gt; &lt;Primary_NTP_Server ua="na"&gt;ru.pool.ntp.org&lt;/Primary_NTP_Server&gt; &lt;Profile_Rule ua="na"&gt;http://&lt;?php echo $server?&gt;/cisco.php?mac=$MA&amp;sn=$SN&lt;/Profile_Rule&gt; &lt;Key_System_Auto_Discovery ua="na"&gt;No&lt;/Key_System_Auto_Discovery&gt; &lt;G722_Enable_1_ ua="na"&gt;Yes&lt;/G722_Enable_1_&gt; &lt;L16_Enable_1_ ua="na"&gt;No&lt;/L16_Enable_1_&gt; &lt;G726-16_Enable_1_ ua="na"&gt;No&lt;/G726-16_Enable_1_&gt; &lt;G726-24_Enable_1_ ua="na"&gt;No&lt;/G726-24_Enable_1_&gt; &lt;G726-32_Enable_1_ ua="na"&gt;No&lt;/G726-32_Enable_1_&gt; &lt;G726-40_Enable_1_ ua="na"&gt;No&lt;/G726-40_Enable_1_&gt; &lt;Enable_IP_Dialing_1_ ua="na"&gt;No&lt;/Enable_IP_Dialing_1_&gt; &lt;Use_Remote_Pref_Codec_1_ ua="na"&gt;Yes&lt;/Use_Remote_Pref_Codec_1_&gt; &lt;Text_Logo ua="na"&gt;&lt;?php echo $textlogo ?&gt;&lt;/Text_Logo&gt; &lt;Time_Zone ua="na"&gt;&lt;?php echo $tz ?&gt;&lt;/Time_Zone&gt; &lt;Upgrade_Rule ua="na"&gt;( $SWVER lt 7.5.2b )? http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-2b.bin | http://&lt;?php echo $server ?&gt;/spa50x-30x-7-5-5.bin &lt;/Upgrade_Rule&gt; &lt;HostName ua="rw"&gt;&lt;?php echo $host ?&gt;&lt;/HostName&gt; &lt;Phone-UI-readonly ua="na"&gt;Yes&lt;/Phone-UI-readonly&gt; &lt;Phone-UI-user-mode ua="na"&gt;Yes&lt;/Phone-UI-user-mode&gt; &lt;Proxy_1_ ua="na"&gt;&lt;?php echo $server ?&gt;&lt;/Proxy_1_&gt; &lt;Display_Name_1_ ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Display_Name_1_&gt; &lt;User_ID_1_ ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/User_ID_1_&gt; &lt;Password_1_ ua="na"&gt;&lt;?php echo $pass ?&gt;&lt;/Password_1_&gt; &lt;Dial_Plan_1_ ua="na"&gt;&lt;?php echo $dialplan ?&gt;&lt;/Dial_Plan_1_&gt; &lt;Station_Name ua="na"&gt;&lt;?php echo $phone ?&gt;&lt;/Station_Name&gt; &lt;Date_Format&gt;day/month&lt;/Date_Format&gt; &lt;Time_Format ua="rw"&gt;24hr&lt;/Time_Format&gt; &lt;Station_Display_Name ua="na"&gt;&lt;?php echo $name ?&gt;&lt;/Station_Display_Name&gt; &lt;Server_Type ua="na"&gt;Asterisk&lt;/Server_Type&gt; &lt;Language_Selection ua="na"&gt;Russian&lt;/Language_Selection&gt; &lt;Dictionary_Server_Script ua="na"&gt;serv=http://&lt;?php echo $server?&gt;/;d0=English;x0=spa50x_30x_en_v755.xml;d1=Russian;x1=spa50x_30x_ru_v755.xml&lt;/Dictionary_Server_Script&gt; &lt;Default_Character_Encoding ua="na"&gt;UTF-8&lt;/Default_Character_Encoding&gt; &lt;Locale ua="na"&gt;ru-RU&lt;/Locale&gt; &lt;!-- Vertical Service Activation Codes --&gt; &lt;Call_Return_Code ua="na"&gt;&lt;/Call_Return_Code&gt; &lt;Blind_Transfer_Code ua="na"&gt;&lt;/Blind_Transfer_Code&gt; &lt;Call_Back_Act_Code ua="na"&gt;&lt;/Call_Back_Act_Code&gt; &lt;Call_Back_Deact_Code ua="na"&gt;&lt;/Call_Back_Deact_Code&gt; &lt;Cfwd_All_Act_Code ua="na"&gt;&lt;/Cfwd_All_Act_Code&gt; &lt;Cfwd_All_Deact_Code ua="na"&gt;&lt;/Cfwd_All_Deact_Code&gt; &lt;Cfwd_Busy_Act_Code ua="na"&gt;&lt;/Cfwd_Busy_Act_Code&gt; &lt;Cfwd_Busy_Deact_Code ua="na"&gt;&lt;/Cfwd_Busy_Deact_Code&gt; &lt;Cfwd_No_Ans_Act_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Act_Code&gt; &lt;Cfwd_No_Ans_Deact_Code ua="na"&gt;&lt;/Cfwd_No_Ans_Deact_Code&gt; &lt;CW_Act_Code ua="na"&gt;&lt;/CW_Act_Code&gt; &lt;CW_Deact_Code ua="na"&gt;&lt;/CW_Deact_Code&gt; &lt;CW_Per_Call_Act_Code ua="na"&gt;&lt;/CW_Per_Call_Act_Code&gt; &lt;CW_Per_Call_Deact_Code ua="na"&gt;&lt;/CW_Per_Call_Deact_Code&gt; &lt;Block_CID_Act_Code ua="na"&gt;&lt;/Block_CID_Act_Code&gt; &lt;Block_CID_Deact_Code ua="na"&gt;&lt;/Block_CID_Deact_Code&gt; &lt;Block_CID_Per_Call_Act_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Act_Code&gt; &lt;Block_CID_Per_Call_Deact_Code ua="na"&gt;&lt;/Block_CID_Per_Call_Deact_Code&gt; &lt;Block_ANC_Act_Code ua="na"&gt;&lt;/Block_ANC_Act_Code&gt; &lt;Block_ANC_Deact_Code ua="na"&gt;&lt;/Block_ANC_Deact_Code&gt; &lt;DND_Act_Code ua="na"&gt;&lt;/DND_Act_Code&gt; &lt;DND_Deact_Code ua="na"&gt;&lt;/DND_Deact_Code&gt; &lt;Secure_All_Call_Act_Code ua="na"&gt;&lt;/Secure_All_Call_Act_Code&gt; &lt;Secure_No_Call_Act_Code ua="na"&gt;&lt;/Secure_No_Call_Act_Code&gt; &lt;Secure_One_Call_Act_Code ua="na"&gt;&lt;/Secure_One_Call_Act_Code&gt; &lt;Secure_One_Call_Deact_Code ua="na"&gt;&lt;/Secure_One_Call_Deact_Code&gt; &lt;Paging_Code ua="na"&gt;&lt;/Paging_Code&gt; &lt;Call_Park_Code ua="na"&gt;&lt;/Call_Park_Code&gt; &lt;Call_Pickup_Code ua="na"&gt;&lt;/Call_Pickup_Code&gt; &lt;Call_UnPark_Code ua="na"&gt;&lt;/Call_UnPark_Code&gt; &lt;Group_Call_Pickup_Code ua="na"&gt;&lt;/Group_Call_Pickup_Code&gt; &lt;Media_Loopback_Code ua="na"&gt;&lt;/Media_Loopback_Code&gt; &lt;Referral_Services_Codes ua="na"&gt;&lt;/Referral_Services_Codes&gt; &lt;Feature_Dial_Services_Codes ua="na"&gt;&lt;/Feature_Dial_Services_Codes&gt; &lt;XML_Directory_Service_Name ua="na"&gt;Address Book&lt;/XML_Directory_Service_Name&gt; &lt;XML_Directory_Service_URL ua="na"&gt;http://&lt;?php echo $server ?&gt;/directory.php&lt;/XML_Directory_Service_URL&gt; &lt;?php if ($use4line==1){ ?&gt; &lt;Extension_4_ group="Phone/Line_Key_4"&gt;Disabled&lt;/Extension_4_&gt; &lt;Short_Name_4_ group="Phone/Line_Key_4"&gt;&lt;?php echo $label ?&gt;&lt;/Short_Name_4_&gt; &lt;Share_Call_Appearance_4_ group="Phone/Line_Key_4"&gt;private&lt;/Share_Call_Appearance_4_&gt; &lt;Extended_Function_4_ group="Phone/Line_Key_4"&gt;fnc=xml;url=http://&lt;?php echo $server ?&gt;/directory.php&lt;/Extended_Function_4_&gt; &lt;?php } ?&gt; &lt;/flat-profile&gt;</code> <br> <br>    PHP-   : <br> <code class="bash">nano directory.php</code> <br> <code class="php">&lt;?php //------- MySQL $mysrv = 'localhost'; $mydb = 'asterisk'; $myuser = 'asterisk'; $mypass = 'mypass'; $table = 'tbl_sip_conf'; $mysqli = new mysqli($mysrv,$myuser,$mypass,$mydb); if ($mysqli-&gt;connect_error) { die('Connect Error (' . $mysqli-&gt;connect_errno . ') ' . $mysqli-&gt;connect_error); } $mysqli-&gt;query("set names utf8"); $query = 'SELECT * from `'.$table.'` ORDER BY `defaultuser` ASC'; $result=$mysqli-&gt;query($query); while ($row = $result-&gt;fetch_assoc()){ $phones[] = $row['name']; $names[] = $row['defaultuser']; } $mysqli-&gt;close(); ?&gt; &lt;?xml version="1.0" encoding="utf-8" ?&gt; &lt;CiscoIPPhoneDirectory&gt; &lt;Title&gt;&lt;/Title&gt; &lt;Prompt&gt; &lt;/Prompt&gt; &lt;?php foreach($phones as $k=&gt;$v){?&gt; &lt;DirectoryEntry&gt; &lt;Name&gt;&lt;?php echo $names[$k]." - ".$v;?&gt;&lt;/Name&gt; &lt;Telephone&gt;&lt;?php echo $v;?&gt;&lt;/Telephone&gt; &lt;/DirectoryEntry&gt; &lt;?php } ?&gt; &lt;/CiscoIPPhoneDirectory&gt;</code> <br> <br>   <br> <br>  ,          IP-  DHCP- 66  DHCP-,     ,    66,   .     ,  7.5.2b,     ,   -   7.5.5 (    ). <br>         -  . <br>        MAC-   -   "Unidentified phone #xxxx',          . <br> <br>          XML-   ,           . <br> <br>    : <br>   -  //     ( )   Asterisk       AD <br> <br>    - ,  !</code></code> </div><p>Source: <a href="https://habr.com/ru/post/214235/">https://habr.com/ru/post/214235/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214223/index.html">ONYX C63ML Akunin Book - the first swallow of the fanbuk family</a></li>
<li><a href="../214225/index.html">Scientific and educational school of MSU "LANAT"</a></li>
<li><a href="../214229/index.html">Can we trust a computer solution if we can‚Äôt verify it?</a></li>
<li><a href="../214231/index.html">Why skype my passwords from the browser?</a></li>
<li><a href="../214233/index.html">The first details of the project of the giant Tesla battery factory are published.</a></li>
<li><a href="../214237/index.html">We are starting a series of posts devoted to the works of the winners of InfoTeKS Academy 2011-2012 in the direction of "Scientific Research"</a></li>
<li><a href="../214239/index.html">Pre-registration for Analyst Days-III - discount up to 35% is still available!</a></li>
<li><a href="../214241/index.html">The logic of thinking. Part 2. Factors</a></li>
<li><a href="../214247/index.html">How the world's largest startup accelerator works</a></li>
<li><a href="../214249/index.html">The draft law on the restriction of Internet payments adopted in first reading</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
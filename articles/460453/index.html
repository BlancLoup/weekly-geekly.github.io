<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart printer. Improving Octoprint</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In developing the open source project of the 4-extruder Z-Bolt printer, we faced the problem of choosing a screen to control the printer. From the ava...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart printer. Improving Octoprint</h1><div class="post__text post__text-html js-mediator-article">  In developing the open source project of the 4-extruder Z-Bolt printer, we faced the problem of choosing a screen to control the printer.  From the available screens, only the Duet Wifi solution can manage more than 2 extruders.  The solution, to put it mildly, is not a budget one, and the interface is an amateur.  So we decided to look for an alternative option with preference and courtesans.  This story is about him ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7_/sw/2y/7_sw2yntvfmulg1gpfxuxmozkkw.png" alt="image"></div><a name="habracut"></a><br>  On the Internet there is a lot of information on the use of Octoprint.  A little more than half a year ago and we became users of this solution, immediately appreciating its benefits.  The ability to control the printer through a web-based person is really hard to overestimate.  Octoprint has a lot of plug-ins, and the main thing for us - Octoprint perfectly controls the number of extruders larger than 2. But one more question remained to be resolved. <br><br>  Many fans of Octoprint confidently say that they no longer need the screen from the word ‚Äúabsolutely‚Äù, that this is an absolutely extra part of the printer that only hinders them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, I am convinced that there is another part of OctoPrint users.  Everyone has their own habits and requirements for everyday use of a 3D printer, and there are operations that are more convenient to perform with a screen: <br><br><ul><li>  Filament replacement </li><li>  Table Level Calibration </li><li>  Start printing a file that has already been printed before. </li><li>  Enable printer preheating </li><li>  Ability to see print status </li><li>  ... </li></ul><br>  Now the default screen in Z-Bolt printers is MKS TFT.  You can put TFT24, TFT32 or TFT35.  These are good screens, but they do not know how to integrate with Octoprint.  If Octoprint has started printing, the screen will not know anything about it.  They use different file storages, etc.  And the MKS TFT screens do not want to work with 3x and more -head 3D printers. <br><br>  Before me was the goal to find / make / adjust the screen for Octoprint, capable of managing more than 2 extruders. <br><br>  Googling a bit, I came across <a href="https://plugins.octoprint.org/plugins/touchui/">a TouchUI plugin</a> . <br><br><img src="https://habrastorage.org/webt/nv/xy/km/nvxykmxddlaote4dyr_2y5buxzi.png"><br><br>  The first impression was: here it is - the solution !!! <br><br>  I immediately installed the plugin and opened Octoprint from the phone.  TouchUI interface is stupid: /.  Sometimes the buttons were pressed normally, sometimes braked, and sometimes they were not pressed at all the first time.  With the connected screen, the TouchUI behaved as badly as with the phone. <br><br>  In parallel, <a href="https://github.com/mcuadros/OctoPrint-TFT">another solution</a> was found. <br><br><img src="https://habrastorage.org/webt/ts/hs/bj/tshsbju0jb-yc_bhwhrdqwckcr8.png"><br><br>  The description was encouraging, unlike TouchUI, it is a standalone application that runs without a browser, and therefore requires much less computing resources. <br><br>  Installation and configuration problems did not cause.  The interface really worked much more predictably and more responsively. <br><br><img src="https://habrastorage.org/webt/ul/74/hm/ul74hma5vmolt27mkxjemypegly.jpeg"><br><br>  But here, not everything turned out smoothly.  The application regularly hung up at the start of printing.  On github'e there was an <a href="https://github.com/mcuadros/OctoPrint-TFT/issues/34">issue on this error</a> , created almost a year ago and actively discussed, but not closed. <br><br>  The main problem turned out to be that the author of the application, apparently, has lost interest in him and is no longer developing at the moment. <br><br>  Since, in my opinion, the application is written well enough and has potential, it was decided to make a ‚Äúhard-fork‚Äù and take up the project thoroughly. <br><br>  Here's what we got: <br><br><ul><li>  Selected optimal screens for the project </li><li>  Made ‚Äúhard-fork‚Äù by Octoprint-TFT </li><li>  Revised look at the software and hardware architecture of the printer </li><li>  Created its own theme for the interface Octoprint </li></ul><br>  But first things first‚Ä¶ <br><br><h2>  Screenshots </h2><br>  We started with the TFT 3.5 screen, which, to put it mildly, did not withstand any criticism.  Viewing angles are none, the picture is faded.  Therefore, it was decided to choose a better solution. <br><br>  The main criteria were: <br><br><ul><li>  IPS matrix </li><li>  size 4 - 5 inches </li><li>  capacitive screen (desirable) </li><li>  acceptable price </li></ul><br>  As a result, we stopped at two options: <br><br>  <b>1. Option easier.</b>  <a href="https://www.aliexpress.com/item/33009474183.html">4 '' IPS Resistive Touchscreen</a> <br><br><img src="https://habrastorage.org/webt/z1/a9/mt/z1a9mtjght1zjnhicro9kxr-r5u.png"><br><br>  <b>2. The option is richer.</b>  <a href="https://www.aliexpress.com/item/33002511415.html">4.3 '' IPS Capacitive Touchscreen</a> <br><img src="https://habrastorage.org/webt/g_/9v/w8/g_9vw8lo2wcf7yaqvbrhdzklhqg.png"><br><br>  Both screens have a resolution of 800x400.  Both have great picture, color and viewing angle.  Their main difference is the capacitive touchscreen.  You get used to it very quickly (as well as to everything good) and it is much more pleasant to use it than resistive.  However, a screen with a resistive touchscreen is also quite viable. <br><br><h2>  This is Hard-Fork, baby! </h2><br><img src="https://habrastorage.org/webt/7z/vu/bu/7zvubucla5slvvru1y4twjg8u3u.jpeg"><br><br>  The application has been seriously finalized.  And almost ceased to remind her parent.  Therefore (and also because the creator of Octoprint-TFT officially froze the development of his brainchild), it was decided to make a hard-fork and name the new project Octoscreen. <br><br><ul><li>  First of all, the problem of screen hangup, which Octoprint-TFT suffered, was completely eliminated. </li><li>  - Significantly changed the design and layout: <br><br><img src="https://habrastorage.org/webt/bn/xi/t9/bnxit9g6bg9q159i9be0bjr7tuc.png"></li><li>  The screen has learned to understand printer states (idle / print): <br><br><img src="https://habrastorage.org/webt/2t/e2/ak/2te2akaxbfvwn24mibfcpmqmncu.png"></li><li>  Added the function of quick preheating / turning off the heating by pressing the icon of an extruder or a table, while the screen highlights the status: <br><br><img src="https://habrastorage.org/webt/76/ve/fi/76vefiden4g_zfzjvqcjlnjwfto.png"></li><li>  Added manual table calibration screen: <br><br><img src="https://habrastorage.org/webt/a6/ju/9z/a6ju9zxji49wqlb8egb8okzhymg.png"></li><li>  The ‚ÄúMenu‚Äù item is placed on a separate screen: <br><br><img src="https://habrastorage.org/webt/-g/ku/ic/-gkuicaqwncsdwhatapnmqoevm8.png"></li><li>  Added WiFi control function: <br><br><img src="https://habrastorage.org/webt/gc/_v/jc/gc_vjck9hnu7-ovt7xpgw0y1mj0.png"></li><li>  The application itself now supports up to 4 extruders, which is exactly why it was created: <br><br><img src="https://habrastorage.org/webt/tt/yf/am/ttyfammo6_gtvdtbnxis9f9dr3c.png"></li></ul><br>  Download the app and find a brief installation guide from <a href="https://github.com/Z-Bolt/OctoScreen">our GitHub</a> . <br><br>  There is also a <a href="https://community.z-bolt.ru/t/octoscreen-na-3-5inch-rpi-lcd-a/18">detailed instruction for screen 3.5</a> , for which a special thanks to our colleague Denis (@ negativ72rus). <br><br><h2>  Revision of views on the software and hardware architecture of the printer or pereobuvanie on the go </h2><br><img src="https://habrastorage.org/webt/et/tj/ze/ettjzezztdvncbw2ov2c9l0py2q.png"><br><br>  Initially, we planned to use Marlin in our multi-extruder printer, but in the end the choice fell on Klipper.  There are several reasons: <br><br>  1. One of the main reasons for us as developers is the reason for its flexibility.  Marlin and its ‚Äúmacaroni‚Äù code make a real challenge to the process of making improvements to it, and furthermore their further support. <br><br>  Klipper in this regard is the complete opposite of Marlin.  Firstly, all the configuration of Klipper is rendered from the program code.  The code itself is well structured.  But most importantly, Klipper provides for modularity !!!  You can add your logic to the firmware without making a change to its core, and thus greatly simplify further support for your code. <br><br>  2. All the firmware settings can be done directly through the OctoPrint web interface.  And at the same time the possibility of setting is much more powerful than that of Marlin or Smootheiware. <br><br>  3. How can one not say anything about the bits that everyone has been chasing lately)).  The Klipper architecture itself assumes that the computational load falls on the Raspberry PI.  The function of the MKS Gen L control board (in the case of Z-Bolt printers) remains in transmitting signals to / from peripherals (motors, sensors, heaters, controls). <br><br>  But the Raspberry Pi 3 Model B + is equipped with a 64-bit, 4-core Broadcom BCM2837B0 A53 1.4GHz chip. <br><br>  In fact, Octoprint + Klipper running on the Raspberry Pi + is the same MKS Gen L - <br>  An order of magnitude more functional and progressive solution than Marlin, running on some 32-bit chip. <br><br>  Configuration files for Klipper for Z-Bolt printers can also be <a href="https://community.z-bolt.ru/t/konfiguraczionnye-fajly-dlya-klipper-dlya-printerov-z-bolt/52">found here</a> . <br><br><h2>  A small bonus at the end! </h2><br>  We also made our own theme for the Octoprint interface: <br><br><img src="https://habrastorage.org/webt/ul/ab/7y/ulab7ylxsog55kjtqjbbqtixprq.png"><br><br>  The cap can be customized with the native color picker in the Appearance section: <br><br><img src="https://habrastorage.org/webt/yp/bn/qg/ypbnqg7glksmku-buyzlc6g8uhc.png"><br><br>  Instructions on how to install a theme can be found <a href="https://github.com/Z-Bolt/OctoPrint-Z-Bolt-Theme">on our GitHub</a> . <br><br>  Write in the comments what functions of the screen you consider most useful and necessary to add. <br><br>  <b>All good, positive and good blowing overhanging elements!</b> </div><p>Source: <a href="https://habr.com/ru/post/460453/">https://habr.com/ru/post/460453/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460441/index.html">Gleb Nitsman: ‚ÄúI found the very end of an era when people had not yet chased the gold contained in radio elements‚Äù</a></li>
<li><a href="../460443/index.html">Designers vs developers: about the history of creating the application "My smart city"</a></li>
<li><a href="../460445/index.html">Lecture course "Basics of digital signal processing"</a></li>
<li><a href="../46045/index.html">Linux Teacher Test</a></li>
<li><a href="../460451/index.html">The man made a third ear for himself to be used by the whole world - for the sake of art</a></li>
<li><a href="../460457/index.html">Solar power plant on the house 200 m2 do it yourself</a></li>
<li><a href="../46046/index.html">Are you interested in authoring articles on game dev under Windows, XBOX360 and Zune using XNA?</a></li>
<li><a href="../460463/index.html">What happened to GALILEO - GNSS programmer version</a></li>
<li><a href="../460465/index.html">Digital Shadows - competently helps reduce digital risks</a></li>
<li><a href="../460469/index.html">The basics of transparent proxying using 3proxy and iptables / netfilter or how to ‚Äúlet everything through a proxy‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Object data recognition system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DISPLAY SYSTEM OF DISPLAYED DATA OF OBJECT 

 INTRODUCTION 
 The developed system is designed for contactless recognition of object data displayed on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Object data recognition system</h1><div class="post__text post__text-html js-mediator-article">  <b>DISPLAY SYSTEM OF DISPLAYED DATA OF OBJECT</b> <br><br>  <b>INTRODUCTION</b> <br>  The developed system is designed for contactless recognition of object data displayed on its display.  The system is part of the means to test the object according to the dialogue between the object and the user. <br>  Testing systems with access to software or hardware channels for displaying user information does not require data recognition.  However, when such a connection to the object data is missing, it can be performed using a contactless recognition system, which can provide long-term monitoring of the state of the object in automatic mode. <br>  <i>This paper discusses the MatLAB recognition tools</i> without using neural networks, the effectiveness of which, to a large extent, depends on the learning outcomes. <br>  The features of the developed system are shown on the example of data recognition of the diving computer of Open Safety Equipment Ltd. <br>  The article contains the following sections. <br>  ‚Ä¢ MatLAB image processing library functions <br>  ‚Ä¢ Characteristics of the used web camera, connecting the camera to the MatLAB environment, setting up camera modes. <br>  ‚Ä¢ Character recognition using correlation functions. <br>  ‚Ä¢ Recognition User Interface and Recognition Results <br><br>  <b>LIBRARY FUNCTIONS OF IMAGE PROCESSING OF MATLAB</b> <br>  MatLAB has libraries of functions for working with graphic files and video signals.  Below are given the options used library functions. <br>  <b>Reading image image file</b> <br><pre><code class="matlab hljs">&gt;&gt; pct = imread(<span class="hljs-string"><span class="hljs-string">'DC_OS.jpg'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/files/c1e/a34/325/c1ea343252d54eec853ed5b0fd372fe6.PNG"><br>  Fig.  1. RGB image [1] jpg file format &lt;196x259x3 uint8&gt; <br><a name="habracut"></a><br>  Supported input file formats are BMP, CUR, GIF, HDF4, ICO, LPEG, JPEG 2000, PBM, PCX, PGM. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Adding a graphic primitive to an image</b> <br><pre> <code class="matlab hljs">Imf = insertShape(pct, <span class="hljs-string"><span class="hljs-string">'Rectangle'</span></span>, [<span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, <span class="hljs-number"><span class="hljs-number">220</span></span>, <span class="hljs-number"><span class="hljs-number">153</span></span>], <span class="hljs-string"><span class="hljs-string">'Color'</span></span>, <span class="hljs-string"><span class="hljs-string">'green'</span></span>); <span class="hljs-comment"><span class="hljs-comment">%    pct     .</span></span></code> </pre><br><img src="https://habrastorage.org/files/c37/daf/986/c37daf9862db4aa1a75a81e752a08b82.PNG"><br>  Fig.  2. The pct image with a rectangular green frame, &lt;240x320x3 uint8&gt;. <br><br>  The m-code for adding primitives to video frames: <br><pre> <code class="matlab hljs">clear all pos_triangle = [<span class="hljs-number"><span class="hljs-number">183</span></span> <span class="hljs-number"><span class="hljs-number">297</span></span> <span class="hljs-number"><span class="hljs-number">302</span></span> <span class="hljs-number"><span class="hljs-number">250</span></span> <span class="hljs-number"><span class="hljs-number">316</span></span> <span class="hljs-number"><span class="hljs-number">297</span></span>]; pos_hexagon = [<span class="hljs-number"><span class="hljs-number">340</span></span> <span class="hljs-number"><span class="hljs-number">163</span></span> <span class="hljs-number"><span class="hljs-number">305</span></span> <span class="hljs-number"><span class="hljs-number">186</span></span> <span class="hljs-number"><span class="hljs-number">303</span></span> <span class="hljs-number"><span class="hljs-number">257</span></span> <span class="hljs-number"><span class="hljs-number">334</span></span> <span class="hljs-number"><span class="hljs-number">294</span></span> <span class="hljs-number"><span class="hljs-number">362</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span> <span class="hljs-number"><span class="hljs-number">361</span></span> <span class="hljs-number"><span class="hljs-number">191</span></span>]; <span class="hljs-comment"><span class="hljs-comment">%webcamlist; cam = webcam(1); for i = 1:100 %    I = snapshot(cam); %   RGB = insertShape(I, 'circle', [150 280 35], 'LineWidth', 5); %     RGB = insertShape(RGB, 'FilledPolygon', {pos_triangle, pos_hexagon}, 'Color', {'white', 'green'}, 'Opacity', 0.7); figure(2), imshow(RGB); %     end</span></span></code> </pre><br><img src="https://habrastorage.org/files/a4c/ee9/bd6/a4cee9bd63fc4fd8a9f9cbbd669be3ad.PNG"><br>  Fig.  3. Video image with added geometric primitives. <br><br>  <b>Image reduction</b> <br>  Image reduction 2N times is achieved by a corresponding decrease in the number of image pixels for each coordinate. <br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%    4  ( 2^2) gaussPyramid = vision.Pyramid('PyramidLevel', 2); %  jpg ,     uint8  single I = im2single(imread('DC_OS.jpg')); J = step(gaussPyramid, I);  %     figure, imshow(I); title('Original Image'); figure, imshow(J); title('Reduced Image');</span></span></code> </pre><br><img src="https://habrastorage.org/files/538/435/fd2/538435fd2a0248e88c8c4b6cad6e2978.PNG"><br>  Fig.  4. Image reduction 4 times. <br><br>  <b>Image resizing</b> <br><pre> <code class="matlab hljs">pct=imresize(pct,[<span class="hljs-number"><span class="hljs-number">400</span></span> NaN]); <span class="hljs-comment"><span class="hljs-comment">%    pct      , ,  &lt;196 x 259 x 3 uint8 &gt;  &lt;400 x 529 x 3 uint8 &gt;</span></span></code> </pre><br>  <b>Selection of a fragment of the image</b> <br><pre> <code class="matlab hljs">Imf = imcrop(pct_bw, [<span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">27</span></span>, <span class="hljs-number"><span class="hljs-number">220</span></span>, <span class="hljs-number"><span class="hljs-number">153</span></span>]); <span class="hljs-comment"><span class="hljs-comment">%     &lt;154 x 221 x 3 uint8 &gt;</span></span></code> </pre><br>  <b>Convert RGB Image to Gray Palette</b> <br><pre> <code class="matlab hljs">pct_bw=rgb2gray(pct); <span class="hljs-comment"><span class="hljs-comment">%  RGB &lt;196 x 259 x 3 uint8 &gt;  &lt;196 x 259 uint8 &gt;</span></span></code> </pre><br><img src="https://habrastorage.org/files/88d/402/c5d/88d402c5d7b14a46b3501b1b4c785237.PNG"><br>  Fig.  5. Reduction of RGB images to grayscale. <br><br>  <b>Image filtering</b> <br>  2d median image filtering in grayscale <br><pre> <code class="matlab hljs">pct_filt=medfilt2(pct_bw,[<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>]); <span class="hljs-comment"><span class="hljs-comment">%     .</span></span></code> </pre><br>  <b>Blur image</b> <br><pre> <code class="matlab hljs">se=strel(<span class="hljs-string"><span class="hljs-string">'disk'</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-comment"><span class="hljs-comment">%     (STREL)-  0  1      , ,  pct_dilasi=imdilate(pct_filt,se); %  </span></span></code> </pre><br><img src="https://habrastorage.org/files/1d0/796/6d4/1d07966d43114b7895cf6e54a238e005.PNG"><br>  Fig.  6. Examples of blur left image. <br><br>  <b>Thinning of the solid elements of the image</b> <br><pre> <code class="matlab hljs">pct_eroding=imerode(pct_filt,se); <span class="hljs-comment"><span class="hljs-comment">% Eroding the gray image with structural element &lt;img src="https://habrastorage.org/files/3ac/c17</span></span></code> </pre>  /253/3acc172530fe4ad4bd3d385b52507d0e.PNG "/&gt; <br>  Fig.  7. An example of thinning solid image elements. <br><br>  <b>Subtracting a constant from an image or another image</b> <br><pre> <code class="matlab hljs">pct_edge_enhacement=imsubtract(pct_dilasi,pct_eroding); <span class="hljs-comment"><span class="hljs-comment">%   pct_dilasi pct_eroding</span></span></code> </pre><br>  Image preparation and subtraction program: <br><pre> <code class="matlab hljs">pct = imread(<span class="hljs-string"><span class="hljs-string">'DC_OS.jpg'</span></span>); pct_bw=rgb2gray(pct); se=strel(<span class="hljs-string"><span class="hljs-string">'disk'</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); pct_eroding=imerode(pct_bw,se); pct_edge_enhacement=imsubtract(pct_bw,pct_eroding); <span class="hljs-built_in"><span class="hljs-built_in">figure</span></span>, imshow(pct_edge_enhacement);</code> </pre><br><img src="https://habrastorage.org/files/30e/f7e/55a/30ef7e55a0b8472aa261de394cda13c4.PNG"><br>  Fig.  8. Result (on the right) of subtracting the average image from the left. <br><br>  <b>Convert matrix to gray tones</b> <br><pre> <code class="matlab hljs">pct_edge_enhacement_double=mat2gray(double(pct_edge_enhacement)); <span class="hljs-comment"><span class="hljs-comment">%  196 x 258 uint8 [0 .. 255] &gt; 196 x 258 double [0 .. 255] &gt; 196 x 258 double [0 .. 1]</span></span></code> </pre><br>  <b>2d bundle</b> <br><pre> <code class="matlab hljs">pct_double_konv=conv2(pct_edge_enhacement_double,[<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>;<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-comment"><span class="hljs-comment">%  double </span></span></code> </pre><br><img src="https://habrastorage.org/files/06a/dcb/378/06adcb3789f54ea2baf89c34631db70d.PNG"><br>  Fig.  9. The action of convolution. <br><br>  <b>Image intensity scaling</b> <br><pre> <code class="matlab hljs">pct_intens=imadjust(pct_double_konv,[<span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-number"><span class="hljs-number">0.7</span></span>],[<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>],<span class="hljs-number"><span class="hljs-number">0.1</span></span>); <span class="hljs-comment"><span class="hljs-comment">%  [0.5 0.7]  128 .. 179   [0 1]  0 .. 255; 0.1 - gamma</span></span></code> </pre><br><img src="https://habrastorage.org/files/d14/581/556/d145815563bd40cebdd3b9d16ff84c46.PNG"><br>  Fig.  10. Scaling intensity. <br><br>  <b>Conversion of a numeric matrix into a logical</b> <br><pre> <code class="matlab hljs">pct_logic=logical(pct_intens); <span class="hljs-comment"><span class="hljs-comment">%  double  uint8  binary; ,  &gt; 0  1.</span></span></code> </pre><br><img src="https://habrastorage.org/files/f00/3c8/acc/f003c8acce3e4afc97f42ceb56cdb7ba.PNG"><br>  Fig.  11. Convert &lt;196 x 256 double&gt; matrices to binary &lt;196 x 256 logical&gt; <br><br>  <b>Fill contoured elements</b> <br><pre> <code class="matlab hljs">pct_fill=imfill(pct_line_delete,<span class="hljs-string"><span class="hljs-string">'holes'</span></span>);</code> </pre><br><img src="https://habrastorage.org/files/34e/c6d/751/34ec6d75194e4f05ac3375b5043e3d80.PNG"><br>  Fig.  12. Fill elements with continuous contours &lt;196 x 256 double&gt; <br><br>  <b>Removal of solid (island) fragments (noise) from a binary image</b> <br><pre> <code class="matlab hljs">pct_final=bwareaopen(pct_logic,<span class="hljs-number"><span class="hljs-number">500</span></span>); <span class="hljs-comment"><span class="hljs-comment">%  " == 1"  &gt; 500 </span></span></code> </pre><br><img src="https://habrastorage.org/files/9de/d52/e6a/9ded52e6a33b48a2b257b97b281043a6.PNG"><br>  Fig.  13. Removal of ‚Äúblack == 0‚Äù fragments larger than 500 pixels using the NOT inversion. <br><br>  Program Code: <br><pre> <code class="matlab hljs">pct_double = double(imread(<span class="hljs-string"><span class="hljs-string">'DC_OS.jpg'</span></span>))./<span class="hljs-number"><span class="hljs-number">256</span></span>; pct_gray =rgb2gray(pct_double); pct_logic=logical(pct_gray); <span class="hljs-comment"><span class="hljs-comment">%   pct_logic_inv=not(logical(pct_logic)); %  pct_final_inv =bwareaopen(pct_logic_inv,500); %  " " pct_final=not(pct_final_inv); %  figure, imshow(pct_final);</span></span></code> </pre><br>  <b>Selection of fragments (islands) of the binary image</b> <br><pre> <code class="matlab hljs">[labelled jml] = bwlabel(pct_final); <span class="hljs-comment"><span class="hljs-comment">%  ‚Äú‚Äù      . labelled ‚Äì    , lml ‚Äì   .</span></span></code> </pre><br><img src="https://habrastorage.org/files/4ab/259/f28/4ab259f287154bf58729900653f81dee.PNG"><br>  Fig.  14. Fragment of ten numbered ‚Äúisland‚Äù groups of units of the binary image. <br><br>  <b>Finding the coordinates and sizes of island zones</b> <br><pre> <code class="matlab hljs">Iprops=regionprops(labelled,<span class="hljs-string"><span class="hljs-string">'BoundingBox'</span></span>,<span class="hljs-string"><span class="hljs-string">'Image'</span></span>);</code> </pre><br><img src="https://habrastorage.org/files/70e/f7f/fcf/70ef7ffcf64e4ecfb50f01a64586da6f.PNG"><br>  Fig.  15. A fragment of a graphical representation of the Iprops structural variable containing the coordinates and dimensions of rectangular zones of numbered groups and the binary matrix of each group.  Selected coordinates and sizes of the fifth group. <br><br>  <b>bar chart</b> <br>  The imhist histogram (Img_reference) allows you to get the dependence of the number of pixels for each intensity. <br><img src="https://habrastorage.org/files/6b1/a61/e03/6b1a61e03bfd4b6f944494ac8accaf57.PNG"><br>  Fig.  16. Image (left) and its histogram - the number of gray tones.  The histogram shows that black color of zero intensity prevails in the image: ~ 3500 points. <br><br>  <b>Intensity distribution</b> <br><img src="https://habrastorage.org/files/445/db9/19d/445db919d852487da0dace0760152926.PNG"><br>  Fig.  17. The total intensity distribution in rows sum (Img). <br><img src="https://habrastorage.org/files/190/9df/f51/1909dff5169841c1ae757b6fd6bc65c5.PNG"><br>  Fig.  18. On the left - the sum of the intensity of pixels in the rows sum (Img) after the median filter Img = medfilt2 (Img, [5 5]).  On the right is the derivative of the sum diff (sum (Img)). <br><br>  <b>Three-dimensional construction of video images.</b> <br>  Video frame can be presented in tabular form, as shown in Fig.  19 for character 9. <br><img src="https://habrastorage.org/files/a25/95b/221/a2595b2218574e92af52e26fd9e5f448.PNG"><br>  Fig.  19. Tabular distribution of the pixel intensity of the character "9" in Excel. <br>  Plotter MatLAB has a ‚ÄúRotate 3D‚Äù button (Fig. 20), which allows displaying output data in 3d format. <br><img src="https://habrastorage.org/files/372/94b/218/37294b21860644ab98100c76fa8d848b.PNG"><br>  Fig.  20. Button plotter to convert the displayed data in 3d format. <br><img src="https://habrastorage.org/files/ae5/a82/3cc/ae5a823cc2ac455987c0ac841c8b4875.PNG"><br>  Fig.  21. Examples of 3d images.  The right shows the characters "20".  Vertical displays pixel intensity. <br><br>  <b>VIDEO CAMERA</b> <br>  The project used a high-definition webcam HD Logitech C52 [2]. <br>  Specifications camcorder Logitech C52. <br>  ‚Ä¢ HD video communication (1280 x 720 pixels) <br>  ‚Ä¢ HD video: up to 1280 x 720 pixels. <br>  ‚Ä¢ Autofocus <br>  ‚Ä¢ Photos: up to 8 megapixels (with software processing) <br>  ‚Ä¢ Built-in microphone with Logitech RightSound technology <br><img src="https://habrastorage.org/files/cc2/0ca/603/cc20ca60320f48fbb19231158a6c6d73.PNG"><br>  Fig.  22. Appearance and settings of the camcorder Logitech C52. <br><br>  Basic computer requirements with a camera resolution of 1280 x 720 pixels. <br>  ‚Ä¢ 2.4 GHz processor frequency <br>  ‚Ä¢ RAM capacity 2 GB <br>  ‚Ä¢ 200 MB free hard disk space <br>  ‚Ä¢ USB 2.0 port <br>  ‚Ä¢ Operating environment: Windows XP (SP2 or higher), Vista or Windows 7 (32-bit or 64-bit) <br><br>  <b>Connect camcorder to Matlab</b> <br>  1. Check if the camcorder is on the MatLAB device list. <br><pre> <code class="matlab hljs">&gt;&gt; webcamlist</code> </pre><br>  2. If the camera is not listed, connect it using the Support Package Installer package (see Fig. 23) <br><img src="https://habrastorage.org/files/48f/80b/0d9/48f80b0d97f24f8a9609c764e5e1fab2.PNG"><br>  Fig.  23. Connecting the camcorder to MATLAB. <br><br>  3. After successful installation, the camera is listed <br><pre> <code class="matlab hljs">&gt;&gt; webcamlist</code> </pre><br>  <b>Connect camcorder to Simulink</b> <br>  National Instruments camcorders can connect to the SimLink MatLAB environment via the Image Acquisition Toolbox&gt; From Video Device library objects.  To connect, you must install the NI-DAQmx package using the Support Package Installer (Figure 23). <br>  You can run the Image Acquisition Tool from the MatLAB command line: <br><pre> <code class="matlab hljs"> &gt;&gt;imaqtool</code> </pre><br>  <b>The procedure for entering video in MatLAB</b> <br>  Input frames in MatLAB performed in the following order. <br>  1. Search for video cameras recognized by MATLAB connected to a computer. <br><pre> <code class="matlab hljs">&gt;&gt; webcamlist</code> </pre><br>  2. Creating a camera object. <br><pre> <code class="matlab hljs">&gt;&gt; cam = webcam(<span class="hljs-string"><span class="hljs-string">'Logitech'</span></span>)</code> </pre><br>  3. View RGB video with the output of the camera name, video time, resolution and frame rate. <br><pre> <code class="matlab hljs">&gt;&gt; preview(cam)</code> </pre><br><img src="https://habrastorage.org/files/143/bba/98c/143bba98c1734ab69a839947f796663f.PNG"><br>  Fig.  24. Video output in MATLAB. <br><br>  4. Set the required camera settings. <br><pre> <code class="matlab hljs">cam = webcam (<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  Examples of the structural list of camera parameters: <br><table><tbody><tr><td>  cam = <br>  webcam with properties: <br>  Name: 'Logitech HD Webcam C525' <br>  Resolution: '640x480' <br>  AvailableResolutions: {1x22 cell} <br>  Brightness: 128 <br>  Contrast: 32 <br>  Focus: 60 <br>  Gain: 64 <br><br>  WhiteBalance: 5500 <br>  Tilt: 0 <br>  Exposure: -4 <br>  Pan: 0 <br>  Sharpness: 22 <br>  Saturation: 32 <br>  BacklightCompensation: 1 <br>  Zoom: 1 <br>  ExposureMode: 'auto' <br></td><td>  cam = <br>  webcam with properties: <br>  Name: 'Logitech HD Webcam C525' <br>  Resolution: '960x720' <br>  AvailableResolutions: {1x22 cell} <br>  Brightness: 128 <br>  WhiteBalanceMode: 'manual' <br>  Pan: 0 <br>  Exposure: -5 <br>  Tilt: 0 <br>  FocusMode: 'manual' <br>  BacklightCompensation: 1 <br>  WhiteBalance: 5900 <br>  ExposureMode: 'manual' <br><br>  Sharpness: 30 <br>  Saturation: 32 <br>  Focus: 90% 80, 85, 90, 95 adjust <br>  Contrast: 32 <br>  Zoom: 1 <br>  Gain: 64 <br></td></tr></tbody></table><br>  Obtain possible parameter values, such as camera resolution <br><pre> <code class="matlab hljs">&gt;&gt; cam.AvailableResolutions <span class="hljs-built_in"><span class="hljs-built_in">ans</span></span> = <span class="hljs-string"><span class="hljs-string">'640x480'</span></span> <span class="hljs-string"><span class="hljs-string">'160x120'</span></span> <span class="hljs-string"><span class="hljs-string">'176x144'</span></span> <span class="hljs-string"><span class="hljs-string">'320x176'</span></span> <span class="hljs-string"><span class="hljs-string">'320x240'</span></span> <span class="hljs-string"><span class="hljs-string">'432x240'</span></span> <span class="hljs-string"><span class="hljs-string">'352x288'</span></span> <span class="hljs-string"><span class="hljs-string">'544x288'</span></span> <span class="hljs-string"><span class="hljs-string">'640x360'</span></span> <span class="hljs-string"><span class="hljs-string">'752x416'</span></span> <span class="hljs-string"><span class="hljs-string">'800x448'</span></span> <span class="hljs-string"><span class="hljs-string">'864x480'</span></span> <span class="hljs-string"><span class="hljs-string">'960x544'</span></span> <span class="hljs-string"><span class="hljs-string">'1024x576'</span></span> <span class="hljs-string"><span class="hljs-string">'800x600'</span></span> <span class="hljs-string"><span class="hljs-string">'1184x656'</span></span> <span class="hljs-string"><span class="hljs-string">'960x720'</span></span> <span class="hljs-string"><span class="hljs-string">'1280x720'</span></span> <span class="hljs-string"><span class="hljs-string">'1392x768'</span></span> <span class="hljs-string"><span class="hljs-string">'1504x832'</span></span> <span class="hljs-string"><span class="hljs-string">'1600x896'</span></span> <span class="hljs-string"><span class="hljs-string">'1280x960'</span></span></code> </pre><br><img src="https://habrastorage.org/files/bd3/3db/fea/bd33dbfea0c44ddd8a15340f32dcbcb2.PNG"><br>  Fig.  25. Images at a resolution of '320x240' '640x480' and '1280x960' pixels. <br>  Setting the required parameter value <br><pre> <code class="matlab hljs">&gt;&gt; cam.Resolution = <span class="hljs-string"><span class="hljs-string">'320x240'</span></span>;</code> </pre><br>  5. Exit video viewing mode. <br>  &gt;&gt; closePreview (cam) <br>  6. Frame input. <br><pre> <code class="matlab hljs">&gt;&gt; img = snapshot(cam);</code> </pre><br>  7. Frame display. <br><pre> <code class="matlab hljs">&gt;&gt; imshow(img)</code> </pre><br>  8. Delete the camera object. <br><pre> <code class="matlab hljs">&gt;&gt; clear(<span class="hljs-string"><span class="hljs-string">'cam'</span></span>);</code> </pre><br>  <b>Adjusting the position of the camera relative to the object</b> <br>  A frame with known coordinates is added to the video output in the MatLAB (Fig. 26).  When adjusting the camera position relative to the object, the object borders should coincide with the frame position. <br><img src="https://habrastorage.org/files/fb7/726/161/fb7726161c7a498094bb0e28a4e15cc5.PNG"><br>  Fig.  26. The frame in the video frame. <br><br>  An example of an m-code for displaying a video with a base frame: <br><pre> <code class="matlab hljs">webcamlist; cam = webcam(<span class="hljs-number"><span class="hljs-number">1</span></span>); cam.Resolution = <span class="hljs-string"><span class="hljs-string">'320x240'</span></span>; target_area = [<span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">44</span></span>, <span class="hljs-number"><span class="hljs-number">217</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) pct = snapshot(cam); <span class="hljs-comment"><span class="hljs-comment">% display target Imf = insertShape(pct, 'Rectangle', target_area, 'Color', 'green'); image(Imf); end</span></span></code> </pre><br>  <b>Features of the state of the object</b> <br>  During operation, the device changes the format of the information displayed on the screen.  The system recognizes a format change by the presence / absence of the TTS and Step fields.  For the field of each format, their own distribution of character definition zones has been built.  27. <br><img src="https://habrastorage.org/files/a87/140/b6b/a87140b6b4ed4b249462c4d9179766bc.PNG"><br>  Fig.  27. Different formats of information displayed by the device under test. <br><br>  <b>TEXT RECOGNISING</b> <br>  <b>OCR function Matlab</b> <br>  The Optical Character Recognition (OCR) function MatLAB recognizes the text of a graphic file. <br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%   I = imread('DC_OS.jpg'); %   results = ocr(I); %    wordBBox = results.WordBoundingBoxes %     figure; Iname = insertShape(I, 'Rectangle', wordBBox, 'Color', 'red'); imshow(Iname);</span></span></code> </pre><br><img src="https://habrastorage.org/files/a1e/b32/304/a1eb323042f842169d92244ff6c4f544.PNG"><br>  Fig.  28. Symbol search zones (23 rectangular zones are highlighted in red), coordinates and dimensions of the zones in results.WordBoundingBoxes. <br>  Table 1. The text recognition result. <br><img src="https://habrastorage.org/files/75d/8ed/52d/75d8ed52d2244c5f9444eb329ead960b.PNG"><br>  <b>An example of automatic detection of text zones and text recognition in MatLAB</b> <br>  An example of automatic text recognition in the MatLAB is shown in the Help section of the Matlab [3]. <br><img src="https://habrastorage.org/files/4f7/1ea/a88/4f71eaa88b6d443c8bd18f207c04241a.PNG"><br>  Fig.  29. Original image [3]. <br><br>  <b>Finding a fragment of the image by the correlation function</b> <br>  The calculation of the normalized cross-correlation norm_Corr_f allows you to track the presence of specified fragments and their coordinates in frames of the video image.  This can be used, for example, when searching or counting objects or setting the camera position. <br>  Examples of the implementation of the detection algorithm are shown in Fig.  30, Fig.  31, algorithm code [4]. <br><img src="https://habrastorage.org/files/612/53f/d23/61253fd23a5e4b94a3c73b861170b582.PNG"><br>  Fig.  30. Object area - text ‚ÄúRun Time‚Äù, correctly detected on the left frame.  When you cover the object area with your hand, the search program found the wrong area of ‚Äã‚Äãthe object (right frame). <br><img src="https://habrastorage.org/files/9ac/224/5db/9ac2245db0514a28ab1fdbaefb9322ea.PNG"><br>  Fig.  31. The dependence of the correlation function of the frame number.  The value of the function in the presence of the object to be searched is ~ 0.99, and in the absence of it, ~ 0.978.  The small range of the 0.012 function change makes the search algorithm sensitive to the effects of interference ‚Äî finding non-object zones that are well correlated with the reference object ... <br><br>  <b>Improving the signal-to-noise correlation ratio by increasing the ratio of the character area to the character detection area</b> <br>  The ability to distinguish characters by the correlation method depends on the resolution of the character field, the ratio of the character area to the character detection area, and the difference between the designated and reference characters.  The correlation increases with increasing resolution and area ratios and decreasing differences between the compared characters. <br><img src="https://habrastorage.org/files/7c6/290/013/7c629001331a41d3bdb58559b85c20a4.PNG"><br>  Fig.  32. The selection of the location of characters. <br><img src="https://habrastorage.org/files/0c1/361/038/0c136103833c47c1b57d8ec9a13a7625.PNG"><br>  Fig.  33. The correlation coefficient between the figures of the object 5 (blue line), 6 (brown line) and 2 (yellow line) in the area of ‚Äã‚Äã17x25 pixels and reference symbols: empty zone, characters from 0 to 9. The correlation amplitude shows that the pair of two is well different from the rest of the characters (it is easier to detect), and the five differs little from the six. <br><img src="https://habrastorage.org/files/fce/299/d38/fce299d385534606b4333cc2cf3d5e54.PNG"><br>  Fig.  34. The correlation coefficients between the two empty zones of the object and the zone with 9 and the reference symbols "empty";  0;  one;  2;  3;  four;  five;  6;  7;  eight;  9. The graphs show the maximum correlation with the ‚Äúempty‚Äù reference symbol for the first two positions and with the reference 9 for the last position. <br><br>  <b>Eliminate uncertainty when comparing a symbol with an empty zone</b> <br>  The correlation function can give an undefined value NaN when comparing an object symbol with an empty reference zone consisting of zeros.  To eliminate this effect, the intensity of one element of the standard is increased to 255: <br><pre> <code class="matlab hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nmb</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">recognize_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img,target_area,Img_ref,index)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nmb</span></span></span><span class="hljs-function"> = 0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">n</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1)</span></span></span><span class="hljs-function">:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(end)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Img_target</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">imcrop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img,target_area(n,:)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Img_target</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">imadjust</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img_target)</span></span></span><span class="hljs-function">; % </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Adjust</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intensity</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">values</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Img_target</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(1,1)</span></span></span><span class="hljs-function"> = 255; % </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NaN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">correlation</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">with</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function"> = 1:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img_ref,1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Img_ref</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i,1,1)</span></span></span><span class="hljs-function"> = 255; % </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NaN</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">correlation</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">with</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">image</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Img_reference</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reshape</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img_ref(i,:,:)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img_ref,2)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img_ref,3)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">corr2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(logical(Img_reference-110)</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logical</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Img_target-110)</span></span></span><span class="hljs-function">); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">num</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r == max(r)</span></span></span><span class="hljs-function">) - 2; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">num</span></span></span><span class="hljs-function"> &lt; 0 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">num</span></span></span><span class="hljs-function"> = 0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nmb</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nmb</span></span></span><span class="hljs-function">*10 + </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">num</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  <b>Increase correlation using generic fonts</b> <br>  In this version of 320 x 240 pixels, the fonts of the following sizes are 18;  26;  36 and 60. It is possible to select and modify the font of the standard to the object's font using special programs, for example, GLCDFontCreator.exe [5]. <br><img src="https://habrastorage.org/files/653/39e/0e0/65339e0e048b42b48d9cf786b815b8fa.PNG"><br>  Fig.  35. Original image (left) and the result of the imposition of 'Arial Rounded MT Bold' fonts on the original image (right). <br><img src="https://habrastorage.org/files/3a6/7d1/a55/3a67d1a557684d41a877325b08a292bd.PNG"><br>  Fig.  36. Option narrowing of the search zones of characters. <br><img src="https://habrastorage.org/files/2fa/b98/e4c/2fab98e4ca154c75928b74df42e39ac7.PNG"><br>  Fig.  37. Options for reference numbers of high and low resolution.  The correlation (coincidence) between the numbers 5 and 6 is higher than between the other characters. <br><img src="https://habrastorage.org/files/62c/f51/f43/62cf51f43cb3434c814da33600245484.PNG"><br>  Fig.  38. Pixel view of Time and Stop. <br><br>  <b>GUI</b> <br>  The object state recognition system is supplemented with a Graphical User Interface Interface (GUI).  The user interface is designed in matlab.  The interface has the following features. <br>  ‚Ä¢ manages video setup and launch <br>  ‚Ä¢ displays live video <br>  ‚Ä¢ shows the quality of the camera installation relative to the object <br>  ‚Ä¢ adjusts the position of recognition zones <br>  ‚Ä¢ shows character recognition result <br>  ‚Ä¢ restores parameter values ‚Äã‚Äãby symbols <br>  ‚Ä¢ builds graphs of changes in object parameters <br>  ‚Ä¢ accumulates and stores results <br>  ‚Ä¢ accepts user exposure to an object through the NEXT and SELECT buttons. <br><img src="https://habrastorage.org/files/765/c3b/c75/765c3bc75dbf435ea11daf4eb8af7f53.PNG"><br>  Fig.  39. The initial state of the Graphical User Interface (GUI) designed in MatLAB. <br><img src="https://habrastorage.org/files/34f/6c3/a08/34f6c3a086974ae9ac79f33a45ef06d9.PNG"><br>  Fig.  40. Fragment GUI.  The video image of an object with a frequency of 30 Hz is displayed on the left.  The video stream symbols recognized in the selected green areas are displayed on the frame template on the right.  The accuracy of combining the camera and the object is determined by the position of the frame of the largest rectangular zone of the left frame. <br><br>  <b>THE RESULT OF OBJECT SYMBOLS RECOGNITION</b> <br><img src="https://habrastorage.org/files/2a6/b37/a6f/2a6b37a6f0cb4b65a5a0a48fd03b8bf8.PNG"><br>  Fig.  41. GUI state at initial object output format. <br><img src="https://habrastorage.org/files/483/789/c85/483789c856ee4e6f89b9a289b101f1bc.PNG"><br><br>  Fig.  42. GUI state when object output format has been changed. <br><img src="https://habrastorage.org/files/328/4f9/909/3284f9909f3b4c108f1a54c57e9e8e36.PNG"><br><br>  Fig.  43. Charts of the parameters displayed on the object's display, read by the contactless system of character recognition. <br><br>  <b>Literature</b> <br>  1. BIO-350 Dive Computer ttps: //www.opensafety.eu/datasheets/Bio350%20Short%20Datasheet.pdf <br>  2. Portable Webcam HD Webcam C525 <a href="http://www.logitech.com/ru-ru/product/hd-webcam-c525">www.logitech.com/ru-ru/product/hd-webcam-c525</a> . <br>  3. Help MatLAB&gt; Computer Vision System Toolbox&gt; Examples&gt; Automatically Detecting Text Files. <br>  4. Help MatLAB&gt; Object Detection and Recognition&gt; Examples and How To&gt; Pattern Matching. <br>  5. Dr.  Bob Davidov.  Building the user interface of the local control system based on the Arduino UNO controller.  <a href="http://portalnp.ru/wp-content/uploads/2015/01/15.03_Arduino-UNO-Local-Control-User-Interface_Ed2a.pdf">portalnp.ru/wp-content/uploads/2015/01/15.03_Arduino-UNO-Local-Control-User-Interface_Ed2a.pdf</a> <br>  6. Dr.  Bob Davidov.  Computer control technologies in the technical systems <a href="http://portalnp.ru/author/bobdavidov">portalnp.ru/author/bobdavidov</a> . </div><p>Source: <a href="https://habr.com/ru/post/302722/">https://habr.com/ru/post/302722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302710/index.html">My Circle Results Report for May 2016</a></li>
<li><a href="../302714/index.html">A free test drive of Cisco Aironet 1832 and 1852 access points will be held in Kiev</a></li>
<li><a href="../302716/index.html">Service "Case of the Day" and two new ratings on Ruvard</a></li>
<li><a href="../302718/index.html">Intel Tools for Video Codec Makers</a></li>
<li><a href="../302720/index.html">Installing the Carbon + Graphite + Grafana + Nginx + MySQL bundle to collect and display metrics in Ubuntu</a></li>
<li><a href="../302724/index.html">Collaborate can not compete: social networks and news sites divide the audience</a></li>
<li><a href="../302726/index.html">Self-configuring applications</a></li>
<li><a href="../302728/index.html">Bitrix24: how to avoid mistakes in project management</a></li>
<li><a href="../302730/index.html">Dash cryptocurrency: full DAO</a></li>
<li><a href="../302732/index.html">ShopConf 2016 - June 17 in Skolkovo - the program is formed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
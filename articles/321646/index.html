<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic 3CX configuration using the setupconfig.xml answer file</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 You can automatically install and configure the 3CX server using the prepared answer file. The answer file is an XML file that contains...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic 3CX configuration using the setupconfig.xml answer file</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  You can automatically install and configure the 3CX server using the prepared answer file.  The answer file is an XML file that contains the same parameters that you specify on the command line or the 3CX Configuration Wizard web interface.  You can create such a file and place it directly on the server or the cloud.init cloud configuration package.  To all the ‚Äúquestions‚Äù that are usually asked in the 3CX Setup Wizard, the system receives pre-set ‚Äúanswers‚Äù ‚Äã‚Äãfrom the file.  As a result, in a few minutes you get a fully configured and ready-to-work system, configured according to your typical template.  You can also include in the answer file the parameters of extension numbers, SIP trunks and DID lines that will be automatically created during the configuration process. <br><br><h3>  Technology Overview </h3><br><div style="text-align:center;"><img title="SNAGHTML11c1c48d" src="https://habrastorage.org/getpro/habr/post_images/187/18a/cb8/18718acb8e86f79cf07713a4476bc6d0.png" alt="SNAGHTML11c1c48d" width="624" height="479"></div><a name="habracut"></a><br>  Prepare an XML file and place it on the server before starting to install 3CX: <br><br><ol><li>  Download <a href="">sample XML answer file setupconfig.xml</a> </li><li>  Specify the parameters in it that match your configuration. </li><li>  Save setupconfig.xml on the server in the appropriate folder: <br><ul><li>  For Linux 3CX version: <strong>/etc/3cxpbx/setupconfig.xml</strong> . </li><li>  For Windows version 3CX: <strong>C: \ ProgramData \ 3CX \ Data \ setupconfig.xml</strong> </li></ul><br></li><li>  When installing 3CX, the Initial Configuration Wizard checks for the presence of the <strong>setupconfig.xml</strong> file. </li></ol><br>  Instead of copying the file to the server, you can use cloud.init.  Copy the contents of <strong>setupconfig.xml</strong> into the <strong>Advanced&gt; User data</strong> section.  Below is an example Amazon AWS cloud.init image. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/f65/a43/903/f65a439038daefa937cb902496621ef9.png"><br><br><h3>  Sample cloud.init file </h3><br>  Enable <strong>setupconfig.xml</strong> in <strong>cloud.init</strong> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/334/a2a/d87/334a2ad87a0a848acd6edce9a2de45d1.png"></div><br>  ‚Üí Download the sample <a href="https://www.3cx.com/wp-content/uploads/2016/11/cloudinit.txt">cloud.init</a> file <br><br><h3>  The structure of the file Setupconfig.xml </h3><br>  The setupconfig.xml file is divided into 4 sections: <br><br><ul><li>  <strong>tcxinit</strong> - describes the initial stage of the PBX Configuration Wizard.  Here are answers to such questions: license key or backup file path, network parameters, public IP address, FQDN name (issued by 3CX or user), host name, DNS type (local or from 3CX), HTTP / S ports and similar options. </li><li>  <strong>mcwizard</strong> - describes the next stage of the PBX Configuration Wizard.  Here you can find answers to such questions: extension number, mail server settings, time zone, country, and information about the owner of the 3CX system. </li><li>  <strong>extensions</strong> - in this section parameters of extensions (users) are specified. </li><li>  <strong>siptrunk</strong> ‚Äî This section specifies the parameters of SIP trunks and DID numbers.  The <strong>inboundrules subsections</strong> describe the inbound rules associated with the DID numbers of a specific trunk. </li><li>  <strong>OutboundRules</strong> ‚Äî This section describes the outgoing rule parameters. </li></ul><br><h3>  Example: 3CX Initial Configuration Wizard Answers </h3><br>  The response block of the 3CX Initial Configuration Wizard is located in the <strong>mcwizard</strong> section <strong>:</strong> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea7/3cf/41f/ea73cf41fb8b5b79bf89b90ad5c85518.png"></div><br>  To correctly fill in the <strong>CountryName</strong> , <strong>TimezoneId,</strong> and <strong>LicenseCountry</strong> parameters, refer to <a href="https://www.3cx.com/wp-content/uploads/2016/11/Time-Zone-Sheet1-1.pdf">this table</a> and select the desired value.  For example, for Mexico, specify the following parameters: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba8/c5f/df2/ba8c5fdf2a84f7ac88d5c48a02e2252e.png"></div><br><h3>  Example: Adding Extensions, SIP Trunks, DID and Outbound Rules </h3><br>  In the <strong>extension</strong> , <strong>siptrunk</strong> , <strong>InboundRules,</strong> and <strong>OutboundRules</strong> response blocks, <strong>extensions</strong> , trunks, incoming and outgoing rules are defined, respectively.  When describing an extension number, you can assign an IP phone to it.  To do this, specify the information about the auto-configuration patterns of IP phones in <a href="https://www.3cx.com/wp-content/uploads/2016/11/Phone-templates-and-Models-Sheet1.pdf">this table</a> .  For example, if you want to bind the phone <strong>snom 720</strong> , find this model in the table and the corresponding auto- <strong>configuration</strong> template file (in this case <strong>snom.ph.xml</strong> ).  Specify this information in the corresponding xml tag. <br><br><h4>  Creating an extension </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ede/679/281/ede6792812bc1c6b84550f4f0fad012d.png"></div><br><h4>  Creating SIP trunks, DID and incoming rules </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b6/b5f/5e7/3b6b5f5e78023d118aaa9c628e7a9880.png"></div><br><h4>  Creating outbound rules with indication of backup routes (trunks) </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c1/f29/52b/4c1f2952b7f430fb26de85f8b808339c.png"></div><br><h3>  Example: automatic installation of SSL certificates </h3><br>  We show how you can include an SSL certificate data in the answer file setupconfig.xml.  In this example, we are talking only about the SSL certificate of the web server.  For other certificates used by the system, add a description of the certificate in the other sections of the answer file.  The <strong>CertificatePath</strong> path will be shared by everyone, but the password for each Certificate <strong>Certificate</strong> will be different. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5e/c5d/fbc/e5ec5dfbc6d30adee5c59a5e63338c5d.png" alt="sslsetupconfig.PNG"></div><br><h3>  3CX Downloads </h3><br><ul><li>  <a href="https://www.3cx.com/phone-system/download-phone-system/">3CX Phone System for Windows</a> </li><li>  <a href="https://www.3cx.com/docs/manual/installation-linux/">3CX Phone System for Debian Linux 8</a> </li><li>  <a href="">3CX Phone System for Debian as an ISO image</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/321646/">https://habr.com/ru/post/321646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321634/index.html">PROTEQ - multigigabit exchange protocol for Xilinx FPGA</a></li>
<li><a href="../321636/index.html">Automount afuse</a></li>
<li><a href="../321638/index.html">Continuous Integration UWP Applications in Visual Studio Team Services</a></li>
<li><a href="../321640/index.html">Facebook Audience Network - a new word in the monetization of sites and applications</a></li>
<li><a href="../321644/index.html">Using expressions to filter data from a database</a></li>
<li><a href="../321648/index.html">J-bird</a></li>
<li><a href="../321652/index.html">UNIX-like systems contain a bunch of crutches. The collapse of the "UNIX philosophy"</a></li>
<li><a href="../321654/index.html">C ++ Russia: interview with speakers</a></li>
<li><a href="../321656/index.html">The basics of Juniper Contrail, and how to put it in the lab</a></li>
<li><a href="../321658/index.html">The digest of interesting materials for the mobile developer # 190 (February 5-12)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
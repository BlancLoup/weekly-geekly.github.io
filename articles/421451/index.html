<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to protect your child from garbage on YouTube and make a custom player with a white list of channels</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You can argue for a long time on whether to give small children access to tablets and smartphones. Someone says that it is harmful to the eyes or the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to protect your child from garbage on YouTube and make a custom player with a white list of channels</h1><div class="post__text post__text-html js-mediator-article"><p>  You can argue for a long time on whether to give small children access to tablets and smartphones.  Someone says that it is harmful to the eyes or the psyche, someone - that parents should play and read with the children themselves, and not try to isolate themselves from them with gadgets.  Which is typical, most often this is said by people who do not have their children.  And who do not know what kind of bliss it is - when the child becomes silent for at least half an hour, stops smashing everything around, quietly lies on the sofa and watches cartoons.  There is one more argument - the children are sensitively repeat everything after their parents, if the parents are constantly buried in the phone, it is very difficult to explain to the children why the parents can, and they don‚Äôt. </p><br><p><img src="https://habrastorage.org/webt/k3/y2/sz/k3y2szb9qvds9nza5bamfw1pb9w.jpeg"></p><br><p>  In general, you can shower me with rotten tomatoes, but my son, who is now without a couple of days for three years, from time to time lies with the tablet on the couch and looks at the muliki on YouTube. </p><br><p>  Unfortunately, I quickly realized that the kids YouTube is just hell TRESH.  About this, even on Habr√©, there <a href="https://habr.com/post/342168/">was</a> already <a href="https://habr.com/post/342168/">a translation of the article</a> .  Children's channels are some kind of bottomless cesspool filled with vigorous eyes like "unwrap one hundred kinder surprises", "stupid rhymes with poor 3d graphics under noisy music" and "drive cars into Beam NG under foolish comments."  For some reason, all this is very attractive for young children who rush to click on such videos as soon as they see them recommended.  And YouTube does not allow to manage recommendations.  Even after giving my son a tablet with the included "normal" cartoons, after a couple of minutes, I watch him again, after two clicks on the recommendations, again find these damn chocolate eggs and start sticking them again. </p><br><p>  Everything, I had enough, I decided.  And he began to cut his application for viewing YouTube, allowing you to select a list of channels and showing only the video from these channels.  How I did it - under the cut. <a name="habracut"></a></p><br><p>  Here is one example of treshevideo with which we will fight.  Shitty made meaningless 3D animation with stupid music - and 142 million views.  For some reason, these videos of children just zombie, they are ready to revise them and revise. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YdZn3PXmFnE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  To compare the scale - the <a href="https://www.youtube.com/watch%3Fv%3DKaOC9danxNo">coolest movie</a> where Chris Hadfield sings with a guitar on the ISS has only 40 million views, and the <a href="https://www.youtube.com/watch%3Fv%3DLWGJA9i18Co">wonderful OK GO clip</a> with real weightlessness (no cables and chromakey, only fair weightlessness on board a special aircraft) - only 12 million, ten times less. </p><br><p>  By the way, advertisers on YouTube <a href="https://habr.com/post/325814/">are not happy about the popularity of children's channels</a> , since showing ads on them is a waste of budgets.  Children watch ads, sometimes even click, but do not buy anything, and millions of views quickly spend the budget. </p><br><h2 id="postanovka-zadachi">  Formulation of the problem </h2><br><p>  At once I will say that I did not set the task to make an application impenetrable for children.  There are already such attempts, including here in Habr√© - everything is cut there so that the child cannot exit the application, buy something, open a browser, etc.  There are options with hardware locks, disconnected ports, custom android shells and other difficulties (for example, <a href="https://habr.com/company/twins/blog/163951/">here's an article</a> for 2012, the project seems to be still alive).  But it all makes sense for older children, who are already exploring the full potential of their gadgets.  For children of 2-3 years no special protection is needed, they are quite happy to watch the video and from time to time to poke in thumbnails of other videos.  The main thing is that these videos should be what you need, and not what YouTube will offer (and it will offer endless chocolate eggs and baby fingers). </p><br><p>  From this was born the list of requirements: </p><br><ul><li>  Custom channel list </li><li>  Protecting him from change (rather from accidental, because tricky adult children already have a bunch of ways to recognize their passwords) </li><li>  The application itself is similar to YouTube, on the left is a video, on the right is a column of thumbnails that can be clicked. </li><li>  The main use-case is random poking through the video; in general, a child doesn‚Äôt care what it is to watch </li></ul><br><p>  At the same time, the work of the application consists of two main parts: search and tune channels using the <a href="https://developers.google.com/youtube/v3/">YouTube Data API</a> and then play the video.  Moreover, I currently have two options for playing video within my own application: </p><br><h2 id="youtube-android-player-api">  YouTube Android Player API </h2><br><p>  <a href="https://developers.google.com/youtube/android/player/">https://developers.google.com/youtube/android/player/</a> </p><br><p>  This is the official way to play videos in your android application.  To work on the user's device, the official YouTube app should already be installed, which includes some service that can be used from other apps.  So this very Player API is a small library interacting with a separately installed application. </p><br><p>  At first I used it, but after some time of use, it turned out that he had a critical problem.  It is impossible to properly customize the appearance of the player, in particular, to control the buttons (you can only hide everything as a whole, but then you will lose the buttons of the full-screen mode).  And on the player control panel there is a bad button "go to viewing on YouTube", which opens the official application (which must be on the device), in which there is already no filtering.  And the children easily (accidentally or not) click on it, go to an unfiltered application, and after a few minutes I hear the ‚Äúbaby finger, baby finger where are you‚Äù again and see some vigorous eyeshake on the screen. </p><br><p>  Another little trash that children find in a couple of clicks.  More than 900 million views! </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YJyNoFkud6g" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Therefore, I refused the official player, having found a replacement for it in the form of the next library. </p><br><h2 id="android-youtube-player">  Android YouTube Player </h2><br><p>  <a href="https://github.com/PierfrancescoSoffritti/android-youtube-player">https://github.com/PierfrancescoSoffritti/android-youtube-player</a> </p><br><p>  The library looks like a wrapper around WebView that manages the web player through its JavaScript API.  Of the benefits - the possibility of complete customization of the interface. </p><br><p>  Initialization of the player is slightly unclear, especially after switching from the official library: </p><br><ol><li>  We get our com.pierfrancescosoffritti.androidyoutubeplayer.player.YouTubePlayerView view. </li><li>  Call it initialize (), passing a listener </li><li>  The onInitSuccess (@Nonnull final YouTubePlayer youTubePlayer) method is called on the listener, receiving an instance of the player object.  This is the only way to get it.  Up to this point, the initialization process was identical to that of the official client. </li><li>  We call the addListener () method on the player, passing another listener to it (more listeners to the listeners god!) </li><li>  The onReady () method is called for this listener - only after this point can you download and show video and use the player.  If by mistake you try to load something into onInitSuccess, the library will start spitting out strange errors. </li></ol><br><p>  Manage the life cycle of the player (stop playback in onPause () and stuff like that) can be manually or you can register our view as Lifecycle Observer (for which our Activity should be inherited from AppCompatActivity).  In this case, the library will take over the entire routine. </p><br><p> Another strange nuance of the library is the lack of support for full-screen mode out of the box.  The button for it is by default in the player, but does not do anything.  In fact, you have to do the full-screen mode manually ‚Äî hide the gouy, maximize the player window to full screen, and then restore everything back.  This can be quite nontrivial if you have some kind of complex interface around the player.  I only had a video list there that is easily hidden by hand. </p><br><p>  In the library samples there is a class FullScreenHelper, from which you can take the necessary code.  Its use looks something like this: </p><br><pre><code class="java">youTubePlayerView.addFullScreenListener(new YouTubePlayerFullScreenListener() {

            private final View rootLayout = findViewById(R.id.rootLayout);

            @Override
            public void onYouTubePlayerEnterFullScreen() {
                fullScreenHelper.enterFullScreen();
                rootLayout.setPadding(0, 0, 0, 0);
            }

            @Override
            public void onYouTubePlayerExitFullScreen() {
                fullScreenHelper.exitFullScreen();
                rootLayout.setPadding(8, 8, 8, 8);
                youTubePlayerView.getLayoutParams().height = LinearLayout.LayoutParams.MATCH_PARENT;
                  }
        });</code></pre><br>
<p>FullScreenHelper        .      (   ,  )   -      ,     .</p><br>
<p> -      ,      ‚Äî    .      "  YouTube",     :</p><br>
<pre><code class="java">youTubePlayerView.getPlayerUIController().showFullscreenButton(true);
youTubePlayerView.getPlayerUIController().showYouTubeButton(false);</code></pre><br>
<p>      ,   ,     View  .. ‚Äî             .</p><br>
<p>            youTubePlayer.loadVideo(url, startTime);</p><br>
<h2 id="poluchenie-spiskov-video-rabota-s-youtube-data-api">  ,   YouTube Data API</h2><br>
<p>URL    - .    YouTube   API,          .      <a href="https://developers.google.com/youtube/v3/getting-started"> </a>   Developer Console   .</p><br>
<p>      :         .   - ,         "Peppa Pig".   id (          id)  snippet       : , -, .</p><br>
<pre><code class="java"> YouTube.Search.List searchListByKeywordRequest = youTube.search().list("snippet,id");
 searchListByKeywordRequest.setMaxResults(10L);
 searchListByKeywordRequest.setQ("Peppa Pig");
 searchListByKeywordRequest.setType("channel,playlist");
 searchListByKeywordRequest.setKey("&lt;api key&gt;");
 SearchListResponse response = searchListByKeywordRequest.execute();</code></pre><br>
<p>       (    snippet  id)    . YouTube API      :       ,         .      - ( ,   ),       .           ,        . ..          5  (      2   sinppet  id).       ,   6 ,   13.    10 ,      21  .      ,   .</p><br>
<p>         :</p><br>
<pre><code class="java">YouTube.Search.List request = youTube.search().list("snippet,id");
request.setChannelId("&lt;channel id&gt;");
request.setType("video");
request.setMaxResults(50L);
request.setKey("&lt;api key&gt;");
SearchListResponse response = request.execute();</code></pre><br>
<p>      ,          ,      nextPageToken,    ‚Äî     ,            .</p><br>
<pre><code class="java">if (response.getNextPageToken() != null) {
    request.setPageToken(response.getNextPageToken());
    response = request.execute();
}</code></pre><br>
<p>  API  ,       ,        ..</p><br>
<h2 id="opyt-ispolzovaniya"> </h2><br>
<p> ,     ,  .    ,      Google Play      .   :</p><br>
<ol>
<li>    .            .   " "          (""  " "), -      .</li>
<li>  ‚Äî    .   ,     "     ",       ,    . </li>
<li>     .   ,               ,     ‚Äî   .</li>
<li>       .   "     ",      ,              .</li>
<li>         .</li>
<li>   Pinned Mode ‚Äî       ,            .</li>
</ol><br>
<p>  -  ‚Äî <a href="https://play.google.com/store/apps/details%3Fid%3Dru.sundogs.youtubekiosk">https://play.google.com/store/apps/details?id=ru.sundogs.youtubekiosk</a>        ,    ‚Äî     .       ‚Äî       .         ,           ,    . </p><br>
<p> ,       ,       , -      (   ),     .    ‚Äî       ,        .        .</p><br>
<p><strong>UPD</strong>:    ,          .             ‚Äî ,  .     Play Market   ""</p><br>
<p><strong>UPD2</strong>:      ,        .   ,    ,             .</p><br>
<p><strong>UPD3</strong>:     ,     : <a href="https://channelwhitelist.tilda.ws/">https://channelwhitelist.tilda.ws</a>. , !</p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/421451/">https://habr.com/ru/post/421451/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421439/index.html">The Japanese presented a prototype processor for an ex-flop supercomputer: how does a chip work?</a></li>
<li><a href="../421441/index.html">Embox begins climbing Elbrus</a></li>
<li><a href="../421443/index.html">New to our market: Snom D385 and D785 IP phones overview</a></li>
<li><a href="../421445/index.html">Writing a simple Lisp translator - II</a></li>
<li><a href="../421447/index.html">Redmadrobot iOS Meetup</a></li>
<li><a href="../421453/index.html">Situation: Sonos entered the stock exchange and may "leave the room"</a></li>
<li><a href="../421455/index.html">In Japan, the world's first clinical trials for the treatment of Parkinson's disease using stem cells began.</a></li>
<li><a href="../421461/index.html">Google Scripts, Docs and Spreadsheets Time Tracker</a></li>
<li><a href="../421463/index.html">Nightlife sky or in search of Perseid - processing</a></li>
<li><a href="../421465/index.html">Mobile DevOps in practice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
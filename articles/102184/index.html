<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OMF - microformat for email. Experience using chat services</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More recently, Mail.ru has developed an open standard, OMF. 

 Open Mail Format (OMF) is an open standard for marking email notifications. OMF allows ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OMF - microformat for email. Experience using chat services</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/6f2/d9a/c17/6f2d9ac172623ebfa179c0580561fbed.gif" alt="image" align="left">  More recently, Mail.ru has developed an open standard, OMF. <br><br>  <a href="http://www.openmailformat.org/mainpage.html">Open Mail Format</a> (OMF) is an open standard for marking email notifications.  OMF allows you to improve the presentation of your letters in the Mail.Ru mail interface, increasing their efficiency and conversion. <a name="habracut"></a><br><br>  I decided to try it in the email notifications of my <a href="http://www.chatovod.ru/">chat widget</a> service. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Mail.Ru now supports an expanded display of the list of letters, in which a picture, a short text of the letter and several links are shown for each letter: <br><img src="https://habrastorage.org/getpro/habr/post_images/ee2/a7b/633/ee2a7b633d4e0befd8389cb37bdfd9a5.png" alt="image"><br>  To switch to the advanced mode in the mail interface, you need to use the "Details" button on the upper right of the list of letters. <br><br>  After reading the <a href="http://www.openmailformat.org/specification.html">specification</a> OMF decided to try it in action.  Integrated this microformat into email notifications to chat users. <br><br>  <b>The first</b> thing that had to be done was to translate the letters sent from Plain text to HTML. <br>  To maintain compatibility with email clients that do not understand the HTML letters, the Content-Type letters should be set to ‚Äúmultipart / alternative‚Äù and add 2 multipart blocks to the letters, the first with plain text (Content-Type: text / plain) and the second with HTML version (Content-Type: text / html). <br>  Thus, modern mail services and programs will display the HTML version of the letter, and the older ones will display the old text one. <br><br>  <b>The second</b> step was to directly attach the OMF to the letters. <br>  For this, it was necessary to conclude the main content of the text of the letter in a DIV with the CSS class notification.  And inside use vcard and special markup from Mail.ru. <br><br>  As an example, I will cite the notice of ‚Äúadding friends.‚Äù <br>  Original text version of the letter: <br><br><blockquote><code>! <br> <br>        . <br> <br>             (Admin)  : http://demo.chatovod.ru/    ""   "".</code> </blockquote> <br><br>  Translated into HTML and added OMF microformat: <br><blockquote> <code><a href="http://s-c.me/8378/s"></a> <a href="http://s-c.me/8378/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">html PUBLIC</font> <font color="#0000ff">"-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.w3.org/1999/xhtml"</font> <font color="#ff0000">xml:lang</font> <font color="#0000ff">="ru"</font> <font color="#ff0000">lang</font> <font color="#0000ff">="ru"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font>   <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="text/html; charset=UTF-8" /&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">class</font> <font color="#0000ff">="friendship-request notification"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">h2</font> <font color="#0000ff">&gt;</font> ! <font color="#0000ff">&lt;/</font> <font color="#800000">h2</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">="text"&gt;</font>        <font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">="actor vcard"&gt;&lt;</font> <font color="#800000">img</font> <font color="#ff0000">class</font> <font color="#0000ff">="photo attachment"</font> <font color="#ff0000">align</font> <font color="#0000ff">="absmiddle"</font> <font color="#ff0000">src</font> <font color="#0000ff">="http://st1.chatovod.ru/a/2010/01/07/117/1262865512135.jpg" /&gt; &lt;</font> <font color="#800000">a</font> <font color="#ff0000">class</font> <font color="#0000ff">="url fn"</font> <font color="#ff0000">href</font> <font color="#0000ff">="http://demo.chatovod.ru/id117"&gt;</font>  <font color="#0000ff">&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font> . <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">br</font> <font color="#0000ff">/&gt;&lt;</font> <font color="#800000">br</font> <font color="#0000ff">/&gt;</font>         (Admin)   <font color="#0000ff">&lt;</font> <font color="#800000">b</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">a</font> <font color="#ff0000">class</font> <font color="#0000ff">="action-link"</font> <font color="#ff0000">href</font> <font color="#0000ff">="http://demo.chatovod.ru/"&gt;</font> http://demo.chatovod.ru/ <font color="#0000ff">&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">b</font> <font color="#0000ff">&gt;</font>    ""   "".&lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> &lt;br/&gt;</font></code> </blockquote> <br>  Now Mail.ru displays this letter in the list as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/635/f75/275/635f752753d643a39a2e8f38f0f55218.png" alt="image"><br><br>  Displays a fragment of the text of the letter, which was enclosed in a SPAN tag with the class text and also a link to the site, which was designated by the class action-link. <br>  The letter icon remains the same, although it should be replaced by an image indicated by the photo class.  Apparently this feature is still being tested by Mail.ru and is not included for everyone. <br><br>  According to Mail.ru, the first senders who supported Open Mail Format will be the dating service Mamba, the resource Afisha.ru, the online recruitment site HeadHunter.ru and the online auction Molotok.ru. <br>  I wonder how this format will become popular with other mail services?  I, as a developer of popular sites, would like to introduce OMF by all participants of the postal market. <br><br>  Additional Information: <br>  Brief description of OMF: <a href="http://api.mail.ru/mail/omf/">http://api.mail.ru/mail/omf/</a> <br>  Markup examples and specifications: <a href="http://www.openmailformat.org/examples.html">http://www.openmailformat.org/examples.html</a> <br><br>  The article did not write about many things.  I will answer your questions in the comments. <br><br>  <strong>UPDATE.</strong>  <strong>The problem with the pictures is solved.</strong>  <strong>It was necessary to bring the class actor out of the class text.</strong>  <strong>After correcting the pictures, the letters appeared.</strong> </div><p>Source: <a href="https://habr.com/ru/post/102184/">https://habr.com/ru/post/102184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102177/index.html">Creating documentation in .NET</a></li>
<li><a href="../102178/index.html">Debugging Tips in Visual Studio 2010</a></li>
<li><a href="../102179/index.html">64-bit Windows is very simple</a></li>
<li><a href="../102180/index.html">Report from the Moscow demonstration of the VisLab Intercontinental Autonomous Challenge or Italian automatic wonder-machines in action</a></li>
<li><a href="../102181/index.html">Maven - reflections after two years of use</a></li>
<li><a href="../102189/index.html">Smarty vs xslt</a></li>
<li><a href="../102192/index.html">The first demo of MonoDroid - writing Mono / .NET applications for Android</a></li>
<li><a href="../102193/index.html">Google's App Store for the Web - an exact copy of Apple's App Store</a></li>
<li><a href="../102195/index.html">The city of Leon, Mexico, will become "the safest city in the world"</a></li>
<li><a href="../102199/index.html">Review of mobile text-to-speech engines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Trying to just explain complex, for beginners, things in javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will try to just explain how closures work in Javascript, how this works, how to create constructors for my classes and how different approaches to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Trying to just explain complex, for beginners, things in javascript</h1><div class="post__text post__text-html js-mediator-article">  I will try to just explain how closures work in Javascript, how this works, how to create constructors for my classes and how different approaches to their creation differ. <br>  The article does not pretend to be innovative, but I have not seen enough explanations for how it works for beginners, and in my opinion these are the three bottlenecks in Javascript (not tied to any context, server or browser, for example). <br><a name="habracut"></a><br><h5>  Closures </h5><br>  Wikipedia tells us - the closures are functions defined in other functions. <br>  All functions are closures in javascript, because they lie implicitly in the body of the ‚ÄúMain function‚Äù. <br>  What are they like?  What does ‚Äúclosure‚Äù mean? <br>  There is a very simple meaning behind the terminology, which can also be easily explained. <br>  Closure functions have the ability to access variables created not only in the context of the function itself, but also at all levels above. <br>  I will illustrate with the code: <br><br><pre><code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closureFirstLevel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createrOfSecondLevelClosure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = a + b; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c + closureFirstLevel() + a + b; } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = createrOfSecondLevelClosure(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runCInAnotherContext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c(); } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(a,b); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'  a &amp; b       :'</span></span>,closureFirstLevel()); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'  c (   ),        ,   a  b       :'</span></span>,c());</code> </pre> <br>  Now we will understand a little, if something has become incomprehensible. <br>  closureFirstLevel refers to variables declared outside of this function (external variables) and returns their sum. <br>  createrOfSecondLevelClosure refers to the variables a and b, stores their sum in a variable declared in this function and returns a function that counts the sum c, the result returned by the function closureFirstLevel and the variables a and b declared two levels lower. <br><br>  If you run runCInAnotherContext, it will run the function 'c' (after all, createrOfSecondLevelClosure returns us a function that can be saved, and the variable 'c', declared in the global scope, records this function), which will work as intended: return the sum of the variables and the result of the function, declared outside the context of the runCInAnotherContext function, since it initialized these variables during initialization. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Closures in mass creation of events. <br>  A reference to a variable used in the loop as a counter is always transmitted as a reference (although usually a number) while the loop is running.  As a result, all created functions will have the last value of this variable. <br>  See example <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elem = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>, l = elem.length; n &lt; l; n++ ) { elem[n].onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(n); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-comment"><span class="hljs-comment">//         alert</span></span></code> </pre><br>  You can close the function: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elem = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>, l = elem.length; n &lt; l; n++ ) { elem[n].onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(x); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }(n); <span class="hljs-comment"><span class="hljs-comment">// ,            alert   click  . }</span></span></code> </pre><br>  And you can also use a completely different approach.  For arrays, the forEach method (part of the EcmaScript5 standard) does not quite work like a for loop. <br>  It takes one argument - a function that will process the elements and which takes arguments: elementOfArray, positionInArray, Array.  And each time this function is called, naturally, in its context. <br>  Somewhere it is enough to take only the first argument, somewhere more. <br>  We can call this function for our NodeList object, by changing the execution context.  (For a more complete explanation of how this works, see the part of the article about this and about prototypes). <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elem = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.forEach.call(elem,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el,position</span></span></span><span class="hljs-function">) </span></span>{ el.onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(position); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } })</code> </pre><br><br><h5>  Keyword this </h5><br>  This word refers to the <b>current</b> object that is calling the function. <br>  All functions declared in the global context are methods (in the browser) of the window object, so all functions called without the context in this refer to the window. <br>  It's pretty simple, until you start to deal with asynchronous programming. <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = { property1: <span class="hljs-number"><span class="hljs-number">1</span></span>, property2: <span class="hljs-number"><span class="hljs-number">2</span></span>, func: function() { console.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.property1 + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.property2, <span class="hljs-string"><span class="hljs-string">'test'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.property1 + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.property2; } } console.log(a.func()); <span class="hljs-comment"><span class="hljs-comment">//this    'a',    . setTimeout(function() { console.log(a.func()); //this       'a',   ,   ,     'a' },100); setTimeout(a.func,101); //   , NaN (   undefined + undefined) //,      ,          ,   </span></span></code> </pre><br>  Instead of setTimeout, you can substitute setInterval or bind an event handler (for example, elem.onclick or addEventListener), or any other way to perform deferred calculations, all of which somehow cause a loss of execution context.  And to save this there are several ways. <br>  You can simply wrap it in an anonymous function, you can create a variable var that = this and use that instead of this (create a variable outside the called function, of course), as well as use the most correct way - to bind by force.  For this, the functions have a built-in bind method (became available in the EcmaScript 5 standard, therefore, older browsers need to implement its support), which returns a new function tied to the desired context and arguments.  Examples: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logCurrentThisPlease</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } logCurrentThisPlease(); <span class="hljs-comment"><span class="hljs-comment">//window var a = {} a.logCurrentThisPlease = logCurrentThisPlease; a.logCurrentThisPlease(); //a setTimeout(a.logCurrentThisPlease, 100); //window,         setTimeout(function() { a.logCurrentThisPlease(); }, 200);//a setTimeout(function() { this.logCurrentThisPlease(); }.bind(a), 200);//a var that = a; function logCurrentThatPlease() { console.log(that); } logCurrentThatPlease(); //a setTimeout(logCurrentThatPlease, 200);//a var logCurrentBindedContextPlease = logCurrentThisPlease.bind(a); //  ‚Äî ,    ,   ‚Äî   logCurrentBindedContextPlease(); //a setTimeout(logCurrentBindedContextPlease, 200); //a</span></span></code> </pre><br>  Well, more complicated example. <br>  Loss in recursive functions working at regular intervals. <br><br><pre> <code class="hljs matlab">var a = { <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, infinityIncrementation: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( this.i++ )</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this.i &lt; Infinity)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setTimeout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this.infinityIncrementation,500)</span></span></span><span class="hljs-function">; } } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; // 0,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">undefined</span></span></span><span class="hljs-function"> ‚Äî  ,      </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">; //     </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; //0,1,2,3,4,5,6,7,8,9,10...</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Infinity</span></span></span><span class="hljs-function">-1 //  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function"> = { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function">: 0, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( this.i++ )</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this.i &lt; Infinity)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setTimeout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(function()</span></span></span><span class="hljs-function"> {</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">this</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-function">}.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(this)</span></span></span><span class="hljs-function">,500); } } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">b</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">infinityIncrementation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; //0,1,2,3,4,5,6,7,8,9,10...</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Infinity</span></span></span><span class="hljs-function">-1</span></span></code> </pre><br>  Why the second working method is correct, and the first one is wrong, see the part of the article about prototypes. <br><br><h6>  Function methods for changing the execution context - bind, call, apply </h6><br>  Function.bind is a method that takes the first argument as the context in which it will be executed (what this will be), and the rest as an unlimited number of arguments with which the returned function will be called. <br>  Function.apply is the method that calls the function, the first argument is the argument that will be this in the function, the second is the array of arguments with which the function will be called. <br>  Function.call is the same as apply, only instead of the second argument, an unlimited number of arguments that will be passed to the function. <br><br><h5>  Object constructors </h5><br>  Many create designers like this: <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SuperObjectConstructor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.summ = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; } }</code> </pre><br>  And this is not very correct.  What is wrong here?  In this example, only one thing is wrong that the function is declared in the body of the constructor.  What is this bad? <br>  First, it will not be possible to redefine such a function through changing the prototype of the function, that is, all objects that were initialized through this constructor will not be able to change the method to another.  The opportunity to inherit normally disappears. <br>  Secondly - extra memory consumption: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SuperObjectConstructor(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SuperObjectConstructor(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(a.summ == b.summ); <span class="hljs-comment"><span class="hljs-comment">//false</span></span></code> </pre><br>  As each time the function is re-created. <br>  According to a good tone (and for a better understanding of the code) in the constructors, you only need to define variables (more precisely, the fields of the object) that are unique to it. <br>  It is better to determine the rest through a prototype, in any case, if only for a specific object it is necessary to override a common property or method, this can be done directly, without affecting the prototype. <br>  How it's done: <br><br><pre> <code class="hljs delphi"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SuperObjectConstructorRightVersion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a,b)</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">{ this.a = a || this.constructor.prototype.a; //      this.b = b || this.constructor.prototype.b; }</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SuperObjectConstructorRightVersion</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prototype</span></span></span><span class="hljs-function"> = </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">{ //   constructor: SuperObjectConstructorRightVersion, //          a: 1, b: 2, summ: function() { return this.a + this.b; }</span></span></span><span class="hljs-function"> } /*   </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SuperObjectConstructorRightVersion</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prototype</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function"> = 1;</span></span> SuperObjectConstructorRightVersion.prototype.b = <span class="hljs-number"><span class="hljs-number">2</span></span>; SuperObjectConstructorRightVersion.prototype.summ = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">{....}</span></span></span><span class="hljs-function">;</span></span>        . */ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> abc = new SuperObjectConstructorRightVersion(); console.log(abc.summ());<span class="hljs-comment"><span class="hljs-comment">//3 var bfg = new SuperObjectConstructorRightVersion(5,20); console.log(bfg.summ());//25</span></span></code> </pre><br>  Many people lack javascript capabilities that are almost always needed only for self-control, such as private methods and functions that only the object and its methods can directly access, and often implement them as variables and functions declared in the function body. constructor.  Also, many say that it is a bad tone, but where it is said very little why it is a bad tone. <br>  There is one reason, that if in this constructor you need to change something, you will need to go to the source and change it there, and not through the prototype. <br>  It will also be extremely difficult to inherit from this constructor in order to expand the use of these ‚Äúprivate‚Äù properties and methods. <br><br>  Another subtle point.  Do not bind methods using bind to the context of the object (in the constructor during initialization, it is possible in principle), if you want to be able to transfer this method to other objects or simply use it in another context. <br>  This allows us to do built-in objects. <br>  For example, you can use the forEach array method for other enumerable (enumerable) objects.  For example, for all kinds of NodeList (live and non-live) (as shown above). <br><br><h5>  Conclusion </h5><br>  And now let's write not a big constructor, as an example, combining the contents of the article. <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Monster</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, hp, dmg</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = name || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor.prototype.name(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hp = hp || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor.prototype.hp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dmg = dmg || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor.prototype.dmg; } Monster.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: Monster, <span class="hljs-attr"><span class="hljs-attr">hp</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">dmg</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'RandomMonster'</span></span>+(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>).getTime(); }, <span class="hljs-attr"><span class="hljs-attr">offerFight</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">enemy</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!enemy.acceptFight) { alert(<span class="hljs-string"><span class="hljs-string">'this thing cant fight with me :('</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } enemy.acceptFight(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.acceptFight(enemy); }, <span class="hljs-attr"><span class="hljs-attr">acceptFight</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">enemy</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeout = <span class="hljs-number"><span class="hljs-number">50</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.diceRollForRandom(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attack(enemy,timeout); }, <span class="hljs-attr"><span class="hljs-attr">diceRollForRandom</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() &gt;= <span class="hljs-number"><span class="hljs-number">0.5</span></span> ? <span class="hljs-number"><span class="hljs-number">50</span></span> : <span class="hljs-number"><span class="hljs-number">20</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">takeDmg</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dmg</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name,<span class="hljs-string"><span class="hljs-string">' was damaged ('</span></span>,dmg,<span class="hljs-string"><span class="hljs-string">'),current HP is '</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hp-dmg); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hp -= dmg; }, <span class="hljs-attr"><span class="hljs-attr">attack</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">enemy,timeout</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (enemy.takeDmg(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dmg) &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { enemy.die(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.win(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.to = setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attack(enemy)}.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>),timeout); }, <span class="hljs-attr"><span class="hljs-attr">win</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'My name is '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name + <span class="hljs-string"><span class="hljs-string">', and Im a winner'</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">die</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'I died, '</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name); clearTimeout(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.to); } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ChuckNorris = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Monster(<span class="hljs-string"><span class="hljs-string">'Chuck Norris'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> MikhailBoyarsky = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Monster(<span class="hljs-string"><span class="hljs-string">'Misha Boyarsky'</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>); MikhailBoyarsky.offerFight(ChuckNorris);</code> </pre><br>  In this ridiculous example, in principle, there is everything: the preservation of the context of the call, the closure, and the creation of the constructor. <br>  I hope for criticism and corrections (as I was in a hurry I could forget to add something, or I‚Äôm just mistaken). <br>  <s>ps boyars wins sometimes</s> . <br></div><p>Source: <a href="https://habr.com/ru/post/133034/">https://habr.com/ru/post/133034/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133028/index.html">Freescale has introduced a universal medical platform.</a></li>
<li><a href="../133029/index.html">North Korea is actively developing its mobile industry.</a></li>
<li><a href="../133031/index.html">Call paging on Cisco CallManager</a></li>
<li><a href="../133032/index.html">Proxy RSS feed with Python</a></li>
<li><a href="../133033/index.html">VMware View Client with PCoIP support and USB for Linux on Linux</a></li>
<li><a href="../133035/index.html">Bike music</a></li>
<li><a href="../133036/index.html">We make calendars in different number systems</a></li>
<li><a href="../133037/index.html">Once again about finding prime numbers</a></li>
<li><a href="../133038/index.html">Nate or something, cards in hand!</a></li>
<li><a href="../133039/index.html">Made an iPad version of our service</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
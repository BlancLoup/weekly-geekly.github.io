<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automata programming. Part 4. Efficiency of auto-designed programs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The previous two articles dealt with the state and transition diagrams used to describe dynamic processes in an automaton style, and that the state an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automata programming. Part 4. Efficiency of auto-designed programs</h1><div class="post__text post__text-html js-mediator-article">  <i><a href="https://habrahabr.ru/post/332508/">The previous</a> two <a href="https://habrahabr.ru/post/332664/">articles</a> dealt with the state and transition diagrams used to describe dynamic processes in an automaton style, and that the state and transition diagrams give the best understanding of such processes.</i>  <i>The basic methods of implementing automata given by the state diagram were also reviewed, and the artifacts of the automaton circuitry inherited from it by automaton programming were outlined.</i>  <i>But, until now the question hasn't been touched on at all: <u>how effective are auto-implemented</u> programs?</i> <i><br><br></i>  <i>I would put the question differently: <u>how effective are auto-designed</u> programs?</i>  <i>Such a formulation of the question suggests that automaton design is a source of high program efficiency.</i>  <i>I have hardly ever touched on such an important topic as <b>efficiency</b> , and the Display example is ideally suited to illustrate the efficiency of automated design.</i>  <i>In the first article I introduced readers to the ‚Äúlaboratory‚Äù version of this module, but I will test the ‚Äúcombat‚Äù version, the design process of which I will give in the next article.</i>  <i>A performance study will be performed for the msp430 and CortexM3 platforms.</i> <i><br><br></i>  <i>In order not to be subjective, evaluating the effectiveness, it is necessary to compare the results with something.</i>  <i>Therefore, I will conduct the same set of tests for the <a href="https://jsfiddle.net/2029swtt/2/">non-automatic implementation of the Display example,</a> kindly provided by <a href="https://habrahabr.ru/users/michael_vostrikov/" class="user_link">michael_vostrikov</a> , for which he is very grateful and has his karma.</i> <i><br></i> <br><a name="habracut"></a><br><p>  <a href="https://habrahabr.ru/post/331556/">Table of contents.</a> <br></p><p>  <a href="https://habrahabr.ru/post/331556/">Previous article</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </p><p>  Automaton implementation, I conditionally call A1, non-automaton - A2.  The original A2 is written in JavaScript, but in order to be able to explore these implementations on an equal footing, I <a href="https://bitbucket.org/dashingresearches/display_a2/src">perekatal version A2 in C ++</a> .  From him and begin. <br><br></p><h2>  (FSM ||! FSM)? </h2><br><p>  As in the case with the implementation of A1, option A2 is divided into: a module for splitting text into blocks and a module for displaying text blocks. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2s/v_/yh/2sv_yhtjnmgkmr1puq4mi0uv1aq.png" alt="image"></div><br>  <i><font color="#888888">Figure 1. The large-scale structure of the module "A2 :: Display"</font></i> <br><br><p>  The blocking machine is represented by the function A2 :: tDisplay :: Out_text.  From her analysis, it can be seen that option A2, conventionally called by me ‚Äúnon-automatic‚Äù, is implemented by a typical automaton, which is described by a state diagram: <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/d1/en/vr/d1envrgfxxn6pebtjwads4nvj74.png" alt="image"></div><br>  <i><font color="#888888">Figure 2. Option A2.</font></i>  <i><font color="#888888">Automatic text breaks into blocks.</font></i>  <i><font color="#888888">State diagram</font></i> <br><br><p>  In order to emphasize the state in the source, I will highlight them in color. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/in/2s/ba/in2sbaphjyvaynnh08oma1std0y.png" alt="image"></div><br>  <i><font color="#888888">Figure 3. Option A2.</font></i>  <i><font color="#888888">Automatic text breaks into blocks.</font></i>  <i><font color="#888888">Source code of the program with ‚Äúhighlighted‚Äù states</font></i> <br><br><p>  The A2 automat :: tDisplay :: Out_text is another example of the implementation of automata after examples from the previous article.  There are two explicitly selected states and a variable (esc_mode) that defines the current <i>Internal state</i> .  The fact that this variable is of type bool does not detract from it in this capacity. <br><br></p><p>  Consider a similar machine for option A1, which I give here for convenience <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/kr/v4/dy/krv4dyebuesab7czqyn6rzmpghi.png" alt="image"></div><br>  <i><font color="#888888">Figure 4. Option A1.</font></i>  <i><font color="#888888">Automatic text breaks into blocks.</font></i>  <i><font color="#888888">State diagram</font></i> <br><br><div class="spoiler">  <b class="spoiler_title">Source code. Option A1.</b>  <b class="spoiler_title">Automatic text breaks into blocks.</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/bv/zk/87/bvzk87ikn08odh8n7usgzxmrmj4.png" alt="image"></div><br></div></div><br><p>  It is also an automaton, it has three uniquely identified states and transitions between them are clearly spelled out, and although there is no special variable describing the internal state, the program structure is such that the program counter is this variable.  When: <br><br>  <i><font color="#888888">Table 1. Correspondence between the value of the <b>program counter</b> and the current <b>internal state of the program</b></font></i> <br></p><table border="1"><tbody><tr><td width="425" colspan="2"><p>  value of software counter in range </p></td><td width="213"><p>  it corresponds to the state </p></td></tr><tr><td width="213"><p>  <b>state__inside_text_block</b> </p></td><td width="213"><p>  <b>state__out_text_block</b> </p></td><td width="213"><p>  <b>text</b> <b>mode</b> </p></td></tr><tr><td width="213"><p>  <b>state__out_text_block</b> </p></td><td width="213"><p>  <b>state__control_processing</b> </p></td><td width="213"><p>  <b>block</b> <b>output</b> </p></td></tr><tr><td width="213"><p>  <b>state</b> <b>__</b> <b>control</b> <b>_</b> <b>processing</b> </p></td><td width="213"><p>  <b>until the end of the cycle</b> </p></td><td width="213"><p>  <b>manager processing</b> </p><p>  <b>sequences</b> </p></td></tr></tbody></table><br><p>  In the case of A2, the variable type bool acts as a variable of the <i>Internal state</i> , in the case of A1, a program counter, and nevertheless these are pronounced automaton-implemented algorithms.  Let me remind you that the option A2 is an automatic machine Miles.  Unlike Moore‚Äôs automaton (variant A1), the output signals (or actions) are written here not in an oval, but above the transition arrow, through a slash after the transition condition. <br><br></p><h2>  A2 :: OA. </h2><br>  We continue the analysis of the option A2 :: Display, going to the automatic output of the text block.  This machine is very different from the similar machine version A1. <br><br><div class="spoiler">  <b class="spoiler_title">The source of this machine</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tFont_item</span></span></span><span class="hljs-class">{</span></span> u1x Width; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> u1x * Image; }; <span class="hljs-keyword"><span class="hljs-keyword">union</span></span> { u2x Data; u1x Array[<span class="hljs-number"><span class="hljs-number">2</span></span>]; }Symbol_buffer; <span class="hljs-comment"><span class="hljs-comment">//////////////////////////////////////////////////////////////////////////////////////// //////////////////////////////////////////////////////////////////////////////////////// //////////////////////////////////////////////////////////////////////////////////////// void printToBuffer( int lineStartX, int lineStartY, const tFont_item * symbolInfo, int minX, int maxX) { u1x bytes_Width = (symbolInfo-&gt;Width + 7) &gt;&gt; 3; for (int y = 0; y &lt; Font_height; y++) { if(bytes_Width == 1) Symbol_buffer.Array[1] = *((u1x*)(symbolInfo-&gt;Image + bytes_Width * y)); else Symbol_buffer.Data = *((u2x*)(symbolInfo-&gt;Image + bytes_Width * y)); u2x bit_mask = 0x8000; for (int x = 0; x &lt; symbolInfo-&gt;Width; x++) { bool bit = Symbol_buffer.Data &amp; bit_mask; bit_mask = bit_mask &gt;&gt; 1; int lineX = lineStartX + x; int lineY = lineStartY + y; if (lineX &gt;= minX &amp;&amp; lineX &lt;= maxX) { setPixelInBuffer(lineX, lineY, bit); } }//for (int x = 0; x &lt; symbolInfo-&gt;Width; x++) }//for (int y = 0; y &lt; Font_height; y++) };//void printToBuffer( int lineStartX, int lineStartY, tFont_item * symbolInfo, int minX, int maxX ) //////////////////////////////////////////////////////////////////////////////////////// //////////////////////////////////////////////////////////////////////////////////////// //////////////////////////////////////////////////////////////////////////////////////// void setPixelInBuffer(int x, int y, bool bit) { int bitNumber = (x &amp; 7); int byteNumber = x &gt;&gt; 3; if (bit) { Line_buffer[y][byteNumber] |= (0x80 &gt;&gt; bitNumber); } };//void setPixelInBuffer(int x, int y, bool bit)</span></span></code> </pre> <br></div></div><br><p>  In this implementation, no classification of symbols is performed, therefore, the operation of the UA for the <i>Automat of outputting a text block</i> is reduced to a direct call to the operational automaton for displaying the symbol for each displayed symbol. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/g1/4p/gn/g14pgne3aj9dbyy-ka187sfoq1c.png" alt="image"></div><br>  <i><font color="#888888">Figure 5. Text block output machine, control machine</font></i> <br><br><p>  But where does the automatic machine come from in a non-automatic implementation?  Despite the fact that the implementation of the A2 was conditionally called non-automatic, it is also based on an operating machine.  This is the simplest <i>arbitrary bitwise</i> automaton. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/qa/gk/ut/qagkutm5ibvutequpoqn1dmbzao.png" alt="image"></div><br>  <i><font color="#888888">Figure 6. Example A2 operation machine</font></i> <br><br><p>  As mentioned earlier, the operating machine is a semi-finished product that can perform some action with any valid parameters.  It may be degenerate into a combinational circuit.  The main requirements for it: maximum simplicity, maximum efficiency.  These requirements, as will be shown, are in conflict. <br><br></p><p>  From the point of view of the simplicity of the algorithm, the operating machine of an arbitrary bit-wise transfer is excellent.  It is universal; it can copy any pixel of a character generator into an arbitrary pixel of a line buffer.  Parameterization of OA in this case is carried out by the simplest control automaton. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4f/gl/hd/4fglhd80ujfl_jn6f7fvjduc7i8.png" alt="image"></div><br>  <i><font color="#888888">Figure 7. Control Output Machine</font></i> <br><br><p>  This example shows that the majority of programs with simple control logic are auto-implemented by themselves, the manuality appears when a sequential complication of the control logic occurs.  If you do not design the algorithm as an explicit automaton, then with the sequential complication of the program, after adding another chip, another ‚Äúcrutch‚Äù, a ‚Äústructural transition‚Äù can occur - the automatic implementation will disappear and you will get something like the non-automatic example from articles 2 and 3. <br><br></p><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mm/cr/lr/mmcrlrmp6nlayggzc-uidzxlxzk.png" alt="image"></div><br>  <i><font color="#888888">Figure 8. Non-automatic algorithm</font></i> <br><br><p>  So, we had the opportunity to make sure that the implementation of A2 in its pure form is automatic, but how effective is it? <br><br></p><h2>  A1 vs A2 </h2><br><p>  The only way to compare the effectiveness of the implementations in question is to conduct tests.  For testing, I use <a href="https://www.iar.com/iar-embedded-workbench">the IAR development environment</a> . <br><br></p><p>  The first test example - a string of characters in full screen, displayed in the form of a line running from right to left, until the entire line disappears from the screen.  The physical output is emulated by data output to the I / O port, which corresponds to reality in the first approximation. <br>  Font 6x9, display 256x64.  Optimization - maximum speed. <br><br></p><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> Test_text[<span class="hljs-number"><span class="hljs-number">43</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">42</span></span>; i++) Test_text[i] = <span class="hljs-string"><span class="hljs-string">'A'</span></span> + i; Display = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> tDisplay(<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &gt; <span class="hljs-number"><span class="hljs-number">-270</span></span> ; i-- ) { Display-&gt;Out_text(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>,i,<span class="hljs-number"><span class="hljs-number">0</span></span>, (uchar*)Test_text); } }</code> </pre><br><div class="spoiler">  <b class="spoiler_title">If you are writing to IAR, it may be useful for you to read about the measurement technique.</b> <div class="spoiler_text">  To measure the duration of work (in cycles of the controller), the simulator IAR C-SPY is used.  Controller cycles count 2 special counters - CTIMER1 and CTIMER2.  These are the IAR C-SPY debugger variables, which can be found in debug mode on the <i>View-&gt; Register</i> tab.  In order not to shoot each result manually, the results are automatically dropped to the file using the macro functions of the debugger. <br><br>  To do this, right in the IAR editor, I created a file and saved it as <i>cspy_1.mac</i> .  In the file put the text with macrofunctions <br><br><pre> <code class="cpp hljs">__var filehandle; <span class="hljs-comment"><span class="hljs-comment">//////////////////////////////////////////////// setup() { filehandle = __openFile("filelog1.txt", "w"); } //////////////////////////////////////////////// clear() { #CCTIMER1 = 0; } //////////////////////////////////////////////// out_data() { __fmessage filehandle , #CCTIMER1, "\n"; #CCTIMER1 = 0; } //////////////////////////////////////////////// close() { __closeFile(filehandle); }</span></span></code> </pre><br>  This C is a similar language, but not C, is very simple and is described in some detail in the IAR help.  Then I connected this file to the project.  For this, I selected the <i>Debugger</i> item via <i>Project-&gt; Options</i> , checked the <i>Use macro file</i> checkbox and selected the file <i>cspy_1.mac</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uw/ee/s9/uwees9-6cngudxeyfnuxfgkye5k.png" alt="image"></div><br>  <i><font color="#888888">Figure sp.1.</font></i>  <i><font color="#888888">Connecting to the project file with macrofunctions</font></i> <br><br>  The macro functions described in <i>cspy_1.mac are</i> connected to the breakpoints shown in Fig.  sp.2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z2/er/t6/z2ert6kt_v7ksttrvk4rzayaq0i.png" alt="image"></div><br>  <i><font color="#888888">Figure sp.2.</font></i>  <i><font color="#888888">Connect breakpoints</font></i> <br><br>  To this end, breakpoints are placed in the positions of interest.  Breakpoints are set and removed by double clicking on the gray bar to the left of the text.  After all the points are set, you need to open the <i>View-&gt; Breakpoints</i> tab <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/tz/br/aetzbrrbg3okirpj0jtdf4gdmum.png" alt="image"></div><br>  <i><font color="#888888">Figure sp.3.</font></i>  <i><font color="#888888">Customization</font></i> <br><br>  Right-click on the point of interest, select Edit, the <i>Edit breakpoint</i> window appears. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/36/cr/k9/36crk9nguzfrvbrfisq9b_3ahpu.png" alt="image"></div><br>  <i><font color="#888888">Figure sp.4.</font></i>  <i><font color="#888888">Customization</font></i> <br><br>  In the window that appears, the name of the required function is written.  If you register it in the field labeled 1, then the specified function will be called only when a stop occurs.  In order for the specified function to be called, but without stopping the program, its name should be entered in field 2, which will cause this function to be called until it stops, in order to determine whether the program should be stopped or not.  If the corresponding macro function returns 1, it will stop if the function returns 0 or returns nothing, there will be no stop.  The specified macro function will be executed before the execution of the corresponding C program expression at the breakpoint. <br></div></div><br><p>  The results of the study are shown in the graph. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/po/ft/w1/poftw1ogroh9w0nkswvb_cl_euc.png" alt="image"></div><br>  <i><font color="#888888">Figure 9. Results of the first test</font></i> <br><br><p>  It is well seen that for option A2, when the line actually goes beyond the edge of the output window, a significant number of cycles are spent so that, as a result, nothing is shown.  A verification option is possible, but it will slow down the algorithm even more if there is something to output.  For variant A1, when the line goes out of the window, the cyclic consumption drops to around 3000 cycles.  This behavior is initially built into the structure of the algorithm itself by selecting the appropriate states of the automaton (in the next article I will describe the automata process using the example of A1), it does not require additional checks. <br><br></p><p>  The first example gives a general idea of ‚Äã‚Äãhow these two algorithms work in the running line mode, but the main use of the Display module is the usual output of text that fits completely on the screen to any position on the screen.  To study the operation of the module in the main mode, I will use the test example: <br><br></p><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> Test_text[<span class="hljs-number"><span class="hljs-number">32</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt; <span class="hljs-number"><span class="hljs-number">31</span></span>; i++) Test_text[i] = <span class="hljs-string"><span class="hljs-string">'A'</span></span> + i; Display = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> tDisplay(<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>,<span class="hljs-number"><span class="hljs-number">24</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; <span class="hljs-number"><span class="hljs-number">31</span></span>; j++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++) { Display-&gt;Out_text(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>,i,<span class="hljs-number"><span class="hljs-number">0</span></span>, (uchar*)&amp;Test_text[<span class="hljs-number"><span class="hljs-number">31</span></span>-j]); } } }</code> </pre><br><p>  The test example displays lines of different lengths from 0 to 31 characters, 6x9 font.  Each line is displayed first without a shift, then with a shift of 1 pixel to the right, then by 2, and so on.  up to 8 pixels.  This simulates text output, in different positions of the screen (to which both algorithms are sensitive). <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/p3/ec/md/p3ecmdrhrqjik0whr3af2kuexte.png" alt="image"></div><br>  <i><font color="#888888">Figure 10. The effect of the initial shift of the output window from the byte boundary to cyclic consumption</font></i> <br><br><p>  The results obtained are averaged by the shifts, the result is a value that does not depend on the initial position of the line on the screen. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/yg/05/dgyg05mreg9u8dhj-zcoijvu2dc.png" alt="image"></div><br>  <i><font color="#888888">Figure 11. Displaying a text string in 6x9 font</font></i> <br><br><p>  As one would expect, the value of cyclic consumption grows linearly with an increase in the number of characters in a line.  For variant A1, the <i>specific cycle consumption</i> (cycles per symbol) is 1200 cycles per symbol, for variant A2 5913 cycles (optimization, I remind, the maximum in speed). <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/of/fw/48/offw48cdjxme8gctpu5aewzljey.png" alt="image"></div><br>  <i><font color="#888888">Figure 12. Explanation of terms: total overhead, specific cycle consumption, and cycle consumption of idle</font></i> <br><br><p>  <i>Total overheads</i> are 3431 (A1) and 16433 (A2).  It is worth paying attention to the <i>cyclic consumption of idling</i> , that is, when the input is a string with a length of 0 characters - 118 (A1) and 13548 (A2) cycles.  Such a gigantic difference is connected with the cleaning of the line buffer in the A2 variant.  Using an additional check of the source line to the '\ 0' character, you can eliminate the cleaning of the string buffer for the empty line and reduce the cyclic consumption of idle to a value comparable to A1.  I did not do it intentionally, in order to have a good reason to consider in more detail the question of the lower-case buffer.  Work with the line buffer is the main component of the large overhead.  First, it is possible to exclude the operation of cleaning the string buffer, if we rewrite the setPixelInBuffer function <br><br></p><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPixelInBuffer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bitNumber = (x &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> byteNumber = x &gt;&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bit) { Line_buffer[y][byteNumber] |= (<span class="hljs-number"><span class="hljs-number">0x80</span></span> &gt;&gt; bitNumber); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Line_buffer[y][byteNumber] &amp;= ~(<span class="hljs-number"><span class="hljs-number">0x80</span></span> &gt;&gt; bitNumber); } };<span class="hljs-comment"><span class="hljs-comment">//void setPixelInBuffer(int x, int y, bool bit)</span></span></code> </pre> <br><p>  but in this case, not acceleration is obtained, but the algorithm slows down about 1.5 times (for a 6x9 font) per character, because when cleaning the line buffer, all ‚Äúwhite‚Äù pixels are output at once, and in this variant each ‚Äúwhite‚Äù pixel is displayed separately.  Graph Fig.  show the picture that will turn out in this case. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/us/xr/uf/usxrufgsvzt2at99agipz6hyvhg.png" alt="image"></div><br>  <i><font color="#888888">Figure 13. Difference between implementations with and without line buffer cleaning</font></i> <br><br>  The second problem related to the line buffer is not connected with the need to clean the line buffer, but in its very presence.  For a display of 256 pixels wide and maximum font height of 24 pixels, the size of the line buffer is 768 bytes.  For ‚Äúsmall‚Äù microcontrollers in general and msp430 in particular, the problem of RAM deficiency is typical.  The line buffer option requires: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>32</mn><mi>x</mi><mn>24</mn><msub><mo stretchy=&quot;false&quot;>)</mo><mtext>&amp;#xA0;</mtext></msub><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>b</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>e</mi><mi>r</mi></mrow><mo>+</mo><msub><mn>28</mn><mtext>&amp;#xA0;</mtext></msub><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>t</mi><mi>h</mi><mi>e</mi><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>t</mi><mi>D</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi></mrow><mo>+</mo><msub><mn>59</mn><mtext>&amp;#xA0;</mtext></msub><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>c</mi><mi>k</mi></mrow><mo>&amp;#x2248;</mo><mn>850</mn><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mo>.</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="105.325ex" height="2.66ex" viewBox="0 -832 45347.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-32" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-78" x="1390" y="0"></use><g transform="translate(1963,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-34" x="500" y="0"></use></g><g transform="translate(2964,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-29" x="0" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="3703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="4065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-78" x="4531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="5104" y="0"></use><g transform="translate(5465,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-69" x="298" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6E" x="644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="1244" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-62" x="1711" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-75" x="2140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-66" x="2713" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-66" x="3263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="3814" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-72" x="4280" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-2B" x="10419" y="0"></use><g transform="translate(11420,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-38" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="12771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="13132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-78" x="13599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="14171" y="0"></use><g transform="translate(14533,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-68" x="361" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="938" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6F" x="1404" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-62" x="1890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6A" x="2319" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="2732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-63" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="3632" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6F" x="3993" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-66" x="4479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="5029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-68" x="5391" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="5967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-63" x="6434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6C" x="6867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-61" x="7166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-73" x="7695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-73" x="8165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="8634" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-44" x="8996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-69" x="9824" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-73" x="10170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-70" x="10639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6C" x="11143" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-61" x="11441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-79" x="11971" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-2B" x="27224" y="0"></use><g transform="translate(28224,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-35"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-39" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="29575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="29937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-78" x="30403" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="30976" y="0"></use><g transform="translate(31337,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-76" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-61" x="485" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-72" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-69" x="1466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-61" x="1812" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-62" x="2341" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6C" x="2771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="3069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-73" x="3536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-69" x="4005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6E" x="4351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="4951" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-68" x="5313" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="5889" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-73" x="6356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="6825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-61" x="7187" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-63" x="7716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-6B" x="8150" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-2248" x="40287" y="0"></use><g transform="translate(41343,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-38"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-30" x="1001" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-62" x="42844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-79" x="43274" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-74" x="43771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-65" x="44133" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMATHI-73" x="44599" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/341888/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiGVbDT_ll_vfCBlxlSSO-3i3np1Q#MJMAIN-2E" x="45069" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><mn>32</mn><mi>x</mi><mn>24</mn><msub><mo stretchy="false">)</mo><mtext>&nbsp;</mtext></msub><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>l</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>b</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>e</mi><mi>r</mi></mrow><mo>+</mo><msub><mn>28</mn><mtext>&nbsp;</mtext></msub><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mi>h</mi><mi>e</mi><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>t</mi><mi>D</mi><mi>i</mi><mi>s</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>y</mi></mrow><mo>+</mo><msub><mn>59</mn><mtext>&nbsp;</mtext></msub><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>c</mi><mi>k</mi></mrow><mo>‚âà</mo><mn>850</mn><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi>s</mi><mo>.</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> (32x24) _ \ text {line buffer} + 28_ \ text {the object of the class tDisplay} + 59 _ \ text {variables in the stack} ‚âà 850 bytes. </script></p><br><p>  This turns out to be very wasteful for microcontrollers with a RAM size of 2-4 kb.  And this is despite the fact that the same controller contains a 60 kb ROM and the program code of the tDisplay module occupies the same 2 kb of the code - 3.2%.  3.2% for the basic I / O function (which already contains an efficient implementation of the crawl and virtual output windows) is very acceptable, while 41.5% of the RAM for one text output operation is a serious expense.  Even if you take a more solid msp430f2616 with 4 KB of RAM, then 20% is still not small. <br><br></p><p>  If we are talking about msp, it would not be superfluous to say about energy saving.  This is one of the most modest power supply microcontrollers, which is well suited to work in devices powered by batteries.  I draw attention to perhaps not the most obvious aspect: a <i>multiple increase in</i> program <i>speed</i> not only speeds up the work as a whole (speed is not always critical), but <i>directly saves battery energy</i> , allowing the microcontroller to sleep for most of the time, and one charge multiple times. <br><br></p><p>  Option A1 is designed according to the scheme without line buffer.  That is, this module is not only many times faster, but also requires ten times less RAM.  The automatic machine used in A1 has two sub-realizations: speed and economical.  Economical requires to work only about 60 bytes of RAM.  The question naturally arises: is it likely that variant A1 loses to variant A2 in the amount of code?  Indeed, with full optimization in speed (at which, however, some optimization in size is made), we obtain the following picture in terms of characteristics. <br><br>  <i><font color="#888888">Table 2. Comparative characteristics of software modules</font></i> <br></p><table border="1"><tbody><tr><td width="159"></td><td width="148"><p>  <b>pzu</b> </p></td><td width="132"><p>  <b>ram</b> </p></td><td width="199"><p>  <b>performance</b> </p></td></tr><tr><td width="159"><p>  <b>a2</b> </p></td><td width="148"><p>  1122 </p></td><td width="132"><p>  796 + 58 stack </p></td><td width="199"><p>  one </p></td></tr><tr><td width="159"><p>  <b>a1. speed</b> </p></td><td width="148"><p>  2088 </p></td><td width="132"><p>  240 + 26 stack </p></td><td width="199"><p>  4.6 - 7.9 </p></td></tr><tr><td width="159"><p>  <b>a1.economic</b> </p></td><td width="148"><p>  2490 </p></td><td width="132"><p>  62 + 18 stack </p></td><td width="199"><p>  3.5 - 6 </p></td></tr></tbody></table><br><p>  For comparison, the size of the character generator for which the glyphs of all 256 characters are defined, for a 6x9 font is 3344 bytes. <br><br></p><p>  Let us analyze how the specific cycle consumption grows with increasing font size.  In fig.  14 shows a graph of the specific cyclic consumption for the 6x9, 8x16 and 16x24 fonts, which shows that the value of the AC for variant A2 is proportional to the area, and for variant A1 it is proportional to the height of the characters.  To emphasize this, the x-axis shows the area of ‚Äã‚Äãsymbols for the A2 variant, and for A1 the height of the symbol in the lines. <br><br><a name="Costs_vs_size"></a><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4a/ef/cc/4aefccjwrp_tqb5psw7v2gplg0e.png" alt="image"></div><br>  <i><font color="#888888">Figure 14. The dependence of the specific cyclic consumption of the font size</font></i> <br><br><p>  Specific cycloconsumption of variant A1 (hereinafter all the figures for speed), compared with A2, is higher by 4.9 for the 6x9 font, 6.4 times for the 8x16 font and 9.2 times for 16x24, and on average, for the line with length 0..31, the A1 variant shows more The speed is 4.6 times for the 6x9 font, 5.8 times for 8x16 and 7.9 times for 16x24. <br><br></p><h2>  A look into the future. </h2><br><p>  Let me propose for consideration an important issue that goes far beyond the scope of this series of articles.  The test modules had maximum speed optimization.  I would like to know <i>how</i> these implementations optimize.  In fig.  15 shows the optimization coefficient (the ratio of non-optimized to optimized) depending on the length of the string, for different fonts, for both options. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/_b/mk/ca/_bmkcamth8yigcnuwxixrjvtefu.png" alt="image"></div><br>  <i><font color="#888888">Figure 15. The degree of optimization of the program</font></i> <br><br><p>  It can be seen that the degree of ‚Äúcompression‚Äù in both variants is small, which means that we are not talking about good and bad implementation, both options are implemented effectively for their <i>scheme</i> , i.e.  OA + UA  But note that even the option A2 compressed by 1.4 times is 5-8 times slower than the compressed total 1.15 times of variant A1.  And this is not surprising, the main tools of the optimizer are: inline function insertion, loop optimization, unfolding of short loops and so on.  Those.  It optimizes standard programming programming structures.  But the optimization of the algorithm, like the optimization of the automaton (Fig. 16) underlying the program, gives a significant performance boost, and this is the leitmotif of today's article. <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/n0/cu/0e/n0cu0eknulat_7xoiv4amom5hbw.png" alt="image"></div><br>  <i><font color="#888888">Figure 16. Optimization of the algorithm by optimizing the corresponding automata</font></i> <br><br><p>  From here you can make a far-reaching conclusion: one of the ways of the evolution of code optimizers is associated with the transformation of the algorithm into an automaton, and the optimization of the resulting automaton.  However, in the example of the A2, such primitive automata are such that there is no place to optimize them further.    1    2        <i> </i> . ,     2,       1,       2. ¬´¬ª  ,   ,  : <br><br></p><p> 1.       <i></i>   <i></i> .      ,  .       ,      ,  , ,   . ,  -     . ,            ,   ,        . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/j4/gx/e4/j4gxe4-udm8ti_0cskjc4-ydmxa.png" alt="image"></div><br> <i><font color="#888888"> 17.         </font></i> <br><br><p>           ,        (, ,  IAR visualState),   ,             ,    1      ,   2 . <br><br></p><p> 2.               ,    ,   .  Those.          ,    . ,           ¬´ ¬ª ,    ,   ¬´¬ª  ,     . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/yn/b-/u4/ynb-u4zmnj4grgck5skw0xla1hc.png" alt="image"></div><br> <i><font color="#888888"> 18.   </font></i> <br><br><p> 3.   ,   .    . <br><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/dp/y6/ua/dpy6ua2g8sfw55p2tublzh1sgpk.png" alt="image"></div><br> <i><font color="#888888"> 19.  </font></i> <br><br><p>           (  ,     ). <br><br></p><p>  ,      .        (VHDL),         ,       ,          ( ), ,     -,  ,       .    , ,     . <br><br></p><p>    ,    ,   ,       .         , ,     .       ,       . <br><br></p><p>   (..         )  ,    ‚Äì  ,      .   ,          (     ),       . <br><br></p><p>       ,     .   ,          ,       .    ,   ‚Äî     (      ),       ,     . <br><br></p><p> ,     ,     ,       ,        ,  ,                     .  ,                 . <br><br>       : <br><a name="Tribes"></a><br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/1y/wt/wr/1ywtwr5iiiwfqdmlxdoz63lx5su.png" alt="image"></div><br> <i><font color="#888888"> 20.  </font></i> <br><br><p>          .    ,       . <br><br></p><p>    ,        .      .         ,    .    ,          , ,     .    ,    ,     .       ,        ,          CortexM3 <br><br></p><h2> CortexM3 </h2><br>    ,         .           msp 430. <br><br> <i><font color="#888888"> 3.   </font></i> <br><table border="1"><tbody><tr><td width="76" rowspan="2"></td><td width="180" colspan="2"><p> 69 </p></td><td width="189" colspan="2"><p> 816 </p></td><td width="180" colspan="2"><p> 1624 </p></td></tr><tr><td width="76"><p> <b>  </b> </p></td><td width="104"><p> <b> </b> </p></td><td width="85"><p> <b>  </b> </p></td><td width="104"><p> <b> </b> </p></td><td width="76"><p> <b>  </b> </p></td><td width="104"><p> <b> </b> </p></td></tr><tr><td width="76"><p> <b>msp430.a1</b> </p></td><td width="76"><p>  3431 </p></td><td width="104"><p>  1202 </p></td><td width="85"><p> 6122 </p></td><td width="104"><p>  2299 </p></td><td width="76"><p> 7764 </p></td><td width="104"><p>  4052 </p></td></tr><tr><td width="76"><p> <b>msp430.a2</b> </p></td><td width="76"><p> 15938 </p></td><td width="104"><p>  5716 </p></td><td width="85"><p> 28910 </p></td><td width="104"><p>  14318 </p></td><td width="76"><p> 42402 </p></td><td width="104"><p>  35748 </p></td></tr><tr><td width="76"><p> <b>cortex m3.a1</b> </p></td><td width="76"><p> 1831(1.9) </p></td><td width="104"><p> 715(1.7) </p></td><td width="85"><p> 3237(1.9) </p></td><td width="104"><p> 1370 (1.7) </p></td><td width="76"><p> 4795(1.6) </p></td><td width="104"><p> 2238(1.8) </p></td></tr><tr><td width="76"><p> <b>cortex</b> <b>m</b> <b>3.</b> <b>a</b> <b>2</b> </p></td><td width="76"><p> 6182(2.6) </p></td><td width="104"><p> 2131(2.7) </p></td><td width="85"><p> 11347 (2.5) </p></td><td width="104"><p> 5236(2.7) </p></td><td width="76"><p> 16440(2.6) </p></td><td width="104"><p> 13282(2.7) </p></td></tr></tbody></table><br><br>   .           Cortex M3.     1-2 ,      msp430   ( -)  2-3 .     ‚Äì     . Cortex M3     32     32   ,   ,     msp430   16   1   . <br><br>             msp430: 1043  1122   2  1914  2088   1..  200       ,   1.  . <br><br><p>      ‚Äì      .   ‚Äî .     1       ,    . </p></div><p>Source: <a href="https://habr.com/ru/post/341888/">https://habr.com/ru/post/341888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341878/index.html">Debugging React Applications in VS Code</a></li>
<li><a href="../341880/index.html">What is RxJS and why is it useful to know about it</a></li>
<li><a href="../341882/index.html">Kali Linux: Configuring and building ISO images</a></li>
<li><a href="../341884/index.html">What we have learned by spending $ 100,000 in AdWords</a></li>
<li><a href="../341886/index.html">A quick comparative review of Docker GUI solutions</a></li>
<li><a href="../341890/index.html">It does not matter how much the company earns - it is important how it spends them. Automate Purchasing in an Organization with Flexbby</a></li>
<li><a href="../341892/index.html">Mateus Fernandez, ZEIT - in IT without education. FrontFest.Keynote</a></li>
<li><a href="../341894/index.html">Subject-oriented languages ‚Äã‚Äãfor business applications - user interfaces</a></li>
<li><a href="../341896/index.html">Android Oreo: what can developers expect?</a></li>
<li><a href="../341898/index.html">Shop VS holidays. How to make the New Year not put the retailer on the shoulder</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
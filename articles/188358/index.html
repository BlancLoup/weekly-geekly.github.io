<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúBoys - to the left, girls - to the right‚Äù, or add the ‚ÄúGender‚Äù field in the Oracle database</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="... there are three types of dragons: zero, imaginary and negative. All of them do not exist, but each type is in its own particular manner. The imagi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúBoys - to the left, girls - to the right‚Äù, or add the ‚ÄúGender‚Äù field in the Oracle database</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  ... there are three types of dragons: zero, imaginary and negative.  All of them do not exist, but each type is in its own particular manner.  The imaginary and zero dragons, called in the professional language imaginary and null, do not exist in a much less interesting way than the negative ones. <br>  Stanislav Lem, <br>  Cyberiad </blockquote><br><h4>  Preamble </h4><br>  Constructive criticism of the article <a href="http://habrahabr.ru/post/188084/">"Problems of merging records in a complex Oracle table"</a> post.  Let us try to analyze the methods for solving the problem of identifying the sex of a person based on his client data in the Oracle database. <br><a name="habracut"></a><br><h4>  Initial data </h4><br>  Suppose there is some experimental database on Oracle that contains customer data in the hotel.cards table.  At a minimum, we have the last name (cards.last_name), the first name (cards.first_name) of the client ... and maybe even the middle name (cards.middle_name). Let's see what we can learn from this data. <br><br><h4>  middle name </h4><br>  The most unequivocal and trivial solution to identify the gender of our client is information about his patronymic.  There are not so many suffixes of Russian middle names in Russian. <br><div class="spoiler">  <b class="spoiler_title">Wikipedia about patronymic</b> <div class="spoiler_text">  Patronyms, formed from the male names of the second declension, are formed by adding to the basis of the suffixes -ovich / -ovna, -evich / -evna: Roman - Romanovich, Nikolai - Nikolaevich;  at the same time the names ending in -s change it to -v-: Vitaly - Vitalyevich. <br>  The patronymic of men, formed from the male names of the first declension, are formed by adding to the base of the suffix -ich: Nikita-Nikitich, Luka-Lukich. <br>  The patronymic of women formed from the male names of the first declension are formed by adding to the base of the suffix -ichna, if the ending was unstressed, and -ichicna, if the stress fell on the ending: Nikita - Nikitichna, but Luka - Lukinichna. </div></div><br>  Actually, if all the patronymic names are entered into the base, then the field can be filled in a very trivial way. <br><div class="spoiler">  <b class="spoiler_title">Oracle user console on database server</b> <div class="spoiler_text">  sqlplus / as sysdba <br>  alter table hotel.cards add gender varchar2 (10); <br>  update hotel.cards hc set hc.gender = 'male' where hc.middle_name like '% ich'; <br>  update hotel.cards hc set hc.gender = 'female' where hc.middle_name like '% on'; <br>  commit; <br></div></div><br>  But this method is not always applicable for several reasons: <br>  1) the system was developed by a foreign customer, and the database scheme does not provide for patronymic names; <br>  2) our foreign clients in foreign passports do not have the ‚ÄúPatronymic‚Äù field, and our operators do not specify this data with them. <br><br>  For such cases, we still have the name and surname of the client. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Surname </h4><br>  Hours of joint meditation with Google led me to the following disappointing facts: <br>  1) foreign surnames are usually unchanged in the masculine and feminine (English: Mr. and Mrs. Smidt, Ukrainian: Gregory and Maria Beloshtan, Ivan and Galina Krasnoshlapka); <br>  2) the last letters of a foreign surname cannot unequivocally indicate the gender of its owner; <br>  3) one of its parts may indicate to the floor of the owner of a compound last name. <br><br>  In general, there are so many exceptions with the surnames that manual work is definitely not to be avoided.  Naturally, our operators will do it, so that in the coming week do not expect invitations from them for tea with cookies. <br><br><h4>  Name </h4><br>  The most unambiguous parameter in our database for analyzing a person‚Äôs gender is his name.  There are many sites with lists of male and female names, books with interpretations of male and female names can be found in paper and electronic form, but ... We, due to our laziness, should find either a ready-made database of names with gender (such by the way are sold), or search this information is in a form suitable for machine processing.  All we need is to our sample. <br> <code>select distinct hc.first_name from hotel.cards hc; <br></code> <br>  add the gender field and fill it with the values ‚Äã‚Äã"male / female".  Meditations with Google on reference books and databases of names, various api to social networks and points of sale of various databases suddenly <a href="http://www.i-gender.com/">stopped</a> when I came across the service <a href="http://www.i-gender.com/">‚Äúi-gender.com‚Äù</a> .  A very convenient API, recognition of names in Cyrillic and transliteration, as well as short testing of the veracity of its results convinced me that it is possible to transfer the routine work of our operators on the shoulders of this service so as not to distract them from the process of treating me with the liver. <br><br>  The service is very unpretentious, demanding from us an http request of the form name = Innocent.  In response, we get a string like {"gender": "male", "confidence": "100"}.  True, the request must be made using the POST method.  For curl, this is not a problem; it is easy to assign an analysis of the answer to a simple bash script.  It remains to perform a series of routine gestures and to persuade the operators to review the results of work for possible mistakes of the <a href="http://www.i-gender.com/">i-gender service</a> .  Curious please under spoiler. <br><div class="spoiler">  <b class="spoiler_title">On the database server</b> <div class="spoiler_text">  bash-3.2 $ uname -a <br>  Linux ******* 2.6.39-300.26.1.el5uek # 1 SMP Thu Jan 3 18:31:38 PST 2013 x86_64 x86_64 x86_64 GNU / Linux <br><br>  bash-3.2 $ sqlplus / as sysdba <br>  SQL * Plus: Release 11.2.0.1.0 Production on Tue Jul 30 09:39:27 2013 <br>  Copyright ¬© 1982, 2009, Oracle.  All rights reserved. <br>  Connected to: <br>  Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production <br>  With the Partitioning, OLAP, Data Mining and Real Application Testing options <br><br>  mkdir / u02 / xtern <br>  cd / u02 / xtern <br>  touch sel.sql <br><br>  sel.sql (request for a selection of the unique names of our customer base): <br>  set linesize 9999 <br>  set pagesize 0 <br>  set head off <br>  set underline off <br>  set feedback off <br>  set trimspool on <br>  set echo off <br>  spool result.log <br>  set termout off <br>  select distinct hc.first_name from hotel.cards hc; <br>  set termout on <br>  spool off <br>  exit <br><br>  Unload sample to file <br>  sqlplus -s / as sysdba @ sel.sql <br><br>  Remove from it extra spaces <br>  cat ./result.log |  sed 's / ^ * //; s / * $ //'&gt; ./result.csv <br></div></div><br><div class="spoiler">  <b class="spoiler_title">On a car that has an outlet outside</b> <div class="spoiler_text">  [****] $ uname -a <br>  Linux ******* 2.6.32-358.6.2.el6.i686 # 1 SMP Thu May 16 18:12:13 UTC 2013 i686 i686 i386 GNU / Linux <br>  [****] $ curl -V <br>  curl 7.19.7 (i386-redhat-linux-gnu) libcurl / 7.19.7 NSS / 3.14.0.0 zlib / 1.2.3 libidn / 1.18 libssh2 / 1.4.2 <br>  Protocols: tftp ftp telnet dict ldap ldaps http file https ftps scp sftp <br>  Features: GSS-Negotiate IDN IPv6 Largefile NTLM SSL libz <br><br>  touch ./myget.sh <br>  chmod 751 ./myget.sh <br><br>  myget.sh (script for requests to the i-gender.com service): <br>  #! / bin / bash <br><br>  while read NAME <br>  do <br>  ANSWER = $ (curl -d "name = $ NAME" <a href="http://www.i-gender.com/ai">www.i-gender.com/ai</a> ) <br>  # answer will be something like this <br>  # {"Gender": "male", "confidence": "100"} <br>  GENDER = $ (echo $ ANSWER | cut -f 4 -d '"') <br>  CONFIDENCE = $ (echo $ ANSWER | cut -f 8 -d '"') <br>  echo "$ NAME, $ GENDER, $ CONFIDENCE" &gt;&gt; ./names.csv <br>  It is some time to rest))) <br>  sleep 1 <br>  done &lt;./result.csv <br><br>  result.csv (input): <br>  Dmitriy <br>  Anastasia <br>  Valentine <br>  Elissa <br>  Anatoly <br>  Natalia <br>  Irina <br>  Igor <br>  Paul <br>  Elizabeth <br>  Lydia <br>  Gregory <br>  Alla <br>  Osama <br><br>  names.csv (resulting file) <br>  Dmitry, male, 100 <br>  Anastasia, female, 100 <br>  Valentine, female, 85 <br>  Elissa, female, 100 <br>  Anatoly, male, 100 <br>  Natalia, female, 100 <br>  Irina, female, 100 <br>  Igor, male, 100 <br>  Paul, male, 100 <br>  Elizabeth, female, 100 <br>  Lydia, female, 100 <br>  Gregory, male, 100 <br>  Alla, female, 100 <br>  Usama, male, 100 <br></div></div><br><div class="spoiler">  <b class="spoiler_title">We connect the result to our database</b> <div class="spoiler_text">  sqlplus / as sysdba <br><br>  create or replace directory xtern_data_dir as '/ u02 / xtern'; <br>  create table pcmd.xtern_names <br>  ( <br>  first_name varchar2 (50), <br>  gender varchar2 (10), <br>  confidence number <br>  ) <br>  organization external <br>  ( <br>  default directory xtern_data_dir <br>  access parameters <br>  (records delimited by newline <br>  fields terminated by ',' <br>  ) <br>  location ('names.csv') <br>  ); <br><br>  select * from pcmd.xtern_names; <br></div></div><br>  When the data is connected to the database, they need to be subjected to preliminary verification using human labor.  You can then integrate them into the existing schema, expanding the existing tables, creating new ones associated with views and triggers.  But this has little to do with the topic of our article. <br><br><h4>  Conclusion </h4><br>  Using only the last name, first name and patronymic of our client, we cannot solve the task set automatically.  But either purchased databases and third-party samples, or services like <a href="http://www.i-gender.com/">www.i-gender.com</a> will help speed up and automate our task <a href="http://www.i-gender.com/">.</a> </div><p>Source: <a href="https://habr.com/ru/post/188358/">https://habr.com/ru/post/188358/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188344/index.html">A detailed review of Android 4.3</a></li>
<li><a href="../188346/index.html">Three trips to customs</a></li>
<li><a href="../188348/index.html">Translated by professional programmers, or the difficulties of gaming localization</a></li>
<li><a href="../188352/index.html">SIP client interaction. Part 1</a></li>
<li><a href="../188354/index.html">A brief introduction to GNU autoconf</a></li>
<li><a href="../188360/index.html">Justification of the need to purchase SSD for developers</a></li>
<li><a href="../188362/index.html">DLNA server for home and family</a></li>
<li><a href="../188364/index.html">Search for the shortest path in the transport graph (concept) + source</a></li>
<li><a href="../188368/index.html">Simulation of a neural network</a></li>
<li><a href="../188370/index.html">Selection of mnemonic quotes for car and phone numbers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
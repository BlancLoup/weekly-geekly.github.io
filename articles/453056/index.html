<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prototyping a mobile game, where to start, and how to do it. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that I often do prototypes (both for work and for personal projects) 
 and I want to share my experience. I would like to write an arti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prototyping a mobile game, where to start, and how to do it. Part 1</h1><div class="post__text post__text-html js-mediator-article">  It so happened that I often do prototypes (both for work and for personal projects) <br>  and I want to share my experience.  I would like to write an article that I would be interested to read myself, and first of all I wondered what a person is guided by when he takes this or that decision in the project implementation, as he starts the project, often to start is the most difficult thing. <br><br>  A fresh example I want to consider with you is the concept of a casual puzzle based on physics.  <i>Sometimes I will mention over the obvious things in order to expand the topic for beginners.</i> <br><br><h3>  Idea looks like this </h3><br><img src="https://habrastorage.org/webt/ll/_-/mh/ll_-mhzvvzuhmrptbuhnsjt9up8.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://habr.com/ru/post/453236/">Part 2</a> <br>  <a href="https://habr.com/ru/post/453748/">Part 3</a> <br><a name="habracut"></a><br>  We place various modifiers on the playing field, which change the direction of the rocket, attract, accelerate, repel and so on.  The task is to pave the way among the stars to the next planet we need.  Winnings are counted upon landing / touching the trail of the planet.  The playing field is vertical, several screens up, there is an assumption that the trajectory can occupy the floor of the screen left / right.  Loss - if missed past the destination planet, collided with another planet, flew far beyond the zone. <br><br>  And I hope we all understand that before rushing into development and implementing our plans, you must first make a prototype - a very raw and fast product that will allow you to quickly try basic mechanics and get an idea of ‚Äã‚Äãthe gameplay.  What are prototypes made for?  The gameplay in our heads and in practice are very different things, what seems cool to us, there will be complete horror for others, plus there are often controversial moments in the project - management, rules of the game, dynamics of the game and so on.  etc.  It would be extremely stupid to skip the prototype stage, work through the architecture, bring the graphics, adjust the levels and eventually find out that the game is shitty.  From life - in one game there were mini-games, about 10 pieces, after prototyping, it turned out that they were awfully boring, threw out half, and remade half. <br><br>  Advice - in addition to the basic mechanics isolate controversial places, write down specific expectations from the prototype.  This is done in order to perezlozhitsya on difficult moments.  For example, one of the tasks that this prototype faced was how comfortable and understandable that the playing field consists of several screens and they need to be shaken.  It was necessary to implement plan A - svayp.  Plan B - the ability to zoom the playing field (if necessary).  There were also several options for modifiers.  The screenshot shows the first idea - set the modifier and the direction of its influence.  As a result, the modifiers were replaced by simply spheres that change the direction of the rocket when the sphere is touched.  We decided that it would be more casual, without trajectories, and so on. <br><br>  <b>The general functionality that we implement:</b> <br><br><ol><li>  You can set the initial trajectory of the rocket, with limited deviations from the perpendicular to the degree (the rocket can not be turned to the side for more than a degree) </li><li>  There should be a start button to send a rocket on the way. </li><li>  Scrolling the screen when placing the modifier (before the start) </li><li>  Camera after player movement (after launch) </li><li>  Interface panel with which the field will be drags and drop modifiers </li><li>  The prototype should have two modifiers - repulsion and acceleration. </li><li>  There must be planets when you die </li><li>  Must have a planet when you win </li></ol><br><h3>  Architecture </h3><br>  A very important point, in a large development, it is considered that the prototype is written as it were, if only faster, then the project is simply written from scratch.  In the harsh reality of many projects, legs grow from a prototype, which is bad for a large development - curve architecture, code, technical debt, additional time for refactoring.  Well, indie development as a whole smoothly flows from the prototype into beta.  Why am I, you need to lay the architecture even in the prototype, even if it‚Äôs primitive, so that you don‚Äôt have to cry, or even blush in front of your colleagues. <br><br>  Before any start, always repeat - SOLID, KISS, DRY, YAGNI.  Even experienced programmers forget about Kiss and Yagni). <br><br>  <b>What basic architecture do I follow?</b> <br><br>  In the scene there is an empty gameobject GameController with the corresponding tag, it has components / mono-tags hanging on it, it‚Äôs better to make it a prefab, then just add components to the prefab as necessary: <br><br><ol><li>  GameController - (responsible for the state of the game, directly logic (won, lost, how much life, etc.) </li><li>  InputController - everything related to player control, tracking of tachets, clicks, clicked, control status, and so on. </li><li>  TransformManager - in games it is often necessary to know who is where, various data related to the position of the player / enemies.  For example, if we fly past the planet, then we count the defeat of the player, the game controller is responsible for this, but from where he should know the position of the player.  The Transform Manager is the very entity that knows the state of affairs. </li><li>  AudioController - here it is clear, this is about the sounds </li><li>  InterfacesController - and here it is clear, this is about UI </li></ol><br>  The overall picture emerges - for each understandable piece of tasks, a controller / entity is created that solves these tasks, it will allow to avoid Godlike objects, gives an understanding where to dig, we give out data from controllers, we can always change the implementation of data acquisition.  Public fields can not be, we give the data only through public properties / methods.  Data is calculated / changed locally. <br><br>  Sometimes it happens that GameController swells up, due to different specific logic and calculations.  If we need to process data - for this it is better to have a separate GameControllerModel class and do it there. <br><br><h3>  And so the code began </h3><br><div class="spoiler">  <b class="spoiler_title">Rocket Base Class</b> <div class="spoiler_text"><pre><code class="java hljs">using GlobalEventAggregator; using UnityEngine; using UnityEngine.Assertions; namespace PlayerRocket { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> RocketState { WAITFORSTART = <span class="hljs-number"><span class="hljs-number">0</span></span>, MOVE = <span class="hljs-number"><span class="hljs-number">1</span></span>, STOP = <span class="hljs-number"><span class="hljs-number">2</span></span>, COMPLETESTOP = <span class="hljs-number"><span class="hljs-number">3</span></span>, } [RequireComponent(typeof(Rigidbody))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerRocketBase</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoBehaviour</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span><span class="hljs-class"> </span></span>{ [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketConfig config; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Rigidbody rigidbody; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> InputController inputController; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketHolder rocketHolder; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketState rocketState; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform Transform =&gt; transform; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Rigidbody RigidbodyForForce =&gt; rigidbody; RocketState IPlayerHelper.RocketState =&gt; rocketState; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ForceModel&lt;IUseForces&gt; forceModel; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> virtual </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Injections(); EventAggregator.AddListener&lt;ButtonStartPressed&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, StartEventReact); EventAggregator.AddListener&lt;EndGameEvent&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, EndGameReact); EventAggregator.AddListener&lt;CollideWithPlanetEvent&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, DestroyRocket); rigidbody = GetComponent&lt;Rigidbody&gt;(); Assert.IsNotNull(rigidbody, <span class="hljs-string"><span class="hljs-string">"    "</span></span> + gameObject.name); forceModel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ForceModel&lt;IUseForces&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> virtual </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Injections(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyRocket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CollideWithPlanetEvent obj)</span></span></span><span class="hljs-function"> </span></span>{ Destroy(gameObject); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EndGameReact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EndGameEvent obj)</span></span></span><span class="hljs-function"> </span></span>{ Debug.Log(<span class="hljs-string"><span class="hljs-string">"     "</span></span>); rocketState = RocketState.STOP; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Injections</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ EventAggregator.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectEvent&lt;InputController&gt; { inject = (InputController obj) =&gt; inputController = obj}); EventAggregator.Invoke(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectEvent&lt;RocketHolder&gt; { inject = (RocketHolder holder) =&gt; rocketHolder = holder }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartEventReact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ButtonStartPressed buttonStartPressed)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span><span class="hljs-class"> </span></span>{ Transform Transform { get; } RocketState RocketState { get; } } }</code> </pre> <br></div></div><br>  <b>Let</b> 's <b>run</b> through the class: <br><br><pre> <code class="java hljs"> [RequireComponent(typeof(Rigidbody))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PlayerRocketBase</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonoBehaviour</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPlayerHelper</span></span></span></span></code> </pre> <br>  First, why is the class abstract?  We do not know what kind of rockets we will have, how they will move, how they will be animated, what gameplay features will be available (for example, the possibility of a rocket bounce to the side).  Therefore, we make the base class abstract, lay standard data there, and lay down abstract methods, the implementation of which for specific missiles may differ. <br><br>  You can also see that the class already has an interface implementation and an attribute that will attach the necessary component to the gamebug without which the rocket is not a rocket. <br><br><pre> <code class="java hljs">[SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> RocketConfig config;</code> </pre> <br>  This attribute tells us that the inspector has a serializable field where the object is being pushed, in most of the lessons, including Unity, such fields are made public, if you are an indie developer, don‚Äôt do so.  Use private fields and this attribute.  Here I want to dwell a little on what kind of class it is and what it does. <br><br><div class="spoiler">  <b class="spoiler_title">Rocketconfig</b> <div class="spoiler_text"><pre> <code class="java hljs">using UnityEngine; namespace PlayerRocket { [CreateAssetMenu(fileName = <span class="hljs-string"><span class="hljs-string">"RocketConfig"</span></span>, menuName = <span class="hljs-string"><span class="hljs-string">"Configs/RocketConfigs"</span></span>, order = <span class="hljs-number"><span class="hljs-number">1</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RocketConfig</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScriptableObject</span></span></span><span class="hljs-class"> </span></span>{ [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> speed; [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> fuel; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Speed =&gt; speed; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> Fuel =&gt; fuel; } }</code> </pre> <br></div></div><br>  This is a ScriptableObject that stores rocket settings.  This brings the data pool that game designers need - beyond the limits of the class.  Thus, game designers do not need to swarm and configure a specific game object with a specific rocket, they can only fix this config, which is stored in a separate asset / file.  They can configure the config time and it will continue, also let's say if you can buy different skins for the rocket, and the parameters are the same and the same - the config just roams where necessary.  This approach expands well - you can add any data, write custom editors, and so on. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> ForceModel&lt;IUseForces&gt; forceModel;</code> </pre> <br>  I also want to dwell on this, this is a generic class for applying modifiers to an object. <br><br><div class="spoiler">  <b class="spoiler_title">Forcemodel</b> <div class="spoiler_text"><pre> <code class="java hljs">using System.Collections.Generic; using System.Linq; using UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> TypeOfForce { Push = <span class="hljs-number"><span class="hljs-number">0</span></span>, AddSpeed = <span class="hljs-number"><span class="hljs-number">1</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ForceModel</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IUseForces</span></span></span><span class="hljs-class"> </span></span>{ readonly <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T forceUser; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;SpaceForces&gt; forces = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;SpaceForces&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> bool IsHaveAdditionalForces; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ForceModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T user)</span></span></span><span class="hljs-function"> </span></span>{ GlobalEventAggregator.EventAggregator.AddListener&lt;SpaceForces&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, ChangeModificatorsList); forceUser = user; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeModificatorsList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpaceForces obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj.IsAdded) forces.Add(obj); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> forces.Remove(forces.FirstOrDefault(x =&gt; x.CenterOfObject == obj.CenterOfObject)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (forces.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) IsHaveAdditionalForces = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> IsHaveAdditionalForces = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddModificator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsHaveAdditionalForces) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; foreach (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f in forces) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (f.TypeOfForce) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TypeOfForce.Push: AddDirectionForce(f); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> TypeOfForce.AddSpeed: forceUser.RigidbodyForForce.AddRelativeForce(Vector3.up*f.Force); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddDirectionForce</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SpaceForces spaceForces)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Debug.Log(""); //var t = AngleDir(forceUser.TransformForForce.position, spaceForces.CenterOfObject); forceUser.RigidbodyForForce.AddForce(Push(spaceForces)); } private Vector3 Push(SpaceForces spaceForces) { var dist = Vector2.Distance(forceUser.Transform.position, spaceForces.CenterOfObject); var coeff = 1 - (spaceForces.ColliderBound / dist); if (forceUser.Transform.position.x &gt; spaceForces.CenterOfObject.x) return (Vector3.right * spaceForces.Force) * coeff; else return (-Vector3.right * spaceForces.Force) * coeff; } public static float AngleDir(Vector2 A, Vector2 B) { return -Ax * By + Ay * Bx; } } public interface IUseForces { Transform Transform { get; } Rigidbody RigidbodyForForce { get; } } public struct SpaceForces { public TypeOfForce TypeOfForce; public Vector3 CenterOfObject; public Vector3 Direction; public float Force; public float ColliderBound; public bool IsAdded; }</span></span></code> </pre> <br></div></div><br>  This is what I wrote above - if you need to do some kind of calculations / complex logic, put it into a separate class.  There is a very simple logic - there is a list of forces that apply to the rocket.  We iterate the list, see what kind of power it is and apply a specific method.  The list is updated on events, events happen when entering / leaving the modifier field.  The system is quite flexible, in the first place it works with the interface (hi encapsulation), users of modifiers can be not only rockets / player.  Secondly, a generic - you can extend IUseForces with various descendants for needs / experiments, and still use this class / model. <br><br>  For the first part, that's enough.  In the second part, we will consider the event system, dependency injection, input controller, the rocket class itself and try to launch it. </div><p>Source: <a href="https://habr.com/ru/post/453056/">https://habr.com/ru/post/453056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453034/index.html">Father created a bionic prosthetic arm for his son with a 3D printer and X-Box</a></li>
<li><a href="../453038/index.html">Software Defined Radio - how does it work? Part 4</a></li>
<li><a href="../453044/index.html">The long-awaited step towards complexly structured documents (+ video)</a></li>
<li><a href="../453046/index.html">We use all index features in PostgreSQL</a></li>
<li><a href="../453048/index.html">About beer through the eyes of a chemist. Part 3</a></li>
<li><a href="../453058/index.html">AI learned how to create video from a single frame. Old paintings can now be made alive</a></li>
<li><a href="../45306/index.html">Picasa 3.0 - finally release!</a></li>
<li><a href="../453064/index.html">Harm for the good: the immune system of the lamprey in the fight against human brain cancer</a></li>
<li><a href="../453066/index.html">Typographic UI - a new way of developing user interfaces</a></li>
<li><a href="../453068/index.html">Subjectivity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of php-frontend of Zabbix monitoring system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, habrayuzer! 

 I think that every self-respecting system administrator of a local network will install a monitoring system in order to be aware...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of php-frontend of Zabbix monitoring system</h1><div class="post__text post__text-html js-mediator-article">  Hello, habrayuzer! <br><br>  I think that every self-respecting system administrator of a local network will install a monitoring system in order to be aware of all changes and events.  I want to tell about the monitoring system Zabbix, or rather about its php-frontend.  Here, only my personal experience obtained on a real local network. <br><a name="habracut"></a><br><h4>  Create user </h4><br>  We assume that our Zabbix server is installed and bolted by php-frontend.  Log in as the admin username and password zabbix (first login). <br><img src="http://hostingkartinok.com/image/01201108/42de12c30bb8095503970ee1ae06302c.png" alt="image"><br><br>  First of all I suggest to add my user and delete the default Admin account.  Go to the Administration-Users, in the drop-down menu in the upper right corner select users and click on the add user button. <br><img src="http://hostingkartinok.com/image/01201107/7440915cb0fcfaaab1d8797f61c01906.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, fill out the form and advise you to choose Russian.  Reboot under the new account. <br><br><h4>  Network nodes </h4><br>  The most important menu in zabbiks is Settings-Network nodes.  Here are the cars (and not only) that we are watching.  My page looks like this. <br><img src="http://hostingkartinok.com/image/01201107/68dfacaff512d3493d91c672ef9baaf4.png" alt="image"><br>  For each node there are settings: <br><ul><li>  <b>Groups of elements:</b> here you can put together several data elements, for example, data elements related to the network, to the CPU, to the disks. </li><li>  <b>Data elements:</b> these are, simply put, the sources of various data from the machines, hence all the information about the state of the system. </li><li>  <b>Triggers:</b> based on data elements, they monitor incoming data and, in case of deviations from the norm, notify administrators </li><li>  <b>Charts:</b> visual changes of data from data items, for example, the outgoing data rate of the sk0 interface.  The selection of the viewing interval is very conveniently designed; you can choose both on the graph and on the scroll bar above the graph. </li></ul>  In each of the 4 settings, of course, you can add your own groups of elements, your own data elements, triggers and graphics. <br>  It is desirable to attach a data elements template to each node, they have already been carefully prepared by the developers.  There are templates for Windows, Linux, Freebsd and other operating systems.  Templates differ in different ways of getting data. <br>  In addition to these 4 settings, you can see on the right the DNS of the host, its IP, the port on which the Zabbix Agent is located, the attached template, the status, whether this node is observed or not, and the availability of Zabbix Agent. <br>  Add the host you want to monitor and attach the template corresponding to the installed OS.  If you want to watch, for example, a Wi-Fi router, then you just need to ping it.  How to do this - I will explain in the next article, if necessary. <br><br><h4>  Alert Methods </h4><br>  So, now you are watching the server, now you need to configure the notification of admins when the data deviates from the norm.  To do this, go to the Administration-Ways alerts. <br><img src="http://hostingkartinok.com/image/01201107/1e68c2ac074cb89f211ede911396b1c3.png" alt="image"><br>  I have set up an alert through a script that sends an email through a script to the admin box.  The way of notification by E-mail, and not through the script, requires some additional configuration of the regular program for sending E-mail.  Therefore, it is easier through the script.  When creating a notification method and choosing the type of notification through a script, just write the name of the script.  I give the text of the script. <br><br> <code>#!/bin/sh <br> <br> export smtpemailfrom=zabbix@domain.com #,         <br> export smtpdomain=gmail.com # smtp  <br> export smtpserver=smtp.gmail.com # smtp  <br> export smtplogin=login #  <br> export smtppass=password #  <br> <br> echo "From: \"Zabbix Monitor\" &lt;$smtpemailfrom&gt;" &gt; /usr/home/zabbix/mailz <br> echo "To: $1" &gt;&gt; /usr/home/zabbix/mailz <br> echo "Subject: $2" &gt;&gt; /usr/home/zabbix/mailz <br> echo "" &gt;&gt; /usr/home/zabbix/mailz <br> echo "$3" &gt;&gt; /usr/home/zabbix/mailz <br> <br> /usr/local/bin/nbsmtp -d $smtpdomain -f $smtpemailfrom -h $smtpserver -U $smtplogin -D -s -P $smtppass -S &lt; /usr/home/zabbix/mailz <br> rm /usr/home/zabbix/mailz <br></code> <br>  Here is a script to send to gmail.  It is enough to install the nbsmtp program from FreeBSD ports, on Linux, I think, there is such a program too.  The script itself is in / usr / home / zabbix / bin /, i.e.  in the home folder of the user zabbix, you need to create a bin folder in it and put a script named smtp and execute chmod + x smtp. <br>  You also need to specify in the zabbix_server.conf config parameter where the alert scripts are located. <br><br> <code>... <br> AlertscriptsPath=/usr/home/zabbix/bin/ <br> .... <br></code> <br>  Now you need to edit your user in zabbix and add notification methods, if you have not done so already.  I have been configured to send sms-coy to the mail and to the phone (beeline service), the same feature is available for megaphone subscribers.  The operator creates an e-mail box, and incoming letters to this box are sent to you by SMS to the phone.  In this case, you will always receive timely alerts from zabbiksa. <br><img src="http://hostingkartinok.com/image/01201107/a7288f09c233f178ca8498f6510d090f.png" alt="image"><br>  When adding an alert method, you can specify the importance of using this alert method, for example, all alerts can be sent to the mail, and only important and extraordinary ones to the phone. <br><br><h4>  Actions </h4><br>  The next step is to set up actions.  Those.  what to do and under what conditions. <br><img src="http://hostingkartinok.com/image/01201107/835383f7c5ab82f97e387d1d79e3f799.png" alt="image"><br>  In the upper right corner, you can create a new action, consider what you need to fill out here. <br><img src="http://hostingkartinok.com/image/01201108/db21f8755501a6285554c32b66d0e805.png" alt="image"><br><br><ul><li>  <b>Name</b> - action name </li><li>  <b>Event</b> - what the action follows, in this case, the triggers </li><li>  <b>Subject</b> - what will be the subject in the e-mail message </li><li>  <b>Message</b> - what will be written in the message body </li><li>  <b>An action</b> condition is a condition under which an action will be performed.  I'm set up, so the message will be sent if the trigger works with the importance of more "high". </li><li>  <b>Action operations</b> are what should be done after the condition is triggered.  In this case, I‚Äôm set up sending an e-mail message to the Notification user. </li></ul><br>  Now we will receive timely notifications from zabbix when the triggers are rejected. <br><br><h4>  Complex screens </h4><br>  The following menu, it is desirable to customize this integrated screens. <br><img src="http://hostingkartinok.com/image/01201108/935fd80efb0fc1447ee93c9c947ed79e.png" alt="image"><br>  The complex screen is a group of the same type of graphs of different machines.  For example, the CPU load of all machines.  This is very clear and nice :) <br>  Let's see how to create an integrated screen.  As always, in the upper right corner, click on the button to create a complex screen; here you will be asked to enter only the name and size of the complex screen.  After creation, click on the name of the complex screen, a grid will appear in front of us and a change button in each cell.  Change each cell under the desired schedule and save.  You can view complex screens in action in Monitoring - Complex screens. <br><img src="http://hostingkartinok.com/image/01201108/55077c66c19c98cbbc92ca1b1ecadc07.png" alt="image"><br><br><h4>  Detection </h4><br>  Just for the sake of curiosity, you can configure the detection of computers on the network.  This is done using the Setup-Detection menu. <br><img src="http://hostingkartinok.com/image/01201108/8b0b59f3b77cd86c2fec6da66f8289ab.png" alt="image"><br>  In my case, it is useful to find out which IP has never been used and which can be removed from the DHCP database, since  Our IP space is not rubber.  When creating a discovery rule, it is enough to specify the range of scanned IPs and what to check: ping, http, samba, etc. <br><br>  Here are all the main things in zabbix that I wanted to tell you.  If I liked the article, then I can write the second how to add my own data elements (it will be interesting, most likely only FreeBSD's), how you can control Wi-Fi routers and in general more details about everything.  For the size of the images do not kick, probably not very nicely done. </div><p>Source: <a href="https://habr.com/ru/post/125340/">https://habr.com/ru/post/125340/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125327/index.html">How much did you score on testyourvocab.com? (The statistics is interesting for users of Habr).</a></li>
<li><a href="../125334/index.html">Soros Foundation encourages grant recipients to use Creative Commons</a></li>
<li><a href="../125336/index.html">Implementing mp3 filter for 7-Zip archiver</a></li>
<li><a href="../125337/index.html">2GIS runs an API with data on 1,000,000 organizations and the opportunity to earn</a></li>
<li><a href="../125338/index.html">Audit "Black box"</a></li>
<li><a href="../125341/index.html">New PHP documentation translation tool: edit.php.net</a></li>
<li><a href="../125342/index.html">Which text formatting option is most convenient for you (in forums, social networks, blogs, etc.)</a></li>
<li><a href="../125347/index.html">ABBYY FlexiCapture Engine 9.0: How to embed DataCapture technology into an application (programmer's view)</a></li>
<li><a href="../125348/index.html">A team of translators of PHP documentation needs help.</a></li>
<li><a href="../125349/index.html">And yet it is hacked</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
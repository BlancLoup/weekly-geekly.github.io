<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MySQL and SQLite - regular expressions in the predicate</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Regular expressions can provide you with an invaluable service when used wisely in SQL queries. 
 They can save you from having to sort through the cu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MySQL and SQLite - regular expressions in the predicate</h1><div class="post__text post__text-html js-mediator-article">  Regular expressions can provide you with an invaluable service when used wisely in SQL queries. <br>  They can save you from having to sort through the cursor cycles, or (oh, horror!) In the cycles of the basic application language, solid chunks of tables.  The truth is sometimes the service can be "bearish." <br>  Examples and features of the use of this technique <a name="habracut"></a><br><br>  For example, we have business-logic applications, in which at the first stage the user can create an arbitrary record in the database, and at the second stage use this arbitrary record as a foreign key. <br>  The task is quite predictable - it is required to observe the uniqueness of the record. <br>  I can offer to consider such a solution <i>(yes, it is not universal, because I supplement an arbitrary user record, thereby formally changing it. On the other hand, quoting Clarkson: "Yes, I am a tyrant! Do you want democracy - go to Iraq!" )</i> : <br>  DDL tables <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">CREATE</font> <font color="#0000ff">TABLE</font> `human_link` ( <br> `translit_link` <font color="#0000ff">varchar</font> (255) <font color="#0000ff">NOT</font> <font color="#0000ff">NULL</font> <font color="#0000ff">DEFAULT</font> <font color="#A31515">'main'</font> , <br> `owner` <font color="#0000ff">int</font> <font color="#0000ff">NOT</font> <font color="#0000ff">NULL</font> , <br> <font color="#0000ff">PRIMARY</font> <font color="#0000ff">KEY</font> (`translit_link`) <br> ) ENGINE=MyISAM <font color="#0000ff">DEFAULT</font> CHARSET=utf8</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Where the arbitrary entry under discussion is the `translit_link` field, which, to maintain the uniqueness, we supplement with the digit (1) or, if there is already a digit, increase the digit by +1. <br>  You can find out if there is a similar entry by request. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">SELECT</font> `translit_link` <font color="#0000ff">FROM</font> `foo`.`human_link` <br> <font color="#0000ff">WHERE</font> `translit_link` REGEXP CONCAT( <font color="#A31515">'^'</font> ,?, <font color="#A31515">'[[:digit:]]*$'</font> ) <font color="#0000ff">ORDER</font> <font color="#0000ff">BY</font> `translit_link` <font color="#0000ff">DESC</font> <font color="#0000ff">LIMIT</font> 1;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Actually, it remains only to figure out what has returned to us and to do with the return what the logic of preserving the uniqueness of the field tells us (an example of this technique that comes closer to life, using perl and the stored procedure - <a href="http://www.fotov.net/2009/06/chetkaya-nechetkaya-logika/">read</a> my blog). <br>  But it was all just a saying. <br>  The tale is this - EXPLAIN <b>MySql</b> about this query will say <code>Using where; Using index</code>  <code>Using where; Using index</code> , but when using <b>SQLite</b> from DBD :: SQLite - <br><blockquote>  <b>REGEXP function</b> <br>  It would be quite costly in terms of performance. <br></blockquote><br>  In addition, not everything is so smooth in MySQL either - in the book <i>‚ÄúHigh performance MySQL: optimization, backups, replication, and load balancing‚Äù By Jeremy D. Zawodny, Derek J. Balling,</i> there is a line that expressions like WHERE last_name RLIKE ‚Äù(son | ith) $ "will be unrealistically slow for reasons that can be explained, but an expression of the type WHERE rev_last_name RLIKE" ^ (thi | nos) "will be slower than two WHERE-union unions for" thi% "and" nos% "because <em>MySQL the optimizer never tries to optimize a regular expression based query</em> . <em>‚Äù</em> <br>  From which we conclude that not all yogurts are equally useful. <br><br>  Ps.  I would be very grateful for the hint how things are in PostgreSQL, Oracle and in the MS camp.  :) <br>  Pps.  I am aware of the existence of <b>ON DUPLICATE KEY UPDATE</b> - the procedure behaves incorrectly when using a composite unique index (multiple unique indexes).  Those.  IMHO, theoretically, it is generally unsafe for business logic, because  imposes <u>implicit</u> restrictions on created indexes. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/67294/">https://habr.com/ru/post/67294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67287/index.html">system migration to RAID + LVM (short summary)</a></li>
<li><a href="../67289/index.html">Couchsurfing.org or hospitality clubs</a></li>
<li><a href="../67290/index.html">How do you call a ship ...</a></li>
<li><a href="../67291/index.html">Alt - required attribute tag img</a></li>
<li><a href="../67293/index.html">Razer Megalodon or the pursuit of the perfect sound</a></li>
<li><a href="../67297/index.html">Cisco NME-RVPN + KAV Software Testing</a></li>
<li><a href="../67298/index.html">Moonlight 2.0 Beta Available</a></li>
<li><a href="../67301/index.html">FreeCR - console forum</a></li>
<li><a href="../67305/index.html">Mikolaiv and pyvo or meeting in Template City</a></li>
<li><a href="../67307/index.html">Pohape manual updated</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
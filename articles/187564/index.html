<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tiny Tiny RSS on free hosting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article continues the series of articles about life after the closure of Google Reader and will talk about the experience of setting up Tiny Tiny...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tiny Tiny RSS on free hosting</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/46c/829/abe/46c829abe95416ba388447d946e7292b.jpg" alt="image"><br>  This article continues the series of articles about life after the closure of Google Reader and will talk about the experience of setting up Tiny Tiny RSS on hostinger.ru, the obstacles that we had to face and, of course, how to overcome them.  You are waiting for detailed step-by-step instructions with pictures, source code and comments. <br><br>  The article should not be considered as hosting advertisement, since it will mainly describe Hostinger‚Äôs shortcomings and ways to overcome them. <br><a name="habracut"></a><br><br><h1>  Why hostinger.ru? </h1><br>  Immediately make a reservation, I have nothing to do with this service and I want to ask not to start the debate that free hosting is a solid problem and it is always better to switch to a paid one, and even better order a VPS / VDS or raise a server at home.  I agree that full control is always better, but free always attracts, isn't it? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      My path to finding a replacement for Google Reader has been quite long and may not have been completed yet.  I immediately stopped at Tiny Tiny RSS, as one of the most functional alternatives, but I had to tinker with hosting.  At first I tried <a href="https://www.openshift.com/quickstarts/tiny-tiny-rss">the Tiny Tiny RSS cartridge</a> for OpenShift, but the performance was so low that it was impossible to work with it.  Then there was Heroku and the <a href="https://github.com/projectdelphai/ttrss-on-heroku">script</a> for installing Tiny Tiny RSS ‚Äúin one click‚Äù, in which, in order to run it successfully, I had to send a couple of commits.  On Heroku Tiny Tiny RSS earned fine, but the limit of 10,000 entries in the database, which can be increased for $ 9 / month, ended rather quickly.  This is the amount for which you can rent a VPS / VDS. <br><br>  In the end, I was ready to switch to paid hosting, but came across Hostinger.  The free tariff of this service imposed fewer restrictions than many paid hosting, and so I decided to try.  Of course, the stability of Hostinger leaves much to be desired, but there is always the opportunity to pick up a backup and deploy your application anywhere, and the tempting pricing policy (for free) made you take a risk. <br><br>  So, let's begin‚Ä¶ <br><br><h1>  Step 1: Install Tiny Tiny RSS </h1><br>  Making an account on hostinger.ru.  Go to <a href="http://hostinger.ru/">hostinger.ru</a> and click "Order Now!". <br><br>  Confirm e-mail. <br><br>  Order a free fare. <br><br>  Choose a domain 3 level of the form <b>&lt;name&gt; .p.ht</b> and a separate password for this domain.  After a pause, you will get a similar picture: <br><img src="https://habrastorage.org/storage2/d3b/5d4/f37/d3b5d4f37178fddf5645596307daee2a.png" alt="image"><br><br>  Click "Select". <br><br>  Answer the question: "What is the main goal for you to use our hosting?".  I replied: ‚ÄúJust learning and experimenting.  I'm a newbie :)". <br><br>  You will be taken to the control panel of your site.  The main work will be carried out with it: <br><img src="https://habrastorage.org/storage2/005/071/726/00507172680c1060bd6e2b9fc9b4cb53.png" alt="image"><br><br>  To begin with, we will configure FTP access.  In the letter with the subject "Free Account Activated" should come data to connect.  Use the password from the domain, which also had to come in the letter "Account Created".  To access FTP, I used Total Commander and turned on "Passive transfer mode as a web-browser" and sending the NOOP command every 30 seconds.  Such settings seemed to me the most stable. <br><img src="https://habrastorage.org/storage2/682/e38/70e/682e3870e5665e50f7a976207dd791e1.png" alt="image"><br><br>  Try to go to ftp, there should be a lonely <b>default.php</b> <br><br>  Create a subdirectory and subdomain for our application.  In the control panel, go to <b>‚ÄúSubdomains‚Äù</b> and enter the name of the directory and subdomain, for example <b>‚Äúrss‚Äù</b> and you can open your reader with <b>rss. &lt;Name&gt; .p.ht</b> . <br><img src="https://habrastorage.org/storage2/651/85d/b62/65185db62d43eff8774e8da14764f7d0.png" alt="image"><br><br>  The next step is to create a database.  Open the MySQL Databases item.  Enter <b>‚Äúttrss‚Äù</b> in the first two fields and the same password as ftp for the password. <br><img src="https://habrastorage.org/storage2/1ba/207/c40/1ba207c40aa96602dbac9630fd0c7016.png" alt="image"><br><br>  Click Create. <br><img src="https://habrastorage.org/storage2/74a/661/48e/74a66148edaab02f502c034cf27cda77.png" alt="image"><br><br>  It's time to finally download Tiny Tiny RSS.  Go to <a href="http://tt-rss.org/">tt-rss.org</a> and at the bottom of the page will be a link <b>"Download tarball, v1.9"</b> . <br><br>  When the download is complete, open ftp and upload the <b>Tiny-Tiny-RSS-1.9.tar.gz to the public_html</b> folder and delete the <b>rss</b> folder (Perhaps using <b>the File Manager</b> in the control panel, upload the file faster). <br><br>  In the control panel, open the <b>‚ÄúSSH Console‚Äù</b> and sequentially enter the following commands: <br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> public_html tar zxfv Tiny-Tiny-RSS-1.9.tar.gz mv Tiny-Tiny-RSS-1.9 rss</code> </pre> <br><br>  Remove <b>Tiny-Tiny-RSS-1.9.tar.gz</b> via FTP, we need it more. <br><br>  Open your <b>rss. &lt;Name&gt; .p.ht reader</b> and you will see the Tiny TinyRSS settings page.  Fill in the parameters of your database.  And click "Test configuration". <br><img src="https://habrastorage.org/storage2/8ed/6b9/f0a/8ed6b9f0a6fa9dae96765a8c1e6341f8.png" alt="image"><br><br>  After the check is successful, click ‚ÄúInitialize database‚Äù and then ‚ÄúSave configuration‚Äù. <br><br>  That, in fact, ended pre-setting. <br><br>  You can log into your reader using the login ‚Äúadmin‚Äù and the password ‚Äúpassword‚Äù (which is better to change immediately). <br><br><h1>  Stage 2: Setting up logging </h1><br>  Configure the server to output logs to a specific file.  To do this, add the following commands to the <b>public_html / rss / .htaccess</b> file, after replacing ‚Äúu466982574‚Äù with your user name (indicated in the control panel) <br><pre> <code class="hljs pgsql"># Increase execution <span class="hljs-type"><span class="hljs-type">time</span></span> php_value max_execution_time <span class="hljs-number"><span class="hljs-number">300</span></span> # PHP error handling <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> development servers # http://perishablepress.com/advanced-php-error-handling-via-htaccess/ php_flag display_startup_errors <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> php_flag display_errors <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> php_flag html_errors <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> php_flag log_errors <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> php_flag ignore_repeated_errors <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> php_flag ignore_repeated_source <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> php_flag report_memleaks <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> php_flag track_errors <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> php_value docref_root <span class="hljs-number"><span class="hljs-number">0</span></span> php_value docref_ext <span class="hljs-number"><span class="hljs-number">0</span></span> php_value error_log /home/u466982574/public_html/PHP_errors.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span> php_value error_reporting <span class="hljs-number"><span class="hljs-number">-1</span></span> php_value log_errors_max_len <span class="hljs-number"><span class="hljs-number">0</span></span> &lt;Files PHP_errors.<span class="hljs-keyword"><span class="hljs-keyword">log</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">Order</span></span> allow,deny Deny <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> Satisfy <span class="hljs-keyword"><span class="hljs-keyword">All</span></span> &lt;/Files&gt;</code> </pre><br><br>  This file, in addition to causing php to write all errors to a file, increases the maximum execution time of the script (not sure if it helps on Hostinger, but it won't be too much) <br><br>  Open <b>public_html / rss / config.php</b> and replace the line <br><pre> <code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'LOG_DESTINATION'</span></span>, <span class="hljs-string"><span class="hljs-string">'sql'</span></span>);</code> </pre> <br>  on <br><pre> <code class="php hljs">define(<span class="hljs-string"><span class="hljs-string">'LOG_DESTINATION'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre> <br>  This will force Tiny TinyRSS to write errors not in the database, but in the file from the previous item.  The fact is that on Hostinger, at least for me, a frequent problem is the inaccessibility of the database, in the event of which the error message is simply lost. <br><br><h1>  Stage 3: Automatic Update </h1><br>  You need to set up an automatic update of the reader and the problems here already begin.  Hostinger supports CRON tasks, that is, the ability to run an arbitrary script at regular intervals. <br><br><h4>  CRON-task and parameters update.php </h4><br>  In Tiny TinyRSS, for updating, you need to call the <b>update.php</b> script with the <b>--feed</b> parameter, but Hostinger prohibits transferring parameters in CRON tasks.  So, you need to create a script that will call <b>update.php</b> and pass the necessary parameters to it.  <b>Let's</b> call this script <b>update_with_params.php</b> : <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env php &lt;?php ob_implicit_flush(true); echo "PHP version: " . phpversion() . PHP_EOL; echo "Max execution time: ".ini_get("max_execution_time")." seconds" . PHP_EOL; define( 'UPDATE_IMPLICIT_PARAMS', 'feeds' ); require_once "update.php"; ?&gt;</span></span></code> </pre><br><br>  Also, we will have to change <b>update.php</b> and add the following code: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (defined(<span class="hljs-string"><span class="hljs-string">'UPDATE_IMPLICIT_PARAMS'</span></span>)) { $impl_params = array_map(<span class="hljs-string"><span class="hljs-string">"trim"</span></span>, explode(<span class="hljs-string"><span class="hljs-string">","</span></span>, UPDATE_IMPLICIT_PARAMS)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( !is_array($options) ) $options=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); $options = array_merge( $options, array_fill_keys($impl_params, <span class="hljs-string"><span class="hljs-string">''</span></span>)); }</code> </pre><br><br>  after the line: <br><pre> <code class="php hljs">$options = getopt(<span class="hljs-string"><span class="hljs-string">""</span></span>, $longopts);</code> </pre><br><br><h4>  CRON task and PHP version </h4><br>  The second problem with Hosting CRON tasks is that they are invoked under PHP 5.2, and Tiny TinyRSS requires nothing less than PHP 5.3.  To solve this problem, we will create a new script that will call <b>update_with_params.php</b> remotely, as a browser, and call it <b>update_external.php</b> .  Replace <b><a href="http://rss.name.p.ht/">rss.name.p.ht</a></b> with the address to your reader. <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env php &lt;?php echo "PHP version: " . phpversion() . PHP_EOL; echo "Max execution time: ".ini_get("max_execution_time")." seconds" . PHP_EOL; $url = "http://rss.name.p.ht/update_with_params.php"; $ch = curl_init($url); try { if ( $ch === FALSE ) throw new Exception('failed to initialize'); $startTime = microtime(true); $result = curl_exec($ch); echo 'Execution time '. (microtime(true) - $startTime) . ' sec' . PHP_EOL; if (FALSE === $result ) throw new Exception('Curl error ' . curl_errno($ch) . ' , ' . curl_error($ch) ); $code = curl_getinfo($ch, CURLINFO_HTTP_CODE ); if ( $code != 200 ) throw new Exception( "Page returned error code $code" ); } catch(Exception $e) { trigger_error( sprintf('ERROR #%d: %s\n', $e-&gt;getCode(), $e-&gt;getMessage()), E_USER_ERROR ); } curl_close($ch); ?&gt;</span></span></code> </pre><br><br><h4>  Setting up a CRON task </h4><br>  It remains to configure our script to start automatically.  To do this, go to the " <b>Cron-Tasks</b> " item in the control panel and configure it as in the picture: <br><img src="https://habrastorage.org/storage2/a8d/f51/a6f/a8df51a6fff15b42c3ddabcd6f4e680b.png" alt="image"><br><br>  Click "Create" <br><br>  Now every 5 minutes the script will be called updating the reader.  You can find the logs of his work in the item ‚Äú <b>Cron-Task Results</b> ‚Äù in the control panel: <br><img src="https://habrastorage.org/storage2/5d0/68d/f7a/5d068df7ab97cb52afc3510c636b07c4.png" alt="image"><br><br>  That's all. <br><img src="https://habrastorage.org/storage2/2b9/a9b/c88/2b9a9bc8820fe96ffcdb64a307c4ddd9.png" alt="image"><br><br><h1>  Debriefing </h1><br>  At the moment I use Tiny Tiny RSS on Hostinger and I am quite satisfied, however, I see several potential problems that may manifest themselves in the future: <br><ul><li>  Restriction on the execution time of the script.  It is difficult to say how Hostinger obeys the <b>max_execution_time</b> parameter in <b>.htaccess</b> , but now updating my tapes takes 45 seconds and Hostinger does not interrupt the execution. <br></li><li>  The messages ‚ÄúToo many connections‚Äù and ‚ÄúMySQL server has gone away‚Äù appear in the logs, indicating that the connection to the database is broken during the execution of the script.  Theoretically, this should not be a problem if it doesn‚Äôt happen all the time and if the developers of Tiny Tiny RSS work carefully with transactions (which, at first glance, seems to be true) <br></li><li>  A few hours access to the reader was closed, then everything was restored.  I had to wait <br></li><li>  The developers of Tiny Tiny RSS oppose the modification of their product under the restrictions of virtual hosting sites and my <a href="https://github.com/gothfox/Tiny-Tiny-RSS/pull/273">patch</a> , with the changes described here, was not accepted.  This may affect further with the release of new versions. <br></li></ul><br><br><h1>  Conclusion </h1><br>  The article described the installation of Tiny Tiny RSS on Hostinger, and I tried to impartially assess the possibility of using such a solution.  From my point of view, it is quite possible to use this solution, especially considering its main advantage - free of charge.  But it's up to you to decide, of course, as always, good, in order to try it no longer need to go the way of setting from the beginning. <br><br>  If you know how to improve scripts or settings, please indicate them in the comments.  In addition, please describe the reason in the comments if you bet a minus. </div><p>Source: <a href="https://habr.com/ru/post/187564/">https://habr.com/ru/post/187564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../187554/index.html">3070 hours of hack quest, report and stories of participants</a></li>
<li><a href="../187556/index.html">Welcome to Windows Camp - September 12, Moscow</a></li>
<li><a href="../187558/index.html">And why not stop suffering on trifles?</a></li>
<li><a href="../187560/index.html">Xen 4.3 released</a></li>
<li><a href="../187562/index.html">Tough Guy - Sony Xperia ZR Security Smartphone Review</a></li>
<li><a href="../187566/index.html">12 rules of a bad manager</a></li>
<li><a href="../187568/index.html">Programmers and the human factor</a></li>
<li><a href="../187574/index.html">We work with the registry of prohibited resources</a></li>
<li><a href="../187578/index.html">RWpod. 20th edition 01 of the season. Plans for Rspec 3, Webservice Object, Backbone.Giraffe, Slimer.JS, etc.</a></li>
<li><a href="../187580/index.html">Easy way to play old games with 3dfx emulation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
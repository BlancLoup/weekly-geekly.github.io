<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TheSortableTree 2.0 gem release</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings 

 I am glad to announce that last weekend, after a long lull, my small release took place, but I dare to hope, the useful crafts - the TheS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TheSortableTree 2.0 gem release</h1><div class="post__text post__text-html js-mediator-article">  Greetings <br><br>  I am glad to announce that last weekend, after a long lull, my small release took place, but I dare to hope, the useful crafts - the <a href="https://github.com/the-teacher/the_sortable_tree">TheSortableTree gem</a> (rails 3, rails 4). <br><br>  TheSortableTree is a gem that helps organize the drawing of Nested Set trees.  But the most important thing is that it allows you to easily and simply manage your Nested Set tree by conveniently dragging items to the right place. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/883/fd4/f54/883fd4f5419e2030494cc008f92ae34d.jpg" alt="image"><br><br>  In the current version of the heme solved the most important problem - the speed of rendering.  Previously, it was monstrously slow.  Now (on average) you can get the drawing speed of <b>1500-2000 nodes per second</b> .  I find this speed acceptable and sufficient for most application needs. <br><br>  Below (if you're interested) is a little history of creating heme, thanks, plans, and a story about how open source projects are affected by drinking strong black tea in the evening after work. <br><br>  PS: <br><br>  <a href="http://habrahabr.ru/users/anonym/" class="user_link">Anonym</a> , you may be surprised, but in this release of the heme I take you on the biggest role, although I practically don‚Äôt know you and maybe you never programmed in ruby. <br><br><a name="habracut"></a><br><br><h5>  A bit of history </h5><br><br>  I became interested in nested set and drawing it when I met ruby ‚Äã‚Äãand ruby ‚Äã‚Äãon rails.  It was the year 2008. <br><br>  If you remember, at that time the implementation of the nested set algorithm on ruby ‚Äã‚Äãwas in the initial state.  We used nested set to form a comment tree.  The main problem of working with nested sets was that there was actually no decent and fairly common solution for drawing trees.  We cycled as they could. <br><br>  At that moment I wanted to <b>draw trees with simple recursion</b> .  Why?  Because this approach, in my opinion, is quite simple to implement, <b>understandable to understand</b> and contains almost no magic. <br><br>  In 2009-2010, the first version of the code for tree rendering was already running in my projects.  Then the code was completely bad - the classic porridge of type and logic.  I could not find time to clear the Augean stables.  But!  <b>The code worked</b> . <br><br>  At the end of 2011, I calculated the code, separated the logic from the presentation, and designed the first version of the heme.  There were problems, but I was hoping for github's collective intelligence.  In any case, I can say that in some respects the <b>code has become beautiful</b> .  But still terribly slow.  I do not even want to remember these terrible numbers. <br><br>  At the end of 2012, a casual conversation with hacker user <a href="http://habrahabr.ru/users/anonym/" class="user_link">Anonym</a> pushed me to the idea that my code works godlessly slowly and should not be so.  And if before that I was waiting for a good uncle with github, who will tell me what needs to be changed in my code, then at that moment I was taken up by a wild interest: what is wrong? <br><br>  Strange, but for some reason, after a virtual conversation with <a href="http://habrahabr.ru/users/anonym/" class="user_link">Anonym</a> in one of the branches of the Q &amp; A Habr, <u>sitting at home over a cup of evening tea,</u> I scrolled the main fragments of my code in my head and found a bottleneck. <br><br>  <b>The decision was so terribly simple that it even put me in a stupor for a while.</b>  That same evening, the heme was patched and the rendering speed increased dramatically.  <b>The code has become fast.</b> <br><br>  In January 2013, while on vacation, I designed a new version of the heme and uploaded it to the network.  Now I see that there is interest in my craft and it is damn nice to me. <br><br><h5>  Acknowledgments </h5><br><br>  I am very grateful to all those who helped me with advice, patches, consultations and constructive criticism and skepticism: first of all these are habrazhiteli: <a href="http://habrahabr.ru/users/vorbiz/" class="user_link">vorbiz</a> , <a href="http://habrahabr.ru/users/userifle/" class="user_link">UseRifle</a> and <a href="http://habrahabr.ru/users/anonym/" class="user_link">Anonym</a> . <br><br>  Thanks to nobody <a href="https://github.com/mjsarfatti">mjsarfatti</a> for his <a href="https://github.com/mjsarfatti/nestedSortable">nestedSortable</a> script on the basis of which dragging works in my gem. <br><br>  Thanks <a href="http://iconza.com/">Ikonze</a> for a couple of icons. <br><br>  Thanks to my beloved wife for the unlimited support and the fact that she <a href="http://open-cook.ru/">feeds</a> me <a href="http://open-cook.ru/">tasty</a> while I live in the virtual world. <br><br><h5>  Plans </h5><br><br>  Now I see several main areas to work on: <br><br>  <b>1.</b> I cut a helper from a heme that creates a simple template for tree comments.  In my opinion, such functionality should immediately be rendered into a separate gem, based on my gem.  Although such solutions are probably already complete.  And here it is worth seriously thinking. <br><br>  <b>2.</b> There are many other solutions for tree data structures - <a href="https://github.com/take-five/acts_as_ordered_tree">acts_as_ordered_tree</a> , <a href="https://github.com/stefankroes/ancestry">ancestry</a> .  It would be nice to make a version of the heme and for them. <br><br>  <b>3.</b> Many people want to draw the main nodes of the tree in large trees, and then (if necessary) load the child elements.  Such functionality, of course, is worth implementing.  I probably will be doing this soon. <br><br><h5>  Little about the boundary conditions </h5><br><br>  I found that dragging on the client begins to significantly slow down if there are more than 1500 dragged nodes (adjust for technical resources).  This is just information for consideration.  So far, this problem is not relevant for me personally and I will not attach significant importance to it.  However, it may be useful to you.  Just know the order of the numbers. <br><br><h5>  Total </h5><br><br>  Overall, I am pleased with what happened.  I hope my little handiwork will make life easier for someone. <br><br>  Of course I hope for constructive criticism, reviews and issues on the project page. <br><br>  Successes and good luck! </div><p>Source: <a href="https://habr.com/ru/post/166711/">https://habr.com/ru/post/166711/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166697/index.html">Review of offers of Coursera and edX</a></li>
<li><a href="../166699/index.html">Degrees are the key to fast hierarchy in a relational database</a></li>
<li><a href="../166701/index.html">Efficient string concatenation in .NET</a></li>
<li><a href="../166705/index.html">New asteroid development project</a></li>
<li><a href="../166709/index.html">[Translation] Introduction to CocosBuilder</a></li>
<li><a href="../166715/index.html">Never distract a programmer</a></li>
<li><a href="../166719/index.html">Announced the release of smartphones "Firefox OS developer preview"</a></li>
<li><a href="../166721/index.html">Yota-script or save with Yota cross platform</a></li>
<li><a href="../166723/index.html">Iconomania or fear of not using icons</a></li>
<li><a href="../166725/index.html">Activision will show a new generation of rendering technologies at GDC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We work with a hybrid cloud: VMware vCloud Connector, part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We work with a hybrid cloud: VMware vCloud Connector, part 1 
 We work with a hybrid cloud: replication and disaster recovery to a service provider cl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We work with a hybrid cloud: VMware vCloud Connector, part 2</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habrahabr.ru/company/dataline/blog/306904/">We work with a hybrid cloud: VMware vCloud Connector, part 1</a> <br>  <a href="https://habrahabr.ru/company/dataline/blog/308984/">We work with a hybrid cloud: replication and disaster recovery to a service provider cloud using Veeam Cloud Connect Replication</a> <br><br>  In the <a href="https://habrahabr.ru/company/dataline/blog/306904/">first part,</a> we talked about how to deploy vCloud Connector - a tool for working with a hybrid cloud based on VMware.  Today we will go through the main functionality of vCloud Connector.  We show how to work with virtual machines located in different infrastructures (on, off, console access), move virtual machines between remote infrastructures and synchronize directories. <br><br><img src="https://habrastorage.org/files/622/b24/8a9/622b248a976941a3a9a0cacf5dfa1c77.jpg"><br><a name="habracut"></a><br><h3>  Virtual Machine Operations </h3><br>  <b>ON / OFF.</b>  Everything is simple here.  Go to the interface vCloud Connector. <br>  In the left menu, select the infrastructure.  In the right pane, go to the Virtual Machines tab and select the desired virtual machine.  We click on the Power On control panel if we want to turn on the machine, Power Off if we want to turn it off. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/485/7eb/7d3/4857eb7d37304928a55e4cd068c101a8.png"><br><br>  <b>Console access.</b>  Before you begin, check whether the VMware Client Integration Plug-in plugin is <a href="http://www.dtln.ru/help/1423">installed</a> .  Open the console itself in Internet Explorer. <br><br>  In Internet Explorer settings, add the vCloud Connector Server address to compatibility mode and a list of trusted sites. <br><br>  Select a virtual machine in the list.  Click on the thumbnail below. <br>  To open the console in full screen, click on the keyboard combination Win + ‚Üë. <br>  To make the mouse active outside the console screen, press Ctrl + Alt. <br><br><img src="https://habrastorage.org/files/815/53f/148/81553f1489c840da9c0648ae3f24013b.png"><br><br>  <b>Copying virtual machines.</b>  Copy the virtual machine from the vSphere infrastructure to the vCloud Director.  For this, the virtual machine must be turned off. <br><br><ol><li>  Select the virtual machine and click on the Copy icon. <br><br><img src="https://habrastorage.org/files/bd3/86a/e77/bd386ae7788046ca993ab5923afe7745.png"><br><br></li><li>  Select the infrastructure to copy the machine.  We set the name of the virtual machine and the description.  Select the directory in which we copy our virtual machine.  Click Next. <br><br><img src="https://habrastorage.org/files/65a/219/46a/65a21946accf4dc2ada29b19dc0e5433.png"><br><br></li><li>  Choose a virtual data center.  Click Next. <br><br><img src="https://habrastorage.org/files/101/1a4/7ae/1011a47ae13e4f03b02a235a87183ef0.png"><br><br></li><li>  Check Deploy vApp if you want the virtual machine to be deployed immediately in vCloud Director immediately after copying. <br><br><img src="https://habrastorage.org/files/e89/0b5/f4b/e890b5f4bdc242529f67414f839e9bb8.png"></li><li>  In this case: <br><ul><li>  select the network to which the virtual machine will be connected; </li><li>  set <a href="http://www.dtln.ru/help/1418">customization</a> settings; </li><li>  set an administrator password; </li></ul><br>  You can also make sure that after deployment the virtual machine is turned on (the Power on vApp after deployment checkbox), and the vApp itself is removed from the directory (Remove temporary vApp in destination vCloud catalog).  Click Next. <br><br><img src="https://habrastorage.org/files/9d5/727/664/9d5727664a614dfd99a21b5b4ee8801d.png"><br><br></li><li>  Check all copy options and click Validate. <br><br><img src="https://habrastorage.org/files/5b6/f04/c94/5b6f04c94536463fb1feb0302f8e3965.png"><br><br></li><li>  After the successful validation process, click Finish. <br><br><img src="https://habrastorage.org/files/f1b/0b1/31f/f1b0b131f01545129dffcfc1f417958f.png"><br><br></li><li>  The copy process begins. <br><br><img src="https://habrastorage.org/files/324/2ea/b0e/3242eab0e64a405c9554e77d6f3f441a.png"><br><br></li><li>  After copying to vCloud, the virtual machine will be in its vApp in the vCloud Director directory. <br><br><img src="https://habrastorage.org/files/9f3/6d4/b31/9f36d4b318e14f8caf7dc1e8a0ef3b13.png"><br><br></li><li>  If we look in the same directory through the vCloud Connector interface, we will also see our vApp. <br><br><img src="https://habrastorage.org/files/2cd/bef/29a/2cdbef29a15b4a209b75825ae2b0ba85.png"></li></ol><br>  Now let's do the opposite: copy vApp from vCloud Director to vSphere infrastructure.  In this scenario, only vApp can be copied. <br><br><ol><li>  In the vCloud Connector interface, select the vApp from the vCloud Director infrastructure and click on the Copy icon. </li><li>  We choose the infrastructure in which we will copy.  Set the name.  Click Next. <br><br><img src="https://habrastorage.org/files/343/9fe/6ce/3439fe6ce074424894a7848fc81e661f.png"><br><br></li><li>  Choose a cluster. <br><br><img src="https://habrastorage.org/files/6f8/105/698/6f8105698a5f4093a64752fa9d8e35d0.png"><br><br></li><li>  Select the storage where the vApp will be deployed.  Click Next <br><br><img src="https://habrastorage.org/files/364/1dc/78d/3641dc78d4ab4642a462cb3b5a1ae34d.png"><br><br></li><li>  Here you can also configure the vApp to automatically turn on after the copy is completed.  Click Next. <br><br><img src="https://habrastorage.org/files/b66/921/760/b669217604e34041bd12682dc85295cb.png"><br><br></li><li>  Check all copy options and click Validate. <br><br><img src="https://habrastorage.org/files/11a/095/d95/11a095d958674de6b9e02d771a63f2c6.png"><br><br></li><li>  After validation, click Finish. <br><br><img src="https://habrastorage.org/files/19f/7d6/6e0/19f7d66e0f284651a0be95e84f3b1b04.png"></li></ol><br><h3>  Directory synchronization </h3><br>  Copying will help if you need to duplicate a separate virtual machine in the remote infrastructure.  If there is a whole directory of such machines or templates, then it‚Äôs more convenient to use the directory synchronization function.  You designate a master directory, from where the changes will be automatically translated to the remote infrastructure directory. <br><br>  Configure directory synchronization between vCloud Director and vSphere infrastructure.  In this scenario, the directory in the vSphere infrastructure will be the main one. <br><br><ol><li>  On the vSphere-infrastructure side, we create a folder, the contents of which will be synchronized with the directory in the vCloud Director infrastructure.  Name the folder Library. <br><br><img src="https://habrastorage.org/files/0b2/f25/9eb/0b2f259ebbae446f98cb7b9924d457bc.png"><br><br><img src="https://habrastorage.org/files/fca/25d/e27/fca25de27887474f8908d7b08b544790.png"><br><br></li><li>  In the created Library folder, we add the virtual machine templates that we want to duplicate in the vCloud Director directory.  We put the test-vm virtual machine template there. <br><br><img src="https://habrastorage.org/files/e95/527/fc7/e95527fc7e57454d973573033e0db615.png"><br><br></li><li>  Go to the interface vCloud Connector.  Click Reload to display the created Library folder. <br><br><img src="https://habrastorage.org/files/83e/b14/ae8/83eb14ae81a74d1dbc3ed7b3f33573e2.png"><br><br></li><li>  In the left menu we find the Library folder. <br><br><img src="https://habrastorage.org/files/27b/c7e/8d1/27bc7e8d1dc34378a84b9da1af47b63d.png"><br><br></li><li>  Click on it with the right mouse button.  Select the option Publish to Content Library. <br><br><img src="https://habrastorage.org/files/1b3/d1d/d47/1b3d1dd4736b46d792dcdde085c7e451.png"><br><br></li><li>  We confirm the action. <br><br><img src="https://habrastorage.org/files/1ea/265/7ee/1ea2657ee3774377882fb6abf2f95d76.png"><br><br></li><li>  The Library folder appears in the Content Library section. <br><br><img src="https://habrastorage.org/files/957/286/779/957286779d1a4379a958d1acd5dc1516.png"><br><br></li><li>  Now we will create a new directory on the vCloud Director side.  Let's call it vCenter_sync.  This directory will be synchronized with the Library folder.  Instructions for creating directories in vCloud Director can be found <a href="https://habrahabr.ru/company/dataline/blog/262835/">here</a> . It <a href="https://habrahabr.ru/company/dataline/blog/262835/">is</a> important: if you select an existing directory, its contents will be destroyed during the first synchronization. <br><br><img src="https://habrastorage.org/files/401/6be/8bb/4016be8bb5c846da9041ec62a6e7b29c.png"><br><br></li><li>  We return to the vCloud Connector interface.  Go to the Content Library.  Select the Library directory on the side of the vSphere infrastructure and click on Subscribe. <br><br><img src="https://habrastorage.org/files/89a/413/3b0/89a4133b044544e2a9ac4b4f8d297a0b.png"><br><br></li><li>  In the window that appears, select the infrastructure and directory that will be synchronized with the Library directory. Activate if you want to delete the files in the Library directory and delete the file in the vCenter_sync directory. Click <b>Next</b> . <br><br><img src="https://habrastorage.org/files/857/9c1/3ee/8579c13ee930467a985a6634a123912d.png"><br><br></li><li>  Choose a virtual data center.  Click <b>Next</b> . <br><br><img src="https://habrastorage.org/files/0dd/370/312/0dd370312641452f808e2b44f2a8b7fd.png"><br><br></li><li>  We select the synchronization schedule. <br><br><img src="https://habrastorage.org/files/243/d99/10c/243d9910cd0243ee82a53bcb5df23062.png"><br><br></li><li>  Check all sync options and click <b>Finish</b> . <br><br><img src="https://habrastorage.org/files/387/889/d06/387889d06127470eac92331cc9786809.png"></li></ol><br>  Now we will try to synchronize our directory in vCloud Director with the directory in the vSphere-infrastructure. <br><br><ol><li>  Go to the Content Library.  Select the directory on the side of the vSphere-infrastructure (Library) and click on Sync Now.  We used manual synchronization to not wait for the specified three hours in the schedule. <br><br><img src="https://habrastorage.org/files/9c4/498/9e8/9c44989e88984727818392e56b61fcd4.png"><br><br></li><li>  We confirm synchronization.  Click Sync Now. <br><br><img src="https://habrastorage.org/files/f0a/690/647/f0a690647bb84959aa8f088a6ced9475.png"><br><br></li><li>  The virtual machine template test-vm from the Library folder will begin to be imported into the vCenter-sync directory on the vCloud Director side. <br><br><img src="https://habrastorage.org/files/43e/e93/fc0/43ee93fc004d4f588dd0a919b47e6d63.png"><br><br></li><li>  After successful synchronization, the test-vm virtual machine will appear in the vCenter-sync directory on the vCloud Director side. <br><br><img src="https://habrastorage.org/files/084/abd/13c/084abd13c7dc41088714d701383623e5.png"></li></ol><br>  You can do the opposite: configure the synchronization of the directory from the vSphere-infrastructure with the directory vCloud Director.  To do this, you need to repeat all the same actions, only as the main directory we will have a directory from the vCloud Director. <br><br><ol><li>  In the vCloud Connector interface, we find the required directory in the vCloud Director infrastructure in the left menu.  Click on the directory with the right mouse button and select the Publish to Content Library option. <br><br><img src="https://habrastorage.org/files/f86/dd0/775/f86dd07750434a88a41a9ec9e1ee8dd8.png"><br><br></li><li>  Create a new directory on the side of the vSphere-infrastructure (see above). </li><li>  We sign the vCloud Director directory on the directory from the vSphere-infrastructure.  To do this, select the directory and click on Subscribe. <br><br><img src="https://habrastorage.org/files/3f6/1d2/cfc/3f61d2cfc73c40268c2fb8a1bfb152fe.png"><br><br></li><li>  Next, set the sync settings, as we did before. </li></ol><br><br>  That's all they wanted to talk about working with the vCloud Connector.  In the <a href="https://habrahabr.ru/company/dataline/blog/308984/">next post we will</a> talk about how to organize backup and replication to the cloud provider site using a hybrid cloud. <br><br>  <strong>PS</strong> In the previous post, we wrote about the fact that vCloud Connector allows you to stretch VXLAN between two remote infrastructures.  This feature is available if the <a href="http://pubs.vmware.com/hybridcloud-27/index.jsp">vSphere Distributed Switch is installed no higher than version 5.1</a> in the vSphere infrastructure.  Our vSphere is already in version 6. <br><br>  <a href="https://habrahabr.ru/company/dataline/blog/306904/">We work with a hybrid cloud: VMware vCloud Connector, part 1</a> </div><p>Source: <a href="https://habr.com/ru/post/308418/">https://habr.com/ru/post/308418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308400/index.html">Step-by-step instructions for setting up LXD on Ubuntu 16.04</a></li>
<li><a href="../308402/index.html">Docker: flexible network without NAT for all occasions</a></li>
<li><a href="../308406/index.html">New course on Stepic platform: "Advanced C / C ++ Programming"</a></li>
<li><a href="../308410/index.html">JavaScript Performance, databases and searches for the "silver bullet": video TOP-5 reports of HolyJS 2016</a></li>
<li><a href="../308412/index.html">SAP F & R: Order Creation Process. Part 1</a></li>
<li><a href="../308420/index.html">Ways of integration with 1C</a></li>
<li><a href="../308422/index.html">Match ambiguous terms in GitLab, GitHub and Bitbucket</a></li>
<li><a href="../308424/index.html">‚ÄúMy friends lost sight of me for 3 months‚Äù or how people learn from us big data</a></li>
<li><a href="../308426/index.html">Increase conversion</a></li>
<li><a href="../308428/index.html">Music, Mathematica and Computational Universe: Automatic Music Creation Based on Cellular Automata</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
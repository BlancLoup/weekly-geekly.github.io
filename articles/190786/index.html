<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a Zoomquilt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I wanted to continue the series of posts about all sorts of interesting self-reference gizmos and I decided to write about the Zoomquilt genre. I did ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a Zoomquilt</h1><div class="post__text post__text-html js-mediator-article">  I wanted to continue the series of posts about all sorts of interesting self-reference gizmos and I decided to write about the Zoomquilt genre.  I did a search, I saw that one <a href="http://habrahabr.ru/post/83908/">post</a> on Habr√© already exists.  I thought and thought and decided that I would write a post anyway, but it will be technical, about the technology of creating Zoomquilt. <br><br>  For a start, about the genre itself.  It's easier to show than to tell. <br><br>  <a href="http://zoomquilt.org/">zoomquilt.org</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="">zoomquilt2.madmindworx.com/zoomquilt2.swf</a> <br><br>  <a href="http://www.syfy.com/tinman/oz/">www.syfy.com/tinman/oz</a> <br><br>  <a href="http://www.deviantart.com/art/kopfsalat-digital-edition-30069104">www.deviantart.com/art/kopfsalat-digital-edition-30069104</a> <br><br>  We are approaching the picture and instead of seeing pixels the size of a fist at some point, we see the following picture, we repeat the procedure many times (in fact, it looks like one quite smooth process and if the artists did a good job, then the ‚Äújoints‚Äù we we will not see at all) and eventually we arrive at the original picture.  In general, multikvayny, only for artists. <br>  And how is such a thing done?  Of course, you can draw it all frame by frame, moreover, some talented animators would have done it well.  But practically in all existing works of this genre it is indicated that these are fruits of collective creativity.  Usually there is a team of artists, a project coordinator and a programmer who actually assembles it all together and writes an interface. <br><br>  Next on the creation technology.  Under the cut a lot of pictures. <br><a name="habracut"></a><br>  I began to look for information on the technology of creation and I was lucky.  I came across the original images of which was the very first Zoomquilt.  Here is one of them: <br><br><img src="https://habrastorage.org/storage2/2e2/42b/ab8/2e242bab8f234add56f58a3b58c34dbb.jpg"><br><br>  Each ‚Äúsource‚Äù is an image of 1024 * 768 in the middle of which there is a black rectangle 512 * 384 in size. <br><br>  To begin with, let's deal with the build of zoomquilt from these ‚Äúsources‚Äù.  Let's turn the pictures into full-fledged frames of the future animation. <br>  It is clear that the black rectangle in the center of the image must be replaced by the next image in the list (the first image is as follows for the last image), reduced to the appropriate sizes, and before replacing, you must do the same procedure with the next image, etc.  It smells like infinite recursion without a stop condition, but fortunately, the images are discrete and it is impossible to draw anything smaller than a pixel.  The black rectangle in the center of the picture will decrease until it disappears completely and at this point the replacement can be stopped. <br><br><img src="https://habrastorage.org/storage2/4ce/b27/db5/4ceb27db59fa800776c6947daa6eb88b.gif"><br><br>  From the received frames, of course, you can collect animation <br><br><img src="https://habrastorage.org/storage2/d5b/c3e/cd3/d5bc3ecd352e16cd77a17dd40ac15e5c.gif"><br><br>  But it will be intermittent, because  only key frames are involved <br><br>  For each keyframe, you can create by approximating several intermediate ones. <br><br><img src="https://habrastorage.org/storage2/110/0cd/63a/1100cd63af0af039c23fc9280db09a9e.gif"><br><br>  The final version was too heavy to insert into the article, but it differs little from the original video. <br><br>  This is all wonderful, we can already assemble from the finished one, but someone must draw the ‚Äúsource code‚Äù, so that all the transitions are so smooth that it is not clear where one picture ends and another begins. <br>  And everything happens, as I understand it, like this: <br>  First, the project coordinator gives one or several artists the following image: <br><br><img src="https://habrastorage.org/storage2/ecf/2d5/a0a/ecf2d5a0a8ebd7d24c5366bf7cd65a7e.jpg"><br><br>  Artists should fill the entire green zone and should not touch the black one (they can touch it more precisely, but everything that they draw there will not be taken into account during assembly).  Then, when the artists finish the work, each of the paintings can be transferred to two artists.  One gets the picture in this form: <br><br><img src="https://habrastorage.org/storage2/430/2bd/a59/4302bda59d260fae138251631b6e8642.jpg"><br><br>  Another, in this: <br><br><img src="https://habrastorage.org/storage2/74f/112/1de/74f1121de400daa09d4755fa81bfa13d.jpg"><br><br>  Please note that the dimensions of the green rectangles are the same in both paintings, because the artist delivers the contents of this rectangle to the coordinator (well, or rather the coordinator cuts the necessary part from the sent picture). <br><br>  When a sufficient number of paintings are typed (minimum - 2, maximum is not limited), the coordinator will give out to several (probably the strongest in the project) artists (their number is equal to the number of artists who received empty paintings at the beginning of the work) paintings like this: <br><br><img src="https://habrastorage.org/storage2/e1c/b7f/a0b/e1cb7fa0bd67d03125956f05107b7640.jpg"><br><br>  This closes the circle, the uroboros quietly digests the tail, and we enthusiastically look at the next piece. <br><br>  Here is the code that I wrote for this article, I wrote all forty minutes on my knee, so if someone writes humanly, I will insert it here with pleasure and gratitude. <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> PIL <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Image <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> images2gif <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> writeGif X,Y = <span class="hljs-number"><span class="hljs-number">1024</span></span>,<span class="hljs-number"><span class="hljs-number">768</span></span> IMAGES_NUM = <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render_images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(raw_images)</span></span></span><span class="hljs-function">:</span></span> cur_index=<span class="hljs-number"><span class="hljs-number">0</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: count+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> count == <span class="hljs-number"><span class="hljs-number">100</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> prev_index = cur_index - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> prev_index == <span class="hljs-number"><span class="hljs-number">-1</span></span>: prev_index = len(raw_images)<span class="hljs-number"><span class="hljs-number">-1</span></span> cur_image = raw_images[cur_index] prev_image = raw_images[prev_index] prev_image.paste(cur_image.resize((X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>)),(X/<span class="hljs-number"><span class="hljs-number">4</span></span>,Y/<span class="hljs-number"><span class="hljs-number">4</span></span>)) cur_index = prev_index <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">before_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(im)</span></span></span><span class="hljs-function">:</span></span> im1=Image.new(<span class="hljs-string"><span class="hljs-string">"RGB"</span></span>,(X,Y),(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)) im1.paste(im.resize((X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>)),(X/<span class="hljs-number"><span class="hljs-number">4</span></span>,Y/<span class="hljs-number"><span class="hljs-number">4</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> im1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">after_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(im)</span></span></span><span class="hljs-function">:</span></span> im1 = im.copy() im1=im1.resize((X*<span class="hljs-number"><span class="hljs-number">2</span></span>,Y*<span class="hljs-number"><span class="hljs-number">2</span></span>)) im1.paste(new_image(),(X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> im1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">between_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(im1,im2)</span></span></span><span class="hljs-function">:</span></span> im = im1.copy() im=im.resize((X*<span class="hljs-number"><span class="hljs-number">2</span></span>,Y*<span class="hljs-number"><span class="hljs-number">2</span></span>)) im.paste(before_image(im2),(X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> im <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> im1=Image.new(<span class="hljs-string"><span class="hljs-string">"RGB"</span></span>,(X,Y),(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">255</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)) im1.paste(Image.new(<span class="hljs-string"><span class="hljs-string">"RGB"</span></span>,(X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>),(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)),(X/<span class="hljs-number"><span class="hljs-number">4</span></span>,Y/<span class="hljs-number"><span class="hljs-number">4</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> im1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">between_frames</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key_frame, number_of_frames)</span></span></span><span class="hljs-function">:</span></span> step_x = X/<span class="hljs-number"><span class="hljs-number">4</span></span>/number_of_frames step_y = Y/<span class="hljs-number"><span class="hljs-number">4</span></span>/number_of_frames l=[] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> xrange(<span class="hljs-number"><span class="hljs-number">1</span></span>,number_of_frames+<span class="hljs-number"><span class="hljs-number">1</span></span>): x=step_x*i y=step_y*i l.append(key_frame.crop((x,y,x+(X<span class="hljs-number"><span class="hljs-number">-2</span></span>*x),y+(Y<span class="hljs-number"><span class="hljs-number">-2</span></span>*y))).resize((X,Y))) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> l <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crop_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(im)</span></span></span><span class="hljs-function">:</span></span> im1=im.copy() x,y=im.size black=Image.new(<span class="hljs-string"><span class="hljs-string">"RGB"</span></span>,(X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>),(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)),(X/<span class="hljs-number"><span class="hljs-number">4</span></span>,Y/<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x==X: im1.paste(black) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> x==X*<span class="hljs-number"><span class="hljs-number">2</span></span>: im1=im1.crop((X/<span class="hljs-number"><span class="hljs-number">2</span></span>,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>,X/<span class="hljs-number"><span class="hljs-number">2</span></span>+X,Y/<span class="hljs-number"><span class="hljs-number">2</span></span>+Y)) im1.paste(black) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> im1</code> </pre> <br><br>  It has all the necessary functions to create your Zoomquilt.  If something is not clear, ask. <br>  If there are artists who wish, write in a personal, I can be a coordinator, we will make a habrazvilt :). <br><br>  If anyone knows more works in this genre, send links. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/190786/">https://habr.com/ru/post/190786/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190766/index.html">"Anti-malignant shustyak"</a></li>
<li><a href="../190768/index.html">ORFO released a beta spell checker for Libre Office for Linux</a></li>
<li><a href="../190772/index.html">HabrDesigner update</a></li>
<li><a href="../190778/index.html">Perl6 - More about blocks (Phasers)</a></li>
<li><a href="../190784/index.html">Runetology (206): Alexey Soloviev, Managing Partner of Prostor Capital</a></li>
<li><a href="../190788/index.html">New Brief: Samsung Announces 3D V-NAND Flash Memory SSDs</a></li>
<li><a href="../190790/index.html">Why Emacs?</a></li>
<li><a href="../190792/index.html">Jiayu G4 - the long-awaited Chinese flagship</a></li>
<li><a href="../190794/index.html">Apple patented 3D controls with touch screen gestures</a></li>
<li><a href="../190796/index.html">Zuckerberg launched Internet.org to connect the whole world to the Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
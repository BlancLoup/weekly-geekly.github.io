<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fingerprint recognition methods and implementation by means of Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the current semester, the subject ‚ÄúMethods and means of protecting computer information‚Äù has appeared in the schedule, part of which is laboratory ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fingerprint recognition methods and implementation by means of Python</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/7d/32/7d32e538dde080b6ba404ad2f779a240.png" align="left">  In the current semester, the subject ‚ÄúMethods and means of protecting computer information‚Äù has appeared in the schedule, part of which is laboratory work on biometrics, or rather, fingerprint recognition.  Also, recently, on Habr√© there was an article about <a href="http://habrahabr.ru/blogs/hardware/116458/">devices</a> intended for scanning.  I decided to write here about the recognition algorithms. <br><a name="habracut"></a><br><br>  As a student, there is a fairly standard task in front of me: fingerprint verification (comparison with the standard).  Since this laboratory, appeared only this year, the methodological manual on it yet.  But in view of the interestingness of the problem, I went to Google. <br><br>  Strangely enough, the <a href="http://www.bre.ru/security/21052.html">second part of the article</a> indicated in the topic about scanners turned out to be the most informative.  It describes, quite clearly, several algorithms: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1. Correlation comparison</b> <br>  This approach consists in pixel-by-pixel comparison of two images, for various shifts and rotation angles, on the basis of the results obtained, they make decisions on coincidence.  (in modern conditions it does not apply, due to the high labor intensity) <br><br>  <b>2. Comparisons of the pattern</b> <br>  Depending on the required accuracy, the image of the print is divided into areas.  Further, the pattern in each of the areas is described by a sinusoidal wave, with parameters: <br><ul><li>  initial phase shift </li><li>  wavelength </li><li>  direction of propagation </li></ul><br>  This class of algorithms does not require high resolution when scanning. <br><br>  <b>3. Comparison of individual points</b> <br>  Singular points are end points and branch points.  These points are highlighted on both images, and then by the method of their correlation comparison, the verdict on the correspondence of prints is made. <br>  In view of its relatively simple implementation and speed, these algorithms are more common. <br>  I chose this type of algorithm for implementation in the laboratory.  Therefore, we dwell on it in more detail. <br><br>  Since the article gave only a general idea, I continued to google.  The third line of issue was <a href="http://82.207.116.5:8080/itvsystems.com.ua/ru/doc/afis_presentation.ppt">this presentation.</a> <br>  It describes in some detail the steps to implement the chosen approach. <br><br>  So, a plan of action: <br><ul><li>  binarization of the resulting image </li><li>  image skeletonization </li><li>  point selection </li><li>  point comparison </li></ul><br>  It was decided to do the implementation in Python.  Accordingly, besides <a href="http://python.org/download/">Python</a> itself (I have version 2.7.1), I need a <a href="http://www.pythonware.com/products/pil/">PIL (Python Imaging Library)</a> to parse the image into pixels. <br><br>  <b>Step 1. Binarization</b> <br>  Then I did not invent, and did everything quite simply, in the forehead. <br><blockquote>  <font color="#ff7700">def</font> binary <font>(</font> img <font>)</font> : <br>  bImg = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> img. <font>size</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> : <br>  tmp = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> img. <font>size</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font>)</font> : <br>  t = img.  <font>getpixel</font> <font>(</font> <font>(</font> i, j <font>)</font> <font>)</font> <br>  p = t <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font color="#66cc66">*</font> <font color="#ff4500">0.3</font> + t <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font color="#66cc66">*</font> <font color="#ff4500">0.59</font> + t <font>[</font> <font color="#ff4500">2</font> <font>]</font> <font color="#66cc66">*</font> <font color="#ff4500">0.11</font> <br>  <font color="#ff7700">if</font> p <font color="#66cc66">&gt;</font> <font color="#ff4500">128</font> : <br>  p = <font color="#ff4500">1</font> <br>  <font color="#ff7700">else</font> : <br>  p = <font color="#ff4500">0</font> <br>  tmp.  <font>append</font> <font>(</font> p <font>)</font> <br>  bImg.  <font>append</font> <font>(</font> tmp <font>)</font> <br>  <font color="#ff7700">return</font> bImg </blockquote><br>  If you need a different result, you should look at the themes of the <a href="http://habrahabr.ru/blogs/image_processing/">‚ÄúImage Processing‚Äù</a> blog, there binarization is affected quite often. <br><br>  <b>Step 2. Skeletization</b> <br>  This step caused the greatest difficulty, since the algorithms google the hardest.  As a result, 4 algorithms were found: <br><ul><li>  Pattern skeletonization ( <a href="http://www.inf.tsu.ru/library/DiplomaWorks/CompScience/2006/burenin/diplom.pdf">set of patterns 1</a> , <a href="http://smiswww.iki.rssi.ru/files/publications/loupian/earth_res_1994_06.pdf">set 2</a> ) </li><li>  Wave method ( <a href="http://ocrai.narod.ru/vectory.html">more</a> ) </li><li>  Zong-Sun algorithm ( <a href="http://www.compvision.ru/wiki/doku.php%3Fid%3Dopencv:%25D1%2581%25D1%2582%25D0%25B0%25D1%2582%25D1%258C%25D0%25B8:%25D0%25B2%25D1%258B%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2581%25D0%25BA%25D0%25B5%25D0%25BB%25D0%25B5%25D1%2582%25D0%25B0_%25D0%25B8%25D0%25B7%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">more</a> ) </li><li>  <a href="http://www.mathnet.ru/php/person.phtml%3Fpersonid%3D8985%26option_lang%3D">Shchepin's</a> algorithm </li></ul><br>  A template method was chosen, and the first set, since unlike the second set of templates, it requires only one traversal of the image.  True, to reduce the level of inaccuracies, some of the templates from the second set are used. <br><br>  Patterns correspond to a 3 * 3 matrix, where the center element is the current pixel in the image crawl. <br><img src="https://habrastorage.org/storage/habraeffect/62/48/62483269f6859ed8fb19e1b28ec4836e.png" alt="image"><br>  <i>here gray indicates pixels whose color does not matter</i> <br><br>  The eight first templates are the main part.  Four at the bottom to eliminate the ‚Äúnoise‚Äù, at which these four can also be rotated 90, 180 and 270 degrees, and are sought by the second detour of the image. <br><br>  If we stumble on a template, the central pixel is painted white (does not belong to the skeleton).  The crawl continues while the deletion remains. <br><br>  The code for this action is divided into several functions: <br><blockquote>  <font color="#ff7700">def</font> tmpDelete <font>(</font> img <font>)</font> : <font color="#808080"># call skeletonization procedure, lists of lists as input (after binarization)</font> <br>  w = <font color="#008000">len</font> <font>(</font> img <font>)</font> <br>  h = <font color="#008000">len</font> <font>(</font> img <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <br>  count = <font color="#ff4500">1</font> <br>  <font color="#ff7700">while</font> count <font color="#66cc66">!</font>  = <font color="#ff4500">0</font> : <font color="#808080"># repeat at least one pixel was deleted</font> <br>  count = delete <font>(</font> img, w, h <font>)</font> <br>  <font color="#ff7700">if</font> count: <br>  delete2 <font>(</font> img, w, h <font>)</font> <br><br><br>  <font color="#ff7700">def</font> delete <font>(</font> img, w, h <font>)</font> : <font color="#808080"># delete a pixel on the main set, return count of deleted</font> <br>  count = <font color="#ff4500">0</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> <font color="#ff4500">1</font> , h- <font color="#ff4500">1</font> <font>)</font> : <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> <font color="#ff4500">1</font> , w- <font color="#ff4500">1</font> <font>)</font> : <br>  <font color="#ff7700">if</font> img <font>[</font> j <font>]</font> <font>[</font> i <font>]</font> == <font color="#ff4500">0</font> : <br>  <font color="#ff7700">if</font> deletable <font>(</font> img, j, i <font>)</font> : <br>  img <font>[</font> j <font>]</font> <font>[</font> i <font>]</font> = <font color="#ff4500">1</font> <br>  count + = <font color="#ff4500">1</font> <br>  <font color="#ff7700">return</font> count <br><br>  <font color="#ff7700">def</font> delete2 <font>(</font> img, w, h <font>)</font> : <font color="#808080"># deleting a pixel by noise set</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> <font color="#ff4500">1</font> , h- <font color="#ff4500">1</font> <font>)</font> : <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> <font color="#ff4500">1</font> , w- <font color="#ff4500">1</font> <font>)</font> : <br>  <font color="#ff7700">if</font> img <font>[</font> j <font>]</font> <font>[</font> i <font>]</font> == <font color="#ff4500">0</font> : <br>  <font color="#ff7700">if</font> deletable2 <font>(</font> img, j, i <font>)</font> : <br>  img <font>[</font> j <font>]</font> <font>[</font> i <font>]</font> = <font color="#ff4500">1</font> <br><br><br>  <font color="#ff7700">def</font> fringe <font>(</font> a <font>)</font> : <font color="#808080"># definition of accessories 3 * 3 to noise</font> <br>  t = <font>[</font> <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br><br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br><br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> <font>]</font> , <br><br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> , <br>  <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> t: <br>  <font color="#ff7700">if</font> a == i: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br><br>  <font color="#ff7700">def</font> check <font>(</font> a <font>)</font> : <font color="#808080"># determination of the belonging of 3 * 3 to the main templates</font> <br>  t123457 = <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> <font>]</font> <br>  t013457 = <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> <font>]</font> <br>  t134567 = <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> <br>  t134578 = <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> <br>  t0123457 = <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> <font>]</font> <br>  t0134567 = <font>[</font> <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> <font>]</font> <br>  t1345678 = <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> , <font color="#ff4500">1</font> <font>]</font> <br>  t1234578 = <font>[</font> <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> , <font color="#ff4500">0</font> , <font color="#ff4500">1</font> <font>]</font> <br><br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">2</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t123457: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">0</font> <font>]</font> , a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t013457: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">6</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t134567: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> , a <font>[</font> <font color="#ff4500">8</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t134578: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">0</font> <font>]</font> , a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">2</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t0123457: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">6</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> , a <font>[</font> <font color="#ff4500">8</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t1345678: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">0</font> <font>]</font> , a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">6</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t0134567: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br>  t = <font>[</font> a <font>[</font> <font color="#ff4500">1</font> <font>]</font> , a <font>[</font> <font color="#ff4500">2</font> <font>]</font> , a <font>[</font> <font color="#ff4500">3</font> <font>]</font> , a <font>[</font> <font color="#ff4500">4</font> <font>]</font> , a <font>[</font> <font color="#ff4500">5</font> <font>]</font> , a <font>[</font> <font color="#ff4500">7</font> <font>]</font> , a <font>[</font> <font color="#ff4500">8</font> <font>]</font> <font>]</font> <br>  <font color="#ff7700">if</font> t == t1234578: <br>  <font color="#ff7700">return</font> <font color="#008000">true</font> <br><br>  <font color="#ff7700">def</font> deletable <font>(</font> img, x, y <font>)</font> : <font color="#808080"># receiving 3 * 3, pass for verification for DOS.</font> <br>  a = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> y- <font color="#ff4500">1</font> , y + <font color="#ff4500">2</font> <font>)</font> : <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> x- <font color="#ff4500">1</font> , x + <font color="#ff4500">2</font> <font>)</font> : <br>  a.  <font>append</font> <font>(</font> img <font>[</font> j <font>]</font> <font>[</font> i <font>]</font> <font>)</font> <br>  <font color="#ff7700">return</font> check <font>(</font> a <font>)</font> <br><br>  <font color="#ff7700">def</font> deletable2 <font>(</font> img, x, y <font>)</font> : <font color="#808080"># receiving 3 * 3, pass to test for noise</font> <br>  a = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> y- <font color="#ff4500">1</font> , y + <font color="#ff4500">2</font> <font>)</font> : <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> x- <font color="#ff4500">1</font> , x + <font color="#ff4500">2</font> <font>)</font> : <br>  a.  <font>append</font> <font>(</font> img <font>[</font> j <font>]</font> <font>[</font> i <font>]</font> <font>)</font> <br>  <font color="#ff7700">return</font> fringe <font>(</font> a <font>)</font> </blockquote><br><br>  <b>Step 3. Selection of special points</b> <br>  It's all trivial.  If in a neighborhood of 8 points, there is only one black, then this is the end point.  If there are 2 of them, then this is just a point of the line.  Three is a branch point. <br><blockquote>  <font color="#ff7700">def</font> checkThisPoint <font>(</font> img, x, y <font>)</font> : <font color="#808080"># count the number of blacks in the neighborhood</font> <br>  c = <font color="#ff4500">0</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> x- <font color="#ff4500">1</font> , x + <font color="#ff4500">2</font> <font>)</font> : <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> y- <font color="#ff4500">1</font> , y + <font color="#ff4500">2</font> <font>)</font> : <br>  <font color="#ff7700">if</font> img <font>[</font> i <font>]</font> <font>[</font> j <font>]</font> == <font color="#ff4500">0</font> : <br>  c + = <font color="#ff4500">1</font> <br>  <font color="#ff7700">return</font> c- <font color="#ff4500">1</font> <br><br>  <font color="#ff7700">def</font> findCheckPoint <font>(</font> img <font>)</font> : <font color="#808080"># forming lists of branch points and end points</font> <br>  x = <font color="#008000">len</font> <font>(</font> img <font>)</font> <br>  y = <font color="#008000">len</font> <font>(</font> img <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font>)</font> <br>  branchPoint = <font>[</font> <font>]</font> <br>  endPoint = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> x <font>)</font> : <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> <font color="#008000">range</font> <font>(</font> y <font>)</font> : <br>  <font color="#ff7700">if</font> img <font>[</font> i <font>]</font> <font>[</font> j <font>]</font> == <font color="#ff4500">0</font> : <br>  t = checkThisPoint <font>(</font> img, i, j <font>)</font> <br>  <font color="#ff7700">if</font> t == <font color="#ff4500">1</font> : <br>  endPoint.  <font>append</font> <font>(</font> <font>(</font> i, j <font>)</font> <font>)</font> <br>  <font color="#ff7700">if</font> t == <font color="#ff4500">3</font> : <br>  branchPoint.  <font>append</font> <font>(</font> <font>(</font> i, j <font>)</font> <font>)</font> <br>  <font color="#ff7700">return</font> <font>(</font> branchPoint, endPoint <font>)</font> </blockquote><br>  The only problem was not completely eliminating noise, which led to the appearance of processes that were recognized as special points.  In order not to take them into account, the removal of close-standing (10 * 10) branch points and end points was made. <br><blockquote>  <font color="#ff7700">def</font> __removeDouble <font>(</font> x, y <font>)</font> : <font color="#808080"># returns a list of elements that do not have the same in another list</font> <br>  z = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> x: <br>  c = <font color="#008000">true</font> <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> y: <br>  <font color="#ff7700">if</font> i == j: <br>  c = <font color="#008000">False</font> <br>  <font color="#ff7700">if</font> c: <br>  z.  <font>append</font> <font>(</font> i <font>)</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> y: <br>  c = <font color="#008000">true</font> <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> x: <br>  <font color="#ff7700">if</font> i == j: <br>  c = <font color="#008000">False</font> <br>  <font color="#ff7700">if</font> c: <br>  z.  <font>append</font> <font>(</font> i <font>)</font> <br>  <font color="#ff7700">return</font> z <br><br>  <font color="#ff7700">def</font> delNoisePoint <font>(</font> r <font>)</font> : <font color="#808080"># inlet tuple (branch, finite)</font> <br>  tmp = <font>[</font> <font>]</font> <br>  tmp2 = <font>[</font> <font>]</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> r <font>[</font> <font color="#ff4500">1</font> <font>]</font> : <br>  x = <font color="#008000">range</font> <font>(</font> i <font>[</font> <font color="#ff4500">0</font> <font>]</font> - <font color="#ff4500">5</font> , i <font>[</font> <font color="#ff4500">0</font> <font>]</font> + <font color="#ff4500">5</font> <font>)</font> <br>  y = <font color="#008000">range</font> <font>(</font> i <font>[</font> <font color="#ff4500">1</font> <font>]</font> - <font color="#ff4500">5</font> , i <font>[</font> <font color="#ff4500">1</font> <font>]</font> + <font color="#ff4500">5</font> <font>)</font> <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> r <font>[</font> <font color="#ff4500">0</font> <font>]</font> : <br>  <font color="#ff7700">if</font> j <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font color="#ff7700">in</font> x <font color="#ff7700">and</font> j <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font color="#ff7700">in</font> y: <br>  tmp.  <font>append</font> <font>(</font> i <font>)</font> <br>  tmp2.  <font>append</font> <font>(</font> j <font>)</font> <br>  <font color="#ff7700">return</font> <font>(</font> __removeDouble <font>(</font> r <font>[</font> <font color="#ff4500">0</font> <font>]</font> , tmp2 <font>)</font> , __ removeDouble <font>(</font> r <font>[</font> <font color="#ff4500">1</font> <font>]</font> , tmp <font>)</font> <font>)</font> </blockquote><br><br>  <b>Step 4. Comparing points</b> <br>  A simple search for a point that falls in a neighborhood of 30 * 30 and is a point of the same type. <br><blockquote>  <font color="#ff7700">def</font> matchingPoint <font>(</font> r, v <font>)</font> : <font color="#808080"># input: a tuple of reference points and a tuple of the test;</font>  <font color="#808080">output (by coincidence, in total)</font> <br>  <font color="#008000">all</font> = <font color="#ff4500">0</font> <br>  match = <font color="#ff4500">0</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> v <font>[</font> <font color="#ff4500">0</font> <font>]</font> : <br>  x = <font color="#008000">range</font> <font>(</font> i <font>[</font> <font color="#ff4500">0</font> <font>]</font> - <font color="#ff4500">15</font> , i <font>[</font> <font color="#ff4500">0</font> <font>]</font> + <font color="#ff4500">15</font> <font>)</font> <br>  y = <font color="#008000">range</font> <font>(</font> i <font>[</font> <font color="#ff4500">1</font> <font>]</font> - <font color="#ff4500">15</font> , i <font>[</font> <font color="#ff4500">1</font> <font>]</font> + <font color="#ff4500">15</font> <font>)</font> <br>  <font color="#008000">all</font> + = <font color="#ff4500">1</font> <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> r <font>[</font> <font color="#ff4500">0</font> <font>]</font> : <br>  <font color="#ff7700">if</font> j <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font color="#ff7700">in</font> x <font color="#ff7700">and</font> j <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font color="#ff7700">in</font> y: <br>  match + = <font color="#ff4500">1</font> <br>  <font color="#ff7700">break</font> <br>  <font color="#ff7700">for</font> i <font color="#ff7700">in</font> v <font>[</font> <font color="#ff4500">1</font> <font>]</font> : <br>  x = <font color="#008000">range</font> <font>(</font> i <font>[</font> <font color="#ff4500">0</font> <font>]</font> - <font color="#ff4500">15</font> , i <font>[</font> <font color="#ff4500">0</font> <font>]</font> + <font color="#ff4500">15</font> <font>)</font> <br>  y = <font color="#008000">range</font> <font>(</font> i <font>[</font> <font color="#ff4500">1</font> <font>]</font> - <font color="#ff4500">15</font> , i <font>[</font> <font color="#ff4500">1</font> <font>]</font> + <font color="#ff4500">15</font> <font>)</font> <br>  <font color="#008000">all</font> + = <font color="#ff4500">1</font> <br>  <font color="#ff7700">for</font> j <font color="#ff7700">in</font> r <font>[</font> <font color="#ff4500">1</font> <font>]</font> : <br>  <font color="#ff7700">if</font> j <font>[</font> <font color="#ff4500">0</font> <font>]</font> <font color="#ff7700">in</font> x <font color="#ff7700">and</font> j <font>[</font> <font color="#ff4500">1</font> <font>]</font> <font color="#ff7700">in</font> y: <br>  match + = <font color="#ff4500">1</font> <br>  <font color="#ff7700">break</font> <br><br>  <font color="#ff7700">return</font> <font>(</font> match, <font color="#008000">all</font> <font>)</font> </blockquote><br><br>  <b>Additionally:</b> <br>  All code is valid for images of the same size (although it will work on different ones). <br><br>  <b>Findings:</b> <br>  <b>1.</b> This implementation is simple and clumsy.  It is possible to supplement it with several checks, for example, to look at the angles of occurrence of lines at particular points.  When checking, fold back the pairs already found, for those cases when many points of the same type fall into the neighborhood. <br>  <b>2.</b> The implementation in Python is rather slow: the speed of execution on my machine is completely unsuitable for items with a lot of human traffic.  It is possible that using NumPy would improve performance, and I am not the best implementer. <br>  <b>3.</b> Fully take the code <a href="">here</a> .  Tested on this <a href="">kit</a> . <br><br>  <b>PS</b> I would like comments on the code, as I am rather weak in the python.  Well, the opinions of those who are seriously engaged in fingerprinting. </div><p>Source: <a href="https://habr.com/ru/post/116603/">https://habr.com/ru/post/116603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116596/index.html">BugDNS - April Fools Internet</a></li>
<li><a href="../116599/index.html">Author Chrome Adblock released for beta testing gadget glasses that block the usual advertising on the streets</a></li>
<li><a href="../116600/index.html">Bromine Behavior Innovations</a></li>
<li><a href="../116601/index.html">Fix performance drop when copying / uploading files to Ubuntu</a></li>
<li><a href="../116602/index.html">Simple OCR for .NET</a></li>
<li><a href="../116604/index.html">Streaming video a hundred years ago</a></li>
<li><a href="../116605/index.html">Correction of the spirit of Internet traffic</a></li>
<li><a href="../116606/index.html">Attention, filmophiles</a></li>
<li><a href="../116607/index.html">MarkHtml</a></li>
<li><a href="../116608/index.html">In the project OpenStreetMap there is a serious decline, the dissolution is inevitable</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Build target platform. Equinox for developer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When I started using OSGi the issue, in fact, development and debugging rose by itself. Debugging a standalone application on a platform that was buil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Build target platform. Equinox for developer</h1><div class="post__text post__text-html js-mediator-article">  When I started using OSGi the issue, in fact, development and debugging rose by itself.  Debugging a standalone application on a platform that was built into Eclipse was irrational, too many bundles and it contains too many dependencies - this is on the one hand.  On the other hand, I didn‚Äôt want the platform to expand with each update of Eclipse and overgrow with new dependencies.  In short, I only needed Jetty, OSGi console, EclipseLink and RAP / RWT from the platform. <br><br>  I wanted to completely control the composition of the runtime environment and debug the project in it.  And for this it was necessary to select the OSGi platform from Eclipse and set it back on it.  How to do it - I will tell in this article. <br><a name="habracut"></a><br>  In general, I want to immediately protect myself from recommendations to use Eclipse Virgo or Apache Felix.  Or glassfish.  Yes, they are big, powerful, cool.  And heavy, complex, bulky.  One of the features of Equinox is that it really allows you to integrate yourself with minimal effort into the project.  I do not need to have a heavy application server on the hosting, where I want to deploy this project - I just copied the archive, deployed, launched the script and now, it already works! <br><br>  The story will be quite detailed, so something you can skip.  ;) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Step 1. Download Equinox</b> <br><br>  You can take it on the official website: <a href="http://download.eclipse.org/equinox/">download.eclipse.org/equinox</a> .  We swing, we develop anywhere, under Windows I had it C: / Equinox, under Linux - / home / user / Equnox.  It is important that we can write there after deployment, so that follow the rights. <br><br>  The latest version at the time of writing of article 3.8.2 weighs 28Mb.  There are 238 bundles in it, including the source code (about half).  We don‚Äôt have to include them all, but you shouldn‚Äôt remove them from the delivery - it will suddenly come in handy.  ;) For example, I haven‚Äôt needed the P2 repository yet, but for the implementation of auto-update of the system it will be most welcome (this is 64 bundles). <br><br>  Now we need to run all this stuff from under Eclipse, and let it manage the composition of the bundles and the platform configuration. <br><br>  <b>Step 2. Customize Eclipse</b> <br><br>  The implication is that you have an adequate build, either Eclipse for RAP / RCP developers or Eclipse for Java EE developers.  Even if it is not, then almost any can be brought to an adequate state by installing the necessary bundles through Eclipse itself.  Or just download the assembly and unpack it into another directory. <br><br>  By the way, I advise you to take Kepler milestone 7 which has recently come out, even though it is a developer build, but it is stable enough to work with it, unlike milestone 6. <br><br>  To begin, go to Eclipse in the menu "Window" / "Options" (I have it Russified for convenience).  And then, as shown in the pictures, we create and load our new configuration.  Everything is intuitive and clear to hell, but this is only half the battle. <br><br><img src="https://habrastorage.org/storage2/a30/320/f56/a30320f5687678d7c80de75c085d9a35.png"><br><br><img src="https://habrastorage.org/storage2/e4a/dad/fa0/e4adadfa0fe6992ca80e2b3043035575.png"><br><br><img src="https://habrastorage.org/storage2/ebb/910/b8d/ebb910b8dc734ab7d44f197f93537e5b.png"><br><br><img src="https://habrastorage.org/storage2/c4f/2e7/242/c4f2e72422423f5e8d49e25969de0e88.png"><br><br><img src="https://habrastorage.org/storage2/9ef/014/eee/9ef014eee9897bbb49f67d4a71c3fecd.png"><br><br><img src="https://habrastorage.org/storage2/dd8/089/4ac/dd80894ac3870e6c0e723c8a2927d82e.png"><br><br>  The second half of the case is to configure the launch configuration directly for your project.  What is the most funny - one platform can run in different configurations and this gives some room for maneuver.  Each configuration enables or disables some of the system components.  It is absolutely not necessary to create several platforms, unless you have several completely different projects with different sets of required bundles. <br><br>  <b>Step 3. Configuring launch configuration</b> <br><br>  From the image below, I think it is quite clear where to poke and what exactly to create: ‚ÄúOSGi Equinox environment‚Äù.  There is one important point, you need to specify where to store the configuration from the simpleconfigurator, which Eclipse loves so much.  I have indicated that it is stored with the medium in its catalog.  It's easier then to transfer.  If this is not done, the config will be stored in the workspace of Eclipse, and this is very, very inconvenient. <br><br><img src="https://habrastorage.org/storage2/a26/372/f1e/a26372f1e7b5e9b3b550369d705e24db.png"><br><br><img src="https://habrastorage.org/storage2/06e/d6d/5fb/06ed6d5fbb8cb8aafd0b4bf2a76f102d.png"><br><br>  In principle, this is all, but you may still have to check for dependencies so that everything is in place.  The base environment should start like this.  In the Eclipse console, we will see the osgi&gt; cherished prompt, answer ‚Äúss‚Äù and get a list of bundles running in the system. <br><br>  At this stage, any difficulties should arise.  But lastly, what I killed 20 hours of life;), how to run this farm from the command line and make it work correctly.  You need to run it the same way Eclipse does.  And how does he do it? <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh exec /usr/jdk/bin/java \ -Dorg.osgi.service.http.secure.enabled=true \ -Dorg.eclipse.equinox.http.jetty.https.enabled=true \ -Dorg.osgi.service.http.port=8080 \ -Dorg.eclipse.equinox.http.jetty.https.port=8443 \ -Dorg.osgi.service.http.port.secure=8443 \ -Dorg.eclipse.equinox.http.jetty.ssl.keystore=/home/pavlov/Equinox/ssl/keystore \ -Dorg.eclipse.equinox.http.jetty.ssl.password=xxxx \ -Dorg.eclipse.equinox.http.jetty.ssl.keypassword=xxxx \ -Dosgi.install.area=file:/home/pavlov/Equinox/ \ -Dosgi.syspath=/home/pavlov/Equinox/plugins -Declipse.ignoreApp=true \ -Dosgi.noShutdown=true -jar \ /home/pavlov/Equinox/plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar \ -configuration file:/home/pavlov/Equinox/configuration/ \ -dev file:/home/pavlov/Equinox/configuration/dev.properties \ -os unix -ws unix -arch x86_64 -nl ru_RU -console -consoleLog</span></span></code> </pre> <br><br>  Here is the magic script that does what Eclipse does, now our platform is really independent and can be deployed on any server where there is Java.  Only the way you need to register your own. <br><br>  Ps.  A nice bonus is that HTTPs is immediately turned on in Embedded Jetty.  Find how to do it, as it turned out, not easy. </div><p>Source: <a href="https://habr.com/ru/post/179497/">https://habr.com/ru/post/179497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179483/index.html">Laser weapons destroy a rocket at a distance of 1.5 km (video)</a></li>
<li><a href="../179487/index.html">Protection of Android applications from hacking</a></li>
<li><a href="../179489/index.html">On the other side of a like: our Facebook people</a></li>
<li><a href="../179493/index.html">Money received using the Diablo 3 bug will go to charity</a></li>
<li><a href="../179495/index.html">Three professional deformation IT specialists</a></li>
<li><a href="../179499/index.html">How stable is your job and what's in that backpack?</a></li>
<li><a href="../179505/index.html">DevConf 2013 Prepared for Special Day - Active Voting for Reports</a></li>
<li><a href="../179507/index.html">A new version of Yandex Browser has been released: with synchronization and Board API</a></li>
<li><a href="../179523/index.html">DBMS Cach√©. Woodworking - SQL access to multidimensional data structures</a></li>
<li><a href="../179525/index.html">Solving the border-radius + overflow: hidden problem with canvas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Validation of forms in React</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you have ever used the AngularJS framework, then you know how easily forms are validated in it. However, in React, the situation is somewhat worse....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Validation of forms in React</h1><div class="post__text post__text-html js-mediator-article">  If you have ever used the AngularJS framework, then you know how easily forms are validated in it.  However, in React, the situation is somewhat worse.  It is understandable, because it is just a library.  But thanks to the community from this library you can make a powerful tool for creating full-fledged SPA-applications.  At the moment, created a huge variety of components that can meet most of the needs of developers on React.  In this article, I would like to describe the approach that I used to validate forms using the <a href="https://github.com/christianalfoni/formsy-react">Formsy-react component</a> . <br><a name="habracut"></a><br>  To begin with, there are quite a few components for form validation (32 is represented <a href="https://react.rocks/tag/Validation">here</a> ).  I tried some of them and decided to stop at Formsy, since it didn‚Äôt look too sophisticated and yet quite flexible.  The principle of operation I will show the example of the login form.  In order not to bother with styles, we will use <a href="https://react-bootstrap.github.io/">react-bootstrap.</a> <br><br>  In the test application, login is possible in 3 ways: by login, email or phone number.  Accordingly, for each type of login you need your own specific validations.  For simplicity of the example, I will show only the component with the login form, you can find a link to the project repository at the end of the article. <br><br>  So, we have a component Login, which is responsible for our form.  It has 3 different login methods, respectively, it would be convenient to display them using tabs: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Source code tabs with input fields</b> <div class="spoiler_text"><pre><code class="javascript hljs">&lt;Tab.Pane eventKey=<span class="hljs-string"><span class="hljs-string">"login"</span></span>&gt; &lt;Formsy.Form onValidSubmit={this.handleLogin} onValid={this.enableButton} onInvalid={this.disableButton}&gt; &lt;FormGroup&gt; &lt;ControlLabel&gt;Login&lt;/ControlLabel&gt; &lt;TextInput name="login" type="text" validations={{minLength: 5}} validationErrors={{minLength: 'Enter at least 5 sumbols'}} required/&gt; &lt;/FormGroup&gt; &lt;FormGroup&gt; &lt;ControlLabel&gt;Password&lt;/ControlLabel&gt; &lt;TextInput name="loginPassword" type="password" validations={{strongPassword: validations.strongPassword}} validationErrors={{strongPassword: "Enter a strong password! At least 6 symbols"}} required/&gt; &lt;/FormGroup&gt; &lt;FormGroup&gt; &lt;Button type="submit" bsStyle="primary" disabled={!this.state.isButtonEnabled} block&gt;Login&lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Formsy.Form&gt; &lt;/Tab.Pane&gt; &lt;Tab.Pane eventKey="email"&gt; &lt;Formsy.Form onValidSubmit={this.handleLogin} onValid={this.enableButton} onInvalid={this.disableButton}&gt; &lt;FormGroup&gt; &lt;ControlLabel&gt;Email&lt;/ControlLabel&gt; &lt;TextInput name="email" type="text" validations={{isGoogleEmail: validations.isGoogleEmail}} validationErrors={{isGoogleEmail: 'Only Gmail boxes are accepted'}} required/&gt; &lt;/FormGroup&gt; &lt;FormGroup&gt; &lt;ControlLabel&gt;Password&lt;/ControlLabel&gt; &lt;TextInput name="loginPassword" type="password" validations={{strongPassword: validations.strongPassword}} validationErrors={{strongPassword: "Enter a strong password! At least 6 symbols"}} required/&gt; &lt;/FormGroup&gt; &lt;FormGroup&gt; &lt;Button type="submit" bsStyle="primary" disabled={!this.state.isButtonEnabled} block&gt;Login&lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Formsy.Form&gt; &lt;/Tab.Pane&gt; &lt;Tab.Pane eventKey="phone"&gt; &lt;Formsy.Form onValidSubmit={this.handleLogin} onValid={this.enableButton} onInvalid={this.disableButton}&gt; &lt;FormGroup&gt; &lt;ControlLabel&gt;Phone&lt;/ControlLabel&gt; &lt;TextInput name="phone" type="tel" validations={{isPhoneNumber: validations.isPhoneNumber, containsPlusPrefix: validations.containsPlusPrefix}} validationErrors={{isPhoneNumber: 'You should enter a valid phone number', containsPlusPrefix: 'Enter your number without +'}} required/&gt; &lt;/FormGroup&gt; &lt;FormGroup&gt; &lt;ControlLabel&gt;Password&lt;/ControlLabel&gt; &lt;TextInput name="phonePassword" type="password" validations={{strongPassword: validations.strongPassword}} validationErrors={{strongPassword: "Your password should contain at least 1 number, 1 lowercase letter, 1 uppercase letter"}} required/&gt; &lt;/FormGroup&gt; &lt;FormGroup&gt; &lt;Button type="submit" bsStyle="primary" disabled={!this.state.isButtonEnabled} block&gt;Login&lt;/Button&gt; &lt;/FormGroup&gt; &lt;/Formsy.Form&gt; &lt;/Tab.Pane&gt;</code> </pre> <br></div></div><br>  Each tab is a form, inside which there are 2 fields and a button to send the form. <br><br>  Let's start in order, with the Formsy.Form component.  We are interested in 3 properties (props): onValidSubmit, onValid, onInvalid. <br><br>  The onValidSubmit property is responsible for submitting the form.  If all the data is entered correctly and the user presses the login button, the function this.handleLogin is called, which sends the data to the server.  This function should have one parameter that will contain the object.  This object stores the names of the fields and their values. <br><br>  The onValid and onInvalid properties are responsible for the state of the submit button.  They should be passed a function that will enable or disable the button depending on the correctness of the entered data. <br><br>  Next, we have fields that need to be checked for validity of the entered data.  For the normal functioning of this component, we need to create our own component for data entry (TextInput).  On the Formsy website, you can find a <a href="">ready-made component</a> that includes everything you need and requires a minimum of changes before use.  In our component, you must pass all the standard properties for the input tag, such as type, etc., as well as several special properties that will help with the validation of the component. <br><br>  The first such property is name.  When the user clicks the send data button, you can easily get the desired input by name, as well as its value. <br><br>  You also need to designate the validations property  The object is expected in this property.  The Formsy component already contains some validations, for example, minLength, which I used in the login field.  It is not difficult to guess that with the help of this check we can set the minimum number of characters entered.  There are many other built-in validations, for example, to verify the correctness of an email address, telephone number and others.  However, this component would not be so good if you could not create your own validation functions.  And it is possible! <br><br>  For example, in the email input field I announced my own verification that a person enters an email address registered on gmail.com.  The verification function is as follows: <br><br><div class="spoiler">  <b class="spoiler_title">Source code verification function</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isGoogleEmail</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">values, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> value !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; value.indexOf(<span class="hljs-string"><span class="hljs-string">'gmail.com'</span></span>) === <span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre><br></div></div><br>  The function takes 2 parameters: all form fields and the current field that is being tested.  The first parameter contains an array of all fields and their values ‚Äã‚Äãthat are present in the form.  The second parameter value contains the contents of the current field.  Inside the function it is necessary to check whether value exists, as well as to make any other checks.  If the function returns false, then the check failed and the user will not be able to submit the form.  In the opposite case, everything is OK, this field has been tested and contains no errors. <br><br>  The second property we need to pass to the input field is validationErrors.  The beauty of this property is that for each error it will produce its own message.  Thus, it is possible to hang different checks on one field (for example, the number of characters entered, the presence of at least one special character, etc.) and for each of these checks give its own error (and not write in one message that the field should contain at least 8 characters, 2 numbers, 3 letters, etc.).  This approach is used in the phone entry field, where a ‚Äúsuper reliable check‚Äù first occurs that the entered text is indeed a phone, and then it is checked whether the beginning of the '+'. <br><br>  Thus, this component helps a lot with form validation, which is so lacking in React.  You can see the full code of this example in <a href="https://github.com/theWaR13/react-formsy-example">this repository</a> , and also do not forget to look into the Formsy repository, there are a lot of interesting things there.  I hope that the article will help you when creating your application. <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/306512/">https://habr.com/ru/post/306512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306502/index.html">Content marketing: how to write clear and minimally annoying email text</a></li>
<li><a href="../306504/index.html">Open source initiative Docker4Drupal.org</a></li>
<li><a href="../306506/index.html">30 questions for which you must have an answer during the interview</a></li>
<li><a href="../306508/index.html">According to Rambler.iOS # 7</a></li>
<li><a href="../306510/index.html">Page segmentation - overview</a></li>
<li><a href="../306514/index.html">Unite Europe 2016: Review of the report ‚ÄúOverthrowing the MonoBehavior your tyranny in a glorious ScriptableObject revolution‚Äù</a></li>
<li><a href="../306516/index.html">Customer focus vs customer focus</a></li>
<li><a href="../306518/index.html">Windows and SSH. Continuation</a></li>
<li><a href="../306520/index.html">Destroy SSD in 7 seconds: tactical protection of information from unauthorized access</a></li>
<li><a href="../306522/index.html">Pokemon Go: let's disassemble a viral PR campaign promoting this application without hysteria. ver 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
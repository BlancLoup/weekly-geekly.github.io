<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PLC - what is it?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear residents of Habr! 
 After reading the post about programming a Siemens PLC of the S7 series , I climbed into the search for Habr, and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PLC - what is it?</h1><div class="post__text post__text-html js-mediator-article">  Good day, dear residents of Habr! <br>  After reading the <a href="http://habrahabr.ru/blogs/controllers/139180/">post about programming a Siemens PLC of the S7 series</a> , I climbed into the search for Habr, and was very surprised that the topic of industrial automation in general, and PLC programming in particular, was covered very, very poorly.  I will take the liberty to share my experience in this field by describing the basic principles of PLC programming, in particular, from <a href="http://www.beckhoff.com/">Beckhoff</a> . <br><a name="habracut"></a><br><br><h5>  Introduction </h5><br>  I am engaged in building automation.  It so happened that basically we build our systems on the basis of the Beckhoff PLC.  This choice was made primarily because these controllers are free-programmable in the full sense of these words.  What does it mean?  Take the TAC Xenta controller, for example, and try on it to implement the exchange with an external device via RS232 using your own protocol, at the level ‚Äúsent byte - received byte‚Äù.  It does not work, these controllers do not know how - use only those protocols that the developer laid down in them.  And Beckhoff can.  But before you go into such a jungle, let's look at the development environment?  In which, in fact, language, we will write? <br><br><h5>  IEC 61131-3 standard </h5><br>  Industrial PLCs are programmed in the languages ‚Äã‚Äãof the <a href="http://ru.wikipedia.org/wiki/IEC_61131-3">IEC 61131-3</a> standard.  All these languages ‚Äã‚Äãare 5, some manufacturers add their own.  Languages ‚Äã‚Äãare completely different from each other, and, watching colleagues, I can assume that the choice of a particular language is primarily related to what a person did before he came to this industry. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  IL, instruction list, list of instructions.  Looks like an assembler.  I did not see anyone who would use it, but I suspect that old-school coders who have punched memory cards will appreciate it. </li><li>  LD, ladder diagram.  Visual language, for those who were engaged in the development of relay automation schemes. </li><li>  ST, structured text.  Most reminiscent of "classic" programming languages, something similar to Pascal.  This is why it is appreciated by those who, prior to the PLC, were engaged in programming in other languages ‚Äã‚Äãand platforms, in particular - by me. </li><li>  FBD, functional block diagram.  Such a block diagram, we love first of all technologists who have decided to go into programming, for their clarity. </li><li>  SFC, sequential function chart.  Graphic language, I will not say anything else.  Never seen to be used. </li></ol><br><br>  Among not all supported languages, CFC (continuous flow chart) is worth noting, Beckhoff supports it.  This further development of the FBD language, one of the most significant differences, in my opinion, is support for explicit feedback in the circuits.  Why do you need it?  For example, such a short pulse generator at CFC will work, but not at FBD. <br><img src="https://habrastorage.org/storage2/fcf/3bc/de1/fcf3bcde1dcce8f3560c5fa6ef472ac8.gif"><br>  The TON block is a standard block with a delayed on timer.  Operation logic: output Q becomes TRUE, when the IN input is TRUE for at least PT time. <br>  Perhaps the most popular development environment for PLC is <a href="http://www.3s-software.com/index.shtml%3Fruss-homepage">CoDeSys</a> .  Many manufacturers take it as a basis, and either make a library for it to work with their PLC, or finish the environment for themselves. <br><br><h5>  How does the PLC work? </h5><br>  The PLC program operates cyclically.  The cycle time can be from units of milliseconds to units of seconds, depending on the tasks assigned to this PLC.  Most PLCs allow you to set the cycle time for the program developer, but in some models this is not possible.  Many PLCs, in particular Beckhoff, allow you to create more than one cyclically executed task in one program and set the priority for these tasks.  What gives us this opportunity? <br>  Imagine the situation: the PLC controls the ventilation unit and the control panel is connected to it via RS232.  The temperature in the rooms does not change quickly, and it simply does not make sense to launch the ventilation control algorithm more than once every 50‚Äì100 ms.  But the operator panel polls the controller continuously, and the PLC response delay of more than 10 ms is already expressed in the ‚Äúslowing down‚Äù of the user interface, and with a delay of 20 ms, the COM-port buffer will overflow.  The presence of several tasks allows us to solve this problem beautifully: let the ‚Äúfast‚Äù task work with the COM port, and be called every 2 ms, and the ‚Äúslow‚Äù implements the logic of the ventilation, and it is called every 50 ms.  Everything works well, the operator panel does not slow down, the user is satisfied. <br><br><h5>  And what of these glands inside? </h5><br>  It's all very, very dependent on the manufacturer.  Someone makes his embedded platform on a RISC processor (for example, the domestic Aries) - this approach is very popular.  Beckhoff went a different way - Windows CE 5.0 is installed on their PLCs (and if you update the firmware from the official site, then 6.0), or Windows XP Embedded, and the PLC task works as a service.  Quite an interesting counter-argument for those who like to talk about the instability of Windows. <br>  But this is the ‚Äúhead‚Äù of the controller, and in fact it still needs inputs and outputs to communicate with the outside world.  There are two approaches: <br><ol><li>  You can do ‚Äúall in one box‚Äù - a head, a certain set of inputs / outputs, several configuration options - here we have more inputs, here are smaller, the head is more powerful, here is weaker.  So do, for example, <a href="http://www.carel.com/carelcom/web/eng/catalogo/gamma_dett.jsp%3Fid_gamma%3D1%26id_tipologiaProdotti%3D1">Carel</a> , and many others.  On a small project, such an approach justifies itself in something. </li><li>  But personally it seems to me that a different approach gives greater flexibility.  The head is separate, and the type-setting "tail" of I / O modules is connected to it via the bus.  We put those modules that we need, and in the quantities that we need.  So do Beckhoff and Siemens, for example. </li></ol><br><img src="http://www.carel.com/carelcom/web/@extsrc/@common/@catalogo/@immagini/@foto/ph_pCO3-.jpg" alt="image"><br>  This is what the ‚Äúall in one box‚Äù approach looks like.  Photo: Carel pCO3. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d3b/bcd/118/d3bbcd11828d47a385bf3eaefcd9d63e.jpg" alt="image"><br>  But another option is the Beckhoff head of the CX9000 series (on the left of the photo) with a set of I / O modules. <br><br>  In addition, there is still a certain tire on the head, which allows to unite the PLC into a network, and often also to change its program through the same network.  What kind of network it will be depends on the PLC.  It may be unfamiliar to those who have not come across industrial networks <a href="http://ru.wikipedia.org/wiki/RS-485">EIA-485</a> , <a href="http://ru.wikipedia.org/wiki/Profibus">Profibus</a> , <a href="http://ru.wikipedia.org/wiki/Controller_Area_Network">CAN</a> , and maybe quite familiar Ethernet.  It is through this network, called fieldbus, that the PLC is connected to the upper level - to the SCADA system, for example.  In the photo above, you can see 2 8P8C connectors on Beckhoff‚Äôs head - this is Ethernet, and Carel has two 6P4C connectors at the top left (not so good, really) - they did RS-485.  This interface, unfortunately, does not have a generally accepted connector. <br><br><h5>  So nevertheless, how to write programs for it? </h5><br>  In general, this topic is not an article, but a whole book.  But I will tell what I saw on personal experience, and let it be a fly in the ointment. <br>  For professional programmers, mastering PLC in many ways will seem like degradation.  OOP?  We do not have them, there are only structures, enumerations, and a kind of class, which is called a ‚Äúfunctional block‚Äù.  What is Private, Public, etc., too, can be forgotten immediately - not useful.  From anywhere in your program, you can access any other place. <br>  Dynamic memory allocation?  We do not have them at all.  Not sure how much data you will be sent to?  Select a buffer with a margin, and forget about this memory - it will not be able to free it.  Either show speed wonders and process data on the fly, if you manage to keep within the specified cycle time. <br>  Exceptions?  What did you ... I saw one miracle, which tightly hung in the construction of the form: <br><pre><code class="cs hljs">foo, bar: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>; baz: real; foo := <span class="hljs-number"><span class="hljs-number">2000</span></span>; bar := <span class="hljs-number"><span class="hljs-number">2000</span></span>; baz := INT_TO_REAL (foo * bar);</code> </pre> <br>  It is clear that the overflow does not fit foo * bar into 16 bits, but why hang something?  Yes, even so that nothing but a reset on food does not help. <br>  Development environment?  Not all CoDeSys, many people want to originate and write their own thread.  One of these samopisnyh environments crashed with a runtime error while trying to write the number 86400 to a 16-bit INT.  And you say exception handling on the PLC.  It and in a development environment not always normally can make. <br><br>  BUT!  But for lovers of the thin line that separates the iron from the software, software in common parlance - this is a very interesting branch of IT, it is true. <br><br>  Hope this short review will be helpful.  If this topic is interesting to the community, I will tell you more about the PLC. </div><p>Source: <a href="https://habr.com/ru/post/139425/">https://habr.com/ru/post/139425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139420/index.html">Remote installation of applications using Kaspersky Security Center</a></li>
<li><a href="../139421/index.html">Spring Data on the example of JPA</a></li>
<li><a href="../139422/index.html">Yandex Mobile Camp at the conference # MBLT12</a></li>
<li><a href="../139423/index.html">Using a bunch of Sinatra, mongodb and carrierwave, we write a simple photo gallery</a></li>
<li><a href="../139424/index.html">Old Dell Latitude XPi CD</a></li>
<li><a href="../139426/index.html">CodeFest. New season. March 31 ‚Äî April 1, Novosibirsk</a></li>
<li><a href="../139427/index.html">Google Chrome Extension: We are printing articles with habrahabr</a></li>
<li><a href="../139428/index.html">Implementation of the RGB-algorithm for changing the image contrast</a></li>
<li><a href="../139429/index.html">2D-> 3D in Augmented reality</a></li>
<li><a href="../139432/index.html">AIDL (Android Interface Definition Language) and Inter-Process Communication (IPC)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile JUnit exists</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that our office wrote on J2ME a lot and for a long time, but never used unit-tests. And I, having read several incendiary articles on H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobile JUnit exists</h1><div class="post__text post__text-html js-mediator-article">  It so happened that our office wrote on J2ME a lot and for a long time, but never used unit-tests.  And I, having read several incendiary articles on Habr√©, imbued with the bright ideas of unit-tests and wanted to at least try.  My colleagues shrugged their shoulders and said that JUnit would not work on J2ME anyway, and in general, how can we run tests away?  On the mobile phone?  As a result, I did it, although I had to tinker. <br><a name="habracut"></a><br><h4>  Choosing a framework </h4><br>  The selection was small.  Google told me that there are such options: <br><ul><li>  <a href="http://j2meunit.sourceforge.net/">J2meunit</a> </li><li>  <a href="http://snapshot.pyx4me.com/pyx4me-cldcunit/">CLDCUnit</a> </li><li>  <a href="https://opensource.motorola.com/sf/projects/gatling">Motorola gatling</a> </li><li>  <a href="http://developer.sonyericsson.com/site/global/newsandevents/latestnews/newsjuly06/p_mobile_juint1.0_javame_cldc.jsp">SonyEricsson Mobile JUnit</a> </li><li>  UPD: <a href="http://sourceforge.net/projects/jmunit/">JMUnit</a> (thanks to <a href="https://geektimes.ru/users/habracut/" class="user_link">habracut</a> ) </li></ul><br>  I, I repent, chose, without looking, option SE.  For reasons in the spirit of "well, JUnit from the SE should probably work with SE emulators without any problems."  Perhaps it was the most unfortunate option ... 8) <br><br><h4>  Installation </h4><br>  The downloaded archive contained libraries, sample code, and an example of ant ant. <br><br>  I will quote one of the tasks: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">target</font> <font color="#ff0000">name</font> <font color="#0000ff">="run-with-coverage"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">java</font> <br> <font color="#ff0000">classname</font> <font color="#0000ff">="com.sonyericsson.sdkme.junit.OnDeviceTest"</font> <br> <font color="#ff0000">fork</font> <font color="#0000ff">="true"</font> <font color="#ff0000">failonerror</font> <font color="#0000ff">="true"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">classpath</font> <font color="#ff0000">refid</font> <font color="#0000ff">="test-classpath"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--javac:${javac}"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--project-dir:${project-dir}"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--device:SonyEricsson_K750_Emu"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--compile:true"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--compile-midlet:true"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--coverage:L"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--coverage-report:${project-dir}/coverage.html"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--name:Mobile JUnit Sample Project"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">java</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">echo</font> <font color="#ff0000">message</font> <font color="#0000ff">="A coverage HTML report has been written to ${project-dir}/coverage.html"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">target</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  It is seen that a certain class is called with different parameters.  Nowhere, by the way, is not documented.  Kopipast results did not give.  The problem was in the bootclasspath.  Thoughtful reading of the decompiled code showed that the library eats parameters of the form - &lt;name&gt;: &lt;value&gt;; &lt;name&gt;: &lt;value&gt; ... In this case, it is unrealistic to write in the bootclasspath a list of libs, the path to each of which begins with C :.  And, by the way, it takes spaces as separators along with a semicolon.  So, no ‚ÄúProgram Files‚Äù.  All this was decided by unpacking the necessary libs into one directory and indicating the path to it in the bootclasspath. <br>  After all the corrections, the java call looks like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">java</font> <font color="#ff0000">classname</font> <font color="#0000ff">="com.sonyericsson.sdkme.junit.OnDeviceTest"</font> <font color="#ff0000">fork</font> <font color="#0000ff">="true"</font> <font color="#ff0000">failonerror</font> <font color="#0000ff">="true"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">classpath</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">pathelement</font> <font color="#ff0000">path</font> <font color="#0000ff">="${env.MJUNIT_HOME}/junit.jar"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">pathelement</font> <font color="#ff0000">path</font> <font color="#0000ff">="${env.MJUNIT_HOME}/mobile-ju-1.0.jar"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">pathelement</font> <font color="#ff0000">path</font> <font color="#0000ff">="${java.home}/lib"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">classpath</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--project-dir:${basedir}"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--device:SonyEricsson_K750_Emu"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--compile:false"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--compile-midlet:false"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--coverage:L"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--runmode:${tests.runmode}"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--coverage-report:${basedir}/coverage.html"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--name:Stiter Client"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">=""--wtk:${env.WTK_HOME}""</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--print-config:on"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--midlet-under-test:${jarpath}"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">arg</font> <font color="#ff0000">value</font> <font color="#0000ff">="--bootclasspath:"${toString:tests.bcp}""</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">java</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Using </h4><br>  After the described actions, the test midlet was assembled and launched.  But tests fell with errors.  The treatment was reduced to the fact that it is not necessary to create an instance of your midlet in the tests.  That is, so wrong: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">void</font> setUp() throws Throwable { <br> super.setUp(); <br> <br> midlet = <font color="#0000ff">new</font> OurMIDlet(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  And rightly like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">void</font> setUp(MIDlet miDlet) throws Throwable { <br> super.setUp(miDlet); <br> <br> testMidlet = miDlet; <br> OurApplication.setMidletInstance(testMidlet); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  At the same time, testMidlet is an instance of the test midlet, and not the working one. <br><br>  That's all.  I hope someone will be useful. <br>  Do you use any alternatives to the SE library?  What do you recommend? <br></div><p>Source: <a href="https://habr.com/ru/post/51519/">https://habr.com/ru/post/51519/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51513/index.html">Communication problems between jabber.ru and google talk?</a></li>
<li><a href="../51514/index.html">How to make iTunes work in Windows XP x64.</a></li>
<li><a href="../51515/index.html">ESET released Conficker Worm Removal Tool</a></li>
<li><a href="../51517/index.html">Erlang in risovas'ke, part 1 - language overview</a></li>
<li><a href="../51518/index.html">Use Exception (updated version).</a></li>
<li><a href="../51521/index.html">Can a car think?</a></li>
<li><a href="../51526/index.html">Nokia 5800 Firmware Update - v.20.0.012</a></li>
<li><a href="../51529/index.html">Service for creating CSS Layout</a></li>
<li><a href="../51530/index.html">An alternative way to deal with viruses on flash drives.</a></li>
<li><a href="../51535/index.html">Who Habr helped with his personal life?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OTRS for pumping in the style of REG.RU</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probably, there is no need to tell what OTRS is . Many companies use it as a means of managing services and to support their customers. The history of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OTRS for pumping in the style of REG.RU</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/f33/00e/001/f3300e001b0e4496a7116626df9ed431.jpg" alt="image"><br><br>  Probably, there is no need to tell what <a href="https://www.otrs.com/">OTRS is</a> .  Many companies use it as a means of managing services and to support their customers.  The history of this project dates back to 2001.  And this has its pluses and minuses.  Very powerful tool with a huge amount of functionality for almost any needs of small and medium businesses.  And for free.  Paid support is only for those who do not have enough basic functionality or need help in setting up. <br><br>  About this tool, which is actively used in our company since 2008, and will be discussed.  Or rather, about what happened to him in the hands of the impatient Perl programmers of REG.RU. <br><a name="habracut"></a><br><h2>  What do we use OTRS for? </h2><br>  Yes, for the same as everyone else: <br><ul><li>  receiving applications and letters (tickets) from customers; </li><li>  problem solving based on tickets received; </li><li>  transferring information about bugs and tasks for programmers, if the ticket indicated an error on our website; </li><li>  collection of statistics on the number of calls and other metrics, allowing to analyze the quality of our technical support and much more. </li></ul><br>  OTRS is the main tool of all our customer services.  Therefore, its stable, fast and uninterrupted work is important for us. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Some statistics and interesting facts. </h2><br><img src="https://habrastorage.org/files/60f/d38/6b0/60fd386b02aa4d3ab2b53801b29ab75c.jpg" alt="image" align="left"><br>  Those days have long passed when we recognized most of our customers by voice in the handset.  Yes, there was such a time at the dawn of formation, when, having heard a familiar voice on the phone, you say: ‚ÄúHello, Ivan Ivanovich!  I am glad to hear you ‚Äù, but not the usual phrase, and in parallel you are already opening the card of the necessary client, ready to listen to a new request or description of the problem.  Now, in many respects among <a href="http://statonline.ru/registrar%3Ftld%3Dru">registrars</a> and <a href="http://statonline.ru/metrics/hosting%3Ftld%3Dru">hosting providers</a> in Russia, we are already the first (well, I will not consider Hetzner a Russian company, forgive), and therefore the number of requests per day has long exceeded the volumes that an ordinary customer service employee can keep in his head. <br><br><h3>  For 2014‚Äì2015 </h3><br><ul><li>  Total created tickets (including spam and system notifications): 2,287,701. </li><li>  Ticket, which at least once answered: 769 344. </li><li>  Total answers on tickets: 1 008 714. </li><li>  Average responses to clients per day: 1,867. </li><li>  The average number of answers to solve a problem by ticket: 1.3. </li><li>  Average processed tickets per day: 1,424. </li><li>  On average for the month of new tickets: 42 741. </li></ul><br><h3>  Number of active tickets by year </h3><br>  <i>Active tickets are considered to be created by real customers - not spam and non-service automatic notifications.</i> <br><ul><li>  <b>2014</b> - 799 476 </li><li>  <b>2013</b> - 386 604 </li><li>  <b>2012</b> - 118 704 </li><li>  <b>2011</b> - 13,886 </li><li>  <b>until 2011</b> - 1,602 </li></ul><br><h3>  Presently </h3><br><ul><li>  On average, an employee accounts for 8-10 responses per hour. </li><li>  The minimum response time for a new ticket is 1 minute. </li><li>  The average time to solve a problem on a ticket is 5-7 minutes. </li><li>  The maximum response time for a ticket (2015) is 24 hours. </li></ul><br><h3>  Charts for August 2015 by the maximum reaction time </h3><br><h4>  Hosting Technical Support </h4><br><img src="https://habrastorage.org/files/3d1/a06/cca/3d1a06ccab7d4040bac46267ba013e76.png"><br><br><h4>  Technical support by domain </h4><br><img src="https://habrastorage.org/files/d52/eae/309/d52eae3098504eafa73fd3e3af477572.png"><br><br><h4>  Cloud technical support </h4><br><img src="https://habrastorage.org/files/ec2/b97/d77/ec2b97d77324465f9d8025ddaad11dd0.png"><br><br><h4>  Billing technical support </h4><br><img src="https://habrastorage.org/files/b6a/3c7/d73/b6a3c7d731b4486c96f8470158548b8d.png"><br><br>  To some, these volumes will seem large, to others - scanty.  But we do not support World of Warcraft ;-) <br><br>  Now let's see what allowed us to achieve these results, how we improved and modernized OTRS. <br><br>  Let's start with the fact that at the beginning of last year we abandoned backward compatibility with the main OTRS branch, supported by developers.  There were many reasons for this.  OTRS has mechanisms for expanding the functionality, but using only the tools provided, we were constrained in capabilities.  In addition, we will not hide the fact that earlier (a few years ago) all the improvements were made live in the code, and often programmers who did not complete the OTRS project fully performed them, but simply asked them to fix something urgently in an adjacent project.  They were given a little time to sort out the issue and quickly fix or implement some feature.  Naturally, with this approach, compatibility and the overall quality of the OTRS code suffered. <br><br>  Two years ago, an attempt was made to migrate then to the new OTRS 3.3, while retaining all of their own work.  The operation was difficult, lasted for several months, and as a result, its result was not worth the effort we spent on it.  Bitter experience, but with its advantages.  Thanks to this experience, we dug in almost every OTRS file, understood how many mechanisms work, outlined several dozen places that should be refactored or rewritten completely.  Not without its frankly deplorable constructions (not ours), which horrified not only newcomers to Perl and web programming, but also experienced leading programmers.  Although all this is quite expected, because a powerful product, which has been living for 14 years, could not completely get rid of some parts in the code that have lasted from the very beginning of the product. <br><br>  By this time, we finally understood a few things: <br><ul><li>  we have a team that is ready to improve and develop OTRS all its working time (2-3 people); </li><li>  we have an understanding of how things like cache, search, roles, etc should work in the context of this tool; </li><li>  need integration with other resources of REG.RU to simplify and automate the work of client services; </li><li>  It is easier for us to manually pull out useful chips from the main branch of OTRS and implement them without maintaining full compatibility. </li></ul><br><br><h2>  Large recycling </h2><br><h3>  Search </h3><br><img src="https://habrastorage.org/files/fac/314/3fb/fac3143fb0e54c53996321d8caa6536f.jpg" align="right">  The biggest problem for a long time was, of course, a ticket search.  Do you remember the numbers from the previous chapter?  Now imagine that an employee enters the word "reg.ru" (or any other domain) in the full-text search field to search the entire database without specifying a date range.  Quite by the way, the usual task for the employee.  And what does OTRS based on mysql do?  She makes a request of the following form: <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> ticket, article <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%reg.ru%'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%reg.ru%'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> title <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%reg.ru%'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OR</span></span> <span class="hljs-keyword"><span class="hljs-keyword">body</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIKE</span></span> <span class="hljs-string"><span class="hljs-string">'%reg.ru%'</span></span> ‚Äî         LIKE.</code> </pre> <br><br>  Needless to say, our database hung from such requests and, even if the request was executed successfully, how long it took.  And if there were several such ‚Äúseekers‚Äù at the same time?  To put it mildly, it was hard.  During working hours, mytop was almost permanently turned on and tracking of long requests that we manually killed. <br><br>  Therefore, the first and important refinement was the search through Sphinx.  We wrote it for a long time, but the result was excellent.  The result was a module on CPAN <a href="https://metacpan.org/pod/OTRS::SphinxSearch">OTRS :: SphinxSearch</a> , which will help the same enthusiasts to deploy a search through Sphinx.  The author of the module, I am sure, will surely answer your questions or respond to the found bugs. <br><br>  The base index Sphinx, as you know, is stored in RAM.  On our tickets with all messages, except the SPAM and Raw queues, it took about 4.5 gigabytes of RAM.  Enough low price for instant search. <br><br>  In addition, at first Sphinx worked with delta indices created by the crown: five-minute, fifteen-minute, hourly, six-hour, and finally daily.  ‚ÄúDifficult and confusing,‚Äù you will say, and you will be absolutely right.  In addition, it had several unpleasant consequences.  First, from the moment the message appeared to the possibility of searching it, it took up to 5 minutes.  Secondly, during the moments of indexing, the CPU was heavily loaded, which is why the whole OTRS stably slowed down, which affected the performance of all the support staff. <br>  At some point we returned to what we were leaving: Sphinx reindexing requests were hung up by mysql.  It needed to be urgently corrected. <br><br>  The second reincarnation of the search was already on RealTime indexes.  It worked much faster, did not load the CPU, only added one sql query to the Sphinx interface in the form of INSERT or REPLACE, depending on the situation. <br><br>  This search works for us so far.  There were a few minor changes in the code and only.  We look forward to <a href="http://habrahabr.ru/post/257789/">Sphinx 3.0</a> to take advantage of all its cool features. <br><br><h3>  Motivation "Solve everything" </h3><br><img src="https://habrastorage.org/files/b81/6eb/f30/b816ebf303a24afb894ee8dab6692da5.jpg" align="left">  The second problem that worried not only employees, but also customers - this is the time of response to the ticket.  Especially if the question was complicated. <br><br>  Previously, the quality assessment of a technical support employee was based on the number of tickets processed by him per month.  This had its drawbacks, because if there are 10 tickets in the queue, 2 of them are difficult, and 8 are easy, then the easiest and often not the oldest tickets went to work.  In statistics, the employee adored 8 completed tickets.  In the meantime, he answered them, new light tickets appeared and he continued to solve only the most simple questions.  While complex tickets could hang for hours and even days, until the stern manager came and personally poked at this, suggestive so much fear, a ticket. <br><br>  In order for the employee to have the motivation to take the topmost ticket in the queue (the top one is the oldest), despite its complexity, a points system was developed.  Honestly, I don‚Äôt really imagine how it is used in motivation, these are all tricks of the heads of client services.  But from a programmer point of view, the following was done: <br><ol><li>  Each ticket is assigned a certain number of points, depending on the position in the queue.  All miscalculations of ticket points occur in real time for each employee individually, based on roles.  The older the ticket, the higher it is in the queue, the more points it receives. </li><li>  For each ticket taken to the employee points are credited to his account.  If the employee responded to the ticket, these points are assigned to him.  If the employee unblocks the ticket and does not answer the client, then a penalty is charged, several times higher than the number of points.  Thus, you can even go into the minus. </li><li>  At the end of the month, according to the statistics collected, managers determine who worked well and who did not.  And, probably, they even give cash bonuses or write fines. </li></ol><br><br>  This task is, in fact, very extensive and involves many small innovations. <br><br>  For example, a so-called ticket pool was added.  Coming to the workplace, the employee enters this pool and immediately (or almost immediately) a ticket opens for him, to which he must respond.  As soon as the employee sent a response to the ticket, a new ticket from his line immediately opens.  Here is a pipeline that came up for tickets. <br><br><div class="spoiler">  <b class="spoiler_title">Funny story about how we came to the pool</b> <div class="spoiler_text">  Immediately after entering the points for tickets, there was some confusion.  This is understandable: no one knew why they are needed and what they influence.  I will tell you a secret: the leaders themselves didn‚Äôt really know why they had come up with these points and how we would use them.  What to say about ordinary technical support staff who were not told everything until the last moment. <br><br>  Having seen some incomprehensible ‚Äúpoints‚Äù in the interface, the employees began to give in to a completely natural panic, and then they came to the aid of ingenuity: ‚ÄúIf points are assigned for each ticket, then the more points the employee has, the better.‚Äù  I also want to note that the points system was introduced in the summer period, when for natural reasons the burden on technical support is reduced (clients are on vacation and they are not in touch with sites and domains).  In the light of innovation, all employees opened a second wind, and they with triple strength began to solve tasks on tickets and take new ones.  An event unprecedented for us happened: the queue of hosting tickets, in which at least one hundred tickets were always spinning, was empty in two days!  Were all in shock, including customers.  The speed of response to appeals has increased significantly. <br><br>  Now, the staff has a new problem: no tickets, but points are needed.  What to do?  At first, everyone frantically pressed F5 while waiting for a new ticket to pick it up as soon as possible.  After all, you remember about the points, right?  They are still credited for a successful response, and the benefit from the points is still unknown. <br><br>  Special technical support staff members decided to simplify their lives and not engage in monkey labor: "Why should I press F5 myself when I can make the script automatically do it for me."  Began to appear the first bots, written in different languages ‚Äã‚Äãand working on different principles.  The team was healthy (and sometimes not very much :) competition.  Almost no one shared his bots and each wrote his own. <br>  Bots amazed with their variety and functionality.  There were plug-ins for Chrome and Firefox, there were scripts running in the background on the employee‚Äôs computer, there were even demons running constantly on the employee‚Äôs own VPS.  A variety of languages ‚Äã‚Äãalso pleased: Javascript, PHP, Python. <br><br>  Now there is a problem with bots - competition.  After all, in one thread you don‚Äôt grab a lot, you need to parallelize the process.  So, our newly-minted programmers in the person of technical support staff studied and applied multithreaded processes and asynchronous requests in practice.  Not bad, by the way, practice. <br><br>  All this lasted for some time, but something clearly needed to be done with the situation.  5-6 bots, each from 10 to 100 streams, hammer on our poor OTRS server.  I still don‚Äôt understand how he didn‚Äôt fall, but groaned, pushed, but processed such a number of requests. <br><br>  As a result, the leaders banned the use of such bots, and clarified the situation with the points.  But this story will be stored for a long time in our memory.  It was a fun time. </div></div><br>  In other words, this is not a queue of tickets, but a queue of employees.  Where everyone gets exactly one ticket and gets up at the end of the queue in anticipation of a new portion.  At the same time, he does not see the queue with tickets, but receives only what the soulless machine has given him, without understanding how difficult or easy the ticket is. <br><br>  Approximately in this way we achieved equality and all tickets are executed in strict sequence.  I hope our customers noticed this, because for hosting questions the maximum response time is 8 hours. <br><br><h3>  OTRS own API </h3><br><img src="https://habrastorage.org/files/bd1/6b2/e65/bd16b2e65deb414bb6b20e295315e0aa.jpg" align="right">  In the process of developing the tool, we really wanted to reduce the time for receiving applications.  The standard way to get tickets in OTRS is mail.  OTS can receive mail in different ways.  Can walk on the crown to the mail server and pick up mail from there.  Maybe, again by crown, read mail from the sendmail directory and generate tickets.  In any case, the time between mail checks is at least one minute.  And by and large two or more.  The standard mail processing script is rather heavy, and on large letters it can spend tens of seconds on parsing and writing to the database. <br><br>  And I wanted something light, modern, youth.  Therefore, we wrote our API, which accepts JSON, and also adequately processes applications with file attachments. <br><br>  And then an experienced OTRS programmer will catch me: why write your API, because they have rpc.pl?  And it will be in something right.  The API does exist, but we did not use it and did it consciously.  One of the reasons is that rpc.pl works in the xml-rpc format, and I said that I want something modern and light.  And in fact, its development took only a few days.  In addition, our solution allowed us not only to receive information about tickets, but also to create new ones, conduct correspondence, open / close tickets and much more.  Now we use this API to create tickets from the REG.RU website, and much less time is spent on creating applications. <br><br>  And what if OTRS is unavailable for some reason?  Network problems or prevention?  Customer tickets will not be created and you will lose all the lines written with such love? <br><br>  For this we have a solution in the form of a queue of tasks based on Redis.  You can read more about the queue in the <a href="http://www.slideshare.net/ivsokolov/fast-queue-perl-redis">presentation by Ivan Sokolov about FastQueue</a> .  In the case of a non-200th response from the OTRS server, we create a task in the queue and add all the contents of the letter and even a bit more to it, as well as attachment files in binary form.  Within a few hours there are attempts to send information about the new ticket.  Even if there were short-term failures in the servers, in a few hours everything is getting better and new tasks are coming to the employees. <br>  But some of the staff and this is not enough.  In the heads wander ideas how to transfer task packages through the API. <br><br><h3>  Tags </h3><br><img src="https://habrastorage.org/files/19f/752/806/19f75280622c483f9e835e504966fb66.jpg" align="left">  Another fairly global addition is the tags.  They help customer service managers collect metrics and analyze incoming message traffic. <br><br>  Tags were originally based on dynamic fields (standard OTRS mechanism).  But in the end we did not load the already not fast dynamic field tables and created our own mechanism with separate tables for storing tags.  Also tags available search and filtering.  There are several types of tags that are attached to a ticket. <br><br>  First, it is the source tag, i.e., where the application came from.  There can be several sources: from the authorized part of the REG.RU site (the user is logged in to REG.RU), from the unauthorized part, via mail and several more rare sources.  It helps to determine the popularity of a particular method. <br><br>  Secondly, tags of participants.  Each time an employee answers a ticket, a member tag is attached to the ticket.  It also helps to control how we work on the requests of our customers. <br><br>  Third, there are notification tags.  They allow you to quickly filter by emails that were sent automatically.  Basically, such notifications include warnings about exceeding the limits on hosting or increased loads. <br><br><h3>  Email Confirmation </h3><br><img src="https://habrastorage.org/files/7ff/bf7/a17/7ffbf7a17bc54031b687a7ea9c1832ab.jpg" align="right">  One of the first improvements in OTRS was the mechanism for confirming your email.  It is always used if the client writes from an unauthorized part of the site.  Obviously, this is created so that we can be sure that the application from the client is really created by him, and not by the attacker who recognized the client's mailbox. <br><br>  This mechanism has repeatedly saved us from daring requests "Reinstall my VPS" from visitors who are trying to impersonate one of our clients. <br><br>  Now this is a modified tool embedded in the client part. <br><br><h3>  Its statistics with metrics and filters </h3><br><img src="https://habrastorage.org/files/dbe/52f/6a8/dbe52f6a8d7940bf94d844a8d15ff53b.jpg" align="left">  Serious technical support requires the use of serious tools.  In order to be able to keep track of each answer and make sure that it was high-quality and complete, as well as in order to monitor the average rates of response, load on employees, we developed our own statistics on tickets in OTRS. <br><br>  Again, experts will say that there are quite a few reports inside OTRS and you can create new ones.  But we have abandoned this embedded tool for many reasons. <br><br>  Built-in reports work for a long time, use all the same LIKE when sampling, there is no possibility to display them all on one page.  When changing the filtering parameters, you need to wait for the system to rebuild everything anew. <br><br>  And I wanted a light instrument with filters, tables, graphs, histagrams, pies and other buns.  And so that they are filled in rialtime and do not load the main base.  And to have access control to them.  Yes, a lot of things like.  I did not want to take all this beauty on the shoulders of OTRS.  Recall, moreover, that OTRS only with version 4.0 (which came out quite recently) had an adequate Template :: Toolkit template.  The previous one was samopisny and did not even support cycles (ok, supported, but they had to be written in the controller beforehand). <br><br>  Thus, another project was born to collect and display various metrics.  Among them are collected such data: <br><br><ol><li>  employee performance: <br><ul><li>  unique tickets for employees; </li><li>  assessment of the quality of responses; </li><li>  the number of replies, postponements, notes, etc .; </li></ul></li><li>  department performance: <br><ul><li>  queue load history; </li><li>  time and number of ticket blocking; </li><li>  the reaction time of the departments; </li></ul></li><li>  reports: <br><ul><li>  the number of tickets in queues; </li><li>  hourly load distribution. </li></ul></li></ol><br>  And much more.  Statistics are constantly being updated and all new sections and filters are added.  I hope this helps the managers of our client services to analyze the quality of the work of the departments in general and individual employees in particular. <br><br><h3>  Jabber and SMS alerts </h3><br><img src="https://habrastorage.org/files/e39/cfb/e1e/e39cfbe1e87147fea93f9d85f23a6ff0.jpg" align="right">  One of the recent innovations, which finally took a decent look and implementation.  The idea to notify employees about urgent or important tickets was a long time ago, but only recently (during the last year) we implemented it in a form that suits everyone. <br><br>  It all started with the introduction of the service "Callback".  For a while, we were satisfied that the request for a callback immediately appeared at the top of the list, and the employee took her to work.  But this did not last long.  I wanted to reduce the time between the appearance of the application and the actual call. <br><br>  To begin with, a notification was implemented in Jabber via the <a href="https://metacpan.org/pod/Net::XMPP">Net :: XMPP</a> module for working accounts of responsible employees.  But we are faced with intractable (at least for now) problems implementing XMPP for our jabber protocol provider.  Such frequent ‚Äúbroadcasts‚Äù for a dozen addressees quickly took us to a temporary ban and no one received notifications.  A lot of blood was shed before they decided to abandon this in favor of push notifications directly to the browser. <br><br>  Now employees who are authorized to call the client and solve his problem, in case they are at work, receive a notification directly on the screen of their computer and can quickly respond (go to the page with the ticket, find out details, click the Call Client button). <br><br>  But, in addition to callbacks, there are a number of applications that must be processed immediately, preferably right now.  For example, such requests include requests and tasks for Colocation services.  Not always the employee who can solve the client's problem is in his workplace.  A trivial example: today is a day off.  For such cases, they implemented notifications to a mobile phone in the form of an SMS, in which the ticket number, customer ID and message subject are indicated. <br><br>  Such SMS-notifications allowed to instantly respond to incoming urgent tasks from the client during off-hours and holidays.  By the way, working time is recorded according to the calendar specifically for the department, and holidays are recorded using <a href="https://metacpan.org/pod/Date::Holidays::RU">Date :: Holidays :: RU</a> .  So we (and you too) can be sure that no urgent message will stay without attention for longer than 2-3 minutes. <br><br><h2>  Small innovations </h2><br><img src="https://habrastorage.org/files/3e0/6d8/41f/3e06d841f30f479eaa9413a685f26223.jpg" align="left">  We talked about the most ambitious changes, but in addition to them there is also a bunch of small improvements that make the work in OTRS more convenient and faster. <br><br>  <b>Quick search for answers from the corporate wiki</b> <br>  A small but very useful change.  As you have already noticed, many tools that were initially available in OTRS were shallowed for one reason or another.  The OTRS FAQ has not escaped this fate.  We use our tools to search and insert quick answers in our internal Mediawiki-based FAQ. <br><br>  <b>The ability to change the queue when adding notes</b> <br>  Just a tiny change - they added the ability to immediately change the queue when they entered a note.  It allows you not to open the ticket twice, but to do everything in one go. <br><br>  <b>Search in customer base REG.RU</b> <br>  In the client's card in OTRS, we display a link to his account in REG.RU with the ability to quickly open the list of his services.  The binding of the client and the call goes according to several parameters, such as e-mail, login in REG.RU and some others. <br><br>  <b>Demarcation of access to queues</b> <br>  In general, it is hardly possible to point out the work of the programmer.  We only competently work with roles and groups, the functionality of which goes in the basic configuration of OTRS. <br><br>  <b>Fast throwing in the previous queue</b> <br>            .      ,       .                  . <br><br> <b> ,     </b> <br>      ,  ,         - .     ,    ,     ,     ,             . <br><br> <b>      </b> <br>     OTRS      ,    ,       .   ,          . <br><br> <b>  ¬´-¬ª ‚Äî        </b> <br>       .     ,     .     ,  ,      .  ,   ,     ,         .           OTRS,        . <br><br> <b>   </b> <br>        .         ,   ,          ,    .           .      ,   ,   ,           . <br><br> <b>  RS  (    SIP-)</b> <br>     .  OTRS     ,      .  ,       .            ¬´ ¬ª.    ,         ,    .   Asterisk Restful Interface (ARI)        . <br><br> ,      ? ¬´         ¬ª.  ,   .    ,       ,     ,   ,   -     .       ,     . <br><br> <b>  Redis</b> <br>    OTRS     .          (  -),        inode    .  ,       -       . <br><br>       Redis. , -,        .  -,         .   ,      .    OTRS  Redis     ( ),             . <br><br> <b>   </b> <br>    ,        .              .         ,     .    Google  - .           ,    HTML,       . <br><br> <b>LDAP- </b> <br>   LDAP-     .  ,     OTRS,         .              OTRS. <br><br> <b>     </b> <br>                    .          ,     select    80 ,     . ,      ¬´  ¬ª    55 .          ,            . <br><br> <b> SQL-</b> <br>    - ,             .   ,    (   ),   . <br><br><h2>  results </h2><br><img src="https://habrastorage.org/files/e54/6cb/403/e546cb4031b1458392c3ea67b006cd01.jpg" align="right">      ,    .             ,    ,   .     -            .      2  5   , ,    .  ,        -,       ,           .         !       .  Thank them for that. <br><br>         .             ,      ,    .            . <br><br><h2>    </h2><br><img src="https://habrastorage.org/files/4e2/f90/477/4e2f904773754ae0b627049f929620b7.jpg" align="left">          OTRS.          ,        .              OTRS  EventHandler,         . <br><br>                   . <br><br>  -  <s>    </s>         ,       ,      - . <br><br><h2>   ? </h2><br><img src="https://habrastorage.org/files/a5a/7cb/eaa/a5a7cbeaa5fb4c1894abf53ea3f2e8a5.jpg" align="right"> ,        : ¬´     RS       ?¬ª. ,      ,         ,       . <br><br>         ,       , , ,   .        ¬´ ¬ª.       ¬´¬ª  OTRS.           -    . -    , -    , ,      .   ,      . <br><br>        OTRS,      ,  ,      .      REG.RU     .          ,          . <br><br>   ?   .    ‚Äî            . <br>  ,           ‚Äî   ,    .      , . .        . <br><br>        OTRS      API,     ,          . <br><br><h2>  Thanks </h2><br>        .  ,     . <br>   ,    . <br>  ,           ,    . <br><br>     <a href="http://habrahabr.ru/users/chips/" class="user_link">Chips</a> , <a href="http://habrahabr.ru/users/banaking/" class="user_link">banaking</a> , <a href="http://habrahabr.ru/users/shikin/" class="user_link">shikin</a> , <a href="http://habrahabr.ru/users/imir/" class="user_link">imir</a> .  ,        ,     .    ,     . </div><p>Source: <a href="https://habr.com/ru/post/267925/">https://habr.com/ru/post/267925/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267913/index.html">According to Rambler.iOS # 4</a></li>
<li><a href="../267915/index.html">ZeroNights 2015: Hack now - Save the future</a></li>
<li><a href="../267919/index.html">Network overlay technologies for data centers. Part 1</a></li>
<li><a href="../267921/index.html">Authorization in Redmine from another site</a></li>
<li><a href="../267923/index.html">Search and read legacy code</a></li>
<li><a href="../267927/index.html">Storing configs under version control</a></li>
<li><a href="../267929/index.html">Macroscop video surveillance and analytics in detail</a></li>
<li><a href="../267931/index.html">Cybercriminals kidnapped fingerprints 5.6 million US civil servants</a></li>
<li><a href="../267933/index.html">Microsoft Speech and Streaming Audio</a></li>
<li><a href="../267935/index.html">How to monitor the appearance of inappropriate content on your site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
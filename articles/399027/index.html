<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IoT in the vending business: intelligent vending</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will tell about how the intellectual vending machine was created. First, using the Intel IoT Developer Kit and the Grove IoT Commercial Devel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IoT in the vending business: intelligent vending</h1><div class="post__text post__text-html js-mediator-article">  Today we will tell about how the intellectual vending machine was created.  First, using the Intel IoT Developer Kit and the Grove IoT Commercial Developer Kit, we built a prototype, which, after successful tests, was transformed into a solution suitable for practical use.  In particular, Intel‚Äôs Internet of Things Gateway, industrial-grade sensors, Intel IoT Gateway Software Suite, Intel System Studio, and Microsoft Azure cloud services are used in the finished machine.  The resulting hardware and software system is able to track the availability of goods in the machine, keep a sales log, remind you of the need to maintain the machine.  The gateway collects information from the temperature sensor, from stepper motors that drive spirals for dispensing goods, and from the application responsible for the sale.  Data can be analyzed at the gateway and transferred to the cloud for accumulation and further research. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/702/a45/aba/702a45aba6014bf3859487b684d14096.jpg"></div><br><a name="habracut"></a><br>  <a href="https://github.com/intel-iot-devkit/path-to-product/tree/master/intelligent-vending-machine">Here</a> you can find the project code.  <a href="https://software.intel.com/en-us/articles/iot-path-to-product-how-to-build-an-intelligent-vending-machine">This</a> material contains details on the technical details of assembling an intelligent vending machine, which we will talk about here. <br><br>  The possibilities that the Internet of things opens up are in equipping the devices we use every day with the intellectual functions of the devices.  This, in the end, allows to improve their performance, and if we are talking about a business built on such devices, to increase its efficiency. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here, for example, vending machines that accept coins or banknotes and give the buyer a variety of goods - from a cup of coffee to electronic devices in standard packages.  The range of purchases that can be made in this way is extremely wide, and continues to grow.  These machines can be found literally everywhere.  They work around the clock, buyers willingly use them.  As a result, automata are able to generate a significant stream of income, which attracts retailers of the most diverse directions. <br><br>  The machine does not require the constant presence of a cashier; it can be installed where a regular retail outlet is very difficult to place, say, in the depths of an office building, in a library, or two steps from a busy intersection.  However, automatic machines need regular maintenance.  Usually it consists in replenishing the stock of products sold or in scheduled maintenance, but sometimes emergency situations occur when the device cannot work normally and needs urgent adjustment or repair. <br><br>  If the vending machine functions autonomously, a situation requiring urgent intervention can be identified either by customer requests that have encountered a problem and decided to call support service, or at the next scheduled maintenance of the fleet of devices.  This alone means potential losses for machine owners.  If the owners receive complete and timely information about the state of the devices, this will lead to an increase in the efficiency of their business.  Such information will help to optimize the maintenance schemes of the machines, minimize downtime as a result of minor faults or normal situations when a product or ingredient has run out in the machine. <br><br>  We believe that the introduction of Internet of things technology in the vending business will benefit both sellers and buyers.  Therefore, Intel organized a project aimed at creating an intelligent vending machine and exploring the possibilities offered by its use. <br><br>  Here is the finished device created by the project. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/a62/dff/503/a62dff50329d4eb438d9d140b25da470.png"></div><br>  <i><font color="#999999">Intelligent Vending Machine</font></i> <br><br>  The ideological inspirer of this development was the <a href="http://www.intel.com/content/www/us/en/internet-of-things/blueprints/iot-vending-machine-adlink-blueprint.html">document</a> on the solutions of Intel and ADLINK Technologies, which allow you to streamline the management of vending machines and analysis of the data that can be collected from them, based on the concepts of the Internet of things. <br><br>  In this material, we will describe in detail the progress of work, talk about the step-by-step method of development, divided into phases, and then consider each of the phases as applied to our project. <br><br>  We offer everyone to use the methodology, the implementation of which will be discussed here, in the work on their own IoT-projects aimed at automating trade.  Our story will allow you to follow every step that the Intel engineering team went through from the idea to the working model.  We believe that the main value of our research lies precisely in the fact that the same approach can be applied to a wide range of developments in the field of IoT. <br><br><h2>  <font color="#0071c5">Methodology</font> </h2><br>  We <a href="https://geektimes.ru/company/intel/blog/279272/">have already written</a> about the methodology of work on IoT-projects, which provides for the division of the path from the idea to the finished product into six phases.  Recall the main content of each of them: <br><br><ol><li>  Search for a problem, empty niche or potential opportunity in the market. <br></li><li>  Designing a model to test the capabilities of the product to solve the task assigned to it. <br></li><li>  Construction, testing and refinement of the physical layout, the prototype of the product <br></li><li>  Creating a stable beta version of a product using components suitable for mass production. <br></li><li>  Evaluation of product features, expansion of its functionality, testing. <br></li><li>  Finalization and optimization of the product, the transition to the production stage. <br></li></ol><br>  In this case, the first three phases are considered initial, and the last three are considered final. <br>  This methodology is good versatility.  This allows you to apply it to any IoT project.  We now tell you how the work was done on an intelligent vending machine. <br><br><h2>  <font color="#0071c5">Phase 1: Determine project potential</font> </h2><br>  While traditional vending machines generate good returns, they are depressingly inefficient.  So, each machine needs regular maintenance, most often it is needed to replenish stocks of products.  Usually this task is solved by planning the routes that vehicles with service personnel and products for automata ply. <br><br>  In order to understand the initial inefficiency of such an approach, let us present a very realistic situation on the route, one of whose destinations is a multi-storey office building.  The car stops in front of the building and the employee has to decide what to do next.  The first scenario of his actions - an attempt to guess what is needed for the machines, say, on the 15th and 20th floors.  He takes everything he deems necessary, rises to the machine guns ... But the guess is very likely to be wrong, so the employee will have to visit the machine guns at least twice, although he may be lucky enough to keep within one time.  The second scenario implies two visits to the machines without any options being limited to one.  First, the employee rises to the devices, makes a list of goods, the stock of which must be replenished, then returns to the car, takes everything he needs, and again goes to the vending machines.  And what if one of the machines is faulty?  It would be nice to know about this even before entering the route. <br><br>  As a result, no matter how an employee enters, even if he only needs to replenish stocks of goods, there is an irrational use of time, which ultimately means unnecessary costs for companies owning vending machines. <br><br>  Moreover, companies are forced to find a balance between too frequent rounds of automata (which increases labor costs) and too rare (which reduces revenues, forcing the automata in which the goods ended up to stand idle).  In fact, everything looks even worse, as the company is, to some extent, dependent on conscious (or angry) buyers, who inform it that the machine is not working or that the product has run out. <br><br>  Project initiators at Intel found out that smart vending machines are quite suitable as a base for a project that demonstrates the potential of IoT and the methodology we mentioned above.  The initial group identified a set of knowledge and skills that would most likely be needed during the course of the work.  Among them were project management, programming, designing cloud architectures, developing and maintaining documentation.  Based on this list of required skills, the core group formed a team that mainly included Intel employees.  The work involved and third-party specialists, whose knowledge complemented those that were already members of the team. <br><br>  The first task that the full team had to solve was to assess the potential of the project, identifying which, in turn, helps design the prototype of the device. <br><br>  Having solved this problem, the team found out that the most important thing in this project is the ability of the vending machine to track product availability and its own state, transferring the collected data to the cloud storage using the Internet of Things gateway. <br><br>  One of the parts of the developed software and hardware solution is based on the use of cloud services.  They were planned to be used for storing and analyzing data, for organizing the functions of administering automata and for solving other problems.  The most important goal of this approach was to create a scalable solution that allows you to aggregate data from an arbitrarily large fleet of vending machines, and, based on the analysis of this data, optimize business processes.  The main value of the cloud approach is analytics.  In addition to information on the actual state of affairs, this also means the possibility of fairly accurate forecasting, which makes it possible to optimize supply chains and increase the efficiency of the personnel serving the machines. <br><br><h2>  <font color="#0071c5">Phase 2: Designing a model to test the concept</font> </h2><br>  In order for the project experience to be as useful as possible to the developer community, it was decided to use easily accessible components and technologies to create the model.  So, the set of materials was limited to the Grove IoT Commercial Developer Kit and the Intel IoT Developer Kit.  In terms of software technology, the choice fell on those that are widely used, are available free of charge, or are inexpensive.  Special attention was paid to the use of free, open source software wherever it is justified. <br><br>  In order to speed up the development phase of the prototype and reduce its complexity, the team decided to build a local part of the prototype in the form of a bench model, which consists of a computing platform and sensors, without including components related to the vending machine.  Work on the machine itself was postponed to the later stages of the project. <br><br><h3>  <font color="#0071c5">‚ñçSelect hardware for prototype</font> </h3><br>  For the prototype was selected computer small form factor Intel NUC Kit DE3815TYKHE.  It plays the role of an IoT gateway. <br><br>  Intel NUC has a decent level of performance that meets the needs of the project.  In addition, this computer is one of the most recent platforms from Intel, aimed at the Internet of things, which makes it a candidate for use in today's and future IoT-systems.  The device is based on the Intel Atom E3815 processor, equipped with a passive cooling system, has 4 GB of internal memory and supports the connection of SATA-drives.  Intel NUC contains a wide range of I / O ports, it is designed as a compact device, the performance and capabilities of which are comparable to desktop PCs. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/129/64c/15b/12964c15b854c9e6507736bc77fd15e0.jpg"><br>  <i><font color="#999999">Computer Intel NUC Kit DE3815TYKHE</font></i> <br><br>  In order to simplify the process of interaction with sensors, the team decided to use the capabilities of the Arduino ecosystem and use the Arduino 101 board, as shown in the figure below. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/06f/4c1/399/06f4c13991878ddb98215b1a9342e38b.jpg"><br>  <i><font color="#999999">Arduino 101 board</font></i> <br><br>  Thanks to the Arduino 101, NUC can be linked to Arduino expansion boards.  In addition, the Arduino platform perfectly matches the team‚Äôs desire for free open source software.  It should be noted that at the current stage of work far from all possibilities of the hardware are used.  Among them is a Bluetooth adapter built into the Arduino 101. According to the developers, this wireless technology may well be used in future versions of the project. <br><br>  Here are the characteristics of the computer and the board. <br><table><tbody><tr><td>  <b>Characteristic</b> <br></td><td>  <b>Intel NUC Kit DE3815TYKHE</b> <br></td><td>  <b>Arduino 101</b> <br></td></tr><tr><td>  Processor / microcontroller <br></td><td>  Intel Atom E3815 processor (512 KB cache, 1.46 GHz) <br></td><td>  Intel Curie Compute Module, 32 MHz <br></td></tr><tr><td>  Memory <br></td><td>  8 GB DDR3L-1066 SODIMM (maximum) <br></td><td>  196 KB of flash memory <br>  24 Kb SRAM <br></td></tr><tr><td>  Network Capabilities / I / O Ports <br></td><td>  10/100/1000 Mbps integrated network adapter <br></td><td>  14 digital and 6 analog outputs <br></td></tr><tr><td>  Dimensions <br></td><td>  190 mm x 116 mm x 40 mm <br></td><td>  68.6 mm x 53.4 mm <br></td></tr><tr><td>  Specification <br></td><td>  <a href="http://www.intel.com/content/www/us/en/nuc/nuc-kit-de3815tykhe-board-de3815tybe.html">Full specification</a> <br></td><td>  <a href="https://www.arduino.cc/en/Main/ArduinoBoard101">Full specification</a> <br></td></tr></tbody></table><br>  Sensors and other components required for prototyping were taken from the <a href="http://www.seeedstudio.com/depot/Grove-Starter-Kit-for-Arduino-p-1855.html">Grove Starter Kit for Arduino</a> (manufactured by Seeed Studio), which is based on the Grove Starter Kit Plus used in the Grove IoT Commercial Developer Kit.  This set of components is inexpensive, its use simplifies the selection of materials for IoT-prototyping. <br><br>  When selecting sensors and other components, the team was guided by the fact that the system requires the following information about the vending machine: <br><br><ul><li>  The temperature inside the machine. <br></li><li>  The amount of goods sold each type. <br></li><li>  Door status: open or closed. <br></li><li>  Information about blocked or non-working spirals for issuing purchases. <br></li></ul><br>  Details on the components that will allow you to collect this data will be discussed below. <br><br><h3>  <font color="#0071c5"> Prototype software</font> </h3><br>  The team considered the Yocto Linux and the Intel IoT Gateway Software Suite as operating systems for the computer playing the prototype gateway role.  Yocto Linux fits perfectly with the desire to use free open source software.  This OS has a high level of flexibility, allows you to create lightweight assemblies that are focused on the needs of a particular system.  Intel IoT Gateway Suite, on the other hand, offers a ready-to-use solution that does not need additional adjustment to the needs of the project.  The team found this combination of factors most suitable for prototyping.  As a result, the Intel IoT Gateway Software Suite was chosen as the OS for the gateway. <br><br>  The software part of the project, in addition to the OS, includes the following applications: <br><br><ul><li>  <b>A control application</b> that will run on the vending machine gateway.  It will be occupied by collecting sensor readings and supporting the work of the electromechanical part of the solution.  In particular, this applies to the issuance of goods using springs.  This application is also responsible for sharing data with users (customers and administrators) and the cloud. <br><br></li><li>  <b>Administrator app</b> designed for PC or tablet.  Its function is to view information about the status of the vending machine.  These are events, various indicators, magazines.  With it, you can work with cloud data and analytics, track the progress of regular maintenance of the machine. <br><br></li><li>  <b>The application for the buyer</b> will work on a smartphone or other mobile device, allowing the buyer to purchase goods in the machine. <br></li></ul><br><h2>  <font color="#0071c5">Phase number 3.</font>  <font color="#0071c5">Prototype creation and development</font> </h2><br>  The conceptual prototype was created by a team using the Intel NUC Kit DE3815TYKHE computer, the Arduino 101 and the Grove Starter Kit Plus IoT Edition.  It is presented in the figure below.  The prototype simulates a vending machine that sells two kinds of goods. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7b5/059/c80/7b5059c80bcc23febeb1db17772b2a7c.jpg"><br>  <i><font color="#999999">Prototype vending machine</font></i> <br><br>  The prototype includes an LCD display that can display 2 lines of 16 characters each.  It displays product names and price information.  Here there are two product selection buttons, a stepper motor for the purchase system, two LEDs (green and red), indicating the state of the machine.  In addition, the prototype includes a temperature sensor and a "fault detection" button.  In order not to complicate the prototype, the systems necessary for receiving payments are not included in it.  As a result, when the user presses the purchase button, the product is issued to him without any questions. <br><br>  Here are the components included in the hardware implementation of the prototype. <br><br>  <b>The main system.</b> <br><br><ul><li>  <a href="http://www.intel.com/content/www/us/en/support/boards-and-kits/intel-nuc-kits/intel-nuc-kit-de3815tykhe.html">Intel NUC Kit DE3815TYKHE</a> . <br></li><li>  <a href="http://www.arduino.cc/en/Main/ArduinoBoard101">Arduino 101</a> . <br></li><li>  AB USB cable for connecting the Arduino 101 board to the NUC. <br></li></ul><br>  <b>Components from the Grove Starter Kit Plus IoT Edition.</b> <br><ul><li>  <a href="http://www.seeedstudio.com/depot/Base-Shield-V2-p-1378.html">Base Shield V2</a> (base expansion card). </li><li>  <a href="http://www.seeedstudio.com/depot/Gear-Stepper-Motor-with-Driver-p-1685.html">Gear Stepper Motor with Driver</a> (stepper motor with control board). </li><li>  <a href="http://www.seeedstudio.com/depot/Grove-Button-p-766.html">Button Module</a> . </li><li>  <a href="http://www.seeedstudio.com/depot/Grove-Temperature-Sensor-p-774.html">Temperature Sensor Module</a> . </li><li>  <a href="http://www.seeedstudio.com/depot/Grove-Green-LED-p1144.html">Green LED</a> (green LED). </li><li>  <a href="http://www.seeedstudio.com/depot/Grove-Red-LED-p-1142.html">Red LED</a> (red LED). </li><li>  <a href="http://www.seeedstudio.com/depot/Grove-LCD-RGB-Backlight-p-1643.html">LCD with RGB Backlight Module</a> (LCD with color backlight). </li><li>  <a href="http://www.seeedstudio.com/depot/Grove-Touch-Sensor-p-747.html">Touch Sensor</a> . </li></ul><br><h3>  <font color="#0071c5"> Software prototype implementation</font> </h3><br>  The control application used in the prototype was written in C ++.  It also uses a component on Node.js to access the Microsoft Azure cloud service.  The cloud is used to exchange data, in particular, event information, with mobile and administrative applications.  These events include, for example, temperature status alerts and requests for the issuance of goods.  Mobile app for buyers was written in JavaScript and intended for use in a web browser.  This approach was chosen in order to avoid the need to rewrite the program for different mobile platforms. <br><br>  The development was done using the Intel System Studio package and the Eclipse IDE plug-in, which helps to connect to the Intel NUC and create C / C ++ applications. <br><br>  In addition, during the work, the C / C ++ library Libmraa was used, which allows direct access to I / O to the NUC, as well as Firmata, which allows you to organize programmatic interaction with the Arduino development environment using the capabilities of the Arduino hardware abstraction.  The Libmraa library allows for improved programmatic control over I / O facilities at the NUC, simplifying the process of collecting sensor data.  UPM provides special function calls that are used to work with sensors. <br><br><h2>  <font color="#0071c5">Phase number 4.</font>  <font color="#0071c5">Creating a stable beta version</font> </h2><br>  When the prototype showed that the project fully met expectations, the team switched to creating a working version of an intelligent vending machine.  In general, the solution consisted of the following main parts. <br><br><ul><li>  <b>A vending machine</b> that issues goods and communicates with the outside world using a gateway.  The machine is quite complicated, includes various sensors and other components.  It is assembled specifically for this project. <br><br></li><li>  <b>The gateway</b> was chosen among those that can be found in the free market.  It is based on Intel architecture, the logic of the project is implemented using proprietary software. <br><br></li><li>  <b>Applications for administrators and customers</b> , written in JavaScript, are designed for relevant user groups.  These applications are tightly integrated with the cloud, it is the intermediary between them and the vending machine. <br><br></li><li>  <b>A cloud analytics system</b> based on Microsoft Azure, which, among other things, allows you to get predictive information to optimize business processes, based on data on the use of the vending machine, collected over time. <br></li></ul><br><h3>  <font color="#0071c5">‚ñçSelection of components for vending machine</font> </h3><br>  At the initial stage of the project completion phase, the components were selected, from which the ready solution will be built. <br><br>  The prototype was created as a bench model, and at this stage of the project development a real working vending machine will be built.  The team considered two options.  The first was the self-assembly of the automaton, the second was the purchase of a used automaton and its modification for the needs of the project.  As a result, the option of creating your own automaton was chosen in order to make it universal and take into account the features of the project.  The figure below shows the machine at an early stage of assembly. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/3a3/277/ace/3a3277acea9c8d158ec1a70e519d1b9d.jpg"></div><br>  <i><font color="#999999">Vending machine assembly</font></i> <br><br>  This is a desktop machine designed to sell various small-sized products packed in boxes in blisters and bags.  The machine has three springs for the issuance of goods, each of them is configured for goods of different sizes. <br><br><ul><li>  Spring with tight turns (3 inches) is designed for 12 - 14 small blister packs. <br><br></li><li>  A spring with coils of lesser density (4 inches) is suitable for placing 9 to 12 boxes or packages of medium size. <br><br></li><li>  The spring with the largest coil spacing (5-6 inches), is designed for 6 - 8 large packages.  For example, in such packages you can sell T-shirts. <br></li></ul><br>  The springs are driven by stepper motors, the product falls into the opening tray located at the bottom of the machine.  The plexiglass window is provided in the case so that the customer can see what he chooses, and the seats under the screen, and possibly the keyboard. <br><br>  Powder-coated steel elements are used as the case material, the trays are made of aluminum, the springs are made of steel with a protective coating.  The front of the machine opens to place products in it, the back panel is made removable - for installation and maintenance of mechanisms.  It is planned that the weight of the machine will be slightly more than 30 kilograms, dimensions - about 60 cm in depth, about 90 cm in height and 75 cm in width. <br><br>  Some of the key decisions made at this stage of work include the choice of industrial-grade sensors, a gateway built on the basis of Intel components and commercially available, an operating system, a cloud service for storing and analyzing data, and a software application platform for administrators and buyers. <br><br><h3>  <font color="#0071c5">‚ñçSelection of sensors and other components</font> </h3><br>  Here are the components that replace the parts from the Grove Starter Kit used in the prototype in a working vending machine. <br><br><ul><li>  Model of the vending machine, the components of which are made specifically for this project.  Namely: <br><br>  - Body with hinged door and removable rear wall. <br>  - Removable tray with three springs for the issuance of goods. <br>  - Three stepper motor (one for the spring), each of which is equipped with a switch designed to register the full rotation of the spring. <br>  - Removable shelf for electronic components. <br><br></li><li>  Dell iSeries IoT Gateway Wyse 3290 IoT Gateway. <br></li><li>  USB cable A - Micro USB B for connecting an I2C / GPIO controller to the gateway. <br></li><li>  Power supply 12 V, 5 A, which is used to supply power to the control board of stepper motors. <br></li><li>  USB <a href="http://www.mouser.com/new/ftdi/ftdiumft4222ev/">controller</a> - I2C / GPIO UMFT4222EV. <br></li><li>  GPA expander, based on PCA9555 chip. <br></li><li>  SparkFun <a href="https://www.sparkfun.com/products/retired/10507">board</a> for controlling four stepper motors. <br></li><li>  Temperature and humidity sensor AM2315. <br></li><li>  Grove <a href="http://www.seeedstudio.com/depot/Grove-LCDRGB-Backlight-p-1643.html">LCD</a> with color backlight <br></li><li>  <a href="http://www.mouser.com/ProductDetail/VCC/CNX714C200FVW">Red LED</a> with mounting accessories. <br></li><li>  <a href="http://www.mouser.com/ProductDetail/VCC/CNX714C900FVW">White LED</a> with mounting accessories. <br></li></ul><br><h3>  <font color="#0071c5">‚ñçSelect Gateway</font> </h3><br>  Here are the main factors, guided by which the team chose the gateway for the vending machine: <br><br><ul><li>  <b>High performance</b> , sufficient to ensure the smooth operation of the solution.  The normal mode of operation of the gateway involves the control mechanisms of the machine, collecting information from sensors and data exchange with the cloud. <br><br></li><li>  <b>Availability on sale</b> , an important factor, if we consider that without the gateway the project will not be possible to implement.  Some team members were in favor of choosing the Vantron VT-M2M-QK gateway, however, it was not possible to get it in a reasonable time, so the choice fell on another device. </li></ul><br>  As a result, the Dell iSeries Wyse 3290 IoT Gateway was selected for the project.  This gateway provides the necessary level of performance for both existing functionality and possible future expansion of the project.  Namely, it is equipped with an Intel Celeron N2807 processor (clock speed up to 2.16 GHz, 1 MB of cache memory), 4 GB DDR3 RAM (1600 MHz).  The device is equipped with a network card (10/100/1000 BASE-T), Wi-Fi adapter (802.11a / b / g / n / ac) and Bluetooth 4.0 Low Energy module.  The gateway has small dimensions (69 mm x 197.5 mm x 117 mm) and weight (2.34 kg). <br><br>  The Dell iSeries Wyse 3290 IoT Gateway is easy to get, even in large quantities, which is important for a hypothetical situation when a vending machine described here goes to the market. <br><br>  After the gateway was chosen, it was necessary to determine the OS for it.  In the prototype, on the Intel NUC, the Intel IoT Gateway Software Suite was already used.  The gateway supports the installation of this OS, it is certified for it, so it was decided to leave the Intel IoT Gateway Software Suite.  This solution simplifies the transfer of software developments made at the prototyping stage into a working vending machine.  Facilitates this process and the application of the same as in the prototype, the development environment, namely, Intel System Studio and auxiliary libraries. <br><br><h3>  <font color="#0071c5"> System Architecture</font> </h3><br>  The system includes the following main software parts: <br><br><ul><li>  Gateway software. <br></li><li>  Azure cloud services for data storage and analysis and server application. <br></li><li>  Applications for administrators and buyers. <br></li></ul><br><img src="https://habrastorage.org/getpro/geektimes/post_images/429/539/4ce/4295394ce81dd12615f62f5687fe5c52.png"><br>  <i><font color="#999999">The scheme of interaction of various program components of the project</font></i> <br><br>  Now we will talk about the structure of the gateway software and the cloud solution, and below we consider applications for administrators and customers. <br><br><h3>  <font color="#0071c5"> Gateway software</font> </h3><br>  The software with which the gateway is equipped consists of three parts: <br><br><ol><li>  <b>A control application</b> written in C ++ using the libmraa and libupm libraries from the IoT Developer Kit.  It solves the following tasks: <br><br>  - Monitoring the health of the mechanical parts of the machine and logging the results of checks in a local database. <br>  - Monitoring of temperature fluctuations, in particular, its output from a specified range, both downward and upward.  The system responds to unwanted temperature changes by sending notifications to the administrator. <br>  - Delivery of the goods on command, coming to the machine from the cloud.  The cloud, in turn, the corresponding team comes from an application for buyers. <br><br></li><li>  <b>The local database is</b> used to organize the exchange of data between the control application and the database daemon.  The local SQLite database uses the <b>$ HOME / Vending_Prototype / events.sqlite3 file</b> , which contains the ‚Äúevents‚Äù table, which records information about events that need to be sent to the cloud.  The event table is synchronized between the cloud and the gateway. <br><br></li><li>  <b>The database daemon is</b> implemented on Node.js.  It synchronizes event records between the local database and the cloud. <br></li></ol><br><h3>  <font color="#0071c5">‚ñç The implementation of the cloud-based solution based on Azure</font> </h3><br>  The cloud part of the solution is responsible for storing data on the number of goods in the machine.  In it, the user application and the automatic machine, information on events is transferred.  In the cloud, data analysis and call procedures are performed that ensure the system's response, for example, to an extremely small amount of goods in the machine or to a malfunction.  Basically, cloud processing tools provide the following functionality: <br><br><ul><li>  If a certain product in the machine has ended, this information is sent to the cloud, after which an alert is displayed in the administrative application. <br><br></li><li>  If the internal temperature in the machine is out of the specified range, data about this goes to the cloud for analysis.  In the administrative application displays a warning. <br><br></li><li>  If at least one of the springs for issuing goods does not work correctly, this information is also sent to the cloud, which, again, leads to the issuance of a warning in the administrative application. <br><br></li><li>  If the tray of the machine is pulled out, for example, during maintenance, the system reports the status of ‚ÄúMachine open‚Äù.  After the tray returns to its working position, the system reports the status ‚ÄúAutomatic is ready for operation‚Äù. <br></li></ul><br><h2>  <font color="#0071c5">Phase number 5.</font>  <font color="#0071c5">Evaluation of product capabilities and enhanced functionality</font> </h2><br>  The project team, engaged in work on the vending machine, consisted mainly of engineers.  They didn‚Äôt have enough experience in developing user interfaces.  Therefore, to work on the interfaces of applications attracted external resources.  The invited specialist participated in the team meetings. <br><br>  In the course of these discussions, the interface was refined and some additional features were included.  For example, in the administrative application, color coding of quantity indicators was applied, and an option was added to select the temperature display format (in degrees Celsius or Fahrenheit).  In the app for buyers, they added a purchase confirmation function before performing a transaction, and also made some other minor improvements. <br><br>  After decisions were made to create a working version of the vending machine, several team members decided to find out how to improve it, what functionality built on an existing base could be added to it in the future. <br><br><h3>  <font color="#0071c5">‚ñçImprove cloud analytics</font> </h3><br>           Microsoft Power BI   Power Bi Desktop ‚Äì      -,    Microsoft Azure.  Power BI      ,   ‚Äì  .       ,        . <br><br><h3> <font color="#0071c5">‚ñç   </font> </h3><br>    ,     ,  ,   ,       Azure.  ,        ,     : <br><br><ul><li> <b>  </b> .          ,    , ,  ,           ,    .      ,    ,         . <br><br></li><li> <b> </b> .    , ,        ,      ,     .       . ,   ,         ,  ,   ,     . <br></li></ul><br><h2> <font color="#0071c5"> 6.      </font> </h2><br>             .     . <br><br><h3> <font color="#0071c5">‚ñç  </font> </h3><br>   ,    ,      . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/415/2ab/3d4/4152ab3d41f8f11c9161feef25870b27.png"><br> <i><font color="#999999">  </font></i> <br><br>     ,      . <br><br><ol><li> <b> </b>   <b>Home</b> ,       (    ).  <b>About</b>      ,  <b>Setup</b>          (   ‚Äì     ).  <b>Log</b>   ,   ,      .  <b>Alert</b>         ,          . <br><br></li><li> <b>    </b>    ,   ,   ,       . -    ,       .       ,           .    ,      .    ,        .        ,  ,   ,      ,   . <br><br></li><li> <b>  </b>            .           .       .      ,   .      . <br><br></li><li> <b>,    </b> ,      .  -   , ,    -   ,       . <br><br></li><li> <b>  </b> ,     ,  ,    ,     ,    . </li></ol><br><h3> <font color="#0071c5">‚ñç  </font> </h3><br>        .       ,         . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/4ce/75e/63e/4ce75e63eb7faa3f44130d1a720ab0dd.png"></div><br> <i><font color="#999999">   </font></i> <br><br>       ,      : <br><br><ol><li> <b> </b>   ,      ,    .  ,      ,        .     ,     <b>Buy</b> ,    .      ,      .            ,         . <br><br></li><li> <b> </b>      .              .                . <br></li></ol><br><h3> <font color="#0071c5">‚ñç  </font> </h3><br>      ,   ,    . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/45e/cfa/183/45ecfa183e31f99595bc7e895f91c8c8.png"><br> <i><font color="#999999">     </font></i> <br><br><h2>  <font color="#0071c5">findings</font> </h2><br>  ,                 ,     IoT-. <br><br>  ,   ,      .        .  ‚Äì    .          ,    ,        .        .      ,    ,    ,  ,  ,  ,   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One of the features of our project is the approach to working with cloud services. </font><font style="vertical-align: inherit;">Namely, cloud computing is often associated with the search for valuable information in big data, with the accumulation and study of huge amounts of information, and with nothing else. </font><font style="vertical-align: inherit;">In our project, we also deal with data storage and analysis, but cloud services, in addition to traditional functions, acquire the role of a communications hub for system components. </font><font style="vertical-align: inherit;">We think it is worth pondering over this. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result, we would like to note that we are confident that the technologies of the Internet of things can have a significant positive impact on the vending business.</font></font></div><p>Source: <a href="https://habr.com/ru/post/399027/">https://habr.com/ru/post/399027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../399017/index.html">A link between mitochondrial dysfunction and Alzheimer's disease has been found.</a></li>
<li><a href="../399019/index.html">Helios headset uses Intel RealSense technology to help people with visual impairments</a></li>
<li><a href="../399021/index.html">How artificial intelligence is changing the chip market</a></li>
<li><a href="../399023/index.html">Brain implant allowed paralyzed monkeys to walk again</a></li>
<li><a href="../399025/index.html">Facial electrodes allow you to chew and feel the taste in virtual reality</a></li>
<li><a href="../399029/index.html">Bike electrification kit development</a></li>
<li><a href="../399031/index.html">Microsoft returns money to Call of Duty: Infinite Warfare customers in the Windows Store</a></li>
<li><a href="../399033/index.html">British scientists told about how "British scientists" appeared</a></li>
<li><a href="../399035/index.html">The share of Google Chrome among browsers has reached 55% and continues to grow</a></li>
<li><a href="../399037/index.html">What happens when a person far from this sphere writes about a guitar tube sound</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
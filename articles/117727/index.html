<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing your own root certificate on Android and running Citrix XenApp Web Interface</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In principle, shoguevara and I have been bothering for quite some time about installing a root certificate in an Android device, and even found a coup...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing your own root certificate on Android and running Citrix XenApp Web Interface</h1><div class="post__text post__text-html js-mediator-article">  In principle, <a href="https://geektimes.ru/users/shoguevara/" class="user_link">shoguevara</a> and <a href="https://geektimes.ru/users/shoguevara/" class="user_link">I</a> have been <a href="https://geektimes.ru/users/shoguevara/" class="user_link">bothering for</a> quite some time about installing a root certificate in an Android device, and even found a couple of not very trivial instructions, but there was no need for such an action before.  Need appeared after acquisition of the tablet on Android. <br><br><h2>  A little background: </h2><br>  It is in our office <a href="http://www.citrix.com/English/ps2/products/product.asp%3FcontentID%3D186">Citrix XenApp</a> to ensure remote work from the office.  What kind of beast it is and what we eat it with will not be told - to whom it is necessary, they have long been aware of <br>  In this joint recording, we want to talk about installing the root certificate and setting up the client part - <a href="http://www.citrix.com/english/ss/downloads/details.asp%3FdownloadId%3D1864551%26productId%3D1689163">Citrix Receiver for Android</a> . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c67/0e2/c35/c670e2c35af60ba5f6504c87568ade67.jpg" alt="Picture to attract attention">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In principle, the client is not the poorest - you can use it, and if you are somewhere on a trip, and you only have an Android phone or tablet in your hands, this is the only way to quickly connect and fix something through a working computer. <br>  It seems that the software is not particularly tricky, and the settings do not require much, and if you use the web interface to launch applications, as is done in our organization, then absolutely no ... <br>  But not everything is so cloudless! <br><a name="habracut"></a><br><h1>  What kind of problems could arise? </h1><br>  To organize this kind of remote access architecture, certificates are often used that are signed by non-standard centers.  Why is Google so bad, and they didn‚Äôt include such a simple function in their OS (along with the necessary function, such as the ability to register a proxy server) as installing additional root CA certificates, we are not going to discuss here. <br>  The first sign that the server uses a self-signed certificate is that when you open a web resource from anywhere using, for example, Mozilla Firefox browser, the program displays a message that it cannot decide to trust whether or not a certificate is established to establish a secure connection - it provides you with the right of choice. <br>  If you have such a picture, then this article is just for you! <br><br><h3>  So what does it take to run applications published on Citrix XanApp of your enterprise through Citrix Receiver? </h3><br><br>  First of all, as it turned out, you need to install <a href="http://www.mozilla.com/ru/mobile/download/">Mozilla Firefox for Android</a> .  It's very strange, but no other browser sends the file (launch.ica) needed for the connection to the client program.  We only know that everything works fine with Firefox. <br><br>  Secondly, the client program itself is needed.  Here on the Android Market we have a choice: a stable Citrix Receiver, or a Citrix Labs Receiver, which is in the testing phase.  The second one didn‚Äôt want us to accept the certificate in any way, the first one was stable, and after a sleepless night, it did work for us. <br><br>  Thirdly, you need to have root access to your device, or the ability to extract and write back files via adb, although in this case you also need root access (how to configure it, you can learn by spending a little time watching the results, which gave you Google for a query like "&lt;your device name&gt; root access howto" or "&lt;your device name&gt; adb configure howto"). <br><br>  We didn‚Äôt bother with the adb setup question again, since we prefer to work directly through the file managers with the system.  In any case, there is quite a lot of information on this subject in the network (a Russian-language resource with the most information of this kind on this site is <a href="http://forum.xda-developers.com/">http://w3bsit3-dns.com.ru/forum</a> , an English-language resource is <a href="http://forum.xda-developers.com/">http://forum.xda-developers.com</a> ).  If you use direct access to system files, then you need a file manager that can use root-rights (for example, Root Explorer). <br><br>  Fourth, we need a machine with any of the popular Linux distributions and an installed Java machine from Oracle (we used <a href="http://www.ubuntu.com/desktop/get-ubuntu/download">Ubuntu 10.10</a> <a href="http://time-to-be.livejournal.com/36562.html">with an installed JRE</a> ). <br><br>  And last but not least, the root certificate of the certification center itself (let it be called CompanyCA.crt). <br><br><h2>  From the requirements (if all of them are fulfilled) go to action. </h2><br>  For convenience, we will list all the points. <br><br>  1. Go from the device to the Android Market and install Firefox. <br>  2. Go to the device on the Android Market and install Citrix Receiver. <br>  3.1.1 (3.1.x for those who prefer direct access) Using the file manager, copy the /system/etc/security/cacerts.bks cacerts.bks file to the SD card. <br>  3.1.2 We connect the device as a drive to a computer with Linux. <br>  3.1.3 Copy the cacerts.bks file from the root of the card to your home folder. <br>  3.2.1 (adb) copy the certificate <br>  $ adb pull /system/etc/security/cacerts.bks cacerts.bks <br><br>  4. This item assumes that you have already installed and configured JRE 1.6 and the environment variable JAVA_HOME (in my case JAVA_HOME = / usr / lib / jvm / java-6-sun /) is registered. <br>  Download the <a href="">bouncycastle.org/download/bcprov-jdk16-146.jar</a> package and <a href="">drop</a> it into the $ JAVA_HOME / jre / lib / ext / folder <br>  If you have a JDK installed, then this package should also be dropped into the / usr / lib / jvm / java-6-openjdk / jre / lib / ext folder <br> <code><a href=""></a> wget bouncycastle.org/download/bcprov-jdk16-146.jar <br> sudo cp bcprov-jdk16-146.jar $JAVA_HOME/jre/lib/ext/bcprov-jdk16-146.jar <br> #  sudo cp bcprov-jdk16-146.jar /usr/lib/jvm/java-6-sun/jre/lib/ext/bcprov-jdk16-146.jar <br></code> <br><br>  5. We throw the certificate file CompanyCA.crt in the home folder as well.  If you do not have it, but you agreed to accept the certificate when you go to the XenApp web interface, then you can export it from Firefox.  How to do this - <a href="http://lmgtfy.com/%3Fq%3Dfirefox%2Bexport%2Bcertificate%2Bhowto">tells Google</a> .  We can only clarify that you need X.509 PEM encryption. <br><br>  6. Download and install the Android SDK (if you do not plan to use adb, you can skip this step): <br> <code><a href=""></a> wget dl.google.com/android/android-sdk_r10-linux_x86.tgz <br> tar -xvzf android-sdk_r10-linux_x86.tgz <br> sudo mv android-sdk-linux_x86 /usr/lib/android-sdk-linux_x86</code> <br>  To run anything from the kit for our task is not required.  But you need to register the executable SDK files in the environment variables export PATH = $ {PATH}: / usr / lib / android-sdk-linux_x86 / tools. <br>  In our case, the issue with environment variables is solved by adding lines to the end of the ~ / .bashrc file. <br> <code>export PATH=${PATH}:/usr/lib/android-sdk-linux_x86/tools <br> export JAVA_HOME=/usr/lib/jvm/java-6-sun/jre <br></code> <br><br>  7. Open the console and execute the command. <br> <code>keytool -keystore cacerts.bks -storetype BKS -provider org.bouncycastle.jce.provider.BouncyCastleProvider -storepass changeit -importcert -trustcacerts -alias CACERT -file CompanyCA.crt <br></code> <br><br>  <i>Be careful - do not change the parameter -storepass changeit, there really is such a password)</i> <br><br>  In response to this command, you should receive information about the certificate and the request ‚ÄúTrust this certificate?  [no]: "- respectively, answer" y ". <br>  Everything, our file is prepared.  Now you need to download it to your device. <br><br>  8.1.1 (direct access) We connect the device as a drive to the computer; <br>  8.1.2 Download the cacerts.bks file to the card; <br>  8.1.3 We transfer using the cacerts.bks file manager from the / sdcard folder to the / system / etc / security / folder, after having previously mounted it for writing; <br>  8.2.1 (adb) Mount the system for recording: <br>  $ adb shell mount -o remount, rw / system; <br>  8.2.2 Downloading the file: <br>  $ adb push cacerts.bks / system / etc / security /; <br>  8.2.2 Install the system for reading only: <br>  $ adb shell mount -o remount, ro / system. <br><br>  This is the hard part.  Left a pair of "feints ears." <br><br>  9. Reboot the device. <br><br>  10. Launch Firefox and open the web access page. <br>  A picture like this will appear: <br><img src="http://3.bp.blogspot.com/-RL0t2b-AoQ0/TaMF5I4BXuI/AAAAAAAABdw/76i4NGSEt90/s1600/Screenshot-1.png" alt="Result"><br><br>  Here we need to click on the ‚ÄúAlready installed‚Äù link at the top of the screen; <br><br>  11. Select the application from the list and try to start; <br><br>  12. Profit! <br><br>  In preparing the instructions used resources: <br>  <a href="http://wiki.cacert.org/ImportRootCert">http://wiki.cacert.org/ImportRootCert#Android_Phones</a> <br>  <a href="http://blog.dest-unreach.be/2010/05/03/installing-an-additional-x-509-root-certificate-on-android">http://blog.dest-unreach.be/2010/05/03/installing-an-additional-x-509-root-certificate-on-android</a> <br>  <a href="http://bouncycastle.org/">http://bouncycastle.org/</a> <br>  As a bonus - a useful utility for working with certificates (Java): <a href="http://portecle.sourceforge.net/">http://portecle.sourceforge.net</a> </div><p>Source: <a href="https://habr.com/ru/post/117727/">https://habr.com/ru/post/117727/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117719/index.html">RIFOKIB: Lohotron 2.0 or Vote, do not vote - still lose?</a></li>
<li><a href="../117721/index.html">The FTP standard is 40 years old.</a></li>
<li><a href="../117722/index.html">Open source keyboard typing project</a></li>
<li><a href="../117724/index.html">Save Google Video Content!</a></li>
<li><a href="../117725/index.html">Opera and Microsoft at the round table "Web Standards" at RIF + CIB 2011</a></li>
<li><a href="../117729/index.html">Bryansk Web Day 2011</a></li>
<li><a href="../117732/index.html">How to assemble a copter (flying platform) in 2 hours</a></li>
<li><a href="../117733/index.html">Video blogger Oleg Kozyrev joins other popular bloggers in using Creative Commons licenses</a></li>
<li><a href="../117734/index.html">Chinese typewriter</a></li>
<li><a href="../117735/index.html">Capturing video from network cameras, part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
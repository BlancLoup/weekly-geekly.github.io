<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Designing a notification system for web applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is about how we designed a universal alert system for our web applications and what happened in the end. I will not argue that the result...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Designing a notification system for web applications</h1><div class="post__text post__text-html js-mediator-article">  This article is about how we designed a universal alert system for our web applications and what happened in the end.  I will not argue that the result obtained is the only correct one, but I consider it to be quite good.  If you have experience in solving such a problem, I invite you to share it in the comments. <br><br><h4>  The essence of the task </h4><br>  <b>Given: a</b> web-based collaboration application.  For simplicity, we assume that this is a CRM or Task Tracker. <br>  <b>Required:</b> timely notify users of events in the application to which their response is required. <br><br><h4>  What is the problem? </h4><br>  Everything would be very simple if we had a specific application with strictly defined work scenarios and fixed user roles.  But in our case it is not.  We develop various systems for accounting and automating business processes based on the platform constructor.  And the alert system needs to be done at the platform level, so that later it can be used in any applications. <br><a name="habracut"></a><br><h4>  <s>The first pancake</s> The first quick decision </h4><br>  Initially, the simplest version of alerts was implemented - showing all changes made by other users when users logged in to the application.  With a small amount of changes, this method has the right to exist, but with an increase in the amount of data and the number of users, we get an endless list, which once, and there is no need to look at: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/612/2f5/f80/6122f5f8030dfd7d4b293afcad500638.png"><br><br>  In addition to a too large list of changes, this block has ‚ÄúWhat's new?‚Äù And other problems: <br><ul><li>  It is not clear which changes occurred in the data (which field has changed and how) </li><li>  It is not known who made these changes and when </li><li>  It is not clear if I (as a user) are required to react to these changes. </li></ul><br>  It would seem that to answer all these questions there is an action log, which stores the most detailed information about each transaction: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/537/a54/c18/537a54c189fa6a55c45fef2b69380b48.png"><br><br>  However, as practice shows, it is inconvenient to use the action log to obtain operational information about events in the application.  As a rule, such detailed information about changes is required in rare cases - it is used by the manager during the "debriefing".  And in real time, an employee needs not so much <b><i>detailed</i></b> , how much <b><i>selective</i></b> information - with an emphasis on the changes he is interested in.  For example, after the ‚ÄúCompletion of the Case‚Äù (from the example above) I would like to see such information: <br><blockquote>  Today, at 12:48 <u><b>pm,</b></u> <i><b>Ivanov</b></i> completed the <u><b>P4D1</b></u> case <u><b>: Preparation of application documents</b></u> . <br>  <i><b>Petrov is</b></i> assigned the <u><b>P4D2</b></u> case <u><b>: Obtaining the original application from the client</b></u> . </blockquote><br>  This is if I am the leader of these Ivanov and Petrov and I want to control them as much as possible.  If I am Petrov, then it will be more convenient for me to receive an alert in this form: <br><blockquote>  You have a <u><b>P4D2</b></u> case <u><b>assigned: Receiving the original application from the client</b></u> .  Deadline - 2 days. </blockquote><br>  It turns out that alerts should be configured differently for different users and different events <i>(thanks, cap)</i> .  It's time to analyze when and which alerts users really need. <br><br><h4>  Alert classification </h4><br><h5>  By origin </h5><br><ul><li>  <b>The data that interests me is changed.</b>  For example, if a task is assigned to me, I want to know it.  If tasks are created or changed that have nothing to do with me, then it is not interesting for me. </li><li>  <b>The time has come.</b>  For example, a week ago we agreed with a client that I would call him today at 3:00 pm.  If this is not my only agreement for this week, then it is likely that I will safely forget about it.  So it will be useful for me to receive a reminder at the right time (or some time before it). </li><li>  <b>A specific event has occurred.</b>  For example, an attempt was made to log in to the application with an incorrect password or from a forbidden IP address.  It may worry me (as the administrator of the application). </li></ul><br><h5>  By the one who needs to be notified </h5><br><ul><li>  <b>All users.</b>  In practice, it rarely happens that everyone should be notified of the same events.  Unless it is any news of the company about which all employees should know. </li><li>  <b>Users with a specific role.</b>  The administrator configures which user roles which alerts should be displayed. </li><li>  <b>Specific users.</b>  It happens that some user needs a unique set of alerts, and creating a new role for him only to configure this set does not make sense.  Then you can assign an alert to a specific user.  Another situation where this may be needed is if the administrator is not opposed to users choosing which alerts they want to see.  In this case, it is also necessary to store the setting for a specific user. </li><li>  <b>Calculated users.</b>  For example, when creating a task, you need to notify only the user specified in the "Responsible" field.  It is not known in advance (at the setup stage) who will be responsible for which task, so it is impossible to assign an alert to a specific user.  And when saving data, this information in the system already exists - that‚Äôs what we use when generating an alert. </li></ul><br><h5>  By way of notification </h5><br><ul><li>  <b>Real-time.</b>  Alerts come in real time.  As soon as the event has come, the user is given a message directly in the browser or as a pop-up window in the tray.  To attract attention, the message may flash and make a sound. </li><li>  <b>By SMS.</b>  This method of notification makes sense when the reaction to an event is required immediately and the user does not have access to the real-time notification.  As a rule, this method is used to report important events to employees working ‚Äúin the fields‚Äù without access to the Internet or simply without the ability to keep the browser open all the time. </li><li>  <b>By email.</b>  Notification in the form of an e-mail makes sense to use for rare events that do not require prompt response.  You can also use the email alert as a backup option in case the user was not in the app at the right moment. </li><li>  <b>In the news feed.</b>  Such alerts do not attract attention at the time of appearance, but they can be viewed at any time at the initiative of the user.  Rather, it is not even an alert, but a personalized event history in the application. </li></ul><br><h5>  By shelf life </h5><br><ul><li>  <b>Generally not stored in the database.</b>  They informed the user about an important event for him - they sent a message to the browser or a letter to the post office - and in no way control whether it reached the addressee.  The problem with this option is that in some cases the user may not receive a notification ‚Äî for example, he closed the browser, did not read the message, or the letter got into spam ‚Äî and we won‚Äôt find out about it.  And the user does not know that he missed something. </li><li>  <b>Removed automatically after reading.</b>  A suitable option when there are a lot of alerts, and there is little information in the alert text.  When the user only needs to read the message once and he can start the task right away. </li><li>  <b>Marked read, requires explicit removal.</b>  Suitable for the case when we learn about the task now, and it can be done later.  Then the alert will remain in the list as a reminder, and when the task is completed, you can delete it manually. </li><li>  <b>Removed automatically after a while.</b>  If there are many alerts and they lose relevance over time (for example, notification of a colleague's birthday or a change in work schedule on a certain day), then it makes sense to delete them automatically after a specified time - regardless of whether they are read by the user or not. </li></ul><br><h4>  Result </h4><br>  So, all needs are taken into account in the analysis.  Like nothing is forgotten.  Now you need to come up with a setting that allows you to create any alert.  We have not yet thought about the beauty of the interface, and the configuration structure turned out like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d7a/a88/bc8/d7aa88bc8a682519be0144a477a7ff2d.png"><br><br>  The attentive reader will notice that the retention period for alerts in this setting is not selected.  We decided that this setting can be set not for each individual alert, but at a higher level - for the entire application.  Perhaps this is a temporary solution, and a fine tuning of the shelf life is still needed.  Experience will show. <br><br><h4>  Conclusion </h4><br>  As already mentioned at the beginning of the article, the solution found does not claim to be ideal.  I do not exclude that in the future it may somehow be supplemented or even completely changed.  I hope in the comments to meet constructive criticism and other solutions to the problem. </div><p>Source: <a href="https://habr.com/ru/post/206220/">https://habr.com/ru/post/206220/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../206208/index.html">Handling annotations during compilation</a></li>
<li><a href="../206210/index.html">Synchronization in Android applications. Part one</a></li>
<li><a href="../206212/index.html">LG A290 TriSim. One year later</a></li>
<li><a href="../206216/index.html">$ 7M investment in symfony and sensiolabs</a></li>
<li><a href="../206218/index.html">We build in polls for users of Android applications</a></li>
<li><a href="../206222/index.html">DirectWrite support added to Chrome Canary</a></li>
<li><a href="../206224/index.html">Live migration in OpenStack</a></li>
<li><a href="../206230/index.html">Filtering SharePoint lists, address bar settings</a></li>
<li><a href="../206234/index.html">Tasks for interviews in Yandex</a></li>
<li><a href="../206236/index.html">Per capita e-rubbish - an interactive map shows the reality of each country</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
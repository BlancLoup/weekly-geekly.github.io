<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Black box for the house: collect NAS do-it-yourself, part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If I were an employee of a macaroni factory, I would now have puzzled over what to do with 500 packs of pasta a pound each. Fortunately, when the auth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Black box for the house: collect NAS do-it-yourself, part 1</h1><div class="post__text post__text-html js-mediator-article"> If I were an employee of a macaroni factory, I would now have puzzled over what to do with 500 packs of pasta a pound each.  Fortunately, when the authorities decide to award the sysadmin ‚Äúin kind‚Äù, receiving a dry ration van as a gift does not threaten, although there are good chances to become the owner of several dozen kilograms of frank scrap.  However, this time I was lucky - as a corporate gift I received a pair of brand new WD Re 2004FBYZ for 2 terabytes each, and the Thermaltake Smart DPS G 750W power supply unit.  That's just what to do with the disks?  To put in a home computer is too wasteful even for me, after all, Enterprise Class, and there is no special need.  Much more practical on their basis to collect NAS.  Of course, not some kind of file dump, but highly reliable storage - a kind of ‚Äúblack box‚Äù for critical data.  Plus, you can combine business with pleasure - once the decision has been made to completely transfer the infrastructure to ‚Äúsmart‚Äù PSUs (and this is how Thermaltake is positioning the Smart DPS line), it would be nice to see how it works. <br><br>  But there is one snag - at the moment a proprietary application exists only under Windows.  For an enterprise data center, this operating system is good, but for home file storage is terrible and extremely unprofitable.  Therefore, I decided to make two posts.  In this, we will raise a NAS based on Windows Server 2008 r2 (making sure that the ‚Äúwindows‚Äù and ‚Äúhome NAS‚Äù are incompatible concepts), and see what the DPS G App 2.0 is capable of.  In the second we will collect a budget NAS based on NAS4Free, creating a truly reliable system. <br><a name="habracut"></a><br><h2>  Foreword </h2><br>  In order not to be filled with tomatoes, I want to warn you right away - the article is intended primarily for non-professionals.  Although it will be interesting to even experienced administrators and enthusiasts to read about Smart Power Management from Thermaltake, the main material is aimed at people who do not want to overpay for a big name, buying ready-made solutions, and at the same time are far from system administration (programmers, designers, web developers, etc.). .d.)  If your hand is hard enough to assemble a computer from components, but you don‚Äôt want to deal with server software for a long time, and the console has only been seen in dreadful dreams - this stuff is for you.  If you want to look at SPM Cloud to decide how this system can be useful for you, turn the post to the subtitle ‚ÄúHow smart is the smart power supply?‚Äù.  By the way, I warn you - under the cut a lot of photos and screenshots. <br><br><h2>  Simple but tasteful </h2><br>  Immediately make a reservation - I did not seek to assemble a home NAS only on the basis of cost.  Selecting components, I was guided by how well the components are suitable for the implementation of the task, while not forgetting the quality characteristics.  Is it possible to build a budget NAS at lower cost?  Can.  But it can also be lost in performance and convenience, which I would not want.  As a result, the following happened. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Housing</b>  The Thermaltake Core V1 took over the role of the data storage case - a cute, all-metal cube with a quiet 200 mm fan behind the front bezel. <br><br><img src="https://habrastorage.org/files/9d2/e5d/473/9d2e5d4735334d48bb160db30a4028b3.jpg"><br><br>  Behind there are seats for a couple of fans at 80 mm, so that the network storage can be made really cold. <br><br><img src="https://habrastorage.org/files/bbf/0c3/4de/bbf0c34de4c542839e58e06996352eda.jpg"><br><br>  As well as in other modern models, for the power unit here the lower compartment is set aside.  Dust protection provides a metal filter. <br><br><img src="https://habrastorage.org/files/980/33c/370/98033c370a00430f9181081e32cdbf97.jpg"><br><br>  Another advantage of the Core V1 are 4 removable walls (side, roof and bottom), which greatly facilitates the assembly procedure.  Each panel is fastened with a pair of screws that can be easily loosened by hand.  I also quite liked the implementation of the disc baskets - each of the four fixing screws received its own rubber damper, which dampens vibration quite well: <br><br><img src="https://habrastorage.org/files/7cc/655/c96/7cc655c96d8e432ba7cc777ddf80bda5.jpg"><br><br>  <b>Motherboard.</b>  Here my choice fell on the GIGABYTE GA-J1800N-D2H with integrated Intel Celeron.  The dual-core processor with base 2.41 GHz for the network storage device is enough for the eyes (although Windows Server will load it 100%, but the windows are not our target platform), it is quite economical and does not require active cooling (there is no need to buy a cooler) . <br><br><img src="https://habrastorage.org/files/bb8/e27/2d7/bb8e272d7d994c06b0835c5ab004053b.jpg"><br><br>  Despite its cheapness, Gigabyte introduced its proprietary chips into the product: High ESD technology, providing protection against electrostatics for microchips and LAN, as well as Anti-Surge IC, which prevents the motherboard from failing due to power surges - everything you really need. reliable system.  The only controversial point is the location of the internal USB connector close to the radiator: it is simply inconvenient to work with it. <br><br><img src="https://habrastorage.org/files/695/1bf/d2a/6951bfd2a0934eacbd1f64fd84e6f84f.jpg"><br><br>  <b>RAM.</b>  Nothing special - the usual Transcend 2Gb DDR-III 1333Mhz in the SO-DIMM form factor.  If somewhere in the closet strayed an old laptop, you can remove the modules from it. <br><br><img src="https://habrastorage.org/files/e10/682/068/e10682068a7041b5937a2198a3bfecb8.jpg"><br><br>  <b>Power Supply.</b>  Solid Thermaltake Smart DPS G 750W, designed for high-performance PCs and server platforms certified to 80 PLUS Gold.  For a full-fledged server or workstation - just right, for building a NAS with your own hands - too powerful, but during the experiment you can pamper yourself by installing a nitros on a small car. <br><br><img src="https://habrastorage.org/files/629/cb8/0ee/629cb80ee3364f21af46a5228e289190.jpg"><br><br>  Of course, a modular connection of cables is provided in the device of this class.  Of the built-in - only connectors of the motherboard and processor (shared 4 + 4 pin, which had to be very handy during assembly). <br><br><img src="https://habrastorage.org/files/d3c/c9c/29e/d3cc9c29ed6c489ebc6800e619628fb2.jpg"><br><br>  Additional convenience is provided by flat cables, although even they fit in a compact Core V1 with difficulty - yet the case is not designed for this.  Among them was the wire to connect the Thermaltake Smart DPS G 750W to the internal USB connector.  Obviously, it provides the interaction of the onboard 32-bit microcontroller with the sensors of the motherboard, and is necessary for the full functioning of Smart Power Management.  However, about how the monitoring system justifies itself and what features it provides, we will talk a bit later. <br><br>  <b>Cooling.</b>  Two quiet unregulated TITAN DC FAN.  Once we want to build a quiet NAS without extra costs, this option will be optimal. <br><br><img src="https://habrastorage.org/files/93d/fca/618/93dfca6184194e27820f74083e8c80b0.jpg"><br><br>  <b>Hdd</b>  Although they don‚Äôt look a gift horse in the mouth, I consider it necessary to say a few words about the heroes of the occasion - the sweet couple WD Re 2004FBYZ.  After all, whatever one may say, the safety of information depends on the quality of hard drives. <br><br><img src="https://habrastorage.org/files/b6d/7e6/489/b6d7e6489ee94cad877fdc06b2f7d32e.jpg"><br><br>  If you refer to the manufacturer's specifications, everything looks very tasty.  So, hard drives are equipped with accelerometers and pressure sensors, on the basis of which Rotary Acceleration Feed Forward (RAFF) technology is implemented, which provides protection against linear and angular vibration in real time, which increases both reliability and performance.  As a server solution, WD Re 2004FBYZ also has TLER (Time Limited Error Recovery), which limits the time of correction in order to prevent the disk from erroneously falling out of the RAID array.  Add to this the stated time to failure in 1.2 million hours, and we get almost perfect. <br><br>  However, it is difficult to judge the truthfulness of beautiful words and sophisticated abbreviations until you try the product yourself.  And here I can only say that I am typing this article on a computer, within which the terabyte Caviar Black has been working for six years already.  Yes, and a 2.5-inch baby in an old Dell Inspirion 1501, now given to parents, feels just as good.  Actually, the transfer of the infrastructure to WD at the current place of work took place exactly at my suggestion - I had a long and very productive relationship with this brand.  I have been using their disks for more than a year, they have never let me down, and today I don‚Äôt see any reason to change my preferences. <br><br>  <b>Flash drive.</b>  Any 8GB USB drive.  Of course, compact ‚Äúplugs‚Äù, whose case practically does not protrude above the connector, are optimally suited. <br><br>  Now from this stuff you need to collect network storage - everything is quite simple.  If you have at least once self-assembled computer, then cope without any difficulty.  I will note only a few key points: <br><br><ul><li>  Additional coolers should be put on blowing - then we will achieve flow-through air circulation from front to back and optimal cooling; </li><li>  When you install the motherboard, watch the metal jumper above the USB 3.0 hole on the rear panel - acting carelessly, it can be bent and, thus, block the connector; </li><li>  Disc baskets are fixed with a single screw, but they are installed rather rigidly and can not be fed immediately.  To remove the basket, it must be pulled away from the body and slightly downwards; </li><li>  On the motherboard there is no connection for external USB 3.0, you can safely hide this wire in the lower compartment of the case. </li></ul><br><h2>  Entertaining mathematics </h2><br>  Perhaps, it is worth taking a small groove and counting how our budget assembly turned out.  So let's get started: <br><br><ul><li>  Case: Thermaltake Core V1 - 3 764 rubles. </li><li>  Power supply: no matter how good the Thermaltake Smart DPS G 750W is, it is too luxurious for a small file storage.  In the future I plan to put there Chieftec HPS-350NS - 1560 rubles. </li><li>  Motherboard: GIGABYTE GA-J1800N-D2H - 4436 rubles. </li><li>  RAM: Transcend SO-DIMM 2Gb DDR-III 1333Mhz x 2 - 3040 rubles. </li><li>  Cooling: TITAN DC FAN (80 mm, 2000 rpm) x 2 - 404 rub. </li><li>  USB-drive: 300 rubles. </li></ul><br>  <b>Total: 13,504 rubles.</b> <br><br>  I deliberately did not take into account the HDD, in order to compare with the products of Synology.  For example, DiskStation DS216 + will cost you 28,173 rubles, while under the hood we will see a very modest stuffing: Intel Celeron N3050 1.6 GHz, RAM - 1 Gb, all the same two 3.5 mm seats for disks.  If WD Re 2004FBYZ hadn‚Äôt gotten to me for nothing, I would have paid another 17,660 rubles, and the final costs would be close to 31,000 - the cost of the ‚Äúbare‚Äù platform of a popular brand.  Yes, our assembly is less compact, but more productive and reliable, and this is almost at half price!  And if there is a difference, then pay more?  With this, a small lyrical digression is completed - time to move on and commission our car! <br><br><h2>  Windows Server - the worst solution for home NAS </h2><br>  Even if you haven‚Äôt seen * nixs in your eyes, even if you are trembling at the sight of the command line, even if the ‚Äúwindows‚Äù seem familiar and instill a sense of security, do not try to raise your personal Windows-based file storage.  Why?  I'll tell you in the course of this material.  But first we will deal with the installation. <br><br>  We will install Windows Server 2008 r2, of course, from a flash drive.  To create a bootable drive, you can refer to the <a href="https://blogs.technet.microsoft.com/iwalker/2009/01/21/windows-7-windows-server-2008-r2-c-usb-10/">following instructions</a> , or use the <a href="http://wudt.codeplex.com/">Windows USB / DVD Download Tool</a> utility, which is also recommended in the official <a href="https://blogs.technet.microsoft.com/abeshkov/2009/10/25/windows-7-windows-server-2008-r2-usb-108/">Microsoft blog</a> .  The same can be done with the help of <a href="https://rufus.akeo.ie/%3Flocale%3Dru_RU/">Rufus</a> , which, moreover, will be able to check the memory for broken blocks (one or two passes will be enough), or install in Windows To Go mode, which will allow you to run the OS directly from the device. <br><br><img src="https://habrastorage.org/files/f7f/d54/569/f7fd54569b124efdb4252239d12c60bf.JPG"><br><br>  However, the last option is not the best idea, given the peculiarities of the operating system and the required disk space for it, so let's make a regular bootable USB flash drive. <br><br>  Now you can start the installation, and here we see the first pitfall - the size.  Want to put a standart editor with a visual interface?  Be so kind as to allocate 24 gigabytes.  In the case of a pair of disks, it is too wasteful.  Otherwise, there are no nuances: as in the version for home use, it all comes down to ‚ÄúNext-Next-Done‚Äù. <br><br>  Logging in to the system, you will see the following argument ‚Äúagainst‚Äù - the need to activate.  I do not plan to use Windows Server as the basis for the NAS - all this is, first of all, an experiment, so I will confine myself to the trial, which Microsoft itself kindly provides.  Run regedit, look for the registry key <br><br> <code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\SoftwareProtectionPlatform\Activation\Manual <br></code> <br>  change its value by one and reboot the machine.  Now the trial period has increased from 3 to 30 days.  In total, it can be extended up to six months using the slmgr.vbs script.  The slmgr.vbs -dli command will help you know how much time is left until the end of the current license, and slmgr.vbs ‚Äìrearm to reset the evaluation period (no more than three times).  <a href="https://support.microsoft.com/ru-ru/kb/948472/">The process can be automated</a> by creating a small XML file. <br><br>  I would like to express one more ‚Äúfairy‚Äù in the direction of the ‚ÄúUpdate Center‚Äù.  Windows Server 2008 r2 SP1 was later released more than 300 patches of different caliber.  It will take several hours to install them all, and the patches conflict with the addition of server roles.  That is, it is necessary to update either before or after, the process takes a lot of time, and loads the system to the maximum: <br><br><img src="https://habrastorage.org/files/78f/35f/b64/78f35fb64dad48788d6f1d62ba28e3db.PNG"><br><br>  There is also a regrettable bug.  After installing the updates, you may find that the space on the system disk began to disappear by itself.  If you notice a leak, go to the folder C: \ Windows \ Temp.  Almost certainly you will see this picture: <br><br><img src="https://habrastorage.org/files/247/9c5/357/2479c535751d48538a57b1ecd44fec79.PNG"><br><br>  The point is in the failure to archive update logs - the system spawns damaged archives at a terrible speed, after each error, it starts the procedure again.  It is treated by deleting all files from the folder C: \ Windows \ Logs \ CBS, after which you can safely clean the Temp directory. <br><br><img src="https://habrastorage.org/files/4ed/e1d/ab1/4ede1dab13de47968b9e5beaa4fc9d21.PNG"><br><br>  However, we move on.  And the first thing that needs to be done is to configure autologin, the benefit of the NAS will still be in the home network, and every time entering a password is too tedious.  Go to ‚ÄúStart‚Äù -&gt; ‚ÄúRun‚Äù and drive the control userpasswords2 command. <br><br><img src="https://habrastorage.org/files/13a/321/51c/13a32151c10f4248bcc38e720dc6ee4c.PNG"><br><br>  Selecting the ‚ÄúAdministrators‚Äù group, uncheck ‚ÄúRequire user name and password entry‚Äù, save the selection. <br><br><img src="https://habrastorage.org/files/7f4/6a9/b32/7f46a9b3272e49d488b0f150a9d582fb.PNG"><br><br>  Now we will deal with remote connection.  The easiest way to use the built-in desktop manager.  To activate it, go to ‚ÄúStart‚Äù -&gt; ‚ÄúControl Panel‚Äù -&gt; ‚ÄúSystem and Security‚Äù -&gt; ‚ÄúRemote Access Settings‚Äù, select the second or third item (if you plan to display the NAS to the Internet).  You should also set a simpler and laconic computer name on the tab of the same name. <br><br><img src="https://habrastorage.org/files/033/689/3f5/0336893f540c4e329b7743288a37462c.PNG"><br><br>  <a href="http://www.litemanager.ru/">LiteManager</a> can become an alternative - a multifunctional program that is free for a private user and has many useful functions: file transfer, direct access to the console, registry editor, task manager, and several others.  When installing the server side on the NAS, set the access password that will be used when logging in: <br><br><img src="https://habrastorage.org/files/fcf/5d6/26d/fcf5d626d4e140cb8c0d55c9ef29adeb.JPG"><br><br>  If you plan to release your home NAS to the Internet, you can further configure the IP filter: <br><br><img src="https://habrastorage.org/files/22a/6ad/f7c/22a6adf7c6424a3bbd49ab7b368c5e89.JPG"><br><br>  Make sure the LM Server is in automatic startup mode: <br><br><img src="https://habrastorage.org/files/1ca/c17/17a/1cac1717a9784a59a644e05cb277d0ae.JPG"><br><br>  Also do not forget to set the static address for our machine in the properties of the adapter: <br><br><img src="https://habrastorage.org/files/044/7c8/ade/0447c8ade834402f81cc3e9a298d83b6.PNG"><br><br>  where 192.168.1.1 is the address of the router.  Finally, enable network discovery and sharing of files and folders in ‚ÄúControl Panel‚Äù -&gt; ‚ÄúNetwork and Internet‚Äù -&gt; ‚ÄúNetwork and Sharing Center‚Äù -&gt; ‚ÄúChange advanced sharing settings‚Äù. <br><br>  After the operations described above, you can connect the NAS to your home network with a clear conscience.  If further control will be exercised through the LM Viewer, install the application on your computer and add a new connection by clicking on the plus on the toolbar and filling in the required fields: <br><br><img src="https://habrastorage.org/files/ec4/028/d1d/ec4028d1d023441cb73c8520dca998d3.JPG"><br><br>  where 192.168.1.250 is the NAS IP address.  Or use the built-in Windows remote desktop connection utility. <br><br>  Now let's create a section for storing information.  Go to ‚ÄúServer Manager‚Äù -&gt; ‚ÄúStorage‚Äù -&gt; ‚ÄúDisk Management‚Äù, right-click on unallocated space on the system disk, select ‚ÄúCreate a simple volume‚Äù and, following the wizard‚Äôs prompts, create the main section ‚ÄúData‚Äù formatted in NTFS. <br><br><img src="https://habrastorage.org/files/20c/3a4/9ce/20c3a49cebcb42a89714f27b658a426b.PNG"><br><br>  You can proceed directly to raising the file server.  Open in the manager ‚ÄúRoles‚Äù -&gt; ‚ÄúAdd roles‚Äù. <br><br><img src="https://habrastorage.org/files/206/f5f/4d7/206f5f4d71ae42abb55f0f75ce71db90.PNG"><br><br>  After the welcome wizard window, a list of available will appear.  We are interested in ‚ÄúFile Services‚Äù: <br><br><img src="https://habrastorage.org/files/e49/60b/9f2/e4960b9f28be4335931aab320947bc0a.PNG"><br><br>  In the next window, check the box next to ‚ÄúFile Server Services Manager‚Äù, optionally, you can enable ‚ÄúWindows Search Service‚Äù. <br><br><img src="https://habrastorage.org/files/296/413/d5d/296413d5d7834a4c9fcb4bc750f48010.PNG"><br><br>  In ‚ÄúMonitoring the storage‚Äù we mark our section ‚ÄúData‚Äù: <br><br><img src="https://habrastorage.org/files/ea9/d93/a00/ea9d93a008eb40d6a547118605378642.PNG"><br><br>  Here, by pressing the ‚ÄúParameters‚Äù button, we set up the monitoring of the volume.  For convenience, you can add reports about duplicates and large files. <br><br><img src="https://habrastorage.org/files/ce3/ff0/4f0/ce3ff04f02be4d77b228fa8c340b9085.PNG"><br><br>  In the ‚ÄúReport Parameters‚Äù set the path for storing records: <br><br><img src="https://habrastorage.org/files/2d2/50c/246/2d250c24678740568b1540a6332409ea.PNG"><br><br>  If you have connected Windows Search, select the indexing of the ‚ÄúData‚Äù volume: <br><br><img src="https://habrastorage.org/files/95b/9f6/fb5/95b9f6fb569144c79640b2c2fe0eb7d5.PNG"><br><br>  We confirm the choice and wait for the end of the installation.  After that, the capabilities of the file manager will be available to us (located in ‚ÄúStart‚Äù -&gt; ‚ÄúAdministration‚Äù).  From the whole range of tools offered, home quota management is useful for home use. <br><br><img src="https://habrastorage.org/files/2d9/05b/287/2d905b287374420890aebe33adb8e43f.JPG"><br><br>  As you can see, the ‚ÄúData‚Äù section has already received a ‚Äúsoft‚Äù quota by default.  This means that if it is filled more than 85%, we will receive an alert, but the recording of files in the NAS will still be available.  Quotas can be set not only for partitions, but also for individual directories.  Let's create a ‚ÄúMusic‚Äù folder on the ‚ÄúE‚Äù disk and set a size limit for it.  Click "Create a quota" and select the path: <br><br><img src="https://habrastorage.org/files/699/437/5da/6994375da38e4703a89e67d4e23aca01.JPG"><br><br>  In the ‚ÄúCustomizable Properties‚Äù, we indicate the limit of 300 GB and select the ‚ÄúHard‚Äù option so that the music does not lead to a situation where there is no space for regular backups and important documents on the disk: <br><br><img src="https://habrastorage.org/files/362/157/01a/36215701a47141e48f0fd0009562912a.JPG"><br><br>  Add a threshold value of 85% and set the notification method: <br><br><img src="https://habrastorage.org/files/c19/e9c/f4a/c19e9cf4a73142f889a800882b29ecf0.JPG"><br><br>  As a result, we get: <br><br><img src="https://habrastorage.org/files/e7d/e39/d7c/e7de39d7c31d41e1bd8e7d37bad0d5a8.JPG"><br><br>  After clicking the ‚ÄúCreate‚Äù button, the system will offer to save the settings to a template.  Subsequently, this will allow us to apply similar rules to other folders in one click. <br><br><img src="https://habrastorage.org/files/28f/8dc/4b8/28f8dc4b867645629bf6563ba17e04b1.JPG"><br><br>  In order for a new quota to appear in the list, you must reconfigure the filter.  Click on the link of the same name and select ‚ÄúAll‚Äù values: <br><br><img src="https://habrastorage.org/files/12f/c65/954/12fc659546e841bfb11ab94bbcfe5182.JPG"><br><br>  Now the new quota is also visible on the main screen: <br><br><img src="https://habrastorage.org/files/514/7fd/a66/5147fda66f45448da7215521e9a87d00.JPG"><br><br>  Another option that may be useful if, in addition to your file storage, your wife, children, and your favorite cat use file locking control.  It allows you to exclude the download of files of certain extensions in certain directories. <br><br><img src="https://habrastorage.org/files/5a1/5b5/05b/5a15b505bcca47e68d73ae86a4fc0b63.PNG"><br><br>  Let's create the Backup directory and prevent it from littering with music and video.  To do this, simply click on ‚ÄúCreate file block filter‚Äù, select the desired directory and, in our case, the preset ‚ÄúBlock audio and video files‚Äù template. <br><br><img src="https://habrastorage.org/files/157/b4e/bda/157b4ebda46744e8bc401b2dd5682cd6.PNG"><br><br>  The template lists almost all the most common formats, but you can always add new ones in the appropriate section: <br><br><img src="https://habrastorage.org/files/a2b/977/310/a2b9773104684ffcaea73479a26dc84b.PNG"><br><br>  Clicking on ‚ÄúChange template properties‚Äù, we get to the setup menu. <br><br><img src="https://habrastorage.org/files/f45/73f/19f/f4573f19f088430aaed874ef48f68ed6.PNG"><br><br>  Here, by clicking the "Edit" button, you can call the section to add new extensions and delete existing ones, as well as familiarize yourself with the pre-installed ones: <br><br><img src="https://habrastorage.org/files/501/c01/c29/501c01c2963f474ba3352680fac7662e.PNG"><br><br>  It remains to make our folder available on the network.  To do this, go to ‚ÄúStart‚Äù -&gt; ‚ÄúAdministration‚Äù -&gt; ‚ÄúComputer Management‚Äù -&gt; ‚ÄúShared Folders‚Äù -&gt; ‚ÄúShared Resources‚Äù and create a new one.  Then just follow the prompts of the wizard.  First, specify the path to the folder: <br><br><img src="https://habrastorage.org/files/4d1/b15/ba6/4d1b15ba683c40b6976759d9fa732740.JPG"><br><br>  In the next step we set its parameters (you can leave it by default): <br><br><img src="https://habrastorage.org/files/a40/1d2/697/a401d2697de04d3c86d39777de81c3bb.JPG"><br><br>  Configure access permissions.  For a local network, you can open access for everyone, for the Internet - leave only to administrators: <br><br><img src="https://habrastorage.org/files/1a2/214/c5d/1a2214c5d24f44b5996b825d871a61bf.JPG"><br><br>  Now the ‚ÄúMusic‚Äù folder will be available directly from any computer on your home network - just type the address \\ NAS \ Music in the explorer and log in.  We will perform a similar procedure for the Backup directory, and at the same time we will check how file locking works by trying to load a movie into it. <br><br><img src="https://habrastorage.org/files/e0e/428/8ac/e0e4288ac5114a2a88fc4be0f902e9c8.PNG"><br><br>  Access is denied - everything works fine. <br><br>  The final touch is the creation of software RAID-1.  There is nothing difficult in this: go to ‚ÄúServer Manager‚Äù -&gt; ‚ÄúStorage‚Äù -&gt; ‚ÄúDisk Management‚Äù, right-click on the system disk (‚ÄúDisk 1‚Äù in our example), and select ‚ÄúConvert to dynamic disk‚Äù. <br><br><img src="https://habrastorage.org/files/015/040/809/015040809780497891b322965c90bd9b.PNG"><br><br>  Then alternately click on each volume, choosing in the menu ‚ÄúAdd a mirror‚Äù.  All partitions ‚Äúwill be reflected‚Äù on the second disk and resynchronization will begin: <br><br><img src="https://habrastorage.org/files/b3d/77f/09f/b3d77f09fb954eadbe6ee4dad4b9e618.PNG"><br><br>  And here is another argument against.  The fact is that the resynchronization process for a 2 terabyte HDD will last more than 5 hours.  The discs will be checked completely, no matter how much information is recorded, and their download will tend to 100%.  Of course, WD Re is able to withstand such a test, only you cannot use NAS normally during this period: the write / read speed will drop significantly. <br><br>  Speaking of speed: let's evaluate the speed of the array in real conditions.  This is what happened when I transferred the Rammstein discography to a network folder: <br><br><img src="https://habrastorage.org/files/3dc/d25/e0b/3dcd25e0b12b4b00b50626ced0c49f1d.JPG"><br><br>  Not bad at all, but NAS4Free can really make you feel better.  Free and resource-less OSes are optimal for home NAS and can work with the ZFS file system, where disk mirroring is implemented much more intelligently and reliably.  At the same time, the primary synchronization process is absent in principle.  That is why I recommend NAS4Free for organizing home file storage.  However, we'll talk about it in the next post, and now let's get down to the most interesting. <br><br><h2>  How smart is the smart power supply? </h2><br>  Do you like quests in reality?  I remembered about them because my acquaintance with the DPS App and the Smart Power Managment started right from this mini-quest.  Google helpfully prompted the <a href="http://ru.thermaltake.com/products-model.aspx%3Fid%3DC_00002578">page for downloading the application</a> by clicking on the cherished button, I saw this form: <br><br><img src="https://habrastorage.org/files/a15/b48/e30/a15b48e301d44512b5660e4fd53b47b9.JPG"><br><br>  Nothing unusual - many companies ask for your E-mail for the newsletter.  However, I entered my address instead of the utility: <br><br><img src="https://habrastorage.org/files/752/5ad/074/7525ad0748d14f0685f127be992770c3.JPG"><br><br>  Even without a translator, it is clear that the requested page was not found.  What could be wrong?  It turns out that everything works a bit wrong.  First you need <a href="https://dps.thermaltake.com/ru/feed/feedlist/">to create an account</a> in the system, confirm the registration, and only then you can download the utility in the ‚ÄúProducts‚Äù section. <br><br><img src="https://habrastorage.org/files/ffe/647/658/ffe647658c4841ceb889a3dd5a533f60.JPG"><br><br>  Another important nuance is that if you adhere to the golden rule for compiling passwords, including special characters, then you will have to abandon this practice.  There will be no problems with authorization on the site, however, the DPS App simply will not accept the passphrase, displaying an error: <br><br><img src="https://habrastorage.org/files/0df/36b/5c3/0df36b5c36ee4582bbeba18d2f293712.JPG"><br><br>  Therefore, it is necessary to limit the combination of Latin letters and numbers.  However, we will not judge strictly: while the system is in beta testing, such bugs are quite natural. <br><br>  Now let's finally download and install the application itself.  Please note that Microsoft .NET 4.5, Adobe Flash Player ActiveX, as well as the current version of Java are required for its correct operation.  After launching, the utility will offer to log in to synchronize with SPM, which we will do. <br><br><img src="https://habrastorage.org/files/5a1/d04/5b1/5a1d045b197b4197acd94000fc39ba94.PNG"><br><br>  The equipment is automatically detected (in earlier versions, the serial number had to be specified manually).  After successful login, this window will appear: <br><br><img src="https://habrastorage.org/files/83b/50a/912/83b50a9126e34edfb6dd587b85e7e52e.PNG"><br><br>  You should not be afraid - the program wants to determine your coordinates for display on an interactive map (about it later), but positioning can be turned off. <br><br>  Now let's see what the application actually offers us.  In the assortment - a whole set of scanners, allowing you to control the following parameters: <br><br><ol><li>  Total voltage and voltage for each of the connected lines; </li><li>  Voltage on the central processor and video card; </li><li>  Current strength; </li><li>  Total power. </li></ol><br><img src="https://habrastorage.org/files/99b/28a/390/99b28a390e3247d9a9b5d939e7cbb4c5.PNG"><br><br>  With the help of round arrows you can turn on the graph mode, which displays changes in real time: <br><br><img src="https://habrastorage.org/files/b4f/5af/9a1/b4f5af9a126141c09a06a3483e36fb70.PNG"><br><br>  There is also a temperature sensor BP, where you can select the unit of measurement to taste: <br><br><img src="https://habrastorage.org/files/cad/9e5/998/cad9e5998b8b4fe098150a0586eafe36.PNG"><br><br>  Thermaltake Smart DPS G 750W fan control is also available in the DPS App.  In the ‚ÄúPerformance‚Äù mode, the unit will select the optimal speed, almost equalizing the temperature of the power supply components with the ambient temperature.  The ‚ÄúZero fan‚Äù option allows you to turn off the fan altogether - although the power supply itself is extremely quiet, if your household has not become accustomed to the lulling sounds of a working server, this function will help make the NAS almost silent.  Given the efficiency of our system, active cooling may not be needed at all.  If the temperature exceeds the critical 80 ¬∞ C, the power supply automatically switches to an intensive mode of operation. <br><br><img src="https://habrastorage.org/files/5c8/9e8/54f/5c89e854f65c4d308b80e2161b0819dd.PNG"><br><br>  The item ‚ÄúExpenses‚Äù allows you to set the tariff for electricity and, thus, find out how much it costs you to operate the equipment.  Unfortunately, at the moment only one tariff zone is supported and only one currency - the US dollar.  As a result, the tool is only suitable for use for informational purposes, which the utility kindly warns. <br><br><img src="https://habrastorage.org/files/a2b/779/c80/a2b779c80a2942409caea1147987c5cf.PNG"><br><br>  A rather interesting feature is the ability to send data to social networks.  Facebook, Twitter and its Chinese counterpart Weibo are supported.  When you click on the corresponding icon on your account, a screenshot of the currently opened counter is published.  Sending a picture to an e-mail is also available, but only if the email client is pre-configured on the computer. <br><br><img src="https://habrastorage.org/files/7fb/edb/e58/7fbedbe58bd9492bbde7e0e8fcac1fb6.PNG"><br><br>  The ‚ÄúRecord‚Äù tab provides much more interesting features.  Here you can download reports on the operation of the power supply by date in CSV format. <br><br><img src="https://habrastorage.org/files/b5c/8ec/5ee/b5c8ec5ee81c4d8e9d1a0660c63fc90b.PNG"><br><br>  The readings are taken at intervals of one minute.  The table records all the parameters displayed on the indicators - very convenient for assessing the effectiveness of the system. <br><br><img src="https://habrastorage.org/files/453/ced/2ee/453ced2ee5e44a6993f9e8da2a06a02b.PNG"><br><br>  However, let's digress from the application (we have disassembled all the available functionality, with the exception of the backlight control, which this model is not equipped with), and see what features the cloud platform SPM offers.  But first, go to ‚ÄúMy Account‚Äù -&gt; ‚ÄúSettings‚Äù: <br><br><img src="https://habrastorage.org/files/8b7/b4a/078/8b7b4a078f9e4b74bb83668b75e9e5ec.JPG"><br><br>  If you set the status to ‚ÄúPublic‚Äù, the statistics will be displayed on the ‚ÄúAll uploads‚Äù tab, however, only users added as friends will have access to the data.  When you turn on the geolocation service, the location of your computer will be displayed on an interactive map. <br><br><img src="https://habrastorage.org/files/761/791/1bc/7617911bc3784deabdd4b76cc8f4b86e.PNG"><br><br>  According to the developers, Smart Power Managment should be not just a cloud monitoring service, but a full-fledged social platform.  Using the functions of positioning, you can make acquaintances with other users and share experiences through personal messages.  Considering that the Thermaltake target products are professionals and enthusiasts, in the future such a system can serve as an excellent alternative to subject groups and forums, allowing in a couple of clicks to find colleagues and like-minded people all over the world. <br><br>  Go to the tab ‚ÄúMy uploads‚Äù.  The reports generated by the application are loaded here. <br><br><img src="https://habrastorage.org/files/0e3/1cf/e5a/0e31cfe5aac346488873a4b32a4a5348.PNG"><br><br>  Clicking on the link ‚ÄúDownload data ...‚Äù we get into the visual interface.  Here all the information stored in text reports, but already in the form of graphs.  You can view statistics on the BP itself, CPU and video card: <br><br><img src="https://habrastorage.org/files/c7a/71b/044/c7a71b0440af457aa10e497b868639b0.PNG"><br><br>  The most interesting is the ‚ÄúAnalysis‚Äù tab.  Selecting the PSU (and the platform allows you to add an unlimited number of devices), we get to this page like this: <br><br><img src="https://habrastorage.org/files/577/75e/07f/57775e07fe6f4903aeb7666e92563fb2.PNG"><br><br>  The first three tabs allow you to find out the total time of using the power supply, the cost of electricity and the amount of kWh spent, respectively.  By clicking on the icon in the form of a tree, we can assess the environmental friendliness of the system: <br><br><img src="https://habrastorage.org/files/107/ea9/4fb/107ea94fb144484fa07d7dd7eb29d6de.PNG"><br><br>  Unfortunately, the NAS worked for nothing, so far I haven‚Äôt planted a single tree.  Then you can get a summary statistics on electricity consumption and cost, as well as find out the average power for the selected period: <br><br><img src="https://habrastorage.org/files/707/b67/882/707b67882b404776bed4151d668ddb3d.PNG"><br><br>  The tab ‚ÄúAnalysis of consumed electricity‚Äù will tell you how suitable the PSU is for the file storage: <br><br><img src="https://habrastorage.org/files/479/b1c/124/479b1c1247d74f04925e382d7a9f000a.PNG"><br><br>  As was to be expected, we managed to assemble a home NAS, the power consumption of which is comparable to a conventional household light bulb. <br><br>  The last tab allows you to create a plan for energy saving based on the selected parameters.  Here you can set up alerts for the mobile version of the application: <br><br><img src="https://habrastorage.org/files/5cb/7a8/892/5cb7a8892bf24ef499ac46aea4b0be89.PNG"><br><br>  In addition, Smart Power Managment allows you to remotely control the power of a computer or server.  All the necessary tools are presented in the Remote section. <br><br><img src="https://habrastorage.org/files/c76/ec6/268/c76ec6268b674058a4a037d4856d1580.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is possible to completely de-energize or reboot the system (do not worry, the corresponding signal will be sent to the motherboard), as well as schedule outages: </font></font><br><br><img src="https://habrastorage.org/files/63e/b28/d61/63eb28d6152048b09b98a187bad90b02.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The above functionality is also available in the DPS G Mobile App, released for iOS and Android (Windows Phone was naturally ignored). And if viewing the statistics on the smartphone screen is not very convenient, then the implementation of remote control of a home NAS will be most welcome. All previously made settings are fully synchronized: </font></font><br><br><img src="https://habrastorage.org/files/7bb/410/0dd/7bb4100dd14a43c4b136eb96b23242ab.PNG"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The most useful function is to inform you that the fan has stopped or the unit has overheated above 60 ¬∞ C, after which you can immediately shut down the system, preventing the power supply unit of the home NAS from malfunctioning.</font></font><br><br><h2>  Instead of conclusion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Summarize. We found that using Windows in a home NAS is long, expensive, and extremely inconvenient. Excessive voracity, duration of setup, updates and resynchronization, finally, bugs and the need to purchase a license - all this makes the ‚Äúwindows‚Äù perhaps the worst solution for file storage. Therefore, in the next post I will talk about what NAS4Free is and what it is eaten with.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As for the Smart Power Managment platform, I can say that the solution is already working perfectly, offering an ample set of tools for monitoring and power management. It can be a good help in situations where the use of professional industry solutions is unprofitable (for example, during the construction of the IT infrastructure of small offices). A smart power supply unit can also be useful for a private user: when your computer is working 24/7, the ability to track changes remotely will have to be very useful, just like the panic button for turning off the system in case of emergency. But personally, I would like to see a more advanced pricing system with support for several zones and currencies - this would allow fixing the costs of electricity with high accuracy and planning the budget without additional software.If Thermaltake releases the version of the utility for Linux and FreeBSD, it will not be priced at all. I hope the company representatives read Habr - perhaps they will like my ideas and still transfer the utility to * nix'y.</font></font></div><p>Source: <a href="https://habr.com/ru/post/309558/">https://habr.com/ru/post/309558/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309548/index.html">Creating a dynamic time-lapse using a microcontroller</a></li>
<li><a href="../309550/index.html">HPE Vertica 8 Review (Frontloader)</a></li>
<li><a href="../309552/index.html">How I created the HTML killer</a></li>
<li><a href="../309554/index.html">"How I spent this summer": video from summer meetings JUG.ru</a></li>
<li><a href="../309556/index.html">Docker. Why and how</a></li>
<li><a href="../309560/index.html">JETPLOW Architecture - NSA backdoor in my coffee stand</a></li>
<li><a href="../309564/index.html">Centralized backup policy management</a></li>
<li><a href="../309566/index.html">Security Week 36: Nexus 5X vulnerability, crypto-fiber posting pictures, attacking Linux servers via Redis</a></li>
<li><a href="../309568/index.html">Laravel 5.3: Preparation for development (for beginners)</a></li>
<li><a href="../309570/index.html">About the Internet of things and the semiconductor industry in the region where they drink camel milk. The first day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
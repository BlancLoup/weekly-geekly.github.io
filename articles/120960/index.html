<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vertical page scrolling with jQuery and cross-browser compatibility</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The following is a cross-browser implementation of page scrolling using jQuery. 

 How it all began 
 Recently, on many sites you can see in one or an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vertical page scrolling with jQuery and cross-browser compatibility</h1><div class="post__text post__text-html js-mediator-article">  The following is a cross-browser implementation of page scrolling using jQuery. <br><br><h4>  How it all began </h4><br>  Recently, on many sites you can see in one or another variation of the button to scroll the page up or down.  It looks pretty nice, easy to use, and easy to implement.  Faced with the problem of scrolling volumetric content in the next developed project, I decided to implement this functionality. <br>  The task was as follows: make two buttons.  By clicking on one, scroll the page to the very beginning, by clicking on the other - to the very end.  It was also decided to further implement the possibilities of a purely visual nature, such as animation, the disappearance of buttons, etc., I will not dwell on this here, since the theme is cross-browser compatibility.  Actually it became the main problem in the process of writing code. <br>  Having drawn pretty buttons, screwed up the animation and the disappearance of the buttons, and implementing the actual scrolling itself, I found that there are problems with scrolling in different browsers.  Frustrated (and for some reason not a bit surprised ...) by this fact <s>(as well as by the fact that it would not be possible to leave work early)</s> , I decided to familiarize myself with similar implementations on the Internet.  After reviewing several examples, in the same way, not perceiving any browser, and sometimes working only in one specific one, it was decided to start prototyping, experimenting, and solving the problem using a click method (underline). <br>  Next, I will give a cross-browser version of the implementation of a simple page scrolling up / down, with explanations of where and what can go wrong and in what browser (in no case do I pretend to the originality of the solution, it's just a desire to share my own experience, and save people time solving similar problems).  Oh yeah, I forgot to make a reservation, the overwhelming part of the code is written in jQuery. <br><a name="habracut"></a><br><h4>  Preparing the base </h4><br>  So what are we going to do.  We will make two buttons "up" and "down", by clicking on which a smooth page scrolling to the very beginning and to the very end is carried out, respectively.  In this case, the implementation should work equally in all modern browsers. <br>  The task is clear, let's get down to implementation.  To begin with, we will write the simplest, namely the HTML code of the buttons and the corresponding CSS styles. <br><br>  <u>HTML code of buttons:</u> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"up"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pPageScroll"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"down"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pPageScroll"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  <u>CSS styles:</u> <br><br> <code>#up <br> { <br> width:60px; <br> height:60px; <br> position:fixed; <br> bottom:50px; <br> left:20px; <br> background-color:#000000; <br> border-radius:30px; <br> } <br> #down <br> { <br> width:60px; <br> height:60px; <br> position:fixed; <br> bottom:50px; <br> left:90px; <br> background-color:#000000; <br> border-radius:30px; <br> } <br> .pPageScroll <br> { <br> color:#FFFFFF; <br> font:bold 12pt 'Comic Sans MS'; <br> text-align:center; <br> }</code> <br> <br>  As a result, we have two circles with the words "Up" and "Down" in the lower left corner of the browser. <br><br><h4>  Problems begin </h4><br>  Now the most interesting begins - JavaScript, or rather jQuery.  As you know, to organize scrolling, manipulations are performed on the scrollTop and scrollLeft properties.  In jQuery, these manipulations are performed using the .scrollTop () and .scrollLeft () methods, respectively.  We are only interested in .scrollTop. <br>  The first, simplest version of scrolling was as follows: <br><br> <code>//    "" <br> $("#up").click(function(){ <br> //     <br> $("body").animate({"scrollTop":0},"slow"); <br> }); <br> <br> //    "" <br> $("#down").click(function(){ <br> //     <br> var height=$("body").height(); <br> $("body").animate({"scrollTop":height},‚Äùslow‚Äù); <br> });</code> <br> <br>  Everything is, well, very simple and straightforward.  But, here's the bad luck, if everything was quite cloudless and pretty in Chrom, in Oper it was also quite tolerable (scrolling up was carried out instantly), then ‚ÄúHarmful Lis‚Äù refused to scroll completely.  Without hesitation, replacing the line: $ ("body"). Animate "body" with "html", I changed the situation dramatically: FireFox started working, Opera stopped scrolling upwards and began to do it smoothly, but now Chrome stopped responding to button manipulations.  From the above ordeals, the following version was digested by all browsers: $ ("html, body"). Animate ... No other acceptable ways to scroll working in all browsers were found. <br><br><h4>  Add ryushechek and bows </h4><br>  With the simplest part sorted out.  The basic functionality is obtained, now you can think of something more interesting.  The first thing that catches your eye is the speed of scrolling.  In the presence of however rich content, the use of scrolling becomes a real test for the tendency to epilepsy.  Therefore, I want the scrolling to be smoother.  Solution to the forehead, set a specific time constant for which should be scrolled.  Obvious plus: elementary decision.  Not less obvious minus: does not take into account the amount of content.  Reasonable solution: calculate scrolling time depending on the size of the content.  Let's get started <br>  In the code of both buttons you need to add, the calculation of the current position.  To do this, just use the jQuery () method .scrollTop (). <br>  Here, already known problems appear: $ ("body"). ScrollTop () only works in Chrome, $ ("html"). ScrollTop () does not work in Chrome.  What, generally speaking, is surprising, since it turns out that with Opera (body). Animate ({‚ÄúscrollTop‚Äù: height}, ‚Äùslow‚Äù) in Opera we can scroll the body, and upon receiving, the scrollTop property of the body tag is zero, that, judging from the description of element.  scrollTop is valid for elements that can not be scrolled. <br>  Option $ ("body, html"). ScrollTop () for obvious reasons does not suit us.  We are looking for alternatives.  It turns out that the current position can be obtained from the window and document objects, so that it suits all browsers.  I think it should be mentioned that using them for animation (for example like this: $ (document) .animate.) Does not lead to anything good. <br>  So, for the working version of the clarification of the current position we take: $ (document) .scrollTop (); <br>  Now let's think about how we will calculate the time.  Generally speaking, the solution is trivial and everyone knows: time = path / speed.  To determine the path, we just need the current position.  Also, the coordinates of the destination point are needed.  With the ‚ÄúUp‚Äù button everything is simple, the coordinate of the destination point along the vertical axis is zero, which means that the path is equal to the current position.  For the "Down" button, everything is a little more complicated, we need to get the "height" of the document.  Already anticipating problems, yes?  But no, everything is very simple.  A very suitable height can be obtained using ‚Äúbody‚Äù, ‚Äúhtml‚Äù or document as a selector. <br>  So.  We have a way, now we need speed.  Here everything depends on you personally.  By visual estimations, the speed of 1.73 seemed to me comfortable (the figure has no, no matter how serious justification, and pretended to be on the eye). <br><br><h4>  Final option </h4><br>  Thus, the working code looks like this: <br><br> <code>$(document).ready(function(){ <br> //    "" <br> $("#up").click(function(){ <br> //     <br> var curPos=$(document).scrollTop(); <br> var scrollTime=curPos/1.73; <br> $("body,html").animate({"scrollTop":0},scrollTime); <br> }); <br> <br> //    "" <br> $("#down").click(function(){ <br> //     <br> var curPos=$(document).scrollTop(); <br> var height=$("body").height(); <br> var scrollTime=(height-curPos)/1.73; <br> $("body,html").animate({"scrollTop":height},scrollTime); <br> }); <br> });</code> <br> <br>  In addition, you can hang coefficients for which you can multiply time or speed depending on the path to provide more flexibility, but I will not stop here anymore. <br><br><h4>  Summary </h4><br>  As a result, we got a very simple page scrolling implementation that works in any modern browser. <br>  The tests were carried out for DOCTYPE: XHTML 1.0 Strict in browsers Chrome 10, Opera 10, Opera 11, Firefox 4, Internet Explorer 8, Internet Explorer 9. <br><br><h6>  Some problems: </h6><ul><li>  border-radius is not known to work in IE8, but cross-browser layout is not a topic of this topic. </li><li>  In Opera 10 instruction: $ ("body, html"). Animate ({"scrollTop": 0}, scrollTime);  leads to an instant transition to the top of the page.  This problem disappears with the transition to Opera 11. </li></ul><br><br>  UPD: Fixed the final example. </div><p>Source: <a href="https://habr.com/ru/post/120960/">https://habr.com/ru/post/120960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120954/index.html">New devices released: Yota One and Yota Many</a></li>
<li><a href="../120955/index.html">Zabbix, monitoring last mile ports and optimizing work with the database using partitioning</a></li>
<li><a href="../120956/index.html">Google never ceases to amaze</a></li>
<li><a href="../120957/index.html">What can be made of cardboard?</a></li>
<li><a href="../120958/index.html">Local dictionaries in ABBYY Lingvo x5: constructor for translators and not only</a></li>
<li><a href="../120961/index.html">CPanel and Parallels Plesk Panel from the point of view of a hoster. Part Three and Last</a></li>
<li><a href="../120962/index.html">Webasyst: open PHP framework for creating business applications</a></li>
<li><a href="../120963/index.html">Ancient Lamers</a></li>
<li><a href="../120964/index.html">Removing the unlock key from the MBR-blocker</a></li>
<li><a href="../120965/index.html">Nortel's patent weapon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
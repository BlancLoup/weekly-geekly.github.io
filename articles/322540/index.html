<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The first experience of developing games for Apple Watch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! In my article I want to talk about the experience of developing games for the Apple Watch. The game is called Space Beaver (Beaver and Space). ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The first experience of developing games for Apple Watch</h1><div class="post__text post__text-html js-mediator-article">  Hello!  In my article I want to talk about the experience of developing games for the Apple Watch.  The game is called Space Beaver (Beaver and Space).  It is also available on iphone.  But in this article there will be a story about the watch version.  The source code is <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch">here</a> . <br><br><img src="https://habrastorage.org/files/2fb/8eb/887/2fb8eb8877e943a3807a546c24b9fb8b.jpg"><br><a name="habracut"></a><br>  <b>Idea:</b> <br><br>  The essence of the game is a quick swap depending on the direction of the arrows.  If the blocks with arrows filled the entire playing field, the player lost. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After creating the game on the iphone, I decided to try porting it to the Apple Watch.  But unfortunately it turned out that the used engine (Unity) does not support this platform - that is, you cannot make the game assembly for the clock ( <a href="https://unity3d.com/ru/unity/roadmap">unity roadmap</a> ).  There are third-party plug-ins for interaction between the game on the iphone and the application on the Apple Watch ( <a href="http://devgallery.com/unity/watchkit-unity/">watchkit-unity</a> ), but this is not what I needed. <br><br>  <b>Development:</b> <br><br>  In 2016, Apple released SpriteKit for Apple Watch and added support for Game Center ( <a href="https://developer.apple.com/videos/play/wwdc2016/612/">video</a> ).  And I decided to take advantage of this.  He wrote the game on swift.  Tested on the simulator, as there is no iphone or Apple Watch. <br><br>  To begin with, I made a new project (Single View Application).  Then added a new target (WatchOS -&gt; Game App). <br><br><img src="https://habrastorage.org/files/a40/4df/eea/a404dfeea4a149439d5423fa371be16b.png"><br><br>  Two folders are added to the project.  The first folder with the main <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch/blob/master/BeaverAndFairiesAppleWatch/BeaverAndFairiesWatch/BeaverAndFairiesWatchOS/Base.lproj/Interface.storyboard">storyboard</a> .  It contains a game controller with a SpriteKit scene and additional menu, game center, and game end controllers.  Also in the first folder are the icons and resources for the storyboard.  The second folder (Extension) contains the source code and resources for the SpriteKit scene. <br><br>  Began development from the main menu of the <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch/blob/master/BeaverAndFairiesAppleWatch/BeaverAndFairiesWatch/BeaverAndFairiesWatchOS%2520Extension/Controllers/MainMenuController.swift">main menu</a> . <br><br><img src="https://habrastorage.org/files/202/7b5/93b/2027b593b2eb4f3fa2dc1cd983740f17.jpg"><br><br>  Initially, I wanted to do the whole UI on SpriteKit.  But I did not find a convenient way to use the buttons in SpriteKit.  Therefore, I decided to make all the menus on the standard items for WatchKit. <br><br>  I wanted to connect social networks (login on VK and Facebook) and repost records, but it turned out that there is no easy way to do this.  The ios has a <a href="https://developer.apple.com/reference/social">Social Framework</a> , but it does not yet support WatchOS.  Therefore, I decided to postpone until better times. <br><br>  Then he took up the creation of the screen of the game itself ( <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch/blob/master/BeaverAndFairiesAppleWatch/BeaverAndFairiesWatch/BeaverAndFairiesWatchOS%2520Extension/MainGameController.swift">MainGameController</a> and <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch/blob/master/BeaverAndFairiesAppleWatch/BeaverAndFairiesWatch/BeaverAndFairiesWatchOS%2520Extension/GameScene.swift">the SpriteKit scene</a> ). <br><br><img src="https://habrastorage.org/files/773/14f/6a0/77314f6a0a484a1f8f286b8ff4e9c411.jpg"><br><br>  Here everything was standard for SpriteKit.  The update method executes a code for moving blocks and removing them depending on the player‚Äôs gestures.  By the way, gestures I used the standard replicators.  From the library to the storyboard I dragged and indicated events.  Animated wrong gestures with SKAction. <br><br>  Added training - also used <a href="https://developer.apple.com/reference/spritekit/skaction">SKAction</a> animations. <br><br>  Added music using the SKAudioNode class.  By the way, music is controlled using SKAction.play () and SKAction.stop (). <br><br>  Added haptic feedback effects to the game.  Effects are used when losing and with the wrong gesture.  Used the WKInterfaceDevice.current (). Play (.) <a href="https://developer.apple.com/reference/watchkit/wkinterfacedevice/1628128-play">Function</a> ( <a href="https://developer.apple.com/reference/watchkit/wkinterfacedevice/1628128-play">WKInterfaceDevice</a> ). <br>  Added a pause when using force touch on the main game screen.  Used element <a href="https://developer.apple.com/library/content/documentation/General/Conceptual/WatchKitProgrammingGuide/Menus.html">WKInterfaceMenu</a> .  I tried to use my icons instead of icons, but only alpha is taken from the image there.  You can also change the background color. <br><br><img src="https://habrastorage.org/files/fb8/b09/7fa/fb8b097fa0e34640b0142d0e9693a8b2.jpg"><br><br>  After creating the game screen, proceeded to the game completion popup window ( <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch/blob/master/BeaverAndFairiesAppleWatch/BeaverAndFairiesWatch/BeaverAndFairiesWatchOS%2520Extension/Controllers/GameEndController.swift">GameEndController</a> ). <br><br>  Here everything is standard for WatchKit.  When I lose to the top of the stack, I throw the loss controller, when I press the replay button, I remove the upper controller, on the back arrow button, we go to the main menu screen.  As I wrote above, I wanted to add a button to share the record in social networks, but I did not find a convenient way. <br><br><img src="https://habrastorage.org/files/4d7/c34/1c7/4d7c341c72f24286911d9772d49f3b42.jpg"><br><br>  Then he began to fasten the game center ( <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch/blob/master/BeaverAndFairiesAppleWatch/BeaverAndFairiesWatch/BeaverAndFairiesWatchOS%2520Extension/Controllers/GameCenterWatchController.swift">GameCenterWatchController</a> ).  The epl has a <a href="https://developer.apple.com/videos/play/wwdc2016/612/">video</a> , but it tells about step-by-step multiplayer and says nothing about how to connect the Leaderboard to the game.  So I decided to use the controller for the tables (WKInterfaceTable).  Received records through the GameKitHelper.sharedInstance.getPlayerScores () method. By the way, while testing the game center is not supported on the simulator (the GameKit library is not imported).  Therefore, I did not test this function as normal. <br><br><img src="https://habrastorage.org/files/658/73b/713/65873b71356c44d2834cda9647a4ce47.jpg"><br><br>  <b>There were several problems with the release:</b> <br><br>  1) I made the game for hours separately from the main game project.  When building a game for ios, unity (5.5.1) creates an Xcode project.  I added a target for Apple Watch to this project.  But it was impossible to archive (Archive) the assembly in any way.  I played a little with the project build settings: set for the project (Unity-Phone) Build Settings: Supported Platforms - iOS, Architectures - Standard architectures.  For TARGETS: BeaverSpace: Supported Platforms - iOS; Architectures - Standard architectures;  SpaceBeaverWatch: Supported Platforms - watchOS, Architectures - Standard architectures;  SpaceBeaverWatch Extension: Supported Platforms - watchOS, Architectures - Standard architectures. <br><br><img src="https://habrastorage.org/files/c6e/51e/78c/c6e51e78ce29414a8486d71c004efab6.png"><br><br>  2) The game did not go through the upgrade from the first time.  I added a target for the Apple Watch to the project and copied the files from another project into it.  But I forgot to change the modules in each controller of the main storyboard for the clock.  After the fix, everything was fine. <br><br><img src="https://habrastorage.org/files/35f/b9a/818/35fb9a8183244db482a11cffb25e096d.png"><br><br>  <b>Finally:</b> <br><br>  I spent 2 weeks on the game for Apple Watch, but at the same time I made the basic version on ios for 4 months in my spare time.  In general, I really liked the design for watches, despite the problems and inconveniences.  We were pleased that Apple did SpriteKit support for WatchOS.  I plan to promote the game for hours in thematic groups of VC and with the main game.  Also added keywords related to Apple Watch.  While at 541 place on the request of ‚Äúapple watch game‚Äù in the US. <br><br>  Thank you all for your attention. <br><br>  ‚Üí The source code of the Space Beaver game (Beaver and Cosmos) is <a href="https://github.com/darkwind666/SpaceBeaverAppleWatch">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/322540/">https://habr.com/ru/post/322540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322530/index.html">How IT professionals work. Mamikon Vartapetyan, Head of the Lester IT Database Development Team</a></li>
<li><a href="../322532/index.html">MySQL and MongoDB - when and what is better to use</a></li>
<li><a href="../322534/index.html">Open machine learning course. Topic 3. Classification, decision trees and the method of nearest neighbors</a></li>
<li><a href="../322536/index.html">Security Week 08: SHA-1 exactly everything, vulnerabilities in TP-Link routers, cross-platform botnet with Mirai code</a></li>
<li><a href="../322538/index.html">ASP.NET Core: your first Linux application using Visual Studio Code</a></li>
<li><a href="../322542/index.html">Backups as a way to avoid extra costs during infection with cryptographer</a></li>
<li><a href="../322544/index.html">2fa implementation experience on linux with duosecurity</a></li>
<li><a href="../322546/index.html">Teaching without a teacher. How to become a professional without a mentor</a></li>
<li><a href="../322548/index.html">How to add AppIcon and LaunchScreen to React Native App</a></li>
<li><a href="../322550/index.html">Difficult about simple: ESLint in a team</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C # combinator library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, Habrazhiteli! 
 In my first article I would like to tell you about such an interesting thing as the Combinator library. I will try to make a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C # combinator library</h1><div class="post__text post__text-html js-mediator-article">  Good day, Habrazhiteli! <br>  In my first article I would like to tell you about such an interesting thing as the Combinator library.  I will try to make all the arguments as simple and clear as possible. <br><br><h4>  Problem </h4><br>  In fact, not a problem, but simply the desire to write something interesting.  And I decided to write a system for finding derivatives of functions (the article echoes the articles <a href="http://habrahabr.ru/post/149450/">Dynamic Mathematical Functions in C ++</a> and <a href="http://habrahabr.ru/post/149470/">the Calculation of Derivatives Using C ++ Templates</a> , but I decided to publish it because I hope to shed light on The problem is somewhat different, and all the examples will be in c #, not c ++). <br>  Actually there was no desire to take <a href="http://ru.wikipedia.org/wiki/Mathematica">anything ready</a> , all the more then the meaning of the whole undertaking would be lost.  And an idea was born, unusual for my inexperienced mind, the implementation of which I started.  A little later, accidentally reading about such a functional programming pattern as the ‚ÄúCombinatorial Library‚Äù, I realized that it was him who implemented it.  So what is it? <br><a name="habracut"></a><br><h4>  What it is? </h4><br>  Combinatorial library - a set of related entities that are divided into primitives and combinators. <br><ul><li>  Primitives - basic, simple, indivisible entities. </li><li>  Combinators are ways to combine entities into more complex ones. </li></ul><br>  Also for a set of entities, the <b>closure property</b> must be satisfied: <br>  "Compound entities should not differ in terms of use from primitives." <br><br><h5>  Sounds pretty abstract? </h5><br>  Let's look at the example of mathematical functions and their derivatives. <br>  First, we define a set of primitives. <br>  Primitives, in this context, should make the simplest functions (choose a few to your taste): <br><ul><li>  Linear function </li><li>  Constant </li></ul><br>  And for the task of combinators suitable such well-known operations such as: addition, multiplication, subtraction and division. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  How it works? </h5><br>  For all primitives, we define the derivatives themselves.  Next, we describe the combinators. <br>  Consider the combinator "addition of functions." <br>  If the derivative of the function f and the derivative of the function g are known, then it is easy to find the derivative of the sum of these two functions: (f + g) '= f' + g '. <br>  That is, we form the rule: the derivative of the sum of functions is the sum of their derivatives. <br>  Similarly, we define the other combinators. <br>  Okay, like America has not yet opened, it remains to figure out how to express it in code. <br><br><h4>  Practice </h4><br>  The key class of the whole system will be the abstract class <b>Function</b> : <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Function</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Calc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> Function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Derivative</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre> <br>  Everything is simple, the function should ‚Äúbe able to count‚Äù its value at the point x, as well as ‚Äúknow‚Äù its derivative. <br><br>  Next, we implement the functions we have chosen. <br>  First constant: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Constant</span></span> : <span class="hljs-title"><span class="hljs-title">Function</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Constant</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = val; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Calc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Derivative</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; }</code> </pre><br><br>  And a linear function, or rather its simplest form: f (x) = x.  In mathematics, this mapping is called the identity, so the class is called <a href="http://en.wikipedia.org/wiki/Identity_function">‚ÄúIdentity‚Äù</a> . <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Identity</span></span> : <span class="hljs-title"><span class="hljs-title">Function</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Calc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Derivative</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(<span class="hljs-number"><span class="hljs-number">1</span></span>); } }</code> </pre><br>  Already here one can notice the connection between these two classes, namely, the derivative of the identity function is a constant 1. <br><br>  Let's now define a class for combinators.  Because of its closed nature, it must be able to do everything the same as primitives, so it is logical to inherit it from the <b>Function</b> class. <br>  Let's call this class <b>Operator</b> and make it also abstract. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Operator</span></span> : <span class="hljs-title"><span class="hljs-title">Function</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Operator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Function a, Function b</span></span></span><span class="hljs-function">)</span></span> { leftFunc = a; rightFunc = b; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function leftFunc; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function rightFunc; }</code> </pre><br>  And also, for example, we define the combinator "multiplication", the rest are determined in the same way. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Multiplication</span></span> : <span class="hljs-title"><span class="hljs-title">Operator</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Multiplication</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Function a, Function b</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Calc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> val</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> leftFunc.Calc(val) * rightFunc.Calc(val); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Derivative</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> leftFunc.Derivative() * rightFunc + leftFunc * rightFunc.Derivative(); } }</code> </pre><br>  I hope everything is clear, we explicitly described the rule for constructing a function by multiplying one function by the second. <br>  To find the value of such a function at x, it is necessary to find the value of one at x, then the second, and then multiply these values. <br>  The derivative of the product of two functions is defined as: (f * g) '= f' * g + g '* f.  <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B8%25D0%25B7%25D0%25B2%25D0%25BE%25D0%25B4%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2584%25D1%2583%25D0%25BD%25D0%25BA%25D1%2586%25D0%25B8%25D0%25B8">Proof :)</a> <br>  In the code, we wrote one to one what was spoken about in words. <br>  Cool?  Yes, I think so! <br><br>  Similarly, we define an addition combinator - <b>Addition</b> class, I will not give it in this article, it almost repeats the code for multiplication. <br>  Let's now try using these methods to write the function f (x) = 2x + 3. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Addition(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Multiplication(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Identity()), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(<span class="hljs-number"><span class="hljs-number">3</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = f.Calc(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-comment"><span class="hljs-comment">// x   7 var y = f.Derivative().Calc(2) //    2</span></span></code> </pre><br>  Wow, how cool! <br><br><h4>  Dessert </h4><br>  Not really cool.  I would shoot myself if for any, even the simplest of functions, I would have to write something like that.  Fortunately, C # syntax sugar will help us. <br><br>  We add the following methods to the <b>Function</b> class. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Function <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> +(Function a, Function b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Addition(a, b); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Function <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> +(<span class="hljs-keyword"><span class="hljs-keyword">double</span></span> k, Function b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(k) + b; }</code> </pre><br>  What does this give us?  And the fact that now instead of: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Addition(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(<span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Identity())</code> </pre>  You can write this: <br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Identity()</code> </pre>  Looks a little better already. <br><br>  We define similar operators for the remaining operations (*, +, -). <br>  Now, in order not to create a new function object each time, we will write a static class in which we place some frequently used functions.  I called this class <b>Funcs</b> . <br>  I also defined a couple more functions, such as sine, cosine and exponent.  Here's what happened: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Funcs</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Id = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Identity(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Exp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exponenta(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Zero = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Constant(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Sin = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sinus(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Cos = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cosinus(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Tan = Sin / Cos; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Ctg = Cos / Sin; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Sh = (Exp - <span class="hljs-number"><span class="hljs-number">1</span></span> / Exp) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Ch = (Exp + <span class="hljs-number"><span class="hljs-number">1</span></span> / Exp) / <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Tgh = Sh / Ch; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Function Cth = Sh / Ch; }</code> </pre><br>  As you can see, I defined the last 6 functions as combinations of ‚Äúprimitive functions‚Äù. <br><br>  Now you can try again to determine the function f (x) = 2x + 3. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = <span class="hljs-number"><span class="hljs-number">2</span></span> * Funcs.Id + <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = f.Calc(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-comment"><span class="hljs-comment">// x   7 var y = f.Derivative().Calc(2) //    2</span></span></code> </pre><br>  Well, how?  In my opinion, using such a system has become much easier. <br><br><h4>  Conclusion </h4><br>  What are the pros and cons of this approach? <br><br>  The obvious advantage is extensibility.  Indeed, it will not be difficult to add its own function, for example, logarithmic, and through the derivative be included in the general system of classes. <br><br>  The disadvantage is the rapid expansion of the function while finding the derivative, for example, for the function f (x) = x ^ 100 (x to the power of 100) finding 10 derivative is a very time-consuming operation - I did not have the patience to wait for its completion. <br><br><h5>  Links </h5><br>  <a href="http://fprog.ru/2009/issue3/eugene-kirpichov-elements-of-functional-languages/">About combinatorial libraries</a> .  I offer the article under the link to anyone interested in functional programming, first of all, to those who have come across it before - it tells about the main approaches in the OP, examples are given.  IMHO, the article is written correctly and interestingly written - it is a pleasure to read. <br><br>  <a href="https://github.com/semens/Functions">Project on githaba</a> .  If you are interested in the article, you can download the project sources from the github, the Combination of Functions combinator is still implemented there, piecewise-defined functions are added, the simplest integration of functions and some optimizations are written - in general, everything that didn't fit into the article <br><br>  <b>PS</b> While I was preparing this article on Habr√© 2 more appeared on similar topics: <a href="http://habrahabr.ru/post/149450/">‚ÄúDynamic mat.</a>  <a href="http://habrahabr.ru/post/149450/">functions in C ++ "</a> and <a href="http://habrahabr.ru/post/149470/">" Calculation of derivatives using templates in C ++ "</a> , I hope that mine will not be superfluous and habrazhiteli will take it with interest. <br>  Request for grammar and spelling errors to write in a personal. </div><p>Source: <a href="https://habr.com/ru/post/149630/">https://habr.com/ru/post/149630/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149625/index.html">Reflections on Design</a></li>
<li><a href="../149626/index.html">Writing MVC implementation for Backbone</a></li>
<li><a href="../149627/index.html">Graphic framework. Social services icons set</a></li>
<li><a href="../149628/index.html">Double star nanoCAD: free 3.7 and paid 4.0</a></li>
<li><a href="../149629/index.html">How to earn more!</a></li>
<li><a href="../149631/index.html">CocoaPods - a powerful tool in the hands of an Objective-C developer</a></li>
<li><a href="../149632/index.html">Rosalind - a platform for studying bioinformatics</a></li>
<li><a href="../149636/index.html">Why does Mail.Ru develop spyware software?</a></li>
<li><a href="../149638/index.html">The site where you can cure a damaged file. OfficeRecovery Online Demo Video</a></li>
<li><a href="../149639/index.html">Engadget: Microsoft Surface will cost $ 199</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
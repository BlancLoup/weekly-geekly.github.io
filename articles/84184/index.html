<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Iterator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(Sorry for my Russian in advance) 

 Imagine that you are a developer of a strategic war game. The army has a complex structure: it consists of a hero...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Iterator</h1><div class="post__text post__text-html js-mediator-article">  (Sorry for my Russian in advance) <br><br>  Imagine that you are a developer of a strategic war game.  The army has a complex structure: it consists of a hero and three groups.  When the King issues a decree and resources to treat all warriors (The hero is also a warrior) you want to test all soldiers and call the <strong>treat ()</strong> method on each instance.  How can this be done easily and without understanding the structure of the army? <br><br><h1>  <strong>Iterator</strong> </h1>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An iterator is a pattern that allows access to the elements of any collection without understanding the essence of its implementation. <br>  Thus applied to our problem: We do not want to experience the structure of the Army - we want SoldiersIterator to run through all the soldiers. <br><br>  The red line in the figure is an iterator (at least as I imagine it). <br> <a href=""><img height="344" src="https://habrastorage.org/getpro/habr/post_images/819/abc/3c2/819abc3c26a4ce92eba9ce5f20a11e99.png" width="640"></a> <br><a name="habracut"></a><br><br><h4>  <strong>Using</strong> </h4><br><br>  The code below shows the use of an iterator.  As you can see, we just got an instance of the SoldiersIterator iterator.  And a simple cycle passes through all the soldiers of the army.  This is very easy, which is the main task of the iterator. <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">SoldiersIterator iterator = <font color="#0000ff">new</font> SoldiersIterator(earthArmy); <br> <br> <font color="#0000ff">while</font> (iterator.hasNext()){ <br> Soldier currSoldier = iterator.next(); <br> currSoldier.treat(); <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h4>  <strong>Army structure</strong> </h4><br><br>  An army consists of one hero and may contain several groups, each of which may contain many soldiers.  So, as we can see, the structure of the army is complex and tree-like.  The code below shows the creation of the Army: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Army earthArmy = <font color="#0000ff">new</font> Army(); <br> <br> Group groupA = <font color="#0000ff">new</font> Group(); <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i=1; i&lt;4; ++i) <br> groupA.addNewSoldier( <font color="#0000ff">new</font> Soldier( <font color="#A31515">"Alpha:"</font> + i)); <br> <br> Group groupB = <font color="#0000ff">new</font> Group(); <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i=1; i&lt;3; ++i) <br> groupB.addNewSoldier( <font color="#0000ff">new</font> Soldier( <font color="#A31515">"Beta:"</font> + i)); <br> <br> Group groupC = <font color="#0000ff">new</font> Group(); <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i=1; i&lt;2; ++i) <br> groupC.addNewSoldier( <font color="#0000ff">new</font> Soldier( <font color="#A31515">"Gamma:"</font> + i)); <br> <br> earthArmy.ArmyHero = <font color="#0000ff">new</font> Hero( <font color="#A31515">"Andriy Buday"</font> ); <br> earthArmy.addArmyGroup(groupB); <br> earthArmy.addArmyGroup(groupA); <br> earthArmy.addArmyGroup(groupC);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Hero (Hero) is a class of desaturation from a soldier (Soldier) and the main difference is that he has a higher level of health. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Soldier { <br> <font color="#0000ff">public</font> <font color="#2B91AF">String</font> Name; <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> Health; <br> <font color="#0000ff">protected</font> <font color="#0000ff">int</font> maxHealthPoints = 100; <br> <br> <font color="#0000ff">public</font> Soldier( <font color="#2B91AF">String</font> name){ <br> Name = name; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> treat(){ <br> Health = maxHealthPoints; <br> System. <font color="#0000ff">out</font> .println(Name); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Hero extends Soldier { <br> <font color="#0000ff">protected</font> <font color="#0000ff">int</font> maxHealthPoints = 500; <br> <br> <font color="#0000ff">public</font> Hero( <font color="#2B91AF">String</font> name) { <br> super(name); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h4>  <strong>SoldiersIterator</strong> </h4><br><br>  Therefore, if we can move through a complex collection so easily, where is all the complexity? <br>  Of course, it is hidden encapsulated in a specific iterator class. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> SoldiersIterator { <br> <br> <font color="#0000ff">private</font> Army _army; <br> boolean heroIsIterated; <br> <font color="#0000ff">int</font> currentGroup; <br> <font color="#0000ff">int</font> currentGroupSoldier; <br> <br> <font color="#0000ff">public</font> SoldiersIterator(Army army) { <br> _army = army; <br> heroIsIterated = <font color="#0000ff">false</font> ; <br> currentGroup = 0; <br> currentGroupSoldier = 0; <br> } <br> <br> <font color="#0000ff">public</font> boolean hasNext() { <br> <font color="#0000ff">if</font> (!heroIsIterated) <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; <br> <font color="#0000ff">if</font> (currentGroup &lt; _army.ArmyGroups.size()) <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; <br> <font color="#0000ff">if</font> (currentGroup == _army.ArmyGroups.size()-1) <br> <font color="#0000ff">if</font> (currentGroupSoldier &lt; _army.ArmyGroups. <font color="#0000ff">get</font> (currentGroup).Soldiers.size()) <font color="#0000ff">return</font> <font color="#0000ff">true</font> ; <br> <br> <font color="#0000ff">return</font> <font color="#0000ff">false</font> ; <br> } <br> <br> <font color="#0000ff">public</font> Soldier next() { <br> Soldier nextSoldier; <br> <font color="#008000">// we still not iterated all soldiers in current group</font> <br> <font color="#0000ff">if</font> (currentGroup &lt; _army.ArmyGroups.size()) { <br> <font color="#0000ff">if</font> (currentGroupSoldier &lt; _army.ArmyGroups. <font color="#0000ff">get</font> (currentGroup).Soldiers.size()) { <br> nextSoldier = _army.ArmyGroups. <font color="#0000ff">get</font> (currentGroup).Soldiers. <font color="#0000ff">get</font> (currentGroupSoldier); <br> currentGroupSoldier++; <br> } <br> <font color="#008000">// moving to next group</font> <br> <font color="#0000ff">else</font> { <br> currentGroup++; <br> currentGroupSoldier = 0; <br> <font color="#0000ff">return</font> next(); <br> } <br> } <br> <font color="#008000">// hero is the last who left the battlefield</font> <br> <font color="#0000ff">else</font> <font color="#0000ff">if</font> (!heroIsIterated) { <br> heroIsIterated = <font color="#0000ff">true</font> ; <br> <font color="#0000ff">return</font> _army.ArmyHero; <br> } <font color="#0000ff">else</font> { <br> <font color="#008000">// THROW EXCEPTION HERE</font> <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> IllegalStateException( <font color="#A31515">"End of colletion"</font> ); <br> <font color="#008000">//or set all counters to 0 and start again, but not recommended</font> <br> } <br> <font color="#0000ff">return</font> nextSoldier; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h4>  <strong>How does my example differ from the standard GoF?</strong> </h4><br><br>  Because I set myself the task to emphasize the main task that this pattern solves and to do it in such a way that it will be possible to easily all of them.  Another reason is that you can read tons of standard explanations of this pattern.  But the main difference between my explanation and other explanations is that the standard is more abstract. <br><br>  For example, I created the iterator we need as follows: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">SoldiersIterator iterator = <font color="#0000ff">new</font> SoldiersIterator (earthArmy);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  But usually creating an iterator is also encapsulated under an aggregate method (like GetEnumerator in .NET).  My code might look like this: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">IIterator iterator = AbstractArmy.GetSoldiersIterator ();</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  In the world.  NET, we are the IEnumerable and IEnumerator interfaces that help us in using this pattern. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> list = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt; <font color="#0000ff">int</font> &gt; (); <br> <font color="#008000">//GetEnumerator is method of IEnumerator (Aggregate)</font> <br> <font color="#0000ff">var</font> enumerator = list.GetEnumerator (); <br> <font color="#008000">//MoveNext method of IEnumerable (Iterator)</font> <br> enumerator.MoveNext ();</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  In Java, we are java.lang.Iterable instead of IEnumerable, which obviously is a more intuitive name.  I think that Microsoft just wanted to be more original in this matter :). <br><br>  Using this link I liked the explanations of the differences between these two languages: <br>  <a title="http://www.25hoursaday.com/CsharpVsJava.html" href="http://www.25hoursaday.com/CsharpVsJava.html">http://www.25hoursaday.com/CsharpVsJava.html</a> <br><br>  <a href="http://andriybuday.blogspot.com/2010/01/design-patterns.html">My pattern plate</a> <br><br></div><p>Source: <a href="https://habr.com/ru/post/84184/">https://habr.com/ru/post/84184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../84172/index.html">A simple and effective method to reflect http DDoS from 50mbit using nginx and iptables</a></li>
<li><a href="../84175/index.html">Cheerful video game "Tanks Online"</a></li>
<li><a href="../84178/index.html">All with the Day of the Geek!</a></li>
<li><a href="../84179/index.html">Personality vector</a></li>
<li><a href="../84183/index.html">Demonstration of a virtual journey on Earth using Google Galaxy Liquid</a></li>
<li><a href="../84185/index.html">How I bought iPod touch on ebay, and how it didn‚Äôt quite come to me ...</a></li>
<li><a href="../84186/index.html">SpyderCube - a cube that will change your life</a></li>
<li><a href="../84187/index.html">Chrome 5.0 beta for Mac OS X</a></li>
<li><a href="../84188/index.html">Format, Install, prison</a></li>
<li><a href="../84190/index.html">Simple load test with Apache JMeter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
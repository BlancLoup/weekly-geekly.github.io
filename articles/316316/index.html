<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>11 types of caching for a modern site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of this article did not encounter a structured overview of the important stages of caching, so he would like to share the accumulated exper...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>11 types of caching for a modern site</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/28e/531/50c/28e53150cafa4d139ee1fadc11ff641a.jpg"><br><br>  The author of this article did not encounter a structured overview of the important stages of caching, so he would like to share the accumulated experience in this field, combine all the basic information on this issue, and consider the pros and cons of each type of caching. <br><a name="habracut"></a><br>  First of all, I would like to clarify that caching is one of the most important components of any project.  In particular, this is the only way to do more and faster when using limited resources.  And, as you know, resources are always limited: both server and user. <br><br>  The main problem of caching is the quick response to requests to the main storage systems and processing of incoming and outgoing structured information. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Imagine that you need to quickly transfer information, but the speed of access to data is extremely low.  Or another situation: the speed is good, but little available memory or channel width is insufficient, or processor and disk factors make it difficult to accomplish the task.  In this case, caching is the only way out. <br><br><h2>  Types of caching </h2><br>  <b>Caching (or cache)</b> is a kind of intermediate buffer in which data is stored.  Thanks to caching, the site page is not recreated for each user.  Caching allows you to work with large amounts of data as soon as possible and with limited resources (server and user). <br><br>  It is necessary to understand that work with data can be performed both on the client side and on the server.  Moreover, server data processing is centralized and has a number of undoubted advantages (especially for the support service). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6cc/e77/735/6cce777357c546ecb8e88f2af296f365.jpg"></div><br>  There are several types of caching, we offer to consider each type, its features and recommendations for use: <br><br><h5>  <b>1. Browser caching or client caching</b> </h5><br>  It is a compilation for the browser command to use the existing cached copy.  The operation of such caching is based on the fact that when you re-visit, the browser is given the title 304 Not Modified, and the page or image itself is loaded from the local user cache.  It turns out that you save on traffic between the visitor's browser and the site hosting.  Accordingly, the page of your site starts to load faster. <br><br><h6>  <b>1.1 Caching files and images</b> </h6><br>  Browser caching is best suited for sites containing a large number of images: the picture is not downloaded every time you open the site, but simply loaded via the browser's cache. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3c8/027/272/3c8027272e024330b01edcddd7d3b7f4.jpg"></div><br>  This is the first level of caching, which consists in returning the <i>‚Äúexpired‚Äù</i> header and the <i>‚Äú304 Not Modified‚Äù</i> header.  The most effective is caching for 2 weeks. <br><br>  However, in this case there is an important nuance: if the image on the website changes, then the browser does not immediately know about it, but only if you wait for expiry or reset the cache in the browser itself.  This is not very effective if the file is constantly changing and you need to constantly give it the current version. <br><br><h6>  <b>1.2 Cache https</b> </h6><br>  Special headers like strict-security.  Allows the browser to always access https to the selected domain.  It saves this state quite hard and, in case of canceling this kind of cache, the browser will try to load the page via https for quite a long time, while ignoring the current headers. <br><br><h6>  <b>1.3 Cache CA</b> </h6><br>  The so-called, certificate authority stamp. <br><br>  This type of caching is considered mandatory if you do not want your site users to wait for the certificate authority (and this is some server that is responsible for the authenticity of your certificate) to process the request from the user's browser and confirm that your site is indeed confirmed by it. <br><br><h6>  <b>1.4 Caching Pages</b> </h6><br>  When the page is already generated, you need to constantly monitor its relevance.  To do this, you must use a server cache with tracking the change time of individual parts of the page (if the page is built from a set of dynamically generated blocks).  With this approach, each response from the server has special headers indicating the time of the page change, which are then sent by the user's browser when the site page is repeated.  When receiving such headers, we can analyze the current state of the page (maybe even draw it), but instead of the page content, give the header <i>‚Äú304 Not Modified‚Äù</i> , which for a custom browser means that you can display the page from your (user‚Äôs browser) cache. <br><br>  Of course, you can send the appropriate headers without using server-side cache tracking, but in this case, most users will get the page content updated rather late.  With this approach, the browser sometimes polls the server for updates, but the frequency and rules for each browser are configured by its developer, so it‚Äôs not necessary to hope that your users will receive updates on time. <br><br>  As a rule, the cache is divided by user type: <br><br>  - for authorized; <br>  - for unauthorized. <br><br>  This separation is due to the unique content for each authorized user and the general content for guest users.  In most sites, an unauthorized user cannot change the contents of the site, and therefore affect its contents. <br><br>  Browser cache saves traffic and time spent on loading pages.  But to achieve the savings effect, the user must visit our page at least once, which means that the load on server resources will decrease, but not significantly. <br><br><h5>  <b>2. Server caching</b> </h5><br>  Server caching refers to all types of caching, in which data is stored on the server side.  This data is not available to client browsers.  The cache is created and stored on a one-to-many basis (many, in this case, client devices). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e47/494/05f/e4749405f29e4f0daaf4a6b32bf337fc.jpg"></div><br><h6>  <b>2.1 Caching the entire page</b> </h6><br>  The most efficient cache.  What makes him interesting?  Its biggest advantage is that the page returns almost at the moment of the request, as a result, it is the ability to process millions of requests even on the weakest server with the speed of the memory and little use of the processor. <br><br>  Perhaps anyone has ever dreamed of a site that works at a speed of "ping" or faster. <br>  But this type of cache has its drawbacks: for example, the inability to cache pages for an authorized user, or a user whose page content depends on the current user variables. <br><br>  Use this cache if the server knows all the static states of external data, such as: uri, get (without additional parameters), the user is not authorized - that is, in fact, this is the ideal page state for guest users.  Consider the fact that with such caching, the architecture of the site or application should always process incoming requests in the same type and give the same type of responses.  Such a state is in any application or website; it only needs to be tracked and a cache applied to it. <br><br>  The caching of pages entirely, most often, is used in some emergency cases, while the page cache is stored for a predetermined time (from 2 minutes), during which the responses from the server are of the same type (do not allow the browser to cache it). <br><br><h6>  <b>2.2 Caching the results of compiling php files</b> </h6><br>  There are both a clean compilation of the code and its optimization during compilation (script substitution).  The most vivid examples: <br><br>  - <a href="http://php.net/manual/ru/book.apc.php">APC</a> ; <br>  - <a href="httpd.net/">XCache</a> ; <br>  - Compilation with the substitution of scripts <a href="http://hhvm.com/">HipHopVirtualMachine</a> . <br><br>  Both types of caching can be used in the project, but each has its own nuances that must be considered when writing code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5d5/aee/7db/5d5aee7dbcf147c1b31704e4839ab97d.png"></div><br><h6>  <b>2.3 Caching individual page blocks</b> </h6><br>  This is perhaps the most interesting, but also a complex type of caching.  However, it can also be effective, and by its example it is easiest to explain the principles of caching in general. <br>  It is necessary to keep track of: the state of the tables, the state of the user's session, whether to turn off caching during POST or GET requests (http query), dependence on the current address, persistence of caching (if previous conditions change) or its dynamic adjustment. <br><br>  Caching individual blocks of pages better than other types of caching is suitable if you need, for example, to reduce the number of database requests from real (authorized) users.  By the way, with properly defined dependencies, it will work even more efficiently than all subsequent types of caching. <br><br>  Why is this kind of caching so important?  The thing is that the expansion of the database server pool is a much more difficult task than the expansion of the server pool of the php-part of the site.  Moreover, php caching state conflicts are much easier to resolve than conflicts when working with multiple databases. <br><br><img src="https://habrastorage.org/files/dba/255/fdb/dba255fdb9464e6a8577f6f84a78ff35.jpg"><br><br><h6>  <b>2.4 Caching php based on unshared resources</b> </h6><br>  It is best suited for standardizing requests, getting data from shared resources, and having internal variables that php resources access several times when a page is generated. <br><br><h6>  <b>2.5 Caching php based on shared resources</b> </h6><br>  Use this caching to store serialized data.  For example: configuration file, table state, file system lists. <br><br><h6>  <b>2.6 mysql caching based on query cache</b> </h6><br>  This is a fairly well-known and most illuminated topic.  Nevertheless, I would like to consider the specifics of working with the timestamp and how to avoid a permanent reset of the query cache. <br><br>  Surely, you regularly come across a situation when you need to give new materials, the date of publication of which is already allowed by the current timestamp?  Simply put, <br><br><blockquote>  WHERE show_ts &lt;= UNIX_TIMESTAMP () </blockquote><br>  If you use the ever-changing timestamp in such queries, then the sql cache will not only be useless, but even harmful, since the number of cached queries will be accumulated, the data of which are outdated at the time the cache is created. <br><br>  We propose the following way out: <br><br>  As a rule, any material is published at certain points in time.  For example, 00:00.  All that needs to be done is to create a query that will evaluate the table by the maximum date, while the smaller current one. <br><br>  Sort of: <br><br><blockquote>  SELECT SQL_NO_CACHE MAX (show_ts) ... WHERE show_ts &lt;= UNIX_TIMESTAMP (); </blockquote><br>  Yes, this query will not be cached, but all queries to this table will be cached if there are more than one of them.  This simple operation will significantly improve the life of sql-caching. <br><br>  It makes sense to cache these queries if the reads from the table are slightly larger than the records. <br><br><h6>  <b>2.7 Caching mysql output, aggregating tables</b> </h6><br>  There is a rule: data updates should be significantly less than reads to return them. <br><br>  That is, it does not make sense to aggregate what will change at the same moment, while the relevance of the aggregated data is important. <br><br>  What to choose for aggregation?  Usually this is some kind of statistical information about the number of records, the date of the last update, the author of the last update, and the like. <br><br><h2>  Conclusion </h2><br>  Given the constant network load, without caching you will not be able to create any project.  Caching makes it possible to deliver data to a large circle of customers, while using minimal resources.  In this article we looked at many types of caching, among which, we are sure, there will be a suitable solution for your project. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d79/224/15b/d7922415be7e4acc90fb0323d0d2c8d4.jpg"></div></div><p>Source: <a href="https://habr.com/ru/post/316316/">https://habr.com/ru/post/316316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316306/index.html">[Peter, Announcement] Meeting JUG.ru with Andrei Ershov: ‚ÄúHow we made a phone platform using GridGain‚Äù</a></li>
<li><a href="../316308/index.html">Modular CSS: - The toolkit that we have now in the arsenal is just a fairy tale</a></li>
<li><a href="../316310/index.html">From an arbitrator to a company owner with a turnover of $ 100 million</a></li>
<li><a href="../316312/index.html">Apple Watch Application Market: Forecasts and Facts</a></li>
<li><a href="../316314/index.html">FIAS addresses in the PostgreSQL environment. Part 1</a></li>
<li><a href="../316318/index.html">Why do I need to reboot domain controllers once a month</a></li>
<li><a href="../316320/index.html">Moving to Swift 3 using the migratory ‚Äúrobot‚Äù in Xcode 8.1 and 8.2</a></li>
<li><a href="../316322/index.html">ZeroNet - Truly Distributed Network: Social Network, Wiki Engine (changes for half a year)</a></li>
<li><a href="../316324/index.html">SDN & NFV and what's the Cloud?</a></li>
<li><a href="../316326/index.html">Dive into the blockchain technology: Worldwide public key infrastructure</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
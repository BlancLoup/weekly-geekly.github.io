<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine learning in Dodo. How to start a new direction, if you are a developer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Under the cut, there is a story about how machine learning appeared in Dodo. Spoiler: I launched it. Hardcore technical details will not be here, I wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine learning in Dodo. How to start a new direction, if you are a developer</h1><div class="post__text post__text-html js-mediator-article">  Under the cut, there is a story about how machine learning appeared in Dodo.  Spoiler: I launched it.  Hardcore technical details will not be here, I will definitely devote a separate article to them.  Today, more about the motivation and support of colleagues. <br><br><img src="https://habrastorage.org/webt/xx/lz/vh/xxlzvhhsgwbifo9tl1lpjsuwooa.png"><br><a name="habracut"></a><br><h2>  Training </h2><br>  I came across the subject of machine learning three times, until something worthwhile came out of it. <br><br><h3>  Russian school </h3><br>  I first encountered machine learning at HSE ‚Äî I received a second tower in the direction of Big Data Systems when I got settled in Dodo.  Having passed this huge HYIP theme tangentially, I did not understand why I spent three years of my life at all.  And certainly not thinking about how this can be useful in the company.  I then was not ready for this challenge of fate. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Czech voyage </h3><br>  The second time I encountered this topic in Prague, at the closed Microsoft hackathon for machine learning.  Together with guys from other companies we worked on the task of forecasting demand in Dodo on holidays and peak days.  Back I returned with a finished model that predicts demand.  It was after this hackathon that thoughts emerged that I could apply the knowledge gained in the company.  It was not there. <br><br>  Well, do you have a model in Jupyter, so what?  How to use it?  All attempts to explain this to business faced a harsh reality: it‚Äôs clear that there will be a lot of orders on holidays and peak days.  Adult pizzerias can predict sales based on data from last year, and new ones have had enough problems without it.  We have put off attempts to engage in the development of machine learning.  But the idea that we can do more with the data, too firmly stuck in my head and did not want to get out of there.  Now I was ready for a challenge, but the company was not. <br><br><h3>  The American dream </h3><br>  The third meeting was fateful.  Our team got a difficult but interesting task: to develop a custom pizza module for the USA.  This is when you can order a pizza with any set of ingredients, create your own recipe.  In the project, everything had to be worked out: from changes in the database architecture to client code on the site.  We clung to the task and developed a product that I consider a real victory.  Home evaluation flew to Slack from Alena, our CEO in the United States. <br><br><img src="https://habrastorage.org/webt/uu/ie/is/uuieis-v1aavtcyp80xumqzrups.png"><br><br>  We did the module, but I saw a problem in scaling.  What if the functionality does not appear in one or two pizzerias in the states, but in a large network?  How to manage such a product, plan stocks?  I decided that this case could prove the need for the development of machine learning in Dodo.  I felt that this time both I and the company are ready to launch a new direction. <br><br><h2>  One on one with cars </h2><br>  In the background, I started analyzing the sales of American customized pizza.  Using clustering algorithms, we were able to show that all the recipes created by users are based on six basic sets of ingredients plus a pair of random ones.  Even a simple report based on this algorithm would allow in semi-manual mode to forecast sales and plan stocks.  Due to the lack of bureaucracy and the ability to rebuild on the go, we were given the green light to begin to engage in this area. <br><br>  We understood with the technical director and more than once discussed that I would need to leave the current team and take up the development of a new direction, to show that we need it.  I needed to plunge into a new sphere at a fast pace.  I understood that if it doesn't work out, there are two ways.  The first is to return to the development of another Dodo team.  The second is to update your resume at HH and look for a new job.  I did not want either one or the other.  I was in this state for about three months, until I caught on the module of additional sales. <br><br><h2>  First project </h2><br>  Another spoiler: it turned out that to start the ML does not need to boil down over something difficult.  Obviously, isn't it?  But it is very difficult to understand at the beginning. <br><br>  The module that offers to add an additional product to the order is not directly controlled by anyone.  This means I can do with it what I want.  Cherry on the cake - an opportunity to increase sales through more personalized offers.  Previously, the module worked simply: if pizza was added to the order, in additional sales the category of drinks was displayed, if pizza and drink, then desserts and so on. <br><br>  The indifference of a huge number of people again showed that I work in a company where support can be provided by absolutely everyone.  I worked for hours on data and additional offers with a colleague from marketing.  We managed to cluster all users according to their taste preferences and loyalty, for each group to make static offers based on the top products in the cluster. <br><br><h2>  Figures and proofs </h2><br>  I screwed up logging of additional products and launched new offers on a sample of 2 million users. <br><br>  A sample of users is only a small part of sales.  We had to move in the direction of unauthorized and new customers.  I shoveled enough articles and literature about Collaborative Filtering and various suggestion algorithms for users.  Won the idea of ‚Äã‚Äãrecommendations based on the products in the basket.  Item-Based Recommendations and the cosine measure of convergence formed the basis of a new, albeit simple, but already working model. <br><br>  In December, we launched the Item-Based recommendations module.  Statistics have shown that buyers can really be interested in completely different products, and not just in drinks.  Perhaps it was after this that Dodo believed that the data and the development of machine learning would compete in the overloaded supply markets in the future. <br><br>  Some statistics. <br><br><img src="https://habrastorage.org/webt/4_/la/y8/4_lay8xudlasbevmuxdlgtnaky4.png"><br>  10 best-selling products on the site <br><br><img src="https://habrastorage.org/webt/ss/ar/fg/ssarfgkntbkpuucvc0pqptlt5n0.png"><br>  10 best-selling mobile app products <br><br><img src="https://habrastorage.org/webt/v5/xy/ef/v5xyef_qol70ptb_chzqcou3u6q.png"><br>  Weekly sales growth <br><br><h2>  Technical trailer </h2><br>  Below are some technical details of why the model is based on a cosine measure of similarity.  This is a preview of the article, which will be released in a couple of months.  If you don‚Äôt like math - feel free to jump to the last section. <br><br>  The source table below shows the number of orders with each user's purchased item.  We can determine the similarity of purchases of one user with another - for this we need to calculate the distance between users' vectors. <br><br><img src="https://habrastorage.org/webt/fh/vl/4p/fhvl4pj0u5l_pxknjbf5uiruibq.png"><br>  Product sales table by customer <br><br>  The distance will depend on the selected metric.  The calculation of the Euclidean space includes the weight and size of the vector: <br><img src="https://habrastorage.org/webt/r5/mv/oy/r5mvoykwxgj90ik9m3mdzcgwumc.png"><br>  where a and b are two different client vectors from the table.  Let's see how this distance will look like on an abstract example. <br><br>  Suppose we look at the history of three customers ‚Äî a, b, and c.  Construct a matrix of their purchases. <br><img src="https://habrastorage.org/webt/kv/x4/lu/kvx4lunnzyn7yz45_ji4gh4mxju.png"><br><br>  By calculating the Euclidean distances between customers, we obtain the following values: <br><br>  d (a, b) = 16.22; <br>  d (b, c) = 13.38; <br>  d (a, c) = 13.64. <br><br>  These values ‚Äã‚Äãindicate that customers b and c are closest to each other.  But if you look at the source data, the picture is the opposite.  Customers A and B prefer to order more Pepperoni and occasionally other products, while Customer C prefers Supreme pizza.  We can conclude that the magnitude of the vector has a negative effect for calculating the distances between customers.  The cosine measure of similarity just takes into account the angle between the vectors, discarding the significance of the magnitude of the vector: <br><br><img src="https://habrastorage.org/webt/zp/hd/ee/zphdeebqxt5xzaalrlgxalsjnpu.png"><br><br>  Calculating the distance using this formula, we get: <br>  d (a, b) = 0.9183; <br>  d (b, c) = 0.5848; <br>  d (a, c) = 0.7947; <br><br>  We see that clients a and b are closer to each other.  They prefer one set of products without taking into account the difference in the number of orders made.  This logic is consistent with our expert opinion and suggests that customer preferences a and b are closest to each other. <br><br>  This is a trailer, details in two months. <br><br><h2>  Search your </h2><br>  Now we are at the stage of forming a team, in which there will be specialists in organizing data storage, developing machine learning models, putting them into production.  But most importantly, we now better understand why we need all this.  We are free to do really cool things, from the organization of an intelligent logistics system and inventory planning to fantastic pizzeria automation ideas using Computer Vision technologies. <br><br>  Believe in yourself and your strength, even if the result is not visible on the horizon.  I would like to complete the article with someone else's thought - a quote by Max Weber from his report to the students of the University of Munich: ‚ÄúYou can‚Äôt do anything alone with anguish and expectation, and you need to act differently - you need to turn to your work and comply with the‚Äú requirement of the day ‚Äù and professional.  And this requirement will be simple and clear if everyone finds his demon and obeys this demon who weaves the thread of his life. ‚Äù  Find yours. </div><p>Source: <a href="https://habr.com/ru/post/442280/">https://habr.com/ru/post/442280/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442266/index.html">Delta Chat - decentralized messenger on top of email</a></li>
<li><a href="../442268/index.html">AsyncIO Micropython: Synchronization Methods in Asynchronous Programming</a></li>
<li><a href="../442270/index.html">5 mistakes to avoid when creating 3D models for 3D printing</a></li>
<li><a href="../442272/index.html">Go + = package version control</a></li>
<li><a href="../442278/index.html">Kibana User Guide. Visualization. Part 6</a></li>
<li><a href="../442284/index.html">NoVerify: Linter for PHP from Team VKontakte is now publicly available</a></li>
<li><a href="../442286/index.html">Russian ophthalmologists told about bionic vision. New mobile application demonstrates cybernet work</a></li>
<li><a href="../442290/index.html">Making ST-Link V2.1 from Chinese ST-Link V2</a></li>
<li><a href="../442292/index.html">Internship Sberseasons: Python, UX / UI, Data and more for students</a></li>
<li><a href="../442294/index.html">What is slightly wrong Oleg Artamonov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
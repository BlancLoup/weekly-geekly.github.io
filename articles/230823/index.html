<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FIAS or KLADR: choose the directory of addresses</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="July 1, 2014, one of the most significant events in the history of the Russian state took place: from this moment on, in our country a reference datab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FIAS or KLADR: choose the directory of addresses</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f95/a8e/889/f95a8e889e0490fcea9eeb0d3b6ad8bd.png" align="right">  July 1, 2014, one of the most significant events in the history of the Russian state took place: from this moment on, in our country a reference database of addresses for all even the smallest localities finally appeared!  The name of this database is FIAS.  Actually, the FIAS reference book itself appeared much earlier, but on July 1, the <a href="http://www.rg.ru/2013/12/30/samoupravlenie-dok.html">Federal Law 443</a> came into force, according to which all state and municipal structures should now rely on it as the only true address base.  We decided to investigate whether it is worth moving to FIAS, and what pitfalls will be faced by those who decide to do it. <br><br>  After reading the article, you will learn: <br><ul><li>  What is the difference between FIAS and KLADR? </li><li>  Is it possible to use FIAS instead of KLADR </li><li>  Should I worry about the transition to FIAS to those who are already working with KLADR </li><li>  Will FIAS solve current address problems? </li><li>  What awaits those who are just starting to use address directories </li><li>  What are the most noticeable and important problems when working with FIAS and KLADR? </li></ul><br><a name="habracut"></a><br><h4>  Why not KLADR? </h4><br>  At the moment, KLADR is considered the main address directory of Russia.  Why did he not make people, and where did the need for a new come from? <br><br>  Initially, KLADR was most likely conceived as a clear, structured directory containing up-to-date information at the addresses of all of Russia.  Currently, this is unfortunately far from the truth.  There are many features in the records of KLADR, and now we will tell about the most interesting of them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Hell in house numbers or a programmer's nightmare </h5><br>  The record of the house number and its extensions (everything that comes after the number: the building, the building, the letter) in KLADR is stored in one line separated by commas.  In this case, the general rules for the formation of the house part, described in the documentation, do not always apply in practice.  So, if you decide to connect KLADR right up to the house, you will have to figure out what to do with the following symbols: <br><div class="spoiler">  <b class="spoiler_title">not to look nervous</b> <div class="spoiler_text">  1kA, 1_A, 31b, 2k1_A, 1p, 21_25, 5 / 34k1, 21/13 / a, 6ld2, 5/2lld2b, 42lld1_4, 21k5 / 2str2b, 2k6str2_7, N (1-700), dvld14_14A, 5kDyoDyoEdk_DeDo, dkdst_2, 7k .2, construction of buildings1, vl22 / 7construction of 3EST, construction of VPL_11 ... <br>  In total there are 6436 different types of home parts records without numbers. <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/c31/fe3/1a7/c31fe31a7d11582366edc166b0ad6dbc.jpg" align="left"><br>  It seems that because of the abundance of different spellings in the reference book, even its creators get confused, since on the same street one can often find different valid entries of the same house.  For example, in the village of Novy (Krasnogorsk district of the Moscow region) in KLADR there is an entry with house 8 and separately with dvld8.  Theoretically, home ownership and a house are different things, but in reality few people write ‚Äúhome ownership,‚Äù and we can safely assume that dvld and just a house are one and the same. <br><br>  Theoretically, KLADR is a directory of addresses that everyone should rely on when compiling any directories with addresses, and, therefore, they must store a key to this database in order to be able to synchronize with KLADR itself to receive updates.  But the KLADR code - the only identifier in this directory - can change from version to version for the same objects.  Therefore, in other directories you will not find it as a key to the address database, everywhere only the address without any id is used to specify the address.  This is bad because the addresses in the directories may contain errors, be irrelevant or not exist at all, and it will take a lot of effort to bring it to KLADR (or use the <a href="http://dadata.ru/">dadata.ru</a> service). <br><br><h5>  Where is this street, where is this lane? </h5><br>  In KLADR, the address is divided into levels (region, district, city, town, and street), and for each level there is a type and name.  For example, the type is an autonomous region, the name is Yamalo-Nenetsky ... Unfortunately, it is not always possible to determine exactly what is the name and what is the type.  And it is not always clear that the problem is KLADR, and what is actually called that. <br><br>  For example, you can find such addresses: <br><div class="spoiler">  <b class="spoiler_title">And again: do not look nervous</b> <div class="spoiler_text">  Type: Autonomous Okrug <br>  Name: "Khanty-Mansiysk Autonomous Okrug - Ugra" <br>  According to KLADR, the correct address is: <i>Russia, Autonomous Okrug, Khanty-Mansiysk Autonomous Okrug - Ugra,‚Ä¶</i> <br><br>  Type: "Chuvashia" <br>  Name: "Chuvash Republic -" <br>  Yes, yes, just like that - with a hyphen at the end.  And the type is excellent. <br><br>  Type: "Street" <br>  Name: "QUARTER NEW CERAMICS 32A" <br>  We regularly receive remarkable addresses of the form: <i>Moscow quarter, New Cheryomushki 32A k8, sq. Xxx</i> - notice that, according to KLADR, the house number is in the street name, and the street type is not a ‚Äúquarter‚Äù, but a ‚Äústreet‚Äù. <br><br>  Type: "Lane" <br>  Name: ‚ÄúUl.  Soviet " <br>  In the village of Dosotuy in the Chita region, there is Sovetskaya Street and Lane Ul.  Soviet ".  Therefore, the address <i>Dosotuy st.</i>  <i>Soviet</i> and <i>Dosotuy side street</i>  <i>Sovetskaya</i> - different addresses <br></div></div><br><br><h5>  Leo or Tolstoy? </h5><br>  There are a lot of mistakes in KLADR.  Indexes of five characters, duplicate records of houses with double numbering and so on. <br><br>  Here are some of them in more detail: <br><ul><li>  There are no streets and even settlements.  Especially strongly manifested for small settlements with a population of less than 10 thousand people.  For example, Gospitalnaya Street in the village of Monino of the Schelkovsky District of the Moscow Region is on the maps, but not in KLADR. </li><li>  Doubles  According to KLADR in Moscow there are two different streets on March 8, which, judging by the index, are far from each other, and they have the same houses.  And there are also two Highway streets, one of which was renamed into Nikolai Sirotkin Street, which are also two.  My special love is the city of Korenovsk in the Krasnodar Territory: according to KLADR, they love Tolstoy very much, as there is Tolstoy Street, Lev Tolstoy Street and Lev Tolstoy Lane. </li><li>  Slow actualization of the directory.  The Universiade Village, built last year for the Universiade in Kazan, appeared there six months after the completion of construction, despite the fact that KLADR is updated every week. </li><li>  Frequent absence or unjustified inheritance of indices from higher levels.  A house in a subordinate locality may have a GD post index in the parent city, which is very far from this house.  For example, Lenin Street in Neftekamsk in Bashkortostan has an index of 450,000, that is, the main post office in Ufa.  When working with indices in such cases, we have our own know-how.  We return two indexes: an index on KLADR for reporting to various structures and an index for the delivery of correspondence, so that the letter still reaches the address. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/896/dad/f0c/896dadf0c40abaceadd960d567d41e8c.jpg" align="right"><br>  Probably, the reason for the errors is that local authorities are responsible for the current state of the directory, and it is possible that the entered information is not verified in any way.  Anyway, the problems of the directory are aggravated by the lack of support: we have repeatedly written letters to the Federal Tax Service indicating errors, but none of them were corrected. <br><br>  So if the address is in KLADR, it is not a fact that it exists in real life, and vice versa. <br><br><h4>  What with FIAS </h4><br>  Let's see what FIAS is and whether it solves the problems of KLADR. <br><br><h5>  Data and structure </h5><br>  The first thing you pay attention to when working with FIAS is more information than in KLADR.  But the useful information was not added as much as we would like.  I highlighted the most significant address information in the form of a comparative table below. <br><br><table><tbody><tr><th>  Field <br></th><th>  KLADR <br></th><th>  FIAS <br></th></tr><tr><td>  Regions and cities of federal significance <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Areas <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Cities and rural districts <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  City areas <br></td><td>  - </td><td>  - </td></tr><tr><td>  Streets <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Homes and Extensions <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Index <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Center status <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Action status (what happened to the object: renamed, reassigned, ..) <br></td><td>  + (conditionally encoded in KLADR code, but very poor decoding of codes) <br></td><td>  + <br></td></tr><tr><td>  Relevance Status <br></td><td>  + <br></td><td>  + <br></td></tr><tr><td>  Record start and end date <br></td><td>  - </td><td>  + <br></td></tr><tr><td>  Condition of the house (does it require repair, how much) <br></td><td>  - </td><td>  + (but the relevance of the data is in doubt, since more than 95% of houses have the same status) <br></td></tr><tr><td>  Object geo-coordinates <br></td><td>  - </td><td>  - </td></tr><tr><td>  Apartment data (list, number or range) <br></td><td>  - </td><td>  - </td></tr><tr><td>  Population (at any level) <br></td><td>  - </td><td>  - </td></tr><tr><td>  Sign of company towns <br></td><td>  - </td><td>  - </td></tr><tr><td>  Unique ID for each house <br></td><td>  - </td><td>  + <br></td></tr><tr><td>  Purpose of the building (residential / non-residential) <br></td><td>  - </td><td>  - </td></tr><tr><td>  Floors, commissioning year, material of the walls of the house <br></td><td>  - </td><td>  - </td></tr></tbody></table><br>  Thus, only the fixed house ID can be distinguished from the useful, which is supposed to never change and can serve as a key for external systems, as well as the start and end dates of the recording.  Otherwise, all new information consists of identifiers that periodically overlap or are part of others. <br><br><h5>  Quality information about homes </h5><br>  In FIAS there are two tables for houses.  The data structure itself is very good: for everything there is a field. <br><br>  The first table, HOUSE, contains the house numbers, and for each there is the following information: <br><br><ul><li>  House number </li><li>  Sign of ownership (possession, house, home ownership, plot) </li><li>  Chassis number </li><li>  Building number </li><li>  Sign of the structure (building, structure, letter) </li><li>  Index </li><li>  Condition of the house </li></ul><br><br>  What are the main differences from the table of houses in KLADR? <br><br>  <b>Pros:</b> <br><ul><li>  Structured information about the house number and its extension.  Records of the type dvd12str1 brought to normal form. </li><li>  Records of the form 11_13 are given to 11-13.  In KLADR, according to the documentation, the intervals of houses are recorded with a hyphen (many houses in one record), so the hyphen in house numbers had to be replaced with underscores.  There is no such problem in FIAS.  One line - one house. </li><li>  Fixed ID for each house. </li></ul><br><br>  <b>Minuses:</b> <br><ul><li>  The problem of houses with double numbering has not been solved: there may be a different number of unrelated records for them, and the house number can contain either 6/9/20 entries or just numbers.  For example, in Kazan there are addresses <i>Kremlin 23</i> , <i>Kremlin 23/17</i> and <i>Kavi Najmi 17/23</i> , which denote the same building </li><li>  Often there are cases when the house number contains a letter (in theory, it should go to the corresponding FIAS field - the building number).  Still sometimes there are records like "38 / 1". </li><li>  In the rooms of the houses there are frank errors, for example, ‚Äú08a‚Äù and ‚Äú0n‚Äù.  (Update: we managed to find out that house 08A really exists, thanks <a href="http://habrahabr.ru/users/bay73/" class="user_link">bay73</a> ) </li><li>  Duplicate houses, non-real-life houses, missing records for existing houses, the absence of indices and their improper inheritance - nothing has improved compared to KLADR. </li></ul><br><br>  The second table with houses, HOUSEINT, contains the spacing of houses.  In KLADR, the table of houses contains records of the type H (1-999), which means all odd houses from interval 1 - 999. In FIAS they are divided into fields: the beginning of the interval, the end, and its attribute.  Unfortunately, the contents of this table are as far from the truth as in KLADR: for example, in Kirov there is an incredibly long Shchors street with all houses in the range from 1 to 9999. <br><br><h5>  The quality of everything else </h5><br>  Let's look a little higher - on address objects down to the street.  They are in the ADDROBJ table. <br><br>  <b>Pros:</b> <br><ul><li>  HSC, SNT and other objects of this kind are brought along with their subordinate streets to separate levels.  In KLADR they were at the level of settlements, which created confusion. </li><li>  A LANDMARK table was added, in which the free form is recorded as finding the address (for example, ‚Äú0.8 km northeast of the village of Lopatino‚Äù or ‚ÄúMKAD, 84th km‚Äù).  And although the table is still small, it seemed to me very promising, especially if it was sent to the open source for replenishment. </li></ul><br><br>  <b>Minuses:</b> <br><ul><li> Problems with the regions have not yet been resolved: in the Chuvash Republic, the type is Chuvashia, in the Khanty-Mansiysk Autonomous Okrug, the type is in the name, etc.  Of course, according to the documents, this should be the case, but it seems to me that one of the main tasks of the address directory is to bring addresses to a standard form. </li><li>  In FIAS there is a separate level for autonomous districts, but there are no objects on it, and all autonomous districts are on the 1st.  Probably, this field is planned to be used under something else. </li><li>  FIAS contains all the same addresses as KLADR, with all its errors. </li></ul><br><br><h5>  Format </h5><br>  FIAS is available in three types: KLADR format, dbf and xml.  The latter seemed to me the most convenient - the files are not divided by region, unlike dbf, but are stored in grouped form in xml.  However, the weight of the source directory in this format is about 14GB. <br><br>  FIAS in dbf format weighs 9GB instead of 14GB, however it doesn‚Äôt have a very convenient structure: the tables of houses and regulatory documents are broken down by region, and as a result, FIAS in this view contains 187 files. <br><br>  FIAS in the KLADR format is essentially the same as the KLADR itself, with rare exceptions, and weighs the same 330 MB.  Line by line comparison of the KLADR and FIAS tables in the KLADR format revealed less than 0.1% of discrepancies, which are probably caused by different unloading times of the KLADR and FIAS databases under review. <br><br><h5>  What does business think </h5><br>  How can switching from KLADR to FIAS affect work?  Is the business ready to move to this directory? <br><br>  Our colleagues from banks, for which the use of address information is key at all stages, do not see the business benefits of switching to FIAS, but plan to do this in order to meet the requirements of the regulator.  Due to the transition of all federal agencies, ministries and departments to FIAS, in the future, there may be requirements to use FIAS when communicating with them (public services, SMEV, reporting, Central Bank). <br><br><h4>  findings </h4><br>  The biggest problem of official reference books in Russia was and remains the irrelevance of the information provided.  As long as there is no normal, well-established system for replenishing FIAS, the quality of data will not be checked and refactoring of what is already in the directory will not be performed, we will meet with all the same problems as in KLADR. <br><br>  The main advantages of FIAS are the initial attempts to standardize addresses and the presence of a stable key for each house. <br><br>  Summarizing: <br><ul><li>  FIAS contains more useful information than KLADR: ID, date of commencement and termination of the record, details of the status of the action on the object. </li><li>  At FIAS, the presentation of information is better organized: information about the house part is divided into components, a level has been added for additional territories and their streets. </li><li>  FIAS files are much heavier than KLADR in its original form: 9GB instead of 300MB. </li><li>  KLADR and FIAS on the content and relevance of addresses are one and the same thing more than 99.9%. </li><li>  Connecting FIAS and KLADR to the application from scratch is approximately equivalent in complexity: in the case of KLADR, you will have to deal with the home part, and with FIAS - what can be removed without a word to shrink the weight of the directory.  In both cases, you will need to deal with the quality of the data, which will take the most time. </li><li>  The FIAS identifier in the future may be required when working with external systems: public services, SMEV, reporting, securities. </li></ul><br><br>  So, while the transition to FIAS makes sense only as a reserve for the future.  If you are already working with KLADR and do not interact with external systems, then you can not switch to FIAS, but use KLADR further.  If you are just starting your acquaintance with the addresses and plan to connect them to your product, or you need reporting and integration, then you should choose FIAS. <br><br>  PS: All the information in the article is relevant for the <a href="http://www.gnivc.ru/inf_provision/classifiers_reference/kladr/">KLADR</a> version 03.07.2014 and the <a href="http://fias.nalog.ru/Public/DownloadPage.aspx">FIAS</a> version 30.06.2014 </div><p>Source: <a href="https://habr.com/ru/post/230823/">https://habr.com/ru/post/230823/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230809/index.html">How GIL works in Ruby. Part 3. Does GIL make your code thread safe?</a></li>
<li><a href="../230811/index.html">Tablet Acer Iconia W4: a small assistant under the yoke of large Windows</a></li>
<li><a href="../230815/index.html">Microsoft will combine different versions of Windows into a single system.</a></li>
<li><a href="../230819/index.html">First exoplanet name contest</a></li>
<li><a href="../230821/index.html">A bit about npm-scripts</a></li>
<li><a href="../230825/index.html">"Roscosmos" is going to create a lunar orbital station visited on the basis of the module for the ISS</a></li>
<li><a href="../230827/index.html">Why should you load your mind into a supercomputer?</a></li>
<li><a href="../230829/index.html">Generation of large cards in a remake of the game "Caesar III (c)"</a></li>
<li><a href="../230831/index.html">NPM 2.0.0 & passing arguments to run-script</a></li>
<li><a href="../230833/index.html">Win32 / Aibatook Banking Trojan Analysis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
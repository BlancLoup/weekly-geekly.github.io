<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clearing the cache in iOS 5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Each iOS application has a working folder for storing files. All items from there, except for the contents of Caches and tmp , are synchronized with t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clearing the cache in iOS 5</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/22e5124a/50999ae3/b9e42acc/fac2ccc5.png"><br><br>  Each iOS application has a working folder for storing files.  All items from there, except for the contents of <code>Caches</code> and <code>tmp</code> , are synchronized with the backup while connecting to iTunes. <br><br>  Before the release of iOS 5, the system never deleted the contents of <code>Caches</code> and <code>tmp</code> , they were the only safe place to store data that should always be available and at the same time that can be re-downloaded in case of loss.  Thus, this data did not take up space in backups and did not slow down synchronization. <br><a name="habracut"></a><br>  In iOS 5, after iCloud backups have appeared, Apple has begun a battle with apps that store too much data in any synchronized folder, such as <code>Documents</code> .  Many developers have already received letters from Apple like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <font color="gray">During the last test, it was discovered that [your application] stores a significant amount of data in the Documents folder.</font> <font color="gray"><br><br></font>  <font color="gray">Since iCloud backups are performed daily via Wi-Fi for each iOS device, it is important to ensure maximum user convenience and minimize the amount of data stored by your application.</font> <font color="gray"><br><br></font>  <font color="gray">In addition to the purchased music, applications, books, photos and device settings, all the contents of the working folder of your application, including the Documents folder, are synchronized with iCloud.</font> <font color="gray"><br><br></font>  <font color="gray">The program itself, as well as the Caches and temp folders are not synchronized with iCloud.</font>  <font color="gray">Your application must store data in specified locations, in accordance with the <a href="http://developer.apple.com/icloud/documentation/data-storage/">rules for using iCloud storage</a> .</font> <font color="gray"><br><br></font>  <font color="gray">Please review the specified documentation, make the necessary changes and update the version of the program in the App Store.</font> </blockquote><br>  The documentation explains everything very clearly: <br><br><blockquote><ol><li>  Only documents and other data created by the user or that cannot be recreated by your application should be stored in the <code>&lt;Application_Home&gt;/Documents</code> folder and will be automatically synchronized with iCloud. </li><li>  Data that can be re-downloaded or recreated by the application should be stored in the <code>&lt;Application_Home&gt;/Library/Caches</code> .  For example, these are database cache files or downloadable content, such as what is used by applications for reading magazines, newspapers and mapping applications. </li></ol></blockquote><br>  It sounds simple: move everything you can re-download in <code>Caches</code> . <br><br>  Instapaper has long been keeping downloaded articles in the <code>Caches</code> folder, because I didn‚Äôt want to slow down users' syncing with iTunes and increase backups unnecessarily, and a complete database update didn‚Äôt happen so often to be a problem for most people.  New rules force me to use <code>Caches</code> : I no longer have a choice. <br><br>  But in iOS 5 there is another important change: <code>Caches</code> and <code>tmp</code> - the only two places that are not included in the backup - are cleaned when the device runs out of memory. <br><br>  Many developers have reported this problem with Instapaper even before iOS 5 became available to the general public, so I am horrified to imagine how many complaints there will be when mass sales of devices with iOS 5 begin. <br><br>  Now there is no place left where to store files that are not needed to be backed up (or even forbidden to be backed up, according to the new rules), but which cannot be deleted at an arbitrary time.  This is a problem for many applications, these are the ones that immediately come to mind: <br><br><ol><li>  Instapaper and other programs that save web articles for offline reading. </li><li>  Applications for reading electronic books (including iBooks, if the rules apply to it) </li><li>  Podcast clients (except for those podcasts that sync with iTunes) </li><li>  Offline Wikipedia </li><li>  Offline mapping software </li></ol><br>  The keyword is <i>offline</i> .  You can say that there is no big problem here, because you can download everything again from the Internet at any time.  But this is not the case. <br><br>  A typical scenario: Instapaper user fills his iPad with content for a long journey.  It synchronizes a pack of movies and podcasts, downloads several magazines and buys a couple of new games, so that as a result, there is almost no free space on the device.  Right before boarding the plane, she remembers that you need to download the latest issue of <i>The Economist</i> magazine (I have a high opinion of my users).  Because of this, the amount of free space falls below the critical point and a trigger is triggered, which runs the cleaning program in the background.  Unnoticed by the user, everything that she saved in Instapaper is erased.  Later during the flight, where there is no access to the Internet, she launches Instapaper and finds the program pristine. <br><br>  (Last week, almost exactly such a case occurred with one of my users). <br><br>  Because of this, everyone suffers: <br><br><ul><li>  She has nothing to read (she just read <i>The Economist</i> ) </li><li>  My program looks guilty, as if I deleted all the files, because of which the user loses trust in the program.  If I'm lucky, she will write to tech support and I will have a chance to explain the true state of affairs.  But, most likely, it will either be quietly disappointed, or put one star in the ratings on the App Store, telling everyone what my program is unreliable and deletes all files without warning.  Because of this, my sales will decrease (at the same time, Apple‚Äôs revenue, which receives 30% of these sales, will decrease). </li><li>  The girl has a negative experience with the iPad, the tablet seems less reliable, which is bad for Apple and iOS itself. </li></ul><br>  Everything gets worse if you think how often access to the Internet is difficult or impossible: <br><br><ul><li>  Devices that are offline most of the day, like the iPod Touch and Wi-Fi iPad </li><li>  3G devices in international roaming </li><li>  Any devices that operate on a network with high data rates or low monthly limits (typical scenario outside the US) </li><li>  Devices in remote areas, where even the best "broadband" access works terribly and it is impossible to quickly download a couple of hundred megabytes </li><li>  Devices that leave the Wi-Fi zone in a few minutes, and then the owner realizes that his content has been removed, but he is late for work, or his children are caught up in rain on a football field, or the dog can no longer tolerate - in general, you need run away now </li></ul><br>  Even if you always have a fast and reliable connection to the Internet, the sudden removal of data in the application in any case presents a problem. <br><br>  When a user saves an article to Instapaper, downloads a book to iBooks or a podcast to Instacast, he expects the content to be available the next time the program is launched.  Even if it is technically possible to re-download, the person views this content as <i>his</i> files - he personally put them here and he decides when and whether to delete them. <br><br>  When the cleaning program erases everything, it looks like the application has deleted its data.  And the user doesn‚Äôt even know that this is a feature of iOS 5 - he logically blames application developers.  Although it is not our fault, it will definitely become our problem. <br><br>  Obviously, there must be a place to store files, like <code>Caches</code> before iOS 5: without backup on iTunes or iCloud, without synchronization.  There, the files will be intact until the program itself is removed from the device. <br><br>  <i>The author of the text is Marco Arment, the author of the program Instapaper.</i> </div><p>Source: <a href="https://habr.com/ru/post/130393/">https://habr.com/ru/post/130393/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130384/index.html">Camera Angle Control</a></li>
<li><a href="../130386/index.html">The Google + user base has exceeded 40 million and continues to grow - the official statistics from Google CEO!</a></li>
<li><a href="../130387/index.html">Framework for web applications built on CodeIgniter</a></li>
<li><a href="../130389/index.html">Common truths</a></li>
<li><a href="../130391/index.html">Easy PERL script for sending and receiving SMS via mobile phone</a></li>
<li><a href="../130395/index.html">Mobile application developer brief: 15 key questions to ask the client</a></li>
<li><a href="../130396/index.html">Writing a module for Ejabberd</a></li>
<li><a href="../130399/index.html">Online photo studio do it yourself</a></li>
<li><a href="../130401/index.html">Tzdata - global knowledge of time zones</a></li>
<li><a href="../130402/index.html">Release MonoDevelop 2.8.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
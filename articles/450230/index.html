<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>You are not google</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Developers are crazy about the strangest things. We all prefer to consider ourselves super-rational creatures, but when it comes to choosing a technol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>You are not google</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/sp/pe/bj/sppebj78v_2idxhv1ej5-exussu.png"></p><br><p>  Developers are crazy about the strangest things.  We all prefer to consider ourselves super-rational creatures, but when it comes to choosing a technology, we fall into a kind of madness, jumping from a comment on HackerNews to a post in some blog, and now as if in oblivion, we are helpless We are sailing towards the brightest light source and dutifully bow before it, completely forgetting about what we were originally looking for. </p><a name="habracut"></a><br><p>  This is not at all like rational people make decisions.  But exactly the way developers decide to use, for example, MapReduce. </p><br><p>  As Joe Hellerstein noted <a href="https://archive.org/details/ucberkeley_webcast_NSKvCVFmk2E">in his lecture on databases for bachelor students</a> (in the 54th minute): </p><br><blockquote>  <em>The fact is that there are about 5 companies in the world that perform such large-scale tasks.</em>  <em>As for everyone else ... they are spending incredible resources to ensure resiliency of the system, which they really do not need.</em>  <em>People had a kind of ‚Äúguglomania‚Äù in the 2000s: ‚Äúwe will do everything exactly as Google does, because we also manage the largest data processing service in the world ...‚Äù [ironically shakes his head and waits for laughter from the audience]</em> </blockquote><p><img src="https://habrastorage.org/webt/cs/6p/x-/cs6px-zosus_teurpriw6sodply.jpeg"><br>  <em>How many floors are there in your data center building?</em>  <em>Google decided to stop at four, at least in this particular data center located in Mays County, Oklahoma.</em> </p><br><p>  Yes, your system is more resilient than you need, but think about what it may cost.  It's not just the need to process large amounts of data.  You are probably exchanging a complete system ‚Äî with transactions, indices, and query optimization ‚Äî for something relatively weak.  This is a significant step backwards.  How many Hadoop users go for it consciously?  How many of them make a really balanced decision? </p><br><p>  MapReduce / Hadoop is a very simple example.  Even the followers of the "cargo cult" have already understood that the planes will not solve all their problems.  Nevertheless, the use of MapReduce allows you to make an important generalization: if you use the technology created for a large corporation, but at the same time solve small problems, you may be acting rashly.  Even so, it is most likely that you are guided by mystical ideas that by imitating giants like Google and Amazon, you will reach the same vertices. </p><br><p><img src="https://habrastorage.org/webt/p4/sf/n2/p4sfn2m-dwznr5kufdonmywu2rk.jpeg"><br>  <em>Yes, this article is another adversary of the "cargo cult".</em>  <em>But wait, I have a useful checklist for you, which you can use to make better decisions.</em> </p><br><h2 id="klassnyy-freymvork-unphat">  Cool framework: UNPHAT </h2><br><p>  The next time you google any new cool technique (re) of building your system, I urge you to stop and just use the <strong>UNPHAT</strong> framework: </p><br><ol><li>  Don't even try to think about possible solutions before <strong>understanding (Understand) the</strong> problem.  Your main goal is to ‚Äúsolve‚Äù a problem in terms of a problem, not in terms of solutions. </li><li>  <strong>List (eNumerate)</strong> several possible solutions.  No need to immediately point your finger at your favorite option. </li><li>  Consider a separate solution, and then read the <strong>documentation (Paper)</strong> , if available. </li><li>  Determine the <strong>historical context (Historical context)</strong> in which the solution was created. </li><li>  Compare the <strong>advantages (Advantages)</strong> with disadvantages.  Analyze what the authors of the decision had to sacrifice in order to achieve their goal. </li><li>  <strong>Think (Think)</strong> !  Think soberly and calmly how well this solution is suited to meet your needs.  <em>What exactly needs to change for you to change your mind?</em>  For example, how much less data should be in order for you to choose not to use Hadoop? </li></ol><br><h2 id="vy-ne-amazon">  You are not amazon </h2><br><p>  Using UNPHAT is easy.  Recall my recent conversation with a company that hastily decided to use Cassandra for the process of intensively reading data loaded at night. </p><br><p>  Since I was already familiar with the documentation for Dynamo and knew that Cassandra is a derivative system, I understood that in these databases the main focus was on the <em>ability to write</em> (in Amazon there was a need to make the ‚Äúadd to cart‚Äù action never did not fail).  I also appreciated that the developers sacrificed data integrity - and, in fact, every feature inherent in a traditional RDBMS.  But after all, the company with which I spoke, the ability to record was not a priority.  To be honest, the project meant creating one big record per day. </p><br><p><img src="https://habrastorage.org/webt/px/sw/xg/pxswxgbgpnk0ovipwmvhya2yt1u.jpeg"><br>  <em>Amazon sells a lot of things.</em>  <em>If the function "add to cart" suddenly stopped working, they would have lost a LOT of money.</em>  <em>Do you have a problem of the same order?</em> </p><br><p>  This company decided to use Cassandra, because the PostgreSQL query in question took a few minutes, and they decided that these were technical limitations from their hardware.  After clearing a couple of moments, we realized that the table consisted of approximately 50 million lines of 80 bytes each.  Her reading from the SSD would have taken about 5 seconds if she had to walk through it completely.  It is slow, but it is still two orders of magnitude faster than the speed at which the request was executed. </p><br><p>  At this stage, I had many questions (U = understand, understand the problem!) And I began to weigh about 5 different strategies that could solve the initial problem (N = eNumerate, list several possible solutions!), But in any case it was already quite clear to the point that using Cassandra was a completely wrong decision.  All they needed was a little patience to set up, probably a new design for the database, and perhaps (although unlikely), the choice of a different technology ... But definitely not a data storage in a ‚Äúkey-value‚Äù format with the ability to write intensively Amazon created for their shopping cart! </p><br><h2 id="vy-ne-linkedin">  You are not LinkedIn </h2><br><p>  I was quite surprised to find that one student startup decided to build his architecture around Kafka.  It was amazing.  As far as I could tell, their business conducted only a few dozen very large operations per day.  Perhaps a few hundred on the most successful days.  With such bandwidth, the main data repository could be handwritten notes in an ordinary book. </p><br><p>  For comparison, recall that Kafka was created to handle all analytical events on LinkedIn.  This is just a huge amount of data.  Even a couple of years ago, it was <a href="https://engineering.linkedin.com/kafka/running-kafka-scale">about 1 trillion events a day</a> , with a peak load of 10 million messages per second.  Of course, I understand that Kafka can be used to work with lower loads, but that it is 10 orders less than that? </p><br><p><img src="https://habrastorage.org/webt/ym/go/ut/ymgoutcmv7qmmm0n9ol2uxvfpaa.jpeg"><br>  <em>The sun, being a very massive object, is only 6 orders of magnitude heavier than the Earth.</em> </p><br><p>  Maybe the developers even made a deliberate decision based on the expected needs and a good understanding of the purpose of Kafka.  But I think that they rather fed on (as a rule, justified) community enthusiasm for Kafka and hardly ever wondered if this was really the tool they needed.  Just imagine ... 10 orders of magnitude! </p><br><h2 id="ya-uzhe-govoril-vy-ne-amazon">  I have already mentioned?  You are not amazon </h2><br><p> Even more popular than Amazon‚Äôs distributed data warehouse is an architectural approach to development that provided them with scalability: a service-oriented architecture.  As Werner Vogels noted in <a href="https://queue.acm.org/detail.cfm%3Fid%3D1142065">this 2006 interview</a> he gave to Jim Gray, in 2001, Amazon realized that they had difficulty scaling the interface (front-end parts) and that a service-oriented architecture could help them.  This idea infected one developer after another while start-ups consisting of only a couple of developers and practically having no clients, did not begin to split up their software into nanos-services. </p><br><p>  By the time Amazon decided to switch to SOA (Service-oriented architecture), <a href="http://media.corporate-ir.net/media_files/irol/97/97664/reports/2001annualreport.pdf">they had about 7,800 employees, and their sales volumes exceeded $ 3 billion</a> . </p><br><p><img src="https://habrastorage.org/webt/jm/tu/ft/jmtuftcplxwvwt4hipq9v291lig.jpeg"><br>  <em>San Francisco‚Äôs Bill Graham Auditorium can seat 7,000 people.</em>  <em>Amazon had about 7,800 employees when they switched to SOA.</em> </p><br><p>  This does not mean that you should postpone the transition to SOA until your company reaches 7,800 employees ... just <em>always think with your head</em> .  Is this really the best solution for your task?  What kind of task is you facing and are there any other ways to solve it? </p><br><p>  If you tell me that the work of your organization, consisting of 50 developers, will simply rise without SOA, then I‚Äôm wondering why so many large companies function just fine using a single, but well-organized application. </p><br><h2 id="dazhe-google--ne-google">  Even Google is not Google </h2><br><p>  Examples of using systems for processing high-loaded data streams (Hadoop or Spark) can really cause confusion.  Very often, traditional DBMSs are better suited for the available load, and sometimes the data volumes are so small that even the <em>available memory</em> would suffice for them.  Did you know that you can buy 1TB of RAM somewhere for $ 10,000?  Even if you had a billion users, you would still be able to provide each of them with 1 KB of RAM. </p><br><p>  Perhaps this will not be enough for your load, because you will need to produce reading and writing to disk.  But do you really need several thousand disks to read and write?  Here's how much data you have in fact?  GFS and MapReduce were created to solve computing problems across the entire Internet ... for example, to recalculate the search index <em>throughout the Internet</em> . </p><br><p><img src="https://habrastorage.org/webt/eo/ys/qa/eoysqaa_e4yvtbekv9jmx-ct_km.jpeg"><br>  <em>Hard disk prices are now much lower than in 2003, when GFS documentation was published.</em> </p><br><p>  Maybe you read the GFS and MapReduce documentation and noticed that one of the problems for Google was not data volumes but bandwidth (processing speed): they used distributed storage because it took too long to transfer bytes from the disks.  But what will be the bandwidth of the devices that you will use this year?  Considering that you don‚Äôt even need to get as many devices as Google needed, maybe it‚Äôs better to just buy more modern drives?  How much does it cost to use SSD? </p><br><p>  Maybe you want to consider the possibility of scaling in advance.  Have you done all the necessary calculations?  Will you accumulate data faster than SSD prices will go down?  How many times will your business need to grow so that all available data no longer fits on one device?  As of 2016, Stack Exchange processed 200 million queries per day <a href="https://nickcraver.com/blog/2016/02/17/stack-overflow-the-architecture-2016-edition/">with support for only 4 SQL servers</a> : the main one for Stack Overflow, one more for everything else, and two copies. </p><br><p>  Again, you can resort to UNPHAT and still decide to use Hadoop or Spark.  And the decision may even be true.  The main thing is that you <em>really use the appropriate technology to solve your problem</em> .  By the way, Google is well aware: when they decided that MapReduce is not suitable for indexing, they stopped using it. </p><br><h2 id="pervo-napervo-ponyat-problemu">  First things first, understand the problem </h2><br><p>  My message may not be something new, but perhaps in this form it will respond to you or maybe it will be easy for you to remember UNPHAT and apply it in life.  If not, you can watch Rich Hickey's speech on <a href="https://www.youtube.com/watch%3Fv%3Df84n5oFoZBc">Hammock Driven Development</a> , or Paul <a href="https://www.amazon.com/How-Solve-Mathematical-Princeton-Science/dp/069111966X">‚Äôs How to Solve it</a> , or Hamming <a href="https://www.youtube.com/playlist%3Flist%3DPL2FF649D0C4407B30">‚Äôs The Art of Doing Science and Engineering</a> .  Because the main thing that we all ask is to think! </p><br><p>  <strong>And really understand the problem you are trying to solve.</strong>  In the inspirational words of Paul: </p><br><blockquote>  ‚Äú <em>It is foolish to answer a question that you do not understand.</em>  <em>It‚Äôs sad to aim for a goal that you don‚Äôt want to achieve. ‚Äù</em> </blockquote><br><hr><br><h2 id="perevod-na-russkiy">  Translation into Russian </h2><br><p>  <strong>Translation:</strong> <a href="https://teleg.one/solkent">Alexander Tregubov</a> <br>  <strong>Edited by:</strong> <a href="https://teleg.one/ponchiknews">Alexey Ivanov (@ponchiknews)</a> <br>  <strong>Community:</strong> <a href="https://teleg.one/ponchiknews">@ponchiknews</a> <br>  <strong>Illustration:</strong> <a href="https://www.lucidchart.com/blog/decision-making-process-steps">LucidChart Content Team</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/450230/">https://habr.com/ru/post/450230/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450214/index.html">We launch inspections IntelliJ IDEA on Jenkins</a></li>
<li><a href="../450216/index.html">Holiday or weekend?</a></li>
<li><a href="../450222/index.html">5 cool digital marketing services that have not been heard in Russia</a></li>
<li><a href="../450224/index.html">Step-by-Step Guide to Creating a Voice Assistant with Python</a></li>
<li><a href="../450228/index.html">10 myths about rabies</a></li>
<li><a href="../450232/index.html">Reverse osmosis water treatment systems - healthy or not?</a></li>
<li><a href="../450234/index.html">How machines communicate: Modbus protocol</a></li>
<li><a href="../450236/index.html">How I stopped worrying and looked differently at working time accounting systems</a></li>
<li><a href="../450238/index.html">Validation on TypeScript interface using Joi</a></li>
<li><a href="../45024/index.html">Themes are now available in Gmail</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
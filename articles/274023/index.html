<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Select PHP version for a specific CMS and do not cry</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúI told you - they flew, but they didn‚Äôt run!‚Äù 
 ‚ÄúCome on, ostrich, go! We work, we work! ‚Äù 
 


 PHP is now one of the most popular programming langu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Select PHP version for a specific CMS and do not cry</h1><div class="post__text post__text-html js-mediator-article">  <i>‚ÄúI told you - they flew, but they didn‚Äôt run!‚Äù</i> <i><br></i>  <i>‚ÄúCome on, ostrich, go!</i>  <i>We work, we work! ‚Äù</i> <i><br></i> <br><img src="https://habrastorage.org/files/9c8/bb2/a38/9c8bb2a38cf34beab2071d548a93fee0.jpg"><br><br>  PHP is now one of the most popular programming languages ‚Äã‚Äãused to create websites.  On shared linux web hosting in Russia with the choice of the PHP version is not entirely smooth, although there are exceptions to this rule. <br>  Why is version selection necessary?  Interesting?  Welcome under the cut! <br><a name="habracut"></a><br>  Consider the system requirements of the most common CMS on the Russian market - <a href="https://ru.wordpress.org/">WordPress</a> , <a href="https://www.1c-bitrix.ru/">Bitrix</a> , <a href="https://www.drupal.org/">Drupal</a> and <a href="https://www.joomla.org/">Joomla</a> for <a href="https://www.php.net/">PHP</a> versions (we will not talk about the modules, this is a topic for a separate article): <br><div class="spoiler">  <b class="spoiler_title">list</b> <div class="spoiler_text"><ul><li>  <a href="https://www.drupal.org/">Drupal</a> 8: PHP 5.5.9 or higher </li><li>  <a href="https://www.1c-bitrix.ru/">Bitrix</a> : PHP 5.3 or higher </li><li>  <a href="https://www.joomla.org/">Joomla</a> 3.4.7: PHP 5.5 or higher </li><li>  <a href="https://ru.wordpress.org/">WordPress</a> 4.4: PHP 5.2.4 or higher </li></ul><br></div></div><br>  But what comes out of the box in the most common distributions, which are installed at the hosts: <br><div class="spoiler">  <b class="spoiler_title">list</b> <div class="spoiler_text"><ul><li>  <a href="https://www.centos.org/">CentOS</a> : <br><ul><li>  6 - PHP 5.3 </li><li>  7 - PHP 5.4 </li></ul><br></li><li>  <a href="https://www.debian.org/">Debian</a> : <br><ul><li>  7 - PHP 5.4 </li><li>  8 - PHP 5.6 </li></ul><br></li><li>  <a href="http://www.ubuntu.com/">Ubuntu</a> : <br><ul><li>  13 - PHP 5.4 </li><li>  14 - PHP 5.5 </li></ul></li></ul><br></div></div><br>  We use <a href="https://cloudlinux.com/">CloudLinux</a> , which corresponds to CentOS 6.7 in terms of package base.  The ‚Äúout of the box‚Äù situation is not bright - the PHP versions are very old. <br>  And those clients whose site has been created for a long time and CMS has not been updated (and there are many of them coming to us from other hosting sites) usually want exactly the opposite - older versions of PHP due to the fact that their CMS has compatibility problems. <br>  So there are two ways out: either collect from the source itself, or install from third-party repositories, which is not always possible. <br><br>  What to do, how to be: <br><ul><li>  Constantly rebuild packages from source? </li><li>  Depend on third-party repositories (people)? </li><li>  Watch for bug tracks for prompt patching? </li><li>  Keep a few VPS or dedicated servers with different versions of PHP for various WEB projects (and also for development)? </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There is an alternative and we use it in our work: <a href="https://cloudlinux.com/">CloudLinux + CageFS + PHP Selector</a> !  My colleague told about the first two components in a <a href="http://habrahabr.ru/company/inoventica/blog/273733/">recent article</a> . <br>  These three components allow us to do the following: <br><ul><li>  Reduced labor costs, both for deployment and for project support. </li><li>  Ability to choose PHP version without contacting technical support.  Switch versions in less than a minute! </li><li>  Backup and access to the console or directories using secure SSH protocol.  Also a proven way - the FTP protocol. </li><li>  Disaster - the ability to quickly deploy infrastructure in another data center `s. </li></ul><br>  To obtain this functionality, we had to test and then implement the following: <br><ul><li>  Create your own repository and update system for it.  What cost us the appearance of red-eye employees.  We built PHP assemblies (5.2 - 5.6) with our own parameters in order to install and use them in parallel in one system. </li><li>  Create management pages on the self-service portal. </li><li>  Implement a trained agent in CloudLinux for billing and service management from LK.  At the time of development of the agent in CloudLinux, there was still no such functionality as PHP Selector, therefore, the agent itself performs this function. </li></ul><br>  How does all this happen in a real environment?  This can be done from LC: <br><ul><li>  With a registered account we go into <a href="https://lk.invs.ru/">the client‚Äôs personal account</a> .  You can register for free. </li><li>  Add the service ‚ÄúHosting on Linux‚Äù, one of the four tariffs. </li><li>  Enter service settings: <br><div class="spoiler">  <b class="spoiler_title">look</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/6d0/1b1/879/6d01b1879bc54f16a0168613ad1a34c4.png"><br></div></div><br></li><li>  Select the PHP version and click save.  Somewhere in a minute, LK will poll the agent installed on the WEB-box and give him the changes.  The agent, in turn, for the desired user will change the wrapper to run PHP, to the selected version. </li></ul><br>  Additionally, you can enable modules on the WEB service: <br><div class="spoiler">  <b class="spoiler_title">look</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/2a3/813/9ee/2a38139ee3e444d89da757379f6ed274.png"><br></div></div><br><br>  I will dwell a bit on the agent that interacts between the LC and the system where the hosting is deployed.  The agent (written in python) is a service with a documented api that allows you to interact with CloudLinux.  as an orchestrator.  With regards to PHP - the agent allows you to change the version and settings for a specific client.  When creating a new service (user), the agent uses the predefined settings, which can later be changed to custom ones. <br><br>  If it is interesting to find out how it all works in more detail, I am waiting for comments on the most interesting points. <br><br>  <i>If you see any errors in the article - please write about it in PM.</i> </div><p>Source: <a href="https://habr.com/ru/post/274023/">https://habr.com/ru/post/274023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274013/index.html">What the JavaScript market will look like in 2016</a></li>
<li><a href="../274015/index.html">FlexPod Express: UCS-Managed Configuration</a></li>
<li><a href="../274017/index.html">Comparison of sorting algorithms</a></li>
<li><a href="../274019/index.html">Soviet school: address programming language</a></li>
<li><a href="../274021/index.html">Trading and "iron": What are stock exchange data centers</a></li>
<li><a href="../274025/index.html">Dagger 2 and the structure of the application for Android</a></li>
<li><a href="../274027/index.html">Recurrent neural network in 10 lines of code appreciated the feedback from viewers of the new episode of ‚ÄúStar Wars‚Äù</a></li>
<li><a href="../274029/index.html">Free hosting control panels. Goddess vesta</a></li>
<li><a href="../274033/index.html">A little bit about working with containers</a></li>
<li><a href="../274035/index.html">SVG highs and lows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
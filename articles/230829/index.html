<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generation of large cards in a remake of the game "Caesar III (c)"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you are a lover of the game "Caesar III", then you probably noticed that with what diligence and attention to trivia the campaign maps were made, a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generation of large cards in a remake of the game "Caesar III (c)"</h1><div class="post__text post__text-html js-mediator-article"> If you are a lover of the game "Caesar III", then you probably noticed that with what diligence and attention to trivia the campaign maps were made, and the free mode too.  Natural landscapes on which the player builds a ‚Äúnew Rome‚Äù look quite realistic (as part of the game): streams flow into rivers and lakes, rivers flow through the entire map, and ‚Äúimmortal‚Äù sheep roam in the forests, sometimes wandering into the meadows and making it difficult to build farm, seagulls circling over the accumulation of fish, and sometimes an unlucky sailor sails along the river on the remains of a ship.  The rock massifs are surrounded by trees, and the ground is covered with a carpet of lush green grass.  All this wonderful image has a flaw, the size of the map does not exceed 160x160 tiles, in the article I will tell how I did the generation of maps of large sizes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/523/aaa/82b/523aaa82bfb1e800015b2b28c4c6d11c.jpg"><br><a name="habracut"></a><br>  The original game does not support large maps, so all the experiments were conducted in the framework of the <a href="https://bitbucket.org/dalerank/caesaria/overview">CaesarIA</a> project <a href="https://bitbucket.org/dalerank/caesaria/overview">(open-source clone Caesar III (c))</a> .  The support of the big cards in the remake was from the very beginning, but before reading a good <a href="http://habrahabr.ru/post/111538/">article on using the diamond-square method in building landscapes</a> , it was not possible to load any cards besides those that went with the game or were made by fans.  Having understood the direction in which to move, I came across another article on the <a href="http://javagamexyz.blogspot.ru/2013/03/terrain-generation.html">generation of landscapes</a> , which finally convinced me of the reality of using this method to automatically create a map. <br><br>  The result of the original algorithm will be an array of points with heights, associating the height with color, we get such a map. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/fad/377/78f/fad37778f20cc5d16380604e716428f0.jpg" alt="image"><br><br>  Colors have corresponding meanings: <br>  - blue color corresponds to water with great depth, <br>  - brighter will mean water near the coast, <br>  - yellow will be the coast <br>  - green means grass and flat areas, <br>  - a deep green forest will be displayed, <br>  - gray and dark gray, small and high mountains, respectively. <br><br>  When adapting the results of work to the specifics of the landscape of the game, I had to revise the interpretation of some values ‚Äã‚Äãand settings, but in general, these data are suitable for further processing.  Now you can display the obtained values ‚Äã‚Äãon the map of the city, for a start I will only change the water tiles and leave the rest unpainted. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f0/117/4af/3f01174af2e5b5b9a88ef528c34b9d23.jpg" alt="image"><br><br>  After pouring water tiles, you can fill the grass, forest and mountains.  Now the generated map is more like a regular one. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af2/799/ee4/af2799ee4b45b892b9c79919f94f0222.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/f4c/08a/9ba/f4c08a9badd9b46d11e4f2181006d0bb.jpg"><br><br>  The remaining large part of the map is supposed to be covered with high mountains, but then it will become impassable for people, so instead of high mountains I again use plain tiles.  On the resulting map, the areas adjacent to the water remained unfilled. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a0/8bf/b2d/1a08bfb2d80cbd42734dd34f7bd191ed.jpg"><br><br>  When filling in these areas, you will have to take into account the position of your neighbors in order to choose the right texture for a particular tile.  The game has the following types of textures for the beach oriented: <br>  - on North: <img src="https://habrastorage.org/getpro/habr/post_images/1dc/678/765/1dc678765533324a78699239ac33af91.png"><img src="https://habrastorage.org/getpro/habr/post_images/17f/c1a/4ab/17fc1a4abb72f1115cabc8ebeb196bf2.png"><img src="https://habrastorage.org/getpro/habr/post_images/1ea/425/e9b/1ea425e9bc53c7ff23a1837af7dc2a32.png"><img src="https://habrastorage.org/getpro/habr/post_images/96b/91a/5d4/96b91a5d404c6f3ce01d8dc3fc426e84.png"><br>  - to the East: <img src="https://habrastorage.org/getpro/habr/post_images/f11/17e/c85/f1117ec85b1b07a65c66fb401b6fb442.png"><img src="https://habrastorage.org/getpro/habr/post_images/6fa/4d4/ee8/6fa4d4ee83ea44b226d3612371b5020d.png"><img src="https://habrastorage.org/getpro/habr/post_images/b7b/ff4/cfd/b7bff4cfdd049fcf144bcef3d6cfcc38.png"><img src="https://habrastorage.org/getpro/habr/post_images/31b/7d5/527/31b7d5527d944da6246bf79408b0a315.png"><br>  - South: <img src="https://habrastorage.org/getpro/habr/post_images/1dc/531/baf/1dc531baf7d991f70eaa1786c640d787.png"><img src="https://habrastorage.org/getpro/habr/post_images/1d5/e4d/a9d/1d5e4da9d8ae8b178f55677929221bc0.png"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/6f4/c42/0b36f4c42a3d01f8b18b963d99ac281a.png"><img src="https://habrastorage.org/getpro/habr/post_images/569/17a/9e1/56917a9e1d2f1c5ef7df04ea9af6fa49.png"><br>  - to the west: <img src="https://habrastorage.org/getpro/habr/post_images/fe3/ecd/0ac/fe3ecd0aca5b61be20f7f12fb8c46a24.png"><img src="https://habrastorage.org/getpro/habr/post_images/a8b/f78/0c9/a8bf780c95ffeea1c990b07c815ea223.png"><img src="https://habrastorage.org/getpro/habr/post_images/604/035/8f9/6040358f9508e92e8d177f6978fabb89.png"><img src="https://habrastorage.org/getpro/habr/post_images/61d/daa/81b/61ddaa81b4b9279d4fd8afb508dd861d.png"><br><br>  Such tiles are determined by the location of the water tiles relative to the tile for which the calculation is performed.  For example, a north oriented coast tile may have a water tile only in the north, northeast, and northwest directions, and combinations thereof.  Similarly, we perform calculations for the rest of the coast tiles and do not touch the others.  The result will be a coastline without corner tiles. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/960/0d1/644/9600d1644dea3484cf885813c4633b80.png" alt="image"><br><br>  The next step is to find the corner tiles that were skipped in the previous step.  Such tiles have triples of neighbors (water) in the direction of north-&gt; northeast-&gt; east, east-&gt; southeast-&gt; south, and analogous ones.  To display the angles of the coast, the game has the following textures: <img src="https://habrastorage.org/getpro/habr/post_images/c1c/7cb/3be/c1c7cb3beec14cc61ade6a47abce2c73.png"><img src="https://habrastorage.org/getpro/habr/post_images/f95/23b/b67/f9523bb6770c32f8a7b76115e3865f90.png"><img src="https://habrastorage.org/getpro/habr/post_images/687/e6e/c59/687e6ec5939ac529802b5c3e5b69e420.png"><img src="https://habrastorage.org/getpro/habr/post_images/3c6/bf3/7bd/3c6bf37bd5be6020d42e27a41b111dc0.png">  By placing them we get almost complete map. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a48/964/21f/a4896421f5c5fd96307ec2dc6c56cb1d.jpg" alt="image"><br><br>  Now there are tiles on the water and on the ground that were not processed in the previous stages.  Tiles that are surrounded by earth on all sides also carry to the ground, and those that are surrounded by water - respectively, to the water.  Tiles of the coast are simultaneously considered both water and land.  It now remains to supplement the map with the road, so that the settlers could come and rivers to diversify the general landscape. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53f/62d/623/53f62d623a3d561488944be4d89ca96b.jpg" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/f06/078/55a/f0607855a73b95f0cd509c2c9a49f6e8.jpg" alt="image"><br><br>  Generating a 500x500 tile map takes a little time, but still significantly more than loading ready-made maps.  Below I posted a screenshot of a large map, the size of which is 3800x1880 pixels.  On such a map, you can add different objects, settlements and even a city in single player mode, but I see that it is more suitable for network.  Another of the positive aspects of the selected algorithm is scalability, you can save the results of calculations and, if necessary, use them to calculate the neighboring territory. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c04/a4e/5cd/c04a4e5cd15537a6b747c6f4cf73ce6f.jpg"><br><br>  Of course, the generated map does not compare with what was done by a person, but the ability to create maps in automatic mode allows you to go a step further in creating the continuation and development of the ideas contained in the original game.  You can also watch and participate in the development of the Caesar III remake on <a href="https://bitbucket.org/dalerank/caesaria/overview">the project page</a> .  The source code of the map generator is <a href="">here</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Bonus</b>  <b class="spoiler_title">Screenshots from the remake</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/ea7/88a/dce/ea788adce8b50d1165250b8c699e1ac4.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/065/4df/95c/0654df95c09928d6aaf2781702e2ce80.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/0c3/477/deb/0c3477deb93bb33928c4061d55c73703.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/91a/cdf/c8f/91acdfc8fdd05087087bff91e27da2bd.jpg"><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/230829/">https://habr.com/ru/post/230829/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230819/index.html">First exoplanet name contest</a></li>
<li><a href="../230821/index.html">A bit about npm-scripts</a></li>
<li><a href="../230823/index.html">FIAS or KLADR: choose the directory of addresses</a></li>
<li><a href="../230825/index.html">"Roscosmos" is going to create a lunar orbital station visited on the basis of the module for the ISS</a></li>
<li><a href="../230827/index.html">Why should you load your mind into a supercomputer?</a></li>
<li><a href="../230831/index.html">NPM 2.0.0 & passing arguments to run-script</a></li>
<li><a href="../230833/index.html">Win32 / Aibatook Banking Trojan Analysis</a></li>
<li><a href="../230835/index.html">Design Lynch: Designing Applications for WP with Expert Dave Crawford</a></li>
<li><a href="../230837/index.html">Soon ICFPC 2014</a></li>
<li><a href="../230839/index.html">Firefox 31 release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
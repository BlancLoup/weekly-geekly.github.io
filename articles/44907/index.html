<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of MQ (Messages queue) for use in projects on PHP. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In parallel to the main work, I am thinking about the implementation of the architecture for game projects in the ‚Äúbackground‚Äù (let me remind you that...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of MQ (Messages queue) for use in projects on PHP. Part 1</h1><div class="post__text post__text-html js-mediator-article">  In parallel to the main work, I am thinking about the implementation of the architecture for game projects in the ‚Äúbackground‚Äù (let me remind you that the main area of ‚Äã‚Äãmy interests and work is the creation of online browser games).  Lately, I am increasingly returning to the idea that it would be interesting to implement the main game server based on message queues (MQ or Messages queue).  That is, the engine of such a game will be a set of components that will communicate with each other through asynchronous messages, and each component can be either a message generator or a subscriber, that is, execute other messages. <br><br>  This approach, as I understand it, is widely used in the Java world, there is a Java Message Service ( <a href="http://en.wikipedia.org/wiki/Java_Message_Service">JMS</a> ) standard for this and message brokers are used and the Enterprise service bus ( <a href="http://en.wikipedia.org/wiki/Enterprise_service_bus">ESB</a> ) architecture is based on this, for example, <a href="http://servicemix.apache.org/home.html">Apache ServiceMix</a> .  But for us, this is still a high sphere of large projects, and in the specifics of the web and web-based applications, I would like to consider whether something like this can be done, but with less cost, and to provide application resiliency, load balancing and asynchronous processing.  And of course, it is very desirable that this be implemented in PHP as the main language of implementation of all server components. <a name="habracut"></a><br><br>  And so, once again - MQ, this is the architecture and middleware, which is engaged in collecting, storing and routing (distributing) messages between components.  I do not pretend to be complete, and, quite possibly, do not take into account many nuances, so do not consider my definitions as an axiom, it is best to read additional literature if you want to understand MQ architecture more deeply (for example, these articles: [ <a href="http://baza.farpost.ru/blog/24">1</a> ], [ <a href="http://www.osp.ru/pcworld/2007/03/4198959/">2</a> ], [ <a href="http://en.wikipedia.org/wiki/Message_Oriented_Middleware">3</a> ]) and definition in Wikipedia - <a href="http://en.wikipedia.org/wiki/Message_queue">Message queue</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For now, let's look very briefly, at a glance, which systems for implementing message systems are there, and, most importantly, which of them can be considered as the basis for the specifics of my project.  And although I thought to consider only PHP implementation, it turned out that it was necessary to ‚Äúdig deeper‚Äù, so we will touch on systems in other languages, but with the ability to interact with PHP applications. <br><br><img title="apachemq" src="http://abrdev.com/wp-content/uploads/2008/11/apachemq.png" width="394" height="106" align="left">  <strong><a href="http://activemq.apache.org/">Apache ActiveMQ</a></strong> is an open implementation of Message Broker and Enterprise Integration Patterns (if very briefly now, an extension for implementing additional processing according to the rules).  This project, in my opinion, of all open, the most powerful and developing, version 5.1 recently released.  It implements many standards and provides all the features needed for Enterprise-level solutions, it is included in the Apache Java technology stack.  What interested me is the possibility of cross-language messaging, which means that customers can be implemented in any language.  For Java, C, C ++, C # <a href="http://activemq.apache.org/openwire.html">platforms</a> , this is <a href="http://activemq.apache.org/openwire.html">the OpenWire library</a> , which implements the Wire protocol for native access to MQ, for other languages, including, interestingly, PHP, is <a href="http://activemq.apache.org/stomp.html">Stomp</a> - an implementation of libraries for different scripting languages, which turns messages into JMS.  By the way, if you need to provide secure communication and messaging, you can use SSL. <br><br>  <strong><a href="http://www.foo.be/mqs/">MQS (Minimalist Queue Services)</a></strong> is a project, so to speak, from the other end.  This small system written in Perl organizes a message queue system using the XML-RPC protocol, the messages themselves can be stored in any database or in files.  Unfortunately, the project seems to be abandoned, since the latest news on the site is dated April 2005, and the current version is 0.0.14. <br><br>  <strong><a href="http://www.spread.org/index.html">Spread</a></strong> is another implementation of the message queue, this time in C ++, and there are versions for various platforms, including Win32, Linux, BSD and MacOS.  The current version is 4.0.  The system is distributed and focused on high-performance systems, where there are a lot of customers and, accordingly, communications.  Declared support, in the latest 4.0 version, technology <a href="http://en.wikipedia.org/wiki/Virtual_synchrony">Virtual Synchrony</a> .  What is interesting - the delivery immediately includes binary versions for several platforms, as well as built-in interfaces for some languages ‚Äã‚Äã- C / C ++, Java, Perl, Python, Ruby.  It is strange that the fourth P - PHP is not among them, but there is an <a href="http://pecl.php.net/package/spread">extension in the PECL</a> that implements the entire Spread API.  The current version 2.1 and quite new, it means the project is developing.  There are also implementations for other languages, including alternatives to built-in interfaces, so look at the <a href="http://www.spread.org/SpreadPlatforms.html">list here</a> , there is an extension even for MS Excel.  Among the interesting projects is the <a href="http://lethargy.org/mod_log_spread/">mod_log_spread Apache</a> module, which allows you to collect access logs from several web servers. <br><br><img title="rabbitmqlogo" src="http://abrdev.com/wp-content/uploads/2008/11/rabbitmqlogo.png" width="328" height="87" align="left">  <strong><a href="http://www.rabbitmq.com/">RabbitMQ</a></strong> is a high-performance platform written on Erlang, based on the Open Telecom Platform, which means it is a very reliable and scaled system, often used in telecommunication applications and other similar systems.  There is an interface only for Java and C ++.  The system supports the standard AMQP ( <a href="https://jira.amqp.org/confluence/display/AMQP/About%2BAMQP">Open Standard for Messaging Middleware</a> ).  The system is interesting, only Erlang would know, although something tells me that by designing the entire server module on this platform, we would get a lot of "buns", in particular, the most popular Jabber server ejabberd was written on this platform, which apply in online gaming projects. <br><br>  <a href="http://xph.us/software/beanstalkd/"><strong>Beanstalkd</strong></a> is also an interesting project created as part of the development of one of the applications for the social network Facebook, which is used by about 10 million people (an application, not a network).  It is a specialized server for storing and processing job queues, using data storage in memory to ensure speed, but at the expense of fault tolerance.  This project is very similar to <a href="http://abrdev.com/%3Fp%3D471">MemcacheQ</a> already <a href="http://abrdev.com/%3Fp%3D471">described by us</a> , and the developers themselves are grateful to the creators of memcached for the principles of architecture and protocol.  The system is designed to create an asynchronous queue of custom task handlers that do not require an immediate response, for example, sending letters, background processing, etc.  There are <a href="http://xph.us/software/beanstalkd/client.html">client APIs</a> for various languages, including Erlang, OCaml, Perl, PHP, Python, Ruby.  For PHP, the library <a href="http://sourceforge.net/projects/beanstalk/">is located here</a> and still has version 0.11, development itself started just a couple of months ago (judging by the project registration).  You can read a great overview in more <a href="http://nubyonrails.com/articles/about-this-blog-beanstalk-messaging-queue">detail</a> : The <a href="http://nubyonrails.com/articles/about-this-blog-beanstalk-messaging-queue">Beanstalk Messaging Queue</a> Server is written in C, which provides high performance, but the project‚Äôs specificity in terms of storing all data in RAM is not suitable for those areas where maximum resiliency is urgently needed, even at the cost of additional software and costs to store data in the database. <br><br>  That's all for now.  What about PHP, you ask?  The solutions described are based on third-party platforms, but they have libraries for communicating with PHP applications.  But there are also native, PHP solutions of this kind of applications, of course, not complete analogs, here the specificity of the PHP environment is already affected, but sufficient for many applications.  I will tell you about such decisions in the continuation of this material. </div><p>Source: <a href="https://habr.com/ru/post/44907/">https://habr.com/ru/post/44907/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449054/index.html">‚ÄúPay Attention‚Äù # 1: Digest of articles on artificial intelligence, grocery thinking, behavioral psychology</a></li>
<li><a href="../44906/index.html">Conventional caching</a></li>
<li><a href="../449060/index.html">Worst UI Volume Control</a></li>
<li><a href="../449064/index.html">Improving the effectiveness of manual testing on VueJS</a></li>
<li><a href="../449066/index.html">Errors novice project manager</a></li>
<li><a href="../449070/index.html">Superman vs Programmer</a></li>
<li><a href="../449074/index.html">Timofey Subbotin: ‚ÄúThe French counted the money and understood: it‚Äôs better to invest in OSM once than to pay someone every month‚Äù</a></li>
<li><a href="../449076/index.html">News from the world of OpenStreetMap ‚Ññ456 (09/04/2019-15.04.2019)</a></li>
<li><a href="../449078/index.html">10 ways how you can cheat when exchanging cryptocurrency</a></li>
<li><a href="../44908/index.html">Square cd</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
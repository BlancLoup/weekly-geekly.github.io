<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Responsive sprite animation with ImageMagick and GreenSock</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="CSS sprites are not new. From the moment they were popularized on A List Apart in 2004, simple sprites have become the main technique in the toolkit o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Responsive sprite animation with ImageMagick and GreenSock</h1><div class="post__text post__text-html js-mediator-article">  CSS sprites are not new.  From the moment they were popularized on A List Apart in 2004, simple sprites have become the main technique in the toolkit of most web developers.  But, despite the fact that the advantages of speed sprites are quite clear, their use in modern web development is rarely discussed.  The principle remains the same: it is a combination of several images into one ‚Äúmain‚Äù graphic element, from which only certain parts are displayed at a time. <br><br>  In this article, we will look at an easy way to create responsive CSS sprite animations that weigh little, display well on mobile devices, and even are interactive.  You don't need any special graphic editors, just a little understanding of CSS and JavaScript.  Let's get started <br><a name="habracut"></a><br><h4>  Sprite creation </h4><br>  Sprites came out of the world of video games, so we will pay tribute to the heritage and animate Ryu from Street Fighter.  Of course, the original belongs to Capcom. <br><br>  We need to combine each frame of our animation into one image.  There are dozens of tools that can help you create sprites, most of which can even generate auxiliary style sheets.  <a href="http://compass-style.org/help/tutorials/spriting/">The built-in functions for creating sprites in Compass</a> are extremely efficient, and <a href="http://wearekiss.com/spritepad">SpritePad</a> is a great example of a web version of the generator.  For our purposes, however, a simple command line will suffice. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://www.imagemagick.org/">ImageMagick</a> , the ‚ÄúSwiss Knife‚Äù for image processing, is a free, open-source image management tool that is great for automating tasks that can be quite laborious, for example, for combining images.  ImageMagick is also available for almost every operating system.  Mac users can install it through <a href="http://brew.sh/">Homebrew</a> , Windows followers can download the installer from the official site, and Linux fans probably know what to do without me. <br><br>  Save frames of your animation that have the same size in a folder as a sequence of PNG files.  Call the command line terminal, go (cd) to the directory where your images are stored, and run the following command: <br><br><pre><code class="javascript hljs">convert *.png -append result-sprite.png</code> </pre> <br>  This command instructs ImageMagick to vertically tie all .PNG files in our directory (since ‚Äú*‚Äù is a special character) into one full sprite called ‚Äúresult-sprite.png‚Äù.  This is a graphic element that will be used as a background image (background-image) in the CSS for the element that we want to animate, changing its position to loop all frames in order. <br><br><h4>  Pure CSS Animation </h4><br>  We'll start with a simple one and animate our sprite with a CSS3 keyframe animation.  If you are not familiar with the basic syntax, the <a href="http://www.smashingmagazine.com/2011/05/17/an-introduction-to-css3-keyframe-animations/">article by Louis Lazaris</a> on Smashing Magazine is a good introduction.  We are going to animate the vertical positioning of the background (background-position) of our element from 0% to 100% (from top to bottom), using each frame in turn. <br><br>  If you allow the animation to be performed in one continuous sequence as a standard behavior, our sprite will be used between frames, which will break the illusion.  However, using the steps () function, we can control the number of displayed keyframes.  Due to the fact that the background-position is valid when determining as a percentage, we need to set the number of steps one less than the total number of frames in our animation. <br><br>  Experiment with <a href="http://codepen.io/SitePoint/pen/MYRKmJ">this</a> code in CodePen to make sense. <br><br>  Notice that we have defined the width (width) and height (height) of our element so that they clearly correspond to the general frame, and to avoid the exit of the previous or subsequent frames.  We used abbreviated notation to set the number of animation iterations (animation-iteration-count) as ‚Äúinfinite‚Äù, and the animation duration (animation-duration) was 3.5 seconds, and so it turned out that Ryu was throwing out his combo ‚Äúhit - throwing a foot-hoad "before the expiration of time. <br><br>  Yes, he is far from ideal.  Try to change the height of our element "Ryu" or apply a background-size to our sprite, and the effect will be broken.  Our animated element is not yet responsive and depends on clear dimensions based on pixels. <br><br><h4>  Making it responsive </h4><br>  If we want to freely resize our animated sprite, we have two options.  The key to both options is the dependence of our sprite on the exact aspect ratio, and not on a certain size.  We must keep its proportions so that it increases and decreases correctly. <br><br>  The first option is to set the size of the background of our sprite to 100% of the width of our element, convert the width and height of our element from pixels to em, and then change the font-size of the base font size accordingly.  This will help to achieve the desired effect and can work in most cases, but will not give real fluidity. <br><br>  Our second option is to use a fixed-aspect ratio technique based on pure CSS by Mark Hinze, which uses a percentage indent in the pseudo-element, which preserves the proportions of the element at any size.  This approach is used in the demo below and gives our sprite a flowing width at 70%.  <a href="http://codepen.io/SitePoint/pen/zxXrzP">Responsive Ryu</a> . <br><br>  This is an easy and mobile-adapted way to achieve responsive frame-by-frame animation effect.  Browsers are great at supporting CSS animations, with the result that the only limiting factor is a CSS3 keyframe.  Include the appropriate vendor prefix -webkit-, and the effect will work in all modern browsers, including IE10 and higher. <br><br><h4>  Javascript animation </h4><br>  And if we want more precise control over our animation, which in principle is possible using the CSS3 keyframe syntax?  Suppose that instead of a single looped animation, we want to include several sprites in one complex scene and attach the functions of triggers and time to the position of the scroll bar. <br><br>  To make this possible, we need to animate our sprites with JavaScript, using the full power of the <a href="http://greensock.com/">GreenSock</a> animation <a href="http://greensock.com/">platform</a> and the excellent library of Jan Papke's <a href="https://github.com/janpaepke/ScrollMagic">ScrollMagic</a> .  For those who are not familiar with this great combination, the official ScrollMagic <a href="http://janpaepke.github.io/ScrollMagic/examples/">demos</a> will be a great start. <br><br>  These are powerful tools for which a whole series of lessons have been written.  As an example, in order not to go into details on how <a href="https://github.com/janpaepke/ScrollMagic">ScrollMagic</a> works, we will demonstrate some of the time functions available to us.  The basic principles of sprites remain the same as in our CSS animations. <br><br>  First, let's call a 2-second animation at a certain scroll position.  It should end with the last frame and play in the reverse order when scrolling backwards (even if it will play halfway).  We will continue to adhere to the theme of video games and use the sprite from the classic strategy of Westwood Studios - Red Alert, which is now available for free. <br><br>  <a href="http://codepen.io/SitePoint/pen/vEMLJb">Demonstration.</a> <br><br>  Please note that we use the aforementioned method of specifying dimensions based on em;  Try to change the font size, reducing or increasing the sprite.  We defined the twin of TweenMax.to, setting the value of the vertical position of the background of our element as 100%, and used the SteppedEase method to achieve the required frame-by-frame effect. <br><br>  Let's move one step further.  We synchronize our animation with the scroll position, using the scroll bar as a playback slider. <br><br>  <a href="http://codepen.io/SitePoint/pen/OPGMOL">Demonstration.</a> <br><br>  The sprite remains in a fixed position for the duration of the animation, which is now controlled by the user's scrolling behavior.  To achieve this effect, we set the ScrollMagic.Scene property to a duration of 1500 pixels and used the setPin method to fix the parent element to complete the picture.  A more detailed description of these techniques is given in the documentation on the ScrollMagic website. <br><br>  Browser support for sprite animations based on JavaScript is even better than our version only in CSS.  ScrollMagic and GreenSock are supported by all modern browsers, including IE 9+, with automatic processing of browser prefixes and flaws.  Mobile support is also good;  These techniques work on iOS 8+ without special workarounds, including redrawing on the go, and no loss of scrolling speed. <br><br><h4>  Conclusion </h4><br>  We outlined rather superficially what possibilities the combination of responsive CSS sprites with advanced scrolling animation offers, but I hope that we inspired the rest to start experimenting. <br><br>  And in the end, as Rachel Sets said, ‚Äúanimate responsibly.‚Äù  If something can be animated, it is not necessary to animate it.  And if you really chose animation, do it consciously, beautifully and rationally. <br><br><div class="spoiler">  <b class="spoiler_title">Useful Paysto solutions for Habr readers:</b> <div class="spoiler_text">  ‚Üí <a href="http://linkcharge.ru/email">Get paid by credit card right now.</a>  <a href="http://linkcharge.ru/email">Without a site, PI and LLC.</a> <br>  ‚Üí <a href="http://linkcharge.ru/">Accept payments from companies via the Internet.</a>  <a href="http://linkcharge.ru/">Without a site, PI and LLC.</a> <br>  ‚Üí <a href="http://linkcharge.ru/api">Acceptance of payments from companies for your site.</a>  <a href="http://linkcharge.ru/api">With document circulation and exchange of originals.</a> <br>  ‚Üí <a href="http://linkcharge.ru/automat">Automation of sales and service transactions with legal entities.</a>  <a href="http://linkcharge.ru/automat">Without intermediary in the calculations.</a> <br><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/255223/">https://habr.com/ru/post/255223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255211/index.html">Editing WebGL shaders on the fly - now in Chrome</a></li>
<li><a href="../255213/index.html">Webinar "New features of RAD Studio XE8"</a></li>
<li><a href="../255217/index.html">Turing Test</a></li>
<li><a href="../255219/index.html">"The work of engineers - to make a complaint" - Interview with Sergey Kuksenko from the Java Performance Team</a></li>
<li><a href="../255221/index.html">IO Ninja - programmable terminal emulator / sniffer (part 2)</a></li>
<li><a href="../255225/index.html">Interview with skype-cheater</a></li>
<li><a href="../255229/index.html">MWC-2015: applicants for the role of 5G and a number of interesting innovations</a></li>
<li><a href="../255231/index.html">Layer caching over Linq to SQL</a></li>
<li><a href="../255233/index.html">14 tips on how to make tabs on the site more convenient</a></li>
<li><a href="../255235/index.html">Available fresh update ReSharper Ultimate</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
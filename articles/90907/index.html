<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing FreeBSD on a server in Serverloft</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the wake of an unsuccessful attempt with serverloft.eu, I decided to publish my installation guide for FreeBSD on a rented server with Linux. 

 Wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing FreeBSD on a server in Serverloft</h1><div class="post__text post__text-html js-mediator-article">  In the wake of <a href="http://habrahabr.ru/blogs/hosting/89826/">an unsuccessful attempt</a> with serverloft.eu, I decided to publish my installation guide for FreeBSD on a rented server with Linux. <br><br>  Why, in fact, I chose serverloft.com?  For $ 100 a month without any VAT, I received a brand rack server in Germany (albeit Fujitsu-Siemens), 100GB of space on ftp under backups.  Of the nice features - in the server's control panel there is the launch of the Linux rescue console (RIPLinux via PXE), which we will use.  And so, a step-by-step guide on how to automatically install FreeBSD on top of Linux. <br><a name="habracut"></a><br>  The remote control console (hereinafter referred to as the IPMI console) is plugged into a separate port and has its own IP address.  She loses to HP and Dell consoles on all counts, but I did not see such servers for rent for $ 100 a month.  The graphical console is licensed separately, but fortunately there is a Serial Redirection completely free. <br><br>  Go to the <a href="http://my.serverloft.com/">my.serverloft.com</a> control <a href="http://my.serverloft.com/">panel</a> , to the server overview section. <br>  There you are interested in: <br>  IP addresses <br>  IP: 123.45.67.89 - substitute it instead of &lt;your_ip&gt; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      IPMI Access <br>  URL: <a href="https://98.76.54.32/">98.76.54.32</a> <br>  User name: root <br>  Password: averylongpassword <br><br>  It is assumed that you have already installed a Linux distribution on the server, and an IPMI console is available to you (it is configured only after the first installation).  If the console does not respond, ask to re-power the server, and then change the port on which the console listens to SSH - brute-force passwords sometimes hang the console. <br><br>  So, on a choice two ways.  The first one assumes the availability of a FreeBSD machine for assembling your mfsBSD image, the second will allow you to get by with ready-made developments.  Using the IPMI-console is not necessary for the second method, although it does not hurt there.  Log into the IPMI console and configure the console serial port as follows: 9600 None VT100 8Bit.  In principle, almost everything works at higher speeds, but we will not risk it. <br>  The serial console itself can be seen there, in the form of a java applet, or you can connect to it via telnet or ssh by pressing r Console Redirection <br><br><h3>  Method one.  Manual installation </h3><br><ol><li>  On a FreeBSD machine, where you plan to build an image for installation, put the ISO with FreeBSD, in the example below, this is 8.0-RELEASE, and mount: <br><pre>  fetch ftp://ftp.de.freebsd.org/pub/FreeBSD/ISO-IMAGES-amd64/8.0/8.0-RELEASE-amd64-disc1.iso
 mdconfig -a -t vnode -u 10 -f 8.0-RELEASE-amd64-disc1.iso
 mkdir / cdrom
 mount_cd9660 / dev / md10 / cdrom
 mdconfig -d -u 10
</pre></li><li>  Download mfsBSD <a href="">from here</a> and unpack. <br><pre>  fetch http://people.freebsd.org/~mm/mfsbsd/mfsbsd-latest.tar.gz
 tar xzf mfsbsd-latest.tar.gz
</pre></li><li>  Copy the mfsBSD configs from the corresponding .sample <br><pre>  cp mfsbsd-1.0-beta3 / conf / loader.conf.sample mfsbsd-1.0-beta3 / conf / loader.conf
 cp mfsbsd-1.0-beta3 / conf / rc.conf.sample mfsbsd-1.0-beta3 / conf / rc.conf
</pre></li><li>  Put in the directory where you unpacked mfsbsd-1.0-beta3 <a href="http://mfsbsd.ms1.ru/loft1.patch">this patch</a> and apply it <br><pre> fetch http://mfsbsd.ms1.ru/loft1.patch
 patch &lt;loft1.patch
</pre><br><ul><li>  The patch writes the following lines to conf / loader.conf <br><pre>  boot_multicons = "YES"
 boot_serial = "YES"
 console = "comconsole, vidconsole" </pre></li><li>  Go to conf / rc.conf <br><pre>  ifconfig_bge0 = "DHCP" </pre></li><li>  Edit install_all.sh is a script for automatic installation of the system.  You can correct it by partitioning (you may not like my preferences), also the script adds the user admin with the password habrahabr to the system </li></ul><br></li><li>  Start the server in ServerLoft with Linux rescue console: from the control panel select Hardware - Recovery </li><li>  Build the image and upload it to the server. <br><pre> cd mfsbsd-1.0-beta3
 make BASE = / cdrom / 8.0-RELEASE
 cat mfsboot.img |  ssh root @ &lt;your_ip&gt; "dd of = / dev / sda bs = 1048576"
</pre></li><li>  Unmount the ISO from the machine where the mfsBSD image was going <br><pre> umount / cdrom
 mdconfig -d -u 10
</pre></li><li>  Disable Linux rescue console from the control panel, the server will restart.  From the IPMI console, you can watch FreeBSD boot. </li><li>  Login to the server via SSH (if you did everything right and the network went up), or via an IPMI console.  The login is root, the default password is mfsbsd.  Run the installation script: <br><pre>  /install_all.sh </pre></li><li>  Check the configuration of your new system in / mnt, I recommend you enter the static IP addresses, then reboot </li><li>  After the server has rebooted, you can log in via SSH with the admin username, then su will log you out without a password </li></ol><br><h3>  The second way.  Automatic installation </h3><br><ol><li>  Start the server in ServerLoft with Linux rescue console: from the control panel select Hardware - Recovery </li><li>  After the system boots, go there via SSH: <br><pre> wget http://mfsbsd.ms1.ru/mfsboot.img
 cat mfsboot.img |  dd of = / dev / sda bs = 1048576
</pre></li><li>  Disable Linux rescue console from the control panel, the server will restart.  From the IPMI console, you can watch the download and installation of FreeBSD, or just wait </li><li>  After the server has rebooted once again, you can log in via SSH with the admin username and password of habrahabr, then su will let you in without a password </li></ol><br>  The patch to mfsbsd used to get this image can be found <a href="http://mfsbsd.ms1.ru/loft2.patch">here.</a> <br><br><h4>  Last steps </h4><br>  Change your passwords and do not forget to upgrade your system to 8.0-RELEASE-p2: <br><pre>  freebsd-update fetch
 freebsd-update install
 shutdown -r now </pre><br><br>  All of the above has been tested on a PerfectServer L Opteron 1.0 server and with FreeBSD 8.0-RELEASE.  To work on other types of servers, you may need to edit the installation script for the names of network interfaces and disk controllers. <br><br>  Finally a couple of words about ServerLoft: take the PerfectServer L Xeon 1.5 server - it also has hardware RAID on the LSI, the frequency of the probe is 2.5 GHz versus 2.1 for Opteron.  According to my tests, Xeon is faster by 25 percent. <br><br>  <b>UPD:</b> On servers with Xeon 2.0, the method does not work.  FreeBSD does not see the RAID controller (if it is there at all), and, worst of all, the main network card. </div><p>Source: <a href="https://habr.com/ru/post/90907/">https://habr.com/ru/post/90907/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../90892/index.html">Microsoft has calculated: change passwords unprofitable</a></li>
<li><a href="../90899/index.html">Using the desktop computer to organize the flow of projects in the work</a></li>
<li><a href="../90901/index.html">Electronic books in education and the future</a></li>
<li><a href="../90902/index.html">Official commentary on the negotiations with the company ‚ÄúMakhost‚Äù</a></li>
<li><a href="../90905/index.html">Android 2.1 on Higscreen Zeus</a></li>
<li><a href="../90908/index.html">Prices for apple products in the CIS</a></li>
<li><a href="../90910/index.html">Java or C # and .NET and why?</a></li>
<li><a href="../90911/index.html">Work with Visual Studio Team Foundation Server 2010</a></li>
<li><a href="../90913/index.html">Symbian 9.4 a la "tablet"</a></li>
<li><a href="../90918/index.html">Art and Zen Writing CSS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
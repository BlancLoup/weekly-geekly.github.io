<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Review System for Online Stores - Cackle Reviews</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Today we will talk about what exactly a good feedback collection system should do in order to guarantee an increase in website conversion using...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Review System for Online Stores - Cackle Reviews</h1><div class="post__text post__text-html js-mediator-article"> <b>Hello!</b>  Today we will talk about what exactly a good feedback collection system should do in order to guarantee an increase in website conversion using our product as an example - the <a href="http://cackle.ru/reviews">Cackle Reviews</a> feedback collection system.  The first release took place in November 2013. In the year and a half of our existence, we have about 200 customers (of which 150 are online stores) and a clear idea of ‚Äã‚Äãwhat features of the feedback system honestly affect the conversion growth: <br><br>  <b>1.</b> Automatic indexing of reviews to Google with a micromarking of the <code>schema.org/review</code> rating; <br>  <b>2.</b> Import reviews from Ndex.Market; <br>  <b>3.</b> Subscribe follow-up letters after purchase with an invitation to leave a review; <br>  <b>4.</b> Broadcast reviews in social networks; <br>  <b>5.</b> SPAM test ( <a href="https://mail-tester.com/">mail-tester.com</a> ) with a score of at least 9/10 points. <br><br>  How it all works in Cackle Reviews - under the cut. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"> <a href="http://habrahabr.ru/post/255477/"><img src="https://habrastorage.org/getpro/habr/post_images/7d8/0c9/871/7d80c98714f573f6985de717740c25e2.png" alt="online store review system"></a> </div><a name="habracut"></a><br><h2>  <font color="#144269">1. Indexing to Google with a micro markup.</font> </h2><br>  The micro markup is a specific data format for Google to understand and display links to your site in the search results along with beautiful orange stars, rating and number of reviews. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b73/5e8/02a/b735e802a824456ef2e519815d9882ff.png" alt="Cackle Reviews"></div><br>  In Cackle Reviews it works automatically.  When installing on any page of the site, our service will tell Google that this page should be indexed with <a href="https://developers.google.com/structured-data/rich-snippets/reviews">micromarking</a> .  And most importantly, ‚ÄúIt's Just JavaScript ‚Ñ¢‚Äù, that is, no additional settings are needed in the form of synchronization of reviews to a local database or plug-ins for CMS.  This works because Google indexes JavaScript. <br><br><h3>  <font color="#0078b6">Check in Google Testing Tool</font> </h3><br>  To ensure that Google will index your site with micromarking, there is a special <a href="https://developers.google.com/structured-data/testing-tool">Google</a> Validator <a href="https://developers.google.com/structured-data/testing-tool">Testing Tool</a> .  Since Cackle Reviews works through JavaScript, you need not just to copy the address of the page with reviews, but to open the browser console (for example, in Chrome it is Ctrl + Shift + C), go to the Elements tab and copy the entire code of the page into the window 1 of the validator, click "CHECK".  If there are no errors and the result is the rating (values ‚Äã‚Äãfor the example): <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">aggregateRating</span></span> <span class="hljs-selector-attr"><span class="hljs-selector-attr">[AggregateRating]</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ratingValue</span></span>: 4<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">reviewCount</span></span>: 3</code> </pre> <br>  That's all ok! <br><br><h3>  <font color="#0078b6">Living example</font> </h3><br>  In Google, find the text ‚Äú <i>Pluses: Excellent watches are worth it. Comment: the model is excellent</i> ‚Äù is the first link <b>bestwatch.ru/watch/Frederique_Constant/FC335MC4P5</b> (our client), on the side ‚Äú <b>Rating: 4.5 - 4 reviews</b> ‚Äù.  We turn to this page, below the system for collecting feedback Cackle Reviews.  Next, we will open the page in HTML form and see that there are no reviews in the code, which means that indexing with microdata works through JavaScript and you don‚Äôt need to make additional settings: saving reviews to a local database or pulling in third-party HTML. <br><br><div style="text-align:center;"> <a href="http://cackle.ru/reviews"><img src="https://habrastorage.org/getpro/habr/post_images/ccc/36d/537/ccc36d537aa1632ec4e37f6bd2dc1306.png" alt="micro markup rating"></a> </div><br><br><div class="spoiler">  <b class="spoiler_title">More examples of indexing with microdata on js (search in Google):</b> <div class="spoiler_text">  site: kinderus.ru based on reviews <br>  site: unizoo.ru based on review <br>  site: mirgeeka.ru based on review <br>  site: afilot.ru based on review <br>  site: yarcom.ru based on review <br>  site: shveiburg.ru based on review <br></div></div><br><h3>  <font color="#0078b6">Implementation details</font> </h3><br>  Google indexes javascript with micromaps schema.org/review.  Therefore, in the widget, when rendering HTML, it is enough just to support <a href="https://developers.google.com/structured-data/rich-snippets/reviews">this format</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Briefly about what should be minimum in HTML for correct understanding of micromarking in Google</b> <div class="spoiler_text"><h4>  <font color="#c7254e">1. Product Information</font> </h4><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemscope</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemtype</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schema.org/Product"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"category"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Mobile"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"brand"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Apple"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"iPhone 6 Plus 128GB"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://mdata.yandex.net/i?path=b0912201810_img_id7453707806759058271.jpeg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h4>  <font color="#c7254e">2. Rating Information</font> </h4><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"aggregateRating"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemscope</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemtype</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schema.org/AggregateRating"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ratingValue"</span></span></span><span class="hljs-tag">&gt;</span></span>4.5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"reviewCount"</span></span></span><span class="hljs-tag">&gt;</span></span>7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--   --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h4>  <font color="#c7254e">3. Rating information for each review</font> </h4><br><pre> <code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"review"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemscope</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemtype</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schema.org/Review"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"reviewRating"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemscope</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemtype</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schema.org/Rating"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ratingValue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"author"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  --&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemprop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"datePublished"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2015-04-10T12:06:17"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre><br>  <b>PS:</b> Values ‚Äã‚Äãare given for example. <br></div></div><br><br><h2>  <font color="#144269">2. Collect feedback from Yandex.Market</font> </h2><br>  Reviews - a proven and inexpensive solution to increase site conversion.  Declining the user to write a review is difficult, so it's best to take ready-made, for example from Yandex.Market.  Benefits for you: <br><br><ul><li>  Valuable and proven content, giving additional traffic to the site; </li><li>  Reliable reviews with a source mark (a review from Yandex.Market) help a potential buyer to quickly determine the purchase and increase the credibility of your online store. </li></ul><br><div style="text-align:center;"> <a href="http://cackle.ru/reviews"><img src="https://habrastorage.org/getpro/habr/post_images/25d/1bf/ded/25d1bfded1ee601abd813a3080fe21a2.png" alt="Reviews from Yandex.Market"></a> </div><br><h3>  <font color="#0078b6">Gather feedback from Yandex.Market at Cackle Reviews</font> </h3><br>  First you need to get <a href="http://feedback2.yandex.ru/api-market-content/key/%3Ffrom%3Dmarketcontentapi">the Yandex.Market key</a> to access the feedback loading API, indicating it in the form of Cackle Reviews and the IP address of our server (cackle.me).  Save the key in the Cackle admin panel (Testimonials tab, Settings menu). <br><br>  To collect feedback, upload products from your online store to Cackle using the API: <br><table><tbody><tr><th>  HTTP method </th><th>  Endpoint </th><th>  Restriction </th></tr><tr><td>  POST </td><td>  cackle.me/api/3.0/review/productym.json </td><td>  2 times a minute </td></tr></tbody></table><table><tbody><tr><th>  Parameter </th><th>  Description </th></tr><tr><td>  id </td><td>  ID of your widget </td></tr><tr><td>  siteApiKey </td><td>  The secret key of the widget. </td></tr><tr><td>  accountApiKey </td><td>  Account secret key </td></tr><tr><td>  products </td><td>  List of goods in JSON format </td></tr></tbody></table>  Each item must have a special parameter, <b>ymId</b> , that takes the <b>modelId</b> value from Yandex.Market. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98c/6cc/be0/98c6ccbe06066c6670bf5483b9b1866f.png"></div><br>  Product example (products parameter): <br><br><pre> <code class="javascript hljs">[{ <span class="hljs-string"><span class="hljs-string">"prodId"</span></span>: <span class="hljs-string"><span class="hljs-string">"12345"</span></span>, <span class="hljs-string"><span class="hljs-string">"ymId"</span></span>: <span class="hljs-string"><span class="hljs-string">"11031822"</span></span>, <span class="hljs-string"><span class="hljs-string">"chan"</span></span>: <span class="hljs-string"><span class="hljs-string">"/product/12345/"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://myexamplestore.ru/product/12345/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" Apple iPhone 6 Plus 128Gb"</span></span>, <span class="hljs-string"><span class="hljs-string">"photo"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://mdata.yandex.net/i?path=b0912201833_img_id3857037135783998090.jpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-string"><span class="hljs-string">"65500"</span></span> }]</code> </pre><br>  <b>prodId</b> - product id from your database <br>  <b>chan</b> - channel for link reviews from the site ( <a href="http://cackle.ru/help/widget-api">more</a> ) <br>  <b>url</b> - pages where there will be reviews <br><br>  Demonstration on client sites: <a href="http://delonghi.club/products/avtomaticheskaya-kofemashina-de-longhi-magnifica-s-ecam-22-110-b-black">delonghi.club</a> , <a href="http://shveiburg.ru/catalog/shveynye_mashiny/juki/juki_hzl_27z/">shveiburg.ru</a> , <a href="http://www.mrklimat.ru/vozduchoochistiteli/ochistiteli-vozducha/vozduchoochistitel-sharp-kc-850e.html">mrklimat.ru</a> . <br><br><h3>  <font color="#0078b6">Developers: implementation details</font> </h3><br>  The functionality is written in Java, Spring and Hibernate.  Operates with 4 main database tables, in more detail - in the spoiler. <br><br><div class="spoiler">  <b class="spoiler_title">On the technical implementation of collecting feedback from Yandex.Market at Cackle Reviews</b> <div class="spoiler_text"><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">review_ym_cursor</span></span> ‚Äì    (modelId),        (<span class="hljs-string"><span class="hljs-string">""</span></span>) review_ym ‚Äì    . review_product ‚Äì   +       review_ym  review review ‚Äì    Cackle</code> </pre><br>  Works consistently: <br><br><h4>  <font color="#c7254e">1. Add product</font> </h4><br>  The client calls the add product API with the filled ymId.  The product is added to the review_product table, a new entry is created in review_ym_cursor with the identifier of this site, product and model in Yandex.Market. <br><br><h4>  <font color="#c7254e">2. Feedback loader in Yandex.Market format</font> </h4><br>  A function is launched that calls <a href="https://tech.yandex.ru/market/content/doc/dg/reference/model-id-opinion-docpage/">the Market API</a> and receives the first 10 reviews, saving them into an intermediate review_ym table in Yandex.Market format.  The review_ym_cursor table stores the total number of <b>downloaded</b> reviews (recd field) for this model and website + how many reviews total (total field). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0cf/c91/c99/0cfc91c99552769fca861a5143b2fffc.png"></div><br><h4>  <font color="#c7254e">3. Convert feedback to Cackle format</font> </h4><br>  A function is launched that takes the Market reviews from the review_ym table and saves them in reviews in the Cackle Reviews format to the review table.  The review_product table records the total number of converted reviews (the conv field) to start from the right place the next time. <br><br><h4>  <font color="#c7254e">4. The following reviews</font> </h4><br>  At night, two processes automatically call: <br><br>  The first performs clause 2 for all records from review_ym_cursor, for which recd &lt;total. <br>  The second performs clause 3 for all the reviews from review_product that have conv &lt;review_ym_cursor.recd. <br><br>  As a result, new 10 Market reviews are downloaded, and then converted to Cackle-format.  This continues until review_ym_cursor.recd &lt;review_ym_cursor.total and review_product.conv &lt;review_ym_cursor.recd respectively. <br><br>  There is a third process.  It checks for models with review_ym_cursor.recd == review_ym_cursor.total (all downloaded), whether new Yandex.Market-reviews have appeared, and if they have, they will update the total. <br><br>  The main idea of ‚Äã‚Äãthis implementation is the independent performance of two functions: uploading Market reviews (item 2) and converting to Cackle reviews (item 3).  Less cabling - less problems. </div></div><br><br><h2>  <font color="#144269">3. Follow-up letters after purchase with an invitation to leave feedback.</font> </h2><br>  You need to collect reviews not only from Yandex.Market, but also from real buyers.  Suppose a user purchased a product from an online store.  A few days later, he receives an email to his email asking for feedback on a previously purchased product.  These letters are called follow-up and Cackle Reviews can send them automatically. <br><br>  The uniqueness of Cackle Reviews is that the link ‚ÄúLeave feedback‚Äù in the follow-up letter leads exactly to the page of the purchased product of the online store (and not to the site of the feedback collection system, as in all other similar systems) and upon transition, the form for writing a review opens automatically with already authorized user. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/ylj8XQkuB_c%3Ffeature%3Doembed&amp;xid=25657,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhjRcZy9ZfrgaO1iFSFdCIR0kfBa3Q" frameborder="0" allowfullscreen=""></iframe><br><br><h3>  <font color="#0078b6">Integration of follow-up mailing with online store</font> </h3><br><h4>  <font color="#c7254e">Loading orders</font> </h4><br>  To send follow-up emails to customers, you must upload orders from your online store to Cackle.  This is done using the API: <br><table><tbody><tr><th>  HTTP method </th><th>  Endpoint </th><th>  Restriction </th></tr><tr><td>  POST </td><td>  cackle.me/api/3.0/review/order.json </td><td>  Once every 5 seconds </td></tr></tbody></table>  Parameters are similar to the API loading of goods, except for the products parameter, instead of orders. <br><br>  Order example (orders parameter): <br><br><pre> <code class="javascript hljs">[{ <span class="hljs-string"><span class="hljs-string">"orderId"</span></span>: <span class="hljs-string"><span class="hljs-string">"123"</span></span>, <span class="hljs-string"><span class="hljs-string">"created"</span></span>: <span class="hljs-number"><span class="hljs-number">1426330626814</span></span>, <span class="hljs-string"><span class="hljs-string">"modified"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"notify"</span></span>: <span class="hljs-number"><span class="hljs-number">1426330626814</span></span>, <span class="hljs-string"><span class="hljs-string">"paid"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"deliver"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"notified"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"user"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"775"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>: <span class="hljs-string"><span class="hljs-string">"dmivanov@mailforspam.com"</span></span> }, <span class="hljs-string"><span class="hljs-string">"products"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"prodId"</span></span>: <span class="hljs-string"><span class="hljs-string">"12345"</span></span>, <span class="hljs-string"><span class="hljs-string">"ymId"</span></span>: <span class="hljs-string"><span class="hljs-string">"11031822"</span></span>, <span class="hljs-string"><span class="hljs-string">"chan"</span></span>: <span class="hljs-string"><span class="hljs-string">"/product/12345/"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://myexamplestore.ru/product/12345/"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" Apple iPhone 6 Plus 128Gb"</span></span>, <span class="hljs-string"><span class="hljs-string">"photo"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://mdata.yandex.net/i?path=b0912201833_img_id3857037135783998090.jpeg"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-string"><span class="hljs-string">"65500"</span></span> }]}]</code> </pre><br>  <b>// notify</b> - parameter for unconditional sending of follow-up letters on the specified date (milliseconds); <br>  <b>// received</b> - if true, then a follow-up letter has already been sent for this order, if false, no; <br>  <b>// user</b> is a <b>user</b> registered on your site ( <a href="http://cackle.ru/help/integrating-sso">single authorization, SSO</a> ), or instead there can be two parameters (email and name) for an anonymous user. <br><br><h4>  <font color="#c7254e">Create a newsletter</font> </h4><br>  When orders are loaded, you need to create a newsletter with the terms of dispatch and the letter template.  This can be done in the Cackle administration panel (‚ÄúFeedback‚Äù tab, ‚ÄúNewsletter‚Äù menu). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac6/a60/d6d/ac6a60d6d1751417c891dace79c88443.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d92/d05/ee8/d92d05ee8af5379f6ef8142a670ef1de.png"></div><br><br><h4>  <font color="#c7254e">Follow-up letter</font> </h4><br>  The letter consists of several parts.  Editable - sender, subject, logo, letter body (body), signature (footer).  Non-editable ‚Äî a product or product list with a name, photo, and a ‚ÄúLeave Feedback‚Äù link. <br><br>  The link ‚ÄúLeave feedback‚Äù leads to the page of the purchased product of the online store.  All service parameters, for opening a form for writing a review and automatic authorization of a user, are transmitted in a link after the hash (#) in a coded format (MD5). <br><br><div style="text-align:center;"> <a href="http://cackle.ru/reviews"><img src="https://habrastorage.org/getpro/habr/post_images/95f/e3c/271/95fe3c2713276f5a5d83d7c220218d2b.png" alt="follow-up invitation letter to leave feedback"></a> </div><br>  If a user follows the link ‚ÄúLeave feedback‚Äù and publishes it, then he will be marked with the ‚ÄúVerified Buyer‚Äù icon, which indicates that the customer has actually bought the product. <br><br><div style="text-align:center;"> <a href="http://cackle.ru/reviews"><img src="https://habrastorage.org/getpro/habr/post_images/fb5/caa/890/fb5caa8909454d934ce208cce5dc44c7.png" alt="Review System Cackle Reviews Verified Buyer"></a> </div><br><h4>  <font color="#c7254e">Testing, debugging</font> </h4><br>  The created mailings have a ‚ÄúTest‚Äù button, on click on which instantaneous processing of the found orders and sending of follow-up letters occurs.  For example, you can download several test orders from email <code>@mailforspam.com</code> or <code>@mailinator.com</code> , and then test sending emails. <br><br>  Automatic execution of activated mailings occurs at night from 01:00 to 06:00 Moscow time. <br><br><h3>  <font color="#0078b6">CMS Plugins</font> </h3><br>  The follow-up mailing list works automatically in <a href="http://marketplace.1c-bitrix.ru/solutions/cackle.reviews/">1C-Bitrix</a> and <a href="">OpenCart</a> plugins.  In the near future we plan to connect this functionality for <a href="http://extensions.joomla.org/extensions/extension/clients-a-communities/ratings-a-reviews/cackle-reviews">Joomla (VirtueMart, K2, Zoo)</a> , <a href="">PrestaShop</a> and InSales. <br><br><h2>  <font color="#144269">4. Broadcast reviews in social networks</font> </h2><br>  Cackle Reviews supports three types of authorization: anonymous, social and one with the site.  If the user selects social authorization and logs in via VKontakte / My World / Facebook / Twitter, then his review will automatically fall on the wall of the social network with a link to the site.  Benefits for the online store: <br><br><ul><li>  Attracting additional traffic from social networks; </li><li>  Increase site confidence among friends. </li></ul><br>  The functionality is available for testing on <a href="http://cackle.ru/demo/review">the solution demonstration page</a> . <br><br><h3>  <font color="#0078b6">Implementation</font> </h3><br>  Each social network has its own API for posting posts on the wall.  We include this API in the implementation of the OAuth authorization libraries.  In Cackle, <a href="http://projects.spring.io/spring-social/">Spring Social is</a> used for such libraries, only with its implementation for each social network.  This is very convenient, as much Spring Social does for you, for example, support for OAuth 1.0 and 2.0 standards, saving and updating access, refresh-tokens and expired. <br><br><h2>  <font color="#144269">5. SPAM test</font> </h2><br>  Perhaps someone does not know, but there is a service for checking letters on SPAM, like <a href="http://www.mail-tester.com/">mail-tester.com</a> .  The result of its verification is the number of points from 1 to 10. For a feedback collection system with follow-up mailing, a low score means that buyers simply will not receive letters inviting them to leave feedback. <br><br>  In the next topic, we‚Äôll tell you about our experience in setting up an SMTP server and how we achieved this result for Cackle Reviews: <br><br><div style="text-align:center;"> <a href="http://cackle.ru/reviews"><img src="https://habrastorage.org/getpro/habr/post_images/6cb/c7c/3ad/6cbc7c3adba230e485bc3f3e42fa7e2d.png"></a> </div><br>  If you want to try <a href="http://cackle.ru/reviews">Cackle Reviews</a> on your site - <a href="http://bit.ly/1a291lP">welcome</a> !  Installation takes less than 1 minute. <br><br>  Thanks for attention.  Successes to all! </div><p>Source: <a href="https://habr.com/ru/post/255477/">https://habr.com/ru/post/255477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255463/index.html">ASP.NET 5 Middleware or where did my HTTP module go?</a></li>
<li><a href="../255465/index.html">This watch writes time ...</a></li>
<li><a href="../255471/index.html">Software Configurable Networks and Network Virtualization: Reality Check</a></li>
<li><a href="../255473/index.html">Interactive tree menu</a></li>
<li><a href="../255475/index.html">As a student, a bug in Yandex.Music found</a></li>
<li><a href="../255479/index.html">We are switching from STM32 to the Russian K1986BE92QI microcontroller. Clock Setting</a></li>
<li><a href="../255483/index.html">Dissenting opinion: The JPMorgan algorithm will calculate unscrupulous traders before they incur losses.</a></li>
<li><a href="../255485/index.html">Drawing an ellipse at an arbitrary canvas angle on javascript</a></li>
<li><a href="../255487/index.html">Resource Management with Explicit Template Specializations</a></li>
<li><a href="../255489/index.html">Automatic resize of icons for mobile applications, or how Inkscape + bash make life easier</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
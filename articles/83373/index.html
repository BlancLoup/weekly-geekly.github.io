<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>L-systems. Tree modeling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The post is a free translation of the second chapter of the book ‚ÄúAlgorithmic Beauty of Plants‚Äù by Przemyslav Prushchinkevich and Aristide Lindenmayer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>L-systems. Tree modeling</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/getpro/geektimes/post_images/83e/2a1/072/83e2a1072a74d6607892323e3b4ab27a.gif">  The post is a free translation of the second chapter of the <a href="http://algorithmicbotany.org/papers/">book</a> ‚ÄúAlgorithmic Beauty of Plants‚Äù by Przemyslav Prushchinkevich and Aristide Lindenmayer (The Algorithmic Beauty of Plants, Aristid Lindenmayer, Przemyslaw Prusinkiewicz), and is a continuation of the wonderful article ‚Äú <a href="http://habrahabr.ru/blogs/biotech/69989/">L-Systems - the mathematical beauty of plants</a> ‚Äù <a href="https://geektimes.ru/users/valyard/" class="user_link">valyard</a> (thanks to him for inspiration :) <br><br><a name="habracut"></a><br><h4>  The first models. </h4><br>  Computer modeling of tree branching processes has a relatively long history.  The first model proposed by Yulem was based on the concept of cellular automata developed by von Neumann.  The branching process was carried out by iterations, and began with one colored cell on a triangular grid, then those that touched one and only one vertex of the cells that were painted in the previous iteration were painted. <br><br>  Further, this idea was developed.  Meinhardt replaced the triangular square grid, and used the resulting cellular space to test the biological hypotheses of the formation of network structures.  In addition to the pure branching process, his model took into account the effects of repeated connections or anastomosis that could occur between leaves or, for example, veins.  Green rewrote the cellular automaton for three dimensions and modeled growth processes that took into account the environment.  For example, Figure 2.1 shows the growth of a vine over a house.  Cohen's models took into account the concept of "field density" in the growth rules, which turned out to be better than, for example, working with discrete cells. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://img-fotki.yandex.ru/get/4010/aadomin.1/0_381c6_751c4fca_orig"><img alt="Figure 2.1. Harmonious Green architecture." src="https://habrastorage.org/getpro/geektimes/post_images/215/73a/1d2/21573a1d2cfee1d24db8c4183c5a6180.jpg"></a> <br>  <em>Figure 2.1.</em>  <em>Harmonious Green architecture.</em> <br><br>  A common feature of these approaches is the emphasis on the interaction, both between different elements of the structure and the structure with the environment.  And although this interaction obviously affects the growth of real plants, its modeling is a very difficult task.  Therefore, simple models are now more common, ignoring even such fundamental things as collision between branches. <br><br><h4>  Honda model. </h4><br>  Honda proposed the first model in the category of simple, and made the following assumptions: <br><ul><li>  tree segments are straight, their cross-sectional area is not considered; </li><li>  during the iteration, the parent segment produces two children; </li><li>  the length of two child segments is shorter than the maternal <img alt="r1" src="https://habrastorage.org/getpro/geektimes/post_images/4f6/331/57c/4f633157c9abafef116235af3141789e.jpg">  and <img alt="r2" src="https://habrastorage.org/getpro/geektimes/post_images/364/325/a14/364325a148f7f5e543e37ec62e23f8ef.jpg">  time; </li><li>  the parent segment and its two subsidiaries are in the same <strong>branch plane</strong> .  Child segments out of the parent at <strong>branch angles</strong> <img alt="a1" src="https://habrastorage.org/getpro/geektimes/post_images/d1e/1cd/044/d1e1cd044d87803cb145cda2c497eb02.jpg">  and <img alt="a2" src="https://habrastorage.org/getpro/geektimes/post_images/c24/026/24c/c2402624cc1a2737deca423b8c8f4490.jpg">  ; </li><li> in connection with the action of gravitational force, the branch plane is ‚Äúclosest to the horizontal plane‚Äù, in other words, the line perpendicular to the parent segment and lying in the plane of the branch is horizontal.  An exception is made for branches attached to the main trunk.  In this case, a constant <strong>angle of divergence is used.</strong> <img alt="a" src="https://habrastorage.org/getpro/geektimes/post_images/4ba/fdf/c00/4bafdfc00643cead4da37c0e6c07b06a.jpg">  . </li></ul><br><br><img alt="Figure 2.2. Tree geometry according to Honda." src="https://habrastorage.org/getpro/geektimes/post_images/469/6e9/a20/4696e9a20ca4f33d0a145ce3697a5e5e.jpg"><br>  <em>Figure 2.2.</em>  <em>Tree geometry according to Honda.</em> <br><br>  Varying numerical parameters, Honda received a wide variety of tree-like forms.  With some improvements, his models were applied to the study of branching processes of real trees.  Subsequently, different rules for branch angles were proposed in order to also cover tree structures in which the planes of further ramifications are perpendicular to each other.  Honda's results served as the basis for the models proposed by Eono and Kyuniai.  They proposed several improvements, the most important of which was the rotation of the segments in certain directions, corresponding to the aspiration of the branches to the sun, taking into account wind and gravity.  A similar concept was proposed by Cohen, and Refay and Armstrong developed a more physically accurate branch bending method. <br><br>  In the models of Honda, Eono and Kuniyay, straight lines of constant or variable width were used to construct the "wood skeleton".  Significant improvements in the photorealism of the synthesized models reached Blumenfel and Oppenheimer, which presented curving branches, carefully modeled the surfaces around the branch nodes, and applied textures to the bark and leaves (Figure 2.3) <br><br> <a href="http://img-fotki.yandex.ru/get/4012/aadomin.1/0_381c8_7720c65e_orig"><img alt="Figure 2.3. Blumenfel, Acer graphics." src="https://habrastorage.org/getpro/geektimes/post_images/ed0/09f/520/ed009f5208fd8b4ad0737c92de4542b6.jpg"></a> <br>  <em>Figure 2.3.</em>  <em>Blumenfel, Acer graphics.</em> <br><br>  In Honda‚Äôs work, the branch structure was constructed according to deterministic algorithms.  In contrast, in the group of models proposed by Reeves and Blau, de Refay, Remfrey, Neill and Steves, stochastic laws were used.  Although these models are built differently, they share a common paradigm for describing the structure of trees, in particular, the calculation of the <em>possibilities of</em> forming branches.  Reeves and Blau sought not to delve into the biological details of the simulated structures (Figure 2.4).  In contrast, de Refay used a stochastic approach to create realistic plants and simulated kidney activity at discrete points in time.  Having received the timer signal, the kidney could either: <br><ul><li>  nothing to do; </li><li>  become a flower; </li><li>  become a segment of the stem, ending with a new apex and one or more side branches of the stem; </li><li>  die or disappear. </li></ul><br>  These events occurred according to the stochastic laws described separately for each plant species.  Geometrical parameters, such as the length and diameter of the stem segment, the angles of branching, were also calculated according to stochastic algorithms. <br><br> <a href="http://img-fotki.yandex.ru/get/4009/aadomin.1/0_381c9_a1971e50_orig"><img alt="Figure 2.4. Picture of the Forest, Reeves, ¬© 1984 Pixar." src="https://habrastorage.org/getpro/geektimes/post_images/bd9/773/49b/bd977349b128e70e07326a3c75cdad1f.jpg"></a> <br>  <em>Figure 2.4.</em>  <em>Picture of the Forest, Reeves, ¬© 1984 Pixar.</em> <br><br> <a href="http://img-fotki.yandex.ru/get/4010/aadomin.1/0_381ca_98d2c4f7_orig"><img alt="Figure 2.5. Oil palm shelter, CIRAD Modelisation Laboratory." src="https://habrastorage.org/getpro/geektimes/post_images/3b5/968/bf5/3b5968bf512d9c5147f45e5f482099bc.jpg"></a> <br>  <em>Figure 2.5.</em>  <em>Oil palm shelter, CIRAD Modelisation Laboratory.</em> <br><br>  Using the basic types of development laws in this method, Helle, Oldemen, and Tomlinson established 23 different types of tree architecture.  Detailed models of selected plant types are developed and described in the literature.  A simple tree model is shown in Figure 2.5.  The approach of Remfrey was similar to the approach of de Refay, but the first used longer time intervals.  It turned out that in order to achieve reliable results, stochastic models should describe the behavior of lateral shoots, which is possible during the year. <br><br>  The use of L-systems for generating trees was first considered by Eono and Kyunai.  For a start, based on the formal definition of L, they proved its unsuitability for modeling higher plants.  But the proof did not apply to parametric L-systems with snail interpretation of strings.  For example, the L-systems in Figure 2.6 performs those Honda models in which one of the branch angles is zero, the pliable monopodial structure and the clearly defined main and side axes. <br><br> <a href="http://img-fotki.yandex.ru/get/3907/aadomin.2/0_3833d_9c2c0c1f_orig"><img title="Figure 2.6. Examples of monopodial tree-like structures of Honda, obtained on L-systems." alt=" 2.6.     ,   L-systems." src="https://habrastorage.org/getpro/geektimes/post_images/61f/a8e/75d/61fa8e75d986277e97804cdee82789fe.jpg"></a> <br>  <em>Figure 2.6.</em>  <em>Tree models with monopodial branching of Honda, obtained on L-systems.</em> <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">n = 10 <br> <font color="#0000ff">#define</font> r1  0.9 <font color="#008000">/*     */</font> <br> <font color="#0000ff">#define</font> r2  0.6 <font color="#008000">/*     */</font> <br> <font color="#0000ff">#define</font> a0  45 <font color="#008000">/*     */</font> <br> <font color="#0000ff">#define</font> a2  45 <font color="#008000">/*      */</font> <br> <font color="#0000ff">#define</font> d   137.5 <font color="#008000">/*   */</font> <br> <font color="#0000ff">#define</font> wr  0.707 <font color="#008000">/*    */</font> <br> œâ : A(1,10) <br> p1: A(l,w) : *‚Üí !(w)F(l)[&amp;(a0)B(l*r2,w*wr)]/(d)A(l*r1,w*wr) <br> p2: B(l,w) : *‚Üí !(w)F(l)[-(a2)$C(l*r2,w*wr)]C(l*r1,w*wr) <br> p3: C(l,w) : *‚Üí !(w)F(l)[+(a2)$B(l*r2,w*wr)]B(l*r1,w*wr)</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  <em>Table 2.1.</em>  <em>The constants for monopodial tree structures in Figure 2.6.</em> <br><img alt="Table 2.1. The constants for monopodial tree structures in Figure 2.6." src="https://habrastorage.org/getpro/geektimes/post_images/27a/058/96d/27a05896d7d81e007f0baa8de54bbb0e.gif"><br><br><blockquote>  Note  per.  - here it is interesting that the thickness of the segments between the nodes of the tree should be constant, and the picture shows that the thickness of the trunk begins to decrease even before the first branching, which contradicts the previous and subsequent arguments.  Not seen on other pictures :) </blockquote><br><br>  According to the expression <img alt="p1" src="https://habrastorage.org/getpro/geektimes/post_images/eda/6bd/d60/eda6bdd60b56bd794e6c88a30b056000.jpg">  , with each iteration from the top of the main axis <img alt="A" src="https://habrastorage.org/getpro/geektimes/post_images/e65/e8d/7a6/e65e8d7a69ccc82a0defc9472c8c8777.jpg">  stem segment leaves <img alt="F" src="https://habrastorage.org/getpro/geektimes/post_images/19f/5fc/ebe/19f5fcebe85ebe48304eecf369ac0348.jpg">  and side top <img alt="AT" src="https://habrastorage.org/getpro/geektimes/post_images/657/ecc/f92/657eccf92bf4729873119466c221d721.jpg">  .  Constants <img alt="r1" src="https://habrastorage.org/getpro/geektimes/post_images/4f6/331/57c/4f633157c9abafef116235af3141789e.jpg">  and <img alt="r2" src="https://habrastorage.org/getpro/geektimes/post_images/364/325/a14/364325a148f7f5e543e37ec62e23f8ef.jpg">  indicate a decrease in length for the straight and lateral segments, <img alt="a0" src="https://habrastorage.org/getpro/geektimes/post_images/742/146/a7e/742146a7e85073ee1670b9f140416daf.jpg">  and <img alt="a2" src="https://habrastorage.org/getpro/geektimes/post_images/c24/026/24c/c2402624cc1a2737deca423b8c8f4490.jpg">  - branch angles and <img alt="d" src="https://habrastorage.org/getpro/geektimes/post_images/aa8/8c3/652/aa88c36526ddeeac8b82a0dcaae05dd0.jpg">  - angle of divergence.  Module <img alt="! (w)" src="https://habrastorage.org/getpro/geektimes/post_images/398/c12/d62/398c12d62893a0ff0919d074a28e4fd4.jpg">  sets the line width <img alt="w" src="https://habrastorage.org/getpro/geektimes/post_images/8c0/fc3/64b/8c0fc364b4b1fdbc4b0e17df8f18962d.jpg">  so the expression <img alt="p1" src="https://habrastorage.org/getpro/geektimes/post_images/eda/6bd/d60/eda6bdd60b56bd794e6c88a30b056000.jpg">  reduces the width of the child segments from the parent to <img alt="wr = 0.707" src="https://habrastorage.org/getpro/geektimes/post_images/d0e/0ec/226/d0e0ec22655be2bc5a065741045f7243.jpg">  time.  This constant satisfies the postulate of Leonardo da Vinci, according to which the total thickness of all branches folded together in any cross-section of a tree with a horizontal plane is equal to the thickness of the trunk under them.  In case from the parent branch diameter <img alt="w1" src="https://habrastorage.org/getpro/geektimes/post_images/52e/1c6/d3b/52e1c6d3be94954e865de46e716d78d6.jpg">  , there are two children of equal diameter <img alt="w2" src="https://habrastorage.org/getpro/geektimes/post_images/8db/dcd/313/8dbdcd31304a88b4ed697d29c3f7ee6f.jpg">  This postulate gives the equation <img alt="w1 ^ 2 = 2w2 ^ 2" src="https://habrastorage.org/getpro/geektimes/post_images/71e/617/8e8/71e6178e8cffc638ec6ce9d2742944be.jpg">  hence the value <img alt="wr" src="https://habrastorage.org/getpro/geektimes/post_images/83d/7a2/cc3/83d7a2cc3d8ab8241a80cd0b4840573a.jpg">  equally <img alt="w2 / w1 = 1 / sqrt (2) ~ 0.707" src="https://habrastorage.org/getpro/geektimes/post_images/19d/477/13a/19d47713a54fab2bc20d0d8ae532e3ed.jpg">  . <br><br><blockquote>  Note  per.  - under the thickness of the branches and the thickness of the trunk, you should probably understand their cross-sectional area, then it becomes clear where the squares appeared in the last equations. </blockquote><br><br>  Expressions <img alt="p2" src="https://habrastorage.org/getpro/geektimes/post_images/390/d11/3dd/390d113dded8ed95c26a63539006cc6e.jpg">  and <img alt="p3" src="https://habrastorage.org/getpro/geektimes/post_images/b41/bc6/521/b41bc6521b770b0f71ec255201fdd85f.jpg">  describe the further development of the side branches.  At each iteration, a straight vertex ( <img alt="B" src="https://habrastorage.org/getpro/geektimes/post_images/657/ecc/f92/657eccf92bf4729873119466c221d721.jpg">  or <img alt="C" src="https://habrastorage.org/getpro/geektimes/post_images/830/8d5/53a/8308d553a2ff2e1d410d6ee063ca9ae8.jpg">  ) releases the next-sided vertex at an angle <img alt="a2" src="https://habrastorage.org/getpro/geektimes/post_images/c24/026/24c/c2402624cc1a2737deca423b8c8f4490.jpg">  or <img alt="-a2" src="https://habrastorage.org/getpro/geektimes/post_images/659/78a/628/65978a6288196cd7953f86ba7d1c250b.jpg">  in relation to the maternal axis.  Both expressions are used to create side vertices alternately left and right.  Symbol <img alt="$" src="https://habrastorage.org/getpro/geektimes/post_images/082/82f/0d7/08282f0d78d3f0c6b7472194ba9b9ac9.jpg">  rotates a turtle around its own axis, with the vector <img alt="L" src="https://habrastorage.org/getpro/geektimes/post_images/477/b56/bce/477b56bce5df19f3e405ad745b21ae85.jpg">  indicating the direction of "left" turtles held horizontally.  Consequently, the branch plane is ‚Äúclosest to the horizontal plane,‚Äù as is required in the Honda model.  Writing in vector form, <img alt="$" src="https://habrastorage.org/getpro/geektimes/post_images/082/82f/0d7/08282f0d78d3f0c6b7472194ba9b9ac9.jpg">  changes the orientation of the bug in space according to: <br><img alt="L = VxH / (| VxH |)" src="https://habrastorage.org/getpro/geektimes/post_images/cb7/a9d/658/cb7a9d658121e3e3136fde7484b621c1.jpg"><br><br><img alt="U = HxL" src="https://habrastorage.org/getpro/geektimes/post_images/5c3/78b/936/5c378b936eb53187c8f360a92ab391ab.jpg"><br><br>  where are the vectors <img alt="H" src="https://habrastorage.org/getpro/geektimes/post_images/e14/a99/a53/e14a99a53d13c20ddcd8c53a89d1747f.jpg">  , <img alt="L" src="https://habrastorage.org/getpro/geektimes/post_images/477/b56/bce/477b56bce5df19f3e405ad745b21ae85.jpg">  and <img alt="U" src="https://habrastorage.org/getpro/geektimes/post_images/6d1/a67/2e3/6d1a672e31dff573eaa29604165eaa0f.jpg">  - the main, left and top vectors attached to the bug, <img alt="V" src="https://habrastorage.org/getpro/geektimes/post_images/2fd/cfc/096/2fdcfc096dc8eef4cb4376fabd8cc60a.jpg">  - vector directed in the opposite direction from the direction of gravity.  Figure 2.6 shows trees that are modeled with the constants listed in Table 2.1 and coincide with the Honda tree models. <br><br><h4>  Simpodial branching. </h4><br>  Other L-systems, shown in Figure 2.7, cover the sympodial structures in which both child segments form a nonzero angle with the parent.  In this case, the activity of the main peak is reduced due to the formation of the trunk. <img alt="F" src="https://habrastorage.org/getpro/geektimes/post_images/19f/5fc/ebe/19f5fcebe85ebe48304eecf369ac0348.jpg">  and pairs of side vertices <img alt="AT" src="https://habrastorage.org/getpro/geektimes/post_images/657/ecc/f92/657eccf92bf4729873119466c221d721.jpg">  (expression <img alt="p1" src="https://habrastorage.org/getpro/geektimes/post_images/eda/6bd/d60/eda6bdd60b56bd794e6c88a30b056000.jpg">  ).  Further branching is done by <img alt="p2" src="https://habrastorage.org/getpro/geektimes/post_images/390/d11/3dd/390d113dded8ed95c26a63539006cc6e.jpg">  .  The simple structures in Figure 2.7 were obtained using the constants listed in Table 2.2, and correspond to the models presented by Eono and Kyunai. <br><br> <a href="http://img-fotki.yandex.ru/get/3907/aadomin.2/0_3833e_23d0d2_orig"><img title="Figure 2.7a. Models of trees with sympodial branching Eono and Kyuniai, obtained on L-systems." alt=" 2.7a.        ,   L-systems." src="https://habrastorage.org/getpro/geektimes/post_images/581/998/9d4/5819989d41012ba79bb282540314f1cc.jpg"></a> <a href="http://img-fotki.yandex.ru/get/3907/aadomin.2/0_38340_26c8b611_orig"><img title="Figure 2.7b. Models of trees with sympodial branching Eono and Kyuniai, obtained on L-systems." alt=" 2.7b.        ,   L-systems." src="https://habrastorage.org/getpro/geektimes/post_images/131/d6a/cd7/131d6acd7d0cc8773aaeb64b81a0f372.jpg"></a> <br> <a href="http://img-fotki.yandex.ru/get/4111/aadomin.2/0_38342_23b63551_orig"><img title="Figure 2.7c. Models of trees with sympodial branching Eono and Kyuniai, obtained on L-systems." alt=" 2.7c.        ,   L-systems." src="https://habrastorage.org/getpro/geektimes/post_images/6b9/824/286/6b9824286d2f30aaa440638f43c65c07.jpg"></a> <a href="http://img-fotki.yandex.ru/get/3907/aadomin.2/0_38344_19190250_orig"><img title="Figure 2.7d. Models of trees with sympodial branching Eono and Kyuniai, obtained on L-systems." alt=" 2.7d.        ,   L-systems." src="https://habrastorage.org/getpro/geektimes/post_images/e2e/9f4/e17/e2e9f4e17f1ae4ffe4efabf6ba55e584.jpg"></a> <br>  <em>Figure 2.7.</em>  <em>Models of trees with sympodial branching Eono and Kyuniai, obtained on L-systems.</em> <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">n = 10 <br> <font color="#0000ff">#define</font> r1   0.9 <font color="#008000">/*    1 */</font> <br> <font color="#0000ff">#define</font> r2   0.7 <font color="#008000">/*    2 */</font> <br> <font color="#0000ff">#define</font> a1   10 <font color="#008000">/*   1 */</font> <br> <font color="#0000ff">#define</font> a2   60 <font color="#008000">/*   2 */</font> <br> <font color="#0000ff">#define</font> wr   0.707 <font color="#008000">/*    */</font> <br> œâ  : A(1,10) <br> p1 : A(l,w) : *‚Üí !(w)F(l)[&amp;(a1)B(l*r1,w*wr)] <br> /(180)[&amp;(a2)B(l*r2,w*wr)] <br> p2 : B(l,w) : *‚Üí !(w)F(l)[+(a1)$B(l*r1,w*wr)] <br> [-(a2)$B(l*r2,w*wr)]</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  <em>Table 2.2 Constants for trees with sympodial branching in Figure 2.7.</em> <br><img alt="Table 2.2 Constants for trees with sympodial branching in Figure 2.7." src="https://habrastorage.org/getpro/geektimes/post_images/71f/d9b/d35/71fd9bd356e6f7d5e7d2222e35ee6d92.gif"><br><br>  The previous models have a somewhat artificial character, because the final length of each segment is set even when it is created, and does not change in subsequent iterations.  But it is possible to simulate the growth process itself, that is, to increase the length and width of the parent segments with the growth of the subsidiary.  An example of an L-system constructed according to this paradigm is given in Figure 2.8. <br><br><h4>  Ternary branching. </h4><br>  The overall structure of the tree is defined by the expression <img alt="p1" src="https://habrastorage.org/getpro/geektimes/post_images/eda/6bd/d60/eda6bdd60b56bd794e6c88a30b056000.jpg">  .  At each iteration, the vertex <img alt="BUT" src="https://habrastorage.org/getpro/geektimes/post_images/e65/e8d/7a6/e65e8d7a69ccc82a0defc9472c8c8777.jpg">  produces 3 new branches ending in their own vertices.  Parameter <img alt="w" src="https://habrastorage.org/getpro/geektimes/post_images/8c0/fc3/64b/8c0fc364b4b1fdbc4b0e17df8f18962d.jpg">  and constant <img alt="Vr" src="https://habrastorage.org/getpro/geektimes/post_images/940/34b/569/94034b56901af247ab11db44ea94ca58.jpg">  determine the ratio of the width of the parent branch <img alt="w1" src="https://habrastorage.org/getpro/geektimes/post_images/52e/1c6/d3b/52e1c6d3be94954e865de46e716d78d6.jpg">  to the width of the child branch <img alt="w2" src="https://habrastorage.org/getpro/geektimes/post_images/8db/dcd/313/8dbdcd31304a88b4ed697d29c3f7ee6f.jpg">  .  According to da Vinci's postulate <img alt="w1 ^ 2 = 3w2 ^ 2" src="https://habrastorage.org/getpro/geektimes/post_images/701/cd4/b8a/701cd4b8a03ebf3d27697c51a7f2ffeb.jpg">  , in this way, <img alt="Vr = w1 / w2 = sqrt (3) ~ 1.732" src="https://habrastorage.org/getpro/geektimes/post_images/0b2/a05/bf0/0b2a05bf0022d9b7442b3972f092a150.jpg">  .  Expressions <img alt="p2" src="https://habrastorage.org/getpro/geektimes/post_images/390/d11/3dd/390d113dded8ed95c26a63539006cc6e.jpg">  and <img alt="p3" src="https://habrastorage.org/getpro/geektimes/post_images/b41/bc6/521/b41bc6521b770b0f71ec255201fdd85f.jpg">  describe a gradual change in the length of the branches and an increase in their diameter. <br><br> <a href="http://img-fotki.yandex.ru/get/4007/aadomin.2/0_38346_69adc50e_orig"><img title="Figure 2.8a. Models of trees with ternary branching." alt=" 2.8a.     ." src="https://habrastorage.org/getpro/geektimes/post_images/0a4/bcb/8b9/0a4bcb8b9b2ccb57c986040d67e50c38.jpg"></a> <a href="http://img-fotki.yandex.ru/get/4109/aadomin.2/0_38348_ee939c92_orig"><img title="Figure 2.8b. Models of trees with ternary branching." alt=" 2.8b.     ." src="https://habrastorage.org/getpro/geektimes/post_images/957/510/604/9575106041c3fad1277d04b8c87d0edd.jpg"></a> <br> <a href="http://img-fotki.yandex.ru/get/4011/aadomin.2/0_3834a_9e8346f_orig"><img title="Figure 2.8c. Models of trees with ternary branching." alt=" 2.8c.     ." src="https://habrastorage.org/getpro/geektimes/post_images/8ea/5d1/f2c/8ea5d1f2cd816fab6a4cc7a3264c314c.jpg"></a> <a href="http://img-fotki.yandex.ru/get/4112/aadomin.2/0_3834c_ddb792eb_orig"><img title="Figure 2.8d. Models of trees with ternary branching." alt=" 2.8d.     ." src="https://habrastorage.org/getpro/geektimes/post_images/db6/5d3/e00/db65d3e00ca88db1eadd42688d8f9b5b.jpg"></a> <br>  <em>Figure 2.8.</em>  <em>Models of trees with ternary branching.</em> <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">#define</font> d1   94.74 <font color="#008000">/*   1 */</font> <br> <font color="#0000ff">#define</font> d2   132.63 <font color="#008000">/*   2 */</font> <br> <font color="#0000ff">#define</font> a    18.95 <font color="#008000">/*   */</font> <br> <font color="#0000ff">#define</font> lr   1.109 <font color="#008000">/*   */</font> <br> <font color="#0000ff">#define</font> vr   1.732 <font color="#008000">/*    */</font> <br> <br> œâ  : !(1)F(200)/(45)A <br> p1 : A    : *‚Üí !(vr)F(50)[&amp;(a)F(50)A]/(d1) <br> [&amp;(a)F(50)A]/(d2)[&amp;(a)F(50)A] <br> p2 : F(l) : *‚Üí F(l*lr) <br> p3 : !(w) : *‚Üí !(w*vr)</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  <em>Table 2.3.</em>  <em>Constants for tree models in Figure 2.8.</em> <br><img alt="Table 2.3. Constants for tree models in Figure 2.8." src="https://habrastorage.org/getpro/geektimes/post_images/726/488/7ee/7264887ee25609e5d4e32b07f9b3b507.gif"><br><br>  Tropism is the reaction of an organism, for example a plant, to an external influence by growth in the direction determined by this influence.  In particular, the desire of plants to light manifests itself in the form of twisting branches.  This is modeled by a slight turn of the turtle after drawing each segment in the direction determined by the vector of tropism. <img alt="T" src="https://habrastorage.org/getpro/geektimes/post_images/cbc/dc2/7ed/cbcdc27ed727bf4522c07701afc63936.jpg">  (Figure 2.9).  The angle of rotation a is calculated using the formula <img alt="but" src="https://habrastorage.org/getpro/geektimes/post_images/4ba/fdf/c00/4bafdfc00643cead4da37c0e6c07b06a.jpg">  = <img alt="e" src="https://habrastorage.org/getpro/geektimes/post_images/851/068/aa4/851068aa431937068f79d97a9cffc958.jpg">  | <img alt="H" src="https://habrastorage.org/getpro/geektimes/post_images/e14/a99/a53/e14a99a53d13c20ddcd8c53a89d1747f.jpg"><img alt="x" src="https://habrastorage.org/getpro/geektimes/post_images/01e/441/800/01e441800083d7e1efe278bbbbfc2ae4.jpg"><img alt="T" src="https://habrastorage.org/getpro/geektimes/post_images/cbc/dc2/7ed/cbcdc27ed727bf4522c07701afc63936.jpg">  where <img alt="e" src="https://habrastorage.org/getpro/geektimes/post_images/851/068/aa4/851068aa431937068f79d97a9cffc958.jpg">  - A parameter characterizing the sensitivity, susceptibility of the axis to rotation.  This formula has a physical explanation: if <img alt="T" src="https://habrastorage.org/getpro/geektimes/post_images/cbc/dc2/7ed/cbcdc27ed727bf4522c07701afc63936.jpg">  interpreted as a force applied to the end of the vector <img alt="H" src="https://habrastorage.org/getpro/geektimes/post_images/e14/a99/a53/e14a99a53d13c20ddcd8c53a89d1747f.jpg">  and <img alt="H" src="https://habrastorage.org/getpro/geektimes/post_images/e14/a99/a53/e14a99a53d13c20ddcd8c53a89d1747f.jpg">  can rotate around its starting point, then the torque is equal to <img alt="H" src="https://habrastorage.org/getpro/geektimes/post_images/e14/a99/a53/e14a99a53d13c20ddcd8c53a89d1747f.jpg"><img alt="x" src="https://habrastorage.org/getpro/geektimes/post_images/01e/441/800/01e441800083d7e1efe278bbbbfc2ae4.jpg"><img alt="T" src="https://habrastorage.org/getpro/geektimes/post_images/cbc/dc2/7ed/cbcdc27ed727bf4522c07701afc63936.jpg">  .  Parameters related to the generation of tree models in Figure 2.8 are listed in Table 2.3.  A realistic render of a tree in Figure 2.8d is shown in Figure 2.10. <br><br><img alt="Figure 2.9. Correction of a segment of H due to tropism T." src="https://habrastorage.org/getpro/geektimes/post_images/3ab/e37/196/3abe37196260a1dac67cfac826490fa7.jpg"><br>  <em>Figure 2.9.</em>  <em>Correction</em> <em><img alt="but" src="https://habrastorage.org/getpro/geektimes/post_images/4ba/fdf/c00/4bafdfc00643cead4da37c0e6c07b06a.jpg"></em>  <em>segment</em> <em><img alt="H" src="https://habrastorage.org/getpro/geektimes/post_images/e14/a99/a53/e14a99a53d13c20ddcd8c53a89d1747f.jpg"></em>  <em>thanks to tropism</em> <em><img alt="T" src="https://habrastorage.org/getpro/geektimes/post_images/cbc/dc2/7ed/cbcdc27ed727bf4522c07701afc63936.jpg"></em>  <em>.</em> <br><br> <a href="http://img-fotki.yandex.ru/get/4110/aadomin.1/0_381cd_d59adb12_orig"><img alt="Figure 2.10. Charming Lake Musgrave et al." src="https://habrastorage.org/getpro/geektimes/post_images/2e7/74f/e65/2e774fe6561451f5225a8f33b57d1bd1.jpg"></a> <br>  <em>Figure 2.10.</em>  <em>Charming Lake Musgrave et al.</em> <br><br> <a href="http://img-fotki.yandex.ru/get/4010/aadomin.1/0_381ce_936f2e0a_orig"><img alt="Figure 2.11. Surreal elevator." src="https://habrastorage.org/getpro/geektimes/post_images/2f0/904/21e/2f090421e34c7bfe6ee158e7e93c3225.jpg"></a> <br>  <em>Figure 2.11.</em>  <em>Surreal elevator.</em> <br><br><h4>  Conclusion </h4><br>  The examples above show that models of Honda trees, like the models of his followers Eono and Kyuniai, can be obtained using L-systems.  Shebell also showed that L-systems can play an important role as a tool for biologically-correct tree modeling and the synthesis of photo-realistic images.  However, while the models obtained are of a general nature, and the structures of specific trees are still in development.  L-systems are also widely used in the realistic modeling of herbal plants discussed in the next chapter. <br><br><hr><br>  PS If the ‚Äúphoto-realistic‚Äù images from the 1990 book do not deliver, then perhaps more modern renders from another article ( <a href="http://algorithmicbotany.org/papers/selforg.sig2009.html">pdf</a> ) on <a href="http://algorithmicbotany.org/">algorithmicbotany.org</a> will seem interesting: <br> <a href="http://img-fotki.yandex.ru/get/3908/aadomin.2/0_3835e_7bd18909_orig"><img alt="Beautiful render 1" src="https://habrastorage.org/getpro/geektimes/post_images/6ad/c50/185/6adc501858fbf1fac5cd259809f280c2.jpg"></a> <a href="http://img-fotki.yandex.ru/get/4112/aadomin.3/0_38363_66679118_orig"><img alt="Beautiful render 2" src="https://habrastorage.org/getpro/geektimes/post_images/221/340/489/2213404894776039804bd05d5098bd8e.jpg"></a> <br><br>  PPS The translation does not provide an infinite number of references to the literature, which is in the original book.  The numbering of tables and pictures is left original.  The original of the book is here: <a href="http://algorithmicbotany.org/papers/">algorithmicbotany.org/papers/#abop</a> .  If the site is lying, the book in pdf can be downloaded here: <a href="http://narod.ru/disk/17707618000/abop.pdf.html">all</a> , only the <a href="http://narod.ru/disk/17707470000/abop-ch2.pdf.html">second chapter</a> .  If in the text there are spelling / technical errors, please immediately inform the PM)) </div><p>Source: <a href="https://habr.com/ru/post/83373/">https://habr.com/ru/post/83373/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../83366/index.html">Our world, perhaps - one huge hologram</a></li>
<li><a href="../83367/index.html">FlexGet or Backup Internet automatically</a></li>
<li><a href="../83370/index.html">Download scripts browsers: news from the field</a></li>
<li><a href="../83371/index.html">We are 1 year old, you - 10 000 rubles!</a></li>
<li><a href="../83372/index.html">An example of using fluent interface in java to describe domain objects</a></li>
<li><a href="../83374/index.html">Serialization in Qt through the use of MetaObject</a></li>
<li><a href="../83375/index.html">Our world, perhaps - one huge hologram</a></li>
<li><a href="../83376/index.html">Xsplash - making a theme for yourself</a></li>
<li><a href="../83377/index.html">How do we sell software?</a></li>
<li><a href="../83378/index.html">Filling the database with test data using Populator and Faker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
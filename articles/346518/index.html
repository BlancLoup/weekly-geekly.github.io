<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How much slower will your system after patches for Specter-Meltdown?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier this week, Intel released a microcode update for a large number of current and outdated processor models. The update is available as packages ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How much slower will your system after patches for Specter-Meltdown?</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/cloud4y/blog/346518/"><img src="https://habrastorage.org/webt/qn/nd/le/qnndleboll9bjbgtuzctua7u6ni.png"><br></a> <br><br>  Earlier this week, Intel <a href="https://downloadcenter.intel.com/download/27431/Linux-Processor-Microcode-Data-File">released</a> a microcode update for a large number of current and outdated processor models.  The update is available as packages for Red Hat Enterprise Linux, SUSE Linux Enterprise Server, CentOS, Fedora, Ubuntu, Debian, and Chrome OS, allowing you to update the microcode without updating the BIOS.  Updating the microcode does not eliminate the need to apply KPTI patches to the Linux kernel (the microcode is necessary for the complete closure of Specter's vulnerability); <br><br>  Intel also <a href="https://newsroom.intel.com/editorials/intel-security-issue-update-initial-performance-data-results-client-systems/">published</a> data on changes in the performance of systems with 6th, 7th, and 8th generation processors after security updates related to the shutdown of Specter and Meltdown vulnerabilities, collected both from users and using synthetic tests. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Under the cut there are several interesting conclusions from the data published by Intel, as well as the impact of patches on Linux systems: <br><br><h3>  Intel research results for client systems </h3><a name="habracut"></a><br><ul><li>  The result obtained for the SYSMark 2014 SE Data / Finance Analysis test turned out to be very encouraging for business users. </li><li>  Gamers should also be relieved, as the 3DMark Sky Diver test shows that the performance of DX11 games is almost unaffected by security updates. </li><li>  The test that showed the greatest performance decrease is SYSMark 2014 SE Responsiveness.  He showed that performance is reduced by up to 21% for workloads such as launching applications, launching files, browsing web pages with multiple tabs, multitasking, copying files, encrypting and compressing files, and installing a background application. </li></ul><br>  The impact of updates on platforms with 8th generation processors (Kaby Lake, Coffee Lake) with solid-state drives is small ‚Äî less than 6 percent.  In some cases, users may see a more noticeable effect.  For example, users who use web applications that are associated with complex JavaScript operations may have a slightly higher performance loss ‚Äî up to 10 percent. <br><br>  The performance impact of Skylake is slightly higher, but generally corresponds to observations on 8th and 7th generation platforms (approximately 8 percent in the SYSMark2014SE test).  Performance was also measured on a single platform with Windows 7. The observed impact is less significant (approximately 6% in the SYSMark2014SE test).  The effect is even lower on systems with hard drives instead of SSDs.  Thus, the PC with Windows 7 and HDD practically do not lose performance. <br><br>  Results are available in the table below. <br><br><img src="https://habrastorage.org/webt/lm/q7/o-/lmq7o-gmohvt7jtujim7dj17ico.png"><br>  In pdf-format is available <a href="https://newsroom.intel.com/wp-content/uploads/sites/11/2018/01/Blog-Benchmark-Table.pdf">by reference</a> . <br><br><h3>  More about tests </h3><br>  <a href="http://bapco.com/wp-content/uploads/2016/10/SYSmark_2014_SE_WhitePaper_1.1.pdf">BAPCo SYSmark 2014 SE</a> <br><br>  The following applications (grouped by scenario) are installed and / or used in SYSmark 2014 SE. <br><br><img src="https://habrastorage.org/webt/ax/4v/hv/ax4vhvohjihlcjwillm1cyacluo.png"><br><img src="https://habrastorage.org/webt/dt/jc/9y/dtjc9ywnk-dmts8zng6s3sysnvk.png"><br><img src="https://habrastorage.org/webt/5b/pb/vx/5bpbvx-ydpnvmxfabkwodc3fngi.png"><br><img src="https://habrastorage.org/webt/xp/4w/vw/xp4wvwvzpbebrzigodlnevjnhaq.png"><br><br>  <a href="http://s3.amazonaws.com/download-aws.futuremark.com/PCMark_10_Technical_Guide.pdf">PCMark 10</a> <br><br>  PCMark 10 contains tests that cover a wide range of work found in a modern office: from everyday needs and applications to demanding work with media content. <br><br><img src="https://habrastorage.org/webt/zf/x6/ej/zfx6ejm8pjedvrfnhbytaxjpqma.png"><br><br>  <a href="http://s3.amazonaws.com/download-aws.futuremark.com/3DMark_Technical_Guide.pdf">3DMark Sky Diver</a> <br><br>  <a href="http://principledtechnologies.com/benchmarkxprt/counter.php%3Finline%3Dtrue%26redirect%3D/benchmarkxprt/whitepapers/2015/Exploring_WebXPRT_2015.pdf">WebXPRT 2015</a> <br><br>  Based on which of the scenarios is more similar to the scenario of the users of the systems you administer, you will be able to assess the likely decline in performance after installing the updates. <br><br>  If the effect of the updates does not suit you, the Microsoft website contains information on how you can disable the latest fix.  More on the <a href="https://geektimes.ru/post/297159/">link</a> . <br><br><h3>  Linux server performance </h3><br>  Currently, the efforts of vendors to protect aimed at eliminating the three vectors of possible attacks. <br><br>  The <i>Meltdown</i> patches are implemented by <b>KPTI</b> (Kernel Page Table Isolation - Isolation of the Kernel Page Table) and KAISER (Kernel Address Efficiency Removed - Isolation of the Kernel Address Space in order to avoid third-party channel) techniques. <br><br>  Prior to the updates from Intel, which were mentioned at the beginning of the article, last Thursday, Google experts talked about the <b>retpoline</b> software design <b>they</b> created to protect against <i>Specter</i> attacks. <br><br>  <b><a href="https://support.google.com/faqs/answer/7625886">Read more about Retpoline</a></b> <br><br><blockquote>  "The Retpoline technique is currently being introduced into the Clang / LLVM compiler as a means of protecting against one of the Specter-Vulnerability options," said Jeff Tang, senior analyst at Cylance.  ‚ÄúHowever, the LLVM compiler is primarily used in Apple macOS, some Linux and BSD distributions, and also in Google Chrome.  This list does not include Microsoft Windows and other popular Microsoft Windows programs that typically use the Microsoft C / C ++ compiler. ‚Äù </blockquote><br>  Google reports that the retpoline technique is already deployed in the cloud infrastructure and its impact on performance is ‚Äúnegligible.‚Äù  Michael Larabel founder Phoronix.com <b>tested Linux systems with Retpoline Patch</b> .  In general, his research <a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dlinux-retpoline-benchmarks">confirms</a> this. <br><br>  KPTI Patche for Linux is expected to <a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dlinux-415-x86pti">result</a> in performance degradation from 5% to 30%. <br><br>  <a href="https://www.phoronix.com/scan.php%3Fpage%3Darticle%26item%3Dlinux-kpti-kvm"><b>VM Performance Showing Mixed Impact With Linux 4.15 KPTI Patches</b></a> <br><br>  Finally, the <b><a href="http://openbenchmarking.org/result/1801096-FO-KPTIRETPO87">combined effect of Retpoline + KPTI on Ubuntu Linux</a></b> <br><br><img src="https://habrastorage.org/webt/ub/wb/st/ubwbstmfl34g6mgm7nqozzf88ae.png"><br>  <i>The result of one of the tests</i> <br><br>  According to information from Red Hat, using patches to fix CVE-2017-5754, CVE-2017-5753 and CVE-2017-5715 vulnerabilities in Red Hat Enterprise Linux 7 slows down the execution of tasks by 1-20%: <br><br><ul><li>  The highest performance drop (8‚Äì20%) is observed in the DBMS operation on OLTP loads, with random access to the cached memory, with active buffered I / O, with a high intensity of context switching between the kernel and the user level (system calls).  Large losses are observed in tpc, sysbench, pgbench, netperf (up to 256 bytes) and fio (random access to NvME memory) tests. </li><li>  A drop in performance of 3-7% is noted when performing analytical queries in the DBMS, in decision support systems (DSS) and in the Java VM, at times of intensive information exchange over the network or when accessing the disk. </li><li>  A decrease in performance of 2-5% is observed in HPC (High Performance Computing) solutions with a large computational load on the CPU, if most of the work is done in user space using binding to the CPU cores or using numa-control (for example, Linpack NxN and SPECcpu2006 tests) ; </li><li>  The minimal impact on performance (less than 2%) manifests itself in systems that use methods of direct access to resources, bypassing kernel functions and various offload-acceleration techniques.  For example, tests DPDK (VsPERF 64 bytes) and OpenOnload (STAC-N). </li></ul><br>  More information about updates and performance tests related to Meltdown and Specter vulnerabilities can be found <a href="http://www.opennet.ru/opennews/art.shtml%3Fnum%3D47880">here</a> . <br><br> <a href="https://www.cloud4y.ru/try/%3Fpromo%3Ddeveloper40"><img src="https://habrastorage.org/webt/oe/me/1j/oeme1jvcaavtjywkf3hgep5apd0.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/346518/">https://habr.com/ru/post/346518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346504/index.html">AB-DOC beta testing</a></li>
<li><a href="../346506/index.html">How I searched for dependencies through include files in java</a></li>
<li><a href="../346508/index.html">Perhaps the most unusual puzzle on Google Play</a></li>
<li><a href="../346512/index.html">Terabit death. Potential cyber attacks on virtual servers. US Department of Defense under threat</a></li>
<li><a href="../346514/index.html">Nigerian stories of the Russian developer</a></li>
<li><a href="../346520/index.html">Python, PHP, Golang, and DevOps knowledge tests: AvitoQuiz quiz analysis on Highload</a></li>
<li><a href="../346524/index.html">Meltdown and Specter for the cloud: our risk assessment and how we patched</a></li>
<li><a href="../346526/index.html">One is not a warrior in the field: advantages from working in a company on a remote</a></li>
<li><a href="../346530/index.html">Linux and newspaper layout (not for professionals)</a></li>
<li><a href="../346532/index.html">Basics of lossy audio coding. Testing Opus 1.3 Beta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How much does a cloud office cost</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A series of articles on the transfer of infrastructure to the cloud once again confirms the general trend that has emerged over the past few years. Un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How much does a cloud office cost</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/457/ee2/ffe/457ee2ffeea34f40bc780b59ece46da8.jpg"><br>  A series of articles on the transfer of infrastructure to the cloud once again confirms the general trend that has emerged over the past few years.  Unfortunately, if you solve the problem in the forehead, the cost of hosting is very high, <a href="https://habrahabr.ru/post/317222/">here is one example</a> .  Recently, a client came to us who, in our opinion, is most suitable for the role of an average company interested in this service.  We decided to show the description of this project with all prices to the respected Habrasoobshchestvo.  Some privacy data has been changed, but this does not affect the final picture. <br><a name="habracut"></a><br><br><h4>  Initial data: </h4><br>  The company has 35 people, one main office and two additional, several people working from home. <br><br>  What do you need: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  transfer to the cloud the existing application server (1C) with terminal access for 15 people; </li><li>  transfer mail from a paid hosting and 30-40 mailboxes from public mail services; </li><li>  environment for collaboration of calls and videoconferences instead of skype 30-40 users; </li><li>  telephony with connection to an existing operator and the ability to connect new ones.  Preferably with the possibility of holding telephone conferences by phone number and PIN; </li><li>  Mobile VoIP client with voice traffic encryption; </li><li>  The storage of common documents 60-100GB. </li></ul><br>  Security requirements are fairly standard: location in Western Europe, encryption of all traffic, data encryption.  As if the client <a href="https://habrahabr.ru/post/315972/">had read the article</a> , stopped fearing for his data abroad. <br><br>  As a solution, it is proposed to use a 1c bundle on Terminal Server + RDG, MS Exchange, MS SfB + FreePBX and MS SharePoint with Office Online Server. <br><br><div class="spoiler">  <b class="spoiler_title">MS SharePoint controversial decision</b> <div class="spoiler_text">  Share Point is a controversial decision; many companies, even when building the rest of the infrastructure on Microsoft products, prefer to use other solutions (File Cloud, OwnCloud). <br><br>  But given the geographical diversity of the company's offices, the urgent need to improve communication between employees, and when integrated with Skype for Business and Exchange, SharePoint is in our opinion the most logical choice.  This solution covers all modern ‚Äúmust have‚Äù document storage requirements - versioning, accessibility from everywhere, connection security, the ability to work with documents offline, the ability to search, sort, and structure document storage, flexible access settings, and pleasant additions - the ability to call or write to the author of the document without leaving the browser window. <br><br>  Office Online Server (OOS) will allow you to edit documents through the browser without having to download the document and without installing the MS Office software on the device.  This is one of the main components of security, since  the presence of offline copies of important documents on the user's local computer is a potential threat, and working with Word, Excell through the terminal is much less convenient than through OOS. <br><br>  And, of course, the possibilities of collaboration - when you can observe the process of creating or editing a document in real time, the work becomes: clearer, faster, more interesting (review of the possibilities of collaboration - <a href="https://habrahabr.ru/post/310396/">habrahabr.ru/post/310396/</a> ). <br></div></div><br>  Based on the requirements, the following VM configuration was obtained: <br><br>  Host HV1 <br><table width="548"><tbody><tr><td width="93">  Server </td><td width="68">  RAM, Gb </td><td width="57">  HDD, Gb </td><td width="330">  Server roles </td></tr><tr><td width="93">  Exch1 </td><td width="68">  14-20 </td><td width="57">  450 </td><td width="330">  Exchange server, Data availability group with Exch2 </td></tr><tr><td width="93">  RP </td><td width="68">  2-4 </td><td width="57">  60 </td><td width="330">  Reverse proxy </td></tr><tr><td width="93">  DC1 </td><td width="68">  2-4 </td><td width="57">  60 </td><td width="330">  Domain Controller </td></tr><tr><td width="93">  Mkt1 </td><td width="68">  one </td><td width="57">  20 </td><td width="330">  MikroTik Cloud Hosted Router </td></tr><tr><td width="93">  RDSHost1 </td><td width="68">  40-60 </td><td width="57">  300 </td><td width="330">  Terminal server balancing with RDSHost2 </td></tr><tr><td width="93">  RDSBroker </td><td width="68">  4-6 </td><td width="57">  60 </td><td width="330">  RD Connection Broker, RD Gateway, RD Web Access </td></tr><tr><td width="93">  FS1 </td><td width="68">  2-4 </td><td width="57">  300 </td><td width="330">  File server integrated into DFS with FS2 </td></tr><tr><td width="93">  SQL </td><td width="68">  16-24 </td><td width="57">  300 </td><td width="330">  MS SQL for 1C </td></tr><tr><td width="93">  1C </td><td width="68">  8-12 </td><td width="57">  80 </td><td width="330">  1C server </td></tr><tr><td width="93">  Sb-fe </td><td width="68">  8-12 </td><td width="57">  60 </td><td width="330">  Skype for Business Front-End </td></tr><tr><td width="93">  Sb-edge </td><td width="68">  2-4 </td><td width="57">  60 </td><td width="330">  Skype for Business edge </td></tr><tr><td width="93">  SP </td><td width="68">  12-24 </td><td width="57">  300 </td><td width="330">  Sharepoint </td></tr><tr><td width="93">  Oos </td><td width="68">  12 </td><td width="57">  80 </td><td width="330">  Office Online Server </td></tr><tr><td width="93">  Frpbx </td><td width="68">  one </td><td width="57">  40 </td><td width="330">  FreePBX as SIP Gateway </td></tr><tr><td width="93">  Total </td><td width="68">  124-188 </td><td width="57">  2170 </td><td width="330"></td></tr></tbody></table><br>  HV2 Host <br><br><table width="548"><tbody><tr><td width="93">  Server </td><td width="57">  RAM, Gb </td><td width="45">  HDD, Gb </td><td width="352">  Server roles </td></tr><tr><td width="93">  Exch2 </td><td width="57">  14-20 </td><td width="45">  450 </td><td width="352">  Exchange server, Data availability group with Exch1 </td></tr><tr><td width="93">  RP </td><td width="57"></td><td width="45">  60 </td><td width="352">  VM replica </td></tr><tr><td width="93">  DC2 </td><td width="57">  2-4 </td><td width="45">  60 </td><td width="352">  Domain Controller </td></tr><tr><td width="93">  Mkt2 </td><td width="57">  one </td><td width="45">  20 </td><td width="352">  MikroTik Cloud Hosted Router, Failover IP with Mkt1 </td></tr><tr><td width="93">  RDSHost2 </td><td width="57">  40-60 </td><td width="45">  100 </td><td width="352">  RD Session Host balancing with RDSHost1 </td></tr><tr><td width="93">  Fs2 </td><td width="57">  2-4 </td><td width="45">  300 </td><td width="352">  File server integrated into DFS with FS1 </td></tr><tr><td width="93">  RDSBroker </td><td width="57"></td><td width="45">  60 </td><td width="352">  VM replica </td></tr><tr><td width="93">  SQL </td><td width="57"></td><td width="45">  300 </td><td width="352">  VM replica </td></tr><tr><td width="93">  1C </td><td width="57"></td><td width="45">  80 </td><td width="352">  VM replica </td></tr><tr><td width="93">  Sb-fe </td><td width="57"></td><td width="45">  60 </td><td width="352">  VM replica </td></tr><tr><td width="93">  Sb-edge </td><td width="57"></td><td width="45">  60 </td><td width="352">  VM replica </td></tr><tr><td width="93">  SP </td><td width="57"></td><td width="45">  300 </td><td width="352">  VM replica </td></tr><tr><td width="93">  Oos </td><td width="57"></td><td width="45">  80 </td><td width="352">  VM replica </td></tr><tr><td width="93">  Frpbx </td><td width="57"></td><td width="45">  40 </td><td width="352">  VM replica </td></tr><tr><td width="93">  Bckp </td><td width="57">  2-4 </td><td width="45">  2000 </td><td width="352">  Backup server </td></tr><tr><td width="93">  Total </td><td width="57">  59-89 </td><td width="45">  3970 </td><td width="352"></td></tr></tbody></table><br><h4>  So where to post </h4><br>  We made a small comparison of the prices of different hosters with approximately the same configuration suitable for this task (sorting by price) <br><table width="548"><tbody><tr><td width="67">  <strong>Hotster</strong> </td><td width="72">  <strong>Type of</strong> </td><td width="80">  <strong>Configuration name</strong> </td><td width="85">  <strong>Configuration Parameters</strong> </td><td width="60">  <strong>Price per month</strong> </td><td width="171">  <strong>URL</strong> </td></tr><tr><td width="67">  Azure + Office 365 Enterprise E5 </td><td width="72">  Cloud </td><td width="80">  Virtual machines </td><td width="85"></td><td width="60">  $ 1,649.41 + $ 35 (per user) </td><td width="171">  <a href="https://azure.microsoft.com/en-us/pricing/calculator/" rel="nofollow">https://azure.microsoft.com/en-us/pricing/calculator/</a> </td></tr><tr><td width="67">  AWS </td><td width="72">  Cloud </td><td width="80">  r4.4xlarge </td><td width="85">  16 Core, 122Gb RAM 2000Gb HDD </td><td width="60">  $ 1296 + EBS $ 90 </td><td width="171">  <a href="https://aws.amazon.com/ec2/pricing/on-demand/" rel="nofollow">https://aws.amazon.com/ec2/pricing/on-demand/</a> </td></tr><tr><td width="67">  Rackspace </td><td width="72">  Dedicated server </td><td width="80">  Dual processor </td><td width="85">  Intel Xeon E5-2640 2.5GHz, 128GB, 5x300GB 15K SAS </td><td width="60">  2x $ 649 + Storage </td><td width="171">  <a href="https://www.rackspace.com/dedicated-servers" rel="nofollow">https://www.rackspace.com/dedicated-servers</a> </td></tr><tr><td width="67">  Digitalocean </td><td width="72">  Cloud </td><td width="80"></td><td width="85">  16 Core, 128Gb RAM 2000 GB SSD </td><td width="60">  $ 960 + Storage $ 200 </td><td width="171">  <a href="https://www.digitalocean.com/pricing/%2520" rel="nofollow">https://www.digitalocean.com/pricing/</a> </td></tr><tr><td width="67">  ProfitBricks </td><td width="72">  Cloud </td><td width="80"></td><td width="85">  12 Core, 108GB RAM, 2000Gb HDD </td><td width="60">  $ 866 </td><td width="171">  <a href="https://www.profitbricks.com/pricing" rel="nofollow">https://www.profitbricks.com/pricing#section=details-price-performance-guarantee</a> </td></tr><tr><td width="67">  Ovh </td><td width="72">  Dedicated server </td><td width="80">  SP-128 </td><td width="85">  Intel Xeon E5 1650v3, 128, 2 x 2 TB </td><td width="60">  2x $ 179 </td><td width="171">  <a href="https://www.ovh.com/us/dedicated-servers/" rel="nofollow">https://www.ovh.com/us/dedicated-servers/</a> </td></tr><tr><td width="67">  Hetzner </td><td width="72">  Dedicated server </td><td width="80">  PX121 </td><td width="85">  E5-1650 v3 256Gb RAM 2x4Tb HDD </td><td width="60">  2x ‚Ç¨ 116.81 </td><td width="171">  <a href="https://ru.hetzner.com/hosting/produktmatrix/rootserver-produktmatrix-px" rel="nofollow">https://ru.hetzner.com/hosting/produktmatrix/rootserver-produktmatrix-px</a> </td></tr></tbody></table><br><div class="spoiler">  <b class="spoiler_title">Choice of hosting or discourse on availability and SLA</b> <div class="spoiler_text">  The simplest calculation with a calculator shows that SLA, in which the reduction of subscriber payments is indicated is proportional to the unavailability time, is a profanity.  For example, in a year of 8,764 hours, for two years the service was not available for 12 consecutive hours, it turns out that apart from the indirect loss of business only for a mere 30 employees, at 80,000 rubles a month of expenses per person, you suffered 109,090 rubles loss, and compensation from data center will be 0.07% of the payment for two years, or even taking a hypothetical $ 5000 a month, we get $ 82, which is not serious for your business or for the service provider. <br><br>  And there are spots in the sun, everyone remembers the failures of Gmail, Facebook, Azure, power-off in the main European Communicator Telecity2, when half of England was left without the Internet and even Moscow cell subscribers had problems.  <a href="http://arstechnica.co.uk/business/2016/07/bt-isps-telehouse-north-major-outage/" rel="nofollow">http://arstechnica.co.uk/business/2016/07/bt-isps-telehouse-north-major-outage/</a> <br><br>  For a company with 20-50 people, using HP 3PAR with replication of storage between two data centers is most likely redundant, and does not provide a 100% guarantee against configuration errors - an example of the recent failure due to human factors in AWS <a href="https://aws.amazon.com/ru/message/41926/" rel="nofollow">https : //aws.amazon.com/ru/message/41926/</a> .  The most acceptable two options are to build a software cluster (all Microsoft servers have an opportunity), and if a simple 2-3 hours for a business is not critical, then online backup to the second data center and manual switching on of virtual machines is an acceptable and budget solution. <br><br>  In order to insure 100% not only from equipment failures, but also from data center problems, it‚Äôs better to take one server from one operator and the other from another (for example, hetzner and OVH), but to simplify the administration of payment control, you can take both physical server from one operator, and in the future to make the second to another.  Moving backup virtual machines on fast, intra-European channels is a simple task and does not require stopping maintenance. <br></div></div><br><h4>  So, the hosting provider is selected, what happened.  How it all works: </h4><br>  <b>Iron:</b> for our case, we choose to rent two servers in Hrtzner with a very convenient failover IP service.  Two servers <a href="https://ru.hetzner.com/hosting/produktmatrix/rootserver-produktmatrix-px" rel="nofollow">https://ru.hetzner.com/hosting/produktmatrix/rootserver-produktmatrix-px</a> E5-1650 v3 256Gb RAM 2x4Tb HDD, ‚Ç¨ 116 each.  As hypervisors MS Hyper-V, on which virtual machines will be placed in accordance with the above table.  On the first server will be located the main VM and on the second backup. <br><br>  <b>Internal network between servers:</b> The network is built between two MikroTik Cloud Hosted Router (Mkt1 and Mkt2) installed on each host through which a tunnel is configured.  Heztner has ordered a fail-safe IP ( <a href="https://wiki.hetzner.de/index.php/Failover/en" rel="nofollow">Failover IP</a> ), which is assigned to the Mkt1 and Mkt2 routers to organize the publication of external services. <br><br>  <b>Terminal servers are</b> pooled and will be simultaneously active on both hypervisors to conserve resources.  In case of failure of one of the nodes, the users of the terminal server will switch to the second with some performance degradation, but they will be able to continue working, because  user profiles are on a network resource replicated by DFS technology. <br><br>  <b>Replication:</b> Continuous replication of virtual machines will be configured between the two hosts.  In the event of a host failure or maintenance, a replica will be included. <br><br>  <b>Mail:</b> organized on two Exchange servers united in DAG, instead of replicating virtual machines, user access using Active Sync, OWA and Outlook <br><br>  <b>Telephony, video conferencing, IM on Skype for Business.</b>  Like Exchange for mail, this is today the best collaboration tool.  Since  telephony providers connecting sip trunks according to the SfB standard are not many, as the gateway, they installed FreePBX, to which trunks with SIP registration are connected. <br><br>  <b>File Storage:</b> MS SharePoint with OOS discussed previously. <br><br>  <b>Application server:</b> here everything is prosaic 1C with MS SQL database. <br><br>  <b>Remote access:</b> to all applications via HTTPS.  Published - terminal server via RDG, Active Sync, OWA, Outlook, SharePoint with OOS, Skype for Business. <br><br>  <b>Security:</b> encrypting data on a VM based on <a href="https://habrahabr.ru/post/315972/" rel="nofollow">Shielded VM</a> .  Access to all resources over SSL.  Encryption of voice traffic over TLS + SRTP.  To access the terminal server, <a href="https://habrahabr.ru/post/323110/" rel="nofollow">Azure MFA</a> two-factor authentication is used.  It is still possible to connect two-factor authentication for access to OWA and SharePoint, but for the time being limited to monitoring the IP from which users connect to these resources, the newer version of Skypetime allows it. <br><br><h3>  How much does this solution cost: </h3><br>  <b>Iron</b> - ‚Ç¨ 238 including additional IP and failover per month.  If there is a significant load on the terminal server or SQL, you need another 28 ‚Ç¨ on an SSD drive. <br><br>  <b>Licenses</b> for the time of implementation and test operation are recommended to take such a license <a href="https://www.visualstudio.com/msdn-platforms/" rel="nofollow">https://www.visualstudio.com/msdn-platforms/</a> (3VU-00016 MSDNPltfrms ALNG LicSAPk OLV NL 1Y AP) 67 123rub on msbuy.  This license contains all Microsoft products with the right of testing and development.  After the test operation is completed and it will be clear how much and which licenses are needed, then buy.  We recommend to pay attention to the prices of the program OVS. <br><br>  <b>Certificate</b> - SSL, you can take a free 10 SAN from <a href="https://startssl.com/" rel="nofollow">StarCom</a> or more reliable, for example, from <a href="https://www.godaddy.com/web-security/ssl-certificate/options/add-ons%3Fsrc%3Dac%26plan%3Dssl_005sites_tier1_024mo" rel="nofollow">Godaddy</a> $ 249.99 per year. <br><br>  <b>Azure MFA</b> - 1.04 ‚Ç¨ per month <a href="https://azure.microsoft.com/en-us/services/multi-factor-authentication/" rel="nofollow">per user</a> <br><br>  <b>Work</b> - we will not call specific numbers, so as not to make advertising out of the article, we will only estimate the amount of work in hours. <br><br>  Installation of this configuration, including all administrative work with providers, from 90 to 120 hours without migrating user data, where everything is individual. <br><br>  Monthly server support: 8-15 hours depending on the volume of changes and the reliability of the sip providers.  User support varies greatly from the average user qualification, but on average it is taken at the rate of 0.8-1.2 hours per month per user. </div><p>Source: <a href="https://habr.com/ru/post/323994/">https://habr.com/ru/post/323994/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323984/index.html">Two DHCP servers on Centos7 with failover, dhcp-relay and dynamic zone update</a></li>
<li><a href="../323986/index.html">Conference Axis Tel Aviv 2017, Israel (day one)</a></li>
<li><a href="../323988/index.html">Conference Axis Tel Aviv 2017, Israel (second day)</a></li>
<li><a href="../323990/index.html">Dealer Mobility Ecosystem: How We Made Friends of Official Dealers With Their Customers</a></li>
<li><a href="../323992/index.html">Frequently used passwords: how not to get caught yourself and protect users</a></li>
<li><a href="../323996/index.html">On the trail of Cobalt: tactics of logical attack on ATMs in the investigation of Group-IB</a></li>
<li><a href="../324000/index.html">From engineer to iOS programmers</a></li>
<li><a href="../324002/index.html">VR-Design: User Interface</a></li>
<li><a href="../324004/index.html">New JavaScript: Asynchronous Iterators</a></li>
<li><a href="../324006/index.html">Russian Code Cup challenges programmers again</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
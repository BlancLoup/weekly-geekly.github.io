<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interpreter for HQ9 + on F #</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While the full-scale article about supporting F # of various paradigms is still being prepared for release, I will try to take your attention with som...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interpreter for HQ9 + on F #</h1><div class="post__text post__text-html js-mediator-article">  While the full-scale article about supporting F # of various paradigms is still being prepared for release, I will try to take your attention with some pleasant and not burdening trivia. <br>  Tell me, do you know that there is such a wonderful programming language in the world, like HQ9 +?  And why is he so wonderful?  Well, for example, name at least one other language where the legendary program ‚ÄúHello, world!‚Äù Consists of one character.  Notice, not the strings, not the operator, but the character - ‚ÄúH‚Äù.  Moreover, this language is so good that <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D1%2583%25D0%25B0%25D0%25B9%25D0%25BD_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">Quine</a> is written for it also with one character - ‚ÄúQ‚Äù. <br><a name="habracut"></a><br>  But that's not all.  The third is almost a classic task for a beginner (and not so) programmer - the conclusion of a famous (and very long) poem about <a href="http://99-bottles-of-beer.net/">99 bottles</a> ... yes, it is also carried out by one symbol - "9".  Finally, the ‚Äú+‚Äù symbol increases the battery set in the language, which unfortunately cannot be used at all - the vicissitudes of fate. <br>  A full description of the language can be found on the <a href="http://www.cliff.biffle.org/esoterica/hq9plus.html">website of its author</a> . <br>  Thus, the H + Q + QH program will produce the following result: <br>  Hello, world! <br>  H + Q + QH <br>  H + Q + QH <br>  Hello, world! <br>  And the variable will be equal to 2. <br>  Great language, isn't it?  But do not worry, I will not teach you to program on it.  Instead, I will just offer my version of the interpreter of this exciting esoteric language in F #.  The algorithm does not shine with a special theoretical novelty, but allows one more time to evaluate the power of pattern matching, which is used here a little less than everywhere else.  See for yourself: <br><blockquote><code><font color="black"><font color="#0000ff">#light</font> <br> <font color="#0000ff">open</font> System <br> <font color="#0000ff">let</font> input = <font color="#2B91AF">Console</font> .ReadLine() <br> <font color="#0000ff">let</font> <font color="#0000ff">mutable</font> inc = 0 <br> <br> <font color="#0000ff">let</font> bottles k = <br> <font color="#0000ff">match</font> k <font color="#0000ff">with</font> <br> |0 <font color="#0000ff">-&gt;</font> <font color="#A31515">"no more bottles"</font> <br> |1 <font color="#0000ff">-&gt;</font> <font color="#A31515">"1 bottle"</font> <br> |_ <font color="#0000ff">-&gt;</font> k.ToString() + <font color="#A31515">" bottles"</font> <br> <br> <font color="#0000ff">let</font> rec poem k = <br> <font color="#0000ff">match</font> k <font color="#0000ff">with</font> <br> |0 <font color="#0000ff">-&gt;</font> printfn <font color="#A31515">"No more bottles of beer on the wall, no more bottles of beer.\r\nGo to the store and buy some more, 99 bottles of beer on the wall."</font> <br> |_ <font color="#0000ff">-&gt;</font> printfn <font color="#A31515">"%s of beer on the wall, %s of beer.\r\nTake one down and pass it around, %s of beer on the wall."</font> (bottles k) (bottles k) (bottles (k-1)) <br> poem (k-1) <br> <br> <font color="#0000ff">let</font> parse ch = <br> <font color="#0000ff">match</font> ch <font color="#0000ff">with</font> <br> | <font color="#A31515">'H'</font> | <font color="#A31515">'h'</font> <font color="#0000ff">-&gt;</font> printfn <font color="#A31515">"Hello, world!"</font> <br> | <font color="#A31515">'Q'</font> | <font color="#A31515">'q'</font> <font color="#0000ff">-&gt;</font> printfn <font color="#A31515">"%s"</font> input <br> | <font color="#A31515">'+'</font> <font color="#0000ff">-&gt;</font> inc &lt;- inc+1 <br> | <font color="#A31515">'9'</font> <font color="#0000ff">-&gt;</font> poem 99 <br> |_ <font color="#0000ff">-&gt;</font> () <br> <br> input |&gt; Seq.iter parse <br> printfn <font color="#A31515">"Debug information: Accumulator = %d"</font> inc <br> <font color="#0000ff">let</font> wait = <font color="#2B91AF">Console</font> .ReadKey()</font> <br> <br></code> </blockquote><br><br>  We will read the HQ9 + program from the console, for which we include the System library (instead of using the sisharopvosky using open here). <br>  The first two functions serve for the most complicated operation itself - the output of a poem about bottles.  The first one determines the correct form of endings depending on the number of bottles left, the second one gives the complete correct couplet and, as we are used to, is sent to recursion. <br>  The third function is the main one and performs some actions on the symbol issued to it.  As we remember, the string itself is a sequence of characters, so in order to parse individual characters, we simply apply the Seq.iter method to it with a specific function as a parameter. <br>  By the way, I think someone who has not previously encountered functional programming may have a reasonable question, how Seq.iter differs from Seq.map (as well as List.iter and Arr.iter from the corresponding map).  At first glance, both of them apply a certain function to all elements of a sequence.  But there are differences, and very critical ones.  To understand this, just look at the signature: <br><br><blockquote> <code><font color="black">val iter: ('a -&gt; unit) -&gt; seq&lt;'a&gt; -&gt; unit <br> val map: ('a -&gt; 'b) -&gt; seq&lt;'a&gt; -&gt; seq&lt;'b&gt;</font> <br></code> </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The unit type in F # is the same as void in C #.  Thus, Map translates one sequence into another, in accordance with some conversion function, Iter also applies a certain function to the elements of the sequence, the meaning of which is in the side effect, which of course violates the dogma of the OP, but allows you to simply perform some routine operations, such as output. <br>  Another violation of the OP, which is more fully, as promised, the next time is the keyword <font color="#0000ff">mutable</font> when defining the function ‚Äúvariable‚Äù inc.  Now we can redefine it during program execution using the &lt;- symbol. <br>  Here is such a simple programming language HQ9 +, and at least a simple interpreter for it. <br>  Well, if we are talking about quineas, then we need to bring quine to F # itself.  It is unfortunately not as short as on HQ9 +. <br><blockquote> <code><font color="black"><font color="#0000ff">#light</font> <br> <font color="#0000ff">open</font> System <br> <font color="#0000ff">let</font> s = <font color="#A31515">"#light <br> open System <br> let s = {0}{1}{0} <br> Console.Write(s,{0},s)"</font> <br> <font color="#2B91AF">Console</font> .Write(s, <font color="#A31515">'"'</font> ,s)</font> <br></code> </blockquote><br><br>  I think that even by eye it is clear that the program really issues its code. <br>  Perhaps, it‚Äôs not very pleasant in this Quine that it uses framework Console.Write instead of native printf, but in this case they are really more convenient, and the presence of .Net should give us advantages over the same OCaml.  Here we will use them. <br>  That seems to be all for today. <br></div><p>Source: <a href="https://habr.com/ru/post/53988/">https://habr.com/ru/post/53988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../53979/index.html">iManiac or Trepanation of the Aluminum Box</a></li>
<li><a href="../53982/index.html">Design - A mogz then jumps - unusual toys</a></li>
<li><a href="../53983/index.html">Firefox 3.5 will be released instead of Firefox 3.1</a></li>
<li><a href="../53985/index.html">He who seeks will always find, but not a job during a crisis :)</a></li>
<li><a href="../53987/index.html">Search Algorithms, Reverse Index - Part 1</a></li>
<li><a href="../53990/index.html">VKMusic - music and video easily and quickly.</a></li>
<li><a href="../53991/index.html">Adobe Flash in cartography: the Kuzbass in the palm project</a></li>
<li><a href="../53995/index.html">(When) registration is open on Demonoid.com</a></li>
<li><a href="../53997/index.html">Infrastructure modern office - 1</a></li>
<li><a href="../53998/index.html">Fundamentals of the basics of satellite reception</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vectorize the image with a genetic algorithm.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, on the weekends we should have a good time to rest, and therefore we will try to vectorize the image with a genetic algorithm. 


 Task 
 Make a t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vectorize the image with a genetic algorithm.</h1><div class="post__text post__text-html js-mediator-article">  So, on the weekends we should have a good time to rest, and therefore we will try to vectorize the image with a genetic algorithm. <br><img title="Vectorized Dr. House" alt="  " src="https://habrastorage.org/getpro/habr/post_images/d6d/cc5/5fd/d6dcc55fd6936c7cf5dc39f25cde781e.jpg"><br><a name="habracut"></a><br><h1>  Task </h1><br>  Make a translucent polygon image as close as possible to the original. <br><br>  First of all, I want to say that the use of a <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D0%25BD%25D0%25B5%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B0%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC">genetic algorithm</a> in solving this problem has no practical use because of the very long execution time, and everything is done just for fun. <br><br><h1>  Demonstration </h1><br>  In connection with the approaching September at last, the picture of <a href="http://ru.wikipedia.org/wiki/%25D0%2594%25D0%25BE%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580_%25D0%25A5%25D0%25B0%25D1%2583%25D1%2581">Dr. House</a> was chosen as an example of the work of the program. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So the creation of Dr. House from a hundred decagon for <strong>20</strong> hours: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Rnf6ervTUzc%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhg4KObN4rVXYDsnBpMaqMueBDlegg" frameborder="0" allowfullscreen=""></iframe><br><br><h1>  Initial data </h1><br>  What will be the genes for this task?  It turns out that these will be the coordinates of the points of the polygon (hereinafter, we will call it a polygon) and its color.  We will not use crossing, only mutation (it is quite acceptable).  The population, oddly enough, will consist of one individual, and this will be a picture with polygons traced on it. <br><br>  The function of the device will be the sum of the colors errors of all pixels.  Pixel error is defined as <br>  R * R + G * G + B * B, where R is the difference between the red pixel component of the original image and the resulting one, G and B are green and blue.  The smaller the value of the function, the smaller the error and the better picture we received. <br><br><h1>  Code </h1><br>  Define the polygon point class: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Point: ICloneable <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> X { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> Y { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> SetRandom() <br> { <br> X = Helper.Rand.Next(0, Helper.Width); <br> Y = Helper.Rand.Next(0, Helper.Height); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> Mutate(Workarea workarea) <br> { <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationPointMoveMaxChance) <br> { <br> SetRandom(); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationPointMoveMiddleChance) <br> { <br> X = <font color="#2B91AF">Math</font> .Min( <font color="#2B91AF">Math</font> .Max(0, X + Helper.Rand.Next(-Helper.MiddleRange, Helper.MiddleRange + 1)), Helper.Width); <br> Y = <font color="#2B91AF">Math</font> .Min( <font color="#2B91AF">Math</font> .Max(0, Y + Helper.Rand.Next(-Helper.MiddleRange, Helper.MiddleRange + 1)), Helper.Height); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationPointMoveNearChance) <br> { <br> X = <font color="#2B91AF">Math</font> .Min( <font color="#2B91AF">Math</font> .Max(0, X + Helper.Rand.Next(-Helper.NearRange, Helper.NearRange + 1)), Helper.Width); <br> Y = <font color="#2B91AF">Math</font> .Min( <font color="#2B91AF">Math</font> .Max(0, Y + Helper.Rand.Next(-Helper.NearRange, Helper.NearRange + 1)), Helper.Height); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">object</font> Clone() <br> { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> Point { X = X, Y = Y }; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The point has coordinates <strong>X</strong> and <strong>Y.</strong>  The <strong>SetRandom</strong> procedure sets random coordinates to a point, according to the size of our image.  <strong>Mutate</strong> procedure is divided into three parts, each of which is performed according to its given probability of loss.  The first gives a chance to the point to move to any place in the picture.  The second part moves the point to the average distance, then you will see that I have up to twenty pixels.  The third part gives a chance to move a small distance, I have it up to three pixels. <br><br>  Next comes the class of the brush responsible for the color of the polygon: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Brush: ICloneable <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> A { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> R { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> G { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> B { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> SetRandom() <br> { <br> A = Helper.Rand.Next(30, 60); <br> R = Helper.Rand.Next(0, 256); <br> G = Helper.Rand.Next(0, 256); <br> B = Helper.Rand.Next(0, 256); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> Mutate(Workarea workarea) <br> { <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationBrushAChance) <br> { <br> A = Helper.Rand.Next(30, 60); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationBrushRChance) <br> { <br> R = Helper.Rand.Next(0, 256); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationBrushGChance) <br> { <br> G = Helper.Rand.Next(0, 256); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationBrushBChance) <br> { <br> B = Helper.Rand.Next(0, 256); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">object</font> Clone() <br> { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> Brush <br> { <br> A = A, <br> R = R, <br> G = G, <br> B = B <br> }; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The brush has <strong>A</strong> , <strong>R</strong> , <strong>G</strong> , <strong>B</strong> color components.  <strong>SetRandom</strong> initializes them with random values.  In the <strong>Mutate</strong> procedure, each of the components may randomly change according to its probability of mutation. <br><br>  Here we come to the polygon class: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Polygon: ICloneable <br> { <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Point&gt; Points { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> Brush Brush { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> SetRandom() <br> { <br> Points = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt;Point&gt;(); <br> <br> Point center = <font color="#0000ff">new</font> Point(); <br> center.SetRandom(); <br> <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; Helper.MinPointsPerPolygon; i++) <br> { <br> Point point = <font color="#0000ff">new</font> Point(); <br> point.X = <font color="#2B91AF">Math</font> .Min( <font color="#2B91AF">Math</font> .Max(0, center.X + Helper.Rand.Next(-3, 4)), Helper.Width); <br> point.Y = <font color="#2B91AF">Math</font> .Min( <font color="#2B91AF">Math</font> .Max(0, center.X + Helper.Rand.Next(-3, 4)), Helper.Height); <br> Points.Add(point); <br> } <br> <br> Brush = <font color="#0000ff">new</font> Brush(); <br> Brush.SetRandom(); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> Mutate(Workarea workarea) <br> { <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationPolygonAddPointChance) <br> { <br> AddPoint(); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationPolygonDelPointChance) <br> { <br> DelPoint(); <br> workarea.IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> Brush.Mutate(workarea); <br> Points.ForEach(p =&gt; p.Mutate(workarea)); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">void</font> AddPoint() <br> { <br> <font color="#0000ff">if</font> (Points.Count &lt; Helper.MaxPointsPerPolygon) <br> { <br> Point point = <font color="#0000ff">new</font> Point(); <br> <font color="#0000ff">int</font> index = Helper.Rand.Next(1, Points.Count - 1); <br> Point p1 = Points[index - 1]; <br> Point p2 = Points[index]; <br> point.X = (p1.X + p2.X) / 2; <br> point.Y = (p1.Y + p2.Y) / 2; <br> Points.Insert(index, point); <br> } <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">void</font> DelPoint() <br> { <br> <font color="#0000ff">if</font> (Points.Count &gt; Helper.MinPointsPerPolygon) <br> { <br> <font color="#0000ff">int</font> index = Helper.Rand.Next(0, Points.Count); <br> Points.RemoveAt(index); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> Draw( <font color="#2B91AF">Graphics</font> g) <br> { <br> <font color="#0000ff">using</font> ( <font color="#2B91AF">SolidBrush</font> brush = <font color="#0000ff">new</font> <font color="#2B91AF">SolidBrush</font> (Color.FromArgb(Brush.A, Brush.R, Brush.G, Brush.B))) <br> { <br> System.Drawing.Point[] points = Points.Select(p =&gt; <font color="#0000ff">new</font> System.Drawing.Point(pX,pY)).ToArray(); <br> g.FillPolygon(brush, points); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">object</font> Clone() <br> { <br> Polygon newpolygon = <font color="#0000ff">new</font> Polygon(); <br> newpolygon.Brush = Brush.Clone() <font color="#0000ff">as</font> Brush; <br> newpolygon.Points = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt;Point&gt;(); <br> Points.ForEach(p =&gt; newpolygon.Points.Add(p.Clone() <font color="#0000ff">as</font> Point)); <br> <font color="#0000ff">return</font> newpolygon; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Polygon includes an array of points and a brush (color).  The <strong>SetRandom</strong> procedure initializes the brush, and also builds a minimum number of points around a randomly selected one.  A mutation of a polygon is a mutation of a brush and each point of a polygon, and with some probability adding or deleting a point can occur.  The <strong>Draw</strong> procedure draws our polygon. <br><br>  Finally, the final main class is the workspace containing our polygons: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[ <font color="#2B91AF">Serializable</font> ] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Workarea: ICloneable <br> { <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Polygon&gt; Polygons { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> [XmlIgnore] <br> <font color="#0000ff">public</font> <font color="#0000ff">bool</font> IsChange { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> SetRandom() <br> { <br> Polygons = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt;Polygon&gt;(); <br> <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; Helper.MinPolygons; i++) <br> { <br> AddPolygon(); <br> } <br> <br> IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> Mutate() <br> { <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationWorkareaAddPolygonChance) <br> { <br> AddPolygon(); <br> IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> <font color="#0000ff">if</font> (Helper.Rand.NextDouble() &lt;= Helper.MutationWorkareaDelPolygonChance) <br> { <br> DelPolygon(); <br> IsChange = <font color="#0000ff">true</font> ; <br> } <br> <br> Polygons.ForEach(p =&gt; p.Mutate( <font color="#0000ff">this</font> )); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">void</font> AddPolygon() <br> { <br> <font color="#0000ff">if</font> (Polygons.Count &lt; Helper.MaxPolygons) <br> { <br> Polygon polygon = <font color="#0000ff">new</font> Polygon(); <br> polygon.SetRandom(); <br> Polygons.Add(polygon); <br> } <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">void</font> DelPolygon() <br> { <br> <font color="#0000ff">if</font> (Polygons.Count &gt; Helper.MinPolygons) <br> { <br> <font color="#0000ff">int</font> index = Helper.Rand.Next(0, Polygons.Count); <br> Polygons.RemoveAt(index); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">double</font> Fitness(Color[,] colors) <br> { <br> <font color="#0000ff">double</font> fitness = 0; <br> <font color="#2B91AF">Bitmap</font> img = Draw(); <br> FastBitmap fastimg = <font color="#0000ff">new</font> FastBitmap(img); <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt; Helper.Width; i++) <br> { <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> j = 0; j &lt; Helper.Height; j++) <br> { <br> Color c1 = fastimg.GetPixel(i, j); <br> Color c2 = colors[i, j]; <br> <font color="#0000ff">int</font> r = c1.R - c2.R; <br> <font color="#0000ff">int</font> g = c1.G - c2.G; <br> <font color="#0000ff">int</font> b = c1.B - c2.B; <br> fitness += r * r + g * g + b * b; <br> } <br> } <br> fastimg.Release(); <br> img.Dispose(); <br> <font color="#0000ff">return</font> fitness; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">Bitmap</font> Draw() <br> { <br> <font color="#2B91AF">Bitmap</font> img = <font color="#0000ff">new</font> <font color="#2B91AF">Bitmap</font> (Helper.Width, Helper.Height); <br> <font color="#0000ff">using</font> ( <font color="#2B91AF">Graphics</font> g = <font color="#2B91AF">Graphics</font> .FromImage(img)) <br> { <br> g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality; <br> g.Clear(Color.Black); <br> <br> Polygons.ForEach(p =&gt; p.Draw(g)); <br> } <br> <font color="#0000ff">return</font> img; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">object</font> Clone() <br> { <br> Workarea newarea = <font color="#0000ff">new</font> Workarea(); <br> newarea.Polygons = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt;Polygon&gt;(); <br> Polygons.ForEach(p =&gt; newarea.Polygons.Add(p.Clone() <font color="#0000ff">as</font> Polygon)); <br> <font color="#0000ff">return</font> newarea; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The truth of the <strong>IsChange</strong> property indicates that a mutation has occurred somewhere.  <strong>SetRandom</strong> initializes the minimum starting polygon count.  <strong>Mutate</strong> triggers a mutation for each polygon, and a polygon can be added or removed with a given probability.  The <strong>Fitness</strong> function calculates the adaptation function, it is passed an array of colors of the original image.  Well, the <strong>Draw</strong> function returns our rendered image. <br><br>  The algorithm itself looks like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">void</font> Start() <br> { <br> <font color="#0000ff">if</font> (workarea == <font color="#0000ff">null</font> ) <br> { <br> workarea = <font color="#0000ff">new</font> Workarea(); <br> workarea.SetRandom(); <br> } <br> <br> <font color="#0000ff">while</font> (isRunning) <br> { <br> Workarea newarea; <br> <font color="#0000ff">lock</font> (workarea) <br> { <br> newarea = workarea.Clone() <font color="#0000ff">as</font> Workarea; <br> } <br> newarea.Mutate(); <br> <br> <font color="#0000ff">if</font> (newarea.IsChange) <br> { <br> <font color="#0000ff">double</font> newfitness = newarea.Fitness(sourceColors); <br> <br> <font color="#0000ff">if</font> (newfitness &lt;= fitness) <br> { <br> <font color="#0000ff">lock</font> (workarea) <br> { <br> workarea = newarea; <br> } <br> fitness = newfitness; <br> } <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  We initialize the new population and then make a copy and mutate it, calculate the adaptation function for the new population and, if it is less current (I remind you, the smaller the function value, the better), then we overwrite the current population with a new, better one. <br><br>  We still have an auxiliary class where the settings are stored: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">class</font> Helper <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">readonly</font> <font color="#2B91AF">Random</font> Rand = <font color="#0000ff">new</font> <font color="#2B91AF">Random</font> (); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> Width = 0; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> Height = 0; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> MinPointsPerPolygon = 3; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> MaxPointsPerPolygon = 10; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> MinPolygons = 0; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> MaxPolygons = 100; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> NearRange = 3; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> MiddleRange = 20; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationPointMoveMaxChance = 0.0007; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationPointMoveMiddleChance = 0.0007; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationPointMoveNearChance = 0.0007; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationBrushAChance = 0.0007; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationBrushRChance = 0.0007; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationBrushGChance = 0.0007; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationBrushBChance = 0.0007; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationPolygonAddPointChance = 0.0007; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationPolygonDelPointChance = 0.0007; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationWorkareaAddPolygonChance = 0.0014; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">double</font> MutationWorkareaDelPolygonChance = 0.0007; <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Here we store the width and height of the original image (initialized during loading), the minimum and maximum number of points in the polygon, the minimum and maximum number of polygons, the mutation probabilities for each component (one is one hundred percent mutation) and the distances that the point can move. <br>  The entire project can be merged <a href="http://www.mediafire.com/download.php%3Fztgywzdydaz">here</a> . <br><br>  <b>UPD:</b> thanks for the karma, transferred to the blog Algorithms. <br></div><p>Source: <a href="https://habr.com/ru/post/68323/">https://habr.com/ru/post/68323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../68318/index.html">Introduction to the Bean Validation API</a></li>
<li><a href="../68319/index.html">Approximation Horizon</a></li>
<li><a href="../68320/index.html">Dark theme for TextMate</a></li>
<li><a href="../68321/index.html">Wolfram Alpha will provide an API for accessing data.</a></li>
<li><a href="../68322/index.html">SQL and flags</a></li>
<li><a href="../68324/index.html">Industry news for the week</a></li>
<li><a href="../68325/index.html">Dark Theme (Twilight) for Netbeans</a></li>
<li><a href="../68326/index.html">In the near future, two new navigation applications will become available for Android using DWA - ‚ÄúAugmented Reality for Driving‚Äù</a></li>
<li><a href="../68330/index.html">OpenGL ES 2.0 to iPhone 3G S Basics</a></li>
<li><a href="../68332/index.html">About ¬µTP in new versions of ¬µTorrent: what is it, how, why?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
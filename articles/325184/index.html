<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DevOps in the service of man</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Step by step, technologies take our jobs and threaten to get to the most valuable - Ctr-C from Stack Overflow and Ctrl-V in the native IDE. But fortun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DevOps in the service of man</h1><div class="post__text post__text-html js-mediator-article"><p>  Step by step, technologies take our jobs and threaten to get to the most valuable - Ctr-C from Stack Overflow and Ctrl-V in the native IDE.  But fortunately, not a single neural network has yet learned to program better than you.  Today we will talk about how you can use DevOps to get rid of the whole team of mobile developers and even you personally. </p><br><img src="https://habrastorage.org/files/09e/be2/78e/09ebe278ee104f2ba02bbba700f2ded8.jpg"><br><a name="habracut"></a><br><p>  <em>Note: we continue the series of publications of the <a href="https://xakep.ru/2017/02/17/devops-authomatization/">full versions of articles from the magazine Hacker</a> .</em>  <em>Spelling and punctuation of the author saved.</em> </p><br><p>  Globally, DevOps solves the problem of maximum automation of everything that is reasonable to automate.  The goal is simple - to reduce the time and cost of issuing or updating a product.  This is a kind of another turn in increasing productivity and organizing, as it is sometimes said, ‚Äúcontinuous supply of value to the client.‚Äù </p><br><img src="https://habrastorage.org/files/1e0/5a1/1ff/1e05a11ff1124e469b1909d45bccf920.png"><br><p>  At the moment, assembly, distribution and testing of new versions of the application are perfectly automated.  In our article, we will show the process of building a Mobile DevOps universal pipeline consisting of the <a href="https://www.bitrise.io/">Bitrise.io</a> build <a href="https://www.bitrise.io/">service</a> , the <a href="https://www.xamarin.com/test-cloud">Xamarin Test Cloud</a> device farm, and the <a href="https://hockeyapp.net/">HockeyApp</a> feedback system.  As an experimental, we will use the Android application from the set of standard Java samples. </p><br><img src="https://habrastorage.org/files/c8d/758/d3e/c8d758d3e53f4fed89b82ec114538883.png"><br><p>  A remarkable feature of the modern world of online services is the presence of open APIs that allow building very convenient pipelines for processing your code into a high-quality product. </p><br><p>  In order for the DevOps chain to start working, it needs to be configured, which we will do next.  And first consider the algorithm of the pipeline in general: </p><br><ol><li>  Any external event (a timer, a commit / pull-request / tag in the repository, a command from Slack, a button on the website, or something else) enlivens the whole chain. </li><li>  The build system, taking into account the settings, loads the latest or specified commit / branch from the repository, starts the build environment and issues the compiled / packaged application.  For this purpose, a separate virtual machine with an already configured environment is deployed in Bitrise, and the necessary dependencies are loaded from the Web or from the cache before each build (Gradle, CocoaPods, NuGet).  In addition to the basic verification of the code when compiling, you can also run Unit tests, which is important in mobile for long and heavy projects. </li><li>  Next, the application is unloaded into the file storage or external service.  Bitrise allows you to host test builds on your servers and provides a direct page for downloading and installing into your phone. </li><li>  An assembly can also be uploaded to a cloud farm of devices for automated UI testing. </li></ol><br><h1 id="sozdaem-konveyer">  We create the pipeline </h1><br><p>  We begin, just in case, with a repository for storing source codes - it should be, and the point.  You can use <a href="https://bitbucket.org/">Bitbucket</a> , <a href="https://github.com/">GitHub</a> or any other, but popular services are preferable because of the greater number of ready-made integrations.  And it is better to use Git, as it is supported in almost all IDEs.  We believe that the project (in our example, this is the classic Navigation Drawer from the Android SDK) has already been uploaded to Bitbucket, which, in turn, is connected to Bitrise. </p><br><img src="https://habrastorage.org/files/a87/1d9/a52/a871d9a5246a47e2b47f9f0f49ef6462.png"><br><br><h1 id="sobiraem">  We collect </h1><br><p>  The starting element of the DevOps chain is the build system.  Here the taste and level of ownership of the admin tambourine comrades not.  But Bitrise is one of the easiest and most functional options.  It is inexpensive, works like a clock, allows you to fully build assemblies for projects on all popular mobile application development stacks: iOS + Obj-C / Swift, Android + Java, Xamarin (iOS + Android), Web App (PhoneGap, React Native and others) .  And most importantly, Bitrise out of the box can configure integration with a large number of external systems. </p><br><p>  To begin, register a free trial at Bitrise, create a new Android project in it, and link our repository.  It is better to add keystore (and iOS certificates if you are developing for iPhone) to sign your application.  It is better to run through the created Workflow for dating and learning. </p><br><img src="https://habrastorage.org/files/122/e16/1b5/122e161b5f71479984a6bdbd238cc27e.png"><br><br><p>  Next, click the start button and after a while we get the finished assembly.  You can immerse yourself in the logs to study the inside story of the whole process. </p><br><img src="https://habrastorage.org/files/55c/f07/2ca/55cf072ca7154b1193cf518231e0665d.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  A large number of additional steps are available in Bitrise, which can be used by popular external services (including your favorite Slack).  If you prefer, you can even write your own scripts (for example, to rename a package).  And while no hassle with the infrastructure and its configuration and support!  Assembly time, of course, will be slightly longer than on a good programmer's machine, but it allows you to continue working in parallel instead of the next coffee break.  If necessary, Bitrise can even perform Unit tests for your project, again with the support of all popular platforms and stacks. </p><br><p>  After a few minutes (and sometimes tens of minutes, depending on the complexity of the application), the assembly is ready, and we get a page for downloading the installation package to the smartphone.  The link can be passed to all interested parties. </p><br><img src="https://habrastorage.org/files/e4c/87b/d2a/e4c87bd2a2c345deb6053bc73351e596.png"><br><br><h1 id="testiruem">  We are testing </h1><br><p>  One of the most problematic places in mobile development is strong fragmentation, not only in OS, screen size, price and color of the case, but also in OS versions, and for Android it is also in firmware versions for different models.  Until recently, in decent mobile studios, we had to keep dozens (or even hundreds) of various devices and constantly monitor the fleet and firmware updates.  The same application was rechecked on dozens of seemingly identical devices after each noticeable update or before publication.  It remains to add the driver with a whip and a rare gnash of fingers on the screens ... </p><br><p>  Fortunately, Apple and Google have not avoided this aspect by providing an API for automation in iOS and Android.  That is, you can interact with the OS on a real device and simulate the user's work by executing scripts specified by the tester. </p><br><p>  Different companies offer their farms of real devices for testing mobile solutions.  We will focus on a universal and convenient service Xamarin Test Cloud.  But before starting, we will have to conjure a little with the command line, as well as imbued with the spirit of <a href="http://calaba.sh/">Calabash</a> . </p><br><p>  We need to install Ruby, Ruby DevKit, additional gems and write our first script for <a href="https://cucumber.io/">Cucumber</a> .  Fortunately, any Google will show you step-by-step instructions, so we only note that the following gems are required: </p><br><ul><li>  calabash-cucumber; </li><li>  calabash-android; </li><li>  xamarin-test-cloud. </li></ul><br><p>  The simplest script for our Navigation Drawer might look like this: </p><br><img src="https://habrastorage.org/files/6ee/b83/1c5/6eeb831c595d4494a10a82e2758070e7.png"><br><br><p>  Yes, the script looks like an instruction not to a computer, but to a person.  This is convenient for testers who do not really know how to program.  But it is possible and necessary to use a more complex syntax, including indications of types of controls (picture, button) or screen coordinates.  There can be an unlimited number of scripts, and they will be executed sequentially with a full restart of the application between them. </p><br><p>  Before sending the installation package and scripts to an external cloud, it is better to run the written tests on a local smartphone or emulator / simulator (for example, using the calabash-android run command). </p><br><p>  To work with Xamarin Test Cloud, we register the trial, and then proceed to creating the first run (Test Run). </p><br><img src="https://habrastorage.org/files/e8d/9ca/e1d/e8d9cae1d1824433a20fc7eac6209447.png"><br><br><p>  From it we will need the device group identifier (specified after the --devices key) and API key (after the name of the APK file), which will be further used in Bitrise, adding a new step in our pipeline. </p><br><img src="https://habrastorage.org/files/6c2/012/63b/6c201263b27c4e4bae69fe6426b25e44.png"><br><p>  After successfully setting up the integration, we can run the script and in a few minutes look at the result of its work. </p><br><img src="https://habrastorage.org/files/5dd/969/768/5dd9697681954866a5e34a9725f541ff.png"><br><br><img src="https://habrastorage.org/files/cc8/259/687/cc8259687f694140b5819b03111b89bf.png"><br><br><p>  In addition to performing the tests themselves, Xamarin Test Cloud collects all system logs, resource consumption by the application, and even takes screenshots.  After the test is completed, a detailed report becomes available, and you receive a notification by mail. </p><br><p>  Xamarin Test Cloud will never replace real testers, as part of the errors can be identified only with manual long-term use of the application.  But the cloud farm allows you to cool down the testing time and speed up the basic health check of all user scenarios.  And the screenshots created during the execution of the script can help in finding UI errors at different resolutions and OS versions (buttons floated, texts are cut off, etc.). </p><br><p>  A typical scenario for a large project is to run the timer at night or manually start a conveyor that includes automated UI testing of the current build (for fans, you can add Unit testing) on ‚Äã‚Äãthe necessary smartphones / tablets and after a few hours (or in the morning) the quality control team A detailed report appears on the results of the run on a given sample of smartphones.  However, it should be understood that there are relatively few devices (about 2500), and there are many who want it.  Therefore, there are certain restrictions on the available subscription number of devices-hours per day.  You need to be able to share ... especially if you're on trial. </p><br><h1 id="analiziruem">  We analyze </h1><br><p>  The last element of the pipeline is the service of receiving feedback (and in combination the distribution system).  Now there are many libraries for collecting the most beautiful, statistics and user reviews.  We will focus on the service HockeyApp. </p><br><p>  First, let's add libraries to our project and initialize the HockeyApp in the mobile application.  This is enough to make sure that no crash passes by us. </p><br><img src="https://habrastorage.org/files/434/3e1/9b2/4343e19b234b4249a4dfa6becd5395ee.png"><br><br><p>  Unloading in HockeyApp is best done as a separate script that will be launched by a person after analyzing the results of the UI tests.  There is even the ability to easily connect external freelancers to test your apps directly from HockeyApp. </p><br><h1 id="ispolzuem">  We use </h1><br><p> DevOps conveyors allow you to cover a very large fleet of devices, automate the assembly and testing of custom scripts on real smartphones and tablets of various manufacturers.  Recently, universal integrated solutions (for example, the Microsoft Mobile Center) have begun to appear, allowing the use of automation advantages regardless of the selected mobile stack and platform. </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  In the article, we reviewed the creation of a pipeline based on Bitrise, Xamarin Test Cloud and HockeyApp, however you can pick up other tools or even deploy your own infrastructure.  But here you can not do without the admin tambourine, and sometimes sweaters with a beard. </p><br><h3>  about the author </h3><br><img src="https://habrastorage.org/files/f70/e9c/e7a/f70e9ce7a2bd45a98e19652a08b15e26.JPG" align="left" width="120"><br><p>  Vyacheslav Chernikov - head of development at <a href="http://www.binwell.com/">Binwell</a> .  In the past, he was one of the Nokia Champion and Qt Certified Specialists, currently he is the Xamarin and Azure platform specialist.  He came to the sphere of mobile in 2005, since 2008 he has been developing mobile applications: he started with Symbian, Maemo, Meego, Windows Mobile, then switched to iOS, Android and Windows Phone. </p><br><p>  Articles Vyacheslav you can also read the <a href="https://medium.com/binwell/public/home">blog on Medium</a> . </p><br><p>  <strong>Other articles by the author:</strong> </p><br><ul><li>  <a href="https://habrahabr.ru/company/microsoft/blog/329908/">Deploy mobile software with Microsoft devops pipeline</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/327900/">Automate non-automated, or about Xamarin in real projects</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/310704/">Convenient REST for Xamarin Applications</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/281897/">Quickly create MVP (minimum viable product) based on Microsoft Azure and Xamarin.Forms</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/303630/">Preparing Xamarin.Forms: Setting Up the Environment and First Steps</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/304678/">Increase work efficiency in Xamarin.Forms</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/307890/">Working with screen states in Xamarin.Forms</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/321454/">Connecting Facebook SDK for Xamarin.Forms</a> </li><li>  <a href="https://habrahabr.ru/company/microsoft/blog/323296/">We connect VKontakte SDK for Xamarin.Forms</a> </li></ul><br><p>  <em>We remind you that this is the full version of an <a href="https://xakep.ru/2017/02/17/devops-authomatization/">article from Hacker magazine</a> .</em> </p></div><p>Source: <a href="https://habr.com/ru/post/325184/">https://habr.com/ru/post/325184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325168/index.html">MIPSfpga and UART</a></li>
<li><a href="../325170/index.html">Splunk + Check Point, an example of analyzing your firewall logs</a></li>
<li><a href="../325174/index.html">How I struggle with procrastination - and usually win</a></li>
<li><a href="../325176/index.html">We host a site in the interplanetary IPFS file system under Windows</a></li>
<li><a href="../325178/index.html">Memory optimization: difficult, but sometimes necessary</a></li>
<li><a href="../325186/index.html">Integrating XML data is another way.</a></li>
<li><a href="../325188/index.html">Fake promises, aggressive ads, trojan downloaders and other Google Play surprises</a></li>
<li><a href="../325190/index.html">I write as I want, or All for a meeting with ruHaskell in Kaspersky Lab</a></li>
<li><a href="../325192/index.html">Video review service HostTracker</a></li>
<li><a href="../325194/index.html">Passing configuration parameters to Autofac modules in ASP.NET Core</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
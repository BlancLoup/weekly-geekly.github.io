<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Linux DC ++ and multithreading</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all. In this topic I want to talk about working in DC networks under Linux. I myself am writing from under Linux Mint 7, but on Ubuntu 9.0...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Linux DC ++ and multithreading</h1><div class="post__text post__text-html js-mediator-article">  Good day to all.  In this topic I want to talk about working in DC networks under Linux.  I myself am writing from under Linux Mint 7, but on Ubuntu 9.04 everything is identical! <br>  So, I am the owner of a rather slow Internet channel.  Total, as stated in the tariff, 250 kbps (31.25kbytes).  In fact, usually 26-28.  And if something is required to me, I look for it first on the DC network.  Fortunately, I have a peering around the city of Krasnoyarsk, so there are no problems with the search. <br><a name="habracut"></a><br>  When I was in Windows, everything was fine with me, I used StrongDC ++ 2.21.  Everything is great ... And now, now I'm in Linux.  The story of my journey is a separate article ... <br>  And of course, the first thing I did was to search for alternative programs and ways to launch under Vain.  Found valknut program.  Well tried.  Well, it works.  Did not like  IMHO. <br><br><h1>  Wine and Flylink </h1><br>  The experience of using Linux DC ++ was still at 8.04, which I somehow didn‚Äôt really like because of bugs.  Climbed on <a href="http://appdb.winehq.org/">winehq.org</a> .  And I learned that our Flylink-r370 works perfectly.  All right, I think.  Right now everything will be the way ... But no, I downloaded this revision.  Installed, launched, under vaynom 1.1.25.  And yes, this miracle really works.  Began to test the functionality.  Made a ball.  Connect to the hubs.  I decided to download a large file, more than 5 gigs, and so that it would be available to a sufficiently large number of users.  Everything is fine, I found.  And the first thing I didn‚Äôt like was the file icons that were all confusing.  If this is a file, it looks like a normal folder in XP, and if this is a folder, then the icon is a white folder.  Well, I think.  All right, for the sake of working client DC it is possible and measured.  When I selected a line, I lost the field with information, how many people have this file.  Well, it was no longer serious.  But still tolerable, because when choosing a file of large size, I am also guided by this parameter.  Put on the download.  Immediately pleased speed, 8 MB / s.  But very rastroil processor load.  Since basically I download everything on the ntfs partition, which is not true, mount.ntfs-3g consumes quite a lot of CPU time, almost 100%.  The bulk was downloaded at a fairly decent speed, almost 8 megabytes per second.  BUT (!!!) When less than 10% is left, the speed dropped to 50 Kb / s.  I thought that at the same time everyone had run out of slots, or something else.  I decided that in a couple of minutes everything would be better.  It turned out, I did not think correctly))).  Opening the list with whom I shake.  I saw that the download is just a superfrom two computers.  and at a speed of about ~ 30kbytes.  Although before that, he had a great swing with more than 200 users).  Closing the connection, he immediately picked up someone at a speed of 2 megabytes per second.  Of course, I thought that at the end the blocks were swinging at low speed, but not to the same extent, in Strong DC ++ this was not the case.  This was the last straw ... <br><br><h2>  Linux DC ++ </h2><br>  And I decided to try Linux DC ++ more recent.  It took quite a long time, about a year.  Maybe they fixed this bug, that when I started it, it just took off from me. <br>  So sudo aptitude install linuxdcpp.  And we start ... Surprisingly, it was launched!  It's a sign!  I quickly added 5 gig movies to the ball.  I want to warn you that adding a ball is worth a little, because if you immediately give a 100 GB task, you will have both the computer and Linux DC ++ down.  Need to add one at a time, two folders.  So that you can wait for the moment when you finish the hashing, turn off the client, and start it again, otherwise with an emergency exit you will have to go through the hashing procedure again !!!  Well, and we entered the hubs.  This time I became smarter, and in the settings I set the download location on the ext3 partition.  I chose the file, no bugs were noticed, the only thing after clicking on the search button is that the window hangs (darkens), and I wait for him to finish the search.  I chose a test file to upload.  And wait.  As it turned out, this version is built on a stable kernel that does not support multithreading.  But there is 0.707 which supports multithreading, which is what we need.  Here is the <a href="http://live.progger.ru/tag/linuxdcpp/">manual</a> on which I learned where to get the source version with multithreading, and a brief guide to action.  Having collected all the remnants of the cookies from the table, I prepared to compile.) The benefit is no small experience ... But I did not want to collect the bag, then put it.  I decided to do it differently, without bothering the system.  Now I'll tell you everything.  so, 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Take the source </h4><br> <code><a href="http://bazaar.launchpad.net/~razzloss/linuxdcpp/0705-core"></a> sudo aptitude install bzr scons <br> cd ~/ <br> mkdir linuxdcpp <br> cd linuxdcpp <br> bzr branch http://bazaar.launchpad.net/~razzloss/linuxdcpp/0705-core <br></code> <br>  Great, now we have the source code for fresh linuxdcpp.  What can we do with them?  Compile! <br><br><h4>  Preparing the system for building fresh Linux DC ++ </h4><br>  As written in the manual, we further satisfy all dependencies.  Here is a line from my Readme.txt, you may differ slightly from the new version: <br> <code>Dependencies: <br> ------------- <br> scons &gt;= 0.96 <br> pkg-config <br> g++ &gt;= 3.4 <br> gtk+-2.0 &gt;= 2.6 <br> gthread-2.0 &gt;= 2.4 <br> libglade-2.0 &gt;= 2.4 <br> pthread <br> zlib <br> libbz2 <br> libssl</code> <br>  So, if you have ubuntu 9.04 then you should not have problems with old packages.  You just may not have some necessary things.  I pointed out the missing plus boost.  Well, no question. <br>  Here is what I vyoplnil: <br> <code>sudo aptitude install binutils scons pkg-config g++ libboost1.35-dev libglade2-0 libglade2-dev libpthread-stubs0 libpthread-stubs0-dev libbz2 libbz2-dev libssl libssl-dev <br></code> <br>  This command set up what was missing from my list, and what was old, updated (I did not manage to find 2 packages g ++&gt; = 3.4, gtk + -2.0&gt; = 2.6, click with your finger, I will add). <br>  Now everything is ready for assembly.  From the same readme, I read how to properly collect this hoard. <br><br><h3>  Compilation!!! </h3><br><br> <code>Compiling: <br> ---------- <br> $ cd /path/to/linuxdcpp <br> $ scons PREFIX=/path/to/install <br></code> <br><br>  Now the most interesting.  Since I don‚Äôt want to mess around, we‚Äôll get pretty clever, leaving the old version ,. <br><br> <code>sudo mkdir /opt/linuxdcpp <br> sudo chown -R : /opt/linuxdcpp</code> <br> <br>  Below you will find out why.  :) <br><br>  Now we collect. <br><br> <code>cd /path/to/linuxdcpp <br> scons PREFIX=/opt/linuxdcpp</code> <br>  You can go to drink tea.  But not for long, for the most interesting is yet to come ... <br>  If everything is well assembled, Congratulations.  If not, satisfy the dependencies and read what the error log says. <br><br><h4>  Installation </h4><br>  It remains to install.  Ustnovka is even easier than compiling: <br> <code>scons install</code> <br> <br>  And now the moment comes, for which we actually made a separate folder, I did not delete the old Linux DC ++ because I am very lazy to build the package and install it.  So I chose the easy way, for all this is already provided for by the linuxdcpp build tool.  Go to the settings of the main menu of the gnome (if you have sneakers, set yourself up) and look for that DC ++, and in the launch parameters we change only the path from ‚Äúlinuxdcpp‚Äù to ‚Äú/ opt / linuxdcpp / bin / linuxdcpp‚Äù (quotes). <br>  It's time to run our newly compiled client with multithreading support. <a href="http://ipicture.ru/Gallery/Viewfull/21071455.html"><img src="http://pic.ipicture.ru/uploads/090718/thumbs/0DpNDG6y7L.png" align="right"></a> <br>  Of course, as in any program, there are some nuances that were noticed by me.  When you select a file for download, the client starts the download first from one user, but then, if it has time, of course), connects to other users, which gives us a significant win in speed.  There is another option, but I did not understand its logic.  On the selected file, click "Search by TTH", and from this list, as I understand it, you can add users from which the jump will take place (if not right correct), when you click on "Match Queue". <br>  That's all.  I hope you enjoyed this article, and helped to avoid the use of Vine, When there is such a cool client. <br>  <b>Shl.</b>  I did not try StrongDC under Vine because I was completely satisfied with Linux DC ++. <br></div><p>Source: <a href="https://habr.com/ru/post/64775/">https://habr.com/ru/post/64775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64768/index.html">Glamorous Traceroute for iPhone</a></li>
<li><a href="../64771/index.html">About the Bing search engine or why Microsoft search pipe</a></li>
<li><a href="../64772/index.html">Life tips from web studio owners: how to increase profitability and reduce risks. Part 2</a></li>
<li><a href="../64773/index.html">Optimize Windows to use SSD on a laptop</a></li>
<li><a href="../64774/index.html">XSS on yandex.ru</a></li>
<li><a href="../64776/index.html">A simple service for freelancers - debt accounting</a></li>
<li><a href="../64785/index.html">Optima with Ukrainian support</a></li>
<li><a href="../64790/index.html">Habra-editor of comments dva.nol</a></li>
<li><a href="../64794/index.html">Is it possible to create artificial intelligence?</a></li>
<li><a href="../64796/index.html">Blog chain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
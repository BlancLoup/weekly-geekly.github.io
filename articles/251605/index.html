<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Four-wire analog trunk on Cisco</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Channels of departmental and sectoral conference call systems have a common feature - working with four-wire tonal frequency terminations. 

 In parti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Four-wire analog trunk on Cisco</h1><div class="post__text post__text-html js-mediator-article">  Channels of departmental and sectoral conference call systems have a common feature - working with four-wire tonal frequency terminations. <br><br>  In particular, in the energy sector, this is the legacy of ADASE (Long-haul Automatic Communication Equipment of Grid Systems) used and continued to be used in dispatching and technological communication systems of energy enterprises. <br><br>  Long-distance channels are used as trunks between the sites participating in the conference call, and the ACC BR equipment (the Selector Communication Equipment Distribution Unit) is installed directly on the sites, working with four-wire terminations and providing connection of subscriber sets, coordination of reception and transmission levels and organization of the system interruption. " <br><a name="habracut"></a><br>  Due to the fact that these communication systems have not been developed for a long time and are morally obsolete, with the expansion of the number of sites for the participants in the meeting, difficulties arise with the organization of four-wire transits ‚Äî the channel-forming equipment of ADASE on the site is absent and its installation is inappropriate. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But we are not setting the rules, but this system exists and continues to be used.  In addition, there are situations when the equipment on the site already exists and works with 100% use of a possible resource, and the task is to organize a backup communication channel, or to be included in the existing system of a remote regional office, which further complicates the implementation, since the point of inclusion in this case may be in the tens or even hundreds of kilometers from the site. <br><br>  At the moment, you can find the equipment of the primary multiplexers, which work with four-wire channels of PM (equipment like OPM-30, MP-30, NTS-1100, etc.).  This option involves the installation of two half-sets of equipment (cabinets, processor boards, PM boards, power supplies, etc.) and the organization of an E1 or T1 channel between them, which will also require the presence of channel-forming equipment. <br><br>  And if there is nothing of this, or the deployment is inexpedient, but is there Cisco equipment at the point of presence of the channel termination ADASE and at the participant‚Äôs site with organized data transfer using Ethernet protocol?  Moreover, the Cisco voice routers VK9 and are already used for service channels of telephone communication.  The considered situation is shown schematically in Fig.1. <br><br><img src="https://habrastorage.org/files/019/1ba/ff5/0191baff54004700a7d1e013b860cc78.jpg"><br><br>  There are two options.  The first option involves converting a four-wire circuit to a two-wire PSTN circuit and using Cisco voice modules like VIC FXO / FXS with further voice transmission via VoIP protocols.  In addition, the used converters, in addition to the implementation of the differential circuit, must understand the PSTN signaling, but no longer transmit the signaling to the four-wire circuit (signaling in the four wire terminations of the selector communication channels is not transmitted, the connections are established by operators at communication centers).  That is, the device must receive a call signal from a 2-wire PSTN circuit and simply establish a connection using a 4-wire circuit with TX-RX voice channel separation and the ability to adjust the required signal levels (-13 and + 4dB).  This option is difficult to implement due to the lack of devices of this type, and the existing proposals have a harsh imprint of a ‚Äúknee‚Äù assembly and they were not able to achieve stable operation.  It is not possible to use standardized airborne control systems, KTN and other channel interface modules that use single-frequency code of interaction and control signals without allocating a signal channel, since  This alarm simply has nothing to accept, process and establish a connection.  In the event of a broken connection, the system will have to automatically restore the channel (in fact, autodial), which will require the organization of software crutches and further reduce the reliability of the circuit.  There is still a whole range of issues that need to be resolved in this implementation, but voiced more than enough to recognize this solution as unacceptable. <br><br>  The second option is more standard, but, like the whole topic raised, gives some "exotic".  This is the use of Cisco VIC E &amp; M voice modules.  Analog lines with E &amp; M signaling use six or eight wire circuits.  It is possible to implement both two-wire and four-wire voice transmission, and signaling uses dedicated lines of two or four conductors, depending on the type of E &amp; M signaling used.  The standard itself is considered obsolete, but is still supported by manufacturers.  Cisco has two generations of two port voice modules VIC-2E / M and VIC2-2E / M.  When selecting modules, you need to make sure that the router and the IOS version support this type of VIC (for example, the 2800 series does not work with the VIC-2E / M, while on the Cisco 1760 there will be no problems with them).  The four-wire voice option is suitable for us, but what about the alarm that uses separate wires and is realized by shorting them either to the ground or to the station battery to indicate the status of the interface, because the end equipment does not support this alarm. <br><br>  E &amp; M Alarm has five types.  We will not dwell on each type in detail; we only note that in our solution we will use the E &amp; M Type V signaling system with immediate signal transmission.  With such an alarm, switching of analog channels occurs without confirmation of readiness or verification of the employment of voice ports.  But this is necessary, since signaling circuits are not used at all (we simply have nothing to receive them), and the channel itself is supposed to be used in the ‚Äúalways on‚Äù mode.  If necessary, the release of bandwidth from voice traffic at the end of a conference call is made by the operator accompanying the meeting by programmatically turning off one of the voice interfaces. <br><br>  Voice port configuration example (VIC2-2E / M modules are installed in slots 0/2/0 of Cisco 2801 routers): <br><br>  &lt;- Participant's site ---&gt; <br><br>  interface FastEthernet0 / 0 <br>  ip address XXXX 255.255.255.252 <br>  h323-gateway voip bind srcaddr XXXX <br><br>  dial-peer voice 101 pots <br>  destination-pattern 101 <br>  port 0/2/0 <br><br>  dial-peer voice 102 voip <br>  destination-pattern 102 <br>  session target ipv4: YYYY <br>  codec g728 <br>  no vad <br><br>  voice-port 3/0 <br>  operation 4-wire <br>  type 5 <br>  signal immediate <br>  input gain 14 <br>  output attenuation -6 <br>  no echo-cancel enable <br>  timeouts call-disconnect 3 <br>  connection trunk 102 <br><br>  &lt;- Platform of channel terminations ADASE ---&gt; <br><br>  interface Loopback0 <br>  ip address YYYY 255.255.255.255 <br>  h323-gateway voip bind srcaddr YYYY <br><br>  dial-peer voice 102 pots <br>  destination-pattern 102 <br>  port 0/2/0 <br><br>  dial-peer voice 101 voip <br>  destination-pattern 101 <br>  session target ipv4: XXXX <br>  codec g728 <br>  no vad <br><br>  voice-port 0/2/0 <br>  operation 4-wire <br>  type 5 <br>  signal immediate <br>  input gain 14 <br>  output attenuation -6 <br>  no echo-cancel enable <br>  timeouts call-disconnect 3 <br>  connection trunk 101 answer-mode <br><br>  Answer-mode is set only on one side, i.e.  one side initiates the trunk, and the other responds.  The parameters input gain and output attenuation are set by sending a test signal of 800 Hz and adjusting the voice path to standard levels + 4 dB reception and -13 dB transmission, followed by voice testing. <br><br>  ADASE systems use four-wire analog PM lines that do not have separate signaling circuits.  Interaction signaling is transmitted in the voice channel at 1200 Hz and 1600 Hz ¬± 5 Hz.  Theoretically, such a trunk can be used to turn on ADASE channels, but this mode of operation has not been tested. <br><br>  The considered solution is implemented and used in existing networks. </div><p>Source: <a href="https://habr.com/ru/post/251605/">https://habr.com/ru/post/251605/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251589/index.html">Remote control for Arduino, pen test</a></li>
<li><a href="../251591/index.html">‚ÄúHero Image‚Äù - parallax banners</a></li>
<li><a href="../251595/index.html">CompTIA certifications for IT professionals. Part 1 of 7. CompTIA A + and webinar recording of preparing for certifications on information security</a></li>
<li><a href="../251599/index.html">The oddities of the implementation of Wi-Fi in the Moscow metro</a></li>
<li><a href="../251601/index.html">Relevance of UPS in Tajikistan and the review of the generator Raccoon</a></li>
<li><a href="../251607/index.html">Using texture detailing to achieve the highest quality realism (more)</a></li>
<li><a href="../251609/index.html">Lenovo attacked in retaliation for the spyware Superfish</a></li>
<li><a href="../251611/index.html">Ensemble Workflow UI on Angular</a></li>
<li><a href="../251613/index.html">For the capture of the author Zeus appointed maximum reward</a></li>
<li><a href="../251615/index.html">Using color spaces in ATTiny13a for WS2811</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
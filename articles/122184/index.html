<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experienced trivia-4, or "Measuring backups?"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The continuation of "experienced trifles." Previous parts: one , two , three . 

 Today I will talk about the principles of doing backup , which are l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experienced trivia-4, or "Measuring backups?"</h1><div class="post__text post__text-html js-mediator-article"><img src="http://s1.ipicture.ru/uploads/20110619/OOkxVU5v.jpg" alt="image" align="right">  The continuation of "experienced trifles."  Previous parts: <a href="http://habrahabr.ru/blogs/sysadm/121801/">one</a> , <a href="http://habrahabr.ru/blogs/sysadm/121917/">two</a> , <a href="http://habrahabr.ru/blogs/sysadm/121946/">three</a> . <br><br>  Today I will talk about the <i>principles of doing backup</i> , which are lined up as a result of trial and error, and more than once saved the situation at the most seemingly unexpected moment. <br><a name="habracut"></a><br>  Backups are an accident insurance company.  Making backups is not even a rule, it is an axiom.  Whatever the hardened admin is, his hand can sometimes ‚Äúflinch‚Äù, and a script written with an error, or a randomly pressed button can bloat a lot of misfortunes, what can we say about sprinkled HDDs, fire and other cataclysms.  Yes, backups are costly (time, resources, equipment), their momentary effect is not obvious, but the main thing that they give is the insurance of company risks.  And this is worth a lot.  It would seem that the statements are clear to everyone, but often a situation arises when the server is down, there is a backup, but nothing can be done, the system is not restored.  And begin dancing for a tambourine with an orchestra, pulling at least some data, etc.  joy <br><br>  First, let's introduce and clearly separate such concepts as archiving and backup.  For example, like this: <br><ul><li>  Archiving is a backup with LONG-TERM data storage.  The procedure, when once copied, and carried to a bank safe.  Archiving is an exception rather than a rule, and the procedure can be quite lengthy (depending on where and how the archives are stored). </li><li>  Backup is a backup with SHORT-TERM storage.  The procedure, when copying occurs regularly, the media is overwritten, there is the concept of "depth of storage."  At the same time, access to backup should usually be as fast as possible. </li></ul><br><h4>  Archiving </h4><br><img src="http://s1.ipicture.ru/uploads/20110619/gzJEniwb.jpg" align="left"><br>  Archiving is not necessary for everyone and not always.  Most often, this question arises when the company goes beyond the ‚Äúme, my friend, wife and courier‚Äù framework, and usually only concerns files, financial databases, postal databases, i.e.  those documents that are not kept alive in archives (letters, orders, accounting, primary, etc.). <br>  Archives are usually made once a year and are stored on external media somewhere in a safe, in a safe deposit box, in the country house of the general director (underline the appropriate).  Everything is generally clear here, the main thing is not to forget to check the archive status at least once a year (for example, simultaneously with recording a new part, to restore some data from the old one) and monitor the media so that you can always read the archive of any depth (for example, I had a situation when it took an archive that was made 5 years ago and was stored on a tape, a streamer for which was not only broken and decommissioned, but was no longer issued. The archive was of course read, but how many nerves and connections it took was better not to recall ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The last couple of years, by the way, more and more for archives we use not tapes, but banal HDDs.  Their volume is enough, the speed of work is sufficient for the archive, the price is within reasonable limits, and a single connection interface (formerly IDE, now SATA) eliminates the problem of a ‚Äúbroken tape drive‚Äù, which is important because  data can be read on almost any computer, without the involvement of special equipment (as is the case with tapes).  When the IDE completely disappears, we will probably copy it to SATA (or whatever it will be after). <br><br><h4>  Backup </h4><img src="http://s1.ipicture.ru/uploads/20110619/dSa4rF2S.jpg" align="left"><br>  The task of the backup itself is to keep fresh backups, for quick recovery of ‚Äúaccidentally \ specially deleted‚Äù, or ‚Äúburned out‚Äù, or ‚Äúincorrectly configured‚Äù.  If archives are usually stored for as long as the organization lives, and sometimes longer, then for backups you can enter the concept of the <b>depth of storage</b> , i.e.  the time after which the backup will expire and can be overwritten with more recent data.  Backup as a whole can be divided into two main parts: <b>data</b> <b>backup</b> and <b>system backup</b> , and a stand-alone <b>backup of system content</b> .  The latter is a very extensive and specific topic, which strongly depends on the contents of which particular systems you want to back up (mail server, database, CRM, software settings, etc.), we will not describe it here. <br><br><h5>  Backup systems </h5><br>  Backup systems - this is when you need to backup not individual files, but the entire system, which can consist of several components (for example, special software, SQL database, file data), and restore it better in whole than in parts.  Everything is quite simple here: choose the backup software that suits you (price, functionality, convenience) and back up the system so that you are guaranteed to be able to restore it, even in case of a complete server crash.  All sorts of Acronis, Symantec System Recovery, etc. are suitable.  It is important to remember this: <br><ul><li>  You should be able to restore from backup.  Train anywhere, anytime, but you MUST BE ABLE to do it. </li><li>  think over what exactly you back up.  This is significant for universal servers, when, for example, on one server the database is spinning, your internal corporate site and an additional volume attached to file resources.  In such a situation, it‚Äôs not worth it to back up the ‚Äúcomplex SQL + your site‚Äù bundle to back up a second file volume of 1500 TB with it.  In general, aspire to the situation of ‚Äúone task - one server‚Äù, do not hang everything, everything, all on one machine, and if you do hang it, back up it ‚Äúsystemically‚Äù. </li><li>  Your software should be able to restore to another hardware that is different from the current one.  And you should try this at least once! </li><li>  ‚ÄúSystem‚Äù backups, especially systems that are constantly used, should not be stored more than a week deep.  Think for yourself, why do you need backup of your domain controller a month ago?  In the case of a critical situation, you will need the most recent backup.  And all the rest is a safety net, in case the ‚Äúmost recent‚Äù for some reason has not worked.  It is illogical and unnecessarily consumes space to allocate to such a safety net more than 1-2 iterations. </li><li>  There are systems that are complexly interconnected with the entire infrastructure, and it can be difficult to restore them, even with a fresh ‚Äúsystem backup‚Äù of a specific server at hand.  Offhand: Active Directory, Exchange, etc.  Allocate time, study the documentation, and in a test environment, at least once - but try to restore ABSOLUTELY EVERYTHING!  It is better to learn how to do this in a relaxed atmosphere with the Internet at hand, than with an angry boss over your head. </li></ul><br><h5>  Data backup </h5><br>  Data backup is a backup of individual, independent data (basically it is the contents of your corporate file storage).  There is no need for a lot of wisdom - take it and copy it, you can only think about the backup scheme.  For example, I adhere to the following scheme: <br><img src="http://s2.ipicture.ru/uploads/20110619/yEylvVCq.jpg"><br><ol><li>  On weekends, a full backup of all data is made.  The storage depth is 28 days, i.e.  There are four independent full backups.  Thus, for the last month we will be able to recover data for any day off. </li><li>  On working days, a differential backup is made, with a storage depth of 14 days.  Thus, over the past two weeks we can recover data for any of the days. </li><li> on the first weekend of each month, separately from the rest of the work, a monthly backup is made, with a storage depth of 12 months.  This is a cross between backup and archive.  On the one hand, the storage period is quite large, on the other hand, there is often a situation when you need to restore data ‚Äúa couple of months ago, a maximum of six months‚Äù.  As an option, you can not make the monthly backup a separate work, but simply copy the appropriate weekly. </li></ol><br>  In addition, I try to follow these rules: <br><ul><li>  I use differential, but not incremental.  (If you do not know what it is - be sure to read the documentation, these are very important concepts).  More important to me is the gain in speed of recovery, rather than in the volume of backup copies. </li><li>  I plan backup time so as to keep up until the morning.  If a backup takes longer, I split it into several jobs, several servers, or raise a question about other, faster, equipment. </li><li>  in the backup schedule I try to stick to the intervals associated with the weeks (7 days, 28 days, etc.) and not be attached to the ‚Äúfirst / last days of the month‚Äù.  A week is a fairly constant value, 7 days, and in most cases, Saturday, Sunday is a weekend. </li><li>  I use disks, not tapes.  I do not like the expensive intermediary streamer between the data in the backup and the data in the file storage.  If it for some reason does not work, then the whole backup system is broken for a long time.  If you use hard drives, then this can be avoided. </li><li>  I try that the logically independent part of the data lay in a separate backup.  For example, if we talk about Symantec Backup Exec, then one job = one media.  I really do not like the situation when one work is ‚Äúsmeared‚Äù over several files.  This not only adds confusion to the system, but in the case of accidentally overwriting one of the files (‚Äúthe hand trembled‚Äù) harms not only one job but also all the neighboring ones. </li><li>  I always use the software with notifications by mail.  If this is a self-written script, no one bothers to add a piece that will check at least the availability of a new backup, its size and send the data by mail.  This saves time in monitoring the backup. </li></ul><br>  Among other things, it is also fashionable to use so-called.  "Instant" backups, shallow depth (1-2 days) a la VSS service in Windows, when users can choose what to restore from the latest versions of the document.  This is very helpful when the user edited the document in the morning, and at lunch it deleted it and asked to restore the morning version. <br>  You can also use the DFS system as a permanent online backup, but it is worth describing it in a separate post, which I will do later. <br><br>  To be continued. <br><br>  PS Let me remind you, I do not set the rules, but I share my experience, non-universal experience gained in small organizations (30-500 PCs).  If you have decided to do otherwise - with pleasure I will read about it in the comments. </div><p>Source: <a href="https://habr.com/ru/post/122184/">https://habr.com/ru/post/122184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122178/index.html">AS3 Vector in AMF3: we lift the curtain</a></li>
<li><a href="../122179/index.html">Making Linux From Scratch our universal distribution</a></li>
<li><a href="../122181/index.html">Microsoft has announced successes in the fight against autorun viruses</a></li>
<li><a href="../122182/index.html">i-garden</a></li>
<li><a href="../122183/index.html">Wireless chips from Renesas Electronics Corp can work without batteries</a></li>
<li><a href="../122185/index.html">Amazon's hasty pre-order HP TouchPad</a></li>
<li><a href="../122188/index.html">Checking the karma of a habrahabr.ru user using Python on Android</a></li>
<li><a href="../122189/index.html">The site of the governor of the Sverdlovsk region is available at Creative Commons Attribution</a></li>
<li><a href="../122190/index.html">Online project environment: solution. Part 1</a></li>
<li><a href="../122191/index.html">Ruble sign on the website: express method</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
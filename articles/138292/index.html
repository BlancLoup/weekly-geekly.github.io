<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Building, configuring and running ipt-netflow on Debian Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="General information 


- ipt-netflow is the fastest netflow sensor (counter) for Linux. 
- It consists of two modules: for the kernel and for iptables...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Building, configuring and running ipt-netflow on Debian Linux</h1><div class="post__text post__text-html js-mediator-article"><h3>  General information </h3><br><ul><li>  ipt-netflow is the fastest netflow sensor (counter) for Linux. </li><li>  It consists of two modules: for the kernel and for iptables. </li><li>  In the standard kernel and iptables is not yet included - requires assembly from the source code! </li><li>  Debian inclusion is discussed - see <a href="http://lists.debian.org/debian-mentors/2011/04/msg00070.html">lists.debian.org/debian-mentors/2011/04/msg00070.html</a> and <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi%3Fbug%3D620511">bugs.debian.org/cgi-bin/bugreport.cgi?bug=620511</a> </li></ul><br><a name="habracut"></a><br><h3>  System </h3><ul><li>  Debian Squeeze (6.0.3) amd64 </li><li>  Kernel 2.6.38 from backports (the freshest at the time of this documentation) </li></ul><br><h3>  Build on test system </h3><ul><li>  Install the necessary packages: <br><pre>  apt-get install -t squeeze-backports linux-headers-2.6.38-bpo.2-amd64
 apt-get install -t squeeze-backports quilt debhelper autotools-dev iptables-dev dkms pkg-config </pre><br></li><li>  Download and unpack <a href="http://sourceforge.net/projects/ipt-netflow/files/ipt-netflow/">sourceforge.net/projects/ipt-netflow/files/ipt-netflow</a> </li><li>  We compile and install into the assembly system: <br><pre>  cd ./ipt_netflow- *
 ./configure
 make all
 make install
 depmod </pre><br></li><li>  Making an archive for installation on the gateway: <br><pre>  find / lib -name "* NETFLOW *" |  xargs tar czf \
 / tmp / ipt_netflow - $ (modinfo -F version ipt_NETFLOW) - $ (uname -r) .tar.gz </pre></li></ul><br><h3>  Installation on a production system </h3><ul><li>  Expand from archive <br><pre>  tar xzf /tmp/ipt_netflow-*-*.tar.gz -C /
 depmod </pre><br></li><li>  Configure boot options (full list of parameters): <br><pre>  echo options ipt_NETFLOW destination = 127.0.0.1: 9996&gt; /etc/modprobe.d/netflow.conf </pre><br></li><li>  Load and check the status: <br><pre>  modprobe ipt_NETFLOW
 sysctl -a |  grep net.netflow </pre><br></li><li>  We let traffic through the sensor: <br><pre>  iptables -A FORWARD -j NETFLOW </pre><br></li><li>  Checking the count: <br><pre>  iptables -nvL FORWARD |  grep NETFLOW
 tcpdump -c5 -npi lo port 9996 </pre><br></li><li>  Turn on autoload: <br><pre>  echo ipt_NETFLOW &gt;&gt; / etc / modules </pre><br></li><li>  Disable kernel update: <br><pre>  echo linux-image-2.6.38-bpo.2-amd64 hold |  dpkg --set-selections </pre><br></li><li>  If the collector is on another computer, then  at the time of loading the module, the interfaces and routing are not yet configured, the establishment of communication with the collector may end with a kernel error 101 (‚Äúdestination unreached‚Äù).  To bypass it, re-establish the connection from /etc/rc.local: <br><pre>  f = "/ proc / sys / net / netflow / destination"
 test -e "$ f" &amp;&amp; d = "$ (cat $ f)" &amp;&amp; echo "$ d"&gt; "$ f" </pre><br></li></ul><br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/138292/">https://habr.com/ru/post/138292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138286/index.html">How PDF format is no longer associated with a log</a></li>
<li><a href="../138287/index.html">Apple is forced to respond to a congressional letter regarding data security on the iPhone</a></li>
<li><a href="../138289/index.html">Overview of a secure flash drive Aegis Secure Key</a></li>
<li><a href="../138290/index.html">Social commerce and Twitter fundraising</a></li>
<li><a href="../138291/index.html">More + 2GB for your DropBox account. This time, the promotion DropBox and Three.com.hk</a></li>
<li><a href="../138293/index.html">Yii moved to github</a></li>
<li><a href="../138294/index.html">Free Software supporters reject software religion for common sense.</a></li>
<li><a href="../138295/index.html">New version Cache 2012.1 released</a></li>
<li><a href="../138297/index.html">Determining whether an IP address is in range</a></li>
<li><a href="../138299/index.html">SumIT Weekend February 18-19, iPad and Hackathon Idea</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
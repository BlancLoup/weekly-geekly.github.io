<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing the functionality of Symantec Backup Hot-Add. Increased speed of copying and restoring data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In 2014, Trinity Ural for Convenient Money introduced a set of equipment that included four SuperMicro server nodes and an external EMC VNX 5400 stora...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing the functionality of Symantec Backup Hot-Add. Increased speed of copying and restoring data</h1><div class="post__text post__text-html js-mediator-article">  In 2014, Trinity Ural for Convenient Money introduced a set of equipment that included four SuperMicro server nodes and an external EMC VNX 5400 storage system running VMware vSphere software that provides High Availability functionality.  Symantec Backup Exec was selected as the tool for organizing backup / restore. <br><br>  Today, in the context of an intensive growth in demand for microcredit services, Convenient Money expands its geography in the regions, which can not but affect the company's IT infrastructure.  The key point is to ensure the safety of ever-growing data, in this regard, careful attention was paid to the backup and recovery system. <br><br>  The customer was faced with the problem of adhering to the backup regulations due to the growth in the size of the databases, at the current copying speed using Symantec Backup Exec.  The generated report of Symantec Buckup Exec operation recorded the speed of data copying over the LAN about 1,033 MB / min., Which was not enough to copy the main SQL database (1 TB volume) for the allotted time (Fig. 1). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/50f/f49/170/50ff4917031947ab820ce42447ba47ba.png" alt="image"><br>  <i>Fig.</i>  <i>1. The backup speed indicator.</i> <br><br>  We are faced with the task of increasing the speed of backup and recovery of data in excess of 1 TB, with the guarantee of the safety of the current backup database with minimal material costs. <br>  There was a question about the possibility of increasing the speed of backup of the SQL database and about the maximum possible speed of backup using Symantec Buckup Exec. <br><br>  To study the solution, Triniti Ural deployed a booth where the VMware ESXI virtual infrastructure (version 5.5) was recreated, with the connection of server nodes using FC 8 G / bit to the IBM Storwize V7000 storage system (8 x 300 GB pool of SAS 10K in RAID 0 for reading, pool 8 x 300 GB SAS 10K in RAID 0 for writing), deployed SQL databases on virtual servers. <br><br><img src="https://habrastorage.org/files/515/cac/744/515cac7443f946428e8cd95d4e4eb662.jpg" alt="image"><br>  <i>Fig.2.</i>  <i>Copy speed when aggregating LAN ports and when using Symantec Backup Hot-Add functionality.</i> <br><a name="habracut"></a><br>  <b>Before testing, there were two main assumptions:</b> <br><br><ol><li>  The problem is related to insufficient bandwidth of the channel; to increase the copy speed, it is necessary to aggregate LAN ports. </li><li>  Perhaps VMware software limitations impose restrictions. </li></ol><br>  At the first stage of testing, it was revealed that the aggregation of LAN ports could not significantly increase the speed of copying and restoring data; they used two / four aggregated ports on each side when testing, and when the aggregation was turned off, the copy speed remained almost unchanged (Fig. 2). <br><br>  It was decided to test the functionality of Symantec Backup Hot-Add (copying / restoring a database over SAN (FC 8 G / bit)) (Fig. 3), since  When using backup over SAN (Direct SAN) in Backup Exec 2012, the restore virtual machines function does not work.  When using Backup Hot-Add (Fig. 2), it turned out that the speed is at least twice as high when copying / restoring than via LAN.  Thus, the hot-add functionality has a positive effect in backup, and in our particular case, when backing up via SAN, the speed was limited not by the bandwidth of the channel, but by the number of spindles in the array. <br><br><img src="https://habrastorage.org/files/45b/23d/09e/45b23d09ecf646f296ee1502ad9e5f75.jpg" alt="image"><br>  <i>Fig.3.</i>  <i>Backup scheme using the functionality of Symantec Backup Hot-Add.</i> <br><br>  For a database with a capacity of 1 TB at this copy / restore speed, backup over LAN will last about 9 hours, and over SAN it will take about 4.5. <br><br>  <b>Additionally, we tested backup / recovery of SQL databases using SQL Agent tools, and some limitations were identified, namely:</b> <br><br><ol><li>  When finding a database on a separate RDM (Raw Device Mapping) disk, the database will only be backed up if the disk type is Virtual, by default in the Physical settings.  Compared to the backup of the vmdk file, the backup speed of the RDM Virtual disk is the same (300 MB / s reading speed, floating speed from 50 MB / s to 300 MB / s (when testing again we rest on the speed of the physical Storwize hard disks). </li><li>  If the base lies on a separate RDM disk in Virtual mode, and the disk is used as a GPT (GUID Partition Table) inside the operating system, then a backup error occurs <a href="http://www.symantec.com/business/support/index%3Fpage%3Dcontent%26id%3DTECH69498%26actp%3Dsearch%26viewlocale%3Den_US%26searchid%3D1429181110280">www.symantec.com/business/support/index?page=content&amp;id=TECH69498&amp;actp=search&amp;viewlocale= en_US &amp; searchid = 1429181110280</a> .  You need to disable GRT or use the disk as MBR (Master Boot Record). </li><li>  The inability to run incremental backup.  A backup of the entire database is made; when the database is changed in a single line and the incremental backup is started, the entire database is copied. </li></ol><br>  In the case of Convenient Money, for a DB with a capacity of 1 TB, we apply the option of locating the database either together with the operating system in one VMDK (Virtual Machine Disk) file, or on a separate RDM disk in Virtual MBR mode.  Incremental backup of the SQL DB located on the virtual machine is not possible, only Full. <br><br>  Using the hot-add functionality allows you to significantly increase the speed of copying / restoring data without switching to the senior product Symantec NetBackup and preserving the existing database of backups. <br><br>  <b>Abstracts at the end of testing:</b> <br><br><ol><li>  When LAN ports are aggregated, there is no linear increase in the copy / restore speed.  In the case of the aggregation of four ports, the speed remained almost unchanged compared to the two aggregated ports in the LACP. </li><li>  Copy / restore speed is significantly increased when using the Symantec hot-add functionality, in the absence of additional investments in the existing infrastructure (except for the presence of free FC ports of 8 G / bit on the server and storage). </li><li>  Software limitations VMware data copy is not revealed. </li><li>  There are features to set up / restore SQL Agent tools for databases, in particular, only full backup is possible. </li></ol><br>  For the customer, an IT infrastructure audit was carried out with recommendations for optimizing the operation of the existing infrastructure and an algorithm for setting up backup / restore over SAN was formulated using the Symantec Backup Hot-Add functionality for implementing backup management rules. <br><br>  Other Trinity articles can be found in the <a href="http://habrahabr.ru/company/trinity/">Trinity hub</a> .  Subscribe! </div><p>Source: <a href="https://habr.com/ru/post/269753/">https://habr.com/ru/post/269753/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269741/index.html">Swift + VK.API, or the story of SwiftyVK</a></li>
<li><a href="../269743/index.html">We continue to fight the frontend-routine</a></li>
<li><a href="../269745/index.html">Learning machine learning</a></li>
<li><a href="../269747/index.html">Why google voice neural nets search?</a></li>
<li><a href="../269751/index.html">Attackers exploit a vulnerability in the Ksoft Uploader software! for installing Gh0st RAT</a></li>
<li><a href="../269755/index.html">Control modes using the mouse and the touch screen in Windows 10 and Windows 8</a></li>
<li><a href="../269757/index.html">The book "Minecraft. Program your world "</a></li>
<li><a href="../269759/index.html">Pytest</a></li>
<li><a href="../269761/index.html">What's New: 3 technological trends in algorithmic trading</a></li>
<li><a href="../269765/index.html">Infrastructure solutions for databases and virtualization // IBS and Huawei Open Webinar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
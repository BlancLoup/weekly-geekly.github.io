<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Entertaining 40 gigabit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My very first post , which I wrote three years ago on Habr, was devoted to 10G Ethernet and 10G Intel network cards, which, in principle, is not accid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Entertaining 40 gigabit</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d6e/c09/787/d6ec097872134983b30ace7830049e0b.jpg"><br><br>  My very <a href="http://habrahabr.ru/company/intel/blog/143810/">first post</a> , which I wrote three years ago on Habr, was devoted to 10G Ethernet and 10G Intel network cards, which, in principle, is not accidental, because network technologies are my profession.  Further posts on this topic almost did not appear in the blog Intel - as they say, there was no reason.  And now he has appeared, and quite weighty.  After all, the release of the new generation of Intel network cards on the X / XL710 controller brought with it not only improved performance and new features, but also the emergence of a fundamentally new product for the company - 40G Ethernet network cards for servers.  It's time to talk about the current situation in the 40 gigabit area. <br><a name="habracut"></a><br><h2>  <font color="#0071c5">"4 times better than 10G"</font> </h2><br>  The IEEE 802.3ba standard describing 40 / 100G Ethernet was published more than 5 years ago.  The prospects were then drawn by the most optimistic: it was predicted that by 2015 (that is, already now), 40 / 100G ports would be at least a quarter of all Ethernet ports.  As living at that time, we can definitely say: this did not happen.  Why?  Actually, over the past three years, nothing has changed in principle;  Let me quote: ‚Äú... the main reason, in my opinion, is that such speeds in most cases are simply not needed;  With the exception of extra large data centers or giant cloud platforms, one or several 10G lines do an excellent job of transferring the traffic assigned to them. ‚Äù <br><br>  Once in this optimistic time I had a chance to attend the presentation of a famous vendor.  To the question: ‚ÄúWhy are you promoting 40G?‚Äù The speaker answered concisely: ‚Äúbecause it is 4 times better than 10G‚Äù.  However, the market has once again demonstrated its pragmatism.  It is unlikely that the operator will lead his partners to the AvtoZal to proudly show: we have a 40G module in the router!  The end user needs to obtain the required performance indicators at an optimal cost.  Even with the use of outdated technology. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      According to my observations, the situation began to slowly change about two years ago, while, as is typical, 40G ports still tend to ‚Äúcollapse‚Äù at 4x10G (they do it easily, by nature), which again confirms the aforementioned thesis.  In general, the process is very slow, telecom operators, even the largest ones, still prefer to manage with the aggregation of nx 10G channels, and in the Ethernet data center it is necessary to compete with Infiniband QDR / HDR, which is more economical than wasting channel capacity and providing lower delays.  Who cares about the numbers, <a href="http://www.pvsm.ru/ethernet/55927">here</a> is a report from Ethernet vs Infiniband testing using the <a href="https://software.intel.com/en-us/articles/intel-mpi-benchmarks">Intel MPI Benchmark benchmark</a> . <br><table><tbody><tr><th></th><th>  40G Ethernet </th><th>  InfiniBand QDR </th><th>  InfiniBand FDR </th></tr><tr><td>  Delays, ms </td><td>  7.8 </td><td>  1.5 </td><td>  0.86-1.4 </td></tr><tr><td>  Speed, MB / s </td><td>  1126 </td><td>  3400 </td><td>  5300-6000 </td></tr></tbody></table><br><h2>  <font color="#0071c5">40G inside</font> </h2><br>  The IEEE 802.3ba standard offered several options for data transmission at 40 Gbit / s. <br><table><tbody><tr><th>  Specification </th><th>  Wednesday </th><th>  Max.  distance </th></tr><tr><td>  40GBase-KR4 </td><td>  Becplein </td><td>  1m </td></tr><tr><td>  40GBase-CR4 </td><td>  Copper twinax cable </td><td>  7 m </td></tr><tr><td>  40GBase-SR4 </td><td>  Optics multimode, 850 nm </td><td>  150 m (OM4) </td></tr><tr><td>  40GBase-LR4 </td><td>  Optics single mode, 1310 nm </td><td>  10 km </td></tr></tbody></table><br><br>  All 40G specifications with the number 4 at the end are united by one common point: 4 lines are used at the same time for data transfer.  The distribution of data across the lines is done by a module named in the MLD (Multilane Distribution) standard.  At the input of the module, a stream of data encoded using the 64b / 66b algorithm, MLD in turn (round-robin) distributes 66-bit blocks into each of the parallel lines, which can be either physically different fibers (40GBase-SR4), or different Œª Frequencies within the WDM (Wave Division Multiplexing) structure, as in the 40GBase-LR4 specification. <br><br><img src="https://habrastorage.org/files/803/959/31c/80395931c43a44b28358d0b1a6003044.jpg"><br><br>  In order to avoid errors during the reverse assembly of traffic at the stage of multiplexing, service markers are inserted into the stream of 66-bit words. <br>  Frequency multiplexing technologies, which have long been registered in Ethernet, turned out to be very useful here, however, there was a slight stretch: WDM devices have long been used in MAN / WAN trunk lines, why do we need another CWDM under a different name?  But the multi-fiber version of the prospects, of course, is. <br><br><img src="https://habrastorage.org/files/c91/29e/b48/c9129eb482474bd3810b3faf6a0f6c93.jpg"><br><br>  The prospect of the 40GBase-SR4 specification (and we are talking about it) is in its economy.  Currently, this is the most affordable 40G solution for LAN-distances and is actually the only active solution used among the entire 40G line of specifications.  As a constructive connection for 40GBase-SR4, a 12-pin MPO (Multi-fiber push-on) connector is used. <br><br><img src="https://habrastorage.org/files/cd8/a79/5ef/cd8a795ef59e47a8bd5fbdd134cb906e.jpg"><br><br>  Optical outputs in a 12-pin MPO are located in one row between the rails, for 40GBase-SR4 4 pairs of lines are used.  The 100G Ethernet MPO connector is 24-pin, the outputs go in two rows. <br>  The ‚Äúcounterpart‚Äù of the 40GBase-SR4 optical port in the equipment is the QSFP + connector (similar to SFP for 1G and SFP + for 10G), so the 40GBase-SR4 transceiver has an MPO on one side and a QSFP + on the other. <br><br><img src="https://habrastorage.org/files/131/c84/388/131c84388d614b23aee7fed2b856aca6.jpg"><br><h2>  <font color="#0071c5">What does the 710 give us?</font> </h2><br>  We now turn to the network products of Intel.  First, a little history.  Network cards are devices that do not have a marketing load; therefore, changes in their generations are due solely to technical reasons and occur infrequently - we already talked about this in the introduction. <br><br>  The breakthrough in high-speed Ethernet has become for Intel the Intel 82598EB networking chip, created 10 years ago and becoming the de facto benchmark for 10G Ethernet for many years.  A few years later, the Intel 82599EN chip was added to the line, which brought a number of improvements: the technical process decreased, the data transfer speed on the bus increased ... By the way, few people know, but Intel network chips also have code names like processors: let's say the first one is Bellefontaine , the second - Spring Fountain.  When the next update of the line of network controllers was released, Intel decided that it was useless to break the brain about long indices and called it shorter and clearer - X540;  the same name received and cards based on it.  With such baggage, we approached the release of a new generation of X / XL710 chips.  If anyone is interested, the codename of the new chip is Fortville.  Currently there are 4 map options available, which are unlikely to become more. <br><table><tbody><tr><th>  Map </th><th>  Speed </th><th>  Ports </th><th>  Module Options </th></tr><tr><td>  <a href="http://ark.intel.com/products/83964/Intel-Ethernet-Converged-Network-Adapter-X710-DA2">Intel X710-DA2</a> </td><td>  10G </td><td>  2 x SFP + </td><td>  10GBase-LR, 10GBase-SR, DA </td></tr><tr><td>  <a href="http://ark.intel.com/products/83965/Intel-Ethernet-Converged-Network-Adapter-X710-DA4">Intel X710-DA4</a> </td><td>  10G </td><td>  4 x SFP + </td><td>  10GBase-LR, 10GBase-SR, DA </td></tr><tr><td>  <a href="http://ark.intel.com/products/83967/Intel-Ethernet-Converged-Network-Adapter-XL710-QDA2">Intel XL710-QDA1</a> </td><td>  40G </td><td>  1 x QSFP + </td><td>  40GBase-SR4, 40GBase-LR4, DA </td></tr><tr><td>  <a href="http://ark.intel.com/products/83967/Intel-Ethernet-Converged-Network-Adapter-XL710-QDA2">Intel XL710-QDA2</a> </td><td>  40G </td><td>  2 x QSFP + </td><td>  40GBase-SR4, 40GBase-LR4, DA </td></tr></tbody></table><br>  Partner partitions for Intel optical modules and copper cables can be found at the links on the card pages. <br><br>  Why is the emergence of new network cards greeted with such loud words?  The fact is that the novelty of X / XL710 is truly comprehensive, both technologically and ideologically.  Let's start with the ideology.  Previously, Intel preferred to produce 10G cards with fixed ports, fearing (and sometimes rightly) that a poor-quality transceiver installed in the card and, as a result, the incorrect operation of the entire system is undermining its reputation.  However, this approach presented a certain inconvenience, was inflexible with respect to the end user.  And so Intel decided: the entire X710 family comes exclusively with SFP + connectors (QSFP in 40G cards on an XL710 chip). <br><br>  Now about technology.  The 710 series was the first to receive PCIe 3.0 support at a speed of 8 GT / s per line.  Thus, eight lines provide sufficient margin to accommodate 4 10G ports on the card or one 40G port (two 40G ports with oversubscription) - naturally, this configuration also appeared for the first time.  Well, in addition, the next reduction in process technology - now it is 28 nm. <br>  So, now the terminal device (server) has at its disposal a 40G interface in the form of one port or four on one card.  In the light of chapter two of this post, the question arises: does he really need it?  In my opinion, this is the moment when the appearance of such an adapter is justified.  Here are my arguments. <br><ol><li>  Servers with several 10G interfaces are no longer a rarity, there may be several reasons for this: network topology, routing features, application requirements, etc.  4-port card will save you space in the server, which in the conditions of chronic shortage of space is welcome.  In addition, 4 ports on one map will cost you substantially less than individual ones. </li><li>  Increasing the density of ports on the servers will allow inquisitive Pts.  skillful hands to implement interesting hardware and software solutions for traffic juggling.  The list of options is very wide: monitoring, filtering at any level, aggregation, balancing, and so on, as they say, DPDK in your hands. </li><li>  Powerful virtualization platforms are also a very real topic, and they also want to be thinner.  For some application servers, 40G will also be, I think, not superfluous. </li></ol><br>  Based on the dynamics of the process, my next post will be about an Intel 100G card.  Well, that will certainly happen too.  Or maybe something interesting will happen. </div><p>Source: <a href="https://habr.com/ru/post/265975/">https://habr.com/ru/post/265975/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265963/index.html">Context Sensors in Windows 10</a></li>
<li><a href="../265965/index.html">API for validator from Yandex. And why do the micro-mark validators give different answers?</a></li>
<li><a href="../265967/index.html">And these people forbid me to pick one's nose ... (in continuation of the theme of the sled for the HDD)</a></li>
<li><a href="../265969/index.html">Safe dynamic update of records on MS DNS from Linux</a></li>
<li><a href="../265971/index.html">Small usefulness for a GLPI + FusionInventory bundle</a></li>
<li><a href="../265979/index.html">ATM cash withdrawal forecast using a simple neural network</a></li>
<li><a href="../265981/index.html">Program from scratch. Now is the right time to start</a></li>
<li><a href="../265983/index.html">Connecting Asterisk via OKS-7</a></li>
<li><a href="../265985/index.html">1C: Summer School 2015 - how to organize a ‚Äúsmart‚Äù vacation for young programmers - part 2. Interesting things</a></li>
<li><a href="../265987/index.html">EMC VNXe1600 Storage System Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Notes IoT provider. Coating</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The second part of the cycle "Notes IoT provider." Start can be found here . 


 So, we decided to build a network. 


 In fact, everything was differ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Notes IoT provider. Coating</h1><div class="post__text post__text-html js-mediator-article"><p>  The second part of the cycle "Notes IoT provider."  Start can be found <a href="https://habr.com/post/359276">here</a> . </p><br><p>  So, we decided to build a network. </p><br><p>  In fact, everything was different.  We had a task.  More and more different companies turned to us about remote meter readings.  In part, we solved this with a witkuha, but you don‚Äôt tighten it everywhere.  And we were puzzled by the search for an alternative way. </p><br><a name="habracut"></a><p>  They analyzed the market, decided that it was LoRa that best suits our task.  Chose from several standards.  But Strizh pushed aside proprietaryity, NBIoT demanded frequencies, and indeed, last year‚Äôs market was not pleased with the variety.  The first base station LoRa was somehow bought (it was Kerlink). </p><br><p>  Let's do some terminology.  Base station, i.e.  transceiver, in Laura is called the gateway.  Honestly - this is the only word that we stubbornly did not stick.  Therefore, I, with your permission, will continue to call the gateways base stations. <br><br>  The BS communicates with the terminal device.  He has many names - the end, the sensor, the sensor.  We liked the radio module (RM). </p><br><p>  The BS itself is a stupid piece of hardware that simply converts the radio part from LoRa to, say, Ethernet.  Unlike LTE, it controls nothing and generally tries to think at a minimum.  All the levers in the next link of the chain - a network server.  It is the server that drives the network, it is he who listens to packets from the RM, it is he who decides which BS to answer.  True, he does not interpret the readings themselves in batches in any way; the next link does this - the application server.  We'll talk more about them, but for the time being we are sorting out the radio part. </p><br><img src="https://habrastorage.org/webt/lz/dw/z0/lzdwz0cdzmcs3jckkjpbzg06xao.jpeg"><br><p>  Structure of the LoRaWAN network </p><br><p>  It took three months for detailed testing of the technology.  We tried various locations of base stations, various antennas, ran across some anomalies and looked for solutions. </p><br><p>  The most difficult measurements were given.  After each installation of the base station, you need to run around it with a meter for two or three days, poking at entrances and shops, asking colleagues and friends to let them into their apartments if they find themselves in the area of ‚Äã‚Äãoperation. <br>  But we managed to make a very clear picture of the radio coverage of the LoRa network and derive several practical tenets. </p><br><img src="https://habrastorage.org/webt/3l/vk/e2/3lvke2vcok7el4ncnotdcbk-b7q.png"><br><br><p>  Results of preliminary measurements </p><br><ol><li>  We had five base station manufacturers on the test. <br><ul><li>  Kerlink </li><li>  Progtech </li><li>  Rising hf </li><li>  Cisco </li><li>  Vega </li></ul><br><p>  The meaning of most of them is the same.  On board are three chips, two SX1257 and one SX1301.  They differ only in body, quality of execution and, of course, price. </p><br><p>  Kerlink has a solid case.  Comes with a small 6 dBi antenna.  In fact, it is no different from competitors, except for the exorbitant price.  One Curlink stands at about 4 Vegs.  Because it was the first shallow for an unreasonable price tag. </p><br><p>  For the sake of fairness, I note that there are interesting solutions in the Curling line, for example, a BS on 16 or 24 channels.  However, for Russia it is redundant, we can only turn around on seven channels of one and a half megahertz of unlicensed spectrum. </p><br><p>  Progtech is suspiciously similar to Kerlink case, although it is three times cheaper.  Inside, everything is rather clumsy, assembled from separate nodes, boards in two rows.  In general, there were no complaints about the work, but somehow it did not take root in our country. </p><br><p>  Rising HF for the price of half the Curlin, but it has a solid metal case with radiators.  Again, not much different from fellow in terms of the radio part.  Will suit those who love iron execution and are afraid of plastic cases. </p><br><img src="https://habrastorage.org/webt/4o/kq/4b/4okq4bujcxq-lnuyspw7khs6u0k.jpeg"><br><p>  BS Rising HF </p><br><p>  Cisco.  That's about her radio part, I'm not sure a hundred percent. <br>  The BS comes with two antennas, one can be transmitting, two are listening.  Such Single-MIMO on the Internet of Things. </p><br><p>  It was Cisco that showed the best results in terms of radio coverage.  True, the declared value is two Curlins.  And, after the test, she had to return.  Cisco is very responsible for the certification of its BS, because in Russia they have not officially sold. </p><br><p>  As a result, we stopped at the base stations of the Novosibirsk company Vega.  These are base stations with a single-board version in an unassuming plastic case.  This building is embarrassing for many, they think that on the street it will quickly fall apart or flow.  But our network works on them and for almost a year none of them failed. </p><br><p>  In the radio part of Vega, too, nothing special, but the price turned out below all competitors.  In addition, Novosibirsk has a good support of specialists, even if there are bugs, they are very quickly closed.  It is not surprising that they decided to build on Vega.  Progtech and Rising HF also remained online as possible alternatives. </p><br><img src="https://habrastorage.org/webt/ug/qg/sn/ugqgsnmy3bv0w_wcacqpatif7zm.png"><br><p>  BS Vega, appearance and installation </p></li><li><p>  The average radius of action of LoRa in the city is 1.5 - 2 km.  This is real data.  I emphasize that the terminal devices are not on the street, but where they will stand.  In apartments, basements, boilers and shield.  And this is all very conditional. </p><br><p>  There are quite dark basements, where it begins to be taken only from 500 meters (specially the BS was moved to such a basement in order to understand when the connection will appear).  Come across open spaces where it breaks through 4 kilometers.  However, the average indicator, nevertheless 1,5-2, also make a start from it.  Of course, the limit values ‚Äã‚Äãwill only be at SF = 12.  It is important to understand. </p><br><p>  Here I will separately tell you about Laura‚Äôs aggressive marketing and an important thing that not everyone is aware of.  When they say that the standard can penetrate "up to 10 km" and work at a speed of "up to 5.5 kbit / s" on a 125 kHz bandwidth - these are different "to"!  10 kilometers Laura will break only in the open field and then on SF = 12. Ie  the speed will be 292 bps.  To get SF = 7 you have to go much closer.  But there it is, up to 5.5 kbps. </p><br><p>  These advertising tricks are fraught with the fact that engineers begin tests in cities and do not see these ‚Äúbefore‚Äù.  Why, they often won't see a kilometer if they put a BS on the roof of a five-story building and use standard antennas!  Hence the conclusion, they say, the technology is not working.  Working  You just need to separate the marketing husks from the real possibilities.  2 kilometers in the city is quite a result. </p></li><li><p>  Another problem that is often misleading is the standard antennas.  You know, it's like rubber from the factory on a new car.  You can ride, but something worthwhile is unlikely to be put.  We'll have to buy more.  So here.  Established antennas for 6 (or even 3) dBi throw out immediately.  We use normal antennas.  For example, the Russian Radial showed itself well.  Its A868-10 gives out 10 dBi and the coverage map confirms this.  Of course, the 2 kilometers I mentioned in the last paragraph are on Radial.  Such a microwork. </p></li><li>  Radio planning.  Unfortunately, we did not immediately come to this.  A few simple rules: <br><ul><li> The base station needs to be raised higher.  Directly bully to the maximum point is not necessary, but it should be on average higher than those sensors that polls.  And occupy one of the dominant heights of the area.  It is important to consider not only the building, but also the relief.  On the attached map of measurements it is clearly seen that the stain of the coating is not round.  It is in many ways distorted by a slide in the north-west and a descent in the east. </li><li>  Calculation at the installation site.  Now we have overgrown with special tables, which, for example, check the height of the suspension relative to the edges of the roof.  So that these edges are not cut off to us.  In addition, developed their mount. </li><li>  Each PM must be in the coverage area of ‚Äã‚Äãat least two base stations.  This is fault tolerance. </li></ul></li><li>  Interference.  Opponents of LoRa say it is easy to drown out.  Yes, she knows how to work below the noise level, but there is a limit to everything.  But let's be honest - you can drown anything.  Boil Watt that way for 500 and not only LoRa will fall, everyone who works in 868 will fall. The only question is how long your transmitter will work and how soon will the supervisors come to you. <br><p>  When I talk about interference, I mean not sabotage, but everyday situations that can cause problems. <br>  In fact, in the city we did not find sources of interference that would interfere with the operation of our network.  Except one. </p><br><p>  The only thing LoRa is afraid of is the proximity of GSM-900 cellular antennas.  This is the real problem.  Sotoviki cleanly put our BS, it works barely, the coverage spot drops to 300 meters.  This is not happening everywhere, but only where there is a GSM-900.  If we are standing next to the cell phones, but they use the ranges of 1800, 2100 or 2500, then we are fine. </p><br><p>  In addition, this influence is palpable only near.  Moving to the next roof removes all problems. </p></li></ol><br><p>  So, after three months, we were ready.  We had a vendor, understanding how to do the coating and what to avoid.  Now I needed a pilot to run in that knowledge.  About him - in the next article.  And there will be more about security, problems with RS-485, architecture, real conditions in housing and public utilities, battery life, proprietary technologies and other practical observations. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/359294/">https://habr.com/ru/post/359294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359282/index.html">Navigation Architecture Component. Practical look</a></li>
<li><a href="../359284/index.html">How I measured the evolution of admins in programmers</a></li>
<li><a href="../359286/index.html">Closed Q & A sessions with Giorgio Sardo</a></li>
<li><a href="../359290/index.html">Developing a game for several platforms: post-mortem Cat Quest</a></li>
<li><a href="../359292/index.html">Games and money: risks of legal uncertainty</a></li>
<li><a href="../359296/index.html">WebMoney got sanctioned in Ukraine</a></li>
<li><a href="../359298/index.html">‚ÄúCorrect‚Äù call to softphones from AMOCRM (call2click)</a></li>
<li><a href="../359300/index.html">OutOfMemoryError: catch if you can</a></li>
<li><a href="../359302/index.html">Allure-Framework. Work with code</a></li>
<li><a href="../359304/index.html">Detection and counting of visitors in real time on the single-board computer "Up-board"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
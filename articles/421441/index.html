<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Embox begins climbing Elbrus</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Those who follow our project may have noticed that the e2k folder has appeared in the architecture directory, containing the implementation of support...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Embox begins climbing Elbrus</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ic/4z/5o/ic4z5olelesc04boln85goculk4.png" align="right" width="320">  Those who follow our project may have noticed that the e2k folder has appeared in the architecture directory, containing the implementation of support for domestic <a href="http://elbrus.ru/elbrus_arch">Elbrus</a> processors.  <a href="https://habr.com/company/embox/blog/265059/">A series of</a> <a href="https://habr.com/company/embox/blog/329170/">articles</a> about porting <a href="https://github.com/embox/embox">Embox</a> to domestic platforms would be incomplete without a story about this architecture. <br><br>  I will make a couple of comments on the content of the article.  First, the process of mastering this architecture by us is at the initial stage, we managed to launch Embox on this platform, but we have not yet implemented many necessary parts, this will be discussed in future publications.  Second, this architecture is complex, and <br>  a detailed description requires much more text than the format allows <br>  one article.  Therefore, we propose to take this article as introductory, <br>  containing a minimum of technical information about the architecture itself. <br><br>  Let's get started <br><a name="habracut"></a><br><h3>  The object of research is the layout of the embedded system on Elbrus </h3><br>  Since we are engaged in Embox (and he, if someone does not know, is focused on embedded systems), we were primarily interested in the option that is positioned by the MCST, including for embedded systems.  Turning to the MCST, we found out that the company is interested in using its processors for embedded systems.  One of the latest solutions for this segment is <a href="http://www.ineum.ru/files/59db40/730cd8/502916/000000/katalog_produktsii_ineum_2017ls%2520.pdf">the E4C-COM board</a> .  In the process of communicating with the MCST, it became clear that for porting and mastering the architecture, you can use any of the available machines, and we were given a temporary calculator called <a href="http://www.mcst.ru/monokub">Monokub</a> .  In general, a monocube is not exactly what we are used to in embedded systems.  Typically, embedded systems use single-board computers, a chip-system on a chip, or even a microcontroller, while the monocube is a full-fledged computer, but since it has been tested in climatic and mechanics, it can still be considered an embedded system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Compiler, build, fill image </h3><br>  After receiving the system unit, of course, the question arose - how to fill the image.  The MCST uses its own BIOS (first level system loader).  The default OS is Elbrus (i.e. Debian with modifications).  We are also interested to run your own image.  Fortunately, the MCST loader can run images over the network.  For this, the <a href="https://ru.wikipedia.org/wiki/ATA_over_Ethernet">ATA over Ethernet</a> protocol is used. <br><br>  After we were helped to set up the booth and launch the external image over the network, we started developing our own image.  For this we needed a compiler.  The compiler was not found in the public domain, but since we signed the NDA, we were given Linux binaries.  The compiler turned out to be quite a gcc-compatible one, and we didn‚Äôt have to change anything, of course, with the exception of the compilation flags that we have in a separate configuration file.  That is very predictable, because Linux, albeit with modifications, is built by this compiler. <br><br><h3>  A couple of technical issues </h3><br>  Those who are engaged in such specific activities as porting the OS to any platform know that the first thing to do is to correctly place the program code in memory.  That is, write a linker script (lds) and implement the start code.  We pretty quickly figured out the linker script, but when implementing the start code, we encountered the first magic, which we didn‚Äôt understand.  The fact is that Elbrus has x86-compatibility mode and at 0x00FF0000 address lies the code to which I will simply give a <a href="">link</a> , since we borrowed it from the MCST example.  The linker script contains <br><br><pre><code class="hljs pgsql">.bootinfo : { _bootinfo_start = .; <span class="hljs-comment"><span class="hljs-comment">/* . = 0x1000000 - 0x10000; */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* 0x00FF0000 */</span></span> *(.x86_boot) . = _bootinfo_start + <span class="hljs-number"><span class="hljs-number">0x10000</span></span>; _bootinfo_end = .; } SECTION_REGION(bootinfo) .text : { _start = .; <span class="hljs-comment"><span class="hljs-comment">/* 0x01000000 */</span></span> *(.e2k_entry);</code> </pre> <br>  The start code itself is written not even in assembler, but simply in <a href="">C.</a>  It is placed in the section located at the address 0x01000000, which by the way quite corresponds to the starting address of conventional x86-machines - there is a <a href="https://wiki.osdev.org/Multiboot">multiboot</a> header or another header at this address. <br><br>  In order to make sure that the start code and addresses are correct, you need to achieve some kind of output.  If it turns out to output any character, then, most likely, there will be no problems with the output of strings.  Using this output, you can already use the familiar printf () for debugging.  In addition, most platforms provide the ability to output characters, making a simple entry in a specific register (since the bootloader has most likely configured the UART as necessary). <br><br>  Our computer uses the am85c30 serial port controller (we also quickly found how to display one character, which is enough for our printf to work on the z85c30. Immediately we encountered a strange problem - some of the characters <a href="https://en.wikipedia.org/wiki/Zilog_SCC">printedf</a> print out, as if duplicated, but it was sometimes mixed up, for example, when trying to output Hello, world! It was something like Hhelellloo ,, woworrlldd. Now it seems obvious that this is a multi-core process, but at first we‚Äôve been tinkering with the driver for a long time. + (18917) (  Four DSP cores are not counted) and the loader activates all processor cores. As a result, in order not to bother with multi-core (SMP), we send all cores except the first into an infinite loop. The zero kernel continues to work, while the other kernels loop. <br><br><pre> <code class="hljs cpp"> cpuid = __e2k_atomic32_add(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;last_cpuid); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cpuid &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/* XXX currently we support only single core */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/* copy of trap table */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)<span class="hljs-number"><span class="hljs-number">0</span></span>, &amp;_t_entry, <span class="hljs-number"><span class="hljs-number">0x1800</span></span>); kernel_start();</code> </pre> <br>  Calling kernel_start () is already passing control to our code. <br>  Atomic addition, we also borrowed, for us it looks like magic.  But as you know, it works - do not touch! <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> WMB_AFTER_ATOMIC </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">".word 0x00008001\n"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">".word 0x30000084\n"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __e2k_atomic32_add(__val, __addr) \ ({ \ int __rval; \ asm volatile (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n1:"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tldw,0 %[addr], %[rval], mas=0x7"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tadds %[rval], %[val], %[rval]"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\t{"</span></span></span><span class="hljs-meta">\ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tstw,2 %[addr], %[rval], mas=0x2"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\tibranch 1b ? %%MLOCK"</span></span></span><span class="hljs-meta"> \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"\n\t}"</span></span></span><span class="hljs-meta"> \ WMB_AFTER_ATOMIC \ : [rval] </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"=&amp;r"</span></span></span><span class="hljs-meta"> (__rval), [addr] </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"+m"</span></span></span><span class="hljs-meta"> (*(__addr)) \ : [val] </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ir"</span></span></span><span class="hljs-meta"> (__val) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"memory"</span></span></span><span class="hljs-meta">); \ __rval; \ })</span></span></code> </pre> <br>  Another magic that had to be borrowed is some code that is required for all cores.  Namely <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">e2k_wait_all</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ _Pragma (<span class="hljs-string"><span class="hljs-string">"no_asm_inline"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"wait \ttrap = %0, ma_c = %1, fl_c = %2, ld_c = %3, "</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"st_c = %4, all_e = %5, all_c = %6"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">), </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"i"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> (</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">) : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"memory"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; }</code> </pre> <br>  As a result, after writing the start code, we not only had messages that were output using printk, but also began loading modules, which in general is not very trivial for off-standard compilers.  So once again I note that this time the compatibility with gcc is very pleased. <br><br>  The next step is usually to launch the interrupt controller and timer, but thinking that we will have to implement not only the support of these devices, but also the architectural code of the interrupt handlers, we decided that we could start from the periphery.  Monocube has a PCIe bus, for programmers it looks like a regular PCI.  We were primarily interested in two devices: a display controller and a network controller. <br><br>  The monocube uses the graphics controller from the <a href="http://www.siliconmotion.com/EW_Pages/EmbeddedGraphics.html">sm750</a> series.  This graphics controller for embedded applications, has onboard support for 2d graphics.  The chip is soldered directly to the motherboard, as I understand it.  The source for the driver under Linux can be found <a href="https://github.com/torvalds/linux/tree/master/drivers/staging/sm750fb">here</a> . <br><br>  After finding the driver it seemed that our problems were over, it only remained to implement the controller for PCI.  more precisely read / write operations of the PCI configuration space to find out the parameters.  The implementation of these functions had to be borrowed again.  As a result, read records were reduced to macros like <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Do load with specified MAS */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _E2K_READ_MAS(addr, mas, type, size_letter, chan_letter) \ ({ \ register type res; \ asm volatile (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ld"</span></span></span><span class="hljs-meta"> #size_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">","</span></span></span><span class="hljs-meta"> #chan_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">" \t0x0, [%1] %2, %0"</span></span></span><span class="hljs-meta"> \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"=r"</span></span></span><span class="hljs-meta"> (res) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"r"</span></span></span><span class="hljs-meta"> ((__e2k_ptr_t) (addr)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"i"</span></span></span><span class="hljs-meta"> (mas)); \ res; \ }) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _E2K_WRITE_MAS(addr, val, mas, type, size_letter, chan_letter) \ ({ \ asm volatile (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"st"</span></span></span><span class="hljs-meta"> #size_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">","</span></span></span><span class="hljs-meta"> #chan_letter </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">" \t0x0, [%0] %2, %1"</span></span></span><span class="hljs-meta"> \ : \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"r"</span></span></span><span class="hljs-meta"> ((__e2k_ptr_t) (addr)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"r"</span></span></span><span class="hljs-meta"> ((type) (val)), \ </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"i"</span></span></span><span class="hljs-meta"> (mas) \ : </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"memory"</span></span></span><span class="hljs-meta">); \ })</span></span></code> </pre><br>  There is some understanding of what is happening.  Elbrus has several alternative address spaces, as, for example, in the <a href="https://www.gaisler.com/doc/sparcv8.pdf">SPARC architecture</a> .  Identification is done using the address space identifier.  That is, the same ld command gets to different internal addresses, and also generates read operations of different lengths (8, 16, 32, 64 bits).  If in SPARC it is a separate lda / sta command, then in Elbrus due to parameters, this is the ld command.  SPARC architectures borrowed <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B5_%25D0%25BE%25D0%25BA%25D0%25BD%25D0%25BE">register windows</a> .  I will postpone a more detailed story for subsequent articles. <br><br>  In the end, everything worked out for us with PCI.  We were able to obtain all the necessary data, transferred the graphics driver to us, but then we ran into the following problem.  To draw a picture in video memory, you had to write it twice.  Everything pointed to the cache.  In order to solve this problem, it was necessary to deal with the MMU, and this, as they say, is not solved with the kit, as, in principle, many other problems that we encountered and will encounter more than once during the development of this architecture. <br><br>  We have advanced in other directions: interruptions and system calls, but we will also tell about this in the following articles of this subseries.  At the end of this article, I just bring the output to the console (via serial port). <br><img src="https://habrastorage.org/webt/uc/un/u2/ucunu20_gi-newvjygt_hfiygpe.png"><br><br><h3>  findings </h3><br>  As I said in the preface, I want to focus first of all not on technical details, but on general sensations.  So, the feelings are contradictory, although of course more positive.  On the one hand, the processor exists and is very interesting in terms of architectural features.  Based on this processor, computing systems are produced, there is software of sufficiently high quality.  As I said, there were no complaints about the compiler (until a certain point, which I will describe later), there is a full-fledged Linux (Elbrus OS).  I personally saw how, in the MCST itself, the developer worked right on the desktop with Elbrus architecture. <br><br>  But on the other hand, I do not understand why it is with such persistence that they are trying to make a banal replacement for this processor with Intel's x86.  After all, nowhere in the world do they use processors based on <a href="https://ru.wikipedia.org/wiki/VLIW">VLIW</a> architecture as universal personal computers.  VLIW, by virtue of its architectural features, is a cool number processor, DSPs are made on it, itanium servers are made, graphics cards are made.  No excavator course you can dig a hole for planting trees, but is it worth it. <br><br>  But the main problem impeding the development of architecture, in my opinion, is the closeness of the entire ecosystem.  Yes, in order to get a description of the command system, you just need to sign the NDA, but this is not enough.  The architecture is unfamiliar and very complex.  Yes, I have always believed that some basic software should be developed directly from the processor manufacturer, or in close cooperation with it.  According to this principle, the PC on Elbrus has a software package with <a href="http://mcst.ru/os_elbrus">the Elbrus OS</a> .  But it‚Äôs still too naive to assume that one company, even a large one, can provide quality support to all components: a processor, a compiler, development and debugging tools, system software (various operating systems), application software, ....  even Intel can‚Äôt do that.  The world has long been moving towards the so-called collaboration or joint development. <br><br>  I will give an example of a problem with the compiler that we stumbled upon.  The driver of the serial port at some point stopped displaying characters, and, at first glance, nothing has changed.  It turned out that we removed the unused debugging function, which we inserted in order to understand through the disassembler how to pass arguments to the function in an assembler.  That is, if the function is present, everything is fine, if not, then the output disappears.  First, we sinned for alignment, but it turned out that the function can be transferred to the end of the C-Schnick, so all the characters from the driver turned out to be in the same places as before, but the problem was reproduced.  While this problem has not been solved, we continue to investigate in order to show the compiler developers from the MCST or to understand where we made a mistake. <br><br>  The given problem, in my opinion, could have been avoided if there were more third-party users.  At a minimum, the problem would have come to light earlier, or one could simply google what we did wrong. <br><br>  The problem of closeness is also recognized in the MCST, since the process of discovering unclassified things has nonetheless begun.  For example, I have seen Alt-Linux work on Elbrus PC on several conferences.  Here are pictures of the display from one of the conferences this year (sorry, which is hard to see, it was dark).  We also connected with the development.  We hope that we will be useful to the MCST, since, as it turns out, some of the highlights of the Elbrus architecture cannot be supported in Linux (or the costs are very large), for example, tagged memory. <br><br><img src="https://habrastorage.org/webt/yy/e9/jr/yye9jr5eg1nw99rppron_47drlw.jpeg" align="right" width="50%"><br><br><img src="https://habrastorage.org/webt/ki/n1/vk/kin1vkulag_gynsmlebiv146das.jpeg" align="left" width="50%">  Another important point when we discussed the problem of closeness with the developers of the MCST, they objected that, for example, the source code of the Linux kernel was open for a long time, but only we and the Dolomant developers asked questions and how they used them. <br><br>  In addition, according to my information, the company MCTS are going to organize a stand <br>  accessible remotely.  On which you can build and run software on a PC with the architecture of Elbrus.  If there is a similar interest and you want to use the stand, then you should contact me, for example: describe how you plan to use it, how long it takes, and so on, because to share with software changes, you need to organize a schedule.  I will give the data to the MCST or link those who wish with the organizers. <br><br><hr><br>  Useful links: <br><br>  The mailing address for users is user [at] mcst.ru <br>  <a href="http://elbrus.ru/elbrus_arch">Brief description of the architecture of Elbrus</a> <br>  <a href="https://github.com/embox/embox">Embox Sources</a> <br><br>  PS To everyone, we will show what happened at the IT-festival <a href="https://techtrain.ru/">TechTrain on</a> September 1-2. </div><p>Source: <a href="https://habr.com/ru/post/421441/">https://habr.com/ru/post/421441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421429/index.html">Dynamic Pricing Based on LSTM - ANN in the Home Retail</a></li>
<li><a href="../421431/index.html">Time Management, or Effective Chaos Management</a></li>
<li><a href="../421433/index.html">There are exactly a day left before the server starts</a></li>
<li><a href="../421435/index.html">‚ÄúWhy are we doing all this?‚Äù - the creator of Prisma and the former leader of VK projects about his new secret project</a></li>
<li><a href="../421439/index.html">The Japanese presented a prototype processor for an ex-flop supercomputer: how does a chip work?</a></li>
<li><a href="../421443/index.html">New to our market: Snom D385 and D785 IP phones overview</a></li>
<li><a href="../421445/index.html">Writing a simple Lisp translator - II</a></li>
<li><a href="../421447/index.html">Redmadrobot iOS Meetup</a></li>
<li><a href="../421451/index.html">How to protect your child from garbage on YouTube and make a custom player with a white list of channels</a></li>
<li><a href="../421453/index.html">Situation: Sonos entered the stock exchange and may "leave the room"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hold on to the wheel, hold on ... Our project to control the condition of drivers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Every motorist knows that drivers tend to tire. It happens that your eyes stick together, even when you go home from work, and truckers are generally ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hold on to the wheel, hold on ... Our project to control the condition of drivers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/aq/uy/mg/aquymgce4gwgsqitn07m6el3fka.jpeg"><br><br>  Every motorist knows that drivers tend to tire.  It happens that your eyes stick together, even when you go home from work, and truckers are generally one of the main professional problems: <a href="https://versia.ru/s-zasypaniem-za-rulyom-svyazano-okolo-20-procentov-vsex-dtp">thousands of accidents</a> happen every year due to the fact that people fall asleep at the wheel.  The fact is that long-distance drivers need to constantly maintain a balance between rest and safe driving on the one hand, and fatigue with higher earnings on the other.  The temptation to sleep less is great, but it is faster to take the goods and get a new order.  Not to mention the fact that drivers have their own personal lives and they do not always go on a flight slept. <br><br>  To make the roads safer, we launched our project to monitor the condition of drivers: according to customer requirements, we create software and hardware solutions that can monitor the driver's well-being on the road and prevent the stage of falling asleep so that he does not ‚Äúwake up‚Äù in the next world. <br><a name="habracut"></a><br><h2>  Loving Eye </h2><br>  The basic idea is to monitor driver fatigue and dangerous reactions with a camera.  The device first collects statistics on how a particular driver behaves while driving.  And, if on the basis of these statistics, the system decides that the driver shows signs of fatigue or is about to see dreams, she signals this to him.  If the driver often began to nod or react to events like a sleepy fly, then the system also reports this to the dispatcher. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We use video analytics to track how focused the driver is and whether he is looking at the road.  The camera constantly shoots face and hands, and the system keeps track of a number of key points.  We expect the driver to have his eyes open all the time, his eyes directed towards the windshield or side mirrors.  If the eyes are closed, or the head leans forward and the chin falls on the chest, or the face turns away from the windshield for a long time, the system gives a signal. <br><br>  Of course, this tracking and signaling do not work all the time, but only when the car is moving, it uses a GPS sensor.  We also provided for the possibility of forcing the system to be turned on and off, because situations can be different.  But at the same time we compare the duration of the movement of the machine and the time when the system is turned off.  If necessary, the device can inform the dispatcher that the driver has been driving for a long time with the ‚Äúcontrol‚Äù turned off. <br><br><h2>  Implementation </h2><br>  The project consists of two parts: hardware and software. <br><br>  How does the system determine that the driver will fall asleep now?  With the help of the OpenCV library, which is based on machine learning.  OpenCV allows you to define key points in a video stream: chin, hands, eyes (including their size and breadth of disclosure).  And on the basis of these parameters, the system determines whether the driver is tired or not. <br><br>  The hardware consists of a Waveshare RPi Camera (F) and a Raspberry Pi camera, assembled in a single package.  It is more difficult to create hardware than it may seem at first glance: you need not to connect and solder components, but think over their combination so that the device works for a long time reliably and without failures.  In fact, this is a separate integration task.  And integration risks are usually the highest.  Indeed, it is one thing when a software package runs on your laptop, under your OS and with your limitations, and it is quite another thing when it is transferred to a Raspberry Pi, under a different OS, where the processor is much weaker and there is less memory. <br><br>  Of course, if the product is put into a series, then it will be implemented no longer on the Raspberry Pi.  The piece of iron is weak, its power is not enough to process the video stream in full resolution and recognize the face, so with such a hardware stuffing you have to go to tricks. <br><br>  In addition, we implemented the night mode so that the system could wake the driver even in the dark, when people most often fall asleep.  That is, I had to teach a computer to process video from an infrared camera.  Here we were not pioneers, a similar problem is being solved in the systems of the smart home.  To determine the fatigue of the driver does not need to know the details of his appearance: hair color, eyes, skin tone.  We only need to clearly determine the position of the hands and key points on the face.  Strangely enough, but working with the eyes in the infrared mode turned out to be even easier than in the ordinary.  If you have ever seen commercials shot with automatic cameras with animals in the wild, then you know that with a good angle, their eyes shine like laser. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ZBmgIOeycc8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  This effect turned out to be very useful to us: it is easier to determine the fact of closed eyes.  Of course, it took an additional adjustment of all algorithms, because the spectrum of the image is completely different, but, in general, the eyes are recognized more confidently. <br><br>  But in the infrared mode, the system is worse at recognizing situations when the driver is talking on the phone, pressing his ear to his shoulder.  This is also a dangerous situation, the traffic rules directly prohibit talking on the phone at the wheel. <br><br>  Of course, like any machine learning model, ours also does not work with one hundred percent accuracy.  But you need to understand well what exactly recognition errors depend on.  For example, we have not tested our system on drivers with a non-European appearance.  Perhaps in this case, the proportion of accurate eye recognition and fatigue will decrease.  However, during internal testing, the system worked exactly in 8-9 cases out of 10. <br><br>  * * * <br><br>  Today there are a lot of good algorithms in the public domain, and we took ready-made ones, which made it possible not only to solve the problem, but also save a lot of time.  Now you can quickly find a model suitable for solving some unique problem, and quickly modify it.  Of course, this requires skills and experience in solving computer vision problems and quick adaptation.  Then it takes just a day or two to get a prototype on a laptop.  And further work depends on the task, on available capacity, storage and other factors.  For example, you can quickly modify our system so that it performs a different role: for example, as a security device, which ensures that only specific people enter the room at a certain time of day.  That is, you can quickly create a solution for a variety of tasks related to computer vision. </div><p>Source: <a href="https://habr.com/ru/post/458490/">https://habr.com/ru/post/458490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458474/index.html">The best reports from HighLoad ++ 2018</a></li>
<li><a href="../458478/index.html">10 mistakes novice programmers</a></li>
<li><a href="../458486/index.html">Secrets of working with a cloth in the game Alan Wake</a></li>
<li><a href="../458488/index.html">Data Science Digest (July 2019)</a></li>
<li><a href="../45849/index.html">New MD6 hash function</a></li>
<li><a href="../4585/index.html">Executioner's Ax Soup</a></li>
<li><a href="../45850/index.html">PHP business card</a></li>
<li><a href="../458500/index.html">Testing saga: library redux-saga-test-plan</a></li>
<li><a href="../458504/index.html">13 tricks to work with npm, which help save time</a></li>
<li><a href="../458508/index.html">An inside look: graduate school at EPFL. Part 4.2: the financial side</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
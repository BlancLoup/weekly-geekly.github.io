<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is common between egg cleaning and DevOps?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a translation of the article by Patrick Lee Scott posted on hackernoon.com. The author suggests to get acquainted with several important princ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is common between egg cleaning and DevOps?</h1><div class="post__text post__text-html js-mediator-article">  This is a translation of the article by Patrick Lee Scott posted on hackernoon.com.  The author suggests to get acquainted with several important principles that will help you to get pumped into DevOps. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/332/c5f/d4f/332c5fd4f164388cbf68b68611547b28.jpg" alt="image"><br><br>  A couple of days ago, I tried to clean the egg in a stupid way, and my girlfriend Angeli asked me why I was doing this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      She took another hard-boiled egg and hit it on the cutting board, then pressed on it and rolled it on the table.  It took only 3 seconds to clean.  And I stood and took off the shell piece by piece. <br><br>  What I want to say by this: <b>we exaggerate the value of the effort.</b> <br><a name="habracut"></a><br>  The best solutions are simple and effective.  Is it difficult to clean a rusty bolt?  Maybe yes.  But only if you do not know that this can be done with the help of Coca-Cola.  Still hard?  Not.  You just need to put the bolt in a glass and wait. <br><br>  Without knowing the simple techniques, you cannot use them.  Instead of realizing, you are experimenting; instead of replicating, do research. <br><br>  If in programming you use an approach over and over again, because it allows you to simplify the problem to be solved, this approach becomes a template or the so-called best practice. <br><br>  Despite complex and frightening names like Command Query Responsibility Segregation (CQRS) or Event Sourcing (ES), these practices help solve problems.  Especially those that arise when building distributed systems. <br><br>  If you look at the development as a whole, we will see that there are more universal principles, such as ‚ÄúKeep it Simple, Stupid‚Äù (KISS) and ‚ÄúDon't Repeat Yourself‚Äù (DRY).  I would like to talk about similar patterns and principles applied to DevOps. <br><br>  DevOps are often presented as the Promised Land on which birds sing and the sun shines.  But without using the right methods, DevOps will turn into hell, and you will instil all your fingers with a shell (like me). <br><br>  Creating DevOps systems, I found several solutions for myself in addition to universal principles like KISS and DRY.  While they can not be called patterns, but they will help you quickly clean the egg.  These solutions (in no particular order): <br><br><ul><li>  Do not do what others have done before you. </li><li>  Let developers be as productive as possible. </li><li>  Production is a myth. </li><li>  Transfer everything to the cluster and save it all. </li><li>  VPN is too complicated, there are easier solutions. </li><li>  Systemize, automate and conquer! </li></ul><br><h3>  Lesson 1. Don't do what others have done to you. </h3><br>  If you have the opportunity to purchase a finished product or in the public domain there is a necessary and convenient tool, use this. <br><br>  Do not reinvent the wheel - buy it. <br><br>  Did you know that you can use the same mail server that is used in Craigslist?  And what is it for free?  Need a mail server - do not create a new one, work with an existing one. <br><br>  I like to look for tools in awesome-self-hosted lists or use Helm Hub for this. <br><br>  <i>Despite the fact that Helm is a fairly new tool for finding software, this site has already been created: <a href="https://v3.helm.sh/">https://v3.helm.sh/</a></i> <br><br>  With Helm, you can easily search for ready-made bikes. <br><br>  Let's go back to the past when I was just starting to program.  In grade 9, I learned my first "real" language - QBasic.  Before that, I had been building HTML and CSS websites for a couple of years.  Then the Internet was new, and, although people knew how to create packages, they did not share them, as we do now.  I usually used floppy disks for storage - it would be great to find them along with an arkanoid type game that I wrote in Java Swing in grade 11 ... <br><br>  All that I used then was the standard libraries, baby!  At least in my thirteen, I only knew about them.  Although I am sure that some java-pros (hello, Vlad and Nick!) Were already already cool.  ;) <br><br>  Now everything is wrong.  Today you can find entire UI libraries.  You can find a library to elegantly and easily deal with dates with one command. <br><br>  It would be great if there was a tool to use and install fully functioning subsystems, right?  Need a database?  <i>install database</i> <br><br>  Good news: there is such a tool!  With Helm, you can also install fully functioning subsystems packed and ready for use. <br><br>  The principle is the same as NPM and Gradle, but the packages we manage in Helm are called charts.  Charts mark up containers so that they run in Kubernetes in different ways. <br><br>  It turns out a turnkey solution, buying a bike.  Charts are the steering wheel, and containers with descriptions that run inside Kubernetes are wheels. <br><br>  What's cool about the charts is the ability to pack services and run them in any Kubernetes cluster and even share them with other people if you want. <br><br>  This means that you can describe the whole environment with code: <br><br><pre><code class="javascript hljs">- name: backup repository: http:<span class="hljs-comment"><span class="hljs-comment">//jenkins-x-chartmuseum:8080 version: 0.0.2 - name: monitor repository: http://jenkins-x-chartmuseum:8080 version: 0.0.3 - name: marketing-site repository: http://jenkins-x-chartmuseum:8080 version: 1.1.10 - name: denormalizer-service repository: http://jenkins-x-chartmuseum:8080 version: 1.0.0 - name: mongo repository: https://kubernetes-charts.storage.googleapis.com/ version: 1.0.0</span></span></code> </pre> <br>  Need to upgrade your marketing site to 1.2.0?  Just make a change and commit. <br><br><h3>  Lesson 2. Allow developers to be as productive as possible. </h3><br>  Once I sat at the table, looked into my code and tried to track down the bug.  Users have been complaining about him for several weeks already, and finally I had some free time to play around. <br><br>  Tada-ah!  Found!  Fixed! <br><br>  I sat behind the partition in my workplace in a sunlit room and shouted to the others: ‚ÄúI fixed the bug!‚Äù <br><br>  Next Tuesday, when users see the release, they will definitely appreciate my efforts!  But for this we will have to pack up and try to budge the release ... Maybe we will succeed if nothing happens ... <br><br>  Well, okay, <i>if the</i> release is still next Tuesday, users will definitely appreciate it! <br><br>  That's how I was deploying at my first post-college job, being a junior programmer. <br><br>  Since then, much has changed. <br><br>  Now I use trunk-based development and deploy modules many times a day.  When I send a Pull Request, the bot will post a corresponding comment with a review code with the collected environment after the tests and builds have been completed. <br><br>  Today you do not need to shout through the partition in the office. <br><br>  The more freedom you give to programmers ‚Äî the freedom to control the parts of the infrastructure they need ‚Äî the easier it is for you to work as a DevOps engineer. <br><br>  In the first lesson, you and I saw that in order to update production, it was enough to change one number and commit.  In the ideal world in which we pack applications into charts, each programmer in a team has the opportunity to influence how the tool works at the production stage.  Kubernetes understands charts as container descriptions, which is why they describe resource requirements. <br><br>  The logic is approximately as follows: I cannot guess how much memory or what CPU settings will be required for a new service (and I think that I am not the only one).  Therefore, I also deploy monitoring and alerts with the rules, according to which I and my team will be informed to Slack that these settings need to be tweaked.  That is, the system will report the necessary settings when we deploy it.  I used to sit for hours, sending requests through Prometheus and adjusting the settings, just like I used to otkovirival shell.  And now I learned to do everything wisely. <br><br>  I already hear you say: ‚ÄúIt sounds too difficult!‚Äù No.  Just set the chart. <br><br>  If you can automate or simplify something, go ahead.  For example, what if you could assign a DNS path by simply deploying a service with the label ‚Äúexpose: true‚Äù?  Here are the operators.  This is a more advanced Kubernetes tool, and it‚Äôs worth getting to know it.  But let's not get too into details. <br><br><h3>  Lesson 3. Production is a myth </h3><br>  This was a real revelation to me.  I had to look at things from a different angle, so listen carefully. <br><br>  For more than ten years, I have thought that there are only a few types of environments in the world.  In the simplest scenario, there is a staging and production environment.  First I turned in staging, then I started, I moved to the next stage, I unrolled, I started, and so on.  As soon as everything got stuck together - the son was integrated - you can go into production. <br><br>  I followed this scheme year after year and never doubted it.  It always has been. <br><br>  And this scheme is another unproductive way to get rid of the shell. <br><br>  In essence, a chart is a dependency graph.  It can be used to represent the environment, and then the process of deployment in production is reduced to the deployment of a single chart. <br><br>  If each team, project, or group associated with a common context has its own chart, there are several environments that allow you to group and update all services in a single transaction. <br><br>  Do not take production as a huge all-encompassing environment, in fact it is a lot of small productions. <br><br>  Major changes scare their scale.  And if you have several small development environments, you can manage to isolate changes and make the system more flexible. <br><br>  In addition, if everything is arranged in the form of charts, the variables will be set out and can be changed from the outside, uniformly.  For example, to connect a less powerful kafka cluster to preproduction, where it is not required, you just need to change the configuration. <br><br><h3>  Lesson 4. Transfer everything to a cluster and save it all. </h3><br>  So, with sorted out.  And what to do with the databases?  With Kafka?  With security issues? <br><br>  If you read carefully, remember: I wrote that databases can be included in a chart package. <br><br>  In Kubernetes, there is a separate API for launching databases and other stateful applications in a convenient form - <b><i>StatefulSets.</i></b> <br><br>  The very essence of the existence of Kubernetes is to increase the reliability of the launch of containers.  With it, and using the Velero tool (installed via the Helm Chart), you can create a backup of the entire Kubernetes cluster, along with attached disks, such as those created by StatefulSet, and restore all with a single command.  In addition, it is easy to set up automatic backup on a schedule. <br><br>  Backups, single-team recovery and the Kubernetes manager will help you deploy a completely new cluster and restore its backup using just two commands.  A maximum of three if you want to create a new backup first. <br><br>  Instead of thinking servers, you can operate with whole clusters. <br><br>  Is the production annoying?  Take it out of sight - at a distance of backup, restore and change DNS. <br><br><h3>  Lesson 5: VPN is too complicated, there are easier solutions </h3><br>  <i>Have you ever enjoyed a VPN with pleasure?</i> <br><br>  No seriously.  <i>Is it even possible?</i> <br><br>  Google had such an attempt.  But a couple of years ago, the company announced that it would not use a VPN.  I think they also did not get pleasure. <br><br>  Google switched to trustless networks.  They do not have a master key, which is suitable for any network, but at the entrance to each service lies the key in the form of an SSO login screen.  Want to go to the monitoring service?  Log in using company login and password. <br><br>  Only a small shift is needed: instead of using a VPN for authentication, use a proxy. <br><br>  VPN also places a link to Kubernetes management on a private network, but SSO does not.  But they have their own authorization mechanism.  In the case of Google Cloud and AWS, this is Identity and Access Management (IAM) and the ability to whitelist IP addresses. <br><br>  If it is possible to work with a less cumbersome architecture without much loss, why not?  Be like Google: move from VPN to non-trusted systems. <br><br><h3>  Lesson 6. Systematize, automate and conquer </h3><br>  Ah, it seems to you that systematizing is a long time?  Nonsense!  In the future, it will save you hours, days, and even weeks.  For the work! <br><br>  Systematization is the only realistic way to recreate the infrastructure more than once. <br><br>  If each setting item can be improved by changing and committing something in git, in fact, your entire technological organization is declarative.  Any developer with access to git can easily maintain in working condition any system. <br><br>  To do this, use a few small repositories.  Monorepos make people cut corners and depend on a structure with artificial importance.  Instead, it‚Äôs better to use a lot of small repositories that can be linked later. <br><br>  Me and my friend Matt are creating a tool called <a href="https://github.com/mateodelnorte/meta"><i>meta</i></a> , which will help to do this at the development stage.  Helm does it at the production stage: for him everything is a dependency graph! <br><br><h3>  Conclusion </h3><br>  Do not pick off the egg shell in pieces.  Beat and roll. </div><p>Source: <a href="https://habr.com/ru/post/457120/">https://habr.com/ru/post/457120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457110/index.html">Unit testing of C ++ and Mock Injection patterns using Traits</a></li>
<li><a href="../457112/index.html">Summary HolyJS 2019 Piter</a></li>
<li><a href="../457114/index.html">Choosing a video surveillance system: cloud vs local with the Internet</a></li>
<li><a href="../457118/index.html">Habr Weekly # 6 / Runet is ready to stand apart, Adobe is looking for photoshop traces, Vim vulnerabilities, geotags in the Cart and something else</a></li>
<li><a href="../45712/index.html">About science, lemming and Dr. Goebbels</a></li>
<li><a href="../457128/index.html">Situation: Do AdTech companies violate the GDPR?</a></li>
<li><a href="../457132/index.html">Import substitution in practice. Part 3.1. "QP OS". The first of its kind review of the operating system</a></li>
<li><a href="../457134/index.html">The brain accelerates the perception, knowing what will happen next</a></li>
<li><a href="../457138/index.html">Friday post: questions that girls love</a></li>
<li><a href="../457140/index.html">How I accidentally discovered a possible infinite account replenishment of my American cellular operator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Private experience of installing and configuring Asterisk from scratch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="First, the disclaimer 
 Asterisk configuration is dedicated to sites, forums and entire portals like voip-info.org. But there are always people for wh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Private experience of installing and configuring Asterisk from scratch</h1><div class="post__text post__text-html js-mediator-article"><h5>  First, the disclaimer </h5><br>  Asterisk configuration is dedicated to sites, forums and entire portals like voip-info.org.  But there are always people for whom this topic is a dense forest, and it is necessary to launch the product ‚Äúyesterday‚Äù.  A month and a half ago, I knew about Asterisk only what it is.  This work is intended only to make life easier for those who find themselves in the same situation after me.  It can be errors of any degree of "teapot".  If you are a guru of Asterisk settings - indicate the error, I will correct it, the descendants will be grateful to you. <br><a name="habracut"></a><br><h5>  First there was the word </h5><br>  At some point in time, through my efforts, the company's infrastructure development strategy was literally turned on its head.  The goals and objectives were outlined and it became clear that we needed a dynamic, mobile server infrastructure in order to save money, so that in case of any problems, we could quickly recover and / or rise elsewhere, so that it would be easier to care for iron, etc. P. <br><br><h5>  Then there was the matter </h5><br>  In general, on paper everything was beautiful and easy.  The case arose only for deployment. <br>  First, two simple servers were purchased.  Core i7-930, 12GB of memory and 12TB on SATA-drives.  These servers were installed free Xen Server and deployed virtual servers and workstations for remote employees. <br>  QNAP NAS is used as external storage, which was inherited. <br>  Terabyte local storage is only needed to store a media bank, which is quite large.  The servers themselves collectively weigh less than 3 terabytes. <br>  One of the servers was Asterisk to replace the old Panasonic TDE-200.  Because  companies need a cheap connection, direct numbers in different countries, and free negotiations between employees, then there is no alternative to it for 12 shekels. <br><habracut><br><br><h5>  Day One: Make World </h5><br>  It was decided to deploy Asterisk on the CentOS operating system native to Citrix Xen.  The same RedHat, only from the side.  I‚Äôll make a reservation right away: I‚Äôve been admin Windows all my life, and * nix have only been ‚Äúplayed‚Äù in virtual machines, not counting a couple of web servers on hardware.  Therefore, this Asterisk deployment in Citrix Xen gives some naivety from the point of view of experienced people. <br>  In general, I went on a proven path: a detailed how-to instruction for teapots from official manuals opens on the laptop and is executed on the server literally and without initiative.  It will be possible to play heroes-adjusters later, when everything is set up and work in the ‚Äúdefault‚Äù state and the first full backup will be made. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Day two: yum install asterisk -y </h5><br>  Not that I was very surprised, but, nevertheless, I went to a familiar signalman for advice when I discovered that there were already three almost independent forks living asterisks: 1.4, 1.6, and 1.8.  Each of them has its own cockroaches and lotions.  Because  I was not deceived by the hope of overcoming an asterisk with a swoop, then I decided to install version 1.4, like a friend, in order to have the maximum possible compatibility of configs.  Although, subsequently, I had to rise to 1.6 due to the lack of TCP support in 1.4, when such a need arose. <br>  For this, a digium repository was attached to CentOS and Asterisk was installed from it. <br>  The installation was quite expected, without a hitch.  Basically, a sensible step-by-step <a href="http://www.voip-info.org/wiki/view/CentOS%2B5%2Band%2BAsterisk%2B1.4.x%2Binstallation">roadmap with voip-info was used</a> . <br>  Immediately iptables were corrected to allow traffic over SIP ports. <br>  Not immediately, but I recommend to future generations to install and configure immediately a package named <a href="http://www.voip-info.org/wiki/view/Fail2Ban%2B(with%2Biptables)%2BAnd%2BAsterisk">fail2ban</a> .  It is not an extra program on the server exposed to the Internet.  One day after installation, all of Taiwan in the drop left, judging by the iptables. <br><br><h5>  Day Three: TZ for PBX functionality </h5><br>  Getting the most interesting - planning.  Before any adjustment process, it is necessary to record and structure all the wishes of the customer and be sure to sign an agreement to avoid further conflicts like ‚Äúno, I said something completely different‚Äù.  In my case, the customer is the company in which I work, but it does not change anything.  We write a technical task for a functional, discuss it with responsible people, dispel disagreements and sign the final version. <br>  TK on the configuration turned out this: <br><ul><li>  Phone numbering four-digit. </li><li>  The first digit of the number is a sign of the country where the office is located. </li><li>  The numbering in each department begins with the first digit of the next hundred. </li><li>  Each department is a separate call group. </li><li>  If the called subscriber is not available for a call in any way, then the call is transferred to the whole group. </li><li>  Incoming call service logic: <br>  1. Pick up the phone. <br>  2. Play a greeting. <br>  3. Play ads about current promotions. <br>  4. Play the call options of different departments or offer to dial the number of the subscriber. <br>  5. Starting from point 2, wait for the input of any commands. <br>  6. After the end of step 4, wait for the commands to be entered for another 10 seconds. <br>  7. In the absence of commands, play the call options again. <br>  8. If the subscriber is still tupit, then transfer the call to the secretary. </li><li>  Users who need such a service, fasten voice mail.  In this case, if the user is in any way unavailable for a call, transfer the call to voice mail. </li><li>  By default, calls are allowed only to Russia and Italy - the countries where our company mainly operates.  The remaining directions are opened as needed by the narrowest masks, since  we all remember scary stories about ‚ÄúCuban telephone operators‚Äù and one day we don‚Äôt want our PBX to start calling all the 50 channels in Sierra Leone at $ 14 per minute for each channel. </li></ul><br><br>  At first glance, the task is simple, but in practice it took quite a lot of blood to coordinate it.  Especially, for the approval of the ban of all directions, except for explicitly permitted.  This client had to agree only in the face of the inevitable, otherwise, necessity of configuring a VPN on each device connecting to the PBX.  I just try to stick to the most simple and understandable configurations, and it always seems to the client that adding some functionality to the system is ‚Äújust a few buttons to push.‚Äù <br><br><h5>  Day four: nano sip.conf </h5><br>  The most interesting begins: the configuration process. <br>  In order not to delay the already long article, burdening it with a detailed description of the torments of the initial configuration and the subsequent tuning, I will simply show my current configs with comments what's what. <br><br><pre><code class="dos hljs">[general] context=default ;   allowguest=no ; ,     allowoverlap=no ;           .  ‚Äì  . alwaysauthreject=yes ;  ,         ‚Äì  .    . useragent=Orgue de Barbaris ; ‚Äì     .      ,         , ..     . defaultexpiry=<span class="hljs-number"><span class="hljs-number">360</span></span> ;   . callevents=yes ;  ,       music on hold limitonpeer=yes ;      . tcpenable=yes ; TCP   SIP. rtptimeout=<span class="hljs-number"><span class="hljs-number">60</span></span> ;     ,      . language=ru ; .    . bindport=<span class="hljs-number"><span class="hljs-number">5060</span></span> ;  .        ,   . bindaddr=<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> ;   , ..         . srvlookup=yes tos_sip=cs3 ; &lt;a href="http://www.voip-info.org/wiki/view/Asterisk+sip+tos"&gt;http://www.voip-info.org/wiki/view/Asterisk+sip+tos&lt;/a&gt; tos_audio=ef disallow=all ;    allow=alaw ;,   ,   .    . allow=g729 allow=g723 allow=ulaw dtmfmode=rfc2833 ; Asterisk-   info,       rfc. rtpholdtimeout=<span class="hljs-number"><span class="hljs-number">300</span></span> rtpkeepalive=<span class="hljs-number"><span class="hljs-number">5</span></span> canreinvite=no ;     .     .               g.<span class="hljs-number"><span class="hljs-number">729</span></span>,        . ,      alaw&lt;-&gt;g.<span class="hljs-number"><span class="hljs-number">729</span></span>a         .    Core i7-<span class="hljs-number"><span class="hljs-number">930</span></span>     . externip=xxx.xxx.xxx.xxx ;   IP.   -,   Asterisk   NAT,     .  . allowexternaldomains=yes ; &lt;a href="http://www.voip-info.org/wiki/view/Asterisk+config+sip.conf"&gt;&lt;/a&gt;  , -  . domain=mydomain.com,default fromdomain=mydomain.com ;      .    SIP-       Asterisk        .         . ,       ,    .          . register =&gt; tcp://@multifon.ru::@sbc.megafon.ru/~<span class="hljs-number"><span class="hljs-number">60</span></span> ;   SIP-   -    [multifon] ;   ,      <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=peer secret= username= host=sbc.megafon.ru port=<span class="hljs-number"><span class="hljs-number">5060</span></span> insecure=port,invite <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>-limit=<span class="hljs-number"><span class="hljs-number">1</span></span> context=incoming canreinvite=no qualify=yes transport=tcp dtmfmode=inband ;  ‚Äì  .     , ,        ,   .   : [defaults](!) canreinvite=no ;     disallow=all allow=alaw allow=g729 allow=g723 [peer](!,defaults) <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=peer host=dynamic ;    qualify=yes ;     nat=yes ;,      NAT <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>-limit=<span class="hljs-number"><span class="hljs-number">1</span></span> ; -   busylevel=<span class="hljs-number"><span class="hljs-number">1</span></span> ;,     ‚Äú‚Äù rtpkeepalive=<span class="hljs-number"><span class="hljs-number">5</span></span> ;     . [ext1000](peer) secret=secretsecretsecret [ext1001](peer) secret=secretsecretsecret [ext1002](peer) secret=secretsecretsecret ;   -   ,     : [ext1101](peer) secret=secretsecretsecret transport=tcp ;   SIP  TCP.</code> </pre> <br><br><h5>  Day Five: nano extensions.conf </h5><br>  Not less interesting file in which all logic of automatic telephone exchange registers.  These articles turned out to be very useful for understanding the dial-plan logic: <a href="http://inhibitz.ucoz.ru/publ/9-1-0-21">http://inhibitz.ucoz.ru/publ/9-1-0-21</a> , <a href="http://asterisk-pbx.ru/wiki/doku.php/asterisk_dialplan">http://asterisk-pbx.ru/wiki/doku.php / asterisk_dialplan</a> <br>  So, let's go: <br><br><pre> <code class="dos hljs">[general] static=yes ;    CLI writeprotect=yes ;    CLI [globals] ;  ,     . [macro-dial-ext] ; ‚Äú    <span class="hljs-number"><span class="hljs-number">4</span></span>- ‚Äù exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() ;  exten =&gt; s,<span class="hljs-number"><span class="hljs-number">2</span></span>,Dial(SIP/ext${ARG1},<span class="hljs-number"><span class="hljs-number">20</span></span>,tT) ; ,        <span class="hljs-number"><span class="hljs-number">20</span></span>       . exten =&gt; s,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-${DIALSTATUS},<span class="hljs-number"><span class="hljs-number">1</span></span>) ;     Dial. exten =&gt; s-NOANSWER,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}<span class="hljs-number"><span class="hljs-number">00</span></span>) ;   exten =&gt; s-BUSY,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}<span class="hljs-number"><span class="hljs-number">00</span></span>) exten =&gt; s-CONGESTION,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}<span class="hljs-number"><span class="hljs-number">00</span></span>) exten =&gt; s-CHANUNAVAIL,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1:<span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}<span class="hljs-number"><span class="hljs-number">00</span></span>) exten =&gt; _s-.,<span class="hljs-number"><span class="hljs-number">1</span></span>,Hangup ;  [macro-dial-vip] ;     exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() exten =&gt; s,<span class="hljs-number"><span class="hljs-number">2</span></span>,Dial(SIP/ext${ARG1},<span class="hljs-number"><span class="hljs-number">20</span></span>,tT) exten =&gt; s,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-${DIALSTATUS},<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; s-NOANSWER,<span class="hljs-number"><span class="hljs-number">1</span></span>,Voicemail(${ARG1}) ;     . exten =&gt; s-BUSY,<span class="hljs-number"><span class="hljs-number">1</span></span>,Voicemail(${ARG1}) exten =&gt; s-CONGESTION,<span class="hljs-number"><span class="hljs-number">1</span></span>,Voicemail(${ARG1}) exten =&gt; s-CHANUNAVAIL,<span class="hljs-number"><span class="hljs-number">1</span></span>,Voicemail(${ARG1}) exten =&gt; _s-.,<span class="hljs-number"><span class="hljs-number">1</span></span>,Hangup [macro-secretary] ;     exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() exten =&gt; s,<span class="hljs-number"><span class="hljs-number">3</span></span>,Dial(SIP/ext2222,<span class="hljs-number"><span class="hljs-number">15</span></span>,tTm) ;   exten =&gt; s,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-${DIALSTATUS},<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; s-NOANSWER,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1}) ;       exten =&gt; s-CHANUNAVAIL,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1}) exten =&gt; s-BUSY,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1}) exten =&gt; s-UNKNOWN,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1}) exten =&gt; s-CONGESTION,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1}) exten =&gt; s-CHANUNAVAIL,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${ARG1}) exten =&gt; _s-.,<span class="hljs-number"><span class="hljs-number">1</span></span>,Hangup [macro-group-dial] ;    exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() exten =&gt; s,n,Queue(${ARG1}) ; queue,     queues.conf exten =&gt; s,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-${DIALSTATUS},<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; s,n,Hangup exten =&gt; s-BUSY,<span class="hljs-number"><span class="hljs-number">1</span></span>,Playback(all-circuits-busy-now) exten =&gt; s-BUSY,n,Macro(secretary,<span class="hljs-number"><span class="hljs-number">1100</span></span>) ;  ,    exten =&gt; s-NOANSWER,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(secretary,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; s-CHANUNAVAIL,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(secretary,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; s-CONGESTION,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(secretary,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; _s-.,<span class="hljs-number"><span class="hljs-number">1</span></span>,Hangup ;     . [default] ; Default context including all specials include =&gt; incoming include =&gt; multifon ;  default    ;     exten =&gt; _[<span class="hljs-number"><span class="hljs-number">123</span></span>]X00,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,${EXTEN}) exten =&gt; _1[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">689</span></span>]XX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-ext,${EXTEN}) exten =&gt; _17XX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-vip,${EXTEN}) exten =&gt; _[<span class="hljs-number"><span class="hljs-number">2</span></span>]XXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-vip,${EXTEN}) exten =&gt; _[<span class="hljs-number"><span class="hljs-number">3</span></span>]XXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-ext,${EXTEN}) ;       . ;            : ;&lt;a href="http://sbelikov.ru/<span class="hljs-number"><span class="hljs-number">2009</span></span>/<span class="hljs-number"><span class="hljs-number">03</span></span>/golosovoe-menyu-v-asterisk/"&gt;http://sbelikov.ru/<span class="hljs-number"><span class="hljs-number">2009</span></span>/<span class="hljs-number"><span class="hljs-number">03</span></span>/golosovoe-menyu-v-asterisk/&lt;/a&gt; ;  ,          .       : &lt;a href="http://www.ivrvoice.ru/"&gt;http://www.ivrvoice.ru/&lt;/a&gt; ;      Asterisk : &lt;a href="http://www.voip-info.org/wiki/view/<span class="hljs-built_in"><span class="hljs-built_in">Convert</span></span>+WAV+audio+files+<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>+use+<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>+Asterisk"&gt;http://www.voip-info.org/wiki/view/<span class="hljs-built_in"><span class="hljs-built_in">Convert</span></span>+WAV+audio+files+<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>+use+<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>+Asterisk&lt;/a&gt; [incoming] exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-${CHANNEL(peername)},<span class="hljs-number"><span class="hljs-number">1</span></span>) ;-,         .       . exten =&gt; s-sipcity,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() ;   exten =&gt; s-sipcity,<span class="hljs-number"><span class="hljs-number">2</span></span>,Background(it-greet) ;     exten =&gt; s-sipcity,<span class="hljs-number"><span class="hljs-number">3</span></span>,Background(advert) exten =&gt; s-sipcity,<span class="hljs-number"><span class="hljs-number">4</span></span>,Background(it-route) exten =&gt; s-sipcity,n,Waitexten() exten =&gt; s-sipcity,n,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; ,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() ; - exten =&gt; ,<span class="hljs-number"><span class="hljs-number">2</span></span>,Macro(dial-vip,<span class="hljs-number"><span class="hljs-number">2001</span></span>) ;      exten =&gt; _s-zebra,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() ;   exten =&gt; _s-zebra,<span class="hljs-number"><span class="hljs-number">2</span></span>,Background(ru-greet) ;,   exten =&gt; _s-zebra,<span class="hljs-number"><span class="hljs-number">3</span></span>,Background(advert) exten =&gt; _s-zebra,<span class="hljs-number"><span class="hljs-number">4</span></span>,Background(ru-route) exten =&gt; _s-zebra,n,Waitexten() exten =&gt; _s-zebra,n,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; s-eng,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() ;   exten =&gt; s-eng,<span class="hljs-number"><span class="hljs-number">2</span></span>,Background(en-greet) ; - - exten =&gt; s-eng,<span class="hljs-number"><span class="hljs-number">3</span></span>,Background(advert) exten =&gt; s-eng,<span class="hljs-number"><span class="hljs-number">4</span></span>,Background(en-route) exten =&gt; s-eng,n,Waitexten() exten =&gt; s-eng,n,Background(en-route) exten =&gt; s-eng,n,Waitexten() exten =&gt; s-eng,n,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() ;       IVR,     .  . exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,Background(ru-greet) exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,Background(advert) exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,Background(ru-route) exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,Waitexten() exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,Background(ru-route) exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,n,Waitexten() exten =&gt; <span class="hljs-number"><span class="hljs-number">5000</span></span>,n,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1100</span></span>) ;   IVR   exten =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1100</span></span>) ;  ‚Äú<span class="hljs-number"><span class="hljs-number">1</span></span>‚Äù,     <span class="hljs-number"><span class="hljs-number">1100</span></span> exten =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1200</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1300</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1400</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1500</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(group-dial,<span class="hljs-number"><span class="hljs-number">1100</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">9</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-sipcity,<span class="hljs-number"><span class="hljs-number">1</span></span>) ;       -   exten =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-eng,<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; _1[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">689</span></span>]XX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-ext,${EXTEN}) ;   exten =&gt; _17XX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-vip,${EXTEN}) exten =&gt; _2XXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-vip,${EXTEN}) exten =&gt; _3XXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Macro(dial-ext,${EXTEN}) exten =&gt; i,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-zebra,<span class="hljs-number"><span class="hljs-number">4</span></span>) ;    exten =&gt; t,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(s-zebra,<span class="hljs-number"><span class="hljs-number">4</span></span>) ; ‚Äì   ;       [zebra] ;   ‚Äú‚Äù,       e164. ..   ,   ‚Äú+‚Äù. : <span class="hljs-number"><span class="hljs-number">74951234567</span></span>. exten =&gt; _99ZXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/<span class="hljs-number"><span class="hljs-number">7495</span></span>${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) ;          <span class="hljs-number"><span class="hljs-number">495</span></span>. ‚Äú<span class="hljs-number"><span class="hljs-number">99</span></span>‚Äù ‚Äì  ‚Äú    ‚Äù, ZXXXXXX ‚Äì   <span class="hljs-number"><span class="hljs-number">7</span></span>-  ,        <span class="hljs-number"><span class="hljs-number">1</span></span>.      zebra       <span class="hljs-number"><span class="hljs-number">7495</span></span>,      ‚Äú<span class="hljs-number"><span class="hljs-number">99</span></span>‚Äù    Asterisk . ;  .   ,   ,    . ;############################# ; International ;############################# ;Italy exten =&gt; _9939.,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99+<span class="hljs-number"><span class="hljs-number">39</span></span>.,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">3</span></span>}) ;   ,       ,    .      SIP  .      rewrite,        . ;Belorussia exten =&gt; _9937517XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99+<span class="hljs-number"><span class="hljs-number">37517</span></span>XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">3</span></span>}) ;Kazakhstan exten =&gt; _997727XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99+<span class="hljs-number"><span class="hljs-number">7727</span></span>XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">3</span></span>}) ;Ukraine exten =&gt; _99380XXXXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99+<span class="hljs-number"><span class="hljs-number">380</span></span>XXXXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) ;############################# ; cellular ;############################# exten =&gt; _99790[<span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">9</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99791[<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">79</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99792[<span class="hljs-number"><span class="hljs-number">569</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _997930XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99793[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">4678</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99795[<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99796[<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">578</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99798[<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">5789</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _997997XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) ;############################# ; cities starting <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> ;############################# exten =&gt; _99730[<span class="hljs-number"><span class="hljs-number">12</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99734[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">35</span></span>-<span class="hljs-number"><span class="hljs-number">79</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99735[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">3</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra-out/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99738[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _997388XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99739[<span class="hljs-number"><span class="hljs-number">01</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99739[<span class="hljs-number"><span class="hljs-number">45</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) ;############################# ; cities starting <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> ;############################# exten =&gt; _997401XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99741[<span class="hljs-number"><span class="hljs-number">1356</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99742[<span class="hljs-number"><span class="hljs-number">13467</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99747[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99748[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">7</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99749[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">689</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) ;############################# ; cities starting <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> ;############################# exten =&gt; _99781[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">8</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _997820XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _997821XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99783[<span class="hljs-number"><span class="hljs-number">13</span></span>-<span class="hljs-number"><span class="hljs-number">6</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99784[<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">8</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99785[<span class="hljs-number"><span class="hljs-number">15</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99786[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">35</span></span>-<span class="hljs-number"><span class="hljs-number">7</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>}) exten =&gt; _99787[<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">37</span></span>-<span class="hljs-number"><span class="hljs-number">9</span></span>]XXXXXXX,<span class="hljs-number"><span class="hljs-number">1</span></span>,Dial(SIP/zebra/${EXTEN:<span class="hljs-number"><span class="hljs-number">2</span></span>})</code> </pre><br><br><h5>  Day Six: nano Voicemail.conf, nano queues.conf </h5><br>  It's time to attach voicemail. <br><br>  Here, in fact, there is no point in even putting configs, because there almost nothing changes, and what changes is deeply specific.  The main problem for me was setting up MTA for sending mail through a non-standard port and with smtp-authentication.  After killing half a day on smoking forums, he finally put exim and set up mail transmission through it. <br>  Two points on which I would like to focus attention - my voice messages are killed on Asterisk immediately after sending.  Just so as not to clog the screw.  For the relevance of such a message is measured in minutes, and it makes me feel silly to force users to follow the voice box.  In addition, I put the wav49 format for messages, because  I was too lazy to bother with compressing files in mp3, and on the mailer the harsh rules are inhumanly delivered with multimedia applications - all mp3s are replaced with Spectrum Exolon as mp3. <br><br>  With queues.conf, too, everything is simple: <br><pre> <code class="dos hljs">[general] persistentmembers = yes ; ,     autofill = yes ;   autopause = no ;   ,   -  monitor-<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> = MixMonitor ;   [<span class="hljs-number"><span class="hljs-number">1100</span></span>] ;  strategy = ringall ;   ‚Äì    eventwhencalled = yes ;     Fop2 ringinuse = no ;   timeout = <span class="hljs-number"><span class="hljs-number">20</span></span> ; retry = <span class="hljs-number"><span class="hljs-number">1</span></span> ;     <span class="hljs-number"><span class="hljs-number">1</span></span>  wrapuptime = <span class="hljs-number"><span class="hljs-number">0</span></span> ;       () maxlen = <span class="hljs-number"><span class="hljs-number">0</span></span> ;     . <span class="hljs-number"><span class="hljs-number">0</span></span>= ; ‚Äì     member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">2222</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1101</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1102</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1103</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1104</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1105</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1106</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1107</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1108</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1109</span></span> member =&gt; SIP/<span class="hljs-number"><span class="hljs-number">1110</span></span></code> </pre><br><br><h5>  Day Seven: Afterword </h5><br>  Firstly, I would like to point out my own mistakes as well as the obvious disadvantages of this solution: <br>  - Error: a bag of ordinary headsets, which are used at home to communicate on Skype or in TS, was purchased for users.  This is a completely unsuitable office solution.  Sitting all day with a headset stuck in the ear of an ordinary person is very tiring.  A professional camera headsets are like a ticket to the orbit.  In addition, the women's team does not accept headsets with a headband - ‚Äúwe have hairstyles!‚Äù.  The solution is USB-tubes or desktop SIP-phones for those who have a good budget. <br>  - Error: rush is needed when catching fleas.  If you do not know what Asterisk is and what it is eaten with, then it is better to start studying it right now.  Study carefully.  Because this knowledge will definitely be needed, and, as usual, with the term ‚Äúso that it was ready yesterday‚Äù.  Not the fact that you need to install Asterisk, but the general theory of VoIP and Dial-plan constructs will be very useful for you.  I had to literally ‚Äúfire‚Äù paces to put everything and master it on the move due to a tough conflict with the telephone company-monopolist in our office center, therefore, it was not without fakapov. <br>  - Reliability.  While I have not grown my gray hair behind the Asterisk configuration process, I monitor the PBX constantly.  I'm just not sure yet, I did everything right.  A couple of times she stopped serving my customers for no reason and now I‚Äôm afraid to leave her unattended. <br>  - There are no faxes.  More precisely, they seem to be there, but purely for show.  Normal faxing is very difficult without the use of iron cards, which I avoid to maintain mobility. <br>  - Non-guaranteed quality of communication.  On whatever wide channel you sit, anyway, with enviable consistency, you will receive claims for ‚Äúgurgling connection‚Äù.  Despite the rapid development of technology and the expansion of data transmission channels, problems still occur regularly.  The simplest example: a small hotel in Italy, which is a representative of the company.  The hotel held as much as 2Mbps of ADSL Internet with uplink of 256k, which is distributed free of charge to guests via WiFi.  A representative contacts the office using this channel, and the connection is disgusting - it constantly gurgles and in general.  Just someone at the hotel decided to post a pack of 12 pixel photos to classmates.  The usual thing. <br>  - If the budget is not very big and there is not enough money for desk phones, then users have to master new methods of working with the phone - using software dialers like Zoiper or PhonerLite.  In addition, dialing * 77 to transfer a call also bothers them, they want to ‚Äúas before‚Äù, by briefly pressing the lever, which is no longer available. <br>  - Also, my users are annoyed by the need to dial the numbers not ‚Äúin the old-fashioned way‚Äù 810 (country code) (city code) (telephone), but in the format e164.  I could have left 810, but in this case, the number of an ordinary Italian hotel becomes simply cosmic length: 998103912345678901. And in E164 it is three digits shorter. <br><br>  In general, the overwhelming majority of problems are caused by the unwillingness of users to live in an era of change.  Starting with grunts and ending with outright sabotage.  I could have a couple of pages to list the claims of users, but it will be a hard offtop.  The only thing that can be recommended in this case - plan your move to Asterisk carefully.  Try to make it as inconvenient as possible for users.  It is unprofitable for business to spend paid time on people learning their new things, which could work as before if everything was planned properly. <br><br>  Now the advantages of the solution: <br>  + The first and most obvious is money.  I managed to reduce communication costs by about 15 times.  Previously, the average bill for telephony we had about 5 thousand dollars a month.  Over the past month after the introduction of Asterisk even three hundred dollars did not run up.  The lion's share of savings - conversations between employees in different countries. <br>  + Mobility.  If suddenly something happens, no matter what - whether it is a new Moscow black out or just a fire in the building - I pick up a virtual machine with Asterisk on any hosting that can import them, and just inform customers of the new IP PBX.  Try to imagine the unavailability of telephone communication with regular telephony. <br>  + Just fantastic solution flexibility and its almost complete free of charge.  Of course, we pay with our time saving money on solutions ‚Äúfrom the iron box‚Äù, but personally I was interested to find out how it all works. <br><br>  One question that I asked myself a couple of times and that probably would have appeared in the comments if I hadn‚Äôt answered it here: ‚ÄúWhy didn‚Äôt I put Elastix, FreePBX, PiaF or something like that?  On a roadmap in 10 minutes, it is installed and running for years! ‚ÄùThe answer is simple: there is no forest behind the web-face.  Yes, this is convenient, but to overcome the functionality of the web-muzzle, you will have to edit non-standard configs, risking breaking everything to hell with one comma.  And I can‚Äôt even imagine what we need in a year.  In addition, with the web-muzzle never know what and how it works.  Therefore, pure Asterisk, Komsomol members can not without difficulties. <br><br>  Now I have an Asterisk with such configs working quite satisfactorily.  There are annoying little things, such as echoes when calling on some strange urban PBXs, or the disgusting work of some embedded sound cards (damn one popular manufacturer of low-cost motherboards), but this is a common thing - it is solved with USB-tubes with which the free Zoiper Free fits very well . <br>  In general, I and my management are satisfied with the work done.  It is only necessary to work more with a file and it will be possible to proceed to the next project. <br><br>  What else is left to finish, for complete happiness: <br>  Put and configure Fop2 so that users can see which of the employees are in what condition, so that there is no situation of transferring a call to a busy subscriber, when the call is automatically transferred to the group and the person does not go where they want to. <br>  Set up a monitoring system to monitor the state of the PBX, calls, queues in real time. <br>  Put some extremely simple call reporting system.  The task is all-only in a clear visualization of the number of calls for checking accounts. </habracut></div><p>Source: <a href="https://habr.com/ru/post/113707/">https://habr.com/ru/post/113707/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113701/index.html">New addition to Google Maps on Android 2.x will solve the problem of finding parking</a></li>
<li><a href="../113702/index.html">Valentine's Day Gifts!</a></li>
<li><a href="../113703/index.html">Sony Ericsson Xperia PLAY, pro and neo videos right from MWC</a></li>
<li><a href="../113705/index.html">Powertrekk - portable fuel cell for mobile devices</a></li>
<li><a href="../113706/index.html">Virtual open day at TELHosting data center</a></li>
<li><a href="../113708/index.html">FlexRAID View - combining multiple disks into a single array</a></li>
<li><a href="../113709/index.html">Mailing Usability</a></li>
<li><a href="../113710/index.html">Optimization of free space: discard PNG</a></li>
<li><a href="../113711/index.html">Apacetosh</a></li>
<li><a href="../113712/index.html">Barcamp 2G: meeting place Krasnodar (February 26, 2011)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Paradigm programming processors in MODx Revolution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At once I will make a reservation that this article is reasoning and food for thought. I absolutely do not want to arrange holivars and impose my own ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Paradigm programming processors in MODx Revolution</h1><div class="post__text post__text-html js-mediator-article">  At once I will make a reservation that this article is reasoning and food for thought.  I absolutely do not want to arrange holivars and impose my own programming methods on others.  I am just telling you, because by my own I feel that the programming methods I have used have changed a lot over the last year and are completely different from the methods of the previous few years. <br><br>  In this article I would like to tell how MODx Revolution as a whole changed my approach to programming. <br>  I don‚Äôt know how anyone programs, but I believe that I‚Äôm already programming OOP methods a long time ago.  Why was programming in general reduced?  I wrote (or took ready) classes for my tasks (a class for working with a database, a class for working with templates, a class for something else).  Most of the classes were quite large and carried out many necessary tasks in their profile.  Most of the time as the project grew, many classes grew, or acquired extensions, or both.  One way or another, I am sure many people have come across a situation of hourly parsing an object in a couple of thousand lines and several dozens of methods in order to figure out where you can make the next changes, but in such a way that something else does not break.  But in my opinion the most difficult thing is to ensure the harmonious interaction of various objects among themselves, especially in terms of intercepting errors while performing certain actions, and most importantly at the time of an error, decide how critical it is and whether it is worth interrupting the execution process, or you can go further.  And also to assign client-server solutions here, in order to standardize execution responses for the server part (with its further rendering into templates) and for Ajax requests. <br><br>  What tools does MODx Revolution propose for programming project logic?  There are only two classes: Processor (performed by the modProcessor class) and Connector (performed by the modConnector class). <br>  What it is?  Processor - a separate file with most often one or several small tasks, as a result of which the answer should only be positive (which will indicate a positive result of the execution), or negative (preferably with a specific error message), which will by itself say that something critically wrong has happened. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will give a small example.  We want to create a new document.  If the document is created, then great, if not, we need to get an error message. <br><br>  1. Create a folder of our processors in core / model / modx / processors /, let's call it, for example, assets / <br>  2. Create a file processor doc / create.php (the full path will be core / model / modx / processors / assets / doc / create.php) <br><div class="spoiler">  <b class="spoiler_title">3. Write the code we need in it.</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!$scriptProperties[<span class="hljs-string"><span class="hljs-string">'pagetitle'</span></span>]){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $modx-&gt;error-&gt;failure(<span class="hljs-string"><span class="hljs-string">'    '</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($scriptProperties[<span class="hljs-string"><span class="hljs-string">'parent'</span></span>])){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $modx-&gt;error-&gt;failure(<span class="hljs-string"><span class="hljs-string">'     '</span></span>); } $doc = $modx-&gt;newObject(<span class="hljs-string"><span class="hljs-string">'modResource'</span></span>, scriptProperties); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!$doc-&gt;save()){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $modx-&gt;error-&gt;failure(<span class="hljs-string"><span class="hljs-string">'   '</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $modx-&gt;error-&gt;success(<span class="hljs-string"><span class="hljs-string">'  '</span></span>, $doc-&gt;toArray());</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">4. And now in the right place we call this processor</b> <div class="spoiler_text"><pre> <code class="php hljs">$response = $modx-&gt;runProcessor(<span class="hljs-string"><span class="hljs-string">'assets.doc.create'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'parent'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'pagetitle'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span> )); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($response-&gt;isError()){ <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">" "</span></span>. $response-&gt;getMessage(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ $object = $response-&gt;getObject(); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"    ID {$object['id']}"</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/*$modx-&gt;runProcessor -   MODx.   .php     ,       create.php  -  .      assets.doc.create   ,       assets/doc/         core/model/modx/processors/       ,       $modx-&gt;runProcessor($path, $properties, array( processors_path =&gt; self::$processorsPath));    $properties -  ,          scriptProperties.       .       $modx,            . */</span></span></code> </pre><br></div></div><br>  This is a particular example and does not reveal even approximately what I wanted to say. <br>  The beauty of using this method is revealed more when using several nested processors at once. <br><div class="spoiler">  <b class="spoiler_title">Here we call the processor, in which other processors are called (the code of the called processor is given).</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> $user = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $doc = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    $response = $modx-&gt;runProcessor('security/user/create', $scriptProcessor); //  ,      if($response-&gt;isError()){ return $modx-&gt;error-&gt;failure($response-&gt;getMessage()); } else{ //    $user = $response-&gt;getObject(); } //   ,      $response = $modx-&gt;runProcessor('assets.doc.create', array( 'parent' =&gt; 0, 'pagetitle' =&gt; ' ' )); // -,  ,      if($response-&gt;isError()){ return $modx-&gt;error-&gt;failure($response-&gt;getMessage()); } else{ //    $doc = $response-&gt;getObject(); } //   ,   return array( 'success' =&gt; true, 'message' =&gt; '', 'object' =&gt; array( 'user' =&gt; $user, 'doc' =&gt; $doc, ) ); /*  ,        $modx-&gt;error-&gt;success(failure),    .         ,    $response-&gt;getObject()      ,     .  $modx-&gt;error-&gt;success('', $object);    .    $modx-&gt;error-&gt;success    ,               ,          .       ,    security/user/create   $user-&gt;toArray(),   $user,       $user,   .           modUser  -&gt;toArray()      'object',    ,       $response-&gt;getObject()-&gt;get('id'); */</span></span></code> </pre></div></div><br>  Thus at the output we get a clear result, or $ response-&gt; isError (), or not. <br>  At the same time, we do not think about the degree of nesting of these processors, no matter how many levels of nesting of processors there are, with proper organization of execution, regardless of at what level of nesting an error occurs, we will know about it and display a text message, since return $ modx- &gt; error-&gt; failure ($ response-&gt; getMessage ());  each time will return the message of the next embedded processor. <br><br>  It should be noted that the entire admin part of MODx is written on processors (see the folder / core / model / modx / processors /) and if used correctly, many third-party packages may not be needed at all. <br>  What could be simpler than $ modx-&gt; runSnippet ('security / login', $ scriptProcessor) ;? <br>  MODx will do everything necessary and in which case it will return one of the error messages written for all cases.  In these processors, and checks on access rights, and any system variables, and calls to other related processors.  In general, all you need ... <br><br>  Thus, as if for each small action we create the processor we need and for performing more extensive tasks we collect individual processors in a heap. <br>  First, such separate processors are easier to understand.  They clearly understand what is being done for what and where the logical conclusion of the task is.  And probably the most important thing is that there are fewer if any extra branches if, else, etc., since some of these if-else sometimes reach several hundred (or even thousand) lines of code. <br>  Secondly, the failure of a single processor has a much smaller negative impact on the operation of the entire site, compared to the output of one large class due to an error parsing the code or something like that (of course not understandable to a normal programmer, but nevertheless anything can happen). <br>  And thirdly, in general, an engine with a similar implementation is serviced much easier and more intuitively. <br><br>  But another very powerful plus in this approach is the standardized responses on both the server side and the browser (when using Ajax). <br>  If you send a request to the connector in which the processor you need will be called, the response will be returned in the form of a JSON object, where there will be both success, message and object. <br>  This allows the use of the same processors for both server logic and pseudo-client. <br>  If there is interest, I will write more about connectors later. </div><p>Source: <a href="https://habr.com/ru/post/154081/">https://habr.com/ru/post/154081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154065/index.html">The Dude. Sending SMS notifications</a></li>
<li><a href="../154071/index.html">DualBut Windows 7 and Debian Squeeze on a UEFI computer</a></li>
<li><a href="../154073/index.html">Prime Factor Diagrams</a></li>
<li><a href="../154077/index.html">Last year, Apple and Google spent more on patents than on R & D of new products.</a></li>
<li><a href="../154079/index.html">Kindle Paperwhite Review</a></li>
<li><a href="../154083/index.html">Web series: do they have a future?</a></li>
<li><a href="../154087/index.html">Mathematical approach to creating websites</a></li>
<li><a href="../154089/index.html">Systematization of garbage collectors in HotSpot, IBM J9, JRockit JVMs</a></li>
<li><a href="../154091/index.html">Optimization of lead collection for the site accompanying the project</a></li>
<li><a href="../154097/index.html">Features of uploading files to HTML5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
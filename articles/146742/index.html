<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Latex calculations? Yes, easily!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Those who have to make up the texts more difficult than the helpers know that the latex - a convenient superstructure above the tech - at the moment i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Latex calculations? Yes, easily!</h1><div class="post__text post__text-html js-mediator-article">  Those who have to make up the texts more difficult than the helpers know that the latex - a convenient superstructure above the tech - at the moment is almost the only way to quickly make up quality texts of any complexity.  But not a single text ... Latech can be used for other purposes, about which the creator of Tech, Donald Knut, probably did not think. <br>  I already wrote how you can typeset in the late presentation.  Now I want to talk about how you can carry out simple calculations directly by the forces of latex. <br><a name="habracut"></a><br>  For latek different people wrote a lot of all kinds of packages that extend its functionality and facilitate the work of the coder.  Not forgotten and tools to help work with numerical data.  Simple calculations using floating point numbers (single precision) can be performed directly by Tech.  This is what the <b>fp</b> package is for.  I just want to note that due to the latek's ability to execute external commands, you can even perform more complex actions at the compilation stage (for example, calculate something in Octave, then build graphs in MathGL and insert them into the text), but I probably I'll tell you another time. <br>  I don‚Äôt set myself the goal of copying the manual on the fp package (especially since it is quite small), but I want to tell you how I use this package for simple calculations when making all sorts of technical tasks, reports, etc.  And I will show how to use it to implement the elementary functionality of the ‚Äúspreadsheet‚Äù. <br>  To begin with, we will create a command that allows you to insert various variable information (that is, some parameters that you can change later) by marking these inserts with a red superscript index and a margin in the rough printing mode.  Color in the document will provide us with the <b>colorx</b> package. <br>  This team will work in three ways: <ul><li>  without parameters (i.e., if we need to mark a place in the text where something is missing that needs to be inserted in the future), in this case we will simply mark the empty space in the text with a red square with a superscript index and put the label on the fields with a question mark; </li><li>  with one parameter (i.e., we inserted some data that will not be used in the future), in this case the inserted text is displayed with a superscript index and the corresponding empty field label; </li><li>  with two parameters (i.e., our data will be used further and we want to initialize some variable), the initialization text with the index is also displayed here, but in the fields opposite this index is placed the name of the variable in which this number is entered, plus initialization of this variable. </li></ul>  So, here is the code itself: <br><br><pre><code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcounter</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{InsC@unt@r}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ind</span></span></span></span>@x{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stepcounter</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{InsC@unt@r}</span></span></span></span><span class="hljs-comment"><span class="hljs-comment">% \hbox to 0pt{\raisebox{1ex}{\tiny\red{\arabic{InsC@unt@r}}}}} \def\Insm@rgimp@r#1{\marginpar{\red{\tiny\arabic{InsC@unt@r}:#1}}} \ifx\TextOut\undefined \def\InsTxt@#1#2{#1\Ind@x\Insm@rgimp@r{#2}} \else \def\InsTxt@#1#2{#1} \fi \def\Ins{\futurelet\next\Ins@i} \def\Ins@i{\ifx\next\bgroup\expandafter\Ins@ii\else\expandafter\Ins@end\fi} \def\Ins@ii#1{\def\temp@rg{#1}\futurelet\next\Ins@iii} \def\Ins@iii{\ifx\next\bgroup\expandafter\Ins@two@rgs% \else\expandafter\Ins@one@rg\fi} \def\Ins@two@rgs#1{\InsWFP{\temp@rg}{#1}} %   \def\InsWFP#1#2{\expandafter\FPset\csname #1\endcsname{#2}\InsTxt@{#2}{#1}} \def\Ins@one@rg{\InsTxt@{\temp@rg}{}} %   \def\Ins@end{\red{\Square\Ind@x}\Insm@rgimp@r{?}\xspace} %  </span></span></code> </pre> <br><br>  I will explain it.  First, we declare a new counter, which we will use to number the indices of inserts.  Further, various auxiliary commands for the main command <code>\Ins</code> defined, with which we will insert our data into the text. <br>  The commands <code>\Ind@x</code> and <code>\Insm@rgimp@r</code> are needed to mark our inserts in draft mode.  The first command increments the insert counter, creates a non-width box and places a red superscript with the insert number in it.  The second command places a mark on the field.  The draft mode itself is governed by the <code>\TextOut</code> : if we define it ( <code>\def\TextOut{}</code> ) before this piece of code, no marks will be placed on the <code>\def\InsTxt</code> (‚Äúwhite‚Äù layout mode), otherwise they will be stamped. <br>  Next, we define our own <code>\Ins</code> command, which takes a variable number of arguments.  It performs only one thing: reads the token following it ( <code>\futurelet</code> ) into the macro <code>\next</code> , discards it back and executes the command <code>\Ins@i</code> .  That, in turn, checks what the token followed our <code>\Ins</code> : if it is an opening brace ( <code>\bgroup</code> ), then the <code>\Ins@ii</code> command is executed with preliminary reading of the next parameter after it (otherwise this command has its own parameter will see ").  If the token is not a bracket, then the <code>\Ins</code> command had no arguments and <code>\Ins@end</code> is called, placing an empty box in the text and a note in the margins. <br>  The <code>\Ins@ii</code> command places the first argument of the <code>\Ins</code> command in the <code>\temp@rg</code> macro and again checks for the presence of the following argument ( <code>\Ins@iii</code> ): if it is, the <code>\Ins@two@rgs</code> , initializing the variable and inserting its value and text labels;  if not, the <code>\Ins@one@rg</code> command is executed, which simply inserts data into the text and makes a mark. <br>  To make it easier to output the results of the calculations, we create a command <code>\FPrint</code> , similar in writing to <code>\FPprint</code> from the fp package, but doing a few things different: its argument is <code>:</code> which need to round the result.  A rounded number is displayed on the screen.  Here everything is quite simply implemented, so I will not make excessive comments. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPrint</span></span></span></span>#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@print@@#1} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@print@@#1:#2{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\res@lt}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{round(#1:#2)}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">res</span></span></span></span>@lt}</code> </pre><br><br>  To store some common data for the entire text (say, the value that is calculated over several sections of the document, and in each section some part of it is calculated, and the amount we need to display at the end of the text) we define the commands <code>\Ini</code> (initializes a user variable, has one mandatory argument ‚Äî the name of the variable, and one optional ‚Äî the value with which the variable is initialized), <code>\Add</code> (adds an expression from the second parameter to the second parameter), <code>\Sub</code> (subtracts a number from the variable), and <code>\Show</code> (  displays a variable in the text, rounding it to two digits after the decimal point or to the number of digits specified in the optional parameter). <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\Ini}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[2]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[0]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\expandafter\gdef\csname cntr#2\endcsname{#1}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Add</span></span></span></span>#1#2{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">expandafter</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">csname</span></span></span></span> cntr#1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">endcsname</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{cntr#1+(#2)}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sub</span></span></span></span>#1#2{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">expandafter</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">csname</span></span></span></span> cntr#1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">endcsname</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{cntr#1-(#2)}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\Show}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[2]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[2]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\FPrint{cntr#2:#1}</span></span></span></span>}</code> </pre><br><br>  Due to the fact that the cntr prefix is ‚Äã‚Äãadded to the name of a user-defined variable, the probability of accidentally overriding any Latech macros almost disappears. <br>  Next, go to the "spreadsheet".  To get started, we‚Äôll get automatic numbering: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcount</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>row@num<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>row@num=15 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum{} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>shownum{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ifx</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">global</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">advance</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>row@num1 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">the</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>row@num<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">else</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gdef</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum{}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fi</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NumIni</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\global\@row@num=0\gdef\@@nonum{1}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NoNum</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\gdef\@@nonum{1}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcolumntype</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{N}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{&gt;{\strut}</span></span></span></span>#1&lt;{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>shownum}}</code> </pre><br><br>  The initialization of the counter must be done manually, placing the <code>\NumIni</code> command at the beginning of the table (or invent something like <code>\everypage</code> , but for tables).  Using the <b>array</b> package, we will execute commands defined by us for each cell of the required column.  The same package allows you to define new types of columns: the column in the table into which we want to insert autonumbering will have to be marked with type <b>N.</b>  If we do not need to insert a number into some cell, we will mark it with a macro <code>\NoNum</code> . <br>  We now turn to determining the types of columns that allow addition, subtraction, multiplication, and division with numeric variables.  Since the code of all these commands hardly differs from each other (except for the arithmetic operation performed in <code>\FPeval</code> ), we first define a macro that facilitates the definition of new commands. <br>  I will warn you in advance:  to uniquely determine the end of a number in a table cell, I would have to scan it character by character (which would greatly increase the compilation time of the text), I went a different way.  At the end of each cell, before the ampersand, it is necessary to insert a space, which unambiguously symbolizes the end of data inside the cell.  If you forget this space, ‚Äústrange errors‚Äù may appear. <br>  I will not explain in detail the following macro, I will confine myself to a superficial description.  The <code>\@@def@cmd</code> command allows you to define a new macro (whose name is specified in the first parameter), which performs an arithmetic operation from the second parameter, and also to create a new type of table column (the third parameter).  Since this command is used to initialize other commands, and also determines a new command by name from a parameter, technical constructions such as <code>\expandafter</code> (suppressing the opening of the next token until the next one <code>\xdef</code> through one), <code>\xdef</code> (it is identical to <code>\global\edef</code> and defines a new macro, pre-opening macros from its body), <code>\noexpand</code> (prohibition of disclosure of the token "in the first reading"), <code>\csname</code> (conversion of text to the name of the macro). <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@def@cmd#1#2#3{<span class="hljs-comment"><span class="hljs-comment">% \expandafter\xdef\csname #1\endcsname##1\ignorespaces{% \xdef\noexpand\@fst@rg{##1}\futurelet\noexpand\next\expandafter\noexpand\csname @@#1@\endcsname} \expandafter\xdef\csname @@#1@\endcsname{% \noexpand\ifx\noexpand\next\unskip\relax \noexpand\else\noexpand\expandafter\expandafter\noexpand\csname @testminus@#1\endcsname\noexpand\fi} \expandafter\xdef\csname @testminus@#1\endcsname{% \noexpand\ifx\noexpand\next-\noexpand\expandafter\expandafter\noexpand \csname @@m@#1\endcsname\noexpand\else \noexpand\expandafter\expandafter\noexpand \csname @@@#1\endcsname\noexpand\fi} \expandafter\xdef\csname @@@#1\endcsname##1 {% \noexpand\ifnum1=1##1{}\noexpand\else##1 \noexpand#2{##1}\noexpand\fi} \expandafter\xdef\csname @@m@#1\endcsname##1 {##1 \noexpand#2{##1}} \newcolumntype{#3}[2]{&gt;{\csname #1\endcsname{##1}}##2} }</span></span></code> </pre><br><br>  Now that we have done the dirty work, we can identify the main commands: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SET#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">expandafter</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">xdef</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">csname</span></span></span></span> cntr<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>fst@rg<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">endcsname</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#1}</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>ADD#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\res@lt}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{cntr\@fst@rg+(#1)}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SET{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">res</span></span></span></span>@lt}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SUB#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\res@lt}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{cntr\@fst@rg-(#1)}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SET{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">res</span></span></span></span>@lt}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>MUL#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\res@lt}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{cntr\@fst@rg*(#1)}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SET{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">res</span></span></span></span>@lt}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>DIV#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\res@lt}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{cntr\@fst@rg/(#1)}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SET{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">res</span></span></span></span>@lt}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@def@cmd{TAdd}{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>ADD}{+} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@def@cmd{TSub}{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SUB}{-} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@def@cmd{TMul}{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>MUL}{*} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@def@cmd{TDiv}{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>DIV}{/} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@def@cmd{TSet}{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>SET}{X}</code> </pre><br><br>  We now have the following new column types that take two arguments (the name of a variable and the standard type of cell alignment).  The <b>+</b> , <b>-</b> , <b>*,</b> and <b>/</b> types perform the corresponding operations between the variable from the first argument of the cell type and the number contained in the cell.  Type <b>X</b> sets the variable to the value contained in the cell.  If a variable should be used without being initialized by column <b>X</b> , it should be initialized before the table using the <code>\Ini</code> command.  The contents of the cell is checked: if there is not a number, then the actions are not performed. <br>  It now remains for us to declare another type of column, which will allow us to display the results of the calculation (and, if necessary, count their sum). <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@plus#1#2{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gdef</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>fst@rg{#1}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>ADD{cntr#2}} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>Sho@@#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ifx</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@plus{#1}{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">temp</span></span></span></span>@rg}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">else</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gdef</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum{}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fi</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>Sh@{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ifx</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">next</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bgroup</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">expandafter</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>Sho@@<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">else</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">gdef</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum{}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fi</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sho</span></span></span></span>#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ifx</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@nonum<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#1}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fi</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">temp</span></span></span></span>@rg{#1}<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">futurelet</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">next</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>Sh@} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcolumntype</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{S}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[3]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{&gt;{\strut}</span></span></span></span>#3&lt;{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Sho</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#1}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#2}</span></span></span></span>}}</code> </pre><br><br>  We create a new column type - <b>S</b> , which has three parameters: the name of the displayed variable, the name of the battery variable and the type of alignment.  <code>\NoNum</code> also acts on this command.  The <code>\Sho</code> command, which implements type <b>S</b> , can be executed by itself.  In this case, if we don‚Äôt need to accumulate the results in any variable, we simply give this command only one argument. <br>  And finally - a bit of entertainment.  <b>We will enable the ifthen</b> package to implement complex conditional instructions (it does not allow nested if ones) and make the implementation of loops and stack. <br>  The simplest for loop (without nested) can be defined as: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcounter</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{f@rc@unter}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcommand</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\forplus}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[4]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{% \setcounter{f@rc@unter}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{#2}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ifthenelse</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\value{f@rc@unter}</span></span></span></span> &lt; #3}{#4<span class="hljs-comment"><span class="hljs-comment">% \addtocounter{f@rc@unter}{#1}% \forplus[#1]{\value{f@rc@unter}}{#3}{#4}}{}} \newcommand{\forminus}[4][-1]{% \setcounter{f@rc@unter}{#2}\ifthenelse{\value{f@rc@unter} &gt; #3}{#4% \addtocounter{f@rc@unter}{#1}% \forminus[#1]{\value{f@rc@unter}}{#3}{#4}}{}} \def\iterator{\arabic{f@rc@unter}} \def\Loop#1#2{\forplus{0}{#1}{#2}}</span></span></code> </pre><br><br>  There are four teams here.  <code>\forplus</code> allows <code>\forplus</code> to perform a cycle with an increment from the number specified in the first parameter to the number in the second, each time performing the contents of the third parameter.  An optional macro argument is a loop step.  The <code>\forminus</code> implements a decrement loop.  <code>\iterator</code> allows you to output the contents of the loop iterator, and <code>\Loop</code> - to execute the contents of the second argument N times (where N is the first argument). <br>  To work with the stack, we define the commands <code>\push</code> and <code>\pop</code> , as well as <code>\stacklen</code> (the number of elements in the stack), <code>\popall</code> (output the entire contents of the stack) and <code>\popalldel</code> (output the contents with a separator). <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcount</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>buflen<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>buflen=0 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newtoks</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@stack <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>@stack={<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty</span></span></span></span>} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">def</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">push</span></span></span></span>#1{<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">advance</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">@</span></span></span></span>buflen1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">begingroup</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toks</span></span></span></span>0={{#1}}<span class="hljs-comment"><span class="hljs-comment">% \edef\act{\endgroup\global\@@stack={\the\toks0 \the\@@stack}}\act} \def\pop{\ifnum\@buflen&gt;0\advance\@buflen-1\fi\begingroup% \edef\act{\endgroup\noexpand\splitList\the\@@stack(tail)\@@stack}\act} \def\splitList#1#2(tail)#3{\ifx#1\empty\red{ !}\else{#1}\global#3={#2}\fi} \def\stacklen{\the\@buflen\xspace} \def\popalldel#1{\ifthenelse{\the\@buflen &gt; 1}{\pop#1\popalldel{#1}}% {\ifnum\@buflen=1\pop\fi}} \def\popall{\popalldel{}}</span></span></code> </pre><br><br>  The stack is implemented through a simple list of tokens.  Placing the stack simply adds a new token to the top of the list, and selecting from the stack splits the list by the first token and returns it. <br><br><br><h3>  Examples </h3>  Example of working with tables: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ini</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{yy}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ini</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{zz}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">begin</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{table}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[!th]</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">begin</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{tabular}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{|N{c}</span></span></span></span>|X{xx}{c}|*{xx}{c}|S{xx}{zz}{c}|*{yy}{c}|} <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hline</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bf</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NumIni</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">No</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{}</span></span></span></span> / &amp; A &amp; B &amp; A<span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">cdot</span></span></span></span></span><span class="hljs-formula">$</span></span>B<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NoNum</span></span></span></span>&amp; C <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hline</span></span></span></span> &amp; -3.5 &amp; 4.4 &amp;&amp;43.3 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span> &amp; 31.31 &amp;200.21 &amp;&amp;3 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span> &amp; 1.23 &amp;3.33 &amp;&amp;1.2 <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hline</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NoNum</span></span></span></span>&amp;&amp;&amp;<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">NoNum</span></span></span></span> <span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">sum</span></span></span></span></span><span class="hljs-formula">(A</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">cdot</span></span></span></span></span><span class="hljs-formula"> B)=</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span></span><span class="hljs-formula">$</span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{zz}</span></span></span></span>&amp;<span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">prod</span></span></span></span></span><span class="hljs-formula"> C=</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span></span><span class="hljs-formula">$</span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{yy}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hline</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">end</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{tabular}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">end</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{table}</span></span></span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/217/bb5/d6f217bb5f402c3db3b3fa7e0b021555.png"><br><br><br>  An example of working with initialized variables and calculations: <br><br><pre> <code class="tex hljs"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ini</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span></span>    {<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tt</span></span></span></span> totalmass}      -,          .          . ,    -,  <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{m1p}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{45.1}</span></span></span></span>,<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{m1}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{3*m1p}</span></span></span></span>      : <span class="hljs-formula"><span class="hljs-formula">$m_1=3</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">cdot</span></span></span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">FPrint</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{m1p:1}</span></span></span></span><span class="hljs-formula"><span class="hljs-tag">=</span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">FPrint</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{m1:1}</span></span></span></span></span><span class="hljs-formula">$</span></span>.     .<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Add</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{m1}</span></span></span></span> : {<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tt</span></span></span></span> totalmass}<span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span><span class="hljs-formula"><span class="hljs-tag">=</span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">[1]</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span></span></span><span class="hljs-formula">$</span></span>. ,      , , , <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{moreaddtoa}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{3.45}</span></span></span></span>,     ,     . : {<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tt</span></span></span></span> totalmass}<span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">Add</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{moreaddtoa}</span></span></span></span><span class="hljs-formula"><span class="hljs-tag">=</span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">[2]</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span></span></span><span class="hljs-formula">$</span></span>.      -.   -  <span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">rho</span></span></span></span><span class="hljs-formula"><span class="hljs-tag">=</span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span></span><span class="hljs-formula">$</span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{therho}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{5.43}</span></span></span></span>,    <span class="hljs-formula"><span class="hljs-formula">$V=</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span></span><span class="hljs-formula">$</span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{theV}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{12.44}</span></span></span></span>,    <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPeval</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{mi}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{therho*theV}</span></span></span></span><span class="hljs-formula"><span class="hljs-formula">$m_i=</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">rho</span></span></span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">cdot</span></span></span></span></span><span class="hljs-formula"> V=</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">FPrint</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{mi:3}</span></span></span></span></span><span class="hljs-formula">$</span></span>.      .<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Add</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{mi}</span></span></span></span>   : {<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tt</span></span></span></span> totalmass}<span class="hljs-formula"><span class="hljs-formula">$</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">,</span></span></span></span><span class="hljs-formula"><span class="hljs-tag">=</span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">[3]</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{totalmass}</span></span></span></span></span><span class="hljs-formula">$</span></span>.  <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verb</span></span></span></span>'<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ini</span></span></span></span>', <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verb</span></span></span></span>'<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Show</span></span></span></span>'  <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verb</span></span></span></span>'<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FPrint</span></span></span></span>'    .  <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verb</span></span></span></span>'<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span></span>'     {<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tt</span></span></span></span> fp}    :  -   ,  "--- - ,       <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">verb</span></span></span></span>'<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">global</span></span></span></span>'  ,   ,     .</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/b27/d81/b85/b27d81b8531c03f5c770a117e741410e.png"><br><br><br>  Example of working with cycles and stack: <br><br><pre> <code class="tex hljs">    a=<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{a}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{2.5}</span></span></span></span>, b=<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Ins</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{b}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{3}</span></span></span></span>,     <span class="hljs-formula"><span class="hljs-formula">$c=</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">sqrt</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{a^2+b^2}</span></span></span></span><span class="hljs-formula"><span class="hljs-tag">=</span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">FPrint</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{root(2, (a^2 + b^2)):2}</span></span></span></span></span><span class="hljs-formula">$</span></span>   1  4: <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">forplus</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{1}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{5}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\iterator~}</span></span></span></span>   1  10   3: <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">forplus</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[3]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{1}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{11}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\iterator~}</span></span></span></span>   4  1: <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">forminus</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{4}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{0}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\iterator~}</span></span></span></span>   10  1   -3: <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">forminus</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[-3]</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{10}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{0}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\iterator~}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Loop</span></span></span></span>5{ ! } <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">push</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">push</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">push</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{}</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">push</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{}</span></span></span></span>    : <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">popalldel</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{, }</span></span></span></span>. : <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">stacklen</span></span></span></span> .</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/d6c/d5b/197/d6cd5b1972e0719c953d2af69bda3eb9.png"><br><br><br>  <a href="">Example text</a> <br>  <a href="https://dl.dropbox.com/u/78717568/Const_storage/latex_fp/example.pdf">The resulting pdf</a> </div><p>Source: <a href="https://habr.com/ru/post/146742/">https://habr.com/ru/post/146742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146735/index.html">Your application on Node.js with storage in Dropbox is just</a></li>
<li><a href="../146738/index.html">Oval Elephant - another competitor to Raspberry Pi</a></li>
<li><a href="../146739/index.html">How many times did the user run your program?</a></li>
<li><a href="../146740/index.html">Research In Motion incurs losses, dismisses 5,000 employees and transfers BB 10</a></li>
<li><a href="../146741/index.html">Google Now cards</a></li>
<li><a href="../146743/index.html">Google Maps for Android has appeared offline mode</a></li>
<li><a href="../146744/index.html">Droider Chart. Issue 94, Return of the zombies!</a></li>
<li><a href="../146745/index.html">TeaCSS - the obvious approach to creating styles</a></li>
<li><a href="../146746/index.html">Vertical Video Syndrome</a></li>
<li><a href="../146749/index.html">New version of HostCMS, 6 - what is it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
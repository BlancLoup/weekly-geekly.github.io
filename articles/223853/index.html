<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Home Security System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear Habrovchani! I decided to share with you my little weakness, from childhood I love to know everything and watch everybody! It was this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Home Security System</h1><div class="post__text post__text-html js-mediator-article">  Good day, dear Habrovchani!  I decided to share with you my little weakness, from childhood I love to know everything and watch everybody!  It was this idea that led me to the desire to build my own video surveillance system within an apartment.  My path was somewhat thorny, but first things first. <br><a name="habracut"></a><br><h5>  First stage </h5><br>  The first thing I started building my system with was learning the basics of building video surveillance systems.  In fact, any video surveillance system represents a video camera connected to a digital device that is responsible for processing the video signal from a camera, recording a picture and issuing alarm messages.  Recording can be done in continuous mode or only in the event of any event (motion detection, camera cover, camera shutdown, or a sensor triggering).  Modern video surveillance systems are closely connected with the Internet, which allows you to see live images from cameras, view recorded videos and control video surveillance systems at the other end of the globe. <br><br>  To simplify my task, I decided to stay on the most modern platform - IP cameras.  This is perhaps not only the most modern, but also the most expensive option.  In fact, each IP camera is a separate video surveillance system in which all the necessary functionality is implemented. <br><br>  Next, I needed to find a way to store video information, because  I have long abandoned a stationary PC in favor of a laptop, I decided to implement another of my long-time wishes: the home server.  <b>No sooner said than</b> done, the <b>HP ProLiant MicroServer G7 N54L</b> was on my shelf, since its cost is now <b>8,870</b> rubles, which is very interesting for a piece of hardware of this class to it acquired <b>HDD WD Red WD20EFRX</b> , 2TB for <b>3 920</b> rubles.  It was installed <b>Windows Home Server 2011</b> .  In this preparation for the emergence of IP cameras was ready. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img width="200" src="https://habrastorage.org/getpro/habr/post_images/0f8/d56/a64/0f8d56a64640d0e77e7e97be7746a4e6.png" alt="image"></div><br><br>  To be honest, this whole idea is quite spontaneous, and neither the budget, nor the resources that I had thought about were calculated in advance, I did everything in the course of the outbreaks. <br><br><h5>  Second phase </h5><br>  The second is the choice of IP camera.  The main criterion when choosing was the presence of Wi-Fi, so as not to pull the wires throughout the apartment.  Properly, without examining the question, I chose the most affordable and simple <b>IP</b> camera <b>D-LINK DCS-931L</b> for <b>2,080</b> rubles.  and here I realized that you need to carefully study the characteristics of what you buy. <br><br><div style="text-align:center;"><img width="200" src="https://habrastorage.org/getpro/habr/post_images/037/ed7/858/037ed7858edcc0667d85046964547b28.jpg"></div><br><br>  In fact, all that she can do is show the picture in real time, and everything related to the issue of storing images from the camera is present only in more expensive versions.  I will not lay out all the th of this camera, I will confine myself to a description of its main functionality: <br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/7bf/9c8/ef6/7bf9c8ef609121e46f0b01e12bd6cfa2.png"></div><br><ul><li>  Real-time video streaming through <a href="https://ru.mydlink.com/entrance">D-Link</a> cloud server.  There is also a mobile application for this service, which allows you to view the camera image on any mobile device in real time (you cannot record, only the photo). </li><li>  View video stream through the web-interface. </li><li>  Sending photos and videos to FTP, with the main file that the video can not exceed 3MB. </li></ul><br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/fe4/2eb/c63/fe42ebc638bd2c5eccab3f9a9e1d85bb.png"></div><br><br>  Based on the available capabilities, I picked up an FTP server on MicroServer using regular Windows tools and set up the camera accordingly, organized streaming recording to the server.  As a result, I got a huge bunch of 3MB files with a few seconds of video.  From a practical point of view, I received a video archive that was not suitable for viewing and analysis, and the video stream was poorly compressed (but what should be requested from MJPEG).  Later, I made a decision to transfer this camera to the entrance and record settings for the event, i.e.  writes only when there is movement in the frame.  If suddenly someone wants to unscrew it, then I will know what it looked like.  The second significant drawback of this camera was of course the image quality, not that the small resolution of <b>640x480</b> , and most importantly a small viewing angle of <b>45 ¬∞</b> , which is extremely small for covering the area of ‚Äã‚Äãthe room from the corner, through the camera we will see only a third of the area.  And to all the sensitivity of the sensor is bad, it can be seen only in good light, there is no night shooting mode, oh, and the sound is terrible. <br><br><h5>  Third stage </h5><br>  The third stage of my Wishlist was the choice of a new IP camera with the ability to record streaming video to a remote server, a good viewing angle and night mode.  Here I was already responsible for the choice, but what was my surprise that there is not a single camera within $ 200 that would meet my criteria, but in fact this is the minimum that turns a regular web-camera into a video surveillance tool. <br><br>  After a week of studying specialized forums, my choice was on the <b>HIKVISION DS-2CD2432F-IW</b> camera, which cost was <b>7,590</b> rubles. <br><br><div style="text-align:center;"><img width="200" src="https://habrastorage.org/getpro/habr/post_images/2d5/50e/516/2d550e516f541ca4ea28899b5d64e922.png" alt="image"></div><br><br>  Here is her review: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/1X3w1367pZQ%3Ffeature%3Doembed&amp;xid=17259,15700021,15700043,15700186,15700190,15700253&amp;usg=ALkJrhjL8W7CwsOj74LQff3Jg8ytH5Mcvg" frameborder="0" allowfullscreen=""></iframe><br><br><h6>  A little about her: </h6><br>  Matrix Type: <b>CMOS</b> <br>  Focal length: <b>4mm</b> <br>  Camera resolution: <b>3 MP</b> <br>  Wi-Fi: <b>802.11n</b> <br>  Network protocols: TCP / IP, HTTP, DHCP, DNS, DDNS, RTP, RTSP, PPPoE, SMTP, NTP, SNMP, HTTPS, FTP, 802.1x, Qos (SIP, SRTP, IPv6 option) <br>  Memory card support: Micro SD up to 32 GB. <br>  Shooting characteristics <br>  Resolution: <b>2048 x 1536</b> <br>  Video compression formats: <b>H.264 / MJPEG</b> <br>  IR illumination: <b>yes</b> <br>  Night distance: <b>10 m</b> <br>  Viewing angle: <b>75.8 ¬∞</b> <br>  Triggered alarm: PIR sensor / Motion detector / Video loss / IP address conflict Network disconnection / Video replacement / Storage control <br>  A few more points that I would like to note: <br><ul><li>  Built-in microphone and speaker, supports two-way audio </li><li>  Simultaneous broadcast of TWO video streams, HD and SD quality </li><li>  A separate analog input for connecting external devices (for example, when a motion sensor is triggered, you can activate a machine gun, or vice versa, when a machine gun is triggered, start recording). </li></ul><br>  <a href="http://www.hikvision.ru/ndl.php%3Ff%3Dc/manual/%2520IP-4.pdf">Instructions for the camera</a> . <br><br><h6>  Who is it? </h6><br>  A few words about the brand: <b>Hikvision Digital Technology</b> - a leading supplier of digital video surveillance systems with its own office and production in Hangzhou (China).  Here, even their video presentation, they instilled confidence in me: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/hWRm1GLoGNA%3Ffeature%3Doembed&amp;xid=17259,15700021,15700043,15700186,15700190,15700253&amp;usg=ALkJrhjGbpUxkXSg4C02UjEXTZKx7a0Ahg" frameborder="0" allowfullscreen=""></iframe><br><br>  As you can see, the brand is Chinese, but cameras with similar technical characteristics of European production cost far beyond $ 500.  Naturally, I had some concerns when choosing this camera, but as it turned out later, it was in vain.  I just want to make a reservation that the camera comes without a power supply, and we will need a 12V 1A power supply for the load. <br><br>  Who wants to get acquainted with the devices from this manufacturer, I just want to recommend the Russian representative of this company with an adequate forum of <a href="http://www.hikvision.msk.ru/">those.</a>  <a href="http://www.hikvision.msk.ru/">support</a> <br><br><h6>  Customization </h6><br>  After connecting the camera to the home network, I immediately updated the firmware to V5.1.2 build 140116 and proceeded to its configuration. <br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/8ed/700/a9f/8ed700a9f368ac444a94517c9da23ee3.png"></div><br><br>  Having made a number of basic settings, or rather several dozen, the camera began to give up the stream in the way I need it.  Next, my task was to force the camera to record on a remote server.  Which is used as the same server, installed on board Windows Home Server 2011, which essentially plays the role of a NAS.  And then began dancing with a tambourine.  Next, I will describe my customization experience that I had to feel in my own skin, because  I could not find any information on the network. <br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/3e7/246/d0e/3e7246d0eea352f7b716d2160fecf698.png"></div><br>  And of course the most interesting is the comparison of images from both cameras, as they say, without comments here: <br><img src="https://habrastorage.org/getpro/habr/post_images/67e/eb4/05f/67eeb405fc9ade48420c4ae50c156279.png"><br><br>  Next, I had to force this camera to write a video stream to the archive.  As it turned out, the camera can record video stream using several protocols: go to <i>Settings - Advanced Configuration - Storage - NAS</i> . <br><br>  To begin, I tried to configure the NAS using the NFS protocol.  Everything is simple, under Windows rises in 5 minutes.  After specifying the path to the NFS storage in the settings, the camera turns on the siren and does not shut up (yes, there is a built-in siren in the camera), then I press the format button on the Storage Management tab, then the camera stops, the long formatting process begins, on the server containers are created.  After the formatting is completed, the status is set to ‚ÄúNorm‚Äù, but literally after a couple of seconds it is reset and the camera starts to turn on the siren again.  After trying 5 times, all the time I got the same thing. <br>  Then I tried to connect via the SMB protocol, it's still easier here, the usual shared folder on the server with configured access rights. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/e2c/f04/ee8/e2cf04ee85ba36751427d1d01f6266b5.png"></div><br><br>  We also format it on the ‚ÄúStorage Management‚Äù tab, and lo and behold - everything works! <br><br>  But there were a couple of unsolved issues: <br><br>  1. HOW TO DISABLE THE SIREN?  (It always works if the camera loses connection with the server). <br>  2. HOW TO ADJUST THE RESTORATION OF THE COMMUNICATION AT THE INTERRUPTION OF THE CONNECTION WITH THE NAS?  (If the router or server is rebooted, the camera loses its connection and does not restore it until the camera is rebooted and all this is accompanied by a gad siren). <br>  The first question I managed to solve, for this we go <i>Settings - Advanced Configuration - Events - Events</i> .  Next, select the event type, in our case, this is the ‚ÄúHDD Error‚Äù and remove the Audio message checkbox. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/3c5/237/0bb/3c52370bba18e68a06e18050293e2339.png"></div><br><br>  The second question was dropped by itself, now everything is recovering itself, China in one word!  Although now everything is connected to the power supply unit, respectively, when an external power supply hits, the UPS powers both the cameras and the server with the router.  If they turn off the light, SMS will come to my mobile and I can connect to the server via RDP and put everything out correctly.  When restoring power, I also receive SMS, you can turn on the server via WakeOnLan, and all from a mobile phone. <br><br>  Another pleasant bonus turned out to be the <b><a href="https://itunes.apple.com/ru/app/ivms-4500-lite/id441697527%3Fmt%3D8">iVMS-4500 lite</a></b> mobile application <b>.</b> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62a/4ad/68f/62a4ad68fb6e448aaa9d4fd476939d27.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/ea0/a4c/ad4ea0a4c263889744e3c1ba46c193af.png"></div><br>  What can: <ul><li>  Show picture in real time </li><li>  Record stream and take snapshots </li><li>  View archived video from a remote server </li><li>  Transmit sound to the speaker built into the camera (so we have feedback) </li><li>  Alarm activation </li></ul><br><br><h5>  Fourth stage </h5><br>  Making it all work together.  This is what I ended up with: <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/getpro/habr/post_images/760/76d/069/76076d069bf0a0f6e419474eae9172c4.png"></div><br><br>  Two cameras, internal and external.  Outdoor D-Link writes on the motion sensor in the frame on the staircase, internal records the situation in the apartment on an ongoing basis.  Both store records on the server.  The server distributes DLNA to any devices, plus we have access from a mobile phone via the Internet to both cameras, D-Link only in real time, and Hikvision in both real and archived recordings.  In the future, it remains only to think of why I need all this.  I will not give access to broadcasts for ethical reasons. <br><br><h5>  Total budget </h5><br>  HP MicroServer G7 server with hard disk: 12 790 rub. <br>  IP Camera D-LINK DCS-931L 2 080 rub. <br>  HIKVISION DS-2CD2432F-IW camera 7,590 rubles. <br>  The power supply for the camera HIKVISION was, you can buy ~ 500 rubles. <br>  ZyXEL Keenetic Giga router was - now costs 3,200 rubles. <br>  The APC 500 uninterruptible power supply unit was, now costs 3,500 rubles. <br>  DLNA server Serviio Pro 900 rub.  (Pro version for web access to the entire server library) <br>  Windows Home Server 2011 - unfortunately not for sale, and can only be a pre-installed hardware manufacturer, so free. <br>  Total: <b>30 560 rubles.</b> <br><br>  PS When studying this issue, you should not forget about the bandwidth of the Wi-Fi channel, according to my calculations, no more than 3 HD cameras will work normally.  At the same time, when I record 2 cameras (HD and SD), I calmly watch HD movies on DLNA without brakes and skipping streaming recordings to the server. </div><p>Source: <a href="https://habr.com/ru/post/223853/">https://habr.com/ru/post/223853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../223843/index.html">Electric Vehicle Perspectives from a Security Perspective</a></li>
<li><a href="../223845/index.html">How else does SETI think to seek an extraterrestrial mind</a></li>
<li><a href="../223847/index.html">The contract between the developer and Google Play in Russian</a></li>
<li><a href="../223849/index.html">Rear printer: a view from the side of the head</a></li>
<li><a href="../223851/index.html">Why conspiracy theories arise and how to deal with them</a></li>
<li><a href="../223857/index.html">Production of key components ITER has begun.</a></li>
<li><a href="../223861/index.html">GOkey: data cable, battery, USB flash drive and key detector in one bottle</a></li>
<li><a href="../223863/index.html">Comparing Azure Queues and Service Bus Queues services</a></li>
<li><a href="../223867/index.html">Vibrating Insoles - wearable technology that you did not expect. (concept)</a></li>
<li><a href="../223869/index.html">MBLOK Wireless Storage on Kickstarter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
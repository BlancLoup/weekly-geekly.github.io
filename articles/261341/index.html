<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How search and parsing of chenjlogs is arranged in AllMyChanges</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Want to look inside and find out how AllMyChanges.com works? Today, I‚Äôll tell you a little about how our robot works and why it manages to find releas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How search and parsing of chenjlogs is arranged in AllMyChanges</h1><div class="post__text post__text-html js-mediator-article">  Want to look inside and find out how AllMyChanges.com works?  Today, I‚Äôll tell you a little about how our robot works and why it manages to find release information so well. <br><br>  In fact, our whole robot is just a set of functions. <br>  Search and processing of changelogs consists of several stages: <br><br><ol><li>  it is necessary to understand how to obtain data on urla; </li><li>  use the selected method to download data to disk; </li><li>  go through the downloaded files and extract from them pieces that have a version number and description; </li><li>  understand which pieces are really part of chenjlog, and which are just rubbish; </li><li>  add the found good to the base. </li></ol><br>  Parts 1, 2 and 5 are quite mechanical and do not require special intelligence from the robot. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Data acquisition </h2><br>  In the <a href="http://habrahabr.ru/company/allmychanges/blog/260275/">previous article,</a> I mentioned that AllMyChanges supports several different data sources.  First, he can dump Git and Mercurial from.  Secondly, it can download HTML pages, one at a time, and recursively bypassing the entire site.  And thirdly, our robot can download some information from the App Store and Google Play. <a name="habracut"></a><br><br>  At the first stage, we, according to certain heuristic rules, determine what function to call at stage two.  This choice, if successful, is remembered in the database so that it does not have to be made every time. <br><br>  During the download, the robot either simply adds the files to disk, or performs additional processing.  So, taking data through the GitHub Releases API, it generates a Markdown file from them.  Approximately the same thing happens with data taken from the story or VCS history. <br><br><h2>  Extract </h2><br> <a href="https://www.flickr.com/photos/chiotsrun/9477342814" title="Harvesting New Potatoes by Susy Morris, on Flickr"><img src="https://habrastorage.org/getpro/habr/post_images/ddf/502/a13/ddf502a1361b7ee2a1c48086e4a61296.jpg" width="427" height="640" alt="Harvesting New Potatoes"></a> <br><br>  Retrieving data is not easy.  Especially when it comes to large repositories with a bunch of files.  After all, each of them needs to be circumvented, and if there is a suitable parser, then parse and search for parts related to the release notes. <br><br>  At the moment, the service supports three main file formats: <br><br><ul><li>  Markdown; </li><li>  reStructured Text; </li><li>  Html </li></ul><br>  But due to the fact that the processing steps are independent of each other, you can easily add both new functions for downloading data and expand the list of supported formats. <br><br>  To make the robot easier, you can send it to the right place in the file system using advanced settings.  To do this, when adding a new package to the service, you can specify a list of directories and files where to look for a changelog, or a list of directories that should be avoided. <br><br>  For example, you know that the project has a subdirectory with documents, and the changelog should be searched there.  In this case, we enter <code>docs/</code> in the ‚Äúsearch list‚Äù field, and the robot will only search there.  If you don‚Äôt know where to look for exactly, but you know that the <code>src/</code> folder doesn‚Äôt have anything about release laptops, then you should add this directory to the ‚Äúignore list‚Äù field. <br><br><h2>  Post processing </h2><br> <a href="https://www.flickr.com/photos/kouchi/4332028170" title="sorting! by Ernie, on Flickr"><img src="https://habrastorage.org/getpro/habr/post_images/744/c13/0e3/744c130e3145224e803e7dc6c12df55d.jpg" width="640" height="488" alt="sorting!"></a> <br><br>  The most interesting thing begins when you get some pieces of data that can be a changelog.  This is where the main magic begins.  The difficulty lies in the fact that it is not always possible to say for sure <br>  whether the extracted text refers to a changlog or not.  Of course, if it is recorded in its metadata that it is extracted from a file with the name <code>ChangeLog.md</code> , then it will not be difficult.  But unfortunately, this is not always the case. <br><br>  Therefore, to determine whether a version number and description is part of a changelog, or a data piece has been extracted by mistake, the AllMyChanges robot uses a number of heuristic rules. <br><br>  To begin with, all extracted pieces are grouped by the files from which they were extracted, then by directories, and so on.  For each group, an estimate is made of the likelihood that it can be a changelog.  File and directory names are evaluated, as well as the total number of pieces that they contain. <br><br>  This is necessary in order to correctly handle release laptops scattered across different files.  Such as Django, for example: <a href="https://github.com/django/django/tree/master/docs/releases">... tree / master / docs / releases</a> <br><br>  Further, duplicates are removed, which can occur for a variety of reasons.  The most common reason is the complex structure within the document, where the same version is mentioned in the headers of different levels. <br><br>  Also, at the post-processing stage, release dates are calculated, unless of course they are listed in the file.  A certain heuristic rule also applies here - if all versions in the file have release dates, and one of the versions does not, then it must be considered not yet released.  This version is marked as "Unreleased". <br><br>  Speaking of dates.  AllMyChanges holds two dates for each version of the library: the release date and the detection date.  Very often, both of these dates are indicated in the notification letters, and they differ.  ‚ÄúRelease Date‚Äù is always the date indicated in the original source.  Sometimes it may not be, sometimes it may be even in the future, there may be any miracles.  ‚ÄúDiscovery Date‚Äù is the same as when our robot first found this version.  The discovery date is always there, and if the ‚Äúsource date‚Äù is not indicated in the original source, then the ‚Äúdiscovery date‚Äù will be used instead. <br><br>  What are two dates for?  In the first we fix what is written in the document, the second we use to know whether we need to notify users about the release of the new version. <br><br>  Imagine such a situation.  A Russian developer of a certain library wrote down a new version with a beautiful number <code>1.2.3</code> just for the new year.  <code>2015-01-01</code> down her release date <code>2015-01-01</code> and, without even pushing on GitHub, went bainki.  After waking up and sobering up on January 7, he decides to do a <code>git push</code> . <br><br>  What happens when the AllMyChanges robot sees version <code>1.2.3</code> in the repository?  Right!  He will record that her release date is <code>2015-01-01</code> , but will put <code>2015-01-07</code> as the date of discovery.  This is necessary in order for the next day to form a digest, this version <code>1.2.3</code> gets into it.  And it should get into the digest even though the release date is old.  Thus, you will receive a notification about the release of the update, in spite of everything and in spite of everything :) <br><br>  All this allows AllMyChanges to cope with the search for information about releases in all hard-to-reach places and deliver it to your inboxes on time. <br><br><h2>  Questions? </h2><br>  If you have any questions, feel free to ask them in the hall, or write to <a href="">support@allmychanges.com</a> .  I will be happy to answer them. <br><br></div><p>Source: <a href="https://habr.com/ru/post/261341/">https://habr.com/ru/post/261341/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261327/index.html">PHP Digest number 65 - interesting news, materials and tools (June 14 - 28, 2015)</a></li>
<li><a href="../261331/index.html">Black datamining archeology: what could be more effective than a dictionary attack?</a></li>
<li><a href="../261335/index.html">The digest of interesting materials from the world of Drupal # 10</a></li>
<li><a href="../261337/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ166 (June 22 - 28, 2015)</a></li>
<li><a href="../261339/index.html">It's hard to go simplicity</a></li>
<li><a href="../261345/index.html">Effective logo design, part 2: using natural templates</a></li>
<li><a href="../261347/index.html">A library that facilitates the development of forms on sites</a></li>
<li><a href="../261349/index.html">Compile-time reflection D</a></li>
<li><a href="../261351/index.html">Maximum overload - adventures in JavaScript in the C ++ world</a></li>
<li><a href="../261353/index.html">Cordova 5.1.1 and plugin updates</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JMAP - open protocol will replace IMAP when exchanging emails</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier this month , the JMAP protocol, developed under the guidance of the IETF , was actively discussed at Hacker News. We decided to talk about why...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JMAP - open protocol will replace IMAP when exchanging emails</h1><div class="post__text post__text-html js-mediator-article">  Earlier this month <a href="https://news.ycombinator.com/item%3Fid%3D19839104">,</a> the JMAP protocol, <a href="https://www.ietf.org/blog/jmap/">developed under the guidance of the IETF</a> , <a href="https://www.ietf.org/blog/jmap/">was</a> <a href="https://news.ycombinator.com/item%3Fid%3D19839104">actively discussed</a> at Hacker News.  We decided to talk about why it is needed and how it works. <br><br> <a href="https://habr.com/ru/company/1cloud/blog/452958/"><img src="https://habrastorage.org/webt/uq/vv/qu/uqvvqupqkku3kftudbkfpvc2vkm.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>/ <a href="https://pxhere.com/en/photo/1171969">Pxhere</a> / <a href="https://pxhere.com/en/photo/1171969">pd</a></i></font> <br><br><h2>  Than did not please IMAP </h2><br>  The <a href="https://ru.wikipedia.org/wiki/IMAP">IMAP protocol</a> was introduced in 1986.  Many things described in the standard are no longer relevant today.  For example, the protocol can return the number of lines of letters and <a href="https://ru.wikipedia.org/wiki/MD5">MD5 checksums</a> ‚Äî this functionality is practically not used in modern mail clients. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Another problem is traffic consumption.  In the case of IMAP, emails are stored on the server and are periodically synchronized with local clients.  If for some reason the copy on the user's device is ‚Äúspoiled‚Äù, it is necessary to re-synchronize all mail.  In today's world, when thousands of mobile devices can be connected to a server, this approach leads to an increased consumption of traffic and computing resources. <br><br>  Difficulties arise not only with the protocol itself, but also with the mail clients that work with it.  Since its inception, IMAP has been subjected to various revisions many times - the current version is currently IMAP4.  At the same time, there are many optional extensions for it ‚Äî ninety RFCs with additions have been <a href="https://www.rfc-editor.org/search/rfc_search_detail.php%3Fpage%3DAll%26title%3DIMAP%26pubstatus%255B%255D%3DAny%26pub_date_type%3Dany%26sortkey%3DNumber%26sorting%3DASC">published</a> on the network.  One of the most recent is <a href="https://tools.ietf.org/html/rfc8514">RFC8514</a> , introduced in 2019. <br><br>  However, many companies offer their own proprietary solutions that should simplify working with IMAP or replace it altogether: <a href="https://developers.google.com/gmail/api/v1/reference/">Gmail</a> , <a href="https://msdn.microsoft.com/office/office365/APi/mail-rest-operations">Outlook</a> , <a href="https://nylas.com/cloud/docs">Nylas</a> .  The result is that existing mail clients support only some of all the available functions.  Such diversity leads to market segmentation. <br><br><blockquote>  <i>‚ÄúMoreover, a modern email client should not just forward messages, but be able to work with contacts and synchronize with the calendar,‚Äù says Sergey Belkin, head of the development department at IaaS provider <a href="https://1cloud.ru/%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Djmap%26utm_content%3Dsite">1cloud.ru</a> .</i>  <i>- Today, for these purposes use third-party protocols like <a href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP</a> , <a href="https://en.wikipedia.org/wiki/CardDAV">CardDAV</a> and <a href="https://en.wikipedia.org/wiki/CalDAV">CalDAV</a> .</i>  <i>This approach complicates the configuration of firewalls in corporate networks and opens up new vectors for cyber attacks. ‚Äù</i> </blockquote><br>  JMAP is intended to solve the indicated problems.  It is developed by experts from FastMail under the guidance of the Internet Engineering Council (IETF).  The protocol works over HTTPS, uses JSON (for this reason it is suitable not only for exchanging electronic messages, but also for solving a number of tasks in the cloud) and simplifies the organization of work with mail in mobile systems.  In addition to processing letters, JMAP also provides the ability to connect extensions to work with contacts and the calendar scheduler. <br><br><h2>  Features of the new protocol </h2><br>  JMAP is <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BA%25D0%25BE%25D0%25BB_%25D0%25B1%25D0%25B5%25D0%25B7_%25D1%2581%25D0%25BE%25D1%2585%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_%25D1%2581%25D0%25BE%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D1%258F">a stateless protocol</a> and does not require a permanent connection to the mail server.  This feature simplifies work in unstable mobile networks and allows you to save battery power devices. <br><br>  The email in JMAP is in JSON structure format.  It contains all the information from the <a href="https://tools.ietf.org/html/rfc5322">RFC5322</a> (Internet Message Format) message that mail applications might need.  According to the developers, this approach should simplify the creation of clients, since the server will be responsible for solving potential difficulties (associated with <a href="https://ru.wikipedia.org/wiki/MIME">MIME</a> , reading headers and coding). <br><br>  The client uses the API to access the server.  To do this, it generates an authenticated POST request, the properties of which are described in the session JMAP object.  The request has the format application / json and consists of a single JSON request object.  The server also generates a single response object. <br><br>  In the <a href="https://jmap.io/spec-core.html">specification</a> (clause 3), the authors give the following example with a query: <br><br><pre><code class="xml hljs">{ "using": [ "urn:ietf:params:jmap:core", "urn:ietf:params:jmap:mail" ], "methodCalls": [ [ "method1", { "arg1": "arg1data", "arg2": "arg2data" }, "c1" ], [ "method2", { "arg1": "arg1data" }, "c2" ], [ "method3", {}, "c3" ] ] }</code> </pre> <br>  Below is an example of the response that the server will generate: <br><br><pre> <code class="xml hljs">{ "methodResponses": [ [ "method1", { "arg1": 3, "arg2": "foo" }, "c1" ], [ "method2", { "isBlah": true }, "c2" ], [ "anotherResponseFromMethod2", { "data": 10, "yetmoredata": "Hello" }, "c2"], [ "error", { "type":"unknownMethod" }, "c3" ] ], "sessionState": "75128aab4b1b" }</code> </pre><br>  The complete JMAP specification with examples of implementation can be found on the <a href="https://jmap.io/spec-core.html">official</a> project <a href="https://jmap.io/spec-core.html">website</a> .  There, the authors posted a description of the specifications for <a href="https://jmap.io/spec-contacts.html">JMAP Contacts</a> and <a href="https://jmap.io/spec-calendars.html">JMAP Calendars</a> - they are directed to work with calendars and contact lists.  According <a href="https://jmap.io/spec.html">to the</a> authors, Contacts and Calendars were separated into separate documents so that they could be refined and standardized independently of the ‚Äúcore‚Äù.  The source code for JMAP is in the <a href="https://github.com/jmapio/jmap">repository on GitHub</a> . <br><br><img src="https://habrastorage.org/webt/fa/t7/y9/fat7y93xlrzubfnkfpbb3nwzkiq.jpeg"><br>  <font color="#A9A9A9"><i>/ <a href="https://pxhere.com/en/photo/1272500">Pxhere</a> / <a href="https://pxhere.com/en/photo/1272500">pd</a></i></font> <br><br><h2>  Perspectives </h2><br>  Despite the fact that the work on the standard has not yet been completed, it is already being implemented in production environments.  For example, the creators of the open mail server <a href="https://www.cyrusimap.org/">Cyrus IMAP</a> implemented its JMAP version.  FastMail developers have <a href="https://fastmail.blog/2016/12/09/jmap-test-suite/">released a</a> server framework for Perl, and the JMAP authors have introduced a <a href="https://proxy.jmap.io/">proxy server</a> . <br><br>  It can be expected that in the future projects based on JMAP will become more and more.  For example, there is some possibility that the developers of Open-Xchange, creating an IMAP server for Linux-based systems, will switch to the new protocol.  <a href="https://www.atmail.com/blog/rafael-laguna-imap-jmap/">Members of the community</a> , who have formed around the company's tools, are <a href="https://www.atmail.com/blog/rafael-laguna-imap-jmap/">asking for</a> IMAP to abandon them. <br><br>  IETF and FastMail developers are saying that more and more users see the need for a new open standard for messaging.  JMAP authors hope that in the future more companies will begin to implement this protocol. <br><br><blockquote>  <sup><b>Our additional resources and sources:</b></sup> <sup><br><br><img src="https://habrastorage.org/webt/lc/ev/ev/lcevevvhrpxsnxownufk6ykmvma.png"></sup>  <sup><a href="https://habr.com/ru/company/1cloud/blog/452668/">How to check cookies for compliance with GDPR - a new open tool will help</a></sup> <sup><br><br><img src="https://habrastorage.org/webt/nh/3b/vg/nh3bvginmatsrsxcu6loffpn5yc.png"></sup>  <sup><a href="https://1cloud.ru/blog/ekonomiya-na-api%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Djmap%26utm_content%3Dblog">How to save using the application programming interface</a></sup> <sup><br><img src="https://habrastorage.org/webt/nh/3b/vg/nh3bvginmatsrsxcu6loffpn5yc.png"></sup>  <sup><a href="https://1cloud.ru/blog/devops-v-razrabotke-oblaka-1cloud%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Djmap%26utm_content%3Dblog">DevOps in the cloud service on the example of 1cloud.ru</a></sup> <sup><br><img src="https://habrastorage.org/webt/nh/3b/vg/nh3bvginmatsrsxcu6loffpn5yc.png"></sup>  <sup><a href="https://1cloud.ru/blog/our-system-architecture-evolution%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Djmap%26utm_content%3Dblog">Evolution of cloud architecture 1cloud</a></sup> <sup><br><br><img src="https://habrastorage.org/webt/x1/6r/xu/x16rxu3buiqhpy-2jmr3iwscep0.png"></sup>  <sup><a href="https://www.facebook.com/1cloudru/photos/a.1526614574327724/2317948435194330/">Potential HTTPS attacks and how to protect against them.</a></sup> <sup><br><img src="https://habrastorage.org/webt/x1/6r/xu/x16rxu3buiqhpy-2jmr3iwscep0.png"></sup>  <sup><a href="https://www.facebook.com/1cloudru/posts/2311523002503540">How to protect a server on the Internet: 1cloud.ru experience</a></sup> <sup><br><img src="https://habrastorage.org/webt/x1/6r/xu/x16rxu3buiqhpy-2jmr3iwscep0.png"></sup>  <sup><a href="https://www.facebook.com/1cloudru/posts/2321756981480142">Short educational program: what is Continuous Integration</a></sup> </blockquote></div><p>Source: <a href="https://habr.com/ru/post/452958/">https://habr.com/ru/post/452958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452938/index.html">The guns from the 3D printer are back, and now you can‚Äôt stop them</a></li>
<li><a href="../45294/index.html">Project Palantir</a></li>
<li><a href="../452944/index.html">What will be the ‚ÄúDialogue‚Äù of linguists and data analyst</a></li>
<li><a href="../452946/index.html">Rereading Lou Greenzaw "The philosophy of programming Windows 95 / NT"</a></li>
<li><a href="../452954/index.html">Build time, network speed and routing: how we improved our mesh network and a little about neural networks</a></li>
<li><a href="../45296/index.html">Reset Styles Using CSS Reset</a></li>
<li><a href="../452960/index.html">For all the answer! Consumer Driven Contracts through the eyes of a developer</a></li>
<li><a href="../452962/index.html">The main cause of accidents in data centers - laying between the computer and the chair</a></li>
<li><a href="../452966/index.html">The mindfulness myth: a ‚Äúneurocentric‚Äù view of meditation</a></li>
<li><a href="../452974/index.html">Asynchronous programming (full course)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
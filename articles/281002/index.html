<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to compile Qgis with debugging under Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At work, I had to face the fact that it was necessary to find out what actions were taking place in the QGIS core. QGIS (Quantum GIS) is a free cross-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to compile Qgis with debugging under Windows</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/114/61a/026/11461a026e9c4e2e88cb2d0818c7ff09"><br><br>  At work, I had to face the fact that it was necessary to find out what actions were taking place in the QGIS core.  QGIS (Quantum GIS) is a free cross-platform geo-information system.  The system itself is designed using the Qt toolkit.  Through him, I decided to put together a project.  To do this, I downloaded the qgis source from the official site and started the build.  On the site itself there is an assembly guide using Qt Creator.  Many articles about QGIS assembly and debugging have been read (some are even sensible).  But I did not find a solution to the problems that I encountered either in the manual or in any resources.  So the idea was born to write your own manual for building QuantumGIS for Windows systems using Qt Creator. <br><a name="habracut"></a><br><h3>  Before you collect </h3><br>  Initially, we download and install Qt Creator.  <a href="http://www.qt.io/ru/download-open-source/">We download from the official site</a> .  I used Qt compiled libraries.  (Warning: Qgis does not officially support Qt 5. Better use Qt 4): <a href="https://download.qt.io/archive/qt/4.8/4.8.6/">take it from here</a> .  We put the <a href="https://www.microsoft.com/en-us/download/details.aspx%3Fid%3D8442">Microsoft Windows SDK for Windows 7 and the .NET Framework 4 (ISO)</a> (needed for setupapi) <br>  In addition, CDB (from the MS Debugging Tools package) is required for debugging in Qt Creator.  <a href="https://msdn.microsoft.com/en-us/windows/hardware/hh852365">is here</a> . <br><br>  Also download and install: <a href="https://cmake.org/download/">Cmake</a> , <a href="https://sourceforge.net/projects/winflexbison/">Flex and Bison</a> .  From the official website download OSGeo4W for your version: <a href="http://www.qgis.org/ru/site/forusers/download.html">here</a> .  Run it and choose: advanced installation -&gt; install from the Internet and click all further. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/f49/575/5e0/f495755e0370464e91f7cf9083834d57.jpg"><br><br>  Select the following libraries: <i>expat, fcgi, gdal, gdal-dev, iconv, PyQt4, Qt4-Devel, qwt-devel-Qt4, sip, curl, gsl, hdf5, proj, qScintilla2, Sqlite3, libspatialIndex-devel, geos, zlib</i> .  We are waiting for it to be established. <br><br>  <a href="http://www.qgis.org/ru/site/forusers/download.html">Download the</a> source code Qgis. <br><br><h3>  Preparation for assembly </h3><br>  I guess you did it.  Install all that is required and download the source code.  Launch Qt Creator.  Then do: File -&gt; Open file or project.  Use this dialog to open the CMakeLists.txt file.  It is in the source, my path is: D: \ qgis2.8.7 \ CMakeLists.txt.  Next you will be asked to create an assembly site.  I create a specific directory: D: / Quantum-Gis. <br>  Next, you will be prompted to run Cmake build options.  We will run it with the following parameters: -DCMAKE_BUILD_TYPE = Debug. <br><br><img src="https://habrastorage.org/files/9cd/27b/d75/9cd27bd75be04ca48d771489b24f80a5.jpg"><br><br>  After running Cmake, we will specify the path to the folder where the QGIS sources are located and the path to the folder where the configuration will be written. <br><br><img src="https://habrastorage.org/files/011/365/8d6/0113658d627542168c9fd3a3514de83c.jpg"><br><br>  After that, click ‚ÄúConfigure‚Äù and select the ‚ÄúNMake Makefiles‚Äù compiler and leave the ‚ÄúUse default native compilers‚Äù checkbox.  Cmake will check the configuration and availability of the necessary components (marked in red).  I will show my configuration. <br><br>  BISON_EXECUTABLE C: /cygwin64/bin/bison.exe <br>  CMAKE_INSTAL_PREFIX C: / Program Files / qgis2.8.7 <br>  EXPAT_INCLUDE_DIR C: / OSGeo4W64 / include <br>  EXPAT_LIBRARY C: /OSGeo4W64/lib/expat.lib <br>  FLEX_EXECUTABLE C: /cygwin64/bin/flex.exe <br>  GDAL_INCLUDE_DIR C: / OSGeo4W64 / include <br>  GDAL_LIBRARY C: /OSGeo4W64/lib/gdal_i.lib <br>  GEOS_INCLUDE_DIR C: / OSGeo4W64 / include <br>  GEOS_LIBRARY C: /OSGeo4W64/lib/geos_c.lib <br>  POSTGRESQL_INCLUDE_DIR C: / OSGeo4W64 / include <br>  POSTGRESQL_LIBRARY C: /OSGeo4W64/lib/libpq.lib <br>  PROJ_INCLUDE_DIR C: / OSGeo4W64 / include <br>  PROJ_LIBRARY C: /OSGeo4W64/lib/proj.lib <br>  PYRCC4_PROGRAM C: /OSGeo4W64/bin/pyrcc4.exe <br>  PYTHON_INCLUDE_PATH C: / Python27 / include <br>  PYTHON_LIBRARY C: /Python27/libs/python27.lib; <br>  PYUIC4_PROGRAM C: /OSGeo4W64/apps/Python27/Lib/site-packages/PyQt4/uic/pyuic.py <br>  QSCINTILLA_INCLUDE_DIR C: / OSGeo4W64 / include / qt4 <br>  QSCINTILLA_LIBRARY C: \ OSGeo4W64 \ lib \ qscintilla2.lib <br>  QSCI_SIP_DIR C: \ OSGeo4W64 \ include <br>  QT_QMAKE_EXECUTABLE C: /Qt/qt-4.8.6-x64-msvc2010/qt-4.8.6-x64-msvc2010/bin/qmake.exe <br>  QWT_INCLUDE_DIR C: / OSGeo4W64 / include / qwt <br>  QWT_LIBRARY C: /OSGeo4W64/lib/qwt5.lib <br>  SETUPAPI_LIBRARY C: / Program Files (x86) / Windows Kits / 8.1 / Lib / winv6.3 / um / x64 / SetupAPI.Lib <br>  SPATIALINDEX_INCLUDE_DIR C: / OSGeo4W64 / include / spatialindex; C: / OSGeo4W64 / include <br>  SPATIALINDEX_LIBRARY C: /OSGeo4W64/lib/spatialindex-64.lib; C: /OSGeo4W64/lib/spatialite_i.lib; C: /OSGeo4W64/lib/spatialindex_c-64.lib <br>  SPATIALLITE_INCLUDE_DIR C: /OSGeo4W64/libspatialite-4.3.0a/src/headers <br>  SPATIALLITE_LIBRARY C: /OSGeo4W64/lib/spatialite.lib <br>  SQLITE3_INCLUDE_DIR C: / OSGeo4W64 / include <br>  SQLITE3_LIBRARY C: /OSGeo4W64/sqlite3.lib <br>  TXT2TAGS_EXECUTABLE TXT2TAGS_EXECUTABLE-NOTFOUND <br><br><img src="https://habrastorage.org/files/30e/7cc/c93/30e7ccc93d224a2b8cbe2c5a7c93bac8"><br><br>  The configuration should pass without errors.  (Attention! I recommend setting the environment variables on folders, otherwise you will have to manually register all the paths).  After a successful configuration, click "Generate" and generate configuration files.  Next, close Cmake and return to Qt Creator.  Click the "Finish" button. <br><br><h3>  Build project </h3><br>  Now for the project itself.  Go to the tab "Project".  At the top is the "Manage" button.  In the window that opens, on the ‚ÄúBuild and Run‚Äù tab -&gt; ‚ÄúBasic‚Äù, specify the project directory, for example, D: \ Quantum-GIS.  On the Text Editor tab -&gt; File Encoding Behavior -&gt; Default is windows-1251 / CP1251.  Next, go back to the tab "Build and Run" -&gt; "Compilers" and make sure that among the discovered there are at least some of the compilers below presented. <br><br><img src="https://habrastorage.org/files/5c1/4e8/652/5c14e865236744098d575947ffb1d76a"><br><br>  On the "Debuggers" tab (here) there should be these debuggers (versions may vary). <br><br><img src="https://habrastorage.org/files/3c3/525/cef/3c3525cef583410480b526cb21f3b954"><br><br>  Next, select the ‚ÄúQt Versions‚Äù tab, click the ‚ÄúAdd‚Äù button and specify the path to the previously installed Qt C: \ Qt \ 4.8.6 \ bin \ qmake.exe library.  In the name of the profile we register for example, Qt 4.8.6 MSVC2010 64bit. <br>  Now you can make a bunch of tools.  Go to the "Components", click "Add" and in the properties of the new bundle indicate the components.  I have these: <br><br><img src="https://habrastorage.org/files/d79/572/901/d7957290195446d59923778a686ae84f"><br>  <i>(compiler and debugger you can have your own)</i> <br><br>  Close the "Options" by clicking the "Apply" button.  The project is ready for assembly.  To collect it you need to click on the hammer icon below.  Compilation should be done without errors. If there are no errors, it should be reset to the created folder where the QGIS files and associated libraries were compiled: <br><br>  <i>expat.dll, freexl.dll, gdal200.dll, geos_c.dll, hdf5.dll, iconv.dll, jpeg.dll, jpeg12.dll, libcurl.dll, libpq.dll, libtiff.dll, libxml2.dll, ogdi. dll, proj.dll, qscintilla2.dll, QtCore4.dll, QtGui4.dll, QtNetwork4.dll, QtSql4.dll, QtSvg4.dll, qwt5.dll, QtXml4.dll, spatialindex-64.dll, spatialite.dll, sqlite3. dll, szip.dll, xerces-c_3_1.dll zlib.dll.</i> <br><br>  All libraries are located in the folder C: \ OSGeo4W64 \ bin, I connected Qt libraries from compiled libraries.  Next, copy the folder C: \ OSGeo4W64 \ etc to the folder with the compiled QGIS files, in my case: D: \ Quantum-GIS \ output.  Also copy from C: \ OSGeo4W64 \ bin two qgis.bat and o4w_env.bat batch files to the D: \ Quantum-GIS \ output \ bin directory.  Let's return to the Qgis startup settings in Qt cCreator.  On the "Project" tab, open the "Launch" tab.  Specify the directories where the QGIS exe-file and the working directory are located. <br><br><img src="https://habrastorage.org/files/010/5ba/188/0105ba18871f45f8bd617c568c140ff5"><br><br>  If QGIS is running, now you can debug by pressing the button with the ladybug.  Enjoy. <br><br><h3>  Possible mistakes </h3><br>  1. Python library.  The official qgis build guide recommends choosing the python27 library installed in osge4w.  I did not manage to collect with her.  I downloaded a separate python27 library from the official Python website.  It worked. <br>  2. After installing Qt, create a QTDIR environment variable.  If this is not done there will be problems with the Qt libraries, the project will not be able to find them.  (the same should be done with Qt_MOC, QT_RCC, QT_UIC but it worked for me without it). <br>  3. Problems with libraries.  If you build the application in release mode, and the library in debug mode, then errors will occur.  Ensure that both the project and the library are the same version.  (I had this with the qwt library. The compiler issued QWidget: Must construct a QApplication before a QPaintDevice. Replaced the version of the library - it worked). <br><br>  Hope my article will be helpful.  I collected Qgis version 2.8.7 on a Windows 7 x64-bit system. </div><p>Source: <a href="https://habr.com/ru/post/281002/">https://habr.com/ru/post/281002/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280990/index.html">Launch of Google Auto service in Russia</a></li>
<li><a href="../280994/index.html">MSA and StoreEasy News</a></li>
<li><a href="../280996/index.html">Development under tvOS: tips & tricks</a></li>
<li><a href="../280998/index.html">Library for working with cookies (tasty-cookies)</a></li>
<li><a href="../281000/index.html">Installing Mercurial on shared hosting</a></li>
<li><a href="../281004/index.html">PHP vs. Ruby: Let's live together</a></li>
<li><a href="../281008/index.html">Layout of margins and padding in CSS</a></li>
<li><a href="../281012/index.html">Why do we hate site notifications?</a></li>
<li><a href="../281014/index.html">WhatsApp messenger got full end-to-end default encryption</a></li>
<li><a href="../281016/index.html">IBM uses resources of World Community Grid to fight tuberculosis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
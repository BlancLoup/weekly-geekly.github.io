<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>QoS implementation in Qsan storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Technology QoS (Quality of Service) in the network infrastructure is known for a long time. Later, similar algorithms were used in the field of data s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>QoS implementation in Qsan storage</h1><div class="post__text post__text-html js-mediator-article"><p>  Technology QoS (Quality of Service) in the network infrastructure is known for a long time.  Later, similar algorithms were used in the field of data storage, becoming the de facto standard for systems that pretend to the Enterprise market.  In <a href="https://www.qsan.su/">Qsan</a> storage <a href="https://www.qsan.su/">,</a> this functionality became available relatively recently with the advent of firmware version 1.4.0. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/yu/1x/ks/yu1xkspg6iuscrl6j5xrlg86gf4.png"></div><a name="habracut"></a><br><p>  The very idea of ‚Äã‚Äãsetting priorities for different tasks (namely, this is the essence of the work of QoS algorithms) comes from equal access to resources by the hosts.  If the overall performance of the storage system is sufficient, then infrequent bursts of activity of certain services can be compensated for by reduced performance requirements from other applications.  However, in real life, several critical performance services are often located on the same storage system.  If you rely on their equal access to resources, then at least one of them can be ‚Äúbraked‚Äù due to the work of other applications. </p><br><p>  In addition to productive applications that are critical to performance indicators, developers' test environments can also be located on the storage system, which should also be limited in performance so as not to interfere with basic work.  Plus, there are always planned and unscheduled work on systems maintenance, which also require certain resources, taking them away from the main services.  Therefore, the ranking of applications located on the storage system, in accordance with their priority of access to resources in terms of performance will be very useful. </p><br><p>  From the point of view of QoS settings, there are two main policies: </p><br><ul><li>  Setting maximum values ‚Äã‚Äã(limited from above) </li><li>  Setting the minimum desired values ‚Äã‚Äã("lower" restriction) </li></ul><br><p>  For the operation of QoS, one of them is chosen.  If necessary, you can always switch settings on the fly.  The QoS policies themselves are applied to individual volumes. </p><br><p>  IOPS and throughput parameters are used as maximum values.  The default value is Unlimited.  In the case of setting specific values, performance will be limited to these numbers. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/p3/6v/d6/p36vd65tcj-3lpz_6ob0luwacys.png"></div><br><p>  If you use the "bottom" limit, you must set the priority of access to resources: low, medium or high.  In the case of high priority, you can also set the minimum desired value for the Response Time parameter.  This parameter is not for nothing designated as desired, since  it is far from always possible to achieve it due to the configuration of the drives used and the current load on the system. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ia/im/j-/iaimj--bat0jkq38mdeduc2vgae.png"></div><br><h2>  Checking in </h2><br><p>  As a test bench, one server was used, connected directly to the <a href="https://qsan.su/goods/sistemyi-xraneniya-dannyix/xcubesan-xs5224-s-xs5224-d/">XS5224</a> storage <a href="https://qsan.su/goods/sistemyi-xraneniya-dannyix/xcubesan-xs5224-s-xs5224-d/">system</a> via the Fiber Channel interface.  The storage was filled with NL-SAS 7.2K disks assembled into 3 RAID-0 pools.  On each of the pools was created one volume, a total of 3 volumes.  The load was the IOmeter test. </p><br><h3>  Using priority access to resources </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/8w/zp/g7/8wzpg78tybbyvpyiszhlffnqxna.png"></div>  <i>QoS settings</i> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/fr/q0/fy/frq0fyhinva8acqemiilwxqodae.png"></div>  <i>Test results</i> <br><br><p>  It is clearly seen that when the priority changes, the performance is redistributed in the appropriate order. </p><br><h3>  Using priority access to resources with the desired access time </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/30/nf/a7/30nfa7lh_w5uni0pd9dhv1aucse.png"></div>  <i>QoS settings</i> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/wh/an/wq/whanwqhwwx9-kzxmy3qg7xbtx2o.png"></div>  <i>Test results</i> <br><br><p>  When priority changes, performance is redistributed in the appropriate order.  For Vol-1 volume, the Response Time value tends to the specified 25ms, but does not reach it due to the lack of performance of the RAID group. </p><br><h3>  Using IOPS Restriction </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ik/ht/5h/ikht5hjbnfzz9twg-f50luxv-bm.png"></div>  <i>QoS settings</i> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/-r/eu/p4/-reup4gi_qwxee6pznutmuo8a58.png"></div>  <i>Test results</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  When performance is limited in IOPS for some volumes, the remaining volumes receive an increase in speed due to the resources released. </p><br><h3>  Using bandwidth limits </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/yb/3p/hk/yb3phkfac48xabjozsc4h7pgojq.png"></div>  <i>QoS settings</i> <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/n6/ts/nh/n6tsnhrcnollithw-e3wrnzbbq8.png"></div>  <i>Test results</i> <br><br><p>  When capacity is limited in terms of throughput, the performance of individual volumes also increases due to the freed up resources. </p><br><blockquote>  QoS functionality in <a href="https://qsan.su/goods/sistemyi-xraneniya-dannyix/">Qsan storage</a> is one of the key tools to increase performance by balancing and setting priorities.  As the tests showed, the algorithms work quite predictably.  It is also important to note that the QoS functionality is absolutely free.  And it can be used not only in new systems, but also in storage systems that have been in use for a long time by updating the firmware. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/456370/">https://habr.com/ru/post/456370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456358/index.html">13 most mined articles last year</a></li>
<li><a href="../45636/index.html">Usability vs marketing</a></li>
<li><a href="../456362/index.html">Level 6 designer: how we motivate and develop designers</a></li>
<li><a href="../456366/index.html">How I was creating the LED HEART box</a></li>
<li><a href="../456368/index.html">Perform public and private transactions on the JPMorgan Quorum blockchain using Web3</a></li>
<li><a href="../456372/index.html">SimbirSoft invites IT-specialists to the Summer Intensive-2019</a></li>
<li><a href="../456374/index.html">Plasma Cash blockchain status data structures</a></li>
<li><a href="../456376/index.html">Not a single spring boot: review alternatives</a></li>
<li><a href="../456380/index.html">Open Day at the Faculty of Programming in Netology</a></li>
<li><a href="../456382/index.html">Collaboration and automation in the frontend. What we have learned for 13 schools</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
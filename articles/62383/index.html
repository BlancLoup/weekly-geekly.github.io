<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python vs. Bash scripts - 2 or Tips & Tricks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quite a while ago I wrote an article in which I gave examples of the basics of working with the system using Python scripts. Because of the glimpse of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python vs. Bash scripts - 2 or Tips & Tricks</h1><div class="post__text post__text-html js-mediator-article"><img src="http://techlive.org/wp-content/uploads/2008/10/python-logo.png" alt="image" align="right"><br>  Quite a while ago I wrote <a href="http://habrahabr.ru/blogs/python/47474/">an article</a> in which I gave examples of the basics of working with the system using Python scripts.  Because of the glimpse of the dropped phrase (just look at the name of the topic), the article received quite a lot of comments of a holivar and not very character.  Someone might have wanted to take advantage of Python for administration (now this kind of python tool is just gaining popularity).  So why not lure some more like-minded people to your camp?  :) Meet - a small selection of simple techniques for those or other purposes. <br><a name="habracut"></a><br><h4>  Files and something else </h4><br>  So, right off the bat!  First, let's take a banal procedure - copying a file.  I still remember this horror that I had to write on bare C - reading a file line by line into a variable and rewriting it at a different address ... But you can easily use more simple methods!  :) The first way that a Linux user comes to mind is most likely something like <br><blockquote><code><a href="http://s-c.me/2368/s"></a> <a href="http://s-c.me/2368/h"></a> <font color="black">Copy Source | Copy HTML <font color="#0000ff">import</font> subprocess <b>subprocess</b> .Popen( <font color="#008000">'cp /usr/share/file.txt /home/user/file.txt'</font> , shell=True)</font></code> <ol> <li> <code><font color="black"><a href="http://s-c.me/2368/s"></a> <a href="http://s-c.me/2368/h"></a> Copy Source | Copy HTML <font color="#0000ff">import</font> subprocess <b>subprocess</b> .Popen( <font color="#008000">'cp /usr/share/file.txt /home/user/file.txt'</font> , shell=True)</font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/2368/s"></a> <a href="http://s-c.me/2368/h"></a> Copy Source | Copy HTML <font color="#0000ff">import</font> subprocess <b>subprocess</b> .Popen( <font color="#008000">'cp /usr/share/file.txt /home/user/file.txt'</font> , shell=True)</font></code> </li> </ol></blockquote><br>  Only here such a method will work only if there is a bash or similar interpreter (well, or it requires prescription of aliases).  What for?  After all, you can use the excellent <b>shutil</b> module method: <br><blockquote> <code><a href="http://s-c.me/2367/s"></a> <a href="http://s-c.me/2367/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">import</font> shutil </li><li>  <b>shutil</b> .copyfile ( <font color="#008000">"C: \\ My Documents \\ mydoc.doc"</font> , <font color="#008000">"C: \\ My Documents \\ mydoc_2.doc"</font> ) </li></ol></blockquote><br>  Renaming is done in a similar way: <br><blockquote> <code><a href="http://s-c.me/2380/s"></a> <a href="http://s-c.me/2380/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">import</font> os </li><li>  <b>os</b> .rename ( <font color="#008000">"/home/user/testfile.txt"</font> , <font color="#008000">"/home/user/test.txt"</font> ) </li></ol></blockquote><br>  You can delete a file, respectively, using <b>os.remove ()</b> . <br><br>  To write data to a file, you can use both the python <b>write ()</b> and the ‚Äústream‚Äù version (hippoplus, hello to you): <br><blockquote> <code><a href="http://s-c.me/2369/s"></a> <a href="http://s-c.me/2369/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  myfile = <b>open</b> ( <font color="#008000">"/home/user/testfile.txt"</font> , <font color="#008000">"w"</font> ) </li><li>  <font color="#0000ff">print</font> &gt;&gt; myfile, <font color="#008000">"I want to drink some beer with Guido"</font> </li><li>  myfile.close () </li></ol></blockquote><br>  <b>upd:</b> More modern method from username <a href="http://bioroot.habrahabr.ru/"><img src="https://habrastorage.org/getpro/habr/post_images/f67/c7f/235/f67c7f2351d393981c01f3b79c070cae.png" alt="image"></a>  <a href="http://bioroot.habrahabr.ru/">bioroot</a> (enabled by default only starting from version 2.6, in 2.5 it can be taken from __future__: <br>  &gt;&gt; from __future__ import with_statement): <br><blockquote> <code><a href="http://s-c.me/2384/s"></a> <a href="http://s-c.me/2384/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">with</font> <b>open</b> ( <font color="#008000">"/home/user/testfile.txt"</font> , <font color="#008000">"w"</font> ) <font color="#0000ff">as</font> myfile: </li><li>  <font color="#0000ff">print</font> &gt;&gt; myfile, <font color="#008000">"I want to drink some beer with Guido"</font> </li></ol></blockquote><br><br>  Sometimes (for example, when reading logs) you may need to read a file line by line, starting from the end.  This is done elementary: <br><blockquote> <code><a href="http://s-c.me/2371/s"></a> <a href="http://s-c.me/2371/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">for</font> line <font color="#0000ff">in</font> <b>reversed</b> ( <b>open</b> ( <font color="#008000">"/ var / log / messages"</font> ). readlines ()): </li><li>  <font color="#0000ff">print</font> line </li></ol></blockquote><br>  And to read a line under a certain number ‚Äî you can use both the standard file reading per sheet and the <b>linecache</b> module: <br><blockquote> <code><a href="http://s-c.me/2372/s"></a> <a href="http://s-c.me/2372/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  line = <b>linecache</b> .getline ( <font color="#008000">"C: \\ test.txt"</font> , <font color="#008000">2</font> ) </li><li>  <font color="#0000ff">print</font> line </li><li>  <font color="#696969"># or</font> </li><li>  line = <b>open</b> ( <font color="#008000">"C: \\ test.txt"</font> ). readlines () [ <font color="#008000">1</font> ] </li><li>  <font color="#0000ff">print</font> line </li></ol></blockquote><br>  By the way, a binary file is no more difficult to read: <br><blockquote> <code><a href="http://s-c.me/2373/s"></a> <a href="http://s-c.me/2373/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  pic = <b>open</b> ( <font color="#008000">"C: \\ Pictures \\ V4erashnaya_pyanka.bmp"</font> , <font color="#008000">"rb"</font> ) </li><li>  buf = pic.read ( <font color="#008000">5</font> ) <font color="#696969"># read the first 5 bytes</font> </li><li>  <font color="#0000ff">print</font> buf </li></ol></blockquote><br>  In addition, in order not to get lost: <br><blockquote> <code><a href="http://s-c.me/2374/s"></a> <a href="http://s-c.me/2374/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">print</font> pic.tell () <font color="#696969"># number of bytes from the beginning of the file</font> </li><li>  pic.seek (0) <font color="#696969"># back to top</font> </li></ol></blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If, for example, we write a program with plug-in support, we may need to search through files in a specific directory: <br><blockquote> <code><a href="http://s-c.me/2377/s"></a> <a href="http://s-c.me/2377/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">for</font> filename <font color="#0000ff">in</font> <b>os</b> .listdir ( <font color="#008000">"../plugins"</font> ): </li><li>  <font color="#0000ff">print</font> (filename) </li></ol></blockquote><br>  And you can do the same for the mask: <br><blockquote> <code><a href="http://s-c.me/2378/s"></a> <a href="http://s-c.me/2378/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">import</font> glob </li><li>  <font color="#0000ff">for</font> filename <font color="#0000ff">in</font> <b>glob</b> .  <b>glob</b> ( <font color="#008000">"../plugins/*.zip"</font> ): </li><li>  <font color="#0000ff">print</font> filename </li></ol></blockquote><br>  Parsim of the way: <br><blockquote> <code><a href="http://s-c.me/2381/s"></a> <a href="http://s-c.me/2381/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">print</font> <b>os</b> .path.dirname ( <font color="#008000">"/home/user/test.txt"</font> ) <font color="#696969"># directory name</font> </li><li>  <font color="#0000ff">print</font> <b>os</b> .path.basename ( <font color="#008000">"/home/user/test.txt"</font> ) <font color="#696969"># filename</font> </li></ol></blockquote><br>  Open the address or local file in the default browser (for example, when creating links in about-windows): <br><blockquote> <code><a href="http://s-c.me/2382/s"></a> <a href="http://s-c.me/2382/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">import</font> webbrowser </li><li>  <b>webbrowser</b> .  <b>open</b> ( <font color="#008000">'http://www.habrahabr.ru/'</font> ) </li><li>  <b>webbrowser</b> .  <b>open</b> (u <font color="#008000">'file: //home/user/mysite.html'</font> ) </li><li>  <b>webbrowser</b> .  <b>open</b> (u <font color="#008000">'mailto: foo@bar.com? subject = Feedback% 20message'</font> ) </li></ol></blockquote><br>  To determine the encoding of a string or file, you can use the convenient <b>chardet</b> module, and not only the encoding is returned, but also the ‚Äúconfidence‚Äù that it is defined correctly in a beautiful dictionary: <br><blockquote> <code><a href="http://s-c.me/2383/s"></a> <a href="http://s-c.me/2383/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">import</font> chardet </li><li>  str = <b>open</b> ( <font color="#008000">"/home/user/myfile.txt"</font> , <font color="#008000">"r"</font> ).  <b>readline</b> () </li><li>  enc = chardet.detect (str) </li><li>  <font color="#0000ff">print</font> enc [ <font color="#008000">'confidence'</font> ] </li><li>  <font color="#0000ff">print</font> enc [ <font color="#008000">'encoding'</font> ] </li></ol></blockquote><br>  A very handy thing when you need, for example, to bind a string with a previously unknown encoding.  True, I ran into the problem of defining mac-encodings (simple ascii is always returned, but he and Mac, that some of the characters are not encoded as usual).  In any case, linuksoidam is easier - we have <b>enca</b> and <b>iconv</b> :) <br><br>  Well, while enough?  If you like the trend, I‚Äôll try to continue the description of how to use Python to administer the system and write a couple of working examples.  And yes, thank you so much for such a thing as a Python Cookbook! </div><p>Source: <a href="https://habr.com/ru/post/62383/">https://habr.com/ru/post/62383/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62376/index.html">Dodo Task Manager</a></li>
<li><a href="../62377/index.html">Spokoino.ru - site quiet avtoinstruktorov</a></li>
<li><a href="../62379/index.html">Virtus</a></li>
<li><a href="../62380/index.html">Tariffs VDS!</a></li>
<li><a href="../62382/index.html">Purchase history and budget monitor overview on the IPS matrix. Dell 2209WA</a></li>
<li><a href="../62384/index.html">The first open national photo awards "Best Photographer" - a new project from the creators of Prophotos and Photoawards</a></li>
<li><a href="../62385/index.html">Layar - interactive reality</a></li>
<li><a href="../62389/index.html">Did you know that RAR can be stored in JPG (!) Without losing information</a></li>
<li><a href="../62390/index.html">Official photobanks of companies</a></li>
<li><a href="../62392/index.html">Scripts in UltraEdit32 v.14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
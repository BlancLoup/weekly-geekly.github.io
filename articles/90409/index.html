<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We build infrastructure based on MS products</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the publication of my first post ‚ÄúWhy I love Microsoft. Notes of Zombies ‚Äù I received quite a few letters with a similar request - to write more...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We build infrastructure based on MS products</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/2b4/344/140/2b434414030a9c18e48261db730818c4.jpg" alt="image">  After the publication of my first post <a href="http://habrahabr.ru/blogs/microsoft/89360/">‚ÄúWhy I love Microsoft.</a>  <a href="http://habrahabr.ru/blogs/microsoft/89360/">Notes of Zombies ‚Äù</a> I received quite a few letters with a similar request - to write more about the products used. <br>  Asked - get it.  When writing an article, I set myself a goal - to describe the main route.  It makes no sense to paint the details of installation and configuration - there are enough of them on the Internet.  I tried to read the post administrator knew the names of products and technologies, for which they are needed and then he could deftly google everything else.  In order to facilitate the search the key names will be in English.  If any abbreviation is unfamiliar - this is a reason to read about it.  And, yes, I will describe the solutions from Microsoft, since I only understand something about them.  I want to immediately warn you that the topic is very short-lived. <br><a name="habracut"></a><br><br>  <b>Before I start - help and appeal :)</b> <br>  After the first article I wrote many times that I am wrong, without indicating how much pleasure costs.  Kicks legal, is expensive.  They asked - we answer.  Roughly you can appreciate it like this - an Enterprise Agreement license (you can buy it from 250 PCs) will cost you 1000 Euros per workplace.  Servers in this all go down.  That is, very roughly, licensing of the spread infrastructure for 300 PCs will cost $ 300 thousand.  You will have to pay 100 thousand per year for 3 years, during this time you can install all the latest versions of the purchased software. <br>  This is the most expensive and non-hemorrhoid licensing method, others are cheaper.  By the way, if you buy Microsoft software on such a scale - my advice is to bargain. <br>  How expensive it is to decide for yourself.  Specifically for my organization, the implementation of Project Server alone allowed, due to effective planning of employees working on projects, not to hire 7 more employees to the existing 40 and thus save about 7 * $ 1,300 * 12, that is, those same 100 thousand per year, this became obvious argument for the effectiveness of the solution. <br>  Just want to make a reservation.  I do not urge to steal or on the contrary buy Microsoft software.  I call for another: It doesn‚Äôt matter whether you are free or proprietary software - think about how to build something more than an infrastructure that provides only basic services.  Build a good infrastructure, friendly to people, try to minimize the number of papers in the office, take care of the forests and let your karma rise to bright heights. <br><br>  Below is a very concise procedure.  Even so, the topic turned out to be too big, but I do not want to split it up. <br>  How things should be at certain stages will be <i>in italics</i> .  It is unlikely that you will be able to implement everything in the order given below, it is rather for the sake of coherence.  The infrastructure described below is relevant for a company with approximately 50-500 users. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>So, the actual leadership.</b>  <b>Getting started.</b> <br>  0. I really love Hyper-V.  We put Server 2008 in core mode and, all other things equal, we deploy the infrastructure on virtual machines. <br>  0.1 Backups backups backups.  We do not put into operation any system without understanding how we will conduct the backup. <br>  1. We put the server, we lift the Active Directory.  We are raising the basic services of DNS, DHCP.  At the first opportunity we put the second serer, on which we also raise AD.  Although many small organizations neglect this, it is very important, because if a single domain controller dies, it will be very sad.  <b>&lt;update 04/12/10 10:15&gt; We</b> assign the second domain controller as the Global Catalog server.  <b>/ update</b> Set up time synchronization on a domain controller with external reference time sources.  NTP. <br>  1.1 DNS.  Think in advance about how your domain will be called, whether the name will coincide with the real name or differ from it.  Read about Split DNS.  It is convenient for people to memorize single addresses for services.  For example, mail.yourdomain.ru - should always be mail, regardless of the outside or inside the company's network, an employee works.  If the DNS names of the external and internal networks are different - raise the zone of yourdomain.ru within the network <br>  1.2 DHCP.  There should be no fixed addresses.  Use Reservation for MAC addresses of devices.  This is necessary so that you can at any time have complete information on the distribution of addresses on the network. <br>  1.3 We get in AD all users.  Each unit is allocated Organizational Unit in accordance with the hierarchy of the organization.  We push users by OU.  For each OU we create a group in which we include all users.  Each user - an account.  No records "Storekeeper" for 12 storekeepers at once.  For computer accounts, it is also desirable to have a separate OU hierarchy according to the organization hierarchy ‚Äî this makes it easier to bind group policies for all PCs in a department. <br>  1.4 We give the secretaries the right to change the field phone numbers in AD.  We train.  Fill in and maintain this data up to date is now their responsibility.  They or HR must keep up to date the name of the position and department in AD for all employees.  Also, when transferring employees, the administrator drags the accounts into the required OU, changes the group membership.  We make regulations - how a user gets into our network when applying for a job, what we do when he is fired, when transferred to another department.  We introduce standards for the formation of the Login name and mailing addresses of employees. <br>  2. We drive users' computers to the domain. <br>  3. If possible, deprive users of administrative rights.  Part of the software, with its ordinary work, wants to write data in the places prohibited by default - we catch it with the help of special software, for example Process Monitor, fine-tune the rights.  Once we understand the program, we write out to which branches of the registry and directories it should additionally have access, make settings, distribute them using Group Policy to the appropriate OU.  With the help of GP we catch people with the nearest printers.  We add to the login script software that collects data on our PCs ‚Äî the name of the user who logged in, what the hardware costs, the IP address, the MAC address, and so on, and adds all this stuff to the server. <br>  4. If necessary, we limit access to external drives, for example, using Device Lock. <br>  <b>&lt;update 9.04.10 15:55&gt;</b> You can also configure this using group policies.  <b>/ update</b> <br>  5. Set up a corporate antivirus, monitor its updates <br>  6. We lift and configure WSUS.  Do not be afraid, only updates approved by you will be placed. <br>  7. Sharing file resources on server.  We fight with mortal combat, so that resources can be shared on groups, not on personal employees.  Otherwise, very soon the system of rights turns into a mess, it is impossible to give a new employee the same rights as another employee who is already working, and so on.  It is very important to convey to the management why it is necessary to do this way and receive requests from them for changes of rights in this section. <br>  8. Raise the SQL server.  We need it to keep 1C bases there and in general a good thing. <br><br>  <i>All our users work with shared resources on the server.</i>  <i>We are well protected from virus intrusions.</i>  <i>Thus, we have more or less equipped the workplaces of employees.</i> <br><br>  9. We raise and configure the ISA server to access the Internet.  Now his successor ForeFront TMG, we have not yet implemented.  We configure Proxy autodiscovery and / or prescribe all our proxies in IE with group policies, we register the internal network in the address of exceptions - access to it by proxy.  Do not forget to think and check how laptops will work outside our network.  Will they not try to get into the Internet through procs? <br>  9.1 We configure rules for user access outside.  The rules that allow access anywhere based on the IP address of the employee - this is at a minimum, only for the director's communicator.  We create groups in AD according to the type of access, for example: ‚Äúonly according to the white list‚Äù, ‚Äúanywhere‚Äù.  We put groups of divisions into these groups.  For example, the Warehouse group is stuffed into the White List Only group.  We create on ISA a white list of sites, a black list of sites, configure rules with access rights in accordance with AD groups and site lists.  For client banks and other software that does not know how to authenticate on our server, we turn on the monitor in ISA, look where IT breaks and allow all traffic to the client-bank server IP not based on the user account, but on the basis of the computer‚Äôs IP, ideally We also prescribe protocols. <br>  The general logic of the rules on the ISA - with very rare exceptions, all traffic must go through our gateway according to the rules that are tied to the user's domain account. <br>  Personally, I do not like the ISA Firewall Client, we always do without it and advise you.  All settings on the server is centralization. <br>  9.2 If we have branches - a tunnel between ISA servers, if we have remote users - VPN access to our network. <br>  9.3 If you need good restrictions for users - for example, Ivanov can download no more than 200Mb per day - Bandwith Splitter <br>  9.4 All logs, of course, are stored on the SQL server and not for seven days, but for at least 45 - someday you will definitely need to generate a report of who downloaded how much in a month. <br><br>  <i>Our users work in the Internet.</i>  <i>Internet access is clearly delimited by rules.</i>  <i>All the moves we recorded for subsequent analysis.</i>  <i>Remote users have the ability to connect and work within our network.</i> <br><br>  10. We lift the server of terminals.  We drive users who work from home, those who are actively working with our resources from a remote branch, perhaps part of office users. <br>  11. Raise the Certification Authority, it will be needed. <br>  12. We lift Exchange Server.  Mail users must lie on it, no Personal Folders - only for long-term archives.  Work of users - through Outlook.  If the organization is obsessed with security - Message Mirror mail to a separate address, we think about how often we will clean it and where we will archive its contents.  We check the work of the Global Address List, create its offline version.  We adjust restrictions for the size of the letter, a box and so on.  We configure antivirus and antispam on the server.  We set up collective mailboxes of the type support@yourdomain.ru, give those in charge the right to write on behalf of the support, we train them.  We are setting up Public Folders, stuffing the general calendars of meeting rooms, demostands, and so on, we think that we also have a collective one.  If you find it convenient, we keep personal calendars on Outlook and fiddle with their superiors.  You do not need to do a common task system based on Outlook tasks ‚Äî Outlook tasks are inconvenient for teamwork. <br>  13. We publish our Exchange through ISA, check the passage of external mail in both directions, do not forget about open relay, sign everything we need with certificates, check the operation of Outlook Web Access, enable OMA, publish RPC over HTTP.  For laptop users, we configure Outlook for RPC over HTTPS, caching and offline address book.  If you need to cache shared folders, add them to your Favorite folders in Outlook and then to Favorites. <br><br>  <i>We have mail, people can connect using Outlook both from inside the network and from the outside - just access to the Internet.</i>  <i>We can work using the Web interface, as well as from our mobile devices.</i>  <i>From everywhere we see the same contents of the box.</i> <i><br></i>  <i>We learned to work collectively with support@yourdomain.ru addresses.</i> <br><br>  14. We read about Unified Communications.  We set up Office Communications Server and make friends with our PBX.  Customize routing and numbering plans.  We set up his friendship with a list of users from AD. <br>  We arrange for interested users of Office Communicator, issue headsets. <br><br>  <i>Calls via office communicator to other office communicators, internal phones, city.</i>  <i>All without additional prefixes.</i>  <i>The communicator knows all users from AD, along with their internal and mobile phones.</i> <br><br>  15. We raise Sharepoint Server.  We put in there a beautiful list of employees, data on the birthdays of employees, but without a year of birth (girls are worried), company news.  Then we begin to create a structured information repository there, we are trying to make the main part of the file dump move smoothly there.  Later we pull up work processes, applications and so on.  We throw back reservations negotiation and other things that were kept in public folders. <br>  16. If we are actively working with projects - we deploy Project Server <br><br>  <i>We have a corporate portal - a single place for reference information, basic workflows, structured file storage.</i> <br><br>  <b>&lt;update 04/09/10 14:25&gt;</b> When the organization has grown, we implement the application processing system on our portal.  We do this using Workflow at Sharepoint.  Read about InfoPath and Sharepoint Designer.  Applications must come to a single place, be assigned to employees, the author of the application must see its current status, receive notifications on it.  <b>/ update</b> <br><br>  We describe the main methods of working with our infrastructure, and better do video courses.  We spread to common areas (I‚Äôm talking about the server), we train people to look in there by alerts on the portal - work with new services will be described there.  We introduce familiarization with these documents as one of the required items for the first day of work of a new employee. <br>  The described actions should be enough to implement all the examples of use given <a href="http://habrahabr.ru/blogs/microsoft/89360/">in this topic.</a>  If you forgot something - write.  The Microsoft System Center theme remains unlit, be sure to read about it, but this is a product aimed at bringing benefits not to ordinary users, but to system administrators. <br>  <b>&lt;update 04/09/10 14:25&gt;</b> Thanks for the comments.  In general, with such a scale of organization, it is already time to think about simplifying the life of the IT department; for this, all the necessary technologies are present.  Read about System Center.  <b>/ update</b> <br><br>  Good luck. </div><p>Source: <a href="https://habr.com/ru/post/90409/">https://habr.com/ru/post/90409/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../90397/index.html">Ubuntu: 12 million users</a></li>
<li><a href="../90399/index.html">Love your client ... or how not to become "Tajik" in website development</a></li>
<li><a href="../90403/index.html">Do you write something on the LiveJournal blog?</a></li>
<li><a href="../90406/index.html">uTorrent Vuze faster by 16%</a></li>
<li><a href="../90408/index.html">DevConf :: RichClient / Call to papers /</a></li>
<li><a href="../90410/index.html">What company do you have RAM RAM?</a></li>
<li><a href="../90411/index.html">A set of five cards for Modern Warfare 2 sold 2 500 000 copies</a></li>
<li><a href="../90412/index.html">About some features of writing distribution packages on NSIS for x64 systems</a></li>
<li><a href="../90414/index.html">Sun Tech Days 2010 - how it was</a></li>
<li><a href="../90416/index.html">Sync phone contacts with Ubuntu One</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Thunderargs: practice of use. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="History of creation 
 Part 1 

 Good day. In brief, let me remind you that thunderargs is a library that allows you to use annotations for processing ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Thunderargs: practice of use. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/223041/">History of creation</a> <br>  <a href="http://habrahabr.ru/post/224705/">Part 1</a> <br><br>  Good day.  In brief, let me remind you that thunderargs is a library that allows you to use annotations for processing incoming arguments. <br><br>  In addition, it makes it possible to simply throw a gate, which will pull these same arguments for the function from somewhere else.  For example, from the request object in a flake.  And in the end, instead of 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/ugly_calc', dont_wrap=True) def ugly_calc(): x, y = int(request.args['x']), int(request.args['y']) op_key = request.args.get('op') if not op_key: op_key = '+' op = OPERATION.get(op_key) return str(op(x, y))</span></span></code> </pre> <br>  doing <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/calc') def calc(x:Arg(int), y:Arg(int), op:Arg(str, default='+')): return str(OPERATION[op](x, y))</span></span></code> </pre><br><br>  I think everyone at least roughly understood what it would be about in the article.  All that it describes is reflections on the future of the project and the approximate arrangement of the Milestone on it.  Well, of course, the first sketches of all sorts of different features. <br><br><h4>  In this part </h4><br><ul><li>  Consider the structural changes in the project and a couple of critical errors in the initial structure. </li><li>  We will understand how validators work and how you can customize the errors they generate. </li><li>  Create a rudiment of specialized arguments (IntArg, StrArg, ListArg, and so on) </li><li>  Prepare a class that will automatically pull an object out of the database by id received in the request </li><li>  We will generate entry points for the model class. </li><li>  Implement the listeners and see how you can make a validator for several arguments. </li><li>  Make sure that the information about the structure of the arguments can be safely transferred to the database, and nothing for this we will not </li><li>  And, finally, we speculate about the small interesting, and not implemented in the framework of these experiments </li></ul><br><a name="habracut"></a><br><br><h4>  Structural changes, or why I need to kick </h4><br>  Well, now briefly about the important events in the fate of the project.  Firstly, I finally read how Armin Ronasher <a href="http://flask.pocoo.org/docs/0.10/extensiondev/">recommends making modules to a flag</a> , and brought his ‚Äúpet‚Äù to the right kind.  To do this, I completely separated the main library functionality (this library and turnip remained under the name thunderargs) from the functionality that allows using it as a supplement to Flask (now this crap can be put under the name flask-thunderargs, as you can guess).  Yes, in fact, this is just a separation of the interface from the core, which is viable without this interface.  And this should have been done from the very beginning.  For my hindsight, I paid almost five hours spent on reorganization. <br>  In general, I will briefly describe what has changed and what it means: <br><br><h5>  Now we have two - the core and the interface to the fusion </h5><br>  The main library, as I said, can be used without any external interfaces.  And, of course, it can be used to create your own interfaces.  For example, to other web frameworks.  Or to argparse.  Or to gabber bot.  Yes, in general, to anything. <br>  In fact, from this point the project is only in the black. <br><br><h5>  flask-thunderargs is now a full-featured flask module </h5><br>  The only trouble is that the interface itself is just tiny.  In fact, it is all enclosed in <a href="https://bitbucket.org/dsupiev/flask-thunderargs/src/668fb248df604bca7e053497075c3dda1e3fc7ec/flask_thunderargs/__init__.py%3Fat%3Ddefault">this</a> file.  If someone decides to write their own interface to another lib, you can safely rely on it. <br>  And the endpoint initialization process has changed, of course.  Now the minimal application looks like this: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask.ext.thunderargs <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ThunderargsProxy <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> thunderargs <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Arg app = Flask(__name__) ThunderargsProxy(app) @app.route(<span class="hljs-string"><span class="hljs-string">'/max'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, multiple=True)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(max(x)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> __name__ == <span class="hljs-string"><span class="hljs-string">'__main__'</span></span>: app.run()</code> </pre><br><br>  So it goes. <br><br><h4>  Making mistakes </h4><br><br>  In the last part, we already figured out how to create our own validators.  And made sure that it is quite simple.  I recall: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">less_than_21</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x &lt; <span class="hljs-number"><span class="hljs-number">21</span></span> @app.route(<span class="hljs-string"><span class="hljs-string">'/step5_alt'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step5_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offset: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[lambda x: x &gt;= </span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> and x &lt; len</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(elements)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">, limit: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[less_than_21])</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(elements[offset:offset+limit])</code> </pre><br><br>  As we see, there are two options for creating them.  One - inline, with the help of lambda.  The second is fully weighted.  Now I want to show why the full-weight version is preferable. <br><br>  The person who tested the experiments of the last part could have noticed that the validators created by the factory throw pretty beautiful and understandable errors: <br><pre> <code class="python hljs">thunderargs.errors.ValidationError: Value of `limit` must be less than <span class="hljs-number"><span class="hljs-number">21</span></span></code> </pre><br><br>  But our example gives us incomprehensible and speaking errors: <br><pre> <code class="python hljs">thunderargs.errors.ValidationError: Argument limit failed at validator <span class="hljs-comment"><span class="hljs-comment">#0.Given value: 23</span></span></code> </pre><br><br>  To handle this is quite simple.  Moreover, our mistake will be even better than the original one: <br><pre> <code class="python hljs">experiments.custom_error.LimitError: limit must be less than <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> more than <span class="hljs-number"><span class="hljs-number">0.</span></span> Given: <span class="hljs-number"><span class="hljs-number">23</span></span></code> </pre><br><br>  For this result, we need the following code: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LimitError</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(ValidationError)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> thunderargs.errors <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> customize_error <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> experiments.custom_error <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> LimitError message = <span class="hljs-string"><span class="hljs-string">"{arg_name} must be less than 21 and more than 0. Given: {value}"</span></span> @customize_error(message=message, error_class=LimitError) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">limit_validator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x &lt; <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> x&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> @app.route(<span class="hljs-string"><span class="hljs-string">'/step5_alt2'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step5_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offset: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[lambda x: x &gt;= </span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"> and x &lt; len</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-params">(elements)</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">])</span></span></span></span><span class="hljs-function"><span class="hljs-params">, limit: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(int, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, validators=[limit_validator])</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(elements[offset:offset+limit])</code> </pre><br><br>  In general, to customize an error, you simply need to attach a <code>customize_error</code> decorator to the validator function.  The following variables are always passed to the error text: <br><ul><li>  <code>error_code</code> - error number to display;  intrasystem crap for lovers of systematization; </li><li>  <code>arg_name</code> is the name of the argument that corresponds to the name assigned to the argument in the function declaration;  In our case, for example, limit; </li><li>  <code>value</code> - the value obtained by the validator;  in the case of flask-thunderargs, this is most often string, since all but reques.json and reques.files give it exactly; </li><li>  <code>validator_no</code> ‚Äî validator sequence number;  I strongly doubt that it will be useful in correctly composed validators; </li></ul><br><br>  In addition, you can pass to customize_error any named parameters that the error class will eat under the appropriate names.  This is convenient, for example, if we need to transfer some data specified in the config as a notification to the end user.  This also applies if you are writing an error generator.  As an example, consider the classic decorator factory from validfarm: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">val_in</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> @customize_error(<span class="hljs-string"><span class="hljs-string">"Value of `{arg_name}` must be in {possible_values}"</span></span>, possible_values=x) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> validator</code> </pre><br>  The possible_values ‚Äã‚Äãin this example are taken from x, a variable that will be passed to the factory by the programmer, and will be obtained during the application launch. <br>  <i>Estimated version: <b>0.4</b></i> <br><br><h4>  Inherited Variable Classes </h4><br>  Obviously, reducing the level of abstraction is useful for the end user of the library.  And the first step in this direction will be specialized classes.  Here is an example: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IntArg</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Arg)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, max_val=None, min_val=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> kwargs[<span class="hljs-string"><span class="hljs-string">'p_type'</span></span>] = int <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-string"><span class="hljs-string">'validators'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> kwargs <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> kwargs[<span class="hljs-string"><span class="hljs-string">'validators'</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: kwargs[<span class="hljs-string"><span class="hljs-string">'validators'</span></span>] = [] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> min_val <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> isinstance(min_val, int): <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> TypeError(<span class="hljs-string"><span class="hljs-string">"Minimal value must be int"</span></span>) kwargs[<span class="hljs-string"><span class="hljs-string">'validators'</span></span>].append(val_gt(min_val<span class="hljs-number"><span class="hljs-number">-1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> max_val <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> isinstance(max_val, int): <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> TypeError(<span class="hljs-string"><span class="hljs-string">"Maximal value must be int"</span></span>) kwargs[<span class="hljs-string"><span class="hljs-string">'validators'</span></span>].append(val_lt(max_val+<span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> min_val <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> max_val <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> max_val &lt; min_val: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">"max_val is greater than min_val"</span></span>) super().__init__(**kwargs)</code> </pre><br><br>  But the application of this class: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> experiments.inherited_args <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> IntArg @app.route(<span class="hljs-string"><span class="hljs-string">'/step7'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step7</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x: IntArg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, max_val=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">100</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, min_val=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str(x)</code> </pre><br><br>  The main feature of such classes is that there is no need to manually describe some parameters of the input argument.  In addition, there is no need to manually describe some validators.  And it becomes possible to specify their meaning in the code, which is very important for readability. <br>  <i>Estimated version: <b>0.4</b></i> <br><br><h4>  Inherited classes for ORM </h4><br>  Suppose that we have a class of documents, made through mongoengine: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Note</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Document)</span></span></span><span class="hljs-class">:</span></span> title = StringField(max_length=<span class="hljs-number"><span class="hljs-number">40</span></span>) text = StringField(min_length=<span class="hljs-number"><span class="hljs-number">3</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) created = DateTimeField(default=datetime.now)</code> </pre><br><br>  We must have a getter who must return a specific document.  Let's make an independent class for this task: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemArg</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Arg)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, collection, **kwargs)</span></span></span><span class="hljs-function">:</span></span> kwargs[<span class="hljs-string"><span class="hljs-string">'p_type'</span></span>] = kwargs.get(<span class="hljs-string"><span class="hljs-string">'p_type'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> ObjectId kwargs[<span class="hljs-string"><span class="hljs-string">'expander'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: collection.objects.get(pk=x) super().__init__(**kwargs)</code> </pre><br><br>  All he does is change the input arguments.  Simply expands them to the required set.  And even such a minimalistic version allows us to do this: <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/step9/get') def step9_2(note: ItemArg(Note)): return str(note.text)</span></span></code> </pre><br><br>  Pretty nice, right? <br><br>  <i>Presumptive version: <b>it makes sense to bring in an independent library</b></i> <br><br><h4>  We generate flock getters </h4><br>  Imagine that we have a class in the model whose getters do not perform any special actions.  It is necessary to write a getter, which will give the user information in the same form in which it is stored in the database.  In this case, we will not interfere with the generator of getters.  Let's do it: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">make_default_serializable_getlist</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls, name=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"default_getter_name"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> @Endpoint <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offset: IntArg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(min_val=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, limit: IntArg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(min_val=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, max_val=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">50</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">, default=</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list(map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: x.get_serializable_dict(), cls.objects.skip(offset).limit(limit))) get.__name__ = name <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> get</code> </pre><br>  This function should create a getter for the MongoEngine collection.  The only additional condition is that the collection class must have a <code>get_serializable_dict</code> method.  But I think no one will have any particular problems with this.  And here is one of the options for applying this thing: <br><br><pre> <code class="python hljs">getter = make_default_serializable_getlist(Note, name=<span class="hljs-string"><span class="hljs-string">'step11_getter'</span></span>) app.route(<span class="hljs-string"><span class="hljs-string">'/step11_alt3'</span></span>)(json_resp(getter))</code> </pre><br><br>  Here, the auxiliary function <code>json_resp</code> is <code>json_resp</code> , but in fact it does not do anything interesting, it simply wraps the controller's response into <code>flask.jsonify</code> (if it can).  In addition, in this example, I used the decorator without applying the classical syntax.  In my opinion, this is justified, otherwise I would have to do a transport wrapper that does not perform any useful activity. <br><br>  <i>Estimated version: <b>similar to the previous one</b></i> <br><br><h4>  Call logging and something else </h4><br>  Let's log each user movement that fits into the rules we describe.  To do this, we propose a simple decorator, which will take a callback function: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">listen_with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(listener)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decorator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(victim)</span></span></span><span class="hljs-function">:</span></span> @wraps(victim) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wrapper</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(**kwargs)</span></span></span><span class="hljs-function">:</span></span> listener(func=victim, **kwargs) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> victim(**kwargs) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> wrapper <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> decorator</code> </pre><br>  and callback itself: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func, **kwargs)</span></span></span><span class="hljs-function">:</span></span> print(func.__name__) print(kwargs)</code> </pre><br><br>  This callback simply displays all the received arguments on the screen.  Now consider a more useful example: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">denied_for_john_doe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func, firstname, lastname)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> firstname == <span class="hljs-string"><span class="hljs-string">'John'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> lastname == <span class="hljs-string"><span class="hljs-string">'Doe'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> ValueError(<span class="hljs-string"><span class="hljs-string">"Sorry, John, but you are banned"</span></span>) @app.route(<span class="hljs-string"><span class="hljs-string">'/step13'</span></span>) @listen_with(denied_for_john_doe) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">step13</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(firstname: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(str, required=True)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, lastname: Arg</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(str, required=True)</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"greeting you, {} {}"</span></span>.format(firstname, lastname)</code> </pre><br><br>  Here, as we see, there is a test of the possibility of using a combination of values.  Generally, formally, such a construction is not a licenser, and should be separated from them, listeners.  But for now, as part of the experiment, let's leave it like this.  Here is a more architecturally correct example: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mail_sender</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func, email)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> func.__name__ == <span class="hljs-string"><span class="hljs-string">'step14'</span></span>: <span class="hljs-comment"><span class="hljs-comment">#   ,    #  ,      :( pass @app.route('/step14') @listen_with(mail_sender) def step14(email: Arg(str, required=True)): """   ,    ,     :( """ return "ok"</span></span></code> </pre><br><br>  Okay, not an example, but its preparation. <br><br>  <i>Estimated version: <b>0.5</b></i> <br><br><h4>  The structure of the arguments in the database </h4><br>  And now we proceed to the dessert.  Today, we have a ‚Äúdelicious‚Äù storage of the structure of incoming arguments in the database. <br>  The fact is that such an architecture reduces the code responsible for receiving and processing data, in fact, to the data.  And we can take this data from anywhere.  From the config file, for example.  Or from a DB.  And really, if you think about the difference between these two data sources?  Let's get started <br><br>  First we need to create a table of correspondences of the objects of the program currently being executed with data imported from the database.  In the example we will use only one type already described by us above.  Therefore, so far only he will be here: <br><pre> <code class="python hljs">TYPES = {<span class="hljs-string"><span class="hljs-string">'IntArg'</span></span>: IntArg}</code> </pre><br><br>  Now we need to describe the model, which, in fact, will store and display information about the incoming arguments of the entry points. <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DBArg</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Document)</span></span></span><span class="hljs-class">:</span></span> name = StringField(max_length=<span class="hljs-number"><span class="hljs-number">30</span></span>, min_length=<span class="hljs-number"><span class="hljs-number">1</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) arg_type = StringField(default=<span class="hljs-string"><span class="hljs-string">"IntArg"</span></span>) params = DictField() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_arg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> arg = TYPES[self.arg_type](**self.params) arg.db_entity = self <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> arg</code> </pre><br><br>  Here, as we can see, the name of the argument, its type and additional parameters are specified, which will be passed to the constructor of this type.  In our case, this is IntArg, and we can have max_val, min_val, required, default, and all the others that are correctly processed by the ORM. <br>  The <code>get_arg</code> function <code>get_arg</code> intended to get an Arg instance with a configuration stored in the database.  Now we need the same balalaika for the structures that we usually add to the functions, describing the individual arguments through annotations.  Yes, yes, all of this merges into a specific construction, which is then fed to the argument parser. <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DBStruct</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Document)</span></span></span><span class="hljs-class">:</span></span> args = ListField(ReferenceField(DBArg)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_structure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {x.name: x.get_arg() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> self.args}</code> </pre><br>  It is much simpler, and it is hardly worth describing separately.  Perhaps it is worthwhile to clarify for people who are not ‚Äúcommunicating‚Äù with mongoengine that the <code>ListField(ReferenceField(DBArg))</code> construction means only that in the database in this field we will store a list of the elements of the DBArg class. <br><br>  And we also need a piece that will link the above into something integral and concrete.  Let's just say, apply it all to living tasks.  And there is such a task.  Let's assume that you and I have a store or auction.  Sometimes it happens that for those.  task in the admin panel, among other things, should be able to create categories of goods, each of which will have its own parameters, unique to it.  We will attach ourselves to this task. <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Category</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Document)</span></span></span><span class="hljs-class">:</span></span> name = StringField(primary_key=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) label = StringField() parent = ReferenceField(<span class="hljs-string"><span class="hljs-string">'self'</span></span>) arg_structure = ReferenceField(DBStruct) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_creator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> @Endpoint @annotate(**self.arg_structure.get_structure()) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">creator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(**kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Item(data=kwargs).save() creator.__name__ = <span class="hljs-string"><span class="hljs-string">"create_"</span></span> + self.name <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> creator <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_getter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  Here we have described the category model.  It will have a system name, which is necessary for naming functions and endpoints, a display name, which means nothing at all to us, and a parent (yeah, we will prepare for inheritance in advance).  In addition, the data structure used for this category is indicated.  Finally, a function is described that will automatically create a creator function for this category.  It would be nice to screw the cache and other goodies, but for now, as part of the experiment, we ignore it. <br><br>  And finally, we need a model for storing user data, through which end users will fill in the information about products.  Here, as in all previous examples, this will be presented in a simplified form: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Item</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Document)</span></span></span><span class="hljs-class">:</span></span> data = DictField() category = ReferenceField(Category)</code> </pre><br><br>  I think there is no need for special explanations at all. <br><br>  Well, now let's create the first category of products: <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>weight = DBArg(name=<span class="hljs-string"><span class="hljs-string">"weight"</span></span>, params={<span class="hljs-string"><span class="hljs-string">'max_val'</span></span>: <span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">'min_val'</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'required'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>}).save() &gt;&gt;&gt; height = DBArg(name=<span class="hljs-string"><span class="hljs-string">"height"</span></span>, params={<span class="hljs-string"><span class="hljs-string">'max_val'</span></span>: <span class="hljs-number"><span class="hljs-number">290</span></span>}).save() &gt;&gt;&gt; human_argstructure = DBStruct(args=[weight, height]).save() &gt;&gt;&gt; human = Category(name=<span class="hljs-string"><span class="hljs-string">"human"</span></span>, arg_structure=human_argstructure).save()</code> </pre><br><br>  Yes, I know that selling people is not very ethical, but it just so happened :) <br><br>  Now we need a wrapper with which we will create the names of the goods: <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@app.route('/step15_abstract') def abstract_add_item(category: ItemArg(Category, required=True, p_type=str)): creator = category.get_creator() wrapped_creator = app._arg_taker(creator) return str(wrapped_creator().id)</span></span></code> </pre><br><br>  Now it looks very ugly.  This is due to another error in the architecture.  However, much less significant than the previous one.  Anyway.  Now I will explain what is happening here. <br><br>  First we get the category instance in a way that has already been described above (see the example with the <code>Note</code> model).  Accordingly, if the user tries to add a product to a non-existent category, he will receive DoesNotExist.  The primary key in this category is its system name, and it is the user who must pass it as an identifier.  In our case, this is <code>human</code> .  Accordingly, the entire request should look like this: <br> <code><a href="http://localhost/"></a> localhost:5000/step15_abstract?category=human&amp;weight=100&amp;height=200</code> <br>  The remainder is intended for the constructor to be called to get other parameters.  <code>app._arg_taker</code> is a decorator that allows endpoint to ‚Äúget‚Äù the missing arguments from source.  In our case, this is request.args, but, in principle, the source can be anything.  Actually, in this fragment, my architectural error lies.  In an amicable way, the need to wrap nested endpoints in such a decorator should not arise. <br><br>  <i>Estimated version: <b>never, it's just an experience</b></i> <br><br><h4>  Conclusion and future </h4><br>  Well, perhaps this will finish today.  Now you can speculate on lengthy topics.  First of all, I would like to thank all those who responded to the first posts.  Even despite the fact that no one has made a single constructive proposal, you helped me a lot in moral terms :) <br><br>  And now briefly about intentions and desires. <br>  The main focus of the coming months will be commenting the code, refactoring and test coverage.  Yes, I myself know that in this area my code is simply disgusting, it would be foolish to deny it. <br>  In addition, I would like to write another couple of gates, like flaskovy, to other frameworks.  In general, I would like to find such places where my library would be useful.  For now, only accept tornado and argparse. <br><br>  As for the library itself, here I think it is important to focus on reverse reporting.  Let's say we use thunderargs to write the restful interface.  It would be cool if he could give information to the final library, which would allow to create some kind of json-rpc, so that the client can find out at <code>OPTIONS</code> request which parameters which method he accepts and which errors in their endpoints can occur. <br><br>  Later I will write another final article.  She will already be tightly tied to "real life".  I believe that there will be a description of the coding process of some service.  Now I have only one idea, and it is connected with the tag system on one interesting site (with a sad panda).  But I will be glad to hear other suggestions.  Microblogging, Q &amp; A forums, whatever.  I do not care about platitudes or anything like that.  It is important that the example of this code could show as many aspects of my "pet" as possible.  Among other things, it will allow to check it in, and, perhaps, to find a couple of bugs or architectural flaws. <br><br>  Thanks for attention.  As always, I am glad to any criticism and any wishes. <br><br>  <a href="https://bitbucket.org/dsupiev/thunderargs">main turnip</a> <br>  <a href="https://bitbucket.org/dsupiev/flask-thunderargs">flag-gate</a> (the code of all experiments from the article is here) </div><p>Source: <a href="https://habr.com/ru/post/190088/">https://habr.com/ru/post/190088/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190076/index.html">Interview with Albina Almukhametova: ‚ÄúThe world can not pull, but Russia would be cool!‚Äù</a></li>
<li><a href="../190078/index.html">HOT Watch: ‚Äúsmart‚Äù watches with the ability to talk ... on the palm of your hand</a></li>
<li><a href="../190080/index.html">Problem understanding</a></li>
<li><a href="../190082/index.html">A brief sketch of the history of Lisp machines</a></li>
<li><a href="../190084/index.html">1C-Bitrix - CMS from marketers. Advantages and disadvantages</a></li>
<li><a href="../190090/index.html">Model-View in QML. Part Two: Custom Submissions</a></li>
<li><a href="../190092/index.html">Humble Origin Bundle - sale of 8 epic games from EA</a></li>
<li><a href="../190096/index.html">Nested routing in AngularJS</a></li>
<li><a href="../190100/index.html">How I was a phone phreaker</a></li>
<li><a href="../190102/index.html">Moving ActionBar to the next level</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
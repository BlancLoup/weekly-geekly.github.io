<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Client optimization as a service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the very beginning of my activity as a web developer, I dreamed of having a tool that would allow me to automatically receive an optimized versio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Client optimization as a service</h1><div class="post__text post__text-html js-mediator-article"><img src="http://api.hivext.ru/xssu/cross/download/VzVXUw8HW0EwBj4RRBBeFwcbEUEOG2tDdHQlAEoWQVkPAQBCY1VLQEg%3D/view" align="left" alt="Data URI CSS Sprites">  From the very beginning of my activity as a web developer, I dreamed of having a tool that would allow me to automatically receive an optimized version of my site or web application.  In the past, optimization was reduced to the manual formation of ordinary sprites, then to compress the scripts and styles separately.  When making any changes, the hemorrhoids were partially repeated anew.  Thanks to the new client optimization service, this is now in the past. <br><a name="habracut"></a><br><h1>  Preamble </h1><br>  After the data: uri technology appeared, a number of studies were conducted in the direction of automating the process of optimizing sites using this technology.  As a result, a new technology <a href="http://duris.ru/">Data URI CSS Sprites</a> .  I remember what was the euphoria when the cross-browser connection code data: uri css sprites was received.  It was a great joy.  Which unfortunately lasted only a couple of days, as problems were found for IE7 @ Vista.  For almost two years there was no solution, and for almost two years, a crutch for IE7 @ Vista was used in the data: uri css technology of sprites.  But just a couple of months ago, a solution was found.  No matter how trite and insulting it turned out - the solution turned out to be so simple that at first I could not believe in its performance.  Having added only two (!) Necessary characters to the end of the file with sprites - the problem disappeared.  Having performed a series of experiments, it is now possible to state with confidence that the technology works cross-browser! <br><br>  But that's not the point, the essence of the article in the proposed approach to automatic optimization. <br><br><h1>  Algorithm of client optimization as a service </h1><br>  You are mounting an optimizer file that determines (calculates) non-optimized scripts and styles into a site template.  When accessing any page of the site, the file optimizer checks for an optimized version of scripts and styles, and if not found, it sends a command to a special service - ‚Äúthey say there is something to optimize‚Äù and dies (i.e., does not block further work site pages).  The service in asynchronous mode comes to the page that needs to be optimized, analyzes it, makes the squeeze and forms the optimal package.  After that, it accesses the optimizer file and gives the optimized version of the scripts and styles.  The file optimizer puts the optimized version in the right place and the next time you access this page, it will give the client the best option. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So far, at the moment, the file optimizer is designed for Drupal. <br><br><h1>  Installation Instructions for Drupal </h1><br>  1) create a folder on the server optimum, in the directory where drupal is installed <br>  2) we check the rights to write to this folder to the user who is running the web server <br>  3) download the file <a href="http://api.hivext.ru/xssu/cross/download/AmMAAVlTWUpjBW5MRxcMRQJKEkdbRm8cfCUjBEtCQFYPAQBCY1VLQEg%253D">duris.php (v. 1.0.3)</a> and put it in the optimum folder <br>  4) connect to the file duris.php in the template file at the very beginning, something like this <br><br> <code>&lt;?php include_once(dirname(__FILE__).'/../../optimum/duris.php'); ?&gt; <br> &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt; <br></code> <br><br>  5) go over the pages, look at the firebug, go over the pages again <br>  after the second pass scripts and styles should be already optimized. <br><br>  The optimization is based on the principle of asynchrony, i.e.  An optimized version will not appear on the site immediately, but over time.  After the first access to the page, the request for optimization leaves and in the asynchronous mode the wholesale is ‚Äúboiled‚Äù.  version.  Then it fits in the right place. <br><br>  6) for compression of base64 images, you can use already compressed gzip files, settings file under apache for transferring static gzip files <a href="http://api.hivext.ru/xssu/cross/download/VGVTXV1aCBpiVmJHE0BZQ1UeQBBYG2kYfXYjVEIUQVcPAQBCY1VLQEg%253D">.httaccess</a> put in the folder folder (for ngnix there isn‚Äôt yet, if you know how to transfer it, write to this topic) <br><br>  <u>Important</u> : since localhost is not working yet, your server must be accessible from outside. <br><br><h1>  Real examples of application </h1><br>  <a href="http://prosto.lutsk.ua/">prosto.lutsk.ua</a> - Lutsk city portal <br><br>  Comparative analysis before optimization <br><img src="http://api.hivext.ru/xssu/cross/download/BGYFAFlaXUg3BGkUS0xcQlVPTUpbGmgeeXB0AhFHR1UPAQBCY1VLQEg%3D/view"><br><br>  and After optimization <br><br><img src="http://api.hivext.ru/xssu/cross/download/VGEAAF8HCEtiBT4UEEAOQgQZQ0sKRmxJf3QhAkUXS1MPAQBCY1VLQEg%3D/view"><br><br>  <a href="http://zii-egg.ru/">zii-egg.ru</a> - site about the player Creative Zii Egg <br>  <a href="http://kinobaza.tv/">kinobaza.tv</a> - A pleasant and convenient search for movies in runet <br>  <a href="http://ide.hivext.ru/">ide.hivext.ru</a> - Application Development Platform on the Hivext Platform <br>  <a href="http://www.dolcevilla.cz/">www.dolcevilla.cz</a> - Site <a href="http://www.dolcevilla.cz/">visit</a> card of the Prague hotel <br><br><h1>  Development </h1><br>  It is planned to develop similar optimizer files for other popular CMS. <br>  But it is hard for one to carry everything on yourself.  Therefore, if someone has a desire to help in this matter, I will be glad to help.  Reworking a ready-made Drupal file optimizer for other CMS is not a problem.  It has a minimum of logic, all logic is in a remote optimization service.  Estimated implementation time from 2 to 4 hours. <br><br>  If someone has constructive comments or suggestions, I will be very happy to hear. <br>  I wish you a nice optimization. </div><p>Source: <a href="https://habr.com/ru/post/94109/">https://habr.com/ru/post/94109/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../94097/index.html">Hero core</a></li>
<li><a href="../94099/index.html">Script to copy files</a></li>
<li><a href="../94102/index.html">Skype introduced the Skype Manager business service.</a></li>
<li><a href="../94105/index.html">Slidebar - the first public "cloud" in Russia</a></li>
<li><a href="../94106/index.html">About the correct distribution and naming of layers in Adobe Photoshop</a></li>
<li><a href="../94111/index.html">Modified firmware for Nokia S60</a></li>
<li><a href="../94112/index.html">10 ways to screw in programming</a></li>
<li><a href="../94113/index.html">Chrome VS Firefox</a></li>
<li><a href="../94114/index.html">Referendum 2.0 or turn on the head</a></li>
<li><a href="../94118/index.html">FroYo - waited!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
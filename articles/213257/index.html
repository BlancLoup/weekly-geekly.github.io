<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Therascale OCP Solution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is the Open Compute Project (OCP)? 
 In Russia, very little is known about this, mostly advertising claims about billions of Facebook savings usi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Therascale OCP Solution</h1><div class="post__text post__text-html js-mediator-article">  What is the Open Compute Project (OCP)? <br>  In Russia, very little is known about this, mostly advertising claims about billions of Facebook savings using OCP. <br><br>  Officially, the <a href="http://en.wikipedia.org/wiki/Open_Compute_Project">Open Compute Project</a> is a Facebook-based community aimed at creating the most optimal infrastructure for the DC with minimal attention to existing options. <br><br>  In fact, Facebook has long tried to come up with the best option for the datacenter, the sleep of reason gave birth to monsters like a triplet (triple rack, one of which is a huge uninterruptible power supply).  How long, whether short ideas wandered, but one fine day someone had a great idea - to create a community and attracted enthusiasts to throw ideas. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is worth noting that the result was very good. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0cf/11b/4d3/0cf11b4d3fe9ae87ebce5fe057fbaa3b.png"></div><br><br><a name="habracut"></a><br>  <b>OCP objectives:</b> <br><ol><li>  Increase MTBF. <br>  The rejection of the "extra" elements on the board increased the operating time by 35%. <br></li><li>  Increase the density of racks. <br>  The transition to 21 inches allows you to accommodate more servers while maintaining the functionality of each of them. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2d/502/80d/b2d50280d5f0e05ed04de47fcadba961.jpg"></div><br>  <i>Wider rack - more fit</i> <br><br></li><li>  Simplify and speed up maintenance. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/x-IXYr-2Vfk%3Ffeature%3Doembed&amp;xid=17259,15700019,15700186,15700191,15700253&amp;usg=ALkJrhjxgnx7TJFOr9tmJx96Q35PR5Hz0w" frameborder="0" allowfullscreen=""></iframe><br></li><li>  Optimize to work from the cold aisle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/994/acb/47d/994acb47d52c69f7acc3b1a53c23d778.jpg"></div><br>  <i>Stop running between rows.</i> <br></li><li>  Increase energy efficiency. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/719/74f/e80/71974fe802cbdc2cefbf9a8643c894a8.png"></div><br>  <i>At an external temperature of 35 degrees</i> <br>  Reduced energy consumption by 11% under the same load and external conditions. <br></li></ol><br><br>  <b>What happened?</b> <br>  It turned out a complete line for <a href="http://en.wikipedia.org/wiki/Software-defined_data_center">Software-Defined Datacenter</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/10a/4d4/54d/10a4d454d71cb83a1cc84e404cf57806.jpg"></div><br>  <i>All that is needed</i> <br><br>  Not forgotten and remote control system.  OCP RMC (Rack Management Controller) monitors the status of servers and power supplies, and is managed via Web, SMASH CLI or SNMP. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/853/114/31f/85311431f0e9515c1a6b2f5190a0090b.jpg"></div><br>  <i>Rack controller</i> <br><br>  Opportunities: <br><ol><li>  Remote power management. </li><li>  Monitor rack and server consumption. </li><li>  Setting power limits for the rack and nodes. </li><li>  Monitoring the state of BP and servers. </li><li>  Supports hot swap. </li><li>  Authentication via LDAP. </li></ol><br><br>  Supported Protocols: <br><ol><li>  IPMI / RMCP + </li><li>  SMASH CLI </li><li>  SNMP </li><li>  HTTP / HTTPS </li><li>  NTP, SMTP, Syslog </li></ol><br><br>  Screenshots: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/55a/d49/c02/55ad49c028f14ae2081fc86ba3267b13.jpg"></div><br>  <i>The event log</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/29f/2a8/e3f/29f2a8e3fb06ae58a073393da63509ed.jpg"></div><br>  <i>Configuring nodes</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c3/1c3/a07/2c31c3a07237ffdd30870e62309c573f.jpg"></div><br>  <i>This is how node configurations are defined.</i> <br>  A. Enable / Disable Consumption Limit (Y / N) <br>  B. ME IP Address <br>  C. ME Username <br>  D. ME Password <br><br>  It should be noted that Facebook relies on the capabilities of the Intel Management Engine and does not use IPMI / KVM over IP, considering them redundant.  In the event of a breakdown, the entire server changes, without trying to monitor the boot process via remote control.  In this case, there is an option 10G SFP + daughter card with an integrated full-featured service processor and all the joys of IPMI / KVM over IP with virtual media included. <br><br>  <b>The lineup</b> <br><br>  From a general idea, it's time to move on to the proposed models. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/847/520/a6b/847520a6b28e2dec518880661bf6d9ef.jpg"></div><br>  <i>Rack</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/231/acc/d7b/231accd7baec8750f4dd29beacffc58a.png"></div><br><br>  <b>Servers</b> <br><br>  The ruler is designed based on minimalism, there is only what is really necessary.  The main network is made in the form of a subsidiary (mezzanine) board, there are options <br>  10G, InfiniBand, FC. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/177/772/0e2/1777720e2099848d9bcee905f6459b9c.jpg"></div><br><br>  The OCP2U4N platform is made in the 2OU (Open Unit) form factor and accommodates 4 servers.  Four hot-swappable disks and one PCI-E or two disks and two PCI-E slots on each server plus OCP mezz for high density of computing resources, disk space and expansion cards (for example, flash accelerators).  The default network interface is the OCP Mezz daughter board with two 10G SFP + ports and a full-featured BMC processor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/01e/ea9/e1e/01eea9e1e8c375330ae2700acce6204a.jpg"></div><br>  <i>View closer</i> <br><br>  Hot-swap fans common to all servers are used. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff8/93e/8a3/ff893e8a341659bfae8630a81a34e783.jpg"></div><br><br>  Universal servers for various tasks, from web 2.0 to computing.  Centralized power and the absence of unnecessary items on the board increase the MTBF rate by 58% compared to traditional rack systems.  Two expansion slots, OCP mezz and hard disk space complete the picture.  The default network interface is the OCP Mezz daughter board with two 10G SFP + ports and a full-featured BMC processor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f54/c8c/af2/f54c8caf22daf5b301bfd0a74644b241.jpg"></div><br><br>  The OCP1U3N platform for computing tasks is the most utilitarian.  16 memory slots, one PCI-E slot, OCP mezz for InfiniBand or 40G Ethernet, one hard disk space and a couple of network interfaces, including management.  90 nodes per rack with air cooling (115W per processor) plus switches ‚Äî great results! <br><br>  Microserver?  Who mentioned the microserver? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6a/fe6/f13/c6afe6f13ba006ec8b79d22b1a74123e.jpg"></div><br><br>  And they too are.  42 servers based on Intel Atom C2000 series processors in 2OU format, two switches with support for OpenFlow switching based on Intel FM5224 matrix with two 40G uplinks on each.  Almost 4 gigabits of inbound bandwidth per server will ensure the operation of any distributed application.  All components are hot-swappable for easy deployment and maintenance. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/864/864/d8e/864864d8e9d71b2470608ff80d4374c9.png"></div><br><br>  <b>Storage system</b> <br><br>  Any specialized SHD, only Software Defined Storage on disk regiments.  Although no one forbids installing hardware RAID controllers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/349/315/882/3493158823d84f295137047b49abb200.jpg"></div><br><br>  A disk shelf with a cunning format in 2OU format accommodates 28 3.5 "hot-swap disks. The cunning way of double-layer disk placement allowed us to pack 28 spindles into the case, which are fixed in baskets without using screws (the video was higher). SAS expanders are fixed in the case, if you pull out the basket for servicing the second row of disks, there will be no torment with the cables that remain in place. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/857/07c/21a85707c062cde038a866e3f3fb6d58.jpg"></div><br><br>  Another disk shelf, also made in 2OU format, and holds 30 3.5 "hot-swappable disks. Two pallets with disks, each with 15 spindles plus two SAS expanders, everything is replaced with a hot one without additional tools. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f3/cf7/b4b/7f3cf7b4b42cb592c808649eaf773cf1.jpg"></div><br><br>  Similar to the previous product, instead of expanders, two servers based on the Intel Atom C2000 are installed (one for 15 disks).  Each server has a 10G SFP + interface to the network and external SAS ports for expanding the space.  A good choice for cold data. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/891/757/1ae/8917571ae8f48e4c8626f3bdae449742.png"></div><br><br>  <b>Network infrastructure</b> <br><br>  Switches are used completely standard in size.  As you have noticed <br>  from the description of models, gigabit for the main network is not used in principle, the minimum - 10G.  Facebook itself is eyeing 40G and higher, but so far the cost of the transition does not allow it. <br><br>  Another important trend within the Software Defined Datacenter strategy is the transition to software-defined networks, Software Defined Networking (SDN).  It is assumed that the transition to SDN will drastically speed up the deployment of networks, reduce operating costs and severely spoil all network manufacturers with proprietary technologies :) <br><br>  By the way, our previous article described the ideal switch for SDN and a way to get it completely free :) <br>  <a href="http://habrahabr.ru/company/etegro/blog/212639/">Software Defined Network (SDN) based on Intel ONS open platform</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90d/002/582/90d0025826590ce38cb98249ed013e34.jpg"></div><br>  <i>View of the switch from the inside</i> <br><br>  <b>Total</b> <br><br>  OCP, at first glance, looks strange to a wide audience.  At second glance, everything becomes much more interesting.  The solution is suitable not only for large Internet companies, but also for enterprises with large internal IT capacities. <br><br>  In passive: <br><ul><li>  Unusual format of the interior of the rack, incompatible with 19 ". </li><li>  Unusual approach to the formation of solutions in general. </li></ul><br><br>  In the asset: <br><ul><li>  Reduced energy costs. </li><li>  Simplicity and incredible ease of maintenance. </li><li>  Reduced acquisition costs. </li></ul><br><br>  If you are considering a solution that will take (in the foreseeable future) a rack and more, then switching to OCP will be a very interesting option.  Proprietary solutions will tie you to a specific, very limited on the possibilities infrastructure. <br><br>  Well, we presented a <a href="http://www.etegro.ru/configurator/datacenter/ocp">solution based on Open Compute</a> in the product line. </div><p>Source: <a href="https://habr.com/ru/post/213257/">https://habr.com/ru/post/213257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213243/index.html">Our controller for smart home</a></li>
<li><a href="../213245/index.html">Facebook buys WhatsApp for $ 16 billion</a></li>
<li><a href="../213247/index.html">FDB switch tables. Adventures in the zoo. Part 1 - SNMP</a></li>
<li><a href="../213251/index.html">First blog post: moving from idea to project layout</a></li>
<li><a href="../213253/index.html">Making the game right before your eyes - part 4: Shader for fade in on the palette (a la NES)</a></li>
<li><a href="../213259/index.html">Code Obfuscation Techniques with LLVM</a></li>
<li><a href="../213261/index.html">CodeFest number 5 - again cake</a></li>
<li><a href="../213263/index.html">Prostokvashino on Habr√© or Uncle Fedor‚Äôs letter</a></li>
<li><a href="../213265/index.html">Init.js: Why and how to develop JavaScript with Full-Stack</a></li>
<li><a href="../213269/index.html">Deploy applications on RoR 4 using Capistrano 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
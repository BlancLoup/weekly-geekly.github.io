<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>3CX voice application development: an introduction for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Call Flow Designer Development Environment 
 The 3CX Call Flow Designer (CFD) development environment allows the PBX administrator to create complex c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>3CX voice application development: an introduction for beginners</h1><div class="post__text post__text-html js-mediator-article"><h2>  Call Flow Designer Development Environment </h2><br>  The <a href="https://www.3cx.ru/ip-pbx/call-flow-designer/">3CX Call Flow Designer (CFD)</a> development environment allows the PBX administrator to create complex call processing logic (voice applications) in a convenient visual editor ‚Äî with minimal or no programming skills.  Voice applications interact with the user by phone, taking input from him and performing certain actions.  You can, for example, request the customer's card number from the subscriber, check it in the CRM system and transfer it to the assigned manager.  Or you can route the call depending on the date, time and other factors. <a name="habracut"></a><br><br>  Warning: to run 3CX CFD applications, 3CX Pro edition is required. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b81/2d0/d9a/b812d0d9a9c3327af0666635ac7e0bdc.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A CFD application is ‚Äúassembled‚Äù from building blocks called components.  There are quite a few ready-made components, and their list is expanding, for example: Menu (Voice Menu / IVR), Prompt Playback (Playing Message to the User), User Input.  Each component has several customizable parameters, which we will discuss below.  The components, combined together, form a project (Project) voice application.  This project after compilation is uploaded to the 3CX server (Windows or Linux) in the Call Queue interface.  Then you direct calls to this Queue number from the voice menu (IVR) or directly from the outside line.  In the process, the voice application can again transfer calls to Queues, Groups, IVR, certain users, etc. <br><br>  The advantages of using the CFD development environment before writing scripts manually: <br><br><ul><li>  The use of a variety of ready-made components - the record speed of the "assembly" of the application <br></li><li>  Visualization of the created algorithm - the application can easily change or modify another employee <br></li><li>  Use of the debugged code of components - minimization of development errors <br></li><li>  Support for popular C # language that enhances voice applications <br></li><li>  Compiling a CFD application (rather than interpreting a script) - high execution speed, minimum processor load <br></li></ul><br>  <a href="">3CX Call Flow Designer</a> installs only on a 64-bit version of Windows.  The app takes about 15 MB plus space for user projects.  CFD can be installed on any suitable computer, not only on a computer with the 3CX system.  The project is created locally and then uploaded to the PBX server.  This, in particular, allows <a href="https://www.3cx.ru/ordering/find-reseller/">3CX partners to</a> create custom voice applications for their customers. <br><br>  Consider the terms you‚Äôll meet when developing 3CX voice applications: <br><br><ul><li>  Project (Project) - actually developed application.  It consists of call processing threads, dealers, and other components. <br></li><li>  Callflow - a specific user interaction, i.e.  a set of actions performed by a component (or components).  For example, a stream is a user input request for numbers. <br></li><li>  Dialer ‚Äî a processing flow that automatically makes an outgoing call. <br></li><li>  Components are the building blocks of a call flow, for example, playing menu items, getting user input, accessing a database, and so on.  Components are part of an incoming processing flow, an outgoing flow (dialer), or a more complex user component. <br></li><li>  Custom Component - You can create your own components with special features. <br></li></ul><br><h2>  Creating a simple voice application </h2><br>  Consider how to create a simple voice application in the CFD environment.  Once you are comfortable with simple components, it is not difficult to go to more complex applications that consist of the same simple components. <br><br>  Our application is a simple Voice menu (to transfer to the Sales Department, press 1, Support Department - 2, Outgoing call - 3, or stay on the line to connect with the Operator. <br><br><h3>  Project creation </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/e5d/b95/e3f/e5db95e3fad7fcd41a40e355fdc9d9a6.png"><br><br>  To create a project, go to File&gt; New&gt; Project and specify the file name.  When you save a project, three folders are created: for project audio files, for additional libraries, and for a ready-built voice application.  A project is created with a set of default parameters, which you can then modify. <br><br><h3>  Creating a processing flow </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/29c/432/07c/29c43207c10f83f29b9cb4dc1406b711.png"><br><br>  Creating a project also creates an empty Main processing flow.  It is located in the tab of the main window to which you drag the components of the stream.  Each stream has two properties: the name of the stream and the set of variables that are used in the stream. <br><br><h3>  Add components to stream </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/33b/401/648/33b4016482d76dcf07fd57c9c09cd930.png"><br><br>  After creating an empty stream, fill it with working components.  Let's start with the Menu component. <br><br><ul><li>  Drag it to the flow tab and name it mainMenu <br></li><li>  By default, the menu has two options.  Add a third - right-click on the component and select Add Option 3. <br></li></ul><br>  When you add a Menu component to a stream, its parameters are set according to a template in accordance with the settings in Tools&gt; Options&gt; Component Templates&gt; Menu.  You can set component parameters in three ways: <br><br><ul><li>  In the Properties window <br></li><li>  By double clicking on the component <br></li><li>  From the component context menu <br></li></ul><br>  For example, to set the voice message that is played to the user, in the Properties window, change the InitialPrompts property.  The Prompt Collection Editor voice file editor opens.  Specify the AudioFilePrompt option, and then select the audio file to be played. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e5/885/c68/6e5885c686e1da141d8ed36144372c11.png"><br><br>  Audio files that are located in the project audio files folder are visible in the drop-down list.  And if you select a file in a different location on the disk, it is automatically copied to the project folder. <br><br>  Please note: CFD only supports audio files in the following format: WAV, mono, 8 kHz, 16 bit.  You can prepare files of the correct format for <a href="https://www.3cx.ru/blog/sp2-convert-wav-files/">this instruction</a> . <br><br>  To add a voice message that will sound to the user if you type incorrectly, change the InvalidDigitsPrompts parameter.  A message with no user input is set in the TimeoutPrompts parameter. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8e9/5e8/865/8e95e8865dbbdb10dc551bf07ce3922f.png"><br><br>  After configuring the basic parameters of the menu itself, we will add components that will be executed when choosing one or another option.  For example, if you select Option 1, the application transfers the call to the Sales Department - add the Transfer component under the Option 1 branch and change the name of the component to Sales. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/870/7e2/7de/8707e27deb115887b79a3ec99300e2cc.png"><br><br>  Double-click on the Transfer component and specify the direction - the extension number of the Sales Department.  Similarly, indicate in Option 2 the extension number of the Service Department. <br><br>  In Option 3, the algorithm is slightly more complicated.  We will ask the user the number to which you want to transfer the call, and then transfer to the entered number.  To get the number, use the User Input component: <br><br><ul><li>  Drag it to the Option 3 branch, change the name and add a message that will prompt the user to enter a number. <br></li><li>  Please enter valid digits - from 0 to 9 (asterisk and period are not allowed). <br></li><li>  Specify the minimum and maximum length of the number (MinDigits and MaxDigits parameters), for example, from 3 to 5. <br></li><li>  If the user made an incorrect input, the call is transferred to the operator. <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/0bf/e0c/007/0bfe0c00769c14369fc3d891a115cbb0.png"><br><br>  To set up call transfer to the entered number, double click on the Transfer component in option 3 and click on the Expression Editor fx button.  As an expression, specify the buffer property of the askForDestination component. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/340/872/5f0/3408725f0d319437cbf73e9361d4bbe2.png"><br><br><h3>  Compiling and uploading the application to the server </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/165/3dd/b5c/1653ddb5c781fa003bf1f27a2ab7517a.png"><br><br>  The completed project will look something like the screenshot above.  However, we need to compile the finished application (file with the tcxvoiceapp extension, which is installed on the server. <br><br>  To do this, select the option Build&gt; Build All in the CFD menu.  A compilation window and an error window will appear, in which all errors and warnings that appear during the compilation process are visible.  Then Windows Explorer will open with the file of the finished application. <br><br>  To upload a file to the PBX server, in the 3CX management interface, create a Call Queue, specify its name and extension number, and go to the Voice Applications section. <br><img src="https://habrastorage.org/getpro/habr/post_images/f52/b40/d14/f52b40d1401eaf306e6758caf7d30bad.png"><br>  Check the Voice Applications checkbox and download your application.  After that, a warning will appear about restarting the Queue Manager Service.  Note that when you restart, all calls in the Queues will be interrupted. <br><img src="https://habrastorage.org/getpro/habr/post_images/c8a/1bd/4c0/c8a1bd4c000a3963bd94f5ef41ac957f.png"><br><br><h3>  Application launch </h3><br>  The voice application is registered in the 3CX system under the extension number of the Call Queue.  The application is launched either when a direct external call is received on this Queue, or when it is transferred to the Queue.  In our case - just call the extension of the Queue and the application will start! <br><br><h2>  Additional Information </h2><br>  We described the basic principles for developing applications for 3CX.  Of course, the possibilities of the CFD environment are much greater.  It is constantly complemented by new components and gets the ability to integrate with third-party services, for example, the Amazon Polly natural speech generation service.  In addition, recently it became possible to access the <a href="https://www.3cx.com/docs/call-control-api/">3CX server API</a> directly from CFD applications using the C # language.  Understanding the basics, you can move on to creating more complex and useful applications.  We have repeatedly considered such applications in the past: <br><br><ul><li>  <a href="https://habrahabr.ru/company/3cx/blog/340780/">Using the 3CX server API from a CFD application</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/344260/">CFD natural speech generation</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/343674/">Predictive outgoing calls with 3CX</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/336528/">Automatic outbound dialing in CFD application</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/339694/">Difficult incoming call routing</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/337654/">Read user input in CFD application</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/334472/">Work with databases in CFD application</a> <br></li><li>  <a href="https://habrahabr.ru/company/3cx/blog/337096/">Sending e-mail in CFD application</a> <br></li></ul><br>  If you have any questions about the development of voice applications, the best place for consultation is the <a href="https://www.3cx.com/community/forums/call-flow-designer.63/">3CX CFD Developers Forum and the 3CX CFD</a> <a href="https://www.3cx.com/docs/manual/call-flow-designer-manual/">Documentation</a> . </div><p>Source: <a href="https://habr.com/ru/post/352646/">https://habr.com/ru/post/352646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352632/index.html">True implementation of a neural network from scratch. Part 2. Recognition of numbers</a></li>
<li><a href="../352634/index.html">Network Optimization for Unreal Engine 4</a></li>
<li><a href="../352636/index.html">20 modules for Node.js, which is useful to know</a></li>
<li><a href="../352640/index.html">The golden rule of git rebase</a></li>
<li><a href="../352644/index.html">GitLab 10.6 released: CI / CD for GitHub and in-depth integration with Kubernetes</a></li>
<li><a href="../352648/index.html">TeamLead Conf review: 2 days with 2 tracks, 25 reports, 474 participants, the pain is immeasurable</a></li>
<li><a href="../352650/index.html">DZ Online Tech: Postgres Professional</a></li>
<li><a href="../352652/index.html">Igor Sheludko, FSPro Labs: ‚ÄúWorking as a tracker, I see the evolution of many ideas</a></li>
<li><a href="../352654/index.html">We meet the service from Cloudflare at addresses 1.1.1.1 and 1.0.0.1, or ‚Äúthe public DNS regiment has arrived!‚Äù</a></li>
<li><a href="../352656/index.html">Digital events in Moscow from April 2 to 8</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About multitenancy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unfortunately, this term does not have a good Russian-language counterpart. "Wikipedia" gives the translation "multi-leased, multiple lease". This is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About multitenancy</h1><div class="post__text post__text-html js-mediator-article">  Unfortunately, this term does not have a good Russian-language counterpart.  "Wikipedia" gives the <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D1%2583%25D0%25BB%25D1%258C%25D1%2582%25D0%25B8%25D0%25B0%25D1%2580%25D0%25B5%25D0%25BD%25D0%25B4%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">translation</a> "multi-leased, multiple lease".  This is sometimes called ‚Äúmultiple ownership.‚Äù  These terms may be somewhat confused, since the subject matter is not connected with rent or possession.  This is a matter of software architecture and its organization of operation.  And the latter is no less important. <br><br>  We began to form our understanding of multitenancy at the same time as we began to design an approach to the cloud (service) work model of 1C: Enterprise.  That was a few years ago.  And since then, our understanding is constantly expanding.  We are constantly discovering in this subject more and more new aspects (pros, cons, difficulties, features, etc.). <br><br><img src="https://habrastorage.org/files/2dc/784/f80/2dc784f80dc345da8753730e9d23d0ba.png" alt="image"><br><a name="habracut"></a><br>  Sometimes developers understand multitenancy as a completely simple thing: ‚Äúin order for the data of several organizations to be stored in one database, you need to add a column with the organization identifier to all the tables and set a filter on it‚Äù.  We, too, of course, began our study of the issue from this point on.  But rather quickly they realized that this was only one glade (also, by the way, not easy).  In general, it is a "whole country." 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The basic idea of ‚Äã‚Äãmultitenancy can be described something like this.  A typical application is a cottage designed for one family, which uses its infrastructure (walls, roof, water supply, heating, etc.).  A multitenancy application is an apartment building.  In it, each family uses the same composition of the infrastructure, but the infrastructure itself is implemented for the entire house as a whole. <br><br>  Is the multitenancy approach good or bad?  You can find very different opinions on this.  It seems that there is no ‚Äúgood or bad‚Äù at all.  You need to compare the pros and cons in the context of specific tasks.  But this is a separate topic ... <br><br>  In the simplest sense, the goal of multitenancy is to reduce the cost of maintaining the application by ‚Äúsocializing‚Äù infrastructure costs.  This is the same movement as reducing the cost of the application due to the use of a lottery solution (possibly with adjustment and refinement), rather than writing ‚Äúto order‚Äù.  Only in one case the development is socialized, and in the other - exploitation. <br><br>  And, again, there is no direct link to the method of sale.  The multitenancy architecture can also be fully applied in the corporate or departmental IT infrastructure for automating a large number of similar branches and holding companies. <br><br>  We can say that multitenancy is not just a matter of organizing data storage.  This is a model of the entire application (including a significant part of the aspects of its architecture, and a deployment model, and organization of services). <br><br>  The most difficult and interesting thing in the multitenancy model seems to us that the essence of the application is ‚Äúforked‚Äù.  Some of the functionality works with specific data areas (apartments) and is ‚Äúnot interested‚Äù in the fact that there are residents in other apartments.  And the part perceives the house entirely and works at once for all tenants.  At the same time, the latter cannot abstract from the fact that these are still separate apartments, and the necessary level of granularity and security must be ensured. <br><br>  In 1C: Enterprise, the multitenancy model is implemented at the level of several technologies.  These are the mechanisms of the 1C: Enterprise platform, the mechanisms of <a href="http://www.1c.ru/news/info.jsp%3Fid%3D16065">1C: Technology of publishing 1cFresh solutions</a> and <a href="http://www.1c.ru/news/info.jsp%3Fid%3D15382">1C: Technology of developing 1cFresh solutions</a> , <a href="http://v8.1c.ru/libraries/ssl/index.htm">BSP</a> mechanisms (libraries of standard subsystems). <br><br>  Each of these items contributes to the construction of a common infrastructure of an apartment building.  Why is this implemented in several technologies, and not in one, for example, in a platform?  First of all, because part of the mechanisms, in our opinion, is quite appropriate to modify for a specific deployment option.  But in general terms, this is a difficult question, and we are constantly facing a choice - at what level is it better to implement one or another aspect of multitenancy. <br><br>  Obviously, the basic part of the mechanisms was required to be implemented in the platform.  Well, for example, the actual separation of data.  What usually start talking about multitenancy.  But in the end, the multitenancy model ‚Äútraveled‚Äù through a substantial part of the platform's mechanisms and required their refinement, and in some cases, rethinking. <br><br>  At the platform level, we implemented exactly the basic mechanisms.  They allow you to create applications that work in the model multitenancy.  But in order for applications to ‚Äúlive and work‚Äù in such a model, you need to have a system for managing their ‚Äúlife activity‚Äù.  The 1cFresh technologies and the unified layer of business logic at the level of the BSP are responsible for this.  Just as in an apartment building, the infrastructure provides residents with everything they need, and 1cFresh technology provides all the necessary applications that work in a multitenancy model.  And so that applications can interact with this infrastructure (without significant modifications), they fit the appropriate "connectors" in the form of BSP subsystems. <br><br>  From the point of view of the mechanisms of the platform, it is easy to notice that as we gain experience and develop the cloud use case of 1C: Enterprise, we are expanding the mechanisms that are involved in this architecture.  We give one example.  In the multitenancy model, the roles of the participants in application servicing change significantly.  Significantly increases the role (level of responsibility) of those responsible for operating applications.  They have become necessary to have more powerful application control tools.  Because application users (tenants) trust first of all the provider with whom they work.  To this end, we have implemented in version 8.3 a new <a href="https://wonderland.v8.1c.ru/blog/profili-bezopasnosti/%3Fsphrase_id%3D12972">security profile mechanism</a> .  This mechanism allows the provider's administrators to limit the freedom of application developers to the necessary level of security - in essence, isolating the work of the application for each tenant within a certain sandbox framework. <br><br>  No less interesting is the architecture for managing applications running in multitenancy mode (which is implemented in 1cFresh and BSP technologies).  Here, compared to the conventional deployment model, the requirements for automation of management processes increase significantly.  There are dozens of such processes: creating new data areas (‚Äúapartments‚Äù), updating applications, updating regulatory information, backing up, etc. And, of course, requirements for reliability and availability are increasing.  For example, to ensure reliable interaction of applications with control system components, we implemented asynchronous call system technology with guaranteed delivery. <br><br>  A very subtle point is the way in which data and processes are socialized.  It seems simple (if it seems to someone) only at first glance.  The greatest difficulty is the balance between centralization of data and processes and decentralization.  On the one hand, centralization allows to reduce costs (disk space, processor resources, efforts of administrators ...).  On the other hand, limits the freedom of "tenants".  This is just one of the moments of ‚Äúsplitting‚Äù the application, when the developer needs to think simultaneously about the application in the narrow sense (serving one ‚Äúapartment‚Äù) and in the broad sense (serving all ‚Äútenants‚Äù at once). <br><br>  As an example of such a "dilemma" can provide regulatory reference information.  Of course, there is a great temptation to make it common to all the "tenants" of the house.  This allows you to store it in one copy and update it for all at once.  But it happens that some tenant needs specific changes.  Oddly enough, but in practice it is found, even for information that is specified by regulators (government agencies).  It turns out a difficult question: to socialize or not to socialize?  It is tempting, of course, to make general information for everyone and private for those who want it.  And this already leads to a very difficult implementation.  But we are working on it ... <br><br>  Another example is the design of the implementation of regular processes (performed on a schedule, initiated by the management system, etc.).  On the one hand, they can be implemented for each data region separately.  It is easier and more convenient.  But, on the other hand, such a small granularity creates a large load on the system.  To reduce the load, you need to implement socialized processes.  But they require more careful study. <br><br>  Of course, this begs a very significant question.  How do application developers get multitenancy?  What do they need to do for this?  Of course, we strive to ensure that the burden of technological and infrastructure issues falls as much as possible on the shoulders of the supplied technology, and the application developer would think only in the tasks of business logic.  But as with other important architectural issues, application developers need to have some idea of ‚Äã‚Äãhow to work in the multitenancy model, and some development efforts will be needed.  Why?  Because there are moments that the technology can not provide automatically without taking into account the semantics of the data.  For example, the same definition of the limits of socialization of information.  But we try to keep these difficulties small.  Examples of the implementation of such applications already exist. <br><br>  An important point in the context of the implementation of multitenancy in 1C: Enterprise is that we create a hybrid model in which one application can work both in multitenancy mode and in normal mode.  This is a very difficult task and the subject of a separate discussion. </div><p>Source: <a href="https://habr.com/ru/post/326654/">https://habr.com/ru/post/326654/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326644/index.html">Scientists from ITMO University have proposed a new system for the transmission of energy over a distance</a></li>
<li><a href="../326646/index.html">Simplify converters for WPF</a></li>
<li><a href="../326648/index.html">St. Petersburg homeless - in Prague. Continuing the history of self-taught developer</a></li>
<li><a href="../326650/index.html">Introduction to machine learning with tensorflow</a></li>
<li><a href="../326652/index.html">Processing of personal data? No, not to us. Elegant solution from Golos</a></li>
<li><a href="../326656/index.html">Data science and quality code</a></li>
<li><a href="../326658/index.html">Resources for startups: action plan in links</a></li>
<li><a href="../326660/index.html">Recover Group Policy Objects (GPOs) with Veeam Explorer for Active Directory</a></li>
<li><a href="../326662/index.html">The book "Extreme programming: development through testing"</a></li>
<li><a href="../326664/index.html">Why site designers give out bad code?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
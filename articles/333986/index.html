<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why we chose TypeScript: the history of developers from Reddit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About six months ago, CEO Reddit Steve announced that we are redesigning the site. The main question here is how we do it. Nowadays, front-end develop...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why we chose TypeScript: the history of developers from Reddit</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/ruvds/blog/333986/"><img src="https://habrastorage.org/getpro/habr/post_images/c8f/1d0/20c/c8f1d020c02cc5f72b35dc1498dfeb4c.png" alt="image" align="left"></a>  About six months ago, CEO Reddit Steve <a href="https://www.reddit.com/r/announcements/comments/5q4qmg/out_with_2016_in_with_2017/">announced</a> that we are redesigning the site.  The main question here is how we do it.  Nowadays, front-end development is very different from what it was at the time when Reddit was born.  Now there is a huge choice of options for each subsystem of the web application.  How to render pages?  How to stylize content?  How to store and maintain images and video files?  How to write code?  In modern conditions, none of these questions have a ready answer. <br><br>  One of the first questions of this kind, to which we needed to find the answer, was: ‚ÄúWhich language to choose?‚Äù. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">About the richness of choice and language requirements</font> </h2><br>  Oddly enough, JavaScript did not necessarily have to be our frontend language.  Ultimately, whatever language is chosen for this purpose, the code written on it is still compiled into JavaScript.  However, what exactly the code compiles is perhaps less important than what the developer writes.  The choice of language was not an easy task.  Here is what we had to consider: <br><br><ol><li>  BuckleScript <br></li><li>  ClojureScript <br></li><li>  CoffeeScript <br></li><li>  Elm <br></li><li>  ElixirScript <br></li><li>  JavaScript 2016 and future language versions <br></li><li>  Javascript + annotations <br></li><li>  Nim <br></li><li>  PureScript <br></li><li>  Reason <br></li><li>  TypeScript <br></li></ol><br>  And this, by the way, is not a complete list.  Each language has its pros and cons, so in order to help ourselves choose one of them, we have formulated the following requirements: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  <b>This should be a strongly typed language</b> .  Types, at the micro level, play the role of documentation.  They help, to a certain extent, to ensure the correctness of the code, and, more importantly, simplify refactoring.  Another consideration by which we were looking for a language with strong typing was the speed of development.  We sought to find a strictly typed language, because we wanted to speed up the work.  Such an idea goes against the vision of typing that many programmers have developed.  Namely, it is considered that this is an additional burden on the developer, which reduces the speed of work.  However, increasing the speed of development also means an increase in the likelihood of errors.  We needed typing in order for the code to contain as few errors as possible, even if it was written quickly.  Strong typing is also useful in fast-growing projects.  Our team of engineers is constantly increasing in size, and the number of those working on the code is steadily growing. <br><br></li><li>  <b>It is necessary that there are good supporting tools</b> .  Taking into account what we were going to do (serious redesign of the site), we did not have time to create a significant number of aids on our own.  It was very important that we could quickly get to work using open source solutions.  More specifically, these are the tools that are being discussed.  These include integration with popular build systems (for example, with Webpack), linter support, and easy integration with testing frameworks.  If the integration of support systems for a language was not obvious, we no longer considered this language. <br><br></li><li>  <b>The language was supposed to be used in serious projects</b> .  If the language looked good, but in reality it was used only in small projects of individual enthusiasts, it could well be inappropriate for our task.  In addition, if the language is not used in serious projects, there are questions about how long such a language will survive, and how quickly language developers will respond to reports of errors found in it. <br><br></li><li>  <b>Our developers must master the language quickly enough</b> .  In the above list there are excellent languages, the only disadvantage of which is too long a period of time, which developers need in order to master them.  Among them, I would like to mention Elm and PureScript.  We seriously discussed the issue of their use.  However, in the end, it turned out that their implementation would have meant too much work required for the development of new programming concepts by developers who are not familiar with them, for them to reach a level that allows them to work productively on the project. <br><br></li><li>  <b>The language should work on both the client and the server</b> .  SEO is very important on Reddit, so the lack of a universal system for issuing browser-ready pages is a big problem. <br><br></li><li>  <b>Good library support</b> .  We were not going to write everything from scratch.  There are some tasks that require reliable, time-tested libraries.  We wanted to have the opportunity to choose what we need from existing libraries. </li></ol><br>  After reviewing these requirements, we settled on two options.  The first is TypeScript.  The second is JavaScript + Flow.  But, before making the final choice, we wanted to understand as much as possible the features of TypeScript and Flow, as well as the differences between them. <br><br><h2>  <font color="#3AC1EF">Compile or annotate?</font> </h2><br>  One of the important differences between TypeScript and Flow is that TypeScript is a language that compiles into JavaScript, and Flow is a set of type annotations that can be added to JavaScript code.  The correctness of the annotated code is checked by a static analyzer. <br><br>  The above differences directly affect how the programs write.  Take a look, for example, on working with enumerations in TypeScript and Flow. <br><br>  <b>TypeScript</b> <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">enum</span></span> VoteDirection {  <span class="hljs-attribute"><span class="hljs-attribute">upvoted</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>,  notvoted = <span class="hljs-number"><span class="hljs-number">0</span></span>,  downvoted = -<span class="hljs-number"><span class="hljs-number">1</span></span>, }; <span class="hljs-attribute"><span class="hljs-attribute">const</span></span> voteState: VoteDirection = VoteDirection.upvoted;</code> </pre> <br>  <b>Flow</b> <br><br><pre> <code class="hljs rust"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> voteDirections = { upvoted: <span class="hljs-number"><span class="hljs-number">1</span></span>, notvoted: <span class="hljs-number"><span class="hljs-number">0</span></span>, downvoted: -<span class="hljs-number"><span class="hljs-number">1</span></span>, }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VoteDirection</span></span></span></span> = $Keys&lt;<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> voteDirections&gt;; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> voteState: VoteDirection = voteDirections.upvoted;</code> </pre> <br>  Since TypeScript is a compiled language, it can be used to create types that are defined during program execution.  In Flow, types are just annotations, so we cannot rely on any code transformations to create type representations during program execution. <br><br>  However, TypeScript has certain disadvantages due to the fact that it is a compiled language.  When integrating TypeScript into an existing code base, there is a possibility that the compiler will complicate the build process.  We have a well-established assembly process using Babel and the transfiguration layer.  There are several optimizations that I would like to keep even when switching to TypeScript, so I needed a way to integrate TypeScript, which would not destroy the scheme of work that already exists.  The result of implementing TypeScript would be a much more complicated build process. <br><br>  In contrast to TypeScript processing, Babel automatically deletes Flow type annotations.  If we had chosen Flow, the application build process would not have been complicated. <br><br><h2>  <font color="#3AC1EF">Code validation</font> </h2><br>  In the area of ‚Äã‚Äãvalidating code, Flow usually performs better than TypeScript.  In Flow, by default, it is forbidden to use types that admit a <code>NULL</code> value.  TypeScript support for types that do not allow <code>NULL</code> been added to TypeScript 2.x, however, you need to enable this feature yourself.  In addition, Flow better prints types, while TypeScript often refers to the type <code>any</code> . <br><br>  In addition to the types that admit the value <code>NULL</code> and type inference, Flow is better in matters of <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)">covariance and contravariance</a> ( <a href="https://flow.org/en/docs/lang/variance/">here is the</a> material on this topic).  One of the typical problem situations here is working with typed arrays.  By default, arrays in Flow are invariant.  This means that the following construct in Flow will cause an error: <br><br>  <b>Flow</b> <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} const foo: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Bird</span></span>&gt; = []; foo.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Animal</span></span>()); <span class="hljs-comment"><span class="hljs-comment">/* foo.push(new A);       ^ A. This type is incompatible with const foo: Array&lt;B&gt; = [];               ^ B */</span></span></code> </pre> <br>  However, an attempt to do the same in TypeScript is completed without error messages. <br><br>  <b>Typescript</b> <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bird</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Animal</span></span></span><span class="hljs-class"> </span></span>{} const foo: <span class="hljs-type"><span class="hljs-type">Array</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Bird</span></span>&gt; = []; foo.push(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Animal</span></span>()); <span class="hljs-comment"><span class="hljs-comment">//  typescript  </span></span></code> </pre> <br>  You can find many more similar examples, however, the general conclusion is that Flow is much better at testing types than TypeScript. <br><br><h2>  <font color="#3AC1EF">Ecosystem</font> </h2><br>  Everything that has been said so far speaks about the benefits of Flow.  It is easier to integrate into the project, it is better at handling type checking.  Why did we stop at TypeScript? <br><br>  One of the most important advantages of TypeScript is its ecosystem.  It has amazing library support.  Almost all the libraries that we used either have type descriptions in the libraries themselves, or are represented in <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> .  In addition, TypeScript has excellent IntelliSense support in VSCode and in plugins for other popular editors that we use (for example, Atom and SublimeText are among them).  Moreover, we discovered that TypeScript can handle JSDoc annotations.  This turned out to be particularly useful since we switched to TypeScript with JavaScript. <br><br>  In addition, TypeScript is more ‚Äúsocially significant‚Äù, and there is a feeling that its lifespan will be quite long.  There are several large projects that use TypeScript (among them are VSCode, Rxjs, Angular, and TypeScript itself), so we have confidence that the set of its capabilities will be able to meet the goals of our project, and that the language in the coming years not going anywhere.  As for Flow, we are concerned that it was created to solve specific tasks on Facebook, and that its development will be determined by the same range of tasks.  TypeScript, on the other hand, is focused on a wide range of issues that Microsoft is working on.  All this allows us to assume that if we encounter errors and report them, we will be heard and taken action. <br><br>  In addition, since TypeScript is a language that is a superset of JavaScript, we can expect that the development of TypeScript, in particular, its support for new types and language constructs, will follow the development of JS.  The language and type system will develop in parallel, as work on them is going on simultaneously. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  We chose TypeScript, as we are confident that we will be able to quickly train all the necessary new developers (the number of our front-end engineers has tripled over the past year).  We are confident that the language meets our needs in the redesign of the site.  In addition, everything suggests that TypeScript will exist for a long time, and our research has shown that it integrates well with our code base.  However, for us the most important thing is the transition to a strictly typed language. <br><br>  The use of a typed language has already brought some results.  In the code, there are fewer errors associated with types, we are more confident in performing large refactorings.  Built-in documentation is now focused on concepts, and not on the description of the internal structure of objects and parameters of functions.  As a result, we can say that TypeScript is exactly what we needed. <br><br>  Dear readers!  Do you use TypeScript or Flow? </div><p>Source: <a href="https://habr.com/ru/post/333986/">https://habr.com/ru/post/333986/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333976/index.html">Come down from heaven: let's just count?</a></li>
<li><a href="../333978/index.html">We attack DHCP</a></li>
<li><a href="../333980/index.html">Take care of your points or how to resist fraud in loyalty programs</a></li>
<li><a href="../333982/index.html">Hummingbirds for Phantom</a></li>
<li><a href="../333984/index.html">Found new version of the program. Install?</a></li>
<li><a href="../333988/index.html">A team of web enthusiasts introduced the P2P browser Beaker</a></li>
<li><a href="../333992/index.html">Optical alignment and user interfaces</a></li>
<li><a href="../333996/index.html">Take out the local server to the network using another external server</a></li>
<li><a href="../333998/index.html">Bluetooth Mesh - the development of data transfer standard for IoT</a></li>
<li><a href="../334000/index.html">Printing on any paper size in Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Device and operation of input / output ports of AVR microcontrollers. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="LED connection to I / O port line 

 After reviewing this material, in which everything is described in great detail and in detail with many examples,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Device and operation of input / output ports of AVR microcontrollers. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <b>LED connection to I / O port line</b> <br><br>  After reviewing this material, in which everything is described in great detail and in detail with many examples, you can easily master and program the input / output ports of AVR microcontrollers. <br><br><ul><li>  <a href="http://habrahabr.ru/post/253213/">Part 1. Work I / O ports</a> </li><li>  <a href="http://habrahabr.ru/post/253961/">Part 2. Connecting the LED to the line I / O port</a> </li><li>  <a href="http://habrahabr.ru/post/255715/">Part 3. Connecting the transistor to the I / O port line</a> </li><li>  <a href="http://habrahabr.ru/post/256269/">Part 4. Connecting a button to the I / O port line</a> </li></ul><br>  An example will be considered on an <i><b>ATMega8</b></i> microcontroller. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will write the program in <i><b>Atmel Studio 6.0</b></i> . <br><br>  We will emulate the circuit in <i><b>Proteus 7 Professional</b></i> . <br><a name="habracut"></a><br>  The first example in the study of microcontrollers is the connection and control of the LED, this is the simplest and most obvious example.  This example has become a classic when learning microcontrollers, like the ‚ÄúHello World!‚Äù Program when learning other programming languages. <br>  The maximum current that each input / output port is able to pass is 40 mA. <br>  The maximum current that each line of the I / O port is capable of passing is 20 mA. <br>  Before connecting the load, including the LED to the lines of the I / O port, you need to know that you can burn the microcontroller by exceeding the permissible load on the line of the I / O port. <br>  To limit the current that flows through the lines of the I / O port of the microcontroller, you need to calculate and connect a resistor. <br><br><img src="https://habrastorage.org/files/9d3/5df/946/9d35df9464024379800ec35990413172.png"><br><br>  Rice: Lightning LED. <br><br><img src="https://habrastorage.org/files/b96/032/334/b9603233410b48b9ad604c44d88ba0e2.png"><br><br>  Figure: Connecting the LED anode to the microcontroller. <br><br><img src="https://habrastorage.org/files/406/ba1/0d2/406ba10d241242399aeb027cb3cde04f.png"><br><br>  Figure: Connecting the LED by the cathode to the microcontroller. <br><br>  The resistance of the current-limiting resistor connected to the lines of the I / O ports when the LED is connected is calculated by the formula: <br><br><img src="https://habrastorage.org/files/132/939/d12/132939d1220d4fbeae550eb6242c6c96.png"><br><br>  Where: <br>  - <b>Vs</b> - power supply voltage; <br>  - <b>Vsp</b> is the voltage drop on the line of the I / O port; <br>  - <b>Vd</b> - direct voltage drop on the LED; <br>  - <b>Id</b> - direct current on the LED; <br>  - <b>n</b> - reliability coefficient of LED robots; <br><br>  Example: <br>  - power supply voltage - <b>5V</b> ; <br>  - direct voltage drop on the LED - <b>2V</b> <i>(It is taken from the datasheet to the LED)</i> ; <br>  - direct current on the LED - <i>10mA (It is taken from the datasheet to the LED)</i> ; <br>  - Reliability factor LED robots - <b>75%</b> <i>(Taken from the datasheet to the LED)</i> ; <br>  - voltage drop on the I / O port line - <b>0.5 V</b> <i>(Taken from the datasheet to the microcontroller: Vol (output low voltage) - if the current flows in, and Voh (output high voltage) - if the current flows out)</i> ; <br><br><img src="https://habrastorage.org/files/450/3a9/084/4503a90842ab4ead98c17de5f3285289.png"><br><br>  Thus, the nominal value of the resistor is <b>R = 166.66 Om</b> , the nearest higher resistance value is selected. <br><br>  If the forward voltage of the LED is not known, the resistance can be calculated according to Ohm‚Äôs law. <br><br><img src="https://habrastorage.org/files/4cb/08e/67f/4cb08e67ffc049189193d235ad7783ed.png"><br><br>  Where: <br>  - <b>U</b> is the voltage applied to the circuit; <br>  - <b>I</b> is the rated current of the line input / output port. <br><br>  Example: <br>  - voltage applied to the circuit section - <b>4.5V</b> ; <br>  - The rated current of the I / O port line is <b>20 mA</b> . <br><br><img src="https://habrastorage.org/files/473/ee3/303/473ee3303a9244ed884046c88524fed1.png"><br><br>  After determining the value of the resistor <b>R</b> , it is necessary to calculate the power <b>P</b> , measured in watts, which will be released in the resistor, as heat when current flows in the circuit. <br><br><img src="https://habrastorage.org/files/f78/a5e/182/f78a5e18295b46d1a8aa61dc4c956afa.png"><br><br>  Where: <br>  - <b>U</b> is the voltage applied to the circuit; <br>  - <b>I</b> is the rated current of the line input / output port. <br><br>  Example: <br>  - voltage applied to the circuit section - <b>4.5V</b> ; <br>  - direct current on the LED - <b>20mA</b> . <br><br><img src="https://habrastorage.org/files/984/1d4/f31/9841d4f31a3541329aea8c6cf3739c11.png"><br><br>  Having calculated the allocated power at the resistor, we choose the nearest larger value of the resistor power.  If the dissipated power of the resistor is insufficient, then it can fail. <br><br>  <i><b>- Connecting a low-power LED anode to the line port I / O:</b></i> <br><br><img src="https://habrastorage.org/files/033/5f3/c2d/0335f3c2d9804673bfac2203211c9a74.png"><br><br><pre><code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //       "" PORTC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    C  .¬´<span class="hljs-number"><span class="hljs-number">1</span></span>¬ª (    Vcc) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { } }</code> </pre> <br><br>  <i><b>- connecting a low-power cathode LED to the I / O port line:</b></i> <br><br><img src="https://habrastorage.org/files/d5c/a6b/4e3/d5ca6b4e3a8340519baf3d37b6e3771f.png"><br><br><pre> <code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //       "" PORTC = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    C  .¬´<span class="hljs-number"><span class="hljs-number">0</span></span>¬ª (     GND) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { } }</code> </pre><br><br>  <i><b>- connecting the low-power LED by the anode and cathode to the line of the I / O port:</b></i> <br><br><img src="https://habrastorage.org/files/499/2de/7ea/4992de7ea2114f4283f72c392d870365.png"><br><br><pre> <code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRD = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    D   "" PORTD = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    D  .¬´<span class="hljs-number"><span class="hljs-number">1</span></span>¬ª (     Vcc) DDRC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    C   "" PORTC = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    C  .¬´<span class="hljs-number"><span class="hljs-number">0</span></span>¬ª (     GND) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { } }</code> </pre><br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/253961/">https://habr.com/ru/post/253961/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253947/index.html">Homemade Fourier Spectrometer</a></li>
<li><a href="../253949/index.html">Lenovo and IBM x86: what to expect in the near future?</a></li>
<li><a href="../253953/index.html">The era of phablets: Designing for large screens</a></li>
<li><a href="../253957/index.html">How to make a lightbirder based on Arduino</a></li>
<li><a href="../253959/index.html">How we built a new School of Managers Stratoplan: an invitation to a presentation</a></li>
<li><a href="../253965/index.html">Another smart home, in three parts. Part two, software and server. + Bonus</a></li>
<li><a href="../253967/index.html">Swedish data center with zero environmental impact will heat local households</a></li>
<li><a href="../253969/index.html">Search Engine Optimization for AppStore and Google Play or ASO</a></li>
<li><a href="../253973/index.html">Snacks from the new PHPixie Template</a></li>
<li><a href="../253979/index.html">Igor Ashmanov about the future of home robots. Home robots: on the eve of a tornado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
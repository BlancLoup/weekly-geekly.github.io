<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is LoRaWan</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Let me remind you that the term IoT (Internet of Things) refers to various devices that use the output to the network to interact with each other. For...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is LoRaWan</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/2f/bw/hy/2fbwhygtjkmo-uswb7dx5zo9d9e.jpeg"><br><br>  Let me remind you that the term IoT (Internet of Things) refers to various devices that use the output to the network to interact with each other.  For example, a smart socket connects to the Internet not to sit on social networks.  She receives commands from the Network that her owner sends.  And she is a thing.  The thing that uses the Internet. <br><a name="habracut"></a><br>  For a boom IoT prepared for a long time.  And almost immediately it became clear that existing standards of data transmission are not suitable for stable operation. <br><br><h3>  Why something new? </h3><br>  At first glance, we already have ready and run-in solutions.  Wi-Fi, LTE, why not use them? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are several reasons.  Imagine a house with 400 apartments, each of which has two water meters and an electric meter.  Suppose this is a modern house, and each meter transmits readings to the Internet. <br><br>  Volume  One residential building of 400 apartments will have 1200 user counters.  They will have a penny traffic, but if they all hang, for example, at an LTE base station, then there will be no place for people at this base station.  And this is one house.  But the base station is usually put on the neighborhood or even more. <br><br>  Consumption.  If the meter can still provide power, then pull the cable to the water meter is not too convenient.  So the radio water meter module should run on batteries.  But even a good Wi-Fi and LTE battery will be eaten in a few days.  We want to change the battery did not have at least a year. <br><br>  Other priorities.  We do not need a communication channel of 5 Mb / s to transmit once a day how many cubes of water run through each apartment.  Enough read bits.  We are limited by transmitter power, it is necessary that he did not eat the battery.  So, you can use the rule ‚Äúmore energy in one bit - higher probability of reception‚Äù in such a way that the communication channel at the minimum speed and with the minimum power is guaranteed to travel the required distance.  Even if the signal is below the noise level. <br><br>  After a thorough market analysis, Intersvyaz decided to build its network based on the LoRa standard. <br><br><h3>  What is LoRa? </h3><br>  Strictly speaking, the abbreviation LoRa (Long Range) denotes only the type of modulation, that is, the l1 level according to the OSI model.  The data link layer protocol is named LoRaWAN.  But most often ‚ÄúLaura‚Äù refers to the aggregate system that uses LoRa on the physical and LoRaWAN on the link level. <br><br>  It works as follows.  The base station listens to the air in a given frequency range.  When she hears a request from any of the devices, she answers on the frequency of the call.  The channel width is 125 kHz, the maximum speed is just over 5 kilobits / s.  Yes, yes, you heard right.  It is exactly 5 kilobits / c.  This IoT standard is not designed for streaming video.  His task as quickly as possible and guaranteed to send a small message from the sensor to the base station.  Depending on the radio conditions, an optimal set of communication parameters is chosen.  SF (spreading factor) is responsible for this - the coefficient to which the transmission and reception parameters are attached.  SF is an integer, in the standard it is provided from 12 to 7. The higher the SF, the better the line noise immunity, but the lower the speed and the longer the transmission time on the air.  For example, the maximum noise immunity is achieved at SF = 12.  At the same time, the packet time on the air is 2.466 s, and the speed is 292 bps. <br><br>  However, the more sensors the base station will use, the longer it will take on the air.  Therefore, with good radio conditions, SF will be less.  Speed ‚Äã‚Äãgrows - transmission time drops. <br><br>  Packets are received by the base station (in the LoRa architecture it is often called the gateway), however, they are processed by the next link in the chain - the network server.  This server is responsible for managing all gateways, it decides through which gateway to communicate with the sensor (if the sensor is audible through several gateways) and determines a number of important parameters. <br><br>  However, the network server does not process useful information from the packets.  This makes the next and most important link - the application server.  It is on the application server that the readings from the sensors are deciphered; they are distributed in an understandable form either to billing, or to the interface to the consumer, or to another specified place. <br><br><img src="https://habrastorage.org/webt/7a/zy/py/7azypy6ugivxcmrfcochpb4c2po.jpeg"><br><h3>  <b>Why choose LoRa?</b> </h3><br>  At the moment there are several dozen standards for Internet things.  Some of them are universal, some are adapted to solve their range of tasks.  All of them more or less adhere to the principles described above.  There are even standards based on Wi-Fi and LTE.  So why exactly LoRa? <br><br>  There are several reasons: <br><br><ol><li>  LoRa uses the frequency range allowed for use in Russia.  There are LoRa systems for the 433 MHz band, but in our country the frequencies from the 868 band are more common. There we have 1.5 MHz of unlicensed spectrum.  864-865 MHz and 868.7-869.2.  In the first interval, we have a time limit for the transmitter on the air (no more than 0.1%) and power (no more than 25 mW).  In the second - only in power (the same 25 mW).  There are also reservations about the use near airports.  As already mentioned, the LoRa channel width is 125 kHz.  The standard provides for 250 and 500, but in Russia they are usually not used.  So, at 1.5 MHz, we need to ‚Äúpush‚Äù 8 basic frequencies and one spare (RX2, the second window, which is used if it does not pass through the main channel).  Is it possible  If you strictly adhere to the recommendations of the developer Semtech, then the guard interval between the channels should be 75 kHz.  So, it will be possible to place only 7 channels.  Not 9, but good too.  It is hoped that over time, the SCRF will give permission to expand this spectrum. </li><li>  LoRa was just designed to work at a power of 25 mW.  And here we do not break.  Do not be confused by such a low level - the technology can work below the noise level. </li><li>  LoRa is an open standard.  Chips for end devices in the free market, there is all the documentation, and it is open to anyone.  Sensors and radio modules for this standard only in Russia make a few companies.  It is not a ‚Äúthing in itself,‚Äù even if one of the manufacturers disappears, there will be others. </li><li>  LoRa has a good range, it can receive information from devices in the basement or a kilometer from the base station.  In fact, it can receive information from the sensor in 4 kilometers of urban conditions.  But stability suffers here, as the packet loss begins.  However, a kilometer or two we have. </li><li>  LoRa sensors live on battery for at least a year.  And even more.  There is a dependence on the class of the sensor (A, B or C).  The most enduring - A-class - can hold out for several years. </li></ol><br><h3>  <b>Vendor selection</b> </h3><br>  The Russian market is like a sprinter, who froze in anticipation of the start.  LoRa technology offers are numerous.  But half of the companies turn out to be outbid, who have not seen the technology before their eyes and are ready to order something from abroad. <br><br>  Another part has ready-made platforms, to which it seeks to bind users and operators.  Those.  the application server will be located not at the operator, but at the equipment supplier.  Such dependence did not suit us.  Therefore, we decided to write an application server on our own. <br><br>  There was a question - on which base stations will we work? <br><br>  In fact, there are not so many offers on the market now.  We have chosen three options for the test: <br><br>  BS Kerlink (France). <br>  BS Vega (Russia). <br>  Cisco BS (USA). <br><br>  Please note that I am writing only the nationality of the manufacturer.  To say that the BS collected at the place of registration will not be entirely true.  For example, Vega collects stations in Russia, but uses the same Semtech chips for this.  Because each station is a kind of hodgepodge. <br><br>  Initially, tests were conducted on standard antennas.  Measured coverage map, considered two coverage areas. <br><br>  Zone 1 - guaranteed to pass all packages. <br><br>  Zone 2 - there are minor losses, not more than 15 percent. <br><br>  In general, all BS showed similar results.  At Vega and Kerlink Zone1 was in a radius of 800-900 meters.  Cisco at the expense of the system ‚Äúone antenna per transmission-two per reception‚Äù showed results 30 percent better.  Zone 2 of all three stations was about the same. <br><br>  Vendor <br><br>  Zone 1 (full packet passing) <br><br>  Zone 2 (loss of no more than 15 percent) <br><br>  Kerlink <br><br>  800-900 meters <br><br>  1400-1500 meters <br><br>  Vega <br><br>  800-900 meters <br><br>  1400-1500 meters <br><br>  Cisco <br><br>  1100-1200 meters <br><br>  1400-1500 meters <br><br>  It is necessary to understand that average readings are taken.  For example, a deaf basement within a radius of 500 meters is not always possible to cover.  And to the apartment on the 9th floor in direct line of sight from the BS "finish off" and 2.5 km without a loss. <br><br>  In general, the two most important factors influencing signal propagation were expected: <br><br>  Building density.  This includes the number of houses in the signal path, their number of floors, and the material from which they were built.  For example, monolithic houses are a more serious obstacle than panels. <br><br>  The terrain.  Chelyabinsk is not distinguished by its flat terrain, after all the Urals.  Therefore, we noticed a clear increase in the coverage area on declines and a decrease - on rises. <br><br>  By itself, the signal turned out to be extremely resistant to industrial interference.  The only weakness of the technology was the GSM-900 antenna.  On the roofs next to them, the BS noticeably lost their effectiveness.  However, cellular antennas did not have a significant impact on other bands. <br><br>  As a result, we did not see a big difference between Kerlink and Vega.  And Vega turned out to be almost five times cheaper than a competitor, in addition, its engineers provide strong support in the form of consultations.  Therefore, the pilot project was decided to build on Vega. <br><br>  As for Cisco, we were given only a prototype and at the time of this writing, they have not yet started mass production.  However, it was Cisco that won in terms of coverage, penetrating power and a number of technological features. <br><br>  After that, we repeated the tests using Radial antennas with better gain than BS base antennas (10 dBi versus 6 dBi).  The new antennas improved the Cisco coverage map by an average of 15 percent, and the Vega coverage map jumped by as much as 40 percent (full-time antennas from a Russian manufacturer do not have good performance).  By that time, Kerlink was not considered due to unreasonable high prices. <br><br>  Thus, Vega is not much lost to its overseas competitor. <br><br>  As a result, it turned out that about 40-50 BS is required for a stable and high-quality coverage of such a city as Chelyabinsk. <br><br><h3>  <b>Pilot zone</b> </h3><br>  As part of the tests, we connected the general house water meters of one of the management companies to our network.  Water meters Zenner had pulse outputs, for the removal of information used sensors Vega SI-11.  This is a simple, self-powered pulse counter in a compact package with a LoRa radio module.  Mounted on a DIN rail. <br><br><img src="https://habrastorage.org/webt/sb/hf/ec/sbhfecosfjxanfnsqwqnhx11sak.jpeg"><br><br>  For a qualitative assessment of the parameters, the minimum period for sending testimony was set at 1 hour.  Further, the readings were periodically checked against the fact that the meter gives out on its dial.  If the impulse price is set correctly, and the Zenner meter is in good condition, then there were no deviations in the readings. <br><br><img src="https://habrastorage.org/webt/oa/gu/a_/oagua_avehydjpbvr9pk23ojnvi.png"><br><br>  Since  similar metering devices are installed in basements; we have gained good experience in the practical application of LoRa technology.  In general, the results coincided with our tests.  Depending on the terrain, building and configuration of the basement, the gateway could communicate with sensors at a distance of 500-2300 meters.  On the given map there is a case of an average basement with dormer windows.  It is located at a distance of 1.5 km from the gateway.  Packet loss does not occur.  Note that in the direct propagation of the signal is a good piece of the private sector, which does not contribute much attenuation. <br><br><img src="https://habrastorage.org/webt/od/nl/gp/odnlgp3ioxzr4spic-8xsufpp90.png"><br><br><h3>  <b>Network scaling</b> </h3><br>  LoRa base stations connected to a single network server work as a single mechanism.  Since  most of the time, the end devices are silent, then collisions in the air are extremely rare.  Usually, when the sensor makes contact, it is heard by several BS at once.  But only one will answer.  This is not necessarily the closest to the BS sensor, but always the one with the best quality characteristics of the communication channel. <br><br>  The network is very easy to grow - you just need to connect the configured BS to the network server via Ethernet or mobile networks.  But it is impossible to get involved in too large stations per unit area: <br><br><ol><li>  It is not economically feasible.  Stations cost money, too high density will lead to unreasonable expenses. </li><li>  The station must always be at a dominant height.  If your station is located on a 16-storey building and covers a microdistrict well, then most of the information will go through it.  Any additional BS near her will most likely be idle most of the time. </li><li>  Each BS, one way or another, can take a precious place on the air.  Too high BS density increases the risk of collisions. </li></ol><br>  We selected 900-1000 meters as the optimal work radius.  This is with a margin, because  Many of our radio modules are in basements.  There are not the best radio conditions, you have to get up closer to hear them.  In particularly difficult cases, this radius can be reduced, although such a need has arisen with us only two times. <br><br><h3>  <b>What's next?</b> </h3><br>  The main question asked by skeptics.  Great, you have the technology.  Where are the consumers? <br><br>  Yes, here they are!  Right in front of you.  At the moment, Intersvyaz is implementing a large-scale project for connecting various general home counters to a single data collection center.  In the future, the connection of other general household metering devices.  The device is polled through LoRa technology. <br><br>  In this case, the counter does not necessarily have a built-in radio module.  A pulse output is enough, RS-232 or RS-485.  In this case, an external radio module is installed next to it with the necessary interface that collects and transmits readings. <br><br>  This is also true for apartment metering devices.  Now it is not necessary to transfer indications to office or through the Internet.  If you are connected to the application server, the data will be transferred automatically. <br><br>  This service is in demand from management companies.  Now they don‚Äôt need to send locksmith Uncle Petya to the basement so that he can rewrite the meter readings there (does it come off exactly ???).  Once an hour, the radio module will report the readings to the server, which will transmit to the billing. <br><br>  The radio module is powered autonomously, from its battery.  According to the calculations of the first months of operation, the battery will last an average of one year.  You can increase the service life by setting the transfer readings once a day.  However, while a number of statistical experiments are being carried out, we still remove the data once an hour.  As part of the tests. <br><br><img src="https://habrastorage.org/webt/xs/5y/gt/xs5ygty5twryex4wm-mu3saigaa.jpeg"><br><br>  In its message, the radio module transmits the most necessary data: the number of pulses, the battery charge, the temperature of the meter, and the packet number.  The network server can be used to track the module's communication, stability of packet passing, signal level and gateway, which the module holds.  The testimony itself is transmitted to us (and clients) by the application server in a convenient form. <br><br>  We continue to develop our technology and connect new subscribers to it.  The plans include the implementation of many more technical innovations, the commissioning of new equipment and software.  Various radio modules and complete devices that can work in our network are being tested.  We collect information from subscribers, trying to understand what else is needed, what is the need.  For example, it becomes clear that on the basis of the readings of water meters you can make operational analytics.  On its basis, for example, you can track the leakage of water. <br><br>  All these wishes are made in the form of tasks to our engineers and transferred to work.  Much remains to be done, but now we can say.  ‚ÄúThe Internet of Things is now in your home!‚Äù <br><br>  Prepared by Oleg Plotnikov </div><p>Source: <a href="https://habr.com/ru/post/371067/">https://habr.com/ru/post/371067/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../371057/index.html">Ask Ethan: What was the entropy of the Universe at the time of the Big Bang?</a></li>
<li><a href="../371059/index.html">Review of the smartphone ASUS ZenFone 4 Selfie Pro</a></li>
<li><a href="../371061/index.html">From Chicago to the airport on autonomous carts under the ground: Loop project by Ilona Mask</a></li>
<li><a href="../371063/index.html">Voyager 1 started the engine after almost 40 years of inactivity</a></li>
<li><a href="../371065/index.html">Deadly degrees or versions of the crash of the ‚ÄúFrigate‚Äù upper stage</a></li>
<li><a href="../371069/index.html">More freedom: Audio-Technica ATH-AR3BT wireless headphones</a></li>
<li><a href="../371071/index.html">Electrostatic air purifier do it yourself. Part 1 - principles of work</a></li>
<li><a href="../371073/index.html">How much RAM was consumed by computer games, or Pending the era of ‚Äú16+ GB‚Äù</a></li>
<li><a href="../371077/index.html">Soft or hard? The debate about what is inside a neutron star</a></li>
<li><a href="../371079/index.html">Artificial Intelligence will judge gymnastics competitions at the Tokyo Olympics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
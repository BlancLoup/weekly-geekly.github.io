<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Backing up Rails projects without a hitch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, people are divided into those who still do not make backups, those who already do, and those who already do and check the possibility of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Backing up Rails projects without a hitch</h1><div class="post__text post__text-html js-mediator-article">  As you know, people are divided into those who still do not make backups, those who already do, and those who already do and check the possibility of recovery <br><br>  Fortunately, 20 minutes ago, when Curve <s>admin</s> recipe Capistrano completely demolished on the "combat" server directory with downloaded images from articles of users, I already belonged to the category of doing backups.  Here, at the same time and checked. <br><br>  And we make backups via gem backup 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  We have about 20 user sites on cloud hosting on several servers, which we also developed plus one small, but proud (and heavy) application with VoIP, RTMP, J2ME <s>and geishas</s> and a web admin.  When a few months ago, the admin, when updating, deleted the Asterisk PBX configs and then with a shaking chin and blue lips, restored them from a running demon, it became clear that it would be too dangerous without further backups.  But back-ups for 20 applications, each of which used its own database in MySQL with its usernames and passwords, were too uninteresting and boring.  It would be a long-long bash script, which would have been <s>scored</s> immediately after a successful launch <s>would have</s> had to spend a lot of time to keep this script up-to-date. <br><br>  This is where the backup gem came in handy. <br><br>  Heme <a href="https://github.com/meskyanichi/backup">backup</a> does this: <br><ul><li>  reads your config </li><li>  dump the specified databases (different DBMS supported) to the temporary directory </li><li>  Tariff specified directories to a temporary directory </li><li>  tight all </li><li>  encrypts all </li><li>  puts on a remote server via FTP, SCP, RSync and others </li><li>  maintains cyclical storage </li><li>  writing me a letter </li></ul><br><br>  You just need to do three simple things: <br><br>  1. Install gem (gem install backup) <br><br>  2. Write the config (by default, the executable file of the gem searches for the config in the ~ / Backup / config.rb directory, you can change this with additional options).  An example config for one of our sites: <br><br> <code>Backup::Model.new(:kodepru, 'kodepru_backup') do <br> <br> archive :my_archive do |archive| <br> archive.add '/path/to/dir/www.kodep.ru' <br> end <br> <br> database MySQL do |db| <br> db.name = "wwwkodepru_production" <br> db.username = "user" <br> db.password = "password" <br> db.host = "mysql.local" <br> db.port = 3306 <br> db.additional_options = ['--quick', '--single-transaction'] <br> end <br> <br> store_with SCP do |server| <br> server.username = 'backup' <br> server.password = 'verydifficultpassword' <br> server.ip = 'backup.local' <br> server.port = 22 <br> server.path = '~/www.kodep.ru/' <br> server.keep = 14 <br> end <br> <br> compress_with Gzip do |compression| <br> compression.best = true <br> compression.fast = false <br> end <br> <br> notify_by Mail do |mail| <br> mail.on_success = true <br> mail.on_failure = true <br> <br> mail.from = 'backup@kodep.ru' <br> mail.to = 'sysadmin@kodep.ru' <br> mail.address = 'smtp.kodep.ru' <br> mail.port = 25 <br> mail.domain = 'kodep.ru' <br> mail.user_name = 'backup@kodep.ru' <br> mail.password = 'password_ot_pochty' <br> mail.authentication = 'plain' <br> mail.enable_starttls_auto = true <br> end <br> <br> end <br> <br></code> <br>  This config tells gem that you need to take a dump of the wwwkodepru_production database, dump it into a temporary directory, take the directory where the site is located, archive all of this, put it through the SCP to the backup server, making sure that no more than 14 recent backups are stored and send a joyful message to the admin. <br><br>  3. Record the start of the backup perform --trigger kodepru command at, say, midnight. <br><br>  ... <br><br>  PROFIT !!! <br><br>  Naturally, we do not write this config with a stern admin hand!  There is a special socket, written <s>on the knee</s> on the rails. <br><br>  By the way, something tells me that not only Rails applications consist of a directory with code and a database ... <br><br>  I hope someone will be interested, and I, perhaps, will continue to write about our simple tricks. </div><p>Source: <a href="https://habr.com/ru/post/123401/">https://habr.com/ru/post/123401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123394/index.html">Working with ShapeFile (* .shp) in Delphi</a></li>
<li><a href="../123395/index.html">Accounting system based on the OCR system</a></li>
<li><a href="../123396/index.html">Czech! Who is to blame and what should an IT specialist do abroad !?</a></li>
<li><a href="../123397/index.html">Determining GPS availability in Android</a></li>
<li><a href="../123400/index.html">Three.js - 3D do it yourself browser or WebGL gets closer</a></li>
<li><a href="../123403/index.html">Maps in your Android application</a></li>
<li><a href="../123404/index.html">Google launched Prizes.org</a></li>
<li><a href="../123405/index.html">IPO for dummies. Part VIII: About Motivation</a></li>
<li><a href="../123408/index.html">Zuckerberg inspired by Jobs</a></li>
<li><a href="../123410/index.html">Export contacts from Facebook to Google+</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
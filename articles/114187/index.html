<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Text analyzer: recognition of authorship (continued)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is about the authorship recognition algorithm implemented in the Text Analyzer project. In the continuation of the article we will consid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Text analyzer: recognition of authorship (continued)</h1><div class="post__text post__text-html js-mediator-article">  This article is about the authorship recognition algorithm implemented in the Text Analyzer project.  In the continuation of the article we will consider a finite state machine for splitting text into levels.  ( <a href="http://habrahabr.ru/blogs/development/114186/">Begin</a> and <a href="http://habrahabr.ru/blogs/development/114188/">end</a> ). <br><br>  Article structure: <br><ol><li>  <a href="https://habr.com/ru/post/114187/">Authorship analysis</a> </li><li>  <a href="https://habr.com/ru/post/114187/">Introducing the code</a> </li><li>  <a href="https://habr.com/ru/post/114187/">TAuthoringAnalyser internals and text storage</a> </li><li>  <a href="https://habr.com/ru/post/114187/">Leveling by state machine on strategies</a> </li><li>  <a href="https://habr.com/ru/post/114187/">Collection of frequency characteristics</a> </li><li>  <a href="https://habr.com/ru/post/114187/">Hamming neural network and authorship analysis</a> </li></ol><br>  Additional materials: <br><ul><li>  <a href="http://sourceforge.net/projects/textanalyzerv04/files/TextAnalyser%25200.4%2520alpha/">Sources</a> of the Text Analyzer Project (Borland C ++ Builder 6.0) </li><li>  Testing the Hamming Neural System in Excel ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Hamming%2520neurosystem%2520test.xls/download">[xls]</a> ) </li><li>  Conversion table for the spacecraft splitting the text into levels ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Finite%2520State%2520Machine.xls/download">[xls]</a> ) </li><li>  Calculation of the sound of individual letters ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Letters%2520euphony.xls/download">[xls]</a> ) </li><li>  Presentation of the graduation project "Text Analyzer" ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Presentation%2520of%2520Granin%2520Alexander_s%2520diplomas.ppt/download">[ppt]</a> ) </li><li>  Presentation of the ‚ÄúEuphony Card‚Äù project ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Presentation%2520of%2520Granin%2520Alexander_s%2520Euphony%2520map.ppt/download">[ppt]</a> ) </li><li>  All these materials are compressed ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Materials.zip/download">[zip]</a> , <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Materials.7z/download">[7z]</a> , <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Materials.rar/download">[rar]</a> ) </li></ul><br><br><a name="habracut"></a><br><h5>  4. Leveling by the state machine on strategies </h5><br>  Need to: <br><ul><li>  Break the text into words, sentences and paragraphs. </li><li>  Address these levels uniformly, without knowing anything about internal realization. </li><li>  Do not store these levels in their natural form, otherwise the texts would be copied a huge number of times. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/7d653c67/fc4ae508/848aca2a/f7101974.png" align="right"><br>  Findings: <br><ul><li>  Levels will be stored as lists with indexes.  Logically, the concept of ranges fits here (Range, <a href="http://habrahabr.ru/blogs/javascript/55922/">[1]</a> , <a href="http://www.boostcon.com/site-media/var/sphene/sphwiki/attachment/2009/05/08/iterators-must-go.pdf">[2]</a> , <a href="http://www.boost.org/doc/libs/1_35_0/libs/range/index.html">[3]</a> );  and although at that time I still did not know anything about the Range, or about Alexandrescu ( <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2581%25D0%25B0%25D0%25BD%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581%25D0%25BA%25D1%2583,_%25D0%2590%25D0%25BD%25D0%25B4%25D1%2580%25D0%25B5%25D0%25B9">[1]</a> ), I got the primitive ranges.  The ranges have a starting index and an ending index: RangeItem (BeginIndex, EndIndex), or a starting index and quantity (offset): Range (BeginIndex, Count).  The indices correspond exactly to the positions of the characters in the text.  If we want to mark all the text, it will be a RangeItem (1, Length (Text)).  If we need a paragraph in the middle, we will get a RangeItem (312031, 312355).  The list of ranges will be pieces of text without copying them directly. </li><li>  Ranges must be hidden behind the abstraction.  So, referring to the list of ranges representing the first and last paragraphs, we should only see the text that is hidden in them.  We should not care how many there are these Range and where they point.  May we turn to a higher level, and he will give us what we want. </li><li>  Defining words is not a problem.  Know yourself to separate all the letters between other characters ... Paragraphs are also easily identified.  Unless, of course, to forget that in different OS the end of a paragraph is denoted differently ( <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE%25D0%25B4_%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25BA%25D0%25B8">[1]</a> ).  But sentences ... How many, you would think, we have "legal" signs that complete the sentence?  Three?!  Point, question and exclamation? .. Where there! .. They can still be combined !!!  ( <a href="http://besisland.livejournal.com/520439.html">[1]</a> ).  But even that is not all;  I have met constructions where in one sentence there are actually two or more.  And if you count wrong, instead of the seven previous sentences, you can count more than fifteen.  The conclusion, in principle, is obvious: we need a finite automaton. </li></ul><br><br>  KA is a state machine ( <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BD%25D0%25B5%25D1%2587%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B0%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582">[1]</a> , <a href="http://habrahabr.ru/blogs/ruby/64403/">[2]</a> , <a href="http://habrahabr.ru/blogs/development/60342/">[3]</a> ).  One of its applications is that it recognizes certain constructions in a chain of incoming characters: words, compound punctuation marks, functions, structures, whole classes with their methods and fields.  This is how spell checkers, source code analyzers, compilers, syntax highlighting tools work, so does your computer, and so on and so forth.  The applicability of the spacecraft is huge.  For example, I asked my students to generate a fairy tale using non-deterministic spacecraft, and this is possible.  Here the spacecraft is used on strategies ( <a href="http://satsky.spb.ru/articles/fsm/fsmEng.php">[1]</a> ), written by Sergei Satsky ( <a href="http://satsky.spb.ru/resume.php">[1]</a> ) already in 2003. <br><br><blockquote><code><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> <font color="black">Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> <ol> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> // that were generated in the transition functions <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> <font color="#008000">// ......</font></font></code> </li> <li> <code><font color="black"><font color="#008000"><a href="http://s-c.me/12117/s"></a> <a href="http://s-c.me/12117/h"></a> Copy Source | Copy HTML template &lt; <font color="#0000ff">class</font> <font color="#2b91af">SState</font> , <font color="#0000ff">class</font> <font color="#2b91af">SEvent</font> , <font color="#0000ff">class</font> <font color="#2b91af">SFunctor</font> = SEmptyFunctor&lt; <font color="#2b91af">SState</font> , <font color="#2b91af">SEvent</font> &gt;, <font color="#0000ff">class</font> <font color="#2b91af">SUnknownEventStrategy</font> = SThrowStrategy&lt; <font color="#2b91af">SEvent</font> &gt; &gt; <font color="#0000ff">class</font> <font color="#2b91af">SFiniteStateMachine</font> { <font color="#0000ff">public</font> : typedef <font color="#2b91af">SState StateType</font> ; typedef <font color="#2b91af">SEvent EventType</font> ; <font color="#0000ff">private</font> : <font color="#2b91af">StateType</font> _CurrentState; <font color="#008000">// Current machine state</font> std::vector&lt; <font color="#2b91af">StateType</font> &gt; _States; <font color="#008000">// A list of the registered states</font> std::vector&lt; <font color="#2b91af">EventType</font> &gt; _Events; <font color="#008000">// A list of the registered events</font> std::vector&lt; std::vector&lt; <font color="#2b91af">StateType</font> &gt; &gt; _Transitions; <font color="#008000">// A table of transitions between states</font> <font color="#2b91af">SFunctor</font> _Functor; <font color="#008000">// Transition function</font> <font color="#2b91af">SUnknownEventStrategy</font> _UnknownEventStrategy; <font color="#008000">// Unknown event strategy</font> std::deque&lt; <font color="#2b91af">EventType</font> &gt; _EventsQueue; <font color="#008000">// Internal events queue to support events</font> <font color="#008000">// that were generated in the transition functions</font> <font color="#0000ff">bool</font> _InProcess; <font color="#008000">// To be sure that we are in the process of events</font> <font color="#0000ff">int</font> _CurrentStateIndex; <font color="#008000">// Index of column in a transition table (0 - based)</font> <font color="#2b91af">StateType</font> _InitialState; <font color="#008000">// Start machine state</font> // ......</font></font></code> </li> </ol></blockquote><br><br><img src="https://habrastorage.org/storage/e83e894c/9341bf89/e3643e54/d430d0af.png" align="right"><br>  Satskii state machine ( <a href="">[h]</a> ) is implemented on the Strategy pattern.  (Strategy, <a href="http://sourcemaking.com/design_patterns/strategy">[1]</a> , <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D1%2580%25D0%25B0%25D1%2582%25D0%25B5%25D0%25B3%25D0%25B8%25D1%258F_%2528%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F%2529">[2]</a> , <a href="http://inroot.ru/2010-07/pattern-strategy.html">[3]</a> ).  The strategies come in the types SState, SEvent (event, state), SFunctor (functor of transition from one state to another) and SUnknownEventStrategy (behavior of the SC, if the event is not recognized).  Here is the function that recognizes the event and translates the spacecraft into a new state: <br><br><blockquote> <code><a href="http://s-c.me/12118/s"></a> <a href="http://s-c.me/12118/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  inline <font color="#0000ff">void</font> ProcessEvent ( <font color="#0000ff">const</font> EventType &amp; tEvent) </li><li>  { </li><li>  <font color="#0000ff">int</font> EventIndex (GetEventIndex (tEvent)); </li><li>  <font color="#0000ff">if</font> (EventIndex == - <font color="#A31515">1</font> ) <font color="#0000ff">return</font> ; </li><li></li><li>  StateType OldState (_CurrentState);  <font color="#008000">// Save the old state.</font> </li><li></li><li>  _CurrentState = (_Transitions [EventIndex]) [_ CurrentStateIndex];  <font color="#008000">// Define a new state.</font> </li><li>  _CurrentStateIndex = GetStateIndex (_CurrentState); </li><li></li><li>  _Functor (OldState, tEvent, _CurrentState);  <font color="#008000">// Perform the action associated with the new state.</font> </li><li>  } </li></ol></blockquote><br><br>  Let somewhere in the external environment, we iterate the text character by character.  We take the next character and pass it to the ProcessEvent () function.  The state machine for this symbol selects a cell in the transition table, also based on the current state.  The cell says what state should come and what to do next.  I slightly changed the spacecraft so that he understood the ‚Äúsymbol‚Äù as an event.  I also redefined the ‚ÄúStatus‚Äù strategy by slipping my state class.  Thus, the transition table consisted of certain events and states by me. <br><br>  And it was very difficult to develop.  She grew by leaps and bounds.  If the state was ‚ÄúEmpty‚Äù, and the letter ‚ÄúA‚Äù came, then we should start recognizing the word, sentence and paragraph by going to the corresponding state.  If a point has arrived, then we have to go into a special state and wait, but is this a composite punctuation mark?  Could be ‚ÄúB‚Äù, ‚ÄúC‚Äù, ‚Äúb‚Äù, ‚Äúc‚Äù, ‚Äú!‚Äù, ‚Äú1‚Äù, ‚Äú2‚Äù ... All the letters of the alphabet, all the punctuation marks, in general, all the signs of the ASCII table.  And because they need to somehow react!  Imagine a table with ~ 255 lines (one line - one event, one character) and about 20 columns of spacecraft states.  It's a broom how many cells with transition teams to fill!  20 * 255 = 5100 cells.  I found a simpler approach.  All single-type characters are placed in character sets ( <a href="">[CCharsSet.h]</a> ; <a href="">[UConstants.h]</a> ), and the entire character set is already considered an event if its character has arrived.  Of course, the sets may intersect.  For example, the letter ‚ÄúB‚Äù is the elements of the following sets: ‚ÄúAll symbols‚Äù, ‚ÄúLetter‚Äù, ‚ÄúUppercase letter‚Äù, ‚ÄúRussian letter‚Äù, ‚ÄúRussian capital letter‚Äù.  The ‚Äúdot‚Äù sign is included in the ‚ÄúAll symbols‚Äù, ‚ÄúPunctuation mark‚Äù, ‚ÄúParagraph end‚Äù sets.  And so on.  The sets came out decently, however, this is less than all the characters.  The transition table ( <a href="http://sourceforge.net/projects/textanalyzerv04/files/Materials/Finite%2520State%2520Machine.xls/download">[xls]</a> ) has decreased tenfold.  Another important advantage is that the sets can be changed without affecting the conversion table.  Well, we have forgotten the letter "E", well, inserted into the appropriate sets, and business! .. <br><br>  How does this even work?  After all, passing the text through the state machine, we have to build a tree of levels.  If in words, then the state machine, executing the instruction upon the occurrence of an event, calls the function associated with the event.  There are several such functions ( <a href="">[UParSentWordFSM.h]</a> ), and they all build a common tree, receiving a pointer to it as input.  Let's take a closer look at how the configuration of the spacecraft is described. <br><br><blockquote> <code><a href="http://s-c.me/12119/s"></a> <a href="http://s-c.me/12119/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">class</font> <font color="#2b91af">TState</font> ; </li><li>  typedef TCharsSetEvent <font color="#2b91af">TEvent</font> ; </li><li></li><li>  typedef TCFDivisionTreeItem &lt; <font color="#2b91af">TCFLevelDataType</font> , <font color="#2b91af">TUnitType</font> &gt; TCFCustomUnitDivisionTreeItem; </li><li>  typedef TCFTreeLevel &lt; <font color="#2b91af">TCFLevelDataType</font> , <font color="#2b91af">TUnitType</font> &gt; TCFCustomUnitTreeLevel; </li><li></li><li>  typedef <font color="#0000ff">void</font> (* TFuncPtr) (TCFCustomUnitDivisionTreeItem *, <font color="#0000ff">const</font> <font color="#2b91af">TEvent</font> &amp;); </li><li>  typedef TStateMachineDescriptor &lt; <font color="#2b91af">TState</font> , <font color="#2b91af">TEvent</font> &gt; TParSenWordDescriptor; </li><li></li><li>  <font color="#008000">/ * Class of used state. * /</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#2b91af">TState</font> : <font color="#0000ff">public</font> TFunctionalState &lt; <font color="#2b91af">TEvent</font> , <font color="#2b91af">TTextString</font> &gt; </li><li>  { </li><li>  <font color="#0000ff">private</font> : </li><li>  TFuncPtr _Function; </li><li>  TCFCustomUnitDivisionTreeItem * _TargetTree; </li><li>  <font color="#0000ff">public</font> : </li><li>  <font color="#0000ff">void</font> OnEnter ( <font color="#0000ff">const</font> <font color="#2b91af">TState</font> &amp; tStateFrom, <font color="#0000ff">const</font> <font color="#2b91af">TEvent</font> &amp; tEvent) { </li><li>  _Function (_TargetTree, tEvent); </li><li>  }; </li><li></li><li>  <font color="#2b91af">TState</font> ( <font color="#0000ff">const</font> <font color="#2b91af">TTextString</font> &amp; tName, TFuncPtr tFunc, TCFCustomUnitDivisionTreeItem * tTargetTree) </li><li>  : TFunctionalState &lt; <font color="#2b91af">TEvent</font> , <font color="#2b91af">TTextString</font> &gt; (tName, sat_None), _Function (tFunc), _TargetTree (tTargetTree) {}; </li><li>  }; </li></ol></blockquote><br><br>  The TState class, as its name implies, is a state of the spacecraft.  Inside it is a pointer to a function for building a tree, and a pointer to the tree itself.  The function is called when the OnEnter () method is requested from TState.  The class that this tree represents (TCFCustomUnitDivisionTreeItem) is quite complicated: this is the definition of some more abstract template class ( <a href="">[h]</a> ).  We will not focus on it now.  Let's look further at the functions of building a tree. <br><br><blockquote> <code><a href="http://s-c.me/12120/s"></a> <a href="http://s-c.me/12120/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">void</font> FEmpty (TCFCustomUnitDivisionTreeItem * tItem, <font color="#0000ff">const</font> TEvent &amp; tEvent) </li><li>  { </li><li>  <font color="#0000ff">return</font> ; </li><li>  }; </li><li></li><li>  <font color="#0000ff">void</font> FOpenParagraph (TCFCustomUnitDivisionTreeItem * tTree, <font color="#0000ff">const</font> TEvent &amp; tEvent) </li><li>  { </li><li>  TCFCustomUnitDivisionTreeItem NewItem ( <font color="#A31515">0</font> , TRangeItem (tEvent.Iterator (), tEvent.Iterator ())); </li><li>  tTree-&gt; AddItem ( <font color="#A31515">0</font> , NewItem); </li><li>  }; </li><li></li><li>  <font color="#0000ff">void</font> FOpenSentence (TCFCustomUnitDivisionTreeItem * tTree, <font color="#0000ff">const</font> TEvent &amp; tEvent) </li><li>  { </li><li>  TCFCustomUnitDivisionTreeItem NewItem ( <font color="#A31515">1</font> , TRangeItem (tEvent.Iterator (), tEvent.Iterator ())); </li><li>  tTree-&gt; AddItem ( <font color="#A31515">1</font> , NewItem); </li><li>  }; </li><li></li><li>  <font color="#008000">// .......</font> </li><li></li><li>  <font color="#0000ff">void</font> FCloseAll (TCFCustomUnitDivisionTreeItem * tTree, <font color="#0000ff">const</font> TEvent &amp; tEvent) </li><li>  { </li><li>  FCloseWord (tTree, tEvent); </li><li>  FCloseSentence (tTree, tEvent); </li><li>  FCloseParagraph (tTree, tEvent); </li><li>  }; </li><li></li><li>  <font color="#008000">// ... and some more functions ...</font> </li></ol></blockquote><br><br>  They all have the same type.  We can replace these functions in the TState class with each other, - thus, we have here an overload and polymorphism of functions ( <a href="http://habrahabr.ru/blogs/php/37610/">[1]</a> , <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2580%25D1%2584%25D0%25B8%25D0%25B7%25D0%25BC_%2528%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5%2529">[2]</a> ). <br><br>  But these are all definitions and preparation for the main thing.  We should get a specific object that contains settings for the spacecraft, right?  Here is the function that returns this object: <br><br><blockquote> <code><a href="http://s-c.me/12121/s"></a> <a href="http://s-c.me/12121/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  TParSenWordDescriptor Descriptor (TCFCustomUnitDivisionTreeItem * tTree) </li><li>  { </li><li>  <font color="#008000">// The initial state is q0, the function is FEmpty, the transition table is called "Paragraphs, sentences, words".</font> </li><li>  TParSenWordDescriptor D (TState ( <font color="#A31515">"q0"</font> , FEmpty, tTree), <font color="#A31515">"Paragraphs, Sentences, Words"</font> ); </li><li></li><li>  <font color="#008000">// Set the state, and each has its own name: q0, q1, ... q14.</font> </li><li>  <font color="#008000">// Each state is passed a function (FEmpty, FOpenAll ...), which should be called if the state occurs.</font> </li><li>  <font color="#008000">// Also, we pass a pointer to the tree that we are building - tTree.</font> </li><li>  D &lt;&lt; TState ( <font color="#A31515">"q0"</font> , FEmpty, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q1"</font> , FOpenAll, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q2"</font> , FOpenSentenceOpenWord, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q3"</font> , FOpenWord, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q4"</font> , FEmpty, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"</font> q5 <font color="#A31515">"</font> , FCloseWord, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q6"</font> , FCloseSentence, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q7"</font> , FCloseSentenceOpenSentenceOpenWord, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q8"</font> , FEmpty, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q9"</font> , FEmpty, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q10"</font> , FCloseWord, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q11"</font> , FCloseAll, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q12"</font> , FCloseSentenceCloseParagraph, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q13"</font> , FCloseParagraph, tTree) </li><li>  &lt;&lt; TState ( <font color="#A31515">"q14"</font> , FEmpty, tTree); </li><li></li><li>  <font color="#008000">// Set events, each one has its own name ("WinParagraph", "SentenceEnd" ...).</font> </li><li>  <font color="#008000">// cWinParagraph, cSentenceEnd are the character sets described in UConstants.h.</font> </li><li>  D &lt;&lt; TEvent ( <font color="#A31515">"WinParagraph"</font> , cWinParagraph) </li><li>  &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q13"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q12"</font> ; </li><li>  D &lt;&lt; TEvent ( <font color="#A31515">"SentenceEnd"</font> , cSentenceEnd) </li><li>  &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q10"</font> &lt;&lt; <font color="#A31515">"q10"</font> &lt;&lt; <font color="#A31515">"q10"</font> &lt;&lt; <font color="#A31515">"q10"</font> &lt;&lt; <font color="#A31515">"q14"</font> &lt;&lt; <font color="#A31515">"q14"</font> &lt;&lt; <font color="#A31515">"q10"</font> &lt;&lt; <font color="#A31515">"q14"</font> &lt;&lt; <font color="#A31515">"q9"</font> &lt;&lt; <font color="#A31515">"q14"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q14"</font> ; </li><li>  D &lt;&lt; TEvent ( <font color="#A31515">"Letters"</font> , cLetters + cDigits) </li><li>  &lt;&lt; <font color="#A31515">"q1"</font> &lt;&lt; <font color="#A31515">"q4"</font> &lt;&lt; <font color="#A31515">"q4"</font> &lt;&lt; <font color="#A31515">"q4"</font> &lt;&lt; <font color="#A31515">"q4"</font> &lt;&lt; <font color="#A31515">"q3"</font> &lt;&lt; <font color="#A31515">"q2"</font> &lt;&lt; <font color="#A31515">"q4"</font> &lt;&lt; <font color="#A31515">"q3"</font> &lt;&lt; <font color="#A31515">"q2"</font> &lt;&lt; <font color="#A31515">"q7"</font> &lt;&lt; <font color="#A31515">"q1"</font> &lt;&lt; <font color="#A31515">"q1"</font> &lt;&lt; <font color="#A31515">"q1"</font> &lt;&lt; <font color="#A31515">"q7"</font> ; </li><li>  D &lt;&lt; TEvent ( <font color="#A31515">"Space"</font> , cSpace + cTab) </li><li>  &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"</font> <font color="#A31515">q5"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q8"</font> &lt;&lt; <font color="#A31515">"q9"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q8"</font> &lt;&lt; <font color="#A31515">"q9"</font> &lt;&lt; <font color="#A31515">"q6"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q6"</font> ; </li><li>  D &lt;&lt; TEvent ( <font color="#A31515">"PunctMarks and other symbols"</font> , TCharsSet (cPrintable) &gt;&gt; cWinParagraph &gt;&gt; cSentenceEnd &gt;&gt; cLetters &gt;&gt; cDigits &gt;&gt; cSpace &gt;&gt; cTab) </li><li>  &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"</font> <font color="#A31515">q5"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q8"</font> &lt;&lt; <font color="#A31515">"q9"</font> &lt;&lt; <font color="#A31515">"q5"</font> &lt;&lt; <font color="#A31515">"q8"</font> &lt;&lt; <font color="#A31515">"q9"</font> &lt;&lt; <font color="#A31515">"q14"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q14"</font> ; </li><li>  D &lt;&lt; TEvent ( <font color="#A31515">"EndSign"</font> , TCharsSet (CTextStringEndSign)) </li><li>  &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q13"</font> &lt;&lt; <font color="#A31515">"q11"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q13"</font> &lt;&lt; <font color="#A31515">"q12"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q0"</font> &lt;&lt; <font color="#A31515">"q12"</font> ; </li><li></li><li>  <font color="#0000ff">return</font> D; </li><li>  }; </li></ol></blockquote><br><br>  It is very clearly seen how events and states are entered in the AC table, but the table itself in these "&lt;&lt;" signs is difficult to see.  Just believe, here it is recorded all. <br><br>  One could also look into the TEvent class, which, in fact, is TCharsSetEvent ( <a href="">[cpp]</a> , <a href="">[h]</a> ).  Curious - welcome, and we move on to the manager of the CA - TFiniteStateMachineManager ( <a href="">[h]</a> ).  The task of this class is as follows: using unified interfaces, perform an analysis using an abstract spacecraft over an abstract source of events.  Also in the manager, you can pass a function that will somewhere display the progress of recognition.  The code of this class is very rich, and I will give only the most interesting sites. <br><br><blockquote> <code><a href="http://s-c.me/12122/s"></a> <a href="http://s-c.me/12122/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  template &lt; <font color="#0000ff">class</font> <font color="#2b91af">EventType</font> , <font color="#0000ff">class</font> <font color="#2b91af">FiniteStateMachineType</font> , <font color="#0000ff">class</font> <font color="#2b91af">StateMachineDescriptorType</font> , <font color="#0000ff">class</font> <font color="#2b91af">SourceType</font> &gt; </li><li>  <font color="#0000ff">class</font> <font color="#2b91af">TFiniteStateMachineManager</font> </li><li>  { </li><li>  <font color="#0000ff">private</font> : </li><li></li><li>  <font color="#2b91af">StateMachineDescriptorType</font> _Descriptor; </li><li>  <font color="#2b91af">SourceType</font> _Source; </li><li></li><li>  TUInt _Begin; </li><li>  TUInt _End; </li><li>  TUInt _Iterator; </li><li>  <font color="#0000ff">public</font> : </li><li>  <font color="#008000">// &lt;......&gt;</font> </li><li>  <font color="#2b91af">TFiniteStateMachineManager</font> ( <font color="#0000ff">const</font> <font color="#2b91af">StateMachineDescriptorType</font> &amp; tDescriptor, <font color="#0000ff">const</font> <font color="#2b91af">SourceType</font> &amp; tSource) </li><li>  : </li><li>  _Descriptor (tDescriptor), </li><li>  _Source (tSource), </li><li>  _ReportStep ( <font color="#A31515">0</font> ), </li><li>  _ProgressFunc (NULL) </li><li>  {}; </li><li>  <font color="#008000">// &lt;......&gt;</font> </li></ol></blockquote><br><br>  Again we deal with patterns.  To be precise, the ‚ÄúStrategy‚Äù pattern is also presented here.  Not only do we have a finite state machine itself on strategies, but also some kind of manager!  I don‚Äôt hide it, I‚Äôll say that the same manager is used to create a map of euphony, it only works with another special state machine.  He, in fact, in general, all the same, that the KA slipped, if only the interface was the same.  The manager takes this "slipped" spacecraft, and redirects all the work to him.  One KA handles the rules of sound, the other - breaks the text into levels.  This is the essence of the ‚ÄúStrategy‚Äù pattern: we configure our class with strategy objects that do the real work.  For example, if it were necessary for me that when an event occurred, a filter was called, I could replace the EventType event, passing another class as a strategy that implements filters. <br><br><blockquote> <code><a href="http://s-c.me/12123/s"></a> <a href="http://s-c.me/12123/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  TFiniteStateMachineManager &amp; Process () </li><li>  { </li><li>  _Begin = _Source.Begin (); </li><li>  _End = _Source.End (); </li><li></li><li>  FiniteStateMachineType _Machine (_Descriptor.StartState (), _Descriptor.Proxy ()); </li><li></li><li>  <font color="#0000ff">for</font> (_Iterator = _Begin; _Iterator &lt;= _ End; _Iterator ++) </li><li>  { </li><li>  _Machine &lt;&lt; EventType (_Source [_Iterator], _Iterator); </li><li>  }; </li><li></li><li>  _Machine &lt;&lt; EventType (_Source.EndSign (), _End + <font color="#A31515">1</font> ); </li><li></li><li>  <font color="#0000ff">return</font> * <font color="#0000ff">this</font> ; </li><li>  }; </li></ol></blockquote><br><br><img src="https://habrastorage.org/storage/c3778aa8/22c27274/73a33b90/08c8f971.png" align="right"><br>  In the Process () function, everything is simple.  An _Machine state machine object is created, set up with a descriptor (transition table, initial state), and the recognition process starts in a loop.  The ‚Äúiterator‚Äù passed as the second parameter to the EventType class denotes the index of the character in the text.  If the event caused, for example, the ‚ÄúStart word‚Äù status, then the index will be written into the RangeItem as BeginIndex.  And vice versa: if the event is the end of a word (sentence, paragraph), then the index will be the end for the given range.  So we get a list of RangeItem, correlated with the text. <br><br>  Why did I put the word ‚Äúiterator‚Äù in quotes?  Because it is not a real iterator, but only an integer variable.  But if it were necessary to make a truly universal manager, then we would have to abstract away from the event objects.  The manager should not worry at all in which lists, tables or arrays the data is stored there, where they come from, how many elements, and in what order they are.  And to ensure passage through them, one could use the Iterator pattern (Iterator, <a href="http://sourcemaking.com/design_patterns/iterator">[1]</a> , <a href="http://ru.wikipedia.org/wiki/%25D0%2598%25D1%2582%25D0%25B5%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580_%2528%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5%2529">[2]</a> ).  Great changes would not be necessary to make the loop work with iterators: <br><br><blockquote> <code><a href="http://s-c.me/12124/s"></a> <a href="http://s-c.me/12124/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#008000">// ......</font> </li><li>  SourceType * _Source; </li><li>  <font color="#008000">// ......</font> </li><li></li><li>  SourceType :: Iterator _Iterator = _Source-&gt; Begin (); </li><li>  <font color="#0000ff">for</font> (; _Iterator! = _Source-&gt; End (); ++ _ Iterator) </li><li>  { </li><li>  _Machine &lt;&lt; EventType (* _ Iterator); </li><li>  }; </li></ol></blockquote><br><br><img src="https://habrastorage.org/storage/ecbd526c/bfcefc6c/99bb9824/c36fb443.png" align="right"><br>  The result of this spacecraft will be split trees.  Next you need to select areas for comparison from these partitions.  The algorithm is pretty simple. <br>  - For each text, plots are sorted in increasing length. <br>  - A pattern of minimum compliance is compiled.  It registers how many sections of the same length can be taken from all texts.  If all texts have 10 paragraphs 1000 in length, and one text of such paragraphs is only 8, then the minimum correspondence is 8 sections.  So - for every length. <br>  - In accordance with the template selected sections of the texts. <br>  - The algorithm alternately involves all levels: paragraphs, sentences and words. <br><br>  Now we have samples, and we can begin to collect characteristics. </div><p>Source: <a href="https://habr.com/ru/post/114187/">https://habr.com/ru/post/114187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114180/index.html">4X Games: in search of the fifth</a></li>
<li><a href="../114181/index.html">Cultural differences: Japanese (another look)</a></li>
<li><a href="../114182/index.html">Auto-change textarea when entering text</a></li>
<li><a href="../114183/index.html">Cultural differences 2. Colleagues from India</a></li>
<li><a href="../114186/index.html">Text analyzer: recognition of authorship (start)</a></li>
<li><a href="../114188/index.html">Text analyzer: recognition of authorship (end)</a></li>
<li><a href="../114190/index.html">Steps engineer. When the question "What's next?"</a></li>
<li><a href="../114192/index.html">Logitech M570 Wireless Trackball Review</a></li>
<li><a href="../114193/index.html">One thing I don‚Äôt understand about Google and copywriting</a></li>
<li><a href="../114194/index.html">How to avoid data loss? We make a user manual</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
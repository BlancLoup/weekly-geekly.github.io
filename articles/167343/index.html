<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using RichText in Android. Spannable</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi habrascoobschestvo! This article is about using Spannable in Android. It is intended for styling text. If you are interested in how to implement so...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using RichText in Android. Spannable</h1><div class="post__text post__text-html js-mediator-article">  Hi habrascoobschestvo!  This article is about using <i>Spannable</i> in Android.  It is intended for styling text.  If you are interested in how to implement something like this: <br><br><img src="https://habrastorage.org/storage2/ec9/629/23c/ec962923c25960bee367e960ec19bc41.png"><br><br>  then welcome under cat.  Article focused on developers who do not have much experience developing for Android. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Theory </h4><br>  <i>Spannable</i> is an interface that describes the labeling of plain text with certain objects.  The task of these objects is to assign part of the text of a certain style.  Such marking objects can be instances of classes that implement the <i>ParcelableSpan</i> interface.  Adding marking is carried out by the method: <br><br><pre><code class="hljs pgsql">Spannable.setSpan(<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> span, <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>, <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-type"><span class="hljs-type">int</span></span> flags);</code> </pre> <br>  Removal, respectively, by the method: <br><br><pre> <code class="hljs pgsql">Spannable.removeSpan(<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> span);</code> </pre><br>  A little theory, let's go straight to the practice. <br><br><h4>  Practice </h4><br>  To master the practice, you must create android project or open an existing one.  I created a clean project, <i>I</i> placed a <i>TextView</i> on the main activity.  Go to the method where we will initialize our <i>TextView</i> (I have <i>onCreate</i> ) and add the following text: <br><br><pre> <code class="hljs pgsql">// <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> spannable <span class="hljs-type"><span class="hljs-type">text</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> style. Spannable <span class="hljs-type"><span class="hljs-type">text</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SpannableString("This is underline and bold text."); <span class="hljs-type"><span class="hljs-type">text</span></span>.setSpan(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> UnderlineSpan(), <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); <span class="hljs-type"><span class="hljs-type">text</span></span>.setSpan(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> StyleSpan(Typeface.BOLD), <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-number"><span class="hljs-number">26</span></span>, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> spannable <span class="hljs-type"><span class="hljs-type">text</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> TextView. TextView textView = (TextView) findViewById(R.id.text); textView.setText(<span class="hljs-type"><span class="hljs-type">text</span></span>);</code> </pre><br>  So, let's see what we wrote.  <i>SpannableString</i> is a class that implements the <i>Spannable</i> interface (other implementations can be found on <a href="http://developer.android.com/reference/android/text/Spannable.html">the official documentation website</a> ).  <i>UnderlineSpan</i> - the implementation of ParcelableSpan, marks part of the text as underlined (in our example it is from the 8th to the 17th letter).  The <i>Spanned.SPAN_EXCLUSIVE_EXCLUSIVE</i> flag means that our span will not expand to insert text to the left or right of the tagged part.  (With all the flags can be found on the official website, when working with texts readonly they are not so important). <br><br>  Also here we used another implementation of <i>ParcelableSpan</i> - <i>StyleSpan</i> .  As you may have guessed, you can use it to mark text as bold ( <i>Typeface.BOLD</i> ) or italics ( <i>Typeface.ITALIC</i> ). <br><br>  We figured out the code, run our project and look at the result.  The text should look like this: <br><br><img src="https://habrastorage.org/storage2/ec9/629/23c/ec962923c25960bee367e960ec19bc41.png"><br><br>  Well, let's go further: let's add a button to our activity, and the following text to the initializing method: <br><br><pre> <code class="hljs sql">// <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> spannable <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> style. Spannable buttonText = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpannableString(<span class="hljs-string"><span class="hljs-string">"Italic text"</span></span>); buttonText.setSpan(new StyleSpan(Typeface.ITALIC), 0, 6, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> spannable <span class="hljs-built_in"><span class="hljs-built_in">text</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> TextView. Button button = (Button) findViewById(R.id.button); button.setText(buttonText);</code> </pre><br>  At this time we will not disassemble the code, nothing new for us anymore.  We used the italics marking that I described above.  We start, we look. <br><br><img src="https://habrastorage.org/storage2/fd3/3f3/782/fd33f37829382a7028cb4c884fa9449f.png"><br><br>  We were able to display stylized text on the button. <br><br>  Let's go even further, we will implement a button click event handler, write the following code in it: <br><br><pre> <code class="hljs pgsql">Spannable <span class="hljs-type"><span class="hljs-type">text</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> SpannableString("Italic green text in toast"); <span class="hljs-type"><span class="hljs-type">text</span></span>.setSpan(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> StyleSpan(Typeface.ITALIC), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); <span class="hljs-type"><span class="hljs-type">text</span></span>.setSpan(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ForegroundColorSpan(Color.GREEN), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE); Toast.makeText(this, <span class="hljs-type"><span class="hljs-type">text</span></span>, Toast.LENGTH_LONG).<span class="hljs-keyword"><span class="hljs-keyword">show</span></span>();</code> </pre><br>  Here we have a new class - <i>ForegroundColorSpan</i> , which sets the color for our text, in the example we set green.  We use it together with <i>StyleSpan</i> .  Run the application, look at the result. <br><br><img src="https://habrastorage.org/storage2/9bb/339/a54/9bb339a54cba80142184ac7a526bb8ff.png"><br><br>  We were able to stuff styled text even into <i>Toast</i> .  We also showed that for one part of the text you can use multiple style markings. <br><br><h4>  Instead of conclusion </h4><br>  In the example we used only some of the available styles, a larger list can be viewed <a href="http://developer.android.com/reference/android/text/ParcelableSpan.html">on the developers site</a> .  I think you can experiment with them. <br><br>  The purpose of the article was to show in an accessible form such a strong and simple tool for styling its application to developers who did not know about its existence or simply did not use it.  I hope that the article will be useful. <br><br>  <a href="http://github.com/dWingeD/ANDS-RichText">Sample sources on Github</a> . </div><p>Source: <a href="https://habr.com/ru/post/167343/">https://habr.com/ru/post/167343/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167331/index.html">Apple, China and China Mobile: Successes and Obstacles</a></li>
<li><a href="../167333/index.html">Looking to the future: CSS4</a></li>
<li><a href="../167337/index.html">Automated refactoring in a big project</a></li>
<li><a href="../167339/index.html">IBM gel kills bacteria, even antibiotic-resistant</a></li>
<li><a href="../167341/index.html">Statistical tests in R. Part 1: Binary classification</a></li>
<li><a href="../167347/index.html">Automated functional testing of Windows applications using Ranorex</a></li>
<li><a href="../167349/index.html">dynDNS for Amazon EC2 or how to automate IP auto-update on hosting with dynamic public IP</a></li>
<li><a href="../167351/index.html">Business Plan "Creating a Game"</a></li>
<li><a href="../167353/index.html">Sublime Text 2 for C / C ++ Developer or SublimeClang</a></li>
<li><a href="../167359/index.html">MintEye CAPTCHA solution in 31 lines of code without even opening the picture</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
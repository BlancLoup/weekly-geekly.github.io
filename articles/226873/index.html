<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to win in the game stone-paper-scissors? (implementation of the optimal strategy in Wolfram Mathematica)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the post of John McLune (Jon Mcloone, Director of International Business and Strategic Development, Wolfram Research). Original post: H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to win in the game stone-paper-scissors? (implementation of the optimal strategy in Wolfram Mathematica)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/922/45e/563/92245e563cf49843163f42ea85e887f2.png"><br><br>  <i>Translation of the post of John McLune (Jon Mcloone, Director of International Business and Strategic Development, Wolfram Research).</i>  <i>Original post: <a href="http://blog.wolfram.com/2014/01/20/how-to-win-at-rock-paper-scissors/">How to Win at Rock-Paper-Scissors</a></i> <br>  <a href="http://goo.gl/SakxhZ">Download the post in the form of a document Mathematica</a> <br><br>  From the point of view of mathematics, the rock-paper-scissors game (see Appendix 1 at the end) is not particularly interesting.  The <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25B5%25D1%2581%25D0%25B8%25D0%25B5_%25D0%259D%25D1%258D%25D1%2588%25D0%25B0">Nash equilibrium</a> strategy <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25B5%25D1%2581%25D0%25B8%25D0%25B5_%25D0%259D%25D1%258D%25D1%2588%25D0%25B0">is</a> very simple: randomly and with equal probability choose from three options, and provided you have a large number of games, neither you nor your opponent can win.  Although, when computing a strategy using a computer, it is still possible to win a person after a large number of games. <br><a name="habracut"></a><br>  My nine-year-old daughter showed me a program that she created with Scratch, which won absolutely every time just by tracking what choices you made before you made yours!  But I will introduce you to a simple solution that wins a man in stone-scissors-paper without cheating. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/8ca/463/a0b/8ca463a0ba652b558270a17ad8406f52.gif"><br><br>  Since the one who always makes an absolutely random choice cannot be defeated, we will rely on the fact that people are not very random.  If the computer can notice a certain pattern in which you act in your attempts to be random, it will be one step closer to predicting your future actions. <br><br>  I thought about creating an algorithm as one of the topics of our course of statistics in the framework of the concept of <a href="http://computerbasedmath.org/">Computer-Based Math</a> .  But the very first article I stumbled upon in search of predictive algorithms considered the solution using a complex construction based on copula-distributions.  This decision was difficult for the student to understand (and perhaps for me), so I decided to develop a simpler solution, which I could explain in simple words.  And even if it was already developed earlier, it is much more fun to create things in your own way than to find their ready implementation. <br><br>  To start, we just need to be able to start the game.  At that time, a <a href="http://demonstrations.wolfram.com/RockScissorsPaper/">demonstration</a> was already developed and available that allows you to play stone-scissors-paper, but this was not exactly what I needed, so I wrote my version.  This item does not require special explanation: <br><br>  <b>In [1]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/897/4e8/fe0/8974e8fe0e5d4639e94ac483dc82c891.gif"><br><br>  <b>Out [1] =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/12b/78a/6b9/12b78a6b9ca94585be7440bc3704e28b.png"><br><br>  For the most part, this code describes the user interface and the rules of the game.  The whole strategy of a computer player is contained in this function: <br><br>  <b>In [2]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd3/ab2/90e/fd3ab290e76667e3cf4e093ee6cb4059.png"><br><br>  where 1 corresponds to stone, 2 to paper and 3 to scissors.  This is the best solution.  No matter how you play, you will win as many games as the computer, and your victory rate will fluctuate around zero. <br><br>  So, now it would be interesting to rewrite the function <b>chooseGo</b> to predict your choice using the latest games data stored in the <b>history</b> variable.  The first step will be an analysis of the choices made during the last few games and the search for all occurrences of any sequence.  Watching what a person did in each next game, we can find a certain pattern of behavior. <br><br>  <b>In [3]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de3/ee9/98b/de3ee998becc0d9cb4077b9032f7fa16.png"><br><br>  The first argument of the function is the history of past games.  For example, in the data set below, a computer (the second column is the second element of each sublist) just played a paper (it corresponds to number 2) against a stone played by a person (number 1).  This is evident in the last element of the list.  It is also clear that this situation has already arisen twice, and both times the next move of the person was again a stone. <br><br>  <b>In [4]: ‚Äã‚Äã=</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d8/de9/890/0d8de98908bcaef72262e3a48213fa41.png"><br><br>  <b>Out [4] =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b68/52c/644/b6852c644fb0dfd57884ee5d65cccb39.png"><br><br>  The second argument is the number of the last elements of the story that will be searched.  In this case, the number 1 is passed as the function argument, which searches only the occurrence cases {1,2} in the data.  If we select 2, the function will search for occurrences of the sequence {3,2}, {1,2} and return an empty list, since such a sequence has not previously been encountered. <br><br>  The third argument, <b>All</b> , indicates that the sequences of the person and the computer must match in the desired sequences.  The argument can be changed to 1 to look only at the history of a person‚Äôs moves (that is, assuming that human choice depends only on his previous moves), or 2, to pay attention only to the second column, that is, the history of computer moves (that is, assuming that the person responds to previous moves of the computer, regardless of which moves he made and, therefore, regardless of whether he won or lost). <br><br>  For example, in this case we find that a person chose after a stone, regardless of the fact that in the same games he chose a computer. <br><br>  <b>In [5]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/541/e64/c4e/541e64c4e2d0febf79a6ed4e255251f4.png"><br><br>  <b>Out [5] =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fb/a88/bef/2fba88bef2cd3cb0e94a00dd5d2b5024.png"><br><br>  Having a large amount of data, we can only manage with the argument <b>All</b> , and the program can decide for itself whose moves, computer or person, are more important.  For example, if a computer‚Äôs move history is ignored by a person during a selection, then the data set obtained for a computer‚Äôs move history will have the same distribution as any other computer‚Äôs move history, provided that there is enough data about previous games.  When searching through all pairs of games, we get the same result as if we first selected data on the history of computer moves, and then used this subset for the function shown above.  The same will happen if only the history of the moves of the computer is important.  But at the same time, performing a search when taking into account both of these assumptions separately can get more true matches in history, and most of all this is manifested in cases where the set of data about the games is initially small. <br><br>  Thus, from these two checks we can find that the first one gives a 100% estimate, that the next choice of a person will be a stone, and the second shows that with 75% probability a person will choose a stone and with a 25% probability - scissors. <br><br>  And here I am somewhat stalled in solving the problem. <br><br>  In this case, the two predictions are at least more or less similar in result, although they differ in numerical values ‚Äã‚Äãof probabilities.  But if you conduct a search on three ‚Äúslices‚Äù of data with a number of different lengths of history, and the results of the predictions are contradictory - how to combine them? <br><br>  I put a note about this issue in the ‚ÄúWrite about it to the blog‚Äù folder and forgot about it until a few weeks ago there was a dispute about how to highlight the concept of ‚Äú <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B0%25D1%2582%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25B7%25D0%25BD%25D0%25B0%25D1%2587%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2581%25D1%2582%25D1%258C">statistical significance</a> ‚Äù in the course of Computer-Based Math. <br><br>  I realized that the question is not how to combine the obtained predictions, but how to determine which of the predictions is the most significant.  One of the predictions could have been more significant than the others, since it reflects a more pronounced tendency or, perhaps, is based on a larger set of data.  It was unimportant for me, and therefore I simply used the p-value of the significance test (with the null hypothesis that both players play randomly) in order to streamline the predictions. <br><br>  I think I should listen to our <a href="https://www.youtube.com/watch%3Fv%3D60OVlfAUPJg">first principle</a> that the first step in solving any mathematical problem is ‚Äúthe right question‚Äù. <br><br>  In [6]: = <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b9/4b5/bdf/8b94b5bdfa933ca98666f576992b4b00.png"><br><br>  Now, if we take the last result we obtained, it turns out that the best prediction is a stone with a p-value of 0.17.  This means that only with a probability of 0.17, the data used for this prediction deviate from the discrete uniform distribution ( <b>DiscreteUniformDistribution [{1,3}]</b> ), and more so by chance rather than due to a systematic error produced by a human or another reason that could change the distribution. <br><br>  <b>In [7]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bc4/ded/b42/bc4dedb42942b6b422079709fa5d1aaf.png"><br><br>  <b>Out [7] =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/17b/73a/0b4/17b73a0b4118aecb85f1be647e66ade1.png"><br><br>  The smaller this p-value, the more confident we can be that we have found a real pattern of behavior.  So we just carry out the predictions for different history lengths and data slices and choose the prediction with the lowest p-value. <br><br>  <b>In [8]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b2/d64/246/0b2d64246ef55e9eee5a2f9c6a8b58bd.gif"><br><br>  And we make a choice that will beat the choice of a person. <br><br>  <b>In [10]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f98/794/4aa/f987944aa3182bf3727024cb1571cfab.png"><br><br>  Here you see the result.  You can <a href="http://demonstrations.wolfram.com/RockPaperScissorsWithAIPlayer/">download</a> and test it yourself from the Wolfram Demonstrations website. <br><br>  <b>In [11]: =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a8/e02/fa7/8a8e02fa7c4d9c8760a44d2170ff4e1d.gif"><br><br>  <b>Out [11] =</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a5a/c20/e20/a5ac20e204fd24d1b01c478b4443ca3c.png"><br><br>  When a program has too little data, it plays randomly, so you start on an equal footing.  At first, when she begins to learn, she makes some stupid decisions, so you can get ahead.  But after 30-40 games, it starts to receive really meaningful predictions, and you will see how your victory rate drops to a negative area, and so it will remain there. <br><br>  Of course, such a decision is good only against primitive attempts to appear random.  Its predictability makes it susceptible to possible loss against a well-calculated and intended strategy.  It is extremely interesting to try to defeat this program with the help of intuition.  This is possible, but if you stop thinking or you think too hard, you will soon be left behind.  Of course, the program could easily do this by applying the same algorithm to predict the next move of this program. <br><br>  Such an approach leads to the beginning of a certain ‚Äúarms race‚Äù, a competition in writing algorithms that will win in a stone-scissors-paper from a rival algorithm, and the only way to stop it is to return to the Nash equilibrium strategy, choosing through <b>RandomInteger [{1,3 }]</b> . <br><br>  <b>Supplement 1</b> <br>  In the event that you do not know how to play this game, the rules are as follows: you choose a stone, scissors or paper using one of the three gestures shown by you and your opponent at the same time.  The stone defeats the scissors (makes them dull), the scissors defeats the paper (they cut it), and the paper defeats the stone (it wraps it).  The winner gets one point, in case of a draw both players do not get points. <br><br>  <i>I thank <a href="http://habrahabr.ru/users/opckSheff/">Sergey Shevchuk</a> for the help rendered in the translation of this post.</i> </div><p>Source: <a href="https://habr.com/ru/post/226873/">https://habr.com/ru/post/226873/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226859/index.html">Implementation of the secret visual information sharing scheme in MATLAB</a></li>
<li><a href="../226861/index.html">3 facts about PHP that you might not know</a></li>
<li><a href="../226863/index.html">Demotivator for gamers</a></li>
<li><a href="../226869/index.html">Simple ruby ‚Äã‚Äãtests for web</a></li>
<li><a href="../226871/index.html">Retention and return to the audience using Email and Push notifications</a></li>
<li><a href="../226875/index.html">Why is NginX with Fast-CGI faster than Apache with mod_php?</a></li>
<li><a href="../226877/index.html">The first drone to break up rallies</a></li>
<li><a href="../226879/index.html">The ProtonMail mail service team from CERN began collecting funds for additional servers</a></li>
<li><a href="../226881/index.html">Future or present? Autonomous drones for sports video shooting</a></li>
<li><a href="../226883/index.html">"The man on the edge of a knife" - John Carmack, milestones of achievements and contribution to the gaming industry</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
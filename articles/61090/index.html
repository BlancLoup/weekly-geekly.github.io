<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inheritance of configs in Zend_Config</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For those who are too lazy to read the long preface: rewind to the last part ‚ÄúA simple idea that came to my mind‚Äù. 
 I wanted to put the anchor, but h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inheritance of configs in Zend_Config</h1><div class="post__text post__text-html js-mediator-article">  For those who are too lazy to read the long preface: rewind to the last part ‚ÄúA simple idea that came to my mind‚Äù. <br>  I wanted to put the anchor, but habraparser does not allow: ( <br><br><h1>  Zend_Config and sections </h1><br>  The official documentation of the Zend Framework advises to split the configuration file into several sections, each of which will be responsible for the different environment in which the project should work. <br>  At the same time, one section of the config can inherit another, overriding only those parameters that need to be changed. <br><br>  At first glance, this idea seems reasonable, but I was faced with some limitations of this approach ... <br><a name="habracut"></a><br>  Here is an example configuration file from the documentation: <br> <code>; Production site configuration data <br> [production] <br> webhost                  = www.example.com <br> database.adapter         = pdo_mysql <br> database.params.host     = db.example.com <br> database.params.username = dbuser <br> database.params.password = secret <br> database.params.dbname   = dbname <br> <br> ; Staging site configuration data inherits from production and <br> ; overrides values as necessary <br> [staging : production] <br> database.params.host     = dev.example.com <br> database.params.username = devuser <br> database.params.password = devsecret <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, we define a complete list of parameters for in the production section, and in the staging section we redefine just a few parameters for access to the database. <br><br><h1>  Limitations of the sectional approach </h1><br>  In practice, firstly, storing the access password to a database in a common config is not a good idea, and secondly, a config in this form cannot literally be stored in mainstream version control systems (SCR) such as Git or Subversion. <br><br>  Each developer participating in the project will be happy to commit their own local settings to the staging section, at best, create their own section, following it from staging. <br>  All this leads to confusion and useless growth of the config in the repository. <br><br><h1>  Traditional storage configuration scripts in hard currency </h1><br>  To prevent the common config from being clogged by the personal settings of developers, it is usually called something like config.default.ini or config.ini.default, put into the repository, and then each developer in its working directory makes a copy of it, which is called config.ini and which adds to the list of ignored hard currency files. <br><br>  It would seem, here it is - happiness: once copied the default config, drove in there personal settings and forgot about it forever ... <br><br>  No matter how wrong! <br><br>  A month passes and one of the developers decides to add some useful (or not) customization to the cofig. <br>  He silently commits this setting to the default config, then makes changes to the project code, which is completely broken if this setting is not specified in the config, and with a sense of accomplishment, goes on leave ... <br><br>  Guess what happens the next day?  :) <br><br>  Even if we consider the most utopian situation, when the developer who changed the config does not forget to send a letter to the corporate newsletter with the subject "Please update your local config.ini", the developers who received this letter do not forget to read it and, importantly, realize and execute it - anyway they all have to manually update their local configs, sometimes using diff-type utilities, because over time configs only grow in size and it is not possible to track all changes manually. <br><br><h1>  Simple idea that came to my mind </h1><br>  I decided to extend the Zend_Config class and implement the inheritance of configs in it. <br>  But as soon as I looked into its code, I immediately understood that everything necessary for inheritance was incorporated into it initially. <br><br>  So, here is an example of using configs with inheritance. <br><br>  <b>The general configuration of the project - config.common.ini</b> : <br> <code>[production] <br> resources.db.adapter                = "PDO_MySQL" <br> resources.db.params.dbname          = "system" <br> resources.db.params.username        = "root" <br> resources.db.params.password        = "" <br> phpSettings.display_startup_errors  = 0 <br> phpSettings.display_errors          = 0 <br> <br> [development : production] <br> phpSettings.display_startup_errors  = 1 <br> phpSettings.display_errors          = 1 <br></code> <br><br>  <b>My personal config - config.ini</b> : <br> <code>[production] <br> [development : production] <br> resources.db.params.dbname          = "system_laggyluke" <br> resources.db.params.username        = "laggyluke" <br> resources.db.params.password        = "mySecretPassword" <br></code> <br><br>  <b>An example of the implementation of confidentiality inheritance</b> : <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">//   </font> <br> <font color="#008000">//   true ,        read-only</font> <br> $config = <font color="#0000ff">new</font> Zend_Config_Ini( <font color="#A31515">'config.common.ini'</font> , <font color="#A31515">'development'</font> , <font color="#0000ff">true</font> ); <br> <font color="#008000">// ,    </font> <br> <font color="#0000ff">if</font> (file_exists( <font color="#A31515">'config.ini'</font> )) { <br> <font color="#008000">//   -  ...</font> <br> $configCustom = <font color="#0000ff">new</font> Zend_Config_Ini( <font color="#A31515">'config.ini'</font> , <font color="#A31515">'development'</font> ); <br> <font color="#008000">// ...     </font> <br> $config-&gt;merge($configCustom); <br> } <br> <font color="#008000">//     read-only,   </font> <br> $config-&gt;setReadOnly();</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The general config.common.ini config is stored in hard currency and any new settings that are added to it immediately go to all developers.  At the same time, each developer can override any setting in his personal config.ini, which is ignored by SLE. <br><br>  From the minuses of this approach, I can only note that in the personal config it is necessary to list all the sections that were declared in the general config.  But for me personally, this does not constitute a special problem, because their list changes extremely rarely, and more often never. <br><br>  Of course, this idea is not new, and I remember exactly that I have already met such an approach somewhere. <br>  I just was very surprised that such a convenient method is not described in the official documentation, which means it may not be known to many developers. <br><br>  <b>UPD.</b> <br>  <a href="https://habrahabr.ru/users/stfalcon/" class="user_link">stfalcon</a> suggested that <a href="https://habr.com/blogs/zend_framework/61090/">something similar</a> has already been implemented in Zend_Application, starting with version 1.8.2. </div><p>Source: <a href="https://habr.com/ru/post/61090/">https://habr.com/ru/post/61090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../61075/index.html">DesignSocial.ru - social network of designers</a></li>
<li><a href="../61076/index.html">Gauss Cannon - Myth or Reality?</a></li>
<li><a href="../61078/index.html">Procedural vs. object oriented programming</a></li>
<li><a href="../61082/index.html">How easy it is to make a calendar and a clock for entering the date and time on a form</a></li>
<li><a href="../61086/index.html">Kyocera KE 301 and Linux</a></li>
<li><a href="../61094/index.html">Niches, my friends, only niches!</a></li>
<li><a href="../61095/index.html">Left 4 Dead 2</a></li>
<li><a href="../61098/index.html">Still, Huxley was right</a></li>
<li><a href="../61099/index.html">What should be in the kitchen geek</a></li>
<li><a href="../61100/index.html">Gauss cannon. Myth or reality - 2?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
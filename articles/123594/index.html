<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We add informativeness to RSS feeds from RuTracker.org</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In my first topic, I wrote how to organize downloading of selected hands from a beloved torrent tracker, without being distracted from ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We add informativeness to RSS feeds from RuTracker.org</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  In my <a href="http://habrahabr.ru/blogs/p2p/123313/">first topic,</a> I wrote how to organize downloading of selected hands from a beloved torrent tracker, without being distracted from reading the news.  In this topic, <s>overkill</s> will be described <s>, a</s> method that allows us to further simplify the process of obtaining information about each particular distribution that came to us in the form of an RSS feed.  As you know, RuTracker.org itself publishes in the RSS feed only links to the relevant forum threads.  No description of the distribution element of the tape does not contain, but I would like otherwise. <br><br>  Anticipating objections in the spirit of ‚ÄúStop reinventing the wheel, better get ready-made RSS.  For example, from <a href="http://xpoft.ru/rutracker.org/generator/">xpoft.ru</a> ‚Äù(thanks to <a href="https://habrahabr.ru/users/egor_bulychev/" class="user_link">egor_bulychev</a> for the tip; without sarcasm, really, thanks), I would say this: the tool is interesting, smart, the tape with the desired content is formed in a few mouse clicks.  But, unfortunately, the RSS feeds generated by him are not encouraging by the constancy of the content of the elements: then comprehensive information about the distribution will come, and then only the title, and the poster.  Moreover, the dependence of the contents of the tape on the actual description of the distribution on RuTracker.org was not identified.  This layout does not suit me: I want to read the description, and view the media-info with screenshots, without even going to the original description page. <a name="habracut"></a><br><br><h4>  Immediate task </h4><br>  Get a description of the distribution from the post body on the torrent tracker and add it to the corresponding element of the RSS feed.  The resulting tape to give in the format of RSS.  At the entrance we have a rather dull and uninformative tape: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/df5/514/59a/df551459a8a9c288f0acff003aa86997.png" alt="Source tape"><br><br><h4>  Instruments </h4><br>  The composition of the tools will be almost the same as in the previous article, with the exception of the torrent client. <br><ul><li>  <a href="http://pipes.yahoo.com/pipes/">Yahoo Pipes</a> for RSS manipulation; </li><li>  Google Reader account (any other RSS reader, however); </li><li>  Of course, time. </li></ul><h4>  Decision </h4><br>  In total, we will need three pipes to solve the problem: <br><ul><li>  URL converter to the name of a post on the forum of the torrent tracker; </li><li>  "Pipe-Ripper" for the extraction of useful information from the topics; </li><li>  The main pipe processing the source RSS feed. </li></ul>  You can create them manually and well pump the skill of using Yahoo Pipes, you can quickly and painlessly clone mine and finish them for yourself, you can (for the most lazy) use the pipes I created without any changes.  Everyone, except those who like the first option, can safely skip the following three points and read the instructions for use and links immediately.  For those who dislike simple ways, I will talk about everything in order. <br><br><h5>  Pipe # 1: URL Converter to Post Name </h5><br>  It would have been possible to do without this pipe if it were not for one feature of the work of Yahoo Pipes with Cyrillic character sets.  I will not speak for everything, but the RSS feed from RuTracker.org in the process of processing turns into a completely unreadable abracadabra.  To get a normal distribution name, we need this pipe.  Directly in Yahoo Pipes there is no tool for working with encodings, so you have to work around the workaround. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a00/a7a/b96/a00a7ab968d8f2511081155dc021acfd.png" alt="URL2NameConvernter"><br><br>  Everything is simple here: we request using the URL Input block (surprise!) The URL of the topic, using the Fetch Page block we pull out the distribution name from the tag <pre>  &lt;title&gt; &lt;/ title&gt; </pre>  and remove all unnecessary from it using the Regex block and the template <pre>  &lt;title&gt; (. +) ::. + </pre><br>  Link to the finished pipe - <a href="http://pipes.yahoo.com/ivopupkin/url2nameconv">http://pipes.yahoo.com/ivopupkin/url2nameconv</a> <br><br><h5>  Pipe # 2: Pipe The Ripper </h5><br>  It does the main job of extracting useful information from the topic-description of the distribution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd9/3c7/aa0/fd93c7aa04f2bc9be8ed06a24f5b2fe3.png" alt="Pipe the ripper"><br><br>  The most difficult thing is to choose the right boundaries of useful information and discard too much.  Otherwise, everything is just as simple: a block for entering the URL of the topic, passing it to the Fetch Page block.  The boundaries of useful information for myself, I identified the following: <pre>  &lt;div class = "post_body" id = " </pre>  and <pre>  &lt;legend&gt; Download &lt;/ legend&gt; </pre>  respectively, the beginning and the end.  They almost match the boundaries of the first post in the forum thread <br><br>  On this would go to the next stage, but, because  The topic markup is quite specific, in this form it is of little value: the browser will show us only the text.  For the normal display of pictures and serves the last Regex-block, replacing the markup RuTracker.org <pre>  &lt;var class = "postImg" title = "([^"] +) "&gt; </pre>  on a clear browser without additional dancing with a tambourine <pre>  &lt;img src = "$ 1"&gt; </pre>  for the bulk of the images and with <pre>  &lt;var class = "postImg. +" title = "([^"] +) "&gt; </pre>  on <pre>  &lt;img src = "$ 1"&gt; </pre>  for the title image. <br><br>  Link to the finished pipe - <a href="http://pipes.yahoo.com/ivopupkin/pipetheripper">http://pipes.yahoo.com/ivopupkin/pipheripper</a> <br><br><h5>  Pipe ‚Ññ3: Basic </h5><br>  He will do all the dirty work for us.  Namely: request the URL of the source tape, get a list of its elements, execute child pipes, finally form the names of the elements and create the resulting tape. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/444/cef/6f5/444cef6f5fa7f8e7236af8995d89ae2c.png" alt="URL Input &amp; Fetch Feed"><br>  With the first two blocks, everything is clear and without explanation: the URL Input asks the user for the URL of the RSS feed, and the Fetch Feed loads the feed itself. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/71c/717/c6c/71c717c6c1628c6b007fe6f41d6aee7f.png" alt="Rename"><br>  The next Rename block is used to preliminarily form the ‚ÄúUpdated‚Äù attribute for distribution and a separate field with distribution size.  This is needed to bypass the problems with the encoding of the original RSS feed described above. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/203/0bf/e10/2030bfe10549cfca3df2300de41922bd.png" alt="Regex"><br>  Then, using the Regex block, we perform several actions at once (pay attention to the fields in which replacements take place): <ul><li> From the ‚Äúcropped‚Äù link to the topic with the distribution, we get a full URL by replacing the text using the pattern <code>(.+)</code> With the string <code><a href="http://rutracker.org/forum/%241"></a> http://rutracker.org/forum/$1</code>  <code><a href="http://rutracker.org/forum/%241"></a> http://rutracker.org/forum/$1</code> ; </li><li>  Delete unnecessary information from the <i>item.isupdated</i> field, replacing the abracadabra <code>^(\[√é√°√≠√Æ√¢√´√•√≠√Æ\])*.+</code> template <code>$1</code> ; </li><li>  Let it be crooked, but we will overcome the problem of transcoding characters by performing a replacement following the pattern <code>\[√é√°√≠√Æ√¢√´√•√≠√Æ\]</code> on the text <code>\[\]</code> ; </li><li>  We obtain the size of the distribution in a separate field by replacing <code>.+\[(.+)\]$</code> With <code>$1</code> . </li></ul><img src="https://habrastorage.org/getpro/habr/post_images/f42/bcc/7e0/f42bcc7e0ed1e88e5ee8216013597c04.png" alt="Loop 1 &amp; 2"><br>  The Loop blocks and the corresponding child pipes (as an input parameter, telling them the value of <i>item.link</i> ) update the header and content for the whole feed.  The result is stored in the <i>item.title</i> and <i>item.description fields,</i> respectively. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/141/3b4/8be/1413b48beb47a0b2192505891d746ff2.png" alt="Loop 3"><br>  In the next Loop + String Builder block, we finally create the tape item header, which contains information about the distribution update and its size.  Save it in some field.  For example, in <i>item.title.content</i> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f9/6de/058/2f96de05875f8785f2d2ba00701f9023.png" alt="Create RSS"><br>  Finally, from this pile of data that we have accumulated by this moment, we are forming a slender RSS feed using the Create RSS block, the output of which is linked to the Pipe Output. <br><br>  Link to the finished pipe - <a href="http://pipes.yahoo.com/ivopupkin/rutrackerrssexpander">http://pipes.yahoo.com/ivopupkin/rutrackerrssexpander</a> <br><br><h4>  Instructions for use </h4><br>  It's as simple as two and two: <br><ul><li>  Open the main pipe; </li><li>  We feed him a link to the tape with RuTracker.org; </li><li>  Run the pipe for execution; </li><li>  Using the <b>Get as RSS</b> button, we get a link to the RSS feed with the desired distribution information. </li></ul><img src="https://habrastorage.org/getpro/habr/post_images/ad6/e28/a77/ad6e28a775de97a03053474c436cc415.png" alt="Finished tape"><br><br>  The content, of course, is a little disheveled, but still suitable for evaluating hands.  Reading, as you may have guessed, is possible in any RSS reader. <br>  If you wish and have enough skill, you can pack several RSS feeds from RuTracker.org into one resulting tape.  To do this, it is enough to create your own pair of URL Input and Fetch Feed blocks for each incoming tape, the result of which should be combined with the Union block.  Further changes will not be required. <br><br><h4>  Instead of conclusion </h4><br>  I showed how using simple manipulations to transform an interesting, but something that does not suit us RSS-feed.  Similarly, you can both edit existing RSS feeds and create your own based on data from arbitrary pages.  Moreover, with the help of Yahoo Pipes, it is possible to turn elements that are on an arbitrary page into RSS-feed elements (for example, this way you can track the appearance of new topics on the forum or their updates).  It is noteworthy that for this there is no need to have serious programming skills, as well as to configure and maintain the necessary infrastructure. <br><br><h4>  Links </h4><ul><li>  <a href="http://pipes.yahoo.com/pipes/">Yahoo pipes</a> </li><li>  <a href="http://pipes.yahoo.com/ivopupkin/rutrackerrssexpander">Main pipe</a> </li><li>  <a href="http://pipes.yahoo.com/ivopupkin/url2nameconv">URL Converter - the name of the post on the torrent tracker</a> </li><li>  <a href="http://pipes.yahoo.com/ivopupkin/pipetheripper">Pipe the ripper</a> </li><li>  <a href="http://xpoft.ru/rutracker.org/generator/">Tape Generator for RuTracker.org from xpoft.ru</a> </li></ul><img src="http://nojsstats.appspot.com/UA-24164671-2/habrahabr.ru?r=http://habrahabr.ru/topic/123594/" alt="."></div><p>Source: <a href="https://habr.com/ru/post/123594/">https://habr.com/ru/post/123594/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123584/index.html">WebCL showed the first demos</a></li>
<li><a href="../123588/index.html">Working with Microsoft Kinect in C ++ Applications</a></li>
<li><a href="../123589/index.html">Pros and cons of cheap noname tablets</a></li>
<li><a href="../123590/index.html">Samsung Galaxy Tab 10.1 live review</a></li>
<li><a href="../123593/index.html">Using sites like Pastebin to collect information on the purpose of pentest</a></li>
<li><a href="../123595/index.html">Car navigation in detail</a></li>
<li><a href="../123596/index.html">Review of fresh materials, April-May 2011</a></li>
<li><a href="../123599/index.html">Specialists from MIT have developed a mobile accessory for the diagnosis of cataracts</a></li>
<li><a href="../123600/index.html">Nigerian scammers at Molotok.ru. One of the fraud schemes</a></li>
<li><a href="../123601/index.html">The history of the conference ‚ÄúPlatform. Defining the future "</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
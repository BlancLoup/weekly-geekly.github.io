<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IPv6 in Microsoft Azure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We are grateful for the preparation of the article to Mikhail Tryakhov ( @PerseptronYar ) from the company Akvelon (Yaroslavl) for the help in writing...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IPv6 in Microsoft Azure</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>We are grateful for the preparation of the article to Mikhail Tryakhov ( <a href="https://habrahabr.ru/users/PerseptronYar/">@PerseptronYar</a> ) from the company <a href="https://vk.com/akvelon_inc">Akvelon (Yaroslavl)</a> for the help in writing this article.</em>  <em>Mikhail works on the Microsoft Azure CLI team (Command Line Interface) with a specialization in Networking Services.</em> </blockquote><p>  Hello!  Today it is time to talk about the long-awaited innovation, which, with smoke and haste, prepared for the conference Ignite.  This event took place from 28 to 30 September in Atlanta, and it is already well written about, say, <a href="https://habrahabr.ru/company/microsoft/blog/311002/">here</a> .  However, it is already known that IPv6 has become available in a number of regions (locations) of Microsoft Azure.  Under the cut details. <a name="habracut"></a><habracut><br>  To say that this functionality is expected - to say nothing.  It is, for starters, to drive into the search engine "Azure IPv6".  I announce: you will find only a couple of links, mostly revolving around Feature requests (for example, <a href="http://serverfault.com/questions/393297/does-windows-azure-present-an-ipv6-address">here</a> and <a href="https://feedback.azure.com/forums/217313-networking/suggestions/4992369-support-ipv6-throughout-the-azure-platform">here</a> ) and <a href="http://stackoverflow.com/questions/31581816/ipv6-support-for-azure">company promises</a> .  And so it happened! </habracut></p><br><p><img src="https://acom.azurecomcdn.net/80C57D/cdn/mediahandler/docarticles/dpsmedia-prod/azure.microsoft.com/en-us/documentation/articles/load-balancer-ipv6-overview/20160926093315/load-balancer-ipv6.png"><br>  IPv4 and IPv6 are completely different and in no way dependent on each other versions of IP.  That is, it is implied that it is impossible to convert an IPv4 address to IPv6, etc.  The main task that IPv6 is beginning to solve is to ensure the interaction of Azure virtual machines and IPv6 clients by integrating it with the variety of services available in NRP (Network Resource Provider), such as Load balancer, NIC (Network Interface) , public ip (public IP addresses) and derivatives. </p><br><p>  I can not offer, for the sake of interest, to try in part of the commands described in the post on the Azure CLI platform.  As I <a href="https://habrahabr.ru/company/microsoft/blog/278175/">wrote</a> in the first review article in this blog, this is a command line extension that allows you to manage your Azure infrastructure on many operating systems (Windows, Mac, many Linux distributions).  To install it, you can use the <a href="https://azure.microsoft.com/en-us/documentation/articles/xplat-cli-install/">instructions</a> on the official site.  Please note that the installed version should be released after September 28, 2016.  The desired release is available <a href="https://github.com/Azure/azure-xplat-cli/releases/tag/v0.10.5-September2016">here</a> . </p><br><p>  Let's draw.  In the picture we will depict the existing options for customizing the balancer in blue, green - updates that have become available. </p><br><p><img src="http://image.prntscr.com/image/0e873c1573e44c1ebac84323a220372b.png"></p><br><p>  I will describe the main buns that this carries to us: </p><br><ul><li>  The joy of IOT-developers and not only - support "dual stack" (IPv4 + IPv6) </li><li>  Azure DNS now supports IPv4 type A and IPv6 AAAA record sets </li><li>  Many updated images of virtual machines with the Linux operating system already support this functionality from Koro.  In some cases, you need to turn to <a href="https://azure.microsoft.com/ru-ru/documentation/articles/load-balancer-ipv6-for-linux/"><b>DHCP</b></a> </li></ul><br><p>  There are a number of limitations.  For example, we will not be able to make these modifications on the use of IPv6 through a graphical interface.  As I wrote earlier, working with JSON and consoles will have more and more.  So here, the options remain a bit: </p><br><ul><li>  Create a JSON template (template) and <a href="https://azure.microsoft.com/ru-ru/documentation/articles/load-balancer-ipv6-internet-template/"><strong>import</strong></a> it into the appropriate resource groups </li><li>  <a href="https://azure.microsoft.com/ru-ru/documentation/articles/load-balancer-ipv6-internet-ps/"><strong>Use powershell</strong></a> </li><li>  <a href="https://azure.microsoft.com/ru-ru/documentation/articles/load-balancer-ipv6-internet-ps/"><strong>Use Azure XPlat CLI</strong></a> </li></ul><br><p>  To begin with, in the selected resource group (as you understand, it‚Äôs all about ARM), you need to configure the network, subnets and create an ‚Äúempty‚Äù load balancer.  Using the Azure CLI, it‚Äôs enough to execute commands from the above <a href="https://azure.microsoft.com/ru-ru/documentation/articles/load-balancer-ipv6-internet-cli/"><strong>manual</strong></a>  I will draw on the example given there (as with PowerShell, template), concentrating on the important (in terms of this topic) points.  The purpose of the following paragraphs is to analyze in detail the process of deploying the specified architecture and describe the existing limitations. </p><br><p>  Since all three methods available to us to provide IPv6 support by no means, so skating boils down to the fact that they only send generated JSON to the corresponding API-version of the Azure SDK, I consider working with JSON templates to be the most accurate to demonstrate, focusing on innovations. </p><br><h3>  Public IP Setup </h3><br><p>  So, according to the scheme drawn above, we do PUT requests and get two public IP: </p><br><pre><code class="hljs cs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"myIPv4Vip"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/resourceGroups/rg1/Microsoft.Network/publicIpAddresses/ip1"</span></span>, <span class="hljs-string"><span class="hljs-string">"location"</span></span>: <span class="hljs-string"><span class="hljs-string">"West US"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: { ‚Äúkey‚Äù: ‚Äú<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>‚Äù } , ‚Äúetag‚Äù: ‚ÄúW/\‚Äù<span class="hljs-number"><span class="hljs-number">00000000</span></span><span class="hljs-number"><span class="hljs-number">-0000</span></span><span class="hljs-number"><span class="hljs-number">-0000</span></span><span class="hljs-number"><span class="hljs-number">-0000</span></span><span class="hljs-number"><span class="hljs-number">-000000000000</span></span>\‚Äù‚Äú, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"provisioningState"</span></span>: ‚ÄúUpdating|Deleting|Failed|Succeeded‚Äù, <span class="hljs-string"><span class="hljs-string">"ipAddress"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1.1.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"publicIpAddressVersion"</span></span>: IPv4, <span class="hljs-string"><span class="hljs-string">"publicIPAllocationMethod"</span></span>: <span class="hljs-string"><span class="hljs-string">"Static | Dynamic"</span></span>, <span class="hljs-string"><span class="hljs-string">"idleTimeoutInMinutes"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"ipConfiguration"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/../Microsoft.Network/loadbalancers/MyIpV4AndV6LB1/ipConfigurations/frontendIP1"</span></span>}, <span class="hljs-string"><span class="hljs-string">"dnsSettings"</span></span>: { <span class="hljs-string"><span class="hljs-string">"domainNameLabel"</span></span>: <span class="hljs-string"><span class="hljs-string">"mylabel"</span></span>, <span class="hljs-string"><span class="hljs-string">"fqdn"</span></span>: <span class="hljs-string"><span class="hljs-string">"mylabel.westus.cloudapp.azure.com."</span></span>, <span class="hljs-string"><span class="hljs-string">"reverseFqdn"</span></span>: <span class="hljs-string"><span class="hljs-string">"contoso.com."</span></span> } } }</code> </pre> <br><p>  Here I ask you to pay attention to a number of points. </p><br><ul><li>  The <strong>resulted location</strong> is one of the few currently supported.  I really try to open a source with relevant data on this issue. </li><li>  <strong>publicIpAddressVersion = IPv4</strong> is default </li></ul><br><pre> <code class="hljs cs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"myIPv6Vip"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/resourceGroups/rg1/Microsoft.Network/publicIpAddresses/myIPv6Vip"</span></span>, <span class="hljs-string"><span class="hljs-string">"location"</span></span>: <span class="hljs-string"><span class="hljs-string">"West US"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: { ‚Äúkey‚Äù: ‚Äú<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>‚Äù } , ‚Äúetag‚Äù: ‚ÄúW/\‚Äù<span class="hljs-number"><span class="hljs-number">00000000</span></span><span class="hljs-number"><span class="hljs-number">-0000</span></span><span class="hljs-number"><span class="hljs-number">-0000</span></span><span class="hljs-number"><span class="hljs-number">-0000</span></span><span class="hljs-number"><span class="hljs-number">-000000000000</span></span>\‚Äù‚Äú, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"provisioningState"</span></span>: ‚ÄúUpdating|Deleting|Failed|Succeeded‚Äù, <span class="hljs-string"><span class="hljs-string">"ipAddress‚Äù:‚Äù2015::1234:5"</span></span>: , <span class="hljs-string"><span class="hljs-string">"publicIpAddressVersion"</span></span>: IPv6, <span class="hljs-string"><span class="hljs-string">" publicIPAllocationMethod "</span></span>: <span class="hljs-string"><span class="hljs-string">" Static|Dynamic"</span></span>, <span class="hljs-string"><span class="hljs-string">"idleTimeoutInMinutes "</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"ipConfiguration"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/../Microsoft.Network/loadbalancers/MyIpV4AndV6LB1/ipConfigurations/frontendIP2"</span></span>}, <span class="hljs-string"><span class="hljs-string">"dnsSettings"</span></span>: { <span class="hljs-string"><span class="hljs-string">"domainNameLabel"</span></span>: <span class="hljs-string"><span class="hljs-string">"mylabel"</span></span>, <span class="hljs-string"><span class="hljs-string">"fqdn"</span></span>: <span class="hljs-string"><span class="hljs-string">"mylabel.westus.cloudapp.azure.com."</span></span>, <span class="hljs-string"><span class="hljs-string">"reverseFqdn"</span></span>: }, }</code> </pre> <br><p>  There are a number of limitations. </p><br><ul><li>  <strong>dnsSettings.fqdn</strong> is a <strong>read</strong> -only property in the FQDN format, that is, in our example, <strong>contoso09152016.westus.cloudapp.azure.com</strong> . </li><li>  <strong>DNS settings reverse FQDN is</strong> not specified, because at the moment (and in the short term) Azure DNS does not plan to support reverse requests for IPv6.  Value will be empty (null / not allowed). </li><li>  <strong>The IP address</strong> will be read only. </li><li>  <strong>Public IP Allocation Method</strong> : When <strong>Static</strong> is specified, a reserved virtual IP address (reserved VIP) will be created, that is, the VIP will remain unchanged in load balancers.  If the parameter is specified as <strong>Dynamic</strong> , then the value of the IP address may change when linking this address to another load balancer. </li><li>  IPv6 can only be used when creating new Public IP instances.  Alas, it is impossible to change existing ones from IPv4 to IPv6. </li></ul><br><h3>  Load Balancer Setup </h3><br><p>  The next important step in the analysis of the above architecture will be setting up the load balancer.  It will be expectedly large - I ask you to see the presentation version of <a href=""><strong>PUT</strong></a> and <a href=""><strong>GET</strong></a> requests. </p><br><p>  You can easily restore them completely by completing the actions according to the documentation for any of the platforms, for example, my native <a href="https://azure.microsoft.com/ru-ru/documentation/articles/load-balancer-ipv6-internet-cli/"><strong>Azure CLI</strong></a> . </p><br><p>  Pay attention to the following points. </p><br><p>  <strong>Frontend IP Configuration-Public IP (VIP)</strong> <br>  If the Frontend IP configuration refers to a public (public) IP address with a version of ipVersion = IPv6, the following checks will be performed: </p><br><ol><li>  There must be a different Frontend IP configuration that implements the IPv4 version. </li><li>  A subnet (subnet with a private frontend address for the balancer) cannot be specified, because in the case of IPv6, the internal load balancer (ILB) is not supported.  Therefore, all associated data (private IP address, allocation method) will be empty (null / not allowed). </li><li>  Only one virtual IP address (VIP) version of IPv6 can be created as part of a load balancer. </li></ol><br><p>  <strong>Backend Address Pools (Backend)</strong> <br>  Validation will consist of checking network interface settings (NIC).  Each instance of backend adress pool-a can refer to a NIC with only one type of supported address ‚Äî either IPv4 or IPv6. </p><br><p>  <strong>Load Balancer Rule (FE &lt;-&gt; BE)</strong> <br>  If the Frontend IP configuration refers to a public (public) IP address with a version of ipVersion = IPv6, the following restrictions apply: </p><br><ol><li>  Backend addresses refer to the IPv6 NIC configuration. </li><li>  Load Balancer Probe not supported for IPv6 version </li></ol><br><p>  <strong>Inbound NAT pools</strong> cannot contain a configuration that refers to an IPv6 VIP. </p><br><p>  <strong>Inbound NAT rules</strong> must satisfy the condition that the Frontend IP and Backend IP configurations must be IPv6 versions. </p><br><p>  <strong>Outbound NAT Rules</strong> </p><br><ol><li>  May contain rules based on the IPv6 version, provided that the virtual IP address of this version is referenced by the frontend IP configurator. </li><li>  In this case, the backend configurator should also be based on IPv6. </li><li>  Within the load balancer, only one IPv6 virtual IP address is allowed. </li></ol><br><p>  Well, as mentioned above, in the existing configuration it is impossible to update the version of IP addresses (IPv4-&gt; IPv6). </p><br><h3>  Network interface setup </h3><br><p>  Here, I also propose to refer directly to the network interface configuration example. </p><br><pre> <code class="hljs 1c">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mynic1"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/resourceGroups/myrg1/providers/Microsoft.Network/networkInterfaces/vm1mynic1"</span></span>, <span class="hljs-string"><span class="hljs-string">"location"</span></span>: <span class="hljs-string"><span class="hljs-string">"West US"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: { ‚Äúkey‚Äù: ‚Äúvalue‚Äù } , ‚Äúetag‚Äù: ‚ÄúW/\‚Äù<span class="hljs-number"><span class="hljs-number">00000000</span></span>-<span class="hljs-number"><span class="hljs-number">0000</span></span>-<span class="hljs-number"><span class="hljs-number">0000</span></span>-<span class="hljs-number"><span class="hljs-number">0000</span></span>-<span class="hljs-number"><span class="hljs-number">000000000000</span></span>\‚Äù‚Äú, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"provisioningState"</span></span>: ‚ÄúUpdating<span class="hljs-string"><span class="hljs-string">|Deleting|Failed|Succeeded‚Äù, "</span></span>virtualMachine<span class="hljs-string"><span class="hljs-string">": {"</span></span>id<span class="hljs-string"><span class="hljs-string">": "</span></span>/subscriptions/{guid}/../Microsoft.Compute/virtualMachines/vm1<span class="hljs-string"><span class="hljs-string">"}, "</span></span>macAddress<span class="hljs-string"><span class="hljs-string">": "</span></span>BC-<span class="hljs-number"><span class="hljs-number">31</span></span>-<span class="hljs-number"><span class="hljs-number">5</span></span>B-E2-EE-B1<span class="hljs-string"><span class="hljs-string">" "</span></span>networkSecurityGroup<span class="hljs-string"><span class="hljs-string">":{"</span></span>id<span class="hljs-string"><span class="hljs-string">":"</span></span>/subscriptions/{guid}/../Microsoft.Network/networkSecurityGroups/myNSG1<span class="hljs-string"><span class="hljs-string">" }, "</span></span>ipConfigurations<span class="hljs-string"><span class="hljs-string">": [ { "</span></span>name<span class="hljs-string"><span class="hljs-string">": "</span></span>myIPv4IP1<span class="hljs-string"><span class="hljs-string">", "</span></span>properties<span class="hljs-string"><span class="hljs-string">": { "</span></span> privateIpAddressVersion <span class="hljs-string"><span class="hljs-string">": IPv4 "</span></span>subnet<span class="hljs-string"><span class="hljs-string">": {"</span></span>id<span class="hljs-string"><span class="hljs-string">": "</span></span>/subscriptions/{guid}/../Microsoft.Network/virtualNetworks/myvnet1/subnets/mysub1<span class="hljs-string"><span class="hljs-string">"}, "</span></span>privateIPAddress<span class="hljs-string"><span class="hljs-string">": "</span></span><span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.8</span></span><span class="hljs-string"><span class="hljs-string">", "</span></span>privateIPAllocationMethod<span class="hljs-string"><span class="hljs-string">": "</span></span>Static <span class="hljs-string"><span class="hljs-string">| Dynamic"</span></span>, <span class="hljs-string"><span class="hljs-string">"publicIPAddress"</span></span>: {} <span class="hljs-string"><span class="hljs-string">"loadBalancerBackendAddressPools"</span></span>: [ {<span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/../Microsoft.Network/loadBalancers/mylb1/backendAddressPools/IPv4BackendPool1"</span></span>} ], <span class="hljs-string"><span class="hljs-string">"loadBalancerInboundNatRules"</span></span>: [ ] } }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"myIpV6Ip1"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/../Microsoft.Network/networkInterfaces/vm1mynic1/ipConfigurations/ myIpV6Ip1"</span></span>, ‚Äúetag‚Äù: ‚ÄúW/\‚Äù<span class="hljs-number"><span class="hljs-number">00000000</span></span>-<span class="hljs-number"><span class="hljs-number">0000</span></span>-<span class="hljs-number"><span class="hljs-number">0000</span></span>-<span class="hljs-number"><span class="hljs-number">0000</span></span>-<span class="hljs-number"><span class="hljs-number">000000000000</span></span>\‚Äù‚Äú, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"provisioningState"</span></span>: ‚ÄúUpdating<span class="hljs-string"><span class="hljs-string">|Deleting|Failed|Succeeded‚Äù, "</span></span> privateIpAddressVersion <span class="hljs-string"><span class="hljs-string">": IPv6, "</span></span>subnet<span class="hljs-string"><span class="hljs-string">": "</span></span>privateIPAddress <span class="hljs-string"><span class="hljs-string">": "</span></span>privateIPAllocationMethod<span class="hljs-string"><span class="hljs-string">": Dynamic"</span></span>, <span class="hljs-string"><span class="hljs-string">"publicIPAddress"</span></span>: <span class="hljs-string"><span class="hljs-string">"loadBalancerBackendAddressPools"</span></span>: [ {<span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/{guid}/../Microsoft.Network/loadBalancers/myIPv6lb1/backendAddressPools/IPv6BackendPool1"</span></span>} ], <span class="hljs-string"><span class="hljs-string">"loadBalancerInboundNatRules"</span></span>: [] } } ], <span class="hljs-string"><span class="hljs-string">"dnsSettings"</span></span>: { <span class="hljs-string"><span class="hljs-string">"dnsServers"</span></span>: [<span class="hljs-string"><span class="hljs-string">"1.0.0.1"</span></span>,<span class="hljs-string"><span class="hljs-string">"2.0.0.2"</span></span>], <span class="hljs-string"><span class="hljs-string">"appliedDnsServers"</span></span>: [<span class="hljs-string"><span class="hljs-string">"1.0.0.1"</span></span>,<span class="hljs-string"><span class="hljs-string">"2.0.0.2"</span></span>, ‚Äú<span class="hljs-number"><span class="hljs-number">3.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.3</span></span>‚Äù] }, ‚ÄúenableIPForwarding‚Äù: false } }</code> </pre> <br><p>  The choice of IPv6 version imposes the following restrictions: </p><br><ol><li>  The NIC must be new, or not tied to an existing virtual machine. </li><li>  The set of network interface configurations must have at least one with version ipVersion = IPv4. </li><li>  The selected NIC is the only one in a virtual machine with version ipVersion = IPv6.  Multi-NIC is not currently available. </li><li>  privateIPAllocationMethod = Dynamic is the only valid value. </li><li>  The private IP address is not available in IPv6. </li><li>  You cannot upgrade an existing virtual machine to support IPv6 instead of IPv4. </li></ol><br><p>  I hope this information will help you successfully overcome all the difficulties that may arise when you start working with IPv6 in Azure. </p><br><h3>  A look into the future </h3><br><p>  If we talk about the future - at the moment, alas, I can not say when updates will be made, correcting very biting restrictions, and when this article will become useless.  There is no information from either the Azure DNS team or the NRP (Network Resource Provider).  Will there be a possibility of more gentle migration of existing infrastructures?  For me, these questions are also open. </p><br><p>  If we say that I still know: </p><br><ul><li>  One way or another, everything is moving towards full parity in support for IPv4, IPv6 and IPv4 + IPv6. </li><li>  Networks and subnets will start supporting IPv6 - hot work is underway, and I will share these joys with you at the first opportunity. </li></ul><br><p>  Thank you for your attention, please contact us if you have any questions. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/311742/">https://habr.com/ru/post/311742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311732/index.html">Docker in production: ‚ÄúWhen you eat it, you are at least not disgusted, especially if you know how to cook‚Äù</a></li>
<li><a href="../311734/index.html">Implementation of alpha testing and alpha lab in projects</a></li>
<li><a href="../311736/index.html">Report from Moscow Python Meetup September 22</a></li>
<li><a href="../311738/index.html">Backup and restore mail from the cloud using Veeam Backup for Microsoft Office 365</a></li>
<li><a href="../311740/index.html">Opus about startaparstvom and competitions in one part</a></li>
<li><a href="../311744/index.html">Working with Big Data with the help of GPU: accelerating the work of databases dozens of times</a></li>
<li><a href="../311746/index.html">GUI for php, or we cross written extension with a screenshot</a></li>
<li><a href="../311748/index.html">How about putting each function in your file?</a></li>
<li><a href="../311750/index.html">Programming & Music: ADSR-signal envelope. Part 2</a></li>
<li><a href="../311752/index.html">How to choose the best RKO when opening a business</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
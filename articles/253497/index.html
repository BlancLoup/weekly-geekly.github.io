<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick server setup with PowerShell Desired State Configuration</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In many ways, the work of the system administrator does not differ original tasks. Anyway, most tasks are repetitive operations, which are reduced to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick server setup with PowerShell Desired State Configuration</h1><div class="post__text post__text-html js-mediator-article">  In many ways, the work of the system administrator does not differ original tasks.  Anyway, most tasks are repetitive operations, which are reduced to creating, deleting, changing settings, installing and configuring roles and system components.  Absolutely natural is the desire to automate such tasks as much as possible.  One of the tools rushing to help the administrator is the <a href="http://www.microsoftvirtualacademy.com/training-courses/powershell-desired-state-configuration-rus">PowerShell Desired State Configuration</a> , which was first introduced in Windows Server 2012 R2.  What this is and how it can make the life of an IT specialist easier, using the Desired State Configuration will be discussed in this article. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/869/fad/1b2/869fad1b22924c6aa168093f16e66121.png"></div><br><a name="habracut"></a><br>  It is logical to start with what PowerShell Desired State Configuration is.  In most cases I do not like to translate English terms, because  not always translated version reflects the necessary meaning.  In this case, we are dealing with an exception.  Desired State Configuration is translated as ‚Äúsetting the desired state‚Äù, and this transfer reflects the meaning of the technology. <br><br>  Using PowerShell DSC, you describe how you want your system to look at the end, and then it is automatically configured according to the specified requirements. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      PowerShell Desired State Configuration is a very powerful tool that can greatly facilitate your system configuration process.  Recently on the <a href="http://www.microsoftvirtualacademy.com/training-courses/powershell-desired-state-configuration-rus">portal MVA out the course</a> , which tells about all aspects of this technology.  And in this article I want to talk about technology and its main advantages. <br><br><h4>  System requirements </h4><br>  There are no special system requirements for DSC.  Desired State Configuration is a Microsoft technology introduced as part of the Windows Management Framework 4.0 and intended for declarative system configuration.  Accordingly, in order for Desired State Configuration to work correctly, you need to install Windows Management Framework 4.0 or higher.  WMF 4.0 is preinstalled in Windows 8.1 and Windows Server 2012 R2 (but for correct operation, update KB28883200 is needed).  Also, this Framework is available for Windows 7, Windows Server 2008 R2 and Windows Server 2012 (here you need to remember to install also .NET 4.5).  Due to the fact that you can upgrade for free from Windows 8 to Windows 8.1, WMF 4 for Windows 8 is not available. <br><br><h4>  Configuration and its application </h4><br>  Now let's talk about how the Desired State Configuration works.  Let's imagine the following task: we need to deploy a website on our server.  To do this, you need to install IIS, ASP .NET, as well as the site content itself.  This is not too complicated operation.  Nevertheless, we will spend some time to install some missing elements or server components that are necessary for correct operation.  If we install on an already used computer, we may encounter various conflicts.  More confusion will arise if we need to configure several servers with the same configuration at once. <br><br>  Using Desired State Configuration solves this problem.  Next, I will give a configuration script with which we will configure. <br><br><pre><code class="vbscript hljs">Configuration IISWebsite { param( $NodeName ) Node $NodeName { WindowsFeature IIS { Ensure = <span class="hljs-string"><span class="hljs-string">"Present"</span></span> Name = <span class="hljs-string"><span class="hljs-string">"Web-Server"</span></span> } WindowsFeature ASP { Ensure = <span class="hljs-string"><span class="hljs-string">"Present"</span></span> Name = <span class="hljs-string"><span class="hljs-string">"Web-Asp-Net45"</span></span> } File WebContent { Ensure = <span class="hljs-string"><span class="hljs-string">"Present"</span></span> Type = <span class="hljs-string"><span class="hljs-string">"Directory"</span></span> SourcePath = <span class="hljs-string"><span class="hljs-string">"C:\Content\BakeryWebsite"</span></span> DestinationPath = <span class="hljs-string"><span class="hljs-string">"C:\inetpub\wwwroot\"</span></span> Recurse = $<span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } IISWebsite -NodeName <span class="hljs-string"><span class="hljs-string">"DSC01"</span></span></code> </pre> <br><br>  On the one hand, PowerShell DSC starts with a configuration script.  On the other hand, this script does absolutely NOT ANYTHING!  In it, we simply declaratively describe how we want the system to look. <br><br>  A new <i>Configuration</i> keyword was introduced in the DSC, which describes the main configuration container.  In essence, this block is a function.  Inside the <i>Onfiguration</i> <i>C</i> <i>box,</i> you can specify the desired settings for each of the computers in your environment. <br><br>  The block of a particular computer begins with the keyword <i>Node</i> .  The following is the name of the target computer, which can be either constant or specified using a variable.  Inside the <i>Node</i> block, you already specify the desired setting for your destination computer, using resources. <br><br>  DSC resources are specialized PowerShell modules with the help of which final configuration of target nodes is performed.  Resources are divided into built-in and user.  There are only 12 built-in resources. However, you can easily add missing resources if the need arises. <br><br>  What happens in our script? <br>  We simply describe how our system should look like. <br><br><pre> <code class="vbscript hljs">Ensure = <span class="hljs-string"><span class="hljs-string">"Present"</span></span></code> </pre><br>  With this command, we make sure that the components we need will be present on the target computer after the configuration has been applied. <br><br>  The application configuration is as follows: <br><br><div style="text-align:center;"><img src="http://litehtmlconv.azurewebsites.net/api/pics/1zy_l8wum-tmnaasurgp-ng4_"></div><br><br>  After running the configuration script, a MOF file (or Managed Object Format file) is created.  This is a text file that contains all the configuration requirements that are subsequently applied to the target computer.  The name of the MOF file will correspond to the <i>Node</i> value.  The file itself will be located in a folder whose name will coincide with the name <i>Configuration</i> .  It is important to note here that using MOF files allows you to use DSC not only to configure computers running Windows, but also running Linux. <br><br>  Next, you need to transfer the MOF file to the target computer (on which we want to deploy the site).  The configuration is applied in two ways: using the Push method (the configuration script must be transferred to the destination computer manually) or the Pull method (a Pull Server is created that periodically checks the configuration for correctness, and if the client is configured incorrectly, the Pull Server sends the required settings to it).  The configuration is applied using the following cmdlet: <br><br><pre> <code class="vbscript hljs">Start-DscConfiguration ‚ÄìPath .\IISWebsite ‚ÄìWait ‚ÄìVerbose</code> </pre><br>  Using the ‚ÄìPath parameter, specify the path to the MOF file.  The time of application of the configuration depends on how the current configuration of the computer corresponds to the requirements specified in the MOF file. <br><br>  After applying the configuration, the PowerShell DSC feature does not end there.  After all, often we need to determine whether there have been any changes in the settings.  You can do this using the cmdlet: <br><br><pre> <code class="vbscript hljs">Test-DscConfiguration ‚ÄìCimSession $session</code> </pre><br>  After launching it, we will start checking whether the current system configuration is the same as the one in the MOF file.  If the configurations match, then the value ‚ÄúTrue‚Äù will be returned, otherwise - ‚ÄúFalse‚Äù. <br><br>  What if we learn about configuration changes?  If we use PowerShell DSC, all you have to do is run the cmdlet again: <br><br><pre> <code class="vbscript hljs">Start-DscConfiguration ‚ÄìPath .\IISWebsite ‚ÄìWait ‚ÄìVerbose</code> </pre><br>  And all the missing items will be restored. <br><br><h4>  Benefits of Desired State Configuration </h4><br>  Once again, I'll talk about the advantages of the PowerShell Desired State Configuration. <br><ul><li>  Using PowerShell DSC allows you to fine-tune your destination computer without any additional checks.  We simply describe how we want the system to look;  everything else is done automatically. </li><li>  PowerShell DSC allows you to track down possible changes to the settings and quickly fix them, again, without additional checks. </li><li>  With PowerShell DSC, you can configure multiple computers at the same time and in the same way. </li></ul><br>  Hope this article was helpful. <br><br>  You <a href="http://www.microsoftvirtualacademy.com/training-courses/powershell-desired-state-configuration-rus">can learn</a> more about how to create your own resources or how to configure the Pull Server for PowerShell DSC <a href="http://www.microsoftvirtualacademy.com/training-courses/powershell-desired-state-configuration-rus">from the course on the MVA portal</a> . <br><br>  Good luck in using PowerShell Desired State Configuration to configure your systems! <br><br><h4>  useful links </h4><br><ul><li>  <a href="http://l.techdays.ru/go/azuretrial">Try Azure</a> for free for 30 days! <br></li><li>  <a href="http://l.techdays.ru/go/mva">Learn</a> Microsoft Virtual Academy <a href="http://l.techdays.ru/go/mva">courses</a> <br><ul><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/powershell-desired-state-configuration-rus">PowerShell Desired State Configuration</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/how-to-ensure-the-protection-of-data-and-applications-rus">Corporate devices.</a>  <a href="http://www.microsoftvirtualacademy.com/training-courses/how-to-ensure-the-protection-of-data-and-applications-rus">How to protect data and applications</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/how-to-manage-hybrid-credentials-rus">Corporate devices.</a>  <a href="http://www.microsoftvirtualacademy.com/training-courses/how-to-manage-hybrid-credentials-rus">How to manage hybrid credentials</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/computer-security-fundamentals-rus">Computer Security Basics</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/building-domain-network-fundamentals-rus">Basics of building a domain network</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/modernization-of-infrastructure-with-windows-server-2012-r2-js-rus">Upgrading the organization's infrastructure using Windows Server 2012 R2</a> </li><li>  <a href="http://www.microsoftvirtualacademy.com/training-courses/licensing-windows-server-2012-r2-rus">Licensing Windows Server 2012 R2</a> </li></ul></li><li>  <a href="http://technet.microsoft.com/ru-RU/evalcenter/dn205286">Download a</a> trial version of Windows Server 2012 R2 </li><li>  <a href="http://l.techdays.ru/go/getvs">Download</a> free or trial Visual Studio </li></ul></div><p>Source: <a href="https://habr.com/ru/post/253497/">https://habr.com/ru/post/253497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253481/index.html">As I did from the physical server virtual</a></li>
<li><a href="../253485/index.html">Without cuts. Cashback service Kubyshka third month in Russia: regular results of the month</a></li>
<li><a href="../253489/index.html">Virtual Reality on Windows Phone using Unity3d</a></li>
<li><a href="../253493/index.html">Analyzing the attendance of employees according to the access control</a></li>
<li><a href="../253495/index.html">The engineering device data center level TIER III, standing on four trunk lines</a></li>
<li><a href="../253501/index.html">The domain zone .com is 30 years old</a></li>
<li><a href="../253503/index.html">Architectural visualization in Unreal Engine 4</a></li>
<li><a href="../253505/index.html">Another smart home, in three parts. Part One, Iron</a></li>
<li><a href="../253507/index.html">Google Play Review, Paying Selfie, Apple's Trade-in - and other news of the week for a mobile developer</a></li>
<li><a href="../253509/index.html">Amtech fluxes: a world wide hoax</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The perfect way to offline from online</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 A typical payment process for a real-life order that I recently picked up: 
 (I requested the number Z from the seller / online store and pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The perfect way to offline from online</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/mf/0y/qx/mf0yqxaamh1slnqs-yvqabfrjxs.png" alt="image"><br><br>  Hello! <br><br>  A typical payment process for a real-life order that I recently picked up: <br>  (I requested the number Z from the seller / online store and provided everything you need for a personalized price.) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - Hello.  I want to pay and pick up order ‚ÑñZ.  - the Client says and approaches the seller. <br>  - Just a minute.  - says the seller.  The seller opens the online store system, copies the data and prints a piece of paper.  - Now to the cashier and then back to me. <br>  The customer goes to the checkout, admiring the assortment of the store. <br><a name="habracut"></a><br>  - Good day, what we pay, the amount?  - Requests the cashier from the cashier. <br>  - Here, on these documents - the client answers. <br>  - Wait a second.  - says the cashier.  The cashier and the cashier ask for help from the payment terminal and the printer, - "Payment terminal - help me make the payment." <br>  - Dear Customer, provide a card and a pin.  - payment terminal, looking out of the window. <br>  The client provided everything the terminal requested. <br>  - Cash all OK, money blocked.  - payment terminal counted out in front of the cash register. <br>  - Hey printer, print a check!  - requested cashier, you need to give the client. <br>  - Here's a check, thanks for paying.  The cashier from the cashier replied politely. <br>  The customer goes to the seller. <br>  - Here, everything is paid for, where is my long-awaited product?  - asked the client. <br>  In the story further I received the goods and related guarantees, but it was possible not to drive me around the hall. <br><br>  So, what is missing to go online to online stores, and vice versa, from offline to online. <br><br>  One online store, with a small warehouse, moved to the first floor.  I was asked to see which solution would be suitable for receiving payment offline.  The task seems trivial.  But all the calculations of "prices" and "balances" must go through the online store system, otherwise it is a long and expensive circulation. <br><br><h3>  Task - to <b>speed up the manual mode</b> . </h3><br>  As quickly as possible and cheaply open the point of self-delivery / purchase of goods for the online store.  All prices, promotions and loyalty programs must always be the same for online and offline by default. <br>  Find the fastest way for data from the store database to the terminal and receipt printer. <br><br>  So, we have systems, like actors in a dialogue: <br>  <b>The client</b> is the cardholder. <br>  <b>The seller</b> is the one who has the rights to use the online store system. <br>  <b>Online store</b> - knows all about the order and can transfer this data to someone. <br>  <b>Payment terminal</b> - Accepts customer card. <br>  <b>Printer</b> - Prints a check to the client. <br>  <b>Cashier and cashier</b> - Transmits data to the terminal, printer and something else useful. <br><br>  Let's turn actors into hardware and software.  We look at the ways of connecting applications in the browser with offline iron.  We take into account the cost of implementation and support. <br><br>  The obvious solution was mPOS with the application / API on the tablet. <br><br><h3>  Solution Concept - Automation </h3><br>  All steps are similar, but instead of a client with documents, the seller runs around the store and brings the terminal, or rather his faithful mobile assistant. <br>  The seller in the browser forms a link to work with the Cashier. <br><br><pre><code class="markdown hljs">kass-api://payNow?callback=[ecommerce-system-url?{ *}]&amp;order={ }</code> </pre> <br>  Cashier instantly, here also sends data to the payment terminal application: <br><br><pre> <code class="markdown hljs">pay-api://payNow?callback=[kass-api://paymentResult?{ *}]&amp;order={ }</code> </pre> <br>  The customer pays for the order through the Payment Terminal. <br><br>  Payment Terminal returns control of the Cashier: <br><br><pre> <code class="markdown hljs">kass-api://paymentResult?{ *}</code> </pre> <br>  Cashier, here also sends the data to the printer for payment: <br><br><pre> <code class="markdown hljs">print-api://payNow?callback=[kass-api://paymentResult?{ *}]&amp;order={ }</code> </pre> <br>  The printer printed a check, did something else, and returned control to the Cashier: <br><br><pre> <code class="markdown hljs">ecommerce-system-url?{ *}</code> </pre> <br><br>  * security parameters may be among parameters <br>  Everything has long been invented, called this custom scheme. <br><br><h4>  What is a custom scheme? </h4><br>  This is an element that was embedded in the URI itself (Universal Resource Identifier). <br>  We are all accustomed to http: //, https: //, ftp: //, sftp: // and others.  This is already implemented in popular platforms. <br><br>  myapp: // path-to-file where myapp is the same scheme. <br><br>  <a href="https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html">For iOS</a> <br>  <a href="https://stackoverflow.com/questions/2448213/how-to-implement-my-very-own-uri-scheme-on-android">For Android</a> <br><br><h3>  Solution in the USA </h3><br>  Take Paypal Here and a compatible printer. <br>  It provides the <a href="">right API</a> . <br><br>  Fortunately, the PayPal Here application accepts payment via <a href="https://us.paypal-here.com/paypal-chip-card-reader/">mPOS Terminal</a> and can print checks on a bluetooth printer. <br><br>  All in one application: Cashier, terminal and printer. <br><br>  For a week, we screwed the necessary API in the admin of the online store and installed this case on the iPad.  Everything is great. <br><br>  Yes, it is a little better than <a href="https://habrahabr.ru/post/140166/">the same terminal</a> , which we cannot use in Russia. <br><br><h3>  Return to the reality of Russia </h3><br>  I did not find a single solution that could completely solve the problem in the way it was possible for a store in the USA. <br><br>  Let me suggest the following: <br>  Please: Atol, Evtor, Cashier Module, Yandex.Kassa, 2Can, all those listed in the <a href="https://habrahabr.ru/post/191196/">article</a> , ‚ÄúCash Desk, which I do not know,‚Äù add Custom Scheme API to your application. <br><br>  If someone knows solutions for the harsh reality, I will be glad to cooperate.  Share your observations below in the comments. </div><p>Source: <a href="https://habr.com/ru/post/353602/">https://habr.com/ru/post/353602/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353590/index.html">Control of complexity and architecture of UDF</a></li>
<li><a href="../353592/index.html">Online course on iOS development for beginners from Redmadrobot and Contented</a></li>
<li><a href="../353594/index.html">Meat grinder, super-robots and scientific research institutes (Not Artificial Intelligence)</a></li>
<li><a href="../353596/index.html">Creating a game on Lua and L√ñVE - 7</a></li>
<li><a href="../353600/index.html">Digital events in Moscow from 16 to 22 April</a></li>
<li><a href="../353604/index.html">Synergistic organizations and Pokupo. How do we work and where does Ethereum?</a></li>
<li><a href="../353606/index.html">DotVVM - First Look</a></li>
<li><a href="../353608/index.html">Sberbank's Dao Integration: From Local Area Networks to Kafka and Streaming Development</a></li>
<li><a href="../353610/index.html">The dispute about the ‚Äúright to oblivion‚Äù: whether to consider the work of search engines as journalism?</a></li>
<li><a href="../353612/index.html">Manage your browser with PHP and Selenium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microcontrollers of the Kinetis family from NXP-Freescale for embedded electronics. Discovering for yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From time to time, I also need to change something. And most often I change the family of microcontrollers in my development. And I'm not alone in thi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microcontrollers of the Kinetis family from NXP-Freescale for embedded electronics. Discovering for yourself</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/093/81b/c3b/09381bc3b05448cfb050b51951a73c00.png"><br>  From time to time, I also need to change something.  And most often I change the family of microcontrollers in my development.  And I'm not alone in this.  <a href="http://bd.eduweb.hhs.nl/es/2014-embedded-market-study-then-now-whats-next.pdf">Every year at least 50% of developers change the processor</a> on which they will carry out the following projects.  This time I decided to try the Kinetis family. <br><a name="habracut"></a><br>  Kinetis is a family of low power 32-bit microcontrollers based on <a href="http://www.freescale.com/webapp/sps/site/homepage.jsp%3Fcode%3DKINETIS">ARM Cortex-M0 / M4 / M7</a> processor cores, without MMU, with a core frequency of up to 240 MHz.  The absence of MMU means that Kinetis is not designed for operating systems like Windows, QNX, Android, iOS.  These microcontrollers are designed to run hard real-time systems as part of a variety of embedded devices, from cardiac implants to electric vehicle controllers.  Although there are Linux builds to run on Kinetis. <br><br><h2>  Where can I apply Kinetis? </h2><br>  Freescale could list a lot of applications.  But for myself, I singled out the following: industrial controllers, frequency converters with vector control without touch control, thyristor controllers, voltage converters, electrical network analyzers, programmable logic controllers for elevator control systems, lifts, conveyors and other mechanisms with multiple drives.  A promising topic for Kinetis seems to be the Internet of things and intelligent sensors.  Finally, it would be nice to try them in multikopter and other robotics. <br><br><h2>  What is interesting about Kinetis? </h2><br>  The closest competitors to Kinetis include microcontrollers of the following families: <a href="http://www.st.com/web/en/catalog/mmc/FM141/SC1169/SS1577%3Fsc%3Dstm32f4">STM32F4</a> , <a href="http://www.nxp.com/products/microcontrollers/product_series/lpc4000/">LPC4000</a> , <a href="http://www.infineon.com/cms/en/product/microcontroller/32-bit-industrial-microcontroller-based-on-arm-registered-cortex-tm-m/32-bit-xmc4000-industrial-microcontroller-arm-registered-cortex-tm-m4/channel.html%3Fchannel%3Ddb3a30433580b3710135a03abaf9385e">XMC4000</a> , <a href="http://www.atmel.com/products/microcontrollers/arm/sam4s.aspx">SAM4S,</a> and some lesser known ones.  For some time now, competitors have also been offering solutions with the ARM-Cortex-M7 core.  In general, too, do not stand still. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      According to <a href="http://bd.eduweb.hhs.nl/es/2014-embedded-market-study-then-now-whats-next.pdf">the 2014 Embedded Market Study, the</a> most popular 32-bit family in the world is STM32.  Therefore, further emphasis will be on the capabilities of Kinetis which are not in the STM32. <br><br>  In the figure below, I depicted a block diagram of the senior representative of the Kinetis family of the MK70FN1M0VMJ15 chip.  It is a little more detailed than it‚Äôs customary to depict in Freescale‚Äôs descriptions to highlight the characteristic features of Kinetis.  In parentheses are the names of the blocks used in the proprietary descriptions. <br><img src="https://habrastorage.org/files/c50/b01/fc3/c50b01fc36ca4818b59e1d5061d92c4a.png"><br><br>  <b>Here are the main advantages of Kinetis:</b> <br><br>  <b>-The breadth of the nomenclature</b> .  The latitude of the nomenclature Kinetis is not inferior to the STM32 and even surpasses.  Kinetis includes the smallest chips in the world (2.0 x 1.6 mm) on the ARM core and advanced MK70 chips with the number of pins 256 and the ability to connect DDRAM, which are not similar to the STM. <br><br>  <b>-big adaptation to harsh environments</b> .  In the family there are chips with a supply voltage of up to 5.5 V. There are chips specifically for automotive applications with increased resistance to electromagnetic interference.  In addition, in the periphery of the microcontroller of the whole family, a lot of hardware solutions are implemented to improve noise immunity.  Resilience to failures provide: <br>  - up to five independent clock generators, three of which are on external quartz resonators, <br>  -independent generator for watchdog, <br>  - hardware filters of two types on all digital inputs, <br>  - access control to various peripherals, the ability to manage the rights of tasks, <br>  - unauthorized access detector for a variety of events, <br>  -special signal to reset external devices on a separate watchdog timer, <br>  -the ability to snap some peripherals to protect against subsequent changes before the power is turned off, <br>  -flexible control and prioritization of bus switches <br>  etc. <br><br>  <b>- enhanced programming and debugging mechanisms</b> .  Flexibility and convenience of debugging - the overall advantage of all microcontrollers on the core of ARM Cortex M. As the survey mentioned above shows, the developers of all the tools in the work pay most attention to the debugging tools.  And I would even refer the high popularity of STM32 to the availability of the JTAG / SWD debugger for these chips, which is immediately integrated into the debugging boards based on STM32.  In addition to this, Kinetis has a special serial SPI-compatible programming interface - EzPort.  EzPort allows programming chips without a JTAG adapter at high speeds, and also simplifies reprogramming of some chips in a multiprocessor system.  No hidden downloaders or hidden code as in LPC or STM32. <br><br>  <b>-a large amount of application libraries</b> .  Freescale application libraries are distinguished by their thoroughness and openness.  What is worth only their library to work on the protocol ZigBee.  This is probably the best implementation of the ZigBee stack, fully accessible in source code.  Next, of course, follows the library to control the engines.  Freescale is expected to release an updated and expanded software package for the development of engine management systems on Kinetis.  There is a library for building graphical user interfaces eGUI, a library for developing touch panels and keyboards, a library supporting medical communication protocols, a library supporting the security standard IEC 60730-1: 2010, optimized for hardware accelerators, libraries of cryptographic functions, libraries connecting to cloud services etc.  And that's not counting the software that accompanies the real-time operating systems for Kinetis, which are listed below.  Separately, it is worth mentioning the various initial loaders, as well as the developer‚Äôs very useful FreeMaster tool, which is essentially an implementation of an oscillographic software module built into the microcontroller with a logger function and command control. <br><br>  <b>-the presence of effective free development tools</b> .  Without free development tools, this Kinetis article would make little sense.  Yes, for Kinetis there is a very advanced free development environment based on the Eclipse project and the GCC compiler called Kinetis Design Studio IDE.  This powerful environment contains a high-quality source editor, compiler, basic libraries, graphical configurator for microcontrollers (analog STM32CubeMX for STM32 microcontrollers), automatic generator of template projects and source texts, SDK with a full set of drivers for all peripherals, symbolic debugger-programmer based on various JTAG / SWD adapters with plug-ins for debugging operating systems and project generator using real-time operating systems.  For those who work with commercial IDE Keil or IAR in Kinetis Design Studio, it is possible to automatically export projects and source texts to these IDEs and synchronously with Kinetis Design Studio to support them. <br><br>  The picture shows the project preparation workflow window in Kinetis Design Studio <br><img src="https://habrastorage.org/files/f18/1a1/b34/f181a1b34b7b48cbbab4ad9fd879ed02.png"><br><br>  <b>-A wide selection of ready-made real-time operating systems</b> .  Real-time operating systems - this is something without which modern embedded electronics is unthinkable.  They enable the integration in a single device of a huge number of functions without loss of reliability and ensure its competitiveness.  Here, Kinetis has what I would call a compelling argument ‚Äî the open source <b>real-time</b> operating <b>system MQX</b> .  Actually, my interest in Kinetis began with her.  But most developers <b>prefer FreeRTOS</b> .  For FreeRTOS, there is also the possibility of generating projects in the Kinetis Design Studio.  In addition, you can generate projects for widely known <b>operating systems uCOS-II and uCOS-III</b> .  As already mentioned, there is a build of Linux OS for Kinetis.  From the mbed.org project site, you can download the mbed OS open source operating system for Kinetis.  And of course you can find at least a dozen commercial operating systems adapted for Kinetis. <br><br><h2>  Briefly about MQX. </h2><br>  The first feature of this real-time operating system (hereinafter RTOS) is an unusually developed driver layer for the Kinetis family.  Practically for all interfaces there are drivers and as a rule in two implementations: using poling and using interrupts.  The second feature is the multiprocessor of this RTOS.  It contains a stack of protocols and routing for transparent interaction of tasks performed on many microcontrollers.  The feature is very relevant for complex robotic systems.  And the third feature is advanced middleware software supplied with this RTOS. <br><br>  <b>The composition directly RTOS is presented in the diagram below.</b> <br><img src="https://habrastorage.org/files/bab/803/859/bab8038596c546b8aaf12696276b2093.jpg"><br><br>  A <b>basic composition of the middleware is</b> difficult to enumerate because it is constantly expanding.  But in any case, here are the components that are part of the software for quite some time: <br>  ‚Ä¢ File system for drives on SD cards <br>  ‚Ä¢ File system in RAM. <br>  ‚Ä¢ File system for NAND Flash drives <br>  ‚Ä¢ Multiprocessor communication library <br>  ‚Ä¢ TCP / IP protocol stack including: ARP, DHCP, IP, TCP, UDP, PPP, ICMP, SMTP, SNMP, DNS, HTTP, NAT, RIP, Telnet, FTP, WEB server with authorization, CGI. <br>  ‚Ä¢ Wi-Fi drivers for the Qualcomm Atheros AR4100 chipset family <br>  ‚Ä¢ USB host classes: audio, CDC, HID, HUB, MSD, PHDC, printer <br>  ‚Ä¢ USB device classes: CDC, HID, MSD, PHDC <br>  ‚Ä¢ Universal FreeMaster communication tool driver <br><br><h2>  Interesting examples of applications for Kinetis: </h2><br><br>  <a href="http://cache.freescale.com/files/analog/doc/app_note/AN4323.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Electrocardiograph and pulse meter (with source code)</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4627.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Connecting a camcorder with an OV7675 chip (with source code)</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4680.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">A simple practical guide to measuring engine parameters necessary for vector control</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4597.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Fine-tuning the algorithm without touch control BLDC engines</a> <br>  <a href="http://cache.freescale.com/files/32bit/doc/app_note/AN4590.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Using DMA for organizing a continuous automatic scan cycle of an arbitrary set of analog inputs by an analog-to-digital converter module</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4533.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Reliable way to update the microcontroller firmware via wireless communication channels using mutual substitution of Flash memory banks (with source code)</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4417.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Manage and monitor microcontrollers via Twitter (with source code)</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4810.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Manage Kinetis microcontrollers from a device running Android OS</a> <br>  <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4523.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Audio player on Kinetis (with source)</a> <br>  <a href="http://cache.freescale.com/files/32bit/doc/app_note/AN4255.pdf%3Ffasp%3D1%26WT_TYPE%3DApplication%2520Notes%26WT_VENDOR%3DFREESCALE%26WT_FILE_FORMAT%3Dpdf%26WT_ASSET%3DDocumentation%26fileExt%3D.pdf">Using the fast Fourier transform to implement the gauge parameters of the power grid (with source code)</a> <br><br>  Listed here is a small part of the application examples published by Freescale for the Kinetis family. <br>  The rest can be found on the official website. <br><br><h2>  And now to practice </h2><br><br>  I do not like ready-made debugging boards and KITs.  Having sufficient experience with microcontrollers, you can immediately start developing ‚Äúcombat‚Äù platforms without wasting time on unnecessary prototypical iterations. <br>  After a brief study, I developed a debug frequency converter: <br><img src="https://habrastorage.org/files/9bb/275/e5d/9bb275e5dfbf41e9bc201798dd1d8e03.jpg"><br>  This device receives voltage from a single-phase network and starts the operation of an asynchronous motor with a capacity of up to 3 kW.  In addition, it provides a smooth start and stop of the engine, and adjustment of its rotational speed in a fairly wide range.  The engine can be made to rotate even several times faster than it could rotate connected directly to a 3-phase network.  The converter uses the modern method of vector control. <br><br>  The project is open for study and is located by <a href="https://drive.google.com/file/d/0B5dbvc_yPqJHQnBHUkRTeEFmRG8/view%3Fusp%3Dsharing">reference.</a> <br><img src="https://habrastorage.org/files/04a/4ee/1bf/04a4ee1bfa4941a49d7401b8364f05fc.png"></div><p>Source: <a href="https://habr.com/ru/post/256611/">https://habr.com/ru/post/256611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256601/index.html">Interfaces "the user needs - it will still pass"</a></li>
<li><a href="../256603/index.html">Free Data Recovery Test</a></li>
<li><a href="../256605/index.html">C #: read-only and LSP collections</a></li>
<li><a href="../256607/index.html">Comparing the subject-event approach with existing BPM systems</a></li>
<li><a href="../256609/index.html">A little about the HL7 EHR-System Functional Model (Functional Model of the EMC system)</a></li>
<li><a href="../256613/index.html">Can software data destruction be better than a powerful magnet?</a></li>
<li><a href="../256617/index.html">Debian Jessie 8.0 Release</a></li>
<li><a href="../256621/index.html">We are switching from STM32 to the Russian K1986BE92QI microcontroller. Practical application: Generate and reproduce sound. Part Four: We create the digital part of a single-voiced and multi-voiced music postcard</a></li>
<li><a href="../256623/index.html">We are trying to make monitoring via SNMP really simple.</a></li>
<li><a href="../256627/index.html">What's new in CodeKit 2.3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Loading classes in java. Theory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the main features of the Java platform is the dynamic class loading model, which allows you to load executable code into the JRE without reload...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Loading classes in java. Theory</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/f1e/f78/a5c/f1ef78a5c0b33dad635e5a09790708a1.png"><br><br>  One of the main features of the Java platform is the dynamic class loading model, which allows you to load executable code into the JRE without reloading the main application.  This feature is widely used in application servers that have recently received high popularity. <br><br>  The article describes the basic concepts, aspects and principles of the dynamic code loading model.  The next article will discuss the implementation of a native class loader, as the main mechanism of an application with a plug-in architecture. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h4>  Introduction </h4><br>  Any class (an instance of the java.lang.Class class in the environment and the .class file in the file system) used in the execution environment was somehow loaded by some loader in Java.  In order to get the loader that loaded class A, you need to use the method A.class.getClassLoader (). <br><br>  Classes are loaded as needed, with a few exceptions.  Some base classes from rt.jar (java.lang. * In particular) are loaded when the application starts.  Extension classes ($ JAVA_HOME / lib / ext), user-defined and most system classes are loaded as they are used. <br><br><h4>  Types of loaders </h4><br>  There are 3 types of loaders in Java.  This is the basic boot loader (bootstrap), system loader (System Classloader), extension loader (Extension Classloader). <br><br>  <strong>Bootstrap</strong> - implemented at the JVM level and has no feedback from the execution environment.  This loader loads classes from the $ JAVA_HOME / lib directory.  Those.  everyone's favorite rt.jar is loaded by the basic loader.  Therefore, an attempt to get the loader from the java. * Classes always ends in a null.  This is due to the fact that all base classes are loaded with a basic loader, which is not accessible from the managed environment. <br><br>  You can control the loading of base classes with the -Xbootclasspath switch, which allows you to override sets of base classes. <br><br>  <strong>System Classloader</strong> is a system loader implemented already at the JRE level.  In Sun, JRE is the class sun.misc.Launcher $ AppClassLoader.  This loader loads classes whose paths are specified in the CLASSPATH environment variable. <br><br>  You can control the loading of system classes using the -classpath switch or the java.class.path system option. <br><br>  <strong>Extension Classloader</strong> - extension loader.  This loader loads classes from the $ JAVA_HOME / lib / ext directory.  In Sun, JRE is the class sun.misc.Launcher $ ExtClassLoader. <br><br>  You can control the loading of extensions using the java.ext.dirs system option. <br><br><h4>  Concepts </h4><br>  A distinction is made between the current loader (Current Classloader) and the context loader (Context Classloader). <br><br>  <b>Current Classloader</b> is a class loader whose code is currently being executed.  The current loader is used by default to load classes during execution.  In particular, when using the Class.forName ("") / ClassLoader.loadClass ("") method or on any class declaration that was not previously loaded. <br><br>  <b>Context Classloader</b> - current context context loader.  You can get and install this loader using the methods Thread.getContextClassLoader () / Thread.setContextClassLoader ().  The context loader is automatically installed for each new thread.  At the same time, the parent stream loader is used. <br><br><h4>  Load Delegation Model </h4><br>  Starting with the Java 2 Platform, Standard Edition, v1.2 class loaders form a hierarchy.  The root is the base (it has no ancestor).  All other loaders instantiate the link to the parent loader when initialized.  This hierarchy is required for the load delegation model.  In general, the hierarchy is as follows. <br><br><img src="http://blogs.sun.com/roller/resources/vmrobot/classloading-1-1.gif"><br><br>  The right to load a class is recursively delegated from the lowest loader in the hierarchy to the highest one.  This approach allows classes to be loaded by the loader that is as close as possible to the base one.  So the maximum area of ‚Äã‚Äãvisibility of classes is reached.  By scope is meant the following.  Each loader keeps track of the classes that it has loaded.  The set of these classes is called the scope. <br><br><img src="http://blogs.sun.com/roller/resources/vmrobot/classloading-1-2.gif"><br><br>  Consider the boot process in more detail.  Let the manifest variable of the custom class Student meet in the execution systems. <br><br>  1) The system loader will attempt to search the Student class in the cache. <br>  _1.1) If the class is found, the download is finished. <br>  _1.2) If the class is not found, the load is delegated to the extension loader. <br>  2) The extension loader will try to search the student class in the cache. <br>  _2.1) If the class is found, the download is finished. <br>  _2.2) If the class is not found, the load is delegated to the base loader. <br>  3) The basic loader will try to search the student class in the cache. <br>  _3.1) If the class is found, the download is finished. <br>  _3.2) If the class is not found, the base loader will try to load it. <br>  __3.2.1) If the download is successful, it is finished;) <br>  __3.2.2) Otherwise, the control is committed to the extension loader. <br>  _3.3) The extension loader is trying to load a class. <br>  __3.3.1) If the download is successful, it is finished;) <br>  __3.3.2) Otherwise, control is handed over to the system loader. <br>  _3.4) The system loader is trying to load a class. <br>  __3.4.1) If the download is successful, it is finished;) <br>  __3.4.2) Otherwise, a java.lang.ClassNotFoundException exception is generated. <br><br>  If there are custom loaders on the system, they should <br>  a) extend the java.lang.ClassLoader class; <br>  b) support the dynamic loading model. <br><br><h4>  Inside </h4><br>  Let's start the simplest application with the -verbose: class key. <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> A { } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> B extends A { } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> C extends B { } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Main { <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> args[]) { <br> C c = <font color="#0000ff">new</font> C(); <br> B b = <font color="#0000ff">new</font> B(); <br> A a = <font color="#0000ff">new</font> A(); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The output shows that the classes were loaded in the wrong order in which they were used.  This is due to inheritance. <br><br>  [Loaded Main from file: / C: / devel / CL / bin /] <br>  [Loaded A from file: / C: / devel / CL / bin /] <br>  [Loaded B from file: / C: / devel / CL / bin /] <br>  [Loaded C from file: / C: / devel / CL / bin /] <br><br><h4>  Conclusion </h4><br>  The next article will be more interesting;) </div><p>Source: <a href="https://habr.com/ru/post/103830/">https://habr.com/ru/post/103830/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103820/index.html">Plans for the autumn update</a></li>
<li><a href="../103821/index.html">ICQ / MRIM / Jabber / Vkontakte Gate</a></li>
<li><a href="../103822/index.html">Abuzes are different, abuses are important ...</a></li>
<li><a href="../103826/index.html">Racios.com app development</a></li>
<li><a href="../103829/index.html">Google is experimenting with leveling out</a></li>
<li><a href="../103833/index.html">Apple iOS 4.1</a></li>
<li><a href="../103834/index.html">Nested arrays and magic methods</a></li>
<li><a href="../103835/index.html">Scientists have created self-healing solar panels</a></li>
<li><a href="../103836/index.html">Third-party components - money to wind or save money?</a></li>
<li><a href="../103837/index.html">madVR: how to get the most out of video</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
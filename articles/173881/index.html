<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Icon Fonts for Mobile</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For quite a long time, we have been supporting two mobile versions of Mail.Ru Search. This post would like to reveal some technical information about ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Icon Fonts for Mobile</h1><div class="post__text post__text-html js-mediator-article">  For quite a long time, we have been supporting two mobile versions of Mail.Ru Search.  This post would like to reveal some technical information about graphical interfaces. <br><br>  The first version focuses on simple phones that are slowly but surely leaving the modern market of mobile devices, but not yet completely forgotten.  We include phones without a full-fledged operating system, browsers in which are outdated, do not understand full-fledged JavaScript-code, and because of their limitations cannot support rapidly developing Internet technologies.  For this group, we had to apply the proven old method - .png- and .gif-graphics. <br><br>  The second version, which we support and develop, is designed for smartphones.  About her today and will be discussed. <br><a name="habracut"></a><br><h5>  Part 1: Connecting Icon Fonts </h5><br>  Modern smartphones have a number of features that can not be forgotten and which have to adapt.  One of them is the appearance of screens with increased pixel density (in particular, Retina-screens), the possibility of increasing the page and, as a result, the blurring of ordinary images.  Because of this, there is a need to use scalable graphics, which would look clearly both on a 1: 1 scale, and after a multiple increase.  The way out of this situation was the use of icon fonts.  The picture below shows two options: the top shows a picture .png, enlarged 2 times, and the bottom shows the result of applying a font with icons with the same magnification. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/0b4/147/dea/0b4147dea755ab723814ff2fcd7f51ce.png"><br><br>  The essence of the process is that in the font file the letters are replaced with graphic icons - in fact, a unique font is created.  In our case, for example, the ‚Äú@‚Äù icon is replaced with a magnifying glass, the English letter ‚ÄúI‚Äù (from the Internet) - with the icon of the globe, the letter ‚ÄúP‚Äù (from pictures) - with the icon of images, and so on.  When replacing, it is desirable to adhere to the relative similarity of graphics and letter-symbols, so that if for some reason the font is not loaded, the user will still be able to navigate the site. <br><br>  Loading a non-standard font is the same as for a PC, using the CSS-design @ font-face.  The only difference and a big plus is that when working with smartphones you do not need to worry about supporting various font formats (.eot, .woff, .ttf, .svg), as this is necessary for PCs due to the variety of browsers. <br><br>  For phones based on iOS, Android, bada and BlackBerry operating systems, it is enough to load one .ttf format.  It is well understood not only by the built-in browsers, but also by mobile Firefox, hrome and Opera Mobile. <br><br>  In the stylesheet, the subload looks like this: <br><br><pre><code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">font-face</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">'goMailIco'</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">src</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"/font/goMailIco.ttf"</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: normal; <span class="hljs-attribute"><span class="hljs-attribute">font-style</span></span>: normal; }</code> </pre> <br>  And yet, despite the fact that modern smartphones have characteristics that are sometimes comparable with personal computers, there are among them those that require a special approach.  In the struggle to improve the quality of the site display, we had to select a group of smartphones, which are given pictures.  This group includes devices on OSs such as Windows Phone 7 and Android versions below 2.2, as well as the Opera Mini browser, which is open on the phone with any OS.  We made this separation after experimenting with test devices. <br><br>  On the server side, each device that goes to go.mail.ru is determined by the user agent and other parameters.  Then this data is transferred to the template engine - <a href="http://jinja.pocoo.org/">Jinja is</a> used on the Mail.Ru Search project.  Record on the definition of the need to give the user a font or image looks like this: <br><br><pre> <code class="html hljs xml">{% set switchFont = (detector.os in ('iphone os', 'blackberry', 'bada') or detector.os == 'android' and detector.osver &gt;= 2.2) and (not detector.is_opera_mini) %}</code> </pre><br>  The switchFont variable is true if the device is running iOS, BlackBerry, bada, or Android operating systems with a version greater than or equal to 2.2, and the is_opera_mini variable is false.  Further, depending on the switchFont value, one of the two is displayed in the templates. <br><br>  Below is a piece of code in a template using a logo example: <br><br><pre> <code class="html hljs xml">{% if switchFont %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo__ttf"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo__ttf_color"</span></span></span><span class="hljs-tag">&gt;</span></span>@<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>mail<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo__ttf_color"</span></span></span><span class="hljs-tag">&gt;</span></span>.ru<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> {% else %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo__img"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> {% endif %}</code> </pre><br>  Styles for him look like this: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.logo__img</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(data:image/png) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> no-repeat; <span class="hljs-attribute"><span class="hljs-attribute">background-size</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span> auto; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">165px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">25px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.logo__ttf</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">'goMailIco'</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#fff</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.logo__ttf_color</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#ffb81d</span></span>; }</code> </pre><br><br>  If the template engine decided to use the font option, for each letter having the class .logo__ttf, a non-standard 'goMailIco' font is applied, in which the standard letter m is replaced with the letter from the corporate mail.ru font.  It remains only to choose the right size using font-size, set the color, the shadows and, if desired, use all the features of CSS3. <br><br>  In the case when we take a picture, the situation is almost standard, not counting the fact that we load the image twice as much as necessary.  For example, to show a 200x300 pixel image on a screen with increased pixel density, you need to upload a 400x600 pixel image and then reduce it using CSS attributes, html parameters, or, as in our case, an image as a background with the necessary container sizes, background in which it is compressed twice using the ‚Äúbackground-size: 100% auto;‚Äù style. <br><br>  With this option, it is possible to download redundantly large images for smartphones with a standard screen resolution (device-pixel-ratio: 1), which are not suitable for magnification.  This is compensated for by encoding the background image into base-64 format, which allows you to win the difference in file size and eliminate the need to store and maintain images in two formats - 1 to 1 and 2 to 1. Plus, this method significantly minimizes the number of http - requests to the server, which increases the overall download speed. <br><br><h5>  Part 2: Font Design </h5><br>  Having discussed the technical details of connecting the font with icons, we will describe how such a font is developed.  If you already have icons or other graphics in vector format, then half the work is done;  otherwise, the existing raster icons will have to be redrawn in the vector editor.  You can arrange the entire set of graphics layers in one document, but for the assembly in the font is better to export each character into separate files, the format of which can import an existing font editor. <br><br><img src="https://habrastorage.org/storage2/62b/402/d71/62b402d71e792b366255a2082cb5ecb3.png"><br><br>  It is preferable to work with large object sizes, from 500 to 1000 pixels.  At the same time, it is worth avoiding excessive detailing, because the icon can be rasterized on a 16-32 pixel screen.  Use monochrome forms, without strokes and no effects;  color and other effects, for example, a shadow, can be applied to the icon already during page layout.  If you need to use several colors in the icon, you will have to break it into elements, each of which make a separate font character, which will then be superimposed on each other and painted accordingly. <br><br><img src="https://habrastorage.org/storage2/44e/5c9/1e7/44e5c91e7fdcd3b549da7deb75a2719a.png"><br><br>  There are several editors, such as <a href="http://www.high-logic.com/font-editor/fontcreator.html">Font Creator</a> (for Windows), <a href="http://glyphsapp.com/">Glyphs</a> (for Mac) or <a href="http://inkscape.org/">Inkscape</a> (for Windows, Mac, Linux) - you can immediately edit vector graphics and create a font in svg-format. <br><br>  For the final result, it is not so important whether you are creating a new font or replacing the symbols of the finished one;  but, adding a character to an empty font, you will have to manually search and assign the corresponding character index for different operating systems, then configure different metrics.  It is easier to take as a basis a ready-made font with a license that allows for its change - for example, from the site <a href="http://font.cc/">font.cc.</a>  We import the prepared vector graphics, replacing the selected letters, and monitor the matching sizes, indents, align to the baseline. <br><br><img src="https://habrastorage.org/storage2/4dd/351/303/4dd351303b9a68fd530882b31ecd6c67.png"><br><br>  If you have broken an icon into multi-colored elements, then it is better to keep their position and size relative to each other with further imposition.  At this stage, you will probably have to test and, perhaps, clarify the position and size of the icon. <br><br><img src="https://habrastorage.org/storage2/d5b/cd4/e90/d5bcd4e9086f45869bb8b4b15bc9f4ca.png"><br><br>  If your editor only saves the font to a format other than .ttf, you can use online services for converting, for example, <a href="http://www.fontsquirrel.com/tools/webfont-generator">Fontsquirrel</a> .  Such services also allow you to reduce the file size by removing unused characters, but it is better to do this at the design stage in the editor. <br><br>  That's all.  If you find some alternative solution for ultra-high resolution screens - share. <br><br>  You can <a href="http://go.mail.ru/">view the</a> mobile version of the Search project by visiting the <a href="http://go.mail.ru/">go.mail.ru</a> link from a mobile device. <br><br>  <i>Dariya Skakun, developer of mobile versions of the project Search</i> <i><br></i>  <i>Alexey Likhodzievsky, Head of Mobile Project Direction Search</i> </div><p>Source: <a href="https://habr.com/ru/post/173881/">https://habr.com/ru/post/173881/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173867/index.html">The story of the unstripped startup</a></li>
<li><a href="../173869/index.html">Intercepter-NG updated</a></li>
<li><a href="../173875/index.html">Mapping or welcome to vector Crimea</a></li>
<li><a href="../173877/index.html">Semantic mediawiki</a></li>
<li><a href="../173879/index.html">What prevents domestic programmers to repeat the success of Zuckerberg</a></li>
<li><a href="../173887/index.html">How education is created. History Online Science Classroom</a></li>
<li><a href="../173891/index.html">Second wind of the era of invention</a></li>
<li><a href="../173893/index.html">We design on DDD. Part 1: Domain & Application</a></li>
<li><a href="../173897/index.html">About CMTime</a></li>
<li><a href="../173899/index.html">AVR Video Tutorials</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
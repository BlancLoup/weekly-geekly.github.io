<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to the Content Delivery Network</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Content: What is a CDN? History of occurrence. Why is it needed? Who needs it, and who does not? Entry threshold, cost, cost. Basic technology. 

 CDN...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to the Content Delivery Network</h1><div class="post__text post__text-html js-mediator-article">  Content: What is a CDN?  History of occurrence.  Why is it needed?  Who needs it, and who does not?  Entry threshold, cost, cost.  Basic technology. <br><br>  CDN is short for content delivery network, i.e. ‚Äúcontent delivery network‚Äù.  Most often it is a set of servers with specialized software that accelerate the delivery (‚Äúreturn‚Äù) of content to the end user.  Servers are located all over the world in such a way that the response time of the site visitors is minimal.  ‚ÄúContent‚Äù most often means videos and static website elements (not requiring server code execution or database requests, such as css / js), but completely unexpected things are also referred to as ‚Äúcontent‚Äù - for example, games in Steam (uses CDN for game sharing), updates for operating systems, etc. <br><br><img src="https://habrastorage.org/files/2e3/23e/241/2e323e241e1243ae889f744a5802a8a5.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  A bit of history </h1>  The rapid growth of the Internet in the mid-90s led to the situation that the servers of those years could not withstand the load alone (can the powerful dual-processor Pentium Pro-based server at 266 MHz with 128 MB of memory give up much?).  The server performance limit and the need for more and more performance has generated the now forgotten words: ‚Äúserver farm‚Äù, ‚Äúhierarchical caching‚Äù ... The awesome newspeak is surprisingly sensitive to age - and words like ‚Äúservers farm‚Äù or ‚Äúinformation superhighway‚Äù are now associated with warm tube lamps. CRT monitors, not progress.  During the development and implementation of different solutions, one important feature was noticed: there are two types of content - static and dynamic. <br><a name="habracut"></a><br>  <em>Dynamic content</em> is generated by the server at the time the server receives the request, most often with the active participation of the database.  If on the page below the inscription ‚Äúpage was generated in 0.333 seconds‚Äù is just an example of dynamic content. <br><br>  <em>Static content</em> on the server is ready-made - whoever sends the request, the server will give the same thing (adjusted for possible ACLs).  It is important that the content does not change from request to request. <br>  Static and dynamic content create different types of server load.  When the ‚Äúdynamics‚Äù is distributed, the processor, IO (for the database) and some memory are important.  When static is distributed, the processor is almost not important, IO is important only for those files that are not cached, and the main requirement is network speed.  It is possible to force distributing statics to servers that distribute dynamics, but this is a combination of roles that interferes with each other.  It is especially hard at the moment when IO from the statics begins to interfere with IO from the dynamics, and the load on the IRQ prevents the execution of dynamic scripts. <br><br>  An even more important detail is that ‚Äúdynamic‚Äù usually means having a ‚Äústate‚Äù (the session and its associated data), but statics is not.  Statics can be scaled horizontally without complex two-way synchronization with the central server.  In the case of dynamics, this will not work out - you need either a common database or methods of synchronization and locks. <br><br>  Medium and large companies started distributing statics and dynamics from different servers located in different places of the planet, reducing the load on sites with dynamics due to the removal of statics from them to easily scalable servers.  After that, it was easy to take a step to the ‚Äúoutsource‚Äù distribution of statics, and companies began to emerge that made static distribution the basis (or at least a major component) of their business. <br><br><h1>  The main thing </h1><br>  Note that CDN solves an even more important problem than making life easier for application servers. <br>  All modern CDNs place copies of content on different servers around the world and direct the client to the closest (to the client) server.  The result is an abbreviation of latency, that is, the delay between the request and the response.  If there are a lot of images on the page (even small pictures), then the faster the client will have them, the faster the client will see the page.  And if we remove from consideration of the sufferers on dialup / gprs, the time for which the page will be shown is determined almost exclusively by the network delay.  If we are talking about distances of hundreds of kilometers (~ 10 ms delay), this is not significant.  But if we are talking about distances to continents, then a delay of hundreds of milliseconds (up to 500-600!) Begins to play a radical role.  And if the content is given from the server, which is a few kilometers away from the user, then a miracle happens!  Australia sees data from a site from the USA in units of milliseconds, China from a site from Russia, France from a site from Brazil.  Without the participation of ocean cables. <br><br>  This also works on a smaller scale: For example, Yandex, with the help of a CDN, at one time notably accelerated the work of the post office in the regions of Russia, which use Moscow to stomp and stamp on optics. <br><br>  Accelerating content delivery became the main killer feature of the CDN, and everything else (load reduction, balancing, etc.) became secondary.  Important, but not critical.  In the end, any load can fill up with money.  But no money can be made so that, without local points of presence, the signal from Perm reaches San Francisco in tens of milliseconds. <br><br>  Given that saving is not a killer feature, it is also important.  CDN in some situations allows you to significantly save on traffic.  Transferring files to another continent once, keeping them there on a local server and distributing via local links is cheaper than driving the same traffic ten thousand times across the trans-Atlantic.  Most often, people start to think about saving the moment when it becomes critical (video hosting in the first place). <br><br>  However, servers around the world, a system for synchronizing content and directing clients to nearby servers, etc.  - all this is not free.  Most often, CDNs are asking for extra money compared to regular uplink traffic, although for some regions it may turn out that CDN traffic is more profitable than uplink traffic (but this, rather, suggests that the Internet in the region is not so hot). <br><br><h1>  How does it work in practice? </h1><br>  From the visitor‚Äôs side: he enters example.com, where he is given an html page.  In this html-page all css, js, pictures and video - point to the site cdn.example.com - the content is loaded from there.  When the client‚Äôs browser accesses this address, thanks to the magic of BGP, its request is sent to the closest presence node.  The very magic of BGP is that the visitor‚Äôs provider on the IP network in which cdn.example.com is located receives several announcements from different networks (which have a point of presence), and the provider‚Äôs router chooses the closest one.  As a result, the request goes to the nearest server that responds to it, and the answer goes the same way, also on the short route. <br><br>  On the part of the site owner, there are two options: <ol><li>  Static files are uploaded to the object storage, via ftp, scp or another convenient method.  Object storage (in the control panel) is assigned a dns-name (its own, or issued by the provider - depending on the technology), which is indicated in the html-page. </li><li>  The site owner specifies the 'origin' for the domain, after which, at the client‚Äôs request, the CDN goes to the site to which cdn is connected and downloads files to itself and gives them to the user's browser. </li></ol><br>  Magically, the data is available to the client much faster than the main html-page. <br><br>  By the way, it can be static too.  According to this principle, for example, the pages on github.io work - this is a pure CDN, everything in it is distributed by statics. <br><br><h1>  Who needs a CDN? </h1><br>  Those who are important to give statics quickly to many visitors who are far from the company's servers (the situation is even more acute for companies that have visitors scattered over a large area, that is, even moving servers closer does not make sense - most will be far away) ). <br><br>  Those who have a very large amount of files - and the cost of CDN traffic is lower than the cost of traffic going to uplinks (large sites usually cost different money - local is cheaper, ‚Äúglobal‚Äù is more expensive). <br><br>  At a certain band, the removal of static on a CDN is more profitable than an upgrade of network equipment.  Usually, static takes up a significant part of the band, and instead of upgrading from 1G to 10G, or from 10G to 40G, it is much cheaper to throw 80% of the traffic on a CDN and stay at reasonable price servers. <br><br><h1>  Differences </h1><br>  If everything is clear with CDN, then what about their suppliers?  There are many companies, they differ in price, services and quality. <br>  Here are the main factors that you need to determine for yourself when choosing a supplier: <br><br>  1. The number of points of presence (Point of Presence) <br>  The more points, the better, but ... However, why do you need points of presence in China, if the site is Russian?  And the number of points of presence in Australia when entering the US market ... When comparing a CDN, consider the number of points of presence in countries and regions of interest.  Just assurances about the large number of points of presence and good connectivity is not enough - for informed choice you need to see a list of points of presence and compare them with the potential audience of the site. <br><br>  The points of presence themselves are also not equivalent - connectivity and peering agreements with local providers are very important.  Unfortunately, it is rather difficult for a non-resident to assess connectivity (you need to understand the distribution of forces in the local provider market), but comparing the offers you should clarify about the list of peers of each candidate in the most important points of presence. <br><br>  2. Caching policy <br>  In order to quickly deliver content from the local server, it is necessary that the content on the local server appears (and remains).  The caching schemes are many, here are the most obvious: <br><ul><li>  Replicate all content.  Plus - it works quickly right away, even the first request is given quickly.  Minus is expensive. </li><li>  Replication on the first call (the most common scheme).  The first appeal is slow, further faster.  It can be expensive, depending on the retention policy. </li><li>  Asynchronous replication on exceeding a certain threshold of calls.  More economical version, more customers get slow service. </li></ul><br>  Next to the caching policy is the policy of obsolescence (retention policy): when exactly the object is removed from the server at the point of presence?  By timeout, by reducing the number of hits below a certain value, ‚Äúnever‚Äù, after a fixed time?  And who pays for keeping a copy? <br><br>  3. SLA <br>  Yes, yes, the legendary and immense Service Level Agreement.  Before you enjoy the long line of nines, specify - is this SLA for a CDN ‚Äúin general‚Äù or for all points of presence?  If the server in the most important location for you breaks down and the content is sent ‚Äúfrom the neighboring country‚Äù, will it be counted as downtime for SLA?  Well and, the main thing, what threatens with non-observance SLA to the supplier?  Will you get back a penny from a monthly payment, or are there substantial penalties? <br><br>  By the way, even though the selling manager will resist, it will be great if they show you the failure statistics for the previous time.  There will be failures, and they happen to everyone (hint: if they tell you that someone has never had accidents - either they are very young or very arrogant) - the whole question is in their duration and frequency. <br><br>  4. Value added services <br>  CDN may provide additional services.  Example (incomplete list): <br><ul><li>  real-time failure notification of individual nodes </li><li>  Analytics </li><li>  CMS integration </li><li>  DRM for content </li><li>  Ready html / flash video player for video files with CDN support </li><li>  Cache Policy Management </li></ul><br><br>  It is very important to pay attention to the support needed by the protocols and files.  Find out if your provider supports streaming playback of flash and media files (RTMP, RTSP) if you plan to deliver such content. <br><br>  The provider may be very good at everything else, but if it does not support the technologies you need, you are unlikely to like it. <br><br>  5. Technical nuances <br>  Redirection technology: This is either enikast at the DNS level, or redirection through redirects.  Enikast, for obvious reasons, is faster. <br><br>  Accuracy of redirection: Unfortunately, the supplier himself will not be able to objectively evaluate this indicator, although this indicator is very important - how much of the target audience falls on the nearest server.  People often talk about the expected delay (because the actual distance doesn‚Äôt bother anyone, but everyone cares about the time of passing the packets - for example, it happens that the junction between two networks is overloaded and the packets go slowly, in this situation it is better to go a little further, but faster). <br><br>  6. Accounting <br>  How exactly does the supplier take the money?  For megabytes or for megabits per second?  Is there a minimum commit (‚Äúif there was less than the amount stipulated in the contract to pay extra to the minimum‚Äù), what happens when overcommit (limit is exceeded) - disable / take more money?  Is there a minimum contract period?  Is there a contract at all (between the site owner and the CDN provider), or is it an automatic self-serving on-demand provisioning, that is, ‚Äúthrew money into the account and got the control panel‚Äù? <br><br><h1>  From what volume does it make sense to think about a CDN? </h1><br>  We repeat the idea: if you need to quickly serve customers, the volume of traffic is no longer important - the points of presence are closer to the target audience. <br><br>  If there is no significant need for low latency, and CDN is used to alleviate the load on the servers, then a meaningful amount of traffic that you should start thinking about CDN is a few terabytes per month. <br><br><h1>  The main question: how much does it cost? </h1><br>  The price varies greatly from the specifics of the CDN, the degree of ‚Äúcoolness‚Äù of the supplier and the adaptation of the CDN to specific special needs.  The price range on the market is from $ 1 to $ 140 / megabit of bandwidth, or $ 0.03- $ 0.3 per GB of traffic.  The actual price very often depends on the added services and CDN capabilities.  Traffic in the USA and Europe is usually the cheapest, traffic continues in Asia / Australia, and the most expensive traffic is outside these regions. <br><br><h1>  Market Overview </h1><br>  All companies are divided into two categories - operating under existing public tariffs and operating on the basis of agreements.  Second companies are extremely difficult to compare, as the conditions in them can vary greatly.  However, ‚Äúprivate‚Äù does not mean ‚Äúsmall‚Äù - private companies often have very large clients with huge volumes of hundreds of terabits (lanes), and they do not bother with a ten-minute gigabit. <br><br>  Here is a list of popular CDNs (in order not to offend anyone, the list is sorted in random order): <br><br>  Public CDNs: <br><ul><li>  <b>NetDNA,</b> 2009, minimum contract 1 year, prices from 1 to 6 per GB, depending on the volume, traffic outside the EU / US is one and a half times more expensive, storage is free </li><li>  <b>Rackspace Cloud Files</b> - ¬¢ 4- ¬¢ 12 per GB of band, 10 per GB of storage (resell Akamay) </li><li>  <b>MaxCDN</b> from ¬¢ 3 to ¬¢ 8 per GB traffic </li><li>  <b>Amazon CloudFront</b> - EU / US - from 6 to ¬¢ 12 per GB, storage is free. </li><li>  <b>CacheFly</b> - ¬¢ 20- ¬¢ 30, minimum contract $ 99 / month, excess space is paid ($ 15 / Gb) </li><li>  <b>CDN77</b> - ¬¢ 3- 15 / GB </li><li>  <b>CloudFlare</b> - traffic is not paid, a different level of service costs different money, ranging from basic free, following it at $ 5 / month, to $ 200 / month at the best. </li><li>  <b>BitGravity</b> - from ¬¢ 7 to ¬¢ 20 per GB, depending on the size and region </li><li>  <b>Level 3</b> - from $ 100 per month, ¬¢ 10- ¬¢ 25 per GB </li><li>  <b>Leaseweb</b> - from ¬¢ 6 to ¬¢ 8 per GB, with a minimum cost of $ 60 / month </li><li>  <b>Windows Azure CDN</b> from ¬¢ 3 to ¬¢ 20 </li><li>  <b>CDNsun</b> - from ¬¢ 3 to ¬¢ 5 per GB </li></ul><br>  Private CDNs: <br><ul><li>  <b>Internap</b> </li><li>  <b>Akamai</b> </li><li>  <b>Limelight Networks</b> </li><li>  <b>AT &amp; T</b> </li><li>  <b>Peer1</b> </li><li>  <b>Edgecast</b> </li></ul><br><br>  Additional Information <br><ul><li>  <a href="http://www.cdnplanet.com/">www.cdnplanet.com</a> </li><li>  <a href="http://www.cdnfinder.com/">www.cdnfinder.com</a> </li></ul><br><br>  <em>The article was written with the support of our colleagues from the <a href="http://ucdn.com/">company UCDN</a> , who are too modest to include themselves in the list above.</em> </div><p>Source: <a href="https://habr.com/ru/post/236511/">https://habr.com/ru/post/236511/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../236501/index.html">Raffle in honor of the Day of programmer</a></li>
<li><a href="../236503/index.html">Analyzing Weird Correlations</a></li>
<li><a href="../236505/index.html">Wearable electronics at IFA 2014</a></li>
<li><a href="../236507/index.html">Summation of divergent series by the methods of Abel, Borel, Cesaro and Dirichlet</a></li>
<li><a href="../236509/index.html">Epson Photo Contest - not just yet another photo contest</a></li>
<li><a href="../236513/index.html">Conversion optimization: where is the best place to place a call to action? [case]</a></li>
<li><a href="../236515/index.html">About blocking the Yota mobile application by MTS</a></li>
<li><a href="../236519/index.html">Convenient downloading from Books.ru or attaching to WWW :: Mechanize</a></li>
<li><a href="../236523/index.html">Disadvantages of RDBMS or RDBMS vs NoSQL</a></li>
<li><a href="../236529/index.html">News DerbyJS 09.2014</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
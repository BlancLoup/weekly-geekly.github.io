<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>10 interesting innovations in JUnit 5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last Sunday, Sam Brannen announced the release of JUnit 5 ! Hooray! 


 Congratulations to all the participants @JUnitTeam as well as all those who us...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>10 interesting innovations in JUnit 5</h1><div class="post__text post__text-html js-mediator-article">  Last Sunday, <a href="https://twitter.com/sam_brannen">Sam Brannen</a> announced the release of <a href="http://junit.org/junit5/">JUnit 5</a> !  Hooray! <br><img src="https://habrastorage.org/web/b58/2ff/014/b582ff014975414f93267b3b66e54b4a.png"><br><br>  Congratulations to all the participants <a href="https://twitter.com/junitteam">@JUnitTeam</a> as well as all those who use JUnit in their work!  Let's see what we have prepared in this release. <a name="habracut"></a><br><br><h4>  Content </h4><br>  <b><a href="https://habr.com/ru/post/337700/">0. Introduction</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">1. Getting started</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2. Review of innovations</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.1.</a></b>  <b><a href="https://habr.com/ru/post/337700/">public - everything</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.2.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Advanced assert</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.3.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Work with exceptions</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.4.</a></b>  <b><a href="https://habr.com/ru/post/337700/">New Test</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.5.</a></b>  <b><a href="https://habr.com/ru/post/337700/">New basic annotations</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.6.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Nested classes</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.7.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Shared instance of the class to run tests</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.8.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Automatic restart of the test</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.9.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Parameterized Tests</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">2.10.</a></b>  <b><a href="https://habr.com/ru/post/337700/">Annotated default methods in interfaces</a></b> <br>  <b><a href="https://habr.com/ru/post/337700/">3. Conclusion</a></b> <br><a name="intro"></a><br><h4>  1. Introduction </h4><br>  So, the official site starts with the fact that it tells us about the new structure of JUnit: <br><blockquote>  JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage (‚Üê <a href="http://junit.org/junit5/docs/current/user-guide/">off.site</a> ). </blockquote><br>  <b><i>The JUnit Platform</i></b> is the fundamental basis for running JVM frameworks for testing.  The platform provides <a href="http://junit.org/junit5/docs/current/api/org/junit/platform/engine/TestEngine.html">TestEngine API</a> for developing frameworks (for testing) that can be run on the platform.  In addition, the platform has <a href="http://junit.org/junit5/docs/current/user-guide/">Console Launcher</a> for launching the platform from the command line as well as for launching any JUnit 4 Runner on the platform.  By the way, there are already plugins for <a href="http://junit.org/junit5/docs/current/user-guide/">Gradle</a> and <a href="http://junit.org/junit5/docs/current/user-guide/">Maven</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b><i>JUnit Jupiter</i></b> is the heart of JUnit 5. This project provides new opportunities for writing tests and creating your own extensions.  The project implemented a special TestEngine to run tests on the previously described platform. <br><br>  <b><i>JUnit Vintage</i></b> - Legacy support.  It is determined by TestEngine to run tests targeted at JUnit 3 and JUnit 4. <br><a name="getting-started"></a><br><h4>  1. Getting started </h4><br>  There are already plenty of examples on the Internet for setting up <a href="https://github.com/junit-team/junit5-samples/tree/master/junit5-gradle-consumer">Gradle</a> and <a href="https://github.com/junit-team/junit5-samples/tree/master/junit5-maven-consumer">Maven</a> projects.  The JetBrains blog has a separate post about setting up <a href="https://blog.jetbrains.com/idea/2016/08/using-junit-5-in-intellij-idea/">JUnit 5 in IDEA</a> . <br><a name="overview"></a><br><h4>  2. Review of innovations </h4><br>  And now let's move on to the examples! <br><a name="o-01"></a><br>  <b>2.1.</b>  <b>public - everything</b> <br>  JUnit no longer requires public methods. <br><br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(<span class="hljs-string"><span class="hljs-string">"It "</span></span> + <span class="hljs-string"><span class="hljs-string">" works!"</span></span> == <span class="hljs-string"><span class="hljs-string">"It works!"</span></span>); }</code> </pre> <br><a name="o-02"></a><br>  <b>2.2.</b>  <b>Advanced assert</b> <br>  The optional message was made the last argument. <br><br><pre> <code class="java hljs">assertEquals(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-string"><span class="hljs-string">"The optional assertion message is now the last parameter."</span></span>);</code> </pre> <br>  In the fifth version, you can use Supplier &lt;String&gt; to construct the message. <br><br><pre> <code class="java hljs">assertTrue(<span class="hljs-string"><span class="hljs-string">"habr"</span></span> == <span class="hljs-string"><span class="hljs-string">"habr"</span></span>, () -&gt; <span class="hljs-string"><span class="hljs-string">"Assertion messages can be lazily evaluated"</span></span>);</code> </pre> <br>  Added a special method for the logical grouping of tests. <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//      , //  -      assertAll("habr", () -&gt; assertThat("https://habrahabr.ru", startsWith("https")), () -&gt; assertThat("https://habrahabr.ru", endsWith(".ru")) );</span></span></code> </pre><br>  There was a method for working with Iterable. <br><br><pre> <code class="java hljs">assertIterableEquals(asList(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>), asList(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>));</code> </pre> <br>  Added an interesting method for comparing a rowset.  Regular expressions are supported! <br><br><pre> <code class="java hljs">Assertions.assertLinesMatch( asList(<span class="hljs-string"><span class="hljs-string">"  "</span></span>, <span class="hljs-string"><span class="hljs-string">"   regex: \\d{2}\\.\\d{2}\\.\\d{4}"</span></span>), asList(<span class="hljs-string"><span class="hljs-string">"  "</span></span>, <span class="hljs-string"><span class="hljs-string">"   regex: 12.09.2017"</span></span>) );</code> </pre><br><a name="o-03"></a>  <b>2.3.</b>  <b>Work with exceptions</b> <br>  Dealing with exceptions has become more linear. <br><br><pre> <code class="java hljs">Throwable exception = assertThrows(IllegalArgumentException.class, () -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"-   "</span></span>); }); assertEquals(<span class="hljs-string"><span class="hljs-string">"-   "</span></span>, exception.getMessage());</code> </pre><br><a name="o-04"></a>  <b>2.4.</b>  <b>New Test</b> <br>  JUnit 5 introduced the new <a href="https://habrahabr.ru/users/test/" class="user_link">Test</a> annotation, which is in the <i>org.junit.jupiter.api.Test</i> package.  Unlike the fourth version, the new annotation serves only as a marker. <br><br><div class="spoiler">  <b class="spoiler_title">See the differences</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// JUnit 4 @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.METHOD}) public @interface Test { Class&lt;? extends Throwable&gt; expected() default Test.None.class; long timeout() default 0L; public static class None extends Throwable { private static final long serialVersionUID = 1L; private None() { } } }</span></span></code> </pre> <br>  The new annotation looks like this. <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// JUnit 5 @Target({ ElementType.ANNOTATION_TYPE, ElementType.METHOD }) @Retention(RetentionPolicy.RUNTIME) @Documented @API(Stable) @Testable public @interface Test { }</span></span></code> </pre> </div></div><br><a name="o-05"></a>  <b>2.5.</b>  <b>New basic annotations</b> <br>  The fifth version added new <i>basic</i> annotations. <br><br><div class="spoiler">  <b class="spoiler_title">See a good example.</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.junit.jupiter.api.Assertions.fail; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.AfterAll; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.AfterEach; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.BeforeAll; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.BeforeEach; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.Disabled; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.Test; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StandardTests</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  @BeforeClass @BeforeAll static void initAll() { } //  @Before @BeforeEach void init() { } @Test void succeedingTest() { } @Test void failingTest() { fail("a failing test"); } //  @Ignore @Test @Disabled("for demonstration purposes") void skippedTest() { // not executed } //         . @DisplayName("‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØ") void testWithDisplayNameContainingSpecialCharacters() {} //  @After @AfterEach void tearDown() { } //  @AfterClass @AfterAll static void tearDownAll() { } }</span></span></code> </pre> </div></div><br><a name="o-06"></a>  <b>2.6.</b>  <b>Nested classes</b> <br>  The @Nested annotation allows the use of inner classes in test design, which sometimes allows for a more convenient way to group / supplement tests. <br><br><div class="spoiler">  <b class="spoiler_title">An example from official documentation.</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.junit.jupiter.api.Assertions.assertEquals; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.junit.jupiter.api.Assertions.assertFalse; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.junit.jupiter.api.Assertions.assertThrows; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> org.junit.jupiter.api.Assertions.assertTrue; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.EmptyStackException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Stack; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.BeforeEach; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.DisplayName; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.Nested; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.jupiter.api.Test; <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"A stack"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestingAStackDemo</span></span></span><span class="hljs-class"> </span></span>{ Stack&lt;Object&gt; stack; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"is instantiated with new Stack()"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isInstantiatedWithNew</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stack&lt;&gt;(); } <span class="hljs-meta"><span class="hljs-meta">@Nested</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"when new"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WhenNew</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@BeforeEach</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNewStack</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ stack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stack&lt;&gt;(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"is empty"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isEmpty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertTrue(stack.isEmpty()); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"throws EmptyStackException when popped"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throwsExceptionWhenPopped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThrows(EmptyStackException.class, () -&gt; stack.pop()); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"throws EmptyStackException when peeked"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">throwsExceptionWhenPeeked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertThrows(EmptyStackException.class, () -&gt; stack.peek()); } <span class="hljs-meta"><span class="hljs-meta">@Nested</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"after pushing an element"</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AfterPushing</span></span></span><span class="hljs-class"> </span></span>{ String anElement = <span class="hljs-string"><span class="hljs-string">"an element"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@BeforeEach</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pushAnElement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ stack.push(anElement); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"it is no longer empty"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isNotEmpty</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertFalse(stack.isEmpty()); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"returns the element when popped and is empty"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnElementWhenPopped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(anElement, stack.pop()); assertTrue(stack.isEmpty()); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-meta"><span class="hljs-meta">@DisplayName</span></span>(<span class="hljs-string"><span class="hljs-string">"returns the element when peeked but remains not empty"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returnElementWhenPeeked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(anElement, stack.peek()); assertFalse(stack.isEmpty()); } } } }</code> </pre> </div></div><br><a name="o-07"></a>  <b>2.7.</b>  <b>Shared instance of the class to run tests</b> <br>  To guarantee the independence and isolation of tests, JUnit in all previous versions has always created an instance per test (i.e., a separate instance for each method launch).  In the fifth version, this behavior can be changed using the new @TestInstance annotation (Lifecycle.PER_CLASS).  In this case, the instance will be created only once and will be reused to run all the tests defined inside this class. <br><a name="o-08"></a><br>  <b>2.8.</b>  <b>Automatic restart of the test</b> <br>  Another nice addition!  The @RepeatedTest annotation tells JUnit to run this test several times.  At the same time, each such call will be an independent test, which means that the annotations @BeforeAll, @BeforeEach, @AfterEach and @AfterAll will work for it. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RepeatedTest</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">repeatedTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"     . "</span></span>); }</code> </pre> <br>  It is worth noting that you can configure an additional display of information about the test runs.  For example, show the launch number.  Special constants defined inside the same annotation are responsible for this. <br><a name="o-09"></a><br>  <b>2.9.</b>  <b>Parameterized Tests</b> <br>  Parameterized tests allow you to run a test several times with various inputs.  Currently, only data of primitive types is supported: <i>int</i> , <i>long</i> , <i>double</i> , <i>String</i> .  But do not despair!  JUnit 5 defines several additional annotations for specifying a data source for parameterized tests.  So, let's begin! <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ParameterizedTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ValueSource</span></span>(strings = { <span class="hljs-string"><span class="hljs-string">"Hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"World"</span></span> }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWithStringParameter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String argument)</span></span></span><span class="hljs-function"> </span></span>{ assertNotNull(argument); }</code> </pre> <br>  Another inspiring example with @ValueSource. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ParameterizedTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ValueSource</span></span>(strings = { <span class="hljs-string"><span class="hljs-string">"01.01.2017"</span></span>, <span class="hljs-string"><span class="hljs-string">"31.12.2017"</span></span> }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWithConverter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@JavaTimeConversionPattern(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"dd.MM.yyyy"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> LocalDate date) </span></span>{ assertEquals(<span class="hljs-number"><span class="hljs-number">2017</span></span>, date.getYear()); }</code> </pre> <br>  Example with CSV parsing. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ParameterizedTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@CsvSource</span></span>({ <span class="hljs-string"><span class="hljs-string">"foo, 1"</span></span>, <span class="hljs-string"><span class="hljs-string">"bar, 2"</span></span>, <span class="hljs-string"><span class="hljs-string">"'baz, qux', 3"</span></span> }) <span class="hljs-comment"><span class="hljs-comment">//   : @CsvFileSource(resources = "/two-column.csv") void testWithCsvSource(String first, int second) { assertNotNull(first); assertNotEquals(0, second); }</span></span></code> </pre> <br>  An example with Enum. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ParameterizedTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnumSource</span></span>(value = TimeUnit.class, names = { <span class="hljs-string"><span class="hljs-string">"DAYS"</span></span>, <span class="hljs-string"><span class="hljs-string">"HOURS"</span></span> }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWithEnumSourceInclude</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TimeUnit timeUnit)</span></span></span><span class="hljs-function"> </span></span>{ assertTrue(EnumSet.of(TimeUnit.DAYS, TimeUnit.HOURS).contains(timeUnit)); }</code> </pre> <br>  Example with data source. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ParameterizedTest</span></span> <span class="hljs-meta"><span class="hljs-meta">@ArgumentsSource</span></span>(MyArgumentsProvider.class) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testWithArgumentsSource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String argument)</span></span></span><span class="hljs-function"> </span></span>{ assertNotNull(argument); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyArgumentsProvider</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArgumentsProvider</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Stream&lt;? extends Arguments&gt; provideArguments(ExtensionContext context) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Stream.of(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>, <span class="hljs-string"><span class="hljs-string">"bar"</span></span>).map(Arguments::of); } }</code> </pre> <br>  Even more cool examples can be found on the official website in section <a href="http://junit.org/junit5/docs/current/user-guide/">3.13.</a>  <a href="http://junit.org/junit5/docs/current/user-guide/">Parameterized Tests</a> . <br><a name="o-10"></a><br>  <b>2.10.</b>  <b>Annotated default methods in interfaces</b> <br>  JUnit now knows how to work with default methods in interfaces!  Here is one of the official examples of the application of this innovation.  I suggest to look at an interesting example with Equals Contract. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Testable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EqualsContract</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Testable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNotEqualValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">valueEqualsItself</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ T value = createValue(); assertEquals(value, value); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">valueDoesNotEqualNull</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ T value = createValue(); assertFalse(value.equals(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">valueDoesNotEqualDifferentValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ T value = createValue(); T differentValue = createNotEqualValue(); assertNotEquals(value, differentValue); assertNotEquals(differentValue, value); } }</code> </pre><br><a name="conclusion"></a><h4>  Conclusion </h4><br>  It's great that the popular testing framework is decided on such serious experiments with the API and tries to keep up with the times! <br><br>  Finally leave a couple of links: the <a href="http://junit.org/junit5/">official site JUnit 5</a> and a <a href="http://junit.org/junit5/docs/current/user-guide/">very friendly guide</a> . <br><br>  A lot of interesting things remain outside the scope of this article.  For example, a separate review is worth the extension mechanism provided by JUnit 5. <br>  Thanks for attention! <br><br>  Happy coding! </div><p>Source: <a href="https://habr.com/ru/post/337700/">https://habr.com/ru/post/337700/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337688/index.html">Docker Compose advanced configuration (translation)</a></li>
<li><a href="../337690/index.html">Yandex. Blitz. Why and what algorithmic problems need to be able to solve, working in the search</a></li>
<li><a href="../337692/index.html">Experience in implementing PSR standards in a single project</a></li>
<li><a href="../337694/index.html">VMware Announces ‚ÄúEnd‚Äù vCenter Server for Windows</a></li>
<li><a href="../337698/index.html">Writing operator for Kubernetes at Golang</a></li>
<li><a href="../337702/index.html">From Toronto to Tomsk: summing up and planning future seminars on microelectronics in Russia</a></li>
<li><a href="../337704/index.html">Moving Java forward faster</a></li>
<li><a href="../337708/index.html">DevOps with Kubernetes and VSTS. Part 2: Cloud History</a></li>
<li><a href="../337710/index.html">History 13 places on Highload Cup 2017</a></li>
<li><a href="../337712/index.html">Parrot Security OS - an alternative to Kali Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
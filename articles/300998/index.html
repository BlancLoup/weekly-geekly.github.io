<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Trees without leaves</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dream result 
 Facebook has published an article about the so-called aha-moment , in which it was stated that if a user adds 7 friends within 10 days ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Trees without leaves</h1><div class="post__text post__text-html js-mediator-article"><h2>  Dream result </h2><br>  Facebook has published an article about the so-called <a href="https://blog.modeanalytics.com/facebook-aha-moment-simpler-than-you-think/">aha-moment</a> , in which it was stated that if a user adds 7 friends within 10 days after registration, then this user remains on the service. <br><br>  Why is this result (aha-moment) so appealing? <br>  Because he: <br>  <i>a) simple</i> <i><br></i>  <i>b) meaningful</i> <i><br></i>  <i>c) actionable</i> <br><br>  When there is such a result, the service just needs to do everything to motivate users to add 7 friends in the first 10 days, and thus go to a higher goal: ‚Äúto increase the retention rate‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Can we repeat? </h2><br><a name="habracut"></a><br><img src="https://habrastorage.org/files/568/2d3/7bf/5682d37bf0754b409017e17e0f8da41a.png"><br>  Of course, any service wants to find its aha-moment.  And it is desirable that here is as simple as Facebook: so that everything is simple and clear, and without any abstractions of analysts, latent signs and other things. <br><br>  We in <a href="http://lingualeo.com/">Lingualeo</a> tried to solve the puzzle: do not steal the decision from Facebook, but come up with our own, about which Konstantin Tereshin will tell below (what a pity that he is no longer with Leo) <br><br><h2>  Formulation of the problem </h2><br>  We make one reservation: we wanted our aha-moment to be as simple and clear as the result of Facebook, and reduced to specific user actions.  This was the main requirement for the result. <br><br><h2>  Now to the task </h2><br>  In any research task, the first thing is to decide on the concepts.  What you will have in mind under the terms ‚Äúthe user will remain‚Äù, ‚Äúwill become loyal‚Äù, ‚Äúnot ottechet‚Äù and the like.  Here everyone has their own truth, each service understands this in its own way.  <b>Well, we introduced our own definition of loyalty.</b>  We will not bore you with the details of this definition.  It is important how we worked with this feature.  The only thing that needs to be noted is that loyalty is a binomial variable and takes the value 0 - if the user has not become loyal, 1 - if it has become.  This is our target variable. <br><br>  Now that we have decided on the target attribute, it remains to formalize what it means to ‚Äúfind aha-moment‚Äù? <br><br>  For example, to find a variable and a value at which the probability of users becoming loyal is maximum. <br>  But this is not an option, because you can ‚Äútighten the screws‚Äù to the maximum.  It is clear that the more a user practices (learns) words, the more likely that he is stat loyal.  But this is not an easy result. <br><br>  Or, for example, you can follow the logic of associative rules and find a list of rules of a type arranged according to support: variable value =&gt; loyalty event. <br>  A good option, BUT, the variables we have (about them later) often have a wide range of values, and as a result the dictionary of events will contain tens of thousands of positions.  Therefore, we will not get meaningful results. <br><br>  As a result, we stopped at the following logic: to find the variable and its value, which determines the limit of the trend change in the user's probability to become loyal. <br>  For example: <br>  Suppose we have a variable.  The probability of becoming loyal has the following distribution: <br><img src="https://habrastorage.org/files/cce/dfe/df1/ccedfedf1c5f4a73bdb447ac33d68121.jpg"><br><br>  The graph shows that the trend curve changes to a value of 5-6.  After that, the likelihood of becoming loyal is growing rapidly.  That is, we must find such a variable and its value, after which the probability starts to grow as much as possible. <br><br><h2>  A bit about data </h2><br>  For us it was important to determine aha-moment in the first two weeks after registration (each for himself determines the necessary period, based on the specifics of the business).  Therefore, we looked closely at this period and collected about 750 variables for analysis.  Among them: what the users did, how many times they did, how often they did, what they did on a particular day after registration, and so on and so forth. <br><br>  And a few more comments: <br>  We conducted the analysis only for users of Lingualeo mobile applications. <br>  Separately Android and iOS <br><br>  Eventually: <br>  For Android, we received a sample (the number of users is 240,862 x the number of variables is 751) <br>  For IOS received a sample (the number of users 73 712 x the number of variables 751) <br><br><h2>  How to solve the problem </h2><br>  It is clear that with hands to look at 750 variables, to find the best of them and that very meaning is not an occupation for the lazy.  Therefore, I wanted to automate all this. <br><br>  We divided the task into 2 stages: <br>  Selection of ‚Äúimportant‚Äù variables <br>  Search for the ‚Äúright‚Äù border. <br><br>  Let's start with finding the right border. <br>  Let we have a sign 1 and a target sign.  How to find the value that separates the sample ideally in such a way as to catch the trend change? <br>  When we thought about this task, an idea arose to build <a href="https://en.wikipedia.org/wiki/Decision_tree_learning">a decision tree of</a> depth 1 and on one variable. <br>  In fact, the task of the decision tree is to minimize the complexity of the system, i.e.  choose a splitting in the variable in which the level of chaos of the system decreases, and there is an intelligible criterion for evaluating chaos.  We used <a href="https://ru.wikipedia.org/wiki/%25D0%2598%25D0%25BD%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%258D%25D0%25BD%25D1%2582%25D1%2580%25D0%25BE%25D0%25BF%25D0%25B8%25D1%258F">Entropy</a> . <br>  What is the point of our case?  Since we have only two classes in the target attribute (0 is not loyal, 1 is loyal), then when we build a decision tree of depth 1 on sign 1 (priznak_1) we get one kind of splitting (given fake ones): <br><img src="https://habrastorage.org/files/b82/34f/ecd/b8234fecd31a4bc3a4aa6412fc9095d5.jpg"><br><br>  As a result, the boundary is chosen in such a way that the perfect balance is observed between the probability of class 1 on one side of the splitting and the probability of class 0 on the other.  Formally, we received the maximum ‚Äúinformation gain‚Äù (information gain). <br><br>  In fact, this is the border that we need. <br><br>  Important comment: in the end, we still don‚Äôt solve the classification problem and we don‚Äôt need to build a rougher tree, so there‚Äôs no point in talking about retraining, rather about underfitting.  But it suits us. <br><br>  Now that we understand how to search for a boundary, we need to select and rank the variables. <br>  There is also nothing supernatural here: many ensemble teaching methods have the feature_importances_ method in scikit-learn.  We used <a href="https://en.wikipedia.org/wiki/Random_forest">random forest</a> with 1000 trees of depth 10, using the f1 score as a metric.  At the exit, we got a ranked list of variables.  As is usually the case, the importance of variables has a power distribution (our case is no exception), and the most important variable goes ahead with a margin.  We decided to stay on it. <br><br><h2>  What got </h2><br>  The most important variable is the number of days during which the user gained experience on the service. <br><br>  <i>Is this a good result?</i> <br>  Yes and no.  On the one hand, we understand after how many days a ‚Äútipping point‚Äù occurs on the service, the user begins to actively use it, and can use it, on the other, we do not understand what it is doing. <br><br>  And what should we do next, because we have not achieved the desired result? <br>  And then everything is simple.  After we have a ‚Äúbasic‚Äù border, it remains to understand the difference between users on the left and right of the border.  And we went the same way as before, since the task again was to find the perfect border, but by the features that reflect the specific actions of users: word training, word addition, learning tests, grammar training and passing courses.  But now we have a different target sign: 1 - to the right of the ‚Äúbasic‚Äù border, 0 - to the left of it. <br><br>  <b>As a result, we received reference points that indicate what the user must do in order to become loyal, and these guidelines are expressed in specific user actions.</b> <br><br>  We liked the exercise, we hope you will like it too :) <br><br>  But you should add a few comments about the result, and how you need to respond to it. <br>  1) The result reflects the current mechanics of user interaction with the service.  If the service changes, the whole logic of interaction with it may change. <br>  2) In fact, our result is the essence of strong hypotheses, since if we introduce a product feature or marketing activity, we motivate users to reach the limits that we have found, it‚Äôs not a fact that they will immediately become loyal.  This will have to be tested. <br><br>  PS: and we also have <a href="http://corp.lingualeo.com/ru/careers/">analyst vacancies</a> !  Come to work with us! </div><p>Source: <a href="https://habr.com/ru/post/300998/">https://habr.com/ru/post/300998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../300986/index.html">Business Processes: How everything is started and confused. Chapter Two "Flies and cutlets"</a></li>
<li><a href="../300988/index.html">The backdoor in the Linux kernel of the Chinese manufacturer ARM opens up access to the smartphone with one command</a></li>
<li><a href="../300990/index.html">Is Tesseract recognizes slow?</a></li>
<li><a href="../300992/index.html">The main rules of communication technician in a web studio with a client</a></li>
<li><a href="../300994/index.html">Process approach to management: a tribute to fashion or success?</a></li>
<li><a href="../301000/index.html">Separation of control and data plane in network equipment</a></li>
<li><a href="../301004/index.html">Unchangeable objects in PHP</a></li>
<li><a href="../301006/index.html">C ++ compiler warnings: cannot be refused</a></li>
<li><a href="../301008/index.html">Racing in the sky: an interview with a professional drone pilot</a></li>
<li><a href="../301016/index.html">Vulnerabilities in the proxy connection: how antiviruses reduce the security of the Internet browser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Weapon system through components in Unreal Engine 4</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, in this article I want to share with readers my view on the approach to developing on the Unreal Engine 4 and using such a useful class as Acto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Weapon system through components in Unreal Engine 4</h1><div class="post__text post__text-html js-mediator-article">  Hello, in this article I want to share with readers my view on the approach to developing on the Unreal Engine 4 and using such a useful class as Actor Component. <br><br>  I noticed that in different tutorials for Unreal Engine 4 often use a deep and complex hierarchy of class inheritance.  Although the Unreal Engine 4 itself pushes to use the component approach based on the Actor Component. <br><a name="habracut"></a><br>  If the reader is not familiar with what Actor, Actor Component is and the Blueprints visual scripting system, then first I recommend reading the following materials: <br><br>  <a href="https://docs.unrealengine.com/latest/INT/Programming/UnrealArchitecture/Actors/index.html">Unreal Engine 4 / Gameplay Programming / Actors</a> or material in Russian <a href="https://habrahabr.ru/post/257827/">Introduction to the development of C ++ in UE4 Part 2</a> (section Gameplay classes: Object, Actor and Component) <br>  <a href="https://habrahabr.ru/post/344446/">Tutorial on the Unreal Engine.</a>  <a href="https://habrahabr.ru/post/344446/">Part 2: Blueprints</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Problem </h2><br>  As an example, consider such a thing as a weapon in shooters.  It is common practice to create the BaseGun Actor class and implement weapon firing logic in this class, scatter when shooting, create a shooting effect, instantiate Projectile (bullet), etc. This class usually describes most of the functionality of different types of weapons: pistol, rifle, machine.  Later, new types of weapons are implemented by inheriting from BaseGun. <br><br>  What to do if you need to add a shotgun or sniper rifle to the game? <br><br>  Often, in this case, create descendants classes for new types of weapons.  For a sniper rifle, the descendant class will implement additional logic to enable / disable the sniper scope and reduce scatter when shooting through the scope.  In the case of a shotgun, you will need to rewrite (override) the logic for firing.  After all, a shotgun does not shoot a bullet - it shoots a shot. <br><br>  It turns out that when a new type of weapon is added to the game, the developer will perform the following set of actions: <br><br><ul><li>  creating a descendant class from one of the already existing weapons or from BaseGun; </li><li>  modifying (override) or expanding the logic of the parent class. </li></ul><br>  This is where the problems arise.  The deeper the class hierarchy, the more time it takes a programmer to figure out / remember how the logic of code execution is arranged.  And with this approach, you will have to constantly make changes to the parent classes (up to BaseGun).  The reason is that at the time of designing the base classes, the developer will almost certainly not be able to figure out which types of weapons will be in the final version of the game. <br><br>  <i>There is another way.</i>  <i>Add logic for the shotgun and sniper rifle to the BaseGun class.</i>  <i>But over time, we get a bold class (God object), which does "too much" and violates the principle of "divide and conquer."</i>  <i>Making such classes is a bad development strategy.</i> <br><br><h2>  Decision </h2><br>  And if you transfer the logic of weapons in the components?  First, determine the list of actions that a player can do with a weapon.  All these actions are added to Enum E_WeaponActionType. <br><br><img src="https://habrastorage.org/webt/hy/z4/ww/hyz4wwyytqsk2rlkwsgm4_11u-4.png"><br><br>  To create weapons, we need two classes: BP_BaseWeapon and BP_Weapon_Action. <br><br><h2>  BP_BaseWeapon </h2><br>  BP_BaseWeapon is Actor, for all weapons it will be the base and base class.  In BP_BaseWeapon, we add a CustomAction to every action from the E_WeaponActionType.  These actions will be the player interaction interface with the weapon.  Also BP_BaseWeapon will contain a collection of objects of type BP_Weapon_Action. <br><br><img src="https://habrastorage.org/webt/jk/v7/ju/jkv7juqzkmbeu5408dt_swx2a1q.png"><br><br><h2>  BP_Weapon_Action </h2><br>  BP_Weapon_Action is an ActorComponent, the descendants of this class will implement the weapon's behavior: shot, reload, enable / disable the sniper scope, etc. Each BP_Weapon_Action contains a link to the weapon, as well as the type of action that a particular BP_Weapon_Action performs.  Another BP_Weapon_Action contains a set of public functions for working with it from BP_BaseWeapon (StartUseAction, StopUseAction, IsCanUseAction), as well as several protected functions and properties. <br><br><img src="https://habrastorage.org/webt/lg/av/x5/lgavx5p_8jvsvxkm202qumyd1wa.png"><br><br>  <i>BP_BaseWeapon and BP_Weapon_Action will be marked as abstract classes in order not to instantiate them by chance.</i>  <i>But for their descendants we will not do that.</i> <br><br><img src="https://habrastorage.org/webt/ij/ix/iz/ijixizhok3wm6yk8-2hv3zxwp5c.png"><br><br>  And now what a machine gun with a grenade launcher and a gun would look like.  This will be a descendant of the class BP_BaseWeapon, in which you need to put three components: <br><br><ul><li>  BP_Fire_Action - implements the behavior of firing cartridges, has a type of Main from E_WeaponActionType; </li><li>  BP_Scope_Action - implements on / off display of sniper scope, has the type Secondary of E_WeaponActionType; </li><li>  BP_Scope_Action - implements shooting from a grenade launcher, has the type Special from E_WeaponActionType. </li></ul><br>  When an event is triggered in BP_BaseWeapon, the corresponding behavior will be searched for and StartUseAction will be called for it.  For example, when calling UseWeaponAction_Main, BP_Fire_Action will be found and our weapon will fire. <br><br><img src="https://habrastorage.org/webt/rs/bh/k3/rsbhk3ybjp6pnj6nm0y2w7gj-ki.png"><br><br>  The advantage of this approach is that if a new type of weapon requires a new behavior, we do not rewrite BaseGun or some other parent class and do not override its logic.  We create a child of BP_BaseWeapon, and then simply add and customize components that implement the behavior of a new type of weapon.  So, we collect new classes from ready-made blocks.  If there is no behavior, we simply add a new component based on BP_Weapon_Action. <br><br>  The use of the described campaign is not limited to the creation of different types of weapons.  It can be extended to other gaming subsystems: <br><br><ul><li>  Gamemode for different game modes; </li><li>  game abilities of characters; </li><li>  create a variety of mobs; </li><li>  creation of various interactive game objects, etc. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/346108/">https://habr.com/ru/post/346108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346086/index.html">Docker-compose: the perfect working environment</a></li>
<li><a href="../346090/index.html">11 libraries (sets of components) for React, which are worth knowing in 2018</a></li>
<li><a href="../346098/index.html">Compile a DNS query manually</a></li>
<li><a href="../346102/index.html">Fresh utilities, plugins and productivity tools for the designer. Issue number 4</a></li>
<li><a href="../346106/index.html">Release Rust 1.23</a></li>
<li><a href="../346110/index.html">How to build a geographic dashboard with real-time data</a></li>
<li><a href="../346112/index.html">Telegram-bot as a gift</a></li>
<li><a href="../346114/index.html">Meltdown: not only affects performance</a></li>
<li><a href="../346116/index.html">Restate - or how to turn a Redux log into a tree</a></li>
<li><a href="../346118/index.html">MPS 2017.3 released</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We make a video surveillance system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="System description 
 Standard video intercoms have known limitations on picture quality and viewing angle. In addition, video intercoms, as a rule, do...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We make a video surveillance system</h1><div class="post__text post__text-html js-mediator-article"><h4>  System description </h4><br>  Standard video intercoms have known limitations on picture quality and viewing angle.  In addition, video intercoms, as a rule, do not perform video archiving and do not support viewing video by external devices.  As an addition to the video intercom, the author has designed and implemented this system privately. <br><br>  The system is an analogue of a video eye connected to a TV set, which archives video and supports viewing video via a local network (LAN or Wi-Fi).  The main elements of the system are: IP camera, switch with PoE support, nettop, Wi-Fi router.  The software installed on the nettop provides: <br>  - viewing video from an IP camera on a TV connected to a nettop via HDMI; <br>  - archiving video from an IP camera to a nettop hard drive (1 hour of video requires about 1.3 GB); <br>  - viewing video from an IP camera on devices connected to the nettop, as to a web server (works with any browser); <br>  - view video from IP-camera on devices connected to the nettop, as a DLNA-server. <br><br>  Block diagram of the system: <br><img src="https://habrastorage.org/getpro/habr/post_images/097/ef6/1ae/097ef61ae1e3a59df36ffa55b1a9569b.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><h4>  Hardware </h4><br>  The following main hardware was used to build the system: <br>  - Hikvision DS-2CD7164-E IP camera; <br>  - Switch with PoE D-Link DGS-1008P support (8 ports, 4 of them with PoE support); <br>  - UTP 5e cable for external installation; <br>  - Nettop ASUS EeeBox EB1021; <br>  - Wireless keyboard with touchpad Logitech K400; <br>  - ZyXEL Keenetic Giga Wi-Fi router (4 LAN ports, 1 WAN port, 2 USB ports, Wi-Fi). <br><br>  The used IP-camera has a high sensitivity (at dusk or in the presence of snow it continues to work in color mode), however, additional lighting is required to get a high-quality picture at night.  Otherwise, the picture is not informative (the contrast of the image depends on the device used for viewing): <br><img src="https://habrastorage.org/getpro/habr/post_images/1b7/100/043/1b7100043c2a72c9bab4471ab245447f.jpg" alt="image"><br><br>  Wi-Fi router is installed at the floor level on the third floor of a private house.  On the second floor, under the premises of the Wi-Fi router, the signal is stable.  However, the signal loses stability beyond the main brick wall.  On the first floor, under the Wi-Fi router room, the signal is steady within a radius of about 3 meters from the Wi-Fi router installation site. <br><br><h4>  Software </h4><br>  When building the system, the following main software was used (installed on a nettop): <br>  - <a href="http://game1vs100.ru/alphacity/tree/prjs-web.htm">ipc preview</a> (viewing, archiving, web-server); <br>  - <a href="http://www.serviio.org/">serviio</a> (DLNA server). <br><br>  Nettop running the operating system Microsoft Windows 7 (64-bit). <br><br>  The built-in web server of the IP camera, the standard Hikvision software and the specialized Trassir software did not meet the system requirements due to problems with video archiving, a complicated interface and a hard link to the platform on which the video is viewed.  Therefore, especially for this system, the author has developed an <a href="http://game1vs100.ru/alphacity/tree/prjs-web.htm">ipc preview</a> application that provides direct video archiving, has a simple interface and allows you to watch videos with any browser.  This software is implemented in C ++ in the Borland C ++ Builder environment and is distributed with source code. <br><br>  <a href="http://game1vs100.ru/alphacity/tree/prjs-web.htm">ipc preview</a> receives main stream from an IP camera (1280 x 960, 25 fps, 3072 kbps max).  The stream is displayed, archived and broadcast by the web server as a JPEG sequence or MJPEG stream.  The resolution and quality of the broadcast is indicated by the client when the resource is opened.  For a JPEG sequence, the frame rate is defined in the resource code.  For the MJPEG stream, the frame rate is defined in the web server settings.  The default frame rate is 2 fps. <br><br>  <a href="http://www.serviio.org/">serviio</a> receives a sub stream (704 x 576, 12 fps, 192 kbps max) from the IP camera.  The link to the stream is of the form rtsp: // admin: 12345@192.0.0.64/h264/ch1/sub/av_stream.  The stream is broadcast by a DLNA server.  Negative points noted when using a DLNA server: <br>  - the resolution and frame rate of the main stream were too large for the connected TV; <br>  - the stream opening procedure does not differ in convenience, since the connected TV does not allow assigning a key on the remote control to the stream; <br>  - when you open a stream on the TV a brief message appears about the absence of an audio stream. <br><br>  CPU load nettop is about 40%. <br><br><h4>  Mating devices </h4><br>  The function of viewing video from an IP camera was tested on the following devices: <br>  - TV (HDMI: nettop -&gt; TV); <br>  - TV (DLNA LAN: nettop-&gt; switch-&gt; TV); <br>  - Smartphone (Wi-Fi: nettop-&gt; switch-&gt; Wi-Fi router-&gt; smartphone); <br>  - Laptop (Wi-Fi: nettop-&gt; switch-&gt; Wi-Fi router-&gt; laptop); <br>  - PC (LAN: nettop-&gt; switch-&gt; Wi-Fi router-&gt; PC). <br><br>  Video viewing on a smartphone, laptop and PC is carried out using the browser installed on the device. <br><br>  You can remotely view video over the Internet using a browser (a nettop connection to the Internet is required, a static or dynamic IP address or a virtual LAN, for example, using the <a href="https://secure.logmein.com/products/hamachi/">hamachi</a> program). <br><br><h4>  Issue price </h4><br>  The cost of the system was about 1 000 USD.  Of them: <br>  - IP camera - about 300 USD; <br>  - switchboard - about 130 USD; <br>  - nettop - about 460 USD; <br>  - Wi-Fi router - about 100 USD. <br><br>  It should be noted that in the described system nettop and Wi-Fi router are actively used as a universal media player and for distributing the Internet to mobile devices, respectively.  Thus, the cost of these components can be excluded from the total cost of the system.  If the system is not planned to be expanded, a direct connection of the IP camera to the Wi-Fi router is possible via the PoE injector (about 50 USD).  In this case, the cost of the system will be determined by the cost of the IP camera and will be about 350 USD. <br><br><h4>  Photo report </h4><br>  IP camera (upper right corner of the gate, painted in the color of the gate): <br><img src="https://habrastorage.org/getpro/habr/post_images/c62/fc6/0c6/c62fc60c619b50899af12a3958f067cf.jpg" alt="image"><br><br>  IP camera - near view: <br><img src="https://habrastorage.org/getpro/habr/post_images/8d0/530/6c0/8d05306c05856beae5b4346f644fdb12.jpg" alt="image"><br><br>  Mounting IP-cameras (bent corner, bending angle is calculated depending on the camera angle): <br><img src="https://habrastorage.org/getpro/habr/post_images/8ae/ee8/021/8aeee80218d66242a36ef30085c2eb7a.jpg" alt="image"><br><br>  Box for connecting the IP camera to the network (the power supply hole is false, all holes are sealed): <br><img src="https://habrastorage.org/getpro/habr/post_images/9f8/2f2/068/9f82f2068c344058e2abe7cee34ddae0.jpg" alt="image"><br><br>  Cable entry point in the basement (cables: from the bottom - from the IP camera, on the left - to the Wi-Fi router, on the right - to the nettop): <br><img src="https://habrastorage.org/getpro/habr/post_images/5bd/d4f/cd6/5bdd4fcd63c291e37b65c75188402bf4.jpg" alt="image"><br><br>  Fixing the switch in the basement (standing on the corners with restrictive screws): <br><img src="https://habrastorage.org/getpro/habr/post_images/73c/7f6/817/73c7f6817689ac9338cbba16f0007db2.jpg" alt="image"><br><br>  Attaching the cable to the Wi-Fi router (the vertical section hangs freely, there were no problems with wind load and icing): <br><img src="https://habrastorage.org/getpro/habr/post_images/bb1/db2/860/bb1db28608ce80b30d39707cd7b02f2d.jpg" alt="image"><br><br>  The cable entry point to the Wi-Fi router room (the cable is firmly fixed in the hole with a rubber stopper, the hole is sealed, the end of the cable is cut in the socket, an internal cable is laid from the socket to the Wi-Fi router): <br><img src="https://habrastorage.org/getpro/habr/post_images/950/ea9/bef/950ea9bef4c811d7ec77466573dfcb58.jpg" alt="image"><br><br>  Wi-Fi router (cables: left - from the switch, right - to the PC): <br><img src="https://habrastorage.org/getpro/habr/post_images/d64/3ef/544/d643ef54449263eb8a9b55ccda82e904.jpg" alt="image"><br><br>  TV connected to nettop via HDMI: <br><img src="https://habrastorage.org/getpro/habr/post_images/cb7/079/d7d/cb7079d7d36e93e71043db9afe5d0f1f.jpg" alt="image"><br><br>  Smartphone connected to a web server via Wi-Fi: <br><img src="https://habrastorage.org/getpro/habr/post_images/fe2/be7/0f8/fe2be70f8d73fd4d6f0894b717e65d9e.jpg" alt="image"><br><br>  Laptop connected to a web server via Wi-Fi: <br><img src="https://habrastorage.org/getpro/habr/post_images/6e0/014/d2c/6e0014d2c512121dc7dbe7595e347a8b.jpg" alt="image"><br><br>  PC connected to a web server via LAN: <br><img src="https://habrastorage.org/getpro/habr/post_images/f1b/bc3/9a6/f1bbc39a6963cd06dfc0270a382d20cd.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/177071/">https://habr.com/ru/post/177071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177059/index.html">Dates in JavaScript: the number of days in the month and some features of Safari</a></li>
<li><a href="../177063/index.html">4 mistakes that I made as CTO</a></li>
<li><a href="../177065/index.html">Deploying a Mac OS Workstation Management Infrastructure with Parallels Management Add-on for SCCM 2007/2012</a></li>
<li><a href="../177067/index.html">Emergency data recovery in the mysql table with minimal time loss</a></li>
<li><a href="../177069/index.html">How to reduce the amount of code written with ajax requests? And asynchronous file sending</a></li>
<li><a href="../177073/index.html">Features of the transition from 300 mm to 450 mm silicon wafers</a></li>
<li><a href="../177075/index.html">Data Dependency Template</a></li>
<li><a href="../177079/index.html">And how much "weigh" the pages of your site?</a></li>
<li><a href="../177083/index.html">JQuery plugin for translating pages using html5 data- * attributes</a></li>
<li><a href="../177085/index.html">Creating and storing backup copies of databases in MS SQL. Practical advice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>